(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var $k=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gp(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var ym={exports:{}},eu={};var z0;function iw(){if(z0)return eu;z0=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:h,ref:o!==void 0?o:null,props:u}}return eu.Fragment=e,eu.jsx=n,eu.jsxs=n,eu}var B0;function sw(){return B0||(B0=1,ym.exports=iw()),ym.exports}var _=sw(),vm={exports:{}},ut={};var q0;function aw(){if(q0)return ut;q0=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function w(O){return O===null||typeof O!="object"?null:(O=S&&O[S]||O["@@iterator"],typeof O=="function"?O:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,B={};function _e(O,G,ee){this.props=O,this.context=G,this.refs=B,this.updater=ee||j}_e.prototype.isReactComponent={},_e.prototype.setState=function(O,G){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,G,"setState")},_e.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function fe(){}fe.prototype=_e.prototype;function te(O,G,ee){this.props=O,this.context=G,this.refs=B,this.updater=ee||j}var Se=te.prototype=new fe;Se.constructor=te,q(Se,_e.prototype),Se.isPureReactComponent=!0;var Ge=Array.isArray;function Be(){}var N={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function x(O,G,ee){var ie=ee.ref;return{$$typeof:i,type:O,key:G,ref:ie!==void 0?ie:null,props:ee}}function V(O,G){return x(O.type,G,O.props)}function k(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function P(O){var G={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ee){return G[ee]})}var I=/\/+/g;function Ke(O,G){return typeof O=="object"&&O!==null&&O.key!=null?P(""+O.key):G.toString(36)}function it(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(Be,Be):(O.status="pending",O.then(function(G){O.status==="pending"&&(O.status="fulfilled",O.value=G)},function(G){O.status==="pending"&&(O.status="rejected",O.reason=G)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function Y(O,G,ee,ie,Re){var Ee=typeof O;(Ee==="undefined"||Ee==="boolean")&&(O=null);var Me=!1;if(O===null)Me=!0;else switch(Ee){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(O.$$typeof){case i:case e:Me=!0;break;case v:return Me=O._init,Y(Me(O._payload),G,ee,ie,Re)}}if(Me)return Re=Re(O),Me=ie===""?"."+Ke(O,0):ie,Ge(Re)?(ee="",Me!=null&&(ee=Me.replace(I,"$&/")+"/"),Y(Re,G,ee,"",function(Pe){return Pe})):Re!=null&&(k(Re)&&(Re=V(Re,ee+(Re.key==null||O&&O.key===Re.key?"":(""+Re.key).replace(I,"$&/")+"/")+Me)),G.push(Re)),1;Me=0;var st=ie===""?".":ie+":";if(Ge(O))for(var he=0;he<O.length;he++)ie=O[he],Ee=st+Ke(ie,he),Me+=Y(ie,G,ee,Ee,Re);else if(he=w(O),typeof he=="function")for(O=he.call(O),he=0;!(ie=O.next()).done;)ie=ie.value,Ee=st+Ke(ie,he++),Me+=Y(ie,G,ee,Ee,Re);else if(Ee==="object"){if(typeof O.then=="function")return Y(it(O),G,ee,ie,Re);throw G=String(O),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return Me}function ce(O,G,ee){if(O==null)return O;var ie=[],Re=0;return Y(O,ie,"","",function(Ee){return G.call(ee,Ee,Re++)}),ie}function ve(O){if(O._status===-1){var G=O._result;G=G(),G.then(function(ee){(O._status===0||O._status===-1)&&(O._status=1,O._result=ee)},function(ee){(O._status===0||O._status===-1)&&(O._status=2,O._result=ee)}),O._status===-1&&(O._status=0,O._result=G)}if(O._status===1)return O._result.default;throw O._result}var pe=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Le={map:ce,forEach:function(O,G,ee){ce(O,function(){G.apply(this,arguments)},ee)},count:function(O){var G=0;return ce(O,function(){G++}),G},toArray:function(O){return ce(O,function(G){return G})||[]},only:function(O){if(!k(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return ut.Activity=T,ut.Children=Le,ut.Component=_e,ut.Fragment=n,ut.Profiler=o,ut.PureComponent=te,ut.StrictMode=s,ut.Suspense=p,ut.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,ut.__COMPILER_RUNTIME={__proto__:null,c:function(O){return N.H.useMemoCache(O)}},ut.cache=function(O){return function(){return O.apply(null,arguments)}},ut.cacheSignal=function(){return null},ut.cloneElement=function(O,G,ee){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ie=q({},O.props),Re=O.key;if(G!=null)for(Ee in G.key!==void 0&&(Re=""+G.key),G)!R.call(G,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&G.ref===void 0||(ie[Ee]=G[Ee]);var Ee=arguments.length-2;if(Ee===1)ie.children=ee;else if(1<Ee){for(var Me=Array(Ee),st=0;st<Ee;st++)Me[st]=arguments[st+2];ie.children=Me}return x(O.type,Re,ie)},ut.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},ut.createElement=function(O,G,ee){var ie,Re={},Ee=null;if(G!=null)for(ie in G.key!==void 0&&(Ee=""+G.key),G)R.call(G,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(Re[ie]=G[ie]);var Me=arguments.length-2;if(Me===1)Re.children=ee;else if(1<Me){for(var st=Array(Me),he=0;he<Me;he++)st[he]=arguments[he+2];Re.children=st}if(O&&O.defaultProps)for(ie in Me=O.defaultProps,Me)Re[ie]===void 0&&(Re[ie]=Me[ie]);return x(O,Ee,Re)},ut.createRef=function(){return{current:null}},ut.forwardRef=function(O){return{$$typeof:g,render:O}},ut.isValidElement=k,ut.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:ve}},ut.memo=function(O,G){return{$$typeof:m,type:O,compare:G===void 0?null:G}},ut.startTransition=function(O){var G=N.T,ee={};N.T=ee;try{var ie=O(),Re=N.S;Re!==null&&Re(ee,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(Be,pe)}catch(Ee){pe(Ee)}finally{G!==null&&ee.types!==null&&(G.types=ee.types),N.T=G}},ut.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},ut.use=function(O){return N.H.use(O)},ut.useActionState=function(O,G,ee){return N.H.useActionState(O,G,ee)},ut.useCallback=function(O,G){return N.H.useCallback(O,G)},ut.useContext=function(O){return N.H.useContext(O)},ut.useDebugValue=function(){},ut.useDeferredValue=function(O,G){return N.H.useDeferredValue(O,G)},ut.useEffect=function(O,G){return N.H.useEffect(O,G)},ut.useEffectEvent=function(O){return N.H.useEffectEvent(O)},ut.useId=function(){return N.H.useId()},ut.useImperativeHandle=function(O,G,ee){return N.H.useImperativeHandle(O,G,ee)},ut.useInsertionEffect=function(O,G){return N.H.useInsertionEffect(O,G)},ut.useLayoutEffect=function(O,G){return N.H.useLayoutEffect(O,G)},ut.useMemo=function(O,G){return N.H.useMemo(O,G)},ut.useOptimistic=function(O,G){return N.H.useOptimistic(O,G)},ut.useReducer=function(O,G,ee){return N.H.useReducer(O,G,ee)},ut.useRef=function(O){return N.H.useRef(O)},ut.useState=function(O){return N.H.useState(O)},ut.useSyncExternalStore=function(O,G,ee){return N.H.useSyncExternalStore(O,G,ee)},ut.useTransition=function(){return N.H.useTransition()},ut.version="19.2.0",ut}var F0;function yp(){return F0||(F0=1,vm.exports=aw()),vm.exports}var U=yp();const me=gp(U);var _m={exports:{}},tu={},bm={exports:{}},Em={};var H0;function ow(){return H0||(H0=1,(function(i){function e(Y,ce){var ve=Y.length;Y.push(ce);e:for(;0<ve;){var pe=ve-1>>>1,Le=Y[pe];if(0<o(Le,ce))Y[pe]=ce,Y[ve]=Le,ve=pe;else break e}}function n(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var ce=Y[0],ve=Y.pop();if(ve!==ce){Y[0]=ve;e:for(var pe=0,Le=Y.length,O=Le>>>1;pe<O;){var G=2*(pe+1)-1,ee=Y[G],ie=G+1,Re=Y[ie];if(0>o(ee,ve))ie<Le&&0>o(Re,ee)?(Y[pe]=Re,Y[ie]=ve,pe=ie):(Y[pe]=ee,Y[G]=ve,pe=G);else if(ie<Le&&0>o(Re,ve))Y[pe]=Re,Y[ie]=ve,pe=ie;else break e}}return ce}function o(Y,ce){var ve=Y.sortIndex-ce.sortIndex;return ve!==0?ve:Y.id-ce.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var h=Date,g=h.now();i.unstable_now=function(){return h.now()-g}}var p=[],m=[],v=1,T=null,S=3,w=!1,j=!1,q=!1,B=!1,_e=typeof setTimeout=="function"?setTimeout:null,fe=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function Se(Y){for(var ce=n(m);ce!==null;){if(ce.callback===null)s(m);else if(ce.startTime<=Y)s(m),ce.sortIndex=ce.expirationTime,e(p,ce);else break;ce=n(m)}}function Ge(Y){if(q=!1,Se(Y),!j)if(n(p)!==null)j=!0,Be||(Be=!0,P());else{var ce=n(m);ce!==null&&it(Ge,ce.startTime-Y)}}var Be=!1,N=-1,R=5,x=-1;function V(){return B?!0:!(i.unstable_now()-x<R)}function k(){if(B=!1,Be){var Y=i.unstable_now();x=Y;var ce=!0;try{e:{j=!1,q&&(q=!1,fe(N),N=-1),w=!0;var ve=S;try{t:{for(Se(Y),T=n(p);T!==null&&!(T.expirationTime>Y&&V());){var pe=T.callback;if(typeof pe=="function"){T.callback=null,S=T.priorityLevel;var Le=pe(T.expirationTime<=Y);if(Y=i.unstable_now(),typeof Le=="function"){T.callback=Le,Se(Y),ce=!0;break t}T===n(p)&&s(p),Se(Y)}else s(p);T=n(p)}if(T!==null)ce=!0;else{var O=n(m);O!==null&&it(Ge,O.startTime-Y),ce=!1}}break e}finally{T=null,S=ve,w=!1}ce=void 0}}finally{ce?P():Be=!1}}}var P;if(typeof te=="function")P=function(){te(k)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Ke=I.port2;I.port1.onmessage=k,P=function(){Ke.postMessage(null)}}else P=function(){_e(k,0)};function it(Y,ce){N=_e(function(){Y(i.unstable_now())},ce)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Y){Y.callback=null},i.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Y?Math.floor(1e3/Y):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_next=function(Y){switch(S){case 1:case 2:case 3:var ce=3;break;default:ce=S}var ve=S;S=ce;try{return Y()}finally{S=ve}},i.unstable_requestPaint=function(){B=!0},i.unstable_runWithPriority=function(Y,ce){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ve=S;S=Y;try{return ce()}finally{S=ve}},i.unstable_scheduleCallback=function(Y,ce,ve){var pe=i.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?pe+ve:pe):ve=pe,Y){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=ve+Le,Y={id:v++,callback:ce,priorityLevel:Y,startTime:ve,expirationTime:Le,sortIndex:-1},ve>pe?(Y.sortIndex=ve,e(m,Y),n(p)===null&&Y===n(m)&&(q?(fe(N),N=-1):q=!0,it(Ge,ve-pe))):(Y.sortIndex=Le,e(p,Y),j||w||(j=!0,Be||(Be=!0,P()))),Y},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(Y){var ce=S;return function(){var ve=S;S=ce;try{return Y.apply(this,arguments)}finally{S=ve}}}})(Em)),Em}var G0;function lw(){return G0||(G0=1,bm.exports=ow()),bm.exports}var Tm={exports:{}},ir={};var K0;function uw(){if(K0)return ir;K0=1;var i=yp();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,m,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:p,containerInfo:m,implementation:v}}var h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return ir.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ir.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return u(p,m,null,v)},ir.flushSync=function(p){var m=h.T,v=s.p;try{if(h.T=null,s.p=2,p)return p()}finally{h.T=m,s.p=v,s.d.f()}},ir.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(p,m))},ir.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},ir.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,T=g(v,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,w=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:w}):v==="script"&&s.d.X(p,{crossOrigin:T,integrity:S,fetchPriority:w,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},ir.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=g(m.as,m.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(p)},ir.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,T=g(v,m.crossOrigin);s.d.L(p,v,{crossOrigin:T,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},ir.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=g(m.as,m.crossOrigin);s.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(p)},ir.requestFormReset=function(p){s.d.r(p)},ir.unstable_batchedUpdates=function(p,m){return p(m)},ir.useFormState=function(p,m,v){return h.H.useFormState(p,m,v)},ir.useFormStatus=function(){return h.H.useHostTransitionStatus()},ir.version="19.2.0",ir}var Q0;function Ub(){if(Q0)return Tm.exports;Q0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Tm.exports=uw(),Tm.exports}var Y0;function cw(){if(Y0)return tu;Y0=1;var i=lw(),e=yp(),n=Ub();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function h(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function p(t){if(u(t)!==t)throw Error(s(188))}function m(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return p(d),t;if(f===l)return p(d),r;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=d,l=f;else{for(var b=!1,A=d.child;A;){if(A===a){b=!0,a=d,l=f;break}if(A===l){b=!0,l=d,a=f;break}A=A.sibling}if(!b){for(A=f.child;A;){if(A===a){b=!0,a=f,l=d;break}if(A===l){b=!0,l=f,a=d;break}A=A.sibling}if(!b)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function v(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=v(t),r!==null)return r;t=t.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),_e=Symbol.for("react.profiler"),fe=Symbol.for("react.consumer"),te=Symbol.for("react.context"),Se=Symbol.for("react.forward_ref"),Ge=Symbol.for("react.suspense"),Be=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function P(t){return t===null||typeof t!="object"?null:(t=k&&t[k]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function Ke(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case q:return"Fragment";case _e:return"Profiler";case B:return"StrictMode";case Ge:return"Suspense";case Be:return"SuspenseList";case x:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case j:return"Portal";case te:return t.displayName||"Context";case fe:return(t._context.displayName||"Context")+".Consumer";case Se:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return r=t.displayName||null,r!==null?r:Ke(t.type)||"Memo";case R:r=t._payload,t=t._init;try{return Ke(t(r))}catch{}}return null}var it=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},pe=[],Le=-1;function O(t){return{current:t}}function G(t){0>Le||(t.current=pe[Le],pe[Le]=null,Le--)}function ee(t,r){Le++,pe[Le]=t.current,t.current=r}var ie=O(null),Re=O(null),Ee=O(null),Me=O(null);function st(t,r){switch(ee(Ee,r),ee(Re,t),ee(ie,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?u0(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=u0(r),t=c0(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}G(ie),ee(ie,t)}function he(){G(ie),G(Re),G(Ee)}function Pe(t){t.memoizedState!==null&&ee(Me,t);var r=ie.current,a=c0(r,t.type);r!==a&&(ee(Re,t),ee(ie,a))}function ot(t){Re.current===t&&(G(ie),G(Re)),Me.current===t&&(G(Me),$l._currentValue=ve)}var mt,ae;function ge(t){if(mt===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);mt=r&&r[1]||"",ae=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mt+t+ae}var Ae=!1;function oe(t,r){if(!t||Ae)return"";Ae=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(W){var X=W}Reflect.construct(t,[],se)}else{try{se.call()}catch(W){X=W}t.call(se.prototype)}}else{try{throw Error()}catch(W){X=W}(se=t())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(W){if(W&&X&&typeof W.stack=="string")return[W.stack,X.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),b=f[0],A=f[1];if(b&&A){var M=b.split(`
`),Q=A.split(`
`);for(d=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;d<Q.length&&!Q[d].includes("DetermineComponentFrameRoot");)d++;if(l===M.length||d===Q.length)for(l=M.length-1,d=Q.length-1;1<=l&&0<=d&&M[l]!==Q[d];)d--;for(;1<=l&&0<=d;l--,d--)if(M[l]!==Q[d]){if(l!==1||d!==1)do if(l--,d--,0>d||M[l]!==Q[d]){var J=`
`+M[l].replace(" at new "," at ");return t.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",t.displayName)),J}while(1<=l&&0<=d);break}}}finally{Ae=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ge(a):""}function Ce(t,r){switch(t.tag){case 26:case 27:case 5:return ge(t.type);case 16:return ge("Lazy");case 13:return t.child!==r&&r!==null?ge("Suspense Fallback"):ge("Suspense");case 19:return ge("SuspenseList");case 0:case 15:return oe(t.type,!1);case 11:return oe(t.type.render,!1);case 1:return oe(t.type,!0);case 31:return ge("Activity");default:return""}}function De(t){try{var r="",a=null;do r+=Ce(t,a),a=t,t=t.return;while(t);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ve=Object.prototype.hasOwnProperty,ke=i.unstable_scheduleCallback,Ze=i.unstable_cancelCallback,sn=i.unstable_shouldYield,_t=i.unstable_requestPaint,jt=i.unstable_now,wn=i.unstable_getCurrentPriorityLevel,Dt=i.unstable_ImmediatePriority,Xe=i.unstable_UserBlockingPriority,At=i.unstable_NormalPriority,Ur=i.unstable_LowPriority,xn=i.unstable_IdlePriority,ur=i.log,gr=i.unstable_setDisableYieldValue,vn=null,Wt=null;function Xt(t){if(typeof ur=="function"&&gr(t),Wt&&typeof Wt.setStrictMode=="function")try{Wt.setStrictMode(vn,t)}catch{}}var bt=Math.clz32?Math.clz32:cr,xr=Math.log,rr=Math.LN2;function cr(t){return t>>>=0,t===0?32:31-(xr(t)/rr|0)|0}var zn=256,Nn=262144,Ct=4194304;function an(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Gn(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var d=0,f=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var A=l&134217727;return A!==0?(l=A&~f,l!==0?d=an(l):(b&=A,b!==0?d=an(b):a||(a=A&~t,a!==0&&(d=an(a))))):(A=l&~f,A!==0?d=an(A):b!==0?d=an(b):a||(a=l&~t,a!==0&&(d=an(a)))),d===0?0:r!==0&&r!==d&&(r&f)===0&&(f=d&-d,a=r&-r,f>=a||f===32&&(a&4194048)!==0)?r:d}function qe(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function vt(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function F(){var t=Ct;return Ct<<=1,(Ct&62914560)===0&&(Ct=4194304),t}function Z(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function de(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ye(t,r,a,l,d,f){var b=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var A=t.entanglements,M=t.expirationTimes,Q=t.hiddenUpdates;for(a=b&~a;0<a;){var J=31-bt(a),se=1<<J;A[J]=0,M[J]=-1;var X=Q[J];if(X!==null)for(Q[J]=null,J=0;J<X.length;J++){var W=X[J];W!==null&&(W.lane&=-536870913)}a&=~se}l!==0&&we(t,l,0),f!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=f&~(b&~r))}function we(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-bt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Fe(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-bt(a),d=1<<l;d&r|t[l]&r&&(t[l]|=r),a&=~d}}function Ie(t,r){var a=r&-r;return a=(a&42)!==0?1:Mt(a),(a&(t.suspendedLanes|r))!==0?0:a}function Mt(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function tt(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function yt(){var t=ce.p;return t!==0?t:(t=window.event,t===void 0?32:M0(t.type))}function Je(t,r){var a=ce.p;try{return ce.p=t,r()}finally{ce.p=a}}var Lt=Math.random().toString(36).slice(2),Ue="__reactFiber$"+Lt,pt="__reactProps$"+Lt,kn="__reactContainer$"+Lt,ni="__reactEvents$"+Lt,ll="__reactListeners$"+Lt,Wa="__reactHandles$"+Lt,Ja="__reactResources$"+Lt,zr="__reactMarker$"+Lt;function fs(t){delete t[Ue],delete t[pt],delete t[ni],delete t[ll],delete t[Wa]}function Br(t){var r=t[Ue];if(r)return r;for(var a=t.parentNode;a;){if(r=a[kn]||a[Ue]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=y0(t);t!==null;){if(a=t[Ue])return a;t=y0(t)}return r}t=a,a=t.parentNode}return null}function yr(t){if(t=t[Ue]||t[kn]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function dr(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function qr(t){var r=t[Ja];return r||(r=t[Ja]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function _n(t){t[zr]=!0}var fa=new Set,D={};function ue(t,r){be(t,r),be(t+"Capture",r)}function be(t,r){for(D[t]=r,t=0;t<r.length;t++)fa.add(r[t])}var je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qe={},lt={};function Et(t){return Ve.call(lt,t)?!0:Ve.call(Qe,t)?!1:je.test(t)?lt[t]=!0:(Qe[t]=!0,!1)}function Pt(t,r,a){if(Et(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function Ut(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function Ft(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}function Ht(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mn(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Fr(t,r,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,f=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return d.call(this)},set:function(b){a=""+b,f.call(this,b)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(b){a=""+b},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Ot(t){if(!t._valueTracker){var r=mn(t)?"checked":"value";t._valueTracker=Fr(t,r,""+t[r])}}function Kn(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=mn(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function Dn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Pi=/[\n"\\]/g;function vr(t){return t.replace(Pi,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Za(t,r,a,l,d,f,b,A){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),r!=null?b==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+Ht(r)):t.value!==""+Ht(r)&&(t.value=""+Ht(r)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),r!=null?ul(t,b,Ht(r)):a!=null?ul(t,b,Ht(a)):l!=null&&t.removeAttribute("value"),d==null&&f!=null&&(t.defaultChecked=!!f),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.name=""+Ht(A):t.removeAttribute("name")}function Gu(t,r,a,l,d,f,b,A){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),r!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||r!=null)){Ot(t);return}a=a!=null?""+Ht(a):"",r=r!=null?""+Ht(r):a,A||r===t.value||(t.value=r),t.defaultValue=r}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=A?t.checked:!!l,t.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b),Ot(t)}function ul(t,r,a){r==="number"&&Dn(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function ms(t,r,a,l){if(t=t.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=r.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Ht(a),r=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,l&&(t[d].defaultSelected=!0);return}r!==null||t[d].disabled||(r=t[d])}r!==null&&(r.selected=!0)}}function Ku(t,r,a){if(r!=null&&(r=""+Ht(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+Ht(a):""}function ps(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(it(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=Ht(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Ot(t)}function _r(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var Qu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cl(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||Qu.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function dl(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var d in r)l=r[d],r.hasOwnProperty(d)&&a[d]!==l&&cl(t,d,l)}else for(var f in r)r.hasOwnProperty(f)&&cl(t,f,r[f])}function eo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function to(t){return gs.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ri(){}var hl=null;function Hr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ys=null,gi=null;function ma(t){var r=yr(t);if(r&&(t=r.stateNode)){var a=t[pt]||null;e:switch(t=r.stateNode,r.type){case"input":if(Za(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+vr(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var d=l[pt]||null;if(!d)throw Error(s(90));Za(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Kn(l)}break e;case"textarea":Ku(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&ms(t,!!a.multiple,r,!1)}}}var no=!1;function vs(t,r,a){if(no)return t(r,a);no=!0;try{var l=t(r);return l}finally{if(no=!1,(ys!==null||gi!==null)&&(Bc(),ys&&(r=ys,t=gi,gi=ys=null,ma(r),t)))for(r=0;r<t.length;r++)ma(t[r])}}function ii(t,r){var a=t.stateNode;if(a===null)return null;var l=a[pt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pa=!1;if(Gr)try{var en={};Object.defineProperty(en,"passive",{get:function(){pa=!0}}),window.addEventListener("test",en,en),window.removeEventListener("test",en,en)}catch{pa=!1}var yi=null,fl=null,ga=null;function ml(){if(ga)return ga;var t,r=fl,a=r.length,l,d="value"in yi?yi.value:yi.textContent,f=d.length;for(t=0;t<a&&r[t]===d[t];t++);var b=a-t;for(l=1;l<=b&&r[a-l]===d[f-l];l++);return ga=d.slice(t,1<l?1-l:void 0)}function ya(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Ui(){return!0}function si(){return!1}function Xn(t){function r(a,l,d,f,b){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=f,this.target=b,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(a=t[A],this[A]=a?a(f):f[A]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Ui:si,this.isPropagationStopped=si,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ui)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ui)},persist:function(){},isPersistent:Ui}),r}var zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vi=Xn(zi),_s=T({},zi,{view:0,detail:0}),pl=Xn(_s),bs,ro,_i,io=T({},_s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Es,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_i&&(_i&&t.type==="mousemove"?(bs=t.screenX-_i.screenX,ro=t.screenY-_i.screenY):ro=bs=0,_i=t),bs)},movementY:function(t){return"movementY"in t?t.movementY:ro}}),gl=Xn(io),va=T({},io,{dataTransfer:0}),Xu=Xn(va),$u=T({},_s,{relatedTarget:0}),_a=Xn($u),yl=T({},zi,{animationName:0,elapsedTime:0,pseudoElement:0}),Wu=Xn(yl),so=T({},zi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ju=Xn(so),Zu=T({},zi,{data:0}),bi=Xn(Zu),ec={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rc(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=nc[t])?!!r[t]:!1}function Es(){return rc}var hr=T({},_s,{key:function(t){if(t.key){var r=ec[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=ya(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Es,charCode:function(t){return t.type==="keypress"?ya(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ya(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ic=Xn(hr),sc=T({},io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bi=Xn(sc),c=T({},_s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Es}),y=Xn(c),E=T({},zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=Xn(E),H=T({},io,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$=Xn(H),Te=T({},zi,{newState:0,oldState:0}),dt=Xn(Te),An=[9,13,27,32],Gt=Gr&&"CompositionEvent"in window,pn=null;Gr&&"documentMode"in document&&(pn=document.documentMode);var Kr=Gr&&"TextEvent"in window&&!pn,Ei=Gr&&(!Gt||pn&&8<pn&&11>=pn),ai=" ",oi=!1;function ba(t,r){switch(t){case"keyup":return An.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ao(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var oo=!1;function I1(t,r){switch(t){case"compositionend":return ao(r);case"keypress":return r.which!==32?null:(oi=!0,ai);case"textInput":return t=r.data,t===ai&&oi?null:t;default:return null}}function x1(t,r){if(oo)return t==="compositionend"||!Gt&&ba(t,r)?(t=ml(),ga=fl=yi=null,oo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ei&&r.locale!=="ko"?null:r.data;default:return null}}var N1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bg(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!N1[t.type]:r==="textarea"}function Eg(t,r,a,l){ys?gi?gi.push(l):gi=[l]:ys=l,r=Yc(r,"onChange"),0<r.length&&(a=new vi("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var vl=null,_l=null;function k1(t){r0(t,0)}function ac(t){var r=dr(t);if(Kn(r))return t}function Tg(t,r){if(t==="change")return r}var Sg=!1;if(Gr){var Sh;if(Gr){var wh="oninput"in document;if(!wh){var wg=document.createElement("div");wg.setAttribute("oninput","return;"),wh=typeof wg.oninput=="function"}Sh=wh}else Sh=!1;Sg=Sh&&(!document.documentMode||9<document.documentMode)}function Ag(){vl&&(vl.detachEvent("onpropertychange",Cg),_l=vl=null)}function Cg(t){if(t.propertyName==="value"&&ac(_l)){var r=[];Eg(r,_l,t,Hr(t)),vs(k1,r)}}function D1(t,r,a){t==="focusin"?(Ag(),vl=r,_l=a,vl.attachEvent("onpropertychange",Cg)):t==="focusout"&&Ag()}function M1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ac(_l)}function O1(t,r){if(t==="click")return ac(r)}function V1(t,r){if(t==="input"||t==="change")return ac(r)}function j1(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Nr=typeof Object.is=="function"?Object.is:j1;function bl(t,r){if(Nr(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!Ve.call(r,d)||!Nr(t[d],r[d]))return!1}return!0}function Rg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ig(t,r){var a=Rg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Rg(a)}}function xg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?xg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Ng(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Dn(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Dn(t.document)}return r}function Ah(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var L1=Gr&&"documentMode"in document&&11>=document.documentMode,lo=null,Ch=null,El=null,Rh=!1;function kg(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Rh||lo==null||lo!==Dn(l)||(l=lo,"selectionStart"in l&&Ah(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),El&&bl(El,l)||(El=l,l=Yc(Ch,"onSelect"),0<l.length&&(r=new vi("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=lo)))}function Ea(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var uo={animationend:Ea("Animation","AnimationEnd"),animationiteration:Ea("Animation","AnimationIteration"),animationstart:Ea("Animation","AnimationStart"),transitionrun:Ea("Transition","TransitionRun"),transitionstart:Ea("Transition","TransitionStart"),transitioncancel:Ea("Transition","TransitionCancel"),transitionend:Ea("Transition","TransitionEnd")},Ih={},Dg={};Gr&&(Dg=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function Ta(t){if(Ih[t])return Ih[t];if(!uo[t])return t;var r=uo[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Dg)return Ih[t]=r[a];return t}var Mg=Ta("animationend"),Og=Ta("animationiteration"),Vg=Ta("animationstart"),P1=Ta("transitionrun"),U1=Ta("transitionstart"),z1=Ta("transitioncancel"),jg=Ta("transitionend"),Lg=new Map,xh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xh.push("scrollEnd");function li(t,r){Lg.set(t,r),ue(r,[t])}var oc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Qr=[],co=0,Nh=0;function lc(){for(var t=co,r=Nh=co=0;r<t;){var a=Qr[r];Qr[r++]=null;var l=Qr[r];Qr[r++]=null;var d=Qr[r];Qr[r++]=null;var f=Qr[r];if(Qr[r++]=null,l!==null&&d!==null){var b=l.pending;b===null?d.next=d:(d.next=b.next,b.next=d),l.pending=d}f!==0&&Pg(a,d,f)}}function uc(t,r,a,l){Qr[co++]=t,Qr[co++]=r,Qr[co++]=a,Qr[co++]=l,Nh|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function kh(t,r,a,l){return uc(t,r,a,l),cc(t)}function Sa(t,r){return uc(t,null,null,r),cc(t)}function Pg(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var d=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(d=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,d&&r!==null&&(d=31-bt(a),t=f.hiddenUpdates,l=t[d],l===null?t[d]=[r]:l.push(r),r.lane=a|536870912),f):null}function cc(t){if(50<Fl)throw Fl=0,Bf=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var ho={};function B1(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kr(t,r,a,l){return new B1(t,r,a,l)}function Dh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qi(t,r){var a=t.alternate;return a===null?(a=kr(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Ug(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function dc(t,r,a,l,d,f){var b=0;if(l=t,typeof t=="function")Dh(t)&&(b=1);else if(typeof t=="string")b=KS(t,a,ie.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case x:return t=kr(31,a,r,d),t.elementType=x,t.lanes=f,t;case q:return wa(a.children,d,f,r);case B:b=8,d|=24;break;case _e:return t=kr(12,a,r,d|2),t.elementType=_e,t.lanes=f,t;case Ge:return t=kr(13,a,r,d),t.elementType=Ge,t.lanes=f,t;case Be:return t=kr(19,a,r,d),t.elementType=Be,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case te:b=10;break e;case fe:b=9;break e;case Se:b=11;break e;case N:b=14;break e;case R:b=16,l=null;break e}b=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=kr(b,a,r,d),r.elementType=t,r.type=l,r.lanes=f,r}function wa(t,r,a,l){return t=kr(7,t,l,r),t.lanes=a,t}function Mh(t,r,a){return t=kr(6,t,null,r),t.lanes=a,t}function zg(t){var r=kr(18,null,null,0);return r.stateNode=t,r}function Oh(t,r,a){return r=kr(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Bg=new WeakMap;function Yr(t,r){if(typeof t=="object"&&t!==null){var a=Bg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:De(r)},Bg.set(t,r),r)}return{value:t,source:r,stack:De(r)}}var fo=[],mo=0,hc=null,Tl=0,Xr=[],$r=0,Ts=null,Ti=1,Si="";function Fi(t,r){fo[mo++]=Tl,fo[mo++]=hc,hc=t,Tl=r}function qg(t,r,a){Xr[$r++]=Ti,Xr[$r++]=Si,Xr[$r++]=Ts,Ts=t;var l=Ti;t=Si;var d=32-bt(l)-1;l&=~(1<<d),a+=1;var f=32-bt(r)+d;if(30<f){var b=d-d%5;f=(l&(1<<b)-1).toString(32),l>>=b,d-=b,Ti=1<<32-bt(r)+d|a<<d|l,Si=f+t}else Ti=1<<f|a<<d|l,Si=t}function Vh(t){t.return!==null&&(Fi(t,1),qg(t,1,0))}function jh(t){for(;t===hc;)hc=fo[--mo],fo[mo]=null,Tl=fo[--mo],fo[mo]=null;for(;t===Ts;)Ts=Xr[--$r],Xr[$r]=null,Si=Xr[--$r],Xr[$r]=null,Ti=Xr[--$r],Xr[$r]=null}function Fg(t,r){Xr[$r++]=Ti,Xr[$r++]=Si,Xr[$r++]=Ts,Ti=r.id,Si=r.overflow,Ts=t}var $n=null,dn=null,Vt=!1,Ss=null,Wr=!1,Lh=Error(s(519));function ws(t){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Sl(Yr(r,t)),Lh}function Hg(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[Ue]=t,r[pt]=l,a){case"dialog":St("cancel",r),St("close",r);break;case"iframe":case"object":case"embed":St("load",r);break;case"video":case"audio":for(a=0;a<Gl.length;a++)St(Gl[a],r);break;case"source":St("error",r);break;case"img":case"image":case"link":St("error",r),St("load",r);break;case"details":St("toggle",r);break;case"input":St("invalid",r),Gu(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":St("invalid",r);break;case"textarea":St("invalid",r),ps(r,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||o0(r.textContent,a)?(l.popover!=null&&(St("beforetoggle",r),St("toggle",r)),l.onScroll!=null&&St("scroll",r),l.onScrollEnd!=null&&St("scrollend",r),l.onClick!=null&&(r.onclick=ri),r=!0):r=!1,r||ws(t,!0)}function Gg(t){for($n=t.return;$n;)switch($n.tag){case 5:case 31:case 13:Wr=!1;return;case 27:case 3:Wr=!0;return;default:$n=$n.return}}function po(t){if(t!==$n)return!1;if(!Vt)return Gg(t),Vt=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||nm(t.type,t.memoizedProps)),a=!a),a&&dn&&ws(t),Gg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));dn=g0(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));dn=g0(t)}else r===27?(r=dn,Ps(t.type)?(t=om,om=null,dn=t):dn=r):dn=$n?Zr(t.stateNode.nextSibling):null;return!0}function Aa(){dn=$n=null,Vt=!1}function Ph(){var t=Ss;return t!==null&&(Sr===null?Sr=t:Sr.push.apply(Sr,t),Ss=null),t}function Sl(t){Ss===null?Ss=[t]:Ss.push(t)}var Uh=O(null),Ca=null,Hi=null;function As(t,r,a){ee(Uh,r._currentValue),r._currentValue=a}function Gi(t){t._currentValue=Uh.current,G(Uh)}function zh(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function Bh(t,r,a,l){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var f=d.dependencies;if(f!==null){var b=d.child;f=f.firstContext;e:for(;f!==null;){var A=f;f=d;for(var M=0;M<r.length;M++)if(A.context===r[M]){f.lanes|=a,A=f.alternate,A!==null&&(A.lanes|=a),zh(f.return,a,t),l||(b=null);break e}f=A.next}}else if(d.tag===18){if(b=d.return,b===null)throw Error(s(341));b.lanes|=a,f=b.alternate,f!==null&&(f.lanes|=a),zh(b,a,t),b=null}else b=d.child;if(b!==null)b.return=d;else for(b=d;b!==null;){if(b===t){b=null;break}if(d=b.sibling,d!==null){d.return=b.return,b=d;break}b=b.return}d=b}}function go(t,r,a,l){t=null;for(var d=r,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var b=d.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var A=d.type;Nr(d.pendingProps.value,b.value)||(t!==null?t.push(A):t=[A])}}else if(d===Me.current){if(b=d.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push($l):t=[$l])}d=d.return}t!==null&&Bh(r,t,a,l),r.flags|=262144}function fc(t){for(t=t.firstContext;t!==null;){if(!Nr(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ra(t){Ca=t,Hi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Wn(t){return Kg(Ca,t)}function mc(t,r){return Ca===null&&Ra(t),Kg(t,r)}function Kg(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Hi===null){if(t===null)throw Error(s(308));Hi=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Hi=Hi.next=r;return a}var q1=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},F1=i.unstable_scheduleCallback,H1=i.unstable_NormalPriority,Mn={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qh(){return{controller:new q1,data:new Map,refCount:0}}function wl(t){t.refCount--,t.refCount===0&&F1(H1,function(){t.controller.abort()})}var Al=null,Fh=0,yo=0,vo=null;function G1(t,r){if(Al===null){var a=Al=[];Fh=0,yo=Qf(),vo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Fh++,r.then(Qg,Qg),r}function Qg(){if(--Fh===0&&Al!==null){vo!==null&&(vo.status="fulfilled");var t=Al;Al=null,yo=0,vo=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function K1(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var d=0;d<a.length;d++)(0,a[d])(r)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var Yg=Y.S;Y.S=function(t,r){kv=jt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&G1(t,r),Yg!==null&&Yg(t,r)};var Ia=O(null);function Hh(){var t=Ia.current;return t!==null?t:on.pooledCache}function pc(t,r){r===null?ee(Ia,Ia.current):ee(Ia,r.pool)}function Xg(){var t=Hh();return t===null?null:{parent:Mn._currentValue,pool:t}}var _o=Error(s(460)),Gh=Error(s(474)),gc=Error(s(542)),yc={then:function(){}};function $g(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Wg(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(ri,ri),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Zg(t),t;default:if(typeof r.status=="string")r.then(ri,ri);else{if(t=on,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var d=r;d.status="fulfilled",d.value=l}},function(l){if(r.status==="pending"){var d=r;d.status="rejected",d.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Zg(t),t}throw Na=r,_o}}function xa(t){try{var r=t._init;return r(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Na=a,_o):a}}var Na=null;function Jg(){if(Na===null)throw Error(s(459));var t=Na;return Na=null,t}function Zg(t){if(t===_o||t===gc)throw Error(s(483))}var bo=null,Cl=0;function vc(t){var r=Cl;return Cl+=1,bo===null&&(bo=[]),Wg(bo,t,r)}function Rl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function _c(t,r){throw r.$$typeof===S?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function ey(t){function r(z,L){if(t){var K=z.deletions;K===null?(z.deletions=[L],z.flags|=16):K.push(L)}}function a(z,L){if(!t)return null;for(;L!==null;)r(z,L),L=L.sibling;return null}function l(z){for(var L=new Map;z!==null;)z.key!==null?L.set(z.key,z):L.set(z.index,z),z=z.sibling;return L}function d(z,L){return z=qi(z,L),z.index=0,z.sibling=null,z}function f(z,L,K){return z.index=K,t?(K=z.alternate,K!==null?(K=K.index,K<L?(z.flags|=67108866,L):K):(z.flags|=67108866,L)):(z.flags|=1048576,L)}function b(z){return t&&z.alternate===null&&(z.flags|=67108866),z}function A(z,L,K,re){return L===null||L.tag!==6?(L=Mh(K,z.mode,re),L.return=z,L):(L=d(L,K),L.return=z,L)}function M(z,L,K,re){var $e=K.type;return $e===q?J(z,L,K.props.children,re,K.key):L!==null&&(L.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===R&&xa($e)===L.type)?(L=d(L,K.props),Rl(L,K),L.return=z,L):(L=dc(K.type,K.key,K.props,null,z.mode,re),Rl(L,K),L.return=z,L)}function Q(z,L,K,re){return L===null||L.tag!==4||L.stateNode.containerInfo!==K.containerInfo||L.stateNode.implementation!==K.implementation?(L=Oh(K,z.mode,re),L.return=z,L):(L=d(L,K.children||[]),L.return=z,L)}function J(z,L,K,re,$e){return L===null||L.tag!==7?(L=wa(K,z.mode,re,$e),L.return=z,L):(L=d(L,K),L.return=z,L)}function se(z,L,K){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Mh(""+L,z.mode,K),L.return=z,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case w:return K=dc(L.type,L.key,L.props,null,z.mode,K),Rl(K,L),K.return=z,K;case j:return L=Oh(L,z.mode,K),L.return=z,L;case R:return L=xa(L),se(z,L,K)}if(it(L)||P(L))return L=wa(L,z.mode,K,null),L.return=z,L;if(typeof L.then=="function")return se(z,vc(L),K);if(L.$$typeof===te)return se(z,mc(z,L),K);_c(z,L)}return null}function X(z,L,K,re){var $e=L!==null?L.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return $e!==null?null:A(z,L,""+K,re);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case w:return K.key===$e?M(z,L,K,re):null;case j:return K.key===$e?Q(z,L,K,re):null;case R:return K=xa(K),X(z,L,K,re)}if(it(K)||P(K))return $e!==null?null:J(z,L,K,re,null);if(typeof K.then=="function")return X(z,L,vc(K),re);if(K.$$typeof===te)return X(z,L,mc(z,K),re);_c(z,K)}return null}function W(z,L,K,re,$e){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return z=z.get(K)||null,A(L,z,""+re,$e);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case w:return z=z.get(re.key===null?K:re.key)||null,M(L,z,re,$e);case j:return z=z.get(re.key===null?K:re.key)||null,Q(L,z,re,$e);case R:return re=xa(re),W(z,L,K,re,$e)}if(it(re)||P(re))return z=z.get(K)||null,J(L,z,re,$e,null);if(typeof re.then=="function")return W(z,L,K,vc(re),$e);if(re.$$typeof===te)return W(z,L,K,mc(L,re),$e);_c(L,re)}return null}function ze(z,L,K,re){for(var $e=null,Bt=null,He=L,ft=L=0,It=null;He!==null&&ft<K.length;ft++){He.index>ft?(It=He,He=null):It=He.sibling;var qt=X(z,He,K[ft],re);if(qt===null){He===null&&(He=It);break}t&&He&&qt.alternate===null&&r(z,He),L=f(qt,L,ft),Bt===null?$e=qt:Bt.sibling=qt,Bt=qt,He=It}if(ft===K.length)return a(z,He),Vt&&Fi(z,ft),$e;if(He===null){for(;ft<K.length;ft++)He=se(z,K[ft],re),He!==null&&(L=f(He,L,ft),Bt===null?$e=He:Bt.sibling=He,Bt=He);return Vt&&Fi(z,ft),$e}for(He=l(He);ft<K.length;ft++)It=W(He,z,ft,K[ft],re),It!==null&&(t&&It.alternate!==null&&He.delete(It.key===null?ft:It.key),L=f(It,L,ft),Bt===null?$e=It:Bt.sibling=It,Bt=It);return t&&He.forEach(function(Fs){return r(z,Fs)}),Vt&&Fi(z,ft),$e}function et(z,L,K,re){if(K==null)throw Error(s(151));for(var $e=null,Bt=null,He=L,ft=L=0,It=null,qt=K.next();He!==null&&!qt.done;ft++,qt=K.next()){He.index>ft?(It=He,He=null):It=He.sibling;var Fs=X(z,He,qt.value,re);if(Fs===null){He===null&&(He=It);break}t&&He&&Fs.alternate===null&&r(z,He),L=f(Fs,L,ft),Bt===null?$e=Fs:Bt.sibling=Fs,Bt=Fs,He=It}if(qt.done)return a(z,He),Vt&&Fi(z,ft),$e;if(He===null){for(;!qt.done;ft++,qt=K.next())qt=se(z,qt.value,re),qt!==null&&(L=f(qt,L,ft),Bt===null?$e=qt:Bt.sibling=qt,Bt=qt);return Vt&&Fi(z,ft),$e}for(He=l(He);!qt.done;ft++,qt=K.next())qt=W(He,z,ft,qt.value,re),qt!==null&&(t&&qt.alternate!==null&&He.delete(qt.key===null?ft:qt.key),L=f(qt,L,ft),Bt===null?$e=qt:Bt.sibling=qt,Bt=qt);return t&&He.forEach(function(rw){return r(z,rw)}),Vt&&Fi(z,ft),$e}function rn(z,L,K,re){if(typeof K=="object"&&K!==null&&K.type===q&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case w:e:{for(var $e=K.key;L!==null;){if(L.key===$e){if($e=K.type,$e===q){if(L.tag===7){a(z,L.sibling),re=d(L,K.props.children),re.return=z,z=re;break e}}else if(L.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===R&&xa($e)===L.type){a(z,L.sibling),re=d(L,K.props),Rl(re,K),re.return=z,z=re;break e}a(z,L);break}else r(z,L);L=L.sibling}K.type===q?(re=wa(K.props.children,z.mode,re,K.key),re.return=z,z=re):(re=dc(K.type,K.key,K.props,null,z.mode,re),Rl(re,K),re.return=z,z=re)}return b(z);case j:e:{for($e=K.key;L!==null;){if(L.key===$e)if(L.tag===4&&L.stateNode.containerInfo===K.containerInfo&&L.stateNode.implementation===K.implementation){a(z,L.sibling),re=d(L,K.children||[]),re.return=z,z=re;break e}else{a(z,L);break}else r(z,L);L=L.sibling}re=Oh(K,z.mode,re),re.return=z,z=re}return b(z);case R:return K=xa(K),rn(z,L,K,re)}if(it(K))return ze(z,L,K,re);if(P(K)){if($e=P(K),typeof $e!="function")throw Error(s(150));return K=$e.call(K),et(z,L,K,re)}if(typeof K.then=="function")return rn(z,L,vc(K),re);if(K.$$typeof===te)return rn(z,L,mc(z,K),re);_c(z,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,L!==null&&L.tag===6?(a(z,L.sibling),re=d(L,K),re.return=z,z=re):(a(z,L),re=Mh(K,z.mode,re),re.return=z,z=re),b(z)):a(z,L)}return function(z,L,K,re){try{Cl=0;var $e=rn(z,L,K,re);return bo=null,$e}catch(He){if(He===_o||He===gc)throw He;var Bt=kr(29,He,null,z.mode);return Bt.lanes=re,Bt.return=z,Bt}finally{}}}var ka=ey(!0),ty=ey(!1),Cs=!1;function Kh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qh(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Rs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Is(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Kt&2)!==0){var d=l.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),l.pending=r,r=cc(t),Pg(t,null,a),r}return uc(t,l,r,a),cc(t)}function Il(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Fe(t,a)}}function Yh(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?d=f=b:f=f.next=b,a=a.next}while(a!==null);f===null?d=f=r:f=f.next=r}else d=f=r;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var Xh=!1;function xl(){if(Xh){var t=vo;if(t!==null)throw t}}function Nl(t,r,a,l){Xh=!1;var d=t.updateQueue;Cs=!1;var f=d.firstBaseUpdate,b=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var M=A,Q=M.next;M.next=null,b===null?f=Q:b.next=Q,b=M;var J=t.alternate;J!==null&&(J=J.updateQueue,A=J.lastBaseUpdate,A!==b&&(A===null?J.firstBaseUpdate=Q:A.next=Q,J.lastBaseUpdate=M))}if(f!==null){var se=d.baseState;b=0,J=Q=M=null,A=f;do{var X=A.lane&-536870913,W=X!==A.lane;if(W?(Rt&X)===X:(l&X)===X){X!==0&&X===yo&&(Xh=!0),J!==null&&(J=J.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var ze=t,et=A;X=r;var rn=a;switch(et.tag){case 1:if(ze=et.payload,typeof ze=="function"){se=ze.call(rn,se,X);break e}se=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=et.payload,X=typeof ze=="function"?ze.call(rn,se,X):ze,X==null)break e;se=T({},se,X);break e;case 2:Cs=!0}}X=A.callback,X!==null&&(t.flags|=64,W&&(t.flags|=8192),W=d.callbacks,W===null?d.callbacks=[X]:W.push(X))}else W={lane:X,tag:A.tag,payload:A.payload,callback:A.callback,next:null},J===null?(Q=J=W,M=se):J=J.next=W,b|=X;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;W=A,A=W.next,W.next=null,d.lastBaseUpdate=W,d.shared.pending=null}}while(!0);J===null&&(M=se),d.baseState=M,d.firstBaseUpdate=Q,d.lastBaseUpdate=J,f===null&&(d.shared.lanes=0),Ms|=b,t.lanes=b,t.memoizedState=se}}function ny(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function ry(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)ny(a[t],r)}var Eo=O(null),bc=O(0);function iy(t,r){t=es,ee(bc,t),ee(Eo,r),es=t|r.baseLanes}function $h(){ee(bc,es),ee(Eo,Eo.current)}function Wh(){es=bc.current,G(Eo),G(bc)}var Dr=O(null),Jr=null;function xs(t){var r=t.alternate;ee(Cn,Cn.current&1),ee(Dr,t),Jr===null&&(r===null||Eo.current!==null||r.memoizedState!==null)&&(Jr=t)}function Jh(t){ee(Cn,Cn.current),ee(Dr,t),Jr===null&&(Jr=t)}function sy(t){t.tag===22?(ee(Cn,Cn.current),ee(Dr,t),Jr===null&&(Jr=t)):Ns()}function Ns(){ee(Cn,Cn.current),ee(Dr,Dr.current)}function Mr(t){G(Dr),Jr===t&&(Jr=null),G(Cn)}var Cn=O(0);function Ec(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||sm(a)||am(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ki=0,ht=null,tn=null,On=null,Tc=!1,To=!1,Da=!1,Sc=0,kl=0,So=null,Q1=0;function bn(){throw Error(s(321))}function Zh(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!Nr(t[a],r[a]))return!1;return!0}function ef(t,r,a,l,d,f){return Ki=f,ht=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Y.H=t===null||t.memoizedState===null?qy:gf,Da=!1,f=a(l,d),Da=!1,To&&(f=oy(r,a,l,d)),ay(t),f}function ay(t){Y.H=Ol;var r=tn!==null&&tn.next!==null;if(Ki=0,On=tn=ht=null,Tc=!1,kl=0,So=null,r)throw Error(s(300));t===null||Vn||(t=t.dependencies,t!==null&&fc(t)&&(Vn=!0))}function oy(t,r,a,l){ht=t;var d=0;do{if(To&&(So=null),kl=0,To=!1,25<=d)throw Error(s(301));if(d+=1,On=tn=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}Y.H=Fy,f=r(a,l)}while(To);return f}function Y1(){var t=Y.H,r=t.useState()[0];return r=typeof r.then=="function"?Dl(r):r,t=t.useState()[0],(tn!==null?tn.memoizedState:null)!==t&&(ht.flags|=1024),r}function tf(){var t=Sc!==0;return Sc=0,t}function nf(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function rf(t){if(Tc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Tc=!1}Ki=0,On=tn=ht=null,To=!1,kl=Sc=0,So=null}function fr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?ht.memoizedState=On=t:On=On.next=t,On}function Rn(){if(tn===null){var t=ht.alternate;t=t!==null?t.memoizedState:null}else t=tn.next;var r=On===null?ht.memoizedState:On.next;if(r!==null)On=r,tn=t;else{if(t===null)throw ht.alternate===null?Error(s(467)):Error(s(310));tn=t,t={memoizedState:tn.memoizedState,baseState:tn.baseState,baseQueue:tn.baseQueue,queue:tn.queue,next:null},On===null?ht.memoizedState=On=t:On=On.next=t}return On}function wc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dl(t){var r=kl;return kl+=1,So===null&&(So=[]),t=Wg(So,t,r),r=ht,(On===null?r.memoizedState:On.next)===null&&(r=r.alternate,Y.H=r===null||r.memoizedState===null?qy:gf),t}function Ac(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Dl(t);if(t.$$typeof===te)return Wn(t)}throw Error(s(438,String(t)))}function sf(t){var r=null,a=ht.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=ht.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(d){return d.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=wc(),ht.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=V;return r.index++,a}function Qi(t,r){return typeof r=="function"?r(t):r}function Cc(t){var r=Rn();return af(r,tn,t)}function af(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var d=t.baseQueue,f=l.pending;if(f!==null){if(d!==null){var b=d.next;d.next=f.next,f.next=b}r.baseQueue=d=f,l.pending=null}if(f=t.baseState,d===null)t.memoizedState=f;else{r=d.next;var A=b=null,M=null,Q=r,J=!1;do{var se=Q.lane&-536870913;if(se!==Q.lane?(Rt&se)===se:(Ki&se)===se){var X=Q.revertLane;if(X===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),se===yo&&(J=!0);else if((Ki&X)===X){Q=Q.next,X===yo&&(J=!0);continue}else se={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},M===null?(A=M=se,b=f):M=M.next=se,ht.lanes|=X,Ms|=X;se=Q.action,Da&&a(f,se),f=Q.hasEagerState?Q.eagerState:a(f,se)}else X={lane:se,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},M===null?(A=M=X,b=f):M=M.next=X,ht.lanes|=se,Ms|=se;Q=Q.next}while(Q!==null&&Q!==r);if(M===null?b=f:M.next=A,!Nr(f,t.memoizedState)&&(Vn=!0,J&&(a=vo,a!==null)))throw a;t.memoizedState=f,t.baseState=b,t.baseQueue=M,l.lastRenderedState=f}return d===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function of(t){var r=Rn(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,d=a.pending,f=r.memoizedState;if(d!==null){a.pending=null;var b=d=d.next;do f=t(f,b.action),b=b.next;while(b!==d);Nr(f,r.memoizedState)||(Vn=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),a.lastRenderedState=f}return[f,l]}function ly(t,r,a){var l=ht,d=Rn(),f=Vt;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=r();var b=!Nr((tn||d).memoizedState,a);if(b&&(d.memoizedState=a,Vn=!0),d=d.queue,cf(dy.bind(null,l,d,t),[t]),d.getSnapshot!==r||b||On!==null&&On.memoizedState.tag&1){if(l.flags|=2048,wo(9,{destroy:void 0},cy.bind(null,l,d,a,r),null),on===null)throw Error(s(349));f||(Ki&127)!==0||uy(l,r,a)}return a}function uy(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=ht.updateQueue,r===null?(r=wc(),ht.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function cy(t,r,a,l){r.value=a,r.getSnapshot=l,hy(r)&&fy(t)}function dy(t,r,a){return a(function(){hy(r)&&fy(t)})}function hy(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!Nr(t,a)}catch{return!0}}function fy(t){var r=Sa(t,2);r!==null&&wr(r,t,2)}function lf(t){var r=fr();if(typeof t=="function"){var a=t;if(t=a(),Da){Xt(!0);try{a()}finally{Xt(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:t},r}function my(t,r,a,l){return t.baseState=a,af(t,tn,typeof l=="function"?l:Qi)}function X1(t,r,a,l,d){if(xc(t))throw Error(s(485));if(t=r.action,t!==null){var f={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){f.listeners.push(b)}};Y.T!==null?a(!0):f.isTransition=!1,l(f),a=r.pending,a===null?(f.next=r.pending=f,py(r,f)):(f.next=a.next,r.pending=a.next=f)}}function py(t,r){var a=r.action,l=r.payload,d=t.state;if(r.isTransition){var f=Y.T,b={};Y.T=b;try{var A=a(d,l),M=Y.S;M!==null&&M(b,A),gy(t,r,A)}catch(Q){uf(t,r,Q)}finally{f!==null&&b.types!==null&&(f.types=b.types),Y.T=f}}else try{f=a(d,l),gy(t,r,f)}catch(Q){uf(t,r,Q)}}function gy(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){yy(t,r,l)},function(l){return uf(t,r,l)}):yy(t,r,a)}function yy(t,r,a){r.status="fulfilled",r.value=a,vy(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,py(t,a)))}function uf(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,vy(r),r=r.next;while(r!==l)}t.action=null}function vy(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function _y(t,r){return r}function by(t,r){if(Vt){var a=on.formState;if(a!==null){e:{var l=ht;if(Vt){if(dn){t:{for(var d=dn,f=Wr;d.nodeType!==8;){if(!f){d=null;break t}if(d=Zr(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){dn=Zr(d.nextSibling),l=d.data==="F!";break e}}ws(l)}l=!1}l&&(r=a[0])}}return a=fr(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_y,lastRenderedState:r},a.queue=l,a=Uy.bind(null,ht,l),l.dispatch=a,l=lf(!1),f=pf.bind(null,ht,!1,l.queue),l=fr(),d={state:r,dispatch:null,action:t,pending:null},l.queue=d,a=X1.bind(null,ht,d,f,a),d.dispatch=a,l.memoizedState=t,[r,a,!1]}function Ey(t){var r=Rn();return Ty(r,tn,t)}function Ty(t,r,a){if(r=af(t,r,_y)[0],t=Cc(Qi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Dl(r)}catch(b){throw b===_o?gc:b}else l=r;r=Rn();var d=r.queue,f=d.dispatch;return a!==r.memoizedState&&(ht.flags|=2048,wo(9,{destroy:void 0},$1.bind(null,d,a),null)),[l,f,t]}function $1(t,r){t.action=r}function Sy(t){var r=Rn(),a=tn;if(a!==null)return Ty(r,a,t);Rn(),r=r.memoizedState,a=Rn();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function wo(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=ht.updateQueue,r===null&&(r=wc(),ht.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function wy(){return Rn().memoizedState}function Rc(t,r,a,l){var d=fr();ht.flags|=t,d.memoizedState=wo(1|r,{destroy:void 0},a,l===void 0?null:l)}function Ic(t,r,a,l){var d=Rn();l=l===void 0?null:l;var f=d.memoizedState.inst;tn!==null&&l!==null&&Zh(l,tn.memoizedState.deps)?d.memoizedState=wo(r,f,a,l):(ht.flags|=t,d.memoizedState=wo(1|r,f,a,l))}function Ay(t,r){Rc(8390656,8,t,r)}function cf(t,r){Ic(2048,8,t,r)}function W1(t){ht.flags|=4;var r=ht.updateQueue;if(r===null)r=wc(),ht.updateQueue=r,r.events=[t];else{var a=r.events;a===null?r.events=[t]:a.push(t)}}function Cy(t){var r=Rn().memoizedState;return W1({ref:r,nextImpl:t}),function(){if((Kt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function Ry(t,r){return Ic(4,2,t,r)}function Iy(t,r){return Ic(4,4,t,r)}function xy(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Ny(t,r,a){a=a!=null?a.concat([t]):null,Ic(4,4,xy.bind(null,r,t),a)}function df(){}function ky(t,r){var a=Rn();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Zh(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function Dy(t,r){var a=Rn();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Zh(r,l[1]))return l[0];if(l=t(),Da){Xt(!0);try{t()}finally{Xt(!1)}}return a.memoizedState=[l,r],l}function hf(t,r,a){return a===void 0||(Ki&1073741824)!==0&&(Rt&261930)===0?t.memoizedState=r:(t.memoizedState=a,t=Mv(),ht.lanes|=t,Ms|=t,a)}function My(t,r,a,l){return Nr(a,r)?a:Eo.current!==null?(t=hf(t,a,l),Nr(t,r)||(Vn=!0),t):(Ki&42)===0||(Ki&1073741824)!==0&&(Rt&261930)===0?(Vn=!0,t.memoizedState=a):(t=Mv(),ht.lanes|=t,Ms|=t,r)}function Oy(t,r,a,l,d){var f=ce.p;ce.p=f!==0&&8>f?f:8;var b=Y.T,A={};Y.T=A,pf(t,!1,r,a);try{var M=d(),Q=Y.S;if(Q!==null&&Q(A,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var J=K1(M,l);Ml(t,r,J,jr(t))}else Ml(t,r,l,jr(t))}catch(se){Ml(t,r,{then:function(){},status:"rejected",reason:se},jr())}finally{ce.p=f,b!==null&&A.types!==null&&(b.types=A.types),Y.T=b}}function J1(){}function ff(t,r,a,l){if(t.tag!==5)throw Error(s(476));var d=Vy(t).queue;Oy(t,d,r,ve,a===null?J1:function(){return jy(t),a(l)})}function Vy(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:ve},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function jy(t){var r=Vy(t);r.next===null&&(r=t.alternate.memoizedState),Ml(t,r.next.queue,{},jr())}function mf(){return Wn($l)}function Ly(){return Rn().memoizedState}function Py(){return Rn().memoizedState}function Z1(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=jr();t=Rs(a);var l=Is(r,t,a);l!==null&&(wr(l,r,a),Il(l,r,a)),r={cache:qh()},t.payload=r;return}r=r.return}}function eS(t,r,a){var l=jr();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},xc(t)?zy(r,a):(a=kh(t,r,a,l),a!==null&&(wr(a,t,l),By(a,r,l)))}function Uy(t,r,a){var l=jr();Ml(t,r,a,l)}function Ml(t,r,a,l){var d={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(xc(t))zy(r,d);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var b=r.lastRenderedState,A=f(b,a);if(d.hasEagerState=!0,d.eagerState=A,Nr(A,b))return uc(t,r,d,0),on===null&&lc(),!1}catch{}finally{}if(a=kh(t,r,d,l),a!==null)return wr(a,t,l),By(a,r,l),!0}return!1}function pf(t,r,a,l){if(l={lane:2,revertLane:Qf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},xc(t)){if(r)throw Error(s(479))}else r=kh(t,a,l,2),r!==null&&wr(r,t,2)}function xc(t){var r=t.alternate;return t===ht||r!==null&&r===ht}function zy(t,r){To=Tc=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function By(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Fe(t,a)}}var Ol={readContext:Wn,use:Ac,useCallback:bn,useContext:bn,useEffect:bn,useImperativeHandle:bn,useLayoutEffect:bn,useInsertionEffect:bn,useMemo:bn,useReducer:bn,useRef:bn,useState:bn,useDebugValue:bn,useDeferredValue:bn,useTransition:bn,useSyncExternalStore:bn,useId:bn,useHostTransitionStatus:bn,useFormState:bn,useActionState:bn,useOptimistic:bn,useMemoCache:bn,useCacheRefresh:bn};Ol.useEffectEvent=bn;var qy={readContext:Wn,use:Ac,useCallback:function(t,r){return fr().memoizedState=[t,r===void 0?null:r],t},useContext:Wn,useEffect:Ay,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Rc(4194308,4,xy.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Rc(4194308,4,t,r)},useInsertionEffect:function(t,r){Rc(4,2,t,r)},useMemo:function(t,r){var a=fr();r=r===void 0?null:r;var l=t();if(Da){Xt(!0);try{t()}finally{Xt(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=fr();if(a!==void 0){var d=a(r);if(Da){Xt(!0);try{a(r)}finally{Xt(!1)}}}else d=r;return l.memoizedState=l.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},l.queue=t,t=t.dispatch=eS.bind(null,ht,t),[l.memoizedState,t]},useRef:function(t){var r=fr();return t={current:t},r.memoizedState=t},useState:function(t){t=lf(t);var r=t.queue,a=Uy.bind(null,ht,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:df,useDeferredValue:function(t,r){var a=fr();return hf(a,t,r)},useTransition:function(){var t=lf(!1);return t=Oy.bind(null,ht,t.queue,!0,!1),fr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=ht,d=fr();if(Vt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),on===null)throw Error(s(349));(Rt&127)!==0||uy(l,r,a)}d.memoizedState=a;var f={value:a,getSnapshot:r};return d.queue=f,Ay(dy.bind(null,l,f,t),[t]),l.flags|=2048,wo(9,{destroy:void 0},cy.bind(null,l,f,a,r),null),a},useId:function(){var t=fr(),r=on.identifierPrefix;if(Vt){var a=Si,l=Ti;a=(l&~(1<<32-bt(l)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Sc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=Q1++,r="_"+r+"r_"+a.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:mf,useFormState:by,useActionState:by,useOptimistic:function(t){var r=fr();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=pf.bind(null,ht,!0,a),a.dispatch=r,[t,r]},useMemoCache:sf,useCacheRefresh:function(){return fr().memoizedState=Z1.bind(null,ht)},useEffectEvent:function(t){var r=fr(),a={impl:t};return r.memoizedState=a,function(){if((Kt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},gf={readContext:Wn,use:Ac,useCallback:ky,useContext:Wn,useEffect:cf,useImperativeHandle:Ny,useInsertionEffect:Ry,useLayoutEffect:Iy,useMemo:Dy,useReducer:Cc,useRef:wy,useState:function(){return Cc(Qi)},useDebugValue:df,useDeferredValue:function(t,r){var a=Rn();return My(a,tn.memoizedState,t,r)},useTransition:function(){var t=Cc(Qi)[0],r=Rn().memoizedState;return[typeof t=="boolean"?t:Dl(t),r]},useSyncExternalStore:ly,useId:Ly,useHostTransitionStatus:mf,useFormState:Ey,useActionState:Ey,useOptimistic:function(t,r){var a=Rn();return my(a,tn,t,r)},useMemoCache:sf,useCacheRefresh:Py};gf.useEffectEvent=Cy;var Fy={readContext:Wn,use:Ac,useCallback:ky,useContext:Wn,useEffect:cf,useImperativeHandle:Ny,useInsertionEffect:Ry,useLayoutEffect:Iy,useMemo:Dy,useReducer:of,useRef:wy,useState:function(){return of(Qi)},useDebugValue:df,useDeferredValue:function(t,r){var a=Rn();return tn===null?hf(a,t,r):My(a,tn.memoizedState,t,r)},useTransition:function(){var t=of(Qi)[0],r=Rn().memoizedState;return[typeof t=="boolean"?t:Dl(t),r]},useSyncExternalStore:ly,useId:Ly,useHostTransitionStatus:mf,useFormState:Sy,useActionState:Sy,useOptimistic:function(t,r){var a=Rn();return tn!==null?my(a,tn,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:sf,useCacheRefresh:Py};Fy.useEffectEvent=Cy;function yf(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:T({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var vf={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=jr(),d=Rs(l);d.payload=r,a!=null&&(d.callback=a),r=Is(t,d,l),r!==null&&(wr(r,t,l),Il(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=jr(),d=Rs(l);d.tag=1,d.payload=r,a!=null&&(d.callback=a),r=Is(t,d,l),r!==null&&(wr(r,t,l),Il(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=jr(),l=Rs(a);l.tag=2,r!=null&&(l.callback=r),r=Is(t,l,a),r!==null&&(wr(r,t,a),Il(r,t,a))}};function Hy(t,r,a,l,d,f,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,b):r.prototype&&r.prototype.isPureReactComponent?!bl(a,l)||!bl(d,f):!0}function Gy(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&vf.enqueueReplaceState(r,r.state,null)}function Ma(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=T({},a));for(var d in t)a[d]===void 0&&(a[d]=t[d])}return a}function Ky(t){oc(t)}function Qy(t){console.error(t)}function Yy(t){oc(t)}function Nc(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Xy(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function _f(t,r,a){return a=Rs(a),a.tag=3,a.payload={element:null},a.callback=function(){Nc(t,r)},a}function $y(t){return t=Rs(t),t.tag=3,t}function Wy(t,r,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var f=l.value;t.payload=function(){return d(f)},t.callback=function(){Xy(r,a,l)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){Xy(r,a,l),typeof d!="function"&&(Os===null?Os=new Set([this]):Os.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function tS(t,r,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&go(r,a,d,!0),a=Dr.current,a!==null){switch(a.tag){case 31:case 13:return Jr===null?qc():a.alternate===null&&En===0&&(En=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===yc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Hf(t,l,d)),!1;case 22:return a.flags|=65536,l===yc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Hf(t,l,d)),!1}throw Error(s(435,a.tag))}return Hf(t,l,d),qc(),!1}if(Vt)return r=Dr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=d,l!==Lh&&(t=Error(s(422),{cause:l}),Sl(Yr(t,a)))):(l!==Lh&&(r=Error(s(423),{cause:l}),Sl(Yr(r,a))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,l=Yr(l,a),d=_f(t.stateNode,l,d),Yh(t,d),En!==4&&(En=2)),!1;var f=Error(s(520),{cause:l});if(f=Yr(f,a),ql===null?ql=[f]:ql.push(f),En!==4&&(En=2),r===null)return!0;l=Yr(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=d&-d,a.lanes|=t,t=_f(a.stateNode,l,t),Yh(a,t),!1;case 1:if(r=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Os===null||!Os.has(f))))return a.flags|=65536,d&=-d,a.lanes|=d,d=$y(d),Wy(d,t,a,l),Yh(a,d),!1}a=a.return}while(a!==null);return!1}var bf=Error(s(461)),Vn=!1;function Jn(t,r,a,l){r.child=t===null?ty(r,null,a,l):ka(r,t.child,a,l)}function Jy(t,r,a,l,d){a=a.render;var f=r.ref;if("ref"in l){var b={};for(var A in l)A!=="ref"&&(b[A]=l[A])}else b=l;return Ra(r),l=ef(t,r,a,b,f,d),A=tf(),t!==null&&!Vn?(nf(t,r,d),Yi(t,r,d)):(Vt&&A&&Vh(r),r.flags|=1,Jn(t,r,l,d),r.child)}function Zy(t,r,a,l,d){if(t===null){var f=a.type;return typeof f=="function"&&!Dh(f)&&f.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=f,ev(t,r,f,l,d)):(t=dc(a.type,null,l,r,r.mode,d),t.ref=r.ref,t.return=r,r.child=t)}if(f=t.child,!If(t,d)){var b=f.memoizedProps;if(a=a.compare,a=a!==null?a:bl,a(b,l)&&t.ref===r.ref)return Yi(t,r,d)}return r.flags|=1,t=qi(f,l),t.ref=r.ref,t.return=r,r.child=t}function ev(t,r,a,l,d){if(t!==null){var f=t.memoizedProps;if(bl(f,l)&&t.ref===r.ref)if(Vn=!1,r.pendingProps=l=f,If(t,d))(t.flags&131072)!==0&&(Vn=!0);else return r.lanes=t.lanes,Yi(t,r,d)}return Ef(t,r,a,l,d)}function tv(t,r,a,l){var d=l.children,f=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,t!==null){for(l=r.child=t.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~f}else l=0,r.child=null;return nv(t,r,f,a,l)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&pc(r,f!==null?f.cachePool:null),f!==null?iy(r,f):$h(),sy(r);else return l=r.lanes=536870912,nv(t,r,f!==null?f.baseLanes|a:a,a,l)}else f!==null?(pc(r,f.cachePool),iy(r,f),Ns(),r.memoizedState=null):(t!==null&&pc(r,null),$h(),Ns());return Jn(t,r,d,a),r.child}function Vl(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function nv(t,r,a,l,d){var f=Hh();return f=f===null?null:{parent:Mn._currentValue,pool:f},r.memoizedState={baseLanes:a,cachePool:f},t!==null&&pc(r,null),$h(),sy(r),t!==null&&go(t,r,l,!0),r.childLanes=d,null}function kc(t,r){return r=Mc({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function rv(t,r,a){return ka(r,t.child,null,a),t=kc(r,r.pendingProps),t.flags|=2,Mr(r),r.memoizedState=null,t}function nS(t,r,a){var l=r.pendingProps,d=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(Vt){if(l.mode==="hidden")return t=kc(r,l),r.lanes=536870912,Vl(null,t);if(Jh(r),(t=dn)?(t=p0(t,Wr),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ts!==null?{id:Ti,overflow:Si}:null,retryLane:536870912,hydrationErrors:null},a=zg(t),a.return=r,r.child=a,$n=r,dn=null)):t=null,t===null)throw ws(r);return r.lanes=536870912,null}return kc(r,l)}var f=t.memoizedState;if(f!==null){var b=f.dehydrated;if(Jh(r),d)if(r.flags&256)r.flags&=-257,r=rv(t,r,a);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(s(558));else if(Vn||go(t,r,a,!1),d=(a&t.childLanes)!==0,Vn||d){if(l=on,l!==null&&(b=Ie(l,a),b!==0&&b!==f.retryLane))throw f.retryLane=b,Sa(t,b),wr(l,t,b),bf;qc(),r=rv(t,r,a)}else t=f.treeContext,dn=Zr(b.nextSibling),$n=r,Vt=!0,Ss=null,Wr=!1,t!==null&&Fg(r,t),r=kc(r,l),r.flags|=4096;return r}return t=qi(t.child,{mode:l.mode,children:l.children}),t.ref=r.ref,r.child=t,t.return=r,t}function Dc(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function Ef(t,r,a,l,d){return Ra(r),a=ef(t,r,a,l,void 0,d),l=tf(),t!==null&&!Vn?(nf(t,r,d),Yi(t,r,d)):(Vt&&l&&Vh(r),r.flags|=1,Jn(t,r,a,d),r.child)}function iv(t,r,a,l,d,f){return Ra(r),r.updateQueue=null,a=oy(r,l,a,d),ay(t),l=tf(),t!==null&&!Vn?(nf(t,r,f),Yi(t,r,f)):(Vt&&l&&Vh(r),r.flags|=1,Jn(t,r,a,f),r.child)}function sv(t,r,a,l,d){if(Ra(r),r.stateNode===null){var f=ho,b=a.contextType;typeof b=="object"&&b!==null&&(f=Wn(b)),f=new a(l,f),r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=vf,r.stateNode=f,f._reactInternals=r,f=r.stateNode,f.props=l,f.state=r.memoizedState,f.refs={},Kh(r),b=a.contextType,f.context=typeof b=="object"&&b!==null?Wn(b):ho,f.state=r.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(yf(r,a,b,l),f.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(b=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),b!==f.state&&vf.enqueueReplaceState(f,f.state,null),Nl(r,l,f,d),xl(),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){f=r.stateNode;var A=r.memoizedProps,M=Ma(a,A);f.props=M;var Q=f.context,J=a.contextType;b=ho,typeof J=="object"&&J!==null&&(b=Wn(J));var se=a.getDerivedStateFromProps;J=typeof se=="function"||typeof f.getSnapshotBeforeUpdate=="function",A=r.pendingProps!==A,J||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(A||Q!==b)&&Gy(r,f,l,b),Cs=!1;var X=r.memoizedState;f.state=X,Nl(r,l,f,d),xl(),Q=r.memoizedState,A||X!==Q||Cs?(typeof se=="function"&&(yf(r,a,se,l),Q=r.memoizedState),(M=Cs||Hy(r,a,M,l,X,Q,b))?(J||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(r.flags|=4194308)):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=Q),f.props=l,f.state=Q,f.context=b,l=M):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{f=r.stateNode,Qh(t,r),b=r.memoizedProps,J=Ma(a,b),f.props=J,se=r.pendingProps,X=f.context,Q=a.contextType,M=ho,typeof Q=="object"&&Q!==null&&(M=Wn(Q)),A=a.getDerivedStateFromProps,(Q=typeof A=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b!==se||X!==M)&&Gy(r,f,l,M),Cs=!1,X=r.memoizedState,f.state=X,Nl(r,l,f,d),xl();var W=r.memoizedState;b!==se||X!==W||Cs||t!==null&&t.dependencies!==null&&fc(t.dependencies)?(typeof A=="function"&&(yf(r,a,A,l),W=r.memoizedState),(J=Cs||Hy(r,a,J,l,X,W,M)||t!==null&&t.dependencies!==null&&fc(t.dependencies))?(Q||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,W,M),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,W,M)),typeof f.componentDidUpdate=="function"&&(r.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof f.componentDidUpdate!="function"||b===t.memoizedProps&&X===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&X===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=W),f.props=l,f.state=W,f.context=M,l=J):(typeof f.componentDidUpdate!="function"||b===t.memoizedProps&&X===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&X===t.memoizedState||(r.flags|=1024),l=!1)}return f=l,Dc(t,r),l=(r.flags&128)!==0,f||l?(f=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),r.flags|=1,t!==null&&l?(r.child=ka(r,t.child,null,d),r.child=ka(r,null,a,d)):Jn(t,r,a,d),r.memoizedState=f.state,t=r.child):t=Yi(t,r,d),t}function av(t,r,a,l){return Aa(),r.flags|=256,Jn(t,r,a,l),r.child}var Tf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sf(t){return{baseLanes:t,cachePool:Xg()}}function wf(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Vr),t}function ov(t,r,a){var l=r.pendingProps,d=!1,f=(r.flags&128)!==0,b;if((b=f)||(b=t!==null&&t.memoizedState===null?!1:(Cn.current&2)!==0),b&&(d=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,t===null){if(Vt){if(d?xs(r):Ns(),(t=dn)?(t=p0(t,Wr),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ts!==null?{id:Ti,overflow:Si}:null,retryLane:536870912,hydrationErrors:null},a=zg(t),a.return=r,r.child=a,$n=r,dn=null)):t=null,t===null)throw ws(r);return am(t)?r.lanes=32:r.lanes=536870912,null}var A=l.children;return l=l.fallback,d?(Ns(),d=r.mode,A=Mc({mode:"hidden",children:A},d),l=wa(l,d,a,null),A.return=r,l.return=r,A.sibling=l,r.child=A,l=r.child,l.memoizedState=Sf(a),l.childLanes=wf(t,b,a),r.memoizedState=Tf,Vl(null,l)):(xs(r),Af(r,A))}var M=t.memoizedState;if(M!==null&&(A=M.dehydrated,A!==null)){if(f)r.flags&256?(xs(r),r.flags&=-257,r=Cf(t,r,a)):r.memoizedState!==null?(Ns(),r.child=t.child,r.flags|=128,r=null):(Ns(),A=l.fallback,d=r.mode,l=Mc({mode:"visible",children:l.children},d),A=wa(A,d,a,null),A.flags|=2,l.return=r,A.return=r,l.sibling=A,r.child=l,ka(r,t.child,null,a),l=r.child,l.memoizedState=Sf(a),l.childLanes=wf(t,b,a),r.memoizedState=Tf,r=Vl(null,l));else if(xs(r),am(A)){if(b=A.nextSibling&&A.nextSibling.dataset,b)var Q=b.dgst;b=Q,l=Error(s(419)),l.stack="",l.digest=b,Sl({value:l,source:null,stack:null}),r=Cf(t,r,a)}else if(Vn||go(t,r,a,!1),b=(a&t.childLanes)!==0,Vn||b){if(b=on,b!==null&&(l=Ie(b,a),l!==0&&l!==M.retryLane))throw M.retryLane=l,Sa(t,l),wr(b,t,l),bf;sm(A)||qc(),r=Cf(t,r,a)}else sm(A)?(r.flags|=192,r.child=t.child,r=null):(t=M.treeContext,dn=Zr(A.nextSibling),$n=r,Vt=!0,Ss=null,Wr=!1,t!==null&&Fg(r,t),r=Af(r,l.children),r.flags|=4096);return r}return d?(Ns(),A=l.fallback,d=r.mode,M=t.child,Q=M.sibling,l=qi(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,Q!==null?A=qi(Q,A):(A=wa(A,d,a,null),A.flags|=2),A.return=r,l.return=r,l.sibling=A,r.child=l,Vl(null,l),l=r.child,A=t.child.memoizedState,A===null?A=Sf(a):(d=A.cachePool,d!==null?(M=Mn._currentValue,d=d.parent!==M?{parent:M,pool:M}:d):d=Xg(),A={baseLanes:A.baseLanes|a,cachePool:d}),l.memoizedState=A,l.childLanes=wf(t,b,a),r.memoizedState=Tf,Vl(t.child,l)):(xs(r),a=t.child,t=a.sibling,a=qi(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(b=r.deletions,b===null?(r.deletions=[t],r.flags|=16):b.push(t)),r.child=a,r.memoizedState=null,a)}function Af(t,r){return r=Mc({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Mc(t,r){return t=kr(22,t,null,r),t.lanes=0,t}function Cf(t,r,a){return ka(r,t.child,null,a),t=Af(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function lv(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),zh(t.return,r,a)}function Rf(t,r,a,l,d,f){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d,treeForkCount:f}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=l,b.tail=a,b.tailMode=d,b.treeForkCount=f)}function uv(t,r,a){var l=r.pendingProps,d=l.revealOrder,f=l.tail;l=l.children;var b=Cn.current,A=(b&2)!==0;if(A?(b=b&1|2,r.flags|=128):b&=1,ee(Cn,b),Jn(t,r,l,a),l=Vt?Tl:0,!A&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lv(t,a,r);else if(t.tag===19)lv(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(d){case"forwards":for(a=r.child,d=null;a!==null;)t=a.alternate,t!==null&&Ec(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),Rf(r,!1,d,a,f,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(t=d.alternate,t!==null&&Ec(t)===null){r.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}Rf(r,!0,a,null,f,l);break;case"together":Rf(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function Yi(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Ms|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(go(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=qi(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=qi(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function If(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&fc(t)))}function rS(t,r,a){switch(r.tag){case 3:st(r,r.stateNode.containerInfo),As(r,Mn,t.memoizedState.cache),Aa();break;case 27:case 5:Pe(r);break;case 4:st(r,r.stateNode.containerInfo);break;case 10:As(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Jh(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(xs(r),r.flags|=128,null):(a&r.child.childLanes)!==0?ov(t,r,a):(xs(r),t=Yi(t,r,a),t!==null?t.sibling:null);xs(r);break;case 19:var d=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(go(t,r,a,!1),l=(a&r.childLanes)!==0),d){if(l)return uv(t,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ee(Cn,Cn.current),l)break;return null;case 22:return r.lanes=0,tv(t,r,a,r.pendingProps);case 24:As(r,Mn,t.memoizedState.cache)}return Yi(t,r,a)}function cv(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Vn=!0;else{if(!If(t,a)&&(r.flags&128)===0)return Vn=!1,rS(t,r,a);Vn=(t.flags&131072)!==0}else Vn=!1,Vt&&(r.flags&1048576)!==0&&qg(r,Tl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(t=xa(r.elementType),r.type=t,typeof t=="function")Dh(t)?(l=Ma(t,l),r.tag=1,r=sv(null,r,t,l,a)):(r.tag=0,r=Ef(null,r,t,l,a));else{if(t!=null){var d=t.$$typeof;if(d===Se){r.tag=11,r=Jy(null,r,t,l,a);break e}else if(d===N){r.tag=14,r=Zy(null,r,t,l,a);break e}}throw r=Ke(t)||t,Error(s(306,r,""))}}return r;case 0:return Ef(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,d=Ma(l,r.pendingProps),sv(t,r,l,d,a);case 3:e:{if(st(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var f=r.memoizedState;d=f.element,Qh(t,r),Nl(r,l,null,a);var b=r.memoizedState;if(l=b.cache,As(r,Mn,l),l!==f.cache&&Bh(r,[Mn],a,!0),xl(),l=b.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=av(t,r,l,a);break e}else if(l!==d){d=Yr(Error(s(424)),r),Sl(d),r=av(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(dn=Zr(t.firstChild),$n=r,Vt=!0,Ss=null,Wr=!0,a=ty(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Aa(),l===d){r=Yi(t,r,a);break e}Jn(t,r,l,a)}r=r.child}return r;case 26:return Dc(t,r),t===null?(a=E0(r.type,null,r.pendingProps,null))?r.memoizedState=a:Vt||(a=r.type,t=r.pendingProps,l=Xc(Ee.current).createElement(a),l[Ue]=r,l[pt]=t,Zn(l,a,t),_n(l),r.stateNode=l):r.memoizedState=E0(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Pe(r),t===null&&Vt&&(l=r.stateNode=v0(r.type,r.pendingProps,Ee.current),$n=r,Wr=!0,d=dn,Ps(r.type)?(om=d,dn=Zr(l.firstChild)):dn=d),Jn(t,r,r.pendingProps.children,a),Dc(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Vt&&((d=l=dn)&&(l=MS(l,r.type,r.pendingProps,Wr),l!==null?(r.stateNode=l,$n=r,dn=Zr(l.firstChild),Wr=!1,d=!0):d=!1),d||ws(r)),Pe(r),d=r.type,f=r.pendingProps,b=t!==null?t.memoizedProps:null,l=f.children,nm(d,f)?l=null:b!==null&&nm(d,b)&&(r.flags|=32),r.memoizedState!==null&&(d=ef(t,r,Y1,null,null,a),$l._currentValue=d),Dc(t,r),Jn(t,r,l,a),r.child;case 6:return t===null&&Vt&&((t=a=dn)&&(a=OS(a,r.pendingProps,Wr),a!==null?(r.stateNode=a,$n=r,dn=null,t=!0):t=!1),t||ws(r)),null;case 13:return ov(t,r,a);case 4:return st(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=ka(r,null,l,a):Jn(t,r,l,a),r.child;case 11:return Jy(t,r,r.type,r.pendingProps,a);case 7:return Jn(t,r,r.pendingProps,a),r.child;case 8:return Jn(t,r,r.pendingProps.children,a),r.child;case 12:return Jn(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,As(r,r.type,l.value),Jn(t,r,l.children,a),r.child;case 9:return d=r.type._context,l=r.pendingProps.children,Ra(r),d=Wn(d),l=l(d),r.flags|=1,Jn(t,r,l,a),r.child;case 14:return Zy(t,r,r.type,r.pendingProps,a);case 15:return ev(t,r,r.type,r.pendingProps,a);case 19:return uv(t,r,a);case 31:return nS(t,r,a);case 22:return tv(t,r,a,r.pendingProps);case 24:return Ra(r),l=Wn(Mn),t===null?(d=Hh(),d===null&&(d=on,f=qh(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=a),d=f),r.memoizedState={parent:l,cache:d},Kh(r),As(r,Mn,d)):((t.lanes&a)!==0&&(Qh(t,r),Nl(r,null,null,a),xl()),d=t.memoizedState,f=r.memoizedState,d.parent!==l?(d={parent:l,cache:l},r.memoizedState=d,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=d),As(r,Mn,l)):(l=f.cache,As(r,Mn,l),l!==d.cache&&Bh(r,[Mn],a,!0))),Jn(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Xi(t){t.flags|=4}function xf(t,r,a,l,d){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(d&335544128)===d)if(t.stateNode.complete)t.flags|=8192;else if(Lv())t.flags|=8192;else throw Na=yc,Gh}else t.flags&=-16777217}function dv(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!C0(r))if(Lv())t.flags|=8192;else throw Na=yc,Gh}function Oc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?F():536870912,t.lanes|=r,Io|=r)}function jl(t,r){if(!Vt)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function hn(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function iS(t,r,a){var l=r.pendingProps;switch(jh(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hn(r),null;case 1:return hn(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Gi(Mn),he(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(po(r)?Xi(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Ph())),hn(r),null;case 26:var d=r.type,f=r.memoizedState;return t===null?(Xi(r),f!==null?(hn(r),dv(r,f)):(hn(r),xf(r,d,null,l,a))):f?f!==t.memoizedState?(Xi(r),hn(r),dv(r,f)):(hn(r),r.flags&=-16777217):(t=t.memoizedProps,t!==l&&Xi(r),hn(r),xf(r,d,t,l,a)),null;case 27:if(ot(r),a=Ee.current,d=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Xi(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return hn(r),null}t=ie.current,po(r)?Hg(r):(t=v0(d,l,a),r.stateNode=t,Xi(r))}return hn(r),null;case 5:if(ot(r),d=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Xi(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return hn(r),null}if(f=ie.current,po(r))Hg(r);else{var b=Xc(Ee.current);switch(f){case 1:f=b.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:f=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":f=b.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":f=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":f=b.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof l.is=="string"?b.createElement("select",{is:l.is}):b.createElement("select"),l.multiple?f.multiple=!0:l.size&&(f.size=l.size);break;default:f=typeof l.is=="string"?b.createElement(d,{is:l.is}):b.createElement(d)}}f[Ue]=r,f[pt]=l;e:for(b=r.child;b!==null;){if(b.tag===5||b.tag===6)f.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===r)break e;for(;b.sibling===null;){if(b.return===null||b.return===r)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}r.stateNode=f;e:switch(Zn(f,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Xi(r)}}return hn(r),xf(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,a),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&Xi(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=Ee.current,po(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,d=$n,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}t[Ue]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||o0(t.nodeValue,a)),t||ws(r,!0)}else t=Xc(t).createTextNode(l),t[Ue]=r,r.stateNode=t}return hn(r),null;case 31:if(a=r.memoizedState,t===null||t.memoizedState!==null){if(l=po(r),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[Ue]=r}else Aa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;hn(r),t=!1}else a=Ph(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return r.flags&256?(Mr(r),r):(Mr(r),null);if((r.flags&128)!==0)throw Error(s(558))}return hn(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=po(r),l!==null&&l.dehydrated!==null){if(t===null){if(!d)throw Error(s(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[Ue]=r}else Aa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;hn(r),d=!1}else d=Ph(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return r.flags&256?(Mr(r),r):(Mr(r),null)}return Mr(r),(r.flags&128)!==0?(r.lanes=a,r):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=r.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==d&&(l.flags|=2048)),a!==t&&a&&(r.child.flags|=8192),Oc(r,r.updateQueue),hn(r),null);case 4:return he(),t===null&&Wf(r.stateNode.containerInfo),hn(r),null;case 10:return Gi(r.type),hn(r),null;case 19:if(G(Cn),l=r.memoizedState,l===null)return hn(r),null;if(d=(r.flags&128)!==0,f=l.rendering,f===null)if(d)jl(l,!1);else{if(En!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(f=Ec(t),f!==null){for(r.flags|=128,jl(l,!1),t=f.updateQueue,r.updateQueue=t,Oc(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Ug(a,t),a=a.sibling;return ee(Cn,Cn.current&1|2),Vt&&Fi(r,l.treeForkCount),r.child}t=t.sibling}l.tail!==null&&jt()>Uc&&(r.flags|=128,d=!0,jl(l,!1),r.lanes=4194304)}else{if(!d)if(t=Ec(f),t!==null){if(r.flags|=128,d=!0,t=t.updateQueue,r.updateQueue=t,Oc(r,t),jl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!Vt)return hn(r),null}else 2*jt()-l.renderingStartTime>Uc&&a!==536870912&&(r.flags|=128,d=!0,jl(l,!1),r.lanes=4194304);l.isBackwards?(f.sibling=r.child,r.child=f):(t=l.last,t!==null?t.sibling=f:r.child=f,l.last=f)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=jt(),t.sibling=null,a=Cn.current,ee(Cn,d?a&1|2:a&1),Vt&&Fi(r,l.treeForkCount),t):(hn(r),null);case 22:case 23:return Mr(r),Wh(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(hn(r),r.subtreeFlags&6&&(r.flags|=8192)):hn(r),a=r.updateQueue,a!==null&&Oc(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&G(Ia),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Gi(Mn),hn(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function sS(t,r){switch(jh(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Gi(Mn),he(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return ot(r),null;case 31:if(r.memoizedState!==null){if(Mr(r),r.alternate===null)throw Error(s(340));Aa()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(Mr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Aa()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return G(Cn),null;case 4:return he(),null;case 10:return Gi(r.type),null;case 22:case 23:return Mr(r),Wh(),t!==null&&G(Ia),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Gi(Mn),null;case 25:return null;default:return null}}function hv(t,r){switch(jh(r),r.tag){case 3:Gi(Mn),he();break;case 26:case 27:case 5:ot(r);break;case 4:he();break;case 31:r.memoizedState!==null&&Mr(r);break;case 13:Mr(r);break;case 19:G(Cn);break;case 10:Gi(r.type);break;case 22:case 23:Mr(r),Wh(),t!==null&&G(Ia);break;case 24:Gi(Mn)}}function Ll(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&t)===t){l=void 0;var f=a.create,b=a.inst;l=f(),b.destroy=l}a=a.next}while(a!==d)}}catch(A){Zt(r,r.return,A)}}function ks(t,r,a){try{var l=r.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var f=d.next;l=f;do{if((l.tag&t)===t){var b=l.inst,A=b.destroy;if(A!==void 0){b.destroy=void 0,d=r;var M=a,Q=A;try{Q()}catch(J){Zt(d,M,J)}}}l=l.next}while(l!==f)}}catch(J){Zt(r,r.return,J)}}function fv(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{ry(r,a)}catch(l){Zt(t,t.return,l)}}}function mv(t,r,a){a.props=Ma(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Zt(t,r,l)}}function Pl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(d){Zt(t,r,d)}}function wi(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){Zt(t,r,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){Zt(t,r,d)}else a.current=null}function pv(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){Zt(t,t.return,d)}}function Nf(t,r,a){try{var l=t.stateNode;RS(l,t.type,a,r),l[pt]=r}catch(d){Zt(t,t.return,d)}}function gv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ps(t.type)||t.tag===4}function kf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ps(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Df(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=ri));else if(l!==4&&(l===27&&Ps(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(Df(t,r,a),t=t.sibling;t!==null;)Df(t,r,a),t=t.sibling}function Vc(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&Ps(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Vc(t,r,a),t=t.sibling;t!==null;)Vc(t,r,a),t=t.sibling}function yv(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,d=r.attributes;d.length;)r.removeAttributeNode(d[0]);Zn(r,l,a),r[Ue]=t,r[pt]=a}catch(f){Zt(t,t.return,f)}}var $i=!1,jn=!1,Mf=!1,vv=typeof WeakSet=="function"?WeakSet:Set,Qn=null;function aS(t,r){if(t=t.containerInfo,em=nd,t=Ng(t),Ah(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var b=0,A=-1,M=-1,Q=0,J=0,se=t,X=null;t:for(;;){for(var W;se!==a||d!==0&&se.nodeType!==3||(A=b+d),se!==f||l!==0&&se.nodeType!==3||(M=b+l),se.nodeType===3&&(b+=se.nodeValue.length),(W=se.firstChild)!==null;)X=se,se=W;for(;;){if(se===t)break t;if(X===a&&++Q===d&&(A=b),X===f&&++J===l&&(M=b),(W=se.nextSibling)!==null)break;se=X,X=se.parentNode}se=W}a=A===-1||M===-1?null:{start:A,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(tm={focusedElem:t,selectionRange:a},nd=!1,Qn=r;Qn!==null;)if(r=Qn,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Qn=t;else for(;Qn!==null;){switch(r=Qn,f=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)d=t[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=r,d=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var ze=Ma(a.type,d);t=l.getSnapshotBeforeUpdate(ze,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(et){Zt(a,a.return,et)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)im(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":im(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Qn=t;break}Qn=r.return}}function _v(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ji(t,a),l&4&&Ll(5,a);break;case 1:if(Ji(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(b){Zt(a,a.return,b)}else{var d=Ma(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(d,r,t.__reactInternalSnapshotBeforeUpdate)}catch(b){Zt(a,a.return,b)}}l&64&&fv(a),l&512&&Pl(a,a.return);break;case 3:if(Ji(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{ry(t,r)}catch(b){Zt(a,a.return,b)}}break;case 27:r===null&&l&4&&yv(a);case 26:case 5:Ji(t,a),r===null&&l&4&&pv(a),l&512&&Pl(a,a.return);break;case 12:Ji(t,a);break;case 31:Ji(t,a),l&4&&Tv(t,a);break;case 13:Ji(t,a),l&4&&Sv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=pS.bind(null,a),VS(t,a))));break;case 22:if(l=a.memoizedState!==null||$i,!l){r=r!==null&&r.memoizedState!==null||jn,d=$i;var f=jn;$i=l,(jn=r)&&!f?Zi(t,a,(a.subtreeFlags&8772)!==0):Ji(t,a),$i=d,jn=f}break;case 30:break;default:Ji(t,a)}}function bv(t){var r=t.alternate;r!==null&&(t.alternate=null,bv(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&fs(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var gn=null,br=!1;function Wi(t,r,a){for(a=a.child;a!==null;)Ev(t,r,a),a=a.sibling}function Ev(t,r,a){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(vn,a)}catch{}switch(a.tag){case 26:jn||wi(a,r),Wi(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:jn||wi(a,r);var l=gn,d=br;Ps(a.type)&&(gn=a.stateNode,br=!1),Wi(t,r,a),Ql(a.stateNode),gn=l,br=d;break;case 5:jn||wi(a,r);case 6:if(l=gn,d=br,gn=null,Wi(t,r,a),gn=l,br=d,gn!==null)if(br)try{(gn.nodeType===9?gn.body:gn.nodeName==="HTML"?gn.ownerDocument.body:gn).removeChild(a.stateNode)}catch(f){Zt(a,r,f)}else try{gn.removeChild(a.stateNode)}catch(f){Zt(a,r,f)}break;case 18:gn!==null&&(br?(t=gn,f0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),jo(t)):f0(gn,a.stateNode));break;case 4:l=gn,d=br,gn=a.stateNode.containerInfo,br=!0,Wi(t,r,a),gn=l,br=d;break;case 0:case 11:case 14:case 15:ks(2,a,r),jn||ks(4,a,r),Wi(t,r,a);break;case 1:jn||(wi(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&mv(a,r,l)),Wi(t,r,a);break;case 21:Wi(t,r,a);break;case 22:jn=(l=jn)||a.memoizedState!==null,Wi(t,r,a),jn=l;break;default:Wi(t,r,a)}}function Tv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{jo(t)}catch(a){Zt(r,r.return,a)}}}function Sv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{jo(t)}catch(a){Zt(r,r.return,a)}}function oS(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new vv),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new vv),r;default:throw Error(s(435,t.tag))}}function jc(t,r){var a=oS(t);r.forEach(function(l){if(!a.has(l)){a.add(l);var d=gS.bind(null,t,l);l.then(d,d)}})}function Er(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],f=t,b=r,A=b;e:for(;A!==null;){switch(A.tag){case 27:if(Ps(A.type)){gn=A.stateNode,br=!1;break e}break;case 5:gn=A.stateNode,br=!1;break e;case 3:case 4:gn=A.stateNode.containerInfo,br=!0;break e}A=A.return}if(gn===null)throw Error(s(160));Ev(f,b,d),gn=null,br=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)wv(r,t),r=r.sibling}var ui=null;function wv(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Er(r,t),Tr(t),l&4&&(ks(3,t,t.return),Ll(3,t),ks(5,t,t.return));break;case 1:Er(r,t),Tr(t),l&512&&(jn||a===null||wi(a,a.return)),l&64&&$i&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=ui;if(Er(r,t),Tr(t),l&512&&(jn||a===null||wi(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":f=d.getElementsByTagName("title")[0],(!f||f[zr]||f[Ue]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(l),d.head.insertBefore(f,d.querySelector("head > title"))),Zn(f,l,a),f[Ue]=t,_n(f),l=f;break e;case"link":var b=w0("link","href",d).get(l+(a.href||""));if(b){for(var A=0;A<b.length;A++)if(f=b[A],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(A,1);break t}}f=d.createElement(l),Zn(f,l,a),d.head.appendChild(f);break;case"meta":if(b=w0("meta","content",d).get(l+(a.content||""))){for(A=0;A<b.length;A++)if(f=b[A],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(A,1);break t}}f=d.createElement(l),Zn(f,l,a),d.head.appendChild(f);break;default:throw Error(s(468,l))}f[Ue]=t,_n(f),l=f}t.stateNode=l}else A0(d,t.type,t.stateNode);else t.stateNode=S0(d,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?A0(d,t.type,t.stateNode):S0(d,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Nf(t,t.memoizedProps,a.memoizedProps)}break;case 27:Er(r,t),Tr(t),l&512&&(jn||a===null||wi(a,a.return)),a!==null&&l&4&&Nf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Er(r,t),Tr(t),l&512&&(jn||a===null||wi(a,a.return)),t.flags&32){d=t.stateNode;try{_r(d,"")}catch(ze){Zt(t,t.return,ze)}}l&4&&t.stateNode!=null&&(d=t.memoizedProps,Nf(t,d,a!==null?a.memoizedProps:d)),l&1024&&(Mf=!0);break;case 6:if(Er(r,t),Tr(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ze){Zt(t,t.return,ze)}}break;case 3:if(Jc=null,d=ui,ui=$c(r.containerInfo),Er(r,t),ui=d,Tr(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{jo(r.containerInfo)}catch(ze){Zt(t,t.return,ze)}Mf&&(Mf=!1,Av(t));break;case 4:l=ui,ui=$c(t.stateNode.containerInfo),Er(r,t),Tr(t),ui=l;break;case 12:Er(r,t),Tr(t);break;case 31:Er(r,t),Tr(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,jc(t,l)));break;case 13:Er(r,t),Tr(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Pc=jt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,jc(t,l)));break;case 22:d=t.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,Q=$i,J=jn;if($i=Q||d,jn=J||M,Er(r,t),jn=J,$i=Q,Tr(t),l&8192)e:for(r=t.stateNode,r._visibility=d?r._visibility&-2:r._visibility|1,d&&(a===null||M||$i||jn||Oa(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){M=a=r;try{if(f=M.stateNode,d)b=f.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{A=M.stateNode;var se=M.memoizedProps.style,X=se!=null&&se.hasOwnProperty("display")?se.display:null;A.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(ze){Zt(M,M.return,ze)}}}else if(r.tag===6){if(a===null){M=r;try{M.stateNode.nodeValue=d?"":M.memoizedProps}catch(ze){Zt(M,M.return,ze)}}}else if(r.tag===18){if(a===null){M=r;try{var W=M.stateNode;d?m0(W,!0):m0(M.stateNode,!1)}catch(ze){Zt(M,M.return,ze)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,jc(t,a))));break;case 19:Er(r,t),Tr(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,jc(t,l)));break;case 30:break;case 21:break;default:Er(r,t),Tr(t)}}function Tr(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(gv(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var d=a.stateNode,f=kf(t);Vc(t,f,d);break;case 5:var b=a.stateNode;a.flags&32&&(_r(b,""),a.flags&=-33);var A=kf(t);Vc(t,A,b);break;case 3:case 4:var M=a.stateNode.containerInfo,Q=kf(t);Df(t,Q,M);break;default:throw Error(s(161))}}catch(J){Zt(t,t.return,J)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Av(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Av(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Ji(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)_v(t,r.alternate,r),r=r.sibling}function Oa(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:ks(4,r,r.return),Oa(r);break;case 1:wi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&mv(r,r.return,a),Oa(r);break;case 27:Ql(r.stateNode);case 26:case 5:wi(r,r.return),Oa(r);break;case 22:r.memoizedState===null&&Oa(r);break;case 30:Oa(r);break;default:Oa(r)}t=t.sibling}}function Zi(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,d=t,f=r,b=f.flags;switch(f.tag){case 0:case 11:case 15:Zi(d,f,a),Ll(4,f);break;case 1:if(Zi(d,f,a),l=f,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(Q){Zt(l,l.return,Q)}if(l=f,d=l.updateQueue,d!==null){var A=l.stateNode;try{var M=d.shared.hiddenCallbacks;if(M!==null)for(d.shared.hiddenCallbacks=null,d=0;d<M.length;d++)ny(M[d],A)}catch(Q){Zt(l,l.return,Q)}}a&&b&64&&fv(f),Pl(f,f.return);break;case 27:yv(f);case 26:case 5:Zi(d,f,a),a&&l===null&&b&4&&pv(f),Pl(f,f.return);break;case 12:Zi(d,f,a);break;case 31:Zi(d,f,a),a&&b&4&&Tv(d,f);break;case 13:Zi(d,f,a),a&&b&4&&Sv(d,f);break;case 22:f.memoizedState===null&&Zi(d,f,a),Pl(f,f.return);break;case 30:break;default:Zi(d,f,a)}r=r.sibling}}function Of(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&wl(a))}function Vf(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&wl(t))}function ci(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Cv(t,r,a,l),r=r.sibling}function Cv(t,r,a,l){var d=r.flags;switch(r.tag){case 0:case 11:case 15:ci(t,r,a,l),d&2048&&Ll(9,r);break;case 1:ci(t,r,a,l);break;case 3:ci(t,r,a,l),d&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&wl(t)));break;case 12:if(d&2048){ci(t,r,a,l),t=r.stateNode;try{var f=r.memoizedProps,b=f.id,A=f.onPostCommit;typeof A=="function"&&A(b,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(M){Zt(r,r.return,M)}}else ci(t,r,a,l);break;case 31:ci(t,r,a,l);break;case 13:ci(t,r,a,l);break;case 23:break;case 22:f=r.stateNode,b=r.alternate,r.memoizedState!==null?f._visibility&2?ci(t,r,a,l):Ul(t,r):f._visibility&2?ci(t,r,a,l):(f._visibility|=2,Ao(t,r,a,l,(r.subtreeFlags&10256)!==0||!1)),d&2048&&Of(b,r);break;case 24:ci(t,r,a,l),d&2048&&Vf(r.alternate,r);break;default:ci(t,r,a,l)}}function Ao(t,r,a,l,d){for(d=d&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var f=t,b=r,A=a,M=l,Q=b.flags;switch(b.tag){case 0:case 11:case 15:Ao(f,b,A,M,d),Ll(8,b);break;case 23:break;case 22:var J=b.stateNode;b.memoizedState!==null?J._visibility&2?Ao(f,b,A,M,d):Ul(f,b):(J._visibility|=2,Ao(f,b,A,M,d)),d&&Q&2048&&Of(b.alternate,b);break;case 24:Ao(f,b,A,M,d),d&&Q&2048&&Vf(b.alternate,b);break;default:Ao(f,b,A,M,d)}r=r.sibling}}function Ul(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,d=l.flags;switch(l.tag){case 22:Ul(a,l),d&2048&&Of(l.alternate,l);break;case 24:Ul(a,l),d&2048&&Vf(l.alternate,l);break;default:Ul(a,l)}r=r.sibling}}var zl=8192;function Co(t,r,a){if(t.subtreeFlags&zl)for(t=t.child;t!==null;)Rv(t,r,a),t=t.sibling}function Rv(t,r,a){switch(t.tag){case 26:Co(t,r,a),t.flags&zl&&t.memoizedState!==null&&QS(a,ui,t.memoizedState,t.memoizedProps);break;case 5:Co(t,r,a);break;case 3:case 4:var l=ui;ui=$c(t.stateNode.containerInfo),Co(t,r,a),ui=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=zl,zl=16777216,Co(t,r,a),zl=l):Co(t,r,a));break;default:Co(t,r,a)}}function Iv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Bl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Qn=l,Nv(l,t)}Iv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)xv(t),t=t.sibling}function xv(t){switch(t.tag){case 0:case 11:case 15:Bl(t),t.flags&2048&&ks(9,t,t.return);break;case 3:Bl(t);break;case 12:Bl(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Lc(t)):Bl(t);break;default:Bl(t)}}function Lc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Qn=l,Nv(l,t)}Iv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:ks(8,r,r.return),Lc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Lc(r));break;default:Lc(r)}t=t.sibling}}function Nv(t,r){for(;Qn!==null;){var a=Qn;switch(a.tag){case 0:case 11:case 15:ks(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:wl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Qn=l;else e:for(a=t;Qn!==null;){l=Qn;var d=l.sibling,f=l.return;if(bv(l),l===a){Qn=null;break e}if(d!==null){d.return=f,Qn=d;break e}Qn=f}}}var lS={getCacheForType:function(t){var r=Wn(Mn),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a},cacheSignal:function(){return Wn(Mn).controller.signal}},uS=typeof WeakMap=="function"?WeakMap:Map,Kt=0,on=null,Tt=null,Rt=0,Jt=0,Or=null,Ds=!1,Ro=!1,jf=!1,es=0,En=0,Ms=0,Va=0,Lf=0,Vr=0,Io=0,ql=null,Sr=null,Pf=!1,Pc=0,kv=0,Uc=1/0,zc=null,Os=null,Bn=0,Vs=null,xo=null,ts=0,Uf=0,zf=null,Dv=null,Fl=0,Bf=null;function jr(){return(Kt&2)!==0&&Rt!==0?Rt&-Rt:Y.T!==null?Qf():yt()}function Mv(){if(Vr===0)if((Rt&536870912)===0||Vt){var t=Nn;Nn<<=1,(Nn&3932160)===0&&(Nn=262144),Vr=t}else Vr=536870912;return t=Dr.current,t!==null&&(t.flags|=32),Vr}function wr(t,r,a){(t===on&&(Jt===2||Jt===9)||t.cancelPendingCommit!==null)&&(No(t,0),js(t,Rt,Vr,!1)),de(t,a),((Kt&2)===0||t!==on)&&(t===on&&((Kt&2)===0&&(Va|=a),En===4&&js(t,Rt,Vr,!1)),Ai(t))}function Ov(t,r,a){if((Kt&6)!==0)throw Error(s(327));var l=!a&&(r&127)===0&&(r&t.expiredLanes)===0||qe(t,r),d=l?hS(t,r):Ff(t,r,!0),f=l;do{if(d===0){Ro&&!l&&js(t,r,0,!1);break}else{if(a=t.current.alternate,f&&!cS(a)){d=Ff(t,r,!1),f=!1;continue}if(d===2){if(f=r,t.errorRecoveryDisabledLanes&f)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var A=t;d=ql;var M=A.current.memoizedState.isDehydrated;if(M&&(No(A,b).flags|=256),b=Ff(A,b,!1),b!==2){if(jf&&!M){A.errorRecoveryDisabledLanes|=f,Va|=f,d=4;break e}f=Sr,Sr=d,f!==null&&(Sr===null?Sr=f:Sr.push.apply(Sr,f))}d=b}if(f=!1,d!==2)continue}}if(d===1){No(t,0),js(t,r,0,!0);break}e:{switch(l=t,f=d,f){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:js(l,r,Vr,!Ds);break e;case 2:Sr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(d=Pc+300-jt(),10<d)){if(js(l,r,Vr,!Ds),Gn(l,0,!0)!==0)break e;ts=r,l.timeoutHandle=d0(Vv.bind(null,l,a,Sr,zc,Pf,r,Vr,Va,Io,Ds,f,"Throttled",-0,0),d);break e}Vv(l,a,Sr,zc,Pf,r,Vr,Va,Io,Ds,f,null,-0,0)}}break}while(!0);Ai(t)}function Vv(t,r,a,l,d,f,b,A,M,Q,J,se,X,W){if(t.timeoutHandle=-1,se=r.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ri},Rv(r,f,se);var ze=(f&62914560)===f?Pc-jt():(f&4194048)===f?kv-jt():0;if(ze=YS(se,ze),ze!==null){ts=f,t.cancelPendingCommit=ze(Fv.bind(null,t,r,f,a,l,d,b,A,M,J,se,null,X,W)),js(t,f,b,!Q);return}}Fv(t,r,f,a,l,d,b,A,M)}function cS(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],f=d.getSnapshot;d=d.value;try{if(!Nr(f(),d))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function js(t,r,a,l){r&=~Lf,r&=~Va,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var d=r;0<d;){var f=31-bt(d),b=1<<f;l[f]=-1,d&=~b}a!==0&&we(t,a,r)}function Bc(){return(Kt&6)===0?(Hl(0),!1):!0}function qf(){if(Tt!==null){if(Jt===0)var t=Tt.return;else t=Tt,Hi=Ca=null,rf(t),bo=null,Cl=0,t=Tt;for(;t!==null;)hv(t.alternate,t),t=t.return;Tt=null}}function No(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,NS(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),ts=0,qf(),on=t,Tt=a=qi(t.current,null),Rt=r,Jt=0,Or=null,Ds=!1,Ro=qe(t,r),jf=!1,Io=Vr=Lf=Va=Ms=En=0,Sr=ql=null,Pf=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var d=31-bt(l),f=1<<d;r|=t[d],l&=~f}return es=r,lc(),a}function jv(t,r){ht=null,Y.H=Ol,r===_o||r===gc?(r=Jg(),Jt=3):r===Gh?(r=Jg(),Jt=4):Jt=r===bf?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Or=r,Tt===null&&(En=1,Nc(t,Yr(r,t.current)))}function Lv(){var t=Dr.current;return t===null?!0:(Rt&4194048)===Rt?Jr===null:(Rt&62914560)===Rt||(Rt&536870912)!==0?t===Jr:!1}function Pv(){var t=Y.H;return Y.H=Ol,t===null?Ol:t}function Uv(){var t=Y.A;return Y.A=lS,t}function qc(){En=4,Ds||(Rt&4194048)!==Rt&&Dr.current!==null||(Ro=!0),(Ms&134217727)===0&&(Va&134217727)===0||on===null||js(on,Rt,Vr,!1)}function Ff(t,r,a){var l=Kt;Kt|=2;var d=Pv(),f=Uv();(on!==t||Rt!==r)&&(zc=null,No(t,r)),r=!1;var b=En;e:do try{if(Jt!==0&&Tt!==null){var A=Tt,M=Or;switch(Jt){case 8:qf(),b=6;break e;case 3:case 2:case 9:case 6:Dr.current===null&&(r=!0);var Q=Jt;if(Jt=0,Or=null,ko(t,A,M,Q),a&&Ro){b=0;break e}break;default:Q=Jt,Jt=0,Or=null,ko(t,A,M,Q)}}dS(),b=En;break}catch(J){jv(t,J)}while(!0);return r&&t.shellSuspendCounter++,Hi=Ca=null,Kt=l,Y.H=d,Y.A=f,Tt===null&&(on=null,Rt=0,lc()),b}function dS(){for(;Tt!==null;)zv(Tt)}function hS(t,r){var a=Kt;Kt|=2;var l=Pv(),d=Uv();on!==t||Rt!==r?(zc=null,Uc=jt()+500,No(t,r)):Ro=qe(t,r);e:do try{if(Jt!==0&&Tt!==null){r=Tt;var f=Or;t:switch(Jt){case 1:Jt=0,Or=null,ko(t,r,f,1);break;case 2:case 9:if($g(f)){Jt=0,Or=null,Bv(r);break}r=function(){Jt!==2&&Jt!==9||on!==t||(Jt=7),Ai(t)},f.then(r,r);break e;case 3:Jt=7;break e;case 4:Jt=5;break e;case 7:$g(f)?(Jt=0,Or=null,Bv(r)):(Jt=0,Or=null,ko(t,r,f,7));break;case 5:var b=null;switch(Tt.tag){case 26:b=Tt.memoizedState;case 5:case 27:var A=Tt;if(b?C0(b):A.stateNode.complete){Jt=0,Or=null;var M=A.sibling;if(M!==null)Tt=M;else{var Q=A.return;Q!==null?(Tt=Q,Fc(Q)):Tt=null}break t}}Jt=0,Or=null,ko(t,r,f,5);break;case 6:Jt=0,Or=null,ko(t,r,f,6);break;case 8:qf(),En=6;break e;default:throw Error(s(462))}}fS();break}catch(J){jv(t,J)}while(!0);return Hi=Ca=null,Y.H=l,Y.A=d,Kt=a,Tt!==null?0:(on=null,Rt=0,lc(),En)}function fS(){for(;Tt!==null&&!sn();)zv(Tt)}function zv(t){var r=cv(t.alternate,t,es);t.memoizedProps=t.pendingProps,r===null?Fc(t):Tt=r}function Bv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=iv(a,r,r.pendingProps,r.type,void 0,Rt);break;case 11:r=iv(a,r,r.pendingProps,r.type.render,r.ref,Rt);break;case 5:rf(r);default:hv(a,r),r=Tt=Ug(r,es),r=cv(a,r,es)}t.memoizedProps=t.pendingProps,r===null?Fc(t):Tt=r}function ko(t,r,a,l){Hi=Ca=null,rf(r),bo=null,Cl=0;var d=r.return;try{if(tS(t,d,r,a,Rt)){En=1,Nc(t,Yr(a,t.current)),Tt=null;return}}catch(f){if(d!==null)throw Tt=d,f;En=1,Nc(t,Yr(a,t.current)),Tt=null;return}r.flags&32768?(Vt||l===1?t=!0:Ro||(Rt&536870912)!==0?t=!1:(Ds=t=!0,(l===2||l===9||l===3||l===6)&&(l=Dr.current,l!==null&&l.tag===13&&(l.flags|=16384))),qv(r,t)):Fc(r)}function Fc(t){var r=t;do{if((r.flags&32768)!==0){qv(r,Ds);return}t=r.return;var a=iS(r.alternate,r,es);if(a!==null){Tt=a;return}if(r=r.sibling,r!==null){Tt=r;return}Tt=r=t}while(r!==null);En===0&&(En=5)}function qv(t,r){do{var a=sS(t.alternate,t);if(a!==null){a.flags&=32767,Tt=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Tt=t;return}Tt=t=a}while(t!==null);En=6,Tt=null}function Fv(t,r,a,l,d,f,b,A,M){t.cancelPendingCommit=null;do Hc();while(Bn!==0);if((Kt&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(f=r.lanes|r.childLanes,f|=Nh,ye(t,a,f,b,A,M),t===on&&(Tt=on=null,Rt=0),xo=r,Vs=t,ts=a,Uf=f,zf=d,Dv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,yS(At,function(){return Yv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null,d=ce.p,ce.p=2,b=Kt,Kt|=4;try{aS(t,r,a)}finally{Kt=b,ce.p=d,Y.T=l}}Bn=1,Hv(),Gv(),Kv()}}function Hv(){if(Bn===1){Bn=0;var t=Vs,r=xo,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=Y.T,Y.T=null;var l=ce.p;ce.p=2;var d=Kt;Kt|=4;try{wv(r,t);var f=tm,b=Ng(t.containerInfo),A=f.focusedElem,M=f.selectionRange;if(b!==A&&A&&A.ownerDocument&&xg(A.ownerDocument.documentElement,A)){if(M!==null&&Ah(A)){var Q=M.start,J=M.end;if(J===void 0&&(J=Q),"selectionStart"in A)A.selectionStart=Q,A.selectionEnd=Math.min(J,A.value.length);else{var se=A.ownerDocument||document,X=se&&se.defaultView||window;if(X.getSelection){var W=X.getSelection(),ze=A.textContent.length,et=Math.min(M.start,ze),rn=M.end===void 0?et:Math.min(M.end,ze);!W.extend&&et>rn&&(b=rn,rn=et,et=b);var z=Ig(A,et),L=Ig(A,rn);if(z&&L&&(W.rangeCount!==1||W.anchorNode!==z.node||W.anchorOffset!==z.offset||W.focusNode!==L.node||W.focusOffset!==L.offset)){var K=se.createRange();K.setStart(z.node,z.offset),W.removeAllRanges(),et>rn?(W.addRange(K),W.extend(L.node,L.offset)):(K.setEnd(L.node,L.offset),W.addRange(K))}}}}for(se=[],W=A;W=W.parentNode;)W.nodeType===1&&se.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<se.length;A++){var re=se[A];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}nd=!!em,tm=em=null}finally{Kt=d,ce.p=l,Y.T=a}}t.current=r,Bn=2}}function Gv(){if(Bn===2){Bn=0;var t=Vs,r=xo,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=Y.T,Y.T=null;var l=ce.p;ce.p=2;var d=Kt;Kt|=4;try{_v(t,r.alternate,r)}finally{Kt=d,ce.p=l,Y.T=a}}Bn=3}}function Kv(){if(Bn===4||Bn===3){Bn=0,_t();var t=Vs,r=xo,a=ts,l=Dv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Bn=5:(Bn=0,xo=Vs=null,Qv(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(Os=null),tt(a),r=r.stateNode,Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(vn,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=Y.T,d=ce.p,ce.p=2,Y.T=null;try{for(var f=t.onRecoverableError,b=0;b<l.length;b++){var A=l[b];f(A.value,{componentStack:A.stack})}}finally{Y.T=r,ce.p=d}}(ts&3)!==0&&Hc(),Ai(t),d=t.pendingLanes,(a&261930)!==0&&(d&42)!==0?t===Bf?Fl++:(Fl=0,Bf=t):Fl=0,Hl(0)}}function Qv(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,wl(r)))}function Hc(){return Hv(),Gv(),Kv(),Yv()}function Yv(){if(Bn!==5)return!1;var t=Vs,r=Uf;Uf=0;var a=tt(ts),l=Y.T,d=ce.p;try{ce.p=32>a?32:a,Y.T=null,a=zf,zf=null;var f=Vs,b=ts;if(Bn=0,xo=Vs=null,ts=0,(Kt&6)!==0)throw Error(s(331));var A=Kt;if(Kt|=4,xv(f.current),Cv(f,f.current,b,a),Kt=A,Hl(0,!1),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(vn,f)}catch{}return!0}finally{ce.p=d,Y.T=l,Qv(t,r)}}function Xv(t,r,a){r=Yr(a,r),r=_f(t.stateNode,r,2),t=Is(t,r,2),t!==null&&(de(t,2),Ai(t))}function Zt(t,r,a){if(t.tag===3)Xv(t,t,a);else for(;r!==null;){if(r.tag===3){Xv(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Os===null||!Os.has(l))){t=Yr(a,t),a=$y(2),l=Is(r,a,2),l!==null&&(Wy(a,l,r,t),de(l,2),Ai(l));break}}r=r.return}}function Hf(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new uS;var d=new Set;l.set(r,d)}else d=l.get(r),d===void 0&&(d=new Set,l.set(r,d));d.has(a)||(jf=!0,d.add(a),t=mS.bind(null,t,r,a),r.then(t,t))}function mS(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,on===t&&(Rt&a)===a&&(En===4||En===3&&(Rt&62914560)===Rt&&300>jt()-Pc?(Kt&2)===0&&No(t,0):Lf|=a,Io===Rt&&(Io=0)),Ai(t)}function $v(t,r){r===0&&(r=F()),t=Sa(t,r),t!==null&&(de(t,r),Ai(t))}function pS(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),$v(t,a)}function gS(t,r){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),$v(t,a)}function yS(t,r){return ke(t,r)}var Gc=null,Do=null,Gf=!1,Kc=!1,Kf=!1,Ls=0;function Ai(t){t!==Do&&t.next===null&&(Do===null?Gc=Do=t:Do=Do.next=t),Kc=!0,Gf||(Gf=!0,_S())}function Hl(t,r){if(!Kf&&Kc){Kf=!0;do for(var a=!1,l=Gc;l!==null;){if(t!==0){var d=l.pendingLanes;if(d===0)var f=0;else{var b=l.suspendedLanes,A=l.pingedLanes;f=(1<<31-bt(42|t)+1)-1,f&=d&~(b&~A),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,e0(l,f))}else f=Rt,f=Gn(l,l===on?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||qe(l,f)||(a=!0,e0(l,f));l=l.next}while(a);Kf=!1}}function vS(){Wv()}function Wv(){Kc=Gf=!1;var t=0;Ls!==0&&xS()&&(t=Ls);for(var r=jt(),a=null,l=Gc;l!==null;){var d=l.next,f=Jv(l,r);f===0?(l.next=null,a===null?Gc=d:a.next=d,d===null&&(Do=a)):(a=l,(t!==0||(f&3)!==0)&&(Kc=!0)),l=d}Bn!==0&&Bn!==5||Hl(t),Ls!==0&&(Ls=0)}function Jv(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,d=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var b=31-bt(f),A=1<<b,M=d[b];M===-1?((A&a)===0||(A&l)!==0)&&(d[b]=vt(A,r)):M<=r&&(t.expiredLanes|=A),f&=~A}if(r=on,a=Rt,a=Gn(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(Jt===2||Jt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Ze(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||qe(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Ze(l),tt(a)){case 2:case 8:a=Xe;break;case 32:a=At;break;case 268435456:a=xn;break;default:a=At}return l=Zv.bind(null,t),a=ke(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Ze(l),t.callbackPriority=2,t.callbackNode=null,2}function Zv(t,r){if(Bn!==0&&Bn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Hc()&&t.callbackNode!==a)return null;var l=Rt;return l=Gn(t,t===on?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Ov(t,l,r),Jv(t,jt()),t.callbackNode!=null&&t.callbackNode===a?Zv.bind(null,t):null)}function e0(t,r){if(Hc())return null;Ov(t,r,!0)}function _S(){kS(function(){(Kt&6)!==0?ke(Dt,vS):Wv()})}function Qf(){if(Ls===0){var t=yo;t===0&&(t=zn,zn<<=1,(zn&261888)===0&&(zn=256)),Ls=t}return Ls}function t0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:to(""+t)}function n0(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function bS(t,r,a,l,d){if(r==="submit"&&a&&a.stateNode===d){var f=t0((d[pt]||null).action),b=l.submitter;b&&(r=(r=b[pt]||null)?t0(r.formAction):b.getAttribute("formAction"),r!==null&&(f=r,b=null));var A=new vi("action","action",null,l,d);t.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ls!==0){var M=b?n0(d,b):new FormData(d);ff(a,{pending:!0,data:M,method:d.method,action:f},null,M)}}else typeof f=="function"&&(A.preventDefault(),M=b?n0(d,b):new FormData(d),ff(a,{pending:!0,data:M,method:d.method,action:f},f,M))},currentTarget:d}]})}}for(var Yf=0;Yf<xh.length;Yf++){var Xf=xh[Yf],ES=Xf.toLowerCase(),TS=Xf[0].toUpperCase()+Xf.slice(1);li(ES,"on"+TS)}li(Mg,"onAnimationEnd"),li(Og,"onAnimationIteration"),li(Vg,"onAnimationStart"),li("dblclick","onDoubleClick"),li("focusin","onFocus"),li("focusout","onBlur"),li(P1,"onTransitionRun"),li(U1,"onTransitionStart"),li(z1,"onTransitionCancel"),li(jg,"onTransitionEnd"),be("onMouseEnter",["mouseout","mouseover"]),be("onMouseLeave",["mouseout","mouseover"]),be("onPointerEnter",["pointerout","pointerover"]),be("onPointerLeave",["pointerout","pointerover"]),ue("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ue("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ue("onBeforeInput",["compositionend","keypress","textInput","paste"]),ue("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ue("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ue("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gl));function r0(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],d=l.event;l=l.listeners;e:{var f=void 0;if(r)for(var b=l.length-1;0<=b;b--){var A=l[b],M=A.instance,Q=A.currentTarget;if(A=A.listener,M!==f&&d.isPropagationStopped())break e;f=A,d.currentTarget=Q;try{f(d)}catch(J){oc(J)}d.currentTarget=null,f=M}else for(b=0;b<l.length;b++){if(A=l[b],M=A.instance,Q=A.currentTarget,A=A.listener,M!==f&&d.isPropagationStopped())break e;f=A,d.currentTarget=Q;try{f(d)}catch(J){oc(J)}d.currentTarget=null,f=M}}}}function St(t,r){var a=r[ni];a===void 0&&(a=r[ni]=new Set);var l=t+"__bubble";a.has(l)||(i0(r,t,2,!1),a.add(l))}function $f(t,r,a){var l=0;r&&(l|=4),i0(a,t,l,r)}var Qc="_reactListening"+Math.random().toString(36).slice(2);function Wf(t){if(!t[Qc]){t[Qc]=!0,fa.forEach(function(a){a!=="selectionchange"&&(SS.has(a)||$f(a,!1,t),$f(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Qc]||(r[Qc]=!0,$f("selectionchange",!1,r))}}function i0(t,r,a,l){switch(M0(r)){case 2:var d=WS;break;case 8:d=JS;break;default:d=hm}a=d.bind(null,r,a,t),d=void 0,!pa||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),l?d!==void 0?t.addEventListener(r,a,{capture:!0,passive:d}):t.addEventListener(r,a,!0):d!==void 0?t.addEventListener(r,a,{passive:d}):t.addEventListener(r,a,!1)}function Jf(t,r,a,l,d){var f=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var A=l.stateNode.containerInfo;if(A===d)break;if(b===4)for(b=l.return;b!==null;){var M=b.tag;if((M===3||M===4)&&b.stateNode.containerInfo===d)return;b=b.return}for(;A!==null;){if(b=Br(A),b===null)return;if(M=b.tag,M===5||M===6||M===26||M===27){l=f=b;continue e}A=A.parentNode}}l=l.return}vs(function(){var Q=f,J=Hr(a),se=[];e:{var X=Lg.get(t);if(X!==void 0){var W=vi,ze=t;switch(t){case"keypress":if(ya(a)===0)break e;case"keydown":case"keyup":W=ic;break;case"focusin":ze="focus",W=_a;break;case"focusout":ze="blur",W=_a;break;case"beforeblur":case"afterblur":W=_a;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=gl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Xu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=y;break;case Mg:case Og:case Vg:W=Wu;break;case jg:W=C;break;case"scroll":case"scrollend":W=pl;break;case"wheel":W=$;break;case"copy":case"cut":case"paste":W=Ju;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=Bi;break;case"toggle":case"beforetoggle":W=dt}var et=(r&4)!==0,rn=!et&&(t==="scroll"||t==="scrollend"),z=et?X!==null?X+"Capture":null:X;et=[];for(var L=Q,K;L!==null;){var re=L;if(K=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||K===null||z===null||(re=ii(L,z),re!=null&&et.push(Kl(L,re,K))),rn)break;L=L.return}0<et.length&&(X=new W(X,ze,null,a,J),se.push({event:X,listeners:et}))}}if((r&7)===0){e:{if(X=t==="mouseover"||t==="pointerover",W=t==="mouseout"||t==="pointerout",X&&a!==hl&&(ze=a.relatedTarget||a.fromElement)&&(Br(ze)||ze[kn]))break e;if((W||X)&&(X=J.window===J?J:(X=J.ownerDocument)?X.defaultView||X.parentWindow:window,W?(ze=a.relatedTarget||a.toElement,W=Q,ze=ze?Br(ze):null,ze!==null&&(rn=u(ze),et=ze.tag,ze!==rn||et!==5&&et!==27&&et!==6)&&(ze=null)):(W=null,ze=Q),W!==ze)){if(et=gl,re="onMouseLeave",z="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(et=Bi,re="onPointerLeave",z="onPointerEnter",L="pointer"),rn=W==null?X:dr(W),K=ze==null?X:dr(ze),X=new et(re,L+"leave",W,a,J),X.target=rn,X.relatedTarget=K,re=null,Br(J)===Q&&(et=new et(z,L+"enter",ze,a,J),et.target=K,et.relatedTarget=rn,re=et),rn=re,W&&ze)t:{for(et=wS,z=W,L=ze,K=0,re=z;re;re=et(re))K++;re=0;for(var $e=L;$e;$e=et($e))re++;for(;0<K-re;)z=et(z),K--;for(;0<re-K;)L=et(L),re--;for(;K--;){if(z===L||L!==null&&z===L.alternate){et=z;break t}z=et(z),L=et(L)}et=null}else et=null;W!==null&&s0(se,X,W,et,!1),ze!==null&&rn!==null&&s0(se,rn,ze,et,!0)}}e:{if(X=Q?dr(Q):window,W=X.nodeName&&X.nodeName.toLowerCase(),W==="select"||W==="input"&&X.type==="file")var Bt=Tg;else if(bg(X))if(Sg)Bt=V1;else{Bt=M1;var He=D1}else W=X.nodeName,!W||W.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Q&&eo(Q.elementType)&&(Bt=Tg):Bt=O1;if(Bt&&(Bt=Bt(t,Q))){Eg(se,Bt,a,J);break e}He&&He(t,X,Q),t==="focusout"&&Q&&X.type==="number"&&Q.memoizedProps.value!=null&&ul(X,"number",X.value)}switch(He=Q?dr(Q):window,t){case"focusin":(bg(He)||He.contentEditable==="true")&&(lo=He,Ch=Q,El=null);break;case"focusout":El=Ch=lo=null;break;case"mousedown":Rh=!0;break;case"contextmenu":case"mouseup":case"dragend":Rh=!1,kg(se,a,J);break;case"selectionchange":if(L1)break;case"keydown":case"keyup":kg(se,a,J)}var ft;if(Gt)e:{switch(t){case"compositionstart":var It="onCompositionStart";break e;case"compositionend":It="onCompositionEnd";break e;case"compositionupdate":It="onCompositionUpdate";break e}It=void 0}else oo?ba(t,a)&&(It="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(It="onCompositionStart");It&&(Ei&&a.locale!=="ko"&&(oo||It!=="onCompositionStart"?It==="onCompositionEnd"&&oo&&(ft=ml()):(yi=J,fl="value"in yi?yi.value:yi.textContent,oo=!0)),He=Yc(Q,It),0<He.length&&(It=new bi(It,t,null,a,J),se.push({event:It,listeners:He}),ft?It.data=ft:(ft=ao(a),ft!==null&&(It.data=ft)))),(ft=Kr?I1(t,a):x1(t,a))&&(It=Yc(Q,"onBeforeInput"),0<It.length&&(He=new bi("onBeforeInput","beforeinput",null,a,J),se.push({event:He,listeners:It}),He.data=ft)),bS(se,t,Q,a,J)}r0(se,r)})}function Kl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Yc(t,r){for(var a=r+"Capture",l=[];t!==null;){var d=t,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=ii(t,a),d!=null&&l.unshift(Kl(t,d,f)),d=ii(t,r),d!=null&&l.push(Kl(t,d,f))),t.tag===3)return l;t=t.return}return[]}function wS(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function s0(t,r,a,l,d){for(var f=r._reactName,b=[];a!==null&&a!==l;){var A=a,M=A.alternate,Q=A.stateNode;if(A=A.tag,M!==null&&M===l)break;A!==5&&A!==26&&A!==27||Q===null||(M=Q,d?(Q=ii(a,f),Q!=null&&b.unshift(Kl(a,Q,M))):d||(Q=ii(a,f),Q!=null&&b.push(Kl(a,Q,M)))),a=a.return}b.length!==0&&t.push({event:r,listeners:b})}var AS=/\r\n?/g,CS=/\u0000|\uFFFD/g;function a0(t){return(typeof t=="string"?t:""+t).replace(AS,`
`).replace(CS,"")}function o0(t,r){return r=a0(r),a0(t)===r}function nn(t,r,a,l,d,f){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||_r(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&_r(t,""+l);break;case"className":Ut(t,"class",l);break;case"tabIndex":Ut(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ut(t,a,l);break;case"style":dl(t,l,f);break;case"data":if(r!=="object"){Ut(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=to(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(r!=="input"&&nn(t,r,"name",d.name,d,null),nn(t,r,"formEncType",d.formEncType,d,null),nn(t,r,"formMethod",d.formMethod,d,null),nn(t,r,"formTarget",d.formTarget,d,null)):(nn(t,r,"encType",d.encType,d,null),nn(t,r,"method",d.method,d,null),nn(t,r,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=to(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=ri);break;case"onScroll":l!=null&&St("scroll",t);break;case"onScrollEnd":l!=null&&St("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=to(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":St("beforetoggle",t),St("toggle",t),Pt(t,"popover",l);break;case"xlinkActuate":Ft(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ft(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ft(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ft(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ft(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ft(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ft(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ft(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ft(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Pt(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Yu.get(a)||a,Pt(t,a,l))}}function Zf(t,r,a,l,d,f){switch(a){case"style":dl(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?_r(t,l):(typeof l=="number"||typeof l=="bigint")&&_r(t,""+l);break;case"onScroll":l!=null&&St("scroll",t);break;case"onScrollEnd":l!=null&&St("scrollend",t);break;case"onClick":l!=null&&(t.onclick=ri);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!D.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),r=a.slice(2,d?a.length-7:void 0),f=t[pt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(r,f,d),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,d);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Pt(t,a,l)}}}function Zn(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":St("error",t),St("load",t);var l=!1,d=!1,f;for(f in a)if(a.hasOwnProperty(f)){var b=a[f];if(b!=null)switch(f){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:nn(t,r,f,b,a,null)}}d&&nn(t,r,"srcSet",a.srcSet,a,null),l&&nn(t,r,"src",a.src,a,null);return;case"input":St("invalid",t);var A=f=b=d=null,M=null,Q=null;for(l in a)if(a.hasOwnProperty(l)){var J=a[l];if(J!=null)switch(l){case"name":d=J;break;case"type":b=J;break;case"checked":M=J;break;case"defaultChecked":Q=J;break;case"value":f=J;break;case"defaultValue":A=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,r));break;default:nn(t,r,l,J,a,null)}}Gu(t,f,A,M,Q,b,d,!1);return;case"select":St("invalid",t),l=b=f=null;for(d in a)if(a.hasOwnProperty(d)&&(A=a[d],A!=null))switch(d){case"value":f=A;break;case"defaultValue":b=A;break;case"multiple":l=A;default:nn(t,r,d,A,a,null)}r=f,a=b,t.multiple=!!l,r!=null?ms(t,!!l,r,!1):a!=null&&ms(t,!!l,a,!0);return;case"textarea":St("invalid",t),f=d=l=null;for(b in a)if(a.hasOwnProperty(b)&&(A=a[b],A!=null))switch(b){case"value":l=A;break;case"defaultValue":d=A;break;case"children":f=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(91));break;default:nn(t,r,b,A,a,null)}ps(t,l,d,f);return;case"option":for(M in a)if(a.hasOwnProperty(M)&&(l=a[M],l!=null))switch(M){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:nn(t,r,M,l,a,null)}return;case"dialog":St("beforetoggle",t),St("toggle",t),St("cancel",t),St("close",t);break;case"iframe":case"object":St("load",t);break;case"video":case"audio":for(l=0;l<Gl.length;l++)St(Gl[l],t);break;case"image":St("error",t),St("load",t);break;case"details":St("toggle",t);break;case"embed":case"source":case"link":St("error",t),St("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in a)if(a.hasOwnProperty(Q)&&(l=a[Q],l!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:nn(t,r,Q,l,a,null)}return;default:if(eo(r)){for(J in a)a.hasOwnProperty(J)&&(l=a[J],l!==void 0&&Zf(t,r,J,l,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(l=a[A],l!=null&&nn(t,r,A,l,a,null))}function RS(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,b=null,A=null,M=null,Q=null,J=null;for(W in a){var se=a[W];if(a.hasOwnProperty(W)&&se!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":M=se;default:l.hasOwnProperty(W)||nn(t,r,W,null,l,se)}}for(var X in l){var W=l[X];if(se=a[X],l.hasOwnProperty(X)&&(W!=null||se!=null))switch(X){case"type":f=W;break;case"name":d=W;break;case"checked":Q=W;break;case"defaultChecked":J=W;break;case"value":b=W;break;case"defaultValue":A=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,r));break;default:W!==se&&nn(t,r,X,W,l,se)}}Za(t,b,A,M,Q,J,f,d);return;case"select":W=b=A=X=null;for(f in a)if(M=a[f],a.hasOwnProperty(f)&&M!=null)switch(f){case"value":break;case"multiple":W=M;default:l.hasOwnProperty(f)||nn(t,r,f,null,l,M)}for(d in l)if(f=l[d],M=a[d],l.hasOwnProperty(d)&&(f!=null||M!=null))switch(d){case"value":X=f;break;case"defaultValue":A=f;break;case"multiple":b=f;default:f!==M&&nn(t,r,d,f,l,M)}r=A,a=b,l=W,X!=null?ms(t,!!a,X,!1):!!l!=!!a&&(r!=null?ms(t,!!a,r,!0):ms(t,!!a,a?[]:"",!1));return;case"textarea":W=X=null;for(A in a)if(d=a[A],a.hasOwnProperty(A)&&d!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:nn(t,r,A,null,l,d)}for(b in l)if(d=l[b],f=a[b],l.hasOwnProperty(b)&&(d!=null||f!=null))switch(b){case"value":X=d;break;case"defaultValue":W=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(s(91));break;default:d!==f&&nn(t,r,b,d,l,f)}Ku(t,X,W);return;case"option":for(var ze in a)if(X=a[ze],a.hasOwnProperty(ze)&&X!=null&&!l.hasOwnProperty(ze))switch(ze){case"selected":t.selected=!1;break;default:nn(t,r,ze,null,l,X)}for(M in l)if(X=l[M],W=a[M],l.hasOwnProperty(M)&&X!==W&&(X!=null||W!=null))switch(M){case"selected":t.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:nn(t,r,M,X,l,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var et in a)X=a[et],a.hasOwnProperty(et)&&X!=null&&!l.hasOwnProperty(et)&&nn(t,r,et,null,l,X);for(Q in l)if(X=l[Q],W=a[Q],l.hasOwnProperty(Q)&&X!==W&&(X!=null||W!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,r));break;default:nn(t,r,Q,X,l,W)}return;default:if(eo(r)){for(var rn in a)X=a[rn],a.hasOwnProperty(rn)&&X!==void 0&&!l.hasOwnProperty(rn)&&Zf(t,r,rn,void 0,l,X);for(J in l)X=l[J],W=a[J],!l.hasOwnProperty(J)||X===W||X===void 0&&W===void 0||Zf(t,r,J,X,l,W);return}}for(var z in a)X=a[z],a.hasOwnProperty(z)&&X!=null&&!l.hasOwnProperty(z)&&nn(t,r,z,null,l,X);for(se in l)X=l[se],W=a[se],!l.hasOwnProperty(se)||X===W||X==null&&W==null||nn(t,r,se,X,l,W)}function l0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function IS(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var d=a[l],f=d.transferSize,b=d.initiatorType,A=d.duration;if(f&&A&&l0(b)){for(b=0,A=d.responseEnd,l+=1;l<a.length;l++){var M=a[l],Q=M.startTime;if(Q>A)break;var J=M.transferSize,se=M.initiatorType;J&&l0(se)&&(M=M.responseEnd,b+=J*(M<A?1:(A-Q)/(M-Q)))}if(--l,r+=8*(f+b)/(d.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var em=null,tm=null;function Xc(t){return t.nodeType===9?t:t.ownerDocument}function u0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function c0(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function nm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var rm=null;function xS(){var t=window.event;return t&&t.type==="popstate"?t===rm?!1:(rm=t,!0):(rm=null,!1)}var d0=typeof setTimeout=="function"?setTimeout:void 0,NS=typeof clearTimeout=="function"?clearTimeout:void 0,h0=typeof Promise=="function"?Promise:void 0,kS=typeof queueMicrotask=="function"?queueMicrotask:typeof h0<"u"?function(t){return h0.resolve(null).then(t).catch(DS)}:d0;function DS(t){setTimeout(function(){throw t})}function Ps(t){return t==="head"}function f0(t,r){var a=r,l=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(d),jo(r);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Ql(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Ql(a);for(var f=a.firstChild;f;){var b=f.nextSibling,A=f.nodeName;f[zr]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=b}}else a==="body"&&Ql(t.ownerDocument.body);a=d}while(a);jo(r)}function m0(t,r){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function im(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":im(a),fs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function MS(t,r,a,l){for(;t.nodeType===1;){var d=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[zr])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Zr(t.nextSibling),t===null)break}return null}function OS(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Zr(t.nextSibling),t===null))return null;return t}function p0(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Zr(t.nextSibling),t===null))return null;return t}function sm(t){return t.data==="$?"||t.data==="$~"}function am(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function VS(t,r){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||a.readyState!=="loading")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Zr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var om=null;function g0(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(r===0)return Zr(t.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}t=t.nextSibling}return null}function y0(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return t;r--}else a!=="/$"&&a!=="/&"||r++}t=t.previousSibling}return null}function v0(t,r,a){switch(r=Xc(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Ql(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);fs(t)}var ei=new Map,_0=new Set;function $c(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ns=ce.d;ce.d={f:jS,r:LS,D:PS,C:US,L:zS,m:BS,X:FS,S:qS,M:HS};function jS(){var t=ns.f(),r=Bc();return t||r}function LS(t){var r=yr(t);r!==null&&r.tag===5&&r.type==="form"?jy(r):ns.r(t)}var Mo=typeof document>"u"?null:document;function b0(t,r,a){var l=Mo;if(l&&typeof r=="string"&&r){var d=vr(r);d='link[rel="'+t+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),_0.has(d)||(_0.add(d),t={rel:t,crossOrigin:a,href:r},l.querySelector(d)===null&&(r=l.createElement("link"),Zn(r,"link",t),_n(r),l.head.appendChild(r)))}}function PS(t){ns.D(t),b0("dns-prefetch",t,null)}function US(t,r){ns.C(t,r),b0("preconnect",t,r)}function zS(t,r,a){ns.L(t,r,a);var l=Mo;if(l&&t&&r){var d='link[rel="preload"][as="'+vr(r)+'"]';r==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+vr(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+vr(a.imageSizes)+'"]')):d+='[href="'+vr(t)+'"]';var f=d;switch(r){case"style":f=Oo(t);break;case"script":f=Vo(t)}ei.has(f)||(t=T({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),ei.set(f,t),l.querySelector(d)!==null||r==="style"&&l.querySelector(Yl(f))||r==="script"&&l.querySelector(Xl(f))||(r=l.createElement("link"),Zn(r,"link",t),_n(r),l.head.appendChild(r)))}}function BS(t,r){ns.m(t,r);var a=Mo;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",d='link[rel="modulepreload"][as="'+vr(l)+'"][href="'+vr(t)+'"]',f=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Vo(t)}if(!ei.has(f)&&(t=T({rel:"modulepreload",href:t},r),ei.set(f,t),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Xl(f)))return}l=a.createElement("link"),Zn(l,"link",t),_n(l),a.head.appendChild(l)}}}function qS(t,r,a){ns.S(t,r,a);var l=Mo;if(l&&t){var d=qr(l).hoistableStyles,f=Oo(t);r=r||"default";var b=d.get(f);if(!b){var A={loading:0,preload:null};if(b=l.querySelector(Yl(f)))A.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":r},a),(a=ei.get(f))&&lm(t,a);var M=b=l.createElement("link");_n(M),Zn(M,"link",t),M._p=new Promise(function(Q,J){M.onload=Q,M.onerror=J}),M.addEventListener("load",function(){A.loading|=1}),M.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Wc(b,r,l)}b={type:"stylesheet",instance:b,count:1,state:A},d.set(f,b)}}}function FS(t,r){ns.X(t,r);var a=Mo;if(a&&t){var l=qr(a).hoistableScripts,d=Vo(t),f=l.get(d);f||(f=a.querySelector(Xl(d)),f||(t=T({src:t,async:!0},r),(r=ei.get(d))&&um(t,r),f=a.createElement("script"),_n(f),Zn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function HS(t,r){ns.M(t,r);var a=Mo;if(a&&t){var l=qr(a).hoistableScripts,d=Vo(t),f=l.get(d);f||(f=a.querySelector(Xl(d)),f||(t=T({src:t,async:!0,type:"module"},r),(r=ei.get(d))&&um(t,r),f=a.createElement("script"),_n(f),Zn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function E0(t,r,a,l){var d=(d=Ee.current)?$c(d):null;if(!d)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Oo(a.href),a=qr(d).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Oo(a.href);var f=qr(d).hoistableStyles,b=f.get(t);if(b||(d=d.ownerDocument||d,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,b),(f=d.querySelector(Yl(t)))&&!f._p&&(b.instance=f,b.state.loading=5),ei.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ei.set(t,a),f||GS(d,t,a,b.state))),r&&l===null)throw Error(s(528,""));return b}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Vo(a),a=qr(d).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Oo(t){return'href="'+vr(t)+'"'}function Yl(t){return'link[rel="stylesheet"]['+t+"]"}function T0(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function GS(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Zn(r,"link",a),_n(r),t.head.appendChild(r))}function Vo(t){return'[src="'+vr(t)+'"]'}function Xl(t){return"script[async]"+t}function S0(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+vr(a.href)+'"]');if(l)return r.instance=l,_n(l),l;var d=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),_n(l),Zn(l,"style",d),Wc(l,a.precedence,t),r.instance=l;case"stylesheet":d=Oo(a.href);var f=t.querySelector(Yl(d));if(f)return r.state.loading|=4,r.instance=f,_n(f),f;l=T0(a),(d=ei.get(d))&&lm(l,d),f=(t.ownerDocument||t).createElement("link"),_n(f);var b=f;return b._p=new Promise(function(A,M){b.onload=A,b.onerror=M}),Zn(f,"link",l),r.state.loading|=4,Wc(f,a.precedence,t),r.instance=f;case"script":return f=Vo(a.src),(d=t.querySelector(Xl(f)))?(r.instance=d,_n(d),d):(l=a,(d=ei.get(f))&&(l=T({},a),um(l,d)),t=t.ownerDocument||t,d=t.createElement("script"),_n(d),Zn(d,"link",l),t.head.appendChild(d),r.instance=d);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Wc(l,a.precedence,t));return r.instance}function Wc(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,f=d,b=0;b<l.length;b++){var A=l[b];if(A.dataset.precedence===r)f=A;else if(f!==d)break}f?f.parentNode.insertBefore(t,f.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function lm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function um(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Jc=null;function w0(t,r,a){if(Jc===null){var l=new Map,d=Jc=new Map;d.set(a,l)}else d=Jc,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),d=0;d<a.length;d++){var f=a[d];if(!(f[zr]||f[Ue]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var b=f.getAttribute(r)||"";b=t+b;var A=l.get(b);A?A.push(f):l.set(b,[f])}}return l}function A0(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function KS(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function C0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function QS(t,r,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=Oo(l.href),f=r.querySelector(Yl(d));if(f){r=f._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Zc.bind(t),r.then(t,t)),a.state.loading|=4,a.instance=f,_n(f);return}f=r.ownerDocument||r,l=T0(l),(d=ei.get(d))&&lm(l,d),f=f.createElement("link"),_n(f);var b=f;b._p=new Promise(function(A,M){b.onload=A,b.onerror=M}),Zn(f,"link",l),a.instance=f}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Zc.bind(t),r.addEventListener("load",a),r.addEventListener("error",a))}}var cm=0;function YS(t,r){return t.stylesheets&&t.count===0&&td(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&td(t,t.stylesheets),t.unsuspend){var f=t.unsuspend;t.unsuspend=null,f()}},6e4+r);0<t.imgBytes&&cm===0&&(cm=62500*IS());var d=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&td(t,t.stylesheets),t.unsuspend)){var f=t.unsuspend;t.unsuspend=null,f()}},(t.imgBytes>cm?50:800)+r);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function Zc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)td(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ed=null;function td(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ed=new Map,r.forEach(XS,t),ed=null,Zc.call(t))}function XS(t,r){if(!(r.state.loading&4)){var a=ed.get(t);if(a)var l=a.get(null);else{a=new Map,ed.set(t,a);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var b=d[f];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),l=b)}l&&a.set(null,l)}d=r.instance,b=d.getAttribute("data-precedence"),f=a.get(b)||l,f===l&&a.set(null,d),a.set(b,d),this.count++,l=Zc.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),f?f.parentNode.insertBefore(d,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),r.state.loading|=4}}var $l={$$typeof:te,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function $S(t,r,a,l,d,f,b,A,M){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Z(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Z(0),this.hiddenUpdates=Z(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function R0(t,r,a,l,d,f,b,A,M,Q,J,se){return t=new $S(t,r,a,b,M,Q,J,se,A),r=1,f===!0&&(r|=24),f=kr(3,null,null,r),t.current=f,f.stateNode=t,r=qh(),r.refCount++,t.pooledCache=r,r.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:r},Kh(f),t}function I0(t){return t?(t=ho,t):ho}function x0(t,r,a,l,d,f){d=I0(d),l.context===null?l.context=d:l.pendingContext=d,l=Rs(r),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=Is(t,l,r),a!==null&&(wr(a,t,r),Il(a,t,r))}function N0(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function dm(t,r){N0(t,r),(t=t.alternate)&&N0(t,r)}function k0(t){if(t.tag===13||t.tag===31){var r=Sa(t,67108864);r!==null&&wr(r,t,67108864),dm(t,67108864)}}function D0(t){if(t.tag===13||t.tag===31){var r=jr();r=Mt(r);var a=Sa(t,r);a!==null&&wr(a,t,r),dm(t,r)}}var nd=!0;function WS(t,r,a,l){var d=Y.T;Y.T=null;var f=ce.p;try{ce.p=2,hm(t,r,a,l)}finally{ce.p=f,Y.T=d}}function JS(t,r,a,l){var d=Y.T;Y.T=null;var f=ce.p;try{ce.p=8,hm(t,r,a,l)}finally{ce.p=f,Y.T=d}}function hm(t,r,a,l){if(nd){var d=fm(l);if(d===null)Jf(t,r,l,rd,a),O0(t,l);else if(ew(d,t,r,a,l))l.stopPropagation();else if(O0(t,l),r&4&&-1<ZS.indexOf(t)){for(;d!==null;){var f=yr(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var b=an(f.pendingLanes);if(b!==0){var A=f;for(A.pendingLanes|=2,A.entangledLanes|=2;b;){var M=1<<31-bt(b);A.entanglements[1]|=M,b&=~M}Ai(f),(Kt&6)===0&&(Uc=jt()+500,Hl(0))}}break;case 31:case 13:A=Sa(f,2),A!==null&&wr(A,f,2),Bc(),dm(f,2)}if(f=fm(l),f===null&&Jf(t,r,l,rd,a),f===d)break;d=f}d!==null&&l.stopPropagation()}else Jf(t,r,l,null,a)}}function fm(t){return t=Hr(t),mm(t)}var rd=null;function mm(t){if(rd=null,t=Br(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=h(r),t!==null)return t;t=null}else if(a===31){if(t=g(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return rd=t,null}function M0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wn()){case Dt:return 2;case Xe:return 8;case At:case Ur:return 32;case xn:return 268435456;default:return 32}default:return 32}}var pm=!1,Us=null,zs=null,Bs=null,Wl=new Map,Jl=new Map,qs=[],ZS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function O0(t,r){switch(t){case"focusin":case"focusout":Us=null;break;case"dragenter":case"dragleave":zs=null;break;case"mouseover":case"mouseout":Bs=null;break;case"pointerover":case"pointerout":Wl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jl.delete(r.pointerId)}}function Zl(t,r,a,l,d,f){return t===null||t.nativeEvent!==f?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[d]},r!==null&&(r=yr(r),r!==null&&k0(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),t)}function ew(t,r,a,l,d){switch(r){case"focusin":return Us=Zl(Us,t,r,a,l,d),!0;case"dragenter":return zs=Zl(zs,t,r,a,l,d),!0;case"mouseover":return Bs=Zl(Bs,t,r,a,l,d),!0;case"pointerover":var f=d.pointerId;return Wl.set(f,Zl(Wl.get(f)||null,t,r,a,l,d)),!0;case"gotpointercapture":return f=d.pointerId,Jl.set(f,Zl(Jl.get(f)||null,t,r,a,l,d)),!0}return!1}function V0(t){var r=Br(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=h(a),r!==null){t.blockedOn=r,Je(t.priority,function(){D0(a)});return}}else if(r===31){if(r=g(a),r!==null){t.blockedOn=r,Je(t.priority,function(){D0(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function id(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=fm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);hl=l,a.target.dispatchEvent(l),hl=null}else return r=yr(a),r!==null&&k0(r),t.blockedOn=a,!1;r.shift()}return!0}function j0(t,r,a){id(t)&&a.delete(r)}function tw(){pm=!1,Us!==null&&id(Us)&&(Us=null),zs!==null&&id(zs)&&(zs=null),Bs!==null&&id(Bs)&&(Bs=null),Wl.forEach(j0),Jl.forEach(j0)}function sd(t,r){t.blockedOn===r&&(t.blockedOn=null,pm||(pm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,tw)))}var ad=null;function L0(t){ad!==t&&(ad=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ad===t&&(ad=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],d=t[r+2];if(typeof l!="function"){if(mm(l||a)===null)continue;break}var f=yr(a);f!==null&&(t.splice(r,3),r-=3,ff(f,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function jo(t){function r(M){return sd(M,t)}Us!==null&&sd(Us,t),zs!==null&&sd(zs,t),Bs!==null&&sd(Bs,t),Wl.forEach(r),Jl.forEach(r);for(var a=0;a<qs.length;a++){var l=qs[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<qs.length&&(a=qs[0],a.blockedOn===null);)V0(a),a.blockedOn===null&&qs.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],f=a[l+1],b=d[pt]||null;if(typeof f=="function")b||L0(a);else if(b){var A=null;if(f&&f.hasAttribute("formAction")){if(d=f,b=f[pt]||null)A=b.formAction;else if(mm(d)!==null)continue}else A=b.action;typeof A=="function"?a[l+1]=A:(a.splice(l,3),l-=3),L0(a)}}}function P0(){function t(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(b){return d=b})},focusReset:"manual",scroll:"manual"})}function r(){d!==null&&(d(),d=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),d!==null&&(d(),d=null)}}}function gm(t){this._internalRoot=t}od.prototype.render=gm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=jr();x0(a,l,t,r,null,null)},od.prototype.unmount=gm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;x0(t.current,2,null,t,null,null),Bc(),r[kn]=null}};function od(t){this._internalRoot=t}od.prototype.unstable_scheduleHydration=function(t){if(t){var r=yt();t={blockedOn:null,target:t,priority:r};for(var a=0;a<qs.length&&r!==0&&r<qs[a].priority;a++);qs.splice(a,0,t),a===0&&V0(t)}};var U0=e.version;if(U0!=="19.2.0")throw Error(s(527,U0,"19.2.0"));ce.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=m(r),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var nw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ld.isDisabled&&ld.supportsFiber)try{vn=ld.inject(nw),Wt=ld}catch{}}return tu.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",d=Ky,f=Qy,b=Yy;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(f=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError)),r=R0(t,1,!1,null,null,a,l,null,d,f,b,P0),t[kn]=r.current,Wf(t),new gm(r)},tu.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,d="",f=Ky,b=Qy,A=Yy,M=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.formState!==void 0&&(M=a.formState)),r=R0(t,1,!0,r,a??null,l,d,M,f,b,A,P0),r.context=I0(null),a=r.current,l=jr(),l=Mt(l),d=Rs(l),d.callback=null,Is(a,d,l),a=l,r.current.lanes=a,de(r,a),Ai(r),t[kn]=r.current,Wf(t),new od(r)},tu.version="19.2.0",tu}var X0;function dw(){if(X0)return _m.exports;X0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),_m.exports=cw(),_m.exports}var hw=dw();const fw=gp(hw),Wd=()=>_.jsxs("div",{style:{padding:"1.5rem 0",display:"flex",justifyContent:"center",alignItems:"center"},children:[_.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",border:"3px solid #e5e7eb",borderTopColor:"#2EC483",animation:"spin 1s linear infinite"}}),_.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `})]}),mw=()=>{};var $0={};const zb=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},pw=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],h=i[n++],g=i[n++],p=((o&7)<<18|(u&63)<<12|(h&63)<<6|g&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=i[n++],h=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},Bb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],h=o+1<i.length,g=h?i[o+1]:0,p=o+2<i.length,m=p?i[o+2]:0,v=u>>2,T=(u&3)<<4|g>>4;let S=(g&15)<<2|m>>6,w=m&63;p||(w=64,h||(S=64)),s.push(n[v],n[T],n[S],n[w])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(zb(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):pw(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],g=o<i.length?n[i.charAt(o)]:0;++o;const m=o<i.length?n[i.charAt(o)]:64;++o;const T=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||g==null||m==null||T==null)throw new gw;const S=u<<2|g>>4;if(s.push(S),m!==64){const w=g<<4&240|m>>2;if(s.push(w),T!==64){const j=m<<6&192|T;s.push(j)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class gw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yw=function(i){const e=zb(i);return Bb.encodeByteArray(e,!0)},Id=function(i){return yw(i).replace(/\./g,"")},qb=function(i){try{return Bb.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function vw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const _w=()=>vw().__FIREBASE_DEFAULTS__,bw=()=>{if(typeof process>"u"||typeof $0>"u")return;const i=$0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Ew=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&qb(i[1]);return e&&JSON.parse(e)},Jd=()=>{try{return mw()||_w()||bw()||Ew()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Fb=i=>Jd()?.emulatorHosts?.[i],Hb=i=>{const e=Fb(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Gb=()=>Jd()?.config,Kb=i=>Jd()?.[`_${i}`];class Tw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function ua(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function vp(i){return(await fetch(i,{credentials:"include"})).ok}function Sw(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Id(JSON.stringify(n)),Id(JSON.stringify(h)),""].join(".")}const du={};function ww(){const i={prod:[],emulator:[]};for(const e of Object.keys(du))du[e]?i.emulator.push(e):i.prod.push(e);return i}function Aw(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let W0=!1;function _p(i,e){if(typeof window>"u"||typeof document>"u"||!ua(window.location.host)||du[i]===e||du[i]||W0)return;du[i]=e;function n(S){return`__firebase__banner__${S}`}const s="__firebase__banner",u=ww().prod.length>0;function h(){const S=document.getElementById(s);S&&S.remove()}function g(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,w){S.setAttribute("width","24"),S.setAttribute("id",w),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function m(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{W0=!0,h()},S}function v(S,w){S.setAttribute("id",w),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=Aw(s),w=n("text"),j=document.getElementById(w)||document.createElement("span"),q=n("learnmore"),B=document.getElementById(q)||document.createElement("a"),_e=n("preprendIcon"),fe=document.getElementById(_e)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const te=S.element;g(te),v(B,q);const Se=m();p(fe,_e),te.append(fe,j,B,Se),document.body.appendChild(te)}u?(j.innerText="Preview backend disconnected.",fe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(fe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function lr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Cw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lr())}function Rw(){const i=Jd()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Iw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xw(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function Nw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kw(){const i=lr();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function Dw(){return!Rw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Mw(){try{return typeof indexedDB=="object"}catch{return!1}}function Ow(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const Vw="FirebaseError";class ji extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Vw,Object.setPrototypeOf(this,ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xu.prototype.create)}}class xu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?jw(u,s):"Error",g=`${this.serviceName}: ${h} (${o}).`;return new ji(o,g,s)}}function jw(i,e){return i.replace(Lw,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const Lw=/\{\$([^}]+)}/g;function Pw(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Ba(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],h=e[o];if(J0(u)&&J0(h)){if(!Ba(u,h))return!1}else if(u!==h)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function J0(i){return i!==null&&typeof i=="object"}function Nu(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function su(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function au(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function Uw(i,e){const n=new zw(i,e);return n.subscribe.bind(n)}class zw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Bw(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Sm),o.error===void 0&&(o.error=Sm),o.complete===void 0&&(o.complete=Sm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Bw(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Sm(){}function un(i){return i&&i._delegate?i._delegate:i}class na{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ja="[DEFAULT]";class qw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Tw;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Hw(e))try{this.getOrInitializeService({instanceIdentifier:ja})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=ja){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ja){return this.instances.has(e)}getOptions(e=ja){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,h]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);s===g&&h.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Fw(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ja){return this.component?this.component.multipleInstances?e:ja:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Fw(i){return i===ja?void 0:i}function Hw(i){return i.instantiationMode==="EAGER"}class Gw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new qw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var xt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(xt||(xt={}));const Kw={debug:xt.DEBUG,verbose:xt.VERBOSE,info:xt.INFO,warn:xt.WARN,error:xt.ERROR,silent:xt.SILENT},Qw=xt.INFO,Yw={[xt.DEBUG]:"log",[xt.VERBOSE]:"log",[xt.INFO]:"info",[xt.WARN]:"warn",[xt.ERROR]:"error"},Xw=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=Yw[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bp{constructor(e){this.name=e,this._logLevel=Qw,this._logHandler=Xw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Kw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xt.DEBUG,...e),this._logHandler(this,xt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xt.VERBOSE,...e),this._logHandler(this,xt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xt.INFO,...e),this._logHandler(this,xt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xt.WARN,...e),this._logHandler(this,xt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xt.ERROR,...e),this._logHandler(this,xt.ERROR,...e)}}const $w=(i,e)=>e.some(n=>i instanceof n);let Z0,e_;function Ww(){return Z0||(Z0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Jw(){return e_||(e_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Qb=new WeakMap,zm=new WeakMap,Yb=new WeakMap,wm=new WeakMap,Ep=new WeakMap;function Zw(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",h)},u=()=>{n(Ws(i.result)),o()},h=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&Qb.set(n,i)}).catch(()=>{}),Ep.set(e,i),e}function eA(i){if(zm.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",h),i.removeEventListener("abort",h)},u=()=>{n(),o()},h=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",h),i.addEventListener("abort",h)});zm.set(i,e)}let Bm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return zm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Yb.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ws(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function tA(i){Bm=i(Bm)}function nA(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Am(this),e,...n);return Yb.set(s,e.sort?e.sort():[e]),Ws(s)}:Jw().includes(i)?function(...e){return i.apply(Am(this),e),Ws(Qb.get(this))}:function(...e){return Ws(i.apply(Am(this),e))}}function rA(i){return typeof i=="function"?nA(i):(i instanceof IDBTransaction&&eA(i),$w(i,Ww())?new Proxy(i,Bm):i)}function Ws(i){if(i instanceof IDBRequest)return Zw(i);if(wm.has(i))return wm.get(i);const e=rA(i);return e!==i&&(wm.set(i,e),Ep.set(e,i)),e}const Am=i=>Ep.get(i);function iA(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const h=indexedDB.open(i,e),g=Ws(h);return s&&h.addEventListener("upgradeneeded",p=>{s(Ws(h.result),p.oldVersion,p.newVersion,Ws(h.transaction),p)}),n&&h.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),g}const sA=["get","getKey","getAll","getAllKeys","count"],aA=["put","add","delete","clear"],Cm=new Map;function t_(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Cm.get(e))return Cm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=aA.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||sA.includes(n)))return;const u=async function(h,...g){const p=this.transaction(h,o?"readwrite":"readonly");let m=p.store;return s&&(m=m.index(g.shift())),(await Promise.all([m[n](...g),o&&p.done]))[0]};return Cm.set(e,u),u}tA(i=>({...i,get:(e,n,s)=>t_(e,n)||i.get(e,n,s),has:(e,n)=>!!t_(e,n)||i.has(e,n)}));class oA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lA(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function lA(i){return i.getComponent()?.type==="VERSION"}const qm="@firebase/app",n_="0.14.6";const os=new bp("@firebase/app"),uA="@firebase/app-compat",cA="@firebase/analytics-compat",dA="@firebase/analytics",hA="@firebase/app-check-compat",fA="@firebase/app-check",mA="@firebase/auth",pA="@firebase/auth-compat",gA="@firebase/database",yA="@firebase/data-connect",vA="@firebase/database-compat",_A="@firebase/functions",bA="@firebase/functions-compat",EA="@firebase/installations",TA="@firebase/installations-compat",SA="@firebase/messaging",wA="@firebase/messaging-compat",AA="@firebase/performance",CA="@firebase/performance-compat",RA="@firebase/remote-config",IA="@firebase/remote-config-compat",xA="@firebase/storage",NA="@firebase/storage-compat",kA="@firebase/firestore",DA="@firebase/ai",MA="@firebase/firestore-compat",OA="firebase",VA="12.6.0";const Fm="[DEFAULT]",jA={[qm]:"fire-core",[uA]:"fire-core-compat",[dA]:"fire-analytics",[cA]:"fire-analytics-compat",[fA]:"fire-app-check",[hA]:"fire-app-check-compat",[mA]:"fire-auth",[pA]:"fire-auth-compat",[gA]:"fire-rtdb",[yA]:"fire-data-connect",[vA]:"fire-rtdb-compat",[_A]:"fire-fn",[bA]:"fire-fn-compat",[EA]:"fire-iid",[TA]:"fire-iid-compat",[SA]:"fire-fcm",[wA]:"fire-fcm-compat",[AA]:"fire-perf",[CA]:"fire-perf-compat",[RA]:"fire-rc",[IA]:"fire-rc-compat",[xA]:"fire-gcs",[NA]:"fire-gcs-compat",[kA]:"fire-fst",[MA]:"fire-fst-compat",[DA]:"fire-vertex","fire-js":"fire-js",[OA]:"fire-js-all"};const vu=new Map,LA=new Map,Hm=new Map;function r_(i,e){try{i.container.addComponent(e)}catch(n){os.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function qa(i){const e=i.name;if(Hm.has(e))return os.debug(`There were multiple attempts to register component ${e}.`),!1;Hm.set(e,i);for(const n of vu.values())r_(n,i);for(const n of LA.values())r_(n,i);return!0}function Zd(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Lr(i){return i==null?!1:i.settings!==void 0}const PA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Js=new xu("app","Firebase",PA);class UA{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new na("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Js.create("app-deleted",{appName:this._name})}}const tl=VA;function Tp(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:Fm,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Js.create("bad-app-name",{appName:String(o)});if(n||(n=Gb()),!n)throw Js.create("no-options");const u=vu.get(o);if(u){if(Ba(n,u.options)&&Ba(s,u.config))return u;throw Js.create("duplicate-app",{appName:o})}const h=new Gw(o);for(const p of Hm.values())h.addComponent(p);const g=new UA(n,s,h);return vu.set(o,g),g}function eh(i=Fm){const e=vu.get(i);if(!e&&i===Fm&&Gb())return Tp();if(!e)throw Js.create("no-app",{appName:i});return e}function Xb(){return Array.from(vu.values())}function Ri(i,e,n){let s=jA[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),os.warn(h.join(" "));return}qa(new na(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const zA="firebase-heartbeat-database",BA=1,_u="firebase-heartbeat-store";let Rm=null;function $b(){return Rm||(Rm=iA(zA,BA,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(_u)}catch(n){console.warn(n)}}}}).catch(i=>{throw Js.create("idb-open",{originalErrorMessage:i.message})})),Rm}async function qA(i){try{const n=(await $b()).transaction(_u),s=await n.objectStore(_u).get(Wb(i));return await n.done,s}catch(e){if(e instanceof ji)os.warn(e.message);else{const n=Js.create("idb-get",{originalErrorMessage:e?.message});os.warn(n.message)}}}async function i_(i,e){try{const s=(await $b()).transaction(_u,"readwrite");await s.objectStore(_u).put(e,Wb(i)),await s.done}catch(n){if(n instanceof ji)os.warn(n.message);else{const s=Js.create("idb-set",{originalErrorMessage:n?.message});os.warn(s.message)}}}function Wb(i){return`${i.name}!${i.options.appId}`}const FA=1024,HA=30;class GA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new QA(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=s_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>HA){const o=YA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){os.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=s_(),{heartbeatsToSend:n,unsentEntries:s}=KA(this._heartbeatsCache.heartbeats),o=Id(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return os.warn(e),""}}}function s_(){return new Date().toISOString().substring(0,10)}function KA(i,e=FA){const n=[];let s=i.slice();for(const o of i){const u=n.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),a_(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),a_(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class QA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Mw()?Ow().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await qA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return i_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return i_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function a_(i){return Id(JSON.stringify({version:2,heartbeats:i})).length}function YA(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}function XA(i){qa(new na("platform-logger",e=>new oA(e),"PRIVATE")),qa(new na("heartbeat",e=>new GA(e),"PRIVATE")),Ri(qm,n_,i),Ri(qm,n_,"esm2020"),Ri("fire-js","")}XA("");var $A="firebase",WA="12.6.0";Ri($A,WA,"app");function Jb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const JA=Jb,Zb=new xu("auth","Firebase",Jb());const xd=new bp("@firebase/auth");function ZA(i,...e){xd.logLevel<=xt.WARN&&xd.warn(`Auth (${tl}): ${i}`,...e)}function gd(i,...e){xd.logLevel<=xt.ERROR&&xd.error(`Auth (${tl}): ${i}`,...e)}function mi(i,...e){throw Sp(i,...e)}function Ii(i,...e){return Sp(i,...e)}function eE(i,e,n){const s={...JA(),[e]:n};return new xu("auth","Firebase",s).create(e,{appName:i.name})}function ss(i){return eE(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sp(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return Zb.create(i,...e)}function nt(i,e,...n){if(!i)throw Sp(e,...n)}function rs(i){const e="INTERNAL ASSERTION FAILED: "+i;throw gd(e),new Error(e)}function ls(i,e){i||rs(e)}function Gm(){return typeof self<"u"&&self.location?.href||""}function eC(){return o_()==="http:"||o_()==="https:"}function o_(){return typeof self<"u"&&self.location?.protocol||null}function tC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eC()||xw()||"connection"in navigator)?navigator.onLine:!0}function nC(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class ku{constructor(e,n){this.shortDelay=e,this.longDelay=n,ls(n>e,"Short delay should be less than long delay!"),this.isMobile=Cw()||Nw()}get(){return tC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function wp(i,e){ls(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class tE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const iC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],sC=new ku(3e4,6e4);function ds(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Li(i,e,n,s,o={}){return nE(i,o,async()=>{let u={},h={};s&&(e==="GET"?h=s:u={body:JSON.stringify(s)});const g=Nu({key:i.config.apiKey,...h}).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const m={method:e,headers:p,...u};return Iw()||(m.referrerPolicy="no-referrer"),i.emulatorConfig&&ua(i.emulatorConfig.host)&&(m.credentials="include"),tE.fetch()(await rE(i,i.config.apiHost,n,g),m)})}async function nE(i,e,n){i._canInitEmulator=!1;const s={...rC,...e};try{const o=new oC(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw ud(i,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const g=u.ok?h.errorMessage:h.error.message,[p,m]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw ud(i,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw ud(i,"email-already-in-use",h);if(p==="USER_DISABLED")throw ud(i,"user-disabled",h);const v=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw eE(i,v,m);mi(i,v)}}catch(o){if(o instanceof ji)throw o;mi(i,"network-request-failed",{message:String(o)})}}async function Du(i,e,n,s,o={}){const u=await Li(i,e,n,s,o);return"mfaPendingCredential"in u&&mi(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function rE(i,e,n,s){const o=`${e}${n}?${s}`,u=i,h=u.config.emulator?wp(i.config,o):`${i.config.apiScheme}://${o}`;return iC.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function aC(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Ii(this.auth,"network-request-failed")),sC.get())})}}function ud(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Ii(i,e,s);return o.customData._tokenResponse=n,o}function l_(i){return i!==void 0&&i.enterprise!==void 0}class lC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return aC(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function uC(i,e){return Li(i,"GET","/v2/recaptchaConfig",ds(i,e))}async function cC(i,e){return Li(i,"POST","/v1/accounts:delete",e)}async function Nd(i,e){return Li(i,"POST","/v1/accounts:lookup",e)}function hu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dC(i,e=!1){const n=un(i),s=await n.getIdToken(e),o=Ap(s);nt(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u?.sign_in_provider;return{claims:o,token:s,authTime:hu(Im(o.auth_time)),issuedAtTime:hu(Im(o.iat)),expirationTime:hu(Im(o.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Im(i){return Number(i)*1e3}function Ap(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return gd("JWT malformed, contained fewer than 3 sections"),null;try{const o=qb(n);return o?JSON.parse(o):(gd("Failed to decode base64 JWT payload"),null)}catch(o){return gd("Caught error parsing JWT payload as JSON",o?.toString()),null}}function u_(i){const e=Ap(i);return nt(e,"internal-error"),nt(typeof e.exp<"u","internal-error"),nt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Qo(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ji&&hC(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function hC({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class fC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Km{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hu(this.lastLoginAt),this.creationTime=hu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function kd(i){const e=i.auth,n=await i.getIdToken(),s=await Qo(i,Nd(e,{idToken:n}));nt(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?iE(o.providerUserInfo):[],h=pC(i.providerData,u),g=i.isAnonymous,p=!(i.email&&o.passwordHash)&&!h?.length,m=g?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Km(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(i,v)}async function mC(i){const e=un(i);await kd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pC(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function iE(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function gC(i,e){const n=await nE(i,{},async()=>{const s=Nu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,h=await rE(i,o,"/v1/token",`key=${u}`),g=await i._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:s};return i.emulatorConfig&&ua(i.emulatorConfig.host)&&(p.credentials="include"),tE.fetch()(h,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yC(i,e){return Li(i,"POST","/v2/accounts:revokeToken",ds(i,e))}class Fo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){nt(e.idToken,"internal-error"),nt(typeof e.idToken<"u","internal-error"),nt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):u_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){nt(e.length!==0,"internal-error");const n=u_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(nt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await gC(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,h=new Fo;return s&&(nt(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(nt(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(nt(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fo,this.toJSON())}_performRefresh(){return rs("not implemented")}}function Hs(i,e){nt(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class fi{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new fC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Km(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Qo(this,this.stsTokenManager.getToken(this.auth,e));return nt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return dC(this,e)}reload(){return mC(this)}_assign(e){this!==e&&(nt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await kd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Lr(this.auth.app))return Promise.reject(ss(this.auth));const e=await this.getIdToken();return await Qo(this,cC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,h=n.photoURL??void 0,g=n.tenantId??void 0,p=n._redirectEventId??void 0,m=n.createdAt??void 0,v=n.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:w,providerData:j,stsTokenManager:q}=n;nt(T&&q,e,"internal-error");const B=Fo.fromJSON(this.name,q);nt(typeof T=="string",e,"internal-error"),Hs(s,e.name),Hs(o,e.name),nt(typeof S=="boolean",e,"internal-error"),nt(typeof w=="boolean",e,"internal-error"),Hs(u,e.name),Hs(h,e.name),Hs(g,e.name),Hs(p,e.name),Hs(m,e.name),Hs(v,e.name);const _e=new fi({uid:T,auth:e,email:o,emailVerified:S,displayName:s,isAnonymous:w,photoURL:h,phoneNumber:u,tenantId:g,stsTokenManager:B,createdAt:m,lastLoginAt:v});return j&&Array.isArray(j)&&(_e.providerData=j.map(fe=>({...fe}))),p&&(_e._redirectEventId=p),_e}static async _fromIdTokenResponse(e,n,s=!1){const o=new Fo;o.updateFromServerResponse(n);const u=new fi({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await kd(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];nt(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?iE(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!u?.length,g=new Fo;g.updateFromIdToken(s);const p=new fi({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:h}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Km(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(p,m),p}}const c_=new Map;function is(i){ls(i instanceof Function,"Expected a class definition");let e=c_.get(i);return e?(ls(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,c_.set(i,e),e)}class sE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}sE.type="NONE";const d_=sE;function yd(i,e,n){return`firebase:${i}:${e}:${n}`}class Ho{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=yd(this.userKey,o.apiKey,u),this.fullPersistenceKey=yd("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Nd(this.auth,{idToken:e}).catch(()=>{});return n?fi._fromGetAccountInfoResponse(this.auth,n,e):null}return fi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Ho(is(d_),e,s);const o=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let u=o[0]||is(d_);const h=yd(s,e.config.apiKey,e.name);let g=null;for(const m of n)try{const v=await m._get(h);if(v){let T;if(typeof v=="string"){const S=await Nd(e,{idToken:v}).catch(()=>{});if(!S)break;T=await fi._fromGetAccountInfoResponse(e,S,v)}else T=fi._fromJSON(e,v);m!==u&&(g=T),u=m;break}}catch{}const p=o.filter(m=>m._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new Ho(u,e,s):(u=p[0],g&&await u._set(h,g.toJSON()),await Promise.all(n.map(async m=>{if(m!==u)try{await m._remove(h)}catch{}})),new Ho(u,e,s))}}function h_(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dE(e))return"Blackberry";if(hE(e))return"Webos";if(oE(e))return"Safari";if((e.includes("chrome/")||lE(e))&&!e.includes("edge/"))return"Chrome";if(cE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if(s?.length===2)return s[1]}return"Other"}function aE(i=lr()){return/firefox\//i.test(i)}function oE(i=lr()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lE(i=lr()){return/crios\//i.test(i)}function uE(i=lr()){return/iemobile/i.test(i)}function cE(i=lr()){return/android/i.test(i)}function dE(i=lr()){return/blackberry/i.test(i)}function hE(i=lr()){return/webos/i.test(i)}function Cp(i=lr()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function vC(i=lr()){return Cp(i)&&!!window.navigator?.standalone}function _C(){return kw()&&document.documentMode===10}function fE(i=lr()){return Cp(i)||cE(i)||hE(i)||dE(i)||/windows phone/i.test(i)||uE(i)}function mE(i,e=[]){let n;switch(i){case"Browser":n=h_(lr());break;case"Worker":n=`${h_(lr())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${tl}/${s}`}class bC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((h,g)=>{try{const p=e(u);h(p)}catch(p){g(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function EC(i,e={}){return Li(i,"GET","/v2/passwordPolicy",ds(i,e))}const TC=6;class SC{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??TC,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class wC{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new f_(this),this.idTokenSubscription=new f_(this),this.beforeStateQueue=new bC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=is(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ho.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Nd(this,{idToken:e}),s=await fi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Lr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,h=s?._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===h)&&g?.user&&(s=g.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await kd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Lr(this.app))return Promise.reject(ss(this));const n=e?un(e):null;return n&&nt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&nt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Lr(this.app)?Promise.reject(ss(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Lr(this.app)?Promise.reject(ss(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(is(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await EC(this),n=new SC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xu("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await yC(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&is(e)||this._popupRedirectResolver;nt(n,this,"argument-error"),this.redirectPersistenceManager=await Ho.create(this,[is(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let h=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(nt(g,this,"internal-error"),g.then(()=>{h||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{h=!0,p()}}else{const p=e.addObserver(n);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Lr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&ZA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ca(i){return un(i)}class f_{constructor(e){this.auth=e,this.observer=null,this.addObserver=Uw(n=>this.observer=n)}get next(){return nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let th={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AC(i){th=i}function pE(i){return th.loadJS(i)}function CC(){return th.recaptchaEnterpriseScript}function RC(){return th.gapiScript}function IC(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class xC{constructor(){this.enterprise=new NC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class NC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const kC="recaptcha-enterprise",gE="NO_RECAPTCHA";class DC{constructor(e){this.type=kC,this.auth=ca(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,g)=>{uC(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const m=new lC(p);return u.tenantId==null?u._agentRecaptchaConfig=m:u._tenantRecaptchaConfigs[u.tenantId]=m,h(m.siteKey)}}).catch(p=>{g(p)})})}function o(u,h,g){const p=window.grecaptcha;l_(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(m=>{h(m)}).catch(()=>{h(gE)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new xC().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{s(this.auth).then(g=>{if(!n&&l_(window.grecaptcha))o(g,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=CC();p.length!==0&&(p+=g),pE(p).then(()=>{o(g,u,h)}).catch(m=>{h(m)})}}).catch(g=>{h(g)})})}}async function m_(i,e,n,s=!1,o=!1){const u=new DC(i);let h;if(o)h=gE;else try{h=await u.verify(n)}catch{h=await u.verify(n,!0)}const g={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const p=g.phoneEnrollmentInfo.phoneNumber,m=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:m,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const p=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return s?Object.assign(g,{captchaResp:h}):Object.assign(g,{captchaResponse:h}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function Dd(i,e,n,s,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await m_(i,e,n,n==="getOobCode");return s(i,u)}else return s(i,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await m_(i,e,n,n==="getOobCode");return s(i,h)}else return Promise.reject(u)})}function MC(i,e){const n=Zd(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Ba(u,e??{}))return o;mi(o,"already-initialized")}return n.initialize({options:e})}function OC(i,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(is);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function VC(i,e,n){const s=ca(i);nt(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=yE(e),{host:h,port:g}=jC(e),p=g===null?"":`:${g}`,m={url:`${u}//${h}${p}/`},v=Object.freeze({host:h,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){nt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),nt(Ba(m,s.config.emulator)&&Ba(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,ua(h)?(vp(`${u}//${h}${p}`),_p("Auth",!0)):LC()}function yE(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function jC(i){const e=yE(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:p_(s.substr(u.length+1))}}else{const[u,h]=s.split(":");return{host:u,port:p_(h)}}}function p_(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function LC(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class Rp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return rs("not implemented")}_getIdTokenResponse(e){return rs("not implemented")}_linkToIdToken(e,n){return rs("not implemented")}_getReauthenticationResolver(e){return rs("not implemented")}}async function PC(i,e){return Li(i,"POST","/v1/accounts:update",e)}async function UC(i,e){return Li(i,"POST","/v1/accounts:signUp",e)}async function zC(i,e){return Du(i,"POST","/v1/accounts:signInWithPassword",ds(i,e))}async function vE(i,e){return Li(i,"POST","/v1/accounts:sendOobCode",ds(i,e))}async function BC(i,e){return vE(i,e)}async function qC(i,e){return vE(i,e)}async function FC(i,e){return Du(i,"POST","/v1/accounts:signInWithEmailLink",ds(i,e))}async function HC(i,e){return Du(i,"POST","/v1/accounts:signInWithEmailLink",ds(i,e))}class bu extends Rp{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new bu(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new bu(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Dd(e,n,"signInWithPassword",zC);case"emailLink":return FC(e,{email:this._email,oobCode:this._password});default:mi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Dd(e,s,"signUpPassword",UC);case"emailLink":return HC(e,{idToken:n,email:this._email,oobCode:this._password});default:mi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Go(i,e){return Du(i,"POST","/v1/accounts:signInWithIdp",ds(i,e))}const GC="http://localhost";class Fa extends Rp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Fa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):mi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const h=new Fa(s,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return Go(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Go(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Go(e,n)}buildRequest(){const e={requestUri:GC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Nu(n)}return e}}function KC(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function QC(i){const e=su(au(i)).link,n=e?su(au(e)).deep_link_id:null,s=su(au(i)).deep_link_id;return(s?su(au(s)).link:null)||s||n||e||i}class Ip{constructor(e){const n=su(au(e)),s=n.apiKey??null,o=n.oobCode??null,u=KC(n.mode??null);nt(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=QC(e);try{return new Ip(n)}catch{return null}}}class Ya{constructor(){this.providerId=Ya.PROVIDER_ID}static credential(e,n){return bu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Ip.parseLink(n);return nt(s,"argument-error"),bu._fromEmailAndCode(e,s.code,s.tenantId)}}Ya.PROVIDER_ID="password";Ya.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ya.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class _E{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Mu extends _E{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Gs extends Mu{constructor(){super("facebook.com")}static credential(e){return Fa._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gs.credential(e.oauthAccessToken)}catch{return null}}}Gs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gs.PROVIDER_ID="facebook.com";class Ks extends Mu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Fa._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Ks.credential(n,s)}catch{return null}}}Ks.GOOGLE_SIGN_IN_METHOD="google.com";Ks.PROVIDER_ID="google.com";class Qs extends Mu{constructor(){super("github.com")}static credential(e){return Fa._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qs.credential(e.oauthAccessToken)}catch{return null}}}Qs.GITHUB_SIGN_IN_METHOD="github.com";Qs.PROVIDER_ID="github.com";class Ys extends Mu{constructor(){super("twitter.com")}static credential(e,n){return Fa._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ys.credentialFromTaggedObject(e)}static credentialFromError(e){return Ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Ys.credential(n,s)}catch{return null}}}Ys.TWITTER_SIGN_IN_METHOD="twitter.com";Ys.PROVIDER_ID="twitter.com";async function YC(i,e){return Du(i,"POST","/v1/accounts:signUp",ds(i,e))}class Ha{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await fi._fromIdTokenResponse(e,s,o),h=g_(s);return new Ha({user:u,providerId:h,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=g_(s);return new Ha({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function g_(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class Md extends ji{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Md.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Md(e,n,s,o)}}function bE(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Md._fromErrorAndOperation(i,u,e,s):u})}async function XC(i,e,n=!1){const s=await Qo(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return Ha._forOperation(i,"link",s)}async function EE(i,e,n=!1){const{auth:s}=i;if(Lr(s.app))return Promise.reject(ss(s));const o="reauthenticate";try{const u=await Qo(i,bE(s,o,e,i),n);nt(u.idToken,s,"internal-error");const h=Ap(u.idToken);nt(h,s,"internal-error");const{sub:g}=h;return nt(i.uid===g,s,"user-mismatch"),Ha._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&mi(s,"user-mismatch"),u}}async function TE(i,e,n=!1){if(Lr(i.app))return Promise.reject(ss(i));const s="signIn",o=await bE(i,s,e),u=await Ha._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}async function $C(i,e){return TE(ca(i),e)}async function WC(i,e){return EE(un(i),e)}async function SE(i){const e=ca(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function JC(i,e,n){const s=ca(i);await Dd(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",BC)}async function vd(i,e,n){if(Lr(i.app))return Promise.reject(ss(i));const s=ca(i),h=await Dd(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",YC).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&SE(i),p}),g=await Ha._fromIdTokenResponse(s,"signIn",h);return await s._updateCurrentUser(g.user),g}function ZC(i,e,n){return Lr(i.app)?Promise.reject(ss(i)):$C(un(i),Ya.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&SE(i),s})}async function y_(i,e,n){const s=un(i),u={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await i.getIdToken(),newEmail:e},{email:h}=await qC(s.auth,u);h!==i.email&&await i.reload()}function eR(i,e){return tR(un(i),null,e)}async function tR(i,e,n){const{auth:s}=i,u={idToken:await i.getIdToken(),returnSecureToken:!0};n&&(u.password=n);const h=await Qo(i,PC(s,u));await i._updateTokensIfNecessary(h,!0)}function nR(i,e,n,s){return un(i).onIdTokenChanged(e,n,s)}function rR(i,e,n){return un(i).beforeAuthStateChanged(e,n)}function iR(i,e,n,s){return un(i).onAuthStateChanged(e,n,s)}function sR(i){return un(i).signOut()}const Od="__sak";class wE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Od,"1"),this.storage.removeItem(Od),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const aR=1e3,oR=10;class AE extends wE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,g,p)=>{this.notifyListeners(h,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!n&&this.localCache[s]===h||this.notifyListeners(s,h)},u=this.storage.getItem(s);_C()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,oR):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},aR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}AE.type="LOCAL";const lR=AE;class CE extends wE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}CE.type="SESSION";const RE=CE;function uR(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class nh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new nh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,h=this.handlersMap[o];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const g=Array.from(h).map(async m=>m(n.origin,u)),p=await uR(g);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nh.receivers=[];function xp(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}class cR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((g,p)=>{const m=xp("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===m)switch(S.data.status){case"ack":clearTimeout(v),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(S.data.response);break;default:clearTimeout(v),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function xi(){return window}function dR(i){xi().location.href=i}function IE(){return typeof xi().WorkerGlobalScope<"u"&&typeof xi().importScripts=="function"}async function hR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fR(){return navigator?.serviceWorker?.controller||null}function mR(){return IE()?self:null}const xE="firebaseLocalStorageDb",pR=1,Vd="firebaseLocalStorage",NE="fbase_key";class Ou{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function rh(i,e){return i.transaction([Vd],e?"readwrite":"readonly").objectStore(Vd)}function gR(){const i=indexedDB.deleteDatabase(xE);return new Ou(i).toPromise()}function Qm(){const i=indexedDB.open(xE,pR);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Vd,{keyPath:NE})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Vd)?e(s):(s.close(),await gR(),e(await Qm()))})})}async function v_(i,e,n){const s=rh(i,!0).put({[NE]:e,value:n});return new Ou(s).toPromise()}async function yR(i,e){const n=rh(i,!1).get(e),s=await new Ou(n).toPromise();return s===void 0?null:s.value}function __(i,e){const n=rh(i,!0).delete(e);return new Ou(n).toPromise()}const vR=800,_R=3;class kE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>_R)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return IE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nh._getInstance(mR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await hR(),!this.activeServiceWorker)return;this.sender=new cR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qm();return await v_(e,Od,"1"),await __(e,Od),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>v_(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>yR(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>__(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=rh(o,!1).getAll();return new Ou(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kE.type="LOCAL";const bR=kE;new ku(3e4,6e4);function ER(i,e){return e?is(e):(nt(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class Np extends Rp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Go(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Go(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Go(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function TR(i){return TE(i.auth,new Np(i),i.bypassAuthState)}function SR(i){const{auth:e,user:n}=i;return nt(n,e,"internal-error"),EE(n,new Np(i),i.bypassAuthState)}async function wR(i){const{auth:e,user:n}=i;return nt(n,e,"internal-error"),XC(n,new Np(i),i.bypassAuthState)}class DE{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:h,type:g}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return TR;case"linkViaPopup":case"linkViaRedirect":return wR;case"reauthViaPopup":case"reauthViaRedirect":return SR;default:mi(this.auth,"internal-error")}}resolve(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const AR=new ku(2e3,1e4);class Bo extends DE{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Bo.currentPopupAction&&Bo.currentPopupAction.cancel(),Bo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return nt(e,this.auth,"internal-error"),e}async onExecution(){ls(this.filter.length===1,"Popup operations only handle one event");const e=xp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ii(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ii(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ii(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,AR.get())};e()}}Bo.currentPopupAction=null;const CR="pendingRedirect",_d=new Map;class RR extends DE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=_d.get(this.auth._key());if(!e){try{const s=await IR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}_d.set(this.auth._key(),e)}return this.bypassAuthState||_d.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IR(i,e){const n=kR(e),s=NR(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function xR(i,e){_d.set(i._key(),e)}function NR(i){return is(i._redirectPersistence)}function kR(i){return yd(CR,i.config.apiKey,i.name)}async function DR(i,e,n=!1){if(Lr(i.app))return Promise.reject(ss(i));const s=ca(i),o=ER(s,e),h=await new RR(s,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}const MR=600*1e3;class OR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!ME(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ii(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=MR&&this.cachedEventUids.clear(),this.cachedEventUids.has(b_(e))}saveEventToCache(e){this.cachedEventUids.add(b_(e)),this.lastProcessedEventTime=Date.now()}}function b_(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function ME({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function VR(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ME(i);default:return!1}}async function jR(i,e={}){return Li(i,"GET","/v1/projects",e)}const LR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PR=/^https?/;async function UR(i){if(i.config.emulator)return;const{authorizedDomains:e}=await jR(i);for(const n of e)try{if(zR(n))return}catch{}mi(i,"unauthorized-domain")}function zR(i){const e=Gm(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const h=new URL(i);return h.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===s}if(!PR.test(n))return!1;if(LR.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const BR=new ku(3e4,6e4);function E_(){const i=xi().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function qR(i){return new Promise((e,n)=>{function s(){E_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{E_(),n(Ii(i,"network-request-failed"))},timeout:BR.get()})}if(xi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(xi().gapi?.load)s();else{const o=IC("iframefcb");return xi()[o]=()=>{gapi.load?s():n(Ii(i,"network-request-failed"))},pE(`${RC()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw bd=null,e})}let bd=null;function FR(i){return bd=bd||qR(i),bd}const HR=new ku(5e3,15e3),GR="__/auth/iframe",KR="emulator/auth/iframe",QR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},YR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XR(i){const e=i.config;nt(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?wp(e,KR):`https://${i.config.authDomain}/${GR}`,s={apiKey:e.apiKey,appName:i.name,v:tl},o=YR.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Nu(s).slice(1)}`}async function $R(i){const e=await FR(i),n=xi().gapi;return nt(n,i,"internal-error"),e.open({where:document.body,url:XR(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QR,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const h=Ii(i,"network-request-failed"),g=xi().setTimeout(()=>{u(h)},HR.get());function p(){xi().clearTimeout(g),o(s)}s.ping(p).then(p,()=>{u(h)})}))}const WR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JR=500,ZR=600,e2="_blank",t2="http://localhost";class T_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function n2(i,e,n,s=JR,o=ZR){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const p={...WR,width:s.toString(),height:o.toString(),top:u,left:h},m=lr().toLowerCase();n&&(g=lE(m)?e2:n),aE(m)&&(e=e||t2,p.scrollbars="yes");const v=Object.entries(p).reduce((S,[w,j])=>`${S}${w}=${j},`,"");if(vC(m)&&g!=="_self")return r2(e||"",g),new T_(null);const T=window.open(e||"",g,v);nt(T,i,"popup-blocked");try{T.focus()}catch{}return new T_(T)}function r2(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const i2="__/auth/handler",s2="emulator/auth/handler",a2=encodeURIComponent("fac");async function S_(i,e,n,s,o,u){nt(i.config.authDomain,i,"auth-domain-config-required"),nt(i.config.apiKey,i,"invalid-api-key");const h={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:tl,eventId:o};if(e instanceof _E){e.setDefaultLanguage(i.languageCode),h.providerId=e.providerId||"",Pw(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries({}))h[v]=T}if(e instanceof Mu){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(h.scopes=v.join(","))}i.tenantId&&(h.tid=i.tenantId);const g=h;for(const v of Object.keys(g))g[v]===void 0&&delete g[v];const p=await i._getAppCheckToken(),m=p?`#${a2}=${encodeURIComponent(p)}`:"";return`${o2(i)}?${Nu(g).slice(1)}${m}`}function o2({config:i}){return i.emulator?wp(i,s2):`https://${i.authDomain}/${i2}`}const xm="webStorageSupport";class l2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RE,this._completeRedirectFn=DR,this._overrideRedirectResult=xR}async _openPopup(e,n,s,o){ls(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await S_(e,n,s,Gm(),o);return n2(e,u,xp())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await S_(e,n,s,Gm(),o);return dR(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(ls(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await $R(e),s=new OR(e);return n.register("authEvent",o=>(nt(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xm,{type:xm},o=>{const u=o?.[0]?.[xm];u!==void 0&&n(!!u),mi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=UR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return fE()||oE()||Cp()}}const u2=l2;var w_="@firebase/auth",A_="1.11.1";class c2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function d2(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function h2(i){qa(new na("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:g}=s.options;nt(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:h,authDomain:g,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mE(i)},m=new wC(s,o,u,p);return OC(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),qa(new na("auth-internal",e=>{const n=ca(e.getProvider("auth").getImmediate());return(s=>new c2(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ri(w_,A_,d2(i)),Ri(w_,A_,"esm2020")}const f2=300,m2=Kb("authIdTokenMaxAge")||f2;let C_=null;const p2=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>m2)return;const o=n?.token;C_!==o&&(C_=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function OE(i=eh()){const e=Zd(i,"auth");if(e.isInitialized())return e.getImmediate();const n=MC(i,{popupRedirectResolver:u2,persistence:[bR,lR,RE]}),s=Kb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const h=p2(u.toString());rR(n,h,()=>h(n.currentUser)),nR(n,g=>h(g))}}const o=Fb("auth");return o&&VC(n,`http://${o}`),n}function g2(){return document.getElementsByTagName("head")?.[0]??document}AC({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=Ii("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",g2().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});h2("Browser");var R_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Zs,VE;(function(){var i;function e(N,R){function x(){}x.prototype=R.prototype,N.F=R.prototype,N.prototype=new x,N.prototype.constructor=N,N.D=function(V,k,P){for(var I=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)I[Ke-2]=arguments[Ke];return R.prototype[k].apply(V,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,R,x){x||(x=0);const V=Array(16);if(typeof R=="string")for(var k=0;k<16;++k)V[k]=R.charCodeAt(x++)|R.charCodeAt(x++)<<8|R.charCodeAt(x++)<<16|R.charCodeAt(x++)<<24;else for(k=0;k<16;++k)V[k]=R[x++]|R[x++]<<8|R[x++]<<16|R[x++]<<24;R=N.g[0],x=N.g[1],k=N.g[2];let P=N.g[3],I;I=R+(P^x&(k^P))+V[0]+3614090360&4294967295,R=x+(I<<7&4294967295|I>>>25),I=P+(k^R&(x^k))+V[1]+3905402710&4294967295,P=R+(I<<12&4294967295|I>>>20),I=k+(x^P&(R^x))+V[2]+606105819&4294967295,k=P+(I<<17&4294967295|I>>>15),I=x+(R^k&(P^R))+V[3]+3250441966&4294967295,x=k+(I<<22&4294967295|I>>>10),I=R+(P^x&(k^P))+V[4]+4118548399&4294967295,R=x+(I<<7&4294967295|I>>>25),I=P+(k^R&(x^k))+V[5]+1200080426&4294967295,P=R+(I<<12&4294967295|I>>>20),I=k+(x^P&(R^x))+V[6]+2821735955&4294967295,k=P+(I<<17&4294967295|I>>>15),I=x+(R^k&(P^R))+V[7]+4249261313&4294967295,x=k+(I<<22&4294967295|I>>>10),I=R+(P^x&(k^P))+V[8]+1770035416&4294967295,R=x+(I<<7&4294967295|I>>>25),I=P+(k^R&(x^k))+V[9]+2336552879&4294967295,P=R+(I<<12&4294967295|I>>>20),I=k+(x^P&(R^x))+V[10]+4294925233&4294967295,k=P+(I<<17&4294967295|I>>>15),I=x+(R^k&(P^R))+V[11]+2304563134&4294967295,x=k+(I<<22&4294967295|I>>>10),I=R+(P^x&(k^P))+V[12]+1804603682&4294967295,R=x+(I<<7&4294967295|I>>>25),I=P+(k^R&(x^k))+V[13]+4254626195&4294967295,P=R+(I<<12&4294967295|I>>>20),I=k+(x^P&(R^x))+V[14]+2792965006&4294967295,k=P+(I<<17&4294967295|I>>>15),I=x+(R^k&(P^R))+V[15]+1236535329&4294967295,x=k+(I<<22&4294967295|I>>>10),I=R+(k^P&(x^k))+V[1]+4129170786&4294967295,R=x+(I<<5&4294967295|I>>>27),I=P+(x^k&(R^x))+V[6]+3225465664&4294967295,P=R+(I<<9&4294967295|I>>>23),I=k+(R^x&(P^R))+V[11]+643717713&4294967295,k=P+(I<<14&4294967295|I>>>18),I=x+(P^R&(k^P))+V[0]+3921069994&4294967295,x=k+(I<<20&4294967295|I>>>12),I=R+(k^P&(x^k))+V[5]+3593408605&4294967295,R=x+(I<<5&4294967295|I>>>27),I=P+(x^k&(R^x))+V[10]+38016083&4294967295,P=R+(I<<9&4294967295|I>>>23),I=k+(R^x&(P^R))+V[15]+3634488961&4294967295,k=P+(I<<14&4294967295|I>>>18),I=x+(P^R&(k^P))+V[4]+3889429448&4294967295,x=k+(I<<20&4294967295|I>>>12),I=R+(k^P&(x^k))+V[9]+568446438&4294967295,R=x+(I<<5&4294967295|I>>>27),I=P+(x^k&(R^x))+V[14]+3275163606&4294967295,P=R+(I<<9&4294967295|I>>>23),I=k+(R^x&(P^R))+V[3]+4107603335&4294967295,k=P+(I<<14&4294967295|I>>>18),I=x+(P^R&(k^P))+V[8]+1163531501&4294967295,x=k+(I<<20&4294967295|I>>>12),I=R+(k^P&(x^k))+V[13]+2850285829&4294967295,R=x+(I<<5&4294967295|I>>>27),I=P+(x^k&(R^x))+V[2]+4243563512&4294967295,P=R+(I<<9&4294967295|I>>>23),I=k+(R^x&(P^R))+V[7]+1735328473&4294967295,k=P+(I<<14&4294967295|I>>>18),I=x+(P^R&(k^P))+V[12]+2368359562&4294967295,x=k+(I<<20&4294967295|I>>>12),I=R+(x^k^P)+V[5]+4294588738&4294967295,R=x+(I<<4&4294967295|I>>>28),I=P+(R^x^k)+V[8]+2272392833&4294967295,P=R+(I<<11&4294967295|I>>>21),I=k+(P^R^x)+V[11]+1839030562&4294967295,k=P+(I<<16&4294967295|I>>>16),I=x+(k^P^R)+V[14]+4259657740&4294967295,x=k+(I<<23&4294967295|I>>>9),I=R+(x^k^P)+V[1]+2763975236&4294967295,R=x+(I<<4&4294967295|I>>>28),I=P+(R^x^k)+V[4]+1272893353&4294967295,P=R+(I<<11&4294967295|I>>>21),I=k+(P^R^x)+V[7]+4139469664&4294967295,k=P+(I<<16&4294967295|I>>>16),I=x+(k^P^R)+V[10]+3200236656&4294967295,x=k+(I<<23&4294967295|I>>>9),I=R+(x^k^P)+V[13]+681279174&4294967295,R=x+(I<<4&4294967295|I>>>28),I=P+(R^x^k)+V[0]+3936430074&4294967295,P=R+(I<<11&4294967295|I>>>21),I=k+(P^R^x)+V[3]+3572445317&4294967295,k=P+(I<<16&4294967295|I>>>16),I=x+(k^P^R)+V[6]+76029189&4294967295,x=k+(I<<23&4294967295|I>>>9),I=R+(x^k^P)+V[9]+3654602809&4294967295,R=x+(I<<4&4294967295|I>>>28),I=P+(R^x^k)+V[12]+3873151461&4294967295,P=R+(I<<11&4294967295|I>>>21),I=k+(P^R^x)+V[15]+530742520&4294967295,k=P+(I<<16&4294967295|I>>>16),I=x+(k^P^R)+V[2]+3299628645&4294967295,x=k+(I<<23&4294967295|I>>>9),I=R+(k^(x|~P))+V[0]+4096336452&4294967295,R=x+(I<<6&4294967295|I>>>26),I=P+(x^(R|~k))+V[7]+1126891415&4294967295,P=R+(I<<10&4294967295|I>>>22),I=k+(R^(P|~x))+V[14]+2878612391&4294967295,k=P+(I<<15&4294967295|I>>>17),I=x+(P^(k|~R))+V[5]+4237533241&4294967295,x=k+(I<<21&4294967295|I>>>11),I=R+(k^(x|~P))+V[12]+1700485571&4294967295,R=x+(I<<6&4294967295|I>>>26),I=P+(x^(R|~k))+V[3]+2399980690&4294967295,P=R+(I<<10&4294967295|I>>>22),I=k+(R^(P|~x))+V[10]+4293915773&4294967295,k=P+(I<<15&4294967295|I>>>17),I=x+(P^(k|~R))+V[1]+2240044497&4294967295,x=k+(I<<21&4294967295|I>>>11),I=R+(k^(x|~P))+V[8]+1873313359&4294967295,R=x+(I<<6&4294967295|I>>>26),I=P+(x^(R|~k))+V[15]+4264355552&4294967295,P=R+(I<<10&4294967295|I>>>22),I=k+(R^(P|~x))+V[6]+2734768916&4294967295,k=P+(I<<15&4294967295|I>>>17),I=x+(P^(k|~R))+V[13]+1309151649&4294967295,x=k+(I<<21&4294967295|I>>>11),I=R+(k^(x|~P))+V[4]+4149444226&4294967295,R=x+(I<<6&4294967295|I>>>26),I=P+(x^(R|~k))+V[11]+3174756917&4294967295,P=R+(I<<10&4294967295|I>>>22),I=k+(R^(P|~x))+V[2]+718787259&4294967295,k=P+(I<<15&4294967295|I>>>17),I=x+(P^(k|~R))+V[9]+3951481745&4294967295,N.g[0]=N.g[0]+R&4294967295,N.g[1]=N.g[1]+(k+(I<<21&4294967295|I>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+P&4294967295}s.prototype.v=function(N,R){R===void 0&&(R=N.length);const x=R-this.blockSize,V=this.C;let k=this.h,P=0;for(;P<R;){if(k==0)for(;P<=x;)o(this,N,P),P+=this.blockSize;if(typeof N=="string"){for(;P<R;)if(V[k++]=N.charCodeAt(P++),k==this.blockSize){o(this,V),k=0;break}}else for(;P<R;)if(V[k++]=N[P++],k==this.blockSize){o(this,V),k=0;break}}this.h=k,this.o+=R},s.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var R=1;R<N.length-8;++R)N[R]=0;R=this.o*8;for(var x=N.length-8;x<N.length;++x)N[x]=R&255,R/=256;for(this.v(N),N=Array(16),R=0,x=0;x<4;++x)for(let V=0;V<32;V+=8)N[R++]=this.g[x]>>>V&255;return N};function u(N,R){var x=g;return Object.prototype.hasOwnProperty.call(x,N)?x[N]:x[N]=R(N)}function h(N,R){this.h=R;const x=[];let V=!0;for(let k=N.length-1;k>=0;k--){const P=N[k]|0;V&&P==R||(x[k]=P,V=!1)}this.g=x}var g={};function p(N){return-128<=N&&N<128?u(N,function(R){return new h([R|0],R<0?-1:0)}):new h([N|0],N<0?-1:0)}function m(N){if(isNaN(N)||!isFinite(N))return T;if(N<0)return B(m(-N));const R=[];let x=1;for(let V=0;N>=x;V++)R[V]=N/x|0,x*=4294967296;return new h(R,0)}function v(N,R){if(N.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(N.charAt(0)=="-")return B(v(N.substring(1),R));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=m(Math.pow(R,8));let V=T;for(let P=0;P<N.length;P+=8){var k=Math.min(8,N.length-P);const I=parseInt(N.substring(P,P+k),R);k<8?(k=m(Math.pow(R,k)),V=V.j(k).add(m(I))):(V=V.j(x),V=V.add(m(I)))}return V}var T=p(0),S=p(1),w=p(16777216);i=h.prototype,i.m=function(){if(q(this))return-B(this).m();let N=0,R=1;for(let x=0;x<this.g.length;x++){const V=this.i(x);N+=(V>=0?V:4294967296+V)*R,R*=4294967296}return N},i.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(j(this))return"0";if(q(this))return"-"+B(this).toString(N);const R=m(Math.pow(N,6));var x=this;let V="";for(;;){const k=Se(x,R).g;x=_e(x,k.j(R));let P=((x.g.length>0?x.g[0]:x.h)>>>0).toString(N);if(x=k,j(x))return P+V;for(;P.length<6;)P="0"+P;V=P+V}},i.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function j(N){if(N.h!=0)return!1;for(let R=0;R<N.g.length;R++)if(N.g[R]!=0)return!1;return!0}function q(N){return N.h==-1}i.l=function(N){return N=_e(this,N),q(N)?-1:j(N)?0:1};function B(N){const R=N.g.length,x=[];for(let V=0;V<R;V++)x[V]=~N.g[V];return new h(x,~N.h).add(S)}i.abs=function(){return q(this)?B(this):this},i.add=function(N){const R=Math.max(this.g.length,N.g.length),x=[];let V=0;for(let k=0;k<=R;k++){let P=V+(this.i(k)&65535)+(N.i(k)&65535),I=(P>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);V=I>>>16,P&=65535,I&=65535,x[k]=I<<16|P}return new h(x,x[x.length-1]&-2147483648?-1:0)};function _e(N,R){return N.add(B(R))}i.j=function(N){if(j(this)||j(N))return T;if(q(this))return q(N)?B(this).j(B(N)):B(B(this).j(N));if(q(N))return B(this.j(B(N)));if(this.l(w)<0&&N.l(w)<0)return m(this.m()*N.m());const R=this.g.length+N.g.length,x=[];for(var V=0;V<2*R;V++)x[V]=0;for(V=0;V<this.g.length;V++)for(let k=0;k<N.g.length;k++){const P=this.i(V)>>>16,I=this.i(V)&65535,Ke=N.i(k)>>>16,it=N.i(k)&65535;x[2*V+2*k]+=I*it,fe(x,2*V+2*k),x[2*V+2*k+1]+=P*it,fe(x,2*V+2*k+1),x[2*V+2*k+1]+=I*Ke,fe(x,2*V+2*k+1),x[2*V+2*k+2]+=P*Ke,fe(x,2*V+2*k+2)}for(N=0;N<R;N++)x[N]=x[2*N+1]<<16|x[2*N];for(N=R;N<2*R;N++)x[N]=0;return new h(x,0)};function fe(N,R){for(;(N[R]&65535)!=N[R];)N[R+1]+=N[R]>>>16,N[R]&=65535,R++}function te(N,R){this.g=N,this.h=R}function Se(N,R){if(j(R))throw Error("division by zero");if(j(N))return new te(T,T);if(q(N))return R=Se(B(N),R),new te(B(R.g),B(R.h));if(q(R))return R=Se(N,B(R)),new te(B(R.g),R.h);if(N.g.length>30){if(q(N)||q(R))throw Error("slowDivide_ only works with positive integers.");for(var x=S,V=R;V.l(N)<=0;)x=Ge(x),V=Ge(V);var k=Be(x,1),P=Be(V,1);for(V=Be(V,2),x=Be(x,2);!j(V);){var I=P.add(V);I.l(N)<=0&&(k=k.add(x),P=I),V=Be(V,1),x=Be(x,1)}return R=_e(N,k.j(R)),new te(k,R)}for(k=T;N.l(R)>=0;){for(x=Math.max(1,Math.floor(N.m()/R.m())),V=Math.ceil(Math.log(x)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),P=m(x),I=P.j(R);q(I)||I.l(N)>0;)x-=V,P=m(x),I=P.j(R);j(P)&&(P=S),k=k.add(P),N=_e(N,I)}return new te(k,N)}i.B=function(N){return Se(this,N).h},i.and=function(N){const R=Math.max(this.g.length,N.g.length),x=[];for(let V=0;V<R;V++)x[V]=this.i(V)&N.i(V);return new h(x,this.h&N.h)},i.or=function(N){const R=Math.max(this.g.length,N.g.length),x=[];for(let V=0;V<R;V++)x[V]=this.i(V)|N.i(V);return new h(x,this.h|N.h)},i.xor=function(N){const R=Math.max(this.g.length,N.g.length),x=[];for(let V=0;V<R;V++)x[V]=this.i(V)^N.i(V);return new h(x,this.h^N.h)};function Ge(N){const R=N.g.length+1,x=[];for(let V=0;V<R;V++)x[V]=N.i(V)<<1|N.i(V-1)>>>31;return new h(x,N.h)}function Be(N,R){const x=R>>5;R%=32;const V=N.g.length-x,k=[];for(let P=0;P<V;P++)k[P]=R>0?N.i(P+x)>>>R|N.i(P+x+1)<<32-R:N.i(P+x);return new h(k,N.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,VE=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=m,h.fromString=v,Zs=h}).apply(typeof R_<"u"?R_:typeof self<"u"?self:typeof window<"u"?window:{});var cd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var jE,ou,LE,Ed,Ym,PE,UE,zE;(function(){var i,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof cd=="object"&&cd];for(var y=0;y<c.length;++y){var E=c[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var E=s;c=c.split(".");for(var C=0;C<c.length-1;C++){var H=c[C];if(!(H in E))break e;E=E[H]}c=c[c.length-1],C=E[c],y=y(C),y!=C&&y!=null&&e(E,c,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(y){var E=[],C;for(C in y)Object.prototype.hasOwnProperty.call(y,C)&&E.push([C,y[C]]);return E}});var u=u||{},h=this||self;function g(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function p(c,y,E){return c.call.apply(c.bind,arguments)}function m(c,y,E){return m=p,m.apply(null,arguments)}function v(c,y){var E=Array.prototype.slice.call(arguments,1);return function(){var C=E.slice();return C.push.apply(C,arguments),c.apply(this,C)}}function T(c,y){function E(){}E.prototype=y.prototype,c.Z=y.prototype,c.prototype=new E,c.prototype.constructor=c,c.Ob=function(C,H,$){for(var Te=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)Te[dt-2]=arguments[dt];return y.prototype[H].apply(C,Te)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function w(c){const y=c.length;if(y>0){const E=Array(y);for(let C=0;C<y;C++)E[C]=c[C];return E}return[]}function j(c,y){for(let C=1;C<arguments.length;C++){const H=arguments[C];var E=typeof H;if(E=E!="object"?E:H?Array.isArray(H)?"array":E:"null",E=="array"||E=="object"&&typeof H.length=="number"){E=c.length||0;const $=H.length||0;c.length=E+$;for(let Te=0;Te<$;Te++)c[E+Te]=H[Te]}else c.push(H)}}class q{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function B(c){h.setTimeout(()=>{throw c},0)}function _e(){var c=N;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class fe{constructor(){this.h=this.g=null}add(y,E){const C=te.get();C.set(y,E),this.h?this.h.next=C:this.g=C,this.h=C}}var te=new q(()=>new Se,c=>c.reset());class Se{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Ge,Be=!1,N=new fe,R=()=>{const c=Promise.resolve(void 0);Ge=()=>{c.then(x)}};function x(){for(var c;c=_e();){try{c.h.call(c.g)}catch(E){B(E)}var y=te;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}Be=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const E=()=>{};h.addEventListener("test",E,y),h.removeEventListener("test",E,y)}catch{}return c})();function I(c){return/^[\s\xa0]*$/.test(c)}function Ke(c,y){k.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}T(Ke,k),Ke.prototype.init=function(c,y){const E=this.type=c.type,C=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(E=="mouseover"?y=c.fromElement:E=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Ke.Z.h.call(this)},Ke.prototype.h=function(){Ke.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var it="closure_listenable_"+(Math.random()*1e6|0),Y=0;function ce(c,y,E,C,H){this.listener=c,this.proxy=null,this.src=y,this.type=E,this.capture=!!C,this.ha=H,this.key=++Y,this.da=this.fa=!1}function ve(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function pe(c,y,E){for(const C in c)y.call(E,c[C],C,c)}function Le(c,y){for(const E in c)y.call(void 0,c[E],E,c)}function O(c){const y={};for(const E in c)y[E]=c[E];return y}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(c,y){let E,C;for(let H=1;H<arguments.length;H++){C=arguments[H];for(E in C)c[E]=C[E];for(let $=0;$<G.length;$++)E=G[$],Object.prototype.hasOwnProperty.call(C,E)&&(c[E]=C[E])}}function ie(c){this.src=c,this.g={},this.h=0}ie.prototype.add=function(c,y,E,C,H){const $=c.toString();c=this.g[$],c||(c=this.g[$]=[],this.h++);const Te=Ee(c,y,C,H);return Te>-1?(y=c[Te],E||(y.fa=!1)):(y=new ce(y,this.src,$,!!C,H),y.fa=E,c.push(y)),y};function Re(c,y){const E=y.type;if(E in c.g){var C=c.g[E],H=Array.prototype.indexOf.call(C,y,void 0),$;($=H>=0)&&Array.prototype.splice.call(C,H,1),$&&(ve(y),c.g[E].length==0&&(delete c.g[E],c.h--))}}function Ee(c,y,E,C){for(let H=0;H<c.length;++H){const $=c[H];if(!$.da&&$.listener==y&&$.capture==!!E&&$.ha==C)return H}return-1}var Me="closure_lm_"+(Math.random()*1e6|0),st={};function he(c,y,E,C,H){if(Array.isArray(y)){for(let $=0;$<y.length;$++)he(c,y[$],E,C,H);return null}return E=De(E),c&&c[it]?c.J(y,E,g(C)?!!C.capture:!1,H):Pe(c,y,E,!1,C,H)}function Pe(c,y,E,C,H,$){if(!y)throw Error("Invalid event type");const Te=g(H)?!!H.capture:!!H;let dt=oe(c);if(dt||(c[Me]=dt=new ie(c)),E=dt.add(y,E,C,Te,$),E.proxy)return E;if(C=ot(),E.proxy=C,C.src=c,C.listener=E,c.addEventListener)P||(H=Te),H===void 0&&(H=!1),c.addEventListener(y.toString(),C,H);else if(c.attachEvent)c.attachEvent(ge(y.toString()),C);else if(c.addListener&&c.removeListener)c.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return E}function ot(){function c(E){return y.call(c.src,c.listener,E)}const y=Ae;return c}function mt(c,y,E,C,H){if(Array.isArray(y))for(var $=0;$<y.length;$++)mt(c,y[$],E,C,H);else C=g(C)?!!C.capture:!!C,E=De(E),c&&c[it]?(c=c.i,$=String(y).toString(),$ in c.g&&(y=c.g[$],E=Ee(y,E,C,H),E>-1&&(ve(y[E]),Array.prototype.splice.call(y,E,1),y.length==0&&(delete c.g[$],c.h--)))):c&&(c=oe(c))&&(y=c.g[y.toString()],c=-1,y&&(c=Ee(y,E,C,H)),(E=c>-1?y[c]:null)&&ae(E))}function ae(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[it])Re(y.i,c);else{var E=c.type,C=c.proxy;y.removeEventListener?y.removeEventListener(E,C,c.capture):y.detachEvent?y.detachEvent(ge(E),C):y.addListener&&y.removeListener&&y.removeListener(C),(E=oe(y))?(Re(E,c),E.h==0&&(E.src=null,y[Me]=null)):ve(c)}}}function ge(c){return c in st?st[c]:st[c]="on"+c}function Ae(c,y){if(c.da)c=!0;else{y=new Ke(y,this);const E=c.listener,C=c.ha||c.src;c.fa&&ae(c),c=E.call(C,y)}return c}function oe(c){return c=c[Me],c instanceof ie?c:null}var Ce="__closure_events_fn_"+(Math.random()*1e9>>>0);function De(c){return typeof c=="function"?c:(c[Ce]||(c[Ce]=function(y){return c.handleEvent(y)}),c[Ce])}function Ve(){V.call(this),this.i=new ie(this),this.M=this,this.G=null}T(Ve,V),Ve.prototype[it]=!0,Ve.prototype.removeEventListener=function(c,y,E,C){mt(this,c,y,E,C)};function ke(c,y){var E,C=c.G;if(C)for(E=[];C;C=C.G)E.push(C);if(c=c.M,C=y.type||y,typeof y=="string")y=new k(y,c);else if(y instanceof k)y.target=y.target||c;else{var H=y;y=new k(C,c),ee(y,H)}H=!0;let $,Te;if(E)for(Te=E.length-1;Te>=0;Te--)$=y.g=E[Te],H=Ze($,C,!0,y)&&H;if($=y.g=c,H=Ze($,C,!0,y)&&H,H=Ze($,C,!1,y)&&H,E)for(Te=0;Te<E.length;Te++)$=y.g=E[Te],H=Ze($,C,!1,y)&&H}Ve.prototype.N=function(){if(Ve.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const E=c.g[y];for(let C=0;C<E.length;C++)ve(E[C]);delete c.g[y],c.h--}}this.G=null},Ve.prototype.J=function(c,y,E,C){return this.i.add(String(c),y,!1,E,C)},Ve.prototype.K=function(c,y,E,C){return this.i.add(String(c),y,!0,E,C)};function Ze(c,y,E,C){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let H=!0;for(let $=0;$<y.length;++$){const Te=y[$];if(Te&&!Te.da&&Te.capture==E){const dt=Te.listener,An=Te.ha||Te.src;Te.fa&&Re(c.i,Te),H=dt.call(An,C)!==!1&&H}}return H&&!C.defaultPrevented}function sn(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:h.setTimeout(c,y||0)}function _t(c){c.g=sn(()=>{c.g=null,c.i&&(c.i=!1,_t(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class jt extends V{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:_t(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wn(c){V.call(this),this.h=c,this.g={}}T(wn,V);var Dt=[];function Xe(c){pe(c.g,function(y,E){this.g.hasOwnProperty(E)&&ae(y)},c),c.g={}}wn.prototype.N=function(){wn.Z.N.call(this),Xe(this)},wn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var At=h.JSON.stringify,Ur=h.JSON.parse,xn=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function ur(){}function gr(){}var vn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Wt(){k.call(this,"d")}T(Wt,k);function Xt(){k.call(this,"c")}T(Xt,k);var bt={},xr=null;function rr(){return xr=xr||new Ve}bt.Ia="serverreachability";function cr(c){k.call(this,bt.Ia,c)}T(cr,k);function zn(c){const y=rr();ke(y,new cr(y))}bt.STAT_EVENT="statevent";function Nn(c,y){k.call(this,bt.STAT_EVENT,c),this.stat=y}T(Nn,k);function Ct(c){const y=rr();ke(y,new Nn(y,c))}bt.Ja="timingevent";function an(c,y){k.call(this,bt.Ja,c),this.size=y}T(an,k);function Gn(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},y)}function qe(){this.g=!0}qe.prototype.ua=function(){this.g=!1};function vt(c,y,E,C,H,$){c.info(function(){if(c.g)if($){var Te="",dt=$.split("&");for(let Gt=0;Gt<dt.length;Gt++){var An=dt[Gt].split("=");if(An.length>1){const pn=An[0];An=An[1];const Kr=pn.split("_");Te=Kr.length>=2&&Kr[1]=="type"?Te+(pn+"="+An+"&"):Te+(pn+"=redacted&")}}}else Te=null;else Te=$;return"XMLHTTP REQ ("+C+") [attempt "+H+"]: "+y+`
`+E+`
`+Te})}function F(c,y,E,C,H,$,Te){c.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+H+"]: "+y+`
`+E+`
`+$+" "+Te})}function Z(c,y,E,C){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+ye(c,E)+(C?" "+C:"")})}function de(c,y){c.info(function(){return"TIMEOUT: "+y})}qe.prototype.info=function(){};function ye(c,y){if(!c.g)return y;if(!y)return null;try{const $=JSON.parse(y);if($){for(c=0;c<$.length;c++)if(Array.isArray($[c])){var E=$[c];if(!(E.length<2)){var C=E[1];if(Array.isArray(C)&&!(C.length<1)){var H=C[0];if(H!="noop"&&H!="stop"&&H!="close")for(let Te=1;Te<C.length;Te++)C[Te]=""}}}}return At($)}catch{return y}}var we={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Fe={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ie;function Mt(){}T(Mt,ur),Mt.prototype.g=function(){return new XMLHttpRequest},Ie=new Mt;function tt(c){return encodeURIComponent(String(c))}function yt(c){var y=1;c=c.split(":");const E=[];for(;y>0&&c.length;)E.push(c.shift()),y--;return c.length&&E.push(c.join(":")),E}function Je(c,y,E,C){this.j=c,this.i=y,this.l=E,this.S=C||1,this.V=new wn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Lt}function Lt(){this.i=null,this.g="",this.h=!1}var Ue={},pt={};function kn(c,y,E){c.M=1,c.A=Kn(Ft(y)),c.u=E,c.R=!0,ni(c,null)}function ni(c,y){c.F=Date.now(),zr(c),c.B=Ft(c.A);var E=c.B,C=c.S;Array.isArray(C)||(C=[String(C)]),eo(E.i,"t",C),c.C=0,E=c.j.L,c.h=new Lt,c.g=nc(c.j,E?y:null,!c.u),c.P>0&&(c.O=new jt(m(c.Y,c,c.g),c.P)),y=c.V,E=c.g,C=c.ba;var H="readystatechange";Array.isArray(H)||(H&&(Dt[0]=H.toString()),H=Dt);for(let $=0;$<H.length;$++){const Te=he(E,H[$],C||y.handleEvent,!1,y.h||y);if(!Te)break;y.g[Te.key]=Te}y=c.J?O(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),zn(),vt(c.i,c.v,c.B,c.l,c.S,c.u)}Je.prototype.ba=function(c){c=c.target;const y=this.O;y&&si(c)==3?y.j():this.Y(c)},Je.prototype.Y=function(c){try{if(c==this.g)e:{const dt=si(this.g),An=this.g.ya(),Gt=this.g.ca();if(!(dt<3)&&(dt!=3||this.g&&(this.h.h||this.g.la()||Xn(this.g)))){this.K||dt!=4||An==7||(An==8||Gt<=0?zn(3):zn(2)),Br(this);var y=this.g.ca();this.X=y;var E=ll(this);if(this.o=y==200,F(this.i,this.v,this.B,this.l,this.S,dt,y),this.o){if(this.U&&!this.L){t:{if(this.g){var C,H=this.g;if((C=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(C)){var $=C;break t}}$=null}if(c=$)Z(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,qr(this,c);else{this.o=!1,this.m=3,Ct(12),dr(this),yr(this);break e}}if(this.R){c=!0;let pn;for(;!this.K&&this.C<E.length;)if(pn=Ja(this,E),pn==pt){dt==4&&(this.m=4,Ct(14),c=!1),Z(this.i,this.l,null,"[Incomplete Response]");break}else if(pn==Ue){this.m=4,Ct(15),Z(this.i,this.l,E,"[Invalid Chunk]"),c=!1;break}else Z(this.i,this.l,pn,null),qr(this,pn);if(Wa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dt!=4||E.length!=0||this.h.h||(this.m=1,Ct(16),c=!1),this.o=this.o&&c,!c)Z(this.i,this.l,E,"[Invalid Chunked Response]"),dr(this),yr(this);else if(E.length>0&&!this.W){this.W=!0;var Te=this.j;Te.g==this&&Te.aa&&!Te.P&&(Te.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),yl(Te),Te.P=!0,Ct(11))}}else Z(this.i,this.l,E,null),qr(this,E);dt==4&&dr(this),this.o&&!this.K&&(dt==4?Ju(this.j,this):(this.o=!1,zr(this)))}else zi(this.g),y==400&&E.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),dr(this),yr(this)}}}catch{}finally{}};function ll(c){if(!Wa(c))return c.g.la();const y=Xn(c.g);if(y==="")return"";let E="";const C=y.length,H=si(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return dr(c),yr(c),"";c.h.i=new h.TextDecoder}for(let $=0;$<C;$++)c.h.h=!0,E+=c.h.i.decode(y[$],{stream:!(H&&$==C-1)});return y.length=0,c.h.g+=E,c.C=0,c.h.g}function Wa(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Ja(c,y){var E=c.C,C=y.indexOf(`
`,E);return C==-1?pt:(E=Number(y.substring(E,C)),isNaN(E)?Ue:(C+=1,C+E>y.length?pt:(y=y.slice(C,C+E),c.C=C+E,y)))}Je.prototype.cancel=function(){this.K=!0,dr(this)};function zr(c){c.T=Date.now()+c.H,fs(c,c.H)}function fs(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Gn(m(c.aa,c),y)}function Br(c){c.D&&(h.clearTimeout(c.D),c.D=null)}Je.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(de(this.i,this.B),this.M!=2&&(zn(),Ct(17)),dr(this),this.m=2,yr(this)):fs(this,this.T-c)};function yr(c){c.j.I==0||c.K||Ju(c.j,c)}function dr(c){Br(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,Xe(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function qr(c,y){try{var E=c.j;if(E.I!=0&&(E.g==c||be(E.h,c))){if(!c.L&&be(E.h,c)&&E.I==3){try{var C=E.Ba.g.parse(y)}catch{C=null}if(Array.isArray(C)&&C.length==3){var H=C;if(H[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<c.F)so(E),bs(E);else break e;_a(E),Ct(18)}}else E.xa=H[1],0<E.xa-E.K&&H[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Gn(m(E.Va,E),6e3));ue(E.h)<=1&&E.ta&&(E.ta=void 0)}else bi(E,11)}else if((c.L||E.g==c)&&so(E),!I(y))for(H=E.Ba.g.parse(y),y=0;y<H.length;y++){let Gt=H[y];const pn=Gt[0];if(!(pn<=E.K))if(E.K=pn,Gt=Gt[1],E.I==2)if(Gt[0]=="c"){E.M=Gt[1],E.ba=Gt[2];const Kr=Gt[3];Kr!=null&&(E.ka=Kr,E.j.info("VER="+E.ka));const Ei=Gt[4];Ei!=null&&(E.za=Ei,E.j.info("SVER="+E.za));const ai=Gt[5];ai!=null&&typeof ai=="number"&&ai>0&&(C=1.5*ai,E.O=C,E.j.info("backChannelRequestTimeoutMs_="+C)),C=E;const oi=c.g;if(oi){const ba=oi.g?oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ba){var $=C.h;$.g||ba.indexOf("spdy")==-1&&ba.indexOf("quic")==-1&&ba.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(je($,$.h),$.h=null))}if(C.G){const ao=oi.g?oi.g.getResponseHeader("X-HTTP-Session-Id"):null;ao&&(C.wa=ao,Ot(C.J,C.G,ao))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-c.F,E.j.info("Handshake RTT: "+E.T+"ms")),C=E;var Te=c;if(C.na=tc(C,C.L?C.ba:null,C.W),Te.L){Qe(C.h,Te);var dt=Te,An=C.O;An&&(dt.H=An),dt.D&&(Br(dt),zr(dt)),C.g=Te}else $u(C);E.i.length>0&&_i(E)}else Gt[0]!="stop"&&Gt[0]!="close"||bi(E,7);else E.I==3&&(Gt[0]=="stop"||Gt[0]=="close"?Gt[0]=="stop"?bi(E,7):pl(E):Gt[0]!="noop"&&E.l&&E.l.qa(Gt),E.A=0)}}zn(4)}catch{}}var _n=class{constructor(c,y){this.g=c,this.map=y}};function fa(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function D(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ue(c){return c.h?1:c.g?c.g.size:0}function be(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function je(c,y){c.g?c.g.add(y):c.h=y}function Qe(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}fa.prototype.cancel=function(){if(this.i=lt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function lt(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const E of c.g.values())y=y.concat(E.G);return y}return w(c.i)}var Et=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pt(c,y){if(c){c=c.split("&");for(let E=0;E<c.length;E++){const C=c[E].indexOf("=");let H,$=null;C>=0?(H=c[E].substring(0,C),$=c[E].substring(C+1)):H=c[E],y(H,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Ut(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof Ut?(this.l=c.l,Ht(this,c.j),this.o=c.o,this.g=c.g,mn(this,c.u),this.h=c.h,Fr(this,Yu(c.i)),this.m=c.m):c&&(y=String(c).match(Et))?(this.l=!1,Ht(this,y[1]||"",!0),this.o=Dn(y[2]||""),this.g=Dn(y[3]||"",!0),mn(this,y[4]),this.h=Dn(y[5]||"",!0),Fr(this,y[6]||"",!0),this.m=Dn(y[7]||"")):(this.l=!1,this.i=new ps(null,this.l))}Ut.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(Pi(y,Za,!0),":");var E=this.g;return(E||y=="file")&&(c.push("//"),(y=this.o)&&c.push(Pi(y,Za,!0),"@"),c.push(tt(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&c.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&c.push("/"),c.push(Pi(E,E.charAt(0)=="/"?ul:Gu,!0))),(E=this.i.toString())&&c.push("?",E),(E=this.m)&&c.push("#",Pi(E,Ku)),c.join("")},Ut.prototype.resolve=function(c){const y=Ft(this);let E=!!c.j;E?Ht(y,c.j):E=!!c.o,E?y.o=c.o:E=!!c.g,E?y.g=c.g:E=c.u!=null;var C=c.h;if(E)mn(y,c.u);else if(E=!!c.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var H=y.h.lastIndexOf("/");H!=-1&&(C=y.h.slice(0,H+1)+C)}if(H=C,H==".."||H==".")C="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){C=H.lastIndexOf("/",0)==0,H=H.split("/");const $=[];for(let Te=0;Te<H.length;){const dt=H[Te++];dt=="."?C&&Te==H.length&&$.push(""):dt==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),C&&Te==H.length&&$.push("")):($.push(dt),C=!0)}C=$.join("/")}else C=H}return E?y.h=C:E=c.i.toString()!=="",E?Fr(y,Yu(c.i)):E=!!c.m,E&&(y.m=c.m),y};function Ft(c){return new Ut(c)}function Ht(c,y,E){c.j=E?Dn(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function mn(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function Fr(c,y,E){y instanceof ps?(c.i=y,to(c.i,c.l)):(E||(y=Pi(y,ms)),c.i=new ps(y,c.l))}function Ot(c,y,E){c.i.set(y,E)}function Kn(c){return Ot(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Dn(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Pi(c,y,E){return typeof c=="string"?(c=encodeURI(c).replace(y,vr),E&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function vr(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Za=/[#\/\?@]/g,Gu=/[#\?:]/g,ul=/[#\?]/g,ms=/[#\?@]/g,Ku=/#/g;function ps(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function _r(c){c.g||(c.g=new Map,c.h=0,c.i&&Pt(c.i,function(y,E){c.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}i=ps.prototype,i.add=function(c,y){_r(this),this.i=null,c=gs(this,c);let E=this.g.get(c);return E||this.g.set(c,E=[]),E.push(y),this.h+=1,this};function Qu(c,y){_r(c),y=gs(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function cl(c,y){return _r(c),y=gs(c,y),c.g.has(y)}i.forEach=function(c,y){_r(this),this.g.forEach(function(E,C){E.forEach(function(H){c.call(y,H,C,this)},this)},this)};function dl(c,y){_r(c);let E=[];if(typeof y=="string")cl(c,y)&&(E=E.concat(c.g.get(gs(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)E=E.concat(c[y]);return E}i.set=function(c,y){return _r(this),this.i=null,c=gs(this,c),cl(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},i.get=function(c,y){return c?(c=dl(this,c),c.length>0?String(c[0]):y):y};function eo(c,y,E){Qu(c,y),E.length>0&&(c.i=null,c.g.set(gs(c,y),w(E)),c.h+=E.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let C=0;C<y.length;C++){var E=y[C];const H=tt(E);E=dl(this,E);for(let $=0;$<E.length;$++){let Te=H;E[$]!==""&&(Te+="="+tt(E[$])),c.push(Te)}}return this.i=c.join("&")};function Yu(c){const y=new ps;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function gs(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function to(c,y){y&&!c.j&&(_r(c),c.i=null,c.g.forEach(function(E,C){const H=C.toLowerCase();C!=H&&(Qu(this,C),eo(this,H,E))},c)),c.j=y}function ri(c,y){const E=new qe;if(h.Image){const C=new Image;C.onload=v(Hr,E,"TestLoadImage: loaded",!0,y,C),C.onerror=v(Hr,E,"TestLoadImage: error",!1,y,C),C.onabort=v(Hr,E,"TestLoadImage: abort",!1,y,C),C.ontimeout=v(Hr,E,"TestLoadImage: timeout",!1,y,C),h.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=c}else y(!1)}function hl(c,y){const E=new qe,C=new AbortController,H=setTimeout(()=>{C.abort(),Hr(E,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:C.signal}).then($=>{clearTimeout(H),$.ok?Hr(E,"TestPingServer: ok",!0,y):Hr(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),Hr(E,"TestPingServer: error",!1,y)})}function Hr(c,y,E,C,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),C(E)}catch{}}function ys(){this.g=new xn}function gi(c){this.i=c.Sb||null,this.h=c.ab||!1}T(gi,ur),gi.prototype.g=function(){return new ma(this.i,this.h)};function ma(c,y){Ve.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(ma,Ve),i=ma.prototype,i.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,ii(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||h).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vs(this)),this.readyState=0},i.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ii(this)),this.g&&(this.readyState=3,ii(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;no(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function no(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}i.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?vs(this):ii(this),this.readyState==3&&no(this)}},i.Oa=function(c){this.g&&(this.response=this.responseText=c,vs(this))},i.Na=function(c){this.g&&(this.response=c,vs(this))},i.ga=function(){this.g&&vs(this)};function vs(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ii(c)}i.setRequestHeader=function(c,y){this.A.append(c,y)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,c.push(E[0]+": "+E[1]),E=y.next();return c.join(`\r
`)};function ii(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ma.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Gr(c){let y="";return pe(c,function(E,C){y+=C,y+=":",y+=E,y+=`\r
`}),y}function pa(c,y,E){e:{for(C in E){var C=!1;break e}C=!0}C||(E=Gr(E),typeof c=="string"?E!=null&&tt(E):Ot(c,y,E))}function en(c){Ve.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(en,Ve);var yi=/^https?$/i,fl=["POST","PUT"];i=en.prototype,i.Fa=function(c){this.H=c},i.ea=function(c,y,E,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ie.g(),this.g.onreadystatechange=S(m(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch($){ga(this,$);return}if(c=E||"",E=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var H in C)E.set(H,C[H]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const $ of C.keys())E.set($,C.get($));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(E.keys()).find($=>$.toLowerCase()=="content-type"),H=h.FormData&&c instanceof h.FormData,!(Array.prototype.indexOf.call(fl,y,void 0)>=0)||C||H||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,Te]of E)this.g.setRequestHeader($,Te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch($){ga(this,$)}};function ga(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,ml(c),Ui(c)}function ml(c){c.A||(c.A=!0,ke(c,"complete"),ke(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,ke(this,"complete"),ke(this,"abort"),Ui(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ui(this,!0)),en.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?ya(this):this.Xa())},i.Xa=function(){ya(this)};function ya(c){if(c.h&&typeof u<"u"){if(c.v&&si(c)==4)setTimeout(c.Ca.bind(c),0);else if(ke(c,"readystatechange"),si(c)==4){c.h=!1;try{const $=c.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var C;if(C=$===0){let Te=String(c.D).match(Et)[1]||null;!Te&&h.self&&h.self.location&&(Te=h.self.location.protocol.slice(0,-1)),C=!yi.test(Te?Te.toLowerCase():"")}E=C}if(E)ke(c,"complete"),ke(c,"success");else{c.o=6;try{var H=si(c)>2?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.ca()+"]",ml(c)}}finally{Ui(c)}}}}function Ui(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const E=c.g;c.g=null,y||ke(c,"ready");try{E.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function si(c){return c.g?c.g.readyState:0}i.ca=function(){try{return si(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Ur(y)}};function Xn(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function zi(c){const y={};c=(c.g&&si(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<c.length;C++){if(I(c[C]))continue;var E=yt(c[C]);const H=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const $=y[H]||[];y[H]=$,$.push(E)}Le(y,function(C){return C.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function vi(c,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[c]||y}function _s(c){this.za=0,this.i=[],this.j=new qe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=vi("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=vi("baseRetryDelayMs",5e3,c),this.Za=vi("retryDelaySeedMs",1e4,c),this.Ta=vi("forwardChannelMaxRetries",2,c),this.va=vi("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new fa(c&&c.concurrentRequestLimit),this.Ba=new ys,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=_s.prototype,i.ka=8,i.I=1,i.connect=function(c,y,E,C){Ct(0),this.W=c,this.H=y||{},E&&C!==void 0&&(this.H.OSID=E,this.H.OAID=C),this.F=this.X,this.J=tc(this,null,this.W),_i(this)};function pl(c){if(ro(c),c.I==3){var y=c.V++,E=Ft(c.J);if(Ot(E,"SID",c.M),Ot(E,"RID",y),Ot(E,"TYPE","terminate"),va(c,E),y=new Je(c,c.j,y),y.M=2,y.A=Kn(Ft(E)),E=!1,h.navigator&&h.navigator.sendBeacon)try{E=h.navigator.sendBeacon(y.A.toString(),"")}catch{}!E&&h.Image&&(new Image().src=y.A,E=!0),E||(y.g=nc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),zr(y)}ec(c)}function bs(c){c.g&&(yl(c),c.g.cancel(),c.g=null)}function ro(c){bs(c),c.v&&(h.clearTimeout(c.v),c.v=null),so(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&h.clearTimeout(c.m),c.m=null)}function _i(c){if(!D(c.h)&&!c.m){c.m=!0;var y=c.Ea;Ge||R(),Be||(Ge(),Be=!0),N.add(y,c),c.D=0}}function io(c,y){return ue(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Gn(m(c.Ea,c,y),Zu(c,c.D)),c.D++,!0)}i.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const H=new Je(this,this.j,c);let $=this.o;if(this.U&&($?($=O($),ee($,this.U)):$=this.U),this.u!==null||this.R||(H.J=$,$=null),this.S)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var C=this.i[E];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(y+=C,y>4096){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=Xu(this,H,y),E=Ft(this.J),Ot(E,"RID",c),Ot(E,"CVER",22),this.G&&Ot(E,"X-HTTP-Session-Id",this.G),va(this,E),$&&(this.R?y="headers="+tt(Gr($))+"&"+y:this.u&&pa(E,this.u,$)),je(this.h,H),this.Ra&&Ot(E,"TYPE","init"),this.S?(Ot(E,"$req",y),Ot(E,"SID","null"),H.U=!0,kn(H,E,null)):kn(H,E,y),this.I=2}}else this.I==3&&(c?gl(this,c):this.i.length==0||D(this.h)||gl(this))};function gl(c,y){var E;y?E=y.l:E=c.V++;const C=Ft(c.J);Ot(C,"SID",c.M),Ot(C,"RID",E),Ot(C,"AID",c.K),va(c,C),c.u&&c.o&&pa(C,c.u,c.o),E=new Je(c,c.j,E,c.D+1),c.u===null&&(E.J=c.o),y&&(c.i=y.G.concat(c.i)),y=Xu(c,E,1e3),E.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),je(c.h,E),kn(E,C,y)}function va(c,y){c.H&&pe(c.H,function(E,C){Ot(y,C,E)}),c.l&&pe({},function(E,C){Ot(y,C,E)})}function Xu(c,y,E){E=Math.min(c.i.length,E);const C=c.l?m(c.l.Ka,c.l,c):null;e:{var H=c.i;let dt=-1;for(;;){const An=["count="+E];dt==-1?E>0?(dt=H[0].g,An.push("ofs="+dt)):dt=0:An.push("ofs="+dt);let Gt=!0;for(let pn=0;pn<E;pn++){var $=H[pn].g;const Kr=H[pn].map;if($-=dt,$<0)dt=Math.max(0,H[pn].g-100),Gt=!1;else try{$="req"+$+"_"||"";try{var Te=Kr instanceof Map?Kr:Object.entries(Kr);for(const[Ei,ai]of Te){let oi=ai;g(ai)&&(oi=At(ai)),An.push($+Ei+"="+encodeURIComponent(oi))}}catch(Ei){throw An.push($+"type="+encodeURIComponent("_badmap")),Ei}}catch{C&&C(Kr)}}if(Gt){Te=An.join("&");break e}}Te=void 0}return c=c.i.splice(0,E),y.G=c,Te}function $u(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;Ge||R(),Be||(Ge(),Be=!0),N.add(y,c),c.A=0}}function _a(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Gn(m(c.Da,c),Zu(c,c.A)),c.A++,!0)}i.Da=function(){if(this.v=null,Wu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Gn(m(this.Wa,this),c)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),bs(this),Wu(this))};function yl(c){c.B!=null&&(h.clearTimeout(c.B),c.B=null)}function Wu(c){c.g=new Je(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=Ft(c.na);Ot(y,"RID","rpc"),Ot(y,"SID",c.M),Ot(y,"AID",c.K),Ot(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&Ot(y,"TO",c.ia),Ot(y,"TYPE","xmlhttp"),va(c,y),c.u&&c.o&&pa(y,c.u,c.o),c.O&&(c.g.H=c.O);var E=c.g;c=c.ba,E.M=1,E.A=Kn(Ft(y)),E.u=null,E.R=!0,ni(E,c)}i.Va=function(){this.C!=null&&(this.C=null,bs(this),_a(this),Ct(19))};function so(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function Ju(c,y){var E=null;if(c.g==y){so(c),yl(c),c.g=null;var C=2}else if(be(c.h,y))E=y.G,Qe(c.h,y),C=1;else return;if(c.I!=0){if(y.o)if(C==1){E=y.u?y.u.length:0,y=Date.now()-y.F;var H=c.D;C=rr(),ke(C,new an(C,E)),_i(c)}else $u(c);else if(H=y.m,H==3||H==0&&y.X>0||!(C==1&&io(c,y)||C==2&&_a(c)))switch(E&&E.length>0&&(y=c.h,y.i=y.i.concat(E)),H){case 1:bi(c,5);break;case 4:bi(c,10);break;case 3:bi(c,6);break;default:bi(c,2)}}}function Zu(c,y){let E=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(E*=2),E*y}function bi(c,y){if(c.j.info("Error code "+y),y==2){var E=m(c.bb,c),C=c.Ua;const H=!C;C=new Ut(C||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Ht(C,"https"),Kn(C),H?ri(C.toString(),E):hl(C.toString(),E)}else Ct(2);c.I=0,c.l&&c.l.pa(y),ec(c),ro(c)}i.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function ec(c){if(c.I=0,c.ja=[],c.l){const y=lt(c.h);(y.length!=0||c.i.length!=0)&&(j(c.ja,y),j(c.ja,c.i),c.h.i.length=0,w(c.i),c.i.length=0),c.l.oa()}}function tc(c,y,E){var C=E instanceof Ut?Ft(E):new Ut(E);if(C.g!="")y&&(C.g=y+"."+C.g),mn(C,C.u);else{var H=h.location;C=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;const $=new Ut(null);C&&Ht($,C),y&&($.g=y),H&&mn($,H),E&&($.h=E),C=$}return E=c.G,y=c.wa,E&&y&&Ot(C,E,y),Ot(C,"VER",c.ka),va(c,C),C}function nc(c,y,E){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new en(new gi({ab:E})):new en(c.ma),y.Fa(c.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function rc(){}i=rc.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Es(){}Es.prototype.g=function(c,y){return new hr(c,y)};function hr(c,y){Ve.call(this),this.g=new _s(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!I(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!I(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Bi(this)}T(hr,Ve),hr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},hr.prototype.close=function(){pl(this.g)},hr.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var E={};E.__data__=c,c=E}else this.v&&(E={},E.__data__=At(c),c=E);y.i.push(new _n(y.Ya++,c)),y.I==3&&_i(y)},hr.prototype.N=function(){this.g.l=null,delete this.j,pl(this.g),delete this.g,hr.Z.N.call(this)};function ic(c){Wt.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const E in y){c=E;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}T(ic,Wt);function sc(){Xt.call(this),this.status=1}T(sc,Xt);function Bi(c){this.g=c}T(Bi,rc),Bi.prototype.ra=function(){ke(this.g,"a")},Bi.prototype.qa=function(c){ke(this.g,new ic(c))},Bi.prototype.pa=function(c){ke(this.g,new sc)},Bi.prototype.oa=function(){ke(this.g,"b")},Es.prototype.createWebChannel=Es.prototype.g,hr.prototype.send=hr.prototype.o,hr.prototype.open=hr.prototype.m,hr.prototype.close=hr.prototype.close,zE=function(){return new Es},UE=function(){return rr()},PE=bt,Ym={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},we.NO_ERROR=0,we.TIMEOUT=8,we.HTTP_ERROR=6,Ed=we,Fe.COMPLETE="complete",LE=Fe,gr.EventType=vn,vn.OPEN="a",vn.CLOSE="b",vn.ERROR="c",vn.MESSAGE="d",Ve.prototype.listen=Ve.prototype.J,ou=gr,en.prototype.listenOnce=en.prototype.K,en.prototype.getLastError=en.prototype.Ha,en.prototype.getLastErrorCode=en.prototype.ya,en.prototype.getStatus=en.prototype.ca,en.prototype.getResponseJson=en.prototype.La,en.prototype.getResponseText=en.prototype.la,en.prototype.send=en.prototype.ea,en.prototype.setWithCredentials=en.prototype.Fa,jE=en}).apply(typeof cd<"u"?cd:typeof self<"u"?self:typeof window<"u"?window:{});const I_="@firebase/firestore",x_="4.9.2";class ar{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ar.UNAUTHENTICATED=new ar(null),ar.GOOGLE_CREDENTIALS=new ar("google-credentials-uid"),ar.FIRST_PARTY=new ar("first-party-uid"),ar.MOCK_USER=new ar("mock-user");let nl="12.3.0";const Ga=new bp("@firebase/firestore");function Lo(){return Ga.logLevel}function Oe(i,...e){if(Ga.logLevel<=xt.DEBUG){const n=e.map(kp);Ga.debug(`Firestore (${nl}): ${i}`,...n)}}function us(i,...e){if(Ga.logLevel<=xt.ERROR){const n=e.map(kp);Ga.error(`Firestore (${nl}): ${i}`,...n)}}function Yo(i,...e){if(Ga.logLevel<=xt.WARN){const n=e.map(kp);Ga.warn(`Firestore (${nl}): ${i}`,...n)}}function kp(i){if(typeof i=="string")return i;try{return(function(n){return JSON.stringify(n)})(i)}catch{return i}}function rt(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,BE(i,s,n)}function BE(i,e,n){let s=`FIRESTORE (${nl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw us(s),new Error(s)}function $t(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||BE(e,o,s)}function ct(i,e){return i}const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends ji{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class as{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class qE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class y2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ar.UNAUTHENTICATED)))}shutdown(){}}class v2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class _2{constructor(e){this.t=e,this.currentUser=ar.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){$t(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new as;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new as,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},g=p=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((p=>g(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new as)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?($t(typeof s.accessToken=="string",31837,{l:s}),new qE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $t(e===null||typeof e=="string",2055,{h:e}),new ar(e)}}class b2{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=ar.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class E2{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new b2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ar.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class N_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class T2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Lr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){$t(this.o===void 0,3512);const s=u=>{u.error!=null&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,Oe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new N_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?($t(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new N_(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function S2(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}class Dp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=S2(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Nt(i,e){return i<e?-1:i>e?1:0}function Xm(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),u=e.charAt(s);if(o!==u)return Nm(o)===Nm(u)?Nt(o,u):Nm(o)?1:-1}return Nt(i.length,e.length)}const w2=55296,A2=57343;function Nm(i){const e=i.charCodeAt(0);return e>=w2&&e<=A2}function Xo(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}const k_="__name__";class Ci{constructor(e,n,s){n===void 0?n=0:n>e.length&&rt(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&rt(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Ci.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ci?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=Ci.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Nt(e.length,n.length)}static compareSegments(e,n){const s=Ci.isNumericId(e),o=Ci.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Ci.extractNumericId(e).compare(Ci.extractNumericId(n)):Xm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zs.fromString(e.substring(4,e.length-2))}}class cn extends Ci{construct(e,n,s){return new cn(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new xe(ne.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new cn(n)}static emptyPath(){return new cn([])}}const C2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tr extends Ci{construct(e,n,s){return new tr(e,n,s)}static isValidIdentifier(e){return C2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===k_}static keyField(){return new tr([k_])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new xe(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let h=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new xe(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new xe(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else g==="`"?(h=!h,o++):g!=="."||h?(s+=g,o++):(u(),o++)}if(u(),h)throw new xe(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tr(n)}static emptyPath(){return new tr([])}}class We{constructor(e){this.path=e}static fromPath(e){return new We(cn.fromString(e))}static fromName(e){return new We(cn.fromString(e).popFirst(5))}static empty(){return new We(cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&cn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return cn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new We(new cn(e.slice()))}}function FE(i,e,n){if(!n)throw new xe(ne.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function R2(i,e,n,s){if(e===!0&&s===!0)throw new xe(ne.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function D_(i){if(!We.isDocumentKey(i))throw new xe(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function M_(i){if(We.isDocumentKey(i))throw new xe(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function HE(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function ih(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":rt(12329,{type:typeof i})}function mr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new xe(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ih(i);throw new xe(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function I2(i,e){if(e<=0)throw new xe(ne.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}function Un(i,e){const n={typeString:i};return e&&(n.value=e),n}function Vu(i,e){if(!HE(i))throw new xe(ne.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const h=i[s];if(o&&typeof h!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new xe(ne.INVALID_ARGUMENT,n);return!0}const O_=-62135596800,V_=1e6;class Yt{static now(){return Yt.fromMillis(Date.now())}static fromDate(e){return Yt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*V_);return new Yt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new xe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<O_)throw new xe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/V_}_compareTo(e){return this.seconds===e.seconds?Nt(this.nanoseconds,e.nanoseconds):Nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Yt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vu(e,Yt._jsonSchema))return new Yt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-O_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Yt._jsonSchemaVersion="firestore/timestamp/1.0",Yt._jsonSchema={type:Un("string",Yt._jsonSchemaVersion),seconds:Un("number"),nanoseconds:Un("number")};class at{static fromTimestamp(e){return new at(e)}static min(){return new at(new Yt(0,0))}static max(){return new at(new Yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Eu=-1;function x2(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=at.fromTimestamp(s===1e9?new Yt(n+1,0):new Yt(n,s));return new ra(o,We.empty(),e)}function N2(i){return new ra(i.readTime,i.key,Eu)}class ra{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ra(at.min(),We.empty(),Eu)}static max(){return new ra(at.max(),We.empty(),Eu)}}function k2(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=We.comparator(i.documentKey,e.documentKey),n!==0?n:Nt(i.largestBatchId,e.largestBatchId))}const D2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class M2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function rl(i){if(i.code!==ne.FAILED_PRECONDITION||i.message!==D2)throw i;Oe("LocalStore","Unexpectedly lost primary lease")}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&rt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new le(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof le?n:le.resolve(n)}catch(n){return le.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):le.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):le.reject(n)}static resolve(e){return new le(((n,s)=>{n(e)}))}static reject(e){return new le(((n,s)=>{s(e)}))}static waitFor(e){return new le(((n,s)=>{let o=0,u=0,h=!1;e.forEach((g=>{++o,g.next((()=>{++u,h&&u===o&&n()}),(p=>s(p)))})),h=!0,u===o&&n()}))}static or(e){let n=le.resolve(!1);for(const s of e)n=n.next((o=>o?le.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new le(((s,o)=>{const u=e.length,h=new Array(u);let g=0;for(let p=0;p<u;p++){const m=p;n(e[m]).next((v=>{h[m]=v,++g,g===u&&s(h)}),(v=>o(v)))}}))}static doWhile(e,n){return new le(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function O2(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function il(i){return i.name==="IndexedDbTransactionError"}class sh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}sh.ce=-1;const Mp=-1;function ah(i){return i==null}function jd(i){return i===0&&1/i==-1/0}function V2(i){return typeof i=="number"&&Number.isInteger(i)&&!jd(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const GE="";function j2(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=j_(e)),e=L2(i.get(n),e);return j_(e)}function L2(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case GE:n+="";break;default:n+=u}}return n}function j_(i){return i+GE+""}function L_(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function da(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function KE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class yn{constructor(e,n){this.comparator=e,this.root=n||er.EMPTY}insert(e,n){return new yn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,er.BLACK,null,null))}remove(e){return new yn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,er.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dd(this.root,e,this.comparator,!1)}getReverseIterator(){return new dd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dd(this.root,e,this.comparator,!0)}}class dd{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class er{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??er.RED,this.left=o??er.EMPTY,this.right=u??er.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new er(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return er.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return er.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,er.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,er.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw rt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw rt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw rt(27949);return e+(this.isRed()?0:1)}}er.EMPTY=null,er.RED=!0,er.BLACK=!1;er.EMPTY=new class{constructor(){this.size=0}get key(){throw rt(57766)}get value(){throw rt(16141)}get color(){throw rt(16727)}get left(){throw rt(29726)}get right(){throw rt(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new er(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hn{constructor(e){this.comparator=e,this.data=new yn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new P_(this.data.getIterator())}getIteratorFrom(e){return new P_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Hn)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Hn(this.comparator);return n.data=e,n}}class P_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Pr{constructor(e){this.fields=e,e.sort(tr.comparator)}static empty(){return new Pr([])}unionWith(e){let n=new Hn(tr.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Pr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class QE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class nr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new QE("Invalid base64 string: "+u):u}})(e);return new nr(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new nr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nr.EMPTY_BYTE_STRING=new nr("");const P2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ia(i){if($t(!!i,39018),typeof i=="string"){let e=0;const n=P2.exec(i);if($t(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:In(i.seconds),nanos:In(i.nanos)}}function In(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function sa(i){return typeof i=="string"?nr.fromBase64String(i):nr.fromUint8Array(i)}const YE="server_timestamp",XE="__type__",$E="__previous_value__",WE="__local_write_time__";function Op(i){return(i?.mapValue?.fields||{})[XE]?.stringValue===YE}function oh(i){const e=i.mapValue.fields[$E];return Op(e)?oh(e):e}function Tu(i){const e=ia(i.mapValue.fields[WE].timestampValue);return new Yt(e.seconds,e.nanos)}class U2{constructor(e,n,s,o,u,h,g,p,m,v){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=v}}const Ld="(default)";class Su{constructor(e,n){this.projectId=e,this.database=n||Ld}static empty(){return new Su("","")}get isDefaultDatabase(){return this.database===Ld}isEqual(e){return e instanceof Su&&e.projectId===this.projectId&&e.database===this.database}}const JE="__type__",z2="__max__",hd={mapValue:{}},ZE="__vector__",Pd="value";function aa(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Op(i)?4:q2(i)?9007199254740991:B2(i)?10:11:rt(28295,{value:i})}function Oi(i,e){if(i===e)return!0;const n=aa(i);if(n!==aa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Tu(i).isEqual(Tu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=ia(o.timestampValue),g=ia(u.timestampValue);return h.seconds===g.seconds&&h.nanos===g.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return sa(o.bytesValue).isEqual(sa(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return In(o.geoPointValue.latitude)===In(u.geoPointValue.latitude)&&In(o.geoPointValue.longitude)===In(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return In(o.integerValue)===In(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=In(o.doubleValue),g=In(u.doubleValue);return h===g?jd(h)===jd(g):isNaN(h)&&isNaN(g)}return!1})(i,e);case 9:return Xo(i.arrayValue.values||[],e.arrayValue.values||[],Oi);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},g=u.mapValue.fields||{};if(L_(h)!==L_(g))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(g[p]===void 0||!Oi(h[p],g[p])))return!1;return!0})(i,e);default:return rt(52216,{left:i})}}function wu(i,e){return(i.values||[]).find((n=>Oi(n,e)))!==void 0}function $o(i,e){if(i===e)return 0;const n=aa(i),s=aa(e);if(n!==s)return Nt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Nt(i.booleanValue,e.booleanValue);case 2:return(function(u,h){const g=In(u.integerValue||u.doubleValue),p=In(h.integerValue||h.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1})(i,e);case 3:return U_(i.timestampValue,e.timestampValue);case 4:return U_(Tu(i),Tu(e));case 5:return Xm(i.stringValue,e.stringValue);case 6:return(function(u,h){const g=sa(u),p=sa(h);return g.compareTo(p)})(i.bytesValue,e.bytesValue);case 7:return(function(u,h){const g=u.split("/"),p=h.split("/");for(let m=0;m<g.length&&m<p.length;m++){const v=Nt(g[m],p[m]);if(v!==0)return v}return Nt(g.length,p.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,h){const g=Nt(In(u.latitude),In(h.latitude));return g!==0?g:Nt(In(u.longitude),In(h.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return z_(i.arrayValue,e.arrayValue);case 10:return(function(u,h){const g=u.fields||{},p=h.fields||{},m=g[Pd]?.arrayValue,v=p[Pd]?.arrayValue,T=Nt(m?.values?.length||0,v?.values?.length||0);return T!==0?T:z_(m,v)})(i.mapValue,e.mapValue);case 11:return(function(u,h){if(u===hd.mapValue&&h===hd.mapValue)return 0;if(u===hd.mapValue)return 1;if(h===hd.mapValue)return-1;const g=u.fields||{},p=Object.keys(g),m=h.fields||{},v=Object.keys(m);p.sort(),v.sort();for(let T=0;T<p.length&&T<v.length;++T){const S=Xm(p[T],v[T]);if(S!==0)return S;const w=$o(g[p[T]],m[v[T]]);if(w!==0)return w}return Nt(p.length,v.length)})(i.mapValue,e.mapValue);default:throw rt(23264,{he:n})}}function U_(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Nt(i,e);const n=ia(i),s=ia(e),o=Nt(n.seconds,s.seconds);return o!==0?o:Nt(n.nanos,s.nanos)}function z_(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=$o(n[o],s[o]);if(u)return u}return Nt(n.length,s.length)}function Wo(i){return $m(i)}function $m(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=ia(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return sa(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return We.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=$m(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const h of s)u?u=!1:o+=",",o+=`${h}:${$m(n.fields[h])}`;return o+"}"})(i.mapValue):rt(61005,{value:i})}function Td(i){switch(aa(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=oh(i);return e?16+Td(e):16;case 5:return 2*i.stringValue.length;case 6:return sa(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Td(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return da(s.fields,((u,h)=>{o+=u.length+Td(h)})),o})(i.mapValue);default:throw rt(13486,{value:i})}}function B_(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Wm(i){return!!i&&"integerValue"in i}function Vp(i){return!!i&&"arrayValue"in i}function q_(i){return!!i&&"nullValue"in i}function F_(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Sd(i){return!!i&&"mapValue"in i}function B2(i){return(i?.mapValue?.fields||{})[JE]?.stringValue===ZE}function fu(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return da(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=fu(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fu(i.arrayValue.values[n]);return e}return{...i}}function q2(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===z2}class Rr{constructor(e){this.value=e}static empty(){return new Rr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Sd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fu(n)}setAll(e){let n=tr.emptyPath(),s={},o=[];e.forEach(((h,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=g.popLast()}h?s[g.lastSegment()]=fu(h):o.push(g.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());Sd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Oi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Sd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){da(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new Rr(fu(this.value))}}function eT(i){const e=[];return da(i.fields,((n,s)=>{const o=new tr([n]);if(Sd(s)){const u=eT(s.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new Pr(e)}class or{constructor(e,n,s,o,u,h,g){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=h,this.documentState=g}static newInvalidDocument(e){return new or(e,0,at.min(),at.min(),at.min(),Rr.empty(),0)}static newFoundDocument(e,n,s,o){return new or(e,1,n,at.min(),s,o,0)}static newNoDocument(e,n){return new or(e,2,n,at.min(),at.min(),Rr.empty(),0)}static newUnknownDocument(e,n){return new or(e,3,n,at.min(),at.min(),Rr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(at.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=at.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof or&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new or(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ud{constructor(e,n){this.position=e,this.inclusive=n}}function H_(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],h=i.position[o];if(u.field.isKeyField()?s=We.comparator(We.fromName(h.referenceValue),n.key):s=$o(h,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function G_(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Oi(i.position[n],e.position[n]))return!1;return!0}class Au{constructor(e,n="asc"){this.field=e,this.dir=n}}function F2(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class tT{}class Pn extends tT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new G2(e,n,s):n==="array-contains"?new Y2(e,s):n==="in"?new X2(e,s):n==="not-in"?new $2(e,s):n==="array-contains-any"?new W2(e,s):new Pn(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new K2(e,s):new Q2(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison($o(n,this.value)):n!==null&&aa(this.value)===aa(n)&&this.matchesComparison($o(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return rt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pi extends tT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new pi(e,n)}matches(e){return nT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function nT(i){return i.op==="and"}function rT(i){return H2(i)&&nT(i)}function H2(i){for(const e of i.filters)if(e instanceof pi)return!1;return!0}function Jm(i){if(i instanceof Pn)return i.field.canonicalString()+i.op.toString()+Wo(i.value);if(rT(i))return i.filters.map((e=>Jm(e))).join(",");{const e=i.filters.map((n=>Jm(n))).join(",");return`${i.op}(${e})`}}function iT(i,e){return i instanceof Pn?(function(s,o){return o instanceof Pn&&s.op===o.op&&s.field.isEqual(o.field)&&Oi(s.value,o.value)})(i,e):i instanceof pi?(function(s,o){return o instanceof pi&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,h,g)=>u&&iT(h,o.filters[g])),!0):!1})(i,e):void rt(19439)}function sT(i){return i instanceof Pn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Wo(n.value)}`})(i):i instanceof pi?(function(n){return n.op.toString()+" {"+n.getFilters().map(sT).join(" ,")+"}"})(i):"Filter"}class G2 extends Pn{constructor(e,n,s){super(e,n,s),this.key=We.fromName(s.referenceValue)}matches(e){const n=We.comparator(e.key,this.key);return this.matchesComparison(n)}}class K2 extends Pn{constructor(e,n){super(e,"in",n),this.keys=aT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Q2 extends Pn{constructor(e,n){super(e,"not-in",n),this.keys=aT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function aT(i,e){return(e.arrayValue?.values||[]).map((n=>We.fromName(n.referenceValue)))}class Y2 extends Pn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vp(n)&&wu(n.arrayValue,this.value)}}class X2 extends Pn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&wu(this.value.arrayValue,n)}}class $2 extends Pn{constructor(e,n){super(e,"not-in",n)}matches(e){if(wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!wu(this.value.arrayValue,n)}}class W2 extends Pn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>wu(this.value.arrayValue,s)))}}class J2{constructor(e,n=null,s=[],o=[],u=null,h=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=h,this.endAt=g,this.Te=null}}function K_(i,e=null,n=[],s=[],o=null,u=null,h=null){return new J2(i,e,n,s,o,u,h)}function jp(i){const e=ct(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Jm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),ah(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Wo(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Wo(s))).join(",")),e.Te=n}return e.Te}function Lp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!F2(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!iT(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!G_(i.startAt,e.startAt)&&G_(i.endAt,e.endAt)}function Zm(i){return We.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class sl{constructor(e,n=null,s=[],o=[],u=null,h="F",g=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=h,this.startAt=g,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Z2(i,e,n,s,o,u,h,g){return new sl(i,e,n,s,o,u,h,g)}function lh(i){return new sl(i)}function Q_(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function oT(i){return i.collectionGroup!==null}function mu(i){const e=ct(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let g=new Hn(tr.comparator);return h.filters.forEach((p=>{p.getFlattenedFilters().forEach((m=>{m.isInequality()&&(g=g.add(m.field))}))})),g})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Au(u,s))})),n.has(tr.keyField().canonicalString())||e.Ie.push(new Au(tr.keyField(),s))}return e.Ie}function Ni(i){const e=ct(i);return e.Ee||(e.Ee=eI(e,mu(i))),e.Ee}function eI(i,e){if(i.limitType==="F")return K_(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Au(o.field,u)}));const n=i.endAt?new Ud(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Ud(i.startAt.position,i.startAt.inclusive):null;return K_(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function ep(i,e){const n=i.filters.concat([e]);return new sl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function zd(i,e,n){return new sl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function uh(i,e){return Lp(Ni(i),Ni(e))&&i.limitType===e.limitType}function lT(i){return`${jp(Ni(i))}|lt:${i.limitType}`}function Po(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>sT(o))).join(", ")}]`),ah(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>Wo(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>Wo(o))).join(",")),`Target(${s})`})(Ni(i))}; limitType=${i.limitType})`}function ch(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):We.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of mu(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(h,g,p){const m=H_(h,g,p);return h.inclusive?m<=0:m<0})(s.startAt,mu(s),o)||s.endAt&&!(function(h,g,p){const m=H_(h,g,p);return h.inclusive?m>=0:m>0})(s.endAt,mu(s),o))})(i,e)}function tI(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function uT(i){return(e,n)=>{let s=!1;for(const o of mu(i)){const u=nI(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function nI(i,e,n){const s=i.field.isKeyField()?We.comparator(e.key,n.key):(function(u,h,g){const p=h.data.field(u),m=g.data.field(u);return p!==null&&m!==null?$o(p,m):rt(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return rt(19790,{direction:i.dir})}}class Xa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){da(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return KE(this.inner)}size(){return this.innerSize}}const rI=new yn(We.comparator);function cs(){return rI}const cT=new yn(We.comparator);function lu(...i){let e=cT;for(const n of i)e=e.insert(n.key,n);return e}function dT(i){let e=cT;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function La(){return pu()}function hT(){return pu()}function pu(){return new Xa((i=>i.toString()),((i,e)=>i.isEqual(e)))}const iI=new yn(We.comparator),sI=new Hn(We.comparator);function kt(...i){let e=sI;for(const n of i)e=e.add(n);return e}const aI=new Hn(Nt);function oI(){return aI}function Pp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jd(e)?"-0":e}}function fT(i){return{integerValue:""+i}}function lI(i,e){return V2(e)?fT(e):Pp(i,e)}class dh{constructor(){this._=void 0}}function uI(i,e,n){return i instanceof Cu?(function(o,u){const h={fields:{[XE]:{stringValue:YE},[WE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Op(u)&&(u=oh(u)),u&&(h.fields[$E]=u),{mapValue:h}})(n,e):i instanceof Ru?pT(i,e):i instanceof Iu?gT(i,e):(function(o,u){const h=mT(o,u),g=Y_(h)+Y_(o.Ae);return Wm(h)&&Wm(o.Ae)?fT(g):Pp(o.serializer,g)})(i,e)}function cI(i,e,n){return i instanceof Ru?pT(i,e):i instanceof Iu?gT(i,e):n}function mT(i,e){return i instanceof Bd?(function(s){return Wm(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class Cu extends dh{}class Ru extends dh{constructor(e){super(),this.elements=e}}function pT(i,e){const n=yT(e);for(const s of i.elements)n.some((o=>Oi(o,s)))||n.push(s);return{arrayValue:{values:n}}}class Iu extends dh{constructor(e){super(),this.elements=e}}function gT(i,e){let n=yT(e);for(const s of i.elements)n=n.filter((o=>!Oi(o,s)));return{arrayValue:{values:n}}}class Bd extends dh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Y_(i){return In(i.integerValue||i.doubleValue)}function yT(i){return Vp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class dI{constructor(e,n){this.field=e,this.transform=n}}function hI(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof Ru&&o instanceof Ru||s instanceof Iu&&o instanceof Iu?Xo(s.elements,o.elements,Oi):s instanceof Bd&&o instanceof Bd?Oi(s.Ae,o.Ae):s instanceof Cu&&o instanceof Cu})(i.transform,e.transform)}class fI{constructor(e,n){this.version=e,this.transformResults=n}}class pr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pr}static exists(e){return new pr(void 0,e)}static updateTime(e){return new pr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wd(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class hh{}function vT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new fh(i.key,pr.none()):new ju(i.key,i.data,pr.none());{const n=i.data,s=Rr.empty();let o=new Hn(tr.comparator);for(let u of e.fields)if(!o.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?s.delete(u):s.set(u,h),o=o.add(u)}return new ha(i.key,s,new Pr(o.toArray()),pr.none())}}function mI(i,e,n){i instanceof ju?(function(o,u,h){const g=o.value.clone(),p=$_(o.fieldTransforms,u,h.transformResults);g.setAll(p),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(i,e,n):i instanceof ha?(function(o,u,h){if(!wd(o.precondition,u))return void u.convertToUnknownDocument(h.version);const g=$_(o.fieldTransforms,u,h.transformResults),p=u.data;p.setAll(_T(o)),p.setAll(g),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(i,e,n):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function gu(i,e,n,s){return i instanceof ju?(function(u,h,g,p){if(!wd(u.precondition,h))return g;const m=u.value.clone(),v=W_(u.fieldTransforms,p,h);return m.setAll(v),h.convertToFoundDocument(h.version,m).setHasLocalMutations(),null})(i,e,n,s):i instanceof ha?(function(u,h,g,p){if(!wd(u.precondition,h))return g;const m=W_(u.fieldTransforms,p,h),v=h.data;return v.setAll(_T(u)),v.setAll(m),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(i,e,n,s):(function(u,h,g){return wd(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):g})(i,e,n)}function pI(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=mT(s.transform,o||null);u!=null&&(n===null&&(n=Rr.empty()),n.set(s.field,u))}return n||null}function X_(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Xo(s,o,((u,h)=>hI(u,h)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class ju extends hh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ha extends hh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function _T(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function $_(i,e,n){const s=new Map;$t(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const u=i[o],h=u.transform,g=e.data.field(u.field);s.set(u.field,cI(h,g,n[o]))}return s}function W_(i,e,n){const s=new Map;for(const o of i){const u=o.transform,h=n.data.field(o.field);s.set(o.field,uI(u,h,e))}return s}class fh extends hh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gI extends hh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class yI{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&mI(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=gu(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=gu(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=hT();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let g=this.applyToLocalView(h,u.mutatedFields);g=n.has(o.key)?null:g;const p=vT(h,g);p!==null&&s.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(at.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),kt())}isEqual(e){return this.batchId===e.batchId&&Xo(this.mutations,e.mutations,((n,s)=>X_(n,s)))&&Xo(this.baseMutations,e.baseMutations,((n,s)=>X_(n,s)))}}class Up{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){$t(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return iI})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,s[h].version);return new Up(e,n,s,o)}}class vI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class _I{constructor(e,n){this.count=e,this.unchangedNames=n}}var Ln,zt;function bI(i){switch(i){case ne.OK:return rt(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return rt(15467,{code:i})}}function bT(i){if(i===void 0)return us("GRPC error has no .code"),ne.UNKNOWN;switch(i){case Ln.OK:return ne.OK;case Ln.CANCELLED:return ne.CANCELLED;case Ln.UNKNOWN:return ne.UNKNOWN;case Ln.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Ln.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Ln.INTERNAL:return ne.INTERNAL;case Ln.UNAVAILABLE:return ne.UNAVAILABLE;case Ln.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Ln.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Ln.NOT_FOUND:return ne.NOT_FOUND;case Ln.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Ln.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Ln.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Ln.ABORTED:return ne.ABORTED;case Ln.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Ln.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Ln.DATA_LOSS:return ne.DATA_LOSS;default:return rt(39323,{code:i})}}(zt=Ln||(Ln={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";function EI(){return new TextEncoder}const TI=new Zs([4294967295,4294967295],0);function J_(i){const e=EI().encode(i),n=new VE;return n.update(e),new Uint8Array(n.digest())}function Z_(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Zs([n,s],0),new Zs([o,u],0)]}class zp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new uu(`Invalid padding: ${n}`);if(s<0)throw new uu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new uu(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new uu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Zs.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(Zs.fromNumber(s)));return o.compare(TI)===1&&(o=new Zs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=J_(e),[s,o]=Z_(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,o,u);if(!this.we(h))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new zp(u,o,n);return s.forEach((g=>h.insert(g))),h}insert(e){if(this.ge===0)return;const n=J_(e),[s,o]=Z_(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,o,u);this.Se(h)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class uu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class mh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Lu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new mh(at.min(),o,new yn(Nt),cs(),kt())}}class Lu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Lu(s,n,kt(),kt(),kt())}}class Ad{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class ET{constructor(e,n){this.targetId=e,this.Ce=n}}class TT{constructor(e,n,s=nr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class eb{constructor(){this.ve=0,this.Fe=tb(),this.Me=nr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=kt(),n=kt(),s=kt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:rt(38017,{changeType:u})}})),new Lu(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=tb()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,$t(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class SI{constructor(e){this.Ge=e,this.ze=new Map,this.je=cs(),this.Je=fd(),this.He=fd(),this.Ye=new yn(Nt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:rt(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Zm(u))if(s===0){const h=new We(u.path);this.et(n,h,or.newNoDocument(h,at.min()))}else $t(s===1,20013,{expectedCount:s});else{const h=this._t(n);if(h!==s){const g=this.ut(e),p=g?this.ct(g,e,h):1;if(p!==0){this.it(n);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,m)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let h,g;try{h=sa(s).toUint8Array()}catch(p){if(p instanceof QE)return Yo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new zp(h,o,u)}catch(p){return Yo(p instanceof uu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.ge===0?null:g}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const h=this.Ge.ht(),g=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,h)=>{const g=this.ot(h);if(g){if(u.current&&Zm(g.target)){const p=new We(g.target.path);this.It(p).has(h)||this.Et(h,p)||this.et(h,p,or.newNoDocument(p,e))}u.Be&&(n.set(h,u.ke()),u.qe())}}));let s=kt();this.He.forEach(((u,h)=>{let g=!0;h.forEachWhile((p=>{const m=this.ot(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(s=s.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const o=new mh(e,n,this.Ye,this.je,s);return this.je=cs(),this.Je=fd(),this.He=fd(),this.Ye=new yn(Nt),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new eb,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Hn(Nt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Hn(Nt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Oe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new eb),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function fd(){return new yn(We.comparator)}function tb(){return new yn(We.comparator)}const wI={asc:"ASCENDING",desc:"DESCENDING"},AI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CI={and:"AND",or:"OR"};class RI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function tp(i,e){return i.useProto3Json||ah(e)?e:{value:e}}function qd(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ST(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function II(i,e){return qd(i,e.toTimestamp())}function ki(i){return $t(!!i,49232),at.fromTimestamp((function(n){const s=ia(n);return new Yt(s.seconds,s.nanos)})(i))}function Bp(i,e){return np(i,e).canonicalString()}function np(i,e){const n=(function(o){return new cn(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function wT(i){const e=cn.fromString(i);return $t(xT(e),10190,{key:e.toString()}),e}function rp(i,e){return Bp(i.databaseId,e.path)}function km(i,e){const n=wT(e);if(n.get(1)!==i.databaseId.projectId)throw new xe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new xe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new We(CT(n))}function AT(i,e){return Bp(i.databaseId,e)}function xI(i){const e=wT(i);return e.length===4?cn.emptyPath():CT(e)}function ip(i){return new cn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function CT(i){return $t(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function nb(i,e,n){return{name:rp(i,e),fields:n.value.mapValue.fields}}function NI(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:rt(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(m,v){return m.useProto3Json?($t(v===void 0||typeof v=="string",58123),nr.fromBase64String(v||"")):($t(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),nr.fromUint8Array(v||new Uint8Array))})(i,e.targetChange.resumeToken),h=e.targetChange.cause,g=h&&(function(m){const v=m.code===void 0?ne.UNKNOWN:bT(m.code);return new xe(v,m.message||"")})(h);n=new TT(s,o,u,g||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=km(i,s.document.name),u=ki(s.document.updateTime),h=s.document.createTime?ki(s.document.createTime):at.min(),g=new Rr({mapValue:{fields:s.document.fields}}),p=or.newFoundDocument(o,u,h,g),m=s.targetIds||[],v=s.removedTargetIds||[];n=new Ad(m,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=km(i,s.document),u=s.readTime?ki(s.readTime):at.min(),h=or.newNoDocument(o,u),g=s.removedTargetIds||[];n=new Ad([],g,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=km(i,s.document),u=s.removedTargetIds||[];n=new Ad([],u,o,null)}else{if(!("filter"in e))return rt(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,h=new _I(o,u),g=s.targetId;n=new ET(g,h)}}return n}function kI(i,e){let n;if(e instanceof ju)n={update:nb(i,e.key,e.value)};else if(e instanceof fh)n={delete:rp(i,e.key)};else if(e instanceof ha)n={update:nb(i,e.key,e.data),updateMask:zI(e.fieldMask)};else{if(!(e instanceof gI))return rt(16599,{Vt:e.type});n={verify:rp(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,h){const g=h.transform;if(g instanceof Cu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Ru)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Iu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Bd)return{fieldPath:h.field.canonicalString(),increment:g.Ae};throw rt(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:II(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:rt(27497)})(i,e.precondition)),n}function DI(i,e){return i&&i.length>0?($t(e!==void 0,14353),i.map((n=>(function(o,u){let h=o.updateTime?ki(o.updateTime):ki(u);return h.isEqual(at.min())&&(h=ki(u)),new fI(h,o.transformResults||[])})(n,e)))):[]}function MI(i,e){return{documents:[AT(i,e.path)]}}function OI(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=AT(i,o);const u=(function(m){if(m.length!==0)return IT(pi.create(m,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const h=(function(m){if(m.length!==0)return m.map((v=>(function(S){return{field:Uo(S.field),direction:LI(S.dir)}})(v)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const g=tp(i,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:n,parent:o}}function VI(i){let e=xI(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){$t(s===1,65062);const v=n.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let u=[];n.where&&(u=(function(T){const S=RT(T);return S instanceof pi&&rT(S)?S.getFilters():[S]})(n.where));let h=[];n.orderBy&&(h=(function(T){return T.map((S=>(function(j){return new Au(zo(j.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(S)))})(n.orderBy));let g=null;n.limit&&(g=(function(T){let S;return S=typeof T=="object"?T.value:T,ah(S)?null:S})(n.limit));let p=null;n.startAt&&(p=(function(T){const S=!!T.before,w=T.values||[];return new Ud(w,S)})(n.startAt));let m=null;return n.endAt&&(m=(function(T){const S=!T.before,w=T.values||[];return new Ud(w,S)})(n.endAt)),Z2(e,o,h,u,g,"F",p,m)}function jI(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return rt(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function RT(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=zo(n.unaryFilter.field);return Pn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=zo(n.unaryFilter.field);return Pn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=zo(n.unaryFilter.field);return Pn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=zo(n.unaryFilter.field);return Pn.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return rt(61313);default:return rt(60726)}})(i):i.fieldFilter!==void 0?(function(n){return Pn.create(zo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return rt(58110);default:return rt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return pi.create(n.compositeFilter.filters.map((s=>RT(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return rt(1026)}})(n.compositeFilter.op))})(i):rt(30097,{filter:i})}function LI(i){return wI[i]}function PI(i){return AI[i]}function UI(i){return CI[i]}function Uo(i){return{fieldPath:i.canonicalString()}}function zo(i){return tr.fromServerFormat(i.fieldPath)}function IT(i){return i instanceof Pn?(function(n){if(n.op==="=="){if(F_(n.value))return{unaryFilter:{field:Uo(n.field),op:"IS_NAN"}};if(q_(n.value))return{unaryFilter:{field:Uo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(F_(n.value))return{unaryFilter:{field:Uo(n.field),op:"IS_NOT_NAN"}};if(q_(n.value))return{unaryFilter:{field:Uo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uo(n.field),op:PI(n.op),value:n.value}}})(i):i instanceof pi?(function(n){const s=n.getFilters().map((o=>IT(o)));return s.length===1?s[0]:{compositeFilter:{op:UI(n.op),filters:s}}})(i):rt(54877,{filter:i})}function zI(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function xT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class Xs{constructor(e,n,s,o,u=at.min(),h=at.min(),g=nr.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(e){return new Xs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class BI{constructor(e){this.yt=e}}function qI(i){const e=VI({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?zd(e,e.limit,"L"):e}class FI{constructor(){this.Cn=new HI}addToCollectionParentIndex(e,n){return this.Cn.add(n),le.resolve()}getCollectionParents(e,n){return le.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return le.resolve()}deleteFieldIndex(e,n){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,n){return le.resolve()}getDocumentsMatchingTarget(e,n){return le.resolve(null)}getIndexType(e,n){return le.resolve(0)}getFieldIndexes(e,n){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,n){return le.resolve(ra.min())}getMinOffsetFromCollectionGroup(e,n){return le.resolve(ra.min())}updateCollectionGroup(e,n,s){return le.resolve()}updateIndexEntries(e,n){return le.resolve()}}class HI{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Hn(cn.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Hn(cn.comparator)).toArray()}}const rb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},NT=41943040;class Cr{static withCacheSize(e){return new Cr(e,Cr.DEFAULT_COLLECTION_PERCENTILE,Cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Cr.DEFAULT_COLLECTION_PERCENTILE=10,Cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cr.DEFAULT=new Cr(NT,Cr.DEFAULT_COLLECTION_PERCENTILE,Cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cr.DISABLED=new Cr(-1,0,0);class Jo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Jo(0)}static cr(){return new Jo(-1)}}const ib="LruGarbageCollector",GI=1048576;function sb([i,e],[n,s]){const o=Nt(i,n);return o===0?Nt(e,s):o}class KI{constructor(e){this.Ir=e,this.buffer=new Hn(sb),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();sb(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class QI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Oe(ib,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){il(n)?Oe(ib,"Ignoring IndexedDB error during garbage collection: ",n):await rl(n)}await this.Vr(3e5)}))}}class YI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return le.resolve(sh.ce);const s=new KI(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(rb)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rb):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,h,g,p,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,g=Date.now(),this.removeTargets(e,s,n)))).next((T=>(u=T,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(m=Date.now(),Lo()<=xt.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-v}ms
	Determined least recently used ${o} in `+(g-h)+`ms
	Removed ${u} targets in `+(p-g)+`ms
	Removed ${T} documents in `+(m-p)+`ms
Total Duration: ${m-v}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function XI(i,e){return new YI(i,e)}class $I{constructor(){this.changes=new Xa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,or.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?le.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class WI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class JI{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&gu(s.mutation,o,Pr.empty(),Yt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,kt()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=kt()){const o=La();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let h=lu();return u.forEach(((g,p)=>{h=h.insert(g,p.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const s=La();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,kt())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,g)=>{n.set(h,g)}))}))}computeViews(e,n,s,o){let u=cs();const h=pu(),g=(function(){return pu()})();return n.forEach(((p,m)=>{const v=s.get(m.key);o.has(m.key)&&(v===void 0||v.mutation instanceof ha)?u=u.insert(m.key,m):v!==void 0?(h.set(m.key,v.mutation.getFieldMask()),gu(v.mutation,m,v.mutation.getFieldMask(),Yt.now())):h.set(m.key,Pr.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((m,v)=>h.set(m,v))),n.forEach(((m,v)=>g.set(m,new WI(v,h.get(m)??null)))),g)))}recalculateAndSaveOverlays(e,n){const s=pu();let o=new yn(((h,g)=>h-g)),u=kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const g of h)g.keys().forEach((p=>{const m=n.get(p);if(m===null)return;let v=s.get(p)||Pr.empty();v=g.applyToLocalView(m,v),s.set(p,v);const T=(o.get(g.batchId)||kt()).add(p);o=o.insert(g.batchId,T)}))})).next((()=>{const h=[],g=o.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),m=p.key,v=p.value,T=hT();v.forEach((S=>{if(!u.has(S)){const w=vT(n.get(S),s.get(S));w!==null&&T.set(S,w),u=u.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(e,m,T))}return le.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(h){return We.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):oT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):le.resolve(La());let g=Eu,p=u;return h.next((m=>le.forEach(m,((v,T)=>(g<T.largestBatchId&&(g=T.largestBatchId),u.get(v)?le.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{p=p.insert(v,S)}))))).next((()=>this.populateOverlays(e,m,u))).next((()=>this.computeViews(e,p,m,kt()))).next((v=>({batchId:g,changes:dT(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new We(n)).next((s=>{let o=lu();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let h=lu();return this.indexManager.getCollectionParents(e,u).next((g=>le.forEach(g,(p=>{const m=(function(T,S){return new sl(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,m,s,o).next((v=>{v.forEach(((T,S)=>{h=h.insert(T,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((h=>{u.forEach(((p,m)=>{const v=m.getKey();h.get(v)===null&&(h=h.insert(v,or.newInvalidDocument(v)))}));let g=lu();return h.forEach(((p,m)=>{const v=u.get(p);v!==void 0&&gu(v.mutation,m,Pr.empty(),Yt.now()),ch(n,m)&&(g=g.insert(p,m))})),g}))}}class ZI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return le.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:ki(o.createTime)}})(n)),le.resolve()}getNamedQuery(e,n){return le.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:qI(o.bundledQuery),readTime:ki(o.readTime)}})(n)),le.resolve()}}class ex{constructor(){this.overlays=new yn(We.comparator),this.qr=new Map}getOverlay(e,n){return le.resolve(this.overlays.get(n))}getOverlays(e,n){const s=La();return le.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),le.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),le.resolve()}getOverlaysForCollection(e,n,s){const o=La(),u=n.length+1,h=new We(n.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const p=g.getNext().value,m=p.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return le.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new yn(((m,v)=>m-v));const h=this.overlays.getIterator();for(;h.hasNext();){const m=h.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>s){let v=u.get(m.largestBatchId);v===null&&(v=La(),u=u.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const g=La(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((m,v)=>g.set(m,v))),!(g.size()>=o)););return le.resolve(g)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new vI(n,s));let u=this.qr.get(n);u===void 0&&(u=kt(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}class tx{constructor(){this.sessionToken=nr.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,le.resolve()}}class qp{constructor(){this.Qr=new Hn(Yn.$r),this.Ur=new Hn(Yn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Yn(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Yn(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new We(new cn([])),s=new Yn(n,e),o=new Yn(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),u.push(h.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new We(new cn([])),s=new Yn(n,e),o=new Yn(n,e+1);let u=kt();return this.Ur.forEachInRange([s,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const n=new Yn(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Yn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return We.comparator(e.key,n.key)||Nt(e.Yr,n.Yr)}static Kr(e,n){return Nt(e.Yr,n.Yr)||We.comparator(e.key,n.key)}}class nx{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Hn(Yn.$r)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new yI(u,n,s,o);this.mutationQueue.push(h);for(const g of o)this.Zr=this.Zr.add(new Yn(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return le.resolve(h)}lookupMutationBatch(e,n){return le.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return le.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?Mp:this.tr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Yn(n,0),o=new Yn(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(h=>{const g=this.Xr(h.Yr);u.push(g)})),le.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Hn(Nt);return n.forEach((o=>{const u=new Yn(o,0),h=new Yn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,h],(g=>{s=s.add(g.Yr)}))})),le.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;We.isDocumentKey(u)||(u=u.child(""));const h=new Yn(new We(u),0);let g=new Hn(Nt);return this.Zr.forEachWhile((p=>{const m=p.key.path;return!!s.isPrefixOf(m)&&(m.length===o&&(g=g.add(p.Yr)),!0)}),h),le.resolve(this.ti(g))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){$t(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return le.forEach(n.mutations,(o=>{const u=new Yn(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Yn(n,0),o=this.Zr.firstAfterOrEqual(s);return le.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class rx{constructor(e){this.ri=e,this.docs=(function(){return new yn(We.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,h=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return le.resolve(s?s.document.mutableCopy():or.newInvalidDocument(n))}getEntries(e,n){let s=cs();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():or.newInvalidDocument(o))})),le.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=cs();const h=n.path,g=new We(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:m,value:{document:v}}=p.getNext();if(!h.isPrefixOf(m.path))break;m.path.length>h.length+1||k2(N2(v),s)<=0||(o.has(v.key)||ch(n,v))&&(u=u.insert(v.key,v.mutableCopy()))}return le.resolve(u)}getAllFromCollectionGroup(e,n,s,o){rt(9500)}ii(e,n){return le.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new ix(this)}getSize(e){return le.resolve(this.size)}}class ix extends $I{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),le.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class sx{constructor(e){this.persistence=e,this.si=new Xa((n=>jp(n)),Lp),this.lastRemoteSnapshotVersion=at.min(),this.highestTargetId=0,this.oi=0,this._i=new qp,this.targetCount=0,this.ai=Jo.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),le.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Jo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,le.resolve()}updateTargetData(e,n){return this.Pr(n),le.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((h,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.si.delete(h),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),le.waitFor(u).next((()=>o))}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return le.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),le.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),le.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),le.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return le.resolve(s)}containsKey(e,n){return le.resolve(this._i.containsKey(n))}}class kT{constructor(e,n){this.ui={},this.overlays={},this.ci=new sh(0),this.li=!1,this.li=!0,this.hi=new tx,this.referenceDelegate=e(this),this.Pi=new sx(this),this.indexManager=new FI,this.remoteDocumentCache=(function(o){return new rx(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new BI(n),this.Ii=new ZI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ex,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new nx(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){Oe("MemoryPersistence","Starting transaction:",e);const o=new ax(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return le.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class ax extends M2{constructor(e){super(),this.currentSequenceNumber=e}}class Fp{constructor(e){this.persistence=e,this.Ri=new qp,this.Vi=null}static mi(e){return new Fp(e)}get fi(){if(this.Vi)return this.Vi;throw rt(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),le.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),le.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),le.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.fi,(s=>{const o=We.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,at.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return le.or([()=>le.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Fd{constructor(e,n){this.persistence=e,this.pi=new Xa((s=>j2(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=XI(this,n)}static mi(e,n){return new Fd(e,n)}Ei(){}di(e){return le.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return le.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?le.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,n).next((g=>{g||(s++,u.removeEntry(h,at.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),le.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),le.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),le.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Td(e.data.value)),n}br(e,n,s){return le.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return le.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Hp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=kt(),o=kt();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Hp(e,n.fromCache,s,o)}}class ox{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class lx{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Dw()?8:O2(lr())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new ox;return this.Ss(e,n,h).next((g=>{if(u.result=g,this.Vs)return this.bs(e,n,h,g.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(Lo()<=xt.DEBUG&&Oe("QueryEngine","SDK will not create cache indexes for query:",Po(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),le.resolve()):(Lo()<=xt.DEBUG&&Oe("QueryEngine","Query:",Po(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Lo()<=xt.DEBUG&&Oe("QueryEngine","The SDK decides to create cache indexes for query:",Po(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ni(n))):le.resolve())}ys(e,n){if(Q_(n))return le.resolve(null);let s=Ni(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=zd(n,null,"F"),s=Ni(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const h=kt(...u);return this.ps.getDocuments(e,h).next((g=>this.indexManager.getMinOffset(e,s).next((p=>{const m=this.Ds(n,g);return this.Cs(n,m,h,p.readTime)?this.ys(e,zd(n,null,"F")):this.vs(e,m,n,p)}))))})))))}ws(e,n,s,o){return Q_(n)||o.isEqual(at.min())?le.resolve(null):this.ps.getDocuments(e,s).next((u=>{const h=this.Ds(n,u);return this.Cs(n,h,s,o)?le.resolve(null):(Lo()<=xt.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Po(n)),this.vs(e,h,n,x2(o,Eu)).next((g=>g)))}))}Ds(e,n){let s=new Hn(uT(e));return n.forEach(((o,u)=>{ch(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return Lo()<=xt.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",Po(n)),this.ps.getDocumentsMatchingQuery(e,n,ra.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}const Gp="LocalStore",ux=3e8;class cx{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new yn(Nt),this.xs=new Xa((u=>jp(u)),Lp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function dx(i,e,n,s){return new cx(i,e,n,s)}async function DT(i,e){const n=ct(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const h=[],g=[];let p=kt();for(const m of o){h.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}for(const m of u){g.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}return n.localDocuments.getDocuments(s,p).next((m=>({Ls:m,removedBatchIds:h,addedBatchIds:g})))}))}))}function hx(i,e){const n=ct(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,p,m,v){const T=m.batch,S=T.keys();let w=le.resolve();return S.forEach((j=>{w=w.next((()=>v.getEntry(p,j))).next((q=>{const B=m.docVersions.get(j);$t(B!==null,48541),q.version.compareTo(B)<0&&(T.applyToRemoteDocument(q,m),q.isValidDocument()&&(q.setReadTime(m.commitVersion),v.addEntry(q)))}))})),w.next((()=>g.mutationQueue.removeMutationBatch(p,T)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(g){let p=kt();for(let m=0;m<g.mutationResults.length;++m)g.mutationResults[m].transformResults.length>0&&(p=p.add(g.batch.mutations[m].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function MT(i){const e=ct(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function fx(i,e){const n=ct(i),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const g=[];e.targetChanges.forEach(((v,T)=>{const S=o.get(T);if(!S)return;g.push(n.Pi.removeMatchingKeys(u,v.removedDocuments,T).next((()=>n.Pi.addMatchingKeys(u,v.addedDocuments,T))));let w=S.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?w=w.withResumeToken(nr.EMPTY_BYTE_STRING,at.min()).withLastLimboFreeSnapshotVersion(at.min()):v.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(v.resumeToken,s)),o=o.insert(T,w),(function(q,B,_e){return q.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=ux?!0:_e.addedDocuments.size+_e.modifiedDocuments.size+_e.removedDocuments.size>0})(S,w,v)&&g.push(n.Pi.updateTargetData(u,w))}));let p=cs(),m=kt();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,v))})),g.push(mx(u,h,e.documentUpdates).next((v=>{p=v.ks,m=v.qs}))),!s.isEqual(at.min())){const v=n.Pi.getLastRemoteSnapshotVersion(u).next((T=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));g.push(v)}return le.waitFor(g).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,m))).next((()=>p))})).then((u=>(n.Ms=o,u)))}function mx(i,e,n){let s=kt(),o=kt();return n.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let h=cs();return n.forEach(((g,p)=>{const m=u.get(g);p.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(g)),p.isNoDocument()&&p.version.isEqual(at.min())?(e.removeEntry(g,p.readTime),h=h.insert(g,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),h=h.insert(g,p)):Oe(Gp,"Ignoring outdated watch update for ",g,". Current version:",m.version," Watch version:",p.version)})),{ks:h,qs:o}}))}function px(i,e){const n=ct(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Mp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function gx(i,e){const n=ct(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,le.resolve(o)):n.Pi.allocateTargetId(s).next((h=>(o=new Xs(e,h,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function sp(i,e,n){const s=ct(i),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!il(h))throw h;Oe(Gp,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function ab(i,e,n){const s=ct(i);let o=at.min(),u=kt();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(p,m,v){const T=ct(p),S=T.xs.get(v);return S!==void 0?le.resolve(T.Ms.get(S)):T.Pi.getTargetData(m,v)})(s,h,Ni(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,g.targetId).next((p=>{u=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,e,n?o:at.min(),n?u:kt()))).next((g=>(yx(s,tI(e),g),{documents:g,Qs:u})))))}function yx(i,e,n){let s=i.Os.get(e)||at.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Os.set(e,s)}class ob{constructor(){this.activeTargetIds=oI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vx{constructor(){this.Mo=new ob,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ob,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class _x{Oo(e){}shutdown(){}}const lb="ConnectivityMonitor";class ub{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Oe(lb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Oe(lb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let md=null;function ap(){return md===null?md=(function(){return 268435456+Math.round(2147483648*Math.random())})():md++,"0x"+md.toString(16)}const Dm="RestConnection",bx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ex{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Ld?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const h=ap(),g=this.zo(e,n.toUriEncodedString());Oe(Dm,`Sending RPC '${e}' ${h}:`,g,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:m}=new URL(g),v=ua(m);return this.Jo(e,g,p,s,v).then((T=>(Oe(Dm,`Received RPC '${e}' ${h}: `,T),T)),(T=>{throw Yo(Dm,`RPC '${e}' ${h} failed with error: `,T,"url: ",g,"request:",s),T}))}Ho(e,n,s,o,u,h){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+nl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=bx[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class Tx{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const sr="WebChannelConnection";class Sx extends Ex{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const h=ap();return new Promise(((g,p)=>{const m=new jE;m.setWithCredentials(!0),m.listenOnce(LE.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Ed.NO_ERROR:const T=m.getResponseJson();Oe(sr,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),g(T);break;case Ed.TIMEOUT:Oe(sr,`RPC '${e}' ${h} timed out`),p(new xe(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Ed.HTTP_ERROR:const S=m.getStatus();if(Oe(sr,`RPC '${e}' ${h} failed with status:`,S,"response text:",m.getResponseText()),S>0){let w=m.getResponseJson();Array.isArray(w)&&(w=w[0]);const j=w?.error;if(j&&j.status&&j.message){const q=(function(_e){const fe=_e.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(fe)>=0?fe:ne.UNKNOWN})(j.status);p(new xe(q,j.message))}else p(new xe(ne.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new xe(ne.UNAVAILABLE,"Connection failed."));break;default:rt(9055,{l_:e,streamId:h,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{Oe(sr,`RPC '${e}' ${h} completed.`)}}));const v=JSON.stringify(o);Oe(sr,`RPC '${e}' ${h} sending request:`,o),m.send(n,"POST",v,s,15)}))}T_(e,n,s){const o=ap(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=zE(),g=UE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const v=u.join("");Oe(sr,`Creating RPC '${e}' stream ${o}: ${v}`,p);const T=h.createWebChannel(v,p);this.I_(T);let S=!1,w=!1;const j=new Tx({Yo:B=>{w?Oe(sr,`Not sending because RPC '${e}' stream ${o} is closed:`,B):(S||(Oe(sr,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),Oe(sr,`RPC '${e}' stream ${o} sending:`,B),T.send(B))},Zo:()=>T.close()}),q=(B,_e,fe)=>{B.listen(_e,(te=>{try{fe(te)}catch(Se){setTimeout((()=>{throw Se}),0)}}))};return q(T,ou.EventType.OPEN,(()=>{w||(Oe(sr,`RPC '${e}' stream ${o} transport opened.`),j.o_())})),q(T,ou.EventType.CLOSE,(()=>{w||(w=!0,Oe(sr,`RPC '${e}' stream ${o} transport closed`),j.a_(),this.E_(T))})),q(T,ou.EventType.ERROR,(B=>{w||(w=!0,Yo(sr,`RPC '${e}' stream ${o} transport errored. Name:`,B.name,"Message:",B.message),j.a_(new xe(ne.UNAVAILABLE,"The operation could not be completed")))})),q(T,ou.EventType.MESSAGE,(B=>{if(!w){const _e=B.data[0];$t(!!_e,16349);const fe=_e,te=fe?.error||fe[0]?.error;if(te){Oe(sr,`RPC '${e}' stream ${o} received error:`,te);const Se=te.status;let Ge=(function(R){const x=Ln[R];if(x!==void 0)return bT(x)})(Se),Be=te.message;Ge===void 0&&(Ge=ne.INTERNAL,Be="Unknown error status: "+Se+" with message "+te.message),w=!0,j.a_(new xe(Ge,Be)),T.close()}else Oe(sr,`RPC '${e}' stream ${o} received:`,_e),j.u_(_e)}})),q(g,PE.STAT_EVENT,(B=>{B.stat===Ym.PROXY?Oe(sr,`RPC '${e}' stream ${o} detected buffering proxy`):B.stat===Ym.NOPROXY&&Oe(sr,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{j.__()}),0),j}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Mm(){return typeof document<"u"?document:null}function ph(i){return new RI(i,!0)}class OT{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&Oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const cb="PersistentStream";class VT{constructor(e,n,s,o,u,h,g,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new OT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ne.RESOURCE_EXHAUSTED?(us(n.toString()),us("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new xe(ne.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Oe(cb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Oe(cb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class wx extends VT{constructor(e,n,s,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,h),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=NI(this.serializer,e),s=(function(u){if(!("targetChange"in u))return at.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?at.min():h.readTime?ki(h.readTime):at.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=ip(this.serializer),n.addTarget=(function(u,h){let g;const p=h.target;if(g=Zm(p)?{documents:MI(u,p)}:{query:OI(u,p).ft},g.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){g.resumeToken=ST(u,h.resumeToken);const m=tp(u,h.expectedCount);m!==null&&(g.expectedCount=m)}else if(h.snapshotVersion.compareTo(at.min())>0){g.readTime=qd(u,h.snapshotVersion.toTimestamp());const m=tp(u,h.expectedCount);m!==null&&(g.expectedCount=m)}return g})(this.serializer,e);const s=jI(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=ip(this.serializer),n.removeTarget=e,this.q_(n)}}class Ax extends VT{constructor(e,n,s,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,h),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return $t(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$t(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){$t(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=DI(e.writeResults,e.commitTime),s=ki(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=ip(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>kI(this.serializer,s)))};this.q_(n)}}class Cx{}class Rx extends Cx{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new xe(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Go(e,np(n,s),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new xe(ne.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,g])=>this.connection.Ho(e,np(n,s),o,h,g,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new xe(ne.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Ix{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(us(n),this.aa=!1):Oe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ka="RemoteStore";class xx{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{$a(this)&&(Oe(Ka,"Restarting streams for network reachability change."),await(async function(p){const m=ct(p);m.Ea.add(4),await Pu(m),m.Ra.set("Unknown"),m.Ea.delete(4),await gh(m)})(this))}))})),this.Ra=new Ix(s,o)}}async function gh(i){if($a(i))for(const e of i.da)await e(!0)}async function Pu(i){for(const e of i.da)await e(!1)}function jT(i,e){const n=ct(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Xp(n)?Yp(n):al(n).O_()&&Qp(n,e))}function Kp(i,e){const n=ct(i),s=al(n);n.Ia.delete(e),s.O_()&&LT(n,e),n.Ia.size===0&&(s.O_()?s.L_():$a(n)&&n.Ra.set("Unknown"))}function Qp(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(at.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}al(i).Y_(e)}function LT(i,e){i.Va.Ue(e),al(i).Z_(e)}function Yp(i){i.Va=new SI({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),al(i).start(),i.Ra.ua()}function Xp(i){return $a(i)&&!al(i).x_()&&i.Ia.size>0}function $a(i){return ct(i).Ea.size===0}function PT(i){i.Va=void 0}async function Nx(i){i.Ra.set("Online")}async function kx(i){i.Ia.forEach(((e,n)=>{Qp(i,e)}))}async function Dx(i,e){PT(i),Xp(i)?(i.Ra.ha(e),Yp(i)):i.Ra.set("Unknown")}async function Mx(i,e,n){if(i.Ra.set("Online"),e instanceof TT&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const g of u.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,h),o.Ia.delete(g),o.Va.removeTarget(g))})(i,e)}catch(s){Oe(Ka,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Hd(i,s)}else if(e instanceof Ad?i.Va.Ze(e):e instanceof ET?i.Va.st(e):i.Va.tt(e),!n.isEqual(at.min()))try{const s=await MT(i.localStore);n.compareTo(s)>=0&&await(function(u,h){const g=u.Va.Tt(h);return g.targetChanges.forEach(((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const v=u.Ia.get(m);v&&u.Ia.set(m,v.withResumeToken(p.resumeToken,h))}})),g.targetMismatches.forEach(((p,m)=>{const v=u.Ia.get(p);if(!v)return;u.Ia.set(p,v.withResumeToken(nr.EMPTY_BYTE_STRING,v.snapshotVersion)),LT(u,p);const T=new Xs(v.target,p,m,v.sequenceNumber);Qp(u,T)})),u.remoteSyncer.applyRemoteEvent(g)})(i,n)}catch(s){Oe(Ka,"Failed to raise snapshot:",s),await Hd(i,s)}}async function Hd(i,e,n){if(!il(e))throw e;i.Ea.add(1),await Pu(i),i.Ra.set("Offline"),n||(n=()=>MT(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Oe(Ka,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await gh(i)}))}function UT(i,e){return e().catch((n=>Hd(i,n,e)))}async function yh(i){const e=ct(i),n=oa(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Mp;for(;Ox(e);)try{const o=await px(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,Vx(e,o)}catch(o){await Hd(e,o)}zT(e)&&BT(e)}function Ox(i){return $a(i)&&i.Ta.length<10}function Vx(i,e){i.Ta.push(e);const n=oa(i);n.O_()&&n.X_&&n.ea(e.mutations)}function zT(i){return $a(i)&&!oa(i).x_()&&i.Ta.length>0}function BT(i){oa(i).start()}async function jx(i){oa(i).ra()}async function Lx(i){const e=oa(i);for(const n of i.Ta)e.ea(n.mutations)}async function Px(i,e,n){const s=i.Ta.shift(),o=Up.from(s,e,n);await UT(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await yh(i)}async function Ux(i,e){e&&oa(i).X_&&await(async function(s,o){if((function(h){return bI(h)&&h!==ne.ABORTED})(o.code)){const u=s.Ta.shift();oa(s).B_(),await UT(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await yh(s)}})(i,e),zT(i)&&BT(i)}async function db(i,e){const n=ct(i);n.asyncQueue.verifyOperationInProgress(),Oe(Ka,"RemoteStore received new credentials");const s=$a(n);n.Ea.add(3),await Pu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await gh(n)}async function zx(i,e){const n=ct(i);e?(n.Ea.delete(2),await gh(n)):e||(n.Ea.add(2),await Pu(n),n.Ra.set("Unknown"))}function al(i){return i.ma||(i.ma=(function(n,s,o){const u=ct(n);return u.sa(),new wx(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:Nx.bind(null,i),t_:kx.bind(null,i),r_:Dx.bind(null,i),H_:Mx.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Xp(i)?Yp(i):i.Ra.set("Unknown")):(await i.ma.stop(),PT(i))}))),i.ma}function oa(i){return i.fa||(i.fa=(function(n,s,o){const u=ct(n);return u.sa(),new Ax(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:jx.bind(null,i),r_:Ux.bind(null,i),ta:Lx.bind(null,i),na:Px.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await yh(i)):(await i.fa.stop(),i.Ta.length>0&&(Oe(Ka,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class $p{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new as,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const h=Date.now()+s,g=new $p(e,n,h,o,u);return g.start(s),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wp(i,e){if(us("AsyncQueue",`${e}: ${i}`),il(i))return new xe(ne.UNAVAILABLE,`${e}: ${i}`);throw i}class Ko{static emptySet(e){return new Ko(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||We.comparator(n.key,s.key):(n,s)=>We.comparator(n.key,s.key),this.keyedMap=lu(),this.sortedSet=new yn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ko)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Ko;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class hb{constructor(){this.ga=new yn(We.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):rt(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Zo{constructor(e,n,s,o,u,h,g,p,m){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,n,s,o,u){const h=[];return n.forEach((g=>{h.push({type:0,doc:g})})),new Zo(e,n,Ko.emptySet(n),h,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class Bx{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class qx{constructor(){this.queries=fb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=ct(n),u=o.queries;o.queries=fb(),u.forEach(((h,g)=>{for(const p of g.Sa)p.onError(s)}))})(this,new xe(ne.ABORTED,"Firestore shutting down"))}}function fb(){return new Xa((i=>lT(i)),uh)}async function Jp(i,e){const n=ct(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new Bx,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const g=Wp(h,`Initialization of query '${Po(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&eg(n)}async function Zp(i,e){const n=ct(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const h=u.Sa.indexOf(e);h>=0&&(u.Sa.splice(h,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function Fx(i,e){const n=ct(i);let s=!1;for(const o of e){const u=o.query,h=n.queries.get(u);if(h){for(const g of h.Sa)g.Fa(o)&&(s=!0);h.wa=o}}s&&eg(n)}function Hx(i,e,n){const s=ct(i),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function eg(i){i.Ca.forEach((e=>{e.next()}))}var op,mb;(mb=op||(op={})).Ma="default",mb.Cache="cache";class tg{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Zo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==op.Cache}}class qT{constructor(e){this.key=e}}class FT{constructor(e){this.key=e}}class Gx{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=kt(),this.mutatedKeys=kt(),this.eu=uT(e),this.tu=new Ko(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new hb,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=o,g=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,T)=>{const S=o.get(v),w=ch(this.query,T)?T:null,j=!!S&&this.mutatedKeys.has(S.key),q=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let B=!1;S&&w?S.data.isEqual(w.data)?j!==q&&(s.track({type:3,doc:w}),B=!0):this.su(S,w)||(s.track({type:2,doc:w}),B=!0,(p&&this.eu(w,p)>0||m&&this.eu(w,m)<0)&&(g=!0)):!S&&w?(s.track({type:0,doc:w}),B=!0):S&&!w&&(s.track({type:1,doc:S}),B=!0,(p||m)&&(g=!0)),B&&(w?(h=h.add(w),u=q?u.add(v):u.delete(v)):(h=h.delete(v),u=u.delete(v)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const v=this.query.limitType==="F"?h.last():h.first();h=h.delete(v.key),u=u.delete(v.key),s.track({type:1,doc:v})}return{tu:h,iu:s,Cs:g,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((v,T)=>(function(w,j){const q=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt(20277,{Rt:B})}};return q(w)-q(j)})(v.type,T.type)||this.eu(v.doc,T.doc))),this.ou(s),o=o??!1;const g=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,m=p!==this.Za;return this.Za=p,h.length!==0||m?{snapshot:new Zo(this.query,e.tu,u,h,e.mutatedKeys,p===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new hb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=kt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new FT(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new qT(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=kt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Zo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ng="SyncEngine";class Kx{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class Qx{constructor(e){this.key=e,this.hu=!1}}class Yx{constructor(e,n,s,o,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Xa((g=>lT(g)),uh),this.Iu=new Map,this.Eu=new Set,this.du=new yn(We.comparator),this.Au=new Map,this.Ru=new qp,this.Vu={},this.mu=new Map,this.fu=Jo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Xx(i,e,n=!0){const s=XT(i);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await HT(s,e,n,!0),o}async function $x(i,e){const n=XT(i);await HT(n,e,!0,!1)}async function HT(i,e,n,s){const o=await gx(i.localStore,Ni(e)),u=o.targetId,h=i.sharedClientState.addLocalQueryTarget(u,n);let g;return s&&(g=await Wx(i,e,u,h==="current",o.resumeToken)),i.isPrimaryClient&&n&&jT(i.remoteStore,o),g}async function Wx(i,e,n,s,o){i.pu=(T,S,w)=>(async function(q,B,_e,fe){let te=B.view.ru(_e);te.Cs&&(te=await ab(q.localStore,B.query,!1).then((({documents:N})=>B.view.ru(N,te))));const Se=fe&&fe.targetChanges.get(B.targetId),Ge=fe&&fe.targetMismatches.get(B.targetId)!=null,Be=B.view.applyChanges(te,q.isPrimaryClient,Se,Ge);return gb(q,B.targetId,Be.au),Be.snapshot})(i,T,S,w);const u=await ab(i.localStore,e,!0),h=new Gx(e,u.Qs),g=h.ru(u.documents),p=Lu.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),m=h.applyChanges(g,i.isPrimaryClient,p);gb(i,n,m.au);const v=new Kx(e,n,h);return i.Tu.set(e,v),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),m.snapshot}async function Jx(i,e,n){const s=ct(i),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((h=>!uh(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await sp(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Kp(s.remoteStore,o.targetId),lp(s,o.targetId)})).catch(rl)):(lp(s,o.targetId),await sp(s.localStore,o.targetId,!0))}async function Zx(i,e){const n=ct(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Kp(n.remoteStore,s.targetId))}async function eN(i,e,n){const s=oN(i);try{const o=await(function(h,g){const p=ct(h),m=Yt.now(),v=g.reduce(((w,j)=>w.add(j.key)),kt());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let j=cs(),q=kt();return p.Ns.getEntries(w,v).next((B=>{j=B,j.forEach(((_e,fe)=>{fe.isValidDocument()||(q=q.add(_e))}))})).next((()=>p.localDocuments.getOverlayedDocuments(w,j))).next((B=>{T=B;const _e=[];for(const fe of g){const te=pI(fe,T.get(fe.key).overlayedDocument);te!=null&&_e.push(new ha(fe.key,te,eT(te.value.mapValue),pr.exists(!0)))}return p.mutationQueue.addMutationBatch(w,m,_e,g)})).next((B=>{S=B;const _e=B.applyToLocalDocumentSet(T,q);return p.documentOverlayCache.saveOverlays(w,B.batchId,_e)}))})).then((()=>({batchId:S.batchId,changes:dT(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,g,p){let m=h.Vu[h.currentUser.toKey()];m||(m=new yn(Nt)),m=m.insert(g,p),h.Vu[h.currentUser.toKey()]=m})(s,o.batchId,n),await Uu(s,o.changes),await yh(s.remoteStore)}catch(o){const u=Wp(o,"Failed to persist write");n.reject(u)}}async function GT(i,e){const n=ct(i);try{const s=await fx(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=n.Au.get(u);h&&($t(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?$t(h.hu,14607):o.removedDocuments.size>0&&($t(h.hu,42227),h.hu=!1))})),await Uu(n,s,e)}catch(s){await rl(s)}}function pb(i,e,n){const s=ct(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,h)=>{const g=h.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(h,g){const p=ct(h);p.onlineState=g;let m=!1;p.queries.forEach(((v,T)=>{for(const S of T.Sa)S.va(g)&&(m=!0)})),m&&eg(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function tN(i,e,n){const s=ct(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let h=new yn(We.comparator);h=h.insert(u,or.newNoDocument(u,at.min()));const g=kt().add(u),p=new mh(at.min(),new Map,new yn(Nt),h,g);await GT(s,p),s.du=s.du.remove(u),s.Au.delete(e),rg(s)}else await sp(s.localStore,e,!1).then((()=>lp(s,e,n))).catch(rl)}async function nN(i,e){const n=ct(i),s=e.batch.batchId;try{const o=await hx(n.localStore,e);QT(n,s,null),KT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Uu(n,o)}catch(o){await rl(o)}}async function rN(i,e,n){const s=ct(i);try{const o=await(function(h,g){const p=ct(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return p.mutationQueue.lookupMutationBatch(m,g).next((T=>($t(T!==null,37113),v=T.keys(),p.mutationQueue.removeMutationBatch(m,T)))).next((()=>p.mutationQueue.performConsistencyCheck(m))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(m,v,g))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>p.localDocuments.getDocuments(m,v)))}))})(s.localStore,e);QT(s,e,n),KT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Uu(s,o)}catch(o){await rl(o)}}function KT(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function QT(i,e,n){const s=ct(i);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function lp(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||YT(i,s)}))}function YT(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(Kp(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),rg(i))}function gb(i,e,n){for(const s of n)s instanceof qT?(i.Ru.addReference(s.key,e),iN(i,s)):s instanceof FT?(Oe(ng,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||YT(i,s.key)):rt(19791,{wu:s})}function iN(i,e){const n=e.key,s=n.path.canonicalString();i.du.get(n)||i.Eu.has(s)||(Oe(ng,"New document in limbo: "+n),i.Eu.add(s),rg(i))}function rg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new We(cn.fromString(e)),s=i.fu.next();i.Au.set(s,new Qx(n)),i.du=i.du.insert(n,s),jT(i.remoteStore,new Xs(Ni(lh(n.path)),s,"TargetPurposeLimboResolution",sh.ce))}}async function Uu(i,e,n){const s=ct(i),o=[],u=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((g,p)=>{h.push(s.pu(p,e,n).then((m=>{if((m||n)&&s.isPrimaryClient){const v=m?!m.fromCache:n?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,v?"current":"not-current")}if(m){o.push(m);const v=Hp.As(p.targetId,m);u.push(v)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(p,m){const v=ct(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>le.forEach(m,(S=>le.forEach(S.Es,(w=>v.persistence.referenceDelegate.addReference(T,S.targetId,w))).next((()=>le.forEach(S.ds,(w=>v.persistence.referenceDelegate.removeReference(T,S.targetId,w)))))))))}catch(T){if(!il(T))throw T;Oe(Gp,"Failed to update sequence numbers: "+T)}for(const T of m){const S=T.targetId;if(!T.fromCache){const w=v.Ms.get(S),j=w.snapshotVersion,q=w.withLastLimboFreeSnapshotVersion(j);v.Ms=v.Ms.insert(S,q)}}})(s.localStore,u))}async function sN(i,e){const n=ct(i);if(!n.currentUser.isEqual(e)){Oe(ng,"User change. New user:",e.toKey());const s=await DT(n.localStore,e);n.currentUser=e,(function(u,h){u.mu.forEach((g=>{g.forEach((p=>{p.reject(new xe(ne.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Uu(n,s.Ls)}}function aN(i,e){const n=ct(i),s=n.Au.get(e);if(s&&s.hu)return kt().add(s.key);{let o=kt();const u=n.Iu.get(e);if(!u)return o;for(const h of u){const g=n.Tu.get(h);o=o.unionWith(g.view.nu)}return o}}function XT(i){const e=ct(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=GT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tN.bind(null,e),e.Pu.H_=Fx.bind(null,e.eventManager),e.Pu.yu=Hx.bind(null,e.eventManager),e}function oN(i){const e=ct(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rN.bind(null,e),e}class Gd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ph(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return dx(this.persistence,new lx,e.initialUser,this.serializer)}Cu(e){return new kT(Fp.mi,this.serializer)}Du(e){return new vx}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gd.provider={build:()=>new Gd};class lN extends Gd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){$t(this.persistence.referenceDelegate instanceof Fd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new QI(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Cr.withCacheSize(this.cacheSizeBytes):Cr.DEFAULT;return new kT((s=>Fd.mi(s,n)),this.serializer)}}class up{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>pb(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=sN.bind(null,this.syncEngine),await zx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new qx})()}createDatastore(e){const n=ph(e.databaseInfo.databaseId),s=(function(u){return new Sx(u)})(e.databaseInfo);return(function(u,h,g,p){return new Rx(u,h,g,p)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,h,g){return new xx(s,o,u,h,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>pb(this.syncEngine,n,0)),(function(){return ub.v()?new ub:new _x})())}createSyncEngine(e,n){return(function(o,u,h,g,p,m,v){const T=new Yx(o,u,h,g,p,m);return v&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=ct(n);Oe(Ka,"RemoteStore shutting down."),s.Ea.add(5),await Pu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}up.provider={build:()=>new up};class ig{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):us("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const la="FirestoreClient";class uN{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=ar.UNAUTHENTICATED,this.clientId=Dp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async h=>{Oe(la,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(Oe(la,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new as;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Wp(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Om(i,e){i.asyncQueue.verifyOperationInProgress(),Oe(la,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await DT(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function yb(i,e){i.asyncQueue.verifyOperationInProgress();const n=await cN(i);Oe(la,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>db(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>db(e.remoteStore,o))),i._onlineComponents=e}async function cN(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Oe(la,"Using user provided OfflineComponentProvider");try{await Om(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ne.FAILED_PRECONDITION||o.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Yo("Error using user provided cache. Falling back to memory cache: "+n),await Om(i,new Gd)}}else Oe(la,"Using default OfflineComponentProvider"),await Om(i,new lN(void 0));return i._offlineComponents}async function $T(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Oe(la,"Using user provided OnlineComponentProvider"),await yb(i,i._uninitializedComponentsProvider._online)):(Oe(la,"Using default OnlineComponentProvider"),await yb(i,new up))),i._onlineComponents}function dN(i){return $T(i).then((e=>e.syncEngine))}async function Kd(i){const e=await $T(i),n=e.eventManager;return n.onListen=Xx.bind(null,e.syncEngine),n.onUnlisten=Jx.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$x.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Zx.bind(null,e.syncEngine),n}function hN(i,e,n={}){const s=new as;return i.asyncQueue.enqueueAndForget((async()=>(function(u,h,g,p,m){const v=new ig({next:S=>{v.Nu(),h.enqueueAndForget((()=>Zp(u,T)));const w=S.docs.has(g);!w&&S.fromCache?m.reject(new xe(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&S.fromCache&&p&&p.source==="server"?m.reject(new xe(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),T=new tg(lh(g.path),v,{includeMetadataChanges:!0,qa:!0});return Jp(u,T)})(await Kd(i),i.asyncQueue,e,n,s))),s.promise}function fN(i,e,n={}){const s=new as;return i.asyncQueue.enqueueAndForget((async()=>(function(u,h,g,p,m){const v=new ig({next:S=>{v.Nu(),h.enqueueAndForget((()=>Zp(u,T))),S.fromCache&&p.source==="server"?m.reject(new xe(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),T=new tg(g,v,{includeMetadataChanges:!0,qa:!0});return Jp(u,T)})(await Kd(i),i.asyncQueue,e,n,s))),s.promise}function WT(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const vb=new Map;const JT="firestore.googleapis.com",_b=!0;class bb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new xe(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=JT,this.ssl=_b}else this.host=e.host,this.ssl=e.ssl??_b;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=NT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<GI)throw new xe(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}R2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new xe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new xe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new xe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vh{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new y2;switch(s.type){case"firstParty":return new E2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new xe(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=vb.get(n);s&&(Oe("ComponentProvider","Removing Datastore"),vb.delete(n),s.terminate())})(this),Promise.resolve()}}function mN(i,e,n,s={}){i=mr(i,vh);const o=ua(e),u=i._getSettings(),h={...u,emulatorOptions:i._getEmulatorOptions()},g=`${e}:${n}`;o&&(vp(`https://${g}`),_p("Firestore",!0)),u.host!==JT&&u.host!==g&&Yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:g,ssl:o,emulatorOptions:s};if(!Ba(p,h)&&(i._setSettings(p),s.mockUserToken)){let m,v;if(typeof s.mockUserToken=="string")m=s.mockUserToken,v=ar.MOCK_USER;else{m=Sw(s.mockUserToken,i._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new xe(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new ar(T)}i._authCredentials=new v2(new qE(m,v))}}class hs{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new hs(this.firestore,e,this._query)}}class Sn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ea(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sn(this.firestore,e,this._key)}toJSON(){return{type:Sn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Vu(n,Sn._jsonSchema))return new Sn(e,s||null,new We(cn.fromString(n.referencePath)))}}Sn._jsonSchemaVersion="firestore/documentReference/1.0",Sn._jsonSchema={type:Un("string",Sn._jsonSchemaVersion),referencePath:Un("string")};class ea extends hs{constructor(e,n,s){super(e,n,lh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sn(this.firestore,null,new We(e))}withConverter(e){return new ea(this.firestore,e,this._path)}}function Qt(i,e,...n){if(i=un(i),FE("collection","path",e),i instanceof vh){const s=cn.fromString(e,...n);return M_(s),new ea(i,null,s)}{if(!(i instanceof Sn||i instanceof ea))throw new xe(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(cn.fromString(e,...n));return M_(s),new ea(i.firestore,null,s)}}function gt(i,e,...n){if(i=un(i),arguments.length===1&&(e=Dp.newId()),FE("doc","path",e),i instanceof vh){const s=cn.fromString(e,...n);return D_(s),new Sn(i,null,new We(s))}{if(!(i instanceof Sn||i instanceof ea))throw new xe(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(cn.fromString(e,...n));return D_(s),new Sn(i.firestore,i instanceof ea?i.converter:null,new We(s))}}const Eb="AsyncQueue";class Tb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new OT(this,"async_queue_retry"),this._c=()=>{const s=Mm();s&&Oe(Eb,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Mm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Mm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new as;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!il(e))throw e;Oe(Eb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,us("INTERNAL UNHANDLED ERROR: ",Sb(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=$p.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&rt(47125,{Pc:Sb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Sb(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}function wb(i){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(i,["next","error","complete"])}class Vi extends vh{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new Tb,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Tb(e),this._firestoreClient=void 0,await e}}}function pN(i,e){const n=typeof i=="object"?i:eh(),s=typeof i=="string"?i:Ld,o=Zd(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=Hb("firestore");u&&mN(o,...u)}return o}function zu(i){if(i._terminated)throw new xe(ne.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||gN(i),i._firestoreClient}function gN(i){const e=i._freezeSettings(),n=(function(o,u,h,g){return new U2(o,u,h,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,WT(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new uN(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}class ti{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ti(nr.fromBase64String(e))}catch(n){throw new xe(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ti(nr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ti._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vu(e,ti._jsonSchema))return ti.fromBase64String(e.bytes)}}ti._jsonSchemaVersion="firestore/bytes/1.0",ti._jsonSchema={type:Un("string",ti._jsonSchemaVersion),bytes:Un("string")};class Bu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new xe(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _h{constructor(e){this._methodName=e}}class Di{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new xe(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new xe(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Nt(this._lat,e._lat)||Nt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Di._jsonSchemaVersion}}static fromJSON(e){if(Vu(e,Di._jsonSchema))return new Di(e.latitude,e.longitude)}}Di._jsonSchemaVersion="firestore/geoPoint/1.0",Di._jsonSchema={type:Un("string",Di._jsonSchemaVersion),latitude:Un("number"),longitude:Un("number")};class Mi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Mi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vu(e,Mi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Mi(e.vectorValues);throw new xe(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Mi._jsonSchemaVersion="firestore/vectorValue/1.0",Mi._jsonSchema={type:Un("string",Mi._jsonSchemaVersion),vectorValues:Un("object")};const yN=/^__.*__$/;class vN{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ha(e,this.data,this.fieldMask,n,this.fieldTransforms):new ju(e,this.data,n,this.fieldTransforms)}}class ZT{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ha(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function e1(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt(40011,{Ac:i})}}class sg{constructor(e,n,s,o,u,h){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new sg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Qd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(e1(this.Ac)&&yN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class _N{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||ph(e)}Cc(e,n,s,o=!1){return new sg({Ac:e,methodName:n,Dc:s,path:tr.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qu(i){const e=i._freezeSettings(),n=ph(i._databaseId);return new _N(i._databaseId,!!e.ignoreUndefinedProperties,n)}function ag(i,e,n,s,o,u={}){const h=i.Cc(u.merge||u.mergeFields?2:0,e,n,o);lg("Data must be an object, but it was:",h,s);const g=r1(s,h);let p,m;if(u.merge)p=new Pr(h.fieldMask),m=h.fieldTransforms;else if(u.mergeFields){const v=[];for(const T of u.mergeFields){const S=cp(e,T,n);if(!h.contains(S))throw new xe(ne.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);s1(v,S)||v.push(S)}p=new Pr(v),m=h.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,m=h.fieldTransforms;return new vN(new Rr(g),p,m)}class bh extends _h{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bh}}class og extends _h{_toFieldTransform(e){return new dI(e.path,new Cu)}isEqual(e){return e instanceof og}}function t1(i,e,n,s){const o=i.Cc(1,e,n);lg("Data must be an object, but it was:",o,s);const u=[],h=Rr.empty();da(s,((p,m)=>{const v=ug(e,p,n);m=un(m);const T=o.yc(v);if(m instanceof bh)u.push(v);else{const S=Fu(m,T);S!=null&&(u.push(v),h.set(v,S))}}));const g=new Pr(u);return new ZT(h,g,o.fieldTransforms)}function n1(i,e,n,s,o,u){const h=i.Cc(1,e,n),g=[cp(e,s,n)],p=[o];if(u.length%2!=0)throw new xe(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<u.length;S+=2)g.push(cp(e,u[S])),p.push(u[S+1]);const m=[],v=Rr.empty();for(let S=g.length-1;S>=0;--S)if(!s1(m,g[S])){const w=g[S];let j=p[S];j=un(j);const q=h.yc(w);if(j instanceof bh)m.push(w);else{const B=Fu(j,q);B!=null&&(m.push(w),v.set(w,B))}}const T=new Pr(m);return new ZT(v,T,h.fieldTransforms)}function bN(i,e,n,s=!1){return Fu(n,i.Cc(s?4:3,e))}function Fu(i,e){if(i1(i=un(i)))return lg("Unsupported field value:",e,i),r1(i,e);if(i instanceof _h)return(function(s,o){if(!e1(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let h=0;for(const g of s){let p=Fu(g,o.wc(h));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),h++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=un(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return lI(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Yt.fromDate(s);return{timestampValue:qd(o.serializer,u)}}if(s instanceof Yt){const u=new Yt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:qd(o.serializer,u)}}if(s instanceof Di)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ti)return{bytesValue:ST(o.serializer,s._byteString)};if(s instanceof Sn){const u=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Bp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Mi)return(function(h,g){return{mapValue:{fields:{[JE]:{stringValue:ZE},[Pd]:{arrayValue:{values:h.toArray().map((m=>{if(typeof m!="number")throw g.Sc("VectorValues must only contain numeric values.");return Pp(g.serializer,m)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${ih(s)}`)})(i,e)}function r1(i,e){const n={};return KE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):da(i,((s,o)=>{const u=Fu(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function i1(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Yt||i instanceof Di||i instanceof ti||i instanceof Sn||i instanceof _h||i instanceof Mi)}function lg(i,e,n){if(!i1(n)||!HE(n)){const s=ih(n);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function cp(i,e,n){if((e=un(e))instanceof Bu)return e._internalPath;if(typeof e=="string")return ug(i,e);throw Qd("Field path arguments must be of type string or ",i,!1,void 0,n)}const EN=new RegExp("[~\\*/\\[\\]]");function ug(i,e,n){if(e.search(EN)>=0)throw Qd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Bu(...e.split("."))._internalPath}catch{throw Qd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Qd(i,e,n,s,o){const u=s&&!s.isEmpty(),h=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(u||h)&&(p+=" (found",u&&(p+=` in field ${s}`),h&&(p+=` in document ${o}`),p+=")"),new xe(ne.INVALID_ARGUMENT,g+i+p)}function s1(i,e){return i.some((n=>n.isEqual(e)))}class a1{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Eh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class TN extends a1{data(){return super.data()}}function Eh(i,e){return typeof e=="string"?ug(i,e):e instanceof Bu?e._internalPath:e._delegate._internalPath}function o1(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new xe(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cg{}class dg extends cg{}function qn(i,e,...n){let s=[];e instanceof cg&&s.push(e),s=s.concat(n),(function(u){const h=u.filter((p=>p instanceof hg)).length,g=u.filter((p=>p instanceof Th)).length;if(h>1||h>0&&g>0)throw new xe(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class Th extends dg{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Th(e,n,s)}_apply(e){const n=this._parse(e);return l1(e._query,n),new hs(e.firestore,e.converter,ep(e._query,n))}_parse(e){const n=qu(e.firestore);return(function(u,h,g,p,m,v,T){let S;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new xe(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Ib(T,v);const j=[];for(const q of T)j.push(Rb(p,u,q));S={arrayValue:{values:j}}}else S=Rb(p,u,T)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Ib(T,v),S=bN(g,h,T,v==="in"||v==="not-in");return Pn.create(m,v,S)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function fn(i,e,n){const s=e,o=Eh("where",i);return Th._create(o,s,n)}class hg extends cg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new hg(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:pi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let h=o;const g=u.getFlattenedFilters();for(const p of g)l1(h,p),h=ep(h,p)})(e._query,n),new hs(e.firestore,e.converter,ep(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class fg extends dg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new fg(e,n)}_apply(e){const n=(function(o,u,h){if(o.startAt!==null)throw new xe(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new xe(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Au(u,h)})(e._query,this._field,this._direction);return new hs(e.firestore,e.converter,(function(o,u){const h=o.explicitOrderBy.concat([u]);return new sl(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function Ab(i,e="asc"){const n=e,s=Eh("orderBy",i);return fg._create(s,n)}class mg extends dg{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new mg(e,n,s)}_apply(e){return new hs(e.firestore,e.converter,zd(e._query,this._limit,this._limitType))}}function Cb(i){return I2("limit",i),mg._create("limit",i,"F")}function Rb(i,e,n){if(typeof(n=un(n))=="string"){if(n==="")throw new xe(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oT(e)&&n.indexOf("/")!==-1)throw new xe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(cn.fromString(n));if(!We.isDocumentKey(s))throw new xe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return B_(i,new We(s))}if(n instanceof Sn)return B_(i,n._key);throw new xe(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ih(n)}.`)}function Ib(i,e){if(!Array.isArray(i)||i.length===0)throw new xe(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function l1(i,e){const n=(function(o,u){for(const h of o)for(const g of h.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new xe(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class SN{convertValue(e,n="none"){switch(aa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return In(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(sa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw rt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return da(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[Pd].arrayValue?.values?.map((s=>In(s.doubleValue)));return new Mi(n)}convertGeoPoint(e){return new Di(In(e.latitude),In(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=oh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Tu(e));default:return null}}convertTimestamp(e){const n=ia(e);return new Yt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=cn.fromString(e);$t(xT(s),9688,{name:e});const o=new Su(s.get(1),s.get(3)),u=new We(s.popFirst(5));return o.isEqual(n)||us(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}function pg(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}class cu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pa extends a1{constructor(e,n,s,o,u,h){super(e,n,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Cd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Eh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Pa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Pa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Pa._jsonSchema={type:Un("string",Pa._jsonSchemaVersion),bundleSource:Un("string","DocumentSnapshot"),bundleName:Un("string"),bundle:Un("string")};class Cd extends Pa{data(e={}){return super.data(e)}}class Ua{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new cu(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Cd(this._firestore,this._userDataWriter,s.key,s,new cu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new xe(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((g=>{const p=new Cd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new cu(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const p=new Cd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new cu(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,v=-1;return g.type!==0&&(m=h.indexOf(g.doc.key),h=h.delete(g.doc.key)),g.type!==1&&(h=h.add(g.doc),v=h.indexOf(g.doc.key)),{type:wN(g.type),doc:p,oldIndex:m,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ua._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Dp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function wN(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt(61501,{type:i})}}function hi(i){i=mr(i,Sn);const e=mr(i.firestore,Vi);return hN(zu(e),i._key).then((n=>c1(e,i,n)))}Ua._jsonSchemaVersion="firestore/querySnapshot/1.0",Ua._jsonSchema={type:Un("string",Ua._jsonSchemaVersion),bundleSource:Un("string","QuerySnapshot"),bundleName:Un("string"),bundle:Un("string")};class gg extends SN{constructor(e){super(),this.firestore=e}convertBytes(e){return new ti(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,n)}}function ln(i){i=mr(i,hs);const e=mr(i.firestore,Vi),n=zu(e),s=new gg(e);return o1(i._query),fN(n,i._query).then((o=>new Ua(e,s,i,o)))}function ta(i,e,n){i=mr(i,Sn);const s=mr(i.firestore,Vi),o=pg(i.converter,e,n);return Hu(s,[ag(qu(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,pr.none())])}function Fn(i,e,n,...s){i=mr(i,Sn);const o=mr(i.firestore,Vi),u=qu(o);let h;return h=typeof(e=un(e))=="string"||e instanceof Bu?n1(u,"updateDoc",i._key,e,n,s):t1(u,"updateDoc",i._key,e),Hu(o,[h.toMutation(i._key,pr.exists(!0))])}function u1(i){return Hu(mr(i.firestore,Vi),[new fh(i._key,pr.none())])}function Rd(i,e){const n=mr(i.firestore,Vi),s=gt(i),o=pg(i.converter,e);return Hu(n,[ag(qu(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,pr.exists(!1))]).then((()=>s))}function dp(i,...e){i=un(i);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||wb(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(wb(e[s])){const p=e[s];e[s]=p.next?.bind(p),e[s+1]=p.error?.bind(p),e[s+2]=p.complete?.bind(p)}let u,h,g;if(i instanceof Sn)h=mr(i.firestore,Vi),g=lh(i._key.path),u={next:p=>{e[s]&&e[s](c1(h,i,p))},error:e[s+1],complete:e[s+2]};else{const p=mr(i,hs);h=mr(p.firestore,Vi),g=p._query;const m=new gg(h);u={next:v=>{e[s]&&e[s](new Ua(h,m,p,v))},error:e[s+1],complete:e[s+2]},o1(i._query)}return(function(m,v,T,S){const w=new ig(S),j=new tg(v,w,T);return m.asyncQueue.enqueueAndForget((async()=>Jp(await Kd(m),j))),()=>{w.Nu(),m.asyncQueue.enqueueAndForget((async()=>Zp(await Kd(m),j)))}})(zu(h),g,o,u)}function Hu(i,e){return(function(s,o){const u=new as;return s.asyncQueue.enqueueAndForget((async()=>eN(await dN(s),o,u))),u.promise})(zu(i),e)}function c1(i,e,n){const s=n.docs.get(e._key),o=new gg(i);return new Pa(i,o,e._key,s,new cu(n.hasPendingWrites,n.fromCache),e.converter)}class AN{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=qu(e)}set(e,n,s){this._verifyNotCommitted();const o=Vm(e,this._firestore),u=pg(o.converter,n,s),h=ag(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,s);return this._mutations.push(h.toMutation(o._key,pr.none())),this}update(e,n,s,...o){this._verifyNotCommitted();const u=Vm(e,this._firestore);let h;return h=typeof(n=un(n))=="string"||n instanceof Bu?n1(this._dataReader,"WriteBatch.update",u._key,n,s,o):t1(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(h.toMutation(u._key,pr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Vm(e,this._firestore);return this._mutations=this._mutations.concat(new fh(n._key,pr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Vm(i,e){if((i=un(i)).firestore!==e)throw new xe(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}function yu(){return new og("serverTimestamp")}function nu(i){return zu(i=mr(i,Vi)),new AN(i,(e=>Hu(i,e)))}(function(e,n=!0){(function(o){nl=o})(tl),qa(new na("firestore",((s,{instanceIdentifier:o,options:u})=>{const h=s.getProvider("app").getImmediate(),g=new Vi(new _2(s.getProvider("auth-internal")),new T2(h,s.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new xe(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Su(m.options.projectId,v)})(h,o),h);return u={useFetchStreams:n,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),Ri(I_,x_,e),Ri(I_,x_,"esm2020")})();const d1={apiKey:"AIzaSyARwb6K0M4l-hWKi8FrOLEVqRqeHRf8JR4",authDomain:"oppmoteboka.firebaseapp.com",projectId:"oppmoteboka",storageBucket:"oppmoteboka.firebasestorage.app",messagingSenderId:"732911922070",appId:"1:732911922070:web:b16d9de65062395c018bb7"},h1=Xb().length?eh():Tp(d1),$s=OE(h1),Ne=pN(h1),CN=Xb().find(i=>i.name==="secondary")??Tp(d1,"secondary"),jm=OE(CN);function ol(){const[i,e]=U.useState(null),[n,s]=U.useState(!0),o=()=>{try{const p=new Uint8Array(16);crypto.getRandomValues(p);let m=Array.from(p).map(v=>String.fromCharCode(v)).join("");return m=btoa(m).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),m}catch{return Math.random().toString(36).slice(2)+Math.random().toString(36).slice(2)}};return U.useEffect(()=>{let p=null;const m=iR($s,async v=>{if(p&&(p(),p=null),!v){e(null),s(!1);return}try{const T=gt(Ne,"users",v.uid);let S=await hi(T);if(S.exists()){const w=S.data();if(v.email&&w?.email!==v.email)try{await Fn(T,{email:v.email})}catch(j){console.warn("Kunne ikke synkronisere epost til Firestore:",j)}if(!w?.authUid)try{await Fn(T,{authUid:o()})}catch(j){console.warn("Kunne ikke sette authUid p bruker.",j)}}else{const w={uid:v.uid,email:v.email??"",displayName:v.displayName??v.email??"",role:"student",term:null,termLabel:null,semesterStatus:"aktiv",approvedCurrentTerm:!1,createdAt:yu(),authUid:o()};await ta(T,w)}p=dp(T,w=>{const j=w.data();if(!j)return;const q={uid:v.uid,email:j?.email??v.email??"",role:j?.role??"student",term:j?.term??null,termLabel:j?.termLabel??null,semesterStatus:j?.semesterStatus??null,approvedCurrentTerm:typeof j?.approvedCurrentTerm=="boolean"?j.approvedCurrentTerm:!1,displayName:j?.name??j?.displayName??v.displayName??v.email??""};e(q),s(!1)},w=>{console.error("Feil ved realtime-lytting p bruker:",w),s(!1)})}catch(T){console.error("Feil ved henting/oppretting av bruker:",T),e(null),s(!1)}});return()=>{p&&p(),m()}},[]),{user:i,loading:n,login:async(p,m)=>{await ZC($s,p,m)},register:async(p,m)=>{await vd($s,p,m)},logout:async()=>{await sR($s)}}}var RN=Ub();const IN=gp(RN);var xN=i=>{switch(i){case"success":return DN;case"info":return ON;case"warning":return MN;case"error":return VN;default:return null}},NN=Array(12).fill(0),kN=({visible:i,className:e})=>me.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":i},me.createElement("div",{className:"sonner-spinner"},NN.map((n,s)=>me.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),DN=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},me.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),MN=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},me.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),ON=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},me.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),VN=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},me.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),jN=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},me.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),me.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),LN=()=>{let[i,e]=me.useState(document.hidden);return me.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),i},hp=1,PN=class{constructor(){this.subscribe=i=>(this.subscribers.push(i),()=>{let e=this.subscribers.indexOf(i);this.subscribers.splice(e,1)}),this.publish=i=>{this.subscribers.forEach(e=>e(i))},this.addToast=i=>{this.publish(i),this.toasts=[...this.toasts,i]},this.create=i=>{var e;let{message:n,...s}=i,o=typeof i?.id=="number"||((e=i.id)==null?void 0:e.length)>0?i.id:hp++,u=this.toasts.find(g=>g.id===o),h=i.dismissible===void 0?!0:i.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),u?this.toasts=this.toasts.map(g=>g.id===o?(this.publish({...g,...i,id:o,title:n}),{...g,...i,id:o,dismissible:h,title:n}):g):this.addToast({title:n,...s,dismissible:h,id:o}),o},this.dismiss=i=>(this.dismissedToasts.add(i),i||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:i,dismiss:!0})),i),this.message=(i,e)=>this.create({...e,message:i}),this.error=(i,e)=>this.create({...e,message:i,type:"error"}),this.success=(i,e)=>this.create({...e,type:"success",message:i}),this.info=(i,e)=>this.create({...e,type:"info",message:i}),this.warning=(i,e)=>this.create({...e,type:"warning",message:i}),this.loading=(i,e)=>this.create({...e,type:"loading",message:i}),this.promise=(i,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:i,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let s=i instanceof Promise?i:i(),o=n!==void 0,u,h=s.then(async p=>{if(u=["resolve",p],me.isValidElement(p))o=!1,this.create({id:n,type:"default",message:p});else if(zN(p)&&!p.ok){o=!1;let m=typeof e.error=="function"?await e.error(`HTTP error! status: ${p.status}`):e.error,v=typeof e.description=="function"?await e.description(`HTTP error! status: ${p.status}`):e.description;this.create({id:n,type:"error",message:m,description:v})}else if(e.success!==void 0){o=!1;let m=typeof e.success=="function"?await e.success(p):e.success,v=typeof e.description=="function"?await e.description(p):e.description;this.create({id:n,type:"success",message:m,description:v})}}).catch(async p=>{if(u=["reject",p],e.error!==void 0){o=!1;let m=typeof e.error=="function"?await e.error(p):e.error,v=typeof e.description=="function"?await e.description(p):e.description;this.create({id:n,type:"error",message:m,description:v})}}).finally(()=>{var p;o&&(this.dismiss(n),n=void 0),(p=e.finally)==null||p.call(e)}),g=()=>new Promise((p,m)=>h.then(()=>u[0]==="reject"?m(u[1]):p(u[1])).catch(m));return typeof n!="string"&&typeof n!="number"?{unwrap:g}:Object.assign(n,{unwrap:g})},this.custom=(i,e)=>{let n=e?.id||hp++;return this.create({jsx:i(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(i=>!this.dismissedToasts.has(i.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Ar=new PN,UN=(i,e)=>{let n=e?.id||hp++;return Ar.addToast({title:i,...e,id:n}),n},zN=i=>i&&typeof i=="object"&&"ok"in i&&typeof i.ok=="boolean"&&"status"in i&&typeof i.status=="number",BN=UN,qN=()=>Ar.toasts,FN=()=>Ar.getActiveToasts(),Ye=Object.assign(BN,{success:Ar.success,info:Ar.info,warning:Ar.warning,error:Ar.error,custom:Ar.custom,message:Ar.message,promise:Ar.promise,dismiss:Ar.dismiss,loading:Ar.loading},{getHistory:qN,getToasts:FN});function HN(i,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e==="top"&&n.firstChild?n.insertBefore(s,n.firstChild):n.appendChild(s),s.styleSheet?s.styleSheet.cssText=i:s.appendChild(document.createTextNode(i))}HN(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function pd(i){return i.label!==void 0}var GN=3,KN="32px",QN="16px",xb=4e3,YN=356,XN=14,$N=20,WN=200;function di(...i){return i.filter(Boolean).join(" ")}function JN(i){let[e,n]=i.split("-"),s=[];return e&&s.push(e),n&&s.push(n),s}var ZN=i=>{var e,n,s,o,u,h,g,p,m,v,T;let{invert:S,toast:w,unstyled:j,interacting:q,setHeights:B,visibleToasts:_e,heights:fe,index:te,toasts:Se,expanded:Ge,removeToast:Be,defaultRichColors:N,closeButton:R,style:x,cancelButtonStyle:V,actionButtonStyle:k,className:P="",descriptionClassName:I="",duration:Ke,position:it,gap:Y,loadingIcon:ce,expandByDefault:ve,classNames:pe,icons:Le,closeButtonAriaLabel:O="Close toast",pauseWhenPageIsHidden:G}=i,[ee,ie]=me.useState(null),[Re,Ee]=me.useState(null),[Me,st]=me.useState(!1),[he,Pe]=me.useState(!1),[ot,mt]=me.useState(!1),[ae,ge]=me.useState(!1),[Ae,oe]=me.useState(!1),[Ce,De]=me.useState(0),[Ve,ke]=me.useState(0),Ze=me.useRef(w.duration||Ke||xb),sn=me.useRef(null),_t=me.useRef(null),jt=te===0,wn=te+1<=_e,Dt=w.type,Xe=w.dismissible!==!1,At=w.className||"",Ur=w.descriptionClassName||"",xn=me.useMemo(()=>fe.findIndex(qe=>qe.toastId===w.id)||0,[fe,w.id]),ur=me.useMemo(()=>{var qe;return(qe=w.closeButton)!=null?qe:R},[w.closeButton,R]),gr=me.useMemo(()=>w.duration||Ke||xb,[w.duration,Ke]),vn=me.useRef(0),Wt=me.useRef(0),Xt=me.useRef(0),bt=me.useRef(null),[xr,rr]=it.split("-"),cr=me.useMemo(()=>fe.reduce((qe,vt,F)=>F>=xn?qe:qe+vt.height,0),[fe,xn]),zn=LN(),Nn=w.invert||S,Ct=Dt==="loading";Wt.current=me.useMemo(()=>xn*Y+cr,[xn,cr]),me.useEffect(()=>{Ze.current=gr},[gr]),me.useEffect(()=>{st(!0)},[]),me.useEffect(()=>{let qe=_t.current;if(qe){let vt=qe.getBoundingClientRect().height;return ke(vt),B(F=>[{toastId:w.id,height:vt,position:w.position},...F]),()=>B(F=>F.filter(Z=>Z.toastId!==w.id))}},[B,w.id]),me.useLayoutEffect(()=>{if(!Me)return;let qe=_t.current,vt=qe.style.height;qe.style.height="auto";let F=qe.getBoundingClientRect().height;qe.style.height=vt,ke(F),B(Z=>Z.find(de=>de.toastId===w.id)?Z.map(de=>de.toastId===w.id?{...de,height:F}:de):[{toastId:w.id,height:F,position:w.position},...Z])},[Me,w.title,w.description,B,w.id]);let an=me.useCallback(()=>{Pe(!0),De(Wt.current),B(qe=>qe.filter(vt=>vt.toastId!==w.id)),setTimeout(()=>{Be(w)},WN)},[w,Be,B,Wt]);me.useEffect(()=>{if(w.promise&&Dt==="loading"||w.duration===1/0||w.type==="loading")return;let qe;return Ge||q||G&&zn?(()=>{if(Xt.current<vn.current){let vt=new Date().getTime()-vn.current;Ze.current=Ze.current-vt}Xt.current=new Date().getTime()})():Ze.current!==1/0&&(vn.current=new Date().getTime(),qe=setTimeout(()=>{var vt;(vt=w.onAutoClose)==null||vt.call(w,w),an()},Ze.current)),()=>clearTimeout(qe)},[Ge,q,w,Dt,G,zn,an]),me.useEffect(()=>{w.delete&&an()},[an,w.delete]);function Gn(){var qe,vt,F;return Le!=null&&Le.loading?me.createElement("div",{className:di(pe?.loader,(qe=w?.classNames)==null?void 0:qe.loader,"sonner-loader"),"data-visible":Dt==="loading"},Le.loading):ce?me.createElement("div",{className:di(pe?.loader,(vt=w?.classNames)==null?void 0:vt.loader,"sonner-loader"),"data-visible":Dt==="loading"},ce):me.createElement(kN,{className:di(pe?.loader,(F=w?.classNames)==null?void 0:F.loader),visible:Dt==="loading"})}return me.createElement("li",{tabIndex:0,ref:_t,className:di(P,At,pe?.toast,(e=w?.classNames)==null?void 0:e.toast,pe?.default,pe?.[Dt],(n=w?.classNames)==null?void 0:n[Dt]),"data-sonner-toast":"","data-rich-colors":(s=w.richColors)!=null?s:N,"data-styled":!(w.jsx||w.unstyled||j),"data-mounted":Me,"data-promise":!!w.promise,"data-swiped":Ae,"data-removed":he,"data-visible":wn,"data-y-position":xr,"data-x-position":rr,"data-index":te,"data-front":jt,"data-swiping":ot,"data-dismissible":Xe,"data-type":Dt,"data-invert":Nn,"data-swipe-out":ae,"data-swipe-direction":Re,"data-expanded":!!(Ge||ve&&Me),style:{"--index":te,"--toasts-before":te,"--z-index":Se.length-te,"--offset":`${he?Ce:Wt.current}px`,"--initial-height":ve?"auto":`${Ve}px`,...x,...w.style},onDragEnd:()=>{mt(!1),ie(null),bt.current=null},onPointerDown:qe=>{Ct||!Xe||(sn.current=new Date,De(Wt.current),qe.target.setPointerCapture(qe.pointerId),qe.target.tagName!=="BUTTON"&&(mt(!0),bt.current={x:qe.clientX,y:qe.clientY}))},onPointerUp:()=>{var qe,vt,F,Z;if(ae||!Xe)return;bt.current=null;let de=Number(((qe=_t.current)==null?void 0:qe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ye=Number(((vt=_t.current)==null?void 0:vt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),we=new Date().getTime()-((F=sn.current)==null?void 0:F.getTime()),Fe=ee==="x"?de:ye,Ie=Math.abs(Fe)/we;if(Math.abs(Fe)>=$N||Ie>.11){De(Wt.current),(Z=w.onDismiss)==null||Z.call(w,w),Ee(ee==="x"?de>0?"right":"left":ye>0?"down":"up"),an(),ge(!0),oe(!1);return}mt(!1),ie(null)},onPointerMove:qe=>{var vt,F,Z,de;if(!bt.current||!Xe||((vt=window.getSelection())==null?void 0:vt.toString().length)>0)return;let ye=qe.clientY-bt.current.y,we=qe.clientX-bt.current.x,Fe=(F=i.swipeDirections)!=null?F:JN(it);!ee&&(Math.abs(we)>1||Math.abs(ye)>1)&&ie(Math.abs(we)>Math.abs(ye)?"x":"y");let Ie={x:0,y:0};ee==="y"?(Fe.includes("top")||Fe.includes("bottom"))&&(Fe.includes("top")&&ye<0||Fe.includes("bottom")&&ye>0)&&(Ie.y=ye):ee==="x"&&(Fe.includes("left")||Fe.includes("right"))&&(Fe.includes("left")&&we<0||Fe.includes("right")&&we>0)&&(Ie.x=we),(Math.abs(Ie.x)>0||Math.abs(Ie.y)>0)&&oe(!0),(Z=_t.current)==null||Z.style.setProperty("--swipe-amount-x",`${Ie.x}px`),(de=_t.current)==null||de.style.setProperty("--swipe-amount-y",`${Ie.y}px`)}},ur&&!w.jsx?me.createElement("button",{"aria-label":O,"data-disabled":Ct,"data-close-button":!0,onClick:Ct||!Xe?()=>{}:()=>{var qe;an(),(qe=w.onDismiss)==null||qe.call(w,w)},className:di(pe?.closeButton,(o=w?.classNames)==null?void 0:o.closeButton)},(u=Le?.close)!=null?u:jN):null,w.jsx||U.isValidElement(w.title)?w.jsx?w.jsx:typeof w.title=="function"?w.title():w.title:me.createElement(me.Fragment,null,Dt||w.icon||w.promise?me.createElement("div",{"data-icon":"",className:di(pe?.icon,(h=w?.classNames)==null?void 0:h.icon)},w.promise||w.type==="loading"&&!w.icon?w.icon||Gn():null,w.type!=="loading"?w.icon||Le?.[Dt]||xN(Dt):null):null,me.createElement("div",{"data-content":"",className:di(pe?.content,(g=w?.classNames)==null?void 0:g.content)},me.createElement("div",{"data-title":"",className:di(pe?.title,(p=w?.classNames)==null?void 0:p.title)},typeof w.title=="function"?w.title():w.title),w.description?me.createElement("div",{"data-description":"",className:di(I,Ur,pe?.description,(m=w?.classNames)==null?void 0:m.description)},typeof w.description=="function"?w.description():w.description):null),U.isValidElement(w.cancel)?w.cancel:w.cancel&&pd(w.cancel)?me.createElement("button",{"data-button":!0,"data-cancel":!0,style:w.cancelButtonStyle||V,onClick:qe=>{var vt,F;pd(w.cancel)&&Xe&&((F=(vt=w.cancel).onClick)==null||F.call(vt,qe),an())},className:di(pe?.cancelButton,(v=w?.classNames)==null?void 0:v.cancelButton)},w.cancel.label):null,U.isValidElement(w.action)?w.action:w.action&&pd(w.action)?me.createElement("button",{"data-button":!0,"data-action":!0,style:w.actionButtonStyle||k,onClick:qe=>{var vt,F;pd(w.action)&&((F=(vt=w.action).onClick)==null||F.call(vt,qe),!qe.defaultPrevented&&an())},className:di(pe?.actionButton,(T=w?.classNames)==null?void 0:T.actionButton)},w.action.label):null))};function Nb(){if(typeof window>"u"||typeof document>"u")return"ltr";let i=document.documentElement.getAttribute("dir");return i==="auto"||!i?window.getComputedStyle(document.documentElement).direction:i}function ek(i,e){let n={};return[i,e].forEach((s,o)=>{let u=o===1,h=u?"--mobile-offset":"--offset",g=u?QN:KN;function p(m){["top","right","bottom","left"].forEach(v=>{n[`${h}-${v}`]=typeof m=="number"?`${m}px`:m})}typeof s=="number"||typeof s=="string"?p(s):typeof s=="object"?["top","right","bottom","left"].forEach(m=>{s[m]===void 0?n[`${h}-${m}`]=g:n[`${h}-${m}`]=typeof s[m]=="number"?`${s[m]}px`:s[m]}):p(g)}),n}var tk=U.forwardRef(function(i,e){let{invert:n,position:s="bottom-right",hotkey:o=["altKey","KeyT"],expand:u,closeButton:h,className:g,offset:p,mobileOffset:m,theme:v="light",richColors:T,duration:S,style:w,visibleToasts:j=GN,toastOptions:q,dir:B=Nb(),gap:_e=XN,loadingIcon:fe,icons:te,containerAriaLabel:Se="Notifications",pauseWhenPageIsHidden:Ge}=i,[Be,N]=me.useState([]),R=me.useMemo(()=>Array.from(new Set([s].concat(Be.filter(G=>G.position).map(G=>G.position)))),[Be,s]),[x,V]=me.useState([]),[k,P]=me.useState(!1),[I,Ke]=me.useState(!1),[it,Y]=me.useState(v!=="system"?v:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ce=me.useRef(null),ve=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),pe=me.useRef(null),Le=me.useRef(!1),O=me.useCallback(G=>{N(ee=>{var ie;return(ie=ee.find(Re=>Re.id===G.id))!=null&&ie.delete||Ar.dismiss(G.id),ee.filter(({id:Re})=>Re!==G.id)})},[]);return me.useEffect(()=>Ar.subscribe(G=>{if(G.dismiss){N(ee=>ee.map(ie=>ie.id===G.id?{...ie,delete:!0}:ie));return}setTimeout(()=>{IN.flushSync(()=>{N(ee=>{let ie=ee.findIndex(Re=>Re.id===G.id);return ie!==-1?[...ee.slice(0,ie),{...ee[ie],...G},...ee.slice(ie+1)]:[G,...ee]})})})}),[]),me.useEffect(()=>{if(v!=="system"){Y(v);return}if(v==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Y("dark"):Y("light")),typeof window>"u")return;let G=window.matchMedia("(prefers-color-scheme: dark)");try{G.addEventListener("change",({matches:ee})=>{Y(ee?"dark":"light")})}catch{G.addListener(({matches:ie})=>{try{Y(ie?"dark":"light")}catch(Re){console.error(Re)}})}},[v]),me.useEffect(()=>{Be.length<=1&&P(!1)},[Be]),me.useEffect(()=>{let G=ee=>{var ie,Re;o.every(Ee=>ee[Ee]||ee.code===Ee)&&(P(!0),(ie=ce.current)==null||ie.focus()),ee.code==="Escape"&&(document.activeElement===ce.current||(Re=ce.current)!=null&&Re.contains(document.activeElement))&&P(!1)};return document.addEventListener("keydown",G),()=>document.removeEventListener("keydown",G)},[o]),me.useEffect(()=>{if(ce.current)return()=>{pe.current&&(pe.current.focus({preventScroll:!0}),pe.current=null,Le.current=!1)}},[ce.current]),me.createElement("section",{ref:e,"aria-label":`${Se} ${ve}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},R.map((G,ee)=>{var ie;let[Re,Ee]=G.split("-");return Be.length?me.createElement("ol",{key:G,dir:B==="auto"?Nb():B,tabIndex:-1,ref:ce,className:g,"data-sonner-toaster":!0,"data-theme":it,"data-y-position":Re,"data-lifted":k&&Be.length>1&&!u,"data-x-position":Ee,style:{"--front-toast-height":`${((ie=x[0])==null?void 0:ie.height)||0}px`,"--width":`${YN}px`,"--gap":`${_e}px`,...w,...ek(p,m)},onBlur:Me=>{Le.current&&!Me.currentTarget.contains(Me.relatedTarget)&&(Le.current=!1,pe.current&&(pe.current.focus({preventScroll:!0}),pe.current=null))},onFocus:Me=>{Me.target instanceof HTMLElement&&Me.target.dataset.dismissible==="false"||Le.current||(Le.current=!0,pe.current=Me.relatedTarget)},onMouseEnter:()=>P(!0),onMouseMove:()=>P(!0),onMouseLeave:()=>{I||P(!1)},onDragEnd:()=>P(!1),onPointerDown:Me=>{Me.target instanceof HTMLElement&&Me.target.dataset.dismissible==="false"||Ke(!0)},onPointerUp:()=>Ke(!1)},Be.filter(Me=>!Me.position&&ee===0||Me.position===G).map((Me,st)=>{var he,Pe;return me.createElement(ZN,{key:Me.id,icons:te,index:st,toast:Me,defaultRichColors:T,duration:(he=q?.duration)!=null?he:S,className:q?.className,descriptionClassName:q?.descriptionClassName,invert:n,visibleToasts:j,closeButton:(Pe=q?.closeButton)!=null?Pe:h,interacting:I,position:G,style:q?.style,unstyled:q?.unstyled,classNames:q?.classNames,cancelButtonStyle:q?.cancelButtonStyle,actionButtonStyle:q?.actionButtonStyle,removeToast:O,toasts:Be.filter(ot=>ot.position==Me.position),heights:x.filter(ot=>ot.position==Me.position),setHeights:V,expandByDefault:u,gap:_e,loadingIcon:fe,expanded:k,pauseWhenPageIsHidden:Ge,swipeDirections:i.swipeDirections})})):null}))});const nk="modulepreload",rk=function(i){return"/"+i},kb={},ik=function(e,n,s){let o=Promise.resolve();if(n&&n.length>0){let p=function(m){return Promise.all(m.map(v=>Promise.resolve(v).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),g=h?.nonce||h?.getAttribute("nonce");o=p(n.map(m=>{if(m=rk(m),m in kb)return;kb[m]=!0;const v=m.endsWith(".css"),T=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${T}`))return;const S=document.createElement("link");if(S.rel=v?"stylesheet":nk,v||(S.as="script"),S.crossOrigin="",S.href=m,g&&S.setAttribute("nonce",g),document.head.appendChild(S),v)return new Promise((w,j)=>{S.addEventListener("load",w),S.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${m}`)))})}))}function u(h){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=h,window.dispatchEvent(g),!g.defaultPrevented)throw h}return o.then(h=>{for(const g of h||[])g.status==="rejected"&&u(g.reason);return e().catch(u)})},sk=({onCode:i,onError:e})=>{const n=U.useMemo(()=>`qr-reader-${Math.random().toString(36).slice(2)}`,[]);return U.useEffect(()=>{let s=null,o=!1,u=!1,h;return(async()=>{let p;try{p=(await ik(()=>import("./index-BpOJNGYJ.js"),[])).Html5Qrcode}catch(m){console.warn("QR: klarte ikke  laste html5-qrcode-modulen",m),e?.(m);return}try{s=new p(n)}catch(m){console.warn("QR: konstruktr-feil for Html5Qrcode",m),e?.(m);return}h=window.setTimeout(()=>{!o&&!u&&(console.warn("QR: start timeout  ingen respons fra kamera p 7s"),e?.(new Error("QR start timeout")))},7e3),s.start({facingMode:"environment"},{fps:10,qrbox:250},m=>{i(m)},()=>{}).then(()=>{o=!0,h&&window.clearTimeout(h)}).catch(m=>{h&&window.clearTimeout(h),!u&&(console.warn("Kunne ikke starte QR-leser:",m),e?.(m))})})(),()=>{if(u=!0,h&&window.clearTimeout(h),!s)return;s.stop().catch(()=>{}).then(()=>{try{s?.clear()}catch{}}).finally(()=>{try{const v=document.getElementById(n)?.querySelector("video"),T=v?.srcObject??void 0;T&&(T.getTracks().forEach(S=>{try{S.stop()}catch{}}),v&&(v.srcObject=null))}catch{}})}},[n,i,e]),_.jsx("div",{id:n,style:{width:"100%"}})};class ak extends me.Component{state={hasError:!1};static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){if(this.props.onError)try{this.props.onError(e,n)}catch{}}componentDidUpdate(e){e.resetKey!==this.props.resetKey&&this.setState({hasError:!1,error:void 0})}render(){if(this.state.hasError){const{fallback:e}=this.props;return e?typeof e=="function"?e(this.state.error):e:null}return this.props.children}}async function ok(){const e=(await ln(Qt(Ne,"terms"))).docs.map(n=>{const s=n.data(),o=typeof s?.value=="number"?s.value:void 0;if(typeof o!="number")return null;const u=typeof s?.label=="string"?s.label:"",h=typeof s?.order=="number"?s.order:void 0;return{value:o,label:u,order:h}}).filter(Boolean);return e.sort((n,s)=>(n.order??n.value)-(s.order??s.value)),e}function yg(){const[i,e]=U.useState([]),[n,s]=U.useState(!0),[o,u]=U.useState(null);U.useEffect(()=>{let g=!0;return(async()=>{try{s(!0);const p=await ok();g&&e(p)}catch(p){g&&u(p)}finally{g&&s(!1)}})(),()=>{g=!1}},[]);const h=U.useMemo(()=>{const g=new Map;for(const p of i)g.set(p.value,p);return g},[i]);return{options:i,byValue:h,loading:n,error:o}}function za(i,e){if(e==null)return"Ukjent termin";let n;return Array.isArray(i)?n=i.find(s=>s.value===e):i instanceof Map&&(n=i.get(e)),n&&n.label?n.label:`Termin ${e}`}function lk(i){if(i==="Testmodul 1 - Testtermin 1")return i;const e=/(Modul)\s+(\d+)\s*-\s*(Blokk|Termin)\s+(\d+)/i,n=i.match(e);if(n){const u=n[2],h=n[4];return`M${u} - T${h}`}const s=/(Modul|Termin)\s+(\d+)/i,o=i.match(s);return o?`M${o[2]}`:i}function Db(i,e){if(e==null)return"";const n=za(i,e);return lk(n)}function uk({value:i,onChange:e,length:n=6,disabled:s}){const o=U.useRef([]),u=U.useMemo(()=>{const T=(i||"").replace(/\D/g,"").slice(0,n),S=new Array(n).fill("");for(let w=0;w<T.length;w++)S[w]=T[w];return S},[i,n]),h=T=>{const S=o.current[T];S&&S.focus()},g=(T,S)=>{const w=S.replace(/\D/g,"");if(!w)return;const q=u.join("").split("");let B=T;for(const _e of w){if(B>=n)break;q[B]=_e,B++}e(q.join("").slice(0,n)),B<=n-1&&h(B)},p=(T,S)=>{const w=S.target.value;if(w.length>1){g(T,w);return}const j=w.replace(/\D/g,""),q=u.slice();q[T]=j||"";const B=q.join("");e(B),j&&T<n-1&&h(T+1)},m=(T,S)=>{const w=S.key;if(w==="Backspace"){if(u[T]){const j=u.slice();j[T]="",e(j.join("")),S.preventDefault()}else if(T>0){S.preventDefault(),h(T-1);const j=u.slice();j[T-1]="",e(j.join(""))}}else w==="ArrowLeft"&&T>0?(S.preventDefault(),h(T-1)):w==="ArrowRight"&&T<n-1&&(S.preventDefault(),h(T+1))},v=(T,S)=>{const w=S.clipboardData.getData("text");w&&(S.preventDefault(),g(T,w))};return U.useEffect(()=>{o.current=o.current.slice(0,n)},[n]),_.jsx("div",{className:"",style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:u.map((T,S)=>_.jsx("input",{ref:w=>o.current[S]=w,type:"text",inputMode:"numeric",pattern:"[0-9]*",autoComplete:"one-time-code",className:"",style:{borderRadius:"7.5px",border:"2px solid var(--color-black",width:"2.2rem",height:"3.4rem",margin:"0 0.25rem",padding:"0.5rem 0.25rem",textAlign:"center"},value:T,onChange:w=>p(S,w),onKeyDown:w=>m(S,w),onPaste:w=>v(S,w),"aria-label":`Kode siffer ${S+1}`,disabled:s,maxLength:1},S))})}function ck({user:i}){const[e,n]=U.useState(""),[s,o]=U.useState(!1),[u,h]=U.useState(i.term??11),[g,p]=U.useState(i.approvedCurrentTerm??!1),[m,v]=U.useState([]),[T,S]=U.useState(!1),[w,j]=U.useState(0),[q,B]=U.useState(!1),{options:_e}=yg(),[fe,te]=U.useState(!1),[Se,Ge]=U.useState(null),[Be,N]=U.useState([]),[R,x]=U.useState({}),[V,k]=U.useState("idle"),[P,I]=U.useState(null),[Ke,it]=U.useState(null),Y=i.semesterStatus&&i.semesterStatus!=="aktiv",ce=()=>{k("idle"),I(null),it(null),n(""),B(!1)};U.useEffect(()=>{typeof i.term=="number"&&h(i.term),p(!!i.approvedCurrentTerm)},[i.term,i.approvedCurrentTerm]);const ve=async()=>{try{const he=gt(Ne,"users",i.uid),Pe=await hi(he),ot=Pe.exists()?Pe.data()?.authUid:null;if(typeof ot=="string"&&ot.length>=8)return ot;const mt=`authUid:${i.uid}`;let ae=localStorage.getItem(mt);if(!ae){try{const ge=new Uint8Array(16);crypto.getRandomValues(ge),ae=Array.from(ge).map(Ae=>String.fromCharCode(Ae)).join(""),ae=btoa(ae).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}catch{ae=Math.random().toString(36).slice(2)+Math.random().toString(36).slice(2)}localStorage.setItem(mt,ae)}return await ta(he,{authUid:ae},{merge:!0}),ae}catch(he){return console.warn("Kunne ikke generere/lagre authUid, bruker fallback i minnet.",he),Math.random().toString(36).slice(2)+Math.random().toString(36).slice(2)}},pe=async he=>{if(!(!he||he.length<6)){o(!0),k("idle"),I(null);try{const Pe=Qt(Ne,"sessions"),ot=qn(Pe,fn("code","==",he)),mt=await ln(ot);if(mt.empty){k("error"),I("Fant ingen kt med denne koden."),n(""),B(!1),o(!1);return}const ae=mt.docs[0],ge=ae.data(),Ae=gt(Ne,"sessions",ae.id,"attendance",i.uid);if((await hi(Ae)).exists()){k("error"),I("Du er allerede registrert p denne kten."),n(""),B(!1),o(!1);return}await ta(Ae,{userId:i.uid,studentName:i.displayName,studentEmail:i.email,createdAt:Yt.now(),status:"present"});const Ce=ge.name||"kten";it(Ce),k("success"),I(null),B(!1),n(""),j(De=>De+1),Ee()}catch(Pe){console.error(Pe),k("error"),I("Noe gikk galt ved registrering av oppmte."),n(""),B(!1)}finally{o(!1)}}},Le=he=>{if(!he||s)return;const Pe=he.replace(/\D/g,"").slice(0,6);Pe.length===6&&(n(Pe),B(!1),pe(Pe))},O=he=>{console.warn("QR-skanner-feil:",he),B(!1),k("error"),I("Kunne ikke starte kamera. Sjekk kameratilgang i nettleseren eller skriv inn oppmtekoden manuelt.")};U.useEffect(()=>{(async()=>{S(!0);try{const Pe=Qt(Ne,"requirements"),ot=qn(Pe,fn("term","==",u)),ae=(await ln(ot)).docs.map(Xe=>{const At=Xe.data();return{category:At.category,requiredCount:At.requiredCount}}),ge=Qt(Ne,"sessions"),Ae=qn(ge,fn("term","==",u)),Ce=(await ln(Ae)).docs.map(Xe=>{const At=Xe.data();return{id:Xe.id,timeId:typeof At?.timeId=="string"?At.timeId:void 0,name:typeof At?.name=="string"?At.name:void 0,category:typeof At?.category=="string"?At.category:void 0}}),De=Qt(Ne,"times"),Ve=qn(De,fn("term","==",u)),Ze=(await ln(Ve)).docs.map(Xe=>{const At=Xe.data();return{id:Xe.id,name:At.name,category:At.category,term:At.term,order:typeof At?.order=="number"?At.order:void 0}}),sn=new Map;for(const Xe of Ze)Xe.category&&sn.set(Xe.category,(sn.get(Xe.category)??0)+1);const _t=new Map,jt={};for(const Xe of Ce){if(!Xe.category)continue;const At=gt(Ne,"sessions",Xe.id,"attendance",i.uid);if((await hi(At)).exists()){if(_t.set(Xe.category,(_t.get(Xe.category)??0)+1),Xe.timeId)jt[Xe.timeId]=!0;else if(Xe.name&&Xe.category){const xn=Ze.find(ur=>ur.category===Xe.category&&ur.name===Xe.name);xn&&(jt[xn.id]=!0)}}}const wn=new Set;for(const Xe of ae)wn.add(Xe.category);for(const Xe of Ce)Xe.category&&wn.add(Xe.category);for(const Xe of Ze)Xe.category&&wn.add(Xe.category);const Dt=[];wn.forEach(Xe=>{const At=ae.find(gr=>gr.category===Xe),Ur=At?At.requiredCount:null,xn=sn.get(Xe)??0,ur=_t.get(Xe)??0;Dt.push({category:Xe,attendedCount:ur,totalSessions:xn,requiredCount:Ur})}),Dt.sort((Xe,At)=>Xe.category.localeCompare(At.category,"nb-NO",{sensitivity:"base"})),v(Dt),N(Ze),x(jt)}catch(Pe){console.error(Pe),v([]),N([]),x({})}finally{S(!1)}})()},[u,i.uid,w]);const G=he=>{const Pe=he.match(/^\s*(\d+)/);return Pe?parseInt(Pe[1],10):Number.POSITIVE_INFINITY},ee=U.useMemo(()=>{if(!fe||!Se)return[];const he=Be.filter(Pe=>Pe.category===Se).map(Pe=>({...Pe,attended:!!R[Pe.id]}));return he.sort((Pe,ot)=>{const mt=(Pe.order??Number.MAX_SAFE_INTEGER)-(ot.order??Number.MAX_SAFE_INTEGER);if(mt!==0)return mt;const ae=G(Pe.name),ge=G(ot.name);return ae!==ge?ae-ge:Pe.name.localeCompare(ot.name,"nb-NO",{sensitivity:"base"})}),he},[fe,Se,Be,R]),ie=he=>{Ge(he),te(!0)},Re=()=>{te(!1),Ge(null)},Ee=async()=>{try{const he=u,ot=(await ln(qn(Qt(Ne,"requirements"),fn("term","==",he)))).docs.map(ke=>ke.data());if(!ot.length)return;const ae=(await ln(qn(Qt(Ne,"sessions"),fn("term","==",he)))).docs.map(ke=>{const Ze=ke.data();return{id:ke.id,category:typeof Ze?.category=="string"?Ze.category:void 0}}),ge=new Map;for(const ke of ae){if(!ke.category)continue;const Ze=gt(Ne,"sessions",ke.id,"attendance",i.uid);(await hi(Ze)).exists()&&ge.set(ke.category,(ge.get(ke.category)??0)+1)}if(!ot.every(ke=>{const Ze=typeof ke.requiredCount=="number"?ke.requiredCount:0;return Ze<=0?!0:(ge.get(ke.category)??0)>=Ze}))return;const oe=await ve(),Ce=`${oe}_${he}`,De=gt(Ne,"attendanceBook",Ce);if((await hi(De)).exists())return;await ta(De,{authUid:oe,term:he,acceptedBy:"system",acceptedTimeStamp:yu()});try{await Fn(gt(Ne,"users",i.uid),{approvedCurrentTerm:!0}),p(!0)}catch(ke){console.warn("Kunne ikke oppdatere approvedCurrentTerm p bruker:",ke)}}catch(he){console.warn("Klarte ikke  registrere akseptert oppmtebok:",he)}},Me=async()=>{const he=(u??0)+1;try{await Fn(gt(Ne,"users",i.uid),{term:he,approvedCurrentTerm:!1})}catch(Pe){console.warn("Kunne ikke oppdatere bruker ved semesterbytte:",Pe)}finally{h(he),p(!1),j(Pe=>Pe+1)}},st=he=>{const ot=(he||"").replace(/\D/g,"").slice(0,6);n(ot),ot.length===6&&!s&&pe(ot)};return U.useEffect(()=>{if(V==="idle")return;const Pe=setTimeout(()=>{ce()},V==="success"?1e4:2e3);return()=>clearTimeout(Pe)},[V]),_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"card student-card student-card-top round-corner-top-f",children:[_.jsxs("div",{className:"studentInfo",children:[_.jsx("h2",{children:i.displayName||i.email}),_.jsx("p",{className:"thinFont smallText opaqueFont",children:za(_e,u)})]}),_.jsx("img",{src:"/card-man.svg",alt:"Student-profile-placeholder"})]}),_.jsx("div",{className:"card student-card student-card-bottom round-corner-bottom-f",children:V==="success"?_.jsx(_.Fragment,{children:_.jsxs("div",{className:"registered-sucsess",children:[_.jsx("img",{src:"/registered.svg",alt:"Registered-icon"}),_.jsx("h3",{className:"",children:"Oppmte registrert"}),Ke&&_.jsx("p",{className:"",children:Ke})]})}):V==="error"?_.jsx(_.Fragment,{children:_.jsxs("div",{className:"registered-error",children:[_.jsx("img",{src:"/error.svg",alt:"Error-icon"}),_.jsx("h3",{className:"",children:"Kunne ikke registrere oppmte"}),_.jsx("p",{className:"",children:"Fant ingen gruppetimer med denne koden. Sjekk at kten er pen hos lrer."})]})}):_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"code-input-container",children:[_.jsx("p",{className:"spacedFont thinFont",children:"Oppmtekode fra lrer"}),_.jsx(uk,{value:e,onChange:st,disabled:s})]}),_.jsx("img",{src:"/qrscan.svg",alt:"QR-code-icon",className:"qr-code-icon"}),_.jsx("br",{}),_.jsx("button",{type:"button",onClick:()=>B(!0),className:"button-colorless fontUnderline boldFont QRbutton",children:"Skann QR-kode"}),q&&_.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:60},onClick:()=>B(!1),role:"dialog","aria-modal":"true","aria-label":"Skann QR-kode",children:_.jsxs("div",{onClick:he=>he.stopPropagation(),style:{width:"100%",maxWidth:"480px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[_.jsx("h3",{style:{margin:0},children:"Skann QR-kode"}),_.jsx("button",{type:"button",onClick:()=>B(!1),style:{border:"none",background:"transparent",fontSize:"1.2rem",cursor:"pointer"},"aria-label":"Lukk",title:"Lukk",children:""})]}),_.jsx("div",{style:{borderRadius:"0.75rem",overflow:"hidden",border:"1px solid #e5e7eb"},children:_.jsx(ak,{onError:he=>O(he),resetKey:q,children:_.jsx(sk,{onCode:Le,onError:O})})})]})})]})}),g&&_.jsxs("div",{className:"card round-corners-whole-f approved-term-card attendance-approved",children:[_.jsx("h2",{children:"Godkjent"}),_.jsxs("p",{className:"thinFont opaqueFont",children:["Bra jobba! Kravene for ",za(_e,u).toLowerCase()," er oppndd. Lykke til p eksamen!"]}),_.jsx("button",{className:"btn button-primary button-black button-next-semester",onClick:Me,children:"Start neste semester"}),_.jsx("button",{className:"button-primary button-colorless fontUnderline",children:"Har innvilget permisjon"})]}),_.jsxs("div",{className:"card round-corners-whole-f student-overview-card",children:[Y&&_.jsxs("p",{className:"text-red text-center",children:['Du er markert som "',i.semesterStatus,'" dette semesteret. Ingen oppmtekrav, men du kan fortsatt registrere oppmte.']}),_.jsx("section",{children:T?_.jsx(Wd,{}):m.length===0?_.jsx("p",{className:"fs-0_9 text-gray-500",children:"Ingen registrerte timer for denne terminen enn."}):_.jsxs(_.Fragment,{children:[_.jsx("h2",{children:"Min oppmtebok"}),_.jsxs("p",{className:"thinFont opaqueFont",children:["Her finner du alle fullfrte",_.jsx("br",{})," og fremtidige oppmter."]}),_.jsx("table",{className:"table-container",children:_.jsx("tbody",{children:m.map(he=>{const Pe=he.requiredCount!=null&&he.attendedCount>=he.requiredCount;return _.jsxs("tr",{onClick:()=>ie(he.category),children:[_.jsx("td",{className:"requirement-meet-icon",children:Pe?_.jsx("img",{src:"/check-white.svg",alt:"Checkmark-icon"}):_.jsx(_.Fragment,{})}),_.jsx("td",{className:"class-overview thinFont smal",children:he.category}),_.jsx("td",{className:"spacedFont",children:he.totalSessions>0?`${he.attendedCount}/${he.totalSessions}`:he.attendedCount}),_.jsx("td",{className:"required-classes",children:he.requiredCount??"-"})]},he.category)})})}),g&&_.jsxs(_.Fragment,{children:[_.jsx("h2",{className:"attendance-approved",children:"Godkjent"}),_.jsxs("p",{className:"thinFont opaqueFont attendance-approved",children:["Bra jobba! Kravene for ",za(_e,u).toLowerCase()," er oppndd. Lykke til p eksamen!"]})]})]})}),fe&&_.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},onClick:Re,children:_.jsxs("div",{onClick:he=>he.stopPropagation(),style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[_.jsx("h3",{style:{margin:0},children:Se?`Oppmte i ${Se}`:"Oppmte"}),_.jsx("button",{type:"button",onClick:Re,style:{border:"none",background:"transparent",fontSize:"1.2rem",cursor:"pointer"},"aria-label":"Lukk",title:"Lukk",children:""})]}),ee.length===0?_.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"Ingen timer er definert i denne gruppen enda."}):_.jsx("ul",{style:{listStyle:"none",padding:0,marginTop:"0.75rem"},children:ee.map(he=>_.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.35rem 0",borderBottom:"1px solid #f3f4f6"},children:[_.jsx("span",{children:he.name}),_.jsx("span",{className:"button-small button-thin button-black",children:he.attended?"Registrert":"Mangler"})]},he.id))}),_.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"0.75rem"},children:_.jsx("button",{type:"button",onClick:Re,style:{padding:"0.35rem 0.8rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#fff",cursor:"pointer"},children:"Lukk"})})]})})]})]})}var dk=Object.defineProperty,Yd=Object.getOwnPropertySymbols,f1=Object.prototype.hasOwnProperty,m1=Object.prototype.propertyIsEnumerable,Mb=(i,e,n)=>e in i?dk(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,fp=(i,e)=>{for(var n in e||(e={}))f1.call(e,n)&&Mb(i,n,e[n]);if(Yd)for(var n of Yd(e))m1.call(e,n)&&Mb(i,n,e[n]);return i},mp=(i,e)=>{var n={};for(var s in i)f1.call(i,s)&&e.indexOf(s)<0&&(n[s]=i[s]);if(i!=null&&Yd)for(var s of Yd(i))e.indexOf(s)<0&&m1.call(i,s)&&(n[s]=i[s]);return n};var Qa;(i=>{const e=class wt{constructor(p,m,v,T){if(this.version=p,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],p<wt.MIN_VERSION||p>wt.MAX_VERSION)throw new RangeError("Version value out of range");if(T<-1||T>7)throw new RangeError("Mask value out of range");this.size=p*4+17;let S=[];for(let j=0;j<this.size;j++)S.push(!1);for(let j=0;j<this.size;j++)this.modules.push(S.slice()),this.isFunction.push(S.slice());this.drawFunctionPatterns();const w=this.addEccAndInterleave(v);if(this.drawCodewords(w),T==-1){let j=1e9;for(let q=0;q<8;q++){this.applyMask(q),this.drawFormatBits(q);const B=this.getPenaltyScore();B<j&&(T=q,j=B),this.applyMask(q)}}o(0<=T&&T<=7),this.mask=T,this.applyMask(T),this.drawFormatBits(T),this.isFunction=[]}static encodeText(p,m){const v=i.QrSegment.makeSegments(p);return wt.encodeSegments(v,m)}static encodeBinary(p,m){const v=i.QrSegment.makeBytes(p);return wt.encodeSegments([v],m)}static encodeSegments(p,m,v=1,T=40,S=-1,w=!0){if(!(wt.MIN_VERSION<=v&&v<=T&&T<=wt.MAX_VERSION)||S<-1||S>7)throw new RangeError("Invalid value");let j,q;for(j=v;;j++){const te=wt.getNumDataCodewords(j,m)*8,Se=h.getTotalBits(p,j);if(Se<=te){q=Se;break}if(j>=T)throw new RangeError("Data too long")}for(const te of[wt.Ecc.MEDIUM,wt.Ecc.QUARTILE,wt.Ecc.HIGH])w&&q<=wt.getNumDataCodewords(j,te)*8&&(m=te);let B=[];for(const te of p){n(te.mode.modeBits,4,B),n(te.numChars,te.mode.numCharCountBits(j),B);for(const Se of te.getData())B.push(Se)}o(B.length==q);const _e=wt.getNumDataCodewords(j,m)*8;o(B.length<=_e),n(0,Math.min(4,_e-B.length),B),n(0,(8-B.length%8)%8,B),o(B.length%8==0);for(let te=236;B.length<_e;te^=253)n(te,8,B);let fe=[];for(;fe.length*8<B.length;)fe.push(0);return B.forEach((te,Se)=>fe[Se>>>3]|=te<<7-(Se&7)),new wt(j,m,fe,S)}getModule(p,m){return 0<=p&&p<this.size&&0<=m&&m<this.size&&this.modules[m][p]}getModules(){return this.modules}drawFunctionPatterns(){for(let v=0;v<this.size;v++)this.setFunctionModule(6,v,v%2==0),this.setFunctionModule(v,6,v%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const p=this.getAlignmentPatternPositions(),m=p.length;for(let v=0;v<m;v++)for(let T=0;T<m;T++)v==0&&T==0||v==0&&T==m-1||v==m-1&&T==0||this.drawAlignmentPattern(p[v],p[T]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(p){const m=this.errorCorrectionLevel.formatBits<<3|p;let v=m;for(let S=0;S<10;S++)v=v<<1^(v>>>9)*1335;const T=(m<<10|v)^21522;o(T>>>15==0);for(let S=0;S<=5;S++)this.setFunctionModule(8,S,s(T,S));this.setFunctionModule(8,7,s(T,6)),this.setFunctionModule(8,8,s(T,7)),this.setFunctionModule(7,8,s(T,8));for(let S=9;S<15;S++)this.setFunctionModule(14-S,8,s(T,S));for(let S=0;S<8;S++)this.setFunctionModule(this.size-1-S,8,s(T,S));for(let S=8;S<15;S++)this.setFunctionModule(8,this.size-15+S,s(T,S));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let p=this.version;for(let v=0;v<12;v++)p=p<<1^(p>>>11)*7973;const m=this.version<<12|p;o(m>>>18==0);for(let v=0;v<18;v++){const T=s(m,v),S=this.size-11+v%3,w=Math.floor(v/3);this.setFunctionModule(S,w,T),this.setFunctionModule(w,S,T)}}drawFinderPattern(p,m){for(let v=-4;v<=4;v++)for(let T=-4;T<=4;T++){const S=Math.max(Math.abs(T),Math.abs(v)),w=p+T,j=m+v;0<=w&&w<this.size&&0<=j&&j<this.size&&this.setFunctionModule(w,j,S!=2&&S!=4)}}drawAlignmentPattern(p,m){for(let v=-2;v<=2;v++)for(let T=-2;T<=2;T++)this.setFunctionModule(p+T,m+v,Math.max(Math.abs(T),Math.abs(v))!=1)}setFunctionModule(p,m,v){this.modules[m][p]=v,this.isFunction[m][p]=!0}addEccAndInterleave(p){const m=this.version,v=this.errorCorrectionLevel;if(p.length!=wt.getNumDataCodewords(m,v))throw new RangeError("Invalid argument");const T=wt.NUM_ERROR_CORRECTION_BLOCKS[v.ordinal][m],S=wt.ECC_CODEWORDS_PER_BLOCK[v.ordinal][m],w=Math.floor(wt.getNumRawDataModules(m)/8),j=T-w%T,q=Math.floor(w/T);let B=[];const _e=wt.reedSolomonComputeDivisor(S);for(let te=0,Se=0;te<T;te++){let Ge=p.slice(Se,Se+q-S+(te<j?0:1));Se+=Ge.length;const Be=wt.reedSolomonComputeRemainder(Ge,_e);te<j&&Ge.push(0),B.push(Ge.concat(Be))}let fe=[];for(let te=0;te<B[0].length;te++)B.forEach((Se,Ge)=>{(te!=q-S||Ge>=j)&&fe.push(Se[te])});return o(fe.length==w),fe}drawCodewords(p){if(p.length!=Math.floor(wt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let v=this.size-1;v>=1;v-=2){v==6&&(v=5);for(let T=0;T<this.size;T++)for(let S=0;S<2;S++){const w=v-S,q=(v+1&2)==0?this.size-1-T:T;!this.isFunction[q][w]&&m<p.length*8&&(this.modules[q][w]=s(p[m>>>3],7-(m&7)),m++)}}o(m==p.length*8)}applyMask(p){if(p<0||p>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let v=0;v<this.size;v++){let T;switch(p){case 0:T=(v+m)%2==0;break;case 1:T=m%2==0;break;case 2:T=v%3==0;break;case 3:T=(v+m)%3==0;break;case 4:T=(Math.floor(v/3)+Math.floor(m/2))%2==0;break;case 5:T=v*m%2+v*m%3==0;break;case 6:T=(v*m%2+v*m%3)%2==0;break;case 7:T=((v+m)%2+v*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][v]&&T&&(this.modules[m][v]=!this.modules[m][v])}}getPenaltyScore(){let p=0;for(let S=0;S<this.size;S++){let w=!1,j=0,q=[0,0,0,0,0,0,0];for(let B=0;B<this.size;B++)this.modules[S][B]==w?(j++,j==5?p+=wt.PENALTY_N1:j>5&&p++):(this.finderPenaltyAddHistory(j,q),w||(p+=this.finderPenaltyCountPatterns(q)*wt.PENALTY_N3),w=this.modules[S][B],j=1);p+=this.finderPenaltyTerminateAndCount(w,j,q)*wt.PENALTY_N3}for(let S=0;S<this.size;S++){let w=!1,j=0,q=[0,0,0,0,0,0,0];for(let B=0;B<this.size;B++)this.modules[B][S]==w?(j++,j==5?p+=wt.PENALTY_N1:j>5&&p++):(this.finderPenaltyAddHistory(j,q),w||(p+=this.finderPenaltyCountPatterns(q)*wt.PENALTY_N3),w=this.modules[B][S],j=1);p+=this.finderPenaltyTerminateAndCount(w,j,q)*wt.PENALTY_N3}for(let S=0;S<this.size-1;S++)for(let w=0;w<this.size-1;w++){const j=this.modules[S][w];j==this.modules[S][w+1]&&j==this.modules[S+1][w]&&j==this.modules[S+1][w+1]&&(p+=wt.PENALTY_N2)}let m=0;for(const S of this.modules)m=S.reduce((w,j)=>w+(j?1:0),m);const v=this.size*this.size,T=Math.ceil(Math.abs(m*20-v*10)/v)-1;return o(0<=T&&T<=9),p+=T*wt.PENALTY_N4,o(0<=p&&p<=2568888),p}getAlignmentPatternPositions(){if(this.version==1)return[];{const p=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(p*2-2))*2;let v=[6];for(let T=this.size-7;v.length<p;T-=m)v.splice(1,0,T);return v}}static getNumRawDataModules(p){if(p<wt.MIN_VERSION||p>wt.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*p+128)*p+64;if(p>=2){const v=Math.floor(p/7)+2;m-=(25*v-10)*v-55,p>=7&&(m-=36)}return o(208<=m&&m<=29648),m}static getNumDataCodewords(p,m){return Math.floor(wt.getNumRawDataModules(p)/8)-wt.ECC_CODEWORDS_PER_BLOCK[m.ordinal][p]*wt.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][p]}static reedSolomonComputeDivisor(p){if(p<1||p>255)throw new RangeError("Degree out of range");let m=[];for(let T=0;T<p-1;T++)m.push(0);m.push(1);let v=1;for(let T=0;T<p;T++){for(let S=0;S<m.length;S++)m[S]=wt.reedSolomonMultiply(m[S],v),S+1<m.length&&(m[S]^=m[S+1]);v=wt.reedSolomonMultiply(v,2)}return m}static reedSolomonComputeRemainder(p,m){let v=m.map(T=>0);for(const T of p){const S=T^v.shift();v.push(0),m.forEach((w,j)=>v[j]^=wt.reedSolomonMultiply(w,S))}return v}static reedSolomonMultiply(p,m){if(p>>>8||m>>>8)throw new RangeError("Byte out of range");let v=0;for(let T=7;T>=0;T--)v=v<<1^(v>>>7)*285,v^=(m>>>T&1)*p;return o(v>>>8==0),v}finderPenaltyCountPatterns(p){const m=p[1];o(m<=this.size*3);const v=m>0&&p[2]==m&&p[3]==m*3&&p[4]==m&&p[5]==m;return(v&&p[0]>=m*4&&p[6]>=m?1:0)+(v&&p[6]>=m*4&&p[0]>=m?1:0)}finderPenaltyTerminateAndCount(p,m,v){return p&&(this.finderPenaltyAddHistory(m,v),m=0),m+=this.size,this.finderPenaltyAddHistory(m,v),this.finderPenaltyCountPatterns(v)}finderPenaltyAddHistory(p,m){m[0]==0&&(p+=this.size),m.pop(),m.unshift(p)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],i.QrCode=e;function n(g,p,m){if(p<0||p>31||g>>>p)throw new RangeError("Value out of range");for(let v=p-1;v>=0;v--)m.push(g>>>v&1)}function s(g,p){return(g>>>p&1)!=0}function o(g){if(!g)throw new Error("Assertion error")}const u=class Tn{constructor(p,m,v){if(this.mode=p,this.numChars=m,this.bitData=v,m<0)throw new RangeError("Invalid argument");this.bitData=v.slice()}static makeBytes(p){let m=[];for(const v of p)n(v,8,m);return new Tn(Tn.Mode.BYTE,p.length,m)}static makeNumeric(p){if(!Tn.isNumeric(p))throw new RangeError("String contains non-numeric characters");let m=[];for(let v=0;v<p.length;){const T=Math.min(p.length-v,3);n(parseInt(p.substring(v,v+T),10),T*3+1,m),v+=T}return new Tn(Tn.Mode.NUMERIC,p.length,m)}static makeAlphanumeric(p){if(!Tn.isAlphanumeric(p))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],v;for(v=0;v+2<=p.length;v+=2){let T=Tn.ALPHANUMERIC_CHARSET.indexOf(p.charAt(v))*45;T+=Tn.ALPHANUMERIC_CHARSET.indexOf(p.charAt(v+1)),n(T,11,m)}return v<p.length&&n(Tn.ALPHANUMERIC_CHARSET.indexOf(p.charAt(v)),6,m),new Tn(Tn.Mode.ALPHANUMERIC,p.length,m)}static makeSegments(p){return p==""?[]:Tn.isNumeric(p)?[Tn.makeNumeric(p)]:Tn.isAlphanumeric(p)?[Tn.makeAlphanumeric(p)]:[Tn.makeBytes(Tn.toUtf8ByteArray(p))]}static makeEci(p){let m=[];if(p<0)throw new RangeError("ECI assignment value out of range");if(p<128)n(p,8,m);else if(p<16384)n(2,2,m),n(p,14,m);else if(p<1e6)n(6,3,m),n(p,21,m);else throw new RangeError("ECI assignment value out of range");return new Tn(Tn.Mode.ECI,0,m)}static isNumeric(p){return Tn.NUMERIC_REGEX.test(p)}static isAlphanumeric(p){return Tn.ALPHANUMERIC_REGEX.test(p)}getData(){return this.bitData.slice()}static getTotalBits(p,m){let v=0;for(const T of p){const S=T.mode.numCharCountBits(m);if(T.numChars>=1<<S)return 1/0;v+=4+S+T.bitData.length}return v}static toUtf8ByteArray(p){p=encodeURI(p);let m=[];for(let v=0;v<p.length;v++)p.charAt(v)!="%"?m.push(p.charCodeAt(v)):(m.push(parseInt(p.substring(v+1,v+3),16)),v+=2);return m}};u.NUMERIC_REGEX=/^[0-9]*$/,u.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,u.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let h=u;i.QrSegment=u})(Qa||(Qa={}));(i=>{(e=>{const n=class{constructor(o,u){this.ordinal=o,this.formatBits=u}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(i.QrCode||(i.QrCode={}))})(Qa||(Qa={}));(i=>{(e=>{const n=class{constructor(o,u){this.modeBits=o,this.numBitsCharCount=u}numCharCountBits(o){return this.numBitsCharCount[Math.floor((o+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(i.QrSegment||(i.QrSegment={}))})(Qa||(Qa={}));var qo=Qa;var hk={L:qo.QrCode.Ecc.LOW,M:qo.QrCode.Ecc.MEDIUM,Q:qo.QrCode.Ecc.QUARTILE,H:qo.QrCode.Ecc.HIGH},p1=128,g1="L",y1="#FFFFFF",v1="#000000",_1=!1,b1=1,fk=4,mk=0,pk=.1;function E1(i,e=0){const n=[];return i.forEach(function(s,o){let u=null;s.forEach(function(h,g){if(!h&&u!==null){n.push(`M${u+e} ${o+e}h${g-u}v1H${u+e}z`),u=null;return}if(g===s.length-1){if(!h)return;u===null?n.push(`M${g+e},${o+e} h1v1H${g+e}z`):n.push(`M${u+e},${o+e} h${g+1-u}v1H${u+e}z`);return}h&&u===null&&(u=g)})}),n.join("")}function T1(i,e){return i.slice().map((n,s)=>s<e.y||s>=e.y+e.h?n:n.map((o,u)=>u<e.x||u>=e.x+e.w?o:!1))}function gk(i,e,n,s){if(s==null)return null;const o=i.length+n*2,u=Math.floor(e*pk),h=o/e,g=(s.width||u)*h,p=(s.height||u)*h,m=s.x==null?i.length/2-g/2:s.x*h,v=s.y==null?i.length/2-p/2:s.y*h,T=s.opacity==null?1:s.opacity;let S=null;if(s.excavate){let j=Math.floor(m),q=Math.floor(v),B=Math.ceil(g+m-j),_e=Math.ceil(p+v-q);S={x:j,y:q,w:B,h:_e}}const w=s.crossOrigin;return{x:m,y:v,h:p,w:g,excavation:S,opacity:T,crossOrigin:w}}function yk(i,e){return e!=null?Math.max(Math.floor(e),0):i?fk:mk}function S1({value:i,level:e,minVersion:n,includeMargin:s,marginSize:o,imageSettings:u,size:h,boostLevel:g}){let p=me.useMemo(()=>{const j=(Array.isArray(i)?i:[i]).reduce((q,B)=>(q.push(...qo.QrSegment.makeSegments(B)),q),[]);return qo.QrCode.encodeSegments(j,hk[e],n,void 0,void 0,g)},[i,e,n,g]);const{cells:m,margin:v,numCells:T,calculatedImageSettings:S}=me.useMemo(()=>{let w=p.getModules();const j=yk(s,o),q=w.length+j*2,B=gk(w,h,j,u);return{cells:w,margin:j,numCells:q,calculatedImageSettings:B}},[p,h,u,s,o]);return{qrcode:p,margin:v,cells:m,numCells:T,calculatedImageSettings:S}}var vk=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),w1=me.forwardRef(function(e,n){const s=e,{value:o,size:u=p1,level:h=g1,bgColor:g=y1,fgColor:p=v1,includeMargin:m=_1,minVersion:v=b1,boostLevel:T,marginSize:S,imageSettings:w}=s,q=mp(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:B}=q,_e=mp(q,["style"]),fe=w?.src,te=me.useRef(null),Se=me.useRef(null),Ge=me.useCallback(Ke=>{te.current=Ke,typeof n=="function"?n(Ke):n&&(n.current=Ke)},[n]),[Be,N]=me.useState(!1),{margin:R,cells:x,numCells:V,calculatedImageSettings:k}=S1({value:o,level:h,minVersion:v,boostLevel:T,includeMargin:m,marginSize:S,imageSettings:w,size:u});me.useEffect(()=>{if(te.current!=null){const Ke=te.current,it=Ke.getContext("2d");if(!it)return;let Y=x;const ce=Se.current,ve=k!=null&&ce!==null&&ce.complete&&ce.naturalHeight!==0&&ce.naturalWidth!==0;ve&&k.excavation!=null&&(Y=T1(x,k.excavation));const pe=window.devicePixelRatio||1;Ke.height=Ke.width=u*pe;const Le=u/V*pe;it.scale(Le,Le),it.fillStyle=g,it.fillRect(0,0,V,V),it.fillStyle=p,vk?it.fill(new Path2D(E1(Y,R))):x.forEach(function(O,G){O.forEach(function(ee,ie){ee&&it.fillRect(ie+R,G+R,1,1)})}),k&&(it.globalAlpha=k.opacity),ve&&it.drawImage(ce,k.x+R,k.y+R,k.w,k.h)}}),me.useEffect(()=>{N(!1)},[fe]);const P=fp({height:u,width:u},B);let I=null;return fe!=null&&(I=me.createElement("img",{src:fe,key:fe,style:{display:"none"},onLoad:()=>{N(!0)},ref:Se,crossOrigin:k?.crossOrigin})),me.createElement(me.Fragment,null,me.createElement("canvas",fp({style:P,height:u,width:u,ref:Ge,role:"img"},_e)),I)});w1.displayName="QRCodeCanvas";var _k=me.forwardRef(function(e,n){const s=e,{value:o,size:u=p1,level:h=g1,bgColor:g=y1,fgColor:p=v1,includeMargin:m=_1,minVersion:v=b1,boostLevel:T,title:S,marginSize:w,imageSettings:j}=s,q=mp(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:B,cells:_e,numCells:fe,calculatedImageSettings:te}=S1({value:o,level:h,minVersion:v,boostLevel:T,includeMargin:m,marginSize:w,imageSettings:j,size:u});let Se=_e,Ge=null;j!=null&&te!=null&&(te.excavation!=null&&(Se=T1(_e,te.excavation)),Ge=me.createElement("image",{href:j.src,height:te.h,width:te.w,x:te.x+B,y:te.y+B,preserveAspectRatio:"none",opacity:te.opacity,crossOrigin:te.crossOrigin}));const Be=E1(Se,B);return me.createElement("svg",fp({height:u,width:u,viewBox:`0 0 ${fe} ${fe}`,ref:n,role:"img"},q),!!S&&me.createElement("title",null,S),me.createElement("path",{fill:g,d:`M0,0 h${fe}v${fe}H0z`,shapeRendering:"crispEdges"}),me.createElement("path",{fill:p,d:Be,shapeRendering:"crispEdges"}),Ge)});_k.displayName="QRCodeSVG";const bk={width:"100%",maxWidth:460,backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},ru={fontSize:"0.8rem",display:"block"},iu={width:"100%",padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.9rem",marginTop:"0.15rem",boxSizing:"border-box"},Ek={padding:"0.35rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",color:"#111827",cursor:"pointer",fontSize:"0.9rem"};function vg({uid:i,role:e,onClose:n,displayName:s,email:o}){const{options:u}=yg(),[h,g]=U.useState(!0),[p,m]=U.useState(!1),[v,T]=U.useState(null),[S,w]=U.useState(""),[j,q]=U.useState(""),[B,_e]=U.useState(o),[fe,te]=U.useState(null),[Se,Ge]=U.useState([]),[Be,N]=U.useState(!1),[R,x]=U.useState(""),V=e==="teacher"||e==="student",[k,P]=U.useState(""),[I,Ke]=U.useState(""),[it,Y]=U.useState(o),[ce,ve]=U.useState({}),[pe,Le]=U.useState(!1),[O,G]=U.useState(""),[ee,ie]=U.useState(!1),[Re,Ee]=U.useState(null),[Me,st]=U.useState(null);U.useEffect(()=>{let oe=!0;return(async()=>{try{g(!0);const Ce=gt(Ne,"users",i),De=await hi(Ce),Ve=De.exists()?De.data():{};if(!oe)return;const ke=String(Ve.phone??""),Ze=String(Ve.secondaryEmail??""),sn=String(Ve?.email??o);w(ke),q(Ze),_e(sn),P(ke),Ke(Ze),Y(sn),te(typeof Ve.term=="number"?Ve.term:null);const _t=Array.isArray(Ve.allowedTerms)?Ve.allowedTerms.filter(jt=>typeof jt=="number"):[];Ge(_t);try{const jt=De.exists()?De.data():{};N(!!jt?.isSuperAdmin)}catch{N(!1)}}catch{oe&&T("Kunne ikke laste profildata.")}finally{oe&&g(!1)}})(),()=>{oe=!1}},[i]);const he=U.useMemo(()=>Se.map(oe=>za(u,oe)),[Se,u]),Pe=async()=>{T(null),m(!0);try{await Fn(gt(Ne,"users",i),{phone:S.trim()||null}),P(S),Ye.success("Mobilnummer er oppdatert.")}catch(oe){console.error(oe),T("Kunne ikke lagre mobilnummer."),Ye.error("Kunne ikke lagre mobilnummer.")}finally{m(!1)}},ot=async()=>{T(null),m(!0);try{await Fn(gt(Ne,"users",i),{secondaryEmail:j.trim()||null}),Ke(j),Ye.success("Sekundr epost er oppdatert.")}catch(oe){console.error(oe),T("Kunne ikke lagre sekundr epost."),Ye.error("Kunne ikke lagre sekundr epost.")}finally{m(!1)}},mt=async()=>{T(null);const oe=B.trim();if(!oe){T("Epost kan ikke vre tom."),Ye.error("Epost kan ikke vre tom.");return}if(oe===it){Ye.info?.("Eposten er uendret.")||Ye("Eposten er uendret.");return}try{const Ce=$s.currentUser;if(!Ce){T("Ingen innlogget bruker."),Ye.error("Ingen innlogget bruker.");return}await y_(Ce,oe),Y(oe),Ye.success(`Vi har sendt en bekreftelseslenke til ${oe}. Flg lenken for  fullfre endringen av epost.`)}catch(Ce){console.warn("updateEmail failed",Ce),Ce?.code==="auth/operation-not-allowed"?(T("Kan ikke oppdatere epost direkte. Du m bekrefte ny epost via lenken vi sender. Prv igjen."),Ye.error("Kan ikke oppdatere epost direkte. Bruk knappen igjen for  f tilsendt bekreftelseslenke.")):Ce?.code==="auth/requires-recent-login"?(st(oe),G(""),Ee(null),Le(!0),Ye.info?.("Av sikkerhetshensyn m du bekrefte med passord fr du kan endre epost.")||Ye("Av sikkerhetshensyn m du bekrefte med passord fr du kan endre epost.")):Ce?.code==="auth/email-already-in-use"?(T("Epostadressen er allerede i bruk av en annen bruker."),Ye.error("Epostadressen er allerede i bruk av en annen bruker.")):Ce?.code==="auth/invalid-email"?(T("Ugyldig epost."),Ye.error("Ugyldig epost.")):(T("Kunne ikke oppdatere epost. Prv igjen senere."),Ye.error("Kunne ikke oppdatere epost. Prv igjen senere."))}},ae=()=>{Le(!1),G(""),Ee(null)},ge=async()=>{Ee(null);const oe=(Me||B||"").trim();if(!oe){Ee("Ugyldig ny epost.");return}const Ce=$s.currentUser;if(!Ce){Ee("Ingen innlogget bruker.");return}if(!O){Ee("Skriv inn passordet ditt.");return}try{ie(!0);const De=Ya.credential(Ce.email||o,O);await WC(Ce,De),await y_(Ce,oe),Le(!1),G(""),st(null),Ye.success(`Vi har sendt en bekreftelseslenke til ${oe}. Flg lenken for  fullfre endringen av epost.`)}catch(De){console.error("Reauth/update email failed",De),De?.code==="auth/wrong-password"?Ee("Feil passord."):De?.code==="auth/too-many-requests"?Ee("For mange forsk. Prv igjen senere."):De?.code==="auth/invalid-email"?Ee("Ugyldig epost."):De?.code==="auth/email-already-in-use"?Ee("Epostadressen er allerede i bruk av en annen bruker."):Ee("Kunne ikke bekrefte innlogging eller oppdatere epost.")}finally{ie(!1)}},Ae=async()=>{if(T(null),!R||R.length<6){T("Passord m vre minst 6 tegn."),Ye.error("Passord m vre minst 6 tegn.");return}try{const oe=$s.currentUser;if(!oe){T("Ingen innlogget bruker."),Ye.error("Ingen innlogget bruker.");return}await eR(oe,R),Ye.success("Passordet er oppdatert."),x("")}catch(oe){console.warn("updatePassword failed",oe),oe?.code==="auth/requires-recent-login"?(T("Du m logge inn p nytt fr du kan endre passord."),Ye.error("Du m logge inn p nytt fr du kan endre passord.")):(T("Kunne ikke endre passord."),Ye.error("Kunne ikke endre passord."))}};return _.jsxs(_.Fragment,{children:[_.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:60},"aria-modal":!0,role:"dialog",children:_.jsxs("div",{style:bk,children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[_.jsx("h3",{style:{margin:0},children:s||o}),_.jsx("button",{type:"button",onClick:n,className:"button-small button-border button-colorless",children:"Lukk"})]}),h?_.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"1rem 0"},children:"Laster..."}):_.jsxs(_.Fragment,{children:[e==="student"&&_.jsxs("div",{style:{fontSize:"0.9rem",color:"#374151"},children:[_.jsx("div",{style:{fontWeight:600},children:"Din termin"}),_.jsx("div",{children:za(u,fe)})]}),e==="teacher"&&_.jsxs("div",{style:{fontSize:"0.9rem",color:"#374151"},children:[_.jsx("div",{style:{fontWeight:600},children:"Terminer du kan registrere oppmte p:"}),Se.length===0?_.jsx("div",{children:"Ingen"}):_.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.4rem",marginTop:"0.25rem"},children:he.map((oe,Ce)=>_.jsx("span",{style:{display:"inline-block",padding:"0.15rem 0.5rem",border:"1px solid #e5e7eb",borderRadius:"999px",background:"#f9fafb",fontSize:"0.8rem"},children:oe},Ce))})]}),e==="admin"&&_.jsx("div",{style:{fontSize:"0.9rem",color:"#374151"},children:Be?_.jsx("div",{style:{fontWeight:600},children:"Super administrator"}):_.jsxs(_.Fragment,{children:[_.jsx("div",{style:{fontWeight:600},children:"Moduler du administrerer:"}),Se.length===0?_.jsx("div",{children:"Ingen"}):_.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.4rem",marginTop:"0.25rem"},children:he.map((oe,Ce)=>_.jsx("span",{style:{display:"inline-block",padding:"0.15rem 0.5rem",border:"1px solid #e5e7eb",borderRadius:"999px",background:"#f9fafb",fontSize:"0.8rem"},children:oe},Ce))})]})}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginTop:"1rem"},children:[_.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-end"},children:[_.jsx("div",{style:{flex:1,minWidth:0},children:_.jsxs("label",{style:ru,children:["Mobilnummer",_.jsx("input",{type:"tel",value:S,onChange:oe=>w(oe.target.value),placeholder:"Eks: 99999999",style:iu})]})}),_.jsx("button",{type:"button",disabled:p||S===k,onMouseEnter:()=>ve(oe=>({...oe,phone:!0})),onMouseLeave:()=>ve(oe=>({...oe,phone:!1})),onClick:Pe,className:"button-black button-small",children:"Lagre"})]}),_.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-end"},children:[_.jsx("div",{style:{flex:1,minWidth:0},children:_.jsxs("label",{style:ru,children:["Epost",_.jsx("input",{type:"email",value:B,onChange:oe=>_e(oe.target.value),placeholder:"din@epost.no",style:iu})]})}),_.jsx("button",{type:"button",disabled:p||B.trim()===it.trim(),onMouseEnter:()=>ve(oe=>({...oe,primaryEmail:!0})),onMouseLeave:()=>ve(oe=>({...oe,primaryEmail:!1})),onClick:mt,className:"button-black button-small",children:"Lagre"})]}),V&&_.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-end"},children:[_.jsx("div",{style:{flex:1,minWidth:0},children:_.jsxs("label",{style:ru,children:["Sekundr epost",_.jsx("input",{type:"email",value:j,onChange:oe=>q(oe.target.value),placeholder:"eksempel@uio.no",style:iu})]})}),_.jsx("button",{type:"button",disabled:p||j===I,onMouseEnter:()=>ve(oe=>({...oe,secondaryEmail:!0})),onMouseLeave:()=>ve(oe=>({...oe,secondaryEmail:!1})),onClick:ot,className:"button-black button-small",children:"Lagre"})]}),_.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-end"},children:[_.jsx("div",{style:{flex:1,minWidth:0},children:_.jsxs("label",{style:ru,children:["Nytt passord",_.jsx("input",{type:"password",value:R,onChange:oe=>x(oe.target.value),placeholder:"Minst 6 tegn",style:iu})]})}),_.jsx("button",{type:"button",disabled:p||R.length===0,onMouseEnter:()=>ve(oe=>({...oe,password:!0})),onMouseLeave:()=>ve(oe=>({...oe,password:!1})),onClick:Ae,className:"button-black button-small",children:"Lagre"})]})]})]})]})}),pe&&_.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:70},children:_.jsxs("div",{className:"page-card",style:{maxWidth:520,width:"100%",background:"#ffffff"},children:[_.jsx("h3",{style:{marginTop:0},children:"Logg inn p nytt"}),_.jsxs("p",{style:{whiteSpace:"pre-wrap",lineHeight:1.4},children:["Av sikkerhetshensyn m du bekrefte kontoen fr du kan endre epost.",`
`,"Skriv inn passordet for ",o,"."]}),_.jsxs("label",{style:ru,children:["Passord",_.jsx("input",{type:"password",value:O,onChange:oe=>G(oe.target.value),placeholder:"Passord",style:iu,autoFocus:!0})]}),Re&&_.jsx("p",{style:{color:"#b91c1c",fontSize:"0.85rem",marginTop:"0.5rem"},children:Re}),_.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",marginTop:"0.75rem"},children:[_.jsx("button",{type:"button",onClick:ae,style:Ek,children:"Avbryt"}),_.jsx("button",{type:"button",onClick:ge,style:{background:"#6CE1AB",color:"black",cursor:"pointer"},disabled:ee,children:ee?"Bekrefter...":"Bekreft og send lenke"})]})]})})]})}const Tk=[{value:1,label:"Modul 1 - Blokk 1"},{value:2,label:"Modul 1 - Blokk 2"},{value:3,label:"Modul 1 - Blokk 3"},{value:4,label:"Modul 2 - Termin 1"},{value:5,label:"Modul 2 - Termin 2"},{value:6,label:"Modul 2 - Propen"},{value:7,label:"Modul 3 - Termin 1"},{value:8,label:"Modul 3 - Termin 2"},{value:9,label:"Modul 4"},{value:10,label:"Modul 5"},{value:11,label:"Modul 6"},{value:12,label:"Modul 7"},{value:13,label:"Modul 8 - Termin 1"},{value:14,label:"Modul 8 - Termin 2"},{value:999,label:"Test"}];function Sk(i){if(!i)return"Ukjent termin";const e=Tk.find(n=>n.value===i);return e?e.label:`Termin ${i}`}function wk({user:i}){const[e,n]=U.useState([]),[s,o]=U.useState(null),[u,h]=U.useState(null),[g,p]=U.useState(""),[m,v]=U.useState(null),[T,S]=U.useState([]),[w,j]=U.useState(!0),[q,B]=U.useState(!1),[_e,fe]=U.useState([]),[te,Se]=U.useState(!0),[Ge,Be]=U.useState(""),[N,R]=U.useState(!1),[x,V]=U.useState({open:!1,attendee:null}),[k,P]=U.useState(120),[I,Ke]=U.useState([]),[it,Y]=U.useState(!1),ce=U.useRef(null),ve=U.useRef(null),{options:pe}=yg();ol();const[Le,O]=U.useState(!1);U.useEffect(()=>{(async()=>{j(!0);const Ae=(await ln(Qt(Ne,"times"))).docs.map(oe=>{const Ce=oe.data();return{id:oe.id,name:Ce.name,category:Ce.category,term:Ce.term}});n(Ae),j(!1)})()},[]),U.useEffect(()=>{(async()=>{try{const ge=gt(Ne,"users",i.uid),Ae=await hi(ge),oe=Ae.exists()?Ae.data():null,Ce=Array.isArray(oe?.allowedTerms)?oe.allowedTerms.map(De=>typeof De=="number"?De:parseInt(De,10)).filter(De=>!Number.isNaN(De)):[];h(Ce)}catch(ge){console.warn("Kunne ikke hente allowedTerms for lrer:",ge),h([])}})()},[i.uid]),U.useMemo(()=>{if(u===null)return pe;const ae=new Set(u??[]);return pe.filter(ge=>ae.has(ge.value))},[u,pe]),U.useEffect(()=>{(async()=>{if(!(u===null||!s)){Se(!0);try{const ge=Qt(Ne,"users"),Ae=qn(ge,fn("role","==","student"),fn("term","==",s)),Ce=(await ln(Ae)).docs.map(De=>{const Ve=De.data(),ke=Ve?.name&&String(Ve.name)||Ve?.displayName&&String(Ve.displayName)||null;return{id:De.id,name:ke,email:String(Ve?.email??""),phone:Ve?.phone?String(Ve.phone):null,term:typeof Ve?.term=="number"?Ve.term:null}});Ce.sort((De,Ve)=>{const ke=(De.name??"").toLocaleLowerCase(),Ze=(Ve.name??"").toLocaleLowerCase();return ke!==Ze?ke.localeCompare(Ze,"nb-NO"):De.email.localeCompare(Ve.email,"nb-NO")}),fe(Ce)}catch(ge){console.error("Feil ved lasting av studenter:",ge),fe([])}finally{Se(!1)}}})()},[u,s]),U.useEffect(()=>{G()},[i.uid]);const G=async()=>{try{Y(!0);const ae=Date.now()-14400*1e3,ge=Yt.fromMillis(ae),Ae=Qt(Ne,"sessions");let oe=[];try{const Ve=qn(Ae,fn("teacherId","==",i.uid),fn("createdAt",">=",ge),Ab("createdAt","desc"),Cb(50));oe=(await ln(Ve)).docs}catch{const ke=qn(Ae,fn("teacherId","==",i.uid));oe=(await ln(ke)).docs.filter(sn=>{const _t=sn.data()?.createdAt;return _t&&_t.toMillis()>=ae}).sort((sn,_t)=>{const jt=sn.data()?.createdAt?.toMillis?.()??0;return(_t.data()?.createdAt?.toMillis?.()??0)-jt}).slice(0,50)}const Ce=new Set,De=[];for(const Ve of oe){const ke=Ve.data(),Ze=String(ke?.timeId??"");if(!(!Ze||Ce.has(Ze))&&(Ce.add(Ze),De.push({timeId:Ze,name:String(ke?.name??"Ukjent time"),category:String(ke?.category??""),term:typeof ke?.term=="number"?ke.term:Number(ke?.term)||0,lastAt:ke?.createdAt}),De.length>=10))break}Ke(De)}catch(ae){console.warn("Kunne ikke hente nylige timer:",ae),Ke([])}finally{Y(!1)}};U.useEffect(()=>{if(!m){S([]);return}const ae=Qt(Ne,"sessions",m.id,"attendance"),ge=dp(ae,Ae=>{const oe=Ae.docs.map(Ce=>{const De=Ce.data();return{id:Ce.id,studentName:De.studentName??null,studentEmail:De.studentEmail??null,createdAt:De.createdAt}}).sort((Ce,De)=>{const Ve=Ce.createdAt?.toMillis?.()??0,ke=De.createdAt?.toMillis?.()??0;return Ve-ke});S(oe)});return()=>ge()},[m?.id]);const ee=U.useMemo(()=>e.filter(ae=>ae.term===s),[e,s]),ie=U.useMemo(()=>{const ae=g.trim().toLowerCase();return ae?ee.filter(ge=>ge.name.toLowerCase().includes(ae)).sort((ge,Ae)=>ge.name.localeCompare(Ae.name,"nb-NO",{sensitivity:"base"})):[]},[ee,g]);U.useMemo(()=>{const ae=Ge.trim().toLowerCase();if(!ae||!m)return[];const ge=ae.includes("@");return _e.filter(Ae=>{if(Ae.term!==m.term)return!1;const oe=String(Ae.name??"").toLowerCase(),Ce=String(Ae.email??"").toLowerCase(),De=ge?Ce:Ce.split("@")[0]??Ce,Ve=String(Ae.phone??"").toLowerCase();return oe.includes(ae)||De.includes(ae)||Ve.includes(ae)}).slice(0,10)},[_e,Ge,m]);const Re=async ae=>{const ge=e.find(Ze=>Ze.id===ae);if(!ge)return;if(m){const Ze=gt(Ne,"sessions",m.id);await Fn(Ze,{isOpen:!1}),v(null)}const Ae=Math.floor(1e5+Math.random()*9e5),oe=String(Ae),Ce=Qt(Ne,"sessions"),De=Yt.now(),ke={id:(await Rd(Ce,{timeId:ge.id,name:ge.name,category:ge.category,term:ge.term,code:oe,teacherId:i.uid,teacherName:i.displayName,teacherEmail:i.email,createdAt:De,isOpen:!0,openedAt:De})).id,timeId:ge.id,name:ge.name,category:ge.category,term:ge.term,code:oe,teacherId:i.uid,createdAt:De,isOpen:!0,openedAt:De};v(ke),G()},Ee=async ae=>{p(ae.name),B(!1),await Re(ae.id),ve.current&&ve.current.blur()},Me=async ae=>{o(ae.term),p(ae.name),B(!1);let ge;try{const Ae=qn(Qt(Ne,"sessions"),fn("teacherId","==",i.uid),fn("timeId","==",ae.timeId),Ab("createdAt","desc"),Cb(1));ge=(await ln(Ae)).docs[0]}catch{try{const oe=qn(Qt(Ne,"sessions"),fn("teacherId","==",i.uid));ge=(await ln(oe)).docs.filter(Ve=>String(Ve.data()?.timeId??"")===String(ae.timeId)).sort((Ve,ke)=>{const Ze=Ve.data()?.createdAt?.toMillis?.()??0;return(ke.data()?.createdAt?.toMillis?.()??0)-Ze})[0]}catch{}}if(ge){const Ae=ge.data();if(m&&m.id!==ge.id){try{await Fn(gt(Ne,"sessions",m.id),{isOpen:!1})}catch{}v(null)}const oe=Yt.now();try{await Fn(gt(Ne,"sessions",ge.id),{isOpen:!0,openedAt:oe})}catch{}const Ce={id:ge.id,timeId:String(Ae.timeId??ae.timeId),name:String(Ae.name??ae.name),category:String(Ae.category??""),term:typeof Ae.term=="number"?Ae.term:Number(Ae.term)||ae.term,code:String(Ae.code??""),teacherId:String(Ae.teacherId??i.uid),createdAt:Ae.createdAt??Yt.now(),isOpen:!0,openedAt:oe};v(Ce),P(120);return}await Re(ae.timeId)},st=async()=>{if(!m)return;const ae=gt(Ne,"sessions",m.id);if(!m.isOpen){const Ae=Yt.now();await Fn(ae,{isOpen:!0,openedAt:Ae}),v({...m,isOpen:!0,openedAt:Ae}),P(120)}else await Fn(ae,{isOpen:!1}),v({...m,isOpen:!1})};U.useEffect(()=>{if(!m)return;const ae=gt(Ne,"sessions",m.id),ge=dp(ae,Ae=>{if(!Ae.exists())return;const oe=Ae.data();v(Ce=>Ce&&Ce.id===Ae.id?{...Ce,isOpen:oe?.isOpen??Ce.isOpen,openedAt:oe?.openedAt??Ce.openedAt}:Ce)});return()=>ge()},[m?.id]),U.useEffect(()=>{if(!m||!m.isOpen||!m.openedAt){P(0);return}const ae=m.openedAt.toMillis(),ge=async()=>{const oe=Date.now(),Ce=Math.floor((oe-ae)/1e3),De=Math.max(0,60-Ce);if(P(De),De===0&&m.isOpen)try{await Fn(gt(Ne,"sessions",m.id),{isOpen:!1}),v({...m,isOpen:!1})}catch{}};ge();const Ae=setInterval(ge,1e3);return()=>clearInterval(Ae)},[m?.id,m?.isOpen,m?.openedAt]);const he=ae=>{const ge=Math.floor(ae/60).toString().padStart(2,"0"),Ae=Math.floor(ae%60).toString().padStart(2,"0");return`${ge}:${Ae}`},Pe=ae=>{V({open:!0,attendee:ae})},ot=()=>{V({open:!1,attendee:null})},mt=async()=>{if(!m||!x.attendee)return;const ae=x.attendee;try{await u1(gt(Ne,"sessions",m.id,"attendance",ae.id)),Ye.success("Student fjernet fra kten.")}catch(ge){console.error(ge),Ye.error("Kunne ikke fjerne studenten.")}finally{ot()}};return _.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"card teacher-card round-corners-whole-f",children:[_.jsx("h2",{children:"Finn timen din"}),_.jsxs("section",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",alignItems:"center"},children:[_.jsx("div",{style:{marginBottom:"1.25rem",width:"100%",maxWidth:520},children:(()=>{const ae=u!==null?new Set(u??[]):null,ge=ae?pe.filter(Ae=>ae.has(Ae.value)):pe;return ge.length===0?_.jsx("div",{style:{width:"100%",padding:"0.6rem 0",fontSize:"16px",border:"1px solid #e5e7eb",borderRadius:"0.5rem",background:"#f9fafb",color:"#6b7280",textAlign:"center"},children:"Ingen terminer tilgjengelig"}):_.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",justifyContent:"center"},children:ge.map(Ae=>_.jsx("button",{type:"button",onClick:()=>{const oe=Ae.value;o(oe),p(""),B(!1),v(null),S([]),setTimeout(()=>{ve.current?.focus()},0)},className:`button-small button-colorless button-border ${s===Ae.value?"button-yellow":"button-opacity"}`,ref:oe=>{oe&&Ae===ge[0]&&s===null&&oe.click()},children:Ae.label},Ae.value))})})()}),_.jsxs("div",{style:{position:"relative",marginBottom:"0.75rem",width:"100%",maxWidth:520},children:[_.jsx("input",{ref:ve,value:g,onChange:ae=>{p(ae.target.value),B(!0)},onFocus:()=>{s&&g.trim().length>0&&B(!0)},placeholder:s?"Skriv navnet p timen":"Velg modul frst",disabled:!s,className:"input-field input-full"}),q&&ie.length>0&&_.jsx("ul",{style:{position:"absolute",top:"100%",left:0,right:0,zIndex:10,background:"white",border:"1px solid #e5e7eb",borderRadius:"0.5rem",marginTop:"0.2rem",listStyle:"none",padding:0,maxHeight:"220px",overflowY:"auto",boxShadow:"0 10px 20px rgba(0,0,0,0.08)"},children:ie.map(ae=>_.jsxs("li",{onClick:()=>Ee(ae),style:{padding:"0.4rem 0.6rem",cursor:"pointer",borderBottom:"1px solid #f3f4f6"},onMouseDown:ge=>ge.preventDefault(),children:[_.jsx("div",{children:ae.name}),_.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:ae.category})]},ae.id))})]})]}),m&&_.jsxs("section",{ref:ce,style:{marginTop:"2rem",padding:"1rem"},children:[_.jsxs("div",{style:{marginTop:"1rem",position:"relative"},children:[_.jsxs("div",{style:{filter:m.isOpen===!1?"blur(6px)":"none",pointerEvents:"none",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},children:[_.jsx(w1,{value:m.code,size:160}),_.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",letterSpacing:"0.3em"},children:m.code})]}),m.isOpen===!1&&_.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center"},children:_.jsx("div",{style:{background:"rgba(255,255,255,0.85)",padding:"0.5rem 0.75rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb",fontWeight:600,color:"#6b7280"},children:"kten er lukket"})})]}),_.jsxs("div",{style:{marginTop:"1.2rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[_.jsx("div",{style:{fontWeight:600,color:"#111827"},children:he(k)}),_.jsx("button",{onClick:st,className:"button-black button-small",children:m.isOpen===!1?"pne kta":"Lukk kt"})]}),_.jsx("hr",{style:{margin:"1rem 0"}}),_.jsxs("h4",{children:[T.length," registrerte studenter"]}),T.length===0?_.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"Ingen har registrert seg enn."}):_.jsx("table",{style:{width:"100%",borderCollapse:"collapse"},children:_.jsx("tbody",{children:T.map(ae=>_.jsxs("tr",{children:[_.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:ae.studentName||"-"}),_.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:ae.studentEmail?.split("@")[0]||"-"}),_.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6",textAlign:"right"},children:_.jsx("button",{type:"button",onClick:()=>Pe(ae),"aria-label":"Fjern student fra kten",title:"Fjern student",style:{background:"transparent",border:"none",cursor:"pointer",color:"#b91c1c",padding:"0.15rem"},children:_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[_.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),_.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})})]},ae.id))})})]})]}),I.length>0&&_.jsx("div",{className:"card round-corners-whole-f teacher-recent-sessions",children:_.jsxs("div",{children:[_.jsx("h2",{children:"Nylige timer"}),_.jsx("p",{children:"Her finner du alle timer registert siste 4 timene."}),_.jsx("table",{className:"table-container",children:_.jsx("tbody",{children:I.map(ae=>_.jsxs("tr",{children:[_.jsxs("td",{children:[_.jsxs("p",{children:[" ",ae.name]}),_.jsxs("p",{className:"thinFont opaqueFont",children:["Kl: ",ae.createdAt?new Date(ae.createdAt.toDate()).toLocaleTimeString("nb-NO",{hour:"2-digit",minute:"2-digit"}):"-",Sk(ae.term)]})]}),_.jsx("td",{children:_.jsx("button",{className:"button-small button-white boldFont",type:"button",onClick:()=>void Me(ae),children:"pne"})})]},ae.timeId))})})]})}),_.jsx("br",{}),_.jsx("div",{className:"page-card page-card--session",style:{display:m?void 0:"none"}}),x.open&&x.attendee&&_.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1e3},children:_.jsxs("div",{className:"page-card",style:{maxWidth:520,width:"100%",background:"#ffffff",textAlign:"center"},children:[_.jsx("h3",{style:{marginTop:0},children:"Fjerne student?"}),_.jsx("p",{style:{whiteSpace:"pre-wrap",lineHeight:1.4},children:(()=>{const ae=x.attendee;return`Du er i ferd med  fjerne ${ae.studentName||ae.studentEmail||"denne studenten"} fra denne kten.`})()}),_.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",marginTop:"0.75rem"},children:[_.jsx("button",{className:"button",type:"button",onClick:ot,style:{background:"#ef4444",color:"#ffffff"},children:"Avbryt"}),_.jsx("button",{type:"button",onClick:()=>void mt(),style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#ffffff",cursor:"pointer"},children:"Fjern student"})]})]})}),Le&&_.jsx(vg,{uid:i.uid,role:i.role,email:i.email,displayName:i.displayName,onClose:()=>O(!1)})]})}const Ak="type.googleapis.com/google.protobuf.Int64Value",Ck="type.googleapis.com/google.protobuf.UInt64Value";function A1(i,e){const n={};for(const s in i)i.hasOwnProperty(s)&&(n[s]=e(i[s]));return n}function Xd(i){if(i==null)return null;if(i instanceof Number&&(i=i.valueOf()),typeof i=="number"&&isFinite(i)||i===!0||i===!1||Object.prototype.toString.call(i)==="[object String]")return i;if(i instanceof Date)return i.toISOString();if(Array.isArray(i))return i.map(e=>Xd(e));if(typeof i=="function"||typeof i=="object")return A1(i,e=>Xd(e));throw new Error("Data cannot be encoded in JSON: "+i)}function el(i){if(i==null)return i;if(i["@type"])switch(i["@type"]){case Ak:case Ck:{const e=Number(i.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+i);return e}default:throw new Error("Data cannot be decoded from JSON: "+i)}return Array.isArray(i)?i.map(e=>el(e)):typeof i=="function"||typeof i=="object"?A1(i,e=>el(e)):i}const _g="functions";const Ob={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ir extends ji{constructor(e,n,s){super(`${_g}/${e}`,n||""),this.details=s,Object.setPrototypeOf(this,Ir.prototype)}}function Rk(i){if(i>=200&&i<300)return"ok";switch(i){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function $d(i,e){let n=Rk(i),s=n,o;try{const u=e&&e.error;if(u){const h=u.status;if(typeof h=="string"){if(!Ob[h])return new Ir("internal","internal");n=Ob[h],s=h}const g=u.message;typeof g=="string"&&(s=g),o=u.details,o!==void 0&&(o=el(o))}}catch{}return n==="ok"?null:new Ir(n,s,o)}class Ik{constructor(e,n,s,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Lr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=s.getImmediate({optional:!0}),this.auth||n.get().then(u=>this.auth=u,()=>{}),this.messaging||s.get().then(u=>this.messaging=u,()=>{}),this.appCheck||o?.get().then(u=>this.appCheck=u,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),s=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:n,messagingToken:s,appCheckToken:o}}}const pp="us-central1",xk=/^data: (.*?)(?:\n|$)/;function Nk(i){let e=null;return{promise:new Promise((n,s)=>{e=setTimeout(()=>{s(new Ir("deadline-exceeded","deadline-exceeded"))},i)}),cancel:()=>{e&&clearTimeout(e)}}}class kk{constructor(e,n,s,o,u=pp,h=(...g)=>fetch(...g)){this.app=e,this.fetchImpl=h,this.emulatorOrigin=null,this.contextProvider=new Ik(e,n,s,o),this.cancelAllRequests=new Promise(g=>{this.deleteService=()=>Promise.resolve(g())});try{const g=new URL(u);this.customDomain=g.origin+(g.pathname==="/"?"":g.pathname),this.region=pp}catch{this.customDomain=null,this.region=u}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function Dk(i,e,n){const s=ua(e);i.emulatorOrigin=`http${s?"s":""}://${e}:${n}`,s&&(vp(i.emulatorOrigin+"/backends"),_p("Functions",!0))}function Mk(i,e,n){const s=o=>Vk(i,e,o,{});return s.stream=(o,u)=>Lk(i,e,o,u),s}function C1(i){return i.emulatorOrigin&&ua(i.emulatorOrigin)?"include":void 0}async function Ok(i,e,n,s,o){n["Content-Type"]="application/json";let u;try{u=await s(i,{method:"POST",body:JSON.stringify(e),headers:n,credentials:C1(o)})}catch{return{status:0,json:null}}let h=null;try{h=await u.json()}catch{}return{status:u.status,json:h}}async function R1(i,e){const n={},s=await i.contextProvider.getContext(e.limitedUseAppCheckTokens);return s.authToken&&(n.Authorization="Bearer "+s.authToken),s.messagingToken&&(n["Firebase-Instance-ID-Token"]=s.messagingToken),s.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=s.appCheckToken),n}function Vk(i,e,n,s){const o=i._url(e);return jk(i,o,n,s)}async function jk(i,e,n,s){n=Xd(n);const o={data:n},u=await R1(i,s),h=s.timeout||7e4,g=Nk(h),p=await Promise.race([Ok(e,o,u,i.fetchImpl,i),g.promise,i.cancelAllRequests]);if(g.cancel(),!p)throw new Ir("cancelled","Firebase Functions instance was deleted.");const m=$d(p.status,p.json);if(m)throw m;if(!p.json)throw new Ir("internal","Response is not valid JSON object.");let v=p.json.data;if(typeof v>"u"&&(v=p.json.result),typeof v>"u")throw new Ir("internal","Response is missing data field.");return{data:el(v)}}function Lk(i,e,n,s){const o=i._url(e);return Pk(i,o,n,s||{})}async function Pk(i,e,n,s){n=Xd(n);const o={data:n},u=await R1(i,s);u["Content-Type"]="application/json",u.Accept="text/event-stream";let h;try{h=await i.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:u,signal:s?.signal,credentials:C1(i)})}catch(S){if(S instanceof Error&&S.name==="AbortError"){const j=new Ir("cancelled","Request was cancelled.");return{data:Promise.reject(j),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(j)}}}}}}const w=$d(0,null);return{data:Promise.reject(w),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(w)}}}}}}let g,p;const m=new Promise((S,w)=>{g=S,p=w});s?.signal?.addEventListener("abort",()=>{const S=new Ir("cancelled","Request was cancelled.");p(S)});const v=h.body.getReader(),T=Uk(v,g,p,s?.signal);return{stream:{[Symbol.asyncIterator](){const S=T.getReader();return{async next(){const{value:w,done:j}=await S.read();return{value:w,done:j}},async return(){return await S.cancel(),{done:!0,value:void 0}}}}},data:m}}function Uk(i,e,n,s){const o=(h,g)=>{const p=h.match(xk);if(!p)return;const m=p[1];try{const v=JSON.parse(m);if("result"in v){e(el(v.result));return}if("message"in v){g.enqueue(el(v.message));return}if("error"in v){const T=$d(0,v);g.error(T),n(T);return}}catch(v){if(v instanceof Ir){g.error(v),n(v);return}}},u=new TextDecoder;return new ReadableStream({start(h){let g="";return p();async function p(){if(s?.aborted){const m=new Ir("cancelled","Request was cancelled");return h.error(m),n(m),Promise.resolve()}try{const{value:m,done:v}=await i.read();if(v){g.trim()&&o(g.trim(),h),h.close();return}if(s?.aborted){const S=new Ir("cancelled","Request was cancelled");h.error(S),n(S),await i.cancel();return}g+=u.decode(m,{stream:!0});const T=g.split(`
`);g=T.pop()||"";for(const S of T)S.trim()&&o(S.trim(),h);return p()}catch(m){const v=m instanceof Ir?m:$d(0,null);h.error(v),n(v)}}},cancel(){return i.cancel()}})}const Vb="@firebase/functions",jb="0.13.1";const zk="auth-internal",Bk="app-check-internal",qk="messaging-internal";function Fk(i){const e=(n,{instanceIdentifier:s})=>{const o=n.getProvider("app").getImmediate(),u=n.getProvider(zk),h=n.getProvider(qk),g=n.getProvider(Bk);return new kk(o,u,h,g,s)};qa(new na(_g,e,"PUBLIC").setMultipleInstances(!0)),Ri(Vb,jb,i),Ri(Vb,jb,"esm2020")}function Lm(i=eh(),e=pp){const s=Zd(un(i),_g).getImmediate({identifier:e}),o=Hb("functions");return o&&Hk(s,...o),s}function Hk(i,e,n){Dk(un(i),e,n)}function Pm(i,e,n){return Mk(un(i),e)}Fk();function Lb(i){const e=i.match(/^\s*(\d+)/);return e?parseInt(e[1],10):Number.POSITIVE_INFINITY}function Um(){const i="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789!@#$";let e="";for(let n=0;n<12;n++)e+=i[Math.floor(Math.random()*i.length)];return e}const Gk=()=>{const{user:i}=ol(),[e,n]=U.useState([]),[s,o]=U.useState(!0),[u,h]=U.useState(""),[g,p]=U.useState("students"),[m,v]=U.useState("all"),[T,S]=U.useState("name"),[w,j]=U.useState("asc"),[q,B]=U.useState("all"),[_e,fe]=U.useState("name"),[te,Se]=U.useState("asc"),[Ge,Be]=U.useState("all"),[N,R]=U.useState("name"),[x,V]=U.useState("asc"),[k,P]=U.useState([]),I=U.useMemo(()=>k.slice().sort((D,ue)=>(D.order??D.value)-(ue.order??ue.value)).map(D=>({value:D.value,label:D.label||`Termin ${D.value}`})),[k]),[Ke,it]=U.useState(null),[Y,ce]=U.useState(null);U.useEffect(()=>{(async()=>{try{if(!i?.uid)return;const ue=gt(Ne,"users",i.uid),be=await hi(ue),je=be.exists()?be.data():null,lt=(Array.isArray(je?.allowedTerms)?je.allowedTerms:[]).map(Et=>typeof Et=="number"?Et:parseInt(String(Et),10)).filter(Et=>!Number.isNaN(Et));it(lt),ce(!!je?.isSuperAdmin)}catch(ue){console.warn("Kunne ikke hente allowedTerms for innlogget admin:",ue),it([]),ce(!1)}})()},[i?.uid]);const ve=U.useMemo(()=>{if(Y===!0||Ke===null)return I;const D=new Set(Ke);return I.filter(ue=>D.has(ue.value))},[I,Ke,Y]),pe=U.useMemo(()=>{if(Y)return null;const D=Ke;return Array.isArray(D)&&D.length===1?Number(D[0]):null},[Y,Ke]);U.useEffect(()=>{pe!=null&&(m==="all"&&v(pe),q==="all"&&B(pe))},[pe]),U.useEffect(()=>{(async()=>{try{const be=(await ln(Qt(Ne,"terms"))).docs.map(je=>{const Qe=je.data(),lt=typeof Qe?.value=="number"?Qe.value:void 0;if(typeof lt!="number")return null;const Et=typeof Qe?.label=="string"?Qe.label:"",Pt=typeof Qe?.order=="number"?Qe.order:void 0;return{value:lt,label:Et,order:Pt}}).filter(Boolean);be.sort((je,Qe)=>(je.order??je.value)-(Qe.order??Qe.value)),P(be)}catch(ue){console.warn("Kunne ikke laste terminer fra Firestore for admin-brukerpanel:",ue)}})()},[]);const[Le,O]=U.useState(null),[G,ee]=U.useState(null),[ie,Re]=U.useState(""),[Ee,Me]=U.useState(""),[st,he]=U.useState(""),[Pe,ot]=U.useState("teacher"),[mt,ae]=U.useState([]),[ge,Ae]=U.useState(null),[oe,Ce]=U.useState(null),[De,Ve]=U.useState(""),[ke,Ze]=U.useState(""),[sn,_t]=U.useState(""),[jt,wn]=U.useState("student"),[Dt,Xe]=U.useState(null),[At,Ur]=U.useState(null),[xn,ur]=U.useState({}),gr=(D,ue)=>{if(D&&ue!=null)return xn[D]?.[ue]},vn=async(D,ue)=>{if(!(!D||ue==null)&&xn[D]?.[ue]===void 0)try{const be=gt(Ne,"users",D,"books",String(ue)),je=await hi(be),Qe=je.exists()?{approved:!!je.data().approved,approvedAt:je.data().approvedAt??null}:{approved:!1,approvedAt:null};ur(lt=>({...lt,[D]:{...lt[D]??{},[ue]:Qe}}))}catch(be){console.error("Kunne ikke laste godkjenning for bok:",be)}},Wt=({uid:D,term:ue})=>{const be=gr(D,ue);if(U.useEffect(()=>{be===void 0&&vn(D,ue)},[D,ue,be]),!be)return _.jsx("span",{style:{color:"#9ca3af"},children:""});if(be.approved){const je=be.approvedAt,Qe=je?new Date(je.toDate()).toLocaleString("nb-NO"):void 0;return _.jsx("span",{title:Qe,style:{color:"#16a34a",fontSize:"1rem"},children:""})}return _.jsx("span",{style:{color:"#9ca3af"},children:""})},[Xt,bt]=U.useState(null),[xr,rr]=U.useState(null),[cr,zn]=U.useState(""),[Nn,Ct]=U.useState(""),[an,Gn]=U.useState(""),[qe,vt]=U.useState("admin"),[F,Z]=U.useState([]);U.useEffect(()=>{(async()=>{try{o(!0);const be=(await ln(Qt(Ne,"users"))).docs.map(je=>{const Qe=je.data();return{docId:je.id,email:Qe.email??"",displayName:Qe.name??Qe.displayName??Qe.email??"(uten navn)",role:Qe.role??"student",term:Qe.term??null,phone:Qe.phone??null,allowedTerms:Qe.allowedTerms??[]}});be.sort((je,Qe)=>je.displayName.localeCompare(Qe.displayName,"nb-NO",{sensitivity:"base"})),n(be)}catch(ue){console.error("Feil ved lasting av brukere:",ue),n([])}finally{o(!1)}})()},[]);const de=U.useMemo(()=>{const D=u.trim().toLowerCase();if(!D)return e;const ue=D.includes("@");return e.filter(be=>{const je=String(be.displayName??"").toLowerCase(),Qe=String(be.email??"").toLowerCase(),lt=ue?Qe:Qe.split("@")[0]??Qe,Et=String(be.phone??"").toLowerCase();return`${je} ${lt} ${Et}`.includes(D)})},[e,u]);let ye=de.filter(D=>D.role==="teacher"),we=de.filter(D=>D.role==="student"),Fe=de.filter(D=>D.role==="admin");const Ie=(()=>{if(Y)return{teachers:ye,students:we,admins:Fe};const D=Ke;if(!(Array.isArray(D)&&D.length>0))return{teachers:ye,students:we,admins:Fe};const be=new Set(D),je=ye.filter(Et=>(Et.allowedTerms??[]).some(Pt=>be.has(Number(Pt)))),Qe=we.filter(Et=>Et.term!=null&&be.has(Number(Et.term)));return{teachers:je,students:Qe,admins:Fe}})();if(ye=Ie.teachers,we=Ie.students,Fe=Ie.admins,m!=="all"){const D=m;ye=ye.filter(ue=>(ue.allowedTerms??[]).includes(D))}if(q!=="all"){const D=q;we=we.filter(ue=>ue.term===D)}if(Ge!=="all"){const D=Ge;Fe=Fe.filter(ue=>(ue.allowedTerms??[]).includes(D))}ye.sort((D,ue)=>{const be=lt=>T==="name"?lt.displayName??"":T==="email"?lt.email??"":lt.phone??"",je=String(be(D)??"").toLowerCase(),Qe=String(be(ue)??"").toLowerCase();return je<Qe?w==="asc"?-1:1:je>Qe?w==="asc"?1:-1:0}),we.sort((D,ue)=>{const be=lt=>_e==="name"?lt.displayName??"":_e==="email"?lt.email??"":lt.phone??"",je=String(be(D)??"").toLowerCase(),Qe=String(be(ue)??"").toLowerCase();return je<Qe?te==="asc"?-1:1:je>Qe?te==="asc"?1:-1:0}),Fe.sort((D,ue)=>{const be=lt=>N==="name"?lt.displayName??"":N==="email"?lt.email??"":lt.phone??"",je=String(be(D)??"").toLowerCase(),Qe=String(be(ue)??"").toLowerCase();return je<Qe?x==="asc"?-1:1:je>Qe?x==="asc"?1:-1:0}),ye=ye.slice(0,50),we=we.slice(0,50),Fe=Fe.slice(0,50);const Mt=D=>{S(ue=>ue===D?(j(be=>be==="asc"?"desc":"asc"),ue):(j("asc"),D))},tt=D=>{fe(ue=>ue===D?(Se(be=>be==="asc"?"desc":"asc"),ue):(Se("asc"),D))},yt=D=>{R(ue=>ue===D?(V(be=>be==="asc"?"desc":"asc"),ue):(V("asc"),D))},Je=()=>{O("create"),ee(null),Re(""),Me(""),he(""),ot("teacher"),ae(pe!=null?[pe]:[])},Lt=async()=>{const D=Ee.trim(),ue=ie.trim(),be=st.trim();if(!D){Ye.error("E-post m fylles ut for  opprette lrer.");return}if(!mt||mt.length===0){Ye.error("Velg minst n termin lreren kan registrere for.");return}try{const je=Um(),lt=(await vd(jm,D,je)).user.uid,Et={uid:lt,email:D,displayName:ue||D,name:ue||D,role:"teacher",term:null,phone:be||null,allowedTerms:mt};await ta(gt(Ne,"users",lt),Et,{merge:!0}),n(Pt=>{const Ut=[{docId:lt,email:D,displayName:Et.displayName,role:"teacher",term:null,phone:be||null,allowedTerms:[...mt]},...Pt];return Ut.sort((Ft,Ht)=>Ft.displayName.localeCompare(Ht.displayName,"nb-NO",{sensitivity:"base"})),Ut}),O(null),ee(null),Ye.success("Ny lrer opprettet",{description:`Epost: ${D}
Midlertidig passord: ${je}
Gi passordet videre og be om passordbytte etter frste innlogging.`,duration:15e3})}catch(je){if(console.error("Feil ved oppretting av lrer:",je),je?.code==="auth/email-already-in-use")try{const Qe=qn(Qt(Ne,"users"),fn("email","==",D)),lt=await ln(Qe);if(lt.empty){Ye.error("Eposten finnes allerede i Auth, men fant ingen bruker i Firestore. Kontakt administrator.");return}const Et=lt.docs[0],Pt=Et.data(),Ut=Array.isArray(Pt?.allowedTerms)?Pt.allowedTerms.map(mn=>typeof mn=="number"?mn:parseInt(String(mn),10)).filter(mn=>!Number.isNaN(mn)):[],Ft=new Set([...Ut,...mt]),Ht=Array.from(Ft);await Fn(gt(Ne,"users",Et.id),{role:"teacher",allowedTerms:Ht,displayName:ue||Pt?.displayName||Pt?.name||D,name:ue||Pt?.name||Pt?.displayName||D,phone:be||Pt?.phone||null}),n(mn=>{const Fr=mn.findIndex(Dn=>Dn.docId===Et.id),Ot={docId:Et.id,email:D,displayName:ue||(Pt?.displayName??Pt?.name??D),role:"teacher",term:null,phone:be||Pt?.phone||null,allowedTerms:Ht};if(Fr>=0){const Dn=mn.slice();return Dn[Fr]={...Dn[Fr],...Ot},Dn}const Kn=[Ot,...mn];return Kn.sort((Dn,Pi)=>(Dn.displayName??"").localeCompare(Pi.displayName??"","nb-NO",{sensitivity:"base"})),Kn}),O(null),ee(null),Ye.success("Eksisterende bruker oppdatert som lrer og tildelt valgte terminer.")}catch(Qe){console.error("Kunne ikke oppdatere eksisterende lrer:",Qe),Ye.error("Kunne ikke oppdatere eksisterende bruker med nye terminer.")}else Ye.error("Kunne ikke opprette lrer. Se console for mer info.")}},Ue=D=>{O("edit"),ee(D),Re(D.displayName),Me(D.email),he(D.phone??""),ot(D.role),ae(D.allowedTerms??[])},pt=async()=>{if(!G)return;const D=G.docId;try{if(Ee.trim()&&Ee.trim()!==(G.email||""))try{const be=Lm(void 0,"europe-west1");await Pm(be,"adminUpdateUserEmail")({uid:D,newEmail:Ee.trim()})}catch(be){console.error("adminUpdateUserEmail failed",be),Ye.error("Kunne ikke oppdatere lrerens epost i Auth. Endringen er avbrutt. Kontroller at Cloud Function 'adminUpdateUserEmail' er deployet og at du har tilgang.");return}const ue=gt(Ne,"users",D);await Fn(ue,{displayName:ie,email:Ee,phone:st||null,role:Pe,allowedTerms:mt}),n(be=>be.map(je=>je.docId===D?{...je,displayName:ie,email:Ee,phone:st||null,role:Pe,allowedTerms:[...mt]}:je)),O(null),ee(null)}catch(ue){console.error("Feil ved lagring av lrer:",ue),Ye.error("Kunne ikke lagre endringer for lrer.")}},kn=()=>{O(null),ee(null)},ni=D=>{ae(ue=>ue.includes(D)?ue.filter(be=>be!==D):[...ue,D])},ll=()=>{Ae("create"),Ce(null),Ve(""),Ze(""),_t(""),wn("student"),Xe(pe??null)},Wa=async()=>{const D=ke.trim(),ue=De.trim(),be=sn.trim();if(!ue){Ye.error("Navn m fylles ut for  opprette student.");return}if(!D){Ye.error("E-post m fylles ut for  opprette student.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(D)){Ye.error("Ugyldig epost.");return}if(Dt==null){Ye.error("Velg termin studenten tilhrer.");return}try{const Qe=Um(),Et=(await vd(jm,D,Qe)).user.uid,Pt={uid:Et,email:D,displayName:ue||D,name:ue||D,role:"student",term:Dt,phone:be||null,allowedTerms:[]};await ta(gt(Ne,"users",Et),Pt,{merge:!0}),n(Ut=>{const Ft=[{docId:Et,email:D,displayName:Pt.displayName,role:"student",term:Dt,phone:be||null,allowedTerms:[]},...Ut];return Ft.sort((Ht,mn)=>Ht.displayName.localeCompare(mn.displayName,"nb-NO",{sensitivity:"base"})),Ft}),Ae(null),Ce(null),Ye.success(`Ny student med epost ${D} er opprettet.`,{description:"Be studenten trykke Glemt passord p innloggingssiden for  lage sitt eget passord.",duration:12e3})}catch(Qe){if(console.error("Feil ved oppretting av student:",Qe),Qe?.code==="auth/invalid-email")Ye.error("Ugyldig epost.");else if(Qe?.code==="auth/email-already-in-use")try{const lt=qn(Qt(Ne,"users"),fn("email","==",D)),Et=await ln(lt);if(Et.empty){Ye.error("Eposten finnes allerede i Auth, men fant ingen bruker i Firestore. Kontakt administrator.");return}const Pt=Et.docs[0],Ut=Pt.data();await Fn(gt(Ne,"users",Pt.id),{role:"student",term:Dt,displayName:ue||Ut?.displayName||Ut?.name||D,name:ue||Ut?.name||Ut?.displayName||D,phone:be||Ut?.phone||null}),n(Ht=>{const mn=Ht.findIndex(Kn=>Kn.docId===Pt.id),Fr={docId:Pt.id,email:D,displayName:ue||(Ut?.displayName??Ut?.name??D),role:"student",term:Dt,phone:be||Ut?.phone||null,allowedTerms:Array.isArray(Ut?.allowedTerms)?Ut.allowedTerms:[]};if(mn>=0){const Kn=Ht.slice();return Kn[mn]={...Kn[mn],...Fr},Kn}const Ot=[Fr,...Ht];return Ot.sort((Kn,Dn)=>(Kn.displayName??"").localeCompare(Dn.displayName??"","nb-NO",{sensitivity:"base"})),Ot}),Ae(null),Ce(null);const Ft=Db(I,Dt);Ye.success(`Eksisterende bruker oppdatert til termin ${Ft}.`)}catch(lt){console.error("Kunne ikke oppdatere eksisterende student:",lt),Ye.error("Kunne ikke oppdatere eksisterende bruker med valgt termin.")}else Qe?.code==="auth/missing-email"?Ye.error("Epost mangler."):Ye.error("Kunne ikke opprette student. Prv igjen senere.")}},Ja=D=>{Ae("edit"),Ce(D),Ve(D.displayName),Ze(D.email),_t(D.phone??""),wn(D.role),Xe(D.term??null)},zr=async()=>{if(!oe)return;const D=oe.docId;try{if(ke.trim()&&ke.trim()!==(oe.email||""))try{const be=Lm(void 0,"europe-west1");await Pm(be,"adminUpdateUserEmail")({uid:D,newEmail:ke.trim()})}catch(be){console.error("adminUpdateUserEmail failed",be),Ye.error("Kunne ikke oppdatere studentens epost i Auth. Endringen er avbrutt. Kontroller at Cloud Function 'adminUpdateUserEmail' er deployet og at du har tilgang.");return}const ue=gt(Ne,"users",D);await Fn(ue,{displayName:De,email:ke,phone:sn||null,role:jt,term:Dt??null}),n(be=>be.map(je=>je.docId===D?{...je,displayName:De,email:ke,phone:sn||null,role:jt,term:Dt??null}:je)),Ae(null),Ce(null)}catch(ue){console.error("Feil ved lagring av student:",ue),Ye.error("Kunne ikke lagre endringer for student.")}},fs=()=>{Ae(null),Ce(null)},Br=()=>{bt("create"),rr(null),zn(""),Ct(""),Gn(""),vt("admin"),Z([])},yr=async()=>{const D=Nn.trim(),ue=cr.trim(),be=an.trim();if(!D){Ye.error("E-post m fylles ut for  opprette admin.");return}if(!be){Ye.error("Mobilnummer m fylles ut for  opprette admin.");return}if(!F||F.length===0){Ye.error("Velg minst n termin administratoren skal ha tilgang til.");return}try{const je=Um(),lt=(await vd(jm,D,je)).user.uid,Et={uid:lt,email:D,displayName:ue||D,name:ue||D,role:"admin",term:null,phone:be,allowedTerms:F};await ta(gt(Ne,"users",lt),Et,{merge:!0}),n(Pt=>{const Ut=[{docId:lt,email:D,displayName:Et.displayName,role:"admin",term:null,phone:be,allowedTerms:[...F]},...Pt];return Ut.sort((Ft,Ht)=>Ft.displayName.localeCompare(Ht.displayName,"nb-NO",{sensitivity:"base"})),Ut}),bt(null),rr(null),Ye.success("Ny admin opprettet",{description:`Epost: ${D}
Midlertidig passord: ${je}
Gi passordet videre og be om passordbytte etter frste innlogging.`,duration:15e3})}catch(je){console.error("Feil ved oppretting av admin:",je),je?.code==="auth/email-already-in-use"?Ye.error("E-posten er allerede i bruk i Auth. Bruk en annen eller koble eksisterende bruker."):Ye.error("Kunne ikke opprette admin. Se console for mer info.")}},dr=D=>{bt("edit"),rr(D),zn(D.displayName),Ct(D.email),Gn(D.phone??""),vt(D.role),Z(D.allowedTerms??[])},qr=async()=>{if(!xr)return;const D=xr.docId;try{if(Nn.trim()&&Nn.trim()!==(xr.email||""))try{const be=Lm(void 0,"europe-west1");await Pm(be,"adminUpdateUserEmail")({uid:D,newEmail:Nn.trim()})}catch(be){console.error("adminUpdateUserEmail failed",be),Ye.error("Kunne ikke oppdatere adminepost i Auth. Endringen er avbrutt. Kontroller at Cloud Function 'adminUpdateUserEmail' er deployet og at du har tilgang.");return}const ue=gt(Ne,"users",D);await Fn(ue,{displayName:cr,email:Nn,phone:an||null,role:qe,allowedTerms:F}),n(be=>be.map(je=>je.docId===D?{...je,displayName:cr,email:Nn,phone:an||null,role:qe,allowedTerms:[...F]}:je)),bt(null),rr(null)}catch(ue){console.error("Feil ved lagring av admin:",ue),Ye.error("Kunne ikke lagre endringer for admin.")}},_n=()=>{bt(null),rr(null)},fa=D=>{Z(ue=>ue.includes(D)?ue.filter(be=>be!==D):[...ue,D])};return _.jsxs("div",{className:"mb-2",children:[_.jsxs("div",{className:"flex gap-0_5 mb-0_75",children:[_.jsx("button",{type:"button",onClick:()=>p("students"),className:`flex-1 py-0_35 px-0_6 rounded-full fs-0_85 cursor-pointer ${g==="students"?"bg-green-light border-green-light text-black":"bg-white border-gray text-gray-900"}`,children:"Studenter"}),_.jsx("button",{type:"button",onClick:()=>p("teachers"),className:`flex-1 py-0_35 px-0_6 fs-0_85 cursor-pointer ${g==="teachers"?"bg-green-light border-green-light text-black":"bg-white border-gray text-gray-900"}`,children:"Lrere"}),_.jsx("button",{type:"button",onClick:()=>p("admins"),className:`flex-1 py-0_35 px-0_6 rounded-full fs-0_85 cursor-pointer ${g==="admins"?"bg-green-light border-green-light text-black":"bg-white border-gray text-gray-900"}`,children:"Admin"})]}),_.jsx("input",{type:"text",placeholder:"Sk p navn, e-post eller mobil...",value:u,onChange:D=>h(D.target.value),className:"w-full py-0_4 px-0_6 mb-0_75 rounded-md border-gray fs-0_9"}),s?_.jsx(Wd,{}):_.jsxs(_.Fragment,{children:[g==="teachers"&&_.jsxs("div",{style:{marginBottom:"1.2rem"},children:[_.jsxs("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",gap:"0.5rem",marginBottom:"0.4rem"},children:[_.jsx("div",{style:{fontSize:"0.8rem"},children:_.jsx("label",{children:_.jsxs("select",{value:m==="all"?"":m,onChange:D=>{const ue=D.target.value;v(ue===""?"all":parseInt(ue,10))},style:{padding:"0.2rem 0.4rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.8rem"},children:[_.jsx("option",{value:"",children:"Alle terminer"}),ve.map(D=>_.jsx("option",{value:D.value,children:D.label},D.value))]})})}),_.jsx("button",{type:"button",onClick:Je,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.8rem",cursor:"pointer"},children:"Legg til"})]}),_.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[_.jsx("thead",{children:_.jsxs("tr",{children:[_.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>Mt("name"),children:["Navn"," ",T==="name"&&(w==="asc"?"":"")]}),_.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>Mt("email"),children:["E-post"," ",T==="email"&&(w==="asc"?"":"")]}),_.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>Mt("phone"),children:["Mobil"," ",T==="phone"&&(w==="asc"?"":"")]})]})}),_.jsx("tbody",{children:ye.length===0?_.jsx("tr",{children:_.jsx("td",{colSpan:3,style:{padding:"0.4rem",fontSize:"0.85rem",color:"#6b7280"},children:"Ingen lrere funnet."})}):ye.map(D=>_.jsxs("tr",{onClick:()=>Ue(D),style:{cursor:"pointer"},children:[_.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:D.displayName}),_.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:D.email}),_.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:D.phone??""})]},D.docId))})]})]}),g==="students"&&_.jsxs("div",{style:{marginBottom:"1.2rem"},children:[_.jsxs("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",gap:"0.5rem",marginBottom:"0.4rem"},children:[_.jsx("div",{style:{fontSize:"0.8rem"},children:_.jsx("label",{children:_.jsxs("select",{value:q==="all"?"":q,onChange:D=>{const ue=D.target.value;B(ue===""?"all":parseInt(ue,10))},style:{padding:"0.2rem 0.4rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.8rem"},children:[_.jsx("option",{value:"",children:"Alle terminer"}),ve.map(D=>_.jsx("option",{value:D.value,children:D.label},D.value))]})})}),_.jsx("button",{type:"button",onClick:ll,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.8rem",cursor:"pointer"},children:"Legg til"})]}),we.length===0?_.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280"},children:"Ingen studenter funnet."}):_.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[_.jsx("thead",{children:_.jsxs("tr",{children:[_.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>tt("name"),children:["Navn"," ",_e==="name"&&(te==="asc"?"":"")]}),_.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem"},children:"Termin"}),_.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem"},children:"Godkjent?"})]})}),_.jsx("tbody",{children:we.map(D=>_.jsxs("tr",{onClick:()=>Ja(D),style:{cursor:"pointer"},children:[_.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:D.displayName}),_.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:D.term!=null&&D.term!==void 0?Db(I,D.term):"Ingen"}),_.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},onMouseEnter:ue=>{vn(D.docId,D.term??null)},children:D.term==null?"":_.jsx(Wt,{uid:D.docId,term:D.term})})]},D.docId))})]})]}),g==="admins"&&_.jsxs("div",{style:{marginBottom:"1.2rem"},children:[_.jsxs("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",gap:"0.5rem",marginBottom:"0.4rem"},children:[_.jsx("div",{style:{fontSize:"0.8rem"},children:_.jsx("label",{children:_.jsxs("select",{value:Ge==="all"?"":Ge,onChange:D=>{const ue=D.target.value;Be(ue===""?"all":parseInt(ue,10))},style:{padding:"0.2rem 0.4rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.8rem"},children:[_.jsx("option",{value:"",children:"Alle terminer"}),I.map(D=>_.jsx("option",{value:D.value,children:D.label},D.value))]})})}),_.jsx("button",{type:"button",onClick:Br,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.8rem",cursor:"pointer"},children:"Legg til"})]}),Fe.length===0?_.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280"},children:"Ingen administratorer funnet."}):_.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[_.jsx("thead",{children:_.jsxs("tr",{children:[_.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>yt("name"),children:["Navn"," ",N==="name"&&(x==="asc"?"":"")]}),_.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>yt("email"),children:["E-post"," ",N==="email"&&(x==="asc"?"":"")]}),_.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>yt("phone"),children:["Mobil"," ",N==="phone"&&(x==="asc"?"":"")]})]})}),_.jsx("tbody",{children:Fe.map(D=>_.jsxs("tr",{onClick:()=>dr(D),style:{cursor:"pointer"},children:[_.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:D.displayName}),_.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:D.email}),_.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:D.phone??""})]},D.docId))})]})]})]}),Le&&_.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:_.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[_.jsx("h3",{style:{marginTop:0,marginBottom:"0.5rem"},children:Le==="create"?"Ny lrer":"Rediger lrer"}),_.jsx("p",{style:{marginTop:0,marginBottom:"0.9rem",fontSize:"0.8rem",color:"#6b7280"},children:Le==="create"?"Opprett ny lrer, velg hvilke terminer de kan registrere for og lagre.":"Endre navn, e-post, mobil, rolle og hvilke terminer lreren kan undervise p."}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.75rem"},children:[_.jsxs("label",{style:{fontSize:"0.8rem"},children:["Navn",_.jsx("input",{type:"text",value:ie,onChange:D=>Re(D.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),_.jsxs("label",{style:{fontSize:"0.8rem"},children:["E-post",_.jsx("input",{type:"email",value:Ee,onChange:D=>Me(D.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),_.jsxs("label",{style:{fontSize:"0.8rem"},children:["Mobil",_.jsx("input",{type:"tel",value:st,onChange:D=>he(D.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),Le==="edit"&&_.jsxs("label",{style:{fontSize:"0.8rem"},children:["Rolle",_.jsxs("select",{value:Pe,onChange:D=>ot(D.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"},children:[_.jsx("option",{value:"teacher",children:"Lrer"}),_.jsx("option",{value:"student",children:"Student"}),_.jsx("option",{value:"admin",children:"Admin"})]})]}),_.jsxs("div",{style:{fontSize:"0.8rem"},children:[_.jsx("div",{style:{marginBottom:"0.25rem"},children:"Termin(er) lreren kan registrere for:"}),_.jsx("div",{style:{maxHeight:"150px",overflowY:"auto",borderRadius:"0.5rem",border:"1px solid #e5e7eb",padding:"0.35rem 0.45rem"},children:(ve.length===0?[]:ve).map(D=>_.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.35rem",fontSize:"0.8rem",padding:"0.15rem 0"},children:[_.jsx("input",{type:"checkbox",checked:mt.includes(D.value),onChange:()=>ni(D.value)}),_.jsx("span",{children:D.label})]},D.value))})]})]}),_.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"0.5rem"},children:[_.jsx("button",{type:"button",onClick:kn,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.85rem",cursor:"pointer"},children:"Avbryt"}),_.jsx("button",{className:"button button-green",type:"button",onClick:Le==="create"?Lt:pt,children:Le==="create"?"Opprett lrer":"Lagre"})]})]})}),ge&&_.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:_.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[_.jsx("h3",{style:{marginTop:0,marginBottom:"0.5rem"},children:ge==="create"?"Ny student":"Rediger student"}),_.jsx("p",{style:{marginTop:0,marginBottom:"0.9rem",fontSize:"0.8rem",color:"#6b7280"},children:ge==="create"?"Opprett ny student og velg termin.":"Endre navn, e-post, mobil, rolle og termin."}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.75rem"},children:[_.jsxs("label",{style:{fontSize:"0.8rem"},children:["Navn",_.jsx("input",{type:"text",value:De,onChange:D=>Ve(D.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),_.jsxs("label",{style:{fontSize:"0.8rem"},children:["E-post",_.jsx("input",{type:"email",value:ke,onChange:D=>Ze(D.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),_.jsxs("label",{style:{fontSize:"0.8rem"},children:["Mobil",_.jsx("input",{type:"tel",value:sn,onChange:D=>_t(D.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),ge==="edit"&&_.jsxs("label",{style:{fontSize:"0.8rem"},children:["Rolle",_.jsxs("select",{value:jt,onChange:D=>wn(D.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"},children:[_.jsx("option",{value:"student",children:"Student"}),_.jsx("option",{value:"teacher",children:"Lrer"}),_.jsx("option",{value:"admin",children:"Admin"})]})]}),_.jsxs("label",{style:{fontSize:"0.8rem"},children:["Termin",_.jsxs("select",{value:Dt??"",onChange:D=>{const ue=D.target.value;Xe(ue===""?null:parseInt(ue,10))},style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"},children:[_.jsx("option",{value:"",children:"Ingen"}),(ve.length===0?[]:ve).map(D=>_.jsx("option",{value:D.value,children:D.label},D.value))]})]})]}),_.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"0.5rem"},children:[_.jsx("button",{type:"button",onClick:fs,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.85rem",cursor:"pointer"},children:"Avbryt"}),_.jsx("button",{type:"button",onClick:ge==="create"?Wa:zr,style:{padding:"0.3rem 0.9rem",borderRadius:"999px",border:"none",backgroundColor:"#16a34a",color:"#ffffff",fontSize:"0.85rem",cursor:"pointer"},children:ge==="create"?"Opprett student":"Lagre"})]})]})}),Xt&&_.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:_.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[_.jsx("h3",{style:{marginTop:0,marginBottom:"0.5rem"},children:Xt==="create"?"Ny admin":"Rediger admin"}),_.jsx("p",{style:{marginTop:0,marginBottom:"0.9rem",fontSize:"0.8rem",color:"#6b7280"},children:Xt==="create"?"Opprett ny admin.":"Endre navn, e-post, mobil og rolle."}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.75rem"},children:[_.jsxs("label",{style:{fontSize:"0.8rem"},children:["Navn",_.jsx("input",{type:"text",value:cr,onChange:D=>zn(D.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),_.jsxs("label",{style:{fontSize:"0.8rem"},children:["E-post",_.jsx("input",{type:"email",value:Nn,onChange:D=>Ct(D.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),_.jsxs("label",{style:{fontSize:"0.8rem"},children:["Mobil",_.jsx("input",{type:"tel",value:an,onChange:D=>Gn(D.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),Xt==="edit"&&_.jsxs("label",{style:{fontSize:"0.8rem"},children:["Rolle",_.jsxs("select",{value:qe,onChange:D=>vt(D.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"},children:[_.jsx("option",{value:"admin",children:"Admin"}),_.jsx("option",{value:"teacher",children:"Lrer"}),_.jsx("option",{value:"student",children:"Student"})]})]}),_.jsxs("div",{style:{fontSize:"0.8rem"},children:[_.jsx("div",{style:{marginBottom:"0.25rem"},children:"Termin(er) admin kan administrere:"}),_.jsx("div",{style:{maxHeight:"150px",overflowY:"auto",borderRadius:"0.5rem",border:"1px solid #e5e7eb",padding:"0.35rem 0.45rem"},children:ve.length===0?_.jsx("div",{style:{color:"#6b7280"},children:"Ingen terminer tilgjengelig"}):ve.map(D=>_.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.35rem",fontSize:"0.8rem",padding:"0.15rem 0"},children:[_.jsx("input",{type:"checkbox",checked:F.includes(D.value),onChange:()=>fa(D.value)}),_.jsx("span",{children:D.label})]},D.value))})]})]}),_.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"0.5rem"},children:[_.jsx("button",{type:"button",onClick:_n,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.85rem",cursor:"pointer"},children:"Avbryt"}),_.jsx("button",{type:"button",onClick:Xt==="create"?yr:qr,style:{padding:"0.3rem 0.9rem",borderRadius:"999px",border:"none",backgroundColor:"#16a34a",color:"#ffffff",fontSize:"0.85rem",cursor:"pointer"},children:Xt==="create"?"Opprett admin":"Lagre"})]})]})})]})},Kk=()=>{const[i,e]=U.useState([]),[n,s]=U.useState(""),[o,u]=U.useState([]),[h,g]=U.useState(!0),[p,m]=U.useState(""),[v,T]=U.useState({}),[S,w]=U.useState(null),[j,q]=U.useState(""),[B,_e]=U.useState(""),[fe,te]=U.useState(null),[Se,Ge]=U.useState(0),[Be,N]=U.useState({}),[R,x]=U.useState([]),[V,k]=U.useState(!1),[P,I]=U.useState(""),Ke=U.useRef(null),[it,Y]=U.useState(!1),[ce,ve]=U.useState([]),[pe,Le]=U.useState(!1),[O,G]=U.useState([]),{user:ee}=ol(),[ie,Re]=U.useState(null),[Ee,Me]=U.useState(null);U.useEffect(()=>{(async()=>{try{if(!ee?.uid)return;const Z=gt(Ne,"users",ee.uid),de=await hi(Z),ye=de.exists()?de.data():null,Fe=(Array.isArray(ye?.allowedTerms)?ye.allowedTerms:[]).map(Ie=>typeof Ie=="number"?Ie:parseInt(String(Ie),10)).filter(Ie=>!Number.isNaN(Ie));Re(Fe),Me(!!ye?.isSuperAdmin)}catch(Z){console.warn("Kunne ikke hente allowedTerms for innlogget admin (TermSetup):",Z),Re([]),Me(!1)}})()},[ee?.uid]);const st=U.useMemo(()=>Ee?!1:Array.isArray(ie)&&ie.length>0,[Ee,ie]),he=U.useMemo(()=>st?new Set(ie):null,[st,ie]);U.useEffect(()=>{Ee||st&&(!ie||ie.length!==1||n===""&&s(ie[0]))},[Ee,st,ie,n]),U.useEffect(()=>{st&&n!==""&&he&&!he.has(n)&&s("")},[st,he,n]),U.useEffect(()=>{(async()=>{try{g(!0);const[Z,de,ye,we]=await Promise.all([ln(Qt(Ne,"requirements")),ln(Qt(Ne,"times")),ln(Qt(Ne,"termLabels")).catch(()=>null),ln(Qt(Ne,"terms")).catch(()=>null)]),Fe=Z.docs.map(Mt=>{const tt=Mt.data();return{id:Mt.id,term:tt.term,category:tt.category,requiredCount:tt.requiredCount??0,order:typeof tt?.order=="number"?tt.order:void 0}}),Ie=de.docs.map(Mt=>{const tt=Mt.data();return{id:Mt.id,name:tt.name,category:tt.category,term:tt.term}});if(e(Fe),u(Ie),we){const Mt=we.docs.map(tt=>{const yt=tt.data(),Je=typeof yt?.value=="number"?yt.value:void 0,Lt=typeof yt?.label=="string"?yt.label:"",Ue=typeof yt?.order=="number"?yt.order:void 0;return typeof Je!="number"?null:{docId:tt.id,value:Je,label:Lt,order:Ue}}).filter(Boolean);Mt.sort((tt,yt)=>{const Je=tt.order??tt.value,Lt=yt.order??yt.value;return Je-Lt}),x(Mt)}if(ye){const Mt={};ye.docs.forEach(tt=>{const yt=tt.data(),Je=parseInt(tt.id,10);!Number.isNaN(Je)&&typeof yt?.label=="string"&&yt.label.trim()&&(Mt[Je]=yt.label.trim())}),N(Mt)}}catch(Z){console.error("Feil ved lasting av termin-oppsett:",Z)}finally{g(!1)}})()},[]);const Pe=i.filter(F=>F.term===n).sort((F,Z)=>{const de=F.order??Number.MAX_SAFE_INTEGER,ye=Z.order??Number.MAX_SAFE_INTEGER;return de!==ye?de-ye:F.category.localeCompare(Z.category,"nb-NO",{sensitivity:"base"})}),ot=U.useMemo(()=>{const F=R.slice().sort((Z,de)=>(Z.order??Z.value)-(de.order??de.value)).map(Z=>({value:Z.value,label:Z.label||`Termin ${Z.value}`}));return Object.keys(Be).length>0?F.map(Z=>({...Z,label:Be[Z.value]??Z.label})):F},[R,Be]),mt=F=>za(ot,F??null),ae=()=>{if(n==="")return;const F=mt(n);I(F),k(!0),setTimeout(()=>Ke.current?.focus(),0)},ge=()=>{k(!1),I("")},Ae=async()=>{if(n==="")return;const F=mt(n),Z=P.trim();if(!Z||Z===F){k(!1);return}try{const de=R.find(ye=>ye.value===Number(n));if(de)await Fn(gt(Ne,"terms",de.docId),{label:Z,updatedAt:yu()}),x(ye=>ye.map(we=>we.docId===de.docId?{...we,label:Z}:we));else{const ye=String(n);await ta(gt(Ne,"termLabels",ye),{label:Z,updatedAt:yu(),value:Number(n)},{merge:!0}),N(we=>({...we,[Number(n)]:Z}))}k(!1)}catch(de){console.error("Feil ved endring av modulnavn:",de),alert("Kunne ikke endre navn p modulen.")}},oe=async()=>{try{const F=R.map(tt=>tt.value),Z=R.map(tt=>tt.order??tt.value),de=F.length>0?Math.max(...F):0,ye=Z.length>0?Math.max(...Z):0,we=de+1,Fe=ye+1,Mt={docId:(await Rd(Qt(Ne,"terms"),{value:we,label:"",order:Fe,createdAt:yu()})).id,value:we,label:"",order:Fe};x(tt=>[...tt,Mt]),s(we),I(""),k(!0),setTimeout(()=>Ke.current?.focus(),0)}catch(F){console.error("Kunne ikke opprette ny oppmtebok:",F),alert("Kunne ikke opprette ny oppmtebok.")}},Ce=()=>{if(R.length===0)return;const F=R.slice().sort((Z,de)=>(Z.order??Z.value)-(de.order??de.value));ve(F),Y(!0)},De=(F,Z)=>{ve(de=>{const ye=de.slice(),we=F+Z;if(we<0||we>=ye.length)return de;const[Fe]=ye.splice(F,1);return ye.splice(we,0,Fe),ye})},Ve=async()=>{try{const F=nu(Ne);ce.forEach((Z,de)=>{F.update(gt(Ne,"terms",Z.docId),{order:de+1})}),await F.commit(),x(ce.map((Z,de)=>({...Z,order:de+1}))),Y(!1)}catch(F){console.error("Kunne ikke lagre sortering av terminer:",F),alert("Kunne ikke lagre sortering av terminer.")}},ke=()=>{if(n==="")return;const F=i.filter(Z=>Z.term===n).slice().sort((Z,de)=>{const ye=Z.order??Number.MAX_SAFE_INTEGER,we=de.order??Number.MAX_SAFE_INTEGER;return ye!==we?ye-we:Z.category.localeCompare(de.category,"nb-NO",{sensitivity:"base"})});G(F),Le(!0)},Ze=(F,Z)=>{G(de=>{const ye=de.slice(),we=F+Z;if(we<0||we>=ye.length)return de;const[Fe]=ye.splice(F,1);return ye.splice(we,0,Fe),ye})},sn=async()=>{try{const F=nu(Ne);O.forEach((Z,de)=>{F.update(gt(Ne,"requirements",Z.id),{order:de+1})}),await F.commit(),e(Z=>{const de={};return O.forEach((ye,we)=>de[ye.id]=we+1),Z.map(ye=>de[ye.id]?{...ye,order:de[ye.id]}:ye)}),Le(!1)}catch(F){console.error("Kunne ikke lagre sortering av grupper:",F),alert("Kunne ikke lagre sortering av grupper.")}},[_t,jt]=U.useState({open:!1,termValue:null,termLabel:"",reqCount:0,timeCount:0}),wn=()=>{if(n==="")return;const F=n,Z=mt(F),de=i.filter(we=>we.term===F).length,ye=o.filter(we=>we.term===F).length;jt({open:!0,termValue:F,termLabel:Z,reqCount:de,timeCount:ye})},Dt=()=>{jt({open:!1,termValue:null,termLabel:"",reqCount:0,timeCount:0})},Xe=async(F,Z)=>{try{const de=R.find(Je=>Je.value===F);let ye=de?gt(Ne,"terms",de.docId):null;const we=qn(Qt(Ne,"requirements"),fn("term","==",F)),Fe=qn(Qt(Ne,"times"),fn("term","==",F)),[Ie,Mt]=await Promise.all([ln(we),ln(Fe)]);if(!ye)try{const Je=qn(Qt(Ne,"terms"),fn("value","==",F));ye=(await ln(Je)).docs[0]?.ref??null}catch{}const tt=[...Ie.docs.map(Je=>Je.ref),...Mt.docs.map(Je=>Je.ref)];ye&&tt.push(ye);const yt=450;for(let Je=0;Je<tt.length;Je+=yt){const Lt=nu(Ne);tt.slice(Je,Je+yt).forEach(Ue=>Lt.delete(Ue)),await Lt.commit()}e(Je=>Je.filter(Lt=>Lt.term!==F)),u(Je=>Je.filter(Lt=>Lt.term!==F)),x(Je=>Je.filter(Lt=>Lt.value!==F)),s(""),k(!1),m(""),te(null),w(null),q(""),Ye.success("Termin slettet",{description:`${Z} er fjernet med alle grupper og timer.`})}catch(de){console.error("Kunne ikke slette termin med relaterte data:",de),Ye.error("Kunne ikke slette termin. Prv igjen senere.")}finally{Dt()}},At=async()=>{!_t.open||_t.termValue==null||await Xe(_t.termValue,_t.termLabel)},Ur=async F=>{const Z=j.trim();if(!Z||Z===F.name){w(null),q("");return}try{await Fn(gt(Ne,"times",F.id),{name:Z}),u(de=>de.map(ye=>ye.id===F.id?{...ye,name:Z}:ye)),w(null),q("")}catch(de){console.error("Feil ved endring av timenavn:",de),alert("Kunne ikke oppdatere navn p timen.")}},xn=o.filter(F=>F.term===n),ur=F=>{te(F.id),_e(F.category),Ge(F.requiredCount??0)},gr=()=>{te(null)},vn=async F=>{if(!fe)return;const Z=F.category,de=(B||"").trim()||Z,ye=o.filter(Ie=>Ie.term===F.term&&Ie.category===Z).length;let we=Se;if((Number.isNaN(we)||we<0)&&(we=0),ye>0&&we>ye&&(we=ye),Pe.find(Ie=>Ie.id!==F.id&&Ie.category.toLowerCase()===de.toLowerCase())){alert("Det finnes allerede en gruppe med dette navnet i valgt termin.");return}try{const Ie=nu(Ne),Mt=gt(Ne,"requirements",F.id);Ie.update(Mt,{category:de,requiredCount:we});const tt=qn(Qt(Ne,"times"),fn("term","==",F.term),fn("category","==",Z));(await ln(tt)).forEach(Ue=>{Ie.update(Ue.ref,{category:de})});const Je=qn(Qt(Ne,"sessions"),fn("term","==",F.term),fn("category","==",Z));(await ln(Je)).forEach(Ue=>{Ie.update(Ue.ref,{category:de})}),await Ie.commit(),e(Ue=>Ue.map(pt=>pt.id===F.id?{...pt,category:de,requiredCount:we}:pt)),u(Ue=>Ue.map(pt=>pt.term===F.term&&pt.category===Z?{...pt,category:de}:pt)),te(null)}catch(Ie){console.error("Feil ved lagring av gruppe:",Ie),alert("Kunne ikke lagre endringene for gruppen.")}},Wt=async()=>{const F=p.trim();if(!F)return;if(Pe.some(de=>de.category.toLowerCase()===F.toLowerCase())){alert("Denne gruppen finnes allerede for valgt termin.");return}try{const de=i.filter(Ie=>Ie.term===n),we=(de.length?Math.max(...de.map(Ie=>typeof Ie.order=="number"?Ie.order:0)):0)+1,Fe=await Rd(Qt(Ne,"requirements"),{term:n,category:F,requiredCount:0,order:we});e(Ie=>[...Ie,{id:Fe.id,term:n,category:F,requiredCount:0,order:we}]),m("")}catch(de){console.error("Feil ved oppretting av kategori:",de),alert("Kunne ikke opprette kategori.")}},[Xt,bt]=U.useState({open:!1,req:null,timeCount:0}),xr=async(F,Z)=>{const{id:de,term:ye,category:we}=F;try{const Fe=qn(Qt(Ne,"times"),fn("term","==",ye),fn("category","==",we)),Ie=await ln(Fe),Mt=[gt(Ne,"requirements",de),...Ie.docs.map(yt=>yt.ref)],tt=450;for(let yt=0;yt<Mt.length;yt+=tt){const Je=nu(Ne);Mt.slice(yt,yt+tt).forEach(Lt=>Je.delete(Lt)),await Je.commit()}e(yt=>yt.filter(Je=>Je.id!==de)),u(yt=>yt.filter(Je=>!(Je.term===ye&&Je.category===we)))}catch(Fe){console.error("Feil ved sletting av gruppe og tilhrende timer:",Fe),Ye.error("Kunne ikke slette gruppen. Prv igjen senere.")}finally{cr()}},rr=F=>{const Z=o.filter(de=>de.term===F.term&&de.category===F.category).length;if(Z===0){xr(F);return}bt({open:!0,req:F,timeCount:Z})},cr=()=>{bt({open:!1,req:null,timeCount:0})},zn=async()=>{Xt.req&&await xr(Xt.req,Xt.timeCount)},Nn=async F=>{const Z=F.id,de=(v[Z]??"").trim();if(de)try{const ye=await Rd(Qt(Ne,"times"),{term:n,category:F.category,name:de});u(we=>[...we,{id:ye.id,term:n,category:F.category,name:de}]),T(we=>({...we,[Z]:""}))}catch(ye){console.error("Feil ved oppretting av time:",ye),alert("Kunne ikke opprette time.")}},[Ct,an]=U.useState({open:!1,time:null}),Gn=F=>{an({open:!0,time:F})},qe=()=>{an({open:!1,time:null})},vt=async()=>{if(!Ct.time)return;const F=Ct.time;try{await u1(gt(Ne,"times",F.id)),u(Z=>Z.filter(de=>de.id!==F.id))}catch(Z){console.error("Feil ved sletting av time:",Z),Ye.error("Kunne ikke slette time. Prv igjen senere.")}finally{qe()}};return h?_.jsx(Wd,{}):_.jsxs(_.Fragment,{children:[_.jsxs("section",{style:{marginBottom:"2rem"},children:[_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.75rem"},children:[_.jsxs("div",{className:"admin-books-controls",style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[_.jsxs("div",{className:`admin-books-rest${Ee?" admin-books-rest--split":""}`,style:{display:"flex",gap:"0.5rem",flex:1,minWidth:0},children:[V&&Ee?_.jsx("input",{className:"admin-books-select",ref:Ke,type:"text",value:P,onChange:F=>I(F.target.value),onKeyDown:F=>{F.key==="Enter"?(F.preventDefault(),Ae()):F.key==="Escape"&&(F.preventDefault(),ge())},placeholder:"Navn p modul",style:{flex:1,minWidth:0,padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db"}}):_.jsxs("select",{className:"admin-books-select",value:n,onChange:F=>{const Z=F.target.value;if(Z==="__new__"){if(st)return;oe();return}s(Z===""?"":parseInt(Z,10))},style:{flex:1,minWidth:0,padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",width:Ee?void 0:"100%"},children:[_.jsx("option",{value:"",disabled:!0,children:"Velg termin"}),(st?ot.filter(F=>he?.has(F.value)):ot).map(F=>_.jsx("option",{value:F.value,children:F.label},F.value)),!st&&_.jsx("option",{value:"__new__",children:"+ Ny oppmtebok"})]}),Ee&&_.jsx("button",{className:"button-green admin-books-action",type:"button",disabled:n===""&&!V,onClick:()=>{V?Ae():ae()},style:{width:"160px",padding:"0.45rem 0.9rem",cursor:n===""&&!V?"not-allowed":"pointer",whiteSpace:"nowrap"},children:V?"Legg til":"Endre navn"})]}),Ee&&_.jsx("button",{className:"admin-books-filter",type:"button",title:"Sorter oppmtebker",disabled:R.length===0,onClick:Ce,style:{padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",background:"#ffffff",fontSize:"0.9rem",cursor:R.length===0?"not-allowed":"pointer"},children:""})]}),_.jsx("div",{className:"admin-books-controls",style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:(()=>{const F=n===""?null:Number(n),Z=F!=null?R.find(Ie=>Ie.value===F):void 0,de=!!Z?.label&&Z.label.trim().length>0,ye=F!=null?Be[F]:void 0,we=!!ye&&ye.trim().length>0,Fe=F!=null&&(de||we);return _.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"admin-books-rest admin-books-rest--split",style:{display:"flex",gap:"0.5rem",flex:1,minWidth:0},children:[_.jsx("input",{className:"admin-books-select",type:"text",placeholder:"Ny gruppe...",value:p,onChange:Ie=>m(Ie.target.value),onKeyDown:Ie=>{Ie.key==="Enter"&&Fe&&(Ie.preventDefault(),Wt())},disabled:!Fe,style:{flex:1,minWidth:0,padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",opacity:Fe?1:.6,cursor:Fe?"text":"not-allowed"}}),_.jsx("button",{className:"button-green admin-books-action",type:"button",onClick:Wt,disabled:!Fe,style:{width:"160px",padding:"0.45rem 0.9rem",cursor:Fe?"pointer":"not-allowed",whiteSpace:"nowrap",opacity:Fe?1:.7},children:"Legg til"})]}),_.jsx("button",{className:"admin-books-filter",type:"button",title:"Sorter grupper",disabled:!Fe||Pe.length===0,onClick:ke,style:{padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",background:"#ffffff",fontSize:"0.9rem",cursor:!Fe||Pe.length===0?"not-allowed":"pointer",opacity:!Fe||Pe.length===0?.7:1},children:""})]})})()})]}),(()=>{const F=n===""?null:Number(n),Z=F!=null?R.find(Ie=>Ie.value===F):void 0,de=!!Z?.label&&Z.label.trim().length>0,ye=F!=null?Be[F]:void 0,we=!!ye&&ye.trim().length>0;return F!=null&&(de||we)?Pe.length===0?_.jsxs("p",{style:{fontSize:"0.85rem",color:"#6b7280"},children:["Ingen grupper definert enn for ",mt(n),"."]}):_.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:Pe.map(Ie=>{const Mt=Ie.id,tt=xn.filter(Ue=>Ue.category===Ie.category).sort((Ue,pt)=>{const kn=Lb(Ue.name),ni=Lb(pt.name);return kn!==ni?kn-ni:Ue.name.localeCompare(pt.name,"nb-NO",{sensitivity:"base"})}),yt=v[Mt]??"",Je=xn.filter(Ue=>Ue.category===Ie.category).length,Lt=fe===Ie.id;return _.jsxs("div",{style:{borderRadius:"0.75rem",border:"1px solid #e5e7eb",padding:"0.75rem 0.75rem",backgroundColor:"#f9fafb"},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem",gap:"0.5rem",flexWrap:"wrap"},children:[_.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:Lt?_.jsxs(_.Fragment,{children:[_.jsx("input",{type:"text",value:B,onChange:Ue=>_e(Ue.target.value),onKeyDown:Ue=>{Ue.key==="Enter"?vn(Ie):Ue.key==="Escape"&&gr()},autoFocus:!0,style:{minWidth:"12rem",padding:"0.2rem 0.35rem",borderRadius:"0.4rem",border:"1px solid #d1d5db",fontSize:"0.9rem"}}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[_.jsx("input",{type:"number",min:0,max:Je,value:Se,onChange:Ue=>{const pt=parseInt(Ue.target.value,10);Ge(Number.isNaN(pt)?0:pt)},onKeyDown:Ue=>{Ue.key==="Enter"?vn(Ie):Ue.key==="Escape"&&gr()},style:{width:"4rem",padding:"0.2rem 0.35rem",borderRadius:"0.4rem",border:"1px solid #d1d5db",fontSize:"0.9rem",textAlign:"center"}}),_.jsxs("span",{style:{fontSize:"0.8rem",color:"#6b7280"},children:["/ ",Je]})]})]}):_.jsxs("div",{style:{fontWeight:600,fontSize:"0.95rem"},children:[Ie.category," (",Ie.requiredCount,"/",Je,")"]})}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[_.jsx("button",{className:"button-green admin-books-action",type:"button",onClick:()=>Lt?void vn(Ie):ur(Ie),style:{padding:"0.45rem 0.9rem",cursor:"pointer",whiteSpace:"nowrap"},children:Lt?"Lagre":"Endre navn"}),_.jsx("button",{type:"button",onClick:()=>rr({id:Ie.id,term:Ie.term,category:Ie.category}),style:{padding:"0.25rem 0.6rem",borderRadius:"999px",border:"none",backgroundColor:"#fee2e2",color:"#991b1b",fontSize:"0.75rem",cursor:"pointer"},children:"Slett gruppe"})]})]}),tt.length>0?_.jsx("ul",{style:{listStyle:"none",paddingLeft:0,margin:"0 0 0.5rem 0",fontSize:"0.85rem"},children:tt.map(Ue=>{const pt=S===Ue.id;return _.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.15rem 0",borderBottom:"1px dashed #e5e7eb",gap:"0.5rem"},children:[_.jsx("div",{style:{flex:1},children:pt?_.jsx("input",{type:"text",value:j,onChange:kn=>q(kn.target.value),onKeyDown:kn=>{kn.key==="Enter"?Ur(Ue):kn.key==="Escape"&&(w(null),q(""))},autoFocus:!0,style:{width:"100%",padding:"0.2rem 0.35rem",borderRadius:"0.4rem",border:"1px solid #d1d5db",fontSize:"0.85rem"}}):_.jsx("span",{children:Ue.name})}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem"},children:[pt?_.jsx("button",{type:"button",onClick:()=>void Ur(Ue),style:{padding:"0.15rem 0.45rem",borderRadius:"999px",border:"none",backgroundColor:"#e5e7eb",color:"#111827",fontSize:"0.75rem",cursor:"pointer"},children:"Lagre"}):_.jsx("button",{type:"button",onClick:()=>{w(Ue.id),q(Ue.name)},style:{padding:"0.15rem 0.45rem",borderRadius:"999px",border:"none",backgroundColor:"#e5e7eb",color:"#111827",fontSize:"0.75rem",cursor:"pointer"},children:"Endre"}),_.jsx("button",{type:"button",onClick:()=>Gn(Ue),style:{padding:"0.15rem 0.45rem",borderRadius:"999px",border:"none",backgroundColor:"#fee2e2",color:"#b91c1c",fontSize:"0.75rem",cursor:"pointer"},children:"Slett"})]})]},Ue.id)})}):_.jsx("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.8rem",color:"#9ca3af"},children:"Ingen timer lagt til i denne gruppen."}),_.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.25rem"},children:[_.jsx("input",{type:"text",placeholder:"Ny time...",value:yt,onChange:Ue=>T(pt=>({...pt,[Mt]:Ue.target.value})),onKeyDown:Ue=>{Ue.key==="Enter"&&(Ue.preventDefault(),Nn(Ie))},style:{flex:1,padding:"0.3rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem"}}),_.jsx("button",{type:"button",onClick:()=>Nn(Ie),style:{padding:"0.35rem 0.8rem",borderRadius:"999px",border:"none",backgroundColor:"#4b5563",color:"#ffffff",fontSize:"0.8rem",cursor:"pointer"},children:"Legg til time"})]})]},Ie.id)})}):null})(),n!==""&&Ee&&_.jsx("div",{style:{marginTop:"1rem",display:"flex",justifyContent:"center"},children:_.jsx("button",{className:"btn-hover-danger",type:"button",onClick:wn,style:{backgroundColor:"#ef4444",borderColor:"#ef4444",color:"white",fontSize:"0.9rem"},children:"Slett termin"})}),_t.open&&_t.termValue!=null&&_.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1e3},children:_.jsxs("div",{className:"page-card",style:{textAlign:"center",maxWidth:520,width:"100%",background:"#ffffff"},children:[_.jsx("h3",{style:{marginTop:0},children:"Slett termin?"}),_.jsxs("p",{style:{whiteSpace:"pre-wrap",lineHeight:1.4},children:[`Du er i ferd med  slette oppmteboka for ${_t.termLabel}.

`,`Dette vil slette selve terminen, alle grupper (${_t.reqCount} stk) og alle timer (${_t.timeCount} stk) som tilhrer denne terminen.
`]}),_.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",marginTop:"0.75rem"},children:[_.jsx("button",{className:"btn-hover-danger",type:"button",onClick:Dt,style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"none",background:"#ef4444",color:"black",cursor:"pointer"},children:"Avbryt"}),_.jsx("button",{className:"btn-hover-lg",type:"button",onClick:()=>void At(),style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#ffffff",cursor:"pointer"},children:"Slett termin"})]})]})}),Xt.open&&Xt.req&&_.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1e3},children:_.jsxs("div",{className:"page-card",style:{maxWidth:520,width:"100%",background:"#ffffff"},children:[_.jsx("h3",{style:{marginTop:0},children:"Slett gruppe?"}),_.jsxs("p",{style:{whiteSpace:"pre-wrap",lineHeight:1.4},children:[`Du er i ferd med  slette gruppen ${Xt.req.category}.

`,`Dette vil ogs slette alle tilhrende timer i denne gruppen for valgt termin (${Xt.timeCount}).
`,"Handlingen kan ikke angres."]}),_.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",marginTop:"0.75rem"},children:[_.jsx("button",{type:"button",onClick:cr,style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#ffffff",cursor:"pointer"},children:"Avbryt"}),_.jsx("button",{type:"button",onClick:()=>void zn(),style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"none",background:"#ef4444",color:"#ffffff",cursor:"pointer"},children:"Slett gruppe"})]})]})}),Ct.open&&Ct.time&&_.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1e3},children:_.jsxs("div",{className:"page-card",style:{maxWidth:520,width:"100%",background:"#ffffff"},children:[_.jsx("h3",{style:{marginTop:0},children:"Slett time?"}),_.jsxs("p",{style:{whiteSpace:"pre-wrap",lineHeight:1.4},children:[`Du er i ferd med  slette timen ${Ct.time.name} i gruppen ${Ct.time.category} for ${mt(Ct.time.term)}.

`,`Historiske sesjoner beholdes, men timen forsvinner fra admin-oppsettet.
`,"Handlingen kan ikke angres."]}),_.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",marginTop:"0.75rem"},children:[_.jsx("button",{type:"button",onClick:qe,style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#ffffff",cursor:"pointer"},children:"Avbryt"}),_.jsx("button",{type:"button",onClick:()=>void vt(),style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"none",background:"#ef4444",color:"#ffffff",cursor:"pointer"},children:"Slett time"})]})]})})]}),it&&_.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:_.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[_.jsx("h3",{style:{marginTop:0},children:"Sorter oppmtebker"}),_.jsx("ul",{style:{listStyle:"none",padding:0,margin:"0 0 0.75rem"},children:ce.map((F,Z)=>_.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"0.4rem 0.6rem",marginBottom:"0.4rem"},children:[_.jsx("span",{style:{fontSize:"0.9rem"},children:F.label||`Termin ${F.value}`}),_.jsxs("span",{style:{display:"flex",gap:"0.25rem"},children:[_.jsx("button",{type:"button",onClick:()=>De(Z,-1),disabled:Z===0,style:{padding:"0.2rem 0.4rem",borderRadius:"0.35rem",border:"1px solid #d1d5db",background:"#fff"},children:""}),_.jsx("button",{type:"button",onClick:()=>De(Z,1),disabled:Z===ce.length-1,style:{padding:"0.2rem 0.4rem",borderRadius:"0.35rem",border:"1px solid #d1d5db",background:"#fff"},children:""})]})]},F.docId))}),_.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem"},children:[_.jsx("button",{type:"button",onClick:()=>Y(!1),style:{padding:"0.35rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#fff"},children:"Avbryt"}),_.jsx("button",{type:"button",onClick:()=>void Ve(),style:{padding:"0.35rem 0.7rem",borderRadius:"999px",border:"none",background:"#16a34a",color:"#fff"},children:"Lagre rekkeflge"})]})]})}),pe&&_.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:_.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[_.jsx("h3",{style:{marginTop:0},children:"Sorter grupper"}),_.jsx("ul",{style:{listStyle:"none",padding:0,margin:"0 0 0.75rem"},children:O.map((F,Z)=>_.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"0.4rem 0.6rem",marginBottom:"0.4rem"},children:[_.jsx("span",{style:{fontSize:"0.9rem"},children:F.category}),_.jsxs("span",{style:{display:"flex",gap:"0.25rem"},children:[_.jsx("button",{type:"button",onClick:()=>Ze(Z,-1),disabled:Z===0,style:{padding:"0.2rem 0.4rem",borderRadius:"0.35rem",border:"1px solid #d1d5db",background:"#fff"},children:""}),_.jsx("button",{type:"button",onClick:()=>Ze(Z,1),disabled:Z===O.length-1,style:{padding:"0.2rem 0.4rem",borderRadius:"0.35rem",border:"1px solid #d1d5db",background:"#fff"},children:""})]})]},F.id))}),_.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem"},children:[_.jsx("button",{type:"button",onClick:()=>Le(!1),style:{padding:"0.35rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#fff"},children:"Avbryt"}),_.jsx("button",{type:"button",onClick:()=>void sn(),style:{padding:"0.35rem 0.7rem",borderRadius:"999px",border:"none",background:"#16a34a",color:"#fff"},children:"Lagre rekkeflge"})]})]})})]})},Qk=()=>{const{user:i,loading:e,logout:n}=ol(),[s,o]=U.useState("setup"),[u,h]=U.useState(!1);return e?_.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:_.jsx(Wd,{})}):!i||i.role!=="admin"?_.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"1.5rem"},children:_.jsxs("div",{className:"page-card page-card--admin",children:[_.jsx("h2",{children:"Ingen tilgang"}),_.jsx("p",{children:"Du m vre logget inn som administrator for  se denne siden."})]})}):_.jsxs(_.Fragment,{children:[_.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"flex-start",justifyContent:"center",padding:"1.5rem 1rem"},children:_.jsxs("div",{className:"page-card page-card--admin",children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[_.jsx("div",{style:{fontWeight:600},children:i.displayName||i.email}),_.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[_.jsx("button",{type:"button",onClick:()=>h(!0),style:{padding:"0.35rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#ffffff",cursor:"pointer",fontSize:"0.85rem"},children:"Min profil"}),_.jsx("button",{type:"button",onClick:n,style:{padding:"0.35rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#ffffff",cursor:"pointer",fontSize:"0.85rem"},children:"Logg ut"})]})]}),_.jsxs("header",{style:{marginBottom:"1rem",borderBottom:"1px solid #e5e7eb",paddingBottom:"0.75rem"},children:[_.jsx("h2",{style:{margin:0},children:"Adminpanel"}),_.jsx("p",{style:{margin:"0.25rem 0 0.75rem",fontSize:"0.85rem",color:"#6b7280"},children:"Oppsett av oppmtebker og administrasjon av brukere."}),_.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[_.jsx("button",{type:"button",onClick:()=>o("setup"),style:{flex:1,padding:"0.35rem 0.5rem",borderRadius:"999px",border:"1px solid #e5e7eb",background:s==="setup"?"#6CE1AB":"#ffffff",color:s==="setup"?"black":"#111827",fontSize:"0.85rem",cursor:"pointer"},children:"Oppmtebker"}),_.jsx("button",{type:"button",onClick:()=>o("users"),style:{flex:1,padding:"0.35rem 0.5rem",borderRadius:"999px",border:"1px solid #e5e7eb",background:s==="users"?"#6CE1AB":"#ffffff",color:s==="users"?"black":"#111827",fontSize:"0.85rem",cursor:"pointer"},children:"Brukere"})]})]}),s==="setup"&&_.jsx(Kk,{}),s==="users"&&_.jsx(Gk,{})]})}),u&&_.jsx(vg,{uid:i.uid,role:i.role,email:i.email,displayName:i.displayName,onClose:()=>h(!1)})]})};function Pb(){return _.jsx("footer",{children:_.jsxs("div",{className:"container",children:[_.jsxs("div",{className:"row row1",children:[_.jsx("h2",{children:"Vi lytter til dere!"}),_.jsx("p",{children:"Traskende rundt i sykehuskorridorene med en oppmtebok du alltid er redd for  miste eller sle kaffekoppen p, begynner man  fundere p om det gr an  gjre livet litt enklere S hvorfor ikke lage en digital oppmtebok du aldri glemmer hjemme, som er superrask for lrerne og sparer fakultetet for over 3000(!) papirutgaver i ret?"}),_.jsx("br",{}),_.jsx("p",{children:"Miljvennlig, effektivt og bedre for studentene. Velkommen til Oppmteboka  skapt mellom uttrykning p vakt eller halvsovende p sofaen i de sene nattestimer. Send oss en melding om du har noe tips til hva vi br gjre!"})]}),_.jsxs("div",{className:"row row2",children:[_.jsx("img",{src:"/logo.svg",alt:"Oppmteboka logo"}),_.jsx("p",{className:"normalFont",children:_.jsx("a",{className:"link",href:"mailto:hei@sablateknisk.no?subject=Tilbakelding",children:"Gi tilbakemelding"})}),_.jsx("p",{children:"hei@sablateknisk.no"}),_.jsx("br",{}),_.jsxs("p",{className:"smallText",children:["Nettisden er utviklet av",_.jsx("br",{})," Vetle Mrland og ge Frivoll"]})]})]})})}function Yk({user:i}){const{logout:e}=ol(),[n,s]=U.useState(!1);return _.jsxs("header",{children:[_.jsxs("div",{className:"header-container",children:[_.jsx("div",{className:"header-img",children:_.jsx("img",{src:"/logo.svg",alt:"Logo",className:""})}),_.jsxs("div",{className:"header-buttons",children:[_.jsx("button",{className:"button-small button-border button-colorless boldFont",type:"button",onClick:()=>s(!0),children:"Min profil"}),_.jsx("button",{className:"button-small button-border button-black boldFont",type:"button",onClick:e,children:"Logg ut"})]})]}),_.jsx("div",{children:n&&_.jsx(vg,{uid:i.uid,role:i.role,email:i.email,displayName:i.displayName,onClose:()=>s(!1)})})]})}function Xk(){const{user:i,login:e}=ol(),[n,s]=U.useState(""),[o,u]=U.useState(""),[h,g]=U.useState(null),[p,m]=U.useState(null),[v,T]=U.useState(!1),[S,w]=U.useState(!1),j=U.useRef(null),q=U.useRef(null);U.useEffect(()=>{if(!h)return;const fe=setTimeout(()=>g(null),3e3);return()=>clearTimeout(fe)},[h]),U.useEffect(()=>{if(!p)return;const fe=setTimeout(()=>m(null),3e3);return()=>clearTimeout(fe)},[p]),U.useEffect(()=>{if(i)try{window.scrollTo({top:0,behavior:"smooth"})}catch{window.scrollTo(0,0)}},[i]);const B=async fe=>{if(fe.preventDefault(),g(null),!n||!o){g("Fyll inn bde e-post og passord.");return}T(!0);try{await e(n.trim(),o)}catch(te){console.error(te);let Se="Kunne ikke logge inn.";te?.code==="auth/user-not-found"?Se="Bruker finnes ikke.":te?.code==="auth/wrong-password"?Se="Feil passord.":te?.code==="auth/email-already-in-use"?Se="E-postadressen er allerede registrert.":te?.code==="auth/weak-password"&&(Se="Passordet er for svakt (min. 6 tegn)."),g(Se)}finally{T(!1)}},_e=async()=>{const fe=n.trim();if(!fe){g("Skriv inn epostadressen din frst.");return}w(!0);try{await JC($s,fe),m("Sendte epost for tilbakestilling av passord.")}catch(te){console.error(te);let Se="Kunne ikke sende epost for tilbakestilling.";te?.code==="auth/invalid-email"?Se="Ugyldig epostadresse.":te?.code==="auth/user-not-found"&&(Se="Fant ingen bruker for denne epostadressen."),g(Se)}finally{w(!1)}};return i?_.jsxs(_.Fragment,{children:[_.jsx(Yk,{user:i}),_.jsx("div",{id:"main",children:i.role==="admin"?_.jsx(Qk,{user:i}):i.role==="teacher"?_.jsx(wk,{user:i}):_.jsx(ck,{user:i})}),_.jsx(Pb,{})]}):_.jsxs(_.Fragment,{children:[_.jsx("div",{id:"main",children:_.jsxs("div",{className:"login-card-container",children:[_.jsx("div",{id:"loginMan",children:_.jsx("img",{src:"/login-man.svg",alt:"Logo",className:""})}),_.jsxs("div",{className:"card round-corners-whole-f login-card",children:[_.jsx("h1",{children:"Velkommen tilbake"}),_.jsxs("form",{onSubmit:B,children:[_.jsxs("div",{className:"input-group",children:[_.jsx("label",{className:"input-label",children:"Mobil / epost"}),_.jsx("input",{className:"input-field round-corners-whole-h",type:"email",value:n,onChange:fe=>s(fe.target.value),ref:j,onKeyDown:fe=>{fe.key==="Enter"&&(fe.preventDefault(),q.current?.focus())},enterKeyHint:"next"})]}),_.jsxs("div",{className:"input-group",children:[_.jsx("label",{className:"input-label",children:"Passord"}),_.jsx("input",{className:"input-field round-corners-whole-h",type:"password",value:o,onChange:fe=>u(fe.target.value),ref:q,enterKeyHint:"go"})]}),_.jsx("button",{type:"submit",disabled:v,className:"button-primary button-black round-corners-whole-h",children:v?"Logger inn...":"Logg inn"}),_.jsx("button",{type:"button",onClick:_e,disabled:S,className:"button-colorless boldFont",children:S?"Sender epost...":"Glemt passord"}),_.jsxs("p",{className:"errorTxt",children:[_.jsx("br",{}),h]}),_.jsxs("p",{className:"successTxt",children:[_.jsx("br",{}),p]})]})]})]})}),_.jsx(Pb,{})]})}fw.createRoot(document.getElementById("root")).render(_.jsxs(me.StrictMode,{children:[_.jsx(Xk,{}),_.jsx(tk,{richColors:!0,position:"top-center"})]}));export{$k as c,gp as g};
