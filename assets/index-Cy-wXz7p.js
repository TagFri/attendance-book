function Ww(a,e){for(var n=0;n<e.length;n++){const o=e[n];if(typeof o!="string"&&!Array.isArray(o)){for(const h in o)if(h!=="default"&&!(h in a)){const m=Object.getOwnPropertyDescriptor(o,h);m&&Object.defineProperty(a,h,m.get?m:{enumerable:!0,get:()=>o[h]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))o(h);new MutationObserver(h=>{for(const m of h)if(m.type==="childList")for(const x of m.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&o(x)}).observe(document,{childList:!0,subtree:!0});function n(h){const m={};return h.integrity&&(m.integrity=h.integrity),h.referrerPolicy&&(m.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?m.credentials="include":h.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function o(h){if(h.ep)return;h.ep=!0;const m=n(h);fetch(h.href,m)}})();var zh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function z1(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var z0={exports:{}},Wc={};var G2;function Kw(){if(G2)return Wc;G2=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(o,h,m){var x=null;if(m!==void 0&&(x=""+m),h.key!==void 0&&(x=""+h.key),"key"in h){m={};for(var v in h)v!=="key"&&(m[v]=h[v])}else m=h;return h=m.ref,{$$typeof:a,type:o,key:x,ref:h!==void 0?h:null,props:m}}return Wc.Fragment=e,Wc.jsx=n,Wc.jsxs=n,Wc}var q2;function Qw(){return q2||(q2=1,z0.exports=Kw()),z0.exports}var k=Qw(),j0={exports:{}},Lt={};var X2;function Zw(){if(X2)return Lt;X2=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),x=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),B=Symbol.iterator;function Y(q){return q===null||typeof q!="object"?null:(q=B&&q[B]||q["@@iterator"],typeof q=="function"?q:null)}var te={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},le=Object.assign,de={};function Ge(q,ae,re){this.props=q,this.context=ae,this.refs=de,this.updater=re||te}Ge.prototype.isReactComponent={},Ge.prototype.setState=function(q,ae){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ae,"setState")},Ge.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function Le(){}Le.prototype=Ge.prototype;function me(q,ae,re){this.props=q,this.context=ae,this.refs=de,this.updater=re||te}var Be=me.prototype=new Le;Be.constructor=me,le(Be,Ge.prototype),Be.isPureReactComponent=!0;var ct=Array.isArray;function je(){}var F={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function V(q,ae,re){var ye=re.ref;return{$$typeof:a,type:q,key:ae,ref:ye!==void 0?ye:null,props:re}}function Z(q,ae){return V(q.type,ae,q.props)}function X(q){return typeof q=="object"&&q!==null&&q.$$typeof===a}function W(q){var ae={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(re){return ae[re]})}var G=/\/+/g;function Qe(q,ae){return typeof q=="object"&&q!==null&&q.key!=null?W(""+q.key):ae.toString(36)}function oe(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(je,je):(q.status="pending",q.then(function(ae){q.status==="pending"&&(q.status="fulfilled",q.value=ae)},function(ae){q.status==="pending"&&(q.status="rejected",q.reason=ae)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function ue(q,ae,re,ye,ke){var we=typeof q;(we==="undefined"||we==="boolean")&&(q=null);var rt=!1;if(q===null)rt=!0;else switch(we){case"bigint":case"string":case"number":rt=!0;break;case"object":switch(q.$$typeof){case a:case e:rt=!0;break;case S:return rt=q._init,ue(rt(q._payload),ae,re,ye,ke)}}if(rt)return ke=ke(q),rt=ye===""?"."+Qe(q,0):ye,ct(ke)?(re="",rt!=null&&(re=rt.replace(G,"$&/")+"/"),ue(ke,ae,re,"",function(mn){return mn})):ke!=null&&(X(ke)&&(ke=Z(ke,re+(ke.key==null||q&&q.key===ke.key?"":(""+ke.key).replace(G,"$&/")+"/")+rt)),ae.push(ke)),1;rt=0;var at=ye===""?".":ye+":";if(ct(q))for(var wt=0;wt<q.length;wt++)ye=q[wt],we=at+Qe(ye,wt),rt+=ue(ye,ae,re,we,ke);else if(wt=Y(q),typeof wt=="function")for(q=wt.call(q),wt=0;!(ye=q.next()).done;)ye=ye.value,we=at+Qe(ye,wt++),rt+=ue(ye,ae,re,we,ke);else if(we==="object"){if(typeof q.then=="function")return ue(oe(q),ae,re,ye,ke);throw ae=String(q),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return rt}function Ae(q,ae,re){if(q==null)return q;var ye=[],ke=0;return ue(q,ye,"","",function(we){return ae.call(re,we,ke++)}),ye}function Ye(q){if(q._status===-1){var ae=q._result;ae=ae(),ae.then(function(re){(q._status===0||q._status===-1)&&(q._status=1,q._result=re)},function(re){(q._status===0||q._status===-1)&&(q._status=2,q._result=re)}),q._status===-1&&(q._status=0,q._result=ae)}if(q._status===1)return q._result.default;throw q._result}var ft=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},yt={map:Ae,forEach:function(q,ae,re){Ae(q,function(){ae.apply(this,arguments)},re)},count:function(q){var ae=0;return Ae(q,function(){ae++}),ae},toArray:function(q){return Ae(q,function(ae){return ae})||[]},only:function(q){if(!X(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return Lt.Activity=O,Lt.Children=yt,Lt.Component=Ge,Lt.Fragment=n,Lt.Profiler=h,Lt.PureComponent=me,Lt.StrictMode=o,Lt.Suspense=T,Lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,Lt.__COMPILER_RUNTIME={__proto__:null,c:function(q){return F.H.useMemoCache(q)}},Lt.cache=function(q){return function(){return q.apply(null,arguments)}},Lt.cacheSignal=function(){return null},Lt.cloneElement=function(q,ae,re){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var ye=le({},q.props),ke=q.key;if(ae!=null)for(we in ae.key!==void 0&&(ke=""+ae.key),ae)!z.call(ae,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&ae.ref===void 0||(ye[we]=ae[we]);var we=arguments.length-2;if(we===1)ye.children=re;else if(1<we){for(var rt=Array(we),at=0;at<we;at++)rt[at]=arguments[at+2];ye.children=rt}return V(q.type,ke,ye)},Lt.createContext=function(q){return q={$$typeof:x,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:m,_context:q},q},Lt.createElement=function(q,ae,re){var ye,ke={},we=null;if(ae!=null)for(ye in ae.key!==void 0&&(we=""+ae.key),ae)z.call(ae,ye)&&ye!=="key"&&ye!=="__self"&&ye!=="__source"&&(ke[ye]=ae[ye]);var rt=arguments.length-2;if(rt===1)ke.children=re;else if(1<rt){for(var at=Array(rt),wt=0;wt<rt;wt++)at[wt]=arguments[wt+2];ke.children=at}if(q&&q.defaultProps)for(ye in rt=q.defaultProps,rt)ke[ye]===void 0&&(ke[ye]=rt[ye]);return V(q,we,ke)},Lt.createRef=function(){return{current:null}},Lt.forwardRef=function(q){return{$$typeof:v,render:q}},Lt.isValidElement=X,Lt.lazy=function(q){return{$$typeof:S,_payload:{_status:-1,_result:q},_init:Ye}},Lt.memo=function(q,ae){return{$$typeof:A,type:q,compare:ae===void 0?null:ae}},Lt.startTransition=function(q){var ae=F.T,re={};F.T=re;try{var ye=q(),ke=F.S;ke!==null&&ke(re,ye),typeof ye=="object"&&ye!==null&&typeof ye.then=="function"&&ye.then(je,ft)}catch(we){ft(we)}finally{ae!==null&&re.types!==null&&(ae.types=re.types),F.T=ae}},Lt.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},Lt.use=function(q){return F.H.use(q)},Lt.useActionState=function(q,ae,re){return F.H.useActionState(q,ae,re)},Lt.useCallback=function(q,ae){return F.H.useCallback(q,ae)},Lt.useContext=function(q){return F.H.useContext(q)},Lt.useDebugValue=function(){},Lt.useDeferredValue=function(q,ae){return F.H.useDeferredValue(q,ae)},Lt.useEffect=function(q,ae){return F.H.useEffect(q,ae)},Lt.useEffectEvent=function(q){return F.H.useEffectEvent(q)},Lt.useId=function(){return F.H.useId()},Lt.useImperativeHandle=function(q,ae,re){return F.H.useImperativeHandle(q,ae,re)},Lt.useInsertionEffect=function(q,ae){return F.H.useInsertionEffect(q,ae)},Lt.useLayoutEffect=function(q,ae){return F.H.useLayoutEffect(q,ae)},Lt.useMemo=function(q,ae){return F.H.useMemo(q,ae)},Lt.useOptimistic=function(q,ae){return F.H.useOptimistic(q,ae)},Lt.useReducer=function(q,ae,re){return F.H.useReducer(q,ae,re)},Lt.useRef=function(q){return F.H.useRef(q)},Lt.useState=function(q){return F.H.useState(q)},Lt.useSyncExternalStore=function(q,ae,re){return F.H.useSyncExternalStore(q,ae,re)},Lt.useTransition=function(){return F.H.useTransition()},Lt.version="19.2.0",Lt}var Y2;function j1(){return Y2||(Y2=1,j0.exports=Zw()),j0.exports}var Ce=j1();const Ir=z1(Ce);var H0={exports:{}},Kc={},G0={exports:{}},q0={};var W2;function Jw(){return W2||(W2=1,(function(a){function e(ue,Ae){var Ye=ue.length;ue.push(Ae);e:for(;0<Ye;){var ft=Ye-1>>>1,yt=ue[ft];if(0<h(yt,Ae))ue[ft]=Ae,ue[Ye]=yt,Ye=ft;else break e}}function n(ue){return ue.length===0?null:ue[0]}function o(ue){if(ue.length===0)return null;var Ae=ue[0],Ye=ue.pop();if(Ye!==Ae){ue[0]=Ye;e:for(var ft=0,yt=ue.length,q=yt>>>1;ft<q;){var ae=2*(ft+1)-1,re=ue[ae],ye=ae+1,ke=ue[ye];if(0>h(re,Ye))ye<yt&&0>h(ke,re)?(ue[ft]=ke,ue[ye]=Ye,ft=ye):(ue[ft]=re,ue[ae]=Ye,ft=ae);else if(ye<yt&&0>h(ke,Ye))ue[ft]=ke,ue[ye]=Ye,ft=ye;else break e}}return Ae}function h(ue,Ae){var Ye=ue.sortIndex-Ae.sortIndex;return Ye!==0?Ye:ue.id-Ae.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;a.unstable_now=function(){return m.now()}}else{var x=Date,v=x.now();a.unstable_now=function(){return x.now()-v}}var T=[],A=[],S=1,O=null,B=3,Y=!1,te=!1,le=!1,de=!1,Ge=typeof setTimeout=="function"?setTimeout:null,Le=typeof clearTimeout=="function"?clearTimeout:null,me=typeof setImmediate<"u"?setImmediate:null;function Be(ue){for(var Ae=n(A);Ae!==null;){if(Ae.callback===null)o(A);else if(Ae.startTime<=ue)o(A),Ae.sortIndex=Ae.expirationTime,e(T,Ae);else break;Ae=n(A)}}function ct(ue){if(le=!1,Be(ue),!te)if(n(T)!==null)te=!0,je||(je=!0,W());else{var Ae=n(A);Ae!==null&&oe(ct,Ae.startTime-ue)}}var je=!1,F=-1,z=5,V=-1;function Z(){return de?!0:!(a.unstable_now()-V<z)}function X(){if(de=!1,je){var ue=a.unstable_now();V=ue;var Ae=!0;try{e:{te=!1,le&&(le=!1,Le(F),F=-1),Y=!0;var Ye=B;try{t:{for(Be(ue),O=n(T);O!==null&&!(O.expirationTime>ue&&Z());){var ft=O.callback;if(typeof ft=="function"){O.callback=null,B=O.priorityLevel;var yt=ft(O.expirationTime<=ue);if(ue=a.unstable_now(),typeof yt=="function"){O.callback=yt,Be(ue),Ae=!0;break t}O===n(T)&&o(T),Be(ue)}else o(T);O=n(T)}if(O!==null)Ae=!0;else{var q=n(A);q!==null&&oe(ct,q.startTime-ue),Ae=!1}}break e}finally{O=null,B=Ye,Y=!1}Ae=void 0}}finally{Ae?W():je=!1}}}var W;if(typeof me=="function")W=function(){me(X)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Qe=G.port2;G.port1.onmessage=X,W=function(){Qe.postMessage(null)}}else W=function(){Ge(X,0)};function oe(ue,Ae){F=Ge(function(){ue(a.unstable_now())},Ae)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(ue){ue.callback=null},a.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<ue?Math.floor(1e3/ue):5},a.unstable_getCurrentPriorityLevel=function(){return B},a.unstable_next=function(ue){switch(B){case 1:case 2:case 3:var Ae=3;break;default:Ae=B}var Ye=B;B=Ae;try{return ue()}finally{B=Ye}},a.unstable_requestPaint=function(){de=!0},a.unstable_runWithPriority=function(ue,Ae){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var Ye=B;B=ue;try{return Ae()}finally{B=Ye}},a.unstable_scheduleCallback=function(ue,Ae,Ye){var ft=a.unstable_now();switch(typeof Ye=="object"&&Ye!==null?(Ye=Ye.delay,Ye=typeof Ye=="number"&&0<Ye?ft+Ye:ft):Ye=ft,ue){case 1:var yt=-1;break;case 2:yt=250;break;case 5:yt=1073741823;break;case 4:yt=1e4;break;default:yt=5e3}return yt=Ye+yt,ue={id:S++,callback:Ae,priorityLevel:ue,startTime:Ye,expirationTime:yt,sortIndex:-1},Ye>ft?(ue.sortIndex=Ye,e(A,ue),n(T)===null&&ue===n(A)&&(le?(Le(F),F=-1):le=!0,oe(ct,Ye-ft))):(ue.sortIndex=yt,e(T,ue),te||Y||(te=!0,je||(je=!0,W()))),ue},a.unstable_shouldYield=Z,a.unstable_wrapCallback=function(ue){var Ae=B;return function(){var Ye=B;B=Ae;try{return ue.apply(this,arguments)}finally{B=Ye}}}})(q0)),q0}var K2;function $w(){return K2||(K2=1,G0.exports=Jw()),G0.exports}var X0={exports:{}},ci={};var Q2;function eT(){if(Q2)return ci;Q2=1;var a=j1();function e(T){var A="https://react.dev/errors/"+T;if(1<arguments.length){A+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)A+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+T+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},h=Symbol.for("react.portal");function m(T,A,S){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:O==null?null:""+O,children:T,containerInfo:A,implementation:S}}var x=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function v(T,A){if(T==="font")return"";if(typeof A=="string")return A==="use-credentials"?A:""}return ci.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,ci.createPortal=function(T,A){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)throw Error(e(299));return m(T,A,null,S)},ci.flushSync=function(T){var A=x.T,S=o.p;try{if(x.T=null,o.p=2,T)return T()}finally{x.T=A,o.p=S,o.d.f()}},ci.preconnect=function(T,A){typeof T=="string"&&(A?(A=A.crossOrigin,A=typeof A=="string"?A==="use-credentials"?A:"":void 0):A=null,o.d.C(T,A))},ci.prefetchDNS=function(T){typeof T=="string"&&o.d.D(T)},ci.preinit=function(T,A){if(typeof T=="string"&&A&&typeof A.as=="string"){var S=A.as,O=v(S,A.crossOrigin),B=typeof A.integrity=="string"?A.integrity:void 0,Y=typeof A.fetchPriority=="string"?A.fetchPriority:void 0;S==="style"?o.d.S(T,typeof A.precedence=="string"?A.precedence:void 0,{crossOrigin:O,integrity:B,fetchPriority:Y}):S==="script"&&o.d.X(T,{crossOrigin:O,integrity:B,fetchPriority:Y,nonce:typeof A.nonce=="string"?A.nonce:void 0})}},ci.preinitModule=function(T,A){if(typeof T=="string")if(typeof A=="object"&&A!==null){if(A.as==null||A.as==="script"){var S=v(A.as,A.crossOrigin);o.d.M(T,{crossOrigin:S,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0})}}else A==null&&o.d.M(T)},ci.preload=function(T,A){if(typeof T=="string"&&typeof A=="object"&&A!==null&&typeof A.as=="string"){var S=A.as,O=v(S,A.crossOrigin);o.d.L(T,S,{crossOrigin:O,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0,type:typeof A.type=="string"?A.type:void 0,fetchPriority:typeof A.fetchPriority=="string"?A.fetchPriority:void 0,referrerPolicy:typeof A.referrerPolicy=="string"?A.referrerPolicy:void 0,imageSrcSet:typeof A.imageSrcSet=="string"?A.imageSrcSet:void 0,imageSizes:typeof A.imageSizes=="string"?A.imageSizes:void 0,media:typeof A.media=="string"?A.media:void 0})}},ci.preloadModule=function(T,A){if(typeof T=="string")if(A){var S=v(A.as,A.crossOrigin);o.d.m(T,{as:typeof A.as=="string"&&A.as!=="script"?A.as:void 0,crossOrigin:S,integrity:typeof A.integrity=="string"?A.integrity:void 0})}else o.d.m(T)},ci.requestFormReset=function(T){o.d.r(T)},ci.unstable_batchedUpdates=function(T,A){return T(A)},ci.useFormState=function(T,A,S){return x.H.useFormState(T,A,S)},ci.useFormStatus=function(){return x.H.useHostTransitionStatus()},ci.version="19.2.0",ci}var Z2;function tT(){if(Z2)return X0.exports;Z2=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),X0.exports=eT(),X0.exports}var J2;function nT(){if(J2)return Kc;J2=1;var a=$w(),e=j1(),n=tT();function o(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function m(t){var i=t,c=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(c=i.return),t=i.return;while(t)}return i.tag===3?c:null}function x(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function v(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function T(t){if(m(t)!==t)throw Error(o(188))}function A(t){var i=t.alternate;if(!i){if(i=m(t),i===null)throw Error(o(188));return i!==t?null:t}for(var c=t,d=i;;){var E=c.return;if(E===null)break;var w=E.alternate;if(w===null){if(d=E.return,d!==null){c=d;continue}break}if(E.child===w.child){for(w=E.child;w;){if(w===c)return T(E),t;if(w===d)return T(E),i;w=w.sibling}throw Error(o(188))}if(c.return!==d.return)c=E,d=w;else{for(var R=!1,P=E.child;P;){if(P===c){R=!0,c=E,d=w;break}if(P===d){R=!0,d=E,c=w;break}P=P.sibling}if(!R){for(P=w.child;P;){if(P===c){R=!0,c=w,d=E;break}if(P===d){R=!0,d=w,c=E;break}P=P.sibling}if(!R)throw Error(o(189))}}if(c.alternate!==d)throw Error(o(190))}if(c.tag!==3)throw Error(o(188));return c.stateNode.current===c?t:i}function S(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=S(t),i!==null)return i;t=t.sibling}return null}var O=Object.assign,B=Symbol.for("react.element"),Y=Symbol.for("react.transitional.element"),te=Symbol.for("react.portal"),le=Symbol.for("react.fragment"),de=Symbol.for("react.strict_mode"),Ge=Symbol.for("react.profiler"),Le=Symbol.for("react.consumer"),me=Symbol.for("react.context"),Be=Symbol.for("react.forward_ref"),ct=Symbol.for("react.suspense"),je=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function W(t){return t===null||typeof t!="object"?null:(t=X&&t[X]||t["@@iterator"],typeof t=="function"?t:null)}var G=Symbol.for("react.client.reference");function Qe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===G?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case le:return"Fragment";case Ge:return"Profiler";case de:return"StrictMode";case ct:return"Suspense";case je:return"SuspenseList";case V:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case te:return"Portal";case me:return t.displayName||"Context";case Le:return(t._context.displayName||"Context")+".Consumer";case Be:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case F:return i=t.displayName||null,i!==null?i:Qe(t.type)||"Memo";case z:i=t._payload,t=t._init;try{return Qe(t(i))}catch{}}return null}var oe=Array.isArray,ue=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ye={pending:!1,data:null,method:null,action:null},ft=[],yt=-1;function q(t){return{current:t}}function ae(t){0>yt||(t.current=ft[yt],ft[yt]=null,yt--)}function re(t,i){yt++,ft[yt]=t.current,t.current=i}var ye=q(null),ke=q(null),we=q(null),rt=q(null);function at(t,i){switch(re(we,i),re(ke,t),re(ye,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?d2(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=d2(i),t=g2(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ae(ye),re(ye,t)}function wt(){ae(ye),ae(ke),ae(we)}function mn(t){t.memoizedState!==null&&re(rt,t);var i=ye.current,c=g2(i,t.type);i!==c&&(re(ke,t),re(ye,c))}function zt(t){ke.current===t&&(ae(ye),ae(ke)),rt.current===t&&(ae(rt),Gc._currentValue=Ye)}var zn,dt;function wn(t){if(zn===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);zn=i&&i[1]||"",dt=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zn+t+dt}var Nn=!1;function Kn(t,i){if(!t||Nn)return"";Nn=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(i){var Re=function(){throw Error()};if(Object.defineProperty(Re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Re,[])}catch(_e){var ge=_e}Reflect.construct(t,[],Re)}else{try{Re.call()}catch(_e){ge=_e}t.call(Re.prototype)}}else{try{throw Error()}catch(_e){ge=_e}(Re=t())&&typeof Re.catch=="function"&&Re.catch(function(){})}}catch(_e){if(_e&&ge&&typeof _e.stack=="string")return[_e.stack,ge.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=d.DetermineComponentFrameRoot(),R=w[0],P=w[1];if(R&&P){var K=R.split(`
`),fe=P.split(`
`);for(E=d=0;d<K.length&&!K[d].includes("DetermineComponentFrameRoot");)d++;for(;E<fe.length&&!fe[E].includes("DetermineComponentFrameRoot");)E++;if(d===K.length||E===fe.length)for(d=K.length-1,E=fe.length-1;1<=d&&0<=E&&K[d]!==fe[E];)E--;for(;1<=d&&0<=E;d--,E--)if(K[d]!==fe[E]){if(d!==1||E!==1)do if(d--,E--,0>E||K[d]!==fe[E]){var be=`
`+K[d].replace(" at new "," at ");return t.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",t.displayName)),be}while(1<=d&&0<=E);break}}}finally{Nn=!1,Error.prepareStackTrace=c}return(c=t?t.displayName||t.name:"")?wn(c):""}function qt(t,i){switch(t.tag){case 26:case 27:case 5:return wn(t.type);case 16:return wn("Lazy");case 13:return t.child!==i&&i!==null?wn("Suspense Fallback"):wn("Suspense");case 19:return wn("SuspenseList");case 0:case 15:return Kn(t.type,!1);case 11:return Kn(t.type.render,!1);case 1:return Kn(t.type,!0);case 31:return wn("Activity");default:return""}}function Pt(t){try{var i="",c=null;do i+=qt(t,c),c=t,t=t.return;while(t);return i}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Ve=Object.prototype.hasOwnProperty,Et=a.unstable_scheduleCallback,Xe=a.unstable_cancelCallback,jr=a.unstable_shouldYield,Hr=a.unstable_requestPaint,pn=a.unstable_now,Te=a.unstable_getCurrentPriorityLevel,De=a.unstable_ImmediatePriority,He=a.unstable_UserBlockingPriority,Je=a.unstable_NormalPriority,$e=a.unstable_LowPriority,On=a.unstable_IdlePriority,tt=a.log,Xt=a.unstable_setDisableYieldValue,Ze=null,ve=null;function vt(t){if(typeof tt=="function"&&Xt(t),ve&&typeof ve.setStrictMode=="function")try{ve.setStrictMode(Ze,t)}catch{}}var lt=Math.clz32?Math.clz32:ni,Vt=Math.log,jn=Math.LN2;function ni(t){return t>>>=0,t===0?32:31-(Vt(t)/jn|0)|0}var pr=256,It=262144,yn=4194304;function mi(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Gr(t,i,c){var d=t.pendingLanes;if(d===0)return 0;var E=0,w=t.suspendedLanes,R=t.pingedLanes;t=t.warmLanes;var P=d&134217727;return P!==0?(d=P&~w,d!==0?E=mi(d):(R&=P,R!==0?E=mi(R):c||(c=P&~t,c!==0&&(E=mi(c))))):(P=d&~w,P!==0?E=mi(P):R!==0?E=mi(R):c||(c=d&~t,c!==0&&(E=mi(c)))),E===0?0:i!==0&&i!==E&&(i&w)===0&&(w=E&-E,c=i&-i,w>=c||w===32&&(c&4194048)!==0)?i:E}function Hn(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Xs(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rr(){var t=yn;return yn<<=1,(yn&62914560)===0&&(yn=4194304),t}function Dr(t){for(var i=[],c=0;31>c;c++)i.push(t);return i}function vi(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ri(t,i,c,d,E,w){var R=t.pendingLanes;t.pendingLanes=c,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=c,t.entangledLanes&=c,t.errorRecoveryDisabledLanes&=c,t.shellSuspendCounter=0;var P=t.entanglements,K=t.expirationTimes,fe=t.hiddenUpdates;for(c=R&~c;0<c;){var be=31-lt(c),Re=1<<be;P[be]=0,K[be]=-1;var ge=fe[be];if(ge!==null)for(fe[be]=null,be=0;be<ge.length;be++){var _e=ge[be];_e!==null&&(_e.lane&=-536870913)}c&=~Re}d!==0&&ps(t,d,0),w!==0&&E===0&&t.tag!==0&&(t.suspendedLanes|=w&~(R&~i))}function ps(t,i,c){t.pendingLanes|=i,t.suspendedLanes&=~i;var d=31-lt(i);t.entangledLanes|=i,t.entanglements[d]=t.entanglements[d]|1073741824|c&261930}function pi(t,i){var c=t.entangledLanes|=i;for(t=t.entanglements;c;){var d=31-lt(c),E=1<<d;E&i|t[d]&i&&(t[d]|=i),c&=~E}}function ys(t,i){var c=i&-i;return c=(c&42)!==0?1:Qn(c),(c&(t.suspendedLanes|i))!==0?0:c}function Qn(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Mr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Lr(){var t=Ae.p;return t!==0?t:(t=window.event,t===void 0?32:B2(t.type))}function qe(t,i){var c=Ae.p;try{return Ae.p=t,i()}finally{Ae.p=c}}var wr=Math.random().toString(36).slice(2),Un="__reactFiber$"+wr,ln="__reactProps$"+wr,ee="__reactContainer$"+wr,ze="__reactEvents$"+wr,ut="__reactListeners$"+wr,We="__reactHandles$"+wr,Rt="__reactResources$"+wr,jt="__reactMarker$"+wr;function Dn(t){delete t[Un],delete t[ln],delete t[ze],delete t[ut],delete t[We]}function hn(t){var i=t[Un];if(i)return i;for(var c=t.parentNode;c;){if(i=c[ee]||c[Un]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(t=A2(t);t!==null;){if(c=t[Un])return c;t=A2(t)}return i}t=c,c=t.parentNode}return null}function Ct(t){if(t=t[Un]||t[ee]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function cr(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(o(33))}function Gn(t){var i=t[Rt];return i||(i=t[Rt]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Zn(t){t[jt]=!0}var Ne=new Set,Io={};function gn(t,i){qr(t,i),qr(t+"Capture",i)}function qr(t,i){for(Io[t]=i,t=0;t<i.length;t++)Ne.add(i[t])}var Ro=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),en={},Kt={};function Ht(t){return Ve.call(Kt,t)?!0:Ve.call(en,t)?!1:Ro.test(t)?Kt[t]=!0:(en[t]=!0,!1)}function Ss(t,i,c){if(Ht(i))if(c===null)t.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var d=i.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+c)}}function Xr(t,i,c){if(c===null)t.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+c)}}function Jn(t,i,c,d){if(d===null)t.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(c);return}t.setAttributeNS(i,c,""+d)}}function Yt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Yr(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function No(t,i,c){var d=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var E=d.get,w=d.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return E.call(this)},set:function(R){c=""+R,w.call(this,R)}}),Object.defineProperty(t,i,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(R){c=""+R},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function _t(t){if(!t._valueTracker){var i=Yr(t)?"checked":"value";t._valueTracker=No(t,i,""+t[i])}}function ii(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var c=i.getValue(),d="";return t&&(d=Yr(t)?t.checked?"true":"false":t.value),t=d,t!==c?(i.setValue(t),!0):!1}function Ji(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ci=/[\n"\\]/g;function Ut(t){return t.replace(Ci,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ir(t,i,c,d,E,w,R,P){t.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?t.type=R:t.removeAttribute("type"),i!=null?R==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Yt(i)):t.value!==""+Yt(i)&&(t.value=""+Yt(i)):R!=="submit"&&R!=="reset"||t.removeAttribute("value"),i!=null?j(t,R,Yt(i)):c!=null?j(t,R,Yt(c)):d!=null&&t.removeAttribute("value"),E==null&&w!=null&&(t.defaultChecked=!!w),E!=null&&(t.checked=E&&typeof E!="function"&&typeof E!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?t.name=""+Yt(P):t.removeAttribute("name")}function ce(t,i,c,d,E,w,R,P){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(t.type=w),i!=null||c!=null){if(!(w!=="submit"&&w!=="reset"||i!=null)){_t(t);return}c=c!=null?""+Yt(c):"",i=i!=null?""+Yt(i):c,P||i===t.value||(t.value=i),t.defaultValue=i}d=d??E,d=typeof d!="function"&&typeof d!="symbol"&&!!d,t.checked=P?t.checked:!!d,t.defaultChecked=!!d,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(t.name=R),_t(t)}function j(t,i,c){i==="number"&&Ji(t.ownerDocument)===t||t.defaultValue===""+c||(t.defaultValue=""+c)}function it(t,i,c,d){if(t=t.options,i){i={};for(var E=0;E<c.length;E++)i["$"+c[E]]=!0;for(c=0;c<t.length;c++)E=i.hasOwnProperty("$"+t[c].value),t[c].selected!==E&&(t[c].selected=E),E&&d&&(t[c].defaultSelected=!0)}else{for(c=""+Yt(c),i=null,E=0;E<t.length;E++){if(t[E].value===c){t[E].selected=!0,d&&(t[E].defaultSelected=!0);return}i!==null||t[E].disabled||(i=t[E])}i!==null&&(i.selected=!0)}}function sr(t,i,c){if(i!=null&&(i=""+Yt(i),i!==t.value&&(t.value=i),c==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=c!=null?""+Yt(c):""}function yr(t,i,c,d){if(i==null){if(d!=null){if(c!=null)throw Error(o(92));if(oe(d)){if(1<d.length)throw Error(o(93));d=d[0]}c=d}c==null&&(c=""),i=c}c=Yt(i),t.defaultValue=c,d=t.textContent,d===c&&d!==""&&d!==null&&(t.value=d),_t(t)}function si(t,i){if(i){var c=t.firstChild;if(c&&c===t.lastChild&&c.nodeType===3){c.nodeValue=i;return}}t.textContent=i}var Ra=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vr(t,i,c){var d=i.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":d?t.setProperty(i,c):typeof c!="number"||c===0||Ra.has(i)?i==="float"?t.cssFloat=c:t[i]=(""+c).trim():t[i]=c+"px"}function ht(t,i,c){if(i!=null&&typeof i!="object")throw Error(o(62));if(t=t.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||i!=null&&i.hasOwnProperty(d)||(d.indexOf("--")===0?t.setProperty(d,""):d==="float"?t.cssFloat="":t[d]="");for(var E in i)d=i[E],i.hasOwnProperty(E)&&c[E]!==d&&Vr(t,E,d)}else for(var w in i)i.hasOwnProperty(w)&&Vr(t,w,i[w])}function Tn(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Is=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rs(t){return Is.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ai(){}var Ys=null;function Si(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pn=null,oi=null;function li(t){var i=Ct(t);if(i&&(t=i.stateNode)){var c=t[ln]||null;e:switch(t=i.stateNode,i.type){case"input":if(ir(t,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),i=c.name,c.type==="radio"&&i!=null){for(c=t;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Ut(""+i)+'"][type="radio"]'),i=0;i<c.length;i++){var d=c[i];if(d!==t&&d.form===t.form){var E=d[ln]||null;if(!E)throw Error(o(90));ir(d,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(i=0;i<c.length;i++)d=c[i],d.form===t.form&&ii(d)}break e;case"textarea":sr(t,c.value,c.defaultValue);break e;case"select":i=c.value,i!=null&&it(t,!!c.multiple,i,!1)}}}var gt=!1;function Ns(t,i,c){if(gt)return t(i,c);gt=!0;try{var d=t(i);return d}finally{if(gt=!1,(Pn!==null||oi!==null)&&(xh(),Pn&&(i=Pn,t=oi,oi=Pn=null,li(i),t)))for(i=0;i<t.length;i++)li(t[i])}}function xt(t,i){var c=t.stateNode;if(c===null)return null;var d=c[ln]||null;if(d===null)return null;c=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(t=t.type,d=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!d;break e;default:t=!1}if(t)return null;if(c&&typeof c!="function")throw Error(o(231,i,typeof c));return c}var bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ws=!1;if(bn)try{var En={};Object.defineProperty(En,"passive",{get:function(){Ws=!0}}),window.addEventListener("test",En,En),window.removeEventListener("test",En,En)}catch{Ws=!1}var Vi=null,Ui=null,Ks=null;function Es(){if(Ks)return Ks;var t,i=Ui,c=i.length,d,E="value"in Vi?Vi.value:Vi.textContent,w=E.length;for(t=0;t<c&&i[t]===E[t];t++);var R=c-t;for(d=1;d<=R&&i[c-d]===E[w-d];d++);return Ks=E.slice(t,1<d?1-d:void 0)}function Fi(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function yi(){return!0}function Ii(){return!1}function ar(t){function i(c,d,E,w,R){this._reactName=c,this._targetInst=E,this.type=d,this.nativeEvent=w,this.target=R,this.currentTarget=null;for(var P in t)t.hasOwnProperty(P)&&(c=t[P],this[P]=c?c(w):w[P]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?yi:Ii,this.isPropagationStopped=Ii,this}return O(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=yi)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=yi)},persist:function(){},isPersistent:yi}),i}var Ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qn=ar(Ei),xs=O({},Ei,{view:0,detail:0}),Na=ar(xs),_s,Oa,$i,Da=O({},xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ts,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$i&&($i&&t.type==="mousemove"?(_s=t.screenX-$i.screenX,Oa=t.screenY-$i.screenY):Oa=_s=0,$i=t),_s)},movementY:function(t){return"movementY"in t?t.movementY:Oa}}),fn=ar(Da),Os=O({},Da,{dataTransfer:0}),Qs=ar(Os),zi=O({},xs,{relatedTarget:0}),Zs=ar(zi),pe=O({},Ei,{animationName:0,elapsedTime:0,pseudoElement:0}),Mt=ar(pe),$n=O({},Ei,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Js=ar($n),Do=O({},Ei,{data:0}),es=ar(Do),dl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ma={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function er(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Ma[t])?!!i[t]:!1}function ts(){return er}var Wt=O({},xs,{key:function(t){if(t.key){var i=dl[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Fi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gl[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ts,charCode:function(t){return t.type==="keypress"?Fi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$s=ar(Wt),ns=O({},Da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qt=ar(ns),p=O({},xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ts}),C=ar(p),N=O({},Ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),U=ar(N),ie=O({},Da,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xe=ar(ie),Fe=O({},Ei,{newState:0,oldState:0}),St=ar(Fe),tr=[9,13,27,32],cn=bn&&"CompositionEvent"in window,Bn=null;bn&&"documentMode"in document&&(Bn=document.documentMode);var xi=bn&&"TextEvent"in window&&!Bn,rs=bn&&(!cn||Bn&&8<Bn&&11>=Bn),Ur=" ",_i=!1;function ea(t,i){switch(t){case"keyup":return tr.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function is(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var La=!1;function Ds(t,i){switch(t){case"compositionend":return is(i);case"keypress":return i.which!==32?null:(_i=!0,Ur);case"textInput":return t=i.data,t===Ur&&_i?null:t;default:return null}}function ml(t,i){if(La)return t==="compositionend"||!cn&&ea(t,i)?(t=Es(),Ks=Ui=Vi=null,La=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return rs&&i.locale!=="ko"?null:i.data;default:return null}}var Ri={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gc(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Ri[t.type]:i==="textarea"}function ji(t,i,c,d){Pn?oi?oi.push(d):oi=[d]:Pn=d,i=Ch(i,"onChange"),0<i.length&&(c=new qn("onChange","change",null,c,d),t.push({event:c,listeners:i}))}var Mo=null,ta=null;function ed(t){o2(t,0)}function Lo(t){var i=cr(t);if(ii(i))return t}function Hi(t,i){if(t==="change")return i}var Bu=!1;if(bn){var ko;if(bn){var na="oninput"in document;if(!na){var tn=document.createElement("div");tn.setAttribute("oninput","return;"),na=typeof tn.oninput=="function"}ko=na}else ko=!1;Bu=ko&&(!document.documentMode||9<document.documentMode)}function Po(){Mo&&(Mo.detachEvent("onpropertychange",D),ta=Mo=null)}function D(t){if(t.propertyName==="value"&&Lo(ta)){var i=[];ji(i,ta,t,Si(t)),Ns(ed,i)}}function r(t,i,c){t==="focusin"?(Po(),Mo=i,ta=c,Mo.attachEvent("onpropertychange",D)):t==="focusout"&&Po()}function s(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Lo(ta)}function l(t,i){if(t==="click")return Lo(i)}function u(t,i){if(t==="input"||t==="change")return Lo(i)}function f(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var g=typeof Object.is=="function"?Object.is:f;function y(t,i){if(g(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var c=Object.keys(t),d=Object.keys(i);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var E=c[d];if(!Ve.call(i,E)||!g(t[E],i[E]))return!1}return!0}function _(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function b(t,i){var c=_(t);t=0;for(var d;c;){if(c.nodeType===3){if(d=t+c.textContent.length,t<=i&&d>=i)return{node:c,offset:i-t};t=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=_(c)}}function I(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?I(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function M(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Ji(t.document);i instanceof t.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)t=i.contentWindow;else break;i=Ji(t.document)}return i}function L(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var H=bn&&"documentMode"in document&&11>=document.documentMode,Q=null,J=null,se=null,Ee=!1;function Ue(t,i,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Ee||Q==null||Q!==Ji(d)||(d=Q,"selectionStart"in d&&L(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),se&&y(se,d)||(se=d,d=Ch(J,"onSelect"),0<d.length&&(i=new qn("onSelect","select",null,i,c),t.push({event:i,listeners:d}),i.target=Q)))}function Pe(t,i){var c={};return c[t.toLowerCase()]=i.toLowerCase(),c["Webkit"+t]="webkit"+i,c["Moz"+t]="moz"+i,c}var Me={animationend:Pe("Animation","AnimationEnd"),animationiteration:Pe("Animation","AnimationIteration"),animationstart:Pe("Animation","AnimationStart"),transitionrun:Pe("Transition","TransitionRun"),transitionstart:Pe("Transition","TransitionStart"),transitioncancel:Pe("Transition","TransitionCancel"),transitionend:Pe("Transition","TransitionEnd")},Gt={},Nt={};bn&&(Nt=document.createElement("div").style,"AnimationEvent"in window||(delete Me.animationend.animation,delete Me.animationiteration.animation,delete Me.animationstart.animation),"TransitionEvent"in window||delete Me.transitionend.transition);function ur(t){if(Gt[t])return Gt[t];if(!Me[t])return t;var i=Me[t],c;for(c in i)if(i.hasOwnProperty(c)&&c in Nt)return Gt[t]=i[c];return t}var Ni=ur("animationend"),Wr=ur("animationiteration"),vn=ur("animationstart"),kr=ur("transitionrun"),Ai=ur("transitionstart"),ka=ur("transitioncancel"),ra=ur("transitionend"),Vu=new Map,mc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mc.push("scrollEnd");function As(t,i){Vu.set(t,i),gn(i,[t])}var Uu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ss=[],pl=0,td=0;function Fu(){for(var t=pl,i=td=pl=0;i<t;){var c=ss[i];ss[i++]=null;var d=ss[i];ss[i++]=null;var E=ss[i];ss[i++]=null;var w=ss[i];if(ss[i++]=null,d!==null&&E!==null){var R=d.pending;R===null?E.next=E:(E.next=R.next,R.next=E),d.pending=E}w!==0&&jg(c,E,w)}}function zu(t,i,c,d){ss[pl++]=t,ss[pl++]=i,ss[pl++]=c,ss[pl++]=d,td|=d,t.lanes|=d,t=t.alternate,t!==null&&(t.lanes|=d)}function nd(t,i,c,d){return zu(t,i,c,d),ju(t)}function Bo(t,i){return zu(t,null,null,i),ju(t)}function jg(t,i,c){t.lanes|=c;var d=t.alternate;d!==null&&(d.lanes|=c);for(var E=!1,w=t.return;w!==null;)w.childLanes|=c,d=w.alternate,d!==null&&(d.childLanes|=c),w.tag===22&&(t=w.stateNode,t===null||t._visibility&1||(E=!0)),t=w,w=w.return;return t.tag===3?(w=t.stateNode,E&&i!==null&&(E=31-lt(c),t=w.hiddenUpdates,d=t[E],d===null?t[E]=[i]:d.push(i),i.lane=c|536870912),w):null}function ju(t){if(50<Bc)throw Bc=0,h0=null,Error(o(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var yl={};function OA(t,i,c,d){this.tag=t,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gi(t,i,c,d){return new OA(t,i,c,d)}function rd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ia(t,i){var c=t.alternate;return c===null?(c=Gi(t.tag,i,t.key,t.mode),c.elementType=t.elementType,c.type=t.type,c.stateNode=t.stateNode,c.alternate=t,t.alternate=c):(c.pendingProps=i,c.type=t.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=t.flags&65011712,c.childLanes=t.childLanes,c.lanes=t.lanes,c.child=t.child,c.memoizedProps=t.memoizedProps,c.memoizedState=t.memoizedState,c.updateQueue=t.updateQueue,i=t.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=t.sibling,c.index=t.index,c.ref=t.ref,c.refCleanup=t.refCleanup,c}function Hg(t,i){t.flags&=65011714;var c=t.alternate;return c===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=c.childLanes,t.lanes=c.lanes,t.child=c.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=c.memoizedProps,t.memoizedState=c.memoizedState,t.updateQueue=c.updateQueue,t.type=c.type,i=c.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Hu(t,i,c,d,E,w){var R=0;if(d=t,typeof t=="function")rd(t)&&(R=1);else if(typeof t=="string")R=Pw(t,c,ye.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case V:return t=Gi(31,c,i,E),t.elementType=V,t.lanes=w,t;case le:return Vo(c.children,E,w,i);case de:R=8,E|=24;break;case Ge:return t=Gi(12,c,i,E|2),t.elementType=Ge,t.lanes=w,t;case ct:return t=Gi(13,c,i,E),t.elementType=ct,t.lanes=w,t;case je:return t=Gi(19,c,i,E),t.elementType=je,t.lanes=w,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case me:R=10;break e;case Le:R=9;break e;case Be:R=11;break e;case F:R=14;break e;case z:R=16,d=null;break e}R=29,c=Error(o(130,t===null?"null":typeof t,"")),d=null}return i=Gi(R,c,i,E),i.elementType=t,i.type=d,i.lanes=w,i}function Vo(t,i,c,d){return t=Gi(7,t,d,i),t.lanes=c,t}function id(t,i,c){return t=Gi(6,t,null,i),t.lanes=c,t}function Gg(t){var i=Gi(18,null,null,0);return i.stateNode=t,i}function sd(t,i,c){return i=Gi(4,t.children!==null?t.children:[],t.key,i),i.lanes=c,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var qg=new WeakMap;function as(t,i){if(typeof t=="object"&&t!==null){var c=qg.get(t);return c!==void 0?c:(i={value:t,source:i,stack:Pt(i)},qg.set(t,i),i)}return{value:t,source:i,stack:Pt(i)}}var El=[],xl=0,Gu=null,pc=0,os=[],ls=0,Pa=null,Ms=1,Ls="";function sa(t,i){El[xl++]=pc,El[xl++]=Gu,Gu=t,pc=i}function Xg(t,i,c){os[ls++]=Ms,os[ls++]=Ls,os[ls++]=Pa,Pa=t;var d=Ms;t=Ls;var E=32-lt(d)-1;d&=~(1<<E),c+=1;var w=32-lt(i)+E;if(30<w){var R=E-E%5;w=(d&(1<<R)-1).toString(32),d>>=R,E-=R,Ms=1<<32-lt(i)+E|c<<E|d,Ls=w+t}else Ms=1<<w|c<<E|d,Ls=t}function ad(t){t.return!==null&&(sa(t,1),Xg(t,1,0))}function od(t){for(;t===Gu;)Gu=El[--xl],El[xl]=null,pc=El[--xl],El[xl]=null;for(;t===Pa;)Pa=os[--ls],os[ls]=null,Ls=os[--ls],os[ls]=null,Ms=os[--ls],os[ls]=null}function Yg(t,i){os[ls++]=Ms,os[ls++]=Ls,os[ls++]=Pa,Ms=i.id,Ls=i.overflow,Pa=t}var Kr=null,Xn=null,un=!1,Ba=null,cs=!1,ld=Error(o(519));function Va(t){var i=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw yc(as(i,t)),ld}function Wg(t){var i=t.stateNode,c=t.type,d=t.memoizedProps;switch(i[Un]=t,i[ln]=d,c){case"dialog":Jt("cancel",i),Jt("close",i);break;case"iframe":case"object":case"embed":Jt("load",i);break;case"video":case"audio":for(c=0;c<Uc.length;c++)Jt(Uc[c],i);break;case"source":Jt("error",i);break;case"img":case"image":case"link":Jt("error",i),Jt("load",i);break;case"details":Jt("toggle",i);break;case"input":Jt("invalid",i),ce(i,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Jt("invalid",i);break;case"textarea":Jt("invalid",i),yr(i,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||i.textContent===""+c||d.suppressHydrationWarning===!0||h2(i.textContent,c)?(d.popover!=null&&(Jt("beforetoggle",i),Jt("toggle",i)),d.onScroll!=null&&Jt("scroll",i),d.onScrollEnd!=null&&Jt("scrollend",i),d.onClick!=null&&(i.onclick=ai),i=!0):i=!1,i||Va(t,!0)}function Kg(t){for(Kr=t.return;Kr;)switch(Kr.tag){case 5:case 31:case 13:cs=!1;return;case 27:case 3:cs=!0;return;default:Kr=Kr.return}}function _l(t){if(t!==Kr)return!1;if(!un)return Kg(t),un=!0,!1;var i=t.tag,c;if((c=i!==3&&i!==27)&&((c=i===5)&&(c=t.type,c=!(c!=="form"&&c!=="button")||C0(t.type,t.memoizedProps)),c=!c),c&&Xn&&Va(t),Kg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));Xn=_2(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));Xn=_2(t)}else i===27?(i=Xn,Ja(t.type)?(t=O0,O0=null,Xn=t):Xn=i):Xn=Kr?hs(t.stateNode.nextSibling):null;return!0}function Uo(){Xn=Kr=null,un=!1}function cd(){var t=Ba;return t!==null&&(Li===null?Li=t:Li.push.apply(Li,t),Ba=null),t}function yc(t){Ba===null?Ba=[t]:Ba.push(t)}var ud=q(null),Fo=null,aa=null;function Ua(t,i,c){re(ud,i._currentValue),i._currentValue=c}function oa(t){t._currentValue=ud.current,ae(ud)}function hd(t,i,c){for(;t!==null;){var d=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),t===c)break;t=t.return}}function fd(t,i,c,d){var E=t.child;for(E!==null&&(E.return=t);E!==null;){var w=E.dependencies;if(w!==null){var R=E.child;w=w.firstContext;e:for(;w!==null;){var P=w;w=E;for(var K=0;K<i.length;K++)if(P.context===i[K]){w.lanes|=c,P=w.alternate,P!==null&&(P.lanes|=c),hd(w.return,c,t),d||(R=null);break e}w=P.next}}else if(E.tag===18){if(R=E.return,R===null)throw Error(o(341));R.lanes|=c,w=R.alternate,w!==null&&(w.lanes|=c),hd(R,c,t),R=null}else R=E.child;if(R!==null)R.return=E;else for(R=E;R!==null;){if(R===t){R=null;break}if(E=R.sibling,E!==null){E.return=R.return,R=E;break}R=R.return}E=R}}function Al(t,i,c,d){t=null;for(var E=i,w=!1;E!==null;){if(!w){if((E.flags&524288)!==0)w=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var R=E.alternate;if(R===null)throw Error(o(387));if(R=R.memoizedProps,R!==null){var P=E.type;g(E.pendingProps.value,R.value)||(t!==null?t.push(P):t=[P])}}else if(E===rt.current){if(R=E.alternate,R===null)throw Error(o(387));R.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(t!==null?t.push(Gc):t=[Gc])}E=E.return}t!==null&&fd(i,t,c,d),i.flags|=262144}function qu(t){for(t=t.firstContext;t!==null;){if(!g(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function zo(t){Fo=t,aa=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Qr(t){return Qg(Fo,t)}function Xu(t,i){return Fo===null&&zo(t),Qg(t,i)}function Qg(t,i){var c=i._currentValue;if(i={context:i,memoizedValue:c,next:null},aa===null){if(t===null)throw Error(o(308));aa=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else aa=aa.next=i;return c}var DA=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(c,d){t.push(d)}};this.abort=function(){i.aborted=!0,t.forEach(function(c){return c()})}},MA=a.unstable_scheduleCallback,LA=a.unstable_NormalPriority,Tr={$$typeof:me,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dd(){return{controller:new DA,data:new Map,refCount:0}}function Ec(t){t.refCount--,t.refCount===0&&MA(LA,function(){t.controller.abort()})}var xc=null,gd=0,wl=0,Tl=null;function kA(t,i){if(xc===null){var c=xc=[];gd=0,wl=y0(),Tl={status:"pending",value:void 0,then:function(d){c.push(d)}}}return gd++,i.then(Zg,Zg),i}function Zg(){if(--gd===0&&xc!==null){Tl!==null&&(Tl.status="fulfilled");var t=xc;xc=null,wl=0,Tl=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function PA(t,i){var c=[],d={status:"pending",value:null,reason:null,then:function(E){c.push(E)}};return t.then(function(){d.status="fulfilled",d.value=i;for(var E=0;E<c.length;E++)(0,c[E])(i)},function(E){for(d.status="rejected",d.reason=E,E=0;E<c.length;E++)(0,c[E])(void 0)}),d}var Jg=ue.S;ue.S=function(t,i){kp=pn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&kA(t,i),Jg!==null&&Jg(t,i)};var jo=q(null);function md(){var t=jo.current;return t!==null?t:Vn.pooledCache}function Yu(t,i){i===null?re(jo,jo.current):re(jo,i.pool)}function $g(){var t=md();return t===null?null:{parent:Tr._currentValue,pool:t}}var bl=Error(o(460)),pd=Error(o(474)),Wu=Error(o(542)),Ku={then:function(){}};function em(t){return t=t.status,t==="fulfilled"||t==="rejected"}function tm(t,i,c){switch(c=t[c],c===void 0?t.push(i):c!==i&&(i.then(ai,ai),i=c),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,rm(t),t;default:if(typeof i.status=="string")i.then(ai,ai);else{if(t=Vn,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=i,t.status="pending",t.then(function(d){if(i.status==="pending"){var E=i;E.status="fulfilled",E.value=d}},function(d){if(i.status==="pending"){var E=i;E.status="rejected",E.reason=d}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,rm(t),t}throw Go=i,bl}}function Ho(t){try{var i=t._init;return i(t._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Go=c,bl):c}}var Go=null;function nm(){if(Go===null)throw Error(o(459));var t=Go;return Go=null,t}function rm(t){if(t===bl||t===Wu)throw Error(o(483))}var vl=null,_c=0;function Qu(t){var i=_c;return _c+=1,vl===null&&(vl=[]),tm(vl,t,i)}function Ac(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Zu(t,i){throw i.$$typeof===B?Error(o(525)):(t=Object.prototype.toString.call(i),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function im(t){function i(ne,$){if(t){var he=ne.deletions;he===null?(ne.deletions=[$],ne.flags|=16):he.push($)}}function c(ne,$){if(!t)return null;for(;$!==null;)i(ne,$),$=$.sibling;return null}function d(ne){for(var $=new Map;ne!==null;)ne.key!==null?$.set(ne.key,ne):$.set(ne.index,ne),ne=ne.sibling;return $}function E(ne,$){return ne=ia(ne,$),ne.index=0,ne.sibling=null,ne}function w(ne,$,he){return ne.index=he,t?(he=ne.alternate,he!==null?(he=he.index,he<$?(ne.flags|=67108866,$):he):(ne.flags|=67108866,$)):(ne.flags|=1048576,$)}function R(ne){return t&&ne.alternate===null&&(ne.flags|=67108866),ne}function P(ne,$,he,Se){return $===null||$.tag!==6?($=id(he,ne.mode,Se),$.return=ne,$):($=E($,he),$.return=ne,$)}function K(ne,$,he,Se){var mt=he.type;return mt===le?be(ne,$,he.props.children,Se,he.key):$!==null&&($.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===z&&Ho(mt)===$.type)?($=E($,he.props),Ac($,he),$.return=ne,$):($=Hu(he.type,he.key,he.props,null,ne.mode,Se),Ac($,he),$.return=ne,$)}function fe(ne,$,he,Se){return $===null||$.tag!==4||$.stateNode.containerInfo!==he.containerInfo||$.stateNode.implementation!==he.implementation?($=sd(he,ne.mode,Se),$.return=ne,$):($=E($,he.children||[]),$.return=ne,$)}function be(ne,$,he,Se,mt){return $===null||$.tag!==7?($=Vo(he,ne.mode,Se,mt),$.return=ne,$):($=E($,he),$.return=ne,$)}function Re(ne,$,he){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=id(""+$,ne.mode,he),$.return=ne,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case Y:return he=Hu($.type,$.key,$.props,null,ne.mode,he),Ac(he,$),he.return=ne,he;case te:return $=sd($,ne.mode,he),$.return=ne,$;case z:return $=Ho($),Re(ne,$,he)}if(oe($)||W($))return $=Vo($,ne.mode,he,null),$.return=ne,$;if(typeof $.then=="function")return Re(ne,Qu($),he);if($.$$typeof===me)return Re(ne,Xu(ne,$),he);Zu(ne,$)}return null}function ge(ne,$,he,Se){var mt=$!==null?$.key:null;if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return mt!==null?null:P(ne,$,""+he,Se);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case Y:return he.key===mt?K(ne,$,he,Se):null;case te:return he.key===mt?fe(ne,$,he,Se):null;case z:return he=Ho(he),ge(ne,$,he,Se)}if(oe(he)||W(he))return mt!==null?null:be(ne,$,he,Se,null);if(typeof he.then=="function")return ge(ne,$,Qu(he),Se);if(he.$$typeof===me)return ge(ne,$,Xu(ne,he),Se);Zu(ne,he)}return null}function _e(ne,$,he,Se,mt){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return ne=ne.get(he)||null,P($,ne,""+Se,mt);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case Y:return ne=ne.get(Se.key===null?he:Se.key)||null,K($,ne,Se,mt);case te:return ne=ne.get(Se.key===null?he:Se.key)||null,fe($,ne,Se,mt);case z:return Se=Ho(Se),_e(ne,$,he,Se,mt)}if(oe(Se)||W(Se))return ne=ne.get(he)||null,be($,ne,Se,mt,null);if(typeof Se.then=="function")return _e(ne,$,he,Qu(Se),mt);if(Se.$$typeof===me)return _e(ne,$,he,Xu($,Se),mt);Zu($,Se)}return null}function st(ne,$,he,Se){for(var mt=null,xn=null,ot=$,Ft=$=0,rn=null;ot!==null&&Ft<he.length;Ft++){ot.index>Ft?(rn=ot,ot=null):rn=ot.sibling;var _n=ge(ne,ot,he[Ft],Se);if(_n===null){ot===null&&(ot=rn);break}t&&ot&&_n.alternate===null&&i(ne,ot),$=w(_n,$,Ft),xn===null?mt=_n:xn.sibling=_n,xn=_n,ot=rn}if(Ft===he.length)return c(ne,ot),un&&sa(ne,Ft),mt;if(ot===null){for(;Ft<he.length;Ft++)ot=Re(ne,he[Ft],Se),ot!==null&&($=w(ot,$,Ft),xn===null?mt=ot:xn.sibling=ot,xn=ot);return un&&sa(ne,Ft),mt}for(ot=d(ot);Ft<he.length;Ft++)rn=_e(ot,ne,Ft,he[Ft],Se),rn!==null&&(t&&rn.alternate!==null&&ot.delete(rn.key===null?Ft:rn.key),$=w(rn,$,Ft),xn===null?mt=rn:xn.sibling=rn,xn=rn);return t&&ot.forEach(function(ro){return i(ne,ro)}),un&&sa(ne,Ft),mt}function At(ne,$,he,Se){if(he==null)throw Error(o(151));for(var mt=null,xn=null,ot=$,Ft=$=0,rn=null,_n=he.next();ot!==null&&!_n.done;Ft++,_n=he.next()){ot.index>Ft?(rn=ot,ot=null):rn=ot.sibling;var ro=ge(ne,ot,_n.value,Se);if(ro===null){ot===null&&(ot=rn);break}t&&ot&&ro.alternate===null&&i(ne,ot),$=w(ro,$,Ft),xn===null?mt=ro:xn.sibling=ro,xn=ro,ot=rn}if(_n.done)return c(ne,ot),un&&sa(ne,Ft),mt;if(ot===null){for(;!_n.done;Ft++,_n=he.next())_n=Re(ne,_n.value,Se),_n!==null&&($=w(_n,$,Ft),xn===null?mt=_n:xn.sibling=_n,xn=_n);return un&&sa(ne,Ft),mt}for(ot=d(ot);!_n.done;Ft++,_n=he.next())_n=_e(ot,ne,Ft,_n.value,Se),_n!==null&&(t&&_n.alternate!==null&&ot.delete(_n.key===null?Ft:_n.key),$=w(_n,$,Ft),xn===null?mt=_n:xn.sibling=_n,xn=_n);return t&&ot.forEach(function(Yw){return i(ne,Yw)}),un&&sa(ne,Ft),mt}function kn(ne,$,he,Se){if(typeof he=="object"&&he!==null&&he.type===le&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case Y:e:{for(var mt=he.key;$!==null;){if($.key===mt){if(mt=he.type,mt===le){if($.tag===7){c(ne,$.sibling),Se=E($,he.props.children),Se.return=ne,ne=Se;break e}}else if($.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===z&&Ho(mt)===$.type){c(ne,$.sibling),Se=E($,he.props),Ac(Se,he),Se.return=ne,ne=Se;break e}c(ne,$);break}else i(ne,$);$=$.sibling}he.type===le?(Se=Vo(he.props.children,ne.mode,Se,he.key),Se.return=ne,ne=Se):(Se=Hu(he.type,he.key,he.props,null,ne.mode,Se),Ac(Se,he),Se.return=ne,ne=Se)}return R(ne);case te:e:{for(mt=he.key;$!==null;){if($.key===mt)if($.tag===4&&$.stateNode.containerInfo===he.containerInfo&&$.stateNode.implementation===he.implementation){c(ne,$.sibling),Se=E($,he.children||[]),Se.return=ne,ne=Se;break e}else{c(ne,$);break}else i(ne,$);$=$.sibling}Se=sd(he,ne.mode,Se),Se.return=ne,ne=Se}return R(ne);case z:return he=Ho(he),kn(ne,$,he,Se)}if(oe(he))return st(ne,$,he,Se);if(W(he)){if(mt=W(he),typeof mt!="function")throw Error(o(150));return he=mt.call(he),At(ne,$,he,Se)}if(typeof he.then=="function")return kn(ne,$,Qu(he),Se);if(he.$$typeof===me)return kn(ne,$,Xu(ne,he),Se);Zu(ne,he)}return typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint"?(he=""+he,$!==null&&$.tag===6?(c(ne,$.sibling),Se=E($,he),Se.return=ne,ne=Se):(c(ne,$),Se=id(he,ne.mode,Se),Se.return=ne,ne=Se),R(ne)):c(ne,$)}return function(ne,$,he,Se){try{_c=0;var mt=kn(ne,$,he,Se);return vl=null,mt}catch(ot){if(ot===bl||ot===Wu)throw ot;var xn=Gi(29,ot,null,ne.mode);return xn.lanes=Se,xn.return=ne,xn}finally{}}}var qo=im(!0),sm=im(!1),Fa=!1;function yd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ed(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function za(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ja(t,i,c){var d=t.updateQueue;if(d===null)return null;if(d=d.shared,(An&2)!==0){var E=d.pending;return E===null?i.next=i:(i.next=E.next,E.next=i),d.pending=i,i=ju(t),jg(t,null,c),i}return zu(t,d,i,c),ju(t)}function wc(t,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194048)!==0)){var d=i.lanes;d&=t.pendingLanes,c|=d,i.lanes=c,pi(t,c)}}function xd(t,i){var c=t.updateQueue,d=t.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var E=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var R={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};w===null?E=w=R:w=w.next=R,c=c.next}while(c!==null);w===null?E=w=i:w=w.next=i}else E=w=i;c={baseState:d.baseState,firstBaseUpdate:E,lastBaseUpdate:w,shared:d.shared,callbacks:d.callbacks},t.updateQueue=c;return}t=c.lastBaseUpdate,t===null?c.firstBaseUpdate=i:t.next=i,c.lastBaseUpdate=i}var _d=!1;function Tc(){if(_d){var t=Tl;if(t!==null)throw t}}function bc(t,i,c,d){_d=!1;var E=t.updateQueue;Fa=!1;var w=E.firstBaseUpdate,R=E.lastBaseUpdate,P=E.shared.pending;if(P!==null){E.shared.pending=null;var K=P,fe=K.next;K.next=null,R===null?w=fe:R.next=fe,R=K;var be=t.alternate;be!==null&&(be=be.updateQueue,P=be.lastBaseUpdate,P!==R&&(P===null?be.firstBaseUpdate=fe:P.next=fe,be.lastBaseUpdate=K))}if(w!==null){var Re=E.baseState;R=0,be=fe=K=null,P=w;do{var ge=P.lane&-536870913,_e=ge!==P.lane;if(_e?(nn&ge)===ge:(d&ge)===ge){ge!==0&&ge===wl&&(_d=!0),be!==null&&(be=be.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var st=t,At=P;ge=i;var kn=c;switch(At.tag){case 1:if(st=At.payload,typeof st=="function"){Re=st.call(kn,Re,ge);break e}Re=st;break e;case 3:st.flags=st.flags&-65537|128;case 0:if(st=At.payload,ge=typeof st=="function"?st.call(kn,Re,ge):st,ge==null)break e;Re=O({},Re,ge);break e;case 2:Fa=!0}}ge=P.callback,ge!==null&&(t.flags|=64,_e&&(t.flags|=8192),_e=E.callbacks,_e===null?E.callbacks=[ge]:_e.push(ge))}else _e={lane:ge,tag:P.tag,payload:P.payload,callback:P.callback,next:null},be===null?(fe=be=_e,K=Re):be=be.next=_e,R|=ge;if(P=P.next,P===null){if(P=E.shared.pending,P===null)break;_e=P,P=_e.next,_e.next=null,E.lastBaseUpdate=_e,E.shared.pending=null}}while(!0);be===null&&(K=Re),E.baseState=K,E.firstBaseUpdate=fe,E.lastBaseUpdate=be,w===null&&(E.shared.lanes=0),Ya|=R,t.lanes=R,t.memoizedState=Re}}function am(t,i){if(typeof t!="function")throw Error(o(191,t));t.call(i)}function om(t,i){var c=t.callbacks;if(c!==null)for(t.callbacks=null,t=0;t<c.length;t++)am(c[t],i)}var Cl=q(null),Ju=q(0);function lm(t,i){t=pa,re(Ju,t),re(Cl,i),pa=t|i.baseLanes}function Ad(){re(Ju,pa),re(Cl,Cl.current)}function wd(){pa=Ju.current,ae(Cl),ae(Ju)}var qi=q(null),us=null;function Ha(t){var i=t.alternate;re(Er,Er.current&1),re(qi,t),us===null&&(i===null||Cl.current!==null||i.memoizedState!==null)&&(us=t)}function Td(t){re(Er,Er.current),re(qi,t),us===null&&(us=t)}function cm(t){t.tag===22?(re(Er,Er.current),re(qi,t),us===null&&(us=t)):Ga()}function Ga(){re(Er,Er.current),re(qi,qi.current)}function Xi(t){ae(qi),us===t&&(us=null),ae(Er)}var Er=q(0);function $u(t){for(var i=t;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||R0(c)||N0(c)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var la=0,Bt=null,Mn=null,br=null,eh=!1,Sl=!1,Xo=!1,th=0,vc=0,Il=null,BA=0;function hr(){throw Error(o(321))}function bd(t,i){if(i===null)return!1;for(var c=0;c<i.length&&c<t.length;c++)if(!g(t[c],i[c]))return!1;return!0}function vd(t,i,c,d,E,w){return la=w,Bt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ue.H=t===null||t.memoizedState===null?Xm:Fd,Xo=!1,w=c(d,E),Xo=!1,Sl&&(w=hm(i,c,d,E)),um(t),w}function um(t){ue.H=Ic;var i=Mn!==null&&Mn.next!==null;if(la=0,br=Mn=Bt=null,eh=!1,vc=0,Il=null,i)throw Error(o(300));t===null||vr||(t=t.dependencies,t!==null&&qu(t)&&(vr=!0))}function hm(t,i,c,d){Bt=t;var E=0;do{if(Sl&&(Il=null),vc=0,Sl=!1,25<=E)throw Error(o(301));if(E+=1,br=Mn=null,t.updateQueue!=null){var w=t.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}ue.H=Ym,w=i(c,d)}while(Sl);return w}function VA(){var t=ue.H,i=t.useState()[0];return i=typeof i.then=="function"?Cc(i):i,t=t.useState()[0],(Mn!==null?Mn.memoizedState:null)!==t&&(Bt.flags|=1024),i}function Cd(){var t=th!==0;return th=0,t}function Sd(t,i,c){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~c}function Id(t){if(eh){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}eh=!1}la=0,br=Mn=Bt=null,Sl=!1,vc=th=0,Il=null}function wi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return br===null?Bt.memoizedState=br=t:br=br.next=t,br}function xr(){if(Mn===null){var t=Bt.alternate;t=t!==null?t.memoizedState:null}else t=Mn.next;var i=br===null?Bt.memoizedState:br.next;if(i!==null)br=i,Mn=t;else{if(t===null)throw Bt.alternate===null?Error(o(467)):Error(o(310));Mn=t,t={memoizedState:Mn.memoizedState,baseState:Mn.baseState,baseQueue:Mn.baseQueue,queue:Mn.queue,next:null},br===null?Bt.memoizedState=br=t:br=br.next=t}return br}function nh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cc(t){var i=vc;return vc+=1,Il===null&&(Il=[]),t=tm(Il,t,i),i=Bt,(br===null?i.memoizedState:br.next)===null&&(i=i.alternate,ue.H=i===null||i.memoizedState===null?Xm:Fd),t}function rh(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Cc(t);if(t.$$typeof===me)return Qr(t)}throw Error(o(438,String(t)))}function Rd(t){var i=null,c=Bt.updateQueue;if(c!==null&&(i=c.memoCache),i==null){var d=Bt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(i={data:d.data.map(function(E){return E.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),c===null&&(c=nh(),Bt.updateQueue=c),c.memoCache=i,c=i.data[i.index],c===void 0)for(c=i.data[i.index]=Array(t),d=0;d<t;d++)c[d]=Z;return i.index++,c}function ca(t,i){return typeof i=="function"?i(t):i}function ih(t){var i=xr();return Nd(i,Mn,t)}function Nd(t,i,c){var d=t.queue;if(d===null)throw Error(o(311));d.lastRenderedReducer=c;var E=t.baseQueue,w=d.pending;if(w!==null){if(E!==null){var R=E.next;E.next=w.next,w.next=R}i.baseQueue=E=w,d.pending=null}if(w=t.baseState,E===null)t.memoizedState=w;else{i=E.next;var P=R=null,K=null,fe=i,be=!1;do{var Re=fe.lane&-536870913;if(Re!==fe.lane?(nn&Re)===Re:(la&Re)===Re){var ge=fe.revertLane;if(ge===0)K!==null&&(K=K.next={lane:0,revertLane:0,gesture:null,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),Re===wl&&(be=!0);else if((la&ge)===ge){fe=fe.next,ge===wl&&(be=!0);continue}else Re={lane:0,revertLane:fe.revertLane,gesture:null,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},K===null?(P=K=Re,R=w):K=K.next=Re,Bt.lanes|=ge,Ya|=ge;Re=fe.action,Xo&&c(w,Re),w=fe.hasEagerState?fe.eagerState:c(w,Re)}else ge={lane:Re,revertLane:fe.revertLane,gesture:fe.gesture,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},K===null?(P=K=ge,R=w):K=K.next=ge,Bt.lanes|=Re,Ya|=Re;fe=fe.next}while(fe!==null&&fe!==i);if(K===null?R=w:K.next=P,!g(w,t.memoizedState)&&(vr=!0,be&&(c=Tl,c!==null)))throw c;t.memoizedState=w,t.baseState=R,t.baseQueue=K,d.lastRenderedState=w}return E===null&&(d.lanes=0),[t.memoizedState,d.dispatch]}function Od(t){var i=xr(),c=i.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=t;var d=c.dispatch,E=c.pending,w=i.memoizedState;if(E!==null){c.pending=null;var R=E=E.next;do w=t(w,R.action),R=R.next;while(R!==E);g(w,i.memoizedState)||(vr=!0),i.memoizedState=w,i.baseQueue===null&&(i.baseState=w),c.lastRenderedState=w}return[w,d]}function fm(t,i,c){var d=Bt,E=xr(),w=un;if(w){if(c===void 0)throw Error(o(407));c=c()}else c=i();var R=!g((Mn||E).memoizedState,c);if(R&&(E.memoizedState=c,vr=!0),E=E.queue,Ld(mm.bind(null,d,E,t),[t]),E.getSnapshot!==i||R||br!==null&&br.memoizedState.tag&1){if(d.flags|=2048,Rl(9,{destroy:void 0},gm.bind(null,d,E,c,i),null),Vn===null)throw Error(o(349));w||(la&127)!==0||dm(d,i,c)}return c}function dm(t,i,c){t.flags|=16384,t={getSnapshot:i,value:c},i=Bt.updateQueue,i===null?(i=nh(),Bt.updateQueue=i,i.stores=[t]):(c=i.stores,c===null?i.stores=[t]:c.push(t))}function gm(t,i,c,d){i.value=c,i.getSnapshot=d,pm(i)&&ym(t)}function mm(t,i,c){return c(function(){pm(i)&&ym(t)})}function pm(t){var i=t.getSnapshot;t=t.value;try{var c=i();return!g(t,c)}catch{return!0}}function ym(t){var i=Bo(t,2);i!==null&&ki(i,t,2)}function Dd(t){var i=wi();if(typeof t=="function"){var c=t;if(t=c(),Xo){vt(!0);try{c()}finally{vt(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:t},i}function Em(t,i,c,d){return t.baseState=c,Nd(t,Mn,typeof d=="function"?d:ca)}function UA(t,i,c,d,E){if(oh(t))throw Error(o(485));if(t=i.action,t!==null){var w={payload:E,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){w.listeners.push(R)}};ue.T!==null?c(!0):w.isTransition=!1,d(w),c=i.pending,c===null?(w.next=i.pending=w,xm(i,w)):(w.next=c.next,i.pending=c.next=w)}}function xm(t,i){var c=i.action,d=i.payload,E=t.state;if(i.isTransition){var w=ue.T,R={};ue.T=R;try{var P=c(E,d),K=ue.S;K!==null&&K(R,P),_m(t,i,P)}catch(fe){Md(t,i,fe)}finally{w!==null&&R.types!==null&&(w.types=R.types),ue.T=w}}else try{w=c(E,d),_m(t,i,w)}catch(fe){Md(t,i,fe)}}function _m(t,i,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){Am(t,i,d)},function(d){return Md(t,i,d)}):Am(t,i,c)}function Am(t,i,c){i.status="fulfilled",i.value=c,wm(i),t.state=c,i=t.pending,i!==null&&(c=i.next,c===i?t.pending=null:(c=c.next,i.next=c,xm(t,c)))}function Md(t,i,c){var d=t.pending;if(t.pending=null,d!==null){d=d.next;do i.status="rejected",i.reason=c,wm(i),i=i.next;while(i!==d)}t.action=null}function wm(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Tm(t,i){return i}function bm(t,i){if(un){var c=Vn.formState;if(c!==null){e:{var d=Bt;if(un){if(Xn){t:{for(var E=Xn,w=cs;E.nodeType!==8;){if(!w){E=null;break t}if(E=hs(E.nextSibling),E===null){E=null;break t}}w=E.data,E=w==="F!"||w==="F"?E:null}if(E){Xn=hs(E.nextSibling),d=E.data==="F!";break e}}Va(d)}d=!1}d&&(i=c[0])}}return c=wi(),c.memoizedState=c.baseState=i,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tm,lastRenderedState:i},c.queue=d,c=Hm.bind(null,Bt,d),d.dispatch=c,d=Dd(!1),w=Ud.bind(null,Bt,!1,d.queue),d=wi(),E={state:i,dispatch:null,action:t,pending:null},d.queue=E,c=UA.bind(null,Bt,E,w,c),E.dispatch=c,d.memoizedState=t,[i,c,!1]}function vm(t){var i=xr();return Cm(i,Mn,t)}function Cm(t,i,c){if(i=Nd(t,i,Tm)[0],t=ih(ca)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var d=Cc(i)}catch(R){throw R===bl?Wu:R}else d=i;i=xr();var E=i.queue,w=E.dispatch;return c!==i.memoizedState&&(Bt.flags|=2048,Rl(9,{destroy:void 0},FA.bind(null,E,c),null)),[d,w,t]}function FA(t,i){t.action=i}function Sm(t){var i=xr(),c=Mn;if(c!==null)return Cm(i,c,t);xr(),i=i.memoizedState,c=xr();var d=c.queue.dispatch;return c.memoizedState=t,[i,d,!1]}function Rl(t,i,c,d){return t={tag:t,create:c,deps:d,inst:i,next:null},i=Bt.updateQueue,i===null&&(i=nh(),Bt.updateQueue=i),c=i.lastEffect,c===null?i.lastEffect=t.next=t:(d=c.next,c.next=t,t.next=d,i.lastEffect=t),t}function Im(){return xr().memoizedState}function sh(t,i,c,d){var E=wi();Bt.flags|=t,E.memoizedState=Rl(1|i,{destroy:void 0},c,d===void 0?null:d)}function ah(t,i,c,d){var E=xr();d=d===void 0?null:d;var w=E.memoizedState.inst;Mn!==null&&d!==null&&bd(d,Mn.memoizedState.deps)?E.memoizedState=Rl(i,w,c,d):(Bt.flags|=t,E.memoizedState=Rl(1|i,w,c,d))}function Rm(t,i){sh(8390656,8,t,i)}function Ld(t,i){ah(2048,8,t,i)}function zA(t){Bt.flags|=4;var i=Bt.updateQueue;if(i===null)i=nh(),Bt.updateQueue=i,i.events=[t];else{var c=i.events;c===null?i.events=[t]:c.push(t)}}function Nm(t){var i=xr().memoizedState;return zA({ref:i,nextImpl:t}),function(){if((An&2)!==0)throw Error(o(440));return i.impl.apply(void 0,arguments)}}function Om(t,i){return ah(4,2,t,i)}function Dm(t,i){return ah(4,4,t,i)}function Mm(t,i){if(typeof i=="function"){t=t();var c=i(t);return function(){typeof c=="function"?c():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Lm(t,i,c){c=c!=null?c.concat([t]):null,ah(4,4,Mm.bind(null,i,t),c)}function kd(){}function km(t,i){var c=xr();i=i===void 0?null:i;var d=c.memoizedState;return i!==null&&bd(i,d[1])?d[0]:(c.memoizedState=[t,i],t)}function Pm(t,i){var c=xr();i=i===void 0?null:i;var d=c.memoizedState;if(i!==null&&bd(i,d[1]))return d[0];if(d=t(),Xo){vt(!0);try{t()}finally{vt(!1)}}return c.memoizedState=[d,i],d}function Pd(t,i,c){return c===void 0||(la&1073741824)!==0&&(nn&261930)===0?t.memoizedState=i:(t.memoizedState=c,t=Bp(),Bt.lanes|=t,Ya|=t,c)}function Bm(t,i,c,d){return g(c,i)?c:Cl.current!==null?(t=Pd(t,c,d),g(t,i)||(vr=!0),t):(la&42)===0||(la&1073741824)!==0&&(nn&261930)===0?(vr=!0,t.memoizedState=c):(t=Bp(),Bt.lanes|=t,Ya|=t,i)}function Vm(t,i,c,d,E){var w=Ae.p;Ae.p=w!==0&&8>w?w:8;var R=ue.T,P={};ue.T=P,Ud(t,!1,i,c);try{var K=E(),fe=ue.S;if(fe!==null&&fe(P,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var be=PA(K,d);Sc(t,i,be,Ki(t))}else Sc(t,i,d,Ki(t))}catch(Re){Sc(t,i,{then:function(){},status:"rejected",reason:Re},Ki())}finally{Ae.p=w,R!==null&&P.types!==null&&(R.types=P.types),ue.T=R}}function jA(){}function Bd(t,i,c,d){if(t.tag!==5)throw Error(o(476));var E=Um(t).queue;Vm(t,E,i,Ye,c===null?jA:function(){return Fm(t),c(d)})}function Um(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:Ye,baseState:Ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:Ye},next:null};var c={};return i.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:c},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Fm(t){var i=Um(t);i.next===null&&(i=t.alternate.memoizedState),Sc(t,i.next.queue,{},Ki())}function Vd(){return Qr(Gc)}function zm(){return xr().memoizedState}function jm(){return xr().memoizedState}function HA(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var c=Ki();t=za(c);var d=ja(i,t,c);d!==null&&(ki(d,i,c),wc(d,i,c)),i={cache:dd()},t.payload=i;return}i=i.return}}function GA(t,i,c){var d=Ki();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},oh(t)?Gm(i,c):(c=nd(t,i,c,d),c!==null&&(ki(c,t,d),qm(c,i,d)))}function Hm(t,i,c){var d=Ki();Sc(t,i,c,d)}function Sc(t,i,c,d){var E={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(oh(t))Gm(i,E);else{var w=t.alternate;if(t.lanes===0&&(w===null||w.lanes===0)&&(w=i.lastRenderedReducer,w!==null))try{var R=i.lastRenderedState,P=w(R,c);if(E.hasEagerState=!0,E.eagerState=P,g(P,R))return zu(t,i,E,0),Vn===null&&Fu(),!1}catch{}finally{}if(c=nd(t,i,E,d),c!==null)return ki(c,t,d),qm(c,i,d),!0}return!1}function Ud(t,i,c,d){if(d={lane:2,revertLane:y0(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},oh(t)){if(i)throw Error(o(479))}else i=nd(t,c,d,2),i!==null&&ki(i,t,2)}function oh(t){var i=t.alternate;return t===Bt||i!==null&&i===Bt}function Gm(t,i){Sl=eh=!0;var c=t.pending;c===null?i.next=i:(i.next=c.next,c.next=i),t.pending=i}function qm(t,i,c){if((c&4194048)!==0){var d=i.lanes;d&=t.pendingLanes,c|=d,i.lanes=c,pi(t,c)}}var Ic={readContext:Qr,use:rh,useCallback:hr,useContext:hr,useEffect:hr,useImperativeHandle:hr,useLayoutEffect:hr,useInsertionEffect:hr,useMemo:hr,useReducer:hr,useRef:hr,useState:hr,useDebugValue:hr,useDeferredValue:hr,useTransition:hr,useSyncExternalStore:hr,useId:hr,useHostTransitionStatus:hr,useFormState:hr,useActionState:hr,useOptimistic:hr,useMemoCache:hr,useCacheRefresh:hr};Ic.useEffectEvent=hr;var Xm={readContext:Qr,use:rh,useCallback:function(t,i){return wi().memoizedState=[t,i===void 0?null:i],t},useContext:Qr,useEffect:Rm,useImperativeHandle:function(t,i,c){c=c!=null?c.concat([t]):null,sh(4194308,4,Mm.bind(null,i,t),c)},useLayoutEffect:function(t,i){return sh(4194308,4,t,i)},useInsertionEffect:function(t,i){sh(4,2,t,i)},useMemo:function(t,i){var c=wi();i=i===void 0?null:i;var d=t();if(Xo){vt(!0);try{t()}finally{vt(!1)}}return c.memoizedState=[d,i],d},useReducer:function(t,i,c){var d=wi();if(c!==void 0){var E=c(i);if(Xo){vt(!0);try{c(i)}finally{vt(!1)}}}else E=i;return d.memoizedState=d.baseState=E,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:E},d.queue=t,t=t.dispatch=GA.bind(null,Bt,t),[d.memoizedState,t]},useRef:function(t){var i=wi();return t={current:t},i.memoizedState=t},useState:function(t){t=Dd(t);var i=t.queue,c=Hm.bind(null,Bt,i);return i.dispatch=c,[t.memoizedState,c]},useDebugValue:kd,useDeferredValue:function(t,i){var c=wi();return Pd(c,t,i)},useTransition:function(){var t=Dd(!1);return t=Vm.bind(null,Bt,t.queue,!0,!1),wi().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,c){var d=Bt,E=wi();if(un){if(c===void 0)throw Error(o(407));c=c()}else{if(c=i(),Vn===null)throw Error(o(349));(nn&127)!==0||dm(d,i,c)}E.memoizedState=c;var w={value:c,getSnapshot:i};return E.queue=w,Rm(mm.bind(null,d,w,t),[t]),d.flags|=2048,Rl(9,{destroy:void 0},gm.bind(null,d,w,c,i),null),c},useId:function(){var t=wi(),i=Vn.identifierPrefix;if(un){var c=Ls,d=Ms;c=(d&~(1<<32-lt(d)-1)).toString(32)+c,i="_"+i+"R_"+c,c=th++,0<c&&(i+="H"+c.toString(32)),i+="_"}else c=BA++,i="_"+i+"r_"+c.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:Vd,useFormState:bm,useActionState:bm,useOptimistic:function(t){var i=wi();i.memoizedState=i.baseState=t;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=c,i=Ud.bind(null,Bt,!0,c),c.dispatch=i,[t,i]},useMemoCache:Rd,useCacheRefresh:function(){return wi().memoizedState=HA.bind(null,Bt)},useEffectEvent:function(t){var i=wi(),c={impl:t};return i.memoizedState=c,function(){if((An&2)!==0)throw Error(o(440));return c.impl.apply(void 0,arguments)}}},Fd={readContext:Qr,use:rh,useCallback:km,useContext:Qr,useEffect:Ld,useImperativeHandle:Lm,useInsertionEffect:Om,useLayoutEffect:Dm,useMemo:Pm,useReducer:ih,useRef:Im,useState:function(){return ih(ca)},useDebugValue:kd,useDeferredValue:function(t,i){var c=xr();return Bm(c,Mn.memoizedState,t,i)},useTransition:function(){var t=ih(ca)[0],i=xr().memoizedState;return[typeof t=="boolean"?t:Cc(t),i]},useSyncExternalStore:fm,useId:zm,useHostTransitionStatus:Vd,useFormState:vm,useActionState:vm,useOptimistic:function(t,i){var c=xr();return Em(c,Mn,t,i)},useMemoCache:Rd,useCacheRefresh:jm};Fd.useEffectEvent=Nm;var Ym={readContext:Qr,use:rh,useCallback:km,useContext:Qr,useEffect:Ld,useImperativeHandle:Lm,useInsertionEffect:Om,useLayoutEffect:Dm,useMemo:Pm,useReducer:Od,useRef:Im,useState:function(){return Od(ca)},useDebugValue:kd,useDeferredValue:function(t,i){var c=xr();return Mn===null?Pd(c,t,i):Bm(c,Mn.memoizedState,t,i)},useTransition:function(){var t=Od(ca)[0],i=xr().memoizedState;return[typeof t=="boolean"?t:Cc(t),i]},useSyncExternalStore:fm,useId:zm,useHostTransitionStatus:Vd,useFormState:Sm,useActionState:Sm,useOptimistic:function(t,i){var c=xr();return Mn!==null?Em(c,Mn,t,i):(c.baseState=t,[t,c.queue.dispatch])},useMemoCache:Rd,useCacheRefresh:jm};Ym.useEffectEvent=Nm;function zd(t,i,c,d){i=t.memoizedState,c=c(d,i),c=c==null?i:O({},i,c),t.memoizedState=c,t.lanes===0&&(t.updateQueue.baseState=c)}var jd={enqueueSetState:function(t,i,c){t=t._reactInternals;var d=Ki(),E=za(d);E.payload=i,c!=null&&(E.callback=c),i=ja(t,E,d),i!==null&&(ki(i,t,d),wc(i,t,d))},enqueueReplaceState:function(t,i,c){t=t._reactInternals;var d=Ki(),E=za(d);E.tag=1,E.payload=i,c!=null&&(E.callback=c),i=ja(t,E,d),i!==null&&(ki(i,t,d),wc(i,t,d))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var c=Ki(),d=za(c);d.tag=2,i!=null&&(d.callback=i),i=ja(t,d,c),i!==null&&(ki(i,t,c),wc(i,t,c))}};function Wm(t,i,c,d,E,w,R){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(d,w,R):i.prototype&&i.prototype.isPureReactComponent?!y(c,d)||!y(E,w):!0}function Km(t,i,c,d){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,d),i.state!==t&&jd.enqueueReplaceState(i,i.state,null)}function Yo(t,i){var c=i;if("ref"in i){c={};for(var d in i)d!=="ref"&&(c[d]=i[d])}if(t=t.defaultProps){c===i&&(c=O({},c));for(var E in t)c[E]===void 0&&(c[E]=t[E])}return c}function Qm(t){Uu(t)}function Zm(t){console.error(t)}function Jm(t){Uu(t)}function lh(t,i){try{var c=t.onUncaughtError;c(i.value,{componentStack:i.stack})}catch(d){setTimeout(function(){throw d})}}function $m(t,i,c){try{var d=t.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function Hd(t,i,c){return c=za(c),c.tag=3,c.payload={element:null},c.callback=function(){lh(t,i)},c}function ep(t){return t=za(t),t.tag=3,t}function tp(t,i,c,d){var E=c.type.getDerivedStateFromError;if(typeof E=="function"){var w=d.value;t.payload=function(){return E(w)},t.callback=function(){$m(i,c,d)}}var R=c.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(t.callback=function(){$m(i,c,d),typeof E!="function"&&(Wa===null?Wa=new Set([this]):Wa.add(this));var P=d.stack;this.componentDidCatch(d.value,{componentStack:P!==null?P:""})})}function qA(t,i,c,d,E){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(i=c.alternate,i!==null&&Al(i,c,E,!0),c=qi.current,c!==null){switch(c.tag){case 31:case 13:return us===null?_h():c.alternate===null&&fr===0&&(fr=3),c.flags&=-257,c.flags|=65536,c.lanes=E,d===Ku?c.flags|=16384:(i=c.updateQueue,i===null?c.updateQueue=new Set([d]):i.add(d),g0(t,d,E)),!1;case 22:return c.flags|=65536,d===Ku?c.flags|=16384:(i=c.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=i):(c=i.retryQueue,c===null?i.retryQueue=new Set([d]):c.add(d)),g0(t,d,E)),!1}throw Error(o(435,c.tag))}return g0(t,d,E),_h(),!1}if(un)return i=qi.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=E,d!==ld&&(t=Error(o(422),{cause:d}),yc(as(t,c)))):(d!==ld&&(i=Error(o(423),{cause:d}),yc(as(i,c))),t=t.current.alternate,t.flags|=65536,E&=-E,t.lanes|=E,d=as(d,c),E=Hd(t.stateNode,d,E),xd(t,E),fr!==4&&(fr=2)),!1;var w=Error(o(520),{cause:d});if(w=as(w,c),Pc===null?Pc=[w]:Pc.push(w),fr!==4&&(fr=2),i===null)return!0;d=as(d,c),c=i;do{switch(c.tag){case 3:return c.flags|=65536,t=E&-E,c.lanes|=t,t=Hd(c.stateNode,d,t),xd(c,t),!1;case 1:if(i=c.type,w=c.stateNode,(c.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Wa===null||!Wa.has(w))))return c.flags|=65536,E&=-E,c.lanes|=E,E=ep(E),tp(E,t,c,d),xd(c,E),!1}c=c.return}while(c!==null);return!1}var Gd=Error(o(461)),vr=!1;function Zr(t,i,c,d){i.child=t===null?sm(i,null,c,d):qo(i,t.child,c,d)}function np(t,i,c,d,E){c=c.render;var w=i.ref;if("ref"in d){var R={};for(var P in d)P!=="ref"&&(R[P]=d[P])}else R=d;return zo(i),d=vd(t,i,c,R,w,E),P=Cd(),t!==null&&!vr?(Sd(t,i,E),ua(t,i,E)):(un&&P&&ad(i),i.flags|=1,Zr(t,i,d,E),i.child)}function rp(t,i,c,d,E){if(t===null){var w=c.type;return typeof w=="function"&&!rd(w)&&w.defaultProps===void 0&&c.compare===null?(i.tag=15,i.type=w,ip(t,i,w,d,E)):(t=Hu(c.type,null,d,i,i.mode,E),t.ref=i.ref,t.return=i,i.child=t)}if(w=t.child,!Jd(t,E)){var R=w.memoizedProps;if(c=c.compare,c=c!==null?c:y,c(R,d)&&t.ref===i.ref)return ua(t,i,E)}return i.flags|=1,t=ia(w,d),t.ref=i.ref,t.return=i,i.child=t}function ip(t,i,c,d,E){if(t!==null){var w=t.memoizedProps;if(y(w,d)&&t.ref===i.ref)if(vr=!1,i.pendingProps=d=w,Jd(t,E))(t.flags&131072)!==0&&(vr=!0);else return i.lanes=t.lanes,ua(t,i,E)}return qd(t,i,c,d,E)}function sp(t,i,c,d){var E=d.children,w=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((i.flags&128)!==0){if(w=w!==null?w.baseLanes|c:c,t!==null){for(d=i.child=t.child,E=0;d!==null;)E=E|d.lanes|d.childLanes,d=d.sibling;d=E&~w}else d=0,i.child=null;return ap(t,i,w,c,d)}if((c&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Yu(i,w!==null?w.cachePool:null),w!==null?lm(i,w):Ad(),cm(i);else return d=i.lanes=536870912,ap(t,i,w!==null?w.baseLanes|c:c,c,d)}else w!==null?(Yu(i,w.cachePool),lm(i,w),Ga(),i.memoizedState=null):(t!==null&&Yu(i,null),Ad(),Ga());return Zr(t,i,E,c),i.child}function Rc(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function ap(t,i,c,d,E){var w=md();return w=w===null?null:{parent:Tr._currentValue,pool:w},i.memoizedState={baseLanes:c,cachePool:w},t!==null&&Yu(i,null),Ad(),cm(i),t!==null&&Al(t,i,d,!0),i.childLanes=E,null}function ch(t,i){return i=hh({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function op(t,i,c){return qo(i,t.child,null,c),t=ch(i,i.pendingProps),t.flags|=2,Xi(i),i.memoizedState=null,t}function XA(t,i,c){var d=i.pendingProps,E=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(un){if(d.mode==="hidden")return t=ch(i,d),i.lanes=536870912,Rc(null,t);if(Td(i),(t=Xn)?(t=x2(t,cs),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Pa!==null?{id:Ms,overflow:Ls}:null,retryLane:536870912,hydrationErrors:null},c=Gg(t),c.return=i,i.child=c,Kr=i,Xn=null)):t=null,t===null)throw Va(i);return i.lanes=536870912,null}return ch(i,d)}var w=t.memoizedState;if(w!==null){var R=w.dehydrated;if(Td(i),E)if(i.flags&256)i.flags&=-257,i=op(t,i,c);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(o(558));else if(vr||Al(t,i,c,!1),E=(c&t.childLanes)!==0,vr||E){if(d=Vn,d!==null&&(R=ys(d,c),R!==0&&R!==w.retryLane))throw w.retryLane=R,Bo(t,R),ki(d,t,R),Gd;_h(),i=op(t,i,c)}else t=w.treeContext,Xn=hs(R.nextSibling),Kr=i,un=!0,Ba=null,cs=!1,t!==null&&Yg(i,t),i=ch(i,d),i.flags|=4096;return i}return t=ia(t.child,{mode:d.mode,children:d.children}),t.ref=i.ref,i.child=t,t.return=i,t}function uh(t,i){var c=i.ref;if(c===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(o(284));(t===null||t.ref!==c)&&(i.flags|=4194816)}}function qd(t,i,c,d,E){return zo(i),c=vd(t,i,c,d,void 0,E),d=Cd(),t!==null&&!vr?(Sd(t,i,E),ua(t,i,E)):(un&&d&&ad(i),i.flags|=1,Zr(t,i,c,E),i.child)}function lp(t,i,c,d,E,w){return zo(i),i.updateQueue=null,c=hm(i,d,c,E),um(t),d=Cd(),t!==null&&!vr?(Sd(t,i,w),ua(t,i,w)):(un&&d&&ad(i),i.flags|=1,Zr(t,i,c,w),i.child)}function cp(t,i,c,d,E){if(zo(i),i.stateNode===null){var w=yl,R=c.contextType;typeof R=="object"&&R!==null&&(w=Qr(R)),w=new c(d,w),i.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=jd,i.stateNode=w,w._reactInternals=i,w=i.stateNode,w.props=d,w.state=i.memoizedState,w.refs={},yd(i),R=c.contextType,w.context=typeof R=="object"&&R!==null?Qr(R):yl,w.state=i.memoizedState,R=c.getDerivedStateFromProps,typeof R=="function"&&(zd(i,c,R,d),w.state=i.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(R=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),R!==w.state&&jd.enqueueReplaceState(w,w.state,null),bc(i,d,w,E),Tc(),w.state=i.memoizedState),typeof w.componentDidMount=="function"&&(i.flags|=4194308),d=!0}else if(t===null){w=i.stateNode;var P=i.memoizedProps,K=Yo(c,P);w.props=K;var fe=w.context,be=c.contextType;R=yl,typeof be=="object"&&be!==null&&(R=Qr(be));var Re=c.getDerivedStateFromProps;be=typeof Re=="function"||typeof w.getSnapshotBeforeUpdate=="function",P=i.pendingProps!==P,be||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P||fe!==R)&&Km(i,w,d,R),Fa=!1;var ge=i.memoizedState;w.state=ge,bc(i,d,w,E),Tc(),fe=i.memoizedState,P||ge!==fe||Fa?(typeof Re=="function"&&(zd(i,c,Re,d),fe=i.memoizedState),(K=Fa||Wm(i,c,K,d,ge,fe,R))?(be||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=fe),w.props=d,w.state=fe,w.context=R,d=K):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{w=i.stateNode,Ed(t,i),R=i.memoizedProps,be=Yo(c,R),w.props=be,Re=i.pendingProps,ge=w.context,fe=c.contextType,K=yl,typeof fe=="object"&&fe!==null&&(K=Qr(fe)),P=c.getDerivedStateFromProps,(fe=typeof P=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(R!==Re||ge!==K)&&Km(i,w,d,K),Fa=!1,ge=i.memoizedState,w.state=ge,bc(i,d,w,E),Tc();var _e=i.memoizedState;R!==Re||ge!==_e||Fa||t!==null&&t.dependencies!==null&&qu(t.dependencies)?(typeof P=="function"&&(zd(i,c,P,d),_e=i.memoizedState),(be=Fa||Wm(i,c,be,d,ge,_e,K)||t!==null&&t.dependencies!==null&&qu(t.dependencies))?(fe||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(d,_e,K),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(d,_e,K)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||R===t.memoizedProps&&ge===t.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||R===t.memoizedProps&&ge===t.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=_e),w.props=d,w.state=_e,w.context=K,d=be):(typeof w.componentDidUpdate!="function"||R===t.memoizedProps&&ge===t.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||R===t.memoizedProps&&ge===t.memoizedState||(i.flags|=1024),d=!1)}return w=d,uh(t,i),d=(i.flags&128)!==0,w||d?(w=i.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:w.render(),i.flags|=1,t!==null&&d?(i.child=qo(i,t.child,null,E),i.child=qo(i,null,c,E)):Zr(t,i,c,E),i.memoizedState=w.state,t=i.child):t=ua(t,i,E),t}function up(t,i,c,d){return Uo(),i.flags|=256,Zr(t,i,c,d),i.child}var Xd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yd(t){return{baseLanes:t,cachePool:$g()}}function Wd(t,i,c){return t=t!==null?t.childLanes&~c:0,i&&(t|=Wi),t}function hp(t,i,c){var d=i.pendingProps,E=!1,w=(i.flags&128)!==0,R;if((R=w)||(R=t!==null&&t.memoizedState===null?!1:(Er.current&2)!==0),R&&(E=!0,i.flags&=-129),R=(i.flags&32)!==0,i.flags&=-33,t===null){if(un){if(E?Ha(i):Ga(),(t=Xn)?(t=x2(t,cs),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Pa!==null?{id:Ms,overflow:Ls}:null,retryLane:536870912,hydrationErrors:null},c=Gg(t),c.return=i,i.child=c,Kr=i,Xn=null)):t=null,t===null)throw Va(i);return N0(t)?i.lanes=32:i.lanes=536870912,null}var P=d.children;return d=d.fallback,E?(Ga(),E=i.mode,P=hh({mode:"hidden",children:P},E),d=Vo(d,E,c,null),P.return=i,d.return=i,P.sibling=d,i.child=P,d=i.child,d.memoizedState=Yd(c),d.childLanes=Wd(t,R,c),i.memoizedState=Xd,Rc(null,d)):(Ha(i),Kd(i,P))}var K=t.memoizedState;if(K!==null&&(P=K.dehydrated,P!==null)){if(w)i.flags&256?(Ha(i),i.flags&=-257,i=Qd(t,i,c)):i.memoizedState!==null?(Ga(),i.child=t.child,i.flags|=128,i=null):(Ga(),P=d.fallback,E=i.mode,d=hh({mode:"visible",children:d.children},E),P=Vo(P,E,c,null),P.flags|=2,d.return=i,P.return=i,d.sibling=P,i.child=d,qo(i,t.child,null,c),d=i.child,d.memoizedState=Yd(c),d.childLanes=Wd(t,R,c),i.memoizedState=Xd,i=Rc(null,d));else if(Ha(i),N0(P)){if(R=P.nextSibling&&P.nextSibling.dataset,R)var fe=R.dgst;R=fe,d=Error(o(419)),d.stack="",d.digest=R,yc({value:d,source:null,stack:null}),i=Qd(t,i,c)}else if(vr||Al(t,i,c,!1),R=(c&t.childLanes)!==0,vr||R){if(R=Vn,R!==null&&(d=ys(R,c),d!==0&&d!==K.retryLane))throw K.retryLane=d,Bo(t,d),ki(R,t,d),Gd;R0(P)||_h(),i=Qd(t,i,c)}else R0(P)?(i.flags|=192,i.child=t.child,i=null):(t=K.treeContext,Xn=hs(P.nextSibling),Kr=i,un=!0,Ba=null,cs=!1,t!==null&&Yg(i,t),i=Kd(i,d.children),i.flags|=4096);return i}return E?(Ga(),P=d.fallback,E=i.mode,K=t.child,fe=K.sibling,d=ia(K,{mode:"hidden",children:d.children}),d.subtreeFlags=K.subtreeFlags&65011712,fe!==null?P=ia(fe,P):(P=Vo(P,E,c,null),P.flags|=2),P.return=i,d.return=i,d.sibling=P,i.child=d,Rc(null,d),d=i.child,P=t.child.memoizedState,P===null?P=Yd(c):(E=P.cachePool,E!==null?(K=Tr._currentValue,E=E.parent!==K?{parent:K,pool:K}:E):E=$g(),P={baseLanes:P.baseLanes|c,cachePool:E}),d.memoizedState=P,d.childLanes=Wd(t,R,c),i.memoizedState=Xd,Rc(t.child,d)):(Ha(i),c=t.child,t=c.sibling,c=ia(c,{mode:"visible",children:d.children}),c.return=i,c.sibling=null,t!==null&&(R=i.deletions,R===null?(i.deletions=[t],i.flags|=16):R.push(t)),i.child=c,i.memoizedState=null,c)}function Kd(t,i){return i=hh({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function hh(t,i){return t=Gi(22,t,null,i),t.lanes=0,t}function Qd(t,i,c){return qo(i,t.child,null,c),t=Kd(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function fp(t,i,c){t.lanes|=i;var d=t.alternate;d!==null&&(d.lanes|=i),hd(t.return,i,c)}function Zd(t,i,c,d,E,w){var R=t.memoizedState;R===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:E,treeForkCount:w}:(R.isBackwards=i,R.rendering=null,R.renderingStartTime=0,R.last=d,R.tail=c,R.tailMode=E,R.treeForkCount=w)}function dp(t,i,c){var d=i.pendingProps,E=d.revealOrder,w=d.tail;d=d.children;var R=Er.current,P=(R&2)!==0;if(P?(R=R&1|2,i.flags|=128):R&=1,re(Er,R),Zr(t,i,d,c),d=un?pc:0,!P&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fp(t,c,i);else if(t.tag===19)fp(t,c,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(E){case"forwards":for(c=i.child,E=null;c!==null;)t=c.alternate,t!==null&&$u(t)===null&&(E=c),c=c.sibling;c=E,c===null?(E=i.child,i.child=null):(E=c.sibling,c.sibling=null),Zd(i,!1,E,c,w,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,E=i.child,i.child=null;E!==null;){if(t=E.alternate,t!==null&&$u(t)===null){i.child=E;break}t=E.sibling,E.sibling=c,c=E,E=t}Zd(i,!0,c,null,w,d);break;case"together":Zd(i,!1,null,null,void 0,d);break;default:i.memoizedState=null}return i.child}function ua(t,i,c){if(t!==null&&(i.dependencies=t.dependencies),Ya|=i.lanes,(c&i.childLanes)===0)if(t!==null){if(Al(t,i,c,!1),(c&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(o(153));if(i.child!==null){for(t=i.child,c=ia(t,t.pendingProps),i.child=c,c.return=i;t.sibling!==null;)t=t.sibling,c=c.sibling=ia(t,t.pendingProps),c.return=i;c.sibling=null}return i.child}function Jd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&qu(t)))}function YA(t,i,c){switch(i.tag){case 3:at(i,i.stateNode.containerInfo),Ua(i,Tr,t.memoizedState.cache),Uo();break;case 27:case 5:mn(i);break;case 4:at(i,i.stateNode.containerInfo);break;case 10:Ua(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Td(i),null;break;case 13:var d=i.memoizedState;if(d!==null)return d.dehydrated!==null?(Ha(i),i.flags|=128,null):(c&i.child.childLanes)!==0?hp(t,i,c):(Ha(i),t=ua(t,i,c),t!==null?t.sibling:null);Ha(i);break;case 19:var E=(t.flags&128)!==0;if(d=(c&i.childLanes)!==0,d||(Al(t,i,c,!1),d=(c&i.childLanes)!==0),E){if(d)return dp(t,i,c);i.flags|=128}if(E=i.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),re(Er,Er.current),d)break;return null;case 22:return i.lanes=0,sp(t,i,c,i.pendingProps);case 24:Ua(i,Tr,t.memoizedState.cache)}return ua(t,i,c)}function gp(t,i,c){if(t!==null)if(t.memoizedProps!==i.pendingProps)vr=!0;else{if(!Jd(t,c)&&(i.flags&128)===0)return vr=!1,YA(t,i,c);vr=(t.flags&131072)!==0}else vr=!1,un&&(i.flags&1048576)!==0&&Xg(i,pc,i.index);switch(i.lanes=0,i.tag){case 16:e:{var d=i.pendingProps;if(t=Ho(i.elementType),i.type=t,typeof t=="function")rd(t)?(d=Yo(t,d),i.tag=1,i=cp(null,i,t,d,c)):(i.tag=0,i=qd(null,i,t,d,c));else{if(t!=null){var E=t.$$typeof;if(E===Be){i.tag=11,i=np(null,i,t,d,c);break e}else if(E===F){i.tag=14,i=rp(null,i,t,d,c);break e}}throw i=Qe(t)||t,Error(o(306,i,""))}}return i;case 0:return qd(t,i,i.type,i.pendingProps,c);case 1:return d=i.type,E=Yo(d,i.pendingProps),cp(t,i,d,E,c);case 3:e:{if(at(i,i.stateNode.containerInfo),t===null)throw Error(o(387));d=i.pendingProps;var w=i.memoizedState;E=w.element,Ed(t,i),bc(i,d,null,c);var R=i.memoizedState;if(d=R.cache,Ua(i,Tr,d),d!==w.cache&&fd(i,[Tr],c,!0),Tc(),d=R.element,w.isDehydrated)if(w={element:d,isDehydrated:!1,cache:R.cache},i.updateQueue.baseState=w,i.memoizedState=w,i.flags&256){i=up(t,i,d,c);break e}else if(d!==E){E=as(Error(o(424)),i),yc(E),i=up(t,i,d,c);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Xn=hs(t.firstChild),Kr=i,un=!0,Ba=null,cs=!0,c=sm(i,null,d,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Uo(),d===E){i=ua(t,i,c);break e}Zr(t,i,d,c)}i=i.child}return i;case 26:return uh(t,i),t===null?(c=v2(i.type,null,i.pendingProps,null))?i.memoizedState=c:un||(c=i.type,t=i.pendingProps,d=Sh(we.current).createElement(c),d[Un]=i,d[ln]=t,Jr(d,c,t),Zn(d),i.stateNode=d):i.memoizedState=v2(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return mn(i),t===null&&un&&(d=i.stateNode=w2(i.type,i.pendingProps,we.current),Kr=i,cs=!0,E=Xn,Ja(i.type)?(O0=E,Xn=hs(d.firstChild)):Xn=E),Zr(t,i,i.pendingProps.children,c),uh(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&un&&((E=d=Xn)&&(d=Tw(d,i.type,i.pendingProps,cs),d!==null?(i.stateNode=d,Kr=i,Xn=hs(d.firstChild),cs=!1,E=!0):E=!1),E||Va(i)),mn(i),E=i.type,w=i.pendingProps,R=t!==null?t.memoizedProps:null,d=w.children,C0(E,w)?d=null:R!==null&&C0(E,R)&&(i.flags|=32),i.memoizedState!==null&&(E=vd(t,i,VA,null,null,c),Gc._currentValue=E),uh(t,i),Zr(t,i,d,c),i.child;case 6:return t===null&&un&&((t=c=Xn)&&(c=bw(c,i.pendingProps,cs),c!==null?(i.stateNode=c,Kr=i,Xn=null,t=!0):t=!1),t||Va(i)),null;case 13:return hp(t,i,c);case 4:return at(i,i.stateNode.containerInfo),d=i.pendingProps,t===null?i.child=qo(i,null,d,c):Zr(t,i,d,c),i.child;case 11:return np(t,i,i.type,i.pendingProps,c);case 7:return Zr(t,i,i.pendingProps,c),i.child;case 8:return Zr(t,i,i.pendingProps.children,c),i.child;case 12:return Zr(t,i,i.pendingProps.children,c),i.child;case 10:return d=i.pendingProps,Ua(i,i.type,d.value),Zr(t,i,d.children,c),i.child;case 9:return E=i.type._context,d=i.pendingProps.children,zo(i),E=Qr(E),d=d(E),i.flags|=1,Zr(t,i,d,c),i.child;case 14:return rp(t,i,i.type,i.pendingProps,c);case 15:return ip(t,i,i.type,i.pendingProps,c);case 19:return dp(t,i,c);case 31:return XA(t,i,c);case 22:return sp(t,i,c,i.pendingProps);case 24:return zo(i),d=Qr(Tr),t===null?(E=md(),E===null&&(E=Vn,w=dd(),E.pooledCache=w,w.refCount++,w!==null&&(E.pooledCacheLanes|=c),E=w),i.memoizedState={parent:d,cache:E},yd(i),Ua(i,Tr,E)):((t.lanes&c)!==0&&(Ed(t,i),bc(i,null,null,c),Tc()),E=t.memoizedState,w=i.memoizedState,E.parent!==d?(E={parent:d,cache:d},i.memoizedState=E,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=E),Ua(i,Tr,d)):(d=w.cache,Ua(i,Tr,d),d!==E.cache&&fd(i,[Tr],c,!0))),Zr(t,i,i.pendingProps.children,c),i.child;case 29:throw i.pendingProps}throw Error(o(156,i.tag))}function ha(t){t.flags|=4}function $d(t,i,c,d,E){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(E&335544128)===E)if(t.stateNode.complete)t.flags|=8192;else if(zp())t.flags|=8192;else throw Go=Ku,pd}else t.flags&=-16777217}function mp(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!N2(i))if(zp())t.flags|=8192;else throw Go=Ku,pd}function fh(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?rr():536870912,t.lanes|=i,Ml|=i)}function Nc(t,i){if(!un)switch(t.tailMode){case"hidden":i=t.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?t.tail=null:c.sibling=null;break;case"collapsed":c=t.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:d.sibling=null}}function Yn(t){var i=t.alternate!==null&&t.alternate.child===t.child,c=0,d=0;if(i)for(var E=t.child;E!==null;)c|=E.lanes|E.childLanes,d|=E.subtreeFlags&65011712,d|=E.flags&65011712,E.return=t,E=E.sibling;else for(E=t.child;E!==null;)c|=E.lanes|E.childLanes,d|=E.subtreeFlags,d|=E.flags,E.return=t,E=E.sibling;return t.subtreeFlags|=d,t.childLanes=c,i}function WA(t,i,c){var d=i.pendingProps;switch(od(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yn(i),null;case 1:return Yn(i),null;case 3:return c=i.stateNode,d=null,t!==null&&(d=t.memoizedState.cache),i.memoizedState.cache!==d&&(i.flags|=2048),oa(Tr),wt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(_l(i)?ha(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,cd())),Yn(i),null;case 26:var E=i.type,w=i.memoizedState;return t===null?(ha(i),w!==null?(Yn(i),mp(i,w)):(Yn(i),$d(i,E,null,d,c))):w?w!==t.memoizedState?(ha(i),Yn(i),mp(i,w)):(Yn(i),i.flags&=-16777217):(t=t.memoizedProps,t!==d&&ha(i),Yn(i),$d(i,E,t,d,c)),null;case 27:if(zt(i),c=we.current,E=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==d&&ha(i);else{if(!d){if(i.stateNode===null)throw Error(o(166));return Yn(i),null}t=ye.current,_l(i)?Wg(i):(t=w2(E,d,c),i.stateNode=t,ha(i))}return Yn(i),null;case 5:if(zt(i),E=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==d&&ha(i);else{if(!d){if(i.stateNode===null)throw Error(o(166));return Yn(i),null}if(w=ye.current,_l(i))Wg(i);else{var R=Sh(we.current);switch(w){case 1:w=R.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:w=R.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":w=R.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":w=R.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":w=R.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof d.is=="string"?R.createElement("select",{is:d.is}):R.createElement("select"),d.multiple?w.multiple=!0:d.size&&(w.size=d.size);break;default:w=typeof d.is=="string"?R.createElement(E,{is:d.is}):R.createElement(E)}}w[Un]=i,w[ln]=d;e:for(R=i.child;R!==null;){if(R.tag===5||R.tag===6)w.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===i)break e;for(;R.sibling===null;){if(R.return===null||R.return===i)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}i.stateNode=w;e:switch(Jr(w,E,d),E){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&ha(i)}}return Yn(i),$d(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,c),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==d&&ha(i);else{if(typeof d!="string"&&i.stateNode===null)throw Error(o(166));if(t=we.current,_l(i)){if(t=i.stateNode,c=i.memoizedProps,d=null,E=Kr,E!==null)switch(E.tag){case 27:case 5:d=E.memoizedProps}t[Un]=i,t=!!(t.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||h2(t.nodeValue,c)),t||Va(i,!0)}else t=Sh(t).createTextNode(d),t[Un]=i,i.stateNode=t}return Yn(i),null;case 31:if(c=i.memoizedState,t===null||t.memoizedState!==null){if(d=_l(i),c!==null){if(t===null){if(!d)throw Error(o(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[Un]=i}else Uo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Yn(i),t=!1}else c=cd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),t=!0;if(!t)return i.flags&256?(Xi(i),i):(Xi(i),null);if((i.flags&128)!==0)throw Error(o(558))}return Yn(i),null;case 13:if(d=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(E=_l(i),d!==null&&d.dehydrated!==null){if(t===null){if(!E)throw Error(o(318));if(E=i.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(o(317));E[Un]=i}else Uo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Yn(i),E=!1}else E=cd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=E),E=!0;if(!E)return i.flags&256?(Xi(i),i):(Xi(i),null)}return Xi(i),(i.flags&128)!==0?(i.lanes=c,i):(c=d!==null,t=t!==null&&t.memoizedState!==null,c&&(d=i.child,E=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(E=d.alternate.memoizedState.cachePool.pool),w=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(w=d.memoizedState.cachePool.pool),w!==E&&(d.flags|=2048)),c!==t&&c&&(i.child.flags|=8192),fh(i,i.updateQueue),Yn(i),null);case 4:return wt(),t===null&&A0(i.stateNode.containerInfo),Yn(i),null;case 10:return oa(i.type),Yn(i),null;case 19:if(ae(Er),d=i.memoizedState,d===null)return Yn(i),null;if(E=(i.flags&128)!==0,w=d.rendering,w===null)if(E)Nc(d,!1);else{if(fr!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(w=$u(t),w!==null){for(i.flags|=128,Nc(d,!1),t=w.updateQueue,i.updateQueue=t,fh(i,t),i.subtreeFlags=0,t=c,c=i.child;c!==null;)Hg(c,t),c=c.sibling;return re(Er,Er.current&1|2),un&&sa(i,d.treeForkCount),i.child}t=t.sibling}d.tail!==null&&pn()>yh&&(i.flags|=128,E=!0,Nc(d,!1),i.lanes=4194304)}else{if(!E)if(t=$u(w),t!==null){if(i.flags|=128,E=!0,t=t.updateQueue,i.updateQueue=t,fh(i,t),Nc(d,!0),d.tail===null&&d.tailMode==="hidden"&&!w.alternate&&!un)return Yn(i),null}else 2*pn()-d.renderingStartTime>yh&&c!==536870912&&(i.flags|=128,E=!0,Nc(d,!1),i.lanes=4194304);d.isBackwards?(w.sibling=i.child,i.child=w):(t=d.last,t!==null?t.sibling=w:i.child=w,d.last=w)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=pn(),t.sibling=null,c=Er.current,re(Er,E?c&1|2:c&1),un&&sa(i,d.treeForkCount),t):(Yn(i),null);case 22:case 23:return Xi(i),wd(),d=i.memoizedState!==null,t!==null?t.memoizedState!==null!==d&&(i.flags|=8192):d&&(i.flags|=8192),d?(c&536870912)!==0&&(i.flags&128)===0&&(Yn(i),i.subtreeFlags&6&&(i.flags|=8192)):Yn(i),c=i.updateQueue,c!==null&&fh(i,c.retryQueue),c=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),d=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),d!==c&&(i.flags|=2048),t!==null&&ae(jo),null;case 24:return c=null,t!==null&&(c=t.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),oa(Tr),Yn(i),null;case 25:return null;case 30:return null}throw Error(o(156,i.tag))}function KA(t,i){switch(od(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return oa(Tr),wt(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return zt(i),null;case 31:if(i.memoizedState!==null){if(Xi(i),i.alternate===null)throw Error(o(340));Uo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(Xi(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(o(340));Uo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ae(Er),null;case 4:return wt(),null;case 10:return oa(i.type),null;case 22:case 23:return Xi(i),wd(),t!==null&&ae(jo),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return oa(Tr),null;case 25:return null;default:return null}}function pp(t,i){switch(od(i),i.tag){case 3:oa(Tr),wt();break;case 26:case 27:case 5:zt(i);break;case 4:wt();break;case 31:i.memoizedState!==null&&Xi(i);break;case 13:Xi(i);break;case 19:ae(Er);break;case 10:oa(i.type);break;case 22:case 23:Xi(i),wd(),t!==null&&ae(jo);break;case 24:oa(Tr)}}function Oc(t,i){try{var c=i.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var E=d.next;c=E;do{if((c.tag&t)===t){d=void 0;var w=c.create,R=c.inst;d=w(),R.destroy=d}c=c.next}while(c!==E)}}catch(P){In(i,i.return,P)}}function qa(t,i,c){try{var d=i.updateQueue,E=d!==null?d.lastEffect:null;if(E!==null){var w=E.next;d=w;do{if((d.tag&t)===t){var R=d.inst,P=R.destroy;if(P!==void 0){R.destroy=void 0,E=i;var K=c,fe=P;try{fe()}catch(be){In(E,K,be)}}}d=d.next}while(d!==w)}}catch(be){In(i,i.return,be)}}function yp(t){var i=t.updateQueue;if(i!==null){var c=t.stateNode;try{om(i,c)}catch(d){In(t,t.return,d)}}}function Ep(t,i,c){c.props=Yo(t.type,t.memoizedProps),c.state=t.memoizedState;try{c.componentWillUnmount()}catch(d){In(t,i,d)}}function Dc(t,i){try{var c=t.ref;if(c!==null){switch(t.tag){case 26:case 27:case 5:var d=t.stateNode;break;case 30:d=t.stateNode;break;default:d=t.stateNode}typeof c=="function"?t.refCleanup=c(d):c.current=d}}catch(E){In(t,i,E)}}function ks(t,i){var c=t.ref,d=t.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(E){In(t,i,E)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(E){In(t,i,E)}else c.current=null}function xp(t){var i=t.type,c=t.memoizedProps,d=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(E){In(t,t.return,E)}}function e0(t,i,c){try{var d=t.stateNode;yw(d,t.type,c,i),d[ln]=i}catch(E){In(t,t.return,E)}}function _p(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ja(t.type)||t.tag===4}function t0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_p(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ja(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function n0(t,i,c){var d=t.tag;if(d===5||d===6)t=t.stateNode,i?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(t,i):(i=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,i.appendChild(t),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=ai));else if(d!==4&&(d===27&&Ja(t.type)&&(c=t.stateNode,i=null),t=t.child,t!==null))for(n0(t,i,c),t=t.sibling;t!==null;)n0(t,i,c),t=t.sibling}function dh(t,i,c){var d=t.tag;if(d===5||d===6)t=t.stateNode,i?c.insertBefore(t,i):c.appendChild(t);else if(d!==4&&(d===27&&Ja(t.type)&&(c=t.stateNode),t=t.child,t!==null))for(dh(t,i,c),t=t.sibling;t!==null;)dh(t,i,c),t=t.sibling}function Ap(t){var i=t.stateNode,c=t.memoizedProps;try{for(var d=t.type,E=i.attributes;E.length;)i.removeAttributeNode(E[0]);Jr(i,d,c),i[Un]=t,i[ln]=c}catch(w){In(t,t.return,w)}}var fa=!1,Cr=!1,r0=!1,wp=typeof WeakSet=="function"?WeakSet:Set,Fr=null;function QA(t,i){if(t=t.containerInfo,b0=Lh,t=M(t),L(t)){if("selectionStart"in t)var c={start:t.selectionStart,end:t.selectionEnd};else e:{c=(c=t.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var E=d.anchorOffset,w=d.focusNode;d=d.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var R=0,P=-1,K=-1,fe=0,be=0,Re=t,ge=null;t:for(;;){for(var _e;Re!==c||E!==0&&Re.nodeType!==3||(P=R+E),Re!==w||d!==0&&Re.nodeType!==3||(K=R+d),Re.nodeType===3&&(R+=Re.nodeValue.length),(_e=Re.firstChild)!==null;)ge=Re,Re=_e;for(;;){if(Re===t)break t;if(ge===c&&++fe===E&&(P=R),ge===w&&++be===d&&(K=R),(_e=Re.nextSibling)!==null)break;Re=ge,ge=Re.parentNode}Re=_e}c=P===-1||K===-1?null:{start:P,end:K}}else c=null}c=c||{start:0,end:0}}else c=null;for(v0={focusedElem:t,selectionRange:c},Lh=!1,Fr=i;Fr!==null;)if(i=Fr,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Fr=t;else for(;Fr!==null;){switch(i=Fr,w=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(c=0;c<t.length;c++)E=t[c],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&w!==null){t=void 0,c=i,E=w.memoizedProps,w=w.memoizedState,d=c.stateNode;try{var st=Yo(c.type,E);t=d.getSnapshotBeforeUpdate(st,w),d.__reactInternalSnapshotBeforeUpdate=t}catch(At){In(c,c.return,At)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,c=t.nodeType,c===9)I0(t);else if(c===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":I0(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=i.sibling,t!==null){t.return=i.return,Fr=t;break}Fr=i.return}}function Tp(t,i,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:ga(t,c),d&4&&Oc(5,c);break;case 1:if(ga(t,c),d&4)if(t=c.stateNode,i===null)try{t.componentDidMount()}catch(R){In(c,c.return,R)}else{var E=Yo(c.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(E,i,t.__reactInternalSnapshotBeforeUpdate)}catch(R){In(c,c.return,R)}}d&64&&yp(c),d&512&&Dc(c,c.return);break;case 3:if(ga(t,c),d&64&&(t=c.updateQueue,t!==null)){if(i=null,c.child!==null)switch(c.child.tag){case 27:case 5:i=c.child.stateNode;break;case 1:i=c.child.stateNode}try{om(t,i)}catch(R){In(c,c.return,R)}}break;case 27:i===null&&d&4&&Ap(c);case 26:case 5:ga(t,c),i===null&&d&4&&xp(c),d&512&&Dc(c,c.return);break;case 12:ga(t,c);break;case 31:ga(t,c),d&4&&Cp(t,c);break;case 13:ga(t,c),d&4&&Sp(t,c),d&64&&(t=c.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(c=sw.bind(null,c),vw(t,c))));break;case 22:if(d=c.memoizedState!==null||fa,!d){i=i!==null&&i.memoizedState!==null||Cr,E=fa;var w=Cr;fa=d,(Cr=i)&&!w?ma(t,c,(c.subtreeFlags&8772)!==0):ga(t,c),fa=E,Cr=w}break;case 30:break;default:ga(t,c)}}function bp(t){var i=t.alternate;i!==null&&(t.alternate=null,bp(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Dn(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var nr=null,Oi=!1;function da(t,i,c){for(c=c.child;c!==null;)vp(t,i,c),c=c.sibling}function vp(t,i,c){if(ve&&typeof ve.onCommitFiberUnmount=="function")try{ve.onCommitFiberUnmount(Ze,c)}catch{}switch(c.tag){case 26:Cr||ks(c,i),da(t,i,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Cr||ks(c,i);var d=nr,E=Oi;Ja(c.type)&&(nr=c.stateNode,Oi=!1),da(t,i,c),zc(c.stateNode),nr=d,Oi=E;break;case 5:Cr||ks(c,i);case 6:if(d=nr,E=Oi,nr=null,da(t,i,c),nr=d,Oi=E,nr!==null)if(Oi)try{(nr.nodeType===9?nr.body:nr.nodeName==="HTML"?nr.ownerDocument.body:nr).removeChild(c.stateNode)}catch(w){In(c,i,w)}else try{nr.removeChild(c.stateNode)}catch(w){In(c,i,w)}break;case 18:nr!==null&&(Oi?(t=nr,y2(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,c.stateNode),zl(t)):y2(nr,c.stateNode));break;case 4:d=nr,E=Oi,nr=c.stateNode.containerInfo,Oi=!0,da(t,i,c),nr=d,Oi=E;break;case 0:case 11:case 14:case 15:qa(2,c,i),Cr||qa(4,c,i),da(t,i,c);break;case 1:Cr||(ks(c,i),d=c.stateNode,typeof d.componentWillUnmount=="function"&&Ep(c,i,d)),da(t,i,c);break;case 21:da(t,i,c);break;case 22:Cr=(d=Cr)||c.memoizedState!==null,da(t,i,c),Cr=d;break;default:da(t,i,c)}}function Cp(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{zl(t)}catch(c){In(i,i.return,c)}}}function Sp(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{zl(t)}catch(c){In(i,i.return,c)}}function ZA(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new wp),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new wp),i;default:throw Error(o(435,t.tag))}}function gh(t,i){var c=ZA(t);i.forEach(function(d){if(!c.has(d)){c.add(d);var E=aw.bind(null,t,d);d.then(E,E)}})}function Di(t,i){var c=i.deletions;if(c!==null)for(var d=0;d<c.length;d++){var E=c[d],w=t,R=i,P=R;e:for(;P!==null;){switch(P.tag){case 27:if(Ja(P.type)){nr=P.stateNode,Oi=!1;break e}break;case 5:nr=P.stateNode,Oi=!1;break e;case 3:case 4:nr=P.stateNode.containerInfo,Oi=!0;break e}P=P.return}if(nr===null)throw Error(o(160));vp(w,R,E),nr=null,Oi=!1,w=E.alternate,w!==null&&(w.return=null),E.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Ip(i,t),i=i.sibling}var ws=null;function Ip(t,i){var c=t.alternate,d=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Di(i,t),Mi(t),d&4&&(qa(3,t,t.return),Oc(3,t),qa(5,t,t.return));break;case 1:Di(i,t),Mi(t),d&512&&(Cr||c===null||ks(c,c.return)),d&64&&fa&&(t=t.updateQueue,t!==null&&(d=t.callbacks,d!==null&&(c=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var E=ws;if(Di(i,t),Mi(t),d&512&&(Cr||c===null||ks(c,c.return)),d&4){var w=c!==null?c.memoizedState:null;if(d=t.memoizedState,c===null)if(d===null)if(t.stateNode===null){e:{d=t.type,c=t.memoizedProps,E=E.ownerDocument||E;t:switch(d){case"title":w=E.getElementsByTagName("title")[0],(!w||w[jt]||w[Un]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=E.createElement(d),E.head.insertBefore(w,E.querySelector("head > title"))),Jr(w,d,c),w[Un]=t,Zn(w),d=w;break e;case"link":var R=I2("link","href",E).get(d+(c.href||""));if(R){for(var P=0;P<R.length;P++)if(w=R[P],w.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&w.getAttribute("rel")===(c.rel==null?null:c.rel)&&w.getAttribute("title")===(c.title==null?null:c.title)&&w.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){R.splice(P,1);break t}}w=E.createElement(d),Jr(w,d,c),E.head.appendChild(w);break;case"meta":if(R=I2("meta","content",E).get(d+(c.content||""))){for(P=0;P<R.length;P++)if(w=R[P],w.getAttribute("content")===(c.content==null?null:""+c.content)&&w.getAttribute("name")===(c.name==null?null:c.name)&&w.getAttribute("property")===(c.property==null?null:c.property)&&w.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&w.getAttribute("charset")===(c.charSet==null?null:c.charSet)){R.splice(P,1);break t}}w=E.createElement(d),Jr(w,d,c),E.head.appendChild(w);break;default:throw Error(o(468,d))}w[Un]=t,Zn(w),d=w}t.stateNode=d}else R2(E,t.type,t.stateNode);else t.stateNode=S2(E,d,t.memoizedProps);else w!==d?(w===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):w.count--,d===null?R2(E,t.type,t.stateNode):S2(E,d,t.memoizedProps)):d===null&&t.stateNode!==null&&e0(t,t.memoizedProps,c.memoizedProps)}break;case 27:Di(i,t),Mi(t),d&512&&(Cr||c===null||ks(c,c.return)),c!==null&&d&4&&e0(t,t.memoizedProps,c.memoizedProps);break;case 5:if(Di(i,t),Mi(t),d&512&&(Cr||c===null||ks(c,c.return)),t.flags&32){E=t.stateNode;try{si(E,"")}catch(st){In(t,t.return,st)}}d&4&&t.stateNode!=null&&(E=t.memoizedProps,e0(t,E,c!==null?c.memoizedProps:E)),d&1024&&(r0=!0);break;case 6:if(Di(i,t),Mi(t),d&4){if(t.stateNode===null)throw Error(o(162));d=t.memoizedProps,c=t.stateNode;try{c.nodeValue=d}catch(st){In(t,t.return,st)}}break;case 3:if(Nh=null,E=ws,ws=Ih(i.containerInfo),Di(i,t),ws=E,Mi(t),d&4&&c!==null&&c.memoizedState.isDehydrated)try{zl(i.containerInfo)}catch(st){In(t,t.return,st)}r0&&(r0=!1,Rp(t));break;case 4:d=ws,ws=Ih(t.stateNode.containerInfo),Di(i,t),Mi(t),ws=d;break;case 12:Di(i,t),Mi(t);break;case 31:Di(i,t),Mi(t),d&4&&(d=t.updateQueue,d!==null&&(t.updateQueue=null,gh(t,d)));break;case 13:Di(i,t),Mi(t),t.child.flags&8192&&t.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(ph=pn()),d&4&&(d=t.updateQueue,d!==null&&(t.updateQueue=null,gh(t,d)));break;case 22:E=t.memoizedState!==null;var K=c!==null&&c.memoizedState!==null,fe=fa,be=Cr;if(fa=fe||E,Cr=be||K,Di(i,t),Cr=be,fa=fe,Mi(t),d&8192)e:for(i=t.stateNode,i._visibility=E?i._visibility&-2:i._visibility|1,E&&(c===null||K||fa||Cr||Wo(t)),c=null,i=t;;){if(i.tag===5||i.tag===26){if(c===null){K=c=i;try{if(w=K.stateNode,E)R=w.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{P=K.stateNode;var Re=K.memoizedProps.style,ge=Re!=null&&Re.hasOwnProperty("display")?Re.display:null;P.style.display=ge==null||typeof ge=="boolean"?"":(""+ge).trim()}}catch(st){In(K,K.return,st)}}}else if(i.tag===6){if(c===null){K=i;try{K.stateNode.nodeValue=E?"":K.memoizedProps}catch(st){In(K,K.return,st)}}}else if(i.tag===18){if(c===null){K=i;try{var _e=K.stateNode;E?E2(_e,!0):E2(K.stateNode,!1)}catch(st){In(K,K.return,st)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;c===i&&(c=null),i=i.return}c===i&&(c=null),i.sibling.return=i.return,i=i.sibling}d&4&&(d=t.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,gh(t,c))));break;case 19:Di(i,t),Mi(t),d&4&&(d=t.updateQueue,d!==null&&(t.updateQueue=null,gh(t,d)));break;case 30:break;case 21:break;default:Di(i,t),Mi(t)}}function Mi(t){var i=t.flags;if(i&2){try{for(var c,d=t.return;d!==null;){if(_p(d)){c=d;break}d=d.return}if(c==null)throw Error(o(160));switch(c.tag){case 27:var E=c.stateNode,w=t0(t);dh(t,w,E);break;case 5:var R=c.stateNode;c.flags&32&&(si(R,""),c.flags&=-33);var P=t0(t);dh(t,P,R);break;case 3:case 4:var K=c.stateNode.containerInfo,fe=t0(t);n0(t,fe,K);break;default:throw Error(o(161))}}catch(be){In(t,t.return,be)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Rp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Rp(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function ga(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Tp(t,i.alternate,i),i=i.sibling}function Wo(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:qa(4,i,i.return),Wo(i);break;case 1:ks(i,i.return);var c=i.stateNode;typeof c.componentWillUnmount=="function"&&Ep(i,i.return,c),Wo(i);break;case 27:zc(i.stateNode);case 26:case 5:ks(i,i.return),Wo(i);break;case 22:i.memoizedState===null&&Wo(i);break;case 30:Wo(i);break;default:Wo(i)}t=t.sibling}}function ma(t,i,c){for(c=c&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var d=i.alternate,E=t,w=i,R=w.flags;switch(w.tag){case 0:case 11:case 15:ma(E,w,c),Oc(4,w);break;case 1:if(ma(E,w,c),d=w,E=d.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(fe){In(d,d.return,fe)}if(d=w,E=d.updateQueue,E!==null){var P=d.stateNode;try{var K=E.shared.hiddenCallbacks;if(K!==null)for(E.shared.hiddenCallbacks=null,E=0;E<K.length;E++)am(K[E],P)}catch(fe){In(d,d.return,fe)}}c&&R&64&&yp(w),Dc(w,w.return);break;case 27:Ap(w);case 26:case 5:ma(E,w,c),c&&d===null&&R&4&&xp(w),Dc(w,w.return);break;case 12:ma(E,w,c);break;case 31:ma(E,w,c),c&&R&4&&Cp(E,w);break;case 13:ma(E,w,c),c&&R&4&&Sp(E,w);break;case 22:w.memoizedState===null&&ma(E,w,c),Dc(w,w.return);break;case 30:break;default:ma(E,w,c)}i=i.sibling}}function i0(t,i){var c=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==c&&(t!=null&&t.refCount++,c!=null&&Ec(c))}function s0(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Ec(t))}function Ts(t,i,c,d){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Np(t,i,c,d),i=i.sibling}function Np(t,i,c,d){var E=i.flags;switch(i.tag){case 0:case 11:case 15:Ts(t,i,c,d),E&2048&&Oc(9,i);break;case 1:Ts(t,i,c,d);break;case 3:Ts(t,i,c,d),E&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Ec(t)));break;case 12:if(E&2048){Ts(t,i,c,d),t=i.stateNode;try{var w=i.memoizedProps,R=w.id,P=w.onPostCommit;typeof P=="function"&&P(R,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(K){In(i,i.return,K)}}else Ts(t,i,c,d);break;case 31:Ts(t,i,c,d);break;case 13:Ts(t,i,c,d);break;case 23:break;case 22:w=i.stateNode,R=i.alternate,i.memoizedState!==null?w._visibility&2?Ts(t,i,c,d):Mc(t,i):w._visibility&2?Ts(t,i,c,d):(w._visibility|=2,Nl(t,i,c,d,(i.subtreeFlags&10256)!==0||!1)),E&2048&&i0(R,i);break;case 24:Ts(t,i,c,d),E&2048&&s0(i.alternate,i);break;default:Ts(t,i,c,d)}}function Nl(t,i,c,d,E){for(E=E&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var w=t,R=i,P=c,K=d,fe=R.flags;switch(R.tag){case 0:case 11:case 15:Nl(w,R,P,K,E),Oc(8,R);break;case 23:break;case 22:var be=R.stateNode;R.memoizedState!==null?be._visibility&2?Nl(w,R,P,K,E):Mc(w,R):(be._visibility|=2,Nl(w,R,P,K,E)),E&&fe&2048&&i0(R.alternate,R);break;case 24:Nl(w,R,P,K,E),E&&fe&2048&&s0(R.alternate,R);break;default:Nl(w,R,P,K,E)}i=i.sibling}}function Mc(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var c=t,d=i,E=d.flags;switch(d.tag){case 22:Mc(c,d),E&2048&&i0(d.alternate,d);break;case 24:Mc(c,d),E&2048&&s0(d.alternate,d);break;default:Mc(c,d)}i=i.sibling}}var Lc=8192;function Ol(t,i,c){if(t.subtreeFlags&Lc)for(t=t.child;t!==null;)Op(t,i,c),t=t.sibling}function Op(t,i,c){switch(t.tag){case 26:Ol(t,i,c),t.flags&Lc&&t.memoizedState!==null&&Bw(c,ws,t.memoizedState,t.memoizedProps);break;case 5:Ol(t,i,c);break;case 3:case 4:var d=ws;ws=Ih(t.stateNode.containerInfo),Ol(t,i,c),ws=d;break;case 22:t.memoizedState===null&&(d=t.alternate,d!==null&&d.memoizedState!==null?(d=Lc,Lc=16777216,Ol(t,i,c),Lc=d):Ol(t,i,c));break;default:Ol(t,i,c)}}function Dp(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function kc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var d=i[c];Fr=d,Lp(d,t)}Dp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Mp(t),t=t.sibling}function Mp(t){switch(t.tag){case 0:case 11:case 15:kc(t),t.flags&2048&&qa(9,t,t.return);break;case 3:kc(t);break;case 12:kc(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,mh(t)):kc(t);break;default:kc(t)}}function mh(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var d=i[c];Fr=d,Lp(d,t)}Dp(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:qa(8,i,i.return),mh(i);break;case 22:c=i.stateNode,c._visibility&2&&(c._visibility&=-3,mh(i));break;default:mh(i)}t=t.sibling}}function Lp(t,i){for(;Fr!==null;){var c=Fr;switch(c.tag){case 0:case 11:case 15:qa(8,c,i);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Ec(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,Fr=d;else e:for(c=t;Fr!==null;){d=Fr;var E=d.sibling,w=d.return;if(bp(d),d===c){Fr=null;break e}if(E!==null){E.return=w,Fr=E;break e}Fr=w}}}var JA={getCacheForType:function(t){var i=Qr(Tr),c=i.data.get(t);return c===void 0&&(c=t(),i.data.set(t,c)),c},cacheSignal:function(){return Qr(Tr).controller.signal}},$A=typeof WeakMap=="function"?WeakMap:Map,An=0,Vn=null,Zt=null,nn=0,Sn=0,Yi=null,Xa=!1,Dl=!1,a0=!1,pa=0,fr=0,Ya=0,Ko=0,o0=0,Wi=0,Ml=0,Pc=null,Li=null,l0=!1,ph=0,kp=0,yh=1/0,Eh=null,Wa=null,Pr=0,Ka=null,Ll=null,ya=0,c0=0,u0=null,Pp=null,Bc=0,h0=null;function Ki(){return(An&2)!==0&&nn!==0?nn&-nn:ue.T!==null?y0():Lr()}function Bp(){if(Wi===0)if((nn&536870912)===0||un){var t=It;It<<=1,(It&3932160)===0&&(It=262144),Wi=t}else Wi=536870912;return t=qi.current,t!==null&&(t.flags|=32),Wi}function ki(t,i,c){(t===Vn&&(Sn===2||Sn===9)||t.cancelPendingCommit!==null)&&(kl(t,0),Qa(t,nn,Wi,!1)),vi(t,c),((An&2)===0||t!==Vn)&&(t===Vn&&((An&2)===0&&(Ko|=c),fr===4&&Qa(t,nn,Wi,!1)),Ps(t))}function Vp(t,i,c){if((An&6)!==0)throw Error(o(327));var d=!c&&(i&127)===0&&(i&t.expiredLanes)===0||Hn(t,i),E=d?nw(t,i):d0(t,i,!0),w=d;do{if(E===0){Dl&&!d&&Qa(t,i,0,!1);break}else{if(c=t.current.alternate,w&&!ew(c)){E=d0(t,i,!1),w=!1;continue}if(E===2){if(w=i,t.errorRecoveryDisabledLanes&w)var R=0;else R=t.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){i=R;e:{var P=t;E=Pc;var K=P.current.memoizedState.isDehydrated;if(K&&(kl(P,R).flags|=256),R=d0(P,R,!1),R!==2){if(a0&&!K){P.errorRecoveryDisabledLanes|=w,Ko|=w,E=4;break e}w=Li,Li=E,w!==null&&(Li===null?Li=w:Li.push.apply(Li,w))}E=R}if(w=!1,E!==2)continue}}if(E===1){kl(t,0),Qa(t,i,0,!0);break}e:{switch(d=t,w=E,w){case 0:case 1:throw Error(o(345));case 4:if((i&4194048)!==i)break;case 6:Qa(d,i,Wi,!Xa);break e;case 2:Li=null;break;case 3:case 5:break;default:throw Error(o(329))}if((i&62914560)===i&&(E=ph+300-pn(),10<E)){if(Qa(d,i,Wi,!Xa),Gr(d,0,!0)!==0)break e;ya=i,d.timeoutHandle=m2(Up.bind(null,d,c,Li,Eh,l0,i,Wi,Ko,Ml,Xa,w,"Throttled",-0,0),E);break e}Up(d,c,Li,Eh,l0,i,Wi,Ko,Ml,Xa,w,null,-0,0)}}break}while(!0);Ps(t)}function Up(t,i,c,d,E,w,R,P,K,fe,be,Re,ge,_e){if(t.timeoutHandle=-1,Re=i.subtreeFlags,Re&8192||(Re&16785408)===16785408){Re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ai},Op(i,w,Re);var st=(w&62914560)===w?ph-pn():(w&4194048)===w?kp-pn():0;if(st=Vw(Re,st),st!==null){ya=w,t.cancelPendingCommit=st(Yp.bind(null,t,i,w,c,d,E,R,P,K,be,Re,null,ge,_e)),Qa(t,w,R,!fe);return}}Yp(t,i,w,c,d,E,R,P,K)}function ew(t){for(var i=t;;){var c=i.tag;if((c===0||c===11||c===15)&&i.flags&16384&&(c=i.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var E=c[d],w=E.getSnapshot;E=E.value;try{if(!g(w(),E))return!1}catch{return!1}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Qa(t,i,c,d){i&=~o0,i&=~Ko,t.suspendedLanes|=i,t.pingedLanes&=~i,d&&(t.warmLanes|=i),d=t.expirationTimes;for(var E=i;0<E;){var w=31-lt(E),R=1<<w;d[w]=-1,E&=~R}c!==0&&ps(t,c,i)}function xh(){return(An&6)===0?(Vc(0),!1):!0}function f0(){if(Zt!==null){if(Sn===0)var t=Zt.return;else t=Zt,aa=Fo=null,Id(t),vl=null,_c=0,t=Zt;for(;t!==null;)pp(t.alternate,t),t=t.return;Zt=null}}function kl(t,i){var c=t.timeoutHandle;c!==-1&&(t.timeoutHandle=-1,_w(c)),c=t.cancelPendingCommit,c!==null&&(t.cancelPendingCommit=null,c()),ya=0,f0(),Vn=t,Zt=c=ia(t.current,null),nn=i,Sn=0,Yi=null,Xa=!1,Dl=Hn(t,i),a0=!1,Ml=Wi=o0=Ko=Ya=fr=0,Li=Pc=null,l0=!1,(i&8)!==0&&(i|=i&32);var d=t.entangledLanes;if(d!==0)for(t=t.entanglements,d&=i;0<d;){var E=31-lt(d),w=1<<E;i|=t[E],d&=~w}return pa=i,Fu(),c}function Fp(t,i){Bt=null,ue.H=Ic,i===bl||i===Wu?(i=nm(),Sn=3):i===pd?(i=nm(),Sn=4):Sn=i===Gd?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Yi=i,Zt===null&&(fr=1,lh(t,as(i,t.current)))}function zp(){var t=qi.current;return t===null?!0:(nn&4194048)===nn?us===null:(nn&62914560)===nn||(nn&536870912)!==0?t===us:!1}function jp(){var t=ue.H;return ue.H=Ic,t===null?Ic:t}function Hp(){var t=ue.A;return ue.A=JA,t}function _h(){fr=4,Xa||(nn&4194048)!==nn&&qi.current!==null||(Dl=!0),(Ya&134217727)===0&&(Ko&134217727)===0||Vn===null||Qa(Vn,nn,Wi,!1)}function d0(t,i,c){var d=An;An|=2;var E=jp(),w=Hp();(Vn!==t||nn!==i)&&(Eh=null,kl(t,i)),i=!1;var R=fr;e:do try{if(Sn!==0&&Zt!==null){var P=Zt,K=Yi;switch(Sn){case 8:f0(),R=6;break e;case 3:case 2:case 9:case 6:qi.current===null&&(i=!0);var fe=Sn;if(Sn=0,Yi=null,Pl(t,P,K,fe),c&&Dl){R=0;break e}break;default:fe=Sn,Sn=0,Yi=null,Pl(t,P,K,fe)}}tw(),R=fr;break}catch(be){Fp(t,be)}while(!0);return i&&t.shellSuspendCounter++,aa=Fo=null,An=d,ue.H=E,ue.A=w,Zt===null&&(Vn=null,nn=0,Fu()),R}function tw(){for(;Zt!==null;)Gp(Zt)}function nw(t,i){var c=An;An|=2;var d=jp(),E=Hp();Vn!==t||nn!==i?(Eh=null,yh=pn()+500,kl(t,i)):Dl=Hn(t,i);e:do try{if(Sn!==0&&Zt!==null){i=Zt;var w=Yi;t:switch(Sn){case 1:Sn=0,Yi=null,Pl(t,i,w,1);break;case 2:case 9:if(em(w)){Sn=0,Yi=null,qp(i);break}i=function(){Sn!==2&&Sn!==9||Vn!==t||(Sn=7),Ps(t)},w.then(i,i);break e;case 3:Sn=7;break e;case 4:Sn=5;break e;case 7:em(w)?(Sn=0,Yi=null,qp(i)):(Sn=0,Yi=null,Pl(t,i,w,7));break;case 5:var R=null;switch(Zt.tag){case 26:R=Zt.memoizedState;case 5:case 27:var P=Zt;if(R?N2(R):P.stateNode.complete){Sn=0,Yi=null;var K=P.sibling;if(K!==null)Zt=K;else{var fe=P.return;fe!==null?(Zt=fe,Ah(fe)):Zt=null}break t}}Sn=0,Yi=null,Pl(t,i,w,5);break;case 6:Sn=0,Yi=null,Pl(t,i,w,6);break;case 8:f0(),fr=6;break e;default:throw Error(o(462))}}rw();break}catch(be){Fp(t,be)}while(!0);return aa=Fo=null,ue.H=d,ue.A=E,An=c,Zt!==null?0:(Vn=null,nn=0,Fu(),fr)}function rw(){for(;Zt!==null&&!jr();)Gp(Zt)}function Gp(t){var i=gp(t.alternate,t,pa);t.memoizedProps=t.pendingProps,i===null?Ah(t):Zt=i}function qp(t){var i=t,c=i.alternate;switch(i.tag){case 15:case 0:i=lp(c,i,i.pendingProps,i.type,void 0,nn);break;case 11:i=lp(c,i,i.pendingProps,i.type.render,i.ref,nn);break;case 5:Id(i);default:pp(c,i),i=Zt=Hg(i,pa),i=gp(c,i,pa)}t.memoizedProps=t.pendingProps,i===null?Ah(t):Zt=i}function Pl(t,i,c,d){aa=Fo=null,Id(i),vl=null,_c=0;var E=i.return;try{if(qA(t,E,i,c,nn)){fr=1,lh(t,as(c,t.current)),Zt=null;return}}catch(w){if(E!==null)throw Zt=E,w;fr=1,lh(t,as(c,t.current)),Zt=null;return}i.flags&32768?(un||d===1?t=!0:Dl||(nn&536870912)!==0?t=!1:(Xa=t=!0,(d===2||d===9||d===3||d===6)&&(d=qi.current,d!==null&&d.tag===13&&(d.flags|=16384))),Xp(i,t)):Ah(i)}function Ah(t){var i=t;do{if((i.flags&32768)!==0){Xp(i,Xa);return}t=i.return;var c=WA(i.alternate,i,pa);if(c!==null){Zt=c;return}if(i=i.sibling,i!==null){Zt=i;return}Zt=i=t}while(i!==null);fr===0&&(fr=5)}function Xp(t,i){do{var c=KA(t.alternate,t);if(c!==null){c.flags&=32767,Zt=c;return}if(c=t.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!i&&(t=t.sibling,t!==null)){Zt=t;return}Zt=t=c}while(t!==null);fr=6,Zt=null}function Yp(t,i,c,d,E,w,R,P,K){t.cancelPendingCommit=null;do wh();while(Pr!==0);if((An&6)!==0)throw Error(o(327));if(i!==null){if(i===t.current)throw Error(o(177));if(w=i.lanes|i.childLanes,w|=td,ri(t,c,w,R,P,K),t===Vn&&(Zt=Vn=null,nn=0),Ll=i,Ka=t,ya=c,c0=w,u0=E,Pp=d,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,ow(Je,function(){return Jp(),null})):(t.callbackNode=null,t.callbackPriority=0),d=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||d){d=ue.T,ue.T=null,E=Ae.p,Ae.p=2,R=An,An|=4;try{QA(t,i,c)}finally{An=R,Ae.p=E,ue.T=d}}Pr=1,Wp(),Kp(),Qp()}}function Wp(){if(Pr===1){Pr=0;var t=Ka,i=Ll,c=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||c){c=ue.T,ue.T=null;var d=Ae.p;Ae.p=2;var E=An;An|=4;try{Ip(i,t);var w=v0,R=M(t.containerInfo),P=w.focusedElem,K=w.selectionRange;if(R!==P&&P&&P.ownerDocument&&I(P.ownerDocument.documentElement,P)){if(K!==null&&L(P)){var fe=K.start,be=K.end;if(be===void 0&&(be=fe),"selectionStart"in P)P.selectionStart=fe,P.selectionEnd=Math.min(be,P.value.length);else{var Re=P.ownerDocument||document,ge=Re&&Re.defaultView||window;if(ge.getSelection){var _e=ge.getSelection(),st=P.textContent.length,At=Math.min(K.start,st),kn=K.end===void 0?At:Math.min(K.end,st);!_e.extend&&At>kn&&(R=kn,kn=At,At=R);var ne=b(P,At),$=b(P,kn);if(ne&&$&&(_e.rangeCount!==1||_e.anchorNode!==ne.node||_e.anchorOffset!==ne.offset||_e.focusNode!==$.node||_e.focusOffset!==$.offset)){var he=Re.createRange();he.setStart(ne.node,ne.offset),_e.removeAllRanges(),At>kn?(_e.addRange(he),_e.extend($.node,$.offset)):(he.setEnd($.node,$.offset),_e.addRange(he))}}}}for(Re=[],_e=P;_e=_e.parentNode;)_e.nodeType===1&&Re.push({element:_e,left:_e.scrollLeft,top:_e.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<Re.length;P++){var Se=Re[P];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}Lh=!!b0,v0=b0=null}finally{An=E,Ae.p=d,ue.T=c}}t.current=i,Pr=2}}function Kp(){if(Pr===2){Pr=0;var t=Ka,i=Ll,c=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||c){c=ue.T,ue.T=null;var d=Ae.p;Ae.p=2;var E=An;An|=4;try{Tp(t,i.alternate,i)}finally{An=E,Ae.p=d,ue.T=c}}Pr=3}}function Qp(){if(Pr===4||Pr===3){Pr=0,Hr();var t=Ka,i=Ll,c=ya,d=Pp;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Pr=5:(Pr=0,Ll=Ka=null,Zp(t,t.pendingLanes));var E=t.pendingLanes;if(E===0&&(Wa=null),Mr(c),i=i.stateNode,ve&&typeof ve.onCommitFiberRoot=="function")try{ve.onCommitFiberRoot(Ze,i,void 0,(i.current.flags&128)===128)}catch{}if(d!==null){i=ue.T,E=Ae.p,Ae.p=2,ue.T=null;try{for(var w=t.onRecoverableError,R=0;R<d.length;R++){var P=d[R];w(P.value,{componentStack:P.stack})}}finally{ue.T=i,Ae.p=E}}(ya&3)!==0&&wh(),Ps(t),E=t.pendingLanes,(c&261930)!==0&&(E&42)!==0?t===h0?Bc++:(Bc=0,h0=t):Bc=0,Vc(0)}}function Zp(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Ec(i)))}function wh(){return Wp(),Kp(),Qp(),Jp()}function Jp(){if(Pr!==5)return!1;var t=Ka,i=c0;c0=0;var c=Mr(ya),d=ue.T,E=Ae.p;try{Ae.p=32>c?32:c,ue.T=null,c=u0,u0=null;var w=Ka,R=ya;if(Pr=0,Ll=Ka=null,ya=0,(An&6)!==0)throw Error(o(331));var P=An;if(An|=4,Mp(w.current),Np(w,w.current,R,c),An=P,Vc(0,!1),ve&&typeof ve.onPostCommitFiberRoot=="function")try{ve.onPostCommitFiberRoot(Ze,w)}catch{}return!0}finally{Ae.p=E,ue.T=d,Zp(t,i)}}function $p(t,i,c){i=as(c,i),i=Hd(t.stateNode,i,2),t=ja(t,i,2),t!==null&&(vi(t,2),Ps(t))}function In(t,i,c){if(t.tag===3)$p(t,t,c);else for(;i!==null;){if(i.tag===3){$p(i,t,c);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Wa===null||!Wa.has(d))){t=as(c,t),c=ep(2),d=ja(i,c,2),d!==null&&(tp(c,d,i,t),vi(d,2),Ps(d));break}}i=i.return}}function g0(t,i,c){var d=t.pingCache;if(d===null){d=t.pingCache=new $A;var E=new Set;d.set(i,E)}else E=d.get(i),E===void 0&&(E=new Set,d.set(i,E));E.has(c)||(a0=!0,E.add(c),t=iw.bind(null,t,i,c),i.then(t,t))}function iw(t,i,c){var d=t.pingCache;d!==null&&d.delete(i),t.pingedLanes|=t.suspendedLanes&c,t.warmLanes&=~c,Vn===t&&(nn&c)===c&&(fr===4||fr===3&&(nn&62914560)===nn&&300>pn()-ph?(An&2)===0&&kl(t,0):o0|=c,Ml===nn&&(Ml=0)),Ps(t)}function e2(t,i){i===0&&(i=rr()),t=Bo(t,i),t!==null&&(vi(t,i),Ps(t))}function sw(t){var i=t.memoizedState,c=0;i!==null&&(c=i.retryLane),e2(t,c)}function aw(t,i){var c=0;switch(t.tag){case 31:case 13:var d=t.stateNode,E=t.memoizedState;E!==null&&(c=E.retryLane);break;case 19:d=t.stateNode;break;case 22:d=t.stateNode._retryCache;break;default:throw Error(o(314))}d!==null&&d.delete(i),e2(t,c)}function ow(t,i){return Et(t,i)}var Th=null,Bl=null,m0=!1,bh=!1,p0=!1,Za=0;function Ps(t){t!==Bl&&t.next===null&&(Bl===null?Th=Bl=t:Bl=Bl.next=t),bh=!0,m0||(m0=!0,cw())}function Vc(t,i){if(!p0&&bh){p0=!0;do for(var c=!1,d=Th;d!==null;){if(t!==0){var E=d.pendingLanes;if(E===0)var w=0;else{var R=d.suspendedLanes,P=d.pingedLanes;w=(1<<31-lt(42|t)+1)-1,w&=E&~(R&~P),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(c=!0,i2(d,w))}else w=nn,w=Gr(d,d===Vn?w:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(w&3)===0||Hn(d,w)||(c=!0,i2(d,w));d=d.next}while(c);p0=!1}}function lw(){t2()}function t2(){bh=m0=!1;var t=0;Za!==0&&xw()&&(t=Za);for(var i=pn(),c=null,d=Th;d!==null;){var E=d.next,w=n2(d,i);w===0?(d.next=null,c===null?Th=E:c.next=E,E===null&&(Bl=c)):(c=d,(t!==0||(w&3)!==0)&&(bh=!0)),d=E}Pr!==0&&Pr!==5||Vc(t),Za!==0&&(Za=0)}function n2(t,i){for(var c=t.suspendedLanes,d=t.pingedLanes,E=t.expirationTimes,w=t.pendingLanes&-62914561;0<w;){var R=31-lt(w),P=1<<R,K=E[R];K===-1?((P&c)===0||(P&d)!==0)&&(E[R]=Xs(P,i)):K<=i&&(t.expiredLanes|=P),w&=~P}if(i=Vn,c=nn,c=Gr(t,t===i?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),d=t.callbackNode,c===0||t===i&&(Sn===2||Sn===9)||t.cancelPendingCommit!==null)return d!==null&&d!==null&&Xe(d),t.callbackNode=null,t.callbackPriority=0;if((c&3)===0||Hn(t,c)){if(i=c&-c,i===t.callbackPriority)return i;switch(d!==null&&Xe(d),Mr(c)){case 2:case 8:c=He;break;case 32:c=Je;break;case 268435456:c=On;break;default:c=Je}return d=r2.bind(null,t),c=Et(c,d),t.callbackPriority=i,t.callbackNode=c,i}return d!==null&&d!==null&&Xe(d),t.callbackPriority=2,t.callbackNode=null,2}function r2(t,i){if(Pr!==0&&Pr!==5)return t.callbackNode=null,t.callbackPriority=0,null;var c=t.callbackNode;if(wh()&&t.callbackNode!==c)return null;var d=nn;return d=Gr(t,t===Vn?d:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),d===0?null:(Vp(t,d,i),n2(t,pn()),t.callbackNode!=null&&t.callbackNode===c?r2.bind(null,t):null)}function i2(t,i){if(wh())return null;Vp(t,i,!0)}function cw(){Aw(function(){(An&6)!==0?Et(De,lw):t2()})}function y0(){if(Za===0){var t=wl;t===0&&(t=pr,pr<<=1,(pr&261888)===0&&(pr=256)),Za=t}return Za}function s2(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Rs(""+t)}function a2(t,i){var c=i.ownerDocument.createElement("input");return c.name=i.name,c.value=i.value,t.id&&c.setAttribute("form",t.id),i.parentNode.insertBefore(c,i),t=new FormData(t),c.parentNode.removeChild(c),t}function uw(t,i,c,d,E){if(i==="submit"&&c&&c.stateNode===E){var w=s2((E[ln]||null).action),R=d.submitter;R&&(i=(i=R[ln]||null)?s2(i.formAction):R.getAttribute("formAction"),i!==null&&(w=i,R=null));var P=new qn("action","action",null,d,E);t.push({event:P,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Za!==0){var K=R?a2(E,R):new FormData(E);Bd(c,{pending:!0,data:K,method:E.method,action:w},null,K)}}else typeof w=="function"&&(P.preventDefault(),K=R?a2(E,R):new FormData(E),Bd(c,{pending:!0,data:K,method:E.method,action:w},w,K))},currentTarget:E}]})}}for(var E0=0;E0<mc.length;E0++){var x0=mc[E0],hw=x0.toLowerCase(),fw=x0[0].toUpperCase()+x0.slice(1);As(hw,"on"+fw)}As(Ni,"onAnimationEnd"),As(Wr,"onAnimationIteration"),As(vn,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(kr,"onTransitionRun"),As(Ai,"onTransitionStart"),As(ka,"onTransitionCancel"),As(ra,"onTransitionEnd"),qr("onMouseEnter",["mouseout","mouseover"]),qr("onMouseLeave",["mouseout","mouseover"]),qr("onPointerEnter",["pointerout","pointerover"]),qr("onPointerLeave",["pointerout","pointerover"]),gn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gn("onBeforeInput",["compositionend","keypress","textInput","paste"]),gn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Uc));function o2(t,i){i=(i&4)!==0;for(var c=0;c<t.length;c++){var d=t[c],E=d.event;d=d.listeners;e:{var w=void 0;if(i)for(var R=d.length-1;0<=R;R--){var P=d[R],K=P.instance,fe=P.currentTarget;if(P=P.listener,K!==w&&E.isPropagationStopped())break e;w=P,E.currentTarget=fe;try{w(E)}catch(be){Uu(be)}E.currentTarget=null,w=K}else for(R=0;R<d.length;R++){if(P=d[R],K=P.instance,fe=P.currentTarget,P=P.listener,K!==w&&E.isPropagationStopped())break e;w=P,E.currentTarget=fe;try{w(E)}catch(be){Uu(be)}E.currentTarget=null,w=K}}}}function Jt(t,i){var c=i[ze];c===void 0&&(c=i[ze]=new Set);var d=t+"__bubble";c.has(d)||(l2(i,t,2,!1),c.add(d))}function _0(t,i,c){var d=0;i&&(d|=4),l2(c,t,d,i)}var vh="_reactListening"+Math.random().toString(36).slice(2);function A0(t){if(!t[vh]){t[vh]=!0,Ne.forEach(function(c){c!=="selectionchange"&&(dw.has(c)||_0(c,!1,t),_0(c,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[vh]||(i[vh]=!0,_0("selectionchange",!1,i))}}function l2(t,i,c,d){switch(B2(i)){case 2:var E=zw;break;case 8:E=jw;break;default:E=P0}c=E.bind(null,i,c,t),E=void 0,!Ws||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(E=!0),d?E!==void 0?t.addEventListener(i,c,{capture:!0,passive:E}):t.addEventListener(i,c,!0):E!==void 0?t.addEventListener(i,c,{passive:E}):t.addEventListener(i,c,!1)}function w0(t,i,c,d,E){var w=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var R=d.tag;if(R===3||R===4){var P=d.stateNode.containerInfo;if(P===E)break;if(R===4)for(R=d.return;R!==null;){var K=R.tag;if((K===3||K===4)&&R.stateNode.containerInfo===E)return;R=R.return}for(;P!==null;){if(R=hn(P),R===null)return;if(K=R.tag,K===5||K===6||K===26||K===27){d=w=R;continue e}P=P.parentNode}}d=d.return}Ns(function(){var fe=w,be=Si(c),Re=[];e:{var ge=Vu.get(t);if(ge!==void 0){var _e=qn,st=t;switch(t){case"keypress":if(Fi(c)===0)break e;case"keydown":case"keyup":_e=$s;break;case"focusin":st="focus",_e=Zs;break;case"focusout":st="blur",_e=Zs;break;case"beforeblur":case"afterblur":_e=Zs;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=Qs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=C;break;case Ni:case Wr:case vn:_e=Mt;break;case ra:_e=U;break;case"scroll":case"scrollend":_e=Na;break;case"wheel":_e=xe;break;case"copy":case"cut":case"paste":_e=Js;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=Qt;break;case"toggle":case"beforetoggle":_e=St}var At=(i&4)!==0,kn=!At&&(t==="scroll"||t==="scrollend"),ne=At?ge!==null?ge+"Capture":null:ge;At=[];for(var $=fe,he;$!==null;){var Se=$;if(he=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||he===null||ne===null||(Se=xt($,ne),Se!=null&&At.push(Fc($,Se,he))),kn)break;$=$.return}0<At.length&&(ge=new _e(ge,st,null,c,be),Re.push({event:ge,listeners:At}))}}if((i&7)===0){e:{if(ge=t==="mouseover"||t==="pointerover",_e=t==="mouseout"||t==="pointerout",ge&&c!==Ys&&(st=c.relatedTarget||c.fromElement)&&(hn(st)||st[ee]))break e;if((_e||ge)&&(ge=be.window===be?be:(ge=be.ownerDocument)?ge.defaultView||ge.parentWindow:window,_e?(st=c.relatedTarget||c.toElement,_e=fe,st=st?hn(st):null,st!==null&&(kn=m(st),At=st.tag,st!==kn||At!==5&&At!==27&&At!==6)&&(st=null)):(_e=null,st=fe),_e!==st)){if(At=fn,Se="onMouseLeave",ne="onMouseEnter",$="mouse",(t==="pointerout"||t==="pointerover")&&(At=Qt,Se="onPointerLeave",ne="onPointerEnter",$="pointer"),kn=_e==null?ge:cr(_e),he=st==null?ge:cr(st),ge=new At(Se,$+"leave",_e,c,be),ge.target=kn,ge.relatedTarget=he,Se=null,hn(be)===fe&&(At=new At(ne,$+"enter",st,c,be),At.target=he,At.relatedTarget=kn,Se=At),kn=Se,_e&&st)t:{for(At=gw,ne=_e,$=st,he=0,Se=ne;Se;Se=At(Se))he++;Se=0;for(var mt=$;mt;mt=At(mt))Se++;for(;0<he-Se;)ne=At(ne),he--;for(;0<Se-he;)$=At($),Se--;for(;he--;){if(ne===$||$!==null&&ne===$.alternate){At=ne;break t}ne=At(ne),$=At($)}At=null}else At=null;_e!==null&&c2(Re,ge,_e,At,!1),st!==null&&kn!==null&&c2(Re,kn,st,At,!0)}}e:{if(ge=fe?cr(fe):window,_e=ge.nodeName&&ge.nodeName.toLowerCase(),_e==="select"||_e==="input"&&ge.type==="file")var xn=Hi;else if(gc(ge))if(Bu)xn=u;else{xn=s;var ot=r}else _e=ge.nodeName,!_e||_e.toLowerCase()!=="input"||ge.type!=="checkbox"&&ge.type!=="radio"?fe&&Tn(fe.elementType)&&(xn=Hi):xn=l;if(xn&&(xn=xn(t,fe))){ji(Re,xn,c,be);break e}ot&&ot(t,ge,fe),t==="focusout"&&fe&&ge.type==="number"&&fe.memoizedProps.value!=null&&j(ge,"number",ge.value)}switch(ot=fe?cr(fe):window,t){case"focusin":(gc(ot)||ot.contentEditable==="true")&&(Q=ot,J=fe,se=null);break;case"focusout":se=J=Q=null;break;case"mousedown":Ee=!0;break;case"contextmenu":case"mouseup":case"dragend":Ee=!1,Ue(Re,c,be);break;case"selectionchange":if(H)break;case"keydown":case"keyup":Ue(Re,c,be)}var Ft;if(cn)e:{switch(t){case"compositionstart":var rn="onCompositionStart";break e;case"compositionend":rn="onCompositionEnd";break e;case"compositionupdate":rn="onCompositionUpdate";break e}rn=void 0}else La?ea(t,c)&&(rn="onCompositionEnd"):t==="keydown"&&c.keyCode===229&&(rn="onCompositionStart");rn&&(rs&&c.locale!=="ko"&&(La||rn!=="onCompositionStart"?rn==="onCompositionEnd"&&La&&(Ft=Es()):(Vi=be,Ui="value"in Vi?Vi.value:Vi.textContent,La=!0)),ot=Ch(fe,rn),0<ot.length&&(rn=new es(rn,t,null,c,be),Re.push({event:rn,listeners:ot}),Ft?rn.data=Ft:(Ft=is(c),Ft!==null&&(rn.data=Ft)))),(Ft=xi?Ds(t,c):ml(t,c))&&(rn=Ch(fe,"onBeforeInput"),0<rn.length&&(ot=new es("onBeforeInput","beforeinput",null,c,be),Re.push({event:ot,listeners:rn}),ot.data=Ft)),uw(Re,t,fe,c,be)}o2(Re,i)})}function Fc(t,i,c){return{instance:t,listener:i,currentTarget:c}}function Ch(t,i){for(var c=i+"Capture",d=[];t!==null;){var E=t,w=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||w===null||(E=xt(t,c),E!=null&&d.unshift(Fc(t,E,w)),E=xt(t,i),E!=null&&d.push(Fc(t,E,w))),t.tag===3)return d;t=t.return}return[]}function gw(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function c2(t,i,c,d,E){for(var w=i._reactName,R=[];c!==null&&c!==d;){var P=c,K=P.alternate,fe=P.stateNode;if(P=P.tag,K!==null&&K===d)break;P!==5&&P!==26&&P!==27||fe===null||(K=fe,E?(fe=xt(c,w),fe!=null&&R.unshift(Fc(c,fe,K))):E||(fe=xt(c,w),fe!=null&&R.push(Fc(c,fe,K)))),c=c.return}R.length!==0&&t.push({event:i,listeners:R})}var mw=/\r\n?/g,pw=/\u0000|\uFFFD/g;function u2(t){return(typeof t=="string"?t:""+t).replace(mw,`
`).replace(pw,"")}function h2(t,i){return i=u2(i),u2(t)===i}function Ln(t,i,c,d,E,w){switch(c){case"children":typeof d=="string"?i==="body"||i==="textarea"&&d===""||si(t,d):(typeof d=="number"||typeof d=="bigint")&&i!=="body"&&si(t,""+d);break;case"className":Xr(t,"class",d);break;case"tabIndex":Xr(t,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Xr(t,c,d);break;case"style":ht(t,d,w);break;case"data":if(i!=="object"){Xr(t,"data",d);break}case"src":case"href":if(d===""&&(i!=="a"||c!=="href")){t.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){t.removeAttribute(c);break}d=Rs(""+d),t.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){t.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(c==="formAction"?(i!=="input"&&Ln(t,i,"name",E.name,E,null),Ln(t,i,"formEncType",E.formEncType,E,null),Ln(t,i,"formMethod",E.formMethod,E,null),Ln(t,i,"formTarget",E.formTarget,E,null)):(Ln(t,i,"encType",E.encType,E,null),Ln(t,i,"method",E.method,E,null),Ln(t,i,"target",E.target,E,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){t.removeAttribute(c);break}d=Rs(""+d),t.setAttribute(c,d);break;case"onClick":d!=null&&(t.onclick=ai);break;case"onScroll":d!=null&&Jt("scroll",t);break;case"onScrollEnd":d!=null&&Jt("scrollend",t);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(o(61));if(c=d.__html,c!=null){if(E.children!=null)throw Error(o(60));t.innerHTML=c}}break;case"multiple":t.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":t.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){t.removeAttribute("xlink:href");break}c=Rs(""+d),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?t.setAttribute(c,""+d):t.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?t.setAttribute(c,""):t.removeAttribute(c);break;case"capture":case"download":d===!0?t.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?t.setAttribute(c,d):t.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?t.setAttribute(c,d):t.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?t.removeAttribute(c):t.setAttribute(c,d);break;case"popover":Jt("beforetoggle",t),Jt("toggle",t),Ss(t,"popover",d);break;case"xlinkActuate":Jn(t,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Jn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Jn(t,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Jn(t,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Jn(t,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Jn(t,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Jn(t,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Jn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Jn(t,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Ss(t,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Oo.get(c)||c,Ss(t,c,d))}}function T0(t,i,c,d,E,w){switch(c){case"style":ht(t,d,w);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(o(61));if(c=d.__html,c!=null){if(E.children!=null)throw Error(o(60));t.innerHTML=c}}break;case"children":typeof d=="string"?si(t,d):(typeof d=="number"||typeof d=="bigint")&&si(t,""+d);break;case"onScroll":d!=null&&Jt("scroll",t);break;case"onScrollEnd":d!=null&&Jt("scrollend",t);break;case"onClick":d!=null&&(t.onclick=ai);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Io.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(E=c.endsWith("Capture"),i=c.slice(2,E?c.length-7:void 0),w=t[ln]||null,w=w!=null?w[c]:null,typeof w=="function"&&t.removeEventListener(i,w,E),typeof d=="function")){typeof w!="function"&&w!==null&&(c in t?t[c]=null:t.hasAttribute(c)&&t.removeAttribute(c)),t.addEventListener(i,d,E);break e}c in t?t[c]=d:d===!0?t.setAttribute(c,""):Ss(t,c,d)}}}function Jr(t,i,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Jt("error",t),Jt("load",t);var d=!1,E=!1,w;for(w in c)if(c.hasOwnProperty(w)){var R=c[w];if(R!=null)switch(w){case"src":d=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,i));default:Ln(t,i,w,R,c,null)}}E&&Ln(t,i,"srcSet",c.srcSet,c,null),d&&Ln(t,i,"src",c.src,c,null);return;case"input":Jt("invalid",t);var P=w=R=E=null,K=null,fe=null;for(d in c)if(c.hasOwnProperty(d)){var be=c[d];if(be!=null)switch(d){case"name":E=be;break;case"type":R=be;break;case"checked":K=be;break;case"defaultChecked":fe=be;break;case"value":w=be;break;case"defaultValue":P=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(o(137,i));break;default:Ln(t,i,d,be,c,null)}}ce(t,w,P,K,fe,R,E,!1);return;case"select":Jt("invalid",t),d=R=w=null;for(E in c)if(c.hasOwnProperty(E)&&(P=c[E],P!=null))switch(E){case"value":w=P;break;case"defaultValue":R=P;break;case"multiple":d=P;default:Ln(t,i,E,P,c,null)}i=w,c=R,t.multiple=!!d,i!=null?it(t,!!d,i,!1):c!=null&&it(t,!!d,c,!0);return;case"textarea":Jt("invalid",t),w=E=d=null;for(R in c)if(c.hasOwnProperty(R)&&(P=c[R],P!=null))switch(R){case"value":d=P;break;case"defaultValue":E=P;break;case"children":w=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(o(91));break;default:Ln(t,i,R,P,c,null)}yr(t,d,E,w);return;case"option":for(K in c)if(c.hasOwnProperty(K)&&(d=c[K],d!=null))switch(K){case"selected":t.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Ln(t,i,K,d,c,null)}return;case"dialog":Jt("beforetoggle",t),Jt("toggle",t),Jt("cancel",t),Jt("close",t);break;case"iframe":case"object":Jt("load",t);break;case"video":case"audio":for(d=0;d<Uc.length;d++)Jt(Uc[d],t);break;case"image":Jt("error",t),Jt("load",t);break;case"details":Jt("toggle",t);break;case"embed":case"source":case"link":Jt("error",t),Jt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(fe in c)if(c.hasOwnProperty(fe)&&(d=c[fe],d!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,i));default:Ln(t,i,fe,d,c,null)}return;default:if(Tn(i)){for(be in c)c.hasOwnProperty(be)&&(d=c[be],d!==void 0&&T0(t,i,be,d,c,void 0));return}}for(P in c)c.hasOwnProperty(P)&&(d=c[P],d!=null&&Ln(t,i,P,d,c,null))}function yw(t,i,c,d){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,w=null,R=null,P=null,K=null,fe=null,be=null;for(_e in c){var Re=c[_e];if(c.hasOwnProperty(_e)&&Re!=null)switch(_e){case"checked":break;case"value":break;case"defaultValue":K=Re;default:d.hasOwnProperty(_e)||Ln(t,i,_e,null,d,Re)}}for(var ge in d){var _e=d[ge];if(Re=c[ge],d.hasOwnProperty(ge)&&(_e!=null||Re!=null))switch(ge){case"type":w=_e;break;case"name":E=_e;break;case"checked":fe=_e;break;case"defaultChecked":be=_e;break;case"value":R=_e;break;case"defaultValue":P=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(o(137,i));break;default:_e!==Re&&Ln(t,i,ge,_e,d,Re)}}ir(t,R,P,K,fe,be,w,E);return;case"select":_e=R=P=ge=null;for(w in c)if(K=c[w],c.hasOwnProperty(w)&&K!=null)switch(w){case"value":break;case"multiple":_e=K;default:d.hasOwnProperty(w)||Ln(t,i,w,null,d,K)}for(E in d)if(w=d[E],K=c[E],d.hasOwnProperty(E)&&(w!=null||K!=null))switch(E){case"value":ge=w;break;case"defaultValue":P=w;break;case"multiple":R=w;default:w!==K&&Ln(t,i,E,w,d,K)}i=P,c=R,d=_e,ge!=null?it(t,!!c,ge,!1):!!d!=!!c&&(i!=null?it(t,!!c,i,!0):it(t,!!c,c?[]:"",!1));return;case"textarea":_e=ge=null;for(P in c)if(E=c[P],c.hasOwnProperty(P)&&E!=null&&!d.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:Ln(t,i,P,null,d,E)}for(R in d)if(E=d[R],w=c[R],d.hasOwnProperty(R)&&(E!=null||w!=null))switch(R){case"value":ge=E;break;case"defaultValue":_e=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(o(91));break;default:E!==w&&Ln(t,i,R,E,d,w)}sr(t,ge,_e);return;case"option":for(var st in c)if(ge=c[st],c.hasOwnProperty(st)&&ge!=null&&!d.hasOwnProperty(st))switch(st){case"selected":t.selected=!1;break;default:Ln(t,i,st,null,d,ge)}for(K in d)if(ge=d[K],_e=c[K],d.hasOwnProperty(K)&&ge!==_e&&(ge!=null||_e!=null))switch(K){case"selected":t.selected=ge&&typeof ge!="function"&&typeof ge!="symbol";break;default:Ln(t,i,K,ge,d,_e)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var At in c)ge=c[At],c.hasOwnProperty(At)&&ge!=null&&!d.hasOwnProperty(At)&&Ln(t,i,At,null,d,ge);for(fe in d)if(ge=d[fe],_e=c[fe],d.hasOwnProperty(fe)&&ge!==_e&&(ge!=null||_e!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(o(137,i));break;default:Ln(t,i,fe,ge,d,_e)}return;default:if(Tn(i)){for(var kn in c)ge=c[kn],c.hasOwnProperty(kn)&&ge!==void 0&&!d.hasOwnProperty(kn)&&T0(t,i,kn,void 0,d,ge);for(be in d)ge=d[be],_e=c[be],!d.hasOwnProperty(be)||ge===_e||ge===void 0&&_e===void 0||T0(t,i,be,ge,d,_e);return}}for(var ne in c)ge=c[ne],c.hasOwnProperty(ne)&&ge!=null&&!d.hasOwnProperty(ne)&&Ln(t,i,ne,null,d,ge);for(Re in d)ge=d[Re],_e=c[Re],!d.hasOwnProperty(Re)||ge===_e||ge==null&&_e==null||Ln(t,i,Re,ge,d,_e)}function f2(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ew(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var E=c[d],w=E.transferSize,R=E.initiatorType,P=E.duration;if(w&&P&&f2(R)){for(R=0,P=E.responseEnd,d+=1;d<c.length;d++){var K=c[d],fe=K.startTime;if(fe>P)break;var be=K.transferSize,Re=K.initiatorType;be&&f2(Re)&&(K=K.responseEnd,R+=be*(K<P?1:(P-fe)/(K-fe)))}if(--d,i+=8*(w+R)/(E.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var b0=null,v0=null;function Sh(t){return t.nodeType===9?t:t.ownerDocument}function d2(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function g2(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function C0(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var S0=null;function xw(){var t=window.event;return t&&t.type==="popstate"?t===S0?!1:(S0=t,!0):(S0=null,!1)}var m2=typeof setTimeout=="function"?setTimeout:void 0,_w=typeof clearTimeout=="function"?clearTimeout:void 0,p2=typeof Promise=="function"?Promise:void 0,Aw=typeof queueMicrotask=="function"?queueMicrotask:typeof p2<"u"?function(t){return p2.resolve(null).then(t).catch(ww)}:m2;function ww(t){setTimeout(function(){throw t})}function Ja(t){return t==="head"}function y2(t,i){var c=i,d=0;do{var E=c.nextSibling;if(t.removeChild(c),E&&E.nodeType===8)if(c=E.data,c==="/$"||c==="/&"){if(d===0){t.removeChild(E),zl(i);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")zc(t.ownerDocument.documentElement);else if(c==="head"){c=t.ownerDocument.head,zc(c);for(var w=c.firstChild;w;){var R=w.nextSibling,P=w.nodeName;w[jt]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&w.rel.toLowerCase()==="stylesheet"||c.removeChild(w),w=R}}else c==="body"&&zc(t.ownerDocument.body);c=E}while(c);zl(i)}function E2(t,i){var c=t;t=0;do{var d=c.nextSibling;if(c.nodeType===1?i?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(i?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(t===0)break;t--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||t++;c=d}while(c)}function I0(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var c=i;switch(i=i.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":I0(c),Dn(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}t.removeChild(c)}}function Tw(t,i,c,d){for(;t.nodeType===1;){var E=c;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!d&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(d){if(!t[jt])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(w=t.getAttribute("rel"),w==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(w!==E.rel||t.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||t.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||t.getAttribute("title")!==(E.title==null?null:E.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(w=t.getAttribute("src"),(w!==(E.src==null?null:E.src)||t.getAttribute("type")!==(E.type==null?null:E.type)||t.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&w&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var w=E.name==null?null:""+E.name;if(E.type==="hidden"&&t.getAttribute("name")===w)return t}else return t;if(t=hs(t.nextSibling),t===null)break}return null}function bw(t,i,c){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!c||(t=hs(t.nextSibling),t===null))return null;return t}function x2(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=hs(t.nextSibling),t===null))return null;return t}function R0(t){return t.data==="$?"||t.data==="$~"}function N0(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function vw(t,i){var c=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||c.readyState!=="loading")i();else{var d=function(){i(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),t._reactRetry=d}}function hs(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var O0=null;function _2(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var c=t.data;if(c==="/$"||c==="/&"){if(i===0)return hs(t.nextSibling);i--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||i++}t=t.nextSibling}return null}function A2(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var c=t.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(i===0)return t;i--}else c!=="/$"&&c!=="/&"||i++}t=t.previousSibling}return null}function w2(t,i,c){switch(i=Sh(c),t){case"html":if(t=i.documentElement,!t)throw Error(o(452));return t;case"head":if(t=i.head,!t)throw Error(o(453));return t;case"body":if(t=i.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function zc(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Dn(t)}var fs=new Map,T2=new Set;function Ih(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ea=Ae.d;Ae.d={f:Cw,r:Sw,D:Iw,C:Rw,L:Nw,m:Ow,X:Mw,S:Dw,M:Lw};function Cw(){var t=Ea.f(),i=xh();return t||i}function Sw(t){var i=Ct(t);i!==null&&i.tag===5&&i.type==="form"?Fm(i):Ea.r(t)}var Vl=typeof document>"u"?null:document;function b2(t,i,c){var d=Vl;if(d&&typeof i=="string"&&i){var E=Ut(i);E='link[rel="'+t+'"][href="'+E+'"]',typeof c=="string"&&(E+='[crossorigin="'+c+'"]'),T2.has(E)||(T2.add(E),t={rel:t,crossOrigin:c,href:i},d.querySelector(E)===null&&(i=d.createElement("link"),Jr(i,"link",t),Zn(i),d.head.appendChild(i)))}}function Iw(t){Ea.D(t),b2("dns-prefetch",t,null)}function Rw(t,i){Ea.C(t,i),b2("preconnect",t,i)}function Nw(t,i,c){Ea.L(t,i,c);var d=Vl;if(d&&t&&i){var E='link[rel="preload"][as="'+Ut(i)+'"]';i==="image"&&c&&c.imageSrcSet?(E+='[imagesrcset="'+Ut(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(E+='[imagesizes="'+Ut(c.imageSizes)+'"]')):E+='[href="'+Ut(t)+'"]';var w=E;switch(i){case"style":w=Ul(t);break;case"script":w=Fl(t)}fs.has(w)||(t=O({rel:"preload",href:i==="image"&&c&&c.imageSrcSet?void 0:t,as:i},c),fs.set(w,t),d.querySelector(E)!==null||i==="style"&&d.querySelector(jc(w))||i==="script"&&d.querySelector(Hc(w))||(i=d.createElement("link"),Jr(i,"link",t),Zn(i),d.head.appendChild(i)))}}function Ow(t,i){Ea.m(t,i);var c=Vl;if(c&&t){var d=i&&typeof i.as=="string"?i.as:"script",E='link[rel="modulepreload"][as="'+Ut(d)+'"][href="'+Ut(t)+'"]',w=E;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Fl(t)}if(!fs.has(w)&&(t=O({rel:"modulepreload",href:t},i),fs.set(w,t),c.querySelector(E)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Hc(w)))return}d=c.createElement("link"),Jr(d,"link",t),Zn(d),c.head.appendChild(d)}}}function Dw(t,i,c){Ea.S(t,i,c);var d=Vl;if(d&&t){var E=Gn(d).hoistableStyles,w=Ul(t);i=i||"default";var R=E.get(w);if(!R){var P={loading:0,preload:null};if(R=d.querySelector(jc(w)))P.loading=5;else{t=O({rel:"stylesheet",href:t,"data-precedence":i},c),(c=fs.get(w))&&D0(t,c);var K=R=d.createElement("link");Zn(K),Jr(K,"link",t),K._p=new Promise(function(fe,be){K.onload=fe,K.onerror=be}),K.addEventListener("load",function(){P.loading|=1}),K.addEventListener("error",function(){P.loading|=2}),P.loading|=4,Rh(R,i,d)}R={type:"stylesheet",instance:R,count:1,state:P},E.set(w,R)}}}function Mw(t,i){Ea.X(t,i);var c=Vl;if(c&&t){var d=Gn(c).hoistableScripts,E=Fl(t),w=d.get(E);w||(w=c.querySelector(Hc(E)),w||(t=O({src:t,async:!0},i),(i=fs.get(E))&&M0(t,i),w=c.createElement("script"),Zn(w),Jr(w,"link",t),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(E,w))}}function Lw(t,i){Ea.M(t,i);var c=Vl;if(c&&t){var d=Gn(c).hoistableScripts,E=Fl(t),w=d.get(E);w||(w=c.querySelector(Hc(E)),w||(t=O({src:t,async:!0,type:"module"},i),(i=fs.get(E))&&M0(t,i),w=c.createElement("script"),Zn(w),Jr(w,"link",t),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(E,w))}}function v2(t,i,c,d){var E=(E=we.current)?Ih(E):null;if(!E)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(i=Ul(c.href),c=Gn(E).hoistableStyles,d=c.get(i),d||(d={type:"style",instance:null,count:0,state:null},c.set(i,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){t=Ul(c.href);var w=Gn(E).hoistableStyles,R=w.get(t);if(R||(E=E.ownerDocument||E,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(t,R),(w=E.querySelector(jc(t)))&&!w._p&&(R.instance=w,R.state.loading=5),fs.has(t)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},fs.set(t,c),w||kw(E,t,c,R.state))),i&&d===null)throw Error(o(528,""));return R}if(i&&d!==null)throw Error(o(529,""));return null;case"script":return i=c.async,c=c.src,typeof c=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Fl(c),c=Gn(E).hoistableScripts,d=c.get(i),d||(d={type:"script",instance:null,count:0,state:null},c.set(i,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Ul(t){return'href="'+Ut(t)+'"'}function jc(t){return'link[rel="stylesheet"]['+t+"]"}function C2(t){return O({},t,{"data-precedence":t.precedence,precedence:null})}function kw(t,i,c,d){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?d.loading=1:(i=t.createElement("link"),d.preload=i,i.addEventListener("load",function(){return d.loading|=1}),i.addEventListener("error",function(){return d.loading|=2}),Jr(i,"link",c),Zn(i),t.head.appendChild(i))}function Fl(t){return'[src="'+Ut(t)+'"]'}function Hc(t){return"script[async]"+t}function S2(t,i,c){if(i.count++,i.instance===null)switch(i.type){case"style":var d=t.querySelector('style[data-href~="'+Ut(c.href)+'"]');if(d)return i.instance=d,Zn(d),d;var E=O({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(t.ownerDocument||t).createElement("style"),Zn(d),Jr(d,"style",E),Rh(d,c.precedence,t),i.instance=d;case"stylesheet":E=Ul(c.href);var w=t.querySelector(jc(E));if(w)return i.state.loading|=4,i.instance=w,Zn(w),w;d=C2(c),(E=fs.get(E))&&D0(d,E),w=(t.ownerDocument||t).createElement("link"),Zn(w);var R=w;return R._p=new Promise(function(P,K){R.onload=P,R.onerror=K}),Jr(w,"link",d),i.state.loading|=4,Rh(w,c.precedence,t),i.instance=w;case"script":return w=Fl(c.src),(E=t.querySelector(Hc(w)))?(i.instance=E,Zn(E),E):(d=c,(E=fs.get(w))&&(d=O({},c),M0(d,E)),t=t.ownerDocument||t,E=t.createElement("script"),Zn(E),Jr(E,"link",d),t.head.appendChild(E),i.instance=E);case"void":return null;default:throw Error(o(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(d=i.instance,i.state.loading|=4,Rh(d,c.precedence,t));return i.instance}function Rh(t,i,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=d.length?d[d.length-1]:null,w=E,R=0;R<d.length;R++){var P=d[R];if(P.dataset.precedence===i)w=P;else if(w!==E)break}w?w.parentNode.insertBefore(t,w.nextSibling):(i=c.nodeType===9?c.head:c,i.insertBefore(t,i.firstChild))}function D0(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function M0(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Nh=null;function I2(t,i,c){if(Nh===null){var d=new Map,E=Nh=new Map;E.set(c,d)}else E=Nh,d=E.get(c),d||(d=new Map,E.set(c,d));if(d.has(t))return d;for(d.set(t,null),c=c.getElementsByTagName(t),E=0;E<c.length;E++){var w=c[E];if(!(w[jt]||w[Un]||t==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var R=w.getAttribute(i)||"";R=t+R;var P=d.get(R);P?P.push(w):d.set(R,[w])}}return d}function R2(t,i,c){t=t.ownerDocument||t,t.head.insertBefore(c,i==="title"?t.querySelector("head > title"):null)}function Pw(t,i,c){if(c===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function N2(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Bw(t,i,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var E=Ul(d.href),w=i.querySelector(jc(E));if(w){i=w._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Oh.bind(t),i.then(t,t)),c.state.loading|=4,c.instance=w,Zn(w);return}w=i.ownerDocument||i,d=C2(d),(E=fs.get(E))&&D0(d,E),w=w.createElement("link"),Zn(w);var R=w;R._p=new Promise(function(P,K){R.onload=P,R.onerror=K}),Jr(w,"link",d),c.instance=w}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(c,i),(i=c.state.preload)&&(c.state.loading&3)===0&&(t.count++,c=Oh.bind(t),i.addEventListener("load",c),i.addEventListener("error",c))}}var L0=0;function Vw(t,i){return t.stylesheets&&t.count===0&&Mh(t,t.stylesheets),0<t.count||0<t.imgCount?function(c){var d=setTimeout(function(){if(t.stylesheets&&Mh(t,t.stylesheets),t.unsuspend){var w=t.unsuspend;t.unsuspend=null,w()}},6e4+i);0<t.imgBytes&&L0===0&&(L0=62500*Ew());var E=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Mh(t,t.stylesheets),t.unsuspend)){var w=t.unsuspend;t.unsuspend=null,w()}},(t.imgBytes>L0?50:800)+i);return t.unsuspend=c,function(){t.unsuspend=null,clearTimeout(d),clearTimeout(E)}}:null}function Oh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Mh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Dh=null;function Mh(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Dh=new Map,i.forEach(Uw,t),Dh=null,Oh.call(t))}function Uw(t,i){if(!(i.state.loading&4)){var c=Dh.get(t);if(c)var d=c.get(null);else{c=new Map,Dh.set(t,c);for(var E=t.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<E.length;w++){var R=E[w];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(c.set(R.dataset.precedence,R),d=R)}d&&c.set(null,d)}E=i.instance,R=E.getAttribute("data-precedence"),w=c.get(R)||d,w===d&&c.set(null,E),c.set(R,E),this.count++,d=Oh.bind(this),E.addEventListener("load",d),E.addEventListener("error",d),w?w.parentNode.insertBefore(E,w.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(E,t.firstChild)),i.state.loading|=4}}var Gc={$$typeof:me,Provider:null,Consumer:null,_currentValue:Ye,_currentValue2:Ye,_threadCount:0};function Fw(t,i,c,d,E,w,R,P,K){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dr(0),this.hiddenUpdates=Dr(null),this.identifierPrefix=d,this.onUncaughtError=E,this.onCaughtError=w,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function O2(t,i,c,d,E,w,R,P,K,fe,be,Re){return t=new Fw(t,i,c,R,K,fe,be,Re,P),i=1,w===!0&&(i|=24),w=Gi(3,null,null,i),t.current=w,w.stateNode=t,i=dd(),i.refCount++,t.pooledCache=i,i.refCount++,w.memoizedState={element:d,isDehydrated:c,cache:i},yd(w),t}function D2(t){return t?(t=yl,t):yl}function M2(t,i,c,d,E,w){E=D2(E),d.context===null?d.context=E:d.pendingContext=E,d=za(i),d.payload={element:c},w=w===void 0?null:w,w!==null&&(d.callback=w),c=ja(t,d,i),c!==null&&(ki(c,t,i),wc(c,t,i))}function L2(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var c=t.retryLane;t.retryLane=c!==0&&c<i?c:i}}function k0(t,i){L2(t,i),(t=t.alternate)&&L2(t,i)}function k2(t){if(t.tag===13||t.tag===31){var i=Bo(t,67108864);i!==null&&ki(i,t,67108864),k0(t,67108864)}}function P2(t){if(t.tag===13||t.tag===31){var i=Ki();i=Qn(i);var c=Bo(t,i);c!==null&&ki(c,t,i),k0(t,i)}}var Lh=!0;function zw(t,i,c,d){var E=ue.T;ue.T=null;var w=Ae.p;try{Ae.p=2,P0(t,i,c,d)}finally{Ae.p=w,ue.T=E}}function jw(t,i,c,d){var E=ue.T;ue.T=null;var w=Ae.p;try{Ae.p=8,P0(t,i,c,d)}finally{Ae.p=w,ue.T=E}}function P0(t,i,c,d){if(Lh){var E=B0(d);if(E===null)w0(t,i,d,kh,c),V2(t,d);else if(Gw(E,t,i,c,d))d.stopPropagation();else if(V2(t,d),i&4&&-1<Hw.indexOf(t)){for(;E!==null;){var w=Ct(E);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var R=mi(w.pendingLanes);if(R!==0){var P=w;for(P.pendingLanes|=2,P.entangledLanes|=2;R;){var K=1<<31-lt(R);P.entanglements[1]|=K,R&=~K}Ps(w),(An&6)===0&&(yh=pn()+500,Vc(0))}}break;case 31:case 13:P=Bo(w,2),P!==null&&ki(P,w,2),xh(),k0(w,2)}if(w=B0(d),w===null&&w0(t,i,d,kh,c),w===E)break;E=w}E!==null&&d.stopPropagation()}else w0(t,i,d,null,c)}}function B0(t){return t=Si(t),V0(t)}var kh=null;function V0(t){if(kh=null,t=hn(t),t!==null){var i=m(t);if(i===null)t=null;else{var c=i.tag;if(c===13){if(t=x(i),t!==null)return t;t=null}else if(c===31){if(t=v(i),t!==null)return t;t=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return kh=t,null}function B2(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Te()){case De:return 2;case He:return 8;case Je:case $e:return 32;case On:return 268435456;default:return 32}default:return 32}}var U0=!1,$a=null,eo=null,to=null,qc=new Map,Xc=new Map,no=[],Hw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function V2(t,i){switch(t){case"focusin":case"focusout":$a=null;break;case"dragenter":case"dragleave":eo=null;break;case"mouseover":case"mouseout":to=null;break;case"pointerover":case"pointerout":qc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xc.delete(i.pointerId)}}function Yc(t,i,c,d,E,w){return t===null||t.nativeEvent!==w?(t={blockedOn:i,domEventName:c,eventSystemFlags:d,nativeEvent:w,targetContainers:[E]},i!==null&&(i=Ct(i),i!==null&&k2(i)),t):(t.eventSystemFlags|=d,i=t.targetContainers,E!==null&&i.indexOf(E)===-1&&i.push(E),t)}function Gw(t,i,c,d,E){switch(i){case"focusin":return $a=Yc($a,t,i,c,d,E),!0;case"dragenter":return eo=Yc(eo,t,i,c,d,E),!0;case"mouseover":return to=Yc(to,t,i,c,d,E),!0;case"pointerover":var w=E.pointerId;return qc.set(w,Yc(qc.get(w)||null,t,i,c,d,E)),!0;case"gotpointercapture":return w=E.pointerId,Xc.set(w,Yc(Xc.get(w)||null,t,i,c,d,E)),!0}return!1}function U2(t){var i=hn(t.target);if(i!==null){var c=m(i);if(c!==null){if(i=c.tag,i===13){if(i=x(c),i!==null){t.blockedOn=i,qe(t.priority,function(){P2(c)});return}}else if(i===31){if(i=v(c),i!==null){t.blockedOn=i,qe(t.priority,function(){P2(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){t.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ph(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var c=B0(t.nativeEvent);if(c===null){c=t.nativeEvent;var d=new c.constructor(c.type,c);Ys=d,c.target.dispatchEvent(d),Ys=null}else return i=Ct(c),i!==null&&k2(i),t.blockedOn=c,!1;i.shift()}return!0}function F2(t,i,c){Ph(t)&&c.delete(i)}function qw(){U0=!1,$a!==null&&Ph($a)&&($a=null),eo!==null&&Ph(eo)&&(eo=null),to!==null&&Ph(to)&&(to=null),qc.forEach(F2),Xc.forEach(F2)}function Bh(t,i){t.blockedOn===i&&(t.blockedOn=null,U0||(U0=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,qw)))}var Vh=null;function z2(t){Vh!==t&&(Vh=t,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Vh===t&&(Vh=null);for(var i=0;i<t.length;i+=3){var c=t[i],d=t[i+1],E=t[i+2];if(typeof d!="function"){if(V0(d||c)===null)continue;break}var w=Ct(c);w!==null&&(t.splice(i,3),i-=3,Bd(w,{pending:!0,data:E,method:c.method,action:d},d,E))}}))}function zl(t){function i(K){return Bh(K,t)}$a!==null&&Bh($a,t),eo!==null&&Bh(eo,t),to!==null&&Bh(to,t),qc.forEach(i),Xc.forEach(i);for(var c=0;c<no.length;c++){var d=no[c];d.blockedOn===t&&(d.blockedOn=null)}for(;0<no.length&&(c=no[0],c.blockedOn===null);)U2(c),c.blockedOn===null&&no.shift();if(c=(t.ownerDocument||t).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var E=c[d],w=c[d+1],R=E[ln]||null;if(typeof w=="function")R||z2(c);else if(R){var P=null;if(w&&w.hasAttribute("formAction")){if(E=w,R=w[ln]||null)P=R.formAction;else if(V0(E)!==null)continue}else P=R.action;typeof P=="function"?c[d+1]=P:(c.splice(d,3),d-=3),z2(c)}}}function j2(){function t(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(R){return E=R})},focusReset:"manual",scroll:"manual"})}function i(){E!==null&&(E(),E=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,E=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),E!==null&&(E(),E=null)}}}function F0(t){this._internalRoot=t}Uh.prototype.render=F0.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(o(409));var c=i.current,d=Ki();M2(c,d,t,i,null,null)},Uh.prototype.unmount=F0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;M2(t.current,2,null,t,null,null),xh(),i[ee]=null}};function Uh(t){this._internalRoot=t}Uh.prototype.unstable_scheduleHydration=function(t){if(t){var i=Lr();t={blockedOn:null,target:t,priority:i};for(var c=0;c<no.length&&i!==0&&i<no[c].priority;c++);no.splice(c,0,t),c===0&&U2(t)}};var H2=e.version;if(H2!=="19.2.0")throw Error(o(527,H2,"19.2.0"));Ae.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=A(i),t=t!==null?S(t):null,t=t===null?null:t.stateNode,t};var Xw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ue,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fh.isDisabled&&Fh.supportsFiber)try{Ze=Fh.inject(Xw),ve=Fh}catch{}}return Kc.createRoot=function(t,i){if(!h(t))throw Error(o(299));var c=!1,d="",E=Qm,w=Zm,R=Jm;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(E=i.onUncaughtError),i.onCaughtError!==void 0&&(w=i.onCaughtError),i.onRecoverableError!==void 0&&(R=i.onRecoverableError)),i=O2(t,1,!1,null,null,c,d,null,E,w,R,j2),t[ee]=i.current,A0(t),new F0(i)},Kc.hydrateRoot=function(t,i,c){if(!h(t))throw Error(o(299));var d=!1,E="",w=Qm,R=Zm,P=Jm,K=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(E=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(R=c.onCaughtError),c.onRecoverableError!==void 0&&(P=c.onRecoverableError),c.formState!==void 0&&(K=c.formState)),i=O2(t,1,!0,i,c??null,d,E,K,w,R,P,j2),i.context=D2(null),c=i.current,d=Ki(),d=Qn(d),E=za(d),E.callback=null,ja(c,E,d),c=d,i.current.lanes=c,vi(i,c),Ps(i),t[ee]=i.current,A0(t),new Uh(i)},Kc.version="19.2.0",Kc}var $2;function rT(){if($2)return H0.exports;$2=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),H0.exports=nT(),H0.exports}var iT=rT();const sT=z1(iT),yo=()=>k.jsxs("div",{style:{padding:"1.5rem 0",display:"flex",justifyContent:"center",alignItems:"center"},children:[k.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",border:"3px solid #e5e7eb",borderTopColor:"#2EC483",animation:"spin 1s linear infinite"}}),k.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `})]}),aT=()=>{};var ey={};const GE=function(a){const e=[];let n=0;for(let o=0;o<a.length;o++){let h=a.charCodeAt(o);h<128?e[n++]=h:h<2048?(e[n++]=h>>6|192,e[n++]=h&63|128):(h&64512)===55296&&o+1<a.length&&(a.charCodeAt(o+1)&64512)===56320?(h=65536+((h&1023)<<10)+(a.charCodeAt(++o)&1023),e[n++]=h>>18|240,e[n++]=h>>12&63|128,e[n++]=h>>6&63|128,e[n++]=h&63|128):(e[n++]=h>>12|224,e[n++]=h>>6&63|128,e[n++]=h&63|128)}return e},oT=function(a){const e=[];let n=0,o=0;for(;n<a.length;){const h=a[n++];if(h<128)e[o++]=String.fromCharCode(h);else if(h>191&&h<224){const m=a[n++];e[o++]=String.fromCharCode((h&31)<<6|m&63)}else if(h>239&&h<365){const m=a[n++],x=a[n++],v=a[n++],T=((h&7)<<18|(m&63)<<12|(x&63)<<6|v&63)-65536;e[o++]=String.fromCharCode(55296+(T>>10)),e[o++]=String.fromCharCode(56320+(T&1023))}else{const m=a[n++],x=a[n++];e[o++]=String.fromCharCode((h&15)<<12|(m&63)<<6|x&63)}}return e.join("")},qE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,e){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let h=0;h<a.length;h+=3){const m=a[h],x=h+1<a.length,v=x?a[h+1]:0,T=h+2<a.length,A=T?a[h+2]:0,S=m>>2,O=(m&3)<<4|v>>4;let B=(v&15)<<2|A>>6,Y=A&63;T||(Y=64,x||(B=64)),o.push(n[S],n[O],n[B],n[Y])}return o.join("")},encodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(a):this.encodeByteArray(GE(a),e)},decodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(a):oT(this.decodeStringToByteArray(a,e))},decodeStringToByteArray(a,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let h=0;h<a.length;){const m=n[a.charAt(h++)],v=h<a.length?n[a.charAt(h)]:0;++h;const A=h<a.length?n[a.charAt(h)]:64;++h;const O=h<a.length?n[a.charAt(h)]:64;if(++h,m==null||v==null||A==null||O==null)throw new lT;const B=m<<2|v>>4;if(o.push(B),A!==64){const Y=v<<4&240|A>>2;if(o.push(Y),O!==64){const te=A<<6&192|O;o.push(te)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class lT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cT=function(a){const e=GE(a);return qE.encodeByteArray(e,!0)},cf=function(a){return cT(a).replace(/\./g,"")},XE=function(a){try{return qE.decodeString(a,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function uT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const hT=()=>uT().__FIREBASE_DEFAULTS__,fT=()=>{if(typeof process>"u"||typeof ey>"u")return;const a=ey.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},dT=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=a&&XE(a[1]);return e&&JSON.parse(e)},Df=()=>{try{return aT()||hT()||fT()||dT()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},YE=a=>Df()?.emulatorHosts?.[a],gT=a=>{const e=YE(a);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),o]:[e.substring(0,n),o]},WE=()=>Df()?.config,KE=a=>Df()?.[`_${a}`];class mT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,o)=>{n?this.reject(n):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,o))}}}function oc(a){try{return(a.startsWith("http://")||a.startsWith("https://")?new URL(a).hostname:a).endsWith(".cloudworkstations.dev")}catch{return!1}}async function QE(a){return(await fetch(a,{credentials:"include"})).ok}function pT(a,e){if(a.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},o=e||"demo-project",h=a.iat||0,m=a.sub||a.user_id;if(!m)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const x={iss:`https://securetoken.google.com/${o}`,aud:o,iat:h,exp:h+3600,auth_time:h,sub:m,user_id:m,firebase:{sign_in_provider:"custom",identities:{}},...a};return[cf(JSON.stringify(n)),cf(JSON.stringify(x)),""].join(".")}const ru={};function yT(){const a={prod:[],emulator:[]};for(const e of Object.keys(ru))ru[e]?a.emulator.push(e):a.prod.push(e);return a}function ET(a){let e=document.getElementById(a),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",a),n=!0),{created:n,element:e}}let ty=!1;function ZE(a,e){if(typeof window>"u"||typeof document>"u"||!oc(window.location.host)||ru[a]===e||ru[a]||ty)return;ru[a]=e;function n(B){return`__firebase__banner__${B}`}const o="__firebase__banner",m=yT().prod.length>0;function x(){const B=document.getElementById(o);B&&B.remove()}function v(B){B.style.display="flex",B.style.background="#7faaf0",B.style.position="fixed",B.style.bottom="5px",B.style.left="5px",B.style.padding=".5em",B.style.borderRadius="5px",B.style.alignItems="center"}function T(B,Y){B.setAttribute("width","24"),B.setAttribute("id",Y),B.setAttribute("height","24"),B.setAttribute("viewBox","0 0 24 24"),B.setAttribute("fill","none"),B.style.marginLeft="-6px"}function A(){const B=document.createElement("span");return B.style.cursor="pointer",B.style.marginLeft="16px",B.style.fontSize="24px",B.innerHTML=" &times;",B.onclick=()=>{ty=!0,x()},B}function S(B,Y){B.setAttribute("id",Y),B.innerText="Learn more",B.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",B.setAttribute("target","__blank"),B.style.paddingLeft="5px",B.style.textDecoration="underline"}function O(){const B=ET(o),Y=n("text"),te=document.getElementById(Y)||document.createElement("span"),le=n("learnmore"),de=document.getElementById(le)||document.createElement("a"),Ge=n("preprendIcon"),Le=document.getElementById(Ge)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(B.created){const me=B.element;v(me),S(de,le);const Be=A();T(Le,Ge),me.append(Le,te,de,Be),document.body.appendChild(me)}m?(te.innerText="Preview backend disconnected.",Le.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Le.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,te.innerText="Preview backend running in this workspace."),te.setAttribute("id",Y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",O):O()}function gi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gi())}function _T(){const a=Df()?.forceEnvironment;if(a==="node")return!0;if(a==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function AT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function wT(){const a=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof a=="object"&&a.id!==void 0}function TT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bT(){const a=gi();return a.indexOf("MSIE ")>=0||a.indexOf("Trident/")>=0}function vT(){return!_T()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function CT(){try{return typeof indexedDB=="object"}catch{return!1}}function ST(){return new Promise((a,e)=>{try{let n=!0;const o="validate-browser-context-for-indexeddb-analytics-module",h=self.indexedDB.open(o);h.onsuccess=()=>{h.result.close(),n||self.indexedDB.deleteDatabase(o),a(!0)},h.onupgradeneeded=()=>{n=!1},h.onerror=()=>{e(h.error?.message||"")}}catch(n){e(n)}})}const IT="FirebaseError";class Ia extends Error{constructor(e,n,o){super(n),this.code=e,this.customData=o,this.name=IT,Object.setPrototypeOf(this,Ia.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_u.prototype.create)}}class _u{constructor(e,n,o){this.service=e,this.serviceName=n,this.errors=o}create(e,...n){const o=n[0]||{},h=`${this.service}/${e}`,m=this.errors[e],x=m?RT(m,o):"Error",v=`${this.serviceName}: ${x} (${h}).`;return new Ia(h,v,o)}}function RT(a,e){return a.replace(NT,(n,o)=>{const h=e[o];return h!=null?String(h):`<${o}?>`})}const NT=/\{\$([^}]+)}/g;function OT(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}function nl(a,e){if(a===e)return!0;const n=Object.keys(a),o=Object.keys(e);for(const h of n){if(!o.includes(h))return!1;const m=a[h],x=e[h];if(ny(m)&&ny(x)){if(!nl(m,x))return!1}else if(m!==x)return!1}for(const h of o)if(!n.includes(h))return!1;return!0}function ny(a){return a!==null&&typeof a=="object"}function Au(a){const e=[];for(const[n,o]of Object.entries(a))Array.isArray(o)?o.forEach(h=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(h))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(o));return e.length?"&"+e.join("&"):""}function Qc(a){const e={};return a.replace(/^\?/,"").split("&").forEach(o=>{if(o){const[h,m]=o.split("=");e[decodeURIComponent(h)]=decodeURIComponent(m)}}),e}function Zc(a){const e=a.indexOf("?");if(!e)return"";const n=a.indexOf("#",e);return a.substring(e,n>0?n:void 0)}function DT(a,e){const n=new MT(a,e);return n.subscribe.bind(n)}class MT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(o=>{this.error(o)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,o){let h;if(e===void 0&&n===void 0&&o===void 0)throw new Error("Missing Observer.");LT(e,["next","error","complete"])?h=e:h={next:e,error:n,complete:o},h.next===void 0&&(h.next=Y0),h.error===void 0&&(h.error=Y0),h.complete===void 0&&(h.complete=Y0);const m=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?h.error(this.finalError):h.complete()}catch{}}),this.observers.push(h),m}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(o){typeof console<"u"&&console.error&&console.error(o)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function LT(a,e){if(typeof a!="object"||a===null)return!1;for(const n of e)if(n in a&&typeof a[n]=="function")return!0;return!1}function Y0(){}function Ar(a){return a&&a._delegate?a._delegate:a}class rl{constructor(e,n,o){this.name=e,this.instanceFactory=n,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Qo="[DEFAULT]";class kT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const o=new mT;if(this.instancesDeferred.set(n,o),this.isInitialized(n)||this.shouldAutoInitialize())try{const h=this.getOrInitializeService({instanceIdentifier:n});h&&o.resolve(h)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),o=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(h){if(o)return null;throw h}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(BT(e))try{this.getOrInitializeService({instanceIdentifier:Qo})}catch{}for(const[n,o]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(n);try{const m=this.getOrInitializeService({instanceIdentifier:h});o.resolve(m)}catch{}}}}clearInstance(e=Qo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qo){return this.instances.has(e)}getOptions(e=Qo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const h=this.getOrInitializeService({instanceIdentifier:o,options:n});for(const[m,x]of this.instancesDeferred.entries()){const v=this.normalizeInstanceIdentifier(m);o===v&&x.resolve(h)}return h}onInit(e,n){const o=this.normalizeInstanceIdentifier(n),h=this.onInitCallbacks.get(o)??new Set;h.add(e),this.onInitCallbacks.set(o,h);const m=this.instances.get(o);return m&&e(m,o),()=>{h.delete(e)}}invokeOnInitCallbacks(e,n){const o=this.onInitCallbacks.get(n);if(o)for(const h of o)try{h(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:PT(e),options:n}),this.instances.set(e,o),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=Qo){return this.component?this.component.multipleInstances?e:Qo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PT(a){return a===Qo?void 0:a}function BT(a){return a.instantiationMode==="EAGER"}class VT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new kT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var sn;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(sn||(sn={}));const UT={debug:sn.DEBUG,verbose:sn.VERBOSE,info:sn.INFO,warn:sn.WARN,error:sn.ERROR,silent:sn.SILENT},FT=sn.INFO,zT={[sn.DEBUG]:"log",[sn.VERBOSE]:"log",[sn.INFO]:"info",[sn.WARN]:"warn",[sn.ERROR]:"error"},jT=(a,e,...n)=>{if(e<a.logLevel)return;const o=new Date().toISOString(),h=zT[e];if(h)console[h](`[${o}]  ${a.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class H1{constructor(e){this.name=e,this._logLevel=FT,this._logHandler=jT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in sn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,sn.DEBUG,...e),this._logHandler(this,sn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,sn.VERBOSE,...e),this._logHandler(this,sn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,sn.INFO,...e),this._logHandler(this,sn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,sn.WARN,...e),this._logHandler(this,sn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,sn.ERROR,...e),this._logHandler(this,sn.ERROR,...e)}}const HT=(a,e)=>e.some(n=>a instanceof n);let ry,iy;function GT(){return ry||(ry=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qT(){return iy||(iy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JE=new WeakMap,h1=new WeakMap,$E=new WeakMap,W0=new WeakMap,G1=new WeakMap;function XT(a){const e=new Promise((n,o)=>{const h=()=>{a.removeEventListener("success",m),a.removeEventListener("error",x)},m=()=>{n(ho(a.result)),h()},x=()=>{o(a.error),h()};a.addEventListener("success",m),a.addEventListener("error",x)});return e.then(n=>{n instanceof IDBCursor&&JE.set(n,a)}).catch(()=>{}),G1.set(e,a),e}function YT(a){if(h1.has(a))return;const e=new Promise((n,o)=>{const h=()=>{a.removeEventListener("complete",m),a.removeEventListener("error",x),a.removeEventListener("abort",x)},m=()=>{n(),h()},x=()=>{o(a.error||new DOMException("AbortError","AbortError")),h()};a.addEventListener("complete",m),a.addEventListener("error",x),a.addEventListener("abort",x)});h1.set(a,e)}let f1={get(a,e,n){if(a instanceof IDBTransaction){if(e==="done")return h1.get(a);if(e==="objectStoreNames")return a.objectStoreNames||$E.get(a);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ho(a[e])},set(a,e,n){return a[e]=n,!0},has(a,e){return a instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in a}};function WT(a){f1=a(f1)}function KT(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const o=a.call(K0(this),e,...n);return $E.set(o,e.sort?e.sort():[e]),ho(o)}:qT().includes(a)?function(...e){return a.apply(K0(this),e),ho(JE.get(this))}:function(...e){return ho(a.apply(K0(this),e))}}function QT(a){return typeof a=="function"?KT(a):(a instanceof IDBTransaction&&YT(a),HT(a,GT())?new Proxy(a,f1):a)}function ho(a){if(a instanceof IDBRequest)return XT(a);if(W0.has(a))return W0.get(a);const e=QT(a);return e!==a&&(W0.set(a,e),G1.set(e,a)),e}const K0=a=>G1.get(a);function ZT(a,e,{blocked:n,upgrade:o,blocking:h,terminated:m}={}){const x=indexedDB.open(a,e),v=ho(x);return o&&x.addEventListener("upgradeneeded",T=>{o(ho(x.result),T.oldVersion,T.newVersion,ho(x.transaction),T)}),n&&x.addEventListener("blocked",T=>n(T.oldVersion,T.newVersion,T)),v.then(T=>{m&&T.addEventListener("close",()=>m()),h&&T.addEventListener("versionchange",A=>h(A.oldVersion,A.newVersion,A))}).catch(()=>{}),v}const JT=["get","getKey","getAll","getAllKeys","count"],$T=["put","add","delete","clear"],Q0=new Map;function sy(a,e){if(!(a instanceof IDBDatabase&&!(e in a)&&typeof e=="string"))return;if(Q0.get(e))return Q0.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,h=$T.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(h||JT.includes(n)))return;const m=async function(x,...v){const T=this.transaction(x,h?"readwrite":"readonly");let A=T.store;return o&&(A=A.index(v.shift())),(await Promise.all([A[n](...v),h&&T.done]))[0]};return Q0.set(e,m),m}WT(a=>({...a,get:(e,n,o)=>sy(e,n)||a.get(e,n,o),has:(e,n)=>!!sy(e,n)||a.has(e,n)}));class eb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tb(n)){const o=n.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(n=>n).join(" ")}}function tb(a){return a.getComponent()?.type==="VERSION"}const d1="@firebase/app",ay="0.14.6";const ba=new H1("@firebase/app"),nb="@firebase/app-compat",rb="@firebase/analytics-compat",ib="@firebase/analytics",sb="@firebase/app-check-compat",ab="@firebase/app-check",ob="@firebase/auth",lb="@firebase/auth-compat",cb="@firebase/database",ub="@firebase/data-connect",hb="@firebase/database-compat",fb="@firebase/functions",db="@firebase/functions-compat",gb="@firebase/installations",mb="@firebase/installations-compat",pb="@firebase/messaging",yb="@firebase/messaging-compat",Eb="@firebase/performance",xb="@firebase/performance-compat",_b="@firebase/remote-config",Ab="@firebase/remote-config-compat",wb="@firebase/storage",Tb="@firebase/storage-compat",bb="@firebase/firestore",vb="@firebase/ai",Cb="@firebase/firestore-compat",Sb="firebase",Ib="12.6.0";const g1="[DEFAULT]",Rb={[d1]:"fire-core",[nb]:"fire-core-compat",[ib]:"fire-analytics",[rb]:"fire-analytics-compat",[ab]:"fire-app-check",[sb]:"fire-app-check-compat",[ob]:"fire-auth",[lb]:"fire-auth-compat",[cb]:"fire-rtdb",[ub]:"fire-data-connect",[hb]:"fire-rtdb-compat",[fb]:"fire-fn",[db]:"fire-fn-compat",[gb]:"fire-iid",[mb]:"fire-iid-compat",[pb]:"fire-fcm",[yb]:"fire-fcm-compat",[Eb]:"fire-perf",[xb]:"fire-perf-compat",[_b]:"fire-rc",[Ab]:"fire-rc-compat",[wb]:"fire-gcs",[Tb]:"fire-gcs-compat",[bb]:"fire-fst",[Cb]:"fire-fst-compat",[vb]:"fire-vertex","fire-js":"fire-js",[Sb]:"fire-js-all"};const cu=new Map,Nb=new Map,m1=new Map;function oy(a,e){try{a.container.addComponent(e)}catch(n){ba.debug(`Component ${e.name} failed to register with FirebaseApp ${a.name}`,n)}}function $l(a){const e=a.name;if(m1.has(e))return ba.debug(`There were multiple attempts to register component ${e}.`),!1;m1.set(e,a);for(const n of cu.values())oy(n,a);for(const n of Nb.values())oy(n,a);return!0}function q1(a,e){const n=a.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),a.container.getProvider(e)}function ds(a){return a==null?!1:a.settings!==void 0}const Ob={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fo=new _u("app","Firebase",Ob);class Db{constructor(e,n,o){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new rl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fo.create("app-deleted",{appName:this._name})}}const lc=Ib;function X1(a,e={}){let n=a;typeof e!="object"&&(e={name:e});const o={name:g1,automaticDataCollectionEnabled:!0,...e},h=o.name;if(typeof h!="string"||!h)throw fo.create("bad-app-name",{appName:String(h)});if(n||(n=WE()),!n)throw fo.create("no-options");const m=cu.get(h);if(m){if(nl(n,m.options)&&nl(o,m.config))return m;throw fo.create("duplicate-app",{appName:h})}const x=new VT(h);for(const T of m1.values())x.addComponent(T);const v=new Db(n,o,x);return cu.set(h,v),v}function Y1(a=g1){const e=cu.get(a);if(!e&&a===g1&&WE())return X1();if(!e)throw fo.create("no-app",{appName:a});return e}function ex(){return Array.from(cu.values())}function go(a,e,n){let o=Rb[a]??a;n&&(o+=`-${n}`);const h=o.match(/\s|\//),m=e.match(/\s|\//);if(h||m){const x=[`Unable to register library "${o}" with version "${e}":`];h&&x.push(`library name "${o}" contains illegal characters (whitespace or "/")`),h&&m&&x.push("and"),m&&x.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ba.warn(x.join(" "));return}$l(new rl(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}const Mb="firebase-heartbeat-database",Lb=1,uu="firebase-heartbeat-store";let Z0=null;function tx(){return Z0||(Z0=ZT(Mb,Lb,{upgrade:(a,e)=>{switch(e){case 0:try{a.createObjectStore(uu)}catch(n){console.warn(n)}}}}).catch(a=>{throw fo.create("idb-open",{originalErrorMessage:a.message})})),Z0}async function kb(a){try{const n=(await tx()).transaction(uu),o=await n.objectStore(uu).get(nx(a));return await n.done,o}catch(e){if(e instanceof Ia)ba.warn(e.message);else{const n=fo.create("idb-get",{originalErrorMessage:e?.message});ba.warn(n.message)}}}async function ly(a,e){try{const o=(await tx()).transaction(uu,"readwrite");await o.objectStore(uu).put(e,nx(a)),await o.done}catch(n){if(n instanceof Ia)ba.warn(n.message);else{const o=fo.create("idb-set",{originalErrorMessage:n?.message});ba.warn(o.message)}}}function nx(a){return`${a.name}!${a.options.appId}`}const Pb=1024,Bb=30;class Vb{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Fb(n),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=cy();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(h=>h.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:n}),this._heartbeatsCache.heartbeats.length>Bb){const h=zb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ba.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=cy(),{heartbeatsToSend:n,unsentEntries:o}=Ub(this._heartbeatsCache.heartbeats),h=cf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),h}catch(e){return ba.warn(e),""}}}function cy(){return new Date().toISOString().substring(0,10)}function Ub(a,e=Pb){const n=[];let o=a.slice();for(const h of a){const m=n.find(x=>x.agent===h.agent);if(m){if(m.dates.push(h.date),uy(n)>e){m.dates.pop();break}}else if(n.push({agent:h.agent,dates:[h.date]}),uy(n)>e){n.pop();break}o=o.slice(1)}return{heartbeatsToSend:n,unsentEntries:o}}class Fb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return CT()?ST().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await kb(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return ly(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return ly(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function uy(a){return cf(JSON.stringify({version:2,heartbeats:a})).length}function zb(a){if(a.length===0)return-1;let e=0,n=a[0].date;for(let o=1;o<a.length;o++)a[o].date<n&&(n=a[o].date,e=o);return e}function jb(a){$l(new rl("platform-logger",e=>new eb(e),"PRIVATE")),$l(new rl("heartbeat",e=>new Vb(e),"PRIVATE")),go(d1,ay,a),go(d1,ay,"esm2020"),go("fire-js","")}jb("");var Hb="firebase",Gb="12.6.0";go(Hb,Gb,"app");function rx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qb=rx,ix=new _u("auth","Firebase",rx());const uf=new H1("@firebase/auth");function Xb(a,...e){uf.logLevel<=sn.WARN&&uf.warn(`Auth (${lc}): ${a}`,...e)}function Kh(a,...e){uf.logLevel<=sn.ERROR&&uf.error(`Auth (${lc}): ${a}`,...e)}function vs(a,...e){throw W1(a,...e)}function Vs(a,...e){return W1(a,...e)}function sx(a,e,n){const o={...qb(),[e]:n};return new _u("auth","Firebase",o).create(e,{appName:a.name})}function wa(a){return sx(a,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function W1(a,...e){if(typeof a!="string"){const n=e[0],o=[...e.slice(1)];return o[0]&&(o[0].appName=a.name),a._errorFactory.create(n,...o)}return ix.create(a,...e)}function Tt(a,e,...n){if(!a)throw W1(e,...n)}function _a(a){const e="INTERNAL ASSERTION FAILED: "+a;throw Kh(e),new Error(e)}function va(a,e){a||_a(e)}function p1(){return typeof self<"u"&&self.location?.href||""}function Yb(){return hy()==="http:"||hy()==="https:"}function hy(){return typeof self<"u"&&self.location?.protocol||null}function Wb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Yb()||wT()||"connection"in navigator)?navigator.onLine:!0}function Kb(){if(typeof navigator>"u")return null;const a=navigator;return a.languages&&a.languages[0]||a.language||null}class wu{constructor(e,n){this.shortDelay=e,this.longDelay=n,va(n>e,"Short delay should be less than long delay!"),this.isMobile=xT()||TT()}get(){return Wb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function K1(a,e){va(a.emulator,"Emulator should always be set here");const{url:n}=a.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class ax{static initialize(e,n,o){this.fetchImpl=e,n&&(this.headersImpl=n),o&&(this.responseImpl=o)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_a("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_a("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_a("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Qb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Zb=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Jb=new wu(3e4,6e4);function bo(a,e){return a.tenantId&&!e.tenantId?{...e,tenantId:a.tenantId}:e}async function vo(a,e,n,o,h={}){return ox(a,h,async()=>{let m={},x={};o&&(e==="GET"?x=o:m={body:JSON.stringify(o)});const v=Au({key:a.config.apiKey,...x}).slice(1),T=await a._getAdditionalHeaders();T["Content-Type"]="application/json",a.languageCode&&(T["X-Firebase-Locale"]=a.languageCode);const A={method:e,headers:T,...m};return AT()||(A.referrerPolicy="no-referrer"),a.emulatorConfig&&oc(a.emulatorConfig.host)&&(A.credentials="include"),ax.fetch()(await lx(a,a.config.apiHost,n,v),A)})}async function ox(a,e,n){a._canInitEmulator=!1;const o={...Qb,...e};try{const h=new e3(a),m=await Promise.race([n(),h.promise]);h.clearNetworkTimeout();const x=await m.json();if("needConfirmation"in x)throw jh(a,"account-exists-with-different-credential",x);if(m.ok&&!("errorMessage"in x))return x;{const v=m.ok?x.errorMessage:x.error.message,[T,A]=v.split(" : ");if(T==="FEDERATED_USER_ID_ALREADY_LINKED")throw jh(a,"credential-already-in-use",x);if(T==="EMAIL_EXISTS")throw jh(a,"email-already-in-use",x);if(T==="USER_DISABLED")throw jh(a,"user-disabled",x);const S=o[T]||T.toLowerCase().replace(/[_\s]+/g,"-");if(A)throw sx(a,S,A);vs(a,S)}}catch(h){if(h instanceof Ia)throw h;vs(a,"network-request-failed",{message:String(h)})}}async function Tu(a,e,n,o,h={}){const m=await vo(a,e,n,o,h);return"mfaPendingCredential"in m&&vs(a,"multi-factor-auth-required",{_serverResponse:m}),m}async function lx(a,e,n,o){const h=`${e}${n}?${o}`,m=a,x=m.config.emulator?K1(a.config,h):`${a.config.apiScheme}://${h}`;return Zb.includes(n)&&(await m._persistenceManagerAvailable,m._getPersistenceType()==="COOKIE")?m._getPersistence()._getFinalTarget(x).toString():x}function $b(a){switch(a){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class e3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,o)=>{this.timer=setTimeout(()=>o(Vs(this.auth,"network-request-failed")),Jb.get())})}}function jh(a,e,n){const o={appName:a.name};n.email&&(o.email=n.email),n.phoneNumber&&(o.phoneNumber=n.phoneNumber);const h=Vs(a,e,o);return h.customData._tokenResponse=n,h}function fy(a){return a!==void 0&&a.enterprise!==void 0}class t3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return $b(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function n3(a,e){return vo(a,"GET","/v2/recaptchaConfig",bo(a,e))}async function r3(a,e){return vo(a,"POST","/v1/accounts:delete",e)}async function hf(a,e){return vo(a,"POST","/v1/accounts:lookup",e)}function iu(a){if(a)try{const e=new Date(Number(a));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function i3(a,e=!1){const n=Ar(a),o=await n.getIdToken(e),h=Q1(o);Tt(h&&h.exp&&h.auth_time&&h.iat,n.auth,"internal-error");const m=typeof h.firebase=="object"?h.firebase:void 0,x=m?.sign_in_provider;return{claims:h,token:o,authTime:iu(J0(h.auth_time)),issuedAtTime:iu(J0(h.iat)),expirationTime:iu(J0(h.exp)),signInProvider:x||null,signInSecondFactor:m?.sign_in_second_factor||null}}function J0(a){return Number(a)*1e3}function Q1(a){const[e,n,o]=a.split(".");if(e===void 0||n===void 0||o===void 0)return Kh("JWT malformed, contained fewer than 3 sections"),null;try{const h=XE(n);return h?JSON.parse(h):(Kh("Failed to decode base64 JWT payload"),null)}catch(h){return Kh("Caught error parsing JWT payload as JSON",h?.toString()),null}}function dy(a){const e=Q1(a);return Tt(e,"internal-error"),Tt(typeof e.exp<"u","internal-error"),Tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function hu(a,e,n=!1){if(n)return e;try{return await e}catch(o){throw o instanceof Ia&&s3(o)&&a.auth.currentUser===a&&await a.auth.signOut(),o}}function s3({code:a}){return a==="auth/user-disabled"||a==="auth/user-token-expired"}class a3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const o=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class y1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=iu(this.lastLoginAt),this.creationTime=iu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ff(a){const e=a.auth,n=await a.getIdToken(),o=await hu(a,hf(e,{idToken:n}));Tt(o?.users.length,e,"internal-error");const h=o.users[0];a._notifyReloadListener(h);const m=h.providerUserInfo?.length?cx(h.providerUserInfo):[],x=l3(a.providerData,m),v=a.isAnonymous,T=!(a.email&&h.passwordHash)&&!x?.length,A=v?T:!1,S={uid:h.localId,displayName:h.displayName||null,photoURL:h.photoUrl||null,email:h.email||null,emailVerified:h.emailVerified||!1,phoneNumber:h.phoneNumber||null,tenantId:h.tenantId||null,providerData:x,metadata:new y1(h.createdAt,h.lastLoginAt),isAnonymous:A};Object.assign(a,S)}async function o3(a){const e=Ar(a);await ff(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function l3(a,e){return[...a.filter(o=>!e.some(h=>h.providerId===o.providerId)),...e]}function cx(a){return a.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function c3(a,e){const n=await ox(a,{},async()=>{const o=Au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:h,apiKey:m}=a.config,x=await lx(a,h,"/v1/token",`key=${m}`),v=await a._getAdditionalHeaders();v["Content-Type"]="application/x-www-form-urlencoded";const T={method:"POST",headers:v,body:o};return a.emulatorConfig&&oc(a.emulatorConfig.host)&&(T.credentials="include"),ax.fetch()(x,T)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function u3(a,e){return vo(a,"POST","/v2/accounts:revokeToken",bo(a,e))}class Kl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Tt(e.idToken,"internal-error"),Tt(typeof e.idToken<"u","internal-error"),Tt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Tt(e.length!==0,"internal-error");const n=dy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:o,refreshToken:h,expiresIn:m}=await c3(e,n);this.updateTokensAndExpiration(o,h,Number(m))}updateTokensAndExpiration(e,n,o){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+o*1e3}static fromJSON(e,n){const{refreshToken:o,accessToken:h,expirationTime:m}=n,x=new Kl;return o&&(Tt(typeof o=="string","internal-error",{appName:e}),x.refreshToken=o),h&&(Tt(typeof h=="string","internal-error",{appName:e}),x.accessToken=h),m&&(Tt(typeof m=="number","internal-error",{appName:e}),x.expirationTime=m),x}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Kl,this.toJSON())}_performRefresh(){return _a("not implemented")}}function io(a,e){Tt(typeof a=="string"||typeof a>"u","internal-error",{appName:e})}class bs{constructor({uid:e,auth:n,stsTokenManager:o,...h}){this.providerId="firebase",this.proactiveRefresh=new a3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=h.displayName||null,this.email=h.email||null,this.emailVerified=h.emailVerified||!1,this.phoneNumber=h.phoneNumber||null,this.photoURL=h.photoURL||null,this.isAnonymous=h.isAnonymous||!1,this.tenantId=h.tenantId||null,this.providerData=h.providerData?[...h.providerData]:[],this.metadata=new y1(h.createdAt||void 0,h.lastLoginAt||void 0)}async getIdToken(e){const n=await hu(this,this.stsTokenManager.getToken(this.auth,e));return Tt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return i3(this,e)}reload(){return o3(this)}_assign(e){this!==e&&(Tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new bs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let o=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),o=!0),n&&await ff(this),await this.auth._persistUserIfCurrent(this),o&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ds(this.auth.app))return Promise.reject(wa(this.auth));const e=await this.getIdToken();return await hu(this,r3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const o=n.displayName??void 0,h=n.email??void 0,m=n.phoneNumber??void 0,x=n.photoURL??void 0,v=n.tenantId??void 0,T=n._redirectEventId??void 0,A=n.createdAt??void 0,S=n.lastLoginAt??void 0,{uid:O,emailVerified:B,isAnonymous:Y,providerData:te,stsTokenManager:le}=n;Tt(O&&le,e,"internal-error");const de=Kl.fromJSON(this.name,le);Tt(typeof O=="string",e,"internal-error"),io(o,e.name),io(h,e.name),Tt(typeof B=="boolean",e,"internal-error"),Tt(typeof Y=="boolean",e,"internal-error"),io(m,e.name),io(x,e.name),io(v,e.name),io(T,e.name),io(A,e.name),io(S,e.name);const Ge=new bs({uid:O,auth:e,email:h,emailVerified:B,displayName:o,isAnonymous:Y,photoURL:x,phoneNumber:m,tenantId:v,stsTokenManager:de,createdAt:A,lastLoginAt:S});return te&&Array.isArray(te)&&(Ge.providerData=te.map(Le=>({...Le}))),T&&(Ge._redirectEventId=T),Ge}static async _fromIdTokenResponse(e,n,o=!1){const h=new Kl;h.updateFromServerResponse(n);const m=new bs({uid:n.localId,auth:e,stsTokenManager:h,isAnonymous:o});return await ff(m),m}static async _fromGetAccountInfoResponse(e,n,o){const h=n.users[0];Tt(h.localId!==void 0,"internal-error");const m=h.providerUserInfo!==void 0?cx(h.providerUserInfo):[],x=!(h.email&&h.passwordHash)&&!m?.length,v=new Kl;v.updateFromIdToken(o);const T=new bs({uid:h.localId,auth:e,stsTokenManager:v,isAnonymous:x}),A={uid:h.localId,displayName:h.displayName||null,photoURL:h.photoUrl||null,email:h.email||null,emailVerified:h.emailVerified||!1,phoneNumber:h.phoneNumber||null,tenantId:h.tenantId||null,providerData:m,metadata:new y1(h.createdAt,h.lastLoginAt),isAnonymous:!(h.email&&h.passwordHash)&&!m?.length};return Object.assign(T,A),T}}const gy=new Map;function Aa(a){va(a instanceof Function,"Expected a class definition");let e=gy.get(a);return e?(va(e instanceof a,"Instance stored in cache mismatched with class"),e):(e=new a,gy.set(a,e),e)}class ux{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ux.type="NONE";const my=ux;function Qh(a,e,n){return`firebase:${a}:${e}:${n}`}class Ql{constructor(e,n,o){this.persistence=e,this.auth=n,this.userKey=o;const{config:h,name:m}=this.auth;this.fullUserKey=Qh(this.userKey,h.apiKey,m),this.fullPersistenceKey=Qh("persistence",h.apiKey,m),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await hf(this.auth,{idToken:e}).catch(()=>{});return n?bs._fromGetAccountInfoResponse(this.auth,n,e):null}return bs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,o="authUser"){if(!n.length)return new Ql(Aa(my),e,o);const h=(await Promise.all(n.map(async A=>{if(await A._isAvailable())return A}))).filter(A=>A);let m=h[0]||Aa(my);const x=Qh(o,e.config.apiKey,e.name);let v=null;for(const A of n)try{const S=await A._get(x);if(S){let O;if(typeof S=="string"){const B=await hf(e,{idToken:S}).catch(()=>{});if(!B)break;O=await bs._fromGetAccountInfoResponse(e,B,S)}else O=bs._fromJSON(e,S);A!==m&&(v=O),m=A;break}}catch{}const T=h.filter(A=>A._shouldAllowMigration);return!m._shouldAllowMigration||!T.length?new Ql(m,e,o):(m=T[0],v&&await m._set(x,v.toJSON()),await Promise.all(n.map(async A=>{if(A!==m)try{await A._remove(x)}catch{}})),new Ql(m,e,o))}}function py(a){const e=a.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(px(e))return"Blackberry";if(yx(e))return"Webos";if(fx(e))return"Safari";if((e.includes("chrome/")||dx(e))&&!e.includes("edge/"))return"Chrome";if(mx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,o=a.match(n);if(o?.length===2)return o[1]}return"Other"}function hx(a=gi()){return/firefox\//i.test(a)}function fx(a=gi()){const e=a.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dx(a=gi()){return/crios\//i.test(a)}function gx(a=gi()){return/iemobile/i.test(a)}function mx(a=gi()){return/android/i.test(a)}function px(a=gi()){return/blackberry/i.test(a)}function yx(a=gi()){return/webos/i.test(a)}function Z1(a=gi()){return/iphone|ipad|ipod/i.test(a)||/macintosh/i.test(a)&&/mobile/i.test(a)}function h3(a=gi()){return Z1(a)&&!!window.navigator?.standalone}function f3(){return bT()&&document.documentMode===10}function Ex(a=gi()){return Z1(a)||mx(a)||yx(a)||px(a)||/windows phone/i.test(a)||gx(a)}function xx(a,e=[]){let n;switch(a){case"Browser":n=py(gi());break;case"Worker":n=`${py(gi())}-${a}`;break;default:n=a}const o=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${lc}/${o}`}class d3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const o=m=>new Promise((x,v)=>{try{const T=e(m);x(T)}catch(T){v(T)}});o.onAbort=n,this.queue.push(o);const h=this.queue.length-1;return()=>{this.queue[h]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const o of this.queue)await o(e),o.onAbort&&n.push(o.onAbort)}catch(o){n.reverse();for(const h of n)try{h()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:o?.message})}}}async function g3(a,e={}){return vo(a,"GET","/v2/passwordPolicy",bo(a,e))}const m3=6;class p3{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??m3,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const o=this.customStrengthOptions.minPasswordLength,h=this.customStrengthOptions.maxPasswordLength;o&&(n.meetsMinPasswordLength=e.length>=o),h&&(n.meetsMaxPasswordLength=e.length<=h)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let o;for(let h=0;h<e.length;h++)o=e.charAt(h),this.updatePasswordCharacterOptionsStatuses(n,o>="a"&&o<="z",o>="A"&&o<="Z",o>="0"&&o<="9",this.allowedNonAlphanumericCharacters.includes(o))}updatePasswordCharacterOptionsStatuses(e,n,o,h,m){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=o)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=h)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=m))}}class y3{constructor(e,n,o,h){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=o,this.config=h,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yy(this),this.idTokenSubscription=new yy(this),this.beforeStateQueue=new d3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ix,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=h.sdkClientVersion,this._persistenceManagerAvailable=new Promise(m=>this._resolvePersistenceManagerAvailable=m)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Aa(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ql.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await hf(this,{idToken:e}),o=await bs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(o)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ds(this.app)){const m=this.app.settings.authIdToken;return m?new Promise(x=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(m).then(x,x))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let o=n,h=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const m=this.redirectUser?._redirectEventId,x=o?._redirectEventId,v=await this.tryRedirectSignIn(e);(!m||m===x)&&v?.user&&(o=v.user,h=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(h)try{await this.beforeStateQueue.runMiddleware(o)}catch(m){o=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(m))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ff(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Kb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ds(this.app))return Promise.reject(wa(this));const n=e?Ar(e):null;return n&&Tt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ds(this.app)?Promise.reject(wa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ds(this.app)?Promise.reject(wa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Aa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await g3(this),n=new p3(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _u("auth","Firebase",e())}onAuthStateChanged(e,n,o){return this.registerStateListener(this.authStateSubscription,e,n,o)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,o){return this.registerStateListener(this.idTokenSubscription,e,n,o)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const o=this.onAuthStateChanged(()=>{o(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),o={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(o.tenantId=this.tenantId),await u3(this,o)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const o=await this.getOrInitRedirectPersistenceManager(n);return e===null?o.removeCurrentUser():o.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Aa(e)||this._popupRedirectResolver;Tt(n,this,"argument-error"),this.redirectPersistenceManager=await Ql.create(this,[Aa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,o,h){if(this._deleted)return()=>{};const m=typeof n=="function"?n:n.next.bind(n);let x=!1;const v=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tt(v,this,"internal-error"),v.then(()=>{x||m(this.currentUser)}),typeof n=="function"){const T=e.addObserver(n,o,h);return()=>{x=!0,T()}}else{const T=e.addObserver(n);return()=>{x=!0,T()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const o=await this._getAppCheckToken();return o&&(e["X-Firebase-AppCheck"]=o),e}async _getAppCheckToken(){if(ds(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Xb(`Error while retrieving App Check token: ${e.error}`),e?.token}}function cl(a){return Ar(a)}class yy{constructor(e){this.auth=e,this.observer=null,this.addObserver=DT(n=>this.observer=n)}get next(){return Tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Mf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function E3(a){Mf=a}function _x(a){return Mf.loadJS(a)}function x3(){return Mf.recaptchaEnterpriseScript}function _3(){return Mf.gapiScript}function A3(a){return`__${a}${Math.floor(Math.random()*1e6)}`}class w3{constructor(){this.enterprise=new T3}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class T3{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const b3="recaptcha-enterprise",Ax="NO_RECAPTCHA";class v3{constructor(e){this.type=b3,this.auth=cl(e)}async verify(e="verify",n=!1){async function o(m){if(!n){if(m.tenantId==null&&m._agentRecaptchaConfig!=null)return m._agentRecaptchaConfig.siteKey;if(m.tenantId!=null&&m._tenantRecaptchaConfigs[m.tenantId]!==void 0)return m._tenantRecaptchaConfigs[m.tenantId].siteKey}return new Promise(async(x,v)=>{n3(m,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(T=>{if(T.recaptchaKey===void 0)v(new Error("recaptcha Enterprise site key undefined"));else{const A=new t3(T);return m.tenantId==null?m._agentRecaptchaConfig=A:m._tenantRecaptchaConfigs[m.tenantId]=A,x(A.siteKey)}}).catch(T=>{v(T)})})}function h(m,x,v){const T=window.grecaptcha;fy(T)?T.enterprise.ready(()=>{T.enterprise.execute(m,{action:e}).then(A=>{x(A)}).catch(()=>{x(Ax)})}):v(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new w3().execute("siteKey",{action:"verify"}):new Promise((m,x)=>{o(this.auth).then(v=>{if(!n&&fy(window.grecaptcha))h(v,m,x);else{if(typeof window>"u"){x(new Error("RecaptchaVerifier is only supported in browser"));return}let T=x3();T.length!==0&&(T+=v),_x(T).then(()=>{h(v,m,x)}).catch(A=>{x(A)})}}).catch(v=>{x(v)})})}}async function Ey(a,e,n,o=!1,h=!1){const m=new v3(a);let x;if(h)x=Ax;else try{x=await m.verify(n)}catch{x=await m.verify(n,!0)}const v={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in v){const T=v.phoneEnrollmentInfo.phoneNumber,A=v.phoneEnrollmentInfo.recaptchaToken;Object.assign(v,{phoneEnrollmentInfo:{phoneNumber:T,recaptchaToken:A,captchaResponse:x,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in v){const T=v.phoneSignInInfo.recaptchaToken;Object.assign(v,{phoneSignInInfo:{recaptchaToken:T,captchaResponse:x,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return v}return o?Object.assign(v,{captchaResp:x}):Object.assign(v,{captchaResponse:x}),Object.assign(v,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(v,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),v}async function E1(a,e,n,o,h){if(a._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const m=await Ey(a,e,n,n==="getOobCode");return o(a,m)}else return o(a,e).catch(async m=>{if(m.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const x=await Ey(a,e,n,n==="getOobCode");return o(a,x)}else return Promise.reject(m)})}function C3(a,e){const n=q1(a,"auth");if(n.isInitialized()){const h=n.getImmediate(),m=n.getOptions();if(nl(m,e??{}))return h;vs(h,"already-initialized")}return n.initialize({options:e})}function S3(a,e){const n=e?.persistence||[],o=(Array.isArray(n)?n:[n]).map(Aa);e?.errorMap&&a._updateErrorMap(e.errorMap),a._initializeWithPersistence(o,e?.popupRedirectResolver)}function I3(a,e,n){const o=cl(a);Tt(/^https?:\/\//.test(e),o,"invalid-emulator-scheme");const h=!1,m=wx(e),{host:x,port:v}=R3(e),T=v===null?"":`:${v}`,A={url:`${m}//${x}${T}/`},S=Object.freeze({host:x,port:v,protocol:m.replace(":",""),options:Object.freeze({disableWarnings:h})});if(!o._canInitEmulator){Tt(o.config.emulator&&o.emulatorConfig,o,"emulator-config-failed"),Tt(nl(A,o.config.emulator)&&nl(S,o.emulatorConfig),o,"emulator-config-failed");return}o.config.emulator=A,o.emulatorConfig=S,o.settings.appVerificationDisabledForTesting=!0,oc(x)?(QE(`${m}//${x}${T}`),ZE("Auth",!0)):N3()}function wx(a){const e=a.indexOf(":");return e<0?"":a.substr(0,e+1)}function R3(a){const e=wx(a),n=/(\/\/)?([^?#/]+)/.exec(a.substr(e.length));if(!n)return{host:"",port:null};const o=n[2].split("@").pop()||"",h=/^(\[[^\]]+\])(:|$)/.exec(o);if(h){const m=h[1];return{host:m,port:xy(o.substr(m.length+1))}}else{const[m,x]=o.split(":");return{host:m,port:xy(x)}}}function xy(a){if(!a)return null;const e=Number(a);return isNaN(e)?null:e}function N3(){function a(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",a):a())}class J1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return _a("not implemented")}_getIdTokenResponse(e){return _a("not implemented")}_linkToIdToken(e,n){return _a("not implemented")}_getReauthenticationResolver(e){return _a("not implemented")}}async function O3(a,e){return vo(a,"POST","/v1/accounts:signUp",e)}async function D3(a,e){return Tu(a,"POST","/v1/accounts:signInWithPassword",bo(a,e))}async function M3(a,e){return Tu(a,"POST","/v1/accounts:signInWithEmailLink",bo(a,e))}async function L3(a,e){return Tu(a,"POST","/v1/accounts:signInWithEmailLink",bo(a,e))}class fu extends J1{constructor(e,n,o,h=null){super("password",o),this._email=e,this._password=n,this._tenantId=h}static _fromEmailAndPassword(e,n){return new fu(e,n,"password")}static _fromEmailAndCode(e,n,o=null){return new fu(e,n,"emailLink",o)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return E1(e,n,"signInWithPassword",D3);case"emailLink":return M3(e,{email:this._email,oobCode:this._password});default:vs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const o={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return E1(e,o,"signUpPassword",O3);case"emailLink":return L3(e,{idToken:n,email:this._email,oobCode:this._password});default:vs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Zl(a,e){return Tu(a,"POST","/v1/accounts:signInWithIdp",bo(a,e))}const k3="http://localhost";class il extends J1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new il(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):vs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:o,signInMethod:h,...m}=n;if(!o||!h)return null;const x=new il(o,h);return x.idToken=m.idToken||void 0,x.accessToken=m.accessToken||void 0,x.secret=m.secret,x.nonce=m.nonce,x.pendingToken=m.pendingToken||null,x}_getIdTokenResponse(e){const n=this.buildRequest();return Zl(e,n)}_linkToIdToken(e,n){const o=this.buildRequest();return o.idToken=n,Zl(e,o)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Zl(e,n)}buildRequest(){const e={requestUri:k3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Au(n)}return e}}function P3(a){switch(a){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function B3(a){const e=Qc(Zc(a)).link,n=e?Qc(Zc(e)).deep_link_id:null,o=Qc(Zc(a)).deep_link_id;return(o?Qc(Zc(o)).link:null)||o||n||e||a}class $1{constructor(e){const n=Qc(Zc(e)),o=n.apiKey??null,h=n.oobCode??null,m=P3(n.mode??null);Tt(o&&h&&m,"argument-error"),this.apiKey=o,this.operation=m,this.code=h,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=B3(e);try{return new $1(n)}catch{return null}}}class cc{constructor(){this.providerId=cc.PROVIDER_ID}static credential(e,n){return fu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const o=$1.parseLink(n);return Tt(o,"argument-error"),fu._fromEmailAndCode(e,o.code,o.tenantId)}}cc.PROVIDER_ID="password";cc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";cc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Tx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class bu extends Tx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class so extends bu{constructor(){super("facebook.com")}static credential(e){return il._fromParams({providerId:so.PROVIDER_ID,signInMethod:so.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return so.credentialFromTaggedObject(e)}static credentialFromError(e){return so.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return so.credential(e.oauthAccessToken)}catch{return null}}}so.FACEBOOK_SIGN_IN_METHOD="facebook.com";so.PROVIDER_ID="facebook.com";class ao extends bu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return il._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ao.credentialFromTaggedObject(e)}static credentialFromError(e){return ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:o}=e;if(!n&&!o)return null;try{return ao.credential(n,o)}catch{return null}}}ao.GOOGLE_SIGN_IN_METHOD="google.com";ao.PROVIDER_ID="google.com";class oo extends bu{constructor(){super("github.com")}static credential(e){return il._fromParams({providerId:oo.PROVIDER_ID,signInMethod:oo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oo.credentialFromTaggedObject(e)}static credentialFromError(e){return oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oo.credential(e.oauthAccessToken)}catch{return null}}}oo.GITHUB_SIGN_IN_METHOD="github.com";oo.PROVIDER_ID="github.com";class lo extends bu{constructor(){super("twitter.com")}static credential(e,n){return il._fromParams({providerId:lo.PROVIDER_ID,signInMethod:lo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return lo.credentialFromTaggedObject(e)}static credentialFromError(e){return lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:o}=e;if(!n||!o)return null;try{return lo.credential(n,o)}catch{return null}}}lo.TWITTER_SIGN_IN_METHOD="twitter.com";lo.PROVIDER_ID="twitter.com";async function V3(a,e){return Tu(a,"POST","/v1/accounts:signUp",bo(a,e))}class sl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,o,h=!1){const m=await bs._fromIdTokenResponse(e,o,h),x=_y(o);return new sl({user:m,providerId:x,_tokenResponse:o,operationType:n})}static async _forOperation(e,n,o){await e._updateTokensIfNecessary(o,!0);const h=_y(o);return new sl({user:e,providerId:h,_tokenResponse:o,operationType:n})}}function _y(a){return a.providerId?a.providerId:"phoneNumber"in a?"phone":null}class df extends Ia{constructor(e,n,o,h){super(n.code,n.message),this.operationType=o,this.user=h,Object.setPrototypeOf(this,df.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:o}}static _fromErrorAndOperation(e,n,o,h){return new df(e,n,o,h)}}function bx(a,e,n,o){return(e==="reauthenticate"?n._getReauthenticationResolver(a):n._getIdTokenResponse(a)).catch(m=>{throw m.code==="auth/multi-factor-auth-required"?df._fromErrorAndOperation(a,m,e,o):m})}async function U3(a,e,n=!1){const o=await hu(a,e._linkToIdToken(a.auth,await a.getIdToken()),n);return sl._forOperation(a,"link",o)}async function F3(a,e,n=!1){const{auth:o}=a;if(ds(o.app))return Promise.reject(wa(o));const h="reauthenticate";try{const m=await hu(a,bx(o,h,e,a),n);Tt(m.idToken,o,"internal-error");const x=Q1(m.idToken);Tt(x,o,"internal-error");const{sub:v}=x;return Tt(a.uid===v,o,"user-mismatch"),sl._forOperation(a,h,m)}catch(m){throw m?.code==="auth/user-not-found"&&vs(o,"user-mismatch"),m}}async function vx(a,e,n=!1){if(ds(a.app))return Promise.reject(wa(a));const o="signIn",h=await bx(a,o,e),m=await sl._fromIdTokenResponse(a,o,h);return n||await a._updateCurrentUser(m.user),m}async function z3(a,e){return vx(cl(a),e)}async function Cx(a){const e=cl(a);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Zh(a,e,n){if(ds(a.app))return Promise.reject(wa(a));const o=cl(a),x=await E1(o,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",V3).catch(T=>{throw T.code==="auth/password-does-not-meet-requirements"&&Cx(a),T}),v=await sl._fromIdTokenResponse(o,"signIn",x);return await o._updateCurrentUser(v.user),v}function j3(a,e,n){return ds(a.app)?Promise.reject(wa(a)):z3(Ar(a),cc.credential(e,n)).catch(async o=>{throw o.code==="auth/password-does-not-meet-requirements"&&Cx(a),o})}function H3(a,e,n,o){return Ar(a).onIdTokenChanged(e,n,o)}function G3(a,e,n){return Ar(a).beforeAuthStateChanged(e,n)}function q3(a,e,n,o){return Ar(a).onAuthStateChanged(e,n,o)}function X3(a){return Ar(a).signOut()}const gf="__sak";class Sx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(gf,"1"),this.storage.removeItem(gf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Y3=1e3,W3=10;class Ix extends Sx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ex(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const o=this.storage.getItem(n),h=this.localCache[n];o!==h&&e(n,h,o)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((x,v,T)=>{this.notifyListeners(x,T)});return}const o=e.key;n?this.detachListener():this.stopPolling();const h=()=>{const x=this.storage.getItem(o);!n&&this.localCache[o]===x||this.notifyListeners(o,x)},m=this.storage.getItem(o);f3()&&m!==e.newValue&&e.newValue!==e.oldValue?setTimeout(h,W3):h()}notifyListeners(e,n){this.localCache[e]=n;const o=this.listeners[e];if(o)for(const h of Array.from(o))h(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,o)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:o}),!0)})},Y3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ix.type="LOCAL";const K3=Ix;class Rx extends Sx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Rx.type="SESSION";const Nx=Rx;function Q3(a){return Promise.all(a.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Lf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(h=>h.isListeningto(e));if(n)return n;const o=new Lf(e);return this.receivers.push(o),o}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:o,eventType:h,data:m}=n.data,x=this.handlersMap[h];if(!x?.size)return;n.ports[0].postMessage({status:"ack",eventId:o,eventType:h});const v=Array.from(x).map(async A=>A(n.origin,m)),T=await Q3(v);n.ports[0].postMessage({status:"done",eventId:o,eventType:h,response:T})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lf.receivers=[];function eg(a="",e=10){let n="";for(let o=0;o<e;o++)n+=Math.floor(Math.random()*10);return a+n}class Z3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,o=50){const h=typeof MessageChannel<"u"?new MessageChannel:null;if(!h)throw new Error("connection_unavailable");let m,x;return new Promise((v,T)=>{const A=eg("",20);h.port1.start();const S=setTimeout(()=>{T(new Error("unsupported_event"))},o);x={messageChannel:h,onMessage(O){const B=O;if(B.data.eventId===A)switch(B.data.status){case"ack":clearTimeout(S),m=setTimeout(()=>{T(new Error("timeout"))},3e3);break;case"done":clearTimeout(m),v(B.data.response);break;default:clearTimeout(S),clearTimeout(m),T(new Error("invalid_response"));break}}},this.handlers.add(x),h.port1.addEventListener("message",x.onMessage),this.target.postMessage({eventType:e,eventId:A,data:n},[h.port2])}).finally(()=>{x&&this.removeMessageHandler(x)})}}function Us(){return window}function J3(a){Us().location.href=a}function Ox(){return typeof Us().WorkerGlobalScope<"u"&&typeof Us().importScripts=="function"}async function $3(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ev(){return navigator?.serviceWorker?.controller||null}function tv(){return Ox()?self:null}const Dx="firebaseLocalStorageDb",nv=1,mf="firebaseLocalStorage",Mx="fbase_key";class vu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function kf(a,e){return a.transaction([mf],e?"readwrite":"readonly").objectStore(mf)}function rv(){const a=indexedDB.deleteDatabase(Dx);return new vu(a).toPromise()}function x1(){const a=indexedDB.open(Dx,nv);return new Promise((e,n)=>{a.addEventListener("error",()=>{n(a.error)}),a.addEventListener("upgradeneeded",()=>{const o=a.result;try{o.createObjectStore(mf,{keyPath:Mx})}catch(h){n(h)}}),a.addEventListener("success",async()=>{const o=a.result;o.objectStoreNames.contains(mf)?e(o):(o.close(),await rv(),e(await x1()))})})}async function Ay(a,e,n){const o=kf(a,!0).put({[Mx]:e,value:n});return new vu(o).toPromise()}async function iv(a,e){const n=kf(a,!1).get(e),o=await new vu(n).toPromise();return o===void 0?null:o.value}function wy(a,e){const n=kf(a,!0).delete(e);return new vu(n).toPromise()}const sv=800,av=3;class Lx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await x1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const o=await this._openDb();return await e(o)}catch(o){if(n++>av)throw o;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ox()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lf._getInstance(tv()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await $3(),!this.activeServiceWorker)return;this.sender=new Z3(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ev()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await x1();return await Ay(e,gf,"1"),await wy(e,gf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(o=>Ay(o,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(o=>iv(o,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>wy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(h=>{const m=kf(h,!1).getAll();return new vu(m).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],o=new Set;if(e.length!==0)for(const{fbase_key:h,value:m}of e)o.add(h),JSON.stringify(this.localCache[h])!==JSON.stringify(m)&&(this.notifyListeners(h,m),n.push(h));for(const h of Object.keys(this.localCache))this.localCache[h]&&!o.has(h)&&(this.notifyListeners(h,null),n.push(h));return n}notifyListeners(e,n){this.localCache[e]=n;const o=this.listeners[e];if(o)for(const h of Array.from(o))h(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sv)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Lx.type="LOCAL";const ov=Lx;new wu(3e4,6e4);function lv(a,e){return e?Aa(e):(Tt(a._popupRedirectResolver,a,"argument-error"),a._popupRedirectResolver)}class tg extends J1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Zl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Zl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function cv(a){return vx(a.auth,new tg(a),a.bypassAuthState)}function uv(a){const{auth:e,user:n}=a;return Tt(n,e,"internal-error"),F3(n,new tg(a),a.bypassAuthState)}async function hv(a){const{auth:e,user:n}=a;return Tt(n,e,"internal-error"),U3(n,new tg(a),a.bypassAuthState)}class kx{constructor(e,n,o,h,m=!1){this.auth=e,this.resolver=o,this.user=h,this.bypassAuthState=m,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(o){this.reject(o)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:o,postBody:h,tenantId:m,error:x,type:v}=e;if(x){this.reject(x);return}const T={auth:this.auth,requestUri:n,sessionId:o,tenantId:m||void 0,postBody:h||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(v)(T))}catch(A){this.reject(A)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cv;case"linkViaPopup":case"linkViaRedirect":return hv;case"reauthViaPopup":case"reauthViaRedirect":return uv;default:vs(this.auth,"internal-error")}}resolve(e){va(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){va(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const fv=new wu(2e3,1e4);class Xl extends kx{constructor(e,n,o,h,m){super(e,n,h,m),this.provider=o,this.authWindow=null,this.pollId=null,Xl.currentPopupAction&&Xl.currentPopupAction.cancel(),Xl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Tt(e,this.auth,"internal-error"),e}async onExecution(){va(this.filter.length===1,"Popup operations only handle one event");const e=eg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Vs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,fv.get())};e()}}Xl.currentPopupAction=null;const dv="pendingRedirect",Jh=new Map;class gv extends kx{constructor(e,n,o=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,o),this.eventId=null}async execute(){let e=Jh.get(this.auth._key());if(!e){try{const o=await mv(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(o)}catch(n){e=()=>Promise.reject(n)}Jh.set(this.auth._key(),e)}return this.bypassAuthState||Jh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mv(a,e){const n=Ev(e),o=yv(a);if(!await o._isAvailable())return!1;const h=await o._get(n)==="true";return await o._remove(n),h}function pv(a,e){Jh.set(a._key(),e)}function yv(a){return Aa(a._redirectPersistence)}function Ev(a){return Qh(dv,a.config.apiKey,a.name)}async function xv(a,e,n=!1){if(ds(a.app))return Promise.reject(wa(a));const o=cl(a),h=lv(o,e),x=await new gv(o,h,n).execute();return x&&!n&&(delete x.user._redirectEventId,await o._persistUserIfCurrent(x.user),await o._setRedirectUser(null,e)),x}const _v=600*1e3;class Av{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(o=>{this.isEventForConsumer(e,o)&&(n=!0,this.sendToConsumer(e,o),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wv(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Px(e)){const o=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Vs(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const o=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&o}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_v&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ty(e))}saveEventToCache(e){this.cachedEventUids.add(Ty(e)),this.lastProcessedEventTime=Date.now()}}function Ty(a){return[a.type,a.eventId,a.sessionId,a.tenantId].filter(e=>e).join("-")}function Px({type:a,error:e}){return a==="unknown"&&e?.code==="auth/no-auth-event"}function wv(a){switch(a.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Px(a);default:return!1}}async function Tv(a,e={}){return vo(a,"GET","/v1/projects",e)}const bv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vv=/^https?/;async function Cv(a){if(a.config.emulator)return;const{authorizedDomains:e}=await Tv(a);for(const n of e)try{if(Sv(n))return}catch{}vs(a,"unauthorized-domain")}function Sv(a){const e=p1(),{protocol:n,hostname:o}=new URL(e);if(a.startsWith("chrome-extension://")){const x=new URL(a);return x.hostname===""&&o===""?n==="chrome-extension:"&&a.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&x.hostname===o}if(!vv.test(n))return!1;if(bv.test(a))return o===a;const h=a.replace(/\./g,"\\.");return new RegExp("^(.+\\."+h+"|"+h+")$","i").test(o)}const Iv=new wu(3e4,6e4);function by(){const a=Us().___jsl;if(a?.H){for(const e of Object.keys(a.H))if(a.H[e].r=a.H[e].r||[],a.H[e].L=a.H[e].L||[],a.H[e].r=[...a.H[e].L],a.CP)for(let n=0;n<a.CP.length;n++)a.CP[n]=null}}function Rv(a){return new Promise((e,n)=>{function o(){by(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{by(),n(Vs(a,"network-request-failed"))},timeout:Iv.get()})}if(Us().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Us().gapi?.load)o();else{const h=A3("iframefcb");return Us()[h]=()=>{gapi.load?o():n(Vs(a,"network-request-failed"))},_x(`${_3()}?onload=${h}`).catch(m=>n(m))}}).catch(e=>{throw $h=null,e})}let $h=null;function Nv(a){return $h=$h||Rv(a),$h}const Ov=new wu(5e3,15e3),Dv="__/auth/iframe",Mv="emulator/auth/iframe",Lv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pv(a){const e=a.config;Tt(e.authDomain,a,"auth-domain-config-required");const n=e.emulator?K1(e,Mv):`https://${a.config.authDomain}/${Dv}`,o={apiKey:e.apiKey,appName:a.name,v:lc},h=kv.get(a.config.apiHost);h&&(o.eid=h);const m=a._getFrameworks();return m.length&&(o.fw=m.join(",")),`${n}?${Au(o).slice(1)}`}async function Bv(a){const e=await Nv(a),n=Us().gapi;return Tt(n,a,"internal-error"),e.open({where:document.body,url:Pv(a),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Lv,dontclear:!0},o=>new Promise(async(h,m)=>{await o.restyle({setHideOnLeave:!1});const x=Vs(a,"network-request-failed"),v=Us().setTimeout(()=>{m(x)},Ov.get());function T(){Us().clearTimeout(v),h(o)}o.ping(T).then(T,()=>{m(x)})}))}const Vv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Uv=500,Fv=600,zv="_blank",jv="http://localhost";class vy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Hv(a,e,n,o=Uv,h=Fv){const m=Math.max((window.screen.availHeight-h)/2,0).toString(),x=Math.max((window.screen.availWidth-o)/2,0).toString();let v="";const T={...Vv,width:o.toString(),height:h.toString(),top:m,left:x},A=gi().toLowerCase();n&&(v=dx(A)?zv:n),hx(A)&&(e=e||jv,T.scrollbars="yes");const S=Object.entries(T).reduce((B,[Y,te])=>`${B}${Y}=${te},`,"");if(h3(A)&&v!=="_self")return Gv(e||"",v),new vy(null);const O=window.open(e||"",v,S);Tt(O,a,"popup-blocked");try{O.focus()}catch{}return new vy(O)}function Gv(a,e){const n=document.createElement("a");n.href=a,n.target=e;const o=document.createEvent("MouseEvent");o.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(o)}const qv="__/auth/handler",Xv="emulator/auth/handler",Yv=encodeURIComponent("fac");async function Cy(a,e,n,o,h,m){Tt(a.config.authDomain,a,"auth-domain-config-required"),Tt(a.config.apiKey,a,"invalid-api-key");const x={apiKey:a.config.apiKey,appName:a.name,authType:n,redirectUrl:o,v:lc,eventId:h};if(e instanceof Tx){e.setDefaultLanguage(a.languageCode),x.providerId=e.providerId||"",OT(e.getCustomParameters())||(x.customParameters=JSON.stringify(e.getCustomParameters()));for(const[S,O]of Object.entries({}))x[S]=O}if(e instanceof bu){const S=e.getScopes().filter(O=>O!=="");S.length>0&&(x.scopes=S.join(","))}a.tenantId&&(x.tid=a.tenantId);const v=x;for(const S of Object.keys(v))v[S]===void 0&&delete v[S];const T=await a._getAppCheckToken(),A=T?`#${Yv}=${encodeURIComponent(T)}`:"";return`${Wv(a)}?${Au(v).slice(1)}${A}`}function Wv({config:a}){return a.emulator?K1(a,Xv):`https://${a.authDomain}/${qv}`}const $0="webStorageSupport";class Kv{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Nx,this._completeRedirectFn=xv,this._overrideRedirectResult=pv}async _openPopup(e,n,o,h){va(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const m=await Cy(e,n,o,p1(),h);return Hv(e,m,eg())}async _openRedirect(e,n,o,h){await this._originValidation(e);const m=await Cy(e,n,o,p1(),h);return J3(m),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:h,promise:m}=this.eventManagers[n];return h?Promise.resolve(h):(va(m,"If manager is not set, promise should be"),m)}const o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch(()=>{delete this.eventManagers[n]}),o}async initAndGetManager(e){const n=await Bv(e),o=new Av(e);return n.register("authEvent",h=>(Tt(h?.authEvent,e,"invalid-auth-event"),{status:o.onEvent(h.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:o},this.iframes[e._key()]=n,o}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($0,{type:$0},h=>{const m=h?.[0]?.[$0];m!==void 0&&n(!!m),vs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Cv(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ex()||fx()||Z1()}}const Qv=Kv;var Sy="@firebase/auth",Iy="1.11.1";class Zv{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(o=>{e(o?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Jv(a){switch(a){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $v(a){$l(new rl("auth",(e,{options:n})=>{const o=e.getProvider("app").getImmediate(),h=e.getProvider("heartbeat"),m=e.getProvider("app-check-internal"),{apiKey:x,authDomain:v}=o.options;Tt(x&&!x.includes(":"),"invalid-api-key",{appName:o.name});const T={apiKey:x,authDomain:v,clientPlatform:a,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xx(a)},A=new y3(o,h,m,T);return S3(A,n),A},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,o)=>{e.getProvider("auth-internal").initialize()})),$l(new rl("auth-internal",e=>{const n=cl(e.getProvider("auth").getImmediate());return(o=>new Zv(o))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),go(Sy,Iy,Jv(a)),go(Sy,Iy,"esm2020")}const eC=300,tC=KE("authIdTokenMaxAge")||eC;let Ry=null;const nC=a=>async e=>{const n=e&&await e.getIdTokenResult(),o=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(o&&o>tC)return;const h=n?.token;Ry!==h&&(Ry=h,await fetch(a,{method:h?"POST":"DELETE",headers:h?{Authorization:`Bearer ${h}`}:{}}))};function Bx(a=Y1()){const e=q1(a,"auth");if(e.isInitialized())return e.getImmediate();const n=C3(a,{popupRedirectResolver:Qv,persistence:[ov,K3,Nx]}),o=KE("authTokenSyncURL");if(o&&typeof isSecureContext=="boolean"&&isSecureContext){const m=new URL(o,location.origin);if(location.origin===m.origin){const x=nC(m.toString());G3(n,x,()=>x(n.currentUser)),H3(n,v=>x(v))}}const h=YE("auth");return h&&I3(n,`http://${h}`),n}function rC(){return document.getElementsByTagName("head")?.[0]??document}E3({loadJS(a){return new Promise((e,n)=>{const o=document.createElement("script");o.setAttribute("src",a),o.onload=e,o.onerror=h=>{const m=Vs("internal-error");m.customData=h,n(m)},o.type="text/javascript",o.charset="UTF-8",rC().appendChild(o)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$v("Browser");var Ny=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var mo,Vx;(function(){var a;function e(F,z){function V(){}V.prototype=z.prototype,F.F=z.prototype,F.prototype=new V,F.prototype.constructor=F,F.D=function(Z,X,W){for(var G=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)G[Qe-2]=arguments[Qe];return z.prototype[X].apply(Z,G)}}function n(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(o,n),o.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function h(F,z,V){V||(V=0);const Z=Array(16);if(typeof z=="string")for(var X=0;X<16;++X)Z[X]=z.charCodeAt(V++)|z.charCodeAt(V++)<<8|z.charCodeAt(V++)<<16|z.charCodeAt(V++)<<24;else for(X=0;X<16;++X)Z[X]=z[V++]|z[V++]<<8|z[V++]<<16|z[V++]<<24;z=F.g[0],V=F.g[1],X=F.g[2];let W=F.g[3],G;G=z+(W^V&(X^W))+Z[0]+3614090360&4294967295,z=V+(G<<7&4294967295|G>>>25),G=W+(X^z&(V^X))+Z[1]+3905402710&4294967295,W=z+(G<<12&4294967295|G>>>20),G=X+(V^W&(z^V))+Z[2]+606105819&4294967295,X=W+(G<<17&4294967295|G>>>15),G=V+(z^X&(W^z))+Z[3]+3250441966&4294967295,V=X+(G<<22&4294967295|G>>>10),G=z+(W^V&(X^W))+Z[4]+4118548399&4294967295,z=V+(G<<7&4294967295|G>>>25),G=W+(X^z&(V^X))+Z[5]+1200080426&4294967295,W=z+(G<<12&4294967295|G>>>20),G=X+(V^W&(z^V))+Z[6]+2821735955&4294967295,X=W+(G<<17&4294967295|G>>>15),G=V+(z^X&(W^z))+Z[7]+4249261313&4294967295,V=X+(G<<22&4294967295|G>>>10),G=z+(W^V&(X^W))+Z[8]+1770035416&4294967295,z=V+(G<<7&4294967295|G>>>25),G=W+(X^z&(V^X))+Z[9]+2336552879&4294967295,W=z+(G<<12&4294967295|G>>>20),G=X+(V^W&(z^V))+Z[10]+4294925233&4294967295,X=W+(G<<17&4294967295|G>>>15),G=V+(z^X&(W^z))+Z[11]+2304563134&4294967295,V=X+(G<<22&4294967295|G>>>10),G=z+(W^V&(X^W))+Z[12]+1804603682&4294967295,z=V+(G<<7&4294967295|G>>>25),G=W+(X^z&(V^X))+Z[13]+4254626195&4294967295,W=z+(G<<12&4294967295|G>>>20),G=X+(V^W&(z^V))+Z[14]+2792965006&4294967295,X=W+(G<<17&4294967295|G>>>15),G=V+(z^X&(W^z))+Z[15]+1236535329&4294967295,V=X+(G<<22&4294967295|G>>>10),G=z+(X^W&(V^X))+Z[1]+4129170786&4294967295,z=V+(G<<5&4294967295|G>>>27),G=W+(V^X&(z^V))+Z[6]+3225465664&4294967295,W=z+(G<<9&4294967295|G>>>23),G=X+(z^V&(W^z))+Z[11]+643717713&4294967295,X=W+(G<<14&4294967295|G>>>18),G=V+(W^z&(X^W))+Z[0]+3921069994&4294967295,V=X+(G<<20&4294967295|G>>>12),G=z+(X^W&(V^X))+Z[5]+3593408605&4294967295,z=V+(G<<5&4294967295|G>>>27),G=W+(V^X&(z^V))+Z[10]+38016083&4294967295,W=z+(G<<9&4294967295|G>>>23),G=X+(z^V&(W^z))+Z[15]+3634488961&4294967295,X=W+(G<<14&4294967295|G>>>18),G=V+(W^z&(X^W))+Z[4]+3889429448&4294967295,V=X+(G<<20&4294967295|G>>>12),G=z+(X^W&(V^X))+Z[9]+568446438&4294967295,z=V+(G<<5&4294967295|G>>>27),G=W+(V^X&(z^V))+Z[14]+3275163606&4294967295,W=z+(G<<9&4294967295|G>>>23),G=X+(z^V&(W^z))+Z[3]+4107603335&4294967295,X=W+(G<<14&4294967295|G>>>18),G=V+(W^z&(X^W))+Z[8]+1163531501&4294967295,V=X+(G<<20&4294967295|G>>>12),G=z+(X^W&(V^X))+Z[13]+2850285829&4294967295,z=V+(G<<5&4294967295|G>>>27),G=W+(V^X&(z^V))+Z[2]+4243563512&4294967295,W=z+(G<<9&4294967295|G>>>23),G=X+(z^V&(W^z))+Z[7]+1735328473&4294967295,X=W+(G<<14&4294967295|G>>>18),G=V+(W^z&(X^W))+Z[12]+2368359562&4294967295,V=X+(G<<20&4294967295|G>>>12),G=z+(V^X^W)+Z[5]+4294588738&4294967295,z=V+(G<<4&4294967295|G>>>28),G=W+(z^V^X)+Z[8]+2272392833&4294967295,W=z+(G<<11&4294967295|G>>>21),G=X+(W^z^V)+Z[11]+1839030562&4294967295,X=W+(G<<16&4294967295|G>>>16),G=V+(X^W^z)+Z[14]+4259657740&4294967295,V=X+(G<<23&4294967295|G>>>9),G=z+(V^X^W)+Z[1]+2763975236&4294967295,z=V+(G<<4&4294967295|G>>>28),G=W+(z^V^X)+Z[4]+1272893353&4294967295,W=z+(G<<11&4294967295|G>>>21),G=X+(W^z^V)+Z[7]+4139469664&4294967295,X=W+(G<<16&4294967295|G>>>16),G=V+(X^W^z)+Z[10]+3200236656&4294967295,V=X+(G<<23&4294967295|G>>>9),G=z+(V^X^W)+Z[13]+681279174&4294967295,z=V+(G<<4&4294967295|G>>>28),G=W+(z^V^X)+Z[0]+3936430074&4294967295,W=z+(G<<11&4294967295|G>>>21),G=X+(W^z^V)+Z[3]+3572445317&4294967295,X=W+(G<<16&4294967295|G>>>16),G=V+(X^W^z)+Z[6]+76029189&4294967295,V=X+(G<<23&4294967295|G>>>9),G=z+(V^X^W)+Z[9]+3654602809&4294967295,z=V+(G<<4&4294967295|G>>>28),G=W+(z^V^X)+Z[12]+3873151461&4294967295,W=z+(G<<11&4294967295|G>>>21),G=X+(W^z^V)+Z[15]+530742520&4294967295,X=W+(G<<16&4294967295|G>>>16),G=V+(X^W^z)+Z[2]+3299628645&4294967295,V=X+(G<<23&4294967295|G>>>9),G=z+(X^(V|~W))+Z[0]+4096336452&4294967295,z=V+(G<<6&4294967295|G>>>26),G=W+(V^(z|~X))+Z[7]+1126891415&4294967295,W=z+(G<<10&4294967295|G>>>22),G=X+(z^(W|~V))+Z[14]+2878612391&4294967295,X=W+(G<<15&4294967295|G>>>17),G=V+(W^(X|~z))+Z[5]+4237533241&4294967295,V=X+(G<<21&4294967295|G>>>11),G=z+(X^(V|~W))+Z[12]+1700485571&4294967295,z=V+(G<<6&4294967295|G>>>26),G=W+(V^(z|~X))+Z[3]+2399980690&4294967295,W=z+(G<<10&4294967295|G>>>22),G=X+(z^(W|~V))+Z[10]+4293915773&4294967295,X=W+(G<<15&4294967295|G>>>17),G=V+(W^(X|~z))+Z[1]+2240044497&4294967295,V=X+(G<<21&4294967295|G>>>11),G=z+(X^(V|~W))+Z[8]+1873313359&4294967295,z=V+(G<<6&4294967295|G>>>26),G=W+(V^(z|~X))+Z[15]+4264355552&4294967295,W=z+(G<<10&4294967295|G>>>22),G=X+(z^(W|~V))+Z[6]+2734768916&4294967295,X=W+(G<<15&4294967295|G>>>17),G=V+(W^(X|~z))+Z[13]+1309151649&4294967295,V=X+(G<<21&4294967295|G>>>11),G=z+(X^(V|~W))+Z[4]+4149444226&4294967295,z=V+(G<<6&4294967295|G>>>26),G=W+(V^(z|~X))+Z[11]+3174756917&4294967295,W=z+(G<<10&4294967295|G>>>22),G=X+(z^(W|~V))+Z[2]+718787259&4294967295,X=W+(G<<15&4294967295|G>>>17),G=V+(W^(X|~z))+Z[9]+3951481745&4294967295,F.g[0]=F.g[0]+z&4294967295,F.g[1]=F.g[1]+(X+(G<<21&4294967295|G>>>11))&4294967295,F.g[2]=F.g[2]+X&4294967295,F.g[3]=F.g[3]+W&4294967295}o.prototype.v=function(F,z){z===void 0&&(z=F.length);const V=z-this.blockSize,Z=this.C;let X=this.h,W=0;for(;W<z;){if(X==0)for(;W<=V;)h(this,F,W),W+=this.blockSize;if(typeof F=="string"){for(;W<z;)if(Z[X++]=F.charCodeAt(W++),X==this.blockSize){h(this,Z),X=0;break}}else for(;W<z;)if(Z[X++]=F[W++],X==this.blockSize){h(this,Z),X=0;break}}this.h=X,this.o+=z},o.prototype.A=function(){var F=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);F[0]=128;for(var z=1;z<F.length-8;++z)F[z]=0;z=this.o*8;for(var V=F.length-8;V<F.length;++V)F[V]=z&255,z/=256;for(this.v(F),F=Array(16),z=0,V=0;V<4;++V)for(let Z=0;Z<32;Z+=8)F[z++]=this.g[V]>>>Z&255;return F};function m(F,z){var V=v;return Object.prototype.hasOwnProperty.call(V,F)?V[F]:V[F]=z(F)}function x(F,z){this.h=z;const V=[];let Z=!0;for(let X=F.length-1;X>=0;X--){const W=F[X]|0;Z&&W==z||(V[X]=W,Z=!1)}this.g=V}var v={};function T(F){return-128<=F&&F<128?m(F,function(z){return new x([z|0],z<0?-1:0)}):new x([F|0],F<0?-1:0)}function A(F){if(isNaN(F)||!isFinite(F))return O;if(F<0)return de(A(-F));const z=[];let V=1;for(let Z=0;F>=V;Z++)z[Z]=F/V|0,V*=4294967296;return new x(z,0)}function S(F,z){if(F.length==0)throw Error("number format error: empty string");if(z=z||10,z<2||36<z)throw Error("radix out of range: "+z);if(F.charAt(0)=="-")return de(S(F.substring(1),z));if(F.indexOf("-")>=0)throw Error('number format error: interior "-" character');const V=A(Math.pow(z,8));let Z=O;for(let W=0;W<F.length;W+=8){var X=Math.min(8,F.length-W);const G=parseInt(F.substring(W,W+X),z);X<8?(X=A(Math.pow(z,X)),Z=Z.j(X).add(A(G))):(Z=Z.j(V),Z=Z.add(A(G)))}return Z}var O=T(0),B=T(1),Y=T(16777216);a=x.prototype,a.m=function(){if(le(this))return-de(this).m();let F=0,z=1;for(let V=0;V<this.g.length;V++){const Z=this.i(V);F+=(Z>=0?Z:4294967296+Z)*z,z*=4294967296}return F},a.toString=function(F){if(F=F||10,F<2||36<F)throw Error("radix out of range: "+F);if(te(this))return"0";if(le(this))return"-"+de(this).toString(F);const z=A(Math.pow(F,6));var V=this;let Z="";for(;;){const X=Be(V,z).g;V=Ge(V,X.j(z));let W=((V.g.length>0?V.g[0]:V.h)>>>0).toString(F);if(V=X,te(V))return W+Z;for(;W.length<6;)W="0"+W;Z=W+Z}},a.i=function(F){return F<0?0:F<this.g.length?this.g[F]:this.h};function te(F){if(F.h!=0)return!1;for(let z=0;z<F.g.length;z++)if(F.g[z]!=0)return!1;return!0}function le(F){return F.h==-1}a.l=function(F){return F=Ge(this,F),le(F)?-1:te(F)?0:1};function de(F){const z=F.g.length,V=[];for(let Z=0;Z<z;Z++)V[Z]=~F.g[Z];return new x(V,~F.h).add(B)}a.abs=function(){return le(this)?de(this):this},a.add=function(F){const z=Math.max(this.g.length,F.g.length),V=[];let Z=0;for(let X=0;X<=z;X++){let W=Z+(this.i(X)&65535)+(F.i(X)&65535),G=(W>>>16)+(this.i(X)>>>16)+(F.i(X)>>>16);Z=G>>>16,W&=65535,G&=65535,V[X]=G<<16|W}return new x(V,V[V.length-1]&-2147483648?-1:0)};function Ge(F,z){return F.add(de(z))}a.j=function(F){if(te(this)||te(F))return O;if(le(this))return le(F)?de(this).j(de(F)):de(de(this).j(F));if(le(F))return de(this.j(de(F)));if(this.l(Y)<0&&F.l(Y)<0)return A(this.m()*F.m());const z=this.g.length+F.g.length,V=[];for(var Z=0;Z<2*z;Z++)V[Z]=0;for(Z=0;Z<this.g.length;Z++)for(let X=0;X<F.g.length;X++){const W=this.i(Z)>>>16,G=this.i(Z)&65535,Qe=F.i(X)>>>16,oe=F.i(X)&65535;V[2*Z+2*X]+=G*oe,Le(V,2*Z+2*X),V[2*Z+2*X+1]+=W*oe,Le(V,2*Z+2*X+1),V[2*Z+2*X+1]+=G*Qe,Le(V,2*Z+2*X+1),V[2*Z+2*X+2]+=W*Qe,Le(V,2*Z+2*X+2)}for(F=0;F<z;F++)V[F]=V[2*F+1]<<16|V[2*F];for(F=z;F<2*z;F++)V[F]=0;return new x(V,0)};function Le(F,z){for(;(F[z]&65535)!=F[z];)F[z+1]+=F[z]>>>16,F[z]&=65535,z++}function me(F,z){this.g=F,this.h=z}function Be(F,z){if(te(z))throw Error("division by zero");if(te(F))return new me(O,O);if(le(F))return z=Be(de(F),z),new me(de(z.g),de(z.h));if(le(z))return z=Be(F,de(z)),new me(de(z.g),z.h);if(F.g.length>30){if(le(F)||le(z))throw Error("slowDivide_ only works with positive integers.");for(var V=B,Z=z;Z.l(F)<=0;)V=ct(V),Z=ct(Z);var X=je(V,1),W=je(Z,1);for(Z=je(Z,2),V=je(V,2);!te(Z);){var G=W.add(Z);G.l(F)<=0&&(X=X.add(V),W=G),Z=je(Z,1),V=je(V,1)}return z=Ge(F,X.j(z)),new me(X,z)}for(X=O;F.l(z)>=0;){for(V=Math.max(1,Math.floor(F.m()/z.m())),Z=Math.ceil(Math.log(V)/Math.LN2),Z=Z<=48?1:Math.pow(2,Z-48),W=A(V),G=W.j(z);le(G)||G.l(F)>0;)V-=Z,W=A(V),G=W.j(z);te(W)&&(W=B),X=X.add(W),F=Ge(F,G)}return new me(X,F)}a.B=function(F){return Be(this,F).h},a.and=function(F){const z=Math.max(this.g.length,F.g.length),V=[];for(let Z=0;Z<z;Z++)V[Z]=this.i(Z)&F.i(Z);return new x(V,this.h&F.h)},a.or=function(F){const z=Math.max(this.g.length,F.g.length),V=[];for(let Z=0;Z<z;Z++)V[Z]=this.i(Z)|F.i(Z);return new x(V,this.h|F.h)},a.xor=function(F){const z=Math.max(this.g.length,F.g.length),V=[];for(let Z=0;Z<z;Z++)V[Z]=this.i(Z)^F.i(Z);return new x(V,this.h^F.h)};function ct(F){const z=F.g.length+1,V=[];for(let Z=0;Z<z;Z++)V[Z]=F.i(Z)<<1|F.i(Z-1)>>>31;return new x(V,F.h)}function je(F,z){const V=z>>5;z%=32;const Z=F.g.length-V,X=[];for(let W=0;W<Z;W++)X[W]=z>0?F.i(W+V)>>>z|F.i(W+V+1)<<32-z:F.i(W+V);return new x(X,F.h)}o.prototype.digest=o.prototype.A,o.prototype.reset=o.prototype.u,o.prototype.update=o.prototype.v,Vx=o,x.prototype.add=x.prototype.add,x.prototype.multiply=x.prototype.j,x.prototype.modulo=x.prototype.B,x.prototype.compare=x.prototype.l,x.prototype.toNumber=x.prototype.m,x.prototype.toString=x.prototype.toString,x.prototype.getBits=x.prototype.i,x.fromNumber=A,x.fromString=S,mo=x}).apply(typeof Ny<"u"?Ny:typeof self<"u"?self:typeof window<"u"?window:{});var Hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ux,Jc,Fx,ef,_1,zx,jx,Hx;(function(){var a,e=Object.defineProperty;function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hh=="object"&&Hh];for(var C=0;C<p.length;++C){var N=p[C];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var o=n(this);function h(p,C){if(C)e:{var N=o;p=p.split(".");for(var U=0;U<p.length-1;U++){var ie=p[U];if(!(ie in N))break e;N=N[ie]}p=p[p.length-1],U=N[p],C=C(U),C!=U&&C!=null&&e(N,p,{configurable:!0,writable:!0,value:C})}}h("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),h("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),h("Object.entries",function(p){return p||function(C){var N=[],U;for(U in C)Object.prototype.hasOwnProperty.call(C,U)&&N.push([U,C[U]]);return N}});var m=m||{},x=this||self;function v(p){var C=typeof p;return C=="object"&&p!=null||C=="function"}function T(p,C,N){return p.call.apply(p.bind,arguments)}function A(p,C,N){return A=T,A.apply(null,arguments)}function S(p,C){var N=Array.prototype.slice.call(arguments,1);return function(){var U=N.slice();return U.push.apply(U,arguments),p.apply(this,U)}}function O(p,C){function N(){}N.prototype=C.prototype,p.Z=C.prototype,p.prototype=new N,p.prototype.constructor=p,p.Ob=function(U,ie,xe){for(var Fe=Array(arguments.length-2),St=2;St<arguments.length;St++)Fe[St-2]=arguments[St];return C.prototype[ie].apply(U,Fe)}}var B=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function Y(p){const C=p.length;if(C>0){const N=Array(C);for(let U=0;U<C;U++)N[U]=p[U];return N}return[]}function te(p,C){for(let U=1;U<arguments.length;U++){const ie=arguments[U];var N=typeof ie;if(N=N!="object"?N:ie?Array.isArray(ie)?"array":N:"null",N=="array"||N=="object"&&typeof ie.length=="number"){N=p.length||0;const xe=ie.length||0;p.length=N+xe;for(let Fe=0;Fe<xe;Fe++)p[N+Fe]=ie[Fe]}else p.push(ie)}}class le{constructor(C,N){this.i=C,this.j=N,this.h=0,this.g=null}get(){let C;return this.h>0?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function de(p){x.setTimeout(()=>{throw p},0)}function Ge(){var p=F;let C=null;return p.g&&(C=p.g,p.g=p.g.next,p.g||(p.h=null),C.next=null),C}class Le{constructor(){this.h=this.g=null}add(C,N){const U=me.get();U.set(C,N),this.h?this.h.next=U:this.g=U,this.h=U}}var me=new le(()=>new Be,p=>p.reset());class Be{constructor(){this.next=this.g=this.h=null}set(C,N){this.h=C,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let ct,je=!1,F=new Le,z=()=>{const p=Promise.resolve(void 0);ct=()=>{p.then(V)}};function V(){for(var p;p=Ge();){try{p.h.call(p.g)}catch(N){de(N)}var C=me;C.j(p),C.h<100&&(C.h++,p.next=C.g,C.g=p)}je=!1}function Z(){this.u=this.u,this.C=this.C}Z.prototype.u=!1,Z.prototype.dispose=function(){this.u||(this.u=!0,this.N())},Z.prototype[Symbol.dispose]=function(){this.dispose()},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function X(p,C){this.type=p,this.g=this.target=C,this.defaultPrevented=!1}X.prototype.h=function(){this.defaultPrevented=!0};var W=(function(){if(!x.addEventListener||!Object.defineProperty)return!1;var p=!1,C=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const N=()=>{};x.addEventListener("test",N,C),x.removeEventListener("test",N,C)}catch{}return p})();function G(p){return/^[\s\xa0]*$/.test(p)}function Qe(p,C){X.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,C)}O(Qe,X),Qe.prototype.init=function(p,C){const N=this.type=p.type,U=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=C,C=p.relatedTarget,C||(N=="mouseover"?C=p.fromElement:N=="mouseout"&&(C=p.toElement)),this.relatedTarget=C,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&Qe.Z.h.call(this)},Qe.prototype.h=function(){Qe.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var oe="closure_listenable_"+(Math.random()*1e6|0),ue=0;function Ae(p,C,N,U,ie){this.listener=p,this.proxy=null,this.src=C,this.type=N,this.capture=!!U,this.ha=ie,this.key=++ue,this.da=this.fa=!1}function Ye(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function ft(p,C,N){for(const U in p)C.call(N,p[U],U,p)}function yt(p,C){for(const N in p)C.call(void 0,p[N],N,p)}function q(p){const C={};for(const N in p)C[N]=p[N];return C}const ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(p,C){let N,U;for(let ie=1;ie<arguments.length;ie++){U=arguments[ie];for(N in U)p[N]=U[N];for(let xe=0;xe<ae.length;xe++)N=ae[xe],Object.prototype.hasOwnProperty.call(U,N)&&(p[N]=U[N])}}function ye(p){this.src=p,this.g={},this.h=0}ye.prototype.add=function(p,C,N,U,ie){const xe=p.toString();p=this.g[xe],p||(p=this.g[xe]=[],this.h++);const Fe=we(p,C,U,ie);return Fe>-1?(C=p[Fe],N||(C.fa=!1)):(C=new Ae(C,this.src,xe,!!U,ie),C.fa=N,p.push(C)),C};function ke(p,C){const N=C.type;if(N in p.g){var U=p.g[N],ie=Array.prototype.indexOf.call(U,C,void 0),xe;(xe=ie>=0)&&Array.prototype.splice.call(U,ie,1),xe&&(Ye(C),p.g[N].length==0&&(delete p.g[N],p.h--))}}function we(p,C,N,U){for(let ie=0;ie<p.length;++ie){const xe=p[ie];if(!xe.da&&xe.listener==C&&xe.capture==!!N&&xe.ha==U)return ie}return-1}var rt="closure_lm_"+(Math.random()*1e6|0),at={};function wt(p,C,N,U,ie){if(Array.isArray(C)){for(let xe=0;xe<C.length;xe++)wt(p,C[xe],N,U,ie);return null}return N=Pt(N),p&&p[oe]?p.J(C,N,v(U)?!!U.capture:!1,ie):mn(p,C,N,!1,U,ie)}function mn(p,C,N,U,ie,xe){if(!C)throw Error("Invalid event type");const Fe=v(ie)?!!ie.capture:!!ie;let St=Kn(p);if(St||(p[rt]=St=new ye(p)),N=St.add(C,N,U,Fe,xe),N.proxy)return N;if(U=zt(),N.proxy=U,U.src=p,U.listener=N,p.addEventListener)W||(ie=Fe),ie===void 0&&(ie=!1),p.addEventListener(C.toString(),U,ie);else if(p.attachEvent)p.attachEvent(wn(C.toString()),U);else if(p.addListener&&p.removeListener)p.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return N}function zt(){function p(N){return C.call(p.src,p.listener,N)}const C=Nn;return p}function zn(p,C,N,U,ie){if(Array.isArray(C))for(var xe=0;xe<C.length;xe++)zn(p,C[xe],N,U,ie);else U=v(U)?!!U.capture:!!U,N=Pt(N),p&&p[oe]?(p=p.i,xe=String(C).toString(),xe in p.g&&(C=p.g[xe],N=we(C,N,U,ie),N>-1&&(Ye(C[N]),Array.prototype.splice.call(C,N,1),C.length==0&&(delete p.g[xe],p.h--)))):p&&(p=Kn(p))&&(C=p.g[C.toString()],p=-1,C&&(p=we(C,N,U,ie)),(N=p>-1?C[p]:null)&&dt(N))}function dt(p){if(typeof p!="number"&&p&&!p.da){var C=p.src;if(C&&C[oe])ke(C.i,p);else{var N=p.type,U=p.proxy;C.removeEventListener?C.removeEventListener(N,U,p.capture):C.detachEvent?C.detachEvent(wn(N),U):C.addListener&&C.removeListener&&C.removeListener(U),(N=Kn(C))?(ke(N,p),N.h==0&&(N.src=null,C[rt]=null)):Ye(p)}}}function wn(p){return p in at?at[p]:at[p]="on"+p}function Nn(p,C){if(p.da)p=!0;else{C=new Qe(C,this);const N=p.listener,U=p.ha||p.src;p.fa&&dt(p),p=N.call(U,C)}return p}function Kn(p){return p=p[rt],p instanceof ye?p:null}var qt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Pt(p){return typeof p=="function"?p:(p[qt]||(p[qt]=function(C){return p.handleEvent(C)}),p[qt])}function Ve(){Z.call(this),this.i=new ye(this),this.M=this,this.G=null}O(Ve,Z),Ve.prototype[oe]=!0,Ve.prototype.removeEventListener=function(p,C,N,U){zn(this,p,C,N,U)};function Et(p,C){var N,U=p.G;if(U)for(N=[];U;U=U.G)N.push(U);if(p=p.M,U=C.type||C,typeof C=="string")C=new X(C,p);else if(C instanceof X)C.target=C.target||p;else{var ie=C;C=new X(U,p),re(C,ie)}ie=!0;let xe,Fe;if(N)for(Fe=N.length-1;Fe>=0;Fe--)xe=C.g=N[Fe],ie=Xe(xe,U,!0,C)&&ie;if(xe=C.g=p,ie=Xe(xe,U,!0,C)&&ie,ie=Xe(xe,U,!1,C)&&ie,N)for(Fe=0;Fe<N.length;Fe++)xe=C.g=N[Fe],ie=Xe(xe,U,!1,C)&&ie}Ve.prototype.N=function(){if(Ve.Z.N.call(this),this.i){var p=this.i;for(const C in p.g){const N=p.g[C];for(let U=0;U<N.length;U++)Ye(N[U]);delete p.g[C],p.h--}}this.G=null},Ve.prototype.J=function(p,C,N,U){return this.i.add(String(p),C,!1,N,U)},Ve.prototype.K=function(p,C,N,U){return this.i.add(String(p),C,!0,N,U)};function Xe(p,C,N,U){if(C=p.i.g[String(C)],!C)return!0;C=C.concat();let ie=!0;for(let xe=0;xe<C.length;++xe){const Fe=C[xe];if(Fe&&!Fe.da&&Fe.capture==N){const St=Fe.listener,tr=Fe.ha||Fe.src;Fe.fa&&ke(p.i,Fe),ie=St.call(tr,U)!==!1&&ie}}return ie&&!U.defaultPrevented}function jr(p,C){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=A(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(C)>2147483647?-1:x.setTimeout(p,C||0)}function Hr(p){p.g=jr(()=>{p.g=null,p.i&&(p.i=!1,Hr(p))},p.l);const C=p.h;p.h=null,p.m.apply(null,C)}class pn extends Z{constructor(C,N){super(),this.m=C,this.l=N,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:Hr(this)}N(){super.N(),this.g&&(x.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Te(p){Z.call(this),this.h=p,this.g={}}O(Te,Z);var De=[];function He(p){ft(p.g,function(C,N){this.g.hasOwnProperty(N)&&dt(C)},p),p.g={}}Te.prototype.N=function(){Te.Z.N.call(this),He(this)},Te.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Je=x.JSON.stringify,$e=x.JSON.parse,On=class{stringify(p){return x.JSON.stringify(p,void 0)}parse(p){return x.JSON.parse(p,void 0)}};function tt(){}function Xt(){}var Ze={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ve(){X.call(this,"d")}O(ve,X);function vt(){X.call(this,"c")}O(vt,X);var lt={},Vt=null;function jn(){return Vt=Vt||new Ve}lt.Ia="serverreachability";function ni(p){X.call(this,lt.Ia,p)}O(ni,X);function pr(p){const C=jn();Et(C,new ni(C))}lt.STAT_EVENT="statevent";function It(p,C){X.call(this,lt.STAT_EVENT,p),this.stat=C}O(It,X);function yn(p){const C=jn();Et(C,new It(C,p))}lt.Ja="timingevent";function mi(p,C){X.call(this,lt.Ja,p),this.size=C}O(mi,X);function Gr(p,C){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return x.setTimeout(function(){p()},C)}function Hn(){this.g=!0}Hn.prototype.ua=function(){this.g=!1};function Xs(p,C,N,U,ie,xe){p.info(function(){if(p.g)if(xe){var Fe="",St=xe.split("&");for(let cn=0;cn<St.length;cn++){var tr=St[cn].split("=");if(tr.length>1){const Bn=tr[0];tr=tr[1];const xi=Bn.split("_");Fe=xi.length>=2&&xi[1]=="type"?Fe+(Bn+"="+tr+"&"):Fe+(Bn+"=redacted&")}}}else Fe=null;else Fe=xe;return"XMLHTTP REQ ("+U+") [attempt "+ie+"]: "+C+`
`+N+`
`+Fe})}function rr(p,C,N,U,ie,xe,Fe){p.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+ie+"]: "+C+`
`+N+`
`+xe+" "+Fe})}function Dr(p,C,N,U){p.info(function(){return"XMLHTTP TEXT ("+C+"): "+ri(p,N)+(U?" "+U:"")})}function vi(p,C){p.info(function(){return"TIMEOUT: "+C})}Hn.prototype.info=function(){};function ri(p,C){if(!p.g)return C;if(!C)return null;try{const xe=JSON.parse(C);if(xe){for(p=0;p<xe.length;p++)if(Array.isArray(xe[p])){var N=xe[p];if(!(N.length<2)){var U=N[1];if(Array.isArray(U)&&!(U.length<1)){var ie=U[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(let Fe=1;Fe<U.length;Fe++)U[Fe]=""}}}}return Je(xe)}catch{return C}}var ps={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},pi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ys;function Qn(){}O(Qn,tt),Qn.prototype.g=function(){return new XMLHttpRequest},ys=new Qn;function Mr(p){return encodeURIComponent(String(p))}function Lr(p){var C=1;p=p.split(":");const N=[];for(;C>0&&p.length;)N.push(p.shift()),C--;return p.length&&N.push(p.join(":")),N}function qe(p,C,N,U){this.j=p,this.i=C,this.l=N,this.S=U||1,this.V=new Te(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new wr}function wr(){this.i=null,this.g="",this.h=!1}var Un={},ln={};function ee(p,C,N){p.M=1,p.A=ii(Jn(C)),p.u=N,p.R=!0,ze(p,null)}function ze(p,C){p.F=Date.now(),jt(p),p.B=Jn(p.A);var N=p.B,U=p.S;Array.isArray(U)||(U=[String(U)]),Tn(N.i,"t",U),p.C=0,N=p.j.L,p.h=new wr,p.g=Ma(p.j,N?C:null,!p.u),p.P>0&&(p.O=new pn(A(p.Y,p,p.g),p.P)),C=p.V,N=p.g,U=p.ba;var ie="readystatechange";Array.isArray(ie)||(ie&&(De[0]=ie.toString()),ie=De);for(let xe=0;xe<ie.length;xe++){const Fe=wt(N,ie[xe],U||C.handleEvent,!1,C.h||C);if(!Fe)break;C.g[Fe.key]=Fe}C=p.J?q(p.J):{},p.u?(p.v||(p.v="POST"),C["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,C)):(p.v="GET",p.g.ea(p.B,p.v,null,C)),pr(),Xs(p.i,p.v,p.B,p.l,p.S,p.u)}qe.prototype.ba=function(p){p=p.target;const C=this.O;C&&Ii(p)==3?C.j():this.Y(p)},qe.prototype.Y=function(p){try{if(p==this.g)e:{const St=Ii(this.g),tr=this.g.ya(),cn=this.g.ca();if(!(St<3)&&(St!=3||this.g&&(this.h.h||this.g.la()||ar(this.g)))){this.K||St!=4||tr==7||(tr==8||cn<=0?pr(3):pr(2)),hn(this);var C=this.g.ca();this.X=C;var N=ut(this);if(this.o=C==200,rr(this.i,this.v,this.B,this.l,this.S,St,C),this.o){if(this.U&&!this.L){t:{if(this.g){var U,ie=this.g;if((U=ie.g?ie.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(U)){var xe=U;break t}}xe=null}if(p=xe)Dr(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Gn(this,p);else{this.o=!1,this.m=3,yn(12),cr(this),Ct(this);break e}}if(this.R){p=!0;let Bn;for(;!this.K&&this.C<N.length;)if(Bn=Rt(this,N),Bn==ln){St==4&&(this.m=4,yn(14),p=!1),Dr(this.i,this.l,null,"[Incomplete Response]");break}else if(Bn==Un){this.m=4,yn(15),Dr(this.i,this.l,N,"[Invalid Chunk]"),p=!1;break}else Dr(this.i,this.l,Bn,null),Gn(this,Bn);if(We(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),St!=4||N.length!=0||this.h.h||(this.m=1,yn(16),p=!1),this.o=this.o&&p,!p)Dr(this.i,this.l,N,"[Invalid Chunked Response]"),cr(this),Ct(this);else if(N.length>0&&!this.W){this.W=!0;var Fe=this.j;Fe.g==this&&Fe.aa&&!Fe.P&&(Fe.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),pe(Fe),Fe.P=!0,yn(11))}}else Dr(this.i,this.l,N,null),Gn(this,N);St==4&&cr(this),this.o&&!this.K&&(St==4?Js(this.j,this):(this.o=!1,jt(this)))}else Ei(this.g),C==400&&N.indexOf("Unknown SID")>0?(this.m=3,yn(12)):(this.m=0,yn(13)),cr(this),Ct(this)}}}catch{}finally{}};function ut(p){if(!We(p))return p.g.la();const C=ar(p.g);if(C==="")return"";let N="";const U=C.length,ie=Ii(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return cr(p),Ct(p),"";p.h.i=new x.TextDecoder}for(let xe=0;xe<U;xe++)p.h.h=!0,N+=p.h.i.decode(C[xe],{stream:!(ie&&xe==U-1)});return C.length=0,p.h.g+=N,p.C=0,p.h.g}function We(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function Rt(p,C){var N=p.C,U=C.indexOf(`
`,N);return U==-1?ln:(N=Number(C.substring(N,U)),isNaN(N)?Un:(U+=1,U+N>C.length?ln:(C=C.slice(U,U+N),p.C=U+N,C)))}qe.prototype.cancel=function(){this.K=!0,cr(this)};function jt(p){p.T=Date.now()+p.H,Dn(p,p.H)}function Dn(p,C){if(p.D!=null)throw Error("WatchDog timer not null");p.D=Gr(A(p.aa,p),C)}function hn(p){p.D&&(x.clearTimeout(p.D),p.D=null)}qe.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(vi(this.i,this.B),this.M!=2&&(pr(),yn(17)),cr(this),this.m=2,Ct(this)):Dn(this,this.T-p)};function Ct(p){p.j.I==0||p.K||Js(p.j,p)}function cr(p){hn(p);var C=p.O;C&&typeof C.dispose=="function"&&C.dispose(),p.O=null,He(p.V),p.g&&(C=p.g,p.g=null,C.abort(),C.dispose())}function Gn(p,C){try{var N=p.j;if(N.I!=0&&(N.g==p||qr(N.h,p))){if(!p.L&&qr(N.h,p)&&N.I==3){try{var U=N.Ba.g.parse(C)}catch{U=null}if(Array.isArray(U)&&U.length==3){var ie=U;if(ie[0]==0){e:if(!N.v){if(N.g)if(N.g.F+3e3<p.F)$n(N),_s(N);else break e;Zs(N),yn(18)}}else N.xa=ie[1],0<N.xa-N.K&&ie[2]<37500&&N.F&&N.A==0&&!N.C&&(N.C=Gr(A(N.Va,N),6e3));gn(N.h)<=1&&N.ta&&(N.ta=void 0)}else es(N,11)}else if((p.L||N.g==p)&&$n(N),!G(C))for(ie=N.Ba.g.parse(C),C=0;C<ie.length;C++){let cn=ie[C];const Bn=cn[0];if(!(Bn<=N.K))if(N.K=Bn,cn=cn[1],N.I==2)if(cn[0]=="c"){N.M=cn[1],N.ba=cn[2];const xi=cn[3];xi!=null&&(N.ka=xi,N.j.info("VER="+N.ka));const rs=cn[4];rs!=null&&(N.za=rs,N.j.info("SVER="+N.za));const Ur=cn[5];Ur!=null&&typeof Ur=="number"&&Ur>0&&(U=1.5*Ur,N.O=U,N.j.info("backChannelRequestTimeoutMs_="+U)),U=N;const _i=p.g;if(_i){const ea=_i.g?_i.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ea){var xe=U.h;xe.g||ea.indexOf("spdy")==-1&&ea.indexOf("quic")==-1&&ea.indexOf("h2")==-1||(xe.j=xe.l,xe.g=new Set,xe.h&&(Ro(xe,xe.h),xe.h=null))}if(U.G){const is=_i.g?_i.g.getResponseHeader("X-HTTP-Session-Id"):null;is&&(U.wa=is,_t(U.J,U.G,is))}}N.I=3,N.l&&N.l.ra(),N.aa&&(N.T=Date.now()-p.F,N.j.info("Handshake RTT: "+N.T+"ms")),U=N;var Fe=p;if(U.na=gl(U,U.L?U.ba:null,U.W),Fe.L){en(U.h,Fe);var St=Fe,tr=U.O;tr&&(St.H=tr),St.D&&(hn(St),jt(St)),U.g=Fe}else zi(U);N.i.length>0&&$i(N)}else cn[0]!="stop"&&cn[0]!="close"||es(N,7);else N.I==3&&(cn[0]=="stop"||cn[0]=="close"?cn[0]=="stop"?es(N,7):Na(N):cn[0]!="noop"&&N.l&&N.l.qa(cn),N.A=0)}}pr(4)}catch{}}var Zn=class{constructor(p,C){this.g=p,this.map=C}};function Ne(p){this.l=p||10,x.PerformanceNavigationTiming?(p=x.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(x.chrome&&x.chrome.loadTimes&&x.chrome.loadTimes()&&x.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Io(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function gn(p){return p.h?1:p.g?p.g.size:0}function qr(p,C){return p.h?p.h==C:p.g?p.g.has(C):!1}function Ro(p,C){p.g?p.g.add(C):p.h=C}function en(p,C){p.h&&p.h==C?p.h=null:p.g&&p.g.has(C)&&p.g.delete(C)}Ne.prototype.cancel=function(){if(this.i=Kt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Kt(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let C=p.i;for(const N of p.g.values())C=C.concat(N.G);return C}return Y(p.i)}var Ht=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ss(p,C){if(p){p=p.split("&");for(let N=0;N<p.length;N++){const U=p[N].indexOf("=");let ie,xe=null;U>=0?(ie=p[N].substring(0,U),xe=p[N].substring(U+1)):ie=p[N],C(ie,xe?decodeURIComponent(xe.replace(/\+/g," ")):"")}}}function Xr(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let C;p instanceof Xr?(this.l=p.l,Yt(this,p.j),this.o=p.o,this.g=p.g,Yr(this,p.u),this.h=p.h,No(this,Oo(p.i)),this.m=p.m):p&&(C=String(p).match(Ht))?(this.l=!1,Yt(this,C[1]||"",!0),this.o=Ji(C[2]||""),this.g=Ji(C[3]||"",!0),Yr(this,C[4]),this.h=Ji(C[5]||"",!0),No(this,C[6]||"",!0),this.m=Ji(C[7]||"")):(this.l=!1,this.i=new yr(null,this.l))}Xr.prototype.toString=function(){const p=[];var C=this.j;C&&p.push(Ci(C,ir,!0),":");var N=this.g;return(N||C=="file")&&(p.push("//"),(C=this.o)&&p.push(Ci(C,ir,!0),"@"),p.push(Mr(N).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.u,N!=null&&p.push(":",String(N))),(N=this.h)&&(this.g&&N.charAt(0)!="/"&&p.push("/"),p.push(Ci(N,N.charAt(0)=="/"?j:ce,!0))),(N=this.i.toString())&&p.push("?",N),(N=this.m)&&p.push("#",Ci(N,sr)),p.join("")},Xr.prototype.resolve=function(p){const C=Jn(this);let N=!!p.j;N?Yt(C,p.j):N=!!p.o,N?C.o=p.o:N=!!p.g,N?C.g=p.g:N=p.u!=null;var U=p.h;if(N)Yr(C,p.u);else if(N=!!p.h){if(U.charAt(0)!="/")if(this.g&&!this.h)U="/"+U;else{var ie=C.h.lastIndexOf("/");ie!=-1&&(U=C.h.slice(0,ie+1)+U)}if(ie=U,ie==".."||ie==".")U="";else if(ie.indexOf("./")!=-1||ie.indexOf("/.")!=-1){U=ie.lastIndexOf("/",0)==0,ie=ie.split("/");const xe=[];for(let Fe=0;Fe<ie.length;){const St=ie[Fe++];St=="."?U&&Fe==ie.length&&xe.push(""):St==".."?((xe.length>1||xe.length==1&&xe[0]!="")&&xe.pop(),U&&Fe==ie.length&&xe.push("")):(xe.push(St),U=!0)}U=xe.join("/")}else U=ie}return N?C.h=U:N=p.i.toString()!=="",N?No(C,Oo(p.i)):N=!!p.m,N&&(C.m=p.m),C};function Jn(p){return new Xr(p)}function Yt(p,C,N){p.j=N?Ji(C,!0):C,p.j&&(p.j=p.j.replace(/:$/,""))}function Yr(p,C){if(C){if(C=Number(C),isNaN(C)||C<0)throw Error("Bad port number "+C);p.u=C}else p.u=null}function No(p,C,N){C instanceof yr?(p.i=C,Rs(p.i,p.l)):(N||(C=Ci(C,it)),p.i=new yr(C,p.l))}function _t(p,C,N){p.i.set(C,N)}function ii(p){return _t(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function Ji(p,C){return p?C?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Ci(p,C,N){return typeof p=="string"?(p=encodeURI(p).replace(C,Ut),N&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Ut(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var ir=/[#\/\?@]/g,ce=/[#\?:]/g,j=/[#\?]/g,it=/[#\?@]/g,sr=/#/g;function yr(p,C){this.h=this.g=null,this.i=p||null,this.j=!!C}function si(p){p.g||(p.g=new Map,p.h=0,p.i&&Ss(p.i,function(C,N){p.add(decodeURIComponent(C.replace(/\+/g," ")),N)}))}a=yr.prototype,a.add=function(p,C){si(this),this.i=null,p=Is(this,p);let N=this.g.get(p);return N||this.g.set(p,N=[]),N.push(C),this.h+=1,this};function Ra(p,C){si(p),C=Is(p,C),p.g.has(C)&&(p.i=null,p.h-=p.g.get(C).length,p.g.delete(C))}function Vr(p,C){return si(p),C=Is(p,C),p.g.has(C)}a.forEach=function(p,C){si(this),this.g.forEach(function(N,U){N.forEach(function(ie){p.call(C,ie,U,this)},this)},this)};function ht(p,C){si(p);let N=[];if(typeof C=="string")Vr(p,C)&&(N=N.concat(p.g.get(Is(p,C))));else for(p=Array.from(p.g.values()),C=0;C<p.length;C++)N=N.concat(p[C]);return N}a.set=function(p,C){return si(this),this.i=null,p=Is(this,p),Vr(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[C]),this.h+=1,this},a.get=function(p,C){return p?(p=ht(this,p),p.length>0?String(p[0]):C):C};function Tn(p,C,N){Ra(p,C),N.length>0&&(p.i=null,p.g.set(Is(p,C),Y(N)),p.h+=N.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],C=Array.from(this.g.keys());for(let U=0;U<C.length;U++){var N=C[U];const ie=Mr(N);N=ht(this,N);for(let xe=0;xe<N.length;xe++){let Fe=ie;N[xe]!==""&&(Fe+="="+Mr(N[xe])),p.push(Fe)}}return this.i=p.join("&")};function Oo(p){const C=new yr;return C.i=p.i,p.g&&(C.g=new Map(p.g),C.h=p.h),C}function Is(p,C){return C=String(C),p.j&&(C=C.toLowerCase()),C}function Rs(p,C){C&&!p.j&&(si(p),p.i=null,p.g.forEach(function(N,U){const ie=U.toLowerCase();U!=ie&&(Ra(this,U),Tn(this,ie,N))},p)),p.j=C}function ai(p,C){const N=new Hn;if(x.Image){const U=new Image;U.onload=S(Si,N,"TestLoadImage: loaded",!0,C,U),U.onerror=S(Si,N,"TestLoadImage: error",!1,C,U),U.onabort=S(Si,N,"TestLoadImage: abort",!1,C,U),U.ontimeout=S(Si,N,"TestLoadImage: timeout",!1,C,U),x.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=p}else C(!1)}function Ys(p,C){const N=new Hn,U=new AbortController,ie=setTimeout(()=>{U.abort(),Si(N,"TestPingServer: timeout",!1,C)},1e4);fetch(p,{signal:U.signal}).then(xe=>{clearTimeout(ie),xe.ok?Si(N,"TestPingServer: ok",!0,C):Si(N,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(ie),Si(N,"TestPingServer: error",!1,C)})}function Si(p,C,N,U,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),U(N)}catch{}}function Pn(){this.g=new On}function oi(p){this.i=p.Sb||null,this.h=p.ab||!1}O(oi,tt),oi.prototype.g=function(){return new li(this.i,this.h)};function li(p,C){Ve.call(this),this.H=p,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}O(li,Ve),a=li.prototype,a.open=function(p,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=C,this.readyState=1,xt(this)},a.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const C={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(C.body=p),(this.H||x).fetch(new Request(this.D,C)).then(this.Pa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ns(this)),this.readyState=0},a.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,xt(this)),this.g&&(this.readyState=3,xt(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof x.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;gt(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function gt(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}a.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var C=p.value?p.value:new Uint8Array(0);(C=this.B.decode(C,{stream:!p.done}))&&(this.response=this.responseText+=C)}p.done?Ns(this):xt(this),this.readyState==3&&gt(this)}},a.Oa=function(p){this.g&&(this.response=this.responseText=p,Ns(this))},a.Na=function(p){this.g&&(this.response=p,Ns(this))},a.ga=function(){this.g&&Ns(this)};function Ns(p){p.readyState=4,p.l=null,p.j=null,p.B=null,xt(p)}a.setRequestHeader=function(p,C){this.A.append(p,C)},a.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],C=this.h.entries();for(var N=C.next();!N.done;)N=N.value,p.push(N[0]+": "+N[1]),N=C.next();return p.join(`\r
`)};function xt(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(li.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function bn(p){let C="";return ft(p,function(N,U){C+=U,C+=":",C+=N,C+=`\r
`}),C}function Ws(p,C,N){e:{for(U in N){var U=!1;break e}U=!0}U||(N=bn(N),typeof p=="string"?N!=null&&Mr(N):_t(p,C,N))}function En(p){Ve.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}O(En,Ve);var Vi=/^https?$/i,Ui=["POST","PUT"];a=En.prototype,a.Fa=function(p){this.H=p},a.ea=function(p,C,N,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);C=C?C.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ys.g(),this.g.onreadystatechange=B(A(this.Ca,this));try{this.B=!0,this.g.open(C,String(p),!0),this.B=!1}catch(xe){Ks(this,xe);return}if(p=N||"",N=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var ie in U)N.set(ie,U[ie]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const xe of U.keys())N.set(xe,U.get(xe));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(N.keys()).find(xe=>xe.toLowerCase()=="content-type"),ie=x.FormData&&p instanceof x.FormData,!(Array.prototype.indexOf.call(Ui,C,void 0)>=0)||U||ie||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[xe,Fe]of N)this.g.setRequestHeader(xe,Fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(xe){Ks(this,xe)}};function Ks(p,C){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=C,p.o=5,Es(p),yi(p)}function Es(p){p.A||(p.A=!0,Et(p,"complete"),Et(p,"error"))}a.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,Et(this,"complete"),Et(this,"abort"),yi(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yi(this,!0)),En.Z.N.call(this)},a.Ca=function(){this.u||(this.B||this.v||this.j?Fi(this):this.Xa())},a.Xa=function(){Fi(this)};function Fi(p){if(p.h&&typeof m<"u"){if(p.v&&Ii(p)==4)setTimeout(p.Ca.bind(p),0);else if(Et(p,"readystatechange"),Ii(p)==4){p.h=!1;try{const xe=p.ca();e:switch(xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var N;if(!(N=C)){var U;if(U=xe===0){let Fe=String(p.D).match(Ht)[1]||null;!Fe&&x.self&&x.self.location&&(Fe=x.self.location.protocol.slice(0,-1)),U=!Vi.test(Fe?Fe.toLowerCase():"")}N=U}if(N)Et(p,"complete"),Et(p,"success");else{p.o=6;try{var ie=Ii(p)>2?p.g.statusText:""}catch{ie=""}p.l=ie+" ["+p.ca()+"]",Es(p)}}finally{yi(p)}}}}function yi(p,C){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const N=p.g;p.g=null,C||Et(p,"ready");try{N.onreadystatechange=null}catch{}}}a.isActive=function(){return!!this.g};function Ii(p){return p.g?p.g.readyState:0}a.ca=function(){try{return Ii(this)>2?this.g.status:-1}catch{return-1}},a.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.La=function(p){if(this.g){var C=this.g.responseText;return p&&C.indexOf(p)==0&&(C=C.substring(p.length)),$e(C)}};function ar(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Ei(p){const C={};p=(p.g&&Ii(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<p.length;U++){if(G(p[U]))continue;var N=Lr(p[U]);const ie=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const xe=C[ie]||[];C[ie]=xe,xe.push(N)}yt(C,function(U){return U.join(", ")})}a.ya=function(){return this.o},a.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function qn(p,C,N){return N&&N.internalChannelParams&&N.internalChannelParams[p]||C}function xs(p){this.za=0,this.i=[],this.j=new Hn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=qn("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=qn("baseRetryDelayMs",5e3,p),this.Za=qn("retryDelaySeedMs",1e4,p),this.Ta=qn("forwardChannelMaxRetries",2,p),this.va=qn("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new Ne(p&&p.concurrentRequestLimit),this.Ba=new Pn,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}a=xs.prototype,a.ka=8,a.I=1,a.connect=function(p,C,N,U){yn(0),this.W=p,this.H=C||{},N&&U!==void 0&&(this.H.OSID=N,this.H.OAID=U),this.F=this.X,this.J=gl(this,null,this.W),$i(this)};function Na(p){if(Oa(p),p.I==3){var C=p.V++,N=Jn(p.J);if(_t(N,"SID",p.M),_t(N,"RID",C),_t(N,"TYPE","terminate"),Os(p,N),C=new qe(p,p.j,C),C.M=2,C.A=ii(Jn(N)),N=!1,x.navigator&&x.navigator.sendBeacon)try{N=x.navigator.sendBeacon(C.A.toString(),"")}catch{}!N&&x.Image&&(new Image().src=C.A,N=!0),N||(C.g=Ma(C.j,null),C.g.ea(C.A)),C.F=Date.now(),jt(C)}dl(p)}function _s(p){p.g&&(pe(p),p.g.cancel(),p.g=null)}function Oa(p){_s(p),p.v&&(x.clearTimeout(p.v),p.v=null),$n(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&x.clearTimeout(p.m),p.m=null)}function $i(p){if(!Io(p.h)&&!p.m){p.m=!0;var C=p.Ea;ct||z(),je||(ct(),je=!0),F.add(C,p),p.D=0}}function Da(p,C){return gn(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=C.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=Gr(A(p.Ea,p,C),Do(p,p.D)),p.D++,!0)}a.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const ie=new qe(this,this.j,p);let xe=this.o;if(this.U&&(xe?(xe=q(xe),re(xe,this.U)):xe=this.U),this.u!==null||this.R||(ie.J=xe,xe=null),this.S)e:{for(var C=0,N=0;N<this.i.length;N++){t:{var U=this.i[N];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(C+=U,C>4096){C=N;break e}if(C===4096||N===this.i.length-1){C=N+1;break e}}C=1e3}else C=1e3;C=Qs(this,ie,C),N=Jn(this.J),_t(N,"RID",p),_t(N,"CVER",22),this.G&&_t(N,"X-HTTP-Session-Id",this.G),Os(this,N),xe&&(this.R?C="headers="+Mr(bn(xe))+"&"+C:this.u&&Ws(N,this.u,xe)),Ro(this.h,ie),this.Ra&&_t(N,"TYPE","init"),this.S?(_t(N,"$req",C),_t(N,"SID","null"),ie.U=!0,ee(ie,N,null)):ee(ie,N,C),this.I=2}}else this.I==3&&(p?fn(this,p):this.i.length==0||Io(this.h)||fn(this))};function fn(p,C){var N;C?N=C.l:N=p.V++;const U=Jn(p.J);_t(U,"SID",p.M),_t(U,"RID",N),_t(U,"AID",p.K),Os(p,U),p.u&&p.o&&Ws(U,p.u,p.o),N=new qe(p,p.j,N,p.D+1),p.u===null&&(N.J=p.o),C&&(p.i=C.G.concat(p.i)),C=Qs(p,N,1e3),N.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),Ro(p.h,N),ee(N,U,C)}function Os(p,C){p.H&&ft(p.H,function(N,U){_t(C,U,N)}),p.l&&ft({},function(N,U){_t(C,U,N)})}function Qs(p,C,N){N=Math.min(p.i.length,N);const U=p.l?A(p.l.Ka,p.l,p):null;e:{var ie=p.i;let St=-1;for(;;){const tr=["count="+N];St==-1?N>0?(St=ie[0].g,tr.push("ofs="+St)):St=0:tr.push("ofs="+St);let cn=!0;for(let Bn=0;Bn<N;Bn++){var xe=ie[Bn].g;const xi=ie[Bn].map;if(xe-=St,xe<0)St=Math.max(0,ie[Bn].g-100),cn=!1;else try{xe="req"+xe+"_"||"";try{var Fe=xi instanceof Map?xi:Object.entries(xi);for(const[rs,Ur]of Fe){let _i=Ur;v(Ur)&&(_i=Je(Ur)),tr.push(xe+rs+"="+encodeURIComponent(_i))}}catch(rs){throw tr.push(xe+"type="+encodeURIComponent("_badmap")),rs}}catch{U&&U(xi)}}if(cn){Fe=tr.join("&");break e}}Fe=void 0}return p=p.i.splice(0,N),C.G=p,Fe}function zi(p){if(!p.g&&!p.v){p.Y=1;var C=p.Da;ct||z(),je||(ct(),je=!0),F.add(C,p),p.A=0}}function Zs(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=Gr(A(p.Da,p),Do(p,p.A)),p.A++,!0)}a.Da=function(){if(this.v=null,Mt(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=Gr(A(this.Wa,this),p)}},a.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,yn(10),_s(this),Mt(this))};function pe(p){p.B!=null&&(x.clearTimeout(p.B),p.B=null)}function Mt(p){p.g=new qe(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var C=Jn(p.na);_t(C,"RID","rpc"),_t(C,"SID",p.M),_t(C,"AID",p.K),_t(C,"CI",p.F?"0":"1"),!p.F&&p.ia&&_t(C,"TO",p.ia),_t(C,"TYPE","xmlhttp"),Os(p,C),p.u&&p.o&&Ws(C,p.u,p.o),p.O&&(p.g.H=p.O);var N=p.g;p=p.ba,N.M=1,N.A=ii(Jn(C)),N.u=null,N.R=!0,ze(N,p)}a.Va=function(){this.C!=null&&(this.C=null,_s(this),Zs(this),yn(19))};function $n(p){p.C!=null&&(x.clearTimeout(p.C),p.C=null)}function Js(p,C){var N=null;if(p.g==C){$n(p),pe(p),p.g=null;var U=2}else if(qr(p.h,C))N=C.G,en(p.h,C),U=1;else return;if(p.I!=0){if(C.o)if(U==1){N=C.u?C.u.length:0,C=Date.now()-C.F;var ie=p.D;U=jn(),Et(U,new mi(U,N)),$i(p)}else zi(p);else if(ie=C.m,ie==3||ie==0&&C.X>0||!(U==1&&Da(p,C)||U==2&&Zs(p)))switch(N&&N.length>0&&(C=p.h,C.i=C.i.concat(N)),ie){case 1:es(p,5);break;case 4:es(p,10);break;case 3:es(p,6);break;default:es(p,2)}}}function Do(p,C){let N=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(N*=2),N*C}function es(p,C){if(p.j.info("Error code "+C),C==2){var N=A(p.bb,p),U=p.Ua;const ie=!U;U=new Xr(U||"//www.google.com/images/cleardot.gif"),x.location&&x.location.protocol=="http"||Yt(U,"https"),ii(U),ie?ai(U.toString(),N):Ys(U.toString(),N)}else yn(2);p.I=0,p.l&&p.l.pa(C),dl(p),Oa(p)}a.bb=function(p){p?(this.j.info("Successfully pinged google.com"),yn(2)):(this.j.info("Failed to ping google.com"),yn(1))};function dl(p){if(p.I=0,p.ja=[],p.l){const C=Kt(p.h);(C.length!=0||p.i.length!=0)&&(te(p.ja,C),te(p.ja,p.i),p.h.i.length=0,Y(p.i),p.i.length=0),p.l.oa()}}function gl(p,C,N){var U=N instanceof Xr?Jn(N):new Xr(N);if(U.g!="")C&&(U.g=C+"."+U.g),Yr(U,U.u);else{var ie=x.location;U=ie.protocol,C=C?C+"."+ie.hostname:ie.hostname,ie=+ie.port;const xe=new Xr(null);U&&Yt(xe,U),C&&(xe.g=C),ie&&Yr(xe,ie),N&&(xe.h=N),U=xe}return N=p.G,C=p.wa,N&&C&&_t(U,N,C),_t(U,"VER",p.ka),Os(p,U),U}function Ma(p,C,N){if(C&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return C=p.Aa&&!p.ma?new En(new oi({ab:N})):new En(p.ma),C.Fa(p.L),C}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function er(){}a=er.prototype,a.ra=function(){},a.qa=function(){},a.pa=function(){},a.oa=function(){},a.isActive=function(){return!0},a.Ka=function(){};function ts(){}ts.prototype.g=function(p,C){return new Wt(p,C)};function Wt(p,C){Ve.call(this),this.g=new xs(C),this.l=p,this.h=C&&C.messageUrlParams||null,p=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(p?p["X-WebChannel-Content-Type"]=C.messageContentType:p={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.sa&&(p?p["X-WebChannel-Client-Profile"]=C.sa:p={"X-WebChannel-Client-Profile":C.sa}),this.g.U=p,(p=C&&C.Qb)&&!G(p)&&(this.g.u=p),this.A=C&&C.supportsCrossDomainXhr||!1,this.v=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!G(C)&&(this.g.G=C,p=this.h,p!==null&&C in p&&(p=this.h,C in p&&delete p[C])),this.j=new Qt(this)}O(Wt,Ve),Wt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Wt.prototype.close=function(){Na(this.g)},Wt.prototype.o=function(p){var C=this.g;if(typeof p=="string"){var N={};N.__data__=p,p=N}else this.v&&(N={},N.__data__=Je(p),p=N);C.i.push(new Zn(C.Ya++,p)),C.I==3&&$i(C)},Wt.prototype.N=function(){this.g.l=null,delete this.j,Na(this.g),delete this.g,Wt.Z.N.call(this)};function $s(p){ve.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var C=p.__sm__;if(C){e:{for(const N in C){p=N;break e}p=void 0}(this.i=p)&&(p=this.i,C=C!==null&&p in C?C[p]:void 0),this.data=C}else this.data=p}O($s,ve);function ns(){vt.call(this),this.status=1}O(ns,vt);function Qt(p){this.g=p}O(Qt,er),Qt.prototype.ra=function(){Et(this.g,"a")},Qt.prototype.qa=function(p){Et(this.g,new $s(p))},Qt.prototype.pa=function(p){Et(this.g,new ns)},Qt.prototype.oa=function(){Et(this.g,"b")},ts.prototype.createWebChannel=ts.prototype.g,Wt.prototype.send=Wt.prototype.o,Wt.prototype.open=Wt.prototype.m,Wt.prototype.close=Wt.prototype.close,Hx=function(){return new ts},jx=function(){return jn()},zx=lt,_1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ps.NO_ERROR=0,ps.TIMEOUT=8,ps.HTTP_ERROR=6,ef=ps,pi.COMPLETE="complete",Fx=pi,Xt.EventType=Ze,Ze.OPEN="a",Ze.CLOSE="b",Ze.ERROR="c",Ze.MESSAGE="d",Ve.prototype.listen=Ve.prototype.J,Jc=Xt,En.prototype.listenOnce=En.prototype.K,En.prototype.getLastError=En.prototype.Ha,En.prototype.getLastErrorCode=En.prototype.ya,En.prototype.getStatus=En.prototype.ca,En.prototype.getResponseJson=En.prototype.La,En.prototype.getResponseText=En.prototype.la,En.prototype.send=En.prototype.ea,En.prototype.setWithCredentials=En.prototype.Fa,Ux=En}).apply(typeof Hh<"u"?Hh:typeof self<"u"?self:typeof window<"u"?window:{});const Oy="@firebase/firestore",Dy="4.9.2";class hi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hi.UNAUTHENTICATED=new hi(null),hi.GOOGLE_CREDENTIALS=new hi("google-credentials-uid"),hi.FIRST_PARTY=new hi("first-party-uid"),hi.MOCK_USER=new hi("mock-user");let uc="12.3.0";const al=new H1("@firebase/firestore");function jl(){return al.logLevel}function et(a,...e){if(al.logLevel<=sn.DEBUG){const n=e.map(ng);al.debug(`Firestore (${uc}): ${a}`,...n)}}function Ca(a,...e){if(al.logLevel<=sn.ERROR){const n=e.map(ng);al.error(`Firestore (${uc}): ${a}`,...n)}}function ec(a,...e){if(al.logLevel<=sn.WARN){const n=e.map(ng);al.warn(`Firestore (${uc}): ${a}`,...n)}}function ng(a){if(typeof a=="string")return a;try{return(function(n){return JSON.stringify(n)})(a)}catch{return a}}function bt(a,e,n){let o="Unexpected state";typeof e=="string"?o=e:n=e,Gx(a,o,n)}function Gx(a,e,n){let o=`FIRESTORE (${uc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${a.toString(16)})`;if(n!==void 0)try{o+=" CONTEXT: "+JSON.stringify(n)}catch{o+=" CONTEXT: "+n}throw Ca(o),new Error(o)}function Cn(a,e,n,o){let h="Unexpected state";typeof n=="string"?h=n:o=n,a||Gx(e,h,o)}function kt(a,e){return a}const Ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ke extends Ia{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ta{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class qx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(hi.UNAUTHENTICATED)))}shutdown(){}}class sC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class aC{constructor(e){this.t=e,this.currentUser=hi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Cn(this.o===void 0,42304);let o=this.i;const h=T=>this.i!==o?(o=this.i,n(T)):Promise.resolve();let m=new Ta;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new Ta,e.enqueueRetryable((()=>h(this.currentUser)))};const x=()=>{const T=m;e.enqueueRetryable((async()=>{await T.promise,await h(this.currentUser)}))},v=T=>{et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=T,this.o&&(this.auth.addAuthTokenListener(this.o),x())};this.t.onInit((T=>v(T))),setTimeout((()=>{if(!this.auth){const T=this.t.getImmediate({optional:!0});T?v(T):(et("FirebaseAuthCredentialsProvider","Auth not yet detected"),m.resolve(),m=new Ta)}}),0),x()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((o=>this.i!==e?(et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Cn(typeof o.accessToken=="string",31837,{l:o}),new qx(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Cn(e===null||typeof e=="string",2055,{h:e}),new hi(e)}}class oC{constructor(e,n,o){this.P=e,this.T=n,this.I=o,this.type="FirstParty",this.user=hi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class lC{constructor(e,n,o){this.P=e,this.T=n,this.I=o}getToken(){return Promise.resolve(new oC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(hi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class My{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ds(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Cn(this.o===void 0,3512);const o=m=>{m.error!=null&&et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const x=m.token!==this.m;return this.m=m.token,et("FirebaseAppCheckTokenProvider",`Received ${x?"new":"existing"} token.`),x?n(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable((()=>o(m)))};const h=m=>{et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((m=>h(m))),setTimeout((()=>{if(!this.appCheck){const m=this.V.getImmediate({optional:!0});m?h(m):et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new My(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Cn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new My(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function uC(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(a);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let o=0;o<a;o++)n[o]=Math.floor(256*Math.random());return n}class rg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const h=uC(40);for(let m=0;m<h.length;++m)o.length<20&&h[m]<n&&(o+=e.charAt(h[m]%62))}return o}}function an(a,e){return a<e?-1:a>e?1:0}function A1(a,e){const n=Math.min(a.length,e.length);for(let o=0;o<n;o++){const h=a.charAt(o),m=e.charAt(o);if(h!==m)return e1(h)===e1(m)?an(h,m):e1(h)?1:-1}return an(a.length,e.length)}const hC=55296,fC=57343;function e1(a){const e=a.charCodeAt(0);return e>=hC&&e<=fC}function tc(a,e,n){return a.length===e.length&&a.every(((o,h)=>n(o,e[h])))}const Ly="__name__";class Bs{constructor(e,n,o){n===void 0?n=0:n>e.length&&bt(637,{offset:n,range:e.length}),o===void 0?o=e.length-n:o>e.length-n&&bt(1746,{length:o,range:e.length-n}),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return Bs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Bs?e.forEach((o=>{n.push(o)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let h=0;h<o;h++){const m=Bs.compareSegments(e.get(h),n.get(h));if(m!==0)return m}return an(e.length,n.length)}static compareSegments(e,n){const o=Bs.isNumericId(e),h=Bs.isNumericId(n);return o&&!h?-1:!o&&h?1:o&&h?Bs.extractNumericId(e).compare(Bs.extractNumericId(n)):A1(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mo.fromString(e.substring(4,e.length-2))}}class Fn extends Bs{construct(e,n,o){return new Fn(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new Ke(Ie.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter((h=>h.length>0)))}return new Fn(n)}static emptyPath(){return new Fn([])}}const dC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ei extends Bs{construct(e,n,o){return new ei(e,n,o)}static isValidIdentifier(e){return dC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ei.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ly}static keyField(){return new ei([Ly])}static fromServerFormat(e){const n=[];let o="",h=0;const m=()=>{if(o.length===0)throw new Ke(Ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let x=!1;for(;h<e.length;){const v=e[h];if(v==="\\"){if(h+1===e.length)throw new Ke(Ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const T=e[h+1];if(T!=="\\"&&T!=="."&&T!=="`")throw new Ke(Ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=T,h+=2}else v==="`"?(x=!x,h++):v!=="."||x?(o+=v,h++):(m(),h++)}if(m(),x)throw new Ke(Ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ei(n)}static emptyPath(){return new ei([])}}class pt{constructor(e){this.path=e}static fromPath(e){return new pt(Fn.fromString(e))}static fromName(e){return new pt(Fn.fromString(e).popFirst(5))}static empty(){return new pt(Fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pt(new Fn(e.slice()))}}function Xx(a,e,n){if(!n)throw new Ke(Ie.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function gC(a,e,n,o){if(e===!0&&o===!0)throw new Ke(Ie.INVALID_ARGUMENT,`${a} and ${n} cannot be used together.`)}function ky(a){if(!pt.isDocumentKey(a))throw new Ke(Ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function Py(a){if(pt.isDocumentKey(a))throw new Ke(Ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function Yx(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}function Pf(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(a);return e?`a custom ${e} object`:"an object"}}return typeof a=="function"?"a function":bt(12329,{type:typeof a})}function Ti(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new Ke(Ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pf(a);throw new Ke(Ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return a}function Or(a,e){const n={typeString:a};return e&&(n.value=e),n}function Cu(a,e){if(!Yx(a))throw new Ke(Ie.INVALID_ARGUMENT,"JSON must be an object");let n;for(const o in e)if(e[o]){const h=e[o].typeString,m="value"in e[o]?{value:e[o].value}:void 0;if(!(o in a)){n=`JSON missing required field: '${o}'`;break}const x=a[o];if(h&&typeof x!==h){n=`JSON field '${o}' must be a ${h}.`;break}if(m!==void 0&&x!==m.value){n=`Expected '${o}' field to equal '${m.value}'`;break}}if(n)throw new Ke(Ie.INVALID_ARGUMENT,n);return!0}const By=-62135596800,Vy=1e6;class Rn{static now(){return Rn.fromMillis(Date.now())}static fromDate(e){return Rn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor((e-1e3*n)*Vy);return new Rn(n,o)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ke(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ke(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<By)throw new Ke(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ke(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Vy}_compareTo(e){return this.seconds===e.seconds?an(this.nanoseconds,e.nanoseconds):an(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Rn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Cu(e,Rn._jsonSchema))return new Rn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-By;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Rn._jsonSchemaVersion="firestore/timestamp/1.0",Rn._jsonSchema={type:Or("string",Rn._jsonSchemaVersion),seconds:Or("number"),nanoseconds:Or("number")};class Dt{static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new Rn(0,0))}static max(){return new Dt(new Rn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const du=-1;function mC(a,e){const n=a.toTimestamp().seconds,o=a.toTimestamp().nanoseconds+1,h=Dt.fromTimestamp(o===1e9?new Rn(n+1,0):new Rn(n,o));return new Eo(h,pt.empty(),e)}function pC(a){return new Eo(a.readTime,a.key,du)}class Eo{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new Eo(Dt.min(),pt.empty(),du)}static max(){return new Eo(Dt.max(),pt.empty(),du)}}function yC(a,e){let n=a.readTime.compareTo(e.readTime);return n!==0?n:(n=pt.comparator(a.documentKey,e.documentKey),n!==0?n:an(a.largestBatchId,e.largestBatchId))}const EC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function hc(a){if(a.code!==Ie.FAILED_PRECONDITION||a.message!==EC)throw a;et("LocalStore","Unexpectedly lost primary lease")}class Oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&bt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Oe(((o,h)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(o,h)},this.catchCallback=m=>{this.wrapFailure(n,m).next(o,h)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Oe?n:Oe.resolve(n)}catch(n){return Oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Oe.reject(n)}static resolve(e){return new Oe(((n,o)=>{n(e)}))}static reject(e){return new Oe(((n,o)=>{o(e)}))}static waitFor(e){return new Oe(((n,o)=>{let h=0,m=0,x=!1;e.forEach((v=>{++h,v.next((()=>{++m,x&&m===h&&n()}),(T=>o(T)))})),x=!0,m===h&&n()}))}static or(e){let n=Oe.resolve(!1);for(const o of e)n=n.next((h=>h?Oe.resolve(h):o()));return n}static forEach(e,n){const o=[];return e.forEach(((h,m)=>{o.push(n.call(this,h,m))})),this.waitFor(o)}static mapArray(e,n){return new Oe(((o,h)=>{const m=e.length,x=new Array(m);let v=0;for(let T=0;T<m;T++){const A=T;n(e[A]).next((S=>{x[A]=S,++v,v===m&&o(x)}),(S=>h(S)))}}))}static doWhile(e,n){return new Oe(((o,h)=>{const m=()=>{e()===!0?n().next((()=>{m()}),h):o()};m()}))}}function _C(a){const e=a.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fc(a){return a.name==="IndexedDbTransactionError"}class Bf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>n.writeSequenceNumber(o))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Bf.ce=-1;const ig=-1;function Vf(a){return a==null}function pf(a){return a===0&&1/a==-1/0}function AC(a){return typeof a=="number"&&Number.isInteger(a)&&!pf(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}const Wx="";function wC(a){let e="";for(let n=0;n<a.length;n++)e.length>0&&(e=Uy(e)),e=TC(a.get(n),e);return Uy(e)}function TC(a,e){let n=e;const o=a.length;for(let h=0;h<o;h++){const m=a.charAt(h);switch(m){case"\0":n+="";break;case Wx:n+="";break;default:n+=m}}return n}function Uy(a){return a+Wx+""}function Fy(a){let e=0;for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&e++;return e}function Co(a,e){for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&e(n,a[n])}function Kx(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}class lr{constructor(e,n){this.comparator=e,this.root=n||$r.EMPTY}insert(e,n){return new lr(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$r.BLACK,null,null))}remove(e){return new lr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$r.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(o===0)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const h=this.comparator(e,o.key);if(h===0)return n+o.left.size;h<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,o)=>(e(n,o),!1)))}toString(){const e=[];return this.inorderTraversal(((n,o)=>(e.push(`${n}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gh(this.root,e,this.comparator,!0)}}class Gh{constructor(e,n,o,h){this.isReverse=h,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=n?o(e.key,n):1,n&&h&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(m===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $r{constructor(e,n,o,h,m){this.key=e,this.value=n,this.color=o??$r.RED,this.left=h??$r.EMPTY,this.right=m??$r.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,h,m){return new $r(e??this.key,n??this.value,o??this.color,h??this.left,m??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let h=this;const m=o(e,h.key);return h=m<0?h.copy(null,null,null,h.left.insert(e,n,o),null):m===0?h.copy(null,n,null,null,null):h.copy(null,null,null,null,h.right.insert(e,n,o)),h.fixUp()}removeMin(){if(this.left.isEmpty())return $r.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,h=this;if(n(e,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(e,n),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),n(e,h.key)===0){if(h.right.isEmpty())return $r.EMPTY;o=h.right.min(),h=h.copy(o.key,o.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(e,n))}return h.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw bt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw bt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw bt(27949);return e+(this.isRed()?0:1)}}$r.EMPTY=null,$r.RED=!0,$r.BLACK=!1;$r.EMPTY=new class{constructor(){this.size=0}get key(){throw bt(57766)}get value(){throw bt(16141)}get color(){throw bt(16727)}get left(){throw bt(29726)}get right(){throw bt(36894)}copy(e,n,o,h,m){return this}insert(e,n,o){return new $r(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Br{constructor(e){this.comparator=e,this.data=new lr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,o)=>(e(n),!1)))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const h=o.getNext();if(this.comparator(h.key,e[1])>=0)return;n(h.key)}}forEachWhile(e,n){let o;for(o=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new zy(this.data.getIterator())}getIteratorFrom(e){return new zy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((o=>{n=n.add(o)})),n}isEqual(e){if(!(e instanceof Br)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const h=n.getNext().key,m=o.getNext().key;if(this.comparator(h,m)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Br(this.comparator);return n.data=e,n}}class zy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Zi{constructor(e){this.fields=e,e.sort(ei.comparator)}static empty(){return new Zi([])}unionWith(e){let n=new Br(ei.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new Zi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return tc(this.fields,e.fields,((n,o)=>n.isEqual(o)))}}class Qx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ti{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(h){try{return atob(h)}catch(m){throw typeof DOMException<"u"&&m instanceof DOMException?new Qx("Invalid base64 string: "+m):m}})(e);return new ti(n)}static fromUint8Array(e){const n=(function(h){let m="";for(let x=0;x<h.length;++x)m+=String.fromCharCode(h[x]);return m})(e);return new ti(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const o=new Uint8Array(n.length);for(let h=0;h<n.length;h++)o[h]=n.charCodeAt(h);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return an(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ti.EMPTY_BYTE_STRING=new ti("");const bC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xo(a){if(Cn(!!a,39018),typeof a=="string"){let e=0;const n=bC.exec(a);if(Cn(!!n,46558,{timestamp:a}),n[1]){let h=n[1];h=(h+"000000000").substr(0,9),e=Number(h)}const o=new Date(a);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:_r(a.seconds),nanos:_r(a.nanos)}}function _r(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function _o(a){return typeof a=="string"?ti.fromBase64String(a):ti.fromUint8Array(a)}const Zx="server_timestamp",Jx="__type__",$x="__previous_value__",e_="__local_write_time__";function sg(a){return(a?.mapValue?.fields||{})[Jx]?.stringValue===Zx}function Uf(a){const e=a.mapValue.fields[$x];return sg(e)?Uf(e):e}function gu(a){const e=xo(a.mapValue.fields[e_].timestampValue);return new Rn(e.seconds,e.nanos)}class vC{constructor(e,n,o,h,m,x,v,T,A,S){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=h,this.ssl=m,this.forceLongPolling=x,this.autoDetectLongPolling=v,this.longPollingOptions=T,this.useFetchStreams=A,this.isUsingEmulator=S}}const yf="(default)";class mu{constructor(e,n){this.projectId=e,this.database=n||yf}static empty(){return new mu("","")}get isDefaultDatabase(){return this.database===yf}isEqual(e){return e instanceof mu&&e.projectId===this.projectId&&e.database===this.database}}const t_="__type__",CC="__max__",qh={mapValue:{}},n_="__vector__",Ef="value";function Ao(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?sg(a)?4:IC(a)?9007199254740991:SC(a)?10:11:bt(28295,{value:a})}function Gs(a,e){if(a===e)return!0;const n=Ao(a);if(n!==Ao(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return gu(a).isEqual(gu(e));case 3:return(function(h,m){if(typeof h.timestampValue=="string"&&typeof m.timestampValue=="string"&&h.timestampValue.length===m.timestampValue.length)return h.timestampValue===m.timestampValue;const x=xo(h.timestampValue),v=xo(m.timestampValue);return x.seconds===v.seconds&&x.nanos===v.nanos})(a,e);case 5:return a.stringValue===e.stringValue;case 6:return(function(h,m){return _o(h.bytesValue).isEqual(_o(m.bytesValue))})(a,e);case 7:return a.referenceValue===e.referenceValue;case 8:return(function(h,m){return _r(h.geoPointValue.latitude)===_r(m.geoPointValue.latitude)&&_r(h.geoPointValue.longitude)===_r(m.geoPointValue.longitude)})(a,e);case 2:return(function(h,m){if("integerValue"in h&&"integerValue"in m)return _r(h.integerValue)===_r(m.integerValue);if("doubleValue"in h&&"doubleValue"in m){const x=_r(h.doubleValue),v=_r(m.doubleValue);return x===v?pf(x)===pf(v):isNaN(x)&&isNaN(v)}return!1})(a,e);case 9:return tc(a.arrayValue.values||[],e.arrayValue.values||[],Gs);case 10:case 11:return(function(h,m){const x=h.mapValue.fields||{},v=m.mapValue.fields||{};if(Fy(x)!==Fy(v))return!1;for(const T in x)if(x.hasOwnProperty(T)&&(v[T]===void 0||!Gs(x[T],v[T])))return!1;return!0})(a,e);default:return bt(52216,{left:a})}}function pu(a,e){return(a.values||[]).find((n=>Gs(n,e)))!==void 0}function nc(a,e){if(a===e)return 0;const n=Ao(a),o=Ao(e);if(n!==o)return an(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return an(a.booleanValue,e.booleanValue);case 2:return(function(m,x){const v=_r(m.integerValue||m.doubleValue),T=_r(x.integerValue||x.doubleValue);return v<T?-1:v>T?1:v===T?0:isNaN(v)?isNaN(T)?0:-1:1})(a,e);case 3:return jy(a.timestampValue,e.timestampValue);case 4:return jy(gu(a),gu(e));case 5:return A1(a.stringValue,e.stringValue);case 6:return(function(m,x){const v=_o(m),T=_o(x);return v.compareTo(T)})(a.bytesValue,e.bytesValue);case 7:return(function(m,x){const v=m.split("/"),T=x.split("/");for(let A=0;A<v.length&&A<T.length;A++){const S=an(v[A],T[A]);if(S!==0)return S}return an(v.length,T.length)})(a.referenceValue,e.referenceValue);case 8:return(function(m,x){const v=an(_r(m.latitude),_r(x.latitude));return v!==0?v:an(_r(m.longitude),_r(x.longitude))})(a.geoPointValue,e.geoPointValue);case 9:return Hy(a.arrayValue,e.arrayValue);case 10:return(function(m,x){const v=m.fields||{},T=x.fields||{},A=v[Ef]?.arrayValue,S=T[Ef]?.arrayValue,O=an(A?.values?.length||0,S?.values?.length||0);return O!==0?O:Hy(A,S)})(a.mapValue,e.mapValue);case 11:return(function(m,x){if(m===qh.mapValue&&x===qh.mapValue)return 0;if(m===qh.mapValue)return 1;if(x===qh.mapValue)return-1;const v=m.fields||{},T=Object.keys(v),A=x.fields||{},S=Object.keys(A);T.sort(),S.sort();for(let O=0;O<T.length&&O<S.length;++O){const B=A1(T[O],S[O]);if(B!==0)return B;const Y=nc(v[T[O]],A[S[O]]);if(Y!==0)return Y}return an(T.length,S.length)})(a.mapValue,e.mapValue);default:throw bt(23264,{he:n})}}function jy(a,e){if(typeof a=="string"&&typeof e=="string"&&a.length===e.length)return an(a,e);const n=xo(a),o=xo(e),h=an(n.seconds,o.seconds);return h!==0?h:an(n.nanos,o.nanos)}function Hy(a,e){const n=a.values||[],o=e.values||[];for(let h=0;h<n.length&&h<o.length;++h){const m=nc(n[h],o[h]);if(m)return m}return an(n.length,o.length)}function rc(a){return w1(a)}function w1(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?(function(n){const o=xo(n);return`time(${o.seconds},${o.nanos})`})(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?(function(n){return _o(n).toBase64()})(a.bytesValue):"referenceValue"in a?(function(n){return pt.fromName(n).toString()})(a.referenceValue):"geoPointValue"in a?(function(n){return`geo(${n.latitude},${n.longitude})`})(a.geoPointValue):"arrayValue"in a?(function(n){let o="[",h=!0;for(const m of n.values||[])h?h=!1:o+=",",o+=w1(m);return o+"]"})(a.arrayValue):"mapValue"in a?(function(n){const o=Object.keys(n.fields||{}).sort();let h="{",m=!0;for(const x of o)m?m=!1:h+=",",h+=`${x}:${w1(n.fields[x])}`;return h+"}"})(a.mapValue):bt(61005,{value:a})}function tf(a){switch(Ao(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uf(a);return e?16+tf(e):16;case 5:return 2*a.stringValue.length;case 6:return _o(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((h,m)=>h+tf(m)),0)})(a.arrayValue);case 10:case 11:return(function(o){let h=0;return Co(o.fields,((m,x)=>{h+=m.length+tf(x)})),h})(a.mapValue);default:throw bt(13486,{value:a})}}function Gy(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function T1(a){return!!a&&"integerValue"in a}function ag(a){return!!a&&"arrayValue"in a}function qy(a){return!!a&&"nullValue"in a}function Xy(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function nf(a){return!!a&&"mapValue"in a}function SC(a){return(a?.mapValue?.fields||{})[t_]?.stringValue===n_}function su(a){if(a.geoPointValue)return{geoPointValue:{...a.geoPointValue}};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:{...a.timestampValue}};if(a.mapValue){const e={mapValue:{fields:{}}};return Co(a.mapValue.fields,((n,o)=>e.mapValue.fields[n]=su(o))),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(a.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=su(a.arrayValue.values[n]);return e}return{...a}}function IC(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue===CC}class Bi{constructor(e){this.value=e}static empty(){return new Bi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!nf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=su(n)}setAll(e){let n=ei.emptyPath(),o={},h=[];e.forEach(((x,v)=>{if(!n.isImmediateParentOf(v)){const T=this.getFieldsMap(n);this.applyChanges(T,o,h),o={},h=[],n=v.popLast()}x?o[v.lastSegment()]=su(x):h.push(v.lastSegment())}));const m=this.getFieldsMap(n);this.applyChanges(m,o,h)}delete(e){const n=this.field(e.popLast());nf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Gs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let h=n.mapValue.fields[e.get(o)];nf(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=h),n=h}return n.mapValue.fields}applyChanges(e,n,o){Co(n,((h,m)=>e[h]=m));for(const h of o)delete e[h]}clone(){return new Bi(su(this.value))}}function r_(a){const e=[];return Co(a.fields,((n,o)=>{const h=new ei([n]);if(nf(o)){const m=r_(o.mapValue).fields;if(m.length===0)e.push(h);else for(const x of m)e.push(h.child(x))}else e.push(h)})),new Zi(e)}class fi{constructor(e,n,o,h,m,x,v){this.key=e,this.documentType=n,this.version=o,this.readTime=h,this.createTime=m,this.data=x,this.documentState=v}static newInvalidDocument(e){return new fi(e,0,Dt.min(),Dt.min(),Dt.min(),Bi.empty(),0)}static newFoundDocument(e,n,o,h){return new fi(e,1,n,Dt.min(),o,h,0)}static newNoDocument(e,n){return new fi(e,2,n,Dt.min(),Dt.min(),Bi.empty(),0)}static newUnknownDocument(e,n){return new fi(e,3,n,Dt.min(),Dt.min(),Bi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Dt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class xf{constructor(e,n){this.position=e,this.inclusive=n}}function Yy(a,e,n){let o=0;for(let h=0;h<a.position.length;h++){const m=e[h],x=a.position[h];if(m.field.isKeyField()?o=pt.comparator(pt.fromName(x.referenceValue),n.key):o=nc(x,n.data.field(m.field)),m.dir==="desc"&&(o*=-1),o!==0)break}return o}function Wy(a,e){if(a===null)return e===null;if(e===null||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let n=0;n<a.position.length;n++)if(!Gs(a.position[n],e.position[n]))return!1;return!0}class _f{constructor(e,n="asc"){this.field=e,this.dir=n}}function RC(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}class i_{}class Nr extends i_{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,o):new OC(e,n,o):n==="array-contains"?new LC(e,o):n==="in"?new kC(e,o):n==="not-in"?new PC(e,o):n==="array-contains-any"?new BC(e,o):new Nr(e,n,o)}static createKeyFieldInFilter(e,n,o){return n==="in"?new DC(e,o):new MC(e,o)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(nc(n,this.value)):n!==null&&Ao(this.value)===Ao(n)&&this.matchesComparison(nc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return bt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cs extends i_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Cs(e,n)}matches(e){return s_(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function s_(a){return a.op==="and"}function a_(a){return NC(a)&&s_(a)}function NC(a){for(const e of a.filters)if(e instanceof Cs)return!1;return!0}function b1(a){if(a instanceof Nr)return a.field.canonicalString()+a.op.toString()+rc(a.value);if(a_(a))return a.filters.map((e=>b1(e))).join(",");{const e=a.filters.map((n=>b1(n))).join(",");return`${a.op}(${e})`}}function o_(a,e){return a instanceof Nr?(function(o,h){return h instanceof Nr&&o.op===h.op&&o.field.isEqual(h.field)&&Gs(o.value,h.value)})(a,e):a instanceof Cs?(function(o,h){return h instanceof Cs&&o.op===h.op&&o.filters.length===h.filters.length?o.filters.reduce(((m,x,v)=>m&&o_(x,h.filters[v])),!0):!1})(a,e):void bt(19439)}function l_(a){return a instanceof Nr?(function(n){return`${n.field.canonicalString()} ${n.op} ${rc(n.value)}`})(a):a instanceof Cs?(function(n){return n.op.toString()+" {"+n.getFilters().map(l_).join(" ,")+"}"})(a):"Filter"}class OC extends Nr{constructor(e,n,o){super(e,n,o),this.key=pt.fromName(o.referenceValue)}matches(e){const n=pt.comparator(e.key,this.key);return this.matchesComparison(n)}}class DC extends Nr{constructor(e,n){super(e,"in",n),this.keys=c_("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class MC extends Nr{constructor(e,n){super(e,"not-in",n),this.keys=c_("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function c_(a,e){return(e.arrayValue?.values||[]).map((n=>pt.fromName(n.referenceValue)))}class LC extends Nr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ag(n)&&pu(n.arrayValue,this.value)}}class kC extends Nr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&pu(this.value.arrayValue,n)}}class PC extends Nr{constructor(e,n){super(e,"not-in",n)}matches(e){if(pu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!pu(this.value.arrayValue,n)}}class BC extends Nr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ag(n)||!n.arrayValue.values)&&n.arrayValue.values.some((o=>pu(this.value.arrayValue,o)))}}class VC{constructor(e,n=null,o=[],h=[],m=null,x=null,v=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=h,this.limit=m,this.startAt=x,this.endAt=v,this.Te=null}}function Ky(a,e=null,n=[],o=[],h=null,m=null,x=null){return new VC(a,e,n,o,h,m,x)}function og(a){const e=kt(a);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((o=>b1(o))).join(","),n+="|ob:",n+=e.orderBy.map((o=>(function(m){return m.field.canonicalString()+m.dir})(o))).join(","),Vf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((o=>rc(o))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((o=>rc(o))).join(",")),e.Te=n}return e.Te}function lg(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<a.orderBy.length;n++)if(!RC(a.orderBy[n],e.orderBy[n]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let n=0;n<a.filters.length;n++)if(!o_(a.filters[n],e.filters[n]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!Wy(a.startAt,e.startAt)&&Wy(a.endAt,e.endAt)}function v1(a){return pt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}class Su{constructor(e,n=null,o=[],h=[],m=null,x="F",v=null,T=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=h,this.limit=m,this.limitType=x,this.startAt=v,this.endAt=T,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function UC(a,e,n,o,h,m,x,v){return new Su(a,e,n,o,h,m,x,v)}function Ff(a){return new Su(a)}function Qy(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function u_(a){return a.collectionGroup!==null}function au(a){const e=kt(a);if(e.Ie===null){e.Ie=[];const n=new Set;for(const m of e.explicitOrderBy)e.Ie.push(m),n.add(m.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(x){let v=new Br(ei.comparator);return x.filters.forEach((T=>{T.getFlattenedFilters().forEach((A=>{A.isInequality()&&(v=v.add(A.field))}))})),v})(e).forEach((m=>{n.has(m.canonicalString())||m.isKeyField()||e.Ie.push(new _f(m,o))})),n.has(ei.keyField().canonicalString())||e.Ie.push(new _f(ei.keyField(),o))}return e.Ie}function Fs(a){const e=kt(a);return e.Ee||(e.Ee=FC(e,au(a))),e.Ee}function FC(a,e){if(a.limitType==="F")return Ky(a.path,a.collectionGroup,e,a.filters,a.limit,a.startAt,a.endAt);{e=e.map((h=>{const m=h.dir==="desc"?"asc":"desc";return new _f(h.field,m)}));const n=a.endAt?new xf(a.endAt.position,a.endAt.inclusive):null,o=a.startAt?new xf(a.startAt.position,a.startAt.inclusive):null;return Ky(a.path,a.collectionGroup,e,a.filters,a.limit,n,o)}}function C1(a,e){const n=a.filters.concat([e]);return new Su(a.path,a.collectionGroup,a.explicitOrderBy.slice(),n,a.limit,a.limitType,a.startAt,a.endAt)}function S1(a,e,n){return new Su(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,n,a.startAt,a.endAt)}function zf(a,e){return lg(Fs(a),Fs(e))&&a.limitType===e.limitType}function h_(a){return`${og(Fs(a))}|lt:${a.limitType}`}function Hl(a){return`Query(target=${(function(n){let o=n.path.canonicalString();return n.collectionGroup!==null&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map((h=>l_(h))).join(", ")}]`),Vf(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map((h=>(function(x){return`${x.field.canonicalString()} (${x.dir})`})(h))).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map((h=>rc(h))).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map((h=>rc(h))).join(",")),`Target(${o})`})(Fs(a))}; limitType=${a.limitType})`}function jf(a,e){return e.isFoundDocument()&&(function(o,h){const m=h.key.path;return o.collectionGroup!==null?h.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(m):pt.isDocumentKey(o.path)?o.path.isEqual(m):o.path.isImmediateParentOf(m)})(a,e)&&(function(o,h){for(const m of au(o))if(!m.field.isKeyField()&&h.data.field(m.field)===null)return!1;return!0})(a,e)&&(function(o,h){for(const m of o.filters)if(!m.matches(h))return!1;return!0})(a,e)&&(function(o,h){return!(o.startAt&&!(function(x,v,T){const A=Yy(x,v,T);return x.inclusive?A<=0:A<0})(o.startAt,au(o),h)||o.endAt&&!(function(x,v,T){const A=Yy(x,v,T);return x.inclusive?A>=0:A>0})(o.endAt,au(o),h))})(a,e)}function zC(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function f_(a){return(e,n)=>{let o=!1;for(const h of au(a)){const m=jC(h,e,n);if(m!==0)return m;o=o||h.field.isKeyField()}return 0}}function jC(a,e,n){const o=a.field.isKeyField()?pt.comparator(e.key,n.key):(function(m,x,v){const T=x.data.field(m),A=v.data.field(m);return T!==null&&A!==null?nc(T,A):bt(42886)})(a.field,e,n);switch(a.dir){case"asc":return o;case"desc":return-1*o;default:return bt(19790,{direction:a.dir})}}class ul{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o!==void 0){for(const[h,m]of o)if(this.equalsFn(h,e))return m}}has(e){return this.get(e)!==void 0}set(e,n){const o=this.mapKeyFn(e),h=this.inner[o];if(h===void 0)return this.inner[o]=[[e,n]],void this.innerSize++;for(let m=0;m<h.length;m++)if(this.equalsFn(h[m][0],e))return void(h[m]=[e,n]);h.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o===void 0)return!1;for(let h=0;h<o.length;h++)if(this.equalsFn(o[h][0],e))return o.length===1?delete this.inner[n]:o.splice(h,1),this.innerSize--,!0;return!1}forEach(e){Co(this.inner,((n,o)=>{for(const[h,m]of o)e(h,m)}))}isEmpty(){return Kx(this.inner)}size(){return this.innerSize}}const HC=new lr(pt.comparator);function Sa(){return HC}const d_=new lr(pt.comparator);function $c(...a){let e=d_;for(const n of a)e=e.insert(n.key,n);return e}function g_(a){let e=d_;return a.forEach(((n,o)=>e=e.insert(n,o.overlayedDocument))),e}function Zo(){return ou()}function m_(){return ou()}function ou(){return new ul((a=>a.toString()),((a,e)=>a.isEqual(e)))}const GC=new lr(pt.comparator),qC=new Br(pt.comparator);function on(...a){let e=qC;for(const n of a)e=e.add(n);return e}const XC=new Br(an);function YC(){return XC}function cg(a,e){if(a.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pf(e)?"-0":e}}function p_(a){return{integerValue:""+a}}function WC(a,e){return AC(e)?p_(e):cg(a,e)}class Hf{constructor(){this._=void 0}}function KC(a,e,n){return a instanceof yu?(function(h,m){const x={fields:{[Jx]:{stringValue:Zx},[e_]:{timestampValue:{seconds:h.seconds,nanos:h.nanoseconds}}}};return m&&sg(m)&&(m=Uf(m)),m&&(x.fields[$x]=m),{mapValue:x}})(n,e):a instanceof Eu?E_(a,e):a instanceof xu?x_(a,e):(function(h,m){const x=y_(h,m),v=Zy(x)+Zy(h.Ae);return T1(x)&&T1(h.Ae)?p_(v):cg(h.serializer,v)})(a,e)}function QC(a,e,n){return a instanceof Eu?E_(a,e):a instanceof xu?x_(a,e):n}function y_(a,e){return a instanceof Af?(function(o){return T1(o)||(function(m){return!!m&&"doubleValue"in m})(o)})(e)?e:{integerValue:0}:null}class yu extends Hf{}class Eu extends Hf{constructor(e){super(),this.elements=e}}function E_(a,e){const n=__(e);for(const o of a.elements)n.some((h=>Gs(h,o)))||n.push(o);return{arrayValue:{values:n}}}class xu extends Hf{constructor(e){super(),this.elements=e}}function x_(a,e){let n=__(e);for(const o of a.elements)n=n.filter((h=>!Gs(h,o)));return{arrayValue:{values:n}}}class Af extends Hf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Zy(a){return _r(a.integerValue||a.doubleValue)}function __(a){return ag(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}class ZC{constructor(e,n){this.field=e,this.transform=n}}function JC(a,e){return a.field.isEqual(e.field)&&(function(o,h){return o instanceof Eu&&h instanceof Eu||o instanceof xu&&h instanceof xu?tc(o.elements,h.elements,Gs):o instanceof Af&&h instanceof Af?Gs(o.Ae,h.Ae):o instanceof yu&&h instanceof yu})(a.transform,e.transform)}class $C{constructor(e,n){this.version=e,this.transformResults=n}}class bi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new bi}static exists(e){return new bi(void 0,e)}static updateTime(e){return new bi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rf(a,e){return a.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(a.updateTime):a.exists===void 0||a.exists===e.isFoundDocument()}class Gf{}function A_(a,e){if(!a.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return a.isNoDocument()?new qf(a.key,bi.none()):new Iu(a.key,a.data,bi.none());{const n=a.data,o=Bi.empty();let h=new Br(ei.comparator);for(let m of e.fields)if(!h.has(m)){let x=n.field(m);x===null&&m.length>1&&(m=m.popLast(),x=n.field(m)),x===null?o.delete(m):o.set(m,x),h=h.add(m)}return new So(a.key,o,new Zi(h.toArray()),bi.none())}}function eS(a,e,n){a instanceof Iu?(function(h,m,x){const v=h.value.clone(),T=$y(h.fieldTransforms,m,x.transformResults);v.setAll(T),m.convertToFoundDocument(x.version,v).setHasCommittedMutations()})(a,e,n):a instanceof So?(function(h,m,x){if(!rf(h.precondition,m))return void m.convertToUnknownDocument(x.version);const v=$y(h.fieldTransforms,m,x.transformResults),T=m.data;T.setAll(w_(h)),T.setAll(v),m.convertToFoundDocument(x.version,T).setHasCommittedMutations()})(a,e,n):(function(h,m,x){m.convertToNoDocument(x.version).setHasCommittedMutations()})(0,e,n)}function lu(a,e,n,o){return a instanceof Iu?(function(m,x,v,T){if(!rf(m.precondition,x))return v;const A=m.value.clone(),S=eE(m.fieldTransforms,T,x);return A.setAll(S),x.convertToFoundDocument(x.version,A).setHasLocalMutations(),null})(a,e,n,o):a instanceof So?(function(m,x,v,T){if(!rf(m.precondition,x))return v;const A=eE(m.fieldTransforms,T,x),S=x.data;return S.setAll(w_(m)),S.setAll(A),x.convertToFoundDocument(x.version,S).setHasLocalMutations(),v===null?null:v.unionWith(m.fieldMask.fields).unionWith(m.fieldTransforms.map((O=>O.field)))})(a,e,n,o):(function(m,x,v){return rf(m.precondition,x)?(x.convertToNoDocument(x.version).setHasLocalMutations(),null):v})(a,e,n)}function tS(a,e){let n=null;for(const o of a.fieldTransforms){const h=e.data.field(o.field),m=y_(o.transform,h||null);m!=null&&(n===null&&(n=Bi.empty()),n.set(o.field,m))}return n||null}function Jy(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&!!(function(o,h){return o===void 0&&h===void 0||!(!o||!h)&&tc(o,h,((m,x)=>JC(m,x)))})(a.fieldTransforms,e.fieldTransforms)&&(a.type===0?a.value.isEqual(e.value):a.type!==1||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask))}class Iu extends Gf{constructor(e,n,o,h=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=h,this.type=0}getFieldMask(){return null}}class So extends Gf{constructor(e,n,o,h,m=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=h,this.fieldTransforms=m,this.type=1}getFieldMask(){return this.fieldMask}}function w_(a){const e=new Map;return a.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const o=a.data.field(n);e.set(n,o)}})),e}function $y(a,e,n){const o=new Map;Cn(a.length===n.length,32656,{Re:n.length,Ve:a.length});for(let h=0;h<n.length;h++){const m=a[h],x=m.transform,v=e.data.field(m.field);o.set(m.field,QC(x,v,n[h]))}return o}function eE(a,e,n){const o=new Map;for(const h of a){const m=h.transform,x=n.data.field(h.field);o.set(h.field,KC(m,x,e))}return o}class qf extends Gf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nS extends Gf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class rS{constructor(e,n,o,h){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=h}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let h=0;h<this.mutations.length;h++){const m=this.mutations[h];m.key.isEqual(e.key)&&eS(m,e,o[h])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=lu(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=lu(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=m_();return this.mutations.forEach((h=>{const m=e.get(h.key),x=m.overlayedDocument;let v=this.applyToLocalView(x,m.mutatedFields);v=n.has(h.key)?null:v;const T=A_(x,v);T!==null&&o.set(h.key,T),x.isValidDocument()||x.convertToNoDocument(Dt.min())})),o}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),on())}isEqual(e){return this.batchId===e.batchId&&tc(this.mutations,e.mutations,((n,o)=>Jy(n,o)))&&tc(this.baseMutations,e.baseMutations,((n,o)=>Jy(n,o)))}}class ug{constructor(e,n,o,h){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=h}static from(e,n,o){Cn(e.mutations.length===o.length,58842,{me:e.mutations.length,fe:o.length});let h=(function(){return GC})();const m=e.mutations;for(let x=0;x<m.length;x++)h=h.insert(m[x].key,o[x].version);return new ug(e,n,o,h)}}class iS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class sS{constructor(e,n){this.count=e,this.unchangedNames=n}}var Sr,dn;function aS(a){switch(a){case Ie.OK:return bt(64938);case Ie.CANCELLED:case Ie.UNKNOWN:case Ie.DEADLINE_EXCEEDED:case Ie.RESOURCE_EXHAUSTED:case Ie.INTERNAL:case Ie.UNAVAILABLE:case Ie.UNAUTHENTICATED:return!1;case Ie.INVALID_ARGUMENT:case Ie.NOT_FOUND:case Ie.ALREADY_EXISTS:case Ie.PERMISSION_DENIED:case Ie.FAILED_PRECONDITION:case Ie.ABORTED:case Ie.OUT_OF_RANGE:case Ie.UNIMPLEMENTED:case Ie.DATA_LOSS:return!0;default:return bt(15467,{code:a})}}function T_(a){if(a===void 0)return Ca("GRPC error has no .code"),Ie.UNKNOWN;switch(a){case Sr.OK:return Ie.OK;case Sr.CANCELLED:return Ie.CANCELLED;case Sr.UNKNOWN:return Ie.UNKNOWN;case Sr.DEADLINE_EXCEEDED:return Ie.DEADLINE_EXCEEDED;case Sr.RESOURCE_EXHAUSTED:return Ie.RESOURCE_EXHAUSTED;case Sr.INTERNAL:return Ie.INTERNAL;case Sr.UNAVAILABLE:return Ie.UNAVAILABLE;case Sr.UNAUTHENTICATED:return Ie.UNAUTHENTICATED;case Sr.INVALID_ARGUMENT:return Ie.INVALID_ARGUMENT;case Sr.NOT_FOUND:return Ie.NOT_FOUND;case Sr.ALREADY_EXISTS:return Ie.ALREADY_EXISTS;case Sr.PERMISSION_DENIED:return Ie.PERMISSION_DENIED;case Sr.FAILED_PRECONDITION:return Ie.FAILED_PRECONDITION;case Sr.ABORTED:return Ie.ABORTED;case Sr.OUT_OF_RANGE:return Ie.OUT_OF_RANGE;case Sr.UNIMPLEMENTED:return Ie.UNIMPLEMENTED;case Sr.DATA_LOSS:return Ie.DATA_LOSS;default:return bt(39323,{code:a})}}(dn=Sr||(Sr={}))[dn.OK=0]="OK",dn[dn.CANCELLED=1]="CANCELLED",dn[dn.UNKNOWN=2]="UNKNOWN",dn[dn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dn[dn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dn[dn.NOT_FOUND=5]="NOT_FOUND",dn[dn.ALREADY_EXISTS=6]="ALREADY_EXISTS",dn[dn.PERMISSION_DENIED=7]="PERMISSION_DENIED",dn[dn.UNAUTHENTICATED=16]="UNAUTHENTICATED",dn[dn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dn[dn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dn[dn.ABORTED=10]="ABORTED",dn[dn.OUT_OF_RANGE=11]="OUT_OF_RANGE",dn[dn.UNIMPLEMENTED=12]="UNIMPLEMENTED",dn[dn.INTERNAL=13]="INTERNAL",dn[dn.UNAVAILABLE=14]="UNAVAILABLE",dn[dn.DATA_LOSS=15]="DATA_LOSS";function oS(){return new TextEncoder}const lS=new mo([4294967295,4294967295],0);function tE(a){const e=oS().encode(a),n=new Vx;return n.update(e),new Uint8Array(n.digest())}function nE(a){const e=new DataView(a.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),h=e.getUint32(8,!0),m=e.getUint32(12,!0);return[new mo([n,o],0),new mo([h,m],0)]}class hg{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new eu(`Invalid padding: ${n}`);if(o<0)throw new eu(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new eu(`Invalid hash count: ${o}`);if(e.length===0&&n!==0)throw new eu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=mo.fromNumber(this.ge)}ye(e,n,o){let h=e.add(n.multiply(mo.fromNumber(o)));return h.compare(lS)===1&&(h=new mo([h.getBits(0),h.getBits(1)],0)),h.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=tE(e),[o,h]=nE(n);for(let m=0;m<this.hashCount;m++){const x=this.ye(o,h,m);if(!this.we(x))return!1}return!0}static create(e,n,o){const h=e%8==0?0:8-e%8,m=new Uint8Array(Math.ceil(e/8)),x=new hg(m,h,n);return o.forEach((v=>x.insert(v))),x}insert(e){if(this.ge===0)return;const n=tE(e),[o,h]=nE(n);for(let m=0;m<this.hashCount;m++){const x=this.ye(o,h,m);this.Se(x)}}Se(e){const n=Math.floor(e/8),o=e%8;this.bitmap[n]|=1<<o}}class eu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Xf{constructor(e,n,o,h,m){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=h,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const h=new Map;return h.set(e,Ru.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new Xf(Dt.min(),h,new lr(an),Sa(),on())}}class Ru{constructor(e,n,o,h,m){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=h,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new Ru(o,n,on(),on(),on())}}class sf{constructor(e,n,o,h){this.be=e,this.removedTargetIds=n,this.key=o,this.De=h}}class b_{constructor(e,n){this.targetId=e,this.Ce=n}}class v_{constructor(e,n,o=ti.EMPTY_BYTE_STRING,h=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=h}}class rE{constructor(){this.ve=0,this.Fe=iE(),this.Me=ti.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=on(),n=on(),o=on();return this.Fe.forEach(((h,m)=>{switch(m){case 0:e=e.add(h);break;case 2:n=n.add(h);break;case 1:o=o.add(h);break;default:bt(38017,{changeType:m})}})),new Ru(this.Me,this.xe,e,n,o)}qe(){this.Oe=!1,this.Fe=iE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Cn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class cS{constructor(e){this.Ge=e,this.ze=new Map,this.je=Sa(),this.Je=Xh(),this.He=Xh(),this.Ye=new lr(an)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const o=this.nt(n);switch(e.state){case 0:this.rt(n)&&o.Le(e.resumeToken);break;case 1:o.Ke(),o.Ne||o.qe(),o.Le(e.resumeToken);break;case 2:o.Ke(),o.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(o.We(),o.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),o.Le(e.resumeToken));break;default:bt(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((o,h)=>{this.rt(h)&&n(h)}))}st(e){const n=e.targetId,o=e.Ce.count,h=this.ot(n);if(h){const m=h.target;if(v1(m))if(o===0){const x=new pt(m.path);this.et(n,x,fi.newNoDocument(x,Dt.min()))}else Cn(o===1,20013,{expectedCount:o});else{const x=this._t(n);if(x!==o){const v=this.ut(e),T=v?this.ct(v,e,x):1;if(T!==0){this.it(n);const A=T===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,A)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:h=0},hashCount:m=0}=n;let x,v;try{x=_o(o).toUint8Array()}catch(T){if(T instanceof Qx)return ec("Decoding the base64 bloom filter in existence filter failed ("+T.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw T}try{v=new hg(x,h,m)}catch(T){return ec(T instanceof eu?"BloomFilter error: ":"Applying bloom filter failed: ",T),null}return v.ge===0?null:v}ct(e,n,o){return n.Ce.count===o-this.Pt(e,n.targetId)?0:2}Pt(e,n){const o=this.Ge.getRemoteKeysForTarget(n);let h=0;return o.forEach((m=>{const x=this.Ge.ht(),v=`projects/${x.projectId}/databases/${x.database}/documents/${m.path.canonicalString()}`;e.mightContain(v)||(this.et(n,m,null),h++)})),h}Tt(e){const n=new Map;this.ze.forEach(((m,x)=>{const v=this.ot(x);if(v){if(m.current&&v1(v.target)){const T=new pt(v.target.path);this.It(T).has(x)||this.Et(x,T)||this.et(x,T,fi.newNoDocument(T,e))}m.Be&&(n.set(x,m.ke()),m.qe())}}));let o=on();this.He.forEach(((m,x)=>{let v=!0;x.forEachWhile((T=>{const A=this.ot(T);return!A||A.purpose==="TargetPurposeLimboResolution"||(v=!1,!1)})),v&&(o=o.add(m))})),this.je.forEach(((m,x)=>x.setReadTime(e)));const h=new Xf(e,n,this.Ye,this.je,o);return this.je=Sa(),this.Je=Xh(),this.He=Xh(),this.Ye=new lr(an),h}Xe(e,n){if(!this.rt(e))return;const o=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,o),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,o){if(!this.rt(e))return;const h=this.nt(e);this.Et(e,n)?h.Qe(n,1):h.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),o&&(this.je=this.je.insert(n,o))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new rE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Br(an),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Br(an),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||et("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new rE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Xh(){return new lr(pt.comparator)}function iE(){return new lr(pt.comparator)}const uS={asc:"ASCENDING",desc:"DESCENDING"},hS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fS={and:"AND",or:"OR"};class dS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function I1(a,e){return a.useProto3Json||Vf(e)?e:{value:e}}function wf(a,e){return a.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function C_(a,e){return a.useProto3Json?e.toBase64():e.toUint8Array()}function gS(a,e){return wf(a,e.toTimestamp())}function zs(a){return Cn(!!a,49232),Dt.fromTimestamp((function(n){const o=xo(n);return new Rn(o.seconds,o.nanos)})(a))}function fg(a,e){return R1(a,e).canonicalString()}function R1(a,e){const n=(function(h){return new Fn(["projects",h.projectId,"databases",h.database])})(a).child("documents");return e===void 0?n:n.child(e)}function S_(a){const e=Fn.fromString(a);return Cn(D_(e),10190,{key:e.toString()}),e}function N1(a,e){return fg(a.databaseId,e.path)}function t1(a,e){const n=S_(e);if(n.get(1)!==a.databaseId.projectId)throw new Ke(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+a.databaseId.projectId);if(n.get(3)!==a.databaseId.database)throw new Ke(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+a.databaseId.database);return new pt(R_(n))}function I_(a,e){return fg(a.databaseId,e)}function mS(a){const e=S_(a);return e.length===4?Fn.emptyPath():R_(e)}function O1(a){return new Fn(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function R_(a){return Cn(a.length>4&&a.get(4)==="documents",29091,{key:a.toString()}),a.popFirst(5)}function sE(a,e,n){return{name:N1(a,e),fields:n.value.mapValue.fields}}function pS(a,e){let n;if("targetChange"in e){e.targetChange;const o=(function(A){return A==="NO_CHANGE"?0:A==="ADD"?1:A==="REMOVE"?2:A==="CURRENT"?3:A==="RESET"?4:bt(39313,{state:A})})(e.targetChange.targetChangeType||"NO_CHANGE"),h=e.targetChange.targetIds||[],m=(function(A,S){return A.useProto3Json?(Cn(S===void 0||typeof S=="string",58123),ti.fromBase64String(S||"")):(Cn(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),ti.fromUint8Array(S||new Uint8Array))})(a,e.targetChange.resumeToken),x=e.targetChange.cause,v=x&&(function(A){const S=A.code===void 0?Ie.UNKNOWN:T_(A.code);return new Ke(S,A.message||"")})(x);n=new v_(o,h,m,v||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const h=t1(a,o.document.name),m=zs(o.document.updateTime),x=o.document.createTime?zs(o.document.createTime):Dt.min(),v=new Bi({mapValue:{fields:o.document.fields}}),T=fi.newFoundDocument(h,m,x,v),A=o.targetIds||[],S=o.removedTargetIds||[];n=new sf(A,S,T.key,T)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const h=t1(a,o.document),m=o.readTime?zs(o.readTime):Dt.min(),x=fi.newNoDocument(h,m),v=o.removedTargetIds||[];n=new sf([],v,x.key,x)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const h=t1(a,o.document),m=o.removedTargetIds||[];n=new sf([],m,h,null)}else{if(!("filter"in e))return bt(11601,{Rt:e});{e.filter;const o=e.filter;o.targetId;const{count:h=0,unchangedNames:m}=o,x=new sS(h,m),v=o.targetId;n=new b_(v,x)}}return n}function yS(a,e){let n;if(e instanceof Iu)n={update:sE(a,e.key,e.value)};else if(e instanceof qf)n={delete:N1(a,e.key)};else if(e instanceof So)n={update:sE(a,e.key,e.data),updateMask:CS(e.fieldMask)};else{if(!(e instanceof nS))return bt(16599,{Vt:e.type});n={verify:N1(a,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((o=>(function(m,x){const v=x.transform;if(v instanceof yu)return{fieldPath:x.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof Eu)return{fieldPath:x.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof xu)return{fieldPath:x.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof Af)return{fieldPath:x.field.canonicalString(),increment:v.Ae};throw bt(20930,{transform:x.transform})})(0,o)))),e.precondition.isNone||(n.currentDocument=(function(h,m){return m.updateTime!==void 0?{updateTime:gS(h,m.updateTime)}:m.exists!==void 0?{exists:m.exists}:bt(27497)})(a,e.precondition)),n}function ES(a,e){return a&&a.length>0?(Cn(e!==void 0,14353),a.map((n=>(function(h,m){let x=h.updateTime?zs(h.updateTime):zs(m);return x.isEqual(Dt.min())&&(x=zs(m)),new $C(x,h.transformResults||[])})(n,e)))):[]}function xS(a,e){return{documents:[I_(a,e.path)]}}function _S(a,e){const n={structuredQuery:{}},o=e.path;let h;e.collectionGroup!==null?(h=o,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(h=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=I_(a,h);const m=(function(A){if(A.length!==0)return O_(Cs.create(A,"and"))})(e.filters);m&&(n.structuredQuery.where=m);const x=(function(A){if(A.length!==0)return A.map((S=>(function(B){return{field:Gl(B.field),direction:TS(B.dir)}})(S)))})(e.orderBy);x&&(n.structuredQuery.orderBy=x);const v=I1(a,e.limit);return v!==null&&(n.structuredQuery.limit=v),e.startAt&&(n.structuredQuery.startAt=(function(A){return{before:A.inclusive,values:A.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(A){return{before:!A.inclusive,values:A.position}})(e.endAt)),{ft:n,parent:h}}function AS(a){let e=mS(a.parent);const n=a.structuredQuery,o=n.from?n.from.length:0;let h=null;if(o>0){Cn(o===1,65062);const S=n.from[0];S.allDescendants?h=S.collectionId:e=e.child(S.collectionId)}let m=[];n.where&&(m=(function(O){const B=N_(O);return B instanceof Cs&&a_(B)?B.getFilters():[B]})(n.where));let x=[];n.orderBy&&(x=(function(O){return O.map((B=>(function(te){return new _f(ql(te.field),(function(de){switch(de){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(te.direction))})(B)))})(n.orderBy));let v=null;n.limit&&(v=(function(O){let B;return B=typeof O=="object"?O.value:O,Vf(B)?null:B})(n.limit));let T=null;n.startAt&&(T=(function(O){const B=!!O.before,Y=O.values||[];return new xf(Y,B)})(n.startAt));let A=null;return n.endAt&&(A=(function(O){const B=!O.before,Y=O.values||[];return new xf(Y,B)})(n.endAt)),UC(e,h,x,m,v,"F",T,A)}function wS(a,e){const n=(function(h){switch(h){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return bt(28987,{purpose:h})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function N_(a){return a.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=ql(n.unaryFilter.field);return Nr.create(o,"==",{doubleValue:NaN});case"IS_NULL":const h=ql(n.unaryFilter.field);return Nr.create(h,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const m=ql(n.unaryFilter.field);return Nr.create(m,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const x=ql(n.unaryFilter.field);return Nr.create(x,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return bt(61313);default:return bt(60726)}})(a):a.fieldFilter!==void 0?(function(n){return Nr.create(ql(n.fieldFilter.field),(function(h){switch(h){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return bt(58110);default:return bt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(a):a.compositeFilter!==void 0?(function(n){return Cs.create(n.compositeFilter.filters.map((o=>N_(o))),(function(h){switch(h){case"AND":return"and";case"OR":return"or";default:return bt(1026)}})(n.compositeFilter.op))})(a):bt(30097,{filter:a})}function TS(a){return uS[a]}function bS(a){return hS[a]}function vS(a){return fS[a]}function Gl(a){return{fieldPath:a.canonicalString()}}function ql(a){return ei.fromServerFormat(a.fieldPath)}function O_(a){return a instanceof Nr?(function(n){if(n.op==="=="){if(Xy(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NAN"}};if(qy(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Xy(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NOT_NAN"}};if(qy(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gl(n.field),op:bS(n.op),value:n.value}}})(a):a instanceof Cs?(function(n){const o=n.getFilters().map((h=>O_(h)));return o.length===1?o[0]:{compositeFilter:{op:vS(n.op),filters:o}}})(a):bt(54877,{filter:a})}function CS(a){const e=[];return a.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function D_(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}class co{constructor(e,n,o,h,m=Dt.min(),x=Dt.min(),v=ti.EMPTY_BYTE_STRING,T=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=h,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=x,this.resumeToken=v,this.expectedCount=T}withSequenceNumber(e){return new co(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class SS{constructor(e){this.yt=e}}function IS(a){const e=AS({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?S1(e,e.limit,"L"):e}class RS{constructor(){this.Cn=new NS}addToCollectionParentIndex(e,n){return this.Cn.add(n),Oe.resolve()}getCollectionParents(e,n){return Oe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Oe.resolve()}deleteFieldIndex(e,n){return Oe.resolve()}deleteAllFieldIndexes(e){return Oe.resolve()}createTargetIndexes(e,n){return Oe.resolve()}getDocumentsMatchingTarget(e,n){return Oe.resolve(null)}getIndexType(e,n){return Oe.resolve(0)}getFieldIndexes(e,n){return Oe.resolve([])}getNextCollectionGroupToUpdate(e){return Oe.resolve(null)}getMinOffset(e,n){return Oe.resolve(Eo.min())}getMinOffsetFromCollectionGroup(e,n){return Oe.resolve(Eo.min())}updateCollectionGroup(e,n,o){return Oe.resolve()}updateIndexEntries(e,n){return Oe.resolve()}}class NS{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),h=this.index[n]||new Br(Fn.comparator),m=!h.has(o);return this.index[n]=h.add(o),m}has(e){const n=e.lastSegment(),o=e.popLast(),h=this.index[n];return h&&h.has(o)}getEntries(e){return(this.index[e]||new Br(Fn.comparator)).toArray()}}const aE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},M_=41943040;class Pi{static withCacheSize(e){return new Pi(e,Pi.DEFAULT_COLLECTION_PERCENTILE,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}}Pi.DEFAULT_COLLECTION_PERCENTILE=10,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pi.DEFAULT=new Pi(M_,Pi.DEFAULT_COLLECTION_PERCENTILE,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pi.DISABLED=new Pi(-1,0,0);class ic{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ic(0)}static cr(){return new ic(-1)}}const oE="LruGarbageCollector",OS=1048576;function lE([a,e],[n,o]){const h=an(a,n);return h===0?an(e,o):h}class DS{constructor(e){this.Ir=e,this.buffer=new Br(lE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();lE(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class MS{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){et(oE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){fc(n)?et(oE,"Ignoring IndexedDB error during garbage collection: ",n):await hc(n)}await this.Vr(3e5)}))}}class LS{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((o=>Math.floor(n/100*o)))}nthSequenceNumber(e,n){if(n===0)return Oe.resolve(Bf.ce);const o=new DS(n);return this.mr.forEachTarget(e,(h=>o.Ar(h.sequenceNumber))).next((()=>this.mr.pr(e,(h=>o.Ar(h))))).next((()=>o.maxValue))}removeTargets(e,n,o){return this.mr.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(et("LruGarbageCollector","Garbage collection skipped; disabled"),Oe.resolve(aE)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(et("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let o,h,m,x,v,T,A;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((O=>(O>this.params.maximumSequenceNumbersToCollect?(et("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),h=this.params.maximumSequenceNumbersToCollect):h=O,x=Date.now(),this.nthSequenceNumber(e,h)))).next((O=>(o=O,v=Date.now(),this.removeTargets(e,o,n)))).next((O=>(m=O,T=Date.now(),this.removeOrphanedDocuments(e,o)))).next((O=>(A=Date.now(),jl()<=sn.DEBUG&&et("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${x-S}ms
	Determined least recently used ${h} in `+(v-x)+`ms
	Removed ${m} targets in `+(T-v)+`ms
	Removed ${O} documents in `+(A-T)+`ms
Total Duration: ${A-S}ms`),Oe.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:m,documentsRemoved:O}))))}}function kS(a,e){return new LS(a,e)}class PS{constructor(){this.changes=new ul((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,fi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return o!==void 0?Oe.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class BS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class VS{constructor(e,n,o,h){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=h}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next((h=>(o=h,this.remoteDocumentCache.getEntry(e,n)))).next((h=>(o!==null&&lu(o.mutation,h,Zi.empty(),Rn.now()),h)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.getLocalViewOfDocuments(e,o,on()).next((()=>o))))}getLocalViewOfDocuments(e,n,o=on()){const h=Zo();return this.populateOverlays(e,h,n).next((()=>this.computeViews(e,n,h,o).next((m=>{let x=$c();return m.forEach(((v,T)=>{x=x.insert(v,T.overlayedDocument)})),x}))))}getOverlayedDocuments(e,n){const o=Zo();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,on())))}populateOverlays(e,n,o){const h=[];return o.forEach((m=>{n.has(m)||h.push(m)})),this.documentOverlayCache.getOverlays(e,h).next((m=>{m.forEach(((x,v)=>{n.set(x,v)}))}))}computeViews(e,n,o,h){let m=Sa();const x=ou(),v=(function(){return ou()})();return n.forEach(((T,A)=>{const S=o.get(A.key);h.has(A.key)&&(S===void 0||S.mutation instanceof So)?m=m.insert(A.key,A):S!==void 0?(x.set(A.key,S.mutation.getFieldMask()),lu(S.mutation,A,S.mutation.getFieldMask(),Rn.now())):x.set(A.key,Zi.empty())})),this.recalculateAndSaveOverlays(e,m).next((T=>(T.forEach(((A,S)=>x.set(A,S))),n.forEach(((A,S)=>v.set(A,new BS(S,x.get(A)??null)))),v)))}recalculateAndSaveOverlays(e,n){const o=ou();let h=new lr(((x,v)=>x-v)),m=on();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((x=>{for(const v of x)v.keys().forEach((T=>{const A=n.get(T);if(A===null)return;let S=o.get(T)||Zi.empty();S=v.applyToLocalView(A,S),o.set(T,S);const O=(h.get(v.batchId)||on()).add(T);h=h.insert(v.batchId,O)}))})).next((()=>{const x=[],v=h.getReverseIterator();for(;v.hasNext();){const T=v.getNext(),A=T.key,S=T.value,O=m_();S.forEach((B=>{if(!m.has(B)){const Y=A_(n.get(B),o.get(B));Y!==null&&O.set(B,Y),m=m.add(B)}})),x.push(this.documentOverlayCache.saveOverlays(e,A,O))}return Oe.waitFor(x)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,n,o,h){return(function(x){return pt.isDocumentKey(x.path)&&x.collectionGroup===null&&x.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):u_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,h):this.getDocumentsMatchingCollectionQuery(e,n,o,h)}getNextDocuments(e,n,o,h){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,h).next((m=>{const x=h-m.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,h-m.size):Oe.resolve(Zo());let v=du,T=m;return x.next((A=>Oe.forEach(A,((S,O)=>(v<O.largestBatchId&&(v=O.largestBatchId),m.get(S)?Oe.resolve():this.remoteDocumentCache.getEntry(e,S).next((B=>{T=T.insert(S,B)}))))).next((()=>this.populateOverlays(e,A,m))).next((()=>this.computeViews(e,T,A,on()))).next((S=>({batchId:v,changes:g_(S)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new pt(n)).next((o=>{let h=$c();return o.isFoundDocument()&&(h=h.insert(o.key,o)),h}))}getDocumentsMatchingCollectionGroupQuery(e,n,o,h){const m=n.collectionGroup;let x=$c();return this.indexManager.getCollectionParents(e,m).next((v=>Oe.forEach(v,(T=>{const A=(function(O,B){return new Su(B,null,O.explicitOrderBy.slice(),O.filters.slice(),O.limit,O.limitType,O.startAt,O.endAt)})(n,T.child(m));return this.getDocumentsMatchingCollectionQuery(e,A,o,h).next((S=>{S.forEach(((O,B)=>{x=x.insert(O,B)}))}))})).next((()=>x))))}getDocumentsMatchingCollectionQuery(e,n,o,h){let m;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next((x=>(m=x,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,m,h)))).next((x=>{m.forEach(((T,A)=>{const S=A.getKey();x.get(S)===null&&(x=x.insert(S,fi.newInvalidDocument(S)))}));let v=$c();return x.forEach(((T,A)=>{const S=m.get(T);S!==void 0&&lu(S.mutation,A,Zi.empty(),Rn.now()),jf(n,A)&&(v=v.insert(T,A))})),v}))}}class US{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Oe.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(h){return{id:h.id,version:h.version,createTime:zs(h.createTime)}})(n)),Oe.resolve()}getNamedQuery(e,n){return Oe.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(h){return{name:h.name,query:IS(h.bundledQuery),readTime:zs(h.readTime)}})(n)),Oe.resolve()}}class FS{constructor(){this.overlays=new lr(pt.comparator),this.qr=new Map}getOverlay(e,n){return Oe.resolve(this.overlays.get(n))}getOverlays(e,n){const o=Zo();return Oe.forEach(n,(h=>this.getOverlay(e,h).next((m=>{m!==null&&o.set(h,m)})))).next((()=>o))}saveOverlays(e,n,o){return o.forEach(((h,m)=>{this.St(e,n,m)})),Oe.resolve()}removeOverlaysForBatchId(e,n,o){const h=this.qr.get(o);return h!==void 0&&(h.forEach((m=>this.overlays=this.overlays.remove(m))),this.qr.delete(o)),Oe.resolve()}getOverlaysForCollection(e,n,o){const h=Zo(),m=n.length+1,x=new pt(n.child("")),v=this.overlays.getIteratorFrom(x);for(;v.hasNext();){const T=v.getNext().value,A=T.getKey();if(!n.isPrefixOf(A.path))break;A.path.length===m&&T.largestBatchId>o&&h.set(T.getKey(),T)}return Oe.resolve(h)}getOverlaysForCollectionGroup(e,n,o,h){let m=new lr(((A,S)=>A-S));const x=this.overlays.getIterator();for(;x.hasNext();){const A=x.getNext().value;if(A.getKey().getCollectionGroup()===n&&A.largestBatchId>o){let S=m.get(A.largestBatchId);S===null&&(S=Zo(),m=m.insert(A.largestBatchId,S)),S.set(A.getKey(),A)}}const v=Zo(),T=m.getIterator();for(;T.hasNext()&&(T.getNext().value.forEach(((A,S)=>v.set(A,S))),!(v.size()>=h)););return Oe.resolve(v)}St(e,n,o){const h=this.overlays.get(o.key);if(h!==null){const x=this.qr.get(h.largestBatchId).delete(o.key);this.qr.set(h.largestBatchId,x)}this.overlays=this.overlays.insert(o.key,new iS(n,o));let m=this.qr.get(n);m===void 0&&(m=on(),this.qr.set(n,m)),this.qr.set(n,m.add(o.key))}}class zS{constructor(){this.sessionToken=ti.EMPTY_BYTE_STRING}getSessionToken(e){return Oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Oe.resolve()}}class dg{constructor(){this.Qr=new Br(zr.$r),this.Ur=new Br(zr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const o=new zr(e,n);this.Qr=this.Qr.add(o),this.Ur=this.Ur.add(o)}Wr(e,n){e.forEach((o=>this.addReference(o,n)))}removeReference(e,n){this.Gr(new zr(e,n))}zr(e,n){e.forEach((o=>this.removeReference(o,n)))}jr(e){const n=new pt(new Fn([])),o=new zr(n,e),h=new zr(n,e+1),m=[];return this.Ur.forEachInRange([o,h],(x=>{this.Gr(x),m.push(x.key)})),m}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new pt(new Fn([])),o=new zr(n,e),h=new zr(n,e+1);let m=on();return this.Ur.forEachInRange([o,h],(x=>{m=m.add(x.key)})),m}containsKey(e){const n=new zr(e,0),o=this.Qr.firstAfterOrEqual(n);return o!==null&&e.isEqual(o.key)}}class zr{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return pt.comparator(e.key,n.key)||an(e.Yr,n.Yr)}static Kr(e,n){return an(e.Yr,n.Yr)||pt.comparator(e.key,n.key)}}class jS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Br(zr.$r)}checkEmpty(e){return Oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,o,h){const m=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const x=new rS(m,n,o,h);this.mutationQueue.push(x);for(const v of h)this.Zr=this.Zr.add(new zr(v.key,m)),this.indexManager.addToCollectionParentIndex(e,v.key.path.popLast());return Oe.resolve(x)}lookupMutationBatch(e,n){return Oe.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const o=n+1,h=this.ei(o),m=h<0?0:h;return Oe.resolve(this.mutationQueue.length>m?this.mutationQueue[m]:null)}getHighestUnacknowledgedBatchId(){return Oe.resolve(this.mutationQueue.length===0?ig:this.tr-1)}getAllMutationBatches(e){return Oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new zr(n,0),h=new zr(n,Number.POSITIVE_INFINITY),m=[];return this.Zr.forEachInRange([o,h],(x=>{const v=this.Xr(x.Yr);m.push(v)})),Oe.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new Br(an);return n.forEach((h=>{const m=new zr(h,0),x=new zr(h,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([m,x],(v=>{o=o.add(v.Yr)}))})),Oe.resolve(this.ti(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,h=o.length+1;let m=o;pt.isDocumentKey(m)||(m=m.child(""));const x=new zr(new pt(m),0);let v=new Br(an);return this.Zr.forEachWhile((T=>{const A=T.key.path;return!!o.isPrefixOf(A)&&(A.length===h&&(v=v.add(T.Yr)),!0)}),x),Oe.resolve(this.ti(v))}ti(e){const n=[];return e.forEach((o=>{const h=this.Xr(o);h!==null&&n.push(h)})),n}removeMutationBatch(e,n){Cn(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Zr;return Oe.forEach(n.mutations,(h=>{const m=new zr(h.key,n.batchId);return o=o.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,h.key)})).next((()=>{this.Zr=o}))}ir(e){}containsKey(e,n){const o=new zr(n,0),h=this.Zr.firstAfterOrEqual(o);return Oe.resolve(n.isEqual(h&&h.key))}performConsistencyCheck(e){return this.mutationQueue.length,Oe.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class HS{constructor(e){this.ri=e,this.docs=(function(){return new lr(pt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,h=this.docs.get(o),m=h?h.size:0,x=this.ri(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:x}),this.size+=x-m,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return Oe.resolve(o?o.document.mutableCopy():fi.newInvalidDocument(n))}getEntries(e,n){let o=Sa();return n.forEach((h=>{const m=this.docs.get(h);o=o.insert(h,m?m.document.mutableCopy():fi.newInvalidDocument(h))})),Oe.resolve(o)}getDocumentsMatchingQuery(e,n,o,h){let m=Sa();const x=n.path,v=new pt(x.child("__id-9223372036854775808__")),T=this.docs.getIteratorFrom(v);for(;T.hasNext();){const{key:A,value:{document:S}}=T.getNext();if(!x.isPrefixOf(A.path))break;A.path.length>x.length+1||yC(pC(S),o)<=0||(h.has(S.key)||jf(n,S))&&(m=m.insert(S.key,S.mutableCopy()))}return Oe.resolve(m)}getAllFromCollectionGroup(e,n,o,h){bt(9500)}ii(e,n){return Oe.forEach(this.docs,(o=>n(o)))}newChangeBuffer(e){return new GS(this)}getSize(e){return Oe.resolve(this.size)}}class GS extends PS{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((o,h)=>{h.isValidDocument()?n.push(this.Nr.addEntry(e,h)):this.Nr.removeEntry(o)})),Oe.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class qS{constructor(e){this.persistence=e,this.si=new ul((n=>og(n)),lg),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.oi=0,this._i=new dg,this.targetCount=0,this.ai=ic.ur()}forEachTarget(e,n){return this.si.forEach(((o,h)=>n(h))),Oe.resolve()}getLastRemoteSnapshotVersion(e){return Oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Oe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.oi&&(this.oi=n),Oe.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ic(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Oe.resolve()}updateTargetData(e,n){return this.Pr(n),Oe.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Oe.resolve()}removeTargets(e,n,o){let h=0;const m=[];return this.si.forEach(((x,v)=>{v.sequenceNumber<=n&&o.get(v.targetId)===null&&(this.si.delete(x),m.push(this.removeMatchingKeysForTargetId(e,v.targetId)),h++)})),Oe.waitFor(m).next((()=>h))}getTargetCount(e){return Oe.resolve(this.targetCount)}getTargetData(e,n){const o=this.si.get(n)||null;return Oe.resolve(o)}addMatchingKeys(e,n,o){return this._i.Wr(n,o),Oe.resolve()}removeMatchingKeys(e,n,o){this._i.zr(n,o);const h=this.persistence.referenceDelegate,m=[];return h&&n.forEach((x=>{m.push(h.markPotentiallyOrphaned(e,x))})),Oe.waitFor(m)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Oe.resolve()}getMatchingKeysForTargetId(e,n){const o=this._i.Hr(n);return Oe.resolve(o)}containsKey(e,n){return Oe.resolve(this._i.containsKey(n))}}class L_{constructor(e,n){this.ui={},this.overlays={},this.ci=new Bf(0),this.li=!1,this.li=!0,this.hi=new zS,this.referenceDelegate=e(this),this.Pi=new qS(this),this.indexManager=new RS,this.remoteDocumentCache=(function(h){return new HS(h)})((o=>this.referenceDelegate.Ti(o))),this.serializer=new SS(n),this.Ii=new US(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new FS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.ui[e.toKey()];return o||(o=new jS(n,this.referenceDelegate),this.ui[e.toKey()]=o),o}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,o){et("MemoryPersistence","Starting transaction:",e);const h=new XS(this.ci.next());return this.referenceDelegate.Ei(),o(h).next((m=>this.referenceDelegate.di(h).next((()=>m)))).toPromise().then((m=>(h.raiseOnCommittedEvent(),m)))}Ai(e,n){return Oe.or(Object.values(this.ui).map((o=>()=>o.containsKey(e,n))))}}class XS extends xC{constructor(e){super(),this.currentSequenceNumber=e}}class gg{constructor(e){this.persistence=e,this.Ri=new dg,this.Vi=null}static mi(e){return new gg(e)}get fi(){if(this.Vi)return this.Vi;throw bt(60996)}addReference(e,n,o){return this.Ri.addReference(o,n),this.fi.delete(o.toString()),Oe.resolve()}removeReference(e,n,o){return this.Ri.removeReference(o,n),this.fi.add(o.toString()),Oe.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Oe.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((h=>this.fi.add(h.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next((h=>{h.forEach((m=>this.fi.add(m.toString())))})).next((()=>o.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Oe.forEach(this.fi,(o=>{const h=pt.fromPath(o);return this.gi(e,h).next((m=>{m||n.removeEntry(h,Dt.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((o=>{o?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Oe.or([()=>Oe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Tf{constructor(e,n){this.persistence=e,this.pi=new ul((o=>wC(o.path)),((o,h)=>o.isEqual(h))),this.garbageCollector=kS(this,n)}static mi(e,n){return new Tf(e,n)}Ei(){}di(e){return Oe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>n.next((h=>o+h))))}wr(e){let n=0;return this.pr(e,(o=>{n++})).next((()=>n))}pr(e,n){return Oe.forEach(this.pi,((o,h)=>this.br(e,o,h).next((m=>m?Oe.resolve():n(h)))))}removeTargets(e,n,o){return this.persistence.getTargetCache().removeTargets(e,n,o)}removeOrphanedDocuments(e,n){let o=0;const h=this.persistence.getRemoteDocumentCache(),m=h.newChangeBuffer();return h.ii(e,(x=>this.br(e,x,n).next((v=>{v||(o++,m.removeEntry(x,Dt.min()))})))).next((()=>m.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Oe.resolve()}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,n,o){return this.pi.set(o,e.currentSequenceNumber),Oe.resolve()}removeReference(e,n,o){return this.pi.set(o,e.currentSequenceNumber),Oe.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Oe.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=tf(e.data.value)),n}br(e,n,o){return Oe.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const h=this.pi.get(n);return Oe.resolve(h!==void 0&&h>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class mg{constructor(e,n,o,h){this.targetId=e,this.fromCache=n,this.Es=o,this.ds=h}static As(e,n){let o=on(),h=on();for(const m of n.docChanges)switch(m.type){case 0:o=o.add(m.doc.key);break;case 1:h=h.add(m.doc.key)}return new mg(e,n.fromCache,o,h)}}class YS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class WS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return vT()?8:_C(gi())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,o,h){const m={result:null};return this.ys(e,n).next((x=>{m.result=x})).next((()=>{if(!m.result)return this.ws(e,n,h,o).next((x=>{m.result=x}))})).next((()=>{if(m.result)return;const x=new YS;return this.Ss(e,n,x).next((v=>{if(m.result=v,this.Vs)return this.bs(e,n,x,v.size)}))})).next((()=>m.result))}bs(e,n,o,h){return o.documentReadCount<this.fs?(jl()<=sn.DEBUG&&et("QueryEngine","SDK will not create cache indexes for query:",Hl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Oe.resolve()):(jl()<=sn.DEBUG&&et("QueryEngine","Query:",Hl(n),"scans",o.documentReadCount,"local documents and returns",h,"documents as results."),o.documentReadCount>this.gs*h?(jl()<=sn.DEBUG&&et("QueryEngine","The SDK decides to create cache indexes for query:",Hl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fs(n))):Oe.resolve())}ys(e,n){if(Qy(n))return Oe.resolve(null);let o=Fs(n);return this.indexManager.getIndexType(e,o).next((h=>h===0?null:(n.limit!==null&&h===1&&(n=S1(n,null,"F"),o=Fs(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next((m=>{const x=on(...m);return this.ps.getDocuments(e,x).next((v=>this.indexManager.getMinOffset(e,o).next((T=>{const A=this.Ds(n,v);return this.Cs(n,A,x,T.readTime)?this.ys(e,S1(n,null,"F")):this.vs(e,A,n,T)}))))})))))}ws(e,n,o,h){return Qy(n)||h.isEqual(Dt.min())?Oe.resolve(null):this.ps.getDocuments(e,o).next((m=>{const x=this.Ds(n,m);return this.Cs(n,x,o,h)?Oe.resolve(null):(jl()<=sn.DEBUG&&et("QueryEngine","Re-using previous result from %s to execute query: %s",h.toString(),Hl(n)),this.vs(e,x,n,mC(h,du)).next((v=>v)))}))}Ds(e,n){let o=new Br(f_(e));return n.forEach(((h,m)=>{jf(e,m)&&(o=o.add(m))})),o}Cs(e,n,o,h){if(e.limit===null)return!1;if(o.size!==n.size)return!0;const m=e.limitType==="F"?n.last():n.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(h)>0)}Ss(e,n,o){return jl()<=sn.DEBUG&&et("QueryEngine","Using full collection scan to execute query:",Hl(n)),this.ps.getDocumentsMatchingQuery(e,n,Eo.min(),o)}vs(e,n,o,h){return this.ps.getDocumentsMatchingQuery(e,o,h).next((m=>(n.forEach((x=>{m=m.insert(x.key,x)})),m)))}}const pg="LocalStore",KS=3e8;class QS{constructor(e,n,o,h){this.persistence=e,this.Fs=n,this.serializer=h,this.Ms=new lr(an),this.xs=new ul((m=>og(m)),lg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(o)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function ZS(a,e,n,o){return new QS(a,e,n,o)}async function k_(a,e){const n=kt(a);return await n.persistence.runTransaction("Handle user change","readonly",(o=>{let h;return n.mutationQueue.getAllMutationBatches(o).next((m=>(h=m,n.Bs(e),n.mutationQueue.getAllMutationBatches(o)))).next((m=>{const x=[],v=[];let T=on();for(const A of h){x.push(A.batchId);for(const S of A.mutations)T=T.add(S.key)}for(const A of m){v.push(A.batchId);for(const S of A.mutations)T=T.add(S.key)}return n.localDocuments.getDocuments(o,T).next((A=>({Ls:A,removedBatchIds:x,addedBatchIds:v})))}))}))}function JS(a,e){const n=kt(a);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const h=e.batch.keys(),m=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(v,T,A,S){const O=A.batch,B=O.keys();let Y=Oe.resolve();return B.forEach((te=>{Y=Y.next((()=>S.getEntry(T,te))).next((le=>{const de=A.docVersions.get(te);Cn(de!==null,48541),le.version.compareTo(de)<0&&(O.applyToRemoteDocument(le,A),le.isValidDocument()&&(le.setReadTime(A.commitVersion),S.addEntry(le)))}))})),Y.next((()=>v.mutationQueue.removeMutationBatch(T,O)))})(n,o,e,m).next((()=>m.apply(o))).next((()=>n.mutationQueue.performConsistencyCheck(o))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(o,h,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(v){let T=on();for(let A=0;A<v.mutationResults.length;++A)v.mutationResults[A].transformResults.length>0&&(T=T.add(v.batch.mutations[A].key));return T})(e)))).next((()=>n.localDocuments.getDocuments(o,h)))}))}function P_(a){const e=kt(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function $S(a,e){const n=kt(a),o=e.snapshotVersion;let h=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(m=>{const x=n.Ns.newChangeBuffer({trackRemovals:!0});h=n.Ms;const v=[];e.targetChanges.forEach(((S,O)=>{const B=h.get(O);if(!B)return;v.push(n.Pi.removeMatchingKeys(m,S.removedDocuments,O).next((()=>n.Pi.addMatchingKeys(m,S.addedDocuments,O))));let Y=B.withSequenceNumber(m.currentSequenceNumber);e.targetMismatches.get(O)!==null?Y=Y.withResumeToken(ti.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):S.resumeToken.approximateByteSize()>0&&(Y=Y.withResumeToken(S.resumeToken,o)),h=h.insert(O,Y),(function(le,de,Ge){return le.resumeToken.approximateByteSize()===0||de.snapshotVersion.toMicroseconds()-le.snapshotVersion.toMicroseconds()>=KS?!0:Ge.addedDocuments.size+Ge.modifiedDocuments.size+Ge.removedDocuments.size>0})(B,Y,S)&&v.push(n.Pi.updateTargetData(m,Y))}));let T=Sa(),A=on();if(e.documentUpdates.forEach((S=>{e.resolvedLimboDocuments.has(S)&&v.push(n.persistence.referenceDelegate.updateLimboDocument(m,S))})),v.push(eI(m,x,e.documentUpdates).next((S=>{T=S.ks,A=S.qs}))),!o.isEqual(Dt.min())){const S=n.Pi.getLastRemoteSnapshotVersion(m).next((O=>n.Pi.setTargetsMetadata(m,m.currentSequenceNumber,o)));v.push(S)}return Oe.waitFor(v).next((()=>x.apply(m))).next((()=>n.localDocuments.getLocalViewOfDocuments(m,T,A))).next((()=>T))})).then((m=>(n.Ms=h,m)))}function eI(a,e,n){let o=on(),h=on();return n.forEach((m=>o=o.add(m))),e.getEntries(a,o).next((m=>{let x=Sa();return n.forEach(((v,T)=>{const A=m.get(v);T.isFoundDocument()!==A.isFoundDocument()&&(h=h.add(v)),T.isNoDocument()&&T.version.isEqual(Dt.min())?(e.removeEntry(v,T.readTime),x=x.insert(v,T)):!A.isValidDocument()||T.version.compareTo(A.version)>0||T.version.compareTo(A.version)===0&&A.hasPendingWrites?(e.addEntry(T),x=x.insert(v,T)):et(pg,"Ignoring outdated watch update for ",v,". Current version:",A.version," Watch version:",T.version)})),{ks:x,qs:h}}))}function tI(a,e){const n=kt(a);return n.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=ig),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function nI(a,e){const n=kt(a);return n.persistence.runTransaction("Allocate target","readwrite",(o=>{let h;return n.Pi.getTargetData(o,e).next((m=>m?(h=m,Oe.resolve(h)):n.Pi.allocateTargetId(o).next((x=>(h=new co(e,x,"TargetPurposeListen",o.currentSequenceNumber),n.Pi.addTargetData(o,h).next((()=>h)))))))})).then((o=>{const h=n.Ms.get(o.targetId);return(h===null||o.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(o.targetId,o),n.xs.set(e,o.targetId)),o}))}async function D1(a,e,n){const o=kt(a),h=o.Ms.get(e),m=n?"readwrite":"readwrite-primary";try{n||await o.persistence.runTransaction("Release target",m,(x=>o.persistence.referenceDelegate.removeTarget(x,h)))}catch(x){if(!fc(x))throw x;et(pg,`Failed to update sequence numbers for target ${e}: ${x}`)}o.Ms=o.Ms.remove(e),o.xs.delete(h.target)}function cE(a,e,n){const o=kt(a);let h=Dt.min(),m=on();return o.persistence.runTransaction("Execute query","readwrite",(x=>(function(T,A,S){const O=kt(T),B=O.xs.get(S);return B!==void 0?Oe.resolve(O.Ms.get(B)):O.Pi.getTargetData(A,S)})(o,x,Fs(e)).next((v=>{if(v)return h=v.lastLimboFreeSnapshotVersion,o.Pi.getMatchingKeysForTargetId(x,v.targetId).next((T=>{m=T}))})).next((()=>o.Fs.getDocumentsMatchingQuery(x,e,n?h:Dt.min(),n?m:on()))).next((v=>(rI(o,zC(e),v),{documents:v,Qs:m})))))}function rI(a,e,n){let o=a.Os.get(e)||Dt.min();n.forEach(((h,m)=>{m.readTime.compareTo(o)>0&&(o=m.readTime)})),a.Os.set(e,o)}class uE{constructor(){this.activeTargetIds=YC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iI{constructor(){this.Mo=new uE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,o){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new uE,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class sI{Oo(e){}shutdown(){}}const hE="ConnectivityMonitor";class fE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){et(hE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){et(hE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Yh=null;function M1(){return Yh===null?Yh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Yh++,"0x"+Yh.toString(16)}const n1="RestConnection",aI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),h=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${o}/databases/${h}`,this.Wo=this.databaseId.database===yf?`project_id=${o}`:`project_id=${o}&database_id=${h}`}Go(e,n,o,h,m){const x=M1(),v=this.zo(e,n.toUriEncodedString());et(n1,`Sending RPC '${e}' ${x}:`,v,o);const T={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(T,h,m);const{host:A}=new URL(v),S=oc(A);return this.Jo(e,v,T,o,S).then((O=>(et(n1,`Received RPC '${e}' ${x}: `,O),O)),(O=>{throw ec(n1,`RPC '${e}' ${x} failed with error: `,O,"url: ",v,"request:",o),O}))}Ho(e,n,o,h,m,x){return this.Go(e,n,o,h,m)}jo(e,n,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+uc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((h,m)=>e[m]=h)),o&&o.headers.forEach(((h,m)=>e[m]=h))}zo(e,n){const o=aI[e];return`${this.Uo}/v1/${n}:${o}`}terminate(){}}class lI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const ui="WebChannelConnection";class cI extends oI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,o,h,m){const x=M1();return new Promise(((v,T)=>{const A=new Ux;A.setWithCredentials(!0),A.listenOnce(Fx.COMPLETE,(()=>{try{switch(A.getLastErrorCode()){case ef.NO_ERROR:const O=A.getResponseJson();et(ui,`XHR for RPC '${e}' ${x} received:`,JSON.stringify(O)),v(O);break;case ef.TIMEOUT:et(ui,`RPC '${e}' ${x} timed out`),T(new Ke(Ie.DEADLINE_EXCEEDED,"Request time out"));break;case ef.HTTP_ERROR:const B=A.getStatus();if(et(ui,`RPC '${e}' ${x} failed with status:`,B,"response text:",A.getResponseText()),B>0){let Y=A.getResponseJson();Array.isArray(Y)&&(Y=Y[0]);const te=Y?.error;if(te&&te.status&&te.message){const le=(function(Ge){const Le=Ge.toLowerCase().replace(/_/g,"-");return Object.values(Ie).indexOf(Le)>=0?Le:Ie.UNKNOWN})(te.status);T(new Ke(le,te.message))}else T(new Ke(Ie.UNKNOWN,"Server responded with status "+A.getStatus()))}else T(new Ke(Ie.UNAVAILABLE,"Connection failed."));break;default:bt(9055,{l_:e,streamId:x,h_:A.getLastErrorCode(),P_:A.getLastError()})}}finally{et(ui,`RPC '${e}' ${x} completed.`)}}));const S=JSON.stringify(h);et(ui,`RPC '${e}' ${x} sending request:`,h),A.send(n,"POST",S,o,15)}))}T_(e,n,o){const h=M1(),m=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],x=Hx(),v=jx(),T={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},A=this.longPollingOptions.timeoutSeconds;A!==void 0&&(T.longPollingTimeout=Math.round(1e3*A)),this.useFetchStreams&&(T.useFetchStreams=!0),this.jo(T.initMessageHeaders,n,o),T.encodeInitMessageHeaders=!0;const S=m.join("");et(ui,`Creating RPC '${e}' stream ${h}: ${S}`,T);const O=x.createWebChannel(S,T);this.I_(O);let B=!1,Y=!1;const te=new lI({Yo:de=>{Y?et(ui,`Not sending because RPC '${e}' stream ${h} is closed:`,de):(B||(et(ui,`Opening RPC '${e}' stream ${h} transport.`),O.open(),B=!0),et(ui,`RPC '${e}' stream ${h} sending:`,de),O.send(de))},Zo:()=>O.close()}),le=(de,Ge,Le)=>{de.listen(Ge,(me=>{try{Le(me)}catch(Be){setTimeout((()=>{throw Be}),0)}}))};return le(O,Jc.EventType.OPEN,(()=>{Y||(et(ui,`RPC '${e}' stream ${h} transport opened.`),te.o_())})),le(O,Jc.EventType.CLOSE,(()=>{Y||(Y=!0,et(ui,`RPC '${e}' stream ${h} transport closed`),te.a_(),this.E_(O))})),le(O,Jc.EventType.ERROR,(de=>{Y||(Y=!0,ec(ui,`RPC '${e}' stream ${h} transport errored. Name:`,de.name,"Message:",de.message),te.a_(new Ke(Ie.UNAVAILABLE,"The operation could not be completed")))})),le(O,Jc.EventType.MESSAGE,(de=>{if(!Y){const Ge=de.data[0];Cn(!!Ge,16349);const Le=Ge,me=Le?.error||Le[0]?.error;if(me){et(ui,`RPC '${e}' stream ${h} received error:`,me);const Be=me.status;let ct=(function(z){const V=Sr[z];if(V!==void 0)return T_(V)})(Be),je=me.message;ct===void 0&&(ct=Ie.INTERNAL,je="Unknown error status: "+Be+" with message "+me.message),Y=!0,te.a_(new Ke(ct,je)),O.close()}else et(ui,`RPC '${e}' stream ${h} received:`,Ge),te.u_(Ge)}})),le(v,zx.STAT_EVENT,(de=>{de.stat===_1.PROXY?et(ui,`RPC '${e}' stream ${h} detected buffering proxy`):de.stat===_1.NOPROXY&&et(ui,`RPC '${e}' stream ${h} detected no buffering proxy`)})),setTimeout((()=>{te.__()}),0),te}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function r1(){return typeof document<"u"?document:null}function Yf(a){return new dS(a,!0)}class B_{constructor(e,n,o=1e3,h=1.5,m=6e4){this.Mi=e,this.timerId=n,this.d_=o,this.A_=h,this.R_=m,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),o=Math.max(0,Date.now()-this.f_),h=Math.max(0,n-o);h>0&&et("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,h,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const dE="PersistentStream";class V_{constructor(e,n,o,h,m,x,v,T){this.Mi=e,this.S_=o,this.b_=h,this.connection=m,this.authCredentialsProvider=x,this.appCheckCredentialsProvider=v,this.listener=T,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new B_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Ie.RESOURCE_EXHAUSTED?(Ca(n.toString()),Ca("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,h])=>{this.D_===n&&this.G_(o,h)}),(o=>{e((()=>{const h=new Ke(Ie.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(h)}))}))}G_(e,n){const o=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{o((()=>this.listener.Xo()))})),this.stream.t_((()=>{o((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((h=>{o((()=>this.z_(h)))})),this.stream.onMessage((h=>{o((()=>++this.F_==1?this.J_(h):this.onNext(h)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return et(dE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(et(dE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class uI extends V_{constructor(e,n,o,h,m,x){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,h,x),this.serializer=m}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=pS(this.serializer,e),o=(function(m){if(!("targetChange"in m))return Dt.min();const x=m.targetChange;return x.targetIds&&x.targetIds.length?Dt.min():x.readTime?zs(x.readTime):Dt.min()})(e);return this.listener.H_(n,o)}Y_(e){const n={};n.database=O1(this.serializer),n.addTarget=(function(m,x){let v;const T=x.target;if(v=v1(T)?{documents:xS(m,T)}:{query:_S(m,T).ft},v.targetId=x.targetId,x.resumeToken.approximateByteSize()>0){v.resumeToken=C_(m,x.resumeToken);const A=I1(m,x.expectedCount);A!==null&&(v.expectedCount=A)}else if(x.snapshotVersion.compareTo(Dt.min())>0){v.readTime=wf(m,x.snapshotVersion.toTimestamp());const A=I1(m,x.expectedCount);A!==null&&(v.expectedCount=A)}return v})(this.serializer,e);const o=wS(this.serializer,e);o&&(n.labels=o),this.q_(n)}Z_(e){const n={};n.database=O1(this.serializer),n.removeTarget=e,this.q_(n)}}class hI extends V_{constructor(e,n,o,h,m,x){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,h,x),this.serializer=m}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Cn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Cn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Cn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=ES(e.writeResults,e.commitTime),o=zs(e.commitTime);return this.listener.na(o,n)}ra(){const e={};e.database=O1(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((o=>yS(this.serializer,o)))};this.q_(n)}}class fI{}class dI extends fI{constructor(e,n,o,h){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=h,this.ia=!1}sa(){if(this.ia)throw new Ke(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,o,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([m,x])=>this.connection.Go(e,R1(n,o),h,m,x))).catch((m=>{throw m.name==="FirebaseError"?(m.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new Ke(Ie.UNKNOWN,m.toString())}))}Ho(e,n,o,h,m){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([x,v])=>this.connection.Ho(e,R1(n,o),h,x,v,m))).catch((x=>{throw x.name==="FirebaseError"?(x.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),x):new Ke(Ie.UNKNOWN,x.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class gI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ca(n),this.aa=!1):et("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ol="RemoteStore";class mI{constructor(e,n,o,h,m){this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=m,this.Aa.Oo((x=>{o.enqueueAndForget((async()=>{hl(this)&&(et(ol,"Restarting streams for network reachability change."),await(async function(T){const A=kt(T);A.Ea.add(4),await Nu(A),A.Ra.set("Unknown"),A.Ea.delete(4),await Wf(A)})(this))}))})),this.Ra=new gI(o,h)}}async function Wf(a){if(hl(a))for(const e of a.da)await e(!0)}async function Nu(a){for(const e of a.da)await e(!1)}function U_(a,e){const n=kt(a);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),_g(n)?xg(n):dc(n).O_()&&Eg(n,e))}function yg(a,e){const n=kt(a),o=dc(n);n.Ia.delete(e),o.O_()&&F_(n,e),n.Ia.size===0&&(o.O_()?o.L_():hl(n)&&n.Ra.set("Unknown"))}function Eg(a,e){if(a.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Dt.min())>0){const n=a.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}dc(a).Y_(e)}function F_(a,e){a.Va.Ue(e),dc(a).Z_(e)}function xg(a){a.Va=new cS({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),At:e=>a.Ia.get(e)||null,ht:()=>a.datastore.serializer.databaseId}),dc(a).start(),a.Ra.ua()}function _g(a){return hl(a)&&!dc(a).x_()&&a.Ia.size>0}function hl(a){return kt(a).Ea.size===0}function z_(a){a.Va=void 0}async function pI(a){a.Ra.set("Online")}async function yI(a){a.Ia.forEach(((e,n)=>{Eg(a,e)}))}async function EI(a,e){z_(a),_g(a)?(a.Ra.ha(e),xg(a)):a.Ra.set("Unknown")}async function xI(a,e,n){if(a.Ra.set("Online"),e instanceof v_&&e.state===2&&e.cause)try{await(async function(h,m){const x=m.cause;for(const v of m.targetIds)h.Ia.has(v)&&(await h.remoteSyncer.rejectListen(v,x),h.Ia.delete(v),h.Va.removeTarget(v))})(a,e)}catch(o){et(ol,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await bf(a,o)}else if(e instanceof sf?a.Va.Ze(e):e instanceof b_?a.Va.st(e):a.Va.tt(e),!n.isEqual(Dt.min()))try{const o=await P_(a.localStore);n.compareTo(o)>=0&&await(function(m,x){const v=m.Va.Tt(x);return v.targetChanges.forEach(((T,A)=>{if(T.resumeToken.approximateByteSize()>0){const S=m.Ia.get(A);S&&m.Ia.set(A,S.withResumeToken(T.resumeToken,x))}})),v.targetMismatches.forEach(((T,A)=>{const S=m.Ia.get(T);if(!S)return;m.Ia.set(T,S.withResumeToken(ti.EMPTY_BYTE_STRING,S.snapshotVersion)),F_(m,T);const O=new co(S.target,T,A,S.sequenceNumber);Eg(m,O)})),m.remoteSyncer.applyRemoteEvent(v)})(a,n)}catch(o){et(ol,"Failed to raise snapshot:",o),await bf(a,o)}}async function bf(a,e,n){if(!fc(e))throw e;a.Ea.add(1),await Nu(a),a.Ra.set("Offline"),n||(n=()=>P_(a.localStore)),a.asyncQueue.enqueueRetryable((async()=>{et(ol,"Retrying IndexedDB access"),await n(),a.Ea.delete(1),await Wf(a)}))}function j_(a,e){return e().catch((n=>bf(a,n,e)))}async function Kf(a){const e=kt(a),n=wo(e);let o=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ig;for(;_I(e);)try{const h=await tI(e.localStore,o);if(h===null){e.Ta.length===0&&n.L_();break}o=h.batchId,AI(e,h)}catch(h){await bf(e,h)}H_(e)&&G_(e)}function _I(a){return hl(a)&&a.Ta.length<10}function AI(a,e){a.Ta.push(e);const n=wo(a);n.O_()&&n.X_&&n.ea(e.mutations)}function H_(a){return hl(a)&&!wo(a).x_()&&a.Ta.length>0}function G_(a){wo(a).start()}async function wI(a){wo(a).ra()}async function TI(a){const e=wo(a);for(const n of a.Ta)e.ea(n.mutations)}async function bI(a,e,n){const o=a.Ta.shift(),h=ug.from(o,e,n);await j_(a,(()=>a.remoteSyncer.applySuccessfulWrite(h))),await Kf(a)}async function vI(a,e){e&&wo(a).X_&&await(async function(o,h){if((function(x){return aS(x)&&x!==Ie.ABORTED})(h.code)){const m=o.Ta.shift();wo(o).B_(),await j_(o,(()=>o.remoteSyncer.rejectFailedWrite(m.batchId,h))),await Kf(o)}})(a,e),H_(a)&&G_(a)}async function gE(a,e){const n=kt(a);n.asyncQueue.verifyOperationInProgress(),et(ol,"RemoteStore received new credentials");const o=hl(n);n.Ea.add(3),await Nu(n),o&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Wf(n)}async function CI(a,e){const n=kt(a);e?(n.Ea.delete(2),await Wf(n)):e||(n.Ea.add(2),await Nu(n),n.Ra.set("Unknown"))}function dc(a){return a.ma||(a.ma=(function(n,o,h){const m=kt(n);return m.sa(),new uI(o,m.connection,m.authCredentials,m.appCheckCredentials,m.serializer,h)})(a.datastore,a.asyncQueue,{Xo:pI.bind(null,a),t_:yI.bind(null,a),r_:EI.bind(null,a),H_:xI.bind(null,a)}),a.da.push((async e=>{e?(a.ma.B_(),_g(a)?xg(a):a.Ra.set("Unknown")):(await a.ma.stop(),z_(a))}))),a.ma}function wo(a){return a.fa||(a.fa=(function(n,o,h){const m=kt(n);return m.sa(),new hI(o,m.connection,m.authCredentials,m.appCheckCredentials,m.serializer,h)})(a.datastore,a.asyncQueue,{Xo:()=>Promise.resolve(),t_:wI.bind(null,a),r_:vI.bind(null,a),ta:TI.bind(null,a),na:bI.bind(null,a)}),a.da.push((async e=>{e?(a.fa.B_(),await Kf(a)):(await a.fa.stop(),a.Ta.length>0&&(et(ol,`Stopping write stream with ${a.Ta.length} pending writes`),a.Ta=[]))}))),a.fa}class Ag{constructor(e,n,o,h,m){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=h,this.removalCallback=m,this.deferred=new Ta,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((x=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,h,m){const x=Date.now()+o,v=new Ag(e,n,x,h,m);return v.start(o),v}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ke(Ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wg(a,e){if(Ca("AsyncQueue",`${e}: ${a}`),fc(a))return new Ke(Ie.UNAVAILABLE,`${e}: ${a}`);throw a}class Jl{static emptySet(e){return new Jl(e.comparator)}constructor(e){this.comparator=e?(n,o)=>e(n,o)||pt.comparator(n.key,o.key):(n,o)=>pt.comparator(n.key,o.key),this.keyedMap=$c(),this.sortedSet=new lr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,o)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Jl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const h=n.getNext().key,m=o.getNext().key;if(!h.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const o=new Jl;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class mE{constructor(){this.ga=new lr(pt.comparator)}track(e){const n=e.doc.key,o=this.ga.get(n);o?e.type!==0&&o.type===3?this.ga=this.ga.insert(n,e):e.type===3&&o.type!==1?this.ga=this.ga.insert(n,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.ga=this.ga.remove(n):e.type===1&&o.type===2?this.ga=this.ga.insert(n,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):bt(63341,{Rt:e,pa:o}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,o)=>{e.push(o)})),e}}class sc{constructor(e,n,o,h,m,x,v,T,A){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=h,this.mutatedKeys=m,this.fromCache=x,this.syncStateChanged=v,this.excludesMetadataChanges=T,this.hasCachedResults=A}static fromInitialDocuments(e,n,o,h,m){const x=[];return n.forEach((v=>{x.push({type:0,doc:v})})),new sc(e,n,Jl.emptySet(n),x,o,h,!0,!1,m)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let h=0;h<n.length;h++)if(n[h].type!==o[h].type||!n[h].doc.isEqual(o[h].doc))return!1;return!0}}class SI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class II{constructor(){this.queries=pE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,o){const h=kt(n),m=h.queries;h.queries=pE(),m.forEach(((x,v)=>{for(const T of v.Sa)T.onError(o)}))})(this,new Ke(Ie.ABORTED,"Firestore shutting down"))}}function pE(){return new ul((a=>h_(a)),zf)}async function Tg(a,e){const n=kt(a);let o=3;const h=e.query;let m=n.queries.get(h);m?!m.ba()&&e.Da()&&(o=2):(m=new SI,o=e.Da()?0:1);try{switch(o){case 0:m.wa=await n.onListen(h,!0);break;case 1:m.wa=await n.onListen(h,!1);break;case 2:await n.onFirstRemoteStoreListen(h)}}catch(x){const v=wg(x,`Initialization of query '${Hl(e.query)}' failed`);return void e.onError(v)}n.queries.set(h,m),m.Sa.push(e),e.va(n.onlineState),m.wa&&e.Fa(m.wa)&&vg(n)}async function bg(a,e){const n=kt(a),o=e.query;let h=3;const m=n.queries.get(o);if(m){const x=m.Sa.indexOf(e);x>=0&&(m.Sa.splice(x,1),m.Sa.length===0?h=e.Da()?0:1:!m.ba()&&e.Da()&&(h=2))}switch(h){case 0:return n.queries.delete(o),n.onUnlisten(o,!0);case 1:return n.queries.delete(o),n.onUnlisten(o,!1);case 2:return n.onLastRemoteStoreUnlisten(o);default:return}}function RI(a,e){const n=kt(a);let o=!1;for(const h of e){const m=h.query,x=n.queries.get(m);if(x){for(const v of x.Sa)v.Fa(h)&&(o=!0);x.wa=h}}o&&vg(n)}function NI(a,e,n){const o=kt(a),h=o.queries.get(e);if(h)for(const m of h.Sa)m.onError(n);o.queries.delete(e)}function vg(a){a.Ca.forEach((e=>{e.next()}))}var L1,yE;(yE=L1||(L1={})).Ma="default",yE.Cache="cache";class Cg{constructor(e,n,o){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(e){if(!this.options.includeMetadataChanges){const o=[];for(const h of e.docChanges)h.type!==3&&o.push(h);e=new sc(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const o=n!=="Offline";return(!this.options.qa||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=sc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==L1.Cache}}class q_{constructor(e){this.key=e}}class X_{constructor(e){this.key=e}}class OI{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=on(),this.mutatedKeys=on(),this.eu=f_(e),this.tu=new Jl(this.eu)}get nu(){return this.Ya}ru(e,n){const o=n?n.iu:new mE,h=n?n.tu:this.tu;let m=n?n.mutatedKeys:this.mutatedKeys,x=h,v=!1;const T=this.query.limitType==="F"&&h.size===this.query.limit?h.last():null,A=this.query.limitType==="L"&&h.size===this.query.limit?h.first():null;if(e.inorderTraversal(((S,O)=>{const B=h.get(S),Y=jf(this.query,O)?O:null,te=!!B&&this.mutatedKeys.has(B.key),le=!!Y&&(Y.hasLocalMutations||this.mutatedKeys.has(Y.key)&&Y.hasCommittedMutations);let de=!1;B&&Y?B.data.isEqual(Y.data)?te!==le&&(o.track({type:3,doc:Y}),de=!0):this.su(B,Y)||(o.track({type:2,doc:Y}),de=!0,(T&&this.eu(Y,T)>0||A&&this.eu(Y,A)<0)&&(v=!0)):!B&&Y?(o.track({type:0,doc:Y}),de=!0):B&&!Y&&(o.track({type:1,doc:B}),de=!0,(T||A)&&(v=!0)),de&&(Y?(x=x.add(Y),m=le?m.add(S):m.delete(S)):(x=x.delete(S),m=m.delete(S)))})),this.query.limit!==null)for(;x.size>this.query.limit;){const S=this.query.limitType==="F"?x.last():x.first();x=x.delete(S.key),m=m.delete(S.key),o.track({type:1,doc:S})}return{tu:x,iu:o,Cs:v,mutatedKeys:m}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o,h){const m=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const x=e.iu.ya();x.sort(((S,O)=>(function(Y,te){const le=de=>{switch(de){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return bt(20277,{Rt:de})}};return le(Y)-le(te)})(S.type,O.type)||this.eu(S.doc,O.doc))),this.ou(o),h=h??!1;const v=n&&!h?this._u():[],T=this.Xa.size===0&&this.current&&!h?1:0,A=T!==this.Za;return this.Za=T,x.length!==0||A?{snapshot:new sc(this.query,e.tu,m,x,e.mutatedKeys,T===0,A,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:v}:{au:v}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new mE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=on(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Xa=this.Xa.add(o.key))}));const n=[];return e.forEach((o=>{this.Xa.has(o)||n.push(new X_(o))})),this.Xa.forEach((o=>{e.has(o)||n.push(new q_(o))})),n}cu(e){this.Ya=e.Qs,this.Xa=on();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return sc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Sg="SyncEngine";class DI{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class MI{constructor(e){this.key=e,this.hu=!1}}class LI{constructor(e,n,o,h,m,x){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=h,this.currentUser=m,this.maxConcurrentLimboResolutions=x,this.Pu={},this.Tu=new ul((v=>h_(v)),zf),this.Iu=new Map,this.Eu=new Set,this.du=new lr(pt.comparator),this.Au=new Map,this.Ru=new dg,this.Vu={},this.mu=new Map,this.fu=ic.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function kI(a,e,n=!0){const o=J_(a);let h;const m=o.Tu.get(e);return m?(o.sharedClientState.addLocalQueryTarget(m.targetId),h=m.view.lu()):h=await Y_(o,e,n,!0),h}async function PI(a,e){const n=J_(a);await Y_(n,e,!0,!1)}async function Y_(a,e,n,o){const h=await nI(a.localStore,Fs(e)),m=h.targetId,x=a.sharedClientState.addLocalQueryTarget(m,n);let v;return o&&(v=await BI(a,e,m,x==="current",h.resumeToken)),a.isPrimaryClient&&n&&U_(a.remoteStore,h),v}async function BI(a,e,n,o,h){a.pu=(O,B,Y)=>(async function(le,de,Ge,Le){let me=de.view.ru(Ge);me.Cs&&(me=await cE(le.localStore,de.query,!1).then((({documents:F})=>de.view.ru(F,me))));const Be=Le&&Le.targetChanges.get(de.targetId),ct=Le&&Le.targetMismatches.get(de.targetId)!=null,je=de.view.applyChanges(me,le.isPrimaryClient,Be,ct);return xE(le,de.targetId,je.au),je.snapshot})(a,O,B,Y);const m=await cE(a.localStore,e,!0),x=new OI(e,m.Qs),v=x.ru(m.documents),T=Ru.createSynthesizedTargetChangeForCurrentChange(n,o&&a.onlineState!=="Offline",h),A=x.applyChanges(v,a.isPrimaryClient,T);xE(a,n,A.au);const S=new DI(e,n,x);return a.Tu.set(e,S),a.Iu.has(n)?a.Iu.get(n).push(e):a.Iu.set(n,[e]),A.snapshot}async function VI(a,e,n){const o=kt(a),h=o.Tu.get(e),m=o.Iu.get(h.targetId);if(m.length>1)return o.Iu.set(h.targetId,m.filter((x=>!zf(x,e)))),void o.Tu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(h.targetId),o.sharedClientState.isActiveQueryTarget(h.targetId)||await D1(o.localStore,h.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(h.targetId),n&&yg(o.remoteStore,h.targetId),k1(o,h.targetId)})).catch(hc)):(k1(o,h.targetId),await D1(o.localStore,h.targetId,!0))}async function UI(a,e){const n=kt(a),o=n.Tu.get(e),h=n.Iu.get(o.targetId);n.isPrimaryClient&&h.length===1&&(n.sharedClientState.removeLocalQueryTarget(o.targetId),yg(n.remoteStore,o.targetId))}async function FI(a,e,n){const o=YI(a);try{const h=await(function(x,v){const T=kt(x),A=Rn.now(),S=v.reduce(((Y,te)=>Y.add(te.key)),on());let O,B;return T.persistence.runTransaction("Locally write mutations","readwrite",(Y=>{let te=Sa(),le=on();return T.Ns.getEntries(Y,S).next((de=>{te=de,te.forEach(((Ge,Le)=>{Le.isValidDocument()||(le=le.add(Ge))}))})).next((()=>T.localDocuments.getOverlayedDocuments(Y,te))).next((de=>{O=de;const Ge=[];for(const Le of v){const me=tS(Le,O.get(Le.key).overlayedDocument);me!=null&&Ge.push(new So(Le.key,me,r_(me.value.mapValue),bi.exists(!0)))}return T.mutationQueue.addMutationBatch(Y,A,Ge,v)})).next((de=>{B=de;const Ge=de.applyToLocalDocumentSet(O,le);return T.documentOverlayCache.saveOverlays(Y,de.batchId,Ge)}))})).then((()=>({batchId:B.batchId,changes:g_(O)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(h.batchId),(function(x,v,T){let A=x.Vu[x.currentUser.toKey()];A||(A=new lr(an)),A=A.insert(v,T),x.Vu[x.currentUser.toKey()]=A})(o,h.batchId,n),await Ou(o,h.changes),await Kf(o.remoteStore)}catch(h){const m=wg(h,"Failed to persist write");n.reject(m)}}async function W_(a,e){const n=kt(a);try{const o=await $S(n.localStore,e);e.targetChanges.forEach(((h,m)=>{const x=n.Au.get(m);x&&(Cn(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1,22616),h.addedDocuments.size>0?x.hu=!0:h.modifiedDocuments.size>0?Cn(x.hu,14607):h.removedDocuments.size>0&&(Cn(x.hu,42227),x.hu=!1))})),await Ou(n,o,e)}catch(o){await hc(o)}}function EE(a,e,n){const o=kt(a);if(o.isPrimaryClient&&n===0||!o.isPrimaryClient&&n===1){const h=[];o.Tu.forEach(((m,x)=>{const v=x.view.va(e);v.snapshot&&h.push(v.snapshot)})),(function(x,v){const T=kt(x);T.onlineState=v;let A=!1;T.queries.forEach(((S,O)=>{for(const B of O.Sa)B.va(v)&&(A=!0)})),A&&vg(T)})(o.eventManager,e),h.length&&o.Pu.H_(h),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function zI(a,e,n){const o=kt(a);o.sharedClientState.updateQueryState(e,"rejected",n);const h=o.Au.get(e),m=h&&h.key;if(m){let x=new lr(pt.comparator);x=x.insert(m,fi.newNoDocument(m,Dt.min()));const v=on().add(m),T=new Xf(Dt.min(),new Map,new lr(an),x,v);await W_(o,T),o.du=o.du.remove(m),o.Au.delete(e),Ig(o)}else await D1(o.localStore,e,!1).then((()=>k1(o,e,n))).catch(hc)}async function jI(a,e){const n=kt(a),o=e.batch.batchId;try{const h=await JS(n.localStore,e);Q_(n,o,null),K_(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),await Ou(n,h)}catch(h){await hc(h)}}async function HI(a,e,n){const o=kt(a);try{const h=await(function(x,v){const T=kt(x);return T.persistence.runTransaction("Reject batch","readwrite-primary",(A=>{let S;return T.mutationQueue.lookupMutationBatch(A,v).next((O=>(Cn(O!==null,37113),S=O.keys(),T.mutationQueue.removeMutationBatch(A,O)))).next((()=>T.mutationQueue.performConsistencyCheck(A))).next((()=>T.documentOverlayCache.removeOverlaysForBatchId(A,S,v))).next((()=>T.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(A,S))).next((()=>T.localDocuments.getDocuments(A,S)))}))})(o.localStore,e);Q_(o,e,n),K_(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),await Ou(o,h)}catch(h){await hc(h)}}function K_(a,e){(a.mu.get(e)||[]).forEach((n=>{n.resolve()})),a.mu.delete(e)}function Q_(a,e,n){const o=kt(a);let h=o.Vu[o.currentUser.toKey()];if(h){const m=h.get(e);m&&(n?m.reject(n):m.resolve(),h=h.remove(e)),o.Vu[o.currentUser.toKey()]=h}}function k1(a,e,n=null){a.sharedClientState.removeLocalQueryTarget(e);for(const o of a.Iu.get(e))a.Tu.delete(o),n&&a.Pu.yu(o,n);a.Iu.delete(e),a.isPrimaryClient&&a.Ru.jr(e).forEach((o=>{a.Ru.containsKey(o)||Z_(a,o)}))}function Z_(a,e){a.Eu.delete(e.path.canonicalString());const n=a.du.get(e);n!==null&&(yg(a.remoteStore,n),a.du=a.du.remove(e),a.Au.delete(n),Ig(a))}function xE(a,e,n){for(const o of n)o instanceof q_?(a.Ru.addReference(o.key,e),GI(a,o)):o instanceof X_?(et(Sg,"Document no longer in limbo: "+o.key),a.Ru.removeReference(o.key,e),a.Ru.containsKey(o.key)||Z_(a,o.key)):bt(19791,{wu:o})}function GI(a,e){const n=e.key,o=n.path.canonicalString();a.du.get(n)||a.Eu.has(o)||(et(Sg,"New document in limbo: "+n),a.Eu.add(o),Ig(a))}function Ig(a){for(;a.Eu.size>0&&a.du.size<a.maxConcurrentLimboResolutions;){const e=a.Eu.values().next().value;a.Eu.delete(e);const n=new pt(Fn.fromString(e)),o=a.fu.next();a.Au.set(o,new MI(n)),a.du=a.du.insert(n,o),U_(a.remoteStore,new co(Fs(Ff(n.path)),o,"TargetPurposeLimboResolution",Bf.ce))}}async function Ou(a,e,n){const o=kt(a),h=[],m=[],x=[];o.Tu.isEmpty()||(o.Tu.forEach(((v,T)=>{x.push(o.pu(T,e,n).then((A=>{if((A||n)&&o.isPrimaryClient){const S=A?!A.fromCache:n?.targetChanges.get(T.targetId)?.current;o.sharedClientState.updateQueryState(T.targetId,S?"current":"not-current")}if(A){h.push(A);const S=mg.As(T.targetId,A);m.push(S)}})))})),await Promise.all(x),o.Pu.H_(h),await(async function(T,A){const S=kt(T);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(O=>Oe.forEach(A,(B=>Oe.forEach(B.Es,(Y=>S.persistence.referenceDelegate.addReference(O,B.targetId,Y))).next((()=>Oe.forEach(B.ds,(Y=>S.persistence.referenceDelegate.removeReference(O,B.targetId,Y)))))))))}catch(O){if(!fc(O))throw O;et(pg,"Failed to update sequence numbers: "+O)}for(const O of A){const B=O.targetId;if(!O.fromCache){const Y=S.Ms.get(B),te=Y.snapshotVersion,le=Y.withLastLimboFreeSnapshotVersion(te);S.Ms=S.Ms.insert(B,le)}}})(o.localStore,m))}async function qI(a,e){const n=kt(a);if(!n.currentUser.isEqual(e)){et(Sg,"User change. New user:",e.toKey());const o=await k_(n.localStore,e);n.currentUser=e,(function(m,x){m.mu.forEach((v=>{v.forEach((T=>{T.reject(new Ke(Ie.CANCELLED,x))}))})),m.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await Ou(n,o.Ls)}}function XI(a,e){const n=kt(a),o=n.Au.get(e);if(o&&o.hu)return on().add(o.key);{let h=on();const m=n.Iu.get(e);if(!m)return h;for(const x of m){const v=n.Tu.get(x);h=h.unionWith(v.view.nu)}return h}}function J_(a){const e=kt(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=W_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zI.bind(null,e),e.Pu.H_=RI.bind(null,e.eventManager),e.Pu.yu=NI.bind(null,e.eventManager),e}function YI(a){const e=kt(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HI.bind(null,e),e}class vf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return ZS(this.persistence,new WS,e.initialUser,this.serializer)}Cu(e){return new L_(gg.mi,this.serializer)}Du(e){return new iI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vf.provider={build:()=>new vf};class WI extends vf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Cn(this.persistence.referenceDelegate instanceof Tf,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new MS(o,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Pi.withCacheSize(this.cacheSizeBytes):Pi.DEFAULT;return new L_((o=>Tf.mi(o,n)),this.serializer)}}class P1{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>EE(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=qI.bind(null,this.syncEngine),await CI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new II})()}createDatastore(e){const n=Yf(e.databaseInfo.databaseId),o=(function(m){return new cI(m)})(e.databaseInfo);return(function(m,x,v,T){return new dI(m,x,v,T)})(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return(function(o,h,m,x,v){return new mI(o,h,m,x,v)})(this.localStore,this.datastore,e.asyncQueue,(n=>EE(this.syncEngine,n,0)),(function(){return fE.v()?new fE:new sI})())}createSyncEngine(e,n){return(function(h,m,x,v,T,A,S){const O=new LI(h,m,x,v,T,A);return S&&(O.gu=!0),O})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const o=kt(n);et(ol,"RemoteStore shutting down."),o.Ea.add(5),await Nu(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}P1.provider={build:()=>new P1};class Rg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ca("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const To="FirestoreClient";class KI{constructor(e,n,o,h,m){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=h,this.user=hi.UNAUTHENTICATED,this.clientId=rg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=m,this.authCredentials.start(o,(async x=>{et(To,"Received user=",x.uid),await this.authCredentialListener(x),this.user=x})),this.appCheckCredentials.start(o,(x=>(et(To,"Received new app check token=",x),this.appCheckCredentialListener(x,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ta;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const o=wg(n,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function i1(a,e){a.asyncQueue.verifyOperationInProgress(),et(To,"Initializing OfflineComponentProvider");const n=a.configuration;await e.initialize(n);let o=n.initialUser;a.setCredentialChangeListener((async h=>{o.isEqual(h)||(await k_(e.localStore,h),o=h)})),e.persistence.setDatabaseDeletedListener((()=>a.terminate())),a._offlineComponents=e}async function _E(a,e){a.asyncQueue.verifyOperationInProgress();const n=await QI(a);et(To,"Initializing OnlineComponentProvider"),await e.initialize(n,a.configuration),a.setCredentialChangeListener((o=>gE(e.remoteStore,o))),a.setAppCheckTokenChangeListener(((o,h)=>gE(e.remoteStore,h))),a._onlineComponents=e}async function QI(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){et(To,"Using user provided OfflineComponentProvider");try{await i1(a,a._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(h){return h.name==="FirebaseError"?h.code===Ie.FAILED_PRECONDITION||h.code===Ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&h instanceof DOMException)||h.code===22||h.code===20||h.code===11})(n))throw n;ec("Error using user provided cache. Falling back to memory cache: "+n),await i1(a,new vf)}}else et(To,"Using default OfflineComponentProvider"),await i1(a,new WI(void 0));return a._offlineComponents}async function $_(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(et(To,"Using user provided OnlineComponentProvider"),await _E(a,a._uninitializedComponentsProvider._online)):(et(To,"Using default OnlineComponentProvider"),await _E(a,new P1))),a._onlineComponents}function ZI(a){return $_(a).then((e=>e.syncEngine))}async function Cf(a){const e=await $_(a),n=e.eventManager;return n.onListen=kI.bind(null,e.syncEngine),n.onUnlisten=VI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=PI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=UI.bind(null,e.syncEngine),n}function JI(a,e,n={}){const o=new Ta;return a.asyncQueue.enqueueAndForget((async()=>(function(m,x,v,T,A){const S=new Rg({next:B=>{S.Nu(),x.enqueueAndForget((()=>bg(m,O)));const Y=B.docs.has(v);!Y&&B.fromCache?A.reject(new Ke(Ie.UNAVAILABLE,"Failed to get document because the client is offline.")):Y&&B.fromCache&&T&&T.source==="server"?A.reject(new Ke(Ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):A.resolve(B)},error:B=>A.reject(B)}),O=new Cg(Ff(v.path),S,{includeMetadataChanges:!0,qa:!0});return Tg(m,O)})(await Cf(a),a.asyncQueue,e,n,o))),o.promise}function $I(a,e,n={}){const o=new Ta;return a.asyncQueue.enqueueAndForget((async()=>(function(m,x,v,T,A){const S=new Rg({next:B=>{S.Nu(),x.enqueueAndForget((()=>bg(m,O))),B.fromCache&&T.source==="server"?A.reject(new Ke(Ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):A.resolve(B)},error:B=>A.reject(B)}),O=new Cg(v,S,{includeMetadataChanges:!0,qa:!0});return Tg(m,O)})(await Cf(a),a.asyncQueue,e,n,o))),o.promise}function eA(a){const e={};return a.timeoutSeconds!==void 0&&(e.timeoutSeconds=a.timeoutSeconds),e}const AE=new Map;const tA="firestore.googleapis.com",wE=!0;class TE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ke(Ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tA,this.ssl=wE}else this.host=e.host,this.ssl=e.ssl??wE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=M_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<OS)throw new Ke(Ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eA(e.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Ke(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Ke(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Ke(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,h){return o.timeoutSeconds===h.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qf{constructor(e,n,o,h){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=h,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ke(Ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ke(Ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new iC;switch(o.type){case"firstParty":return new lC(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new Ke(Ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const o=AE.get(n);o&&(et("ComponentProvider","Removing Datastore"),AE.delete(n),o.terminate())})(this),Promise.resolve()}}function e4(a,e,n,o={}){a=Ti(a,Qf);const h=oc(e),m=a._getSettings(),x={...m,emulatorOptions:a._getEmulatorOptions()},v=`${e}:${n}`;h&&(QE(`https://${v}`),ZE("Firestore",!0)),m.host!==tA&&m.host!==v&&ec("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const T={...m,host:v,ssl:h,emulatorOptions:o};if(!nl(T,x)&&(a._setSettings(T),o.mockUserToken)){let A,S;if(typeof o.mockUserToken=="string")A=o.mockUserToken,S=hi.MOCK_USER;else{A=pT(o.mockUserToken,a._app?.options.projectId);const O=o.mockUserToken.sub||o.mockUserToken.user_id;if(!O)throw new Ke(Ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new hi(O)}a._authCredentials=new sC(new qx(A,S))}}class fl{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new fl(this.firestore,e,this._query)}}class mr{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new po(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mr(this.firestore,e,this._key)}toJSON(){return{type:mr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,o){if(Cu(n,mr._jsonSchema))return new mr(e,o||null,new pt(Fn.fromString(n.referencePath)))}}mr._jsonSchemaVersion="firestore/documentReference/1.0",mr._jsonSchema={type:Or("string",mr._jsonSchemaVersion),referencePath:Or("string")};class po extends fl{constructor(e,n,o){super(e,n,Ff(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mr(this.firestore,null,new pt(e))}withConverter(e){return new po(this.firestore,e,this._path)}}function Rr(a,e,...n){if(a=Ar(a),Xx("collection","path",e),a instanceof Qf){const o=Fn.fromString(e,...n);return Py(o),new po(a,null,o)}{if(!(a instanceof mr||a instanceof po))throw new Ke(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=a._path.child(Fn.fromString(e,...n));return Py(o),new po(a.firestore,null,o)}}function or(a,e,...n){if(a=Ar(a),arguments.length===1&&(e=rg.newId()),Xx("doc","path",e),a instanceof Qf){const o=Fn.fromString(e,...n);return ky(o),new mr(a,null,new pt(o))}{if(!(a instanceof mr||a instanceof po))throw new Ke(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=a._path.child(Fn.fromString(e,...n));return ky(o),new mr(a.firestore,a instanceof po?a.converter:null,new pt(o))}}const bE="AsyncQueue";class vE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new B_(this,"async_queue_retry"),this._c=()=>{const o=r1();o&&et(bE,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=e;const n=r1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=r1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ta;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!fc(e))throw e;et(bE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((o=>{throw this.nc=o,this.rc=!1,Ca("INTERNAL UNHANDLED ERROR: ",CE(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=n,n}enqueueAfterDelay(e,n,o){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const h=Ag.createAndSchedule(this,e,n,o,(m=>this.hc(m)));return this.tc.push(h),h}uc(){this.nc&&bt(47125,{Pc:CE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,o)=>n.targetTimeMs-o.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function CE(a){let e=a.message||"";return a.stack&&(e=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),e}function SE(a){return(function(n,o){if(typeof n!="object"||n===null)return!1;const h=n;for(const m of o)if(m in h&&typeof h[m]=="function")return!0;return!1})(a,["next","error","complete"])}class qs extends Qf{constructor(e,n,o,h){super(e,n,o,h),this.type="firestore",this._queue=new vE,this._persistenceKey=h?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vE(e),this._firestoreClient=void 0,await e}}}function t4(a,e){const n=typeof a=="object"?a:Y1(),o=typeof a=="string"?a:yf,h=q1(n,"firestore").getImmediate({identifier:o});if(!h._initialized){const m=gT("firestore");m&&e4(h,...m)}return h}function Du(a){if(a._terminated)throw new Ke(Ie.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||n4(a),a._firestoreClient}function n4(a){const e=a._freezeSettings(),n=(function(h,m,x,v){return new vC(h,m,x,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,eA(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(a._databaseId,a._app?.options.appId||"",a._persistenceKey,e);a._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(a._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),a._firestoreClient=new KI(a._authCredentials,a._appCheckCredentials,a._queue,n,a._componentsProvider&&(function(h){const m=h?._online.build();return{_offline:h?._offline.build(m),_online:m}})(a._componentsProvider))}class gs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gs(ti.fromBase64String(e))}catch(n){throw new Ke(Ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new gs(ti.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:gs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Cu(e,gs._jsonSchema))return gs.fromBase64String(e.bytes)}}gs._jsonSchemaVersion="firestore/bytes/1.0",gs._jsonSchema={type:Or("string",gs._jsonSchemaVersion),bytes:Or("string")};class Mu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ke(Ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ei(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Zf{constructor(e){this._methodName=e}}class js{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ke(Ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ke(Ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return an(this._lat,e._lat)||an(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:js._jsonSchemaVersion}}static fromJSON(e){if(Cu(e,js._jsonSchema))return new js(e.latitude,e.longitude)}}js._jsonSchemaVersion="firestore/geoPoint/1.0",js._jsonSchema={type:Or("string",js._jsonSchemaVersion),latitude:Or("number"),longitude:Or("number")};class Hs{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,h){if(o.length!==h.length)return!1;for(let m=0;m<o.length;++m)if(o[m]!==h[m])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Hs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Cu(e,Hs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Hs(e.vectorValues);throw new Ke(Ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hs._jsonSchemaVersion="firestore/vectorValue/1.0",Hs._jsonSchema={type:Or("string",Hs._jsonSchemaVersion),vectorValues:Or("object")};const r4=/^__.*__$/;class i4{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return this.fieldMask!==null?new So(e,this.data,this.fieldMask,n,this.fieldTransforms):new Iu(e,this.data,n,this.fieldTransforms)}}class nA{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new So(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function rA(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw bt(40011,{Ac:a})}}class Ng{constructor(e,n,o,h,m,x){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=h,m===void 0&&this.Rc(),this.fieldTransforms=m||[],this.fieldMask=x||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ng({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),o=this.Vc({path:n,fc:!1});return o.gc(e),o}yc(e){const n=this.path?.child(e),o=this.Vc({path:n,fc:!1});return o.Rc(),o}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Sf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(rA(this.Ac)&&r4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class s4{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||Yf(e)}Cc(e,n,o,h=!1){return new Ng({Ac:e,methodName:n,Dc:o,path:ei.emptyPath(),fc:!1,bc:h},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lu(a){const e=a._freezeSettings(),n=Yf(a._databaseId);return new s4(a._databaseId,!!e.ignoreUndefinedProperties,n)}function Og(a,e,n,o,h,m={}){const x=a.Cc(m.merge||m.mergeFields?2:0,e,n,h);Mg("Data must be an object, but it was:",x,o);const v=aA(o,x);let T,A;if(m.merge)T=new Zi(x.fieldMask),A=x.fieldTransforms;else if(m.mergeFields){const S=[];for(const O of m.mergeFields){const B=B1(e,O,n);if(!x.contains(B))throw new Ke(Ie.INVALID_ARGUMENT,`Field '${B}' is specified in your field mask but missing from your input data.`);lA(S,B)||S.push(B)}T=new Zi(S),A=x.fieldTransforms.filter((O=>T.covers(O.field)))}else T=null,A=x.fieldTransforms;return new i4(new Bi(v),T,A)}class Jf extends Zf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jf}}class Dg extends Zf{_toFieldTransform(e){return new ZC(e.path,new yu)}isEqual(e){return e instanceof Dg}}function iA(a,e,n,o){const h=a.Cc(1,e,n);Mg("Data must be an object, but it was:",h,o);const m=[],x=Bi.empty();Co(o,((T,A)=>{const S=Lg(e,T,n);A=Ar(A);const O=h.yc(S);if(A instanceof Jf)m.push(S);else{const B=ku(A,O);B!=null&&(m.push(S),x.set(S,B))}}));const v=new Zi(m);return new nA(x,v,h.fieldTransforms)}function sA(a,e,n,o,h,m){const x=a.Cc(1,e,n),v=[B1(e,o,n)],T=[h];if(m.length%2!=0)throw new Ke(Ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let B=0;B<m.length;B+=2)v.push(B1(e,m[B])),T.push(m[B+1]);const A=[],S=Bi.empty();for(let B=v.length-1;B>=0;--B)if(!lA(A,v[B])){const Y=v[B];let te=T[B];te=Ar(te);const le=x.yc(Y);if(te instanceof Jf)A.push(Y);else{const de=ku(te,le);de!=null&&(A.push(Y),S.set(Y,de))}}const O=new Zi(A);return new nA(S,O,x.fieldTransforms)}function a4(a,e,n,o=!1){return ku(n,a.Cc(o?4:3,e))}function ku(a,e){if(oA(a=Ar(a)))return Mg("Unsupported field value:",e,a),aA(a,e);if(a instanceof Zf)return(function(o,h){if(!rA(h.Ac))throw h.Sc(`${o._methodName}() can only be used with update() and set()`);if(!h.path)throw h.Sc(`${o._methodName}() is not currently supported inside arrays`);const m=o._toFieldTransform(h);m&&h.fieldTransforms.push(m)})(a,e),null;if(a===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(o,h){const m=[];let x=0;for(const v of o){let T=ku(v,h.wc(x));T==null&&(T={nullValue:"NULL_VALUE"}),m.push(T),x++}return{arrayValue:{values:m}}})(a,e)}return(function(o,h){if((o=Ar(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return WC(h.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const m=Rn.fromDate(o);return{timestampValue:wf(h.serializer,m)}}if(o instanceof Rn){const m=new Rn(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:wf(h.serializer,m)}}if(o instanceof js)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof gs)return{bytesValue:C_(h.serializer,o._byteString)};if(o instanceof mr){const m=h.databaseId,x=o.firestore._databaseId;if(!x.isEqual(m))throw h.Sc(`Document reference is for database ${x.projectId}/${x.database} but should be for database ${m.projectId}/${m.database}`);return{referenceValue:fg(o.firestore._databaseId||h.databaseId,o._key.path)}}if(o instanceof Hs)return(function(x,v){return{mapValue:{fields:{[t_]:{stringValue:n_},[Ef]:{arrayValue:{values:x.toArray().map((A=>{if(typeof A!="number")throw v.Sc("VectorValues must only contain numeric values.");return cg(v.serializer,A)}))}}}}}})(o,h);throw h.Sc(`Unsupported field value: ${Pf(o)}`)})(a,e)}function aA(a,e){const n={};return Kx(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Co(a,((o,h)=>{const m=ku(h,e.mc(o));m!=null&&(n[o]=m)})),{mapValue:{fields:n}}}function oA(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof Rn||a instanceof js||a instanceof gs||a instanceof mr||a instanceof Zf||a instanceof Hs)}function Mg(a,e,n){if(!oA(n)||!Yx(n)){const o=Pf(n);throw o==="an object"?e.Sc(a+" a custom object"):e.Sc(a+" "+o)}}function B1(a,e,n){if((e=Ar(e))instanceof Mu)return e._internalPath;if(typeof e=="string")return Lg(a,e);throw Sf("Field path arguments must be of type string or ",a,!1,void 0,n)}const o4=new RegExp("[~\\*/\\[\\]]");function Lg(a,e,n){if(e.search(o4)>=0)throw Sf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,n);try{return new Mu(...e.split("."))._internalPath}catch{throw Sf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,n)}}function Sf(a,e,n,o,h){const m=o&&!o.isEmpty(),x=h!==void 0;let v=`Function ${e}() called with invalid data`;n&&(v+=" (via `toFirestore()`)"),v+=". ";let T="";return(m||x)&&(T+=" (found",m&&(T+=` in field ${o}`),x&&(T+=` in document ${h}`),T+=")"),new Ke(Ie.INVALID_ARGUMENT,v+a+T)}function lA(a,e){return a.some((n=>n.isEqual(e)))}class cA{constructor(e,n,o,h,m){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=h,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new mr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new l4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(kg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class l4 extends cA{data(){return super.data()}}function kg(a,e){return typeof e=="string"?Lg(a,e):e instanceof Mu?e._internalPath:e._delegate._internalPath}function uA(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new Ke(Ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Pg{}class c4 extends Pg{}function uo(a,e,...n){let o=[];e instanceof Pg&&o.push(e),o=o.concat(n),(function(m){const x=m.filter((T=>T instanceof Bg)).length,v=m.filter((T=>T instanceof $f)).length;if(x>1||x>0&&v>0)throw new Ke(Ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const h of o)a=h._apply(a);return a}class $f extends c4{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new $f(e,n,o)}_apply(e){const n=this._parse(e);return hA(e._query,n),new fl(e.firestore,e.converter,C1(e._query,n))}_parse(e){const n=Lu(e.firestore);return(function(m,x,v,T,A,S,O){let B;if(A.isKeyField()){if(S==="array-contains"||S==="array-contains-any")throw new Ke(Ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on documentId().`);if(S==="in"||S==="not-in"){RE(O,S);const te=[];for(const le of O)te.push(IE(T,m,le));B={arrayValue:{values:te}}}else B=IE(T,m,O)}else S!=="in"&&S!=="not-in"&&S!=="array-contains-any"||RE(O,S),B=a4(v,x,O,S==="in"||S==="not-in");return Nr.create(A,S,B)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ms(a,e,n){const o=e,h=kg("where",a);return $f._create(h,o,n)}class Bg extends Pg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Bg(e,n)}_parse(e){const n=this._queryConstraints.map((o=>o._parse(e))).filter((o=>o.getFilters().length>0));return n.length===1?n[0]:Cs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(h,m){let x=h;const v=m.getFlattenedFilters();for(const T of v)hA(x,T),x=C1(x,T)})(e._query,n),new fl(e.firestore,e.converter,C1(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function IE(a,e,n){if(typeof(n=Ar(n))=="string"){if(n==="")throw new Ke(Ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!u_(e)&&n.indexOf("/")!==-1)throw new Ke(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(Fn.fromString(n));if(!pt.isDocumentKey(o))throw new Ke(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Gy(a,new pt(o))}if(n instanceof mr)return Gy(a,n._key);throw new Ke(Ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pf(n)}.`)}function RE(a,e){if(!Array.isArray(a)||a.length===0)throw new Ke(Ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hA(a,e){const n=(function(h,m){for(const x of h)for(const v of x.getFlattenedFilters())if(m.indexOf(v.op)>=0)return v.op;return null})(a.filters,(function(h){switch(h){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ke(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ke(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class u4{convertValue(e,n="none"){switch(Ao(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _r(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(_o(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw bt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return Co(e,((h,m)=>{o[h]=this.convertValue(m,n)})),o}convertVectorValue(e){const n=e.fields?.[Ef].arrayValue?.values?.map((o=>_r(o.doubleValue)));return new Hs(n)}convertGeoPoint(e){return new js(_r(e.latitude),_r(e.longitude))}convertArray(e,n){return(e.values||[]).map((o=>this.convertValue(o,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const o=Uf(e);return o==null?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(gu(e));default:return null}}convertTimestamp(e){const n=xo(e);return new Rn(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=Fn.fromString(e);Cn(D_(o),9688,{name:e});const h=new mu(o.get(1),o.get(3)),m=new pt(o.popFirst(5));return h.isEqual(n)||Ca(`Document ${m} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),m}}function Vg(a,e,n){let o;return o=a?n&&(n.merge||n.mergeFields)?a.toFirestore(e,n):a.toFirestore(e):e,o}class tu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jo extends cA{constructor(e,n,o,h,m,x){super(e,n,o,h,x),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new af(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(kg("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ke(Ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Jo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Jo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Jo._jsonSchema={type:Or("string",Jo._jsonSchemaVersion),bundleSource:Or("string","DocumentSnapshot"),bundleName:Or("string"),bundle:Or("string")};class af extends Jo{data(e={}){return super.data(e)}}class $o{constructor(e,n,o,h){this._firestore=e,this._userDataWriter=n,this._snapshot=h,this.metadata=new tu(h.hasPendingWrites,h.fromCache),this.query=o}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((o=>{e.call(n,new af(this._firestore,this._userDataWriter,o.key,o,new tu(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ke(Ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(h,m){if(h._snapshot.oldDocs.isEmpty()){let x=0;return h._snapshot.docChanges.map((v=>{const T=new af(h._firestore,h._userDataWriter,v.doc.key,v.doc,new tu(h._snapshot.mutatedKeys.has(v.doc.key),h._snapshot.fromCache),h.query.converter);return v.doc,{type:"added",doc:T,oldIndex:-1,newIndex:x++}}))}{let x=h._snapshot.oldDocs;return h._snapshot.docChanges.filter((v=>m||v.type!==3)).map((v=>{const T=new af(h._firestore,h._userDataWriter,v.doc.key,v.doc,new tu(h._snapshot.mutatedKeys.has(v.doc.key),h._snapshot.fromCache),h.query.converter);let A=-1,S=-1;return v.type!==0&&(A=x.indexOf(v.doc.key),x=x.delete(v.doc.key)),v.type!==1&&(x=x.add(v.doc),S=x.indexOf(v.doc.key)),{type:h4(v.type),doc:T,oldIndex:A,newIndex:S}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ke(Ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$o._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=rg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],o=[],h=[];return this.docs.forEach((m=>{m._document!==null&&(n.push(m._document),o.push(this._userDataWriter.convertObjectMap(m._document.data.value.mapValue.fields,"previous")),h.push(m.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function h4(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bt(61501,{type:a})}}function ac(a){a=Ti(a,mr);const e=Ti(a.firestore,qs);return JI(Du(e),a._key).then((n=>fA(e,a,n)))}$o._jsonSchemaVersion="firestore/querySnapshot/1.0",$o._jsonSchema={type:Or("string",$o._jsonSchemaVersion),bundleSource:Or("string","QuerySnapshot"),bundleName:Or("string"),bundle:Or("string")};class Ug extends u4{constructor(e){super(),this.firestore=e}convertBytes(e){return new gs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mr(this.firestore,null,n)}}function di(a){a=Ti(a,fl);const e=Ti(a.firestore,qs),n=Du(e),o=new Ug(e);return uA(a._query),$I(n,a._query).then((h=>new $o(e,o,a,h)))}function el(a,e,n){a=Ti(a,mr);const o=Ti(a.firestore,qs),h=Vg(a.converter,e,n);return Pu(o,[Og(Lu(o),"setDoc",a._key,h,a.converter!==null,n).toMutation(a._key,bi.none())])}function tl(a,e,n,...o){a=Ti(a,mr);const h=Ti(a.firestore,qs),m=Lu(h);let x;return x=typeof(e=Ar(e))=="string"||e instanceof Mu?sA(m,"updateDoc",a._key,e,n,o):iA(m,"updateDoc",a._key,e),Pu(h,[x.toMutation(a._key,bi.exists(!0))])}function NE(a){return Pu(Ti(a.firestore,qs),[new qf(a._key,bi.none())])}function of(a,e){const n=Ti(a.firestore,qs),o=or(a),h=Vg(a.converter,e);return Pu(n,[Og(Lu(a.firestore),"addDoc",o._key,h,a.converter!==null,{}).toMutation(o._key,bi.exists(!1))]).then((()=>o))}function f4(a,...e){a=Ar(a);let n={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||SE(e[o])||(n=e[o++]);const h={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(SE(e[o])){const T=e[o];e[o]=T.next?.bind(T),e[o+1]=T.error?.bind(T),e[o+2]=T.complete?.bind(T)}let m,x,v;if(a instanceof mr)x=Ti(a.firestore,qs),v=Ff(a._key.path),m={next:T=>{e[o]&&e[o](fA(x,a,T))},error:e[o+1],complete:e[o+2]};else{const T=Ti(a,fl);x=Ti(T.firestore,qs),v=T._query;const A=new Ug(x);m={next:S=>{e[o]&&e[o](new $o(x,A,T,S))},error:e[o+1],complete:e[o+2]},uA(a._query)}return(function(A,S,O,B){const Y=new Rg(B),te=new Cg(S,Y,O);return A.asyncQueue.enqueueAndForget((async()=>Tg(await Cf(A),te))),()=>{Y.Nu(),A.asyncQueue.enqueueAndForget((async()=>bg(await Cf(A),te)))}})(Du(x),v,h,m)}function Pu(a,e){return(function(o,h){const m=new Ta;return o.asyncQueue.enqueueAndForget((async()=>FI(await ZI(o),h,m))),m.promise})(Du(a),e)}function fA(a,e,n){const o=n.docs.get(e._key),h=new Ug(a);return new Jo(a,h,e._key,o,new tu(n.hasPendingWrites,n.fromCache),e.converter)}class d4{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Lu(e)}set(e,n,o){this._verifyNotCommitted();const h=s1(e,this._firestore),m=Vg(h.converter,n,o),x=Og(this._dataReader,"WriteBatch.set",h._key,m,h.converter!==null,o);return this._mutations.push(x.toMutation(h._key,bi.none())),this}update(e,n,o,...h){this._verifyNotCommitted();const m=s1(e,this._firestore);let x;return x=typeof(n=Ar(n))=="string"||n instanceof Mu?sA(this._dataReader,"WriteBatch.update",m._key,n,o,h):iA(this._dataReader,"WriteBatch.update",m._key,n),this._mutations.push(x.toMutation(m._key,bi.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=s1(e,this._firestore);return this._mutations=this._mutations.concat(new qf(n._key,bi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ke(Ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function s1(a,e){if((a=Ar(a)).firestore!==e)throw new Ke(Ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}function lf(){return new Dg("serverTimestamp")}function a1(a){return Du(a=Ti(a,qs)),new d4(a,(e=>Pu(a,e)))}(function(e,n=!0){(function(h){uc=h})(lc),$l(new rl("firestore",((o,{instanceIdentifier:h,options:m})=>{const x=o.getProvider("app").getImmediate(),v=new qs(new aC(o.getProvider("auth-internal")),new cC(x,o.getProvider("app-check-internal")),(function(A,S){if(!Object.prototype.hasOwnProperty.apply(A.options,["projectId"]))throw new Ke(Ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mu(A.options.projectId,S)})(x,h),x);return m={useFetchStreams:n,...m},v._setSettings(m),v}),"PUBLIC").setMultipleInstances(!0)),go(Oy,Dy,e),go(Oy,Dy,"esm2020")})();const dA={apiKey:"AIzaSyARwb6K0M4l-hWKi8FrOLEVqRqeHRf8JR4",authDomain:"oppmoteboka.firebaseapp.com",projectId:"oppmoteboka",storageBucket:"oppmoteboka.firebasestorage.app",messagingSenderId:"732911922070",appId:"1:732911922070:web:b16d9de65062395c018bb7"},gA=ex().length?Y1():X1(dA),Wh=Bx(gA),Ot=t4(gA),g4=ex().find(a=>a.name==="secondary")??X1(dA,"secondary"),o1=Bx(g4);function mA(){const[a,e]=Ce.useState(null),[n,o]=Ce.useState(!0);return Ce.useEffect(()=>{const v=q3(Wh,async T=>{if(!T){e(null),o(!1);return}try{const A=or(Ot,"users",T.uid);let S=await ac(A);if(!S.exists()){const Y={uid:T.uid,email:T.email??"",displayName:T.displayName??T.email??"",role:"student",term:null,termLabel:null,semesterStatus:"aktiv"};await el(A,{...Y,createdAt:lf()}),e(Y),o(!1);return}const O=S.data(),B={uid:T.uid,email:O?.email??T.email??"",role:O?.role??"student",term:O?.term??null,termLabel:O?.termLabel??null,semesterStatus:O?.semesterStatus??null,displayName:O?.name??O?.displayName??T.displayName??T.email??""};e(B)}catch(A){console.error("Feil ved henting/oppretting av bruker:",A),e(null)}finally{o(!1)}});return()=>v()},[]),{user:a,loading:n,login:async(v,T)=>{await j3(Wh,v,T)},register:async(v,T)=>{await Zh(Wh,v,T)},logout:async()=>{await X3(Wh)}}}var nt;(function(a){a[a.QR_CODE=0]="QR_CODE",a[a.AZTEC=1]="AZTEC",a[a.CODABAR=2]="CODABAR",a[a.CODE_39=3]="CODE_39",a[a.CODE_93=4]="CODE_93",a[a.CODE_128=5]="CODE_128",a[a.DATA_MATRIX=6]="DATA_MATRIX",a[a.MAXICODE=7]="MAXICODE",a[a.ITF=8]="ITF",a[a.EAN_13=9]="EAN_13",a[a.EAN_8=10]="EAN_8",a[a.PDF_417=11]="PDF_417",a[a.RSS_14=12]="RSS_14",a[a.RSS_EXPANDED=13]="RSS_EXPANDED",a[a.UPC_A=14]="UPC_A",a[a.UPC_E=15]="UPC_E",a[a.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(nt||(nt={}));var OE=new Map([[nt.QR_CODE,"QR_CODE"],[nt.AZTEC,"AZTEC"],[nt.CODABAR,"CODABAR"],[nt.CODE_39,"CODE_39"],[nt.CODE_93,"CODE_93"],[nt.CODE_128,"CODE_128"],[nt.DATA_MATRIX,"DATA_MATRIX"],[nt.MAXICODE,"MAXICODE"],[nt.ITF,"ITF"],[nt.EAN_13,"EAN_13"],[nt.EAN_8,"EAN_8"],[nt.PDF_417,"PDF_417"],[nt.RSS_14,"RSS_14"],[nt.RSS_EXPANDED,"RSS_EXPANDED"],[nt.UPC_A,"UPC_A"],[nt.UPC_E,"UPC_E"],[nt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),DE;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.URL=1]="URL"})(DE||(DE={}));function m4(a){return Object.values(nt).includes(a)}var If;(function(a){a[a.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",a[a.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(If||(If={}));var p4=(function(){function a(){}return a.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",a.SCAN_DEFAULT_FPS=2,a.DEFAULT_DISABLE_FLIP=!1,a.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,a.DEFAULT_SUPPORTED_SCAN_TYPE=[If.SCAN_TYPE_CAMERA,If.SCAN_TYPE_FILE],a})(),pA=(function(){function a(e,n){this.format=e,this.formatName=n}return a.prototype.toString=function(){return this.formatName},a.create=function(e){if(!OE.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new a(e,OE.get(e))},a})(),ME=(function(){function a(){}return a.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},a.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},a})(),V1;(function(a){a[a.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",a[a.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",a[a.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(V1||(V1={}));var y4=(function(){function a(){}return a.createFrom=function(e){return{errorMessage:e,type:V1.UNKWOWN_ERROR}},a})(),E4=(function(){function a(e){this.verbose=e}return a.prototype.log=function(e){this.verbose&&console.log(e)},a.prototype.warn=function(e){this.verbose&&console.warn(e)},a.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},a.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},a})();function xa(a){return typeof a>"u"||a===null}var Yl=(function(){function a(){}return a.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},a.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},a.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},a.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},a.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},a.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},a.scannerPaused=function(){return"Scanner paused"},a})(),yA=(function(){function a(){}return a.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var o=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(o,"."),!0),!1}for(var h=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],m=new Set(h),x=Object.keys(e),v=0,T=x;v<T.length;v++){var A=T[v];if(m.has(A))return n.logError("".concat(A," is not supported videoConstaints."),!0),!1}return!0},a})(),nu={exports:{}},x4=nu.exports,LE;function _4(){return LE||(LE=1,(function(a,e){(function(n,o){o(e)})(x4,(function(n){function o(D){return D==null}var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,r){D.__proto__=r}||function(D,r){for(var s in r)r.hasOwnProperty(s)&&(D[s]=r[s])};function m(D,r){h(D,r);function s(){this.constructor=D}D.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}function x(D,r){var s=Object.setPrototypeOf;s?s(D,r):D.__proto__=r}function v(D,r){r===void 0&&(r=D.constructor);var s=Error.captureStackTrace;s&&s(D,r)}var T=(function(D){m(r,D);function r(s){var l=this.constructor,u=D.call(this,s)||this;return Object.defineProperty(u,"name",{value:l.name,enumerable:!1}),x(u,l.prototype),v(u),u}return r})(Error);class A extends T{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}A.kind="Exception";class S extends A{}S.kind="ArgumentException";class O extends A{}O.kind="IllegalArgumentException";class B{constructor(r){if(this.binarizer=r,r===null)throw new O("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,s){return this.binarizer.getBlackRow(r,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,s,l,u){const f=this.binarizer.getLuminanceSource().crop(r,s,l,u);return new B(this.binarizer.createBinarizer(f))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new B(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new B(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class Y extends A{static getChecksumInstance(){return new Y}}Y.kind="ChecksumException";class te{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class le{static arraycopy(r,s,l,u,f){for(;f--;)l[u++]=r[s++]}static currentTimeMillis(){return Date.now()}}class de extends A{}de.kind="IndexOutOfBoundsException";class Ge extends de{constructor(r=void 0,s=void 0){super(s),this.index=r,this.message=s}}Ge.kind="ArrayIndexOutOfBoundsException";class Le{static fill(r,s){for(let l=0,u=r.length;l<u;l++)r[l]=s}static fillWithin(r,s,l,u){Le.rangeCheck(r.length,s,l);for(let f=s;f<l;f++)r[f]=u}static rangeCheck(r,s,l){if(s>l)throw new O("fromIndex("+s+") > toIndex("+l+")");if(s<0)throw new Ge(s);if(l>r)throw new Ge(l)}static asList(...r){return r}static create(r,s,l){return Array.from({length:r}).map(f=>Array.from({length:s}).fill(l))}static createInt32Array(r,s,l){return Array.from({length:r}).map(f=>Int32Array.from({length:s}).fill(l))}static equals(r,s){if(!r||!s||!r.length||!s.length||r.length!==s.length)return!1;for(let l=0,u=r.length;l<u;l++)if(r[l]!==s[l])return!1;return!0}static hashCode(r){if(r===null)return 0;let s=1;for(const l of r)s=31*s+l;return s}static fillUint8Array(r,s){for(let l=0;l!==r.length;l++)r[l]=s}static copyOf(r,s){return r.slice(0,s)}static copyOfUint8Array(r,s){if(r.length<=s){const l=new Uint8Array(s);return l.set(r),l}return r.slice(0,s)}static copyOfRange(r,s,l){const u=l-s,f=new Int32Array(u);return le.arraycopy(r,s,f,0,u),f}static binarySearch(r,s,l){l===void 0&&(l=Le.numberComparator);let u=0,f=r.length-1;for(;u<=f;){const g=f+u>>1,y=l(s,r[g]);if(y>0)u=g+1;else if(y<0)f=g-1;else return g}return-u-1}static numberComparator(r,s){return r-s}}class me{static numberOfTrailingZeros(r){let s;if(r===0)return 32;let l=31;return s=r<<16,s!==0&&(l-=16,r=s),s=r<<8,s!==0&&(l-=8,r=s),s=r<<4,s!==0&&(l-=4,r=s),s=r<<2,s!==0&&(l-=2,r=s),l-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let s=1;return r>>>16||(s+=16,r<<=16),r>>>24||(s+=8,r<<=8),r>>>28||(s+=4,r<<=4),r>>>30||(s+=2,r<<=2),s-=r>>>31,s}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,s){return Math.trunc(r/s)}static parseInt(r,s=void 0){return parseInt(r,s)}}me.MIN_VALUE_32_BITS=-2147483648,me.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Be{constructor(r,s){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,s==null?this.bits=Be.makeArray(r):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const s=Be.makeArray(r);le.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const s=this.size;if(r>=s)return s;const l=this.bits;let u=Math.floor(r/32),f=l[u];f&=~((1<<(r&31))-1);const g=l.length;for(;f===0;){if(++u===g)return s;f=l[u]}const y=u*32+me.numberOfTrailingZeros(f);return y>s?s:y}getNextUnset(r){const s=this.size;if(r>=s)return s;const l=this.bits;let u=Math.floor(r/32),f=~l[u];f&=~((1<<(r&31))-1);const g=l.length;for(;f===0;){if(++u===g)return s;f=~l[u]}const y=u*32+me.numberOfTrailingZeros(f);return y>s?s:y}setBulk(r,s){this.bits[Math.floor(r/32)]=s}setRange(r,s){if(s<r||r<0||s>this.size)throw new O;if(s===r)return;s--;const l=Math.floor(r/32),u=Math.floor(s/32),f=this.bits;for(let g=l;g<=u;g++){const y=g>l?0:r&31,b=(2<<(g<u?31:s&31))-(1<<y);f[g]|=b}}clear(){const r=this.bits.length,s=this.bits;for(let l=0;l<r;l++)s[l]=0}isRange(r,s,l){if(s<r||r<0||s>this.size)throw new O;if(s===r)return!0;s--;const u=Math.floor(r/32),f=Math.floor(s/32),g=this.bits;for(let y=u;y<=f;y++){const _=y>u?0:r&31,I=(2<<(y<f?31:s&31))-(1<<_)&4294967295;if((g[y]&I)!==(l?I:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,s){if(s<0||s>32)throw new O("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let l=s;l>0;l--)this.appendBit((r>>l-1&1)===1)}appendBitArray(r){const s=r.size;this.ensureCapacity(this.size+s);for(let l=0;l<s;l++)this.appendBit(r.get(l))}xor(r){if(this.size!==r.size)throw new O("Sizes don't match");const s=this.bits;for(let l=0,u=s.length;l<u;l++)s[l]^=r.bits[l]}toBytes(r,s,l,u){for(let f=0;f<u;f++){let g=0;for(let y=0;y<8;y++)this.get(r)&&(g|=1<<7-y),r++;s[l+f]=g}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),l=s+1,u=this.bits;for(let f=0;f<l;f++){let g=u[f];g=g>>1&1431655765|(g&1431655765)<<1,g=g>>2&858993459|(g&858993459)<<2,g=g>>4&252645135|(g&252645135)<<4,g=g>>8&16711935|(g&16711935)<<8,g=g>>16&65535|(g&65535)<<16,r[s-f]=g}if(this.size!==l*32){const f=l*32-this.size;let g=r[0]>>>f;for(let y=1;y<l;y++){const _=r[y];g|=_<<32-f,r[y-1]=g,g=_>>>f}r[l-1]=g}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof Be))return!1;const s=r;return this.size===s.size&&Le.equals(this.bits,s.bits)}hashCode(){return 31*this.size+Le.hashCode(this.bits)}toString(){let r="";for(let s=0,l=this.size;s<l;s++)(s&7)===0&&(r+=" "),r+=this.get(s)?"X":".";return r}clone(){return new Be(this.size,this.bits.slice())}}var ct;(function(D){D[D.OTHER=0]="OTHER",D[D.PURE_BARCODE=1]="PURE_BARCODE",D[D.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",D[D.TRY_HARDER=3]="TRY_HARDER",D[D.CHARACTER_SET=4]="CHARACTER_SET",D[D.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",D[D.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",D[D.ASSUME_GS1=7]="ASSUME_GS1",D[D.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",D[D.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",D[D.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ct||(ct={}));var je=ct;class F extends A{static getFormatInstance(){return new F}}F.kind="FormatException";var z;(function(D){D[D.Cp437=0]="Cp437",D[D.ISO8859_1=1]="ISO8859_1",D[D.ISO8859_2=2]="ISO8859_2",D[D.ISO8859_3=3]="ISO8859_3",D[D.ISO8859_4=4]="ISO8859_4",D[D.ISO8859_5=5]="ISO8859_5",D[D.ISO8859_6=6]="ISO8859_6",D[D.ISO8859_7=7]="ISO8859_7",D[D.ISO8859_8=8]="ISO8859_8",D[D.ISO8859_9=9]="ISO8859_9",D[D.ISO8859_10=10]="ISO8859_10",D[D.ISO8859_11=11]="ISO8859_11",D[D.ISO8859_13=12]="ISO8859_13",D[D.ISO8859_14=13]="ISO8859_14",D[D.ISO8859_15=14]="ISO8859_15",D[D.ISO8859_16=15]="ISO8859_16",D[D.SJIS=16]="SJIS",D[D.Cp1250=17]="Cp1250",D[D.Cp1251=18]="Cp1251",D[D.Cp1252=19]="Cp1252",D[D.Cp1256=20]="Cp1256",D[D.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",D[D.UTF8=22]="UTF8",D[D.ASCII=23]="ASCII",D[D.Big5=24]="Big5",D[D.GB18030=25]="GB18030",D[D.EUC_KR=26]="EUC_KR"})(z||(z={}));class V{constructor(r,s,l,...u){this.valueIdentifier=r,this.name=l,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=u,V.VALUE_IDENTIFIER_TO_ECI.set(r,this),V.NAME_TO_ECI.set(l,this);const f=this.values;for(let g=0,y=f.length;g!==y;g++){const _=f[g];V.VALUES_TO_ECI.set(_,this)}for(const g of u)V.NAME_TO_ECI.set(g,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new F("incorect value");const s=V.VALUES_TO_ECI.get(r);if(s===void 0)throw new F("incorect value");return s}static getCharacterSetECIByName(r){const s=V.NAME_TO_ECI.get(r);if(s===void 0)throw new F("incorect value");return s}equals(r){if(!(r instanceof V))return!1;const s=r;return this.getName()===s.getName()}}V.VALUE_IDENTIFIER_TO_ECI=new Map,V.VALUES_TO_ECI=new Map,V.NAME_TO_ECI=new Map,V.Cp437=new V(z.Cp437,Int32Array.from([0,2]),"Cp437"),V.ISO8859_1=new V(z.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),V.ISO8859_2=new V(z.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),V.ISO8859_3=new V(z.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),V.ISO8859_4=new V(z.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),V.ISO8859_5=new V(z.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),V.ISO8859_6=new V(z.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),V.ISO8859_7=new V(z.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),V.ISO8859_8=new V(z.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),V.ISO8859_9=new V(z.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),V.ISO8859_10=new V(z.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),V.ISO8859_11=new V(z.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),V.ISO8859_13=new V(z.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),V.ISO8859_14=new V(z.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),V.ISO8859_15=new V(z.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),V.ISO8859_16=new V(z.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),V.SJIS=new V(z.SJIS,20,"SJIS","Shift_JIS"),V.Cp1250=new V(z.Cp1250,21,"Cp1250","windows-1250"),V.Cp1251=new V(z.Cp1251,22,"Cp1251","windows-1251"),V.Cp1252=new V(z.Cp1252,23,"Cp1252","windows-1252"),V.Cp1256=new V(z.Cp1256,24,"Cp1256","windows-1256"),V.UnicodeBigUnmarked=new V(z.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),V.UTF8=new V(z.UTF8,26,"UTF8","UTF-8"),V.ASCII=new V(z.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),V.Big5=new V(z.Big5,28,"Big5"),V.GB18030=new V(z.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),V.EUC_KR=new V(z.EUC_KR,30,"EUC_KR","EUC-KR");class Z extends A{}Z.kind="UnsupportedOperationException";class X{static decode(r,s){const l=this.encodingName(s);return this.customDecoder?this.customDecoder(r,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(r,l):new TextDecoder(l).decode(r)}static shouldDecodeOnFallback(r){return!X.isBrowser()&&r==="ISO-8859-1"}static encode(r,s){const l=this.encodingName(s);return this.customEncoder?this.customEncoder(r,l):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof V?r:V.getCharacterSetECIByName(r)}static decodeFallback(r,s){const l=this.encodingCharacterSet(s);if(X.isDecodeFallbackSupported(l)){let u="";for(let f=0,g=r.length;f<g;f++){let y=r[f].toString(16);y.length<2&&(y="0"+y),u+="%"+y}return decodeURIComponent(u)}if(l.equals(V.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new Z(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(V.UTF8)||r.equals(V.ISO8859_1)||r.equals(V.ASCII)}static encodeFallback(r){const l=btoa(unescape(encodeURIComponent(r))).split(""),u=[];for(let f=0;f<l.length;f++)u.push(l[f].charCodeAt(0));return new Uint8Array(u)}}class W{static castAsNonUtf8Char(r,s=null){const l=s?s.getName():this.ISO88591;return X.decode(new Uint8Array([r]),l)}static guessEncoding(r,s){if(s!=null&&s.get(je.CHARACTER_SET)!==void 0)return s.get(je.CHARACTER_SET).toString();const l=r.length;let u=!0,f=!0,g=!0,y=0,_=0,b=0,I=0,M=0,L=0,H=0,Q=0,J=0,se=0,Ee=0;const Ue=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let Pe=0;Pe<l&&(u||f||g);Pe++){const Me=r[Pe]&255;g&&(y>0?(Me&128)===0?g=!1:y--:(Me&128)!==0&&((Me&64)===0?g=!1:(y++,(Me&32)===0?_++:(y++,(Me&16)===0?b++:(y++,(Me&8)===0?I++:g=!1))))),u&&(Me>127&&Me<160?u=!1:Me>159&&(Me<192||Me===215||Me===247)&&Ee++),f&&(M>0?Me<64||Me===127||Me>252?f=!1:M--:Me===128||Me===160||Me>239?f=!1:Me>160&&Me<224?(L++,Q=0,H++,H>J&&(J=H)):Me>127?(M++,H=0,Q++,Q>se&&(se=Q)):(H=0,Q=0))}return g&&y>0&&(g=!1),f&&M>0&&(f=!1),g&&(Ue||_+b+I>0)?W.UTF8:f&&(W.ASSUME_SHIFT_JIS||J>=3||se>=3)?W.SHIFT_JIS:u&&f?J===2&&L===2||Ee*10>=l?W.SHIFT_JIS:W.ISO88591:u?W.ISO88591:f?W.SHIFT_JIS:g?W.UTF8:W.PLATFORM_DEFAULT_ENCODING}static format(r,...s){let l=-1;function u(g,y,_,b,I,M){if(g==="%%")return"%";if(s[++l]===void 0)return;g=b?parseInt(b.substr(1)):void 0;let L=I?parseInt(I.substr(1)):void 0,H;switch(M){case"s":H=s[l];break;case"c":H=s[l][0];break;case"f":H=parseFloat(s[l]).toFixed(g);break;case"p":H=parseFloat(s[l]).toPrecision(g);break;case"e":H=parseFloat(s[l]).toExponential(g);break;case"x":H=parseInt(s[l]).toString(L||16);break;case"d":H=parseFloat(parseInt(s[l],L||10).toPrecision(g)).toFixed(0);break}H=typeof H=="object"?JSON.stringify(H):(+H).toString(L);let Q=parseInt(_),J=_&&_[0]+""=="0"?"0":" ";for(;H.length<Q;)H=y!==void 0?H+J:J+H;return H}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(f,u)}static getBytes(r,s){return X.encode(r,s)}static getCharCode(r,s=0){return r.charCodeAt(s)}static getCharAt(r){return String.fromCharCode(r)}}W.SHIFT_JIS=V.SJIS.getName(),W.GB2312="GB2312",W.ISO88591=V.ISO8859_1.getName(),W.EUC_JP="EUC_JP",W.UTF8=V.UTF8.getName(),W.PLATFORM_DEFAULT_ENCODING=W.UTF8,W.ASSUME_SHIFT_JIS=!1;class G{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=W.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,s,l){for(let u=s;s<s+l;u++)this.append(r[u]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+1)}substring(r,s){return this.value.substring(r,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+s.length)}}class Qe{constructor(r,s,l,u){if(this.width=r,this.height=s,this.rowSize=l,this.bits=u,s==null&&(s=r),this.height=s,r<1||s<1)throw new O("Both dimensions must be greater than 0");l==null&&(l=Math.floor((r+31)/32)),this.rowSize=l,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const s=r.length,l=r[0].length,u=new Qe(l,s);for(let f=0;f<s;f++){const g=r[f];for(let y=0;y<l;y++)g[y]&&u.set(y,f)}return u}static parseFromString(r,s,l){if(r===null)throw new O("stringRepresentation cannot be null");const u=new Array(r.length);let f=0,g=0,y=-1,_=0,b=0;for(;b<r.length;)if(r.charAt(b)===`
`||r.charAt(b)==="\r"){if(f>g){if(y===-1)y=f-g;else if(f-g!==y)throw new O("row lengths do not match");g=f,_++}b++}else if(r.substring(b,b+s.length)===s)b+=s.length,u[f]=!0,f++;else if(r.substring(b,b+l.length)===l)b+=l.length,u[f]=!1,f++;else throw new O("illegal character encountered: "+r.substring(b));if(f>g){if(y===-1)y=f-g;else if(f-g!==y)throw new O("row lengths do not match");_++}const I=new Qe(y,_);for(let M=0;M<f;M++)u[M]&&I.set(Math.floor(M%y),Math.floor(M/y));return I}get(r,s){const l=s*this.rowSize+Math.floor(r/32);return(this.bits[l]>>>(r&31)&1)!==0}set(r,s){const l=s*this.rowSize+Math.floor(r/32);this.bits[l]|=1<<(r&31)&4294967295}unset(r,s){const l=s*this.rowSize+Math.floor(r/32);this.bits[l]&=~(1<<(r&31)&4294967295)}flip(r,s){const l=s*this.rowSize+Math.floor(r/32);this.bits[l]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new O("input matrix dimensions do not match");const s=new Be(Math.floor(this.width/32)+1),l=this.rowSize,u=this.bits;for(let f=0,g=this.height;f<g;f++){const y=f*l,_=r.getRow(f,s).getBitArray();for(let b=0;b<l;b++)u[y+b]^=_[b]}}clear(){const r=this.bits,s=r.length;for(let l=0;l<s;l++)r[l]=0}setRegion(r,s,l,u){if(s<0||r<0)throw new O("Left and top must be nonnegative");if(u<1||l<1)throw new O("Height and width must be at least 1");const f=r+l,g=s+u;if(g>this.height||f>this.width)throw new O("The region must fit inside the matrix");const y=this.rowSize,_=this.bits;for(let b=s;b<g;b++){const I=b*y;for(let M=r;M<f;M++)_[I+Math.floor(M/32)]|=1<<(M&31)&4294967295}}getRow(r,s){s==null||s.getSize()<this.width?s=new Be(this.width):s.clear();const l=this.rowSize,u=this.bits,f=r*l;for(let g=0;g<l;g++)s.setBulk(g*32,u[f+g]);return s}setRow(r,s){le.arraycopy(s.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),s=this.getHeight();let l=new Be(r),u=new Be(r);for(let f=0,g=Math.floor((s+1)/2);f<g;f++)l=this.getRow(f,l),u=this.getRow(s-1-f,u),l.reverse(),u.reverse(),this.setRow(f,u),this.setRow(s-1-f,l)}getEnclosingRectangle(){const r=this.width,s=this.height,l=this.rowSize,u=this.bits;let f=r,g=s,y=-1,_=-1;for(let b=0;b<s;b++)for(let I=0;I<l;I++){const M=u[b*l+I];if(M!==0){if(b<g&&(g=b),b>_&&(_=b),I*32<f){let L=0;for(;(M<<31-L&4294967295)===0;)L++;I*32+L<f&&(f=I*32+L)}if(I*32+31>y){let L=31;for(;!(M>>>L);)L--;I*32+L>y&&(y=I*32+L)}}}return y<f||_<g?null:Int32Array.from([f,g,y-f+1,_-g+1])}getTopLeftOnBit(){const r=this.rowSize,s=this.bits;let l=0;for(;l<s.length&&s[l]===0;)l++;if(l===s.length)return null;const u=l/r;let f=l%r*32;const g=s[l];let y=0;for(;(g<<31-y&4294967295)===0;)y++;return f+=y,Int32Array.from([f,u])}getBottomRightOnBit(){const r=this.rowSize,s=this.bits;let l=s.length-1;for(;l>=0&&s[l]===0;)l--;if(l<0)return null;const u=Math.floor(l/r);let f=Math.floor(l%r)*32;const g=s[l];let y=31;for(;!(g>>>y);)y--;return f+=y,Int32Array.from([f,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof Qe))return!1;const s=r;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&Le.equals(this.bits,s.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+Le.hashCode(this.bits),r}toString(r="X ",s="  ",l=`
`){return this.buildToString(r,s,l)}buildToString(r,s,l){let u=new G;for(let f=0,g=this.height;f<g;f++){for(let y=0,_=this.width;y<_;y++)u.append(this.get(y,f)?r:s);u.append(l)}return u.toString()}clone(){return new Qe(this.width,this.height,this.rowSize,this.bits.slice())}}class oe extends A{static getNotFoundInstance(){return new oe}}oe.kind="NotFoundException";class ue extends te{constructor(r){super(r),this.luminances=ue.EMPTY,this.buckets=new Int32Array(ue.LUMINANCE_BUCKETS)}getBlackRow(r,s){const l=this.getLuminanceSource(),u=l.getWidth();s==null||s.getSize()<u?s=new Be(u):s.clear(),this.initArrays(u);const f=l.getRow(r,this.luminances),g=this.buckets;for(let _=0;_<u;_++)g[(f[_]&255)>>ue.LUMINANCE_SHIFT]++;const y=ue.estimateBlackPoint(g);if(u<3)for(let _=0;_<u;_++)(f[_]&255)<y&&s.set(_);else{let _=f[0]&255,b=f[1]&255;for(let I=1;I<u-1;I++){const M=f[I+1]&255;(b*4-_-M)/2<y&&s.set(I),_=b,b=M}}return s}getBlackMatrix(){const r=this.getLuminanceSource(),s=r.getWidth(),l=r.getHeight(),u=new Qe(s,l);this.initArrays(s);const f=this.buckets;for(let _=1;_<5;_++){const b=Math.floor(l*_/5),I=r.getRow(b,this.luminances),M=Math.floor(s*4/5);for(let L=Math.floor(s/5);L<M;L++){const H=I[L]&255;f[H>>ue.LUMINANCE_SHIFT]++}}const g=ue.estimateBlackPoint(f),y=r.getMatrix();for(let _=0;_<l;_++){const b=_*s;for(let I=0;I<s;I++)(y[b+I]&255)<g&&u.set(I,_)}return u}createBinarizer(r){return new ue(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const s=this.buckets;for(let l=0;l<ue.LUMINANCE_BUCKETS;l++)s[l]=0}static estimateBlackPoint(r){const s=r.length;let l=0,u=0,f=0;for(let I=0;I<s;I++)r[I]>f&&(u=I,f=r[I]),r[I]>l&&(l=r[I]);let g=0,y=0;for(let I=0;I<s;I++){const M=I-u,L=r[I]*M*M;L>y&&(g=I,y=L)}if(u>g){const I=u;u=g,g=I}if(g-u<=s/16)throw new oe;let _=g-1,b=-1;for(let I=g-1;I>u;I--){const M=I-u,L=M*M*(g-I)*(l-r[I]);L>b&&(_=I,b=L)}return _<<ue.LUMINANCE_SHIFT}}ue.LUMINANCE_BITS=5,ue.LUMINANCE_SHIFT=8-ue.LUMINANCE_BITS,ue.LUMINANCE_BUCKETS=1<<ue.LUMINANCE_BITS,ue.EMPTY=Uint8ClampedArray.from([0]);class Ae extends ue{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),s=r.getWidth(),l=r.getHeight();if(s>=Ae.MINIMUM_DIMENSION&&l>=Ae.MINIMUM_DIMENSION){const u=r.getMatrix();let f=s>>Ae.BLOCK_SIZE_POWER;(s&Ae.BLOCK_SIZE_MASK)!==0&&f++;let g=l>>Ae.BLOCK_SIZE_POWER;(l&Ae.BLOCK_SIZE_MASK)!==0&&g++;const y=Ae.calculateBlackPoints(u,f,g,s,l),_=new Qe(s,l);Ae.calculateThresholdForBlock(u,f,g,s,l,y,_),this.matrix=_}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new Ae(r)}static calculateThresholdForBlock(r,s,l,u,f,g,y){const _=f-Ae.BLOCK_SIZE,b=u-Ae.BLOCK_SIZE;for(let I=0;I<l;I++){let M=I<<Ae.BLOCK_SIZE_POWER;M>_&&(M=_);const L=Ae.cap(I,2,l-3);for(let H=0;H<s;H++){let Q=H<<Ae.BLOCK_SIZE_POWER;Q>b&&(Q=b);const J=Ae.cap(H,2,s-3);let se=0;for(let Ue=-2;Ue<=2;Ue++){const Pe=g[L+Ue];se+=Pe[J-2]+Pe[J-1]+Pe[J]+Pe[J+1]+Pe[J+2]}const Ee=se/25;Ae.thresholdBlock(r,Q,M,Ee,u,y)}}}static cap(r,s,l){return r<s?s:r>l?l:r}static thresholdBlock(r,s,l,u,f,g){for(let y=0,_=l*f+s;y<Ae.BLOCK_SIZE;y++,_+=f)for(let b=0;b<Ae.BLOCK_SIZE;b++)(r[_+b]&255)<=u&&g.set(s+b,l+y)}static calculateBlackPoints(r,s,l,u,f){const g=f-Ae.BLOCK_SIZE,y=u-Ae.BLOCK_SIZE,_=new Array(l);for(let b=0;b<l;b++){_[b]=new Int32Array(s);let I=b<<Ae.BLOCK_SIZE_POWER;I>g&&(I=g);for(let M=0;M<s;M++){let L=M<<Ae.BLOCK_SIZE_POWER;L>y&&(L=y);let H=0,Q=255,J=0;for(let Ee=0,Ue=I*u+L;Ee<Ae.BLOCK_SIZE;Ee++,Ue+=u){for(let Pe=0;Pe<Ae.BLOCK_SIZE;Pe++){const Me=r[Ue+Pe]&255;H+=Me,Me<Q&&(Q=Me),Me>J&&(J=Me)}if(J-Q>Ae.MIN_DYNAMIC_RANGE)for(Ee++,Ue+=u;Ee<Ae.BLOCK_SIZE;Ee++,Ue+=u)for(let Pe=0;Pe<Ae.BLOCK_SIZE;Pe++)H+=r[Ue+Pe]&255}let se=H>>Ae.BLOCK_SIZE_POWER*2;if(J-Q<=Ae.MIN_DYNAMIC_RANGE&&(se=Q/2,b>0&&M>0)){const Ee=(_[b-1][M]+2*_[b][M-1]+_[b-1][M-1])/4;Q<Ee&&(se=Ee)}_[b][M]=se}}return _}}Ae.BLOCK_SIZE_POWER=3,Ae.BLOCK_SIZE=1<<Ae.BLOCK_SIZE_POWER,Ae.BLOCK_SIZE_MASK=Ae.BLOCK_SIZE-1,Ae.MINIMUM_DIMENSION=Ae.BLOCK_SIZE*5,Ae.MIN_DYNAMIC_RANGE=24;class Ye{constructor(r,s){this.width=r,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,s,l,u){throw new Z("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Z("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Z("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let s=new G;for(let l=0;l<this.height;l++){const u=this.getRow(l,r);for(let f=0;f<this.width;f++){const g=u[f]&255;let y;g<64?y="#":g<128?y="+":g<192?y=".":y=" ",s.append(y)}s.append(`
`)}return s.toString()}}class ft extends Ye{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,s){const l=this.delegate.getRow(r,s),u=this.getWidth();for(let f=0;f<u;f++)l[f]=255-(l[f]&255);return l}getMatrix(){const r=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(s);for(let u=0;u<s;u++)l[u]=255-(r[u]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(r,s,l,u){return new ft(this.delegate.crop(r,s,l,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ft(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ft(this.delegate.rotateCounterClockwise45())}}class yt extends Ye{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=yt.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const s=r.getContext("2d").getImageData(0,0,r.width,r.height);return yt.toGrayscaleBuffer(s.data,r.width,r.height)}static toGrayscaleBuffer(r,s,l){const u=new Uint8ClampedArray(s*l);for(let f=0,g=0,y=r.length;f<y;f+=4,g++){let _;if(r[f+3]===0)_=255;else{const I=r[f],M=r[f+1],L=r[f+2];_=306*I+601*M+117*L+512>>10}u[g]=_}return u}getRow(r,s){if(r<0||r>=this.getHeight())throw new O("Requested row is outside the image: "+r);const l=this.getWidth(),u=r*l;return s===null?s=this.buffer.slice(u,u+l):(s.length<l&&(s=new Uint8ClampedArray(l)),s.set(this.buffer.slice(u,u+l))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,s,l,u){return super.crop(r,s,l,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const s=this.getTempCanvasElement(),l=s.getContext("2d"),u=r*yt.DEGREE_TO_RADIANS,f=this.canvas.width,g=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(u))*f+Math.abs(Math.sin(u))*g),_=Math.ceil(Math.abs(Math.sin(u))*f+Math.abs(Math.cos(u))*g);return s.width=y,s.height=_,l.translate(y/2,_/2),l.rotate(u),l.drawImage(this.canvas,f/-2,g/-2),this.buffer=yt.makeBufferFromCanvasImageData(s),this}invert(){return new ft(this)}}yt.DEGREE_TO_RADIANS=Math.PI/180;class q{constructor(r,s,l){this.deviceId=r,this.label=s,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ae=(globalThis||zh||self||window||void 0)&&(globalThis||zh||self||window||void 0).__awaiter||function(D,r,s,l){function u(f){return f instanceof s?f:new s(function(g){g(f)})}return new(s||(s=Promise))(function(f,g){function y(I){try{b(l.next(I))}catch(M){g(M)}}function _(I){try{b(l.throw(I))}catch(M){g(M)}}function b(I){I.done?f(I.value):u(I.value).then(y,_)}b((l=l.apply(D,r||[])).next())})};class re{constructor(r,s=500,l){this.reader=r,this.timeBetweenScansMillis=s,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return ae(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const l of r){const u=l.kind==="video"?"videoinput":l.kind;if(u!=="videoinput")continue;const f=l.deviceId||l.id,g=l.label||`Video device ${s.length+1}`,y=l.groupId,_={deviceId:f,label:g,kind:u,groupId:y};s.push(_)}return s})}getVideoInputDevices(){return ae(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new q(s.deviceId,s.label))})}findDeviceById(r){return ae(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(l=>l.deviceId===r):null})}decodeFromInputVideoDevice(r,s){return ae(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,s)})}decodeOnceFromVideoDevice(r,s){return ae(this,void 0,void 0,function*(){this.reset();let l;r?l={deviceId:{exact:r}}:l={facingMode:"environment"};const u={video:l};return yield this.decodeOnceFromConstraints(u,s)})}decodeOnceFromConstraints(r,s){return ae(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(l,s)})}decodeOnceFromStream(r,s){return ae(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(r,s);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(r,s,l){return ae(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,s,l)})}decodeFromVideoDevice(r,s,l){return ae(this,void 0,void 0,function*(){let u;r?u={deviceId:{exact:r}}:u={facingMode:"environment"};const f={video:u};return yield this.decodeFromConstraints(f,s,l)})}decodeFromConstraints(r,s,l){return ae(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(u,s,l)})}decodeFromStream(r,s,l){return ae(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(r,s);return yield this.decodeContinuously(u,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,s){return ae(this,void 0,void 0,function*(){const l=this.prepareVideoElement(s);return this.addVideoSource(l,r),this.videoElement=l,this.stream=r,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(r){return new Promise((s,l)=>this.playVideoOnLoad(r,()=>s()))}playVideoOnLoad(r,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",s),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return ae(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,s){const l=document.getElementById(r);if(!l)throw new S(`element with id '${r}' not found`);if(l.nodeName.toLowerCase()!==s.toLowerCase())throw new S(`element with id '${r}' must be an ${s} element`);return l}decodeFromImage(r,s){if(!r&&!s)throw new S("either imageElement with a src set or an url must be provided");return s&&!r?this.decodeFromImageUrl(s):this.decodeFromImageElement(r)}decodeFromVideo(r,s){if(!r&&!s)throw new S("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,s,l){if(r===void 0&&s===void 0)throw new S("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrlContinuously(s,l):this.decodeFromVideoElementContinuously(r,l)}decodeFromImageElement(r){if(!r)throw new S("An image element must be provided.");this.reset();const s=this.prepareImageElement(r);this.imageElement=s;let l;return this.isImageLoaded(s)?l=this.decodeOnce(s,!1,!0):l=this._decodeOnLoadImage(s),l}decodeFromVideoElement(r){const s=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(r,s){const l=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(l,s)}_decodeFromVideoElementSetup(r){if(!r)throw new S("A video element must be provided.");this.reset();const s=this.prepareVideoElement(r);return this.videoElement=s,s}decodeFromImageUrl(r){if(!r)throw new S("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const l=this._decodeOnLoadImage(s);return s.src=r,l}decodeFromVideoUrl(r){if(!r)throw new S("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),l=this.decodeFromVideoElement(s);return s.src=r,l}decodeFromVideoUrlContinuously(r,s){if(!r)throw new S("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(l,s);return l.src=r,u}_decodeOnLoadImage(r){return new Promise((s,l)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(s,l),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return ae(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,s){return ae(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,s)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let s;return typeof r>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(s=r),s}prepareVideoElement(r){let s;return!r&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(s=r),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(r,s=!0,l=!0){this._stopAsyncDecode=!1;const u=(f,g)=>{if(this._stopAsyncDecode){g(new oe("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const y=this.decode(r);f(y)}catch(y){const _=s&&y instanceof oe,I=(y instanceof Y||y instanceof F)&&l;if(_||I)return setTimeout(u,this._timeBetweenDecodingAttempts,f,g);g(y)}};return new Promise((f,g)=>u(f,g))}decodeContinuously(r,s){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(r);s(u,null),setTimeout(l,this.timeBetweenScansMillis)}catch(u){s(null,u);const f=u instanceof Y||u instanceof F,g=u instanceof oe;(f||g)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(r){const s=this.createBinaryBitmap(r);return this.decodeBitmap(s)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,s,l){s||(s={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(r,s,l=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const s=this.getCaptureCanvas(r),l=new yt(s),u=new Ae(l);return new B(u)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const s=this.createCaptureCanvas(r);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let l,u;return typeof r<"u"&&(r instanceof HTMLVideoElement?(l=r.videoWidth,u=r.videoHeight):r instanceof HTMLImageElement&&(l=r.naturalWidth||r.width,u=r.naturalHeight||r.height)),s.style.width=l+"px",s.style.height=u+"px",s.width=l,s.height=u,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,s){try{r.srcObject=s}catch{r.src=URL.createObjectURL(s)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class ye{constructor(r,s,l=s==null?0:8*s.length,u,f,g=le.currentTimeMillis()){this.text=r,this.rawBytes=s,this.numBits=l,this.resultPoints=u,this.format=f,this.timestamp=g,this.text=r,this.rawBytes=s,l==null?this.numBits=s==null?0:8*s.length:this.numBits=l,this.resultPoints=u,this.format=f,this.resultMetadata=null,g==null?this.timestamp=le.currentTimeMillis():this.timestamp=g}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,s)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const s=this.resultPoints;if(s===null)this.resultPoints=r;else if(r!==null&&r.length>0){const l=new Array(s.length+r.length);le.arraycopy(s,0,l,0,s.length),le.arraycopy(r,0,l,s.length,r.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ke;(function(D){D[D.AZTEC=0]="AZTEC",D[D.CODABAR=1]="CODABAR",D[D.CODE_39=2]="CODE_39",D[D.CODE_93=3]="CODE_93",D[D.CODE_128=4]="CODE_128",D[D.DATA_MATRIX=5]="DATA_MATRIX",D[D.EAN_8=6]="EAN_8",D[D.EAN_13=7]="EAN_13",D[D.ITF=8]="ITF",D[D.MAXICODE=9]="MAXICODE",D[D.PDF_417=10]="PDF_417",D[D.QR_CODE=11]="QR_CODE",D[D.RSS_14=12]="RSS_14",D[D.RSS_EXPANDED=13]="RSS_EXPANDED",D[D.UPC_A=14]="UPC_A",D[D.UPC_E=15]="UPC_E",D[D.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ke||(ke={}));var we=ke,rt;(function(D){D[D.OTHER=0]="OTHER",D[D.ORIENTATION=1]="ORIENTATION",D[D.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",D[D.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",D[D.ISSUE_NUMBER=4]="ISSUE_NUMBER",D[D.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",D[D.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",D[D.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",D[D.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",D[D.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",D[D.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(rt||(rt={}));var at=rt;class wt{constructor(r,s,l,u,f=-1,g=-1){this.rawBytes=r,this.text=s,this.byteSegments=l,this.ecLevel=u,this.structuredAppendSequenceNumber=f,this.structuredAppendParity=g,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class mn{exp(r){return this.expTable[r]}log(r){if(r===0)throw new O;return this.logTable[r]}static addOrSubtract(r,s){return r^s}}class zt{constructor(r,s){if(s.length===0)throw new O;this.field=r;const l=s.length;if(l>1&&s[0]===0){let u=1;for(;u<l&&s[u]===0;)u++;u===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-u),le.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const s=this.coefficients;let l;if(r===1){l=0;for(let g=0,y=s.length;g!==y;g++){const _=s[g];l=mn.addOrSubtract(l,_)}return l}l=s[0];const u=s.length,f=this.field;for(let g=1;g<u;g++)l=mn.addOrSubtract(f.multiply(r,l),s[g]);return l}addOrSubtract(r){if(!this.field.equals(r.field))throw new O("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,l=r.coefficients;if(s.length>l.length){const g=s;s=l,l=g}let u=new Int32Array(l.length);const f=l.length-s.length;le.arraycopy(l,0,u,0,f);for(let g=f;g<l.length;g++)u[g]=mn.addOrSubtract(s[g-f],l[g]);return new zt(this.field,u)}multiply(r){if(!this.field.equals(r.field))throw new O("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const s=this.coefficients,l=s.length,u=r.coefficients,f=u.length,g=new Int32Array(l+f-1),y=this.field;for(let _=0;_<l;_++){const b=s[_];for(let I=0;I<f;I++)g[_+I]=mn.addOrSubtract(g[_+I],y.multiply(b,u[I]))}return new zt(y,g)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const s=this.coefficients.length,l=this.field,u=new Int32Array(s),f=this.coefficients;for(let g=0;g<s;g++)u[g]=l.multiply(f[g],r);return new zt(l,u)}multiplyByMonomial(r,s){if(r<0)throw new O;if(s===0)return this.field.getZero();const l=this.coefficients,u=l.length,f=new Int32Array(u+r),g=this.field;for(let y=0;y<u;y++)f[y]=g.multiply(l[y],s);return new zt(g,f)}divide(r){if(!this.field.equals(r.field))throw new O("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new O("Divide by 0");const s=this.field;let l=s.getZero(),u=this;const f=r.getCoefficient(r.getDegree()),g=s.inverse(f);for(;u.getDegree()>=r.getDegree()&&!u.isZero();){const y=u.getDegree()-r.getDegree(),_=s.multiply(u.getCoefficient(u.getDegree()),g),b=r.multiplyByMonomial(y,_),I=s.buildMonomial(y,_);l=l.addOrSubtract(I),u=u.addOrSubtract(b)}return[l,u]}toString(){let r="";for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);if(l!==0){if(l<0?(r+=" - ",l=-l):r.length>0&&(r+=" + "),s===0||l!==1){const u=this.field.log(l);u===0?r+="1":u===1?r+="a":(r+="a^",r+=u)}s!==0&&(s===1?r+="x":(r+="x^",r+=s))}}return r}}class zn extends A{}zn.kind="ArithmeticException";class dt extends mn{constructor(r,s,l){super(),this.primitive=r,this.size=s,this.generatorBase=l;const u=new Int32Array(s);let f=1;for(let y=0;y<s;y++)u[y]=f,f*=2,f>=s&&(f^=r,f&=s-1);this.expTable=u;const g=new Int32Array(s);for(let y=0;y<s-1;y++)g[u[y]]=y;this.logTable=g,this.zero=new zt(this,Int32Array.from([0])),this.one=new zt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new O;if(s===0)return this.zero;const l=new Int32Array(r+1);return l[0]=s,new zt(this,l)}inverse(r){if(r===0)throw new zn;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+me.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}dt.AZTEC_DATA_12=new dt(4201,4096,1),dt.AZTEC_DATA_10=new dt(1033,1024,1),dt.AZTEC_DATA_6=new dt(67,64,1),dt.AZTEC_PARAM=new dt(19,16,1),dt.QR_CODE_FIELD_256=new dt(285,256,0),dt.DATA_MATRIX_FIELD_256=new dt(301,256,1),dt.AZTEC_DATA_8=dt.DATA_MATRIX_FIELD_256,dt.MAXICODE_FIELD_64=dt.AZTEC_DATA_6;class wn extends A{}wn.kind="ReedSolomonException";class Nn extends A{}Nn.kind="IllegalStateException";class Kn{constructor(r){this.field=r}decode(r,s){const l=this.field,u=new zt(l,r),f=new Int32Array(s);let g=!0;for(let H=0;H<s;H++){const Q=u.evaluateAt(l.exp(H+l.getGeneratorBase()));f[f.length-1-H]=Q,Q!==0&&(g=!1)}if(g)return;const y=new zt(l,f),_=this.runEuclideanAlgorithm(l.buildMonomial(s,1),y,s),b=_[0],I=_[1],M=this.findErrorLocations(b),L=this.findErrorMagnitudes(I,M);for(let H=0;H<M.length;H++){const Q=r.length-1-l.log(M[H]);if(Q<0)throw new wn("Bad error location");r[Q]=dt.addOrSubtract(r[Q],L[H])}}runEuclideanAlgorithm(r,s,l){if(r.getDegree()<s.getDegree()){const H=r;r=s,s=H}const u=this.field;let f=r,g=s,y=u.getZero(),_=u.getOne();for(;g.getDegree()>=(l/2|0);){let H=f,Q=y;if(f=g,y=_,f.isZero())throw new wn("r_{i-1} was zero");g=H;let J=u.getZero();const se=f.getCoefficient(f.getDegree()),Ee=u.inverse(se);for(;g.getDegree()>=f.getDegree()&&!g.isZero();){const Ue=g.getDegree()-f.getDegree(),Pe=u.multiply(g.getCoefficient(g.getDegree()),Ee);J=J.addOrSubtract(u.buildMonomial(Ue,Pe)),g=g.addOrSubtract(f.multiplyByMonomial(Ue,Pe))}if(_=J.multiply(y).addOrSubtract(Q),g.getDegree()>=f.getDegree())throw new Nn("Division algorithm failed to reduce polynomial?")}const b=_.getCoefficient(0);if(b===0)throw new wn("sigmaTilde(0) was zero");const I=u.inverse(b),M=_.multiplyScalar(I),L=g.multiplyScalar(I);return[M,L]}findErrorLocations(r){const s=r.getDegree();if(s===1)return Int32Array.from([r.getCoefficient(1)]);const l=new Int32Array(s);let u=0;const f=this.field;for(let g=1;g<f.getSize()&&u<s;g++)r.evaluateAt(g)===0&&(l[u]=f.inverse(g),u++);if(u!==s)throw new wn("Error locator degree does not match number of roots");return l}findErrorMagnitudes(r,s){const l=s.length,u=new Int32Array(l),f=this.field;for(let g=0;g<l;g++){const y=f.inverse(s[g]);let _=1;for(let b=0;b<l;b++)if(g!==b){const I=f.multiply(s[b],y),M=(I&1)===0?I|1:I&-2;_=f.multiply(_,M)}u[g]=f.multiply(r.evaluateAt(y),f.inverse(_)),f.getGeneratorBase()!==0&&(u[g]=f.multiply(u[g],y))}return u}}var qt;(function(D){D[D.UPPER=0]="UPPER",D[D.LOWER=1]="LOWER",D[D.MIXED=2]="MIXED",D[D.DIGIT=3]="DIGIT",D[D.PUNCT=4]="PUNCT",D[D.BINARY=5]="BINARY"})(qt||(qt={}));class Pt{decode(r){this.ddata=r;let s=r.getBits(),l=this.extractBits(s),u=this.correctBits(l),f=Pt.convertBoolArrayToByteArray(u),g=Pt.getEncodedData(u),y=new wt(f,g,null,null);return y.setNumBits(u.length),y}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let s=r.length,l=qt.UPPER,u=qt.UPPER,f="",g=0;for(;g<s;)if(u===qt.BINARY){if(s-g<5)break;let y=Pt.readCode(r,g,5);if(g+=5,y===0){if(s-g<11)break;y=Pt.readCode(r,g,11)+31,g+=11}for(let _=0;_<y;_++){if(s-g<8){g=s;break}const b=Pt.readCode(r,g,8);f+=W.castAsNonUtf8Char(b),g+=8}u=l}else{let y=u===qt.DIGIT?4:5;if(s-g<y)break;let _=Pt.readCode(r,g,y);g+=y;let b=Pt.getCharacter(u,_);b.startsWith("CTRL_")?(l=u,u=Pt.getTable(b.charAt(5)),b.charAt(6)==="L"&&(l=u)):(f+=b,u=l)}return f}static getTable(r){switch(r){case"L":return qt.LOWER;case"P":return qt.PUNCT;case"M":return qt.MIXED;case"D":return qt.DIGIT;case"B":return qt.BINARY;case"U":default:return qt.UPPER}}static getCharacter(r,s){switch(r){case qt.UPPER:return Pt.UPPER_TABLE[s];case qt.LOWER:return Pt.LOWER_TABLE[s];case qt.MIXED:return Pt.MIXED_TABLE[s];case qt.PUNCT:return Pt.PUNCT_TABLE[s];case qt.DIGIT:return Pt.DIGIT_TABLE[s];default:throw new Nn("Bad table")}}correctBits(r){let s,l;this.ddata.getNbLayers()<=2?(l=6,s=dt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,s=dt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,s=dt.AZTEC_DATA_10):(l=12,s=dt.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),f=r.length/l;if(f<u)throw new F;let g=r.length%l,y=new Int32Array(f);for(let L=0;L<f;L++,g+=l)y[L]=Pt.readCode(r,g,l);try{new Kn(s).decode(y,f-u)}catch(L){throw new F(L)}let _=(1<<l)-1,b=0;for(let L=0;L<u;L++){let H=y[L];if(H===0||H===_)throw new F;(H===1||H===_-1)&&b++}let I=new Array(u*l-b),M=0;for(let L=0;L<u;L++){let H=y[L];if(H===1||H===_-1)I.fill(H>1,M,M+l-1),M+=l-1;else for(let Q=l-1;Q>=0;--Q)I[M++]=(H&1<<Q)!==0}return I}extractBits(r){let s=this.ddata.isCompact(),l=this.ddata.getNbLayers(),u=(s?11:14)+l*4,f=new Int32Array(u),g=new Array(this.totalBitsInLayer(l,s));if(s)for(let y=0;y<f.length;y++)f[y]=y;else{let y=u+1+2*me.truncDivision(me.truncDivision(u,2)-1,15),_=u/2,b=me.truncDivision(y,2);for(let I=0;I<_;I++){let M=I+me.truncDivision(I,15);f[_-I-1]=b-M-1,f[_+I]=b+M+1}}for(let y=0,_=0;y<l;y++){let b=(l-y)*4+(s?9:12),I=y*2,M=u-1-I;for(let L=0;L<b;L++){let H=L*2;for(let Q=0;Q<2;Q++)g[_+H+Q]=r.get(f[I+Q],f[I+L]),g[_+2*b+H+Q]=r.get(f[I+L],f[M-Q]),g[_+4*b+H+Q]=r.get(f[M-Q],f[M-L]),g[_+6*b+H+Q]=r.get(f[M-L],f[I+Q])}_+=b*8}return g}static readCode(r,s,l){let u=0;for(let f=s;f<s+l;f++)u<<=1,r[f]&&(u|=1);return u}static readByte(r,s){let l=r.length-s;return l>=8?Pt.readCode(r,s,8):Pt.readCode(r,s,l)<<8-l}static convertBoolArrayToByteArray(r){let s=new Uint8Array((r.length+7)/8);for(let l=0;l<s.length;l++)s[l]=Pt.readByte(r,8*l);return s}totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}Pt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Pt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Pt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Pt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Pt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ve{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,s,l,u){const f=r-l,g=s-u;return Math.sqrt(f*f+g*g)}static sum(r){let s=0;for(let l=0,u=r.length;l!==u;l++){const f=r[l];s+=f}return s}}class Et{static floatToIntBits(r){return r}}Et.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Xe{constructor(r,s){this.x=r,this.y=s}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof Xe){const s=r;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*Et.floatToIntBits(this.x)+Et.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const s=this.distance(r[0],r[1]),l=this.distance(r[1],r[2]),u=this.distance(r[0],r[2]);let f,g,y;if(l>=s&&l>=u?(g=r[0],f=r[1],y=r[2]):u>=l&&u>=s?(g=r[1],f=r[0],y=r[2]):(g=r[2],f=r[0],y=r[1]),this.crossProductZ(f,g,y)<0){const _=f;f=y,y=_}r[0]=f,r[1]=g,r[2]=y}static distance(r,s){return Ve.distance(r.x,r.y,s.x,s.y)}static crossProductZ(r,s,l){const u=s.x,f=s.y;return(l.x-u)*(r.y-f)-(l.y-f)*(r.x-u)}}class jr{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Hr extends jr{constructor(r,s,l,u,f){super(r,s),this.compact=l,this.nbDatablocks=u,this.nbLayers=f}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class pn{constructor(r,s,l,u){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),s==null&&(s=pn.INIT_SIZE),l==null&&(l=r.getWidth()/2|0),u==null&&(u=r.getHeight()/2|0);const f=s/2|0;if(this.leftInit=l-f,this.rightInit=l+f,this.upInit=u-f,this.downInit=u+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new oe}detect(){let r=this.leftInit,s=this.rightInit,l=this.upInit,u=this.downInit,f=!1,g=!0,y=!1,_=!1,b=!1,I=!1,M=!1;const L=this.width,H=this.height;for(;g;){g=!1;let Q=!0;for(;(Q||!_)&&s<L;)Q=this.containsBlackPoint(l,u,s,!1),Q?(s++,g=!0,_=!0):_||s++;if(s>=L){f=!0;break}let J=!0;for(;(J||!b)&&u<H;)J=this.containsBlackPoint(r,s,u,!0),J?(u++,g=!0,b=!0):b||u++;if(u>=H){f=!0;break}let se=!0;for(;(se||!I)&&r>=0;)se=this.containsBlackPoint(l,u,r,!1),se?(r--,g=!0,I=!0):I||r--;if(r<0){f=!0;break}let Ee=!0;for(;(Ee||!M)&&l>=0;)Ee=this.containsBlackPoint(r,s,l,!0),Ee?(l--,g=!0,M=!0):M||l--;if(l<0){f=!0;break}g&&(y=!0)}if(!f&&y){const Q=s-r;let J=null;for(let Pe=1;J===null&&Pe<Q;Pe++)J=this.getBlackPointOnSegment(r,u-Pe,r+Pe,u);if(J==null)throw new oe;let se=null;for(let Pe=1;se===null&&Pe<Q;Pe++)se=this.getBlackPointOnSegment(r,l+Pe,r+Pe,l);if(se==null)throw new oe;let Ee=null;for(let Pe=1;Ee===null&&Pe<Q;Pe++)Ee=this.getBlackPointOnSegment(s,l+Pe,s-Pe,l);if(Ee==null)throw new oe;let Ue=null;for(let Pe=1;Ue===null&&Pe<Q;Pe++)Ue=this.getBlackPointOnSegment(s,u-Pe,s-Pe,u);if(Ue==null)throw new oe;return this.centerEdges(Ue,J,Ee,se)}else throw new oe}getBlackPointOnSegment(r,s,l,u){const f=Ve.round(Ve.distance(r,s,l,u)),g=(l-r)/f,y=(u-s)/f,_=this.image;for(let b=0;b<f;b++){const I=Ve.round(r+b*g),M=Ve.round(s+b*y);if(_.get(I,M))return new Xe(I,M)}return null}centerEdges(r,s,l,u){const f=r.getX(),g=r.getY(),y=s.getX(),_=s.getY(),b=l.getX(),I=l.getY(),M=u.getX(),L=u.getY(),H=pn.CORR;return f<this.width/2?[new Xe(M-H,L+H),new Xe(y+H,_+H),new Xe(b-H,I-H),new Xe(f+H,g-H)]:[new Xe(M+H,L+H),new Xe(y+H,_-H),new Xe(b-H,I+H),new Xe(f-H,g-H)]}containsBlackPoint(r,s,l,u){const f=this.image;if(u){for(let g=r;g<=s;g++)if(f.get(g,l))return!0}else for(let g=r;g<=s;g++)if(f.get(l,g))return!0;return!1}}pn.INIT_SIZE=10,pn.CORR=1;class Te{static checkAndNudgePoints(r,s){const l=r.getWidth(),u=r.getHeight();let f=!0;for(let g=0;g<s.length&&f;g+=2){const y=Math.floor(s[g]),_=Math.floor(s[g+1]);if(y<-1||y>l||_<-1||_>u)throw new oe;f=!1,y===-1?(s[g]=0,f=!0):y===l&&(s[g]=l-1,f=!0),_===-1?(s[g+1]=0,f=!0):_===u&&(s[g+1]=u-1,f=!0)}f=!0;for(let g=s.length-2;g>=0&&f;g-=2){const y=Math.floor(s[g]),_=Math.floor(s[g+1]);if(y<-1||y>l||_<-1||_>u)throw new oe;f=!1,y===-1?(s[g]=0,f=!0):y===l&&(s[g]=l-1,f=!0),_===-1?(s[g+1]=0,f=!0):_===u&&(s[g+1]=u-1,f=!0)}}}class De{constructor(r,s,l,u,f,g,y,_,b){this.a11=r,this.a21=s,this.a31=l,this.a12=u,this.a22=f,this.a32=g,this.a13=y,this.a23=_,this.a33=b}static quadrilateralToQuadrilateral(r,s,l,u,f,g,y,_,b,I,M,L,H,Q,J,se){const Ee=De.quadrilateralToSquare(r,s,l,u,f,g,y,_);return De.squareToQuadrilateral(b,I,M,L,H,Q,J,se).times(Ee)}transformPoints(r){const s=r.length,l=this.a11,u=this.a12,f=this.a13,g=this.a21,y=this.a22,_=this.a23,b=this.a31,I=this.a32,M=this.a33;for(let L=0;L<s;L+=2){const H=r[L],Q=r[L+1],J=f*H+_*Q+M;r[L]=(l*H+g*Q+b)/J,r[L+1]=(u*H+y*Q+I)/J}}transformPointsWithValues(r,s){const l=this.a11,u=this.a12,f=this.a13,g=this.a21,y=this.a22,_=this.a23,b=this.a31,I=this.a32,M=this.a33,L=r.length;for(let H=0;H<L;H++){const Q=r[H],J=s[H],se=f*Q+_*J+M;r[H]=(l*Q+g*J+b)/se,s[H]=(u*Q+y*J+I)/se}}static squareToQuadrilateral(r,s,l,u,f,g,y,_){const b=r-l+f-y,I=s-u+g-_;if(b===0&&I===0)return new De(l-r,f-l,r,u-s,g-u,s,0,0,1);{const M=l-f,L=y-f,H=u-g,Q=_-g,J=M*Q-L*H,se=(b*Q-L*I)/J,Ee=(M*I-b*H)/J;return new De(l-r+se*l,y-r+Ee*y,r,u-s+se*u,_-s+Ee*_,s,se,Ee,1)}}static quadrilateralToSquare(r,s,l,u,f,g,y,_){return De.squareToQuadrilateral(r,s,l,u,f,g,y,_).buildAdjoint()}buildAdjoint(){return new De(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new De(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class He extends Te{sampleGrid(r,s,l,u,f,g,y,_,b,I,M,L,H,Q,J,se,Ee,Ue,Pe){const Me=De.quadrilateralToQuadrilateral(u,f,g,y,_,b,I,M,L,H,Q,J,se,Ee,Ue,Pe);return this.sampleGridWithTransform(r,s,l,Me)}sampleGridWithTransform(r,s,l,u){if(s<=0||l<=0)throw new oe;const f=new Qe(s,l),g=new Float32Array(2*s);for(let y=0;y<l;y++){const _=g.length,b=y+.5;for(let I=0;I<_;I+=2)g[I]=I/2+.5,g[I+1]=b;u.transformPoints(g),Te.checkAndNudgePoints(r,g);try{for(let I=0;I<_;I+=2)r.get(Math.floor(g[I]),Math.floor(g[I+1]))&&f.set(I/2,y)}catch{throw new oe}}return f}}class Je{static setGridSampler(r){Je.gridSampler=r}static getInstance(){return Je.gridSampler}}Je.gridSampler=new He;class $e{constructor(r,s){this.x=r,this.y=s}toResultPoint(){return new Xe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class On{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let s=this.getMatrixCenter(),l=this.getBullsEyeCorners(s);if(r){let g=l[0];l[0]=l[2],l[2]=g}this.extractParameters(l);let u=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),f=this.getMatrixCornerPoints(l);return new Hr(u,f,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new oe;let s=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(r[0],r[1],s),this.sampleLine(r[1],r[2],s),this.sampleLine(r[2],r[3],s),this.sampleLine(r[3],r[0],s)]);this.shift=this.getRotation(l,s);let u=0;for(let g=0;g<4;g++){let y=l[(this.shift+g)%4];this.compact?(u<<=7,u+=y>>1&127):(u<<=10,u+=(y>>2&992)+(y>>1&31))}let f=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(f>>6)+1,this.nbDataBlocks=(f&63)+1):(this.nbLayers=(f>>11)+1,this.nbDataBlocks=(f&2047)+1)}getRotation(r,s){let l=0;r.forEach((u,f,g)=>{let y=(u>>s-2<<1)+(u&1);l=(l<<3)+y}),l=((l&1)<<11)+(l>>1);for(let u=0;u<4;u++)if(me.bitCount(l^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new oe}getCorrectedParameterData(r,s){let l,u;s?(l=7,u=2):(l=10,u=4);let f=l-u,g=new Int32Array(l);for(let _=l-1;_>=0;--_)g[_]=r&15,r>>=4;try{new Kn(dt.AZTEC_PARAM).decode(g,f)}catch{throw new oe}let y=0;for(let _=0;_<u;_++)y=(y<<4)+g[_];return y}getBullsEyeCorners(r){let s=r,l=r,u=r,f=r,g=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let M=this.getFirstDifferent(s,g,1,-1),L=this.getFirstDifferent(l,g,1,1),H=this.getFirstDifferent(u,g,-1,1),Q=this.getFirstDifferent(f,g,-1,-1);if(this.nbCenterLayers>2){let J=this.distancePoint(Q,M)*this.nbCenterLayers/(this.distancePoint(f,s)*(this.nbCenterLayers+2));if(J<.75||J>1.25||!this.isWhiteOrBlackRectangle(M,L,H,Q))break}s=M,l=L,u=H,f=Q,g=!g}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new oe;this.compact=this.nbCenterLayers===5;let y=new Xe(s.getX()+.5,s.getY()-.5),_=new Xe(l.getX()+.5,l.getY()+.5),b=new Xe(u.getX()-.5,u.getY()+.5),I=new Xe(f.getX()-.5,f.getY()-.5);return this.expandSquare([y,_,b,I],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,s,l,u;try{let y=new pn(this.image).detect();r=y[0],s=y[1],l=y[2],u=y[3]}catch{let _=this.image.getWidth()/2,b=this.image.getHeight()/2;r=this.getFirstDifferent(new $e(_+7,b-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new $e(_+7,b+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new $e(_-7,b+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new $e(_-7,b-7),!1,-1,-1).toResultPoint()}let f=Ve.round((r.getX()+u.getX()+s.getX()+l.getX())/4),g=Ve.round((r.getY()+u.getY()+s.getY()+l.getY())/4);try{let y=new pn(this.image,15,f,g).detect();r=y[0],s=y[1],l=y[2],u=y[3]}catch{r=this.getFirstDifferent(new $e(f+7,g-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new $e(f+7,g+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new $e(f-7,g+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new $e(f-7,g-7),!1,-1,-1).toResultPoint()}return f=Ve.round((r.getX()+u.getX()+s.getX()+l.getX())/4),g=Ve.round((r.getY()+u.getY()+s.getY()+l.getY())/4),new $e(f,g)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,s,l,u,f){let g=Je.getInstance(),y=this.getDimension(),_=y/2-this.nbCenterLayers,b=y/2+this.nbCenterLayers;return g.sampleGrid(r,y,y,_,_,b,_,b,b,_,b,s.getX(),s.getY(),l.getX(),l.getY(),u.getX(),u.getY(),f.getX(),f.getY())}sampleLine(r,s,l){let u=0,f=this.distanceResultPoint(r,s),g=f/l,y=r.getX(),_=r.getY(),b=g*(s.getX()-r.getX())/f,I=g*(s.getY()-r.getY())/f;for(let M=0;M<l;M++)this.image.get(Ve.round(y+M*b),Ve.round(_+M*I))&&(u|=1<<l-M-1);return u}isWhiteOrBlackRectangle(r,s,l,u){let f=3;r=new $e(r.getX()-f,r.getY()+f),s=new $e(s.getX()-f,s.getY()-f),l=new $e(l.getX()+f,l.getY()-f),u=new $e(u.getX()+f,u.getY()+f);let g=this.getColor(u,r);if(g===0)return!1;let y=this.getColor(r,s);return y!==g||(y=this.getColor(s,l),y!==g)?!1:(y=this.getColor(l,u),y===g)}getColor(r,s){let l=this.distancePoint(r,s),u=(s.getX()-r.getX())/l,f=(s.getY()-r.getY())/l,g=0,y=r.getX(),_=r.getY(),b=this.image.get(r.getX(),r.getY()),I=Math.ceil(l);for(let L=0;L<I;L++)y+=u,_+=f,this.image.get(Ve.round(y),Ve.round(_))!==b&&g++;let M=g/l;return M>.1&&M<.9?0:M<=.1===b?1:-1}getFirstDifferent(r,s,l,u){let f=r.getX()+l,g=r.getY()+u;for(;this.isValid(f,g)&&this.image.get(f,g)===s;)f+=l,g+=u;for(f-=l,g-=u;this.isValid(f,g)&&this.image.get(f,g)===s;)f+=l;for(f-=l;this.isValid(f,g)&&this.image.get(f,g)===s;)g+=u;return g-=u,new $e(f,g)}expandSquare(r,s,l){let u=l/(2*s),f=r[0].getX()-r[2].getX(),g=r[0].getY()-r[2].getY(),y=(r[0].getX()+r[2].getX())/2,_=(r[0].getY()+r[2].getY())/2,b=new Xe(y+u*f,_+u*g),I=new Xe(y-u*f,_-u*g);f=r[1].getX()-r[3].getX(),g=r[1].getY()-r[3].getY(),y=(r[1].getX()+r[3].getX())/2,_=(r[1].getY()+r[3].getY())/2;let M=new Xe(y+u*f,_+u*g),L=new Xe(y-u*f,_-u*g);return[b,M,I,L]}isValid(r,s){return r>=0&&r<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(r){let s=Ve.round(r.getX()),l=Ve.round(r.getY());return this.isValid(s,l)}distancePoint(r,s){return Ve.distance(r.getX(),r.getY(),s.getX(),s.getY())}distanceResultPoint(r,s){return Ve.distance(r.getX(),r.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(me.truncDivision(this.nbLayers-4,8)+1)+15}}class tt{decode(r,s=null){let l=null,u=new On(r.getBlackMatrix()),f=null,g=null;try{let I=u.detectMirror(!1);f=I.getPoints(),this.reportFoundResultPoints(s,f),g=new Pt().decode(I)}catch(I){l=I}if(g==null)try{let I=u.detectMirror(!0);f=I.getPoints(),this.reportFoundResultPoints(s,f),g=new Pt().decode(I)}catch(I){throw l??I}let y=new ye(g.getText(),g.getRawBytes(),g.getNumBits(),f,we.AZTEC,le.currentTimeMillis()),_=g.getByteSegments();_!=null&&y.putMetadata(at.BYTE_SEGMENTS,_);let b=g.getECLevel();return b!=null&&y.putMetadata(at.ERROR_CORRECTION_LEVEL,b),y}reportFoundResultPoints(r,s){if(r!=null){let l=r.get(je.NEED_RESULT_POINT_CALLBACK);l!=null&&s.forEach((u,f,g)=>{l.foundPossibleResultPoint(u)})}}reset(){}}class Xt extends re{constructor(r=500){super(new tt,r)}}class Ze{decode(r,s){try{return this.doDecode(r,s)}catch{if(s&&s.get(je.TRY_HARDER)===!0&&r.isRotateSupported()){const f=r.rotateCounterClockwise(),g=this.doDecode(f,s),y=g.getResultMetadata();let _=270;y!==null&&y.get(at.ORIENTATION)===!0&&(_=_+y.get(at.ORIENTATION)%360),g.putMetadata(at.ORIENTATION,_);const b=g.getResultPoints();if(b!==null){const I=f.getHeight();for(let M=0;M<b.length;M++)b[M]=new Xe(I-b[M].getY()-1,b[M].getX())}return g}else throw new oe}}reset(){}doDecode(r,s){const l=r.getWidth(),u=r.getHeight();let f=new Be(l);const g=s&&s.get(je.TRY_HARDER)===!0,y=Math.max(1,u>>(g?8:5));let _;g?_=u:_=15;const b=Math.trunc(u/2);for(let I=0;I<_;I++){const M=Math.trunc((I+1)/2),L=(I&1)===0,H=b+y*(L?M:-M);if(H<0||H>=u)break;try{f=r.getBlackRow(H,f)}catch{continue}for(let Q=0;Q<2;Q++){if(Q===1&&(f.reverse(),s&&s.get(je.NEED_RESULT_POINT_CALLBACK)===!0)){const J=new Map;s.forEach((se,Ee)=>J.set(Ee,se)),J.delete(je.NEED_RESULT_POINT_CALLBACK),s=J}try{const J=this.decodeRow(H,f,s);if(Q===1){J.putMetadata(at.ORIENTATION,180);const se=J.getResultPoints();se!==null&&(se[0]=new Xe(l-se[0].getX()-1,se[0].getY()),se[1]=new Xe(l-se[1].getX()-1,se[1].getY()))}return J}catch{}}}throw new oe}static recordPattern(r,s,l){const u=l.length;for(let b=0;b<u;b++)l[b]=0;const f=r.getSize();if(s>=f)throw new oe;let g=!r.get(s),y=0,_=s;for(;_<f;){if(r.get(_)!==g)l[y]++;else{if(++y===u)break;l[y]=1,g=!g}_++}if(!(y===u||y===u-1&&_===f))throw new oe}static recordPatternInReverse(r,s,l){let u=l.length,f=r.get(s);for(;s>0&&u>=0;)r.get(--s)!==f&&(u--,f=!f);if(u>=0)throw new oe;Ze.recordPattern(r,s+1,l)}static patternMatchVariance(r,s,l){const u=r.length;let f=0,g=0;for(let b=0;b<u;b++)f+=r[b],g+=s[b];if(f<g)return Number.POSITIVE_INFINITY;const y=f/g;l*=y;let _=0;for(let b=0;b<u;b++){const I=r[b],M=s[b]*y,L=I>M?I-M:M-I;if(L>l)return Number.POSITIVE_INFINITY;_+=L}return _/f}}class ve extends Ze{static findStartPattern(r){const s=r.getSize(),l=r.getNextSet(0);let u=0,f=Int32Array.from([0,0,0,0,0,0]),g=l,y=!1;const _=6;for(let b=l;b<s;b++)if(r.get(b)!==y)f[u]++;else{if(u===_-1){let I=ve.MAX_AVG_VARIANCE,M=-1;for(let L=ve.CODE_START_A;L<=ve.CODE_START_C;L++){const H=Ze.patternMatchVariance(f,ve.CODE_PATTERNS[L],ve.MAX_INDIVIDUAL_VARIANCE);H<I&&(I=H,M=L)}if(M>=0&&r.isRange(Math.max(0,g-(b-g)/2),g,!1))return Int32Array.from([g,b,M]);g+=f[0]+f[1],f=f.slice(2,f.length-1),f[u-1]=0,f[u]=0,u--}else u++;f[u]=1,y=!y}throw new oe}static decodeCode(r,s,l){Ze.recordPattern(r,l,s);let u=ve.MAX_AVG_VARIANCE,f=-1;for(let g=0;g<ve.CODE_PATTERNS.length;g++){const y=ve.CODE_PATTERNS[g],_=this.patternMatchVariance(s,y,ve.MAX_INDIVIDUAL_VARIANCE);_<u&&(u=_,f=g)}if(f>=0)return f;throw new oe}decodeRow(r,s,l){const u=l&&l.get(je.ASSUME_GS1)===!0,f=ve.findStartPattern(s),g=f[2];let y=0;const _=new Uint8Array(20);_[y++]=g;let b;switch(g){case ve.CODE_START_A:b=ve.CODE_CODE_A;break;case ve.CODE_START_B:b=ve.CODE_CODE_B;break;case ve.CODE_START_C:b=ve.CODE_CODE_C;break;default:throw new F}let I=!1,M=!1,L="",H=f[0],Q=f[1];const J=Int32Array.from([0,0,0,0,0,0]);let se=0,Ee=0,Ue=g,Pe=0,Me=!0,Gt=!1,Nt=!1;for(;!I;){const ra=M;switch(M=!1,se=Ee,Ee=ve.decodeCode(s,J,Q),_[y++]=Ee,Ee!==ve.CODE_STOP&&(Me=!0),Ee!==ve.CODE_STOP&&(Pe++,Ue+=Pe*Ee),H=Q,Q+=J.reduce((Vu,mc)=>Vu+mc,0),Ee){case ve.CODE_START_A:case ve.CODE_START_B:case ve.CODE_START_C:throw new F}switch(b){case ve.CODE_CODE_A:if(Ee<64)Nt===Gt?L+=String.fromCharCode(32+Ee):L+=String.fromCharCode(32+Ee+128),Nt=!1;else if(Ee<96)Nt===Gt?L+=String.fromCharCode(Ee-64):L+=String.fromCharCode(Ee+64),Nt=!1;else switch(Ee!==ve.CODE_STOP&&(Me=!1),Ee){case ve.CODE_FNC_1:u&&(L.length===0?L+="]C1":L+="");break;case ve.CODE_FNC_2:case ve.CODE_FNC_3:break;case ve.CODE_FNC_4_A:!Gt&&Nt?(Gt=!0,Nt=!1):Gt&&Nt?(Gt=!1,Nt=!1):Nt=!0;break;case ve.CODE_SHIFT:M=!0,b=ve.CODE_CODE_B;break;case ve.CODE_CODE_B:b=ve.CODE_CODE_B;break;case ve.CODE_CODE_C:b=ve.CODE_CODE_C;break;case ve.CODE_STOP:I=!0;break}break;case ve.CODE_CODE_B:if(Ee<96)Nt===Gt?L+=String.fromCharCode(32+Ee):L+=String.fromCharCode(32+Ee+128),Nt=!1;else switch(Ee!==ve.CODE_STOP&&(Me=!1),Ee){case ve.CODE_FNC_1:u&&(L.length===0?L+="]C1":L+="");break;case ve.CODE_FNC_2:case ve.CODE_FNC_3:break;case ve.CODE_FNC_4_B:!Gt&&Nt?(Gt=!0,Nt=!1):Gt&&Nt?(Gt=!1,Nt=!1):Nt=!0;break;case ve.CODE_SHIFT:M=!0,b=ve.CODE_CODE_A;break;case ve.CODE_CODE_A:b=ve.CODE_CODE_A;break;case ve.CODE_CODE_C:b=ve.CODE_CODE_C;break;case ve.CODE_STOP:I=!0;break}break;case ve.CODE_CODE_C:if(Ee<100)Ee<10&&(L+="0"),L+=Ee;else switch(Ee!==ve.CODE_STOP&&(Me=!1),Ee){case ve.CODE_FNC_1:u&&(L.length===0?L+="]C1":L+="");break;case ve.CODE_CODE_A:b=ve.CODE_CODE_A;break;case ve.CODE_CODE_B:b=ve.CODE_CODE_B;break;case ve.CODE_STOP:I=!0;break}break}ra&&(b=b===ve.CODE_CODE_A?ve.CODE_CODE_B:ve.CODE_CODE_A)}const ur=Q-H;if(Q=s.getNextUnset(Q),!s.isRange(Q,Math.min(s.getSize(),Q+(Q-H)/2),!1))throw new oe;if(Ue-=Pe*se,Ue%103!==se)throw new Y;const Ni=L.length;if(Ni===0)throw new oe;Ni>0&&Me&&(b===ve.CODE_CODE_C?L=L.substring(0,Ni-2):L=L.substring(0,Ni-1));const Wr=(f[1]+f[0])/2,vn=H+ur/2,kr=_.length,Ai=new Uint8Array(kr);for(let ra=0;ra<kr;ra++)Ai[ra]=_[ra];const ka=[new Xe(Wr,r),new Xe(vn,r)];return new ye(L,Ai,0,ka,we.CODE_128,new Date().getTime())}}ve.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ve.MAX_AVG_VARIANCE=.25,ve.MAX_INDIVIDUAL_VARIANCE=.7,ve.CODE_SHIFT=98,ve.CODE_CODE_C=99,ve.CODE_CODE_B=100,ve.CODE_CODE_A=101,ve.CODE_FNC_1=102,ve.CODE_FNC_2=97,ve.CODE_FNC_3=96,ve.CODE_FNC_4_A=101,ve.CODE_FNC_4_B=100,ve.CODE_START_A=103,ve.CODE_START_B=104,ve.CODE_START_C=105,ve.CODE_STOP=106;class vt extends Ze{constructor(r=!1,s=!1){super(),this.usingCheckDigit=r,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,s,l){let u=this.counters;u.fill(0),this.decodeRowResult="";let f=vt.findAsteriskPattern(s,u),g=s.getNextSet(f[1]),y=s.getSize(),_,b;do{vt.recordPattern(s,g,u);let J=vt.toNarrowWidePattern(u);if(J<0)throw new oe;_=vt.patternToChar(J),this.decodeRowResult+=_,b=g;for(let se of u)g+=se;g=s.getNextSet(g)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let I=0;for(let J of u)I+=J;let M=g-b-I;if(g!==y&&M*2<I)throw new oe;if(this.usingCheckDigit){let J=this.decodeRowResult.length-1,se=0;for(let Ee=0;Ee<J;Ee++)se+=vt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Ee));if(this.decodeRowResult.charAt(J)!==vt.ALPHABET_STRING.charAt(se%43))throw new Y;this.decodeRowResult=this.decodeRowResult.substring(0,J)}if(this.decodeRowResult.length===0)throw new oe;let L;this.extendedMode?L=vt.decodeExtended(this.decodeRowResult):L=this.decodeRowResult;let H=(f[1]+f[0])/2,Q=b+I/2;return new ye(L,null,0,[new Xe(H,r),new Xe(Q,r)],we.CODE_39,new Date().getTime())}static findAsteriskPattern(r,s){let l=r.getSize(),u=r.getNextSet(0),f=0,g=u,y=!1,_=s.length;for(let b=u;b<l;b++)if(r.get(b)!==y)s[f]++;else{if(f===_-1){if(this.toNarrowWidePattern(s)===vt.ASTERISK_ENCODING&&r.isRange(Math.max(0,g-Math.floor((b-g)/2)),g,!1))return[g,b];g+=s[0]+s[1],s.copyWithin(0,2,2+f-1),s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,y=!y}throw new oe}static toNarrowWidePattern(r){let s=r.length,l=0,u;do{let f=2147483647;for(let _ of r)_<f&&_>l&&(f=_);l=f,u=0;let g=0,y=0;for(let _=0;_<s;_++){let b=r[_];b>l&&(y|=1<<s-1-_,u++,g+=b)}if(u===3){for(let _=0;_<s&&u>0;_++){let b=r[_];if(b>l&&(u--,b*2>=g))return-1}return y}}while(u>3);return-1}static patternToChar(r){for(let s=0;s<vt.CHARACTER_ENCODINGS.length;s++)if(vt.CHARACTER_ENCODINGS[s]===r)return vt.ALPHABET_STRING.charAt(s);if(r===vt.ASTERISK_ENCODING)return"*";throw new oe}static decodeExtended(r){let s=r.length,l="";for(let u=0;u<s;u++){let f=r.charAt(u);if(f==="+"||f==="$"||f==="%"||f==="/"){let g=r.charAt(u+1),y="\0";switch(f){case"+":if(g>="A"&&g<="Z")y=String.fromCharCode(g.charCodeAt(0)+32);else throw new F;break;case"$":if(g>="A"&&g<="Z")y=String.fromCharCode(g.charCodeAt(0)-64);else throw new F;break;case"%":if(g>="A"&&g<="E")y=String.fromCharCode(g.charCodeAt(0)-38);else if(g>="F"&&g<="J")y=String.fromCharCode(g.charCodeAt(0)-11);else if(g>="K"&&g<="O")y=String.fromCharCode(g.charCodeAt(0)+16);else if(g>="P"&&g<="T")y=String.fromCharCode(g.charCodeAt(0)+43);else if(g==="U")y="\0";else if(g==="V")y="@";else if(g==="W")y="`";else if(g==="X"||g==="Y"||g==="Z")y="";else throw new F;break;case"/":if(g>="A"&&g<="O")y=String.fromCharCode(g.charCodeAt(0)-32);else if(g==="Z")y=":";else throw new F;break}l+=y,u++}else l+=f}return l}}vt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",vt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],vt.ASTERISK_ENCODING=148;class lt extends Ze{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,s,l){let u=this.decodeStart(s),f=this.decodeEnd(s),g=new G;lt.decodeMiddle(s,u[1],f[0],g);let y=g.toString(),_=null;l!=null&&(_=l.get(je.ALLOWED_LENGTHS)),_==null&&(_=lt.DEFAULT_ALLOWED_LENGTHS);let b=y.length,I=!1,M=0;for(let Q of _){if(b===Q){I=!0;break}Q>M&&(M=Q)}if(!I&&b>M&&(I=!0),!I)throw new F;const L=[new Xe(u[1],r),new Xe(f[0],r)];return new ye(y,null,0,L,we.ITF,new Date().getTime())}static decodeMiddle(r,s,l,u){let f=new Int32Array(10),g=new Int32Array(5),y=new Int32Array(5);for(f.fill(0),g.fill(0),y.fill(0);s<l;){Ze.recordPattern(r,s,f);for(let b=0;b<5;b++){let I=2*b;g[b]=f[I],y[b]=f[I+1]}let _=lt.decodeDigit(g);u.append(_.toString()),_=this.decodeDigit(y),u.append(_.toString()),f.forEach(function(b){s+=b})}}decodeStart(r){let s=lt.skipWhiteSpace(r),l=lt.findGuardPattern(r,s,lt.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(r,l[0]),l}validateQuietZone(r,s){let l=this.narrowLineWidth*10;l=l<s?l:s;for(let u=s-1;l>0&&u>=0&&!r.get(u);u--)l--;if(l!==0)throw new oe}static skipWhiteSpace(r){const s=r.getSize(),l=r.getNextSet(0);if(l===s)throw new oe;return l}decodeEnd(r){r.reverse();try{let s=lt.skipWhiteSpace(r),l;try{l=lt.findGuardPattern(r,s,lt.END_PATTERN_REVERSED[0])}catch(f){f instanceof oe&&(l=lt.findGuardPattern(r,s,lt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,l[0]);let u=l[0];return l[0]=r.getSize()-l[1],l[1]=r.getSize()-u,l}finally{r.reverse()}}static findGuardPattern(r,s,l){let u=l.length,f=new Int32Array(u),g=r.getSize(),y=!1,_=0,b=s;f.fill(0);for(let I=s;I<g;I++)if(r.get(I)!==y)f[_]++;else{if(_===u-1){if(Ze.patternMatchVariance(f,l,lt.MAX_INDIVIDUAL_VARIANCE)<lt.MAX_AVG_VARIANCE)return[b,I];b+=f[0]+f[1],le.arraycopy(f,2,f,0,_-1),f[_-1]=0,f[_]=0,_--}else _++;f[_]=1,y=!y}throw new oe}static decodeDigit(r){let s=lt.MAX_AVG_VARIANCE,l=-1,u=lt.PATTERNS.length;for(let f=0;f<u;f++){let g=lt.PATTERNS[f],y=Ze.patternMatchVariance(r,g,lt.MAX_INDIVIDUAL_VARIANCE);y<s?(s=y,l=f):y===s&&(l=-1)}if(l>=0)return l%10;throw new oe}}lt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],lt.MAX_AVG_VARIANCE=.38,lt.MAX_INDIVIDUAL_VARIANCE=.5,lt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],lt.START_PATTERN=Int32Array.from([1,1,1,1]),lt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Vt extends Ze{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let s=!1,l,u=0,f=Int32Array.from([0,0,0]);for(;!s;){f=Int32Array.from([0,0,0]),l=Vt.findGuardPattern(r,u,!1,this.START_END_PATTERN,f);let g=l[0];u=l[1];let y=g-(u-g);y>=0&&(s=r.isRange(y,g,!1))}return l}static checkChecksum(r){return Vt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let l=parseInt(r.charAt(s-1),10);return Vt.getStandardUPCEANChecksum(r.substring(0,s-1))===l}static getStandardUPCEANChecksum(r){let s=r.length,l=0;for(let u=s-1;u>=0;u-=2){let f=r.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new F;l+=f}l*=3;for(let u=s-2;u>=0;u-=2){let f=r.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new F;l+=f}return(1e3-l)%10}static decodeEnd(r,s){return Vt.findGuardPattern(r,s,!1,Vt.START_END_PATTERN,new Int32Array(Vt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,s,l,u){return this.findGuardPattern(r,s,l,u,new Int32Array(u.length))}static findGuardPattern(r,s,l,u,f){let g=r.getSize();s=l?r.getNextUnset(s):r.getNextSet(s);let y=0,_=s,b=u.length,I=l;for(let M=s;M<g;M++)if(r.get(M)!==I)f[y]++;else{if(y===b-1){if(Ze.patternMatchVariance(f,u,Vt.MAX_INDIVIDUAL_VARIANCE)<Vt.MAX_AVG_VARIANCE)return Int32Array.from([_,M]);_+=f[0]+f[1];let L=f.slice(2,f.length-1);for(let H=0;H<y-1;H++)f[H]=L[H];f[y-1]=0,f[y]=0,y--}else y++;f[y]=1,I=!I}throw new oe}static decodeDigit(r,s,l,u){this.recordPattern(r,l,s);let f=this.MAX_AVG_VARIANCE,g=-1,y=u.length;for(let _=0;_<y;_++){let b=u[_],I=Ze.patternMatchVariance(s,b,Vt.MAX_INDIVIDUAL_VARIANCE);I<f&&(f=I,g=_)}if(g>=0)return g;throw new oe}}Vt.MAX_AVG_VARIANCE=.48,Vt.MAX_INDIVIDUAL_VARIANCE=.7,Vt.START_END_PATTERN=Int32Array.from([1,1,1]),Vt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Vt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Vt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class jn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,l){let u=this.decodeRowStringBuffer,f=this.decodeMiddle(s,l,u),g=u.toString(),y=jn.parseExtensionString(g),_=[new Xe((l[0]+l[1])/2,r),new Xe(f,r)],b=new ye(g,null,0,_,we.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&b.putAllMetadata(y),b}decodeMiddle(r,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=r.getSize(),g=s[1],y=0;for(let b=0;b<5&&g<f;b++){let I=Vt.decodeDigit(r,u,g,Vt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+I%10);for(let M of u)g+=M;I>=10&&(y|=1<<4-b),b!==4&&(g=r.getNextSet(g),g=r.getNextUnset(g))}if(l.length!==5)throw new oe;let _=this.determineCheckDigit(y);if(jn.extensionChecksum(l.toString())!==_)throw new oe;return g}static extensionChecksum(r){let s=r.length,l=0;for(let u=s-2;u>=0;u-=2)l+=r.charAt(u).charCodeAt(0)-48;l*=3;for(let u=s-1;u>=0;u-=2)l+=r.charAt(u).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(r){for(let s=0;s<10;s++)if(r===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new oe}static parseExtensionString(r){if(r.length!==5)return null;let s=jn.parseExtension5String(r);return s==null?null:new Map([[at.SUGGESTED_PRICE,s]])}static parseExtension5String(r){let s;switch(r.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let l=parseInt(r.substring(1)),u=(l/100).toString(),f=l%100,g=f<10?"0"+f:f.toString();return s+u+"."+g}}class ni{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,l){let u=this.decodeRowStringBuffer,f=this.decodeMiddle(s,l,u),g=u.toString(),y=ni.parseExtensionString(g),_=[new Xe((l[0]+l[1])/2,r),new Xe(f,r)],b=new ye(g,null,0,_,we.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&b.putAllMetadata(y),b}decodeMiddle(r,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=r.getSize(),g=s[1],y=0;for(let _=0;_<2&&g<f;_++){let b=Vt.decodeDigit(r,u,g,Vt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+b%10);for(let I of u)g+=I;b>=10&&(y|=1<<1-_),_!==1&&(g=r.getNextSet(g),g=r.getNextUnset(g))}if(l.length!==2)throw new oe;if(parseInt(l.toString())%4!==y)throw new oe;return g}static parseExtensionString(r){return r.length!==2?null:new Map([[at.ISSUE_NUMBER,parseInt(r)]])}}class pr{static decodeRow(r,s,l){let u=Vt.findGuardPattern(s,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new jn().decodeRow(r,s,u)}catch{return new ni().decodeRow(r,s,u)}}}pr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class It extends Vt{constructor(){super(),this.decodeRowStringBuffer="",It.L_AND_G_PATTERNS=It.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let s=It.L_PATTERNS[r-10],l=new Int32Array(s.length);for(let u=0;u<s.length;u++)l[u]=s[s.length-u-1];It.L_AND_G_PATTERNS[r]=l}}decodeRow(r,s,l){let u=It.findStartGuardPattern(s),f=l==null?null:l.get(je.NEED_RESULT_POINT_CALLBACK);if(f!=null){const Me=new Xe((u[0]+u[1])/2,r);f.foundPossibleResultPoint(Me)}let g=this.decodeMiddle(s,u,this.decodeRowStringBuffer),y=g.rowOffset,_=g.resultString;if(f!=null){const Me=new Xe(y,r);f.foundPossibleResultPoint(Me)}let b=this.decodeEnd(s,y);if(f!=null){const Me=new Xe((b[0]+b[1])/2,r);f.foundPossibleResultPoint(Me)}let I=b[1],M=I+(I-b[0]);if(M>=s.getSize()||!s.isRange(I,M,!1))throw new oe;let L=_.toString();if(L.length<8)throw new F;if(!It.checkChecksum(L))throw new Y;let H=(u[1]+u[0])/2,Q=(b[1]+b[0])/2,J=this.getBarcodeFormat(),se=[new Xe(H,r),new Xe(Q,r)],Ee=new ye(L,null,0,se,J,new Date().getTime()),Ue=0;try{let Me=pr.decodeRow(r,s,b[1]);Ee.putMetadata(at.UPC_EAN_EXTENSION,Me.getText()),Ee.putAllMetadata(Me.getResultMetadata()),Ee.addResultPoints(Me.getResultPoints()),Ue=Me.getText().length}catch{}let Pe=l==null?null:l.get(je.ALLOWED_EAN_EXTENSIONS);if(Pe!=null){let Me=!1;for(let Gt in Pe)if(Ue.toString()===Gt){Me=!0;break}if(!Me)throw new oe}return Ee}decodeEnd(r,s){return It.findGuardPattern(r,s,!1,It.START_END_PATTERN,new Int32Array(It.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return It.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let l=parseInt(r.charAt(s-1),10);return It.getStandardUPCEANChecksum(r.substring(0,s-1))===l}static getStandardUPCEANChecksum(r){let s=r.length,l=0;for(let u=s-1;u>=0;u-=2){let f=r.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new F;l+=f}l*=3;for(let u=s-2;u>=0;u-=2){let f=r.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new F;l+=f}return(1e3-l)%10}}class yn extends It{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=r.getSize(),g=s[1],y=0;for(let b=0;b<6&&g<f;b++){let I=It.decodeDigit(r,u,g,It.L_AND_G_PATTERNS);l+=String.fromCharCode(48+I%10);for(let M of u)g+=M;I>=10&&(y|=1<<5-b)}l=yn.determineFirstDigit(l,y),g=It.findGuardPattern(r,g,!0,It.MIDDLE_PATTERN,new Int32Array(It.MIDDLE_PATTERN.length).fill(0))[1];for(let b=0;b<6&&g<f;b++){let I=It.decodeDigit(r,u,g,It.L_PATTERNS);l+=String.fromCharCode(48+I);for(let M of u)g+=M}return{rowOffset:g,resultString:l}}getBarcodeFormat(){return we.EAN_13}static determineFirstDigit(r,s){for(let l=0;l<10;l++)if(s===this.FIRST_DIGIT_ENCODINGS[l])return r=String.fromCharCode(48+l)+r,r;throw new oe}}yn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class mi extends It{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,l){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=r.getSize(),g=s[1];for(let _=0;_<4&&g<f;_++){let b=It.decodeDigit(r,u,g,It.L_PATTERNS);l+=String.fromCharCode(48+b);for(let I of u)g+=I}g=It.findGuardPattern(r,g,!0,It.MIDDLE_PATTERN,new Int32Array(It.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<4&&g<f;_++){let b=It.decodeDigit(r,u,g,It.L_PATTERNS);l+=String.fromCharCode(48+b);for(let I of u)g+=I}return{rowOffset:g,resultString:l}}getBarcodeFormat(){return we.EAN_8}}class Gr extends It{constructor(){super(...arguments),this.ean13Reader=new yn}getBarcodeFormat(){return we.UPC_A}decode(r,s){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,s,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,s,l))}decodeMiddle(r,s,l){return this.ean13Reader.decodeMiddle(r,s,l)}maybeReturnResult(r){let s=r.getText();if(s.charAt(0)==="0"){let l=new ye(s.substring(1),null,null,r.getResultPoints(),we.UPC_A);return r.getResultMetadata()!=null&&l.putAllMetadata(r.getResultMetadata()),l}else throw new oe}reset(){this.ean13Reader.reset()}}class Hn extends It{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,s,l){const u=this.decodeMiddleCounters.map(b=>b);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const f=r.getSize();let g=s[1],y=0;for(let b=0;b<6&&g<f;b++){const I=Hn.decodeDigit(r,u,g,Hn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+I%10);for(let M of u)g+=M;I>=10&&(y|=1<<5-b)}let _=Hn.determineNumSysAndCheckDigit(l,y);return{rowOffset:g,resultString:_}}decodeEnd(r,s){return Hn.findGuardPatternWithoutCounters(r,s,!0,Hn.MIDDLE_END_PATTERN)}checkChecksum(r){return It.checkChecksum(Hn.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,s){for(let l=0;l<=1;l++)for(let u=0;u<10;u++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][u]){let f=String.fromCharCode(48+l),g=String.fromCharCode(48+u);return f+r+g}throw oe.getNotFoundInstance()}getBarcodeFormat(){return we.UPC_E}static convertUPCEtoUPCA(r){const s=r.slice(1,7).split("").map(f=>f.charCodeAt(0)),l=new G;l.append(r.charAt(0));let u=s[5];switch(u){case 0:case 1:case 2:l.appendChars(s,0,2),l.append(u),l.append("0000"),l.appendChars(s,2,3);break;case 3:l.appendChars(s,0,3),l.append("00000"),l.appendChars(s,3,2);break;case 4:l.appendChars(s,0,4),l.append("00000"),l.append(s[4]);break;default:l.appendChars(s,0,5),l.append("0000"),l.append(u);break}return r.length>=8&&l.append(r.charAt(7)),l.toString()}}Hn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Hn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Xs extends Ze{constructor(r){super();let s=r==null?null:r.get(je.POSSIBLE_FORMATS),l=[];o(s)?(l.push(new yn),l.push(new Gr),l.push(new mi),l.push(new Hn)):(s.indexOf(we.EAN_13)>-1&&l.push(new yn),s.indexOf(we.UPC_A)>-1&&l.push(new Gr),s.indexOf(we.EAN_8)>-1&&l.push(new mi),s.indexOf(we.UPC_E)>-1&&l.push(new Hn)),this.readers=l}decodeRow(r,s,l){for(let u of this.readers)try{const f=u.decodeRow(r,s,l),g=f.getBarcodeFormat()===we.EAN_13&&f.getText().charAt(0)==="0",y=l==null?null:l.get(je.POSSIBLE_FORMATS),_=y==null||y.includes(we.UPC_A);if(g&&_){const b=f.getRawBytes(),I=new ye(f.getText().substring(1),b,b?b.length:null,f.getResultPoints(),we.UPC_A);return I.putAllMetadata(f.getResultMetadata()),I}return f}catch{}throw new oe}reset(){for(let r of this.readers)r.reset()}}class rr extends Ze{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,s){for(let l=0;l<s.length;l++)if(Ze.patternMatchVariance(r,s[l],rr.MAX_INDIVIDUAL_VARIANCE)<rr.MAX_AVG_VARIANCE)return l;throw new oe}static count(r){return Ve.sum(new Int32Array(r))}static increment(r,s){let l=0,u=s[0];for(let f=1;f<r.length;f++)s[f]>u&&(u=s[f],l=f);r[l]++}static decrement(r,s){let l=0,u=s[0];for(let f=1;f<r.length;f++)s[f]<u&&(u=s[f],l=f);r[l]--}static isFinderPattern(r){let s=r[0]+r[1],l=s+r[2]+r[3],u=s/l;if(u>=rr.MIN_FINDER_PATTERN_RATIO&&u<=rr.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;for(let y of r)y>g&&(g=y),y<f&&(f=y);return g<10*f}return!1}}rr.MAX_AVG_VARIANCE=.2,rr.MAX_INDIVIDUAL_VARIANCE=.45,rr.MIN_FINDER_PATTERN_RATIO=9.5/12,rr.MAX_FINDER_PATTERN_RATIO=12.5/14;class Dr{constructor(r,s){this.value=r,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof Dr))return!1;const s=r;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class vi{constructor(r,s,l,u,f){this.value=r,this.startEnd=s,this.value=r,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new Xe(l,f)),this.resultPoints.push(new Xe(u,f))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof vi))return!1;const s=r;return this.value===s.value}hashCode(){return this.value}}class ri{constructor(){}static getRSSvalue(r,s,l){let u=0;for(let _ of r)u+=_;let f=0,g=0,y=r.length;for(let _=0;_<y-1;_++){let b;for(b=1,g|=1<<_;b<r[_];b++,g&=~(1<<_)){let I=ri.combins(u-b-1,y-_-2);if(l&&g===0&&u-b-(y-_-1)>=y-_-1&&(I-=ri.combins(u-b-(y-_),y-_-2)),y-_-1>1){let M=0;for(let L=u-b-(y-_-2);L>s;L--)M+=ri.combins(u-b-L-1,y-_-3);I-=M*(y-1-_)}else u-b>s&&I--;f+=I}u-=b}return f}static combins(r,s){let l,u;r-s>s?(u=s,l=r-s):(u=r-s,l=s);let f=1,g=1;for(let y=r;y>l;y--)f*=y,g<=u&&(f/=g,g++);for(;g<=u;)f/=g,g++;return f}}class ps{static buildBitArray(r){let s=r.length*2-1;r[r.length-1].getRightChar()==null&&(s-=1);let l=12*s,u=new Be(l),f=0,y=r[0].getRightChar().getValue();for(let _=11;_>=0;--_)(y&1<<_)!=0&&u.set(f),f++;for(let _=1;_<r.length;++_){let b=r[_],I=b.getLeftChar().getValue();for(let M=11;M>=0;--M)(I&1<<M)!=0&&u.set(f),f++;if(b.getRightChar()!=null){let M=b.getRightChar().getValue();for(let L=11;L>=0;--L)(M&1<<L)!=0&&u.set(f),f++}}return u}}class pi{constructor(r,s){s?this.decodedInformation=null:(this.finished=r,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ys{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class Qn extends ys{constructor(r,s){super(r),this.value=s}getValue(){return this.value}isFNC1(){return this.value===Qn.FNC1}}Qn.FNC1="$";class Mr extends ys{constructor(r,s,l){super(r),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Lr extends ys{constructor(r,s,l){if(super(r),s<0||s>10||l<0||l>10)throw new F;this.firstDigit=s,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Lr.FNC1}isSecondDigitFNC1(){return this.secondDigit===Lr.FNC1}isAnyFNC1(){return this.firstDigit===Lr.FNC1||this.secondDigit===Lr.FNC1}}Lr.FNC1=10;class qe{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new oe;let s=r.substring(0,2);for(let f of qe.TWO_DIGIT_DATA_LENGTH)if(f[0]===s)return f[1]===qe.VARIABLE_LENGTH?qe.processVariableAI(2,f[2],r):qe.processFixedAI(2,f[1],r);if(r.length<3)throw new oe;let l=r.substring(0,3);for(let f of qe.THREE_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===qe.VARIABLE_LENGTH?qe.processVariableAI(3,f[2],r):qe.processFixedAI(3,f[1],r);for(let f of qe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===qe.VARIABLE_LENGTH?qe.processVariableAI(4,f[2],r):qe.processFixedAI(4,f[1],r);if(r.length<4)throw new oe;let u=r.substring(0,4);for(let f of qe.FOUR_DIGIT_DATA_LENGTH)if(f[0]===u)return f[1]===qe.VARIABLE_LENGTH?qe.processVariableAI(4,f[2],r):qe.processFixedAI(4,f[1],r);throw new oe}static processFixedAI(r,s,l){if(l.length<r)throw new oe;let u=l.substring(0,r);if(l.length<r+s)throw new oe;let f=l.substring(r,r+s),g=l.substring(r+s),y="("+u+")"+f,_=qe.parseFieldsInGeneralPurpose(g);return _==null?y:y+_}static processVariableAI(r,s,l){let u=l.substring(0,r),f;l.length<r+s?f=l.length:f=r+s;let g=l.substring(r,f),y=l.substring(f),_="("+u+")"+g,b=qe.parseFieldsInGeneralPurpose(y);return b==null?_:_+b}}qe.VARIABLE_LENGTH=[],qe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",qe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",qe.VARIABLE_LENGTH,20],["22",qe.VARIABLE_LENGTH,29],["30",qe.VARIABLE_LENGTH,8],["37",qe.VARIABLE_LENGTH,8],["90",qe.VARIABLE_LENGTH,30],["91",qe.VARIABLE_LENGTH,30],["92",qe.VARIABLE_LENGTH,30],["93",qe.VARIABLE_LENGTH,30],["94",qe.VARIABLE_LENGTH,30],["95",qe.VARIABLE_LENGTH,30],["96",qe.VARIABLE_LENGTH,30],["97",qe.VARIABLE_LENGTH,3],["98",qe.VARIABLE_LENGTH,30],["99",qe.VARIABLE_LENGTH,30]],qe.THREE_DIGIT_DATA_LENGTH=[["240",qe.VARIABLE_LENGTH,30],["241",qe.VARIABLE_LENGTH,30],["242",qe.VARIABLE_LENGTH,6],["250",qe.VARIABLE_LENGTH,30],["251",qe.VARIABLE_LENGTH,30],["253",qe.VARIABLE_LENGTH,17],["254",qe.VARIABLE_LENGTH,20],["400",qe.VARIABLE_LENGTH,30],["401",qe.VARIABLE_LENGTH,30],["402",17],["403",qe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",qe.VARIABLE_LENGTH,20],["421",qe.VARIABLE_LENGTH,15],["422",3],["423",qe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],qe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",qe.VARIABLE_LENGTH,15],["391",qe.VARIABLE_LENGTH,18],["392",qe.VARIABLE_LENGTH,15],["393",qe.VARIABLE_LENGTH,18],["703",qe.VARIABLE_LENGTH,30]],qe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",qe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",qe.VARIABLE_LENGTH,20],["8003",qe.VARIABLE_LENGTH,30],["8004",qe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",qe.VARIABLE_LENGTH,30],["8008",qe.VARIABLE_LENGTH,12],["8018",18],["8020",qe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",qe.VARIABLE_LENGTH,70],["8200",qe.VARIABLE_LENGTH,70]];class wr{constructor(r){this.buffer=new G,this.information=r}decodeAllCodes(r,s){let l=s,u=null;do{let f=this.decodeGeneralPurposeField(l,u),g=qe.parseFieldsInGeneralPurpose(f.getNewString());if(g!=null&&r.append(g),f.isRemaining()?u=""+f.getRemainingValue():u=null,l===f.getNewPosition())break;l=f.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let s=r;s<r+3;++s)if(this.information.get(s))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let f=this.extractNumericValueFromBitArray(r,4);return f===0?new Lr(this.information.getSize(),Lr.FNC1,Lr.FNC1):new Lr(this.information.getSize(),f-1,Lr.FNC1)}let s=this.extractNumericValueFromBitArray(r,7),l=(s-8)/11,u=(s-8)%11;return new Lr(r+7,l,u)}extractNumericValueFromBitArray(r,s){return wr.extractNumericValueFromBitArray(this.information,r,s)}static extractNumericValueFromBitArray(r,s,l){let u=0;for(let f=0;f<l;++f)r.get(s+f)&&(u|=1<<l-f-1);return u}decodeGeneralPurposeField(r,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(r);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new Mr(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new Mr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,s;do{let l=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),r=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),r=s.isFinished()):(s=this.parseNumericBlock(),r=s.isFinished()),!(l!==this.current.getPosition())&&!r)break}while(!r);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let s;return r.isSecondDigitFNC1()?s=new Mr(this.current.getPosition(),this.buffer.toString()):s=new Mr(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new pi(!0,s)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let s=new Mr(this.current.getPosition(),this.buffer.toString());return new pi(!0,s)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new pi(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Mr(this.current.getPosition(),this.buffer.toString());return new pi(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new pi(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Mr(this.current.getPosition(),this.buffer.toString());return new pi(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new pi(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<116)return!0;if(r+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(r,8);return u>=232&&u<253}decodeIsoIec646(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new Qn(r+5,Qn.FNC1);if(s>=5&&s<15)return new Qn(r+5,"0"+(s-5));let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<90)return new Qn(r+7,""+(l+1));if(l>=90&&l<116)return new Qn(r+7,""+(l+7));let u=this.extractNumericValueFromBitArray(r,8),f;switch(u){case 232:f="!";break;case 233:f='"';break;case 234:f="%";break;case 235:f="&";break;case 236:f="'";break;case 237:f="(";break;case 238:f=")";break;case 239:f="*";break;case 240:f="+";break;case 241:f=",";break;case 242:f="-";break;case 243:f=".";break;case 244:f="/";break;case 245:f=":";break;case 246:f=";";break;case 247:f="<";break;case 248:f="=";break;case 249:f=">";break;case 250:f="?";break;case 251:f="_";break;case 252:f=" ";break;default:throw new F}return new Qn(r+8,f)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,6);return l>=16&&l<63}decodeAlphanumeric(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new Qn(r+5,Qn.FNC1);if(s>=5&&s<15)return new Qn(r+5,"0"+(s-5));let l=this.extractNumericValueFromBitArray(r,6);if(l>=32&&l<58)return new Qn(r+6,""+(l+33));let u;switch(l){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new Nn("Decoding invalid alphanumeric value: "+l)}return new Qn(r+6,u)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<5&&s+r<this.information.getSize();++s)if(s===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+s))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let s=r;s<r+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<4&&s+r<this.information.getSize();++s)if(this.information.get(r+s))return!1;return!0}}class Un{constructor(r){this.information=r,this.generalDecoder=new wr(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class ln extends Un{constructor(r){super(r)}encodeCompressedGtin(r,s){r.append("(01)");let l=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,s,l)}encodeCompressedGtinWithoutAI(r,s,l){for(let u=0;u<4;++u){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*u,10);f/100===0&&r.append("0"),f/10===0&&r.append("0"),r.append(f)}ln.appendCheckDigit(r,l)}static appendCheckDigit(r,s){let l=0;for(let u=0;u<13;u++){let f=r.charAt(u+s).charCodeAt(0)-48;l+=(u&1)===0?3*f:f}l=10-l%10,l===10&&(l=0),r.append(l)}}ln.GTIN_SIZE=40;class ee extends ln{constructor(r){super(r)}parseInformation(){let r=new G;r.append("(01)");let s=r.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(ee.HEADER_SIZE,4);return r.append(l),this.encodeCompressedGtinWithoutAI(r,ee.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(r,ee.HEADER_SIZE+44)}}ee.HEADER_SIZE=4;class ze extends Un{constructor(r){super(r)}parseInformation(){let r=new G;return this.getGeneralDecoder().decodeAllCodes(r,ze.HEADER_SIZE)}}ze.HEADER_SIZE=5;class ut extends ln{constructor(r){super(r)}encodeCompressedWeight(r,s,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s,l);this.addWeightCode(r,u);let f=this.checkWeight(u),g=1e5;for(let y=0;y<5;++y)f/g===0&&r.append("0"),g/=10;r.append(f)}}class We extends ut{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=We.HEADER_SIZE+ut.GTIN_SIZE+We.WEIGHT_SIZE)throw new oe;let r=new G;return this.encodeCompressedGtin(r,We.HEADER_SIZE),this.encodeCompressedWeight(r,We.HEADER_SIZE+ut.GTIN_SIZE,We.WEIGHT_SIZE),r.toString()}}We.HEADER_SIZE=5,We.WEIGHT_SIZE=15;class Rt extends We{constructor(r){super(r)}addWeightCode(r,s){r.append("(3103)")}checkWeight(r){return r}}class jt extends We{constructor(r){super(r)}addWeightCode(r,s){s<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class Dn extends ln{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Dn.HEADER_SIZE+ln.GTIN_SIZE)throw new oe;let r=new G;this.encodeCompressedGtin(r,Dn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Dn.HEADER_SIZE+ln.GTIN_SIZE,Dn.LAST_DIGIT_SIZE);r.append("(392"),r.append(s),r.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(Dn.HEADER_SIZE+ln.GTIN_SIZE+Dn.LAST_DIGIT_SIZE,null);return r.append(l.getNewString()),r.toString()}}Dn.HEADER_SIZE=8,Dn.LAST_DIGIT_SIZE=2;class hn extends ln{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<hn.HEADER_SIZE+ln.GTIN_SIZE)throw new oe;let r=new G;this.encodeCompressedGtin(r,hn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(hn.HEADER_SIZE+ln.GTIN_SIZE,hn.LAST_DIGIT_SIZE);r.append("(393"),r.append(s),r.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(hn.HEADER_SIZE+ln.GTIN_SIZE+hn.LAST_DIGIT_SIZE,hn.FIRST_THREE_DIGITS_SIZE);l/100==0&&r.append("0"),l/10==0&&r.append("0"),r.append(l);let u=this.getGeneralDecoder().decodeGeneralPurposeField(hn.HEADER_SIZE+ln.GTIN_SIZE+hn.LAST_DIGIT_SIZE+hn.FIRST_THREE_DIGITS_SIZE,null);return r.append(u.getNewString()),r.toString()}}hn.HEADER_SIZE=8,hn.LAST_DIGIT_SIZE=2,hn.FIRST_THREE_DIGITS_SIZE=10;class Ct extends ut{constructor(r,s,l){super(r),this.dateCode=l,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=Ct.HEADER_SIZE+Ct.GTIN_SIZE+Ct.WEIGHT_SIZE+Ct.DATE_SIZE)throw new oe;let r=new G;return this.encodeCompressedGtin(r,Ct.HEADER_SIZE),this.encodeCompressedWeight(r,Ct.HEADER_SIZE+Ct.GTIN_SIZE,Ct.WEIGHT_SIZE),this.encodeCompressedDate(r,Ct.HEADER_SIZE+Ct.GTIN_SIZE+Ct.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,s){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(s,Ct.DATE_SIZE);if(l==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let u=l%32;l/=32;let f=l%12+1;l/=12;let g=l;g/10==0&&r.append("0"),r.append(g),f/10==0&&r.append("0"),r.append(f),u/10==0&&r.append("0"),r.append(u)}addWeightCode(r,s){r.append("("),r.append(this.firstAIdigits),r.append(s/1e5),r.append(")")}checkWeight(r){return r%1e5}}Ct.HEADER_SIZE=8,Ct.WEIGHT_SIZE=20,Ct.DATE_SIZE=16;function cr(D){try{if(D.get(1))return new ee(D);if(!D.get(2))return new ze(D);switch(wr.extractNumericValueFromBitArray(D,1,4)){case 4:return new Rt(D);case 5:return new jt(D)}switch(wr.extractNumericValueFromBitArray(D,1,5)){case 12:return new Dn(D);case 13:return new hn(D)}switch(wr.extractNumericValueFromBitArray(D,1,7)){case 56:return new Ct(D,"310","11");case 57:return new Ct(D,"320","11");case 58:return new Ct(D,"310","13");case 59:return new Ct(D,"320","13");case 60:return new Ct(D,"310","15");case 61:return new Ct(D,"320","15");case 62:return new Ct(D,"310","17");case 63:return new Ct(D,"320","17")}}catch(r){throw console.log(r),new Nn("unknown decoder: "+D)}}class Gn{constructor(r,s,l,u){this.leftchar=r,this.rightchar=s,this.finderpattern=l,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,s){return r instanceof Gn?Gn.equalsOrNull(r.leftchar,s.leftchar)&&Gn.equalsOrNull(r.rightchar,s.rightchar)&&Gn.equalsOrNull(r.finderpattern,s.finderpattern):!1}static equalsOrNull(r,s){return r===null?s===null:Gn.equals(r,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Zn{constructor(r,s,l){this.pairs=r,this.rowNumber=s,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,s){return r instanceof Zn?this.checkEqualitity(r,s)&&r.wasReversed===s.wasReversed:!1}checkEqualitity(r,s){if(!r||!s)return;let l;return r.forEach((u,f)=>{s.forEach(g=>{u.getLeftChar().getValue()===g.getLeftChar().getValue()&&u.getRightChar().getValue()===g.getRightChar().getValue()&&u.getFinderPatter().getValue()===g.getFinderPatter().getValue()&&(l=!0)})}),l}}class Ne extends rr{constructor(r){super(...arguments),this.pairs=new Array(Ne.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,s,l){this.pairs.length=0,this.startFromEven=!1;try{return Ne.constructResult(this.decodeRow2pairs(r,s))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,Ne.constructResult(this.decodeRow2pairs(r,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,s){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,r))}catch(f){if(f instanceof oe){if(!this.pairs.length)throw new oe;l=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(r,!1),u){let f=this.checkRowsBoolean(!1);if(f!=null||(f=this.checkRowsBoolean(!0),f!=null))return f}throw new oe}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return r&&(this.rows=this.rows.reverse()),s}checkRows(r,s){for(let l=s;l<this.rows.length;l++){let u=this.rows[l];this.pairs.length=0;for(let g of r)this.pairs.push(g.getPairs());if(this.pairs.push(u.getPairs()),!Ne.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let f=new Array(r);f.push(u);try{return this.checkRows(f,l+1)}catch(g){this.verbose&&console.log(g)}}throw new oe}static isValidSequence(r){for(let s of Ne.FINDER_PATTERN_SEQUENCES){if(r.length>s.length)continue;let l=!0;for(let u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!=s[u]){l=!1;break}if(l)return!0}return!1}storeRow(r,s){let l=0,u=!1,f=!1;for(;l<this.rows.length;){let g=this.rows[l];if(g.getRowNumber()>r){f=g.isEquivalent(this.pairs);break}u=g.isEquivalent(this.pairs),l++}f||u||Ne.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new Zn(this.pairs,r,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,s){for(let l of s)if(l.getPairs().length!==r.length){for(let u of l.getPairs())for(let f of r)if(Gn.equals(u,f))break}}static isPartialRow(r,s){for(let l of s){let u=!0;for(let f of r){let g=!1;for(let y of l.getPairs())if(f.equals(y)){g=!0;break}if(!g){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(r){let s=ps.buildBitArray(r),u=cr(s).parseInformation(),f=r[0].getFinderPattern().getResultPoints(),g=r[r.length-1].getFinderPattern().getResultPoints(),y=[f[0],f[1],g[0],g[1]];return new ye(u,null,null,y,we.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),s=r.getLeftChar(),l=r.getRightChar();if(l==null)return!1;let u=l.getChecksumPortion(),f=2;for(let y=1;y<this.pairs.size();++y){let _=this.pairs.get(y);u+=_.getLeftChar().getChecksumPortion(),f++;let b=_.getRightChar();b!=null&&(u+=b.getChecksumPortion(),f++)}return u%=211,211*(f-4)+u==s.getValue()}static getNextSecondBar(r,s){let l;return r.get(s)?(l=r.getNextUnset(s),l=r.getNextSet(l)):(l=r.getNextSet(s),l=r.getNextUnset(l)),l}retrieveNextPair(r,s,l){let u=s.length%2==0;this.startFromEven&&(u=!u);let f,g=!0,y=-1;do this.findNextPair(r,s,y),f=this.parseFoundFinderPattern(r,l,u),f==null?y=Ne.getNextSecondBar(r,this.startEnd[0]):g=!1;while(g);let _=this.decodeDataCharacter(r,f,u,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new oe;let b;try{b=this.decodeDataCharacter(r,f,u,!1)}catch(I){b=null,this.verbose&&console.log(I)}return new Gn(_,b,f,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,s,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=r.getSize(),g;l>=0?g=l:this.isEmptyPair(s)?g=0:g=s[s.length-1].getFinderPattern().getStartEnd()[1];let y=s.length%2!=0;this.startFromEven&&(y=!y);let _=!1;for(;g<f&&(_=!r.get(g),!!_);)g++;let b=0,I=g;for(let M=g;M<f;M++)if(r.get(M)!=_)u[b]++;else{if(b==3){if(y&&Ne.reverseCounters(u),Ne.isFinderPattern(u)){this.startEnd[0]=I,this.startEnd[1]=M;return}y&&Ne.reverseCounters(u),I+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,b--}else b++;u[b]=1,_=!_}throw new oe}static reverseCounters(r){let s=r.length;for(let l=0;l<s/2;++l){let u=r[l];r[l]=r[s-l-1],r[s-l-1]=u}}parseFoundFinderPattern(r,s,l){let u,f,g;if(l){let b=this.startEnd[0]-1;for(;b>=0&&!r.get(b);)b--;b++,u=this.startEnd[0]-b,f=b,g=this.startEnd[1]}else f=this.startEnd[0],g=r.getNextUnset(this.startEnd[1]+1),u=g-this.startEnd[1];let y=this.getDecodeFinderCounters();le.arraycopy(y,0,y,1,y.length-1),y[0]=u;let _;try{_=this.parseFinderValue(y,Ne.FINDER_PATTERNS)}catch{return null}return new vi(_,[f,g],f,g,s)}decodeDataCharacter(r,s,l,u){let f=this.getDataCharacterCounters();for(let vn=0;vn<f.length;vn++)f[vn]=0;if(u)Ne.recordPatternInReverse(r,s.getStartEnd()[0],f);else{Ne.recordPattern(r,s.getStartEnd()[1],f);for(let vn=0,kr=f.length-1;vn<kr;vn++,kr--){let Ai=f[vn];f[vn]=f[kr],f[kr]=Ai}}let g=17,y=Ve.sum(new Int32Array(f))/g,_=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(y-_)/_>.3)throw new oe;let b=this.getOddCounts(),I=this.getEvenCounts(),M=this.getOddRoundingErrors(),L=this.getEvenRoundingErrors();for(let vn=0;vn<f.length;vn++){let kr=1*f[vn]/y,Ai=kr+.5;if(Ai<1){if(kr<.3)throw new oe;Ai=1}else if(Ai>8){if(kr>8.7)throw new oe;Ai=8}let ka=vn/2;(vn&1)==0?(b[ka]=Ai,M[ka]=kr-Ai):(I[ka]=Ai,L[ka]=kr-Ai)}this.adjustOddEvenCounts(g);let H=4*s.getValue()+(l?0:2)+(u?0:1)-1,Q=0,J=0;for(let vn=b.length-1;vn>=0;vn--){if(Ne.isNotA1left(s,l,u)){let kr=Ne.WEIGHTS[H][2*vn];J+=b[vn]*kr}Q+=b[vn]}let se=0;for(let vn=I.length-1;vn>=0;vn--)if(Ne.isNotA1left(s,l,u)){let kr=Ne.WEIGHTS[H][2*vn+1];se+=I[vn]*kr}let Ee=J+se;if((Q&1)!=0||Q>13||Q<4)throw new oe;let Ue=(13-Q)/2,Pe=Ne.SYMBOL_WIDEST[Ue],Me=9-Pe,Gt=ri.getRSSvalue(b,Pe,!0),Nt=ri.getRSSvalue(I,Me,!1),ur=Ne.EVEN_TOTAL_SUBSET[Ue],Ni=Ne.GSUM[Ue],Wr=Gt*ur+Nt+Ni;return new Dr(Wr,Ee)}static isNotA1left(r,s,l){return!(r.getValue()==0&&s&&l)}adjustOddEvenCounts(r){let s=Ve.sum(new Int32Array(this.getOddCounts())),l=Ve.sum(new Int32Array(this.getEvenCounts())),u=!1,f=!1;s>13?f=!0:s<4&&(u=!0);let g=!1,y=!1;l>13?y=!0:l<4&&(g=!0);let _=s+l-r,b=(s&1)==1,I=(l&1)==0;if(_==1)if(b){if(I)throw new oe;f=!0}else{if(!I)throw new oe;y=!0}else if(_==-1)if(b){if(I)throw new oe;u=!0}else{if(!I)throw new oe;g=!0}else if(_==0){if(b){if(!I)throw new oe;s<l?(u=!0,y=!0):(f=!0,g=!0)}else if(I)throw new oe}else throw new oe;if(u){if(f)throw new oe;Ne.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Ne.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(y)throw new oe;Ne.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&Ne.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ne.SYMBOL_WIDEST=[7,5,4,3,1],Ne.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ne.GSUM=[0,348,1388,2948,3988],Ne.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ne.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ne.FINDER_PAT_A=0,Ne.FINDER_PAT_B=1,Ne.FINDER_PAT_C=2,Ne.FINDER_PAT_D=3,Ne.FINDER_PAT_E=4,Ne.FINDER_PAT_F=5,Ne.FINDER_PATTERN_SEQUENCES=[[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_C,Ne.FINDER_PAT_B,Ne.FINDER_PAT_D],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_E,Ne.FINDER_PAT_B,Ne.FINDER_PAT_D,Ne.FINDER_PAT_C],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_E,Ne.FINDER_PAT_B,Ne.FINDER_PAT_D,Ne.FINDER_PAT_D,Ne.FINDER_PAT_F],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_E,Ne.FINDER_PAT_B,Ne.FINDER_PAT_D,Ne.FINDER_PAT_E,Ne.FINDER_PAT_F,Ne.FINDER_PAT_F],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B,Ne.FINDER_PAT_C,Ne.FINDER_PAT_C,Ne.FINDER_PAT_D,Ne.FINDER_PAT_D],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B,Ne.FINDER_PAT_C,Ne.FINDER_PAT_C,Ne.FINDER_PAT_D,Ne.FINDER_PAT_E,Ne.FINDER_PAT_E],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B,Ne.FINDER_PAT_C,Ne.FINDER_PAT_C,Ne.FINDER_PAT_D,Ne.FINDER_PAT_E,Ne.FINDER_PAT_F,Ne.FINDER_PAT_F],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B,Ne.FINDER_PAT_C,Ne.FINDER_PAT_D,Ne.FINDER_PAT_D,Ne.FINDER_PAT_E,Ne.FINDER_PAT_E,Ne.FINDER_PAT_F,Ne.FINDER_PAT_F]],Ne.MAX_PAIRS=11;class Io extends Dr{constructor(r,s,l){super(r,s),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class gn extends rr{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,s,l){const u=this.decodePair(s,!1,r,l);gn.addOrTally(this.possibleLeftPairs,u),s.reverse();let f=this.decodePair(s,!0,r,l);gn.addOrTally(this.possibleRightPairs,f),s.reverse();for(let g of this.possibleLeftPairs)if(g.getCount()>1){for(let y of this.possibleRightPairs)if(y.getCount()>1&&gn.checkChecksum(g,y))return gn.constructResult(g,y)}throw new oe}static addOrTally(r,s){if(s==null)return;let l=!1;for(let u of r)if(u.getValue()===s.getValue()){u.incrementCount(),l=!0;break}l||r.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,s){let l=4537077*r.getValue()+s.getValue(),u=new String(l).toString(),f=new G;for(let b=13-u.length;b>0;b--)f.append("0");f.append(u);let g=0;for(let b=0;b<13;b++){let I=f.charAt(b).charCodeAt(0)-48;g+=(b&1)===0?3*I:I}g=10-g%10,g===10&&(g=0),f.append(g.toString());let y=r.getFinderPattern().getResultPoints(),_=s.getFinderPattern().getResultPoints();return new ye(f.toString(),null,0,[y[0],y[1],_[0],_[1]],we.RSS_14,new Date().getTime())}static checkChecksum(r,s){let l=(r.getChecksumPortion()+16*s.getChecksumPortion())%79,u=9*r.getFinderPattern().getValue()+s.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,l===u}decodePair(r,s,l,u){try{let f=this.findFinderPattern(r,s),g=this.parseFoundFinderPattern(r,l,s,f),y=u==null?null:u.get(je.NEED_RESULT_POINT_CALLBACK);if(y!=null){let I=(f[0]+f[1])/2;s&&(I=r.getSize()-1-I),y.foundPossibleResultPoint(new Xe(I,l))}let _=this.decodeDataCharacter(r,g,!0),b=this.decodeDataCharacter(r,g,!1);return new Io(1597*_.getValue()+b.getValue(),_.getChecksumPortion()+4*b.getChecksumPortion(),g)}catch{return null}}decodeDataCharacter(r,s,l){let u=this.getDataCharacterCounters();for(let se=0;se<u.length;se++)u[se]=0;if(l)Ze.recordPatternInReverse(r,s.getStartEnd()[0],u);else{Ze.recordPattern(r,s.getStartEnd()[1]+1,u);for(let se=0,Ee=u.length-1;se<Ee;se++,Ee--){let Ue=u[se];u[se]=u[Ee],u[Ee]=Ue}}let f=l?16:15,g=Ve.sum(new Int32Array(u))/f,y=this.getOddCounts(),_=this.getEvenCounts(),b=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let se=0;se<u.length;se++){let Ee=u[se]/g,Ue=Math.floor(Ee+.5);Ue<1?Ue=1:Ue>8&&(Ue=8);let Pe=Math.floor(se/2);(se&1)===0?(y[Pe]=Ue,b[Pe]=Ee-Ue):(_[Pe]=Ue,I[Pe]=Ee-Ue)}this.adjustOddEvenCounts(l,f);let M=0,L=0;for(let se=y.length-1;se>=0;se--)L*=9,L+=y[se],M+=y[se];let H=0,Q=0;for(let se=_.length-1;se>=0;se--)H*=9,H+=_[se],Q+=_[se];let J=L+3*H;if(l){if((M&1)!==0||M>12||M<4)throw new oe;let se=(12-M)/2,Ee=gn.OUTSIDE_ODD_WIDEST[se],Ue=9-Ee,Pe=ri.getRSSvalue(y,Ee,!1),Me=ri.getRSSvalue(_,Ue,!0),Gt=gn.OUTSIDE_EVEN_TOTAL_SUBSET[se],Nt=gn.OUTSIDE_GSUM[se];return new Dr(Pe*Gt+Me+Nt,J)}else{if((Q&1)!==0||Q>10||Q<4)throw new oe;let se=(10-Q)/2,Ee=gn.INSIDE_ODD_WIDEST[se],Ue=9-Ee,Pe=ri.getRSSvalue(y,Ee,!0),Me=ri.getRSSvalue(_,Ue,!1),Gt=gn.INSIDE_ODD_TOTAL_SUBSET[se],Nt=gn.INSIDE_GSUM[se];return new Dr(Me*Gt+Pe+Nt,J)}}findFinderPattern(r,s){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=r.getSize(),f=!1,g=0;for(;g<u&&(f=!r.get(g),s!==f);)g++;let y=0,_=g;for(let b=g;b<u;b++)if(r.get(b)!==f)l[y]++;else{if(y===3){if(rr.isFinderPattern(l))return[_,b];_+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,y--}else y++;l[y]=1,f=!f}throw new oe}parseFoundFinderPattern(r,s,l,u){let f=r.get(u[0]),g=u[0]-1;for(;g>=0&&f!==r.get(g);)g--;g++;const y=u[0]-g,_=this.getDecodeFinderCounters(),b=new Int32Array(_.length);le.arraycopy(_,0,b,1,_.length-1),b[0]=y;const I=this.parseFinderValue(b,gn.FINDER_PATTERNS);let M=g,L=u[1];return l&&(M=r.getSize()-1-M,L=r.getSize()-1-L),new vi(I,[g,u[1]],M,L,s)}adjustOddEvenCounts(r,s){let l=Ve.sum(new Int32Array(this.getOddCounts())),u=Ve.sum(new Int32Array(this.getEvenCounts())),f=!1,g=!1,y=!1,_=!1;r?(l>12?g=!0:l<4&&(f=!0),u>12?_=!0:u<4&&(y=!0)):(l>11?g=!0:l<5&&(f=!0),u>10?_=!0:u<4&&(y=!0));let b=l+u-s,I=(l&1)===(r?1:0),M=(u&1)===1;if(b===1)if(I){if(M)throw new oe;g=!0}else{if(!M)throw new oe;_=!0}else if(b===-1)if(I){if(M)throw new oe;f=!0}else{if(!M)throw new oe;y=!0}else if(b===0){if(I){if(!M)throw new oe;l<u?(f=!0,_=!0):(g=!0,y=!0)}else if(M)throw new oe}else throw new oe;if(f){if(g)throw new oe;rr.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&rr.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(_)throw new oe;rr.increment(this.getEvenCounts(),this.getOddRoundingErrors())}_&&rr.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}gn.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],gn.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],gn.OUTSIDE_GSUM=[0,161,961,2015,2715],gn.INSIDE_GSUM=[0,336,1036,1516],gn.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],gn.INSIDE_ODD_WIDEST=[2,4,6,8],gn.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class qr extends Ze{constructor(r,s){super(),this.readers=[],this.verbose=s===!0;const l=r?r.get(je.POSSIBLE_FORMATS):null,u=r&&r.get(je.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(we.EAN_13)||l.includes(we.UPC_A)||l.includes(we.EAN_8)||l.includes(we.UPC_E))&&this.readers.push(new Xs(r)),l.includes(we.CODE_39)&&this.readers.push(new vt(u)),l.includes(we.CODE_128)&&this.readers.push(new ve),l.includes(we.ITF)&&this.readers.push(new lt),l.includes(we.RSS_14)&&this.readers.push(new gn),l.includes(we.RSS_EXPANDED)&&this.readers.push(new Ne(this.verbose))):(this.readers.push(new Xs(r)),this.readers.push(new vt),this.readers.push(new Xs(r)),this.readers.push(new ve),this.readers.push(new lt),this.readers.push(new gn),this.readers.push(new Ne(this.verbose)))}decodeRow(r,s,l){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(r,s,l)}catch{}throw new oe}reset(){this.readers.forEach(r=>r.reset())}}class Ro extends re{constructor(r=500,s){super(new qr(s),r,s)}}class en{constructor(r,s,l){this.ecCodewords=r,this.ecBlocks=[s],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Kt{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ht{constructor(r,s,l,u,f,g){this.versionNumber=r,this.symbolSizeRows=s,this.symbolSizeColumns=l,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=f,this.ecBlocks=g;let y=0;const _=g.getECCodewords(),b=g.getECBlocks();for(let I of b)y+=I.getCount()*(I.getDataCodewords()+_);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,s){if((r&1)!==0||(s&1)!==0)throw new F;for(let l of Ht.VERSIONS)if(l.symbolSizeRows===r&&l.symbolSizeColumns===s)return l;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new Ht(1,10,10,8,8,new en(5,new Kt(1,3))),new Ht(2,12,12,10,10,new en(7,new Kt(1,5))),new Ht(3,14,14,12,12,new en(10,new Kt(1,8))),new Ht(4,16,16,14,14,new en(12,new Kt(1,12))),new Ht(5,18,18,16,16,new en(14,new Kt(1,18))),new Ht(6,20,20,18,18,new en(18,new Kt(1,22))),new Ht(7,22,22,20,20,new en(20,new Kt(1,30))),new Ht(8,24,24,22,22,new en(24,new Kt(1,36))),new Ht(9,26,26,24,24,new en(28,new Kt(1,44))),new Ht(10,32,32,14,14,new en(36,new Kt(1,62))),new Ht(11,36,36,16,16,new en(42,new Kt(1,86))),new Ht(12,40,40,18,18,new en(48,new Kt(1,114))),new Ht(13,44,44,20,20,new en(56,new Kt(1,144))),new Ht(14,48,48,22,22,new en(68,new Kt(1,174))),new Ht(15,52,52,24,24,new en(42,new Kt(2,102))),new Ht(16,64,64,14,14,new en(56,new Kt(2,140))),new Ht(17,72,72,16,16,new en(36,new Kt(4,92))),new Ht(18,80,80,18,18,new en(48,new Kt(4,114))),new Ht(19,88,88,20,20,new en(56,new Kt(4,144))),new Ht(20,96,96,22,22,new en(68,new Kt(4,174))),new Ht(21,104,104,24,24,new en(56,new Kt(6,136))),new Ht(22,120,120,18,18,new en(68,new Kt(6,175))),new Ht(23,132,132,20,20,new en(62,new Kt(8,163))),new Ht(24,144,144,22,22,new en(62,new Kt(8,156),new Kt(2,155))),new Ht(25,8,18,6,16,new en(7,new Kt(1,5))),new Ht(26,8,32,6,14,new en(11,new Kt(1,10))),new Ht(27,12,26,10,24,new en(14,new Kt(1,16))),new Ht(28,12,36,10,16,new en(18,new Kt(1,22))),new Ht(29,16,36,14,16,new en(24,new Kt(1,32))),new Ht(30,16,48,14,22,new en(28,new Kt(1,49)))]}}Ht.VERSIONS=Ht.buildVersions();class Ss{constructor(r){const s=r.getHeight();if(s<8||s>144||(s&1)!==0)throw new F;this.version=Ss.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new Qe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const s=r.getHeight(),l=r.getWidth();return Ht.getVersionForDimensions(s,l)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let s=0,l=4,u=0;const f=this.mappingBitMatrix.getHeight(),g=this.mappingBitMatrix.getWidth();let y=!1,_=!1,b=!1,I=!1;do if(l===f&&u===0&&!y)r[s++]=this.readCorner1(f,g)&255,l-=2,u+=2,y=!0;else if(l===f-2&&u===0&&(g&3)!==0&&!_)r[s++]=this.readCorner2(f,g)&255,l-=2,u+=2,_=!0;else if(l===f+4&&u===2&&(g&7)===0&&!b)r[s++]=this.readCorner3(f,g)&255,l-=2,u+=2,b=!0;else if(l===f-2&&u===0&&(g&7)===4&&!I)r[s++]=this.readCorner4(f,g)&255,l-=2,u+=2,I=!0;else{do l<f&&u>=0&&!this.readMappingMatrix.get(u,l)&&(r[s++]=this.readUtah(l,u,f,g)&255),l-=2,u+=2;while(l>=0&&u<g);l+=1,u+=3;do l>=0&&u<g&&!this.readMappingMatrix.get(u,l)&&(r[s++]=this.readUtah(l,u,f,g)&255),l+=2,u-=2;while(l<f&&u>=0);l+=3,u+=1}while(l<f||u<g);if(s!==this.version.getTotalCodewords())throw new F;return r}readModule(r,s,l,u){return r<0&&(r+=l,s+=4-(l+4&7)),s<0&&(s+=u,r+=4-(u+4&7)),this.readMappingMatrix.set(s,r),this.mappingBitMatrix.get(s,r)}readUtah(r,s,l,u){let f=0;return this.readModule(r-2,s-2,l,u)&&(f|=1),f<<=1,this.readModule(r-2,s-1,l,u)&&(f|=1),f<<=1,this.readModule(r-1,s-2,l,u)&&(f|=1),f<<=1,this.readModule(r-1,s-1,l,u)&&(f|=1),f<<=1,this.readModule(r-1,s,l,u)&&(f|=1),f<<=1,this.readModule(r,s-2,l,u)&&(f|=1),f<<=1,this.readModule(r,s-1,l,u)&&(f|=1),f<<=1,this.readModule(r,s,l,u)&&(f|=1),f}readCorner1(r,s){let l=0;return this.readModule(r-1,0,r,s)&&(l|=1),l<<=1,this.readModule(r-1,1,r,s)&&(l|=1),l<<=1,this.readModule(r-1,2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-1,r,s)&&(l|=1),l<<=1,this.readModule(1,s-1,r,s)&&(l|=1),l<<=1,this.readModule(2,s-1,r,s)&&(l|=1),l<<=1,this.readModule(3,s-1,r,s)&&(l|=1),l}readCorner2(r,s){let l=0;return this.readModule(r-3,0,r,s)&&(l|=1),l<<=1,this.readModule(r-2,0,r,s)&&(l|=1),l<<=1,this.readModule(r-1,0,r,s)&&(l|=1),l<<=1,this.readModule(0,s-4,r,s)&&(l|=1),l<<=1,this.readModule(0,s-3,r,s)&&(l|=1),l<<=1,this.readModule(0,s-2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-1,r,s)&&(l|=1),l<<=1,this.readModule(1,s-1,r,s)&&(l|=1),l}readCorner3(r,s){let l=0;return this.readModule(r-1,0,r,s)&&(l|=1),l<<=1,this.readModule(r-1,s-1,r,s)&&(l|=1),l<<=1,this.readModule(0,s-3,r,s)&&(l|=1),l<<=1,this.readModule(0,s-2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-1,r,s)&&(l|=1),l<<=1,this.readModule(1,s-3,r,s)&&(l|=1),l<<=1,this.readModule(1,s-2,r,s)&&(l|=1),l<<=1,this.readModule(1,s-1,r,s)&&(l|=1),l}readCorner4(r,s){let l=0;return this.readModule(r-3,0,r,s)&&(l|=1),l<<=1,this.readModule(r-2,0,r,s)&&(l|=1),l<<=1,this.readModule(r-1,0,r,s)&&(l|=1),l<<=1,this.readModule(0,s-2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-1,r,s)&&(l|=1),l<<=1,this.readModule(1,s-1,r,s)&&(l|=1),l<<=1,this.readModule(2,s-1,r,s)&&(l|=1),l<<=1,this.readModule(3,s-1,r,s)&&(l|=1),l}extractDataRegion(r){const s=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(r.getHeight()!==s)throw new O("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),f=this.version.getDataRegionSizeColumns(),g=s/u|0,y=l/f|0,_=g*u,b=y*f,I=new Qe(b,_);for(let M=0;M<g;++M){const L=M*u;for(let H=0;H<y;++H){const Q=H*f;for(let J=0;J<u;++J){const se=M*(u+2)+1+J,Ee=L+J;for(let Ue=0;Ue<f;++Ue){const Pe=H*(f+2)+1+Ue;if(r.get(Pe,se)){const Me=Q+Ue;I.set(Me,Ee)}}}}}return I}}class Xr{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s){const l=s.getECBlocks();let u=0;const f=l.getECBlocks();for(let J of f)u+=J.getCount();const g=new Array(u);let y=0;for(let J of f)for(let se=0;se<J.getCount();se++){const Ee=J.getDataCodewords(),Ue=l.getECCodewords()+Ee;g[y++]=new Xr(Ee,new Uint8Array(Ue))}const b=g[0].codewords.length-l.getECCodewords(),I=b-1;let M=0;for(let J=0;J<I;J++)for(let se=0;se<y;se++)g[se].codewords[J]=r[M++];const L=s.getVersionNumber()===24,H=L?8:y;for(let J=0;J<H;J++)g[J].codewords[b-1]=r[M++];const Q=g[0].codewords.length;for(let J=b;J<Q;J++)for(let se=0;se<y;se++){const Ee=L?(se+8)%y:se,Ue=L&&Ee>7?J-1:J;g[Ee].codewords[Ue]=r[M++]}if(M!==r.length)throw new O;return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Jn{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new O(""+r);let s=0,l=this.bitOffset,u=this.byteOffset;const f=this.bytes;if(l>0){const g=8-l,y=r<g?r:g,_=g-y,b=255>>8-y<<_;s=(f[u]&b)>>_,r-=y,l+=y,l===8&&(l=0,u++)}if(r>0){for(;r>=8;)s=s<<8|f[u]&255,u++,r-=8;if(r>0){const g=8-r,y=255>>g<<g;s=s<<r|(f[u]&y)>>g,l+=r}}return this.bitOffset=l,this.byteOffset=u,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Yt;(function(D){D[D.PAD_ENCODE=0]="PAD_ENCODE",D[D.ASCII_ENCODE=1]="ASCII_ENCODE",D[D.C40_ENCODE=2]="C40_ENCODE",D[D.TEXT_ENCODE=3]="TEXT_ENCODE",D[D.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",D[D.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",D[D.BASE256_ENCODE=6]="BASE256_ENCODE"})(Yt||(Yt={}));class Yr{static decode(r){const s=new Jn(r),l=new G,u=new G,f=new Array;let g=Yt.ASCII_ENCODE;do if(g===Yt.ASCII_ENCODE)g=this.decodeAsciiSegment(s,l,u);else{switch(g){case Yt.C40_ENCODE:this.decodeC40Segment(s,l);break;case Yt.TEXT_ENCODE:this.decodeTextSegment(s,l);break;case Yt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,l);break;case Yt.EDIFACT_ENCODE:this.decodeEdifactSegment(s,l);break;case Yt.BASE256_ENCODE:this.decodeBase256Segment(s,l,f);break;default:throw new F}g=Yt.ASCII_ENCODE}while(g!==Yt.PAD_ENCODE&&s.available()>0);return u.length()>0&&l.append(u.toString()),new wt(r,l.toString(),f.length===0?null:f,null)}static decodeAsciiSegment(r,s,l){let u=!1;do{let f=r.readBits(8);if(f===0)throw new F;if(f<=128)return u&&(f+=128),s.append(String.fromCharCode(f-1)),Yt.ASCII_ENCODE;if(f===129)return Yt.PAD_ENCODE;if(f<=229){const g=f-130;g<10&&s.append("0"),s.append(""+g)}else switch(f){case 230:return Yt.C40_ENCODE;case 231:return Yt.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:s.append("[)>05"),l.insert(0,"");break;case 237:s.append("[)>06"),l.insert(0,"");break;case 238:return Yt.ANSIX12_ENCODE;case 239:return Yt.TEXT_ENCODE;case 240:return Yt.EDIFACT_ENCODE;case 241:break;default:if(f!==254||r.available()!==0)throw new F;break}}while(r.available()>0);return Yt.ASCII_ENCODE}static decodeC40Segment(r,s){let l=!1;const u=[];let f=0;do{if(r.available()===8)return;const g=r.readBits(8);if(g===254)return;this.parseTwoBytes(g,r.readBits(8),u);for(let y=0;y<3;y++){const _=u[y];switch(f){case 0:if(_<3)f=_+1;else if(_<this.C40_BASIC_SET_CHARS.length){const b=this.C40_BASIC_SET_CHARS[_];l?(s.append(String.fromCharCode(b.charCodeAt(0)+128)),l=!1):s.append(b)}else throw new F;break;case 1:l?(s.append(String.fromCharCode(_+128)),l=!1):s.append(String.fromCharCode(_)),f=0;break;case 2:if(_<this.C40_SHIFT2_SET_CHARS.length){const b=this.C40_SHIFT2_SET_CHARS[_];l?(s.append(String.fromCharCode(b.charCodeAt(0)+128)),l=!1):s.append(b)}else switch(_){case 27:s.append("");break;case 30:l=!0;break;default:throw new F}f=0;break;case 3:l?(s.append(String.fromCharCode(_+224)),l=!1):s.append(String.fromCharCode(_+96)),f=0;break;default:throw new F}}}while(r.available()>0)}static decodeTextSegment(r,s){let l=!1,u=[],f=0;do{if(r.available()===8)return;const g=r.readBits(8);if(g===254)return;this.parseTwoBytes(g,r.readBits(8),u);for(let y=0;y<3;y++){const _=u[y];switch(f){case 0:if(_<3)f=_+1;else if(_<this.TEXT_BASIC_SET_CHARS.length){const b=this.TEXT_BASIC_SET_CHARS[_];l?(s.append(String.fromCharCode(b.charCodeAt(0)+128)),l=!1):s.append(b)}else throw new F;break;case 1:l?(s.append(String.fromCharCode(_+128)),l=!1):s.append(String.fromCharCode(_)),f=0;break;case 2:if(_<this.TEXT_SHIFT2_SET_CHARS.length){const b=this.TEXT_SHIFT2_SET_CHARS[_];l?(s.append(String.fromCharCode(b.charCodeAt(0)+128)),l=!1):s.append(b)}else switch(_){case 27:s.append("");break;case 30:l=!0;break;default:throw new F}f=0;break;case 3:if(_<this.TEXT_SHIFT3_SET_CHARS.length){const b=this.TEXT_SHIFT3_SET_CHARS[_];l?(s.append(String.fromCharCode(b.charCodeAt(0)+128)),l=!1):s.append(b),f=0}else throw new F;break;default:throw new F}}}while(r.available()>0)}static decodeAnsiX12Segment(r,s){const l=[];do{if(r.available()===8)return;const u=r.readBits(8);if(u===254)return;this.parseTwoBytes(u,r.readBits(8),l);for(let f=0;f<3;f++){const g=l[f];switch(g){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(g<14)s.append(String.fromCharCode(g+44));else if(g<40)s.append(String.fromCharCode(g+51));else throw new F;break}}}while(r.available()>0)}static parseTwoBytes(r,s,l){let u=(r<<8)+s-1,f=Math.floor(u/1600);l[0]=f,u-=f*1600,f=Math.floor(u/40),l[1]=f,l[2]=u-f*40}static decodeEdifactSegment(r,s){do{if(r.available()<=16)return;for(let l=0;l<4;l++){let u=r.readBits(6);if(u===31){const f=8-r.getBitOffset();f!==8&&r.readBits(f);return}(u&32)===0&&(u|=64),s.append(String.fromCharCode(u))}}while(r.available()>0)}static decodeBase256Segment(r,s,l){let u=1+r.getByteOffset();const f=this.unrandomize255State(r.readBits(8),u++);let g;if(f===0?g=r.available()/8|0:f<250?g=f:g=250*(f-249)+this.unrandomize255State(r.readBits(8),u++),g<0)throw new F;const y=new Uint8Array(g);for(let _=0;_<g;_++){if(r.available()<8)throw new F;y[_]=this.unrandomize255State(r.readBits(8),u++)}l.push(y);try{s.append(X.decode(y,W.ISO88591))}catch(_){throw new Nn("Platform does not support required encoding: "+_.message)}}static unrandomize255State(r,s){const l=149*s%255+1,u=r-l;return u>=0?u:u+256}}Yr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Yr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Yr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Yr.TEXT_SHIFT2_SET_CHARS=Yr.C40_SHIFT2_SET_CHARS,Yr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class No{constructor(){this.rsDecoder=new Kn(dt.DATA_MATRIX_FIELD_256)}decode(r){const s=new Ss(r),l=s.getVersion(),u=s.readCodewords(),f=Xr.getDataBlocks(u,l);let g=0;for(let b of f)g+=b.getNumDataCodewords();const y=new Uint8Array(g),_=f.length;for(let b=0;b<_;b++){const I=f[b],M=I.getCodewords(),L=I.getNumDataCodewords();this.correctErrors(M,L);for(let H=0;H<L;H++)y[H*_+b]=M[H]}return Yr.decode(y)}correctErrors(r,s){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-s)}catch{throw new Y}for(let u=0;u<s;u++)r[u]=l[u]}}class _t{constructor(r){this.image=r,this.rectangleDetector=new pn(this.image)}detect(){const r=this.rectangleDetector.detect();let s=this.detectSolid1(r);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new oe;s=this.shiftToModuleCenter(s);const l=s[0],u=s[1],f=s[2],g=s[3];let y=this.transitionsBetween(l,g)+1,_=this.transitionsBetween(f,g)+1;(y&1)===1&&(y+=1),(_&1)===1&&(_+=1),4*y<7*_&&4*_<7*y&&(y=_=Math.max(y,_));let b=_t.sampleGrid(this.image,l,u,f,g,y,_);return new jr(b,[l,u,f,g])}static shiftPoint(r,s,l){let u=(s.getX()-r.getX())/(l+1),f=(s.getY()-r.getY())/(l+1);return new Xe(r.getX()+u,r.getY()+f)}static moveAway(r,s,l){let u=r.getX(),f=r.getY();return u<s?u-=1:u+=1,f<l?f-=1:f+=1,new Xe(u,f)}detectSolid1(r){let s=r[0],l=r[1],u=r[3],f=r[2],g=this.transitionsBetween(s,l),y=this.transitionsBetween(l,u),_=this.transitionsBetween(u,f),b=this.transitionsBetween(f,s),I=g,M=[f,s,l,u];return I>y&&(I=y,M[0]=s,M[1]=l,M[2]=u,M[3]=f),I>_&&(I=_,M[0]=l,M[1]=u,M[2]=f,M[3]=s),I>b&&(M[0]=u,M[1]=f,M[2]=s,M[3]=l),M}detectSolid2(r){let s=r[0],l=r[1],u=r[2],f=r[3],g=this.transitionsBetween(s,f),y=_t.shiftPoint(l,u,(g+1)*4),_=_t.shiftPoint(u,l,(g+1)*4),b=this.transitionsBetween(y,s),I=this.transitionsBetween(_,f);return b<I?(r[0]=s,r[1]=l,r[2]=u,r[3]=f):(r[0]=l,r[1]=u,r[2]=f,r[3]=s),r}correctTopRight(r){let s=r[0],l=r[1],u=r[2],f=r[3],g=this.transitionsBetween(s,f),y=this.transitionsBetween(l,f),_=_t.shiftPoint(s,l,(y+1)*4),b=_t.shiftPoint(u,l,(g+1)*4);g=this.transitionsBetween(_,f),y=this.transitionsBetween(b,f);let I=new Xe(f.getX()+(u.getX()-l.getX())/(g+1),f.getY()+(u.getY()-l.getY())/(g+1)),M=new Xe(f.getX()+(s.getX()-l.getX())/(y+1),f.getY()+(s.getY()-l.getY())/(y+1));if(!this.isValid(I))return this.isValid(M)?M:null;if(!this.isValid(M))return I;let L=this.transitionsBetween(_,I)+this.transitionsBetween(b,I),H=this.transitionsBetween(_,M)+this.transitionsBetween(b,M);return L>H?I:M}shiftToModuleCenter(r){let s=r[0],l=r[1],u=r[2],f=r[3],g=this.transitionsBetween(s,f)+1,y=this.transitionsBetween(u,f)+1,_=_t.shiftPoint(s,l,y*4),b=_t.shiftPoint(u,l,g*4);g=this.transitionsBetween(_,f)+1,y=this.transitionsBetween(b,f)+1,(g&1)===1&&(g+=1),(y&1)===1&&(y+=1);let I=(s.getX()+l.getX()+u.getX()+f.getX())/4,M=(s.getY()+l.getY()+u.getY()+f.getY())/4;s=_t.moveAway(s,I,M),l=_t.moveAway(l,I,M),u=_t.moveAway(u,I,M),f=_t.moveAway(f,I,M);let L,H;return _=_t.shiftPoint(s,l,y*4),_=_t.shiftPoint(_,f,g*4),L=_t.shiftPoint(l,s,y*4),L=_t.shiftPoint(L,u,g*4),b=_t.shiftPoint(u,f,y*4),b=_t.shiftPoint(b,l,g*4),H=_t.shiftPoint(f,u,y*4),H=_t.shiftPoint(H,s,g*4),[_,L,b,H]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,s,l,u,f,g,y){return Je.getInstance().sampleGrid(r,g,y,.5,.5,g-.5,.5,g-.5,y-.5,.5,y-.5,s.getX(),s.getY(),f.getX(),f.getY(),u.getX(),u.getY(),l.getX(),l.getY())}transitionsBetween(r,s){let l=Math.trunc(r.getX()),u=Math.trunc(r.getY()),f=Math.trunc(s.getX()),g=Math.trunc(s.getY()),y=Math.abs(g-u)>Math.abs(f-l);if(y){let J=l;l=u,u=J,J=f,f=g,g=J}let _=Math.abs(f-l),b=Math.abs(g-u),I=-_/2,M=u<g?1:-1,L=l<f?1:-1,H=0,Q=this.image.get(y?u:l,y?l:u);for(let J=l,se=u;J!==f;J+=L){let Ee=this.image.get(y?se:J,y?J:se);if(Ee!==Q&&(H++,Q=Ee),I+=b,I>0){if(se===g)break;se+=M,I-=_}}return H}}class ii{constructor(){this.decoder=new No}decode(r,s=null){let l,u;if(s!=null&&s.has(je.PURE_BARCODE)){const b=ii.extractPureBits(r.getBlackMatrix());l=this.decoder.decode(b),u=ii.NO_POINTS}else{const b=new _t(r.getBlackMatrix()).detect();l=this.decoder.decode(b.getBits()),u=b.getPoints()}const f=l.getRawBytes(),g=new ye(l.getText(),f,8*f.length,u,we.DATA_MATRIX,le.currentTimeMillis()),y=l.getByteSegments();y!=null&&g.putMetadata(at.BYTE_SEGMENTS,y);const _=l.getECLevel();return _!=null&&g.putMetadata(at.ERROR_CORRECTION_LEVEL,_),g}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(s==null||l==null)throw new oe;const u=this.moduleSize(s,r);let f=s[1];const g=l[1];let y=s[0];const b=(l[0]-y+1)/u,I=(g-f+1)/u;if(b<=0||I<=0)throw new oe;const M=u/2;f+=M,y+=M;const L=new Qe(b,I);for(let H=0;H<I;H++){const Q=f+H*u;for(let J=0;J<b;J++)r.get(y+J*u,Q)&&L.set(J,H)}return L}static moduleSize(r,s){const l=s.getWidth();let u=r[0];const f=r[1];for(;u<l&&s.get(u,f);)u++;if(u===l)throw new oe;const g=u-r[0];if(g===0)throw new oe;return g}}ii.NO_POINTS=[];class Ji extends re{constructor(r=500){super(new ii,r)}}var Ci;(function(D){D[D.L=0]="L",D[D.M=1]="M",D[D.Q=2]="Q",D[D.H=3]="H"})(Ci||(Ci={}));class Ut{constructor(r,s,l){this.value=r,this.stringValue=s,this.bits=l,Ut.FOR_BITS.set(l,this),Ut.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return Ut.L;case"M":return Ut.M;case"Q":return Ut.Q;case"H":return Ut.H;default:throw new S(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof Ut))return!1;const s=r;return this.value===s.value}static forBits(r){if(r<0||r>=Ut.FOR_BITS.size)throw new O;return Ut.FOR_BITS.get(r)}}Ut.FOR_BITS=new Map,Ut.FOR_VALUE=new Map,Ut.L=new Ut(Ci.L,"L",1),Ut.M=new Ut(Ci.M,"M",0),Ut.Q=new Ut(Ci.Q,"Q",3),Ut.H=new Ut(Ci.H,"H",2);class ir{constructor(r){this.errorCorrectionLevel=Ut.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,s){return me.bitCount(r^s)}static decodeFormatInformation(r,s){const l=ir.doDecodeFormatInformation(r,s);return l!==null?l:ir.doDecodeFormatInformation(r^ir.FORMAT_INFO_MASK_QR,s^ir.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,s){let l=Number.MAX_SAFE_INTEGER,u=0;for(const f of ir.FORMAT_INFO_DECODE_LOOKUP){const g=f[0];if(g===r||g===s)return new ir(f[1]);let y=ir.numBitsDiffering(r,g);y<l&&(u=f[1],l=y),r!==s&&(y=ir.numBitsDiffering(s,g),y<l&&(u=f[1],l=y))}return l<=3?new ir(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof ir))return!1;const s=r;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}ir.FORMAT_INFO_MASK_QR=21522,ir.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ce{constructor(r,...s){this.ecCodewordsPerBlock=r,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const s=this.ecBlocks;for(const l of s)r+=l.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class j{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class it{constructor(r,s,...l){this.versionNumber=r,this.alignmentPatternCenters=s,this.ecBlocks=l;let u=0;const f=l[0].getECCodewordsPerBlock(),g=l[0].getECBlocks();for(const y of g)u+=y.getCount()*(y.getDataCodewords()+f);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new F;try{return this.getVersionForNumber((r-17)/4)}catch{throw new F}}static getVersionForNumber(r){if(r<1||r>40)throw new O;return it.VERSIONS[r-1]}static decodeVersionInformation(r){let s=Number.MAX_SAFE_INTEGER,l=0;for(let u=0;u<it.VERSION_DECODE_INFO.length;u++){const f=it.VERSION_DECODE_INFO[u];if(f===r)return it.getVersionForNumber(u+7);const g=ir.numBitsDiffering(r,f);g<s&&(l=u+7,s=g)}return s<=3?it.getVersionForNumber(l):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),s=new Qe(r);s.setRegion(0,0,9,9),s.setRegion(r-8,0,8,9),s.setRegion(0,r-8,9,8);const l=this.alignmentPatternCenters.length;for(let u=0;u<l;u++){const f=this.alignmentPatternCenters[u]-2;for(let g=0;g<l;g++)u===0&&(g===0||g===l-1)||u===l-1&&g===0||s.setRegion(this.alignmentPatternCenters[g]-2,f,5,5)}return s.setRegion(6,9,1,r-17),s.setRegion(9,6,r-17,1),this.versionNumber>6&&(s.setRegion(r-11,0,3,6),s.setRegion(0,r-11,6,3)),s}toString(){return""+this.versionNumber}}it.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),it.VERSIONS=[new it(1,new Int32Array(0),new ce(7,new j(1,19)),new ce(10,new j(1,16)),new ce(13,new j(1,13)),new ce(17,new j(1,9))),new it(2,Int32Array.from([6,18]),new ce(10,new j(1,34)),new ce(16,new j(1,28)),new ce(22,new j(1,22)),new ce(28,new j(1,16))),new it(3,Int32Array.from([6,22]),new ce(15,new j(1,55)),new ce(26,new j(1,44)),new ce(18,new j(2,17)),new ce(22,new j(2,13))),new it(4,Int32Array.from([6,26]),new ce(20,new j(1,80)),new ce(18,new j(2,32)),new ce(26,new j(2,24)),new ce(16,new j(4,9))),new it(5,Int32Array.from([6,30]),new ce(26,new j(1,108)),new ce(24,new j(2,43)),new ce(18,new j(2,15),new j(2,16)),new ce(22,new j(2,11),new j(2,12))),new it(6,Int32Array.from([6,34]),new ce(18,new j(2,68)),new ce(16,new j(4,27)),new ce(24,new j(4,19)),new ce(28,new j(4,15))),new it(7,Int32Array.from([6,22,38]),new ce(20,new j(2,78)),new ce(18,new j(4,31)),new ce(18,new j(2,14),new j(4,15)),new ce(26,new j(4,13),new j(1,14))),new it(8,Int32Array.from([6,24,42]),new ce(24,new j(2,97)),new ce(22,new j(2,38),new j(2,39)),new ce(22,new j(4,18),new j(2,19)),new ce(26,new j(4,14),new j(2,15))),new it(9,Int32Array.from([6,26,46]),new ce(30,new j(2,116)),new ce(22,new j(3,36),new j(2,37)),new ce(20,new j(4,16),new j(4,17)),new ce(24,new j(4,12),new j(4,13))),new it(10,Int32Array.from([6,28,50]),new ce(18,new j(2,68),new j(2,69)),new ce(26,new j(4,43),new j(1,44)),new ce(24,new j(6,19),new j(2,20)),new ce(28,new j(6,15),new j(2,16))),new it(11,Int32Array.from([6,30,54]),new ce(20,new j(4,81)),new ce(30,new j(1,50),new j(4,51)),new ce(28,new j(4,22),new j(4,23)),new ce(24,new j(3,12),new j(8,13))),new it(12,Int32Array.from([6,32,58]),new ce(24,new j(2,92),new j(2,93)),new ce(22,new j(6,36),new j(2,37)),new ce(26,new j(4,20),new j(6,21)),new ce(28,new j(7,14),new j(4,15))),new it(13,Int32Array.from([6,34,62]),new ce(26,new j(4,107)),new ce(22,new j(8,37),new j(1,38)),new ce(24,new j(8,20),new j(4,21)),new ce(22,new j(12,11),new j(4,12))),new it(14,Int32Array.from([6,26,46,66]),new ce(30,new j(3,115),new j(1,116)),new ce(24,new j(4,40),new j(5,41)),new ce(20,new j(11,16),new j(5,17)),new ce(24,new j(11,12),new j(5,13))),new it(15,Int32Array.from([6,26,48,70]),new ce(22,new j(5,87),new j(1,88)),new ce(24,new j(5,41),new j(5,42)),new ce(30,new j(5,24),new j(7,25)),new ce(24,new j(11,12),new j(7,13))),new it(16,Int32Array.from([6,26,50,74]),new ce(24,new j(5,98),new j(1,99)),new ce(28,new j(7,45),new j(3,46)),new ce(24,new j(15,19),new j(2,20)),new ce(30,new j(3,15),new j(13,16))),new it(17,Int32Array.from([6,30,54,78]),new ce(28,new j(1,107),new j(5,108)),new ce(28,new j(10,46),new j(1,47)),new ce(28,new j(1,22),new j(15,23)),new ce(28,new j(2,14),new j(17,15))),new it(18,Int32Array.from([6,30,56,82]),new ce(30,new j(5,120),new j(1,121)),new ce(26,new j(9,43),new j(4,44)),new ce(28,new j(17,22),new j(1,23)),new ce(28,new j(2,14),new j(19,15))),new it(19,Int32Array.from([6,30,58,86]),new ce(28,new j(3,113),new j(4,114)),new ce(26,new j(3,44),new j(11,45)),new ce(26,new j(17,21),new j(4,22)),new ce(26,new j(9,13),new j(16,14))),new it(20,Int32Array.from([6,34,62,90]),new ce(28,new j(3,107),new j(5,108)),new ce(26,new j(3,41),new j(13,42)),new ce(30,new j(15,24),new j(5,25)),new ce(28,new j(15,15),new j(10,16))),new it(21,Int32Array.from([6,28,50,72,94]),new ce(28,new j(4,116),new j(4,117)),new ce(26,new j(17,42)),new ce(28,new j(17,22),new j(6,23)),new ce(30,new j(19,16),new j(6,17))),new it(22,Int32Array.from([6,26,50,74,98]),new ce(28,new j(2,111),new j(7,112)),new ce(28,new j(17,46)),new ce(30,new j(7,24),new j(16,25)),new ce(24,new j(34,13))),new it(23,Int32Array.from([6,30,54,78,102]),new ce(30,new j(4,121),new j(5,122)),new ce(28,new j(4,47),new j(14,48)),new ce(30,new j(11,24),new j(14,25)),new ce(30,new j(16,15),new j(14,16))),new it(24,Int32Array.from([6,28,54,80,106]),new ce(30,new j(6,117),new j(4,118)),new ce(28,new j(6,45),new j(14,46)),new ce(30,new j(11,24),new j(16,25)),new ce(30,new j(30,16),new j(2,17))),new it(25,Int32Array.from([6,32,58,84,110]),new ce(26,new j(8,106),new j(4,107)),new ce(28,new j(8,47),new j(13,48)),new ce(30,new j(7,24),new j(22,25)),new ce(30,new j(22,15),new j(13,16))),new it(26,Int32Array.from([6,30,58,86,114]),new ce(28,new j(10,114),new j(2,115)),new ce(28,new j(19,46),new j(4,47)),new ce(28,new j(28,22),new j(6,23)),new ce(30,new j(33,16),new j(4,17))),new it(27,Int32Array.from([6,34,62,90,118]),new ce(30,new j(8,122),new j(4,123)),new ce(28,new j(22,45),new j(3,46)),new ce(30,new j(8,23),new j(26,24)),new ce(30,new j(12,15),new j(28,16))),new it(28,Int32Array.from([6,26,50,74,98,122]),new ce(30,new j(3,117),new j(10,118)),new ce(28,new j(3,45),new j(23,46)),new ce(30,new j(4,24),new j(31,25)),new ce(30,new j(11,15),new j(31,16))),new it(29,Int32Array.from([6,30,54,78,102,126]),new ce(30,new j(7,116),new j(7,117)),new ce(28,new j(21,45),new j(7,46)),new ce(30,new j(1,23),new j(37,24)),new ce(30,new j(19,15),new j(26,16))),new it(30,Int32Array.from([6,26,52,78,104,130]),new ce(30,new j(5,115),new j(10,116)),new ce(28,new j(19,47),new j(10,48)),new ce(30,new j(15,24),new j(25,25)),new ce(30,new j(23,15),new j(25,16))),new it(31,Int32Array.from([6,30,56,82,108,134]),new ce(30,new j(13,115),new j(3,116)),new ce(28,new j(2,46),new j(29,47)),new ce(30,new j(42,24),new j(1,25)),new ce(30,new j(23,15),new j(28,16))),new it(32,Int32Array.from([6,34,60,86,112,138]),new ce(30,new j(17,115)),new ce(28,new j(10,46),new j(23,47)),new ce(30,new j(10,24),new j(35,25)),new ce(30,new j(19,15),new j(35,16))),new it(33,Int32Array.from([6,30,58,86,114,142]),new ce(30,new j(17,115),new j(1,116)),new ce(28,new j(14,46),new j(21,47)),new ce(30,new j(29,24),new j(19,25)),new ce(30,new j(11,15),new j(46,16))),new it(34,Int32Array.from([6,34,62,90,118,146]),new ce(30,new j(13,115),new j(6,116)),new ce(28,new j(14,46),new j(23,47)),new ce(30,new j(44,24),new j(7,25)),new ce(30,new j(59,16),new j(1,17))),new it(35,Int32Array.from([6,30,54,78,102,126,150]),new ce(30,new j(12,121),new j(7,122)),new ce(28,new j(12,47),new j(26,48)),new ce(30,new j(39,24),new j(14,25)),new ce(30,new j(22,15),new j(41,16))),new it(36,Int32Array.from([6,24,50,76,102,128,154]),new ce(30,new j(6,121),new j(14,122)),new ce(28,new j(6,47),new j(34,48)),new ce(30,new j(46,24),new j(10,25)),new ce(30,new j(2,15),new j(64,16))),new it(37,Int32Array.from([6,28,54,80,106,132,158]),new ce(30,new j(17,122),new j(4,123)),new ce(28,new j(29,46),new j(14,47)),new ce(30,new j(49,24),new j(10,25)),new ce(30,new j(24,15),new j(46,16))),new it(38,Int32Array.from([6,32,58,84,110,136,162]),new ce(30,new j(4,122),new j(18,123)),new ce(28,new j(13,46),new j(32,47)),new ce(30,new j(48,24),new j(14,25)),new ce(30,new j(42,15),new j(32,16))),new it(39,Int32Array.from([6,26,54,82,110,138,166]),new ce(30,new j(20,117),new j(4,118)),new ce(28,new j(40,47),new j(7,48)),new ce(30,new j(43,24),new j(22,25)),new ce(30,new j(10,15),new j(67,16))),new it(40,Int32Array.from([6,30,58,86,114,142,170]),new ce(30,new j(19,118),new j(6,119)),new ce(28,new j(18,47),new j(31,48)),new ce(30,new j(34,24),new j(34,25)),new ce(30,new j(20,15),new j(61,16)))];var sr;(function(D){D[D.DATA_MASK_000=0]="DATA_MASK_000",D[D.DATA_MASK_001=1]="DATA_MASK_001",D[D.DATA_MASK_010=2]="DATA_MASK_010",D[D.DATA_MASK_011=3]="DATA_MASK_011",D[D.DATA_MASK_100=4]="DATA_MASK_100",D[D.DATA_MASK_101=5]="DATA_MASK_101",D[D.DATA_MASK_110=6]="DATA_MASK_110",D[D.DATA_MASK_111=7]="DATA_MASK_111"})(sr||(sr={}));class yr{constructor(r,s){this.value=r,this.isMasked=s}unmaskBitMatrix(r,s){for(let l=0;l<s;l++)for(let u=0;u<s;u++)this.isMasked(l,u)&&r.flip(u,l)}}yr.values=new Map([[sr.DATA_MASK_000,new yr(sr.DATA_MASK_000,(D,r)=>(D+r&1)===0)],[sr.DATA_MASK_001,new yr(sr.DATA_MASK_001,(D,r)=>(D&1)===0)],[sr.DATA_MASK_010,new yr(sr.DATA_MASK_010,(D,r)=>r%3===0)],[sr.DATA_MASK_011,new yr(sr.DATA_MASK_011,(D,r)=>(D+r)%3===0)],[sr.DATA_MASK_100,new yr(sr.DATA_MASK_100,(D,r)=>(Math.floor(D/2)+Math.floor(r/3)&1)===0)],[sr.DATA_MASK_101,new yr(sr.DATA_MASK_101,(D,r)=>D*r%6===0)],[sr.DATA_MASK_110,new yr(sr.DATA_MASK_110,(D,r)=>D*r%6<3)],[sr.DATA_MASK_111,new yr(sr.DATA_MASK_111,(D,r)=>(D+r+D*r%3&1)===0)]]);class si{constructor(r){const s=r.getHeight();if(s<21||(s&3)!==1)throw new F;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let f=0;f<6;f++)r=this.copyBit(f,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let f=5;f>=0;f--)r=this.copyBit(8,f,r);const s=this.bitMatrix.getHeight();let l=0;const u=s-7;for(let f=s-1;f>=u;f--)l=this.copyBit(8,f,l);for(let f=s-8;f<s;f++)l=this.copyBit(f,8,l);if(this.parsedFormatInfo=ir.decodeFormatInformation(r,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new F}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),s=Math.floor((r-17)/4);if(s<=6)return it.getVersionForNumber(s);let l=0;const u=r-11;for(let g=5;g>=0;g--)for(let y=r-9;y>=u;y--)l=this.copyBit(y,g,l);let f=it.decodeVersionInformation(l);if(f!==null&&f.getDimensionForVersion()===r)return this.parsedVersion=f,f;l=0;for(let g=5;g>=0;g--)for(let y=r-9;y>=u;y--)l=this.copyBit(g,y,l);if(f=it.decodeVersionInformation(l),f!==null&&f.getDimensionForVersion()===r)return this.parsedVersion=f,f;throw new F}copyBit(r,s,l){return(this.isMirror?this.bitMatrix.get(s,r):this.bitMatrix.get(r,s))?l<<1|1:l<<1}readCodewords(){const r=this.readFormatInformation(),s=this.readVersion(),l=yr.values.get(r.getDataMask()),u=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,u);const f=s.buildFunctionPattern();let g=!0;const y=new Uint8Array(s.getTotalCodewords());let _=0,b=0,I=0;for(let M=u-1;M>0;M-=2){M===6&&M--;for(let L=0;L<u;L++){const H=g?u-1-L:L;for(let Q=0;Q<2;Q++)f.get(M-Q,H)||(I++,b<<=1,this.bitMatrix.get(M-Q,H)&&(b|=1),I===8&&(y[_++]=b,I=0,b=0))}g=!g}if(_!==s.getTotalCodewords())throw new F;return y}remask(){if(this.parsedFormatInfo===null)return;const r=yr.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,s)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let s=0,l=r.getWidth();s<l;s++)for(let u=s+1,f=r.getHeight();u<f;u++)r.get(s,u)!==r.get(u,s)&&(r.flip(u,s),r.flip(s,u))}}class Ra{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s,l){if(r.length!==s.getTotalCodewords())throw new O;const u=s.getECBlocksForLevel(l);let f=0;const g=u.getECBlocks();for(const Q of g)f+=Q.getCount();const y=new Array(f);let _=0;for(const Q of g)for(let J=0;J<Q.getCount();J++){const se=Q.getDataCodewords(),Ee=u.getECCodewordsPerBlock()+se;y[_++]=new Ra(se,new Uint8Array(Ee))}const b=y[0].codewords.length;let I=y.length-1;for(;I>=0&&y[I].codewords.length!==b;)I--;I++;const M=b-u.getECCodewordsPerBlock();let L=0;for(let Q=0;Q<M;Q++)for(let J=0;J<_;J++)y[J].codewords[Q]=r[L++];for(let Q=I;Q<_;Q++)y[Q].codewords[M]=r[L++];const H=y[0].codewords.length;for(let Q=M;Q<H;Q++)for(let J=0;J<_;J++){const se=J<I?Q:Q+1;y[J].codewords[se]=r[L++]}return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Vr;(function(D){D[D.TERMINATOR=0]="TERMINATOR",D[D.NUMERIC=1]="NUMERIC",D[D.ALPHANUMERIC=2]="ALPHANUMERIC",D[D.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",D[D.BYTE=4]="BYTE",D[D.ECI=5]="ECI",D[D.KANJI=6]="KANJI",D[D.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",D[D.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",D[D.HANZI=9]="HANZI"})(Vr||(Vr={}));class ht{constructor(r,s,l,u){this.value=r,this.stringValue=s,this.characterCountBitsForVersions=l,this.bits=u,ht.FOR_BITS.set(u,this),ht.FOR_VALUE.set(r,this)}static forBits(r){const s=ht.FOR_BITS.get(r);if(s===void 0)throw new O;return s}getCharacterCountBits(r){const s=r.getVersionNumber();let l;return s<=9?l=0:s<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof ht))return!1;const s=r;return this.value===s.value}toString(){return this.stringValue}}ht.FOR_BITS=new Map,ht.FOR_VALUE=new Map,ht.TERMINATOR=new ht(Vr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ht.NUMERIC=new ht(Vr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ht.ALPHANUMERIC=new ht(Vr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ht.STRUCTURED_APPEND=new ht(Vr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ht.BYTE=new ht(Vr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ht.ECI=new ht(Vr.ECI,"ECI",Int32Array.from([0,0,0]),7),ht.KANJI=new ht(Vr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ht.FNC1_FIRST_POSITION=new ht(Vr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ht.FNC1_SECOND_POSITION=new ht(Vr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ht.HANZI=new ht(Vr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Tn{static decode(r,s,l,u){const f=new Jn(r);let g=new G;const y=new Array;let _=-1,b=-1;try{let I=null,M=!1,L;do{if(f.available()<4)L=ht.TERMINATOR;else{const H=f.readBits(4);L=ht.forBits(H)}switch(L){case ht.TERMINATOR:break;case ht.FNC1_FIRST_POSITION:case ht.FNC1_SECOND_POSITION:M=!0;break;case ht.STRUCTURED_APPEND:if(f.available()<16)throw new F;_=f.readBits(8),b=f.readBits(8);break;case ht.ECI:const H=Tn.parseECIValue(f);if(I=V.getCharacterSetECIByValue(H),I===null)throw new F;break;case ht.HANZI:const Q=f.readBits(4),J=f.readBits(L.getCharacterCountBits(s));Q===Tn.GB2312_SUBSET&&Tn.decodeHanziSegment(f,g,J);break;default:const se=f.readBits(L.getCharacterCountBits(s));switch(L){case ht.NUMERIC:Tn.decodeNumericSegment(f,g,se);break;case ht.ALPHANUMERIC:Tn.decodeAlphanumericSegment(f,g,se,M);break;case ht.BYTE:Tn.decodeByteSegment(f,g,se,I,y,u);break;case ht.KANJI:Tn.decodeKanjiSegment(f,g,se);break;default:throw new F}break}}while(L!==ht.TERMINATOR)}catch{throw new F}return new wt(r,g.toString(),y.length===0?null:y,l===null?null:l.toString(),_,b)}static decodeHanziSegment(r,s,l){if(l*13>r.available())throw new F;const u=new Uint8Array(2*l);let f=0;for(;l>0;){const g=r.readBits(13);let y=g/96<<8&4294967295|g%96;y<959?y+=41377:y+=42657,u[f]=y>>8&255,u[f+1]=y&255,f+=2,l--}try{s.append(X.decode(u,W.GB2312))}catch(g){throw new F(g)}}static decodeKanjiSegment(r,s,l){if(l*13>r.available())throw new F;const u=new Uint8Array(2*l);let f=0;for(;l>0;){const g=r.readBits(13);let y=g/192<<8&4294967295|g%192;y<7936?y+=33088:y+=49472,u[f]=y>>8,u[f+1]=y,f+=2,l--}try{s.append(X.decode(u,W.SHIFT_JIS))}catch(g){throw new F(g)}}static decodeByteSegment(r,s,l,u,f,g){if(8*l>r.available())throw new F;const y=new Uint8Array(l);for(let b=0;b<l;b++)y[b]=r.readBits(8);let _;u===null?_=W.guessEncoding(y,g):_=u.getName();try{s.append(X.decode(y,_))}catch(b){throw new F(b)}f.push(y)}static toAlphaNumericChar(r){if(r>=Tn.ALPHANUMERIC_CHARS.length)throw new F;return Tn.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,s,l,u){const f=s.length();for(;l>1;){if(r.available()<11)throw new F;const g=r.readBits(11);s.append(Tn.toAlphaNumericChar(Math.floor(g/45))),s.append(Tn.toAlphaNumericChar(g%45)),l-=2}if(l===1){if(r.available()<6)throw new F;s.append(Tn.toAlphaNumericChar(r.readBits(6)))}if(u)for(let g=f;g<s.length();g++)s.charAt(g)==="%"&&(g<s.length()-1&&s.charAt(g+1)==="%"?s.deleteCharAt(g+1):s.setCharAt(g,""))}static decodeNumericSegment(r,s,l){for(;l>=3;){if(r.available()<10)throw new F;const u=r.readBits(10);if(u>=1e3)throw new F;s.append(Tn.toAlphaNumericChar(Math.floor(u/100))),s.append(Tn.toAlphaNumericChar(Math.floor(u/10)%10)),s.append(Tn.toAlphaNumericChar(u%10)),l-=3}if(l===2){if(r.available()<7)throw new F;const u=r.readBits(7);if(u>=100)throw new F;s.append(Tn.toAlphaNumericChar(Math.floor(u/10))),s.append(Tn.toAlphaNumericChar(u%10))}else if(l===1){if(r.available()<4)throw new F;const u=r.readBits(4);if(u>=10)throw new F;s.append(Tn.toAlphaNumericChar(u))}}static parseECIValue(r){const s=r.readBits(8);if((s&128)===0)return s&127;if((s&192)===128){const l=r.readBits(8);return(s&63)<<8&4294967295|l}if((s&224)===192){const l=r.readBits(16);return(s&31)<<16&4294967295|l}throw new F}}Tn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Tn.GB2312_SUBSET=1;class Oo{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const s=r[0];r[0]=r[2],r[2]=s}}class Is{constructor(){this.rsDecoder=new Kn(dt.QR_CODE_FIELD_256)}decodeBooleanArray(r,s){return this.decodeBitMatrix(Qe.parseFromBooleanArray(r),s)}decodeBitMatrix(r,s){const l=new si(r);let u=null;try{return this.decodeBitMatrixParser(l,s)}catch(f){u=f}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const f=this.decodeBitMatrixParser(l,s);return f.setOther(new Oo(!0)),f}catch(f){throw u!==null?u:f}}decodeBitMatrixParser(r,s){const l=r.readVersion(),u=r.readFormatInformation().getErrorCorrectionLevel(),f=r.readCodewords(),g=Ra.getDataBlocks(f,l,u);let y=0;for(const I of g)y+=I.getNumDataCodewords();const _=new Uint8Array(y);let b=0;for(const I of g){const M=I.getCodewords(),L=I.getNumDataCodewords();this.correctErrors(M,L);for(let H=0;H<L;H++)_[b++]=M[H]}return Tn.decode(_,l,u,s)}correctErrors(r,s){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-s)}catch{throw new Y}for(let u=0;u<s;u++)r[u]=l[u]}}class Rs extends Xe{constructor(r,s,l){super(r,s),this.estimatedModuleSize=l}aboutEquals(r,s,l){if(Math.abs(s-this.getY())<=r&&Math.abs(l-this.getX())<=r){const u=Math.abs(r-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(r,s,l){const u=(this.getX()+s)/2,f=(this.getY()+r)/2,g=(this.estimatedModuleSize+l)/2;return new Rs(u,f,g)}}class ai{constructor(r,s,l,u,f,g,y){this.image=r,this.startX=s,this.startY=l,this.width=u,this.height=f,this.moduleSize=g,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,s=this.height,l=this.width,u=r+l,f=this.startY+s/2,g=new Int32Array(3),y=this.image;for(let _=0;_<s;_++){const b=f+((_&1)===0?Math.floor((_+1)/2):-Math.floor((_+1)/2));g[0]=0,g[1]=0,g[2]=0;let I=r;for(;I<u&&!y.get(I,b);)I++;let M=0;for(;I<u;){if(y.get(I,b))if(M===1)g[1]++;else if(M===2){if(this.foundPatternCross(g)){const L=this.handlePossibleCenter(g,b,I);if(L!==null)return L}g[0]=g[2],g[1]=1,g[2]=0,M=1}else g[++M]++;else M===1&&M++,g[M]++;I++}if(this.foundPatternCross(g)){const L=this.handlePossibleCenter(g,b,u);if(L!==null)return L}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new oe}static centerFromEnd(r,s){return s-r[2]-r[1]/2}foundPatternCross(r){const s=this.moduleSize,l=s/2;for(let u=0;u<3;u++)if(Math.abs(s-r[u])>=l)return!1;return!0}crossCheckVertical(r,s,l,u){const f=this.image,g=f.getHeight(),y=this.crossCheckStateCount;y[0]=0,y[1]=0,y[2]=0;let _=r;for(;_>=0&&f.get(s,_)&&y[1]<=l;)y[1]++,_--;if(_<0||y[1]>l)return NaN;for(;_>=0&&!f.get(s,_)&&y[0]<=l;)y[0]++,_--;if(y[0]>l)return NaN;for(_=r+1;_<g&&f.get(s,_)&&y[1]<=l;)y[1]++,_++;if(_===g||y[1]>l)return NaN;for(;_<g&&!f.get(s,_)&&y[2]<=l;)y[2]++,_++;if(y[2]>l)return NaN;const b=y[0]+y[1]+y[2];return 5*Math.abs(b-u)>=2*u?NaN:this.foundPatternCross(y)?ai.centerFromEnd(y,_):NaN}handlePossibleCenter(r,s,l){const u=r[0]+r[1]+r[2],f=ai.centerFromEnd(r,l),g=this.crossCheckVertical(s,f,2*r[1],u);if(!isNaN(g)){const y=(r[0]+r[1]+r[2])/3;for(const b of this.possibleCenters)if(b.aboutEquals(y,g,f))return b.combineEstimate(g,f,y);const _=new Rs(f,g,y);this.possibleCenters.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return null}}class Ys extends Xe{constructor(r,s,l,u){super(r,s),this.estimatedModuleSize=l,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,s,l){if(Math.abs(s-this.getY())<=r&&Math.abs(l-this.getX())<=r){const u=Math.abs(r-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(r,s,l){const u=this.count+1,f=(this.count*this.getX()+s)/u,g=(this.count*this.getY()+r)/u,y=(this.count*this.estimatedModuleSize+l)/u;return new Ys(f,g,y,u)}}class Si{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Pn{constructor(r,s){this.image=r,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const s=r!=null&&r.get(je.TRY_HARDER)!==void 0,l=r!=null&&r.get(je.PURE_BARCODE)!==void 0,u=this.image,f=u.getHeight(),g=u.getWidth();let y=Math.floor(3*f/(4*Pn.MAX_MODULES));(y<Pn.MIN_SKIP||s)&&(y=Pn.MIN_SKIP);let _=!1;const b=new Int32Array(5);for(let M=y-1;M<f&&!_;M+=y){b[0]=0,b[1]=0,b[2]=0,b[3]=0,b[4]=0;let L=0;for(let H=0;H<g;H++)if(u.get(H,M))(L&1)===1&&L++,b[L]++;else if((L&1)===0)if(L===4)if(Pn.foundPatternCross(b)){if(this.handlePossibleCenter(b,M,H,l)===!0)if(y=2,this.hasSkipped===!0)_=this.haveMultiplyConfirmedCenters();else{const J=this.findRowSkip();J>b[2]&&(M+=J-b[2]-y,H=g-1)}else{b[0]=b[2],b[1]=b[3],b[2]=b[4],b[3]=1,b[4]=0,L=3;continue}L=0,b[0]=0,b[1]=0,b[2]=0,b[3]=0,b[4]=0}else b[0]=b[2],b[1]=b[3],b[2]=b[4],b[3]=1,b[4]=0,L=3;else b[++L]++;else b[L]++;Pn.foundPatternCross(b)&&this.handlePossibleCenter(b,M,g,l)===!0&&(y=b[0],this.hasSkipped&&(_=this.haveMultiplyConfirmedCenters()))}const I=this.selectBestPatterns();return Xe.orderBestPatterns(I),new Si(I)}static centerFromEnd(r,s){return s-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let s=0;for(let f=0;f<5;f++){const g=r[f];if(g===0)return!1;s+=g}if(s<7)return!1;const l=s/7,u=l/2;return Math.abs(l-r[0])<u&&Math.abs(l-r[1])<u&&Math.abs(3*l-r[2])<3*u&&Math.abs(l-r[3])<u&&Math.abs(l-r[4])<u}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,s,l,u){const f=this.getCrossCheckStateCount();let g=0;const y=this.image;for(;r>=g&&s>=g&&y.get(s-g,r-g);)f[2]++,g++;if(r<g||s<g)return!1;for(;r>=g&&s>=g&&!y.get(s-g,r-g)&&f[1]<=l;)f[1]++,g++;if(r<g||s<g||f[1]>l)return!1;for(;r>=g&&s>=g&&y.get(s-g,r-g)&&f[0]<=l;)f[0]++,g++;if(f[0]>l)return!1;const _=y.getHeight(),b=y.getWidth();for(g=1;r+g<_&&s+g<b&&y.get(s+g,r+g);)f[2]++,g++;if(r+g>=_||s+g>=b)return!1;for(;r+g<_&&s+g<b&&!y.get(s+g,r+g)&&f[3]<l;)f[3]++,g++;if(r+g>=_||s+g>=b||f[3]>=l)return!1;for(;r+g<_&&s+g<b&&y.get(s+g,r+g)&&f[4]<l;)f[4]++,g++;if(f[4]>=l)return!1;const I=f[0]+f[1]+f[2]+f[3]+f[4];return Math.abs(I-u)<2*u&&Pn.foundPatternCross(f)}crossCheckVertical(r,s,l,u){const f=this.image,g=f.getHeight(),y=this.getCrossCheckStateCount();let _=r;for(;_>=0&&f.get(s,_);)y[2]++,_--;if(_<0)return NaN;for(;_>=0&&!f.get(s,_)&&y[1]<=l;)y[1]++,_--;if(_<0||y[1]>l)return NaN;for(;_>=0&&f.get(s,_)&&y[0]<=l;)y[0]++,_--;if(y[0]>l)return NaN;for(_=r+1;_<g&&f.get(s,_);)y[2]++,_++;if(_===g)return NaN;for(;_<g&&!f.get(s,_)&&y[3]<l;)y[3]++,_++;if(_===g||y[3]>=l)return NaN;for(;_<g&&f.get(s,_)&&y[4]<l;)y[4]++,_++;if(y[4]>=l)return NaN;const b=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(b-u)>=2*u?NaN:Pn.foundPatternCross(y)?Pn.centerFromEnd(y,_):NaN}crossCheckHorizontal(r,s,l,u){const f=this.image,g=f.getWidth(),y=this.getCrossCheckStateCount();let _=r;for(;_>=0&&f.get(_,s);)y[2]++,_--;if(_<0)return NaN;for(;_>=0&&!f.get(_,s)&&y[1]<=l;)y[1]++,_--;if(_<0||y[1]>l)return NaN;for(;_>=0&&f.get(_,s)&&y[0]<=l;)y[0]++,_--;if(y[0]>l)return NaN;for(_=r+1;_<g&&f.get(_,s);)y[2]++,_++;if(_===g)return NaN;for(;_<g&&!f.get(_,s)&&y[3]<l;)y[3]++,_++;if(_===g||y[3]>=l)return NaN;for(;_<g&&f.get(_,s)&&y[4]<l;)y[4]++,_++;if(y[4]>=l)return NaN;const b=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(b-u)>=u?NaN:Pn.foundPatternCross(y)?Pn.centerFromEnd(y,_):NaN}handlePossibleCenter(r,s,l,u){const f=r[0]+r[1]+r[2]+r[3]+r[4];let g=Pn.centerFromEnd(r,l),y=this.crossCheckVertical(s,Math.floor(g),r[2],f);if(!isNaN(y)&&(g=this.crossCheckHorizontal(Math.floor(g),Math.floor(y),r[2],f),!isNaN(g)&&(!u||this.crossCheckDiagonal(Math.floor(y),Math.floor(g),r[2],f)))){const _=f/7;let b=!1;const I=this.possibleCenters;for(let M=0,L=I.length;M<L;M++){const H=I[M];if(H.aboutEquals(_,y,g)){I[M]=H.combineEstimate(y,g,_),b=!0;break}}if(!b){const M=new Ys(g,y,_);I.push(M),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(M)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const l of this.possibleCenters)if(l.getCount()>=Pn.CENTER_QUORUM)if(s==null)s=l;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-l.getX())-Math.abs(s.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,s=0;const l=this.possibleCenters.length;for(const g of this.possibleCenters)g.getCount()>=Pn.CENTER_QUORUM&&(r++,s+=g.getEstimatedModuleSize());if(r<3)return!1;const u=s/l;let f=0;for(const g of this.possibleCenters)f+=Math.abs(g.getEstimatedModuleSize()-u);return f<=.05*s}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new oe;const s=this.possibleCenters;let l;if(r>3){let u=0,f=0;for(const _ of this.possibleCenters){const b=_.getEstimatedModuleSize();u+=b,f+=b*b}l=u/r;let g=Math.sqrt(f/r-l*l);s.sort((_,b)=>{const I=Math.abs(b.getEstimatedModuleSize()-l),M=Math.abs(_.getEstimatedModuleSize()-l);return I<M?-1:I>M?1:0});const y=Math.max(.2*l,g);for(let _=0;_<s.length&&s.length>3;_++){const b=s[_];Math.abs(b.getEstimatedModuleSize()-l)>y&&(s.splice(_,1),_--)}}if(s.length>3){let u=0;for(const f of s)u+=f.getEstimatedModuleSize();l=u/s.length,s.sort((f,g)=>{if(g.getCount()===f.getCount()){const y=Math.abs(g.getEstimatedModuleSize()-l),_=Math.abs(f.getEstimatedModuleSize()-l);return y<_?1:y>_?-1:0}else return g.getCount()-f.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}Pn.CENTER_QUORUM=2,Pn.MIN_SKIP=3,Pn.MAX_MODULES=57;class oi{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(je.NEED_RESULT_POINT_CALLBACK);const l=new Pn(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(l)}processFinderPatternInfo(r){const s=r.getTopLeft(),l=r.getTopRight(),u=r.getBottomLeft(),f=this.calculateModuleSize(s,l,u);if(f<1)throw new oe("No pattern found in proccess finder.");const g=oi.computeDimension(s,l,u,f),y=it.getProvisionalVersionForDimension(g),_=y.getDimensionForVersion()-7;let b=null;if(y.getAlignmentPatternCenters().length>0){const H=l.getX()-s.getX()+u.getX(),Q=l.getY()-s.getY()+u.getY(),J=1-3/_,se=Math.floor(s.getX()+J*(H-s.getX())),Ee=Math.floor(s.getY()+J*(Q-s.getY()));for(let Ue=4;Ue<=16;Ue<<=1)try{b=this.findAlignmentInRegion(f,se,Ee,Ue);break}catch(Pe){if(!(Pe instanceof oe))throw Pe}}const I=oi.createTransform(s,l,u,b,g),M=oi.sampleGrid(this.image,I,g);let L;return b===null?L=[u,s,l]:L=[u,s,l,b],new jr(M,L)}static createTransform(r,s,l,u,f){const g=f-3.5;let y,_,b,I;return u!==null?(y=u.getX(),_=u.getY(),b=g-3,I=b):(y=s.getX()-r.getX()+l.getX(),_=s.getY()-r.getY()+l.getY(),b=g,I=g),De.quadrilateralToQuadrilateral(3.5,3.5,g,3.5,b,I,3.5,g,r.getX(),r.getY(),s.getX(),s.getY(),y,_,l.getX(),l.getY())}static sampleGrid(r,s,l){return Je.getInstance().sampleGridWithTransform(r,l,l,s)}static computeDimension(r,s,l,u){const f=Ve.round(Xe.distance(r,s)/u),g=Ve.round(Xe.distance(r,l)/u);let y=Math.floor((f+g)/2)+7;switch(y&3){case 0:y++;break;case 2:y--;break;case 3:throw new oe("Dimensions could be not found.")}return y}calculateModuleSize(r,s,l){return(this.calculateModuleSizeOneWay(r,s)+this.calculateModuleSizeOneWay(r,l))/2}calculateModuleSizeOneWay(r,s){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(s.getX()),Math.floor(s.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(l)?u/7:isNaN(u)?l/7:(l+u)/14}sizeOfBlackWhiteBlackRunBothWays(r,s,l,u){let f=this.sizeOfBlackWhiteBlackRun(r,s,l,u),g=1,y=r-(l-r);y<0?(g=r/(r-y),y=0):y>=this.image.getWidth()&&(g=(this.image.getWidth()-1-r)/(y-r),y=this.image.getWidth()-1);let _=Math.floor(s-(u-s)*g);return g=1,_<0?(g=s/(s-_),_=0):_>=this.image.getHeight()&&(g=(this.image.getHeight()-1-s)/(_-s),_=this.image.getHeight()-1),y=Math.floor(r+(y-r)*g),f+=this.sizeOfBlackWhiteBlackRun(r,s,y,_),f-1}sizeOfBlackWhiteBlackRun(r,s,l,u){const f=Math.abs(u-s)>Math.abs(l-r);if(f){let H=r;r=s,s=H,H=l,l=u,u=H}const g=Math.abs(l-r),y=Math.abs(u-s);let _=-g/2;const b=r<l?1:-1,I=s<u?1:-1;let M=0;const L=l+b;for(let H=r,Q=s;H!==L;H+=b){const J=f?Q:H,se=f?H:Q;if(M===1===this.image.get(J,se)){if(M===2)return Ve.distance(H,Q,r,s);M++}if(_+=y,_>0){if(Q===u)break;Q+=I,_-=g}}return M===2?Ve.distance(l+b,u,r,s):NaN}findAlignmentInRegion(r,s,l,u){const f=Math.floor(u*r),g=Math.max(0,s-f),y=Math.min(this.image.getWidth()-1,s+f);if(y-g<r*3)throw new oe("Alignment top exceeds estimated module size.");const _=Math.max(0,l-f),b=Math.min(this.image.getHeight()-1,l+f);if(b-_<r*3)throw new oe("Alignment bottom exceeds estimated module size.");return new ai(this.image,g,_,y-g,b-_,r,this.resultPointCallback).find()}}class li{constructor(){this.decoder=new Is}getDecoder(){return this.decoder}decode(r,s){let l,u;if(s!=null&&s.get(je.PURE_BARCODE)!==void 0){const _=li.extractPureBits(r.getBlackMatrix());l=this.decoder.decodeBitMatrix(_,s),u=li.NO_POINTS}else{const _=new oi(r.getBlackMatrix()).detect(s);l=this.decoder.decodeBitMatrix(_.getBits(),s),u=_.getPoints()}l.getOther()instanceof Oo&&l.getOther().applyMirroredCorrection(u);const f=new ye(l.getText(),l.getRawBytes(),void 0,u,we.QR_CODE,void 0),g=l.getByteSegments();g!==null&&f.putMetadata(at.BYTE_SEGMENTS,g);const y=l.getECLevel();return y!==null&&f.putMetadata(at.ERROR_CORRECTION_LEVEL,y),l.hasStructuredAppend()&&(f.putMetadata(at.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),f.putMetadata(at.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),f}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(s===null||l===null)throw new oe;const u=this.moduleSize(s,r);let f=s[1],g=l[1],y=s[0],_=l[0];if(y>=_||f>=g)throw new oe;if(g-f!==_-y&&(_=y+(g-f),_>=r.getWidth()))throw new oe;const b=Math.round((_-y+1)/u),I=Math.round((g-f+1)/u);if(b<=0||I<=0)throw new oe;if(I!==b)throw new oe;const M=Math.floor(u/2);f+=M,y+=M;const L=y+Math.floor((b-1)*u)-_;if(L>0){if(L>M)throw new oe;y-=L}const H=f+Math.floor((I-1)*u)-g;if(H>0){if(H>M)throw new oe;f-=H}const Q=new Qe(b,I);for(let J=0;J<I;J++){const se=f+Math.floor(J*u);for(let Ee=0;Ee<b;Ee++)r.get(y+Math.floor(Ee*u),se)&&Q.set(Ee,J)}return Q}static moduleSize(r,s){const l=s.getHeight(),u=s.getWidth();let f=r[0],g=r[1],y=!0,_=0;for(;f<u&&g<l;){if(y!==s.get(f,g)){if(++_===5)break;y=!y}f++,g++}if(f===u||g===l)throw new oe;return(f-r[0])/7}}li.NO_POINTS=new Array;class gt{PDF417Common(){}static getBitCountSum(r){return Ve.sum(r)}static toIntArray(r){if(r==null||!r.length)return gt.EMPTY_INT_ARRAY;const s=new Int32Array(r.length);let l=0;for(const u of r)s[l++]=u;return s}static getCodeword(r){const s=Le.binarySearch(gt.SYMBOL_TABLE,r&262143);return s<0?-1:(gt.CODEWORD_TABLE[s]-1)%gt.NUMBER_OF_CODEWORDS}}gt.NUMBER_OF_CODEWORDS=929,gt.MAX_CODEWORDS_IN_BARCODE=gt.NUMBER_OF_CODEWORDS-1,gt.MIN_ROWS_IN_BARCODE=3,gt.MAX_ROWS_IN_BARCODE=90,gt.MODULES_IN_CODEWORD=17,gt.MODULES_IN_STOP_PATTERN=18,gt.BARS_IN_MODULE=8,gt.EMPTY_INT_ARRAY=new Int32Array([]),gt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),gt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ns{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class xt{static detectMultiple(r,s,l){let u=r.getBlackMatrix(),f=xt.detect(l,u);return f.length||(u=u.clone(),u.rotate180(),f=xt.detect(l,u)),new Ns(u,f)}static detect(r,s){const l=new Array;let u=0,f=0,g=!1;for(;u<s.getHeight();){const y=xt.findVertices(s,u,f);if(y[0]==null&&y[3]==null){if(!g)break;g=!1,f=0;for(const _ of l)_[1]!=null&&(u=Math.trunc(Math.max(u,_[1].getY()))),_[3]!=null&&(u=Math.max(u,Math.trunc(_[3].getY())));u+=xt.ROW_STEP;continue}if(g=!0,l.push(y),!r)break;y[2]!=null?(f=Math.trunc(y[2].getX()),u=Math.trunc(y[2].getY())):(f=Math.trunc(y[4].getX()),u=Math.trunc(y[4].getY()))}return l}static findVertices(r,s,l){const u=r.getHeight(),f=r.getWidth(),g=new Array(8);return xt.copyToResult(g,xt.findRowsWithPattern(r,u,f,s,l,xt.START_PATTERN),xt.INDEXES_START_PATTERN),g[4]!=null&&(l=Math.trunc(g[4].getX()),s=Math.trunc(g[4].getY())),xt.copyToResult(g,xt.findRowsWithPattern(r,u,f,s,l,xt.STOP_PATTERN),xt.INDEXES_STOP_PATTERN),g}static copyToResult(r,s,l){for(let u=0;u<l.length;u++)r[l[u]]=s[u]}static findRowsWithPattern(r,s,l,u,f,g){const y=new Array(4);let _=!1;const b=new Int32Array(g.length);for(;u<s;u+=xt.ROW_STEP){let M=xt.findGuardPattern(r,f,u,l,!1,g,b);if(M!=null){for(;u>0;){const L=xt.findGuardPattern(r,f,--u,l,!1,g,b);if(L!=null)M=L;else{u++;break}}y[0]=new Xe(M[0],u),y[1]=new Xe(M[1],u),_=!0;break}}let I=u+1;if(_){let M=0,L=Int32Array.from([Math.trunc(y[0].getX()),Math.trunc(y[1].getX())]);for(;I<s;I++){const H=xt.findGuardPattern(r,L[0],I,l,!1,g,b);if(H!=null&&Math.abs(L[0]-H[0])<xt.MAX_PATTERN_DRIFT&&Math.abs(L[1]-H[1])<xt.MAX_PATTERN_DRIFT)L=H,M=0;else{if(M>xt.SKIPPED_ROW_COUNT_MAX)break;M++}}I-=M+1,y[2]=new Xe(L[0],I),y[3]=new Xe(L[1],I)}return I-u<xt.BARCODE_MIN_HEIGHT&&Le.fill(y,null),y}static findGuardPattern(r,s,l,u,f,g,y){Le.fillWithin(y,0,y.length,0);let _=s,b=0;for(;r.get(_,l)&&_>0&&b++<xt.MAX_PIXEL_DRIFT;)_--;let I=_,M=0,L=g.length;for(let H=f;I<u;I++)if(r.get(I,l)!==H)y[M]++;else{if(M===L-1){if(xt.patternMatchVariance(y,g,xt.MAX_INDIVIDUAL_VARIANCE)<xt.MAX_AVG_VARIANCE)return new Int32Array([_,I]);_+=y[0]+y[1],le.arraycopy(y,2,y,0,M-1),y[M-1]=0,y[M]=0,M--}else M++;y[M]=1,H=!H}return M===L-1&&xt.patternMatchVariance(y,g,xt.MAX_INDIVIDUAL_VARIANCE)<xt.MAX_AVG_VARIANCE?new Int32Array([_,I-1]):null}static patternMatchVariance(r,s,l){let u=r.length,f=0,g=0;for(let b=0;b<u;b++)f+=r[b],g+=s[b];if(f<g)return 1/0;let y=f/g;l*=y;let _=0;for(let b=0;b<u;b++){let I=r[b],M=s[b]*y,L=I>M?I-M:M-I;if(L>l)return 1/0;_+=L}return _/f}}xt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),xt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),xt.MAX_AVG_VARIANCE=.42,xt.MAX_INDIVIDUAL_VARIANCE=.8,xt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),xt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),xt.MAX_PIXEL_DRIFT=3,xt.MAX_PATTERN_DRIFT=5,xt.SKIPPED_ROW_COUNT_MAX=25,xt.ROW_STEP=5,xt.BARCODE_MIN_HEIGHT=10;class bn{constructor(r,s){if(s.length===0)throw new O;this.field=r;let l=s.length;if(l>1&&s[0]===0){let u=1;for(;u<l&&s[u]===0;)u++;u===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-u),le.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let u=0;for(let f of this.coefficients)u=this.field.add(u,f);return u}let s=this.coefficients[0],l=this.coefficients.length;for(let u=1;u<l;u++)s=this.field.add(this.field.multiply(r,s),this.coefficients[u]);return s}add(r){if(!this.field.equals(r.field))throw new O("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,l=r.coefficients;if(s.length>l.length){let g=s;s=l,l=g}let u=new Int32Array(l.length),f=l.length-s.length;le.arraycopy(l,0,u,0,f);for(let g=f;g<l.length;g++)u[g]=this.field.add(s[g-f],l[g]);return new bn(this.field,u)}subtract(r){if(!this.field.equals(r.field))throw new O("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof bn?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new O("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new bn(this.field,new Int32Array([0]));let s=this.coefficients,l=s.length,u=r.coefficients,f=u.length,g=new Int32Array(l+f-1);for(let y=0;y<l;y++){let _=s[y];for(let b=0;b<f;b++)g[y+b]=this.field.add(g[y+b],this.field.multiply(_,u[b]))}return new bn(this.field,g)}negative(){let r=this.coefficients.length,s=new Int32Array(r);for(let l=0;l<r;l++)s[l]=this.field.subtract(0,this.coefficients[l]);return new bn(this.field,s)}multiplyScalar(r){if(r===0)return new bn(this.field,new Int32Array([0]));if(r===1)return this;let s=this.coefficients.length,l=new Int32Array(s);for(let u=0;u<s;u++)l[u]=this.field.multiply(this.coefficients[u],r);return new bn(this.field,l)}multiplyByMonomial(r,s){if(r<0)throw new O;if(s===0)return new bn(this.field,new Int32Array([0]));let l=this.coefficients.length,u=new Int32Array(l+r);for(let f=0;f<l;f++)u[f]=this.field.multiply(this.coefficients[f],s);return new bn(this.field,u)}toString(){let r=new G;for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);l!==0&&(l<0?(r.append(" - "),l=-l):r.length()>0&&r.append(" + "),(s===0||l!==1)&&r.append(l),s!==0&&(s===1?r.append("x"):(r.append("x^"),r.append(s))))}return r.toString()}}class Ws{add(r,s){return(r+s)%this.modulus}subtract(r,s){return(this.modulus+r-s)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new O;return this.logTable[r]}inverse(r){if(r===0)throw new zn;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class En extends Ws{constructor(r,s){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let l=1;for(let u=0;u<r;u++)this.expTable[u]=l,l=l*s%r;for(let u=0;u<r-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new bn(this,new Int32Array([0])),this.one=new bn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new O;if(s===0)return this.zero;let l=new Int32Array(r+1);return l[0]=s,new bn(this,l)}}En.PDF417_GF=new En(gt.NUMBER_OF_CODEWORDS,3);class Vi{constructor(){this.field=En.PDF417_GF}decode(r,s,l){let u=new bn(this.field,r),f=new Int32Array(s),g=!1;for(let Q=s;Q>0;Q--){let J=u.evaluateAt(this.field.exp(Q));f[s-Q]=J,J!==0&&(g=!0)}if(!g)return 0;let y=this.field.getOne();if(l!=null)for(const Q of l){let J=this.field.exp(r.length-1-Q),se=new bn(this.field,new Int32Array([this.field.subtract(0,J),1]));y=y.multiply(se)}let _=new bn(this.field,f),b=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),_,s),I=b[0],M=b[1],L=this.findErrorLocations(I),H=this.findErrorMagnitudes(M,I,L);for(let Q=0;Q<L.length;Q++){let J=r.length-1-this.field.log(L[Q]);if(J<0)throw Y.getChecksumInstance();r[J]=this.field.subtract(r[J],H[Q])}return L.length}runEuclideanAlgorithm(r,s,l){if(r.getDegree()<s.getDegree()){let L=r;r=s,s=L}let u=r,f=s,g=this.field.getZero(),y=this.field.getOne();for(;f.getDegree()>=Math.round(l/2);){let L=u,H=g;if(u=f,g=y,u.isZero())throw Y.getChecksumInstance();f=L;let Q=this.field.getZero(),J=u.getCoefficient(u.getDegree()),se=this.field.inverse(J);for(;f.getDegree()>=u.getDegree()&&!f.isZero();){let Ee=f.getDegree()-u.getDegree(),Ue=this.field.multiply(f.getCoefficient(f.getDegree()),se);Q=Q.add(this.field.buildMonomial(Ee,Ue)),f=f.subtract(u.multiplyByMonomial(Ee,Ue))}y=Q.multiply(g).subtract(H).negative()}let _=y.getCoefficient(0);if(_===0)throw Y.getChecksumInstance();let b=this.field.inverse(_),I=y.multiply(b),M=f.multiply(b);return[I,M]}findErrorLocations(r){let s=r.getDegree(),l=new Int32Array(s),u=0;for(let f=1;f<this.field.getSize()&&u<s;f++)r.evaluateAt(f)===0&&(l[u]=this.field.inverse(f),u++);if(u!==s)throw Y.getChecksumInstance();return l}findErrorMagnitudes(r,s,l){let u=s.getDegree(),f=new Int32Array(u);for(let b=1;b<=u;b++)f[u-b]=this.field.multiply(b,s.getCoefficient(b));let g=new bn(this.field,f),y=l.length,_=new Int32Array(y);for(let b=0;b<y;b++){let I=this.field.inverse(l[b]),M=this.field.subtract(0,r.evaluateAt(I)),L=this.field.inverse(g.evaluateAt(I));_[b]=this.field.multiply(M,L)}return _}}class Ui{constructor(r,s,l,u,f){r instanceof Ui?this.constructor_2(r):this.constructor_1(r,s,l,u,f)}constructor_1(r,s,l,u,f){const g=s==null||l==null,y=u==null||f==null;if(g&&y)throw new oe;g?(s=new Xe(0,u.getY()),l=new Xe(0,f.getY())):y&&(u=new Xe(r.getWidth()-1,s.getY()),f=new Xe(r.getWidth()-1,l.getY())),this.image=r,this.topLeft=s,this.bottomLeft=l,this.topRight=u,this.bottomRight=f,this.minX=Math.trunc(Math.min(s.getX(),l.getX())),this.maxX=Math.trunc(Math.max(u.getX(),f.getX())),this.minY=Math.trunc(Math.min(s.getY(),u.getY())),this.maxY=Math.trunc(Math.max(l.getY(),f.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,s){return r==null?s:s==null?r:new Ui(r.image,r.topLeft,r.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(r,s,l){let u=this.topLeft,f=this.bottomLeft,g=this.topRight,y=this.bottomRight;if(r>0){let _=l?this.topLeft:this.topRight,b=Math.trunc(_.getY()-r);b<0&&(b=0);let I=new Xe(_.getX(),b);l?u=I:g=I}if(s>0){let _=l?this.bottomLeft:this.bottomRight,b=Math.trunc(_.getY()+s);b>=this.image.getHeight()&&(b=this.image.getHeight()-1);let I=new Xe(_.getX(),b);l?f=I:y=I}return new Ui(this.image,u,f,g,y)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ks{constructor(r,s,l,u){this.columnCount=r,this.errorCorrectionLevel=u,this.rowCountUpperPart=s,this.rowCountLowerPart=l,this.rowCount=s+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Es{constructor(){this.buffer=""}static form(r,s){let l=-1;function u(g,y,_,b,I,M){if(g==="%%")return"%";if(s[++l]===void 0)return;g=b?parseInt(b.substr(1)):void 0;let L=I?parseInt(I.substr(1)):void 0,H;switch(M){case"s":H=s[l];break;case"c":H=s[l][0];break;case"f":H=parseFloat(s[l]).toFixed(g);break;case"p":H=parseFloat(s[l]).toPrecision(g);break;case"e":H=parseFloat(s[l]).toExponential(g);break;case"x":H=parseInt(s[l]).toString(L||16);break;case"d":H=parseFloat(parseInt(s[l],L||10).toPrecision(g)).toFixed(0);break}H=typeof H=="object"?JSON.stringify(H):(+H).toString(L);let Q=parseInt(_),J=_&&_[0]+""=="0"?"0":" ";for(;H.length<Q;)H=y!==void 0?H+J:J+H;return H}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(f,u)}format(r,...s){this.buffer+=Es.form(r,s)}toString(){return this.buffer}}class Fi{constructor(r){this.boundingBox=new Ui(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let s=this.getCodeword(r);if(s!=null)return s;for(let l=1;l<Fi.MAX_NEARBY_DISTANCE;l++){let u=this.imageRowToCodewordIndex(r)-l;if(u>=0&&(s=this.codewords[u],s!=null)||(u=this.imageRowToCodewordIndex(r)+l,u<this.codewords.length&&(s=this.codewords[u],s!=null)))return s}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,s){this.codewords[this.imageRowToCodewordIndex(r)]=s}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new Es;let s=0;for(const l of this.codewords){if(l==null){r.format("%3d:    |   %n",s++);continue}r.format("%3d: %3d|%3d%n",s++,l.getRowNumber(),l.getValue())}return r.toString()}}Fi.MAX_NEARBY_DISTANCE=5;class yi{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let s=this.values.get(r);s==null&&(s=0),s++,this.values.set(r,s)}getValue(){let r=-1,s=new Array;for(const[l,u]of this.values.entries()){const f={getKey:()=>l,getValue:()=>u};f.getValue()>r?(r=f.getValue(),s=[],s.push(f.getKey())):f.getValue()===r&&s.push(f.getKey())}return gt.toIntArray(s)}getConfidence(r){return this.values.get(r)}}class Ii extends Fi{constructor(r,s){super(r),this._isLeft=s}setRowNumbers(){for(let r of this.getCodewords())r?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,r);let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),f=this._isLeft?l.getBottomLeft():l.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=this.imageRowToCodewordIndex(Math.trunc(f.getY())),_=-1,b=1,I=0;for(let M=g;M<y;M++){if(s[M]==null)continue;let L=s[M],H=L.getRowNumber()-_;if(H===0)I++;else if(H===1)b=Math.max(b,I),I=1,_=L.getRowNumber();else if(H<0||L.getRowNumber()>=r.getRowCount()||H>M)s[M]=null;else{let Q;b>2?Q=(b-2)*H:Q=H;let J=Q>=M;for(let se=1;se<=Q&&!J;se++)J=s[M-se]!=null;J?s[M]=null:(_=L.getRowNumber(),I=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let s=new Int32Array(r.getRowCount());for(let l of this.getCodewords())if(l!=null){let u=l.getRowNumber();if(u>=s.length)continue;s[u]++}return s}adjustIncompleteIndicatorColumnRowNumbers(r){let s=this.getBoundingBox(),l=this._isLeft?s.getTopLeft():s.getTopRight(),u=this._isLeft?s.getBottomLeft():s.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(l.getY())),g=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=this.getCodewords(),_=-1;for(let b=f;b<g;b++){if(y[b]==null)continue;let I=y[b];I.setRowNumberAsRowIndicatorColumn();let M=I.getRowNumber()-_;M===0||(M===1?_=I.getRowNumber():I.getRowNumber()>=r.getRowCount()?y[b]=null:_=I.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),s=new yi,l=new yi,u=new yi,f=new yi;for(let y of r){if(y==null)continue;y.setRowNumberAsRowIndicatorColumn();let _=y.getValue()%30,b=y.getRowNumber();switch(this._isLeft||(b+=2),b%3){case 0:l.setValue(_*3+1);break;case 1:f.setValue(_/3),u.setValue(_%3);break;case 2:s.setValue(_+1);break}}if(s.getValue().length===0||l.getValue().length===0||u.getValue().length===0||f.getValue().length===0||s.getValue()[0]<1||l.getValue()[0]+u.getValue()[0]<gt.MIN_ROWS_IN_BARCODE||l.getValue()[0]+u.getValue()[0]>gt.MAX_ROWS_IN_BARCODE)return null;let g=new Ks(s.getValue()[0],l.getValue()[0],u.getValue()[0],f.getValue()[0]);return this.removeIncorrectCodewords(r,g),g}removeIncorrectCodewords(r,s){for(let l=0;l<r.length;l++){let u=r[l];if(r[l]==null)continue;let f=u.getValue()%30,g=u.getRowNumber();if(g>s.getRowCount()){r[l]=null;continue}switch(this._isLeft||(g+=2),g%3){case 0:f*3+1!==s.getRowCountUpperPart()&&(r[l]=null);break;case 1:(Math.trunc(f/3)!==s.getErrorCorrectionLevel()||f%3!==s.getRowCountLowerPart())&&(r[l]=null);break;case 2:f+1!==s.getColumnCount()&&(r[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class ar{constructor(r,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=gt.MAX_CODEWORDS_IN_BARCODE,s;do s=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let l=this.detectionResultColumns[s].getCodewords();for(let u=0;u<l.length;u++)l[u]!=null&&(l[u].hasValidRowNumber()||this.adjustRowNumbers(s,u,l))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<r.length;l++)if(r[l]!=null&&s[l]!=null&&r[l].getRowNumber()===s[l].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let f=this.detectionResultColumns[u].getCodewords()[l];f!=null&&(f.setRowNumber(r[l].getRowNumber()),f.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<s.length;l++){if(s[l]==null)continue;let u=s[l].getRowNumber(),f=0;for(let g=this.barcodeColumnCount+1;g>0&&f<this.ADJUST_ROW_NUMBER_SKIP;g--){let y=this.detectionResultColumns[g].getCodewords()[l];y!=null&&(f=ar.adjustRowNumberIfValid(u,f,y),y.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,s=this.detectionResultColumns[0].getCodewords();for(let l=0;l<s.length;l++){if(s[l]==null)continue;let u=s[l].getRowNumber(),f=0;for(let g=1;g<this.barcodeColumnCount+1&&f<this.ADJUST_ROW_NUMBER_SKIP;g++){let y=this.detectionResultColumns[g].getCodewords()[l];y!=null&&(f=ar.adjustRowNumberIfValid(u,f,y),y.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,s,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(r)?(l.setRowNumber(r),s=0):++s),s}adjustRowNumbers(r,s,l){if(!this.detectionResultColumns[r-1])return;let u=l[s],f=this.detectionResultColumns[r-1].getCodewords(),g=f;this.detectionResultColumns[r+1]!=null&&(g=this.detectionResultColumns[r+1].getCodewords());let y=new Array(14);y[2]=f[s],y[3]=g[s],s>0&&(y[0]=l[s-1],y[4]=f[s-1],y[5]=g[s-1]),s>1&&(y[8]=l[s-2],y[10]=f[s-2],y[11]=g[s-2]),s<l.length-1&&(y[1]=l[s+1],y[6]=f[s+1],y[7]=g[s+1]),s<l.length-2&&(y[9]=l[s+2],y[12]=f[s+2],y[13]=g[s+2]);for(let _ of y)if(ar.adjustRowNumber(u,_))return}static adjustRowNumber(r,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===r.getBucket()?(r.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,s){this.detectionResultColumns[r]=s}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new Es;for(let l=0;l<r.getCodewords().length;l++){s.format("CW %3d:",l);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){s.format("    |   ");continue}let f=this.detectionResultColumns[u].getCodewords()[l];if(f==null){s.format("    |   ");continue}s.format(" %3d|%3d",f.getRowNumber(),f.getValue())}s.format("%n")}return s.toString()}}class Ei{constructor(r,s,l,u){this.rowNumber=Ei.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(s),this.bucket=Math.trunc(l),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==Ei.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}Ei.BARCODE_ROW_UNKNOWN=-1;class qn{static initialize(){for(let r=0;r<gt.SYMBOL_TABLE.length;r++){let s=gt.SYMBOL_TABLE[r],l=s&1;for(let u=0;u<gt.BARS_IN_MODULE;u++){let f=0;for(;(s&1)===l;)f+=1,s>>=1;l=s&1,qn.RATIOS_TABLE[r]||(qn.RATIOS_TABLE[r]=new Array(gt.BARS_IN_MODULE)),qn.RATIOS_TABLE[r][gt.BARS_IN_MODULE-u-1]=Math.fround(f/gt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let s=qn.getDecodedCodewordValue(qn.sampleBitCounts(r));return s!==-1?s:qn.getClosestDecodedValue(r)}static sampleBitCounts(r){let s=Ve.sum(r),l=new Int32Array(gt.BARS_IN_MODULE),u=0,f=0;for(let g=0;g<gt.MODULES_IN_CODEWORD;g++){let y=s/(2*gt.MODULES_IN_CODEWORD)+g*s/gt.MODULES_IN_CODEWORD;f+r[u]<=y&&(f+=r[u],u++),l[u]++}return l}static getDecodedCodewordValue(r){let s=qn.getBitValue(r);return gt.getCodeword(s)===-1?-1:s}static getBitValue(r){let s=0;for(let l=0;l<r.length;l++)for(let u=0;u<r[l];u++)s=s<<1|(l%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(r){let s=Ve.sum(r),l=new Array(gt.BARS_IN_MODULE);if(s>1)for(let g=0;g<l.length;g++)l[g]=Math.fround(r[g]/s);let u=Et.MAX_VALUE,f=-1;this.bSymbolTableReady||qn.initialize();for(let g=0;g<qn.RATIOS_TABLE.length;g++){let y=0,_=qn.RATIOS_TABLE[g];for(let b=0;b<gt.BARS_IN_MODULE;b++){let I=Math.fround(_[b]-l[b]);if(y+=Math.fround(I*I),y>=u)break}y<u&&(u=y,f=gt.SYMBOL_TABLE[g])}return f}}qn.bSymbolTableReady=!1,qn.RATIOS_TABLE=new Array(gt.SYMBOL_TABLE.length).map(D=>new Array(gt.BARS_IN_MODULE));class xs{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class Na{static parseLong(r,s=void 0){return parseInt(r,s)}}class _s extends A{}_s.kind="NullPointerException";class Oa{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,s,l){if(r==null)throw new _s;if(s<0||s>r.length||l<0||s+l>r.length||s+l<0)throw new de;if(l===0)return;for(let u=0;u<l;u++)this.write(r[s+u])}flush(){}close(){}}class $i extends A{}class Da extends Oa{constructor(r=32){if(super(),this.count=0,r<0)throw new O("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let l=this.buf.length<<1;if(l-r<0&&(l=r),l<0){if(r<0)throw new $i;l=me.MAX_VALUE}this.buf=Le.copyOfUint8Array(this.buf,l)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,s,l){if(s<0||s>r.length||l<0||s+l-r.length>0)throw new de;this.ensureCapacity(this.count+l),le.arraycopy(r,s,this.buf,this.count,l),this.count+=l}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return Le.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var fn;(function(D){D[D.ALPHA=0]="ALPHA",D[D.LOWER=1]="LOWER",D[D.MIXED=2]="MIXED",D[D.PUNCT=3]="PUNCT",D[D.ALPHA_SHIFT=4]="ALPHA_SHIFT",D[D.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(fn||(fn={}));function Os(){if(typeof window<"u")return window.BigInt||null;if(typeof zh<"u")return zh.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Qs;function zi(D){if(typeof Qs>"u"&&(Qs=Os()),Qs===null)throw new Error("BigInt is not supported!");return Qs(D)}function Zs(){let D=[];D[0]=zi(1);let r=zi(900);D[1]=r;for(let s=2;s<16;s++)D[s]=D[s-1]*r;return D}class pe{static decode(r,s){let l=new G(""),u=V.ISO8859_1;l.enableDecoding(u);let f=1,g=r[f++],y=new xs;for(;f<r[0];){switch(g){case pe.TEXT_COMPACTION_MODE_LATCH:f=pe.textCompaction(r,f,l);break;case pe.BYTE_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:f=pe.byteCompaction(g,r,u,f,l);break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[f++]);break;case pe.NUMERIC_COMPACTION_MODE_LATCH:f=pe.numericCompaction(r,f,l);break;case pe.ECI_CHARSET:V.getCharacterSetECIByValue(r[f++]);break;case pe.ECI_GENERAL_PURPOSE:f+=2;break;case pe.ECI_USER_DEFINED:f++;break;case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:f=pe.decodeMacroBlock(r,f,y);break;case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:throw new F;default:f--,f=pe.textCompaction(r,f,l);break}if(f<r.length)g=r[f++];else throw F.getFormatInstance()}if(l.length()===0)throw F.getFormatInstance();let _=new wt(null,l.toString(),null,s);return _.setOther(y),_}static decodeMacroBlock(r,s,l){if(s+pe.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw F.getFormatInstance();let u=new Int32Array(pe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let y=0;y<pe.NUMBER_OF_SEQUENCE_CODEWORDS;y++,s++)u[y]=r[s];l.setSegmentIndex(me.parseInt(pe.decodeBase900toBase10(u,pe.NUMBER_OF_SEQUENCE_CODEWORDS)));let f=new G;s=pe.textCompaction(r,s,f),l.setFileId(f.toString());let g=-1;for(r[s]===pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(g=s+1);s<r[0];)switch(r[s]){case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,r[s]){case pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let y=new G;s=pe.textCompaction(r,s+1,y),l.setFileName(y.toString());break;case pe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let _=new G;s=pe.textCompaction(r,s+1,_),l.setSender(_.toString());break;case pe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let b=new G;s=pe.textCompaction(r,s+1,b),l.setAddressee(b.toString());break;case pe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let I=new G;s=pe.numericCompaction(r,s+1,I),l.setSegmentCount(me.parseInt(I.toString()));break;case pe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let M=new G;s=pe.numericCompaction(r,s+1,M),l.setTimestamp(Na.parseLong(M.toString()));break;case pe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let L=new G;s=pe.numericCompaction(r,s+1,L),l.setChecksum(me.parseInt(L.toString()));break;case pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let H=new G;s=pe.numericCompaction(r,s+1,H),l.setFileSize(Na.parseLong(H.toString()));break;default:throw F.getFormatInstance()}break;case pe.MACRO_PDF417_TERMINATOR:s++,l.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(g!==-1){let y=s-g;l.isLastSegment()&&y--,l.setOptionalData(Le.copyOfRange(r,g,g+y))}return s}static textCompaction(r,s,l){let u=new Int32Array((r[0]-s)*2),f=new Int32Array((r[0]-s)*2),g=0,y=!1;for(;s<r[0]&&!y;){let _=r[s++];if(_<pe.TEXT_COMPACTION_MODE_LATCH)u[g]=_/30,u[g+1]=_%30,g+=2;else switch(_){case pe.TEXT_COMPACTION_MODE_LATCH:u[g++]=pe.TEXT_COMPACTION_MODE_LATCH;break;case pe.BYTE_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:case pe.NUMERIC_COMPACTION_MODE_LATCH:case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:s--,y=!0;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[g]=pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,_=r[s++],f[g]=_,g++;break}}return pe.decodeTextCompaction(u,f,g,l),s}static decodeTextCompaction(r,s,l,u){let f=fn.ALPHA,g=fn.ALPHA,y=0;for(;y<l;){let _=r[y],b="";switch(f){case fn.ALPHA:if(_<26)b=String.fromCharCode(65+_);else switch(_){case 26:b=" ";break;case pe.LL:f=fn.LOWER;break;case pe.ML:f=fn.MIXED;break;case pe.PS:g=f,f=fn.PUNCT_SHIFT;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case pe.TEXT_COMPACTION_MODE_LATCH:f=fn.ALPHA;break}break;case fn.LOWER:if(_<26)b=String.fromCharCode(97+_);else switch(_){case 26:b=" ";break;case pe.AS:g=f,f=fn.ALPHA_SHIFT;break;case pe.ML:f=fn.MIXED;break;case pe.PS:g=f,f=fn.PUNCT_SHIFT;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case pe.TEXT_COMPACTION_MODE_LATCH:f=fn.ALPHA;break}break;case fn.MIXED:if(_<pe.PL)b=pe.MIXED_CHARS[_];else switch(_){case pe.PL:f=fn.PUNCT;break;case 26:b=" ";break;case pe.LL:f=fn.LOWER;break;case pe.AL:f=fn.ALPHA;break;case pe.PS:g=f,f=fn.PUNCT_SHIFT;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case pe.TEXT_COMPACTION_MODE_LATCH:f=fn.ALPHA;break}break;case fn.PUNCT:if(_<pe.PAL)b=pe.PUNCT_CHARS[_];else switch(_){case pe.PAL:f=fn.ALPHA;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case pe.TEXT_COMPACTION_MODE_LATCH:f=fn.ALPHA;break}break;case fn.ALPHA_SHIFT:if(f=g,_<26)b=String.fromCharCode(65+_);else switch(_){case 26:b=" ";break;case pe.TEXT_COMPACTION_MODE_LATCH:f=fn.ALPHA;break}break;case fn.PUNCT_SHIFT:if(f=g,_<pe.PAL)b=pe.PUNCT_CHARS[_];else switch(_){case pe.PAL:f=fn.ALPHA;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case pe.TEXT_COMPACTION_MODE_LATCH:f=fn.ALPHA;break}break}b!==""&&u.append(b),y++}}static byteCompaction(r,s,l,u,f){let g=new Da,y=0,_=0,b=!1;switch(r){case pe.BYTE_COMPACTION_MODE_LATCH:let I=new Int32Array(6),M=s[u++];for(;u<s[0]&&!b;)switch(I[y++]=M,_=900*_+M,M=s[u++],M){case pe.TEXT_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH:case pe.NUMERIC_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:u--,b=!0;break;default:if(y%5===0&&y>0){for(let L=0;L<6;++L)g.write(Number(zi(_)>>zi(8*(5-L))));_=0,y=0}break}u===s[0]&&M<pe.TEXT_COMPACTION_MODE_LATCH&&(I[y++]=M);for(let L=0;L<y;L++)g.write(I[L]);break;case pe.BYTE_COMPACTION_MODE_LATCH_6:for(;u<s[0]&&!b;){let L=s[u++];if(L<pe.TEXT_COMPACTION_MODE_LATCH)y++,_=900*_+L;else switch(L){case pe.TEXT_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH:case pe.NUMERIC_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:u--,b=!0;break}if(y%5===0&&y>0){for(let H=0;H<6;++H)g.write(Number(zi(_)>>zi(8*(5-H))));_=0,y=0}}break}return f.append(X.decode(g.toByteArray(),l)),u}static numericCompaction(r,s,l){let u=0,f=!1,g=new Int32Array(pe.MAX_NUMERIC_CODEWORDS);for(;s<r[0]&&!f;){let y=r[s++];if(s===r[0]&&(f=!0),y<pe.TEXT_COMPACTION_MODE_LATCH)g[u]=y,u++;else switch(y){case pe.TEXT_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:s--,f=!0;break}(u%pe.MAX_NUMERIC_CODEWORDS===0||y===pe.NUMERIC_COMPACTION_MODE_LATCH||f)&&u>0&&(l.append(pe.decodeBase900toBase10(g,u)),u=0)}return s}static decodeBase900toBase10(r,s){let l=zi(0);for(let f=0;f<s;f++)l+=pe.EXP900[s-f-1]*zi(r[f]);let u=l.toString();if(u.charAt(0)!=="1")throw new F;return u.substring(1)}}pe.TEXT_COMPACTION_MODE_LATCH=900,pe.BYTE_COMPACTION_MODE_LATCH=901,pe.NUMERIC_COMPACTION_MODE_LATCH=902,pe.BYTE_COMPACTION_MODE_LATCH_6=924,pe.ECI_USER_DEFINED=925,pe.ECI_GENERAL_PURPOSE=926,pe.ECI_CHARSET=927,pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,pe.MACRO_PDF417_TERMINATOR=922,pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,pe.MAX_NUMERIC_CODEWORDS=15,pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,pe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,pe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,pe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,pe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,pe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,pe.PL=25,pe.LL=27,pe.AS=27,pe.ML=28,pe.AL=28,pe.PS=29,pe.PAL=29,pe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,pe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",pe.EXP900=Os()?Zs():[],pe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Mt{constructor(){}static decode(r,s,l,u,f,g,y){let _=new Ui(r,s,l,u,f),b=null,I=null,M;for(let Q=!0;;Q=!1){if(s!=null&&(b=Mt.getRowIndicatorColumn(r,_,s,!0,g,y)),u!=null&&(I=Mt.getRowIndicatorColumn(r,_,u,!1,g,y)),M=Mt.merge(b,I),M==null)throw oe.getNotFoundInstance();let J=M.getBoundingBox();if(Q&&J!=null&&(J.getMinY()<_.getMinY()||J.getMaxY()>_.getMaxY()))_=J;else break}M.setBoundingBox(_);let L=M.getBarcodeColumnCount()+1;M.setDetectionResultColumn(0,b),M.setDetectionResultColumn(L,I);let H=b!=null;for(let Q=1;Q<=L;Q++){let J=H?Q:L-Q;if(M.getDetectionResultColumn(J)!==void 0)continue;let se;J===0||J===L?se=new Ii(_,J===0):se=new Fi(_),M.setDetectionResultColumn(J,se);let Ee=-1,Ue=Ee;for(let Pe=_.getMinY();Pe<=_.getMaxY();Pe++){if(Ee=Mt.getStartColumn(M,J,Pe,H),Ee<0||Ee>_.getMaxX()){if(Ue===-1)continue;Ee=Ue}let Me=Mt.detectCodeword(r,_.getMinX(),_.getMaxX(),H,Ee,Pe,g,y);Me!=null&&(se.setCodeword(Pe,Me),Ue=Ee,g=Math.min(g,Me.getWidth()),y=Math.max(y,Me.getWidth()))}}return Mt.createDecoderResult(M)}static merge(r,s){if(r==null&&s==null)return null;let l=Mt.getBarcodeMetadata(r,s);if(l==null)return null;let u=Ui.merge(Mt.adjustBoundingBox(r),Mt.adjustBoundingBox(s));return new ar(l,u)}static adjustBoundingBox(r){if(r==null)return null;let s=r.getRowHeights();if(s==null)return null;let l=Mt.getMax(s),u=0;for(let y of s)if(u+=l-y,y>0)break;let f=r.getCodewords();for(let y=0;u>0&&f[y]==null;y++)u--;let g=0;for(let y=s.length-1;y>=0&&(g+=l-s[y],!(s[y]>0));y--);for(let y=f.length-1;g>0&&f[y]==null;y--)g--;return r.getBoundingBox().addMissingRows(u,g,r.isLeft())}static getMax(r){let s=-1;for(let l of r)s=Math.max(s,l);return s}static getBarcodeMetadata(r,s){let l;if(r==null||(l=r.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let u;return s==null||(u=s.getBarcodeMetadata())==null?l:l.getColumnCount()!==u.getColumnCount()&&l.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&l.getRowCount()!==u.getRowCount()?null:l}static getRowIndicatorColumn(r,s,l,u,f,g){let y=new Ii(s,u);for(let _=0;_<2;_++){let b=_===0?1:-1,I=Math.trunc(Math.trunc(l.getX()));for(let M=Math.trunc(Math.trunc(l.getY()));M<=s.getMaxY()&&M>=s.getMinY();M+=b){let L=Mt.detectCodeword(r,0,r.getWidth(),u,I,M,f,g);L!=null&&(y.setCodeword(M,L),u?I=L.getStartX():I=L.getEndX())}}return y}static adjustCodewordCount(r,s){let l=s[0][1],u=l.getValue(),f=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-Mt.getNumberOfECCodeWords(r.getBarcodeECLevel());if(u.length===0){if(f<1||f>gt.MAX_CODEWORDS_IN_BARCODE)throw oe.getNotFoundInstance();l.setValue(f)}else u[0]!==f&&l.setValue(f)}static createDecoderResult(r){let s=Mt.createBarcodeMatrix(r);Mt.adjustCodewordCount(r,s);let l=new Array,u=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),f=[],g=new Array;for(let _=0;_<r.getBarcodeRowCount();_++)for(let b=0;b<r.getBarcodeColumnCount();b++){let I=s[_][b+1].getValue(),M=_*r.getBarcodeColumnCount()+b;I.length===0?l.push(M):I.length===1?u[M]=I[0]:(g.push(M),f.push(I))}let y=new Array(f.length);for(let _=0;_<y.length;_++)y[_]=f[_];return Mt.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),u,gt.toIntArray(l),gt.toIntArray(g),y)}static createDecoderResultFromAmbiguousValues(r,s,l,u,f){let g=new Int32Array(u.length),y=100;for(;y-- >0;){for(let _=0;_<g.length;_++)s[u[_]]=f[_][g[_]];try{return Mt.decodeCodewords(s,r,l)}catch(_){if(!(_ instanceof Y))throw _}if(g.length===0)throw Y.getChecksumInstance();for(let _=0;_<g.length;_++)if(g[_]<f[_].length-1){g[_]++;break}else if(g[_]=0,_===g.length-1)throw Y.getChecksumInstance()}throw Y.getChecksumInstance()}static createBarcodeMatrix(r){let s=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let u=0;u<s.length;u++)for(let f=0;f<s[u].length;f++)s[u][f]=new yi;let l=0;for(let u of r.getDetectionResultColumns()){if(u!=null){for(let f of u.getCodewords())if(f!=null){let g=f.getRowNumber();if(g>=0){if(g>=s.length)continue;s[g][l].setValue(f.getValue())}}}l++}return s}static isValidBarcodeColumn(r,s){return s>=0&&s<=r.getBarcodeColumnCount()+1}static getStartColumn(r,s,l,u){let f=u?1:-1,g=null;if(Mt.isValidBarcodeColumn(r,s-f)&&(g=r.getDetectionResultColumn(s-f).getCodeword(l)),g!=null)return u?g.getEndX():g.getStartX();if(g=r.getDetectionResultColumn(s).getCodewordNearby(l),g!=null)return u?g.getStartX():g.getEndX();if(Mt.isValidBarcodeColumn(r,s-f)&&(g=r.getDetectionResultColumn(s-f).getCodewordNearby(l)),g!=null)return u?g.getEndX():g.getStartX();let y=0;for(;Mt.isValidBarcodeColumn(r,s-f);){s-=f;for(let _ of r.getDetectionResultColumn(s).getCodewords())if(_!=null)return(u?_.getEndX():_.getStartX())+f*y*(_.getEndX()-_.getStartX());y++}return u?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,s,l,u,f,g,y,_){f=Mt.adjustCodewordStartColumn(r,s,l,u,f,g);let b=Mt.getModuleBitCount(r,s,l,u,f,g);if(b==null)return null;let I,M=Ve.sum(b);if(u)I=f+M;else{for(let Q=0;Q<b.length/2;Q++){let J=b[Q];b[Q]=b[b.length-1-Q],b[b.length-1-Q]=J}I=f,f=I-M}if(!Mt.checkCodewordSkew(M,y,_))return null;let L=qn.getDecodedValue(b),H=gt.getCodeword(L);return H===-1?null:new Ei(f,I,Mt.getCodewordBucketNumber(L),H)}static getModuleBitCount(r,s,l,u,f,g){let y=f,_=new Int32Array(8),b=0,I=u?1:-1,M=u;for(;(u?y<l:y>=s)&&b<_.length;)r.get(y,g)===M?(_[b]++,y+=I):(b++,M=!M);return b===_.length||y===(u?l:s)&&b===_.length-1?_:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,s,l,u,f,g){let y=f,_=u?-1:1;for(let b=0;b<2;b++){for(;(u?y>=s:y<l)&&u===r.get(y,g);){if(Math.abs(f-y)>Mt.CODEWORD_SKEW_SIZE)return f;y+=_}_=-_,u=!u}return y}static checkCodewordSkew(r,s,l){return s-Mt.CODEWORD_SKEW_SIZE<=r&&r<=l+Mt.CODEWORD_SKEW_SIZE}static decodeCodewords(r,s,l){if(r.length===0)throw F.getFormatInstance();let u=1<<s+1,f=Mt.correctErrors(r,l,u);Mt.verifyCodewordCount(r,u);let g=pe.decode(r,""+s);return g.setErrorsCorrected(f),g.setErasures(l.length),g}static correctErrors(r,s,l){if(s!=null&&s.length>l/2+Mt.MAX_ERRORS||l<0||l>Mt.MAX_EC_CODEWORDS)throw Y.getChecksumInstance();return Mt.errorCorrection.decode(r,l,s)}static verifyCodewordCount(r,s){if(r.length<4)throw F.getFormatInstance();let l=r[0];if(l>r.length)throw F.getFormatInstance();if(l===0)if(s<r.length)r[0]=r.length-s;else throw F.getFormatInstance()}static getBitCountForCodeword(r){let s=new Int32Array(8),l=0,u=s.length-1;for(;!((r&1)!==l&&(l=r&1,u--,u<0));)s[u]++,r>>=1;return s}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return Mt.getCodewordBucketNumber(Mt.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let s=new Es;for(let l=0;l<r.length;l++){s.format("Row %2d: ",l);for(let u=0;u<r[l].length;u++){let f=r[l][u];f.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",f.getValue()[0],f.getConfidence(f.getValue()[0]))}s.format("%n")}return s.toString()}}Mt.CODEWORD_SKEW_SIZE=2,Mt.MAX_ERRORS=3,Mt.MAX_EC_CODEWORDS=512,Mt.errorCorrection=new Vi;class $n{decode(r,s=null){let l=$n.decode(r,s,!1);if(l==null||l.length===0||l[0]==null)throw oe.getNotFoundInstance();return l[0]}decodeMultiple(r,s=null){try{return $n.decode(r,s,!0)}catch(l){throw l instanceof F||l instanceof Y?oe.getNotFoundInstance():l}}static decode(r,s,l){const u=new Array,f=xt.detectMultiple(r,s,l);for(const g of f.getPoints()){const y=Mt.decode(f.getBits(),g[4],g[5],g[6],g[7],$n.getMinCodewordWidth(g),$n.getMaxCodewordWidth(g)),_=new ye(y.getText(),y.getRawBytes(),void 0,g,we.PDF_417);_.putMetadata(at.ERROR_CORRECTION_LEVEL,y.getECLevel());const b=y.getOther();b!=null&&_.putMetadata(at.PDF417_EXTRA_METADATA,b),u.push(_)}return u.map(g=>g)}static getMaxWidth(r,s){return r==null||s==null?0:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMinWidth(r,s){return r==null||s==null?me.MAX_VALUE:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max($n.getMaxWidth(r[0],r[4]),$n.getMaxWidth(r[6],r[2])*gt.MODULES_IN_CODEWORD/gt.MODULES_IN_STOP_PATTERN),Math.max($n.getMaxWidth(r[1],r[5]),$n.getMaxWidth(r[7],r[3])*gt.MODULES_IN_CODEWORD/gt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min($n.getMinWidth(r[0],r[4]),$n.getMinWidth(r[6],r[2])*gt.MODULES_IN_CODEWORD/gt.MODULES_IN_STOP_PATTERN),Math.min($n.getMinWidth(r[1],r[5]),$n.getMinWidth(r[7],r[3])*gt.MODULES_IN_CODEWORD/gt.MODULES_IN_STOP_PATTERN)))}reset(){}}class Js extends A{}Js.kind="ReaderException";class Do{constructor(r,s){this.verbose=r===!0,s&&this.setHints(s)}decode(r,s){return s&&this.setHints(s),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const s=!o(r)&&r.get(je.TRY_HARDER)===!0,l=o(r)?null:r.get(je.POSSIBLE_FORMATS),u=new Array;if(!o(l)){const f=l.some(g=>g===we.UPC_A||g===we.UPC_E||g===we.EAN_13||g===we.EAN_8||g===we.CODABAR||g===we.CODE_39||g===we.CODE_93||g===we.CODE_128||g===we.ITF||g===we.RSS_14||g===we.RSS_EXPANDED);f&&!s&&u.push(new qr(r,this.verbose)),l.includes(we.QR_CODE)&&u.push(new li),l.includes(we.DATA_MATRIX)&&u.push(new ii),l.includes(we.AZTEC)&&u.push(new tt),l.includes(we.PDF_417)&&u.push(new $n),f&&s&&u.push(new qr(r,this.verbose))}u.length===0&&(s||u.push(new qr(r,this.verbose)),u.push(new li),u.push(new ii),u.push(new tt),u.push(new $n),s&&u.push(new qr(r,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new Js("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(r,this.hints)}catch(l){if(l instanceof Js)continue}throw new oe("No MultiFormat Readers were able to detect the code.")}}class es extends re{constructor(r=null,s=500){const l=new Do;l.setHints(r),super(l,s)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class dl extends re{constructor(r=500){super(new $n,r)}}class gl extends re{constructor(r=500){super(new li,r)}}var Ma;(function(D){D[D.ERROR_CORRECTION=0]="ERROR_CORRECTION",D[D.CHARACTER_SET=1]="CHARACTER_SET",D[D.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",D[D.MIN_SIZE=3]="MIN_SIZE",D[D.MAX_SIZE=4]="MAX_SIZE",D[D.MARGIN=5]="MARGIN",D[D.PDF417_COMPACT=6]="PDF417_COMPACT",D[D.PDF417_COMPACTION=7]="PDF417_COMPACTION",D[D.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",D[D.AZTEC_LAYERS=9]="AZTEC_LAYERS",D[D.QR_VERSION=10]="QR_VERSION"})(Ma||(Ma={}));var er=Ma;class ts{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new zt(r,Int32Array.from([1])))}buildGenerator(r){const s=this.cachedGenerators;if(r>=s.length){let l=s[s.length-1];const u=this.field;for(let f=s.length;f<=r;f++){const g=l.multiply(new zt(u,Int32Array.from([1,u.exp(f-1+u.getGeneratorBase())])));s.push(g),l=g}}return s[r]}encode(r,s){if(s===0)throw new O("No error correction bytes");const l=r.length-s;if(l<=0)throw new O("No data bytes provided");const u=this.buildGenerator(s),f=new Int32Array(l);le.arraycopy(r,0,f,0,l);let g=new zt(this.field,f);g=g.multiplyByMonomial(s,1);const _=g.divide(u)[1].getCoefficients(),b=s-_.length;for(let I=0;I<b;I++)r[l+I]=0;le.arraycopy(_,0,r,l+b,_.length)}}class Wt{constructor(){}static applyMaskPenaltyRule1(r){return Wt.applyMaskPenaltyRule1Internal(r,!0)+Wt.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let s=0;const l=r.getArray(),u=r.getWidth(),f=r.getHeight();for(let g=0;g<f-1;g++){const y=l[g];for(let _=0;_<u-1;_++){const b=y[_];b===y[_+1]&&b===l[g+1][_]&&b===l[g+1][_+1]&&s++}}return Wt.N2*s}static applyMaskPenaltyRule3(r){let s=0;const l=r.getArray(),u=r.getWidth(),f=r.getHeight();for(let g=0;g<f;g++)for(let y=0;y<u;y++){const _=l[g];y+6<u&&_[y]===1&&_[y+1]===0&&_[y+2]===1&&_[y+3]===1&&_[y+4]===1&&_[y+5]===0&&_[y+6]===1&&(Wt.isWhiteHorizontal(_,y-4,y)||Wt.isWhiteHorizontal(_,y+7,y+11))&&s++,g+6<f&&l[g][y]===1&&l[g+1][y]===0&&l[g+2][y]===1&&l[g+3][y]===1&&l[g+4][y]===1&&l[g+5][y]===0&&l[g+6][y]===1&&(Wt.isWhiteVertical(l,y,g-4,g)||Wt.isWhiteVertical(l,y,g+7,g+11))&&s++}return s*Wt.N3}static isWhiteHorizontal(r,s,l){s=Math.max(s,0),l=Math.min(l,r.length);for(let u=s;u<l;u++)if(r[u]===1)return!1;return!0}static isWhiteVertical(r,s,l,u){l=Math.max(l,0),u=Math.min(u,r.length);for(let f=l;f<u;f++)if(r[f][s]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let s=0;const l=r.getArray(),u=r.getWidth(),f=r.getHeight();for(let _=0;_<f;_++){const b=l[_];for(let I=0;I<u;I++)b[I]===1&&s++}const g=r.getHeight()*r.getWidth();return Math.floor(Math.abs(s*2-g)*10/g)*Wt.N4}static getDataMaskBit(r,s,l){let u,f;switch(r){case 0:u=l+s&1;break;case 1:u=l&1;break;case 2:u=s%3;break;case 3:u=(l+s)%3;break;case 4:u=Math.floor(l/2)+Math.floor(s/3)&1;break;case 5:f=l*s,u=(f&1)+f%3;break;case 6:f=l*s,u=(f&1)+f%3&1;break;case 7:f=l*s,u=f%3+(l+s&1)&1;break;default:throw new O("Invalid mask pattern: "+r)}return u===0}static applyMaskPenaltyRule1Internal(r,s){let l=0;const u=s?r.getHeight():r.getWidth(),f=s?r.getWidth():r.getHeight(),g=r.getArray();for(let y=0;y<u;y++){let _=0,b=-1;for(let I=0;I<f;I++){const M=s?g[y][I]:g[I][y];M===b?_++:(_>=5&&(l+=Wt.N1+(_-5)),_=1,b=M)}_>=5&&(l+=Wt.N1+(_-5))}return l}}Wt.N1=3,Wt.N2=3,Wt.N3=40,Wt.N4=10;class $s{constructor(r,s){this.width=r,this.height=s;const l=new Array(s);for(let u=0;u!==s;u++)l[u]=new Uint8Array(r);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(r,s){return this.bytes[s][r]}getArray(){return this.bytes}setNumber(r,s,l){this.bytes[s][r]=l}setBoolean(r,s,l){this.bytes[s][r]=l?1:0}clear(r){for(const s of this.bytes)Le.fill(s,r)}equals(r){if(!(r instanceof $s))return!1;const s=r;if(this.width!==s.width||this.height!==s.height)return!1;for(let l=0,u=this.height;l<u;++l){const f=this.bytes[l],g=s.bytes[l];for(let y=0,_=this.width;y<_;++y)if(f[y]!==g[y])return!1}return!0}toString(){const r=new G;for(let s=0,l=this.height;s<l;++s){const u=this.bytes[s];for(let f=0,g=this.width;f<g;++f)switch(u[f]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class ns{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new G;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<ns.NUM_MASK_PATTERNS}}ns.NUM_MASK_PATTERNS=8;class Qt extends A{}Qt.kind="WriterException";class p{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,s,l,u,f){p.clearMatrix(f),p.embedBasicPatterns(l,f),p.embedTypeInfo(s,u,f),p.maybeEmbedVersionInfo(l,f),p.embedDataBits(r,u,f)}static embedBasicPatterns(r,s){p.embedPositionDetectionPatternsAndSeparators(s),p.embedDarkDotAtLeftBottomCorner(s),p.maybeEmbedPositionAdjustmentPatterns(r,s),p.embedTimingPatterns(s)}static embedTypeInfo(r,s,l){const u=new Be;p.makeTypeInfoBits(r,s,u);for(let f=0,g=u.getSize();f<g;++f){const y=u.get(u.getSize()-1-f),_=p.TYPE_INFO_COORDINATES[f],b=_[0],I=_[1];if(l.setBoolean(b,I,y),f<8){const M=l.getWidth()-f-1;l.setBoolean(M,8,y)}else{const L=l.getHeight()-7+(f-8);l.setBoolean(8,L,y)}}}static maybeEmbedVersionInfo(r,s){if(r.getVersionNumber()<7)return;const l=new Be;p.makeVersionInfoBits(r,l);let u=17;for(let f=0;f<6;++f)for(let g=0;g<3;++g){const y=l.get(u);u--,s.setBoolean(f,s.getHeight()-11+g,y),s.setBoolean(s.getHeight()-11+g,f,y)}}static embedDataBits(r,s,l){let u=0,f=-1,g=l.getWidth()-1,y=l.getHeight()-1;for(;g>0;){for(g===6&&(g-=1);y>=0&&y<l.getHeight();){for(let _=0;_<2;++_){const b=g-_;if(!p.isEmpty(l.get(b,y)))continue;let I;u<r.getSize()?(I=r.get(u),++u):I=!1,s!==255&&Wt.getDataMaskBit(s,b,y)&&(I=!I),l.setBoolean(b,y,I)}y+=f}f=-f,y+=f,g-=2}if(u!==r.getSize())throw new Qt("Not all bits consumed: "+u+"/"+r.getSize())}static findMSBSet(r){return 32-me.numberOfLeadingZeros(r)}static calculateBCHCode(r,s){if(s===0)throw new O("0 polynomial");const l=p.findMSBSet(s);for(r<<=l-1;p.findMSBSet(r)>=l;)r^=s<<p.findMSBSet(r)-l;return r}static makeTypeInfoBits(r,s,l){if(!ns.isValidMaskPattern(s))throw new Qt("Invalid mask pattern");const u=r.getBits()<<3|s;l.appendBits(u,5);const f=p.calculateBCHCode(u,p.TYPE_INFO_POLY);l.appendBits(f,10);const g=new Be;if(g.appendBits(p.TYPE_INFO_MASK_PATTERN,15),l.xor(g),l.getSize()!==15)throw new Qt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(r,s){s.appendBits(r.getVersionNumber(),6);const l=p.calculateBCHCode(r.getVersionNumber(),p.VERSION_INFO_POLY);if(s.appendBits(l,12),s.getSize()!==18)throw new Qt("should not happen but we got: "+s.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let s=8;s<r.getWidth()-8;++s){const l=(s+1)%2;p.isEmpty(r.get(s,6))&&r.setNumber(s,6,l),p.isEmpty(r.get(6,s))&&r.setNumber(6,s,l)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new Qt;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,s,l){for(let u=0;u<8;++u){if(!p.isEmpty(l.get(r+u,s)))throw new Qt;l.setNumber(r+u,s,0)}}static embedVerticalSeparationPattern(r,s,l){for(let u=0;u<7;++u){if(!p.isEmpty(l.get(r,s+u)))throw new Qt;l.setNumber(r,s+u,0)}}static embedPositionAdjustmentPattern(r,s,l){for(let u=0;u<5;++u){const f=p.POSITION_ADJUSTMENT_PATTERN[u];for(let g=0;g<5;++g)l.setNumber(r+g,s+u,f[g])}}static embedPositionDetectionPattern(r,s,l){for(let u=0;u<7;++u){const f=p.POSITION_DETECTION_PATTERN[u];for(let g=0;g<7;++g)l.setNumber(r+g,s+u,f[g])}}static embedPositionDetectionPatternsAndSeparators(r){const s=p.POSITION_DETECTION_PATTERN[0].length;p.embedPositionDetectionPattern(0,0,r),p.embedPositionDetectionPattern(r.getWidth()-s,0,r),p.embedPositionDetectionPattern(0,r.getWidth()-s,r);const l=8;p.embedHorizontalSeparationPattern(0,l-1,r),p.embedHorizontalSeparationPattern(r.getWidth()-l,l-1,r),p.embedHorizontalSeparationPattern(0,r.getWidth()-l,r);const u=7;p.embedVerticalSeparationPattern(u,0,r),p.embedVerticalSeparationPattern(r.getHeight()-u-1,0,r),p.embedVerticalSeparationPattern(u,r.getHeight()-u,r)}static maybeEmbedPositionAdjustmentPatterns(r,s){if(r.getVersionNumber()<2)return;const l=r.getVersionNumber()-1,u=p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let f=0,g=u.length;f!==g;f++){const y=u[f];if(y>=0)for(let _=0;_!==g;_++){const b=u[_];b>=0&&p.isEmpty(s.get(b,y))&&p.embedPositionAdjustmentPattern(b-2,y-2,s)}}}}p.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),p.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),p.VERSION_INFO_POLY=7973,p.TYPE_INFO_POLY=1335,p.TYPE_INFO_MASK_PATTERN=21522;class C{constructor(r,s){this.dataBytes=r,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class N{constructor(){}static calculateMaskPenalty(r){return Wt.applyMaskPenaltyRule1(r)+Wt.applyMaskPenaltyRule2(r)+Wt.applyMaskPenaltyRule3(r)+Wt.applyMaskPenaltyRule4(r)}static encode(r,s,l=null){let u=N.DEFAULT_BYTE_MODE_ENCODING;const f=l!==null&&l.get(er.CHARACTER_SET)!==void 0;f&&(u=l.get(er.CHARACTER_SET).toString());const g=this.chooseMode(r,u),y=new Be;if(g===ht.BYTE&&(f||N.DEFAULT_BYTE_MODE_ENCODING!==u)){const Pe=V.getCharacterSetECIByName(u);Pe!==void 0&&this.appendECI(Pe,y)}this.appendModeInfo(g,y);const _=new Be;this.appendBytes(r,g,_,u);let b;if(l!==null&&l.get(er.QR_VERSION)!==void 0){const Pe=Number.parseInt(l.get(er.QR_VERSION).toString(),10);b=it.getVersionForNumber(Pe);const Me=this.calculateBitsNeeded(g,y,_,b);if(!this.willFit(Me,b,s))throw new Qt("Data too big for requested version")}else b=this.recommendVersion(s,g,y,_);const I=new Be;I.appendBitArray(y);const M=g===ht.BYTE?_.getSizeInBytes():r.length;this.appendLengthInfo(M,b,g,I),I.appendBitArray(_);const L=b.getECBlocksForLevel(s),H=b.getTotalCodewords()-L.getTotalECCodewords();this.terminateBits(H,I);const Q=this.interleaveWithECBytes(I,b.getTotalCodewords(),H,L.getNumBlocks()),J=new ns;J.setECLevel(s),J.setMode(g),J.setVersion(b);const se=b.getDimensionForVersion(),Ee=new $s(se,se),Ue=this.chooseMaskPattern(Q,s,b,Ee);return J.setMaskPattern(Ue),p.buildMatrix(Q,s,b,Ue,Ee),J.setMatrix(Ee),J}static recommendVersion(r,s,l,u){const f=this.calculateBitsNeeded(s,l,u,it.getVersionForNumber(1)),g=this.chooseVersion(f,r),y=this.calculateBitsNeeded(s,l,u,g);return this.chooseVersion(y,r)}static calculateBitsNeeded(r,s,l,u){return s.getSize()+r.getCharacterCountBits(u)+l.getSize()}static getAlphanumericCode(r){return r<N.ALPHANUMERIC_TABLE.length?N.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,s=null){if(V.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(r))return ht.KANJI;let l=!1,u=!1;for(let f=0,g=r.length;f<g;++f){const y=r.charAt(f);if(N.isDigit(y))l=!0;else if(this.getAlphanumericCode(y.charCodeAt(0))!==-1)u=!0;else return ht.BYTE}return u?ht.ALPHANUMERIC:l?ht.NUMERIC:ht.BYTE}static isOnlyDoubleByteKanji(r){let s;try{s=X.encode(r,V.SJIS)}catch{return!1}const l=s.length;if(l%2!==0)return!1;for(let u=0;u<l;u+=2){const f=s[u]&255;if((f<129||f>159)&&(f<224||f>235))return!1}return!0}static chooseMaskPattern(r,s,l,u){let f=Number.MAX_SAFE_INTEGER,g=-1;for(let y=0;y<ns.NUM_MASK_PATTERNS;y++){p.buildMatrix(r,s,l,y,u);let _=this.calculateMaskPenalty(u);_<f&&(f=_,g=y)}return g}static chooseVersion(r,s){for(let l=1;l<=40;l++){const u=it.getVersionForNumber(l);if(N.willFit(r,u,s))return u}throw new Qt("Data too big")}static willFit(r,s,l){const u=s.getTotalCodewords(),g=s.getECBlocksForLevel(l).getTotalECCodewords(),y=u-g,_=(r+7)/8;return y>=_}static terminateBits(r,s){const l=r*8;if(s.getSize()>l)throw new Qt("data bits cannot fit in the QR Code"+s.getSize()+" > "+l);for(let g=0;g<4&&s.getSize()<l;++g)s.appendBit(!1);const u=s.getSize()&7;if(u>0)for(let g=u;g<8;g++)s.appendBit(!1);const f=r-s.getSizeInBytes();for(let g=0;g<f;++g)s.appendBits((g&1)===0?236:17,8);if(s.getSize()!==l)throw new Qt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,s,l,u,f,g){if(u>=l)throw new Qt("Block ID too large");const y=r%l,_=l-y,b=Math.floor(r/l),I=b+1,M=Math.floor(s/l),L=M+1,H=b-M,Q=I-L;if(H!==Q)throw new Qt("EC bytes mismatch");if(l!==_+y)throw new Qt("RS blocks mismatch");if(r!==(M+H)*_+(L+Q)*y)throw new Qt("Total bytes mismatch");u<_?(f[0]=M,g[0]=H):(f[0]=L,g[0]=Q)}static interleaveWithECBytes(r,s,l,u){if(r.getSizeInBytes()!==l)throw new Qt("Number of bits and data bytes does not match");let f=0,g=0,y=0;const _=new Array;for(let I=0;I<u;++I){const M=new Int32Array(1),L=new Int32Array(1);N.getNumDataBytesAndNumECBytesForBlockID(s,l,u,I,M,L);const H=M[0],Q=new Uint8Array(H);r.toBytes(8*f,Q,0,H);const J=N.generateECBytes(Q,L[0]);_.push(new C(Q,J)),g=Math.max(g,H),y=Math.max(y,J.length),f+=M[0]}if(l!==f)throw new Qt("Data bytes does not match offset");const b=new Be;for(let I=0;I<g;++I)for(const M of _){const L=M.getDataBytes();I<L.length&&b.appendBits(L[I],8)}for(let I=0;I<y;++I)for(const M of _){const L=M.getErrorCorrectionBytes();I<L.length&&b.appendBits(L[I],8)}if(s!==b.getSizeInBytes())throw new Qt("Interleaving error: "+s+" and "+b.getSizeInBytes()+" differ.");return b}static generateECBytes(r,s){const l=r.length,u=new Int32Array(l+s);for(let g=0;g<l;g++)u[g]=r[g]&255;new ts(dt.QR_CODE_FIELD_256).encode(u,s);const f=new Uint8Array(s);for(let g=0;g<s;g++)f[g]=u[l+g];return f}static appendModeInfo(r,s){s.appendBits(r.getBits(),4)}static appendLengthInfo(r,s,l,u){const f=l.getCharacterCountBits(s);if(r>=1<<f)throw new Qt(r+" is bigger than "+((1<<f)-1));u.appendBits(r,f)}static appendBytes(r,s,l,u){switch(s){case ht.NUMERIC:N.appendNumericBytes(r,l);break;case ht.ALPHANUMERIC:N.appendAlphanumericBytes(r,l);break;case ht.BYTE:N.append8BitBytes(r,l,u);break;case ht.KANJI:N.appendKanjiBytes(r,l);break;default:throw new Qt("Invalid mode: "+s)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const s=N.getDigit(r);return s>=0&&s<=9}static appendNumericBytes(r,s){const l=r.length;let u=0;for(;u<l;){const f=N.getDigit(r.charAt(u));if(u+2<l){const g=N.getDigit(r.charAt(u+1)),y=N.getDigit(r.charAt(u+2));s.appendBits(f*100+g*10+y,10),u+=3}else if(u+1<l){const g=N.getDigit(r.charAt(u+1));s.appendBits(f*10+g,7),u+=2}else s.appendBits(f,4),u++}}static appendAlphanumericBytes(r,s){const l=r.length;let u=0;for(;u<l;){const f=N.getAlphanumericCode(r.charCodeAt(u));if(f===-1)throw new Qt;if(u+1<l){const g=N.getAlphanumericCode(r.charCodeAt(u+1));if(g===-1)throw new Qt;s.appendBits(f*45+g,11),u+=2}else s.appendBits(f,6),u++}}static append8BitBytes(r,s,l){let u;try{u=X.encode(r,l)}catch(f){throw new Qt(f)}for(let f=0,g=u.length;f!==g;f++){const y=u[f];s.appendBits(y,8)}}static appendKanjiBytes(r,s){let l;try{l=X.encode(r,V.SJIS)}catch(f){throw new Qt(f)}const u=l.length;for(let f=0;f<u;f+=2){const g=l[f]&255,y=l[f+1]&255,_=g<<8&4294967295|y;let b=-1;if(_>=33088&&_<=40956?b=_-33088:_>=57408&&_<=60351&&(b=_-49472),b===-1)throw new Qt("Invalid byte sequence");const I=(b>>8)*192+(b&255);s.appendBits(I,13)}}static appendECI(r,s){s.appendBits(ht.ECI.getBits(),4),s.appendBits(r.getValue(),8)}}N.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),N.DEFAULT_BYTE_MODE_ENCODING=V.UTF8.getName();class U{write(r,s,l,u=null){if(r.length===0)throw new O("Found empty contents");if(s<0||l<0)throw new O("Requested dimensions are too small: "+s+"x"+l);let f=Ut.L,g=U.QUIET_ZONE_SIZE;u!==null&&(u.get(er.ERROR_CORRECTION)!==void 0&&(f=Ut.fromString(u.get(er.ERROR_CORRECTION).toString())),u.get(er.MARGIN)!==void 0&&(g=Number.parseInt(u.get(er.MARGIN).toString(),10)));const y=N.encode(r,f,u);return this.renderResult(y,s,l,g)}writeToDom(r,s,l,u,f=null){typeof r=="string"&&(r=document.querySelector(r));const g=this.write(s,l,u,f);r&&r.appendChild(g)}renderResult(r,s,l,u){const f=r.getMatrix();if(f===null)throw new Nn;const g=f.getWidth(),y=f.getHeight(),_=g+u*2,b=y+u*2,I=Math.max(s,_),M=Math.max(l,b),L=Math.min(Math.floor(I/_),Math.floor(M/b)),H=Math.floor((I-g*L)/2),Q=Math.floor((M-y*L)/2),J=this.createSVGElement(I,M);for(let se=0,Ee=Q;se<y;se++,Ee+=L)for(let Ue=0,Pe=H;Ue<g;Ue++,Pe+=L)if(f.get(Ue,se)===1){const Me=this.createSvgRectElement(Pe,Ee,L,L);J.appendChild(Me)}return J}createSVGElement(r,s){const l=document.createElementNS(U.SVG_NS,"svg");return l.setAttributeNS(null,"height",r.toString()),l.setAttributeNS(null,"width",s.toString()),l}createSvgRectElement(r,s,l,u){const f=document.createElementNS(U.SVG_NS,"rect");return f.setAttributeNS(null,"x",r.toString()),f.setAttributeNS(null,"y",s.toString()),f.setAttributeNS(null,"height",l.toString()),f.setAttributeNS(null,"width",u.toString()),f.setAttributeNS(null,"fill","#000000"),f}}U.QUIET_ZONE_SIZE=4,U.SVG_NS="http://www.w3.org/2000/svg";class ie{encode(r,s,l,u,f){if(r.length===0)throw new O("Found empty contents");if(s!==we.QR_CODE)throw new O("Can only encode QR_CODE, but got "+s);if(l<0||u<0)throw new O(`Requested dimensions are too small: ${l}x${u}`);let g=Ut.L,y=ie.QUIET_ZONE_SIZE;f!==null&&(f.get(er.ERROR_CORRECTION)!==void 0&&(g=Ut.fromString(f.get(er.ERROR_CORRECTION).toString())),f.get(er.MARGIN)!==void 0&&(y=Number.parseInt(f.get(er.MARGIN).toString(),10)));const _=N.encode(r,g,f);return ie.renderResult(_,l,u,y)}static renderResult(r,s,l,u){const f=r.getMatrix();if(f===null)throw new Nn;const g=f.getWidth(),y=f.getHeight(),_=g+u*2,b=y+u*2,I=Math.max(s,_),M=Math.max(l,b),L=Math.min(Math.floor(I/_),Math.floor(M/b)),H=Math.floor((I-g*L)/2),Q=Math.floor((M-y*L)/2),J=new Qe(I,M);for(let se=0,Ee=Q;se<y;se++,Ee+=L)for(let Ue=0,Pe=H;Ue<g;Ue++,Pe+=L)f.get(Ue,se)===1&&J.setRegion(Pe,Ee,L,L);return J}}ie.QUIET_ZONE_SIZE=4;class xe{encode(r,s,l,u,f){let g;switch(s){case we.QR_CODE:g=new ie;break;default:throw new O("No encoder available for format "+s)}return g.encode(r,s,l,u,f)}}class Fe extends Ye{constructor(r,s,l,u,f,g,y,_){if(super(g,y),this.yuvData=r,this.dataWidth=s,this.dataHeight=l,this.left=u,this.top=f,u+g>s||f+y>l)throw new O("Crop rectangle does not fit within image data.");_&&this.reverseHorizontal(g,y)}getRow(r,s){if(r<0||r>=this.getHeight())throw new O("Requested row is outside the image: "+r);const l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));const u=(r+this.top)*this.dataWidth+this.left;return le.arraycopy(this.yuvData,u,s,0,l),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.yuvData;const l=r*s,u=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return le.arraycopy(this.yuvData,f,u,0,l),u;for(let g=0;g<s;g++){const y=g*r;le.arraycopy(this.yuvData,f,u,y,r),f+=this.dataWidth}return u}isCropSupported(){return!0}crop(r,s,l,u){return new Fe(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+s,l,u,!1)}renderThumbnail(){const r=this.getWidth()/Fe.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/Fe.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(r*s),u=this.yuvData;let f=this.top*this.dataWidth+this.left;for(let g=0;g<s;g++){const y=g*r;for(let _=0;_<r;_++){const b=u[f+_*Fe.THUMBNAIL_SCALE_FACTOR]&255;l[y+_]=4278190080|b*65793}f+=this.dataWidth*Fe.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Fe.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Fe.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,s){const l=this.yuvData;for(let u=0,f=this.top*this.dataWidth+this.left;u<s;u++,f+=this.dataWidth){const g=f+r/2;for(let y=f,_=f+r-1;y<g;y++,_--){const b=l[y];l[y]=l[_],l[_]=b}}}invert(){return new ft(this)}}Fe.THUMBNAIL_SCALE_FACTOR=2;class St extends Ye{constructor(r,s,l,u,f,g,y){if(super(s,l),this.dataWidth=u,this.dataHeight=f,this.left=g,this.top=y,r.BYTES_PER_ELEMENT===4){const _=s*l,b=new Uint8ClampedArray(_);for(let I=0;I<_;I++){const M=r[I],L=M>>16&255,H=M>>7&510,Q=M&255;b[I]=(L+H+Q)/4&255}this.luminances=b}else this.luminances=r;if(u===void 0&&(this.dataWidth=s),f===void 0&&(this.dataHeight=l),g===void 0&&(this.left=0),y===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+l>this.dataHeight)throw new O("Crop rectangle does not fit within image data.")}getRow(r,s){if(r<0||r>=this.getHeight())throw new O("Requested row is outside the image: "+r);const l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));const u=(r+this.top)*this.dataWidth+this.left;return le.arraycopy(this.luminances,u,s,0,l),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.luminances;const l=r*s,u=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return le.arraycopy(this.luminances,f,u,0,l),u;for(let g=0;g<s;g++){const y=g*r;le.arraycopy(this.luminances,f,u,y,r),f+=this.dataWidth}return u}isCropSupported(){return!0}crop(r,s,l,u){return new St(this.luminances,l,u,this.dataWidth,this.dataHeight,this.left+r,this.top+s)}invert(){return new ft(this)}}class tr extends V{static forName(r){return this.getCharacterSetECIByName(r)}}class cn{}cn.ISO_8859_1=V.ISO8859_1;class Bn{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class xi{static singletonList(r){return[r]}static min(r,s){return r.sort(s)[0]}}class rs{constructor(r){this.previous=r}getPrevious(){return this.previous}}class Ur extends rs{constructor(r,s,l){super(r),this.value=s,this.bitCount=l}appendTo(r,s){r.appendBits(this.value,this.bitCount)}add(r,s){return new Ur(this,r,s)}addBinaryShift(r,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ur(this,r,s)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+me.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class _i extends Ur{constructor(r,s,l){super(r,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=l}appendTo(r,s){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):l===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(s[this.binaryShiftStart+l],8)}addBinaryShift(r,s){return new _i(this,r,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function ea(D,r,s){return new _i(D,r,s)}function is(D,r,s){return new Ur(D,r,s)}const La=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ds=0,ml=1,Ri=2,gc=3,ji=4,Mo=new Ur(null,0,0),ta=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function ed(D){for(let r of D)Le.fill(r,-1);return D[Ds][ji]=0,D[ml][ji]=0,D[ml][Ds]=28,D[gc][ji]=0,D[Ri][ji]=0,D[Ri][Ds]=15,D}const Lo=ed(Le.createInt32Array(6,6));class Hi{constructor(r,s,l,u){this.token=r,this.mode=s,this.binaryShiftByteCount=l,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,s){let l=this.bitCount,u=this.token;if(r!==this.mode){let g=ta[this.mode][r];u=is(u,g&65535,g>>16),l+=g>>16}let f=r===Ri?4:5;return u=is(u,s,f),new Hi(u,r,0,l+f)}shiftAndAppend(r,s){let l=this.token,u=this.mode===Ri?4:5;return l=is(l,Lo[this.mode][r],u),l=is(l,s,5),new Hi(l,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(r){let s=this.token,l=this.mode,u=this.bitCount;if(this.mode===ji||this.mode===Ri){let y=ta[l][Ds];s=is(s,y&65535,y>>16),u+=y>>16,l=Ds}let f=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,g=new Hi(s,l,this.binaryShiftByteCount+1,u+f);return g.binaryShiftByteCount===2078&&(g=g.endBinaryShift(r+1)),g}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=ea(s,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new Hi(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let s=this.bitCount+(ta[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?s+=Hi.calculateBinaryShiftCost(r)-Hi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(s+=10),s<=r.bitCount}toBitArray(r){let s=[];for(let u=this.endBinaryShift(r.length).token;u!==null;u=u.getPrevious())s.unshift(u);let l=new Be;for(const u of s)u.appendTo(l,r);return l}toString(){return W.format("%s bits=%d bytes=%d",La[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}Hi.INITIAL_STATE=new Hi(Mo,Ds,0,0);function Bu(D){const r=W.getCharCode(" "),s=W.getCharCode("."),l=W.getCharCode(",");D[Ds][r]=1;const u=W.getCharCode("Z"),f=W.getCharCode("A");for(let L=f;L<=u;L++)D[Ds][L]=L-f+2;D[ml][r]=1;const g=W.getCharCode("z"),y=W.getCharCode("a");for(let L=y;L<=g;L++)D[ml][L]=L-y+2;D[Ri][r]=1;const _=W.getCharCode("9"),b=W.getCharCode("0");for(let L=b;L<=_;L++)D[Ri][L]=L-b+2;D[Ri][l]=12,D[Ri][s]=13;const I=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let L=0;L<I.length;L++)D[gc][W.getCharCode(I[L])]=L;const M=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let L=0;L<M.length;L++)W.getCharCode(M[L])>0&&(D[ji][W.getCharCode(M[L])]=L);return D}const ko=Bu(Le.createInt32Array(5,256));class na{constructor(r){this.text=r}encode(){const r=W.getCharCode(" "),s=W.getCharCode(`
`);let l=xi.singletonList(Hi.INITIAL_STATE);for(let f=0;f<this.text.length;f++){let g,y=f+1<this.text.length?this.text[f+1]:0;switch(this.text[f]){case W.getCharCode("\r"):g=y===s?2:0;break;case W.getCharCode("."):g=y===r?3:0;break;case W.getCharCode(","):g=y===r?4:0;break;case W.getCharCode(":"):g=y===r?5:0;break;default:g=0}g>0?(l=na.updateStateListForPair(l,f,g),f++):l=this.updateStateListForChar(l,f)}return xi.min(l,(f,g)=>f.getBitCount()-g.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,s){const l=[];for(let u of r)this.updateStateForChar(u,s,l);return na.simplifyStates(l)}updateStateForChar(r,s,l){let u=this.text[s]&255,f=ko[r.getMode()][u]>0,g=null;for(let y=0;y<=ji;y++){let _=ko[y][u];if(_>0){if(g==null&&(g=r.endBinaryShift(s)),!f||y===r.getMode()||y===Ri){const b=g.latchAndAppend(y,_);l.push(b)}if(!f&&Lo[r.getMode()][y]>=0){const b=g.shiftAndAppend(y,_);l.push(b)}}}if(r.getBinaryShiftByteCount()>0||ko[r.getMode()][u]===0){let y=r.addBinaryShiftChar(s);l.push(y)}}static updateStateListForPair(r,s,l){const u=[];for(let f of r)this.updateStateForPair(f,s,l,u);return this.simplifyStates(u)}static updateStateForPair(r,s,l,u){let f=r.endBinaryShift(s);if(u.push(f.latchAndAppend(ji,l)),r.getMode()!==ji&&u.push(f.shiftAndAppend(ji,l)),l===3||l===4){let g=f.latchAndAppend(Ri,16-l).latchAndAppend(Ri,1);u.push(g)}if(r.getBinaryShiftByteCount()>0){let g=r.addBinaryShiftChar(s).addBinaryShiftChar(s+1);u.push(g)}}static simplifyStates(r){let s=[];for(const l of r){let u=!0;for(const f of s){if(f.isBetterThanOrEqualTo(l)){u=!1;break}l.isBetterThanOrEqualTo(f)&&(s=s.filter(g=>g!==f))}u&&s.push(l)}return s}}class tn{constructor(){}static encodeBytes(r){return tn.encode(r,tn.DEFAULT_EC_PERCENT,tn.DEFAULT_AZTEC_LAYERS)}static encode(r,s,l){let u=new na(r).encode(),f=me.truncDivision(u.getSize()*s,100)+11,g=u.getSize()+f,y,_,b,I,M;if(l!==tn.DEFAULT_AZTEC_LAYERS){if(y=l<0,_=Math.abs(l),_>(y?tn.MAX_NB_BITS_COMPACT:tn.MAX_NB_BITS))throw new O(W.format("Illegal value %s for layers",l));b=tn.totalBitsInLayer(_,y),I=tn.WORD_SIZE[_];let Me=b-b%I;if(M=tn.stuffBits(u,I),M.getSize()+f>Me)throw new O("Data to large for user specified layer");if(y&&M.getSize()>I*64)throw new O("Data to large for user specified layer")}else{I=0,M=null;for(let Me=0;;Me++){if(Me>tn.MAX_NB_BITS)throw new O("Data too large for an Aztec code");if(y=Me<=3,_=y?Me+1:Me,b=tn.totalBitsInLayer(_,y),g>b)continue;(M==null||I!==tn.WORD_SIZE[_])&&(I=tn.WORD_SIZE[_],M=tn.stuffBits(u,I));let Gt=b-b%I;if(!(y&&M.getSize()>I*64)&&M.getSize()+f<=Gt)break}}let L=tn.generateCheckWords(M,b,I),H=M.getSize()/I,Q=tn.generateModeMessage(y,_,H),J=(y?11:14)+_*4,se=new Int32Array(J),Ee;if(y){Ee=J;for(let Me=0;Me<se.length;Me++)se[Me]=Me}else{Ee=J+1+2*me.truncDivision(me.truncDivision(J,2)-1,15);let Me=me.truncDivision(J,2),Gt=me.truncDivision(Ee,2);for(let Nt=0;Nt<Me;Nt++){let ur=Nt+me.truncDivision(Nt,15);se[Me-Nt-1]=Gt-ur-1,se[Me+Nt]=Gt+ur+1}}let Ue=new Qe(Ee);for(let Me=0,Gt=0;Me<_;Me++){let Nt=(_-Me)*4+(y?9:12);for(let ur=0;ur<Nt;ur++){let Ni=ur*2;for(let Wr=0;Wr<2;Wr++)L.get(Gt+Ni+Wr)&&Ue.set(se[Me*2+Wr],se[Me*2+ur]),L.get(Gt+Nt*2+Ni+Wr)&&Ue.set(se[Me*2+ur],se[J-1-Me*2-Wr]),L.get(Gt+Nt*4+Ni+Wr)&&Ue.set(se[J-1-Me*2-Wr],se[J-1-Me*2-ur]),L.get(Gt+Nt*6+Ni+Wr)&&Ue.set(se[J-1-Me*2-ur],se[Me*2+Wr])}Gt+=Nt*8}if(tn.drawModeMessage(Ue,y,Ee,Q),y)tn.drawBullsEye(Ue,me.truncDivision(Ee,2),5);else{tn.drawBullsEye(Ue,me.truncDivision(Ee,2),7);for(let Me=0,Gt=0;Me<me.truncDivision(J,2)-1;Me+=15,Gt+=16)for(let Nt=me.truncDivision(Ee,2)&1;Nt<Ee;Nt+=2)Ue.set(me.truncDivision(Ee,2)-Gt,Nt),Ue.set(me.truncDivision(Ee,2)+Gt,Nt),Ue.set(Nt,me.truncDivision(Ee,2)-Gt),Ue.set(Nt,me.truncDivision(Ee,2)+Gt)}let Pe=new Bn;return Pe.setCompact(y),Pe.setSize(Ee),Pe.setLayers(_),Pe.setCodeWords(H),Pe.setMatrix(Ue),Pe}static drawBullsEye(r,s,l){for(let u=0;u<l;u+=2)for(let f=s-u;f<=s+u;f++)r.set(f,s-u),r.set(f,s+u),r.set(s-u,f),r.set(s+u,f);r.set(s-l,s-l),r.set(s-l+1,s-l),r.set(s-l,s-l+1),r.set(s+l,s-l),r.set(s+l,s-l+1),r.set(s+l,s+l-1)}static generateModeMessage(r,s,l){let u=new Be;return r?(u.appendBits(s-1,2),u.appendBits(l-1,6),u=tn.generateCheckWords(u,28,4)):(u.appendBits(s-1,5),u.appendBits(l-1,11),u=tn.generateCheckWords(u,40,4)),u}static drawModeMessage(r,s,l,u){let f=me.truncDivision(l,2);if(s)for(let g=0;g<7;g++){let y=f-3+g;u.get(g)&&r.set(y,f-5),u.get(g+7)&&r.set(f+5,y),u.get(20-g)&&r.set(y,f+5),u.get(27-g)&&r.set(f-5,y)}else for(let g=0;g<10;g++){let y=f-5+g+me.truncDivision(g,5);u.get(g)&&r.set(y,f-7),u.get(g+10)&&r.set(f+7,y),u.get(29-g)&&r.set(y,f+7),u.get(39-g)&&r.set(f-7,y)}}static generateCheckWords(r,s,l){let u=r.getSize()/l,f=new ts(tn.getGF(l)),g=me.truncDivision(s,l),y=tn.bitsToWords(r,l,g);f.encode(y,g-u);let _=s%l,b=new Be;b.appendBits(0,_);for(const I of Array.from(y))b.appendBits(I,l);return b}static bitsToWords(r,s,l){let u=new Int32Array(l),f,g;for(f=0,g=r.getSize()/s;f<g;f++){let y=0;for(let _=0;_<s;_++)y|=r.get(f*s+_)?1<<s-_-1:0;u[f]=y}return u}static getGF(r){switch(r){case 4:return dt.AZTEC_PARAM;case 6:return dt.AZTEC_DATA_6;case 8:return dt.AZTEC_DATA_8;case 10:return dt.AZTEC_DATA_10;case 12:return dt.AZTEC_DATA_12;default:throw new O("Unsupported word size "+r)}}static stuffBits(r,s){let l=new Be,u=r.getSize(),f=(1<<s)-2;for(let g=0;g<u;g+=s){let y=0;for(let _=0;_<s;_++)(g+_>=u||r.get(g+_))&&(y|=1<<s-1-_);(y&f)===f?(l.appendBits(y&f,s),g--):(y&f)===0?(l.appendBits(y|1,s),g--):l.appendBits(y,s)}return l}static totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}tn.DEFAULT_EC_PERCENT=33,tn.DEFAULT_AZTEC_LAYERS=0,tn.MAX_NB_BITS=32,tn.MAX_NB_BITS_COMPACT=4,tn.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Po{encode(r,s,l,u){return this.encodeWithHints(r,s,l,u,null)}encodeWithHints(r,s,l,u,f){let g=cn.ISO_8859_1,y=tn.DEFAULT_EC_PERCENT,_=tn.DEFAULT_AZTEC_LAYERS;return f!=null&&(f.has(er.CHARACTER_SET)&&(g=tr.forName(f.get(er.CHARACTER_SET).toString())),f.has(er.ERROR_CORRECTION)&&(y=me.parseInt(f.get(er.ERROR_CORRECTION).toString())),f.has(er.AZTEC_LAYERS)&&(_=me.parseInt(f.get(er.AZTEC_LAYERS).toString()))),Po.encodeLayers(r,s,l,u,g,y,_)}static encodeLayers(r,s,l,u,f,g,y){if(s!==we.AZTEC)throw new O("Can only encode AZTEC, but got "+s);let _=tn.encode(W.getBytes(r,f),g,y);return Po.renderResult(_,l,u)}static renderResult(r,s,l){let u=r.getMatrix();if(u==null)throw new Nn;let f=u.getWidth(),g=u.getHeight(),y=Math.max(s,f),_=Math.max(l,g),b=Math.min(y/f,_/g),I=(y-f*b)/2,M=(_-g*b)/2,L=new Qe(y,_);for(let H=0,Q=M;H<g;H++,Q+=b)for(let J=0,se=I;J<f;J++,se+=b)u.get(J,H)&&L.setRegion(se,Q,b,b);return L}}n.AbstractExpandedDecoder=Un,n.ArgumentException=S,n.ArithmeticException=zn,n.AztecCode=Bn,n.AztecCodeReader=tt,n.AztecCodeWriter=Po,n.AztecDecoder=Pt,n.AztecDetector=On,n.AztecDetectorResult=Hr,n.AztecEncoder=tn,n.AztecHighLevelEncoder=na,n.AztecPoint=$e,n.BarcodeFormat=we,n.Binarizer=te,n.BinaryBitmap=B,n.BitArray=Be,n.BitMatrix=Qe,n.BitSource=Jn,n.BrowserAztecCodeReader=Xt,n.BrowserBarcodeReader=Ro,n.BrowserCodeReader=re,n.BrowserDatamatrixCodeReader=Ji,n.BrowserMultiFormatReader=es,n.BrowserPDF417Reader=dl,n.BrowserQRCodeReader=gl,n.BrowserQRCodeSvgWriter=U,n.CharacterSetECI=V,n.ChecksumException=Y,n.Code128Reader=ve,n.Code39Reader=vt,n.DataMatrixDecodedBitStreamParser=Yr,n.DataMatrixReader=ii,n.DecodeHintType=je,n.DecoderResult=wt,n.DefaultGridSampler=He,n.DetectorResult=jr,n.EAN13Reader=yn,n.EncodeHintType=er,n.Exception=A,n.FormatException=F,n.GenericGF=dt,n.GenericGFPoly=zt,n.GlobalHistogramBinarizer=ue,n.GridSampler=Te,n.GridSamplerInstance=Je,n.HTMLCanvasElementLuminanceSource=yt,n.HybridBinarizer=Ae,n.ITFReader=lt,n.IllegalArgumentException=O,n.IllegalStateException=Nn,n.InvertedLuminanceSource=ft,n.LuminanceSource=Ye,n.MathUtils=Ve,n.MultiFormatOneDReader=qr,n.MultiFormatReader=Do,n.MultiFormatWriter=xe,n.NotFoundException=oe,n.OneDReader=Ze,n.PDF417DecodedBitStreamParser=pe,n.PDF417DecoderErrorCorrection=Vi,n.PDF417Reader=$n,n.PDF417ResultMetadata=xs,n.PerspectiveTransform=De,n.PlanarYUVLuminanceSource=Fe,n.QRCodeByteMatrix=$s,n.QRCodeDataMask=yr,n.QRCodeDecodedBitStreamParser=Tn,n.QRCodeDecoderErrorCorrectionLevel=Ut,n.QRCodeDecoderFormatInformation=ir,n.QRCodeEncoder=N,n.QRCodeEncoderQRCode=ns,n.QRCodeMaskUtil=Wt,n.QRCodeMatrixUtil=p,n.QRCodeMode=ht,n.QRCodeReader=li,n.QRCodeVersion=it,n.QRCodeWriter=ie,n.RGBLuminanceSource=St,n.RSS14Reader=gn,n.RSSExpandedReader=Ne,n.ReaderException=Js,n.ReedSolomonDecoder=Kn,n.ReedSolomonEncoder=ts,n.ReedSolomonException=wn,n.Result=ye,n.ResultMetadataType=at,n.ResultPoint=Xe,n.StringUtils=W,n.UnsupportedOperationException=Z,n.VideoInputDevice=q,n.WhiteRectangleDetector=pn,n.WriterException=Qt,n.ZXingArrays=Le,n.ZXingCharset=tr,n.ZXingInteger=me,n.ZXingStandardCharsets=cn,n.ZXingStringBuilder=G,n.ZXingStringEncoding=X,n.ZXingSystem=le,n.createAbstractExpandedDecoder=cr,Object.defineProperty(n,"__esModule",{value:!0})}))})(nu,nu.exports)),nu.exports}var Wn=_4();const A4=z1(Wn),w4=Ww({__proto__:null,default:A4},[Wn]);var kE=(function(){function a(e,n,o){if(this.formatMap=new Map([[nt.QR_CODE,Wn.BarcodeFormat.QR_CODE],[nt.AZTEC,Wn.BarcodeFormat.AZTEC],[nt.CODABAR,Wn.BarcodeFormat.CODABAR],[nt.CODE_39,Wn.BarcodeFormat.CODE_39],[nt.CODE_93,Wn.BarcodeFormat.CODE_93],[nt.CODE_128,Wn.BarcodeFormat.CODE_128],[nt.DATA_MATRIX,Wn.BarcodeFormat.DATA_MATRIX],[nt.MAXICODE,Wn.BarcodeFormat.MAXICODE],[nt.ITF,Wn.BarcodeFormat.ITF],[nt.EAN_13,Wn.BarcodeFormat.EAN_13],[nt.EAN_8,Wn.BarcodeFormat.EAN_8],[nt.PDF_417,Wn.BarcodeFormat.PDF_417],[nt.RSS_14,Wn.BarcodeFormat.RSS_14],[nt.RSS_EXPANDED,Wn.BarcodeFormat.RSS_EXPANDED],[nt.UPC_A,Wn.BarcodeFormat.UPC_A],[nt.UPC_E,Wn.BarcodeFormat.UPC_E],[nt.UPC_EAN_EXTENSION,Wn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!w4)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=o;var h=this.createZXingFormats(e),m=new Map;m.set(Wn.DecodeHintType.POSSIBLE_FORMATS,h),m.set(Wn.DecodeHintType.TRY_HARDER,!1),this.hints=m}return a.prototype.decodeAsync=function(e){var n=this;return new Promise(function(o,h){try{o(n.decode(e))}catch(m){h(m)}})},a.prototype.decode=function(e){var n=new Wn.MultiFormatReader(this.verbose,this.hints),o=new Wn.HTMLCanvasElementLuminanceSource(e),h=new Wn.BinaryBitmap(new Wn.HybridBinarizer(o)),m=n.decode(h);return{text:m.text,format:pA.create(this.toHtml5QrcodeSupportedFormats(m.format)),debugData:this.createDebugData()}},a.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,h){e.set(n,o)}),e},a.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},a.prototype.createZXingFormats=function(e){for(var n=[],o=0,h=e;o<h.length;o++){var m=h[o];this.formatMap.has(m)?n.push(this.formatMap.get(m)):this.logger.logError("".concat(m," is not supported by")+"ZXingHtml5QrcodeShim")}return n},a.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},a})(),T4=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(x){x(m)})}return new(n||(n=Promise))(function(m,x){function v(S){try{A(o.next(S))}catch(O){x(O)}}function T(S){try{A(o.throw(S))}catch(O){x(O)}}function A(S){S.done?m(S.value):h(S.value).then(v,T)}A((o=o.apply(a,e||[])).next())})},b4=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,x;return x={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function v(A){return function(S){return T([A,S])}}function T(A){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,A[0]&&(n=0)),n;)try{if(o=1,h&&(m=A[0]&2?h.return:A[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,A[1])).done)return m;switch(h=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,h=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){n.label=A[1];break}if(A[0]===6&&n.label<m[1]){n.label=m[1],m=A;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(A);break}m[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(a,n)}catch(S){A=[6,S],h=0}finally{o=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},PE=(function(){function a(e,n,o){if(this.formatMap=new Map([[nt.QR_CODE,"qr_code"],[nt.AZTEC,"aztec"],[nt.CODABAR,"codabar"],[nt.CODE_39,"code_39"],[nt.CODE_93,"code_93"],[nt.CODE_128,"code_128"],[nt.DATA_MATRIX,"data_matrix"],[nt.ITF,"itf"],[nt.EAN_13,"ean_13"],[nt.EAN_8,"ean_8"],[nt.PDF_417,"pdf417"],[nt.UPC_A,"upc_a"],[nt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!a.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=o;var h=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(h),!this.detector)throw"BarcodeDetector detector not supported"}return a.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},a.prototype.decodeAsync=function(e){return T4(this,void 0,void 0,function(){var n,o;return b4(this,function(h){switch(h.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=h.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return o=this.selectLargestBarcode(n),[2,{text:o.rawValue,format:pA.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}]}})})},a.prototype.selectLargestBarcode=function(e){for(var n=null,o=0,h=0,m=e;h<m.length;h++){var x=m[h],v=x.boundingBox.width*x.boundingBox.height;v>o&&(o=v,n=x)}if(!n)throw"No largest barcode found";return n},a.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],o=0,h=e;o<h.length;o++){var m=h[o];this.formatMap.has(m)?n.push(this.formatMap.get(m)):this.logger.warn("".concat(m," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},a.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},a.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,h){e.set(n,o)}),e},a.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},a})(),BE=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(x){x(m)})}return new(n||(n=Promise))(function(m,x){function v(S){try{A(o.next(S))}catch(O){x(O)}}function T(S){try{A(o.throw(S))}catch(O){x(O)}}function A(S){S.done?m(S.value):h(S.value).then(v,T)}A((o=o.apply(a,e||[])).next())})},VE=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,x;return x={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function v(A){return function(S){return T([A,S])}}function T(A){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,A[0]&&(n=0)),n;)try{if(o=1,h&&(m=A[0]&2?h.return:A[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,A[1])).done)return m;switch(h=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,h=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){n.label=A[1];break}if(A[0]===6&&n.label<m[1]){n.label=m[1],m=A;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(A);break}m[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(a,n)}catch(S){A=[6,S],h=0}finally{o=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},v4=(function(){function a(e,n,o,h){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=o,n&&PE.isSupported()?(this.primaryDecoder=new PE(e,o,h),this.secondaryDecoder=new kE(e,o,h)):this.primaryDecoder=new kE(e,o,h)}return a.prototype.decodeAsync=function(e){return BE(this,void 0,void 0,function(){var n;return VE(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,o.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},a.prototype.decodeRobustlyAsync=function(e){return BE(this,void 0,void 0,function(){var n,o;return VE(this,function(h){switch(h.label){case 0:n=performance.now(),h.label=1;case 1:return h.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,h.sent()];case 3:if(o=h.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw o;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},a.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},a.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},a.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,o=this.executionResults;n<o.length;n++){var h=o[n];e+=h}var m=e/this.executionResults.length;console.log("".concat(m," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},a})(),Fg=(function(){var a=function(e,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(o[m]=h[m])},a(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");a(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Rf=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(x){x(m)})}return new(n||(n=Promise))(function(m,x){function v(S){try{A(o.next(S))}catch(O){x(O)}}function T(S){try{A(o.throw(S))}catch(O){x(O)}}function A(S){S.done?m(S.value):h(S.value).then(v,T)}A((o=o.apply(a,e||[])).next())})},Nf=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,x;return x={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function v(A){return function(S){return T([A,S])}}function T(A){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,A[0]&&(n=0)),n;)try{if(o=1,h&&(m=A[0]&2?h.return:A[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,A[1])).done)return m;switch(h=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,h=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){n.label=A[1];break}if(A[0]===6&&n.label<m[1]){n.label=m[1],m=A;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(A);break}m[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(a,n)}catch(S){A=[6,S],h=0}finally{o=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},EA=(function(){function a(e,n){this.name=e,this.track=n}return a.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},a.prototype.apply=function(e){var n={};n[this.name]=e;var o={advanced:[n]};return this.track.applyConstraints(o)},a.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},a})(),C4=(function(a){Fg(e,a);function e(n,o){return a.call(this,n,o)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var o={};o[this.name]=n;var h={advanced:[o]};return this.track.applyConstraints(h)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),o=n[this.name];return{min:o.min,max:o.max,step:o.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(EA),S4=(function(a){Fg(e,a);function e(n){return a.call(this,"zoom",n)||this}return e})(C4),I4=(function(a){Fg(e,a);function e(n){return a.call(this,"torch",n)||this}return e})(EA),R4=(function(){function a(e){this.track=e}return a.prototype.zoomFeature=function(){return new S4(this.track)},a.prototype.torchFeature=function(){return new I4(this.track)},a})(),N4=(function(){function a(e,n,o){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=o,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return a.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},a.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var o=e.surface.clientWidth,h=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(o,h),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},a.create=function(e,n,o,h){return Rf(this,void 0,void 0,function(){var m,x;return Nf(this,function(v){switch(v.label){case 0:return m=new a(e,n,h),o.aspectRatio?(x={aspectRatio:o.aspectRatio},[4,m.getFirstTrackOrFail().applyConstraints(x)]):[3,2];case 1:v.sent(),v.label=2;case 2:return m.setupSurface(),[2,m]}})})},a.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},a.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},a.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},a.prototype.resume=function(e){this.failIfClosed();var n=this,o=function(){setTimeout(e,200),n.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.play()},a.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},a.prototype.getSurface=function(){return this.failIfClosed(),this.surface},a.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},a.prototype.applyVideoConstraints=function(e){return Rf(this,void 0,void 0,function(){return Nf(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},a.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,o){var h=e.mediaStream.getVideoTracks(),m=h.length,x=0;e.mediaStream.getVideoTracks().forEach(function(v){e.mediaStream.removeTrack(v),v.stop(),++x,x>=m&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},a.prototype.getCapabilities=function(){return new R4(this.getFirstTrackOrFail())},a})(),O4=(function(){function a(e){this.mediaStream=e}return a.prototype.render=function(e,n,o){return Rf(this,void 0,void 0,function(){return Nf(this,function(h){return[2,N4.create(e,this.mediaStream,n,o)]})})},a.create=function(e){return Rf(this,void 0,void 0,function(){var n,o;return Nf(this,function(h){switch(h.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return o=h.sent(),[2,new a(o)]}})})},a})(),UE=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(x){x(m)})}return new(n||(n=Promise))(function(m,x){function v(S){try{A(o.next(S))}catch(O){x(O)}}function T(S){try{A(o.throw(S))}catch(O){x(O)}}function A(S){S.done?m(S.value):h(S.value).then(v,T)}A((o=o.apply(a,e||[])).next())})},FE=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,x;return x={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function v(A){return function(S){return T([A,S])}}function T(A){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,A[0]&&(n=0)),n;)try{if(o=1,h&&(m=A[0]&2?h.return:A[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,A[1])).done)return m;switch(h=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,h=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){n.label=A[1];break}if(A[0]===6&&n.label<m[1]){n.label=m[1],m=A;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(A);break}m[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(a,n)}catch(S){A=[6,S],h=0}finally{o=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},D4=(function(){function a(){}return a.failIfNotSupported=function(){return UE(this,void 0,void 0,function(){return FE(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new a]})})},a.prototype.create=function(e){return UE(this,void 0,void 0,function(){return FE(this,function(n){return[2,O4.create(e)]})})},a})(),M4=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(x){x(m)})}return new(n||(n=Promise))(function(m,x){function v(S){try{A(o.next(S))}catch(O){x(O)}}function T(S){try{A(o.throw(S))}catch(O){x(O)}}function A(S){S.done?m(S.value):h(S.value).then(v,T)}A((o=o.apply(a,e||[])).next())})},L4=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,x;return x={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function v(A){return function(S){return T([A,S])}}function T(A){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,A[0]&&(n=0)),n;)try{if(o=1,h&&(m=A[0]&2?h.return:A[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,A[1])).done)return m;switch(h=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,h=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){n.label=A[1];break}if(A[0]===6&&n.label<m[1]){n.label=m[1],m=A;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(A);break}m[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(a,n)}catch(S){A=[6,S],h=0}finally{o=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},k4=(function(){function a(){}return a.retrieve=function(){if(navigator.mediaDevices)return a.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?a.getCamerasFromMediaStreamTrack():a.rejectWithError()},a.rejectWithError=function(){var e=Yl.unableToQuerySupportedDevices();return a.isHttpsOrLocalhost()||(e=Yl.insecureContextCameraQueryError()),Promise.reject(e)},a.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},a.getCamerasFromMediaDevices=function(){return M4(this,void 0,void 0,function(){var e,n,o,h,m,x,v;return L4(this,function(T){switch(T.label){case 0:return e=function(A){for(var S=A.getVideoTracks(),O=0,B=S;O<B.length;O++){var Y=B[O];Y.enabled=!1,Y.stop(),A.removeTrack(Y)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=T.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(o=T.sent(),h=[],m=0,x=o;m<x.length;m++)v=x[m],v.kind==="videoinput"&&h.push({id:v.deviceId,label:v.label});return e(n),[2,h]}})})},a.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var o=function(m){for(var x=[],v=0,T=m;v<T.length;v++){var A=T[v];A.kind==="video"&&x.push({id:A.id,label:A.label})}e(x)},h=MediaStreamTrack;h.getSources(o)})},a})(),gr;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.NOT_STARTED=1]="NOT_STARTED",a[a.SCANNING=2]="SCANNING",a[a.PAUSED=3]="PAUSED"})(gr||(gr={}));var P4=(function(){function a(){this.state=gr.NOT_STARTED,this.onGoingTransactionNewState=gr.UNKNOWN}return a.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},a.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},a.prototype.execute=function(){if(this.onGoingTransactionNewState===gr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=gr.UNKNOWN,this.directTransition(e)},a.prototype.cancel=function(){if(this.onGoingTransactionNewState===gr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=gr.UNKNOWN},a.prototype.getState=function(){return this.state},a.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==gr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},a.prototype.validateTransition=function(e){switch(this.state){case gr.UNKNOWN:throw"Transition from unknown is not allowed";case gr.NOT_STARTED:this.failIfNewStateIs(e,[gr.PAUSED]);break;case gr.SCANNING:break;case gr.PAUSED:break}},a.prototype.failIfNewStateIs=function(e,n){for(var o=0,h=n;o<h.length;o++){var m=h[o];if(e===m)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},a})(),B4=(function(){function a(e){this.stateManager=e}return a.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},a.prototype.directTransition=function(e){this.stateManager.directTransition(e)},a.prototype.getState=function(){return this.stateManager.getState()},a.prototype.canScanFile=function(){return this.stateManager.getState()===gr.NOT_STARTED},a.prototype.isScanning=function(){return this.stateManager.getState()!==gr.NOT_STARTED},a.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===gr.SCANNING},a.prototype.isPaused=function(){return this.stateManager.getState()===gr.PAUSED},a})(),V4=(function(){function a(){}return a.create=function(){return new B4(new P4)},a})(),U4=(function(){var a=function(e,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(o[m]=h[m])},a(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");a(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Qi=(function(a){U4(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(p4),F4=(function(){function a(e,n){this.logger=n,this.fps=Qi.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Qi.DEFAULT_DISABLE_FLIP}return a.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?yA.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},a.prototype.isShadedBoxEnabled=function(){return!xa(this.qrbox)},a.create=function(e,n){return new a(e,n)},a})(),z4=(function(){function a(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var o;typeof n=="boolean"?this.verbose=n===!0:n&&(o=n,this.verbose=o.verbose===!0,o.experimentalFeatures),this.logger=new E4(this.verbose),this.qrcode=new v4(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(o),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=V4.create()}return a.prototype.start=function(e,n,o,h){var m=this;if(!e)throw"cameraIdOrConfig is required";if(!o||typeof o!="function")throw"qrCodeSuccessCallback is required and should be a function.";var x;h?x=h:x=this.verbose?this.logger.log:function(){};var v=F4.create(n,this.logger);this.clearElement();var T=!1;v.videoConstraints&&(v.isMediaStreamConstraintsValid()?T=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var A=T,S=document.getElementById(this.elementId);S.clientWidth?S.clientWidth:Qi.DEFAULT_WIDTH,S.style.position="relative",this.shouldScan=!0,this.element=S;var O=this,B=this.stateManagerProxy.startTransition(gr.SCANNING);return new Promise(function(Y,te){var le=A?v.videoConstraints:O.createVideoConstraints(e);if(!le){B.cancel(),te("videoConstraints should be defined");return}var de={};(!A||v.aspectRatio)&&(de.aspectRatio=v.aspectRatio);var Ge={onRenderSurfaceReady:function(Le,me){O.setupUi(Le,me,v),O.isScanning=!0,O.foreverScan(v,o,x)}};D4.failIfNotSupported().then(function(Le){Le.create(le).then(function(me){return me.render(m.element,de,Ge).then(function(Be){O.renderedCamera=Be,B.execute(),Y(null)}).catch(function(Be){B.cancel(),te(Be)})}).catch(function(me){B.cancel(),te(Yl.errorGettingUserMedia(me))})}).catch(function(Le){B.cancel(),te(Yl.cameraStreamingNotSupported())})})},a.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(gr.PAUSED),this.showPausedState(),(xa(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},a.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(gr.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},a.prototype.getState=function(){return this.stateManagerProxy.getState()},a.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(gr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var o=function(){if(e.element){var m=document.getElementById(Qi.SHADED_REGION_ELEMENT_ID);m&&e.element.removeChild(m)}},h=this;return this.renderedCamera.close().then(function(){return h.renderedCamera=null,h.element&&(h.element.removeChild(h.canvasElement),h.canvasElement=null),o(),h.qrRegion&&(h.qrRegion=null),h.context&&(h.context=null),n.execute(),h.hidePausedState(),h.isScanning=!1,Promise.resolve()})},a.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(o){return o.decodedText})},a.prototype.scanFileV2=function(e,n){var o=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(xa(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(h,m){o.possiblyCloseLastScanImageFile(),o.clearElement(),o.lastScanImageFile=URL.createObjectURL(e);var x=new Image;x.onload=function(){var v=x.width,T=x.height,A=document.getElementById(o.elementId),S=A.clientWidth?A.clientWidth:Qi.DEFAULT_WIDTH,O=Math.max(A.clientHeight?A.clientHeight:T,Qi.FILE_SCAN_MIN_HEIGHT),B=o.computeCanvasDrawConfig(v,T,S,O);if(n){var Y=o.createCanvasElement(S,O,"qr-canvas-visible");Y.style.display="inline-block",A.appendChild(Y);var te=Y.getContext("2d");if(!te)throw"Unable to get 2d context from canvas";te.canvas.width=S,te.canvas.height=O,te.drawImage(x,0,0,v,T,B.x,B.y,B.width,B.height)}var le=Qi.FILE_SCAN_HIDDEN_CANVAS_PADDING,de=Math.max(x.width,B.width),Ge=Math.max(x.height,B.height),Le=de+2*le,me=Ge+2*le,Be=o.createCanvasElement(Le,me);A.appendChild(Be);var ct=Be.getContext("2d");if(!ct)throw"Unable to get 2d context from canvas";ct.canvas.width=Le,ct.canvas.height=me,ct.drawImage(x,0,0,v,T,le,le,de,Ge);try{o.qrcode.decodeRobustlyAsync(Be).then(function(je){h(ME.createFromQrcodeResult(je))}).catch(m)}catch(je){m("QR code parse error, error = ".concat(je))}},x.onerror=m,x.onabort=m,x.onstalled=m,x.onsuspend=m,x.src=URL.createObjectURL(e)})},a.prototype.clear=function(){this.clearElement()},a.getCameras=function(){return k4.retrieve()},a.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},a.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},a.prototype.applyVideoConstraints=function(e){if(e){if(!yA.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},a.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},a.prototype.getSupportedFormats=function(e){var n=[nt.QR_CODE,nt.AZTEC,nt.CODABAR,nt.CODE_39,nt.CODE_93,nt.CODE_128,nt.DATA_MATRIX,nt.MAXICODE,nt.ITF,nt.EAN_13,nt.EAN_8,nt.PDF_417,nt.RSS_14,nt.RSS_EXPANDED,nt.UPC_A,nt.UPC_E,nt.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var o=[],h=0,m=e.formatsToSupport;h<m.length;h++){var x=m[h];m4(x)?o.push(x):this.logger.warn("Invalid format: ".concat(x," passed in config, ignoring."))}if(o.length===0)throw"None of formatsToSupport match supported values.";return o},a.prototype.getUseBarCodeDetectorIfSupported=function(e){if(xa(e))return!0;if(!xa(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(xa(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return xa(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},a.prototype.validateQrboxSize=function(e,n,o){var h=this,m=o.qrbox;this.validateQrboxConfig(m);var x=this.toQrdimensions(e,n,m),v=function(A){if(A<Qi.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Qi.MIN_QR_BOX_SIZE,"px.")},T=function(A){return A>e&&(h.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),A=e),A};v(x.width),v(x.height),x.width=T(x.width)},a.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},a.prototype.toQrdimensions=function(e,n,o){if(typeof o=="number")return{width:o,height:o};if(typeof o=="function")try{return o(e,n)}catch(h){throw new Error("qrbox config was passed as a function but it failed with unknown error"+h)}return o},a.prototype.setupUi=function(e,n,o){o.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,o);var h=xa(o.qrbox)?{width:e,height:n}:o.qrbox;this.validateQrboxConfig(h);var m=this.toQrdimensions(e,n,h);m.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var x=o.isShadedBoxEnabled()&&m.height<=n,v={x:0,y:0,width:e,height:n},T=x?this.getShadedRegionBounds(e,n,m):v,A=this.createCanvasElement(T.width,T.height),S={willReadFrequently:!0},O=A.getContext("2d",S);O.canvas.width=T.width,O.canvas.height=T.height,this.element.append(A),x&&this.possiblyInsertShadingElement(this.element,e,n,m),this.createScannerPausedUiElement(this.element),this.qrRegion=T,this.context=O,this.canvasElement=A},a.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Yl.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},a.prototype.scanContext=function(e,n){var o=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(h){return e(h.text,ME.createFromQrcodeResult(h)),o.possiblyUpdateShaders(!0),!0}).catch(function(h){o.possiblyUpdateShaders(!1);var m=Yl.codeParseError(h);return n(m,y4.createFrom(m)),!1})},a.prototype.foreverScan=function(e,n,o){var h=this;if(this.shouldScan&&this.renderedCamera){var m=this.renderedCamera.getSurface(),x=m.videoWidth/m.clientWidth,v=m.videoHeight/m.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var T=this.qrRegion.width*x,A=this.qrRegion.height*v,S=this.qrRegion.x*x,O=this.qrRegion.y*v;this.context.drawImage(m,S,O,T,A,0,0,this.qrRegion.width,this.qrRegion.height);var B=function(){h.foreverScanTimeout=setTimeout(function(){h.foreverScan(e,n,o)},h.getTimeoutFps(e.fps))};this.scanContext(n,o).then(function(Y){!Y&&e.disableFlip!==!0?(h.context.translate(h.context.canvas.width,0),h.context.scale(-1,1),h.scanContext(n,o).finally(function(){B()})):B()}).catch(function(Y){h.logger.logError("Error happend while scanning context",Y),B()})}},a.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",o="deviceId",h={user:!0,environment:!0},m="exact",x=function(te){if(te in h)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(te,"'")},v=Object.keys(e);if(v.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(v.length," keys");var T=Object.keys(e)[0];if(T!==n&&T!==o)throw"Only '".concat(n,"' and '").concat(o,"' ")+" are supported for 'cameraIdOrConfig'";if(T===n){var A=e.facingMode;if(typeof A=="string"){if(x(A))return{facingMode:A}}else if(typeof A=="object")if(m in A){if(x(A["".concat(m)]))return{facingMode:{exact:A["".concat(m)]}}}else throw"'facingMode' should be string or object with"+" ".concat(m," as key.");else{var S=typeof A;throw"Invalid type of 'facingMode' = ".concat(S)}}else{var O=e.deviceId;if(typeof O=="string")return{deviceId:O};if(typeof O=="object"){if(m in O)return{deviceId:{exact:O["".concat(m)]}};throw"'deviceId' should be string or object with"+" ".concat(m," as key.")}else{var B=typeof O;throw"Invalid type of 'deviceId' = ".concat(B)}}}var Y=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(Y)},a.prototype.computeCanvasDrawConfig=function(e,n,o,h){if(e<=o&&n<=h){var m=(o-e)/2,x=(h-n)/2;return{x:m,y:x,width:e,height:n}}else{var v=e,T=n;return e>o&&(n=o/e*n,e=o),n>h&&(e=h/n*e,n=h),this.logger.log("Image downsampled from "+"".concat(v,"X").concat(T)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,o,h)}},a.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},a.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Qi.BORDER_SHADER_MATCH_COLOR:Qi.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},a.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},a.prototype.createCanvasElement=function(e,n,o){var h=e,m=n,x=document.createElement("canvas");return x.style.width="".concat(h,"px"),x.style.height="".concat(m,"px"),x.style.display="none",x.id=xa(o)?"qr-canvas":o,x},a.prototype.getShadedRegionBounds=function(e,n,o){if(o.width>e||o.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-o.width)/2,y:(n-o.height)/2,width:o.width,height:o.height}},a.prototype.possiblyInsertShadingElement=function(e,n,o,h){if(!(n-h.width<1||o-h.height<1)){var m=document.createElement("div");m.style.position="absolute";var x=(n-h.width)/2,v=(o-h.height)/2;if(m.style.borderLeft="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderRight="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderTop="".concat(v,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderBottom="".concat(v,"px solid rgba(0, 0, 0, 0.48)"),m.style.boxSizing="border-box",m.style.top="0px",m.style.bottom="0px",m.style.left="0px",m.style.right="0px",m.id="".concat(Qi.SHADED_REGION_ELEMENT_ID),n-h.width<11||o-h.height<11)this.hasBorderShaders=!1;else{var T=5,A=40;this.insertShaderBorders(m,A,T,-T,null,0,!0),this.insertShaderBorders(m,A,T,-T,null,0,!1),this.insertShaderBorders(m,A,T,null,-T,0,!0),this.insertShaderBorders(m,A,T,null,-T,0,!1),this.insertShaderBorders(m,T,A+T,-T,null,-T,!0),this.insertShaderBorders(m,T,A+T,null,-T,-T,!0),this.insertShaderBorders(m,T,A+T,-T,null,-T,!1),this.insertShaderBorders(m,T,A+T,null,-T,-T,!1),this.hasBorderShaders=!0}e.append(m)}},a.prototype.insertShaderBorders=function(e,n,o,h,m,x,v){var T=document.createElement("div");T.style.position="absolute",T.style.backgroundColor=Qi.BORDER_SHADER_DEFAULT_COLOR,T.style.width="".concat(n,"px"),T.style.height="".concat(o,"px"),h!==null&&(T.style.top="".concat(h,"px")),m!==null&&(T.style.bottom="".concat(m,"px")),v?T.style.left="".concat(x,"px"):T.style.right="".concat(x,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(T),e.appendChild(T)},a.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},a.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},a.prototype.getTimeoutFps=function(e){return 1e3/e},a})(),zE;(function(a){a[a.STATUS_DEFAULT=0]="STATUS_DEFAULT",a[a.STATUS_SUCCESS=1]="STATUS_SUCCESS",a[a.STATUS_WARNING=2]="STATUS_WARNING",a[a.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(zE||(zE={}));const j4=({onCode:a})=>(Ce.useEffect(()=>{const e="qr-reader",n=new z4(e);return n.start({facingMode:"environment"},{fps:10,qrbox:250},o=>{a(o)},()=>{}).catch(o=>{console.error("Kunne ikke starte QR-leser:",o)}),()=>{n.stop().then(()=>n.clear()).catch(()=>{})}},[a]),k.jsx("div",{id:"qr-reader",style:{width:"100%"}})),H4=[{value:1,label:"Modul 1 - Blokk 1"},{value:2,label:"Modul 1 - Blokk 2"},{value:3,label:"Modul 1 - Blokk 3"},{value:4,label:"Modul 2 - Termin 1"},{value:5,label:"Modul 2 - Termin 2"},{value:6,label:"Modul 2 - Propen"},{value:7,label:"Modul 3 - Termin 1"},{value:8,label:"Modul 3 - Termin 2"},{value:9,label:"Modul 4"},{value:10,label:"Modul 5"},{value:11,label:"Modul 6"},{value:12,label:"Modul 7"},{value:13,label:"Modul 8 - Termin 1"},{value:14,label:"Modul 8 - Termin 2"},{value:999,label:"Test"}];function G4(a){if(!a)return"Ukjent termin";const e=H4.find(n=>n.value===a);return e?e.label:`Termin ${a}`}function q4({user:a}){const[e,n]=Ce.useState(""),[o,h]=Ce.useState(!1),m=a.term??11,[x,v]=Ce.useState([]),[T,A]=Ce.useState(!1),[S,O]=Ce.useState(0),[B,Y]=Ce.useState(!1),[te,le]=Ce.useState(!1),[de,Ge]=Ce.useState(null),[Le,me]=Ce.useState([]),[Be,ct]=Ce.useState({}),[je,F]=Ce.useState("idle"),[z,V]=Ce.useState(null),[Z,X]=Ce.useState(null),W=a.semesterStatus&&a.semesterStatus!=="aktiv",G=()=>{F("idle"),V(null),X(null),n(""),Y(!1)},Qe=async q=>{if(!(!q||q.length<6)){h(!0),F("idle"),V(null);try{const ae=Rr(Ot,"sessions"),re=uo(ae,ms("code","==",q)),ye=await di(re);if(ye.empty){F("error"),V("Fant ingen kt med denne koden."),n(""),Y(!1),h(!1);return}const ke=ye.docs[0],we=ke.data(),rt=or(Ot,"sessions",ke.id,"attendance",a.uid);if((await ac(rt)).exists()){F("error"),V("Du er allerede registrert p denne kten."),n(""),Y(!1),h(!1);return}await el(rt,{userId:a.uid,studentName:a.displayName,studentEmail:a.email,createdAt:Rn.now(),status:"present"});const wt=we.name||"kten";X(wt),F("success"),V(null),Y(!1),n(""),O(mn=>mn+1)}catch(ae){console.error(ae),F("error"),V("Noe gikk galt ved registrering av oppmte."),n(""),Y(!1)}finally{h(!1)}}},oe=q=>{if(!q||o)return;const ae=q.replace(/\D/g,"").slice(0,6);ae.length===6&&(n(ae),Qe(ae))};Ce.useEffect(()=>{(async()=>{A(!0);try{const ae=Rr(Ot,"requirements"),re=uo(ae,ms("term","==",m)),ke=(await di(re)).docs.map(Ve=>{const Et=Ve.data();return{category:Et.category,requiredCount:Et.requiredCount}}),we=Rr(Ot,"sessions"),rt=uo(we,ms("term","==",m)),wt=(await di(rt)).docs.map(Ve=>{const Et=Ve.data();return{id:Ve.id,timeId:typeof Et?.timeId=="string"?Et.timeId:void 0,name:typeof Et?.name=="string"?Et.name:void 0,category:typeof Et?.category=="string"?Et.category:void 0}}),mn=Rr(Ot,"times"),zt=uo(mn,ms("term","==",m)),dt=(await di(zt)).docs.map(Ve=>{const Et=Ve.data();return{id:Ve.id,name:Et.name,category:Et.category,term:Et.term,order:typeof Et?.order=="number"?Et.order:void 0}}),wn=new Map;for(const Ve of dt)Ve.category&&wn.set(Ve.category,(wn.get(Ve.category)??0)+1);const Nn=new Map,Kn={};for(const Ve of wt){if(!Ve.category)continue;const Et=or(Ot,"sessions",Ve.id,"attendance",a.uid);if((await ac(Et)).exists()){if(Nn.set(Ve.category,(Nn.get(Ve.category)??0)+1),Ve.timeId)Kn[Ve.timeId]=!0;else if(Ve.name&&Ve.category){const jr=dt.find(Hr=>Hr.category===Ve.category&&Hr.name===Ve.name);jr&&(Kn[jr.id]=!0)}}}const qt=new Set;for(const Ve of ke)qt.add(Ve.category);for(const Ve of wt)Ve.category&&qt.add(Ve.category);for(const Ve of dt)Ve.category&&qt.add(Ve.category);const Pt=[];qt.forEach(Ve=>{const Et=ke.find(pn=>pn.category===Ve),Xe=Et?Et.requiredCount:null,jr=wn.get(Ve)??0,Hr=Nn.get(Ve)??0;Pt.push({category:Ve,attendedCount:Hr,totalSessions:jr,requiredCount:Xe})}),Pt.sort((Ve,Et)=>Ve.category.localeCompare(Et.category,"nb-NO",{sensitivity:"base"})),v(Pt),me(dt),ct(Kn)}catch(ae){console.error(ae),v([]),me([]),ct({})}finally{A(!1)}})()},[m,a.uid,S]);const ue=q=>{const ae=q.match(/^\s*(\d+)/);return ae?parseInt(ae[1],10):Number.POSITIVE_INFINITY},Ae=Ce.useMemo(()=>{if(!te||!de)return[];const q=Le.filter(ae=>ae.category===de).map(ae=>({...ae,attended:!!Be[ae.id]}));return q.sort((ae,re)=>{const ye=(ae.order??Number.MAX_SAFE_INTEGER)-(re.order??Number.MAX_SAFE_INTEGER);if(ye!==0)return ye;const ke=ue(ae.name),we=ue(re.name);return ke!==we?ke-we:ae.name.localeCompare(re.name,"nb-NO",{sensitivity:"base"})}),q},[te,de,Le,Be]),Ye=q=>{Ge(q),le(!0)},ft=()=>{le(!1),Ge(null)},yt=q=>{const re=q.target.value.replace(/\D/g,"").slice(0,6);n(re),re.length===6&&!o&&Qe(re)};return Ce.useEffect(()=>{if(je==="idle")return;const ae=setTimeout(()=>{G()},5e3);return()=>clearTimeout(ae)},[je]),k.jsxs("div",{className:"page-card page-card--student",children:[k.jsx("h2",{style:{textAlign:"center",marginBottom:"1rem"},children:"Registrer oppmte"}),W&&k.jsxs("p",{style:{color:"red",textAlign:"center"},children:['Du er markert som "',a.semesterStatus,'" dette semesteret. Ingen oppmtekrav, men du kan fortsatt registrere oppmte.']}),k.jsx("div",{style:{marginTop:"1rem",textAlign:"center"},children:je==="success"?k.jsxs(k.Fragment,{children:[k.jsx("div",{style:{fontSize:"4rem",color:"#16a34a",marginBottom:"0.5rem"},children:""}),k.jsx("h3",{style:{margin:0,marginBottom:"0.3rem"},children:"Oppmte registrert"}),Z&&k.jsx("p",{style:{margin:0,marginBottom:"1rem",fontSize:"1rem",color:"#374151"},children:Z}),k.jsx("button",{type:"button",onClick:G,style:{marginTop:"0.5rem",padding:"0.5rem 1.2rem",borderRadius:"999px",border:"none",background:"#2563eb",color:"white",fontWeight:500,cursor:"pointer",fontSize:"0.95rem"},children:"Registrer en kode til"})]}):je==="error"?k.jsxs(k.Fragment,{children:[k.jsx("div",{style:{fontSize:"4rem",color:"#dc2626",marginBottom:"0.5rem"},children:""}),k.jsx("h3",{style:{margin:0,marginBottom:"0.3rem"},children:"Kunne ikke registrere oppmte"}),z&&k.jsx("p",{style:{margin:0,marginBottom:"1rem",fontSize:"0.95rem",color:"#374151"},children:z}),k.jsx("button",{type:"button",onClick:G,style:{marginTop:"0.5rem",padding:"0.5rem 1.2rem",borderRadius:"999px",border:"none",background:"#6b7280",color:"white",fontWeight:500,cursor:"pointer",fontSize:"0.95rem"},children:"Prv en kode til"})]}):k.jsxs(k.Fragment,{children:[k.jsx("label",{style:{display:"block",marginBottom:"0.3rem"},children:"6-sifret kode fra lrer"}),k.jsx("input",{value:e,onChange:yt,maxLength:6,placeholder:"482931",style:{padding:"0.5rem 0.8rem",fontSize:"1.2rem",letterSpacing:"0.3em",textAlign:"center",borderRadius:"0.5rem",border:"1px solid #d1d5db",minWidth:"10rem"}}),o&&k.jsx(yo,{}),k.jsx("p",{style:{fontSize:"0.8rem",color:"#6b7280",marginTop:"0.4rem"},children:"Koden registreres automatisk nr du har skrevet inn 6 siffer."}),k.jsx("button",{type:"button",onClick:()=>Y(q=>!q),style:{marginTop:"0.5rem",padding:"0.4rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:B?"#e5e7eb":"#f9fafb",cursor:"pointer",fontSize:"0.9rem"},children:B?"Stopp skanning":"Skann QR-kode"}),B&&k.jsx("div",{style:{marginTop:"0.8rem",display:"flex",justifyContent:"center"},children:k.jsx("div",{style:{width:"260px",maxWidth:"100%",borderRadius:"0.75rem",overflow:"hidden",border:"1px solid #d1d5db"},children:k.jsx(j4,{onCode:oe})})})]})}),k.jsx("hr",{style:{marginTop:"2rem",marginBottom:"1rem"}}),k.jsxs("section",{children:[k.jsx("h3",{style:{textAlign:"center"},children:G4(m)}),T?k.jsx(yo,{}):x.length===0?k.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"Ingen registrerte timer for denne terminen enn."}):k.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[k.jsx("thead",{children:k.jsxs("tr",{children:[k.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"Gruppe"}),k.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"Registrerte oppmter"}),k.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"Krav"})]})}),k.jsx("tbody",{children:x.map(q=>{const re={padding:"0.5rem",borderBottom:"1px solid #f3f4f6",background:q.requiredCount!=null&&q.attendedCount>=q.requiredCount?"#dcfce7":"transparent"};return k.jsxs("tr",{onClick:()=>Ye(q.category),title:"Klikk for  se detaljer",style:{cursor:"pointer"},children:[k.jsx("td",{style:re,children:q.category}),k.jsx("td",{style:re,children:q.totalSessions>0?`${q.attendedCount}/${q.totalSessions}`:q.attendedCount}),k.jsx("td",{style:re,children:q.requiredCount??"-"})]},q.category)})})]})]}),te&&k.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},onClick:ft,children:k.jsxs("div",{onClick:q=>q.stopPropagation(),style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[k.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[k.jsx("h3",{style:{margin:0},children:de?`Oppmte i ${de}`:"Oppmte"}),k.jsx("button",{type:"button",onClick:ft,style:{border:"none",background:"transparent",fontSize:"1.2rem",cursor:"pointer"},"aria-label":"Lukk",title:"Lukk",children:""})]}),Ae.length===0?k.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"Ingen timer er definert i denne gruppen enda."}):k.jsx("ul",{style:{listStyle:"none",padding:0,marginTop:"0.75rem"},children:Ae.map(q=>k.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.35rem 0",borderBottom:"1px solid #f3f4f6"},children:[k.jsx("span",{children:q.name}),k.jsx("span",{style:{display:"inline-block",padding:"0.15rem 0.5rem",borderRadius:"999px",backgroundColor:q.attended?"#dcfce7":"#fee2e2",color:q.attended?"#166534":"#991b1b",fontSize:"0.8rem"},children:q.attended?"Registrert":"Mangler"})]},q.id))}),k.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"0.75rem"},children:k.jsx("button",{type:"button",onClick:ft,style:{padding:"0.35rem 0.8rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#fff",cursor:"pointer"},children:"Lukk"})})]})})]})}var X4=Object.defineProperty,Of=Object.getOwnPropertySymbols,xA=Object.prototype.hasOwnProperty,_A=Object.prototype.propertyIsEnumerable,jE=(a,e,n)=>e in a?X4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,U1=(a,e)=>{for(var n in e||(e={}))xA.call(e,n)&&jE(a,n,e[n]);if(Of)for(var n of Of(e))_A.call(e,n)&&jE(a,n,e[n]);return a},F1=(a,e)=>{var n={};for(var o in a)xA.call(a,o)&&e.indexOf(o)<0&&(n[o]=a[o]);if(a!=null&&Of)for(var o of Of(a))e.indexOf(o)<0&&_A.call(a,o)&&(n[o]=a[o]);return n};var ll;(a=>{const e=class $t{constructor(T,A,S,O){if(this.version=T,this.errorCorrectionLevel=A,this.modules=[],this.isFunction=[],T<$t.MIN_VERSION||T>$t.MAX_VERSION)throw new RangeError("Version value out of range");if(O<-1||O>7)throw new RangeError("Mask value out of range");this.size=T*4+17;let B=[];for(let te=0;te<this.size;te++)B.push(!1);for(let te=0;te<this.size;te++)this.modules.push(B.slice()),this.isFunction.push(B.slice());this.drawFunctionPatterns();const Y=this.addEccAndInterleave(S);if(this.drawCodewords(Y),O==-1){let te=1e9;for(let le=0;le<8;le++){this.applyMask(le),this.drawFormatBits(le);const de=this.getPenaltyScore();de<te&&(O=le,te=de),this.applyMask(le)}}h(0<=O&&O<=7),this.mask=O,this.applyMask(O),this.drawFormatBits(O),this.isFunction=[]}static encodeText(T,A){const S=a.QrSegment.makeSegments(T);return $t.encodeSegments(S,A)}static encodeBinary(T,A){const S=a.QrSegment.makeBytes(T);return $t.encodeSegments([S],A)}static encodeSegments(T,A,S=1,O=40,B=-1,Y=!0){if(!($t.MIN_VERSION<=S&&S<=O&&O<=$t.MAX_VERSION)||B<-1||B>7)throw new RangeError("Invalid value");let te,le;for(te=S;;te++){const me=$t.getNumDataCodewords(te,A)*8,Be=x.getTotalBits(T,te);if(Be<=me){le=Be;break}if(te>=O)throw new RangeError("Data too long")}for(const me of[$t.Ecc.MEDIUM,$t.Ecc.QUARTILE,$t.Ecc.HIGH])Y&&le<=$t.getNumDataCodewords(te,me)*8&&(A=me);let de=[];for(const me of T){n(me.mode.modeBits,4,de),n(me.numChars,me.mode.numCharCountBits(te),de);for(const Be of me.getData())de.push(Be)}h(de.length==le);const Ge=$t.getNumDataCodewords(te,A)*8;h(de.length<=Ge),n(0,Math.min(4,Ge-de.length),de),n(0,(8-de.length%8)%8,de),h(de.length%8==0);for(let me=236;de.length<Ge;me^=253)n(me,8,de);let Le=[];for(;Le.length*8<de.length;)Le.push(0);return de.forEach((me,Be)=>Le[Be>>>3]|=me<<7-(Be&7)),new $t(te,A,Le,B)}getModule(T,A){return 0<=T&&T<this.size&&0<=A&&A<this.size&&this.modules[A][T]}getModules(){return this.modules}drawFunctionPatterns(){for(let S=0;S<this.size;S++)this.setFunctionModule(6,S,S%2==0),this.setFunctionModule(S,6,S%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const T=this.getAlignmentPatternPositions(),A=T.length;for(let S=0;S<A;S++)for(let O=0;O<A;O++)S==0&&O==0||S==0&&O==A-1||S==A-1&&O==0||this.drawAlignmentPattern(T[S],T[O]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(T){const A=this.errorCorrectionLevel.formatBits<<3|T;let S=A;for(let B=0;B<10;B++)S=S<<1^(S>>>9)*1335;const O=(A<<10|S)^21522;h(O>>>15==0);for(let B=0;B<=5;B++)this.setFunctionModule(8,B,o(O,B));this.setFunctionModule(8,7,o(O,6)),this.setFunctionModule(8,8,o(O,7)),this.setFunctionModule(7,8,o(O,8));for(let B=9;B<15;B++)this.setFunctionModule(14-B,8,o(O,B));for(let B=0;B<8;B++)this.setFunctionModule(this.size-1-B,8,o(O,B));for(let B=8;B<15;B++)this.setFunctionModule(8,this.size-15+B,o(O,B));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let T=this.version;for(let S=0;S<12;S++)T=T<<1^(T>>>11)*7973;const A=this.version<<12|T;h(A>>>18==0);for(let S=0;S<18;S++){const O=o(A,S),B=this.size-11+S%3,Y=Math.floor(S/3);this.setFunctionModule(B,Y,O),this.setFunctionModule(Y,B,O)}}drawFinderPattern(T,A){for(let S=-4;S<=4;S++)for(let O=-4;O<=4;O++){const B=Math.max(Math.abs(O),Math.abs(S)),Y=T+O,te=A+S;0<=Y&&Y<this.size&&0<=te&&te<this.size&&this.setFunctionModule(Y,te,B!=2&&B!=4)}}drawAlignmentPattern(T,A){for(let S=-2;S<=2;S++)for(let O=-2;O<=2;O++)this.setFunctionModule(T+O,A+S,Math.max(Math.abs(O),Math.abs(S))!=1)}setFunctionModule(T,A,S){this.modules[A][T]=S,this.isFunction[A][T]=!0}addEccAndInterleave(T){const A=this.version,S=this.errorCorrectionLevel;if(T.length!=$t.getNumDataCodewords(A,S))throw new RangeError("Invalid argument");const O=$t.NUM_ERROR_CORRECTION_BLOCKS[S.ordinal][A],B=$t.ECC_CODEWORDS_PER_BLOCK[S.ordinal][A],Y=Math.floor($t.getNumRawDataModules(A)/8),te=O-Y%O,le=Math.floor(Y/O);let de=[];const Ge=$t.reedSolomonComputeDivisor(B);for(let me=0,Be=0;me<O;me++){let ct=T.slice(Be,Be+le-B+(me<te?0:1));Be+=ct.length;const je=$t.reedSolomonComputeRemainder(ct,Ge);me<te&&ct.push(0),de.push(ct.concat(je))}let Le=[];for(let me=0;me<de[0].length;me++)de.forEach((Be,ct)=>{(me!=le-B||ct>=te)&&Le.push(Be[me])});return h(Le.length==Y),Le}drawCodewords(T){if(T.length!=Math.floor($t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let A=0;for(let S=this.size-1;S>=1;S-=2){S==6&&(S=5);for(let O=0;O<this.size;O++)for(let B=0;B<2;B++){const Y=S-B,le=(S+1&2)==0?this.size-1-O:O;!this.isFunction[le][Y]&&A<T.length*8&&(this.modules[le][Y]=o(T[A>>>3],7-(A&7)),A++)}}h(A==T.length*8)}applyMask(T){if(T<0||T>7)throw new RangeError("Mask value out of range");for(let A=0;A<this.size;A++)for(let S=0;S<this.size;S++){let O;switch(T){case 0:O=(S+A)%2==0;break;case 1:O=A%2==0;break;case 2:O=S%3==0;break;case 3:O=(S+A)%3==0;break;case 4:O=(Math.floor(S/3)+Math.floor(A/2))%2==0;break;case 5:O=S*A%2+S*A%3==0;break;case 6:O=(S*A%2+S*A%3)%2==0;break;case 7:O=((S+A)%2+S*A%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[A][S]&&O&&(this.modules[A][S]=!this.modules[A][S])}}getPenaltyScore(){let T=0;for(let B=0;B<this.size;B++){let Y=!1,te=0,le=[0,0,0,0,0,0,0];for(let de=0;de<this.size;de++)this.modules[B][de]==Y?(te++,te==5?T+=$t.PENALTY_N1:te>5&&T++):(this.finderPenaltyAddHistory(te,le),Y||(T+=this.finderPenaltyCountPatterns(le)*$t.PENALTY_N3),Y=this.modules[B][de],te=1);T+=this.finderPenaltyTerminateAndCount(Y,te,le)*$t.PENALTY_N3}for(let B=0;B<this.size;B++){let Y=!1,te=0,le=[0,0,0,0,0,0,0];for(let de=0;de<this.size;de++)this.modules[de][B]==Y?(te++,te==5?T+=$t.PENALTY_N1:te>5&&T++):(this.finderPenaltyAddHistory(te,le),Y||(T+=this.finderPenaltyCountPatterns(le)*$t.PENALTY_N3),Y=this.modules[de][B],te=1);T+=this.finderPenaltyTerminateAndCount(Y,te,le)*$t.PENALTY_N3}for(let B=0;B<this.size-1;B++)for(let Y=0;Y<this.size-1;Y++){const te=this.modules[B][Y];te==this.modules[B][Y+1]&&te==this.modules[B+1][Y]&&te==this.modules[B+1][Y+1]&&(T+=$t.PENALTY_N2)}let A=0;for(const B of this.modules)A=B.reduce((Y,te)=>Y+(te?1:0),A);const S=this.size*this.size,O=Math.ceil(Math.abs(A*20-S*10)/S)-1;return h(0<=O&&O<=9),T+=O*$t.PENALTY_N4,h(0<=T&&T<=2568888),T}getAlignmentPatternPositions(){if(this.version==1)return[];{const T=Math.floor(this.version/7)+2,A=this.version==32?26:Math.ceil((this.version*4+4)/(T*2-2))*2;let S=[6];for(let O=this.size-7;S.length<T;O-=A)S.splice(1,0,O);return S}}static getNumRawDataModules(T){if(T<$t.MIN_VERSION||T>$t.MAX_VERSION)throw new RangeError("Version number out of range");let A=(16*T+128)*T+64;if(T>=2){const S=Math.floor(T/7)+2;A-=(25*S-10)*S-55,T>=7&&(A-=36)}return h(208<=A&&A<=29648),A}static getNumDataCodewords(T,A){return Math.floor($t.getNumRawDataModules(T)/8)-$t.ECC_CODEWORDS_PER_BLOCK[A.ordinal][T]*$t.NUM_ERROR_CORRECTION_BLOCKS[A.ordinal][T]}static reedSolomonComputeDivisor(T){if(T<1||T>255)throw new RangeError("Degree out of range");let A=[];for(let O=0;O<T-1;O++)A.push(0);A.push(1);let S=1;for(let O=0;O<T;O++){for(let B=0;B<A.length;B++)A[B]=$t.reedSolomonMultiply(A[B],S),B+1<A.length&&(A[B]^=A[B+1]);S=$t.reedSolomonMultiply(S,2)}return A}static reedSolomonComputeRemainder(T,A){let S=A.map(O=>0);for(const O of T){const B=O^S.shift();S.push(0),A.forEach((Y,te)=>S[te]^=$t.reedSolomonMultiply(Y,B))}return S}static reedSolomonMultiply(T,A){if(T>>>8||A>>>8)throw new RangeError("Byte out of range");let S=0;for(let O=7;O>=0;O--)S=S<<1^(S>>>7)*285,S^=(A>>>O&1)*T;return h(S>>>8==0),S}finderPenaltyCountPatterns(T){const A=T[1];h(A<=this.size*3);const S=A>0&&T[2]==A&&T[3]==A*3&&T[4]==A&&T[5]==A;return(S&&T[0]>=A*4&&T[6]>=A?1:0)+(S&&T[6]>=A*4&&T[0]>=A?1:0)}finderPenaltyTerminateAndCount(T,A,S){return T&&(this.finderPenaltyAddHistory(A,S),A=0),A+=this.size,this.finderPenaltyAddHistory(A,S),this.finderPenaltyCountPatterns(S)}finderPenaltyAddHistory(T,A){A[0]==0&&(T+=this.size),A.pop(),A.unshift(T)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],a.QrCode=e;function n(v,T,A){if(T<0||T>31||v>>>T)throw new RangeError("Value out of range");for(let S=T-1;S>=0;S--)A.push(v>>>S&1)}function o(v,T){return(v>>>T&1)!=0}function h(v){if(!v)throw new Error("Assertion error")}const m=class dr{constructor(T,A,S){if(this.mode=T,this.numChars=A,this.bitData=S,A<0)throw new RangeError("Invalid argument");this.bitData=S.slice()}static makeBytes(T){let A=[];for(const S of T)n(S,8,A);return new dr(dr.Mode.BYTE,T.length,A)}static makeNumeric(T){if(!dr.isNumeric(T))throw new RangeError("String contains non-numeric characters");let A=[];for(let S=0;S<T.length;){const O=Math.min(T.length-S,3);n(parseInt(T.substring(S,S+O),10),O*3+1,A),S+=O}return new dr(dr.Mode.NUMERIC,T.length,A)}static makeAlphanumeric(T){if(!dr.isAlphanumeric(T))throw new RangeError("String contains unencodable characters in alphanumeric mode");let A=[],S;for(S=0;S+2<=T.length;S+=2){let O=dr.ALPHANUMERIC_CHARSET.indexOf(T.charAt(S))*45;O+=dr.ALPHANUMERIC_CHARSET.indexOf(T.charAt(S+1)),n(O,11,A)}return S<T.length&&n(dr.ALPHANUMERIC_CHARSET.indexOf(T.charAt(S)),6,A),new dr(dr.Mode.ALPHANUMERIC,T.length,A)}static makeSegments(T){return T==""?[]:dr.isNumeric(T)?[dr.makeNumeric(T)]:dr.isAlphanumeric(T)?[dr.makeAlphanumeric(T)]:[dr.makeBytes(dr.toUtf8ByteArray(T))]}static makeEci(T){let A=[];if(T<0)throw new RangeError("ECI assignment value out of range");if(T<128)n(T,8,A);else if(T<16384)n(2,2,A),n(T,14,A);else if(T<1e6)n(6,3,A),n(T,21,A);else throw new RangeError("ECI assignment value out of range");return new dr(dr.Mode.ECI,0,A)}static isNumeric(T){return dr.NUMERIC_REGEX.test(T)}static isAlphanumeric(T){return dr.ALPHANUMERIC_REGEX.test(T)}getData(){return this.bitData.slice()}static getTotalBits(T,A){let S=0;for(const O of T){const B=O.mode.numCharCountBits(A);if(O.numChars>=1<<B)return 1/0;S+=4+B+O.bitData.length}return S}static toUtf8ByteArray(T){T=encodeURI(T);let A=[];for(let S=0;S<T.length;S++)T.charAt(S)!="%"?A.push(T.charCodeAt(S)):(A.push(parseInt(T.substring(S+1,S+3),16)),S+=2);return A}};m.NUMERIC_REGEX=/^[0-9]*$/,m.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,m.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let x=m;a.QrSegment=m})(ll||(ll={}));(a=>{(e=>{const n=class{constructor(h,m){this.ordinal=h,this.formatBits=m}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(a.QrCode||(a.QrCode={}))})(ll||(ll={}));(a=>{(e=>{const n=class{constructor(h,m){this.modeBits=h,this.numBitsCharCount=m}numCharCountBits(h){return this.numBitsCharCount[Math.floor((h+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(a.QrSegment||(a.QrSegment={}))})(ll||(ll={}));var Wl=ll;var Y4={L:Wl.QrCode.Ecc.LOW,M:Wl.QrCode.Ecc.MEDIUM,Q:Wl.QrCode.Ecc.QUARTILE,H:Wl.QrCode.Ecc.HIGH},AA=128,wA="L",TA="#FFFFFF",bA="#000000",vA=!1,CA=1,W4=4,K4=0,Q4=.1;function SA(a,e=0){const n=[];return a.forEach(function(o,h){let m=null;o.forEach(function(x,v){if(!x&&m!==null){n.push(`M${m+e} ${h+e}h${v-m}v1H${m+e}z`),m=null;return}if(v===o.length-1){if(!x)return;m===null?n.push(`M${v+e},${h+e} h1v1H${v+e}z`):n.push(`M${m+e},${h+e} h${v+1-m}v1H${m+e}z`);return}x&&m===null&&(m=v)})}),n.join("")}function IA(a,e){return a.slice().map((n,o)=>o<e.y||o>=e.y+e.h?n:n.map((h,m)=>m<e.x||m>=e.x+e.w?h:!1))}function Z4(a,e,n,o){if(o==null)return null;const h=a.length+n*2,m=Math.floor(e*Q4),x=h/e,v=(o.width||m)*x,T=(o.height||m)*x,A=o.x==null?a.length/2-v/2:o.x*x,S=o.y==null?a.length/2-T/2:o.y*x,O=o.opacity==null?1:o.opacity;let B=null;if(o.excavate){let te=Math.floor(A),le=Math.floor(S),de=Math.ceil(v+A-te),Ge=Math.ceil(T+S-le);B={x:te,y:le,w:de,h:Ge}}const Y=o.crossOrigin;return{x:A,y:S,h:T,w:v,excavation:B,opacity:O,crossOrigin:Y}}function J4(a,e){return e!=null?Math.max(Math.floor(e),0):a?W4:K4}function RA({value:a,level:e,minVersion:n,includeMargin:o,marginSize:h,imageSettings:m,size:x,boostLevel:v}){let T=Ir.useMemo(()=>{const te=(Array.isArray(a)?a:[a]).reduce((le,de)=>(le.push(...Wl.QrSegment.makeSegments(de)),le),[]);return Wl.QrCode.encodeSegments(te,Y4[e],n,void 0,void 0,v)},[a,e,n,v]);const{cells:A,margin:S,numCells:O,calculatedImageSettings:B}=Ir.useMemo(()=>{let Y=T.getModules();const te=J4(o,h),le=Y.length+te*2,de=Z4(Y,x,te,m);return{cells:Y,margin:te,numCells:le,calculatedImageSettings:de}},[T,x,m,o,h]);return{qrcode:T,margin:S,cells:A,numCells:O,calculatedImageSettings:B}}var $4=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),NA=Ir.forwardRef(function(e,n){const o=e,{value:h,size:m=AA,level:x=wA,bgColor:v=TA,fgColor:T=bA,includeMargin:A=vA,minVersion:S=CA,boostLevel:O,marginSize:B,imageSettings:Y}=o,le=F1(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:de}=le,Ge=F1(le,["style"]),Le=Y?.src,me=Ir.useRef(null),Be=Ir.useRef(null),ct=Ir.useCallback(Qe=>{me.current=Qe,typeof n=="function"?n(Qe):n&&(n.current=Qe)},[n]),[je,F]=Ir.useState(!1),{margin:z,cells:V,numCells:Z,calculatedImageSettings:X}=RA({value:h,level:x,minVersion:S,boostLevel:O,includeMargin:A,marginSize:B,imageSettings:Y,size:m});Ir.useEffect(()=>{if(me.current!=null){const Qe=me.current,oe=Qe.getContext("2d");if(!oe)return;let ue=V;const Ae=Be.current,Ye=X!=null&&Ae!==null&&Ae.complete&&Ae.naturalHeight!==0&&Ae.naturalWidth!==0;Ye&&X.excavation!=null&&(ue=IA(V,X.excavation));const ft=window.devicePixelRatio||1;Qe.height=Qe.width=m*ft;const yt=m/Z*ft;oe.scale(yt,yt),oe.fillStyle=v,oe.fillRect(0,0,Z,Z),oe.fillStyle=T,$4?oe.fill(new Path2D(SA(ue,z))):V.forEach(function(q,ae){q.forEach(function(re,ye){re&&oe.fillRect(ye+z,ae+z,1,1)})}),X&&(oe.globalAlpha=X.opacity),Ye&&oe.drawImage(Ae,X.x+z,X.y+z,X.w,X.h)}}),Ir.useEffect(()=>{F(!1)},[Le]);const W=U1({height:m,width:m},de);let G=null;return Le!=null&&(G=Ir.createElement("img",{src:Le,key:Le,style:{display:"none"},onLoad:()=>{F(!0)},ref:Be,crossOrigin:X?.crossOrigin})),Ir.createElement(Ir.Fragment,null,Ir.createElement("canvas",U1({style:W,height:m,width:m,ref:ct,role:"img"},Ge)),G)});NA.displayName="QRCodeCanvas";var e8=Ir.forwardRef(function(e,n){const o=e,{value:h,size:m=AA,level:x=wA,bgColor:v=TA,fgColor:T=bA,includeMargin:A=vA,minVersion:S=CA,boostLevel:O,title:B,marginSize:Y,imageSettings:te}=o,le=F1(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:de,cells:Ge,numCells:Le,calculatedImageSettings:me}=RA({value:h,level:x,minVersion:S,boostLevel:O,includeMargin:A,marginSize:Y,imageSettings:te,size:m});let Be=Ge,ct=null;te!=null&&me!=null&&(me.excavation!=null&&(Be=IA(Ge,me.excavation)),ct=Ir.createElement("image",{href:te.src,height:me.h,width:me.w,x:me.x+de,y:me.y+de,preserveAspectRatio:"none",opacity:me.opacity,crossOrigin:me.crossOrigin}));const je=SA(Be,de);return Ir.createElement("svg",U1({height:m,width:m,viewBox:`0 0 ${Le} ${Le}`,ref:n,role:"img"},le),!!B&&Ir.createElement("title",null,B),Ir.createElement("path",{fill:v,d:`M0,0 h${Le}v${Le}H0z`,shapeRendering:"crispEdges"}),Ir.createElement("path",{fill:T,d:je,shapeRendering:"crispEdges"}),ct)});e8.displayName="QRCodeSVG";async function t8(){const e=(await di(Rr(Ot,"terms"))).docs.map(n=>{const o=n.data(),h=typeof o?.value=="number"?o.value:void 0;if(typeof h!="number")return null;const m=typeof o?.label=="string"?o.label:"",x=typeof o?.order=="number"?o.order:void 0;return{value:h,label:m,order:x}}).filter(Boolean);return e.sort((n,o)=>(n.order??n.value)-(o.order??o.value)),e}function n8(){const[a,e]=Ce.useState([]),[n,o]=Ce.useState(!0),[h,m]=Ce.useState(null);Ce.useEffect(()=>{let v=!0;return(async()=>{try{o(!0);const T=await t8();v&&e(T)}catch(T){v&&m(T)}finally{v&&o(!1)}})(),()=>{v=!1}},[]);const x=Ce.useMemo(()=>{const v=new Map;for(const T of a)v.set(T.value,T);return v},[a]);return{options:a,byValue:x,loading:n,error:h}}function zg(a,e){if(e==null)return"Ukjent termin";let n;return Array.isArray(a)?n=a.find(o=>o.value===e):a instanceof Map&&(n=a.get(e)),n&&n.label?n.label:`Termin ${e}`}function r8(a){if(a==="Testmodul 1 - Testtermin 1")return a;const e=/(Modul)\s+(\d+)\s*-\s*(Blokk|Termin)\s+(\d+)/i,n=a.match(e);if(n){const m=n[2],x=n[4];return`M${m} - T${x}`}const o=/(Modul|Termin)\s+(\d+)/i,h=a.match(o);return h?`M${h[2]}`:a}function i8(a,e){if(e==null)return"";const n=zg(a,e);return r8(n)}function s8({user:a}){const[e,n]=Ce.useState([]),[o,h]=Ce.useState(a.term??11),[m,x]=Ce.useState(null),[v,T]=Ce.useState(""),[A,S]=Ce.useState(null),[O,B]=Ce.useState([]),[Y,te]=Ce.useState(!0),[le,de]=Ce.useState(!1),[Ge,Le]=Ce.useState([]),[me,Be]=Ce.useState(!0),[ct,je]=Ce.useState(""),[F,z]=Ce.useState(!1),V=Ce.useRef(null),Z=Ce.useRef(null),X=Ce.useRef(!1),W=Ce.useRef(null),G=Ce.useRef(!1),{options:Qe}=n8();Ce.useEffect(()=>{(async()=>{te(!0);const ke=(await di(Rr(Ot,"times"))).docs.map(we=>{const rt=we.data();return{id:we.id,name:rt.name,category:rt.category,term:rt.term}});n(ke),te(!1)})()},[]),Ce.useEffect(()=>{(async()=>{try{const ye=or(Ot,"users",a.uid),ke=await ac(ye),we=ke.exists()?ke.data():null,rt=Array.isArray(we?.allowedTerms)?we.allowedTerms.map(at=>typeof at=="number"?at:parseInt(at,10)).filter(at=>!Number.isNaN(at)):[];x(rt),rt.length>0&&(a.term&&rt.includes(a.term)?h(a.term):h(rt[0]))}catch(ye){console.warn("Kunne ikke hente allowedTerms for lrer:",ye),x([])}})()},[a.uid]);const oe=Ce.useMemo(()=>{if(m===null)return Qe;const re=new Set(m??[]);return Qe.filter(ye=>re.has(ye.value))},[m,Qe]);Ce.useEffect(()=>{X.current||m!==null&&oe.length===1&&(X.current=!0,setTimeout(()=>{Z.current?.focus()},0))},[m,oe.length]),Ce.useEffect(()=>{G.current||m!==null&&oe.length>1&&(G.current=!0,setTimeout(()=>{const re=W.current;if(re)if(typeof re.showPicker=="function")re.showPicker();else{re.focus();try{re.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0}))}catch{re.click()}}},50))},[m,oe.length]),Ce.useEffect(()=>{(async()=>{if(m!==null){Be(!0);try{const ye=Rr(Ot,"users"),ke=[],we=Array.isArray(m)?m.filter(zt=>typeof zt=="number"):[];if(we.length>0)for(let zt=0;zt<we.length;zt+=10){const zn=we.slice(zt,zt+10),dt=uo(ye,ms("role","==","student"),ms("term","in",zn)),wn=await di(dt);ke.push(wn)}const rt=uo(ye,ms("role","==","student"),ms("term","==",null)),at=await di(rt);ke.push(at);const wt=new Set,mn=[];for(const zt of ke)zt.docs.forEach(zn=>{if(wt.has(zn.id))return;wt.add(zn.id);const dt=zn.data();mn.push({id:zn.id,name:dt.name||dt.displayName||null,email:dt.email,term:dt.term??null})});Le(mn)}catch(ye){console.error("Feil ved lasting av studenter:",ye),Le([])}finally{Be(!1)}}})()},[m]),Ce.useEffect(()=>{if(!A){B([]);return}const re=Rr(Ot,"sessions",A.id,"attendance"),ye=f4(re,ke=>{const we=ke.docs.map(rt=>{const at=rt.data();return{id:rt.id,studentName:at.studentName??null,studentEmail:at.studentEmail??null,createdAt:at.createdAt}}).sort((rt,at)=>{const wt=rt.createdAt?.toMillis?.()??0,mn=at.createdAt?.toMillis?.()??0;return wt-mn});B(we)});return()=>ye()},[A?.id]),Ce.useEffect(()=>{A&&V.current&&V.current.scrollIntoView({behavior:"smooth",block:"start"})},[A]);const ue=Ce.useMemo(()=>e.filter(re=>re.term===o),[e,o]),Ae=Ce.useMemo(()=>{const re=v.trim().toLowerCase();return re?ue.filter(ye=>ye.name.toLowerCase().includes(re)).sort((ye,ke)=>ye.name.localeCompare(ke.name,"nb-NO",{sensitivity:"base"})):[]},[ue,v]),Ye=Ce.useMemo(()=>{const re=ct.trim().toLowerCase();return!re||!A?[]:Ge.filter(ye=>{if(ye.term&&ye.term!==A.term)return!1;const ke=(ye.name??"").toLowerCase(),we=ye.email.toLowerCase();return ke.includes(re)||we.includes(re)}).slice(0,10)},[Ge,ct,A]),ft=async re=>{const ye=e.find(mn=>mn.id===re);if(!ye)return;if(A){const mn=or(Ot,"sessions",A.id);await tl(mn,{isOpen:!1}),S(null)}const ke=Math.floor(1e5+Math.random()*9e5),we=String(ke),rt=Rr(Ot,"sessions"),wt={id:(await of(rt,{timeId:ye.id,name:ye.name,category:ye.category,term:ye.term,code:we,teacherId:a.uid,teacherName:a.displayName,teacherEmail:a.email,createdAt:Rn.now(),isOpen:!0})).id,timeId:ye.id,name:ye.name,category:ye.category,term:ye.term,code:we,teacherId:a.uid,createdAt:Rn.now()};S(wt)},yt=async re=>{T(re.name),de(!1),await ft(re.id),Z.current&&Z.current.blur()},q=async()=>{if(!A)return;const re=or(Ot,"sessions",A.id);await tl(re,{isOpen:!1}),S(null),B([])},ae=async re=>{if(A)try{const ye=or(Ot,"sessions",A.id,"attendance",re.id);if((await ac(ye)).exists()){alert("Studenten er allerede registrert p denne kten.");return}await el(ye,{userId:re.id,studentName:re.name??null,studentEmail:re.email,createdAt:Rn.now(),status:"present",addedManually:!0,addedBy:a.uid}),je(""),z(!1)}catch(ye){console.error(ye),alert("Kunne ikke legge til student manuelt.")}};return Y?k.jsx("div",{className:"page-card page-card--teacher",children:k.jsx(yo,{})}):k.jsxs("div",{className:"page-card page-card--teacher",children:[k.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem"},children:"Registrer oppmte"}),k.jsxs("section",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",alignItems:"center"},children:[k.jsx("div",{style:{marginBottom:"1rem",width:"100%",maxWidth:520},children:(()=>{const re=m!==null?new Set(m??[]):null,ye=re?Qe.filter(ke=>re.has(ke.value)):Qe;if(ye.length===0)return k.jsx("div",{style:{width:"100%",padding:"0.6rem 0",fontSize:"16px",border:"1px solid #e5e7eb",borderRadius:"0.5rem",background:"#f9fafb",color:"#6b7280",textAlign:"center"},children:"Ingen terminer tilgjengelig"});if(ye.length<=1){const ke=ye[0]??Qe.find(we=>we.value===o);return k.jsx("div",{style:{width:"100%",padding:"0.6rem 0.75rem",fontSize:"16px",border:"1px solid #e5e7eb",borderRadius:"0.5rem",background:"#f9fafb",textAlign:"center"},children:ke?ke.label:zg(Qe,o)})}return k.jsx("select",{ref:W,value:o,onChange:ke=>{const we=parseInt(ke.target.value,10);h(we),T(""),de(!1),S(null),B([]),setTimeout(()=>{Z.current?.focus()},0)},style:{width:"100%",padding:"0.6rem 0.75rem",fontSize:"16px",textAlign:"center"},children:ye.map(ke=>k.jsx("option",{value:ke.value,children:ke.label},ke.value))})})()}),k.jsxs("div",{style:{position:"relative",marginBottom:"0.75rem",width:"100%",maxWidth:520},children:[k.jsx("input",{ref:Z,value:v,onChange:re=>{T(re.target.value),de(!0)},onFocus:()=>{v.trim().length>0&&de(!0)},placeholder:"Start  skrive navnet p timen...",style:{width:"100%",padding:"0.6rem 0rem",fontSize:"16px",textAlign:"center"}}),le&&Ae.length>0&&k.jsx("ul",{style:{position:"absolute",top:"100%",left:0,right:0,zIndex:10,background:"white",border:"1px solid #e5e7eb",borderRadius:"0.5rem",marginTop:"0.2rem",listStyle:"none",padding:0,maxHeight:"220px",overflowY:"auto",boxShadow:"0 10px 20px rgba(0,0,0,0.08)"},children:Ae.map(re=>k.jsxs("li",{onClick:()=>yt(re),style:{padding:"0.4rem 0.6rem",cursor:"pointer",borderBottom:"1px solid #f3f4f6"},onMouseDown:ye=>ye.preventDefault(),children:[k.jsx("div",{children:re.name}),k.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:re.category})]},re.id))})]})]}),A&&k.jsxs("section",{ref:V,style:{marginTop:"2rem",padding:"1rem",border:"1px solid #e5e7eb",borderRadius:"0.75rem",background:"#f9fafb"},children:[k.jsxs("div",{style:{textAlign:"center"},children:[k.jsx("h3",{style:{marginTop:0,marginBottom:"0.25rem"},children:termLabel(A.term)}),k.jsxs("p",{style:{margin:0},children:[k.jsx("strong",{children:"Time:"})," ",A.name]}),k.jsxs("p",{style:{marginTop:"0.2rem"},children:[k.jsx("strong",{children:"Gruppe:"})," ",A.category]})]}),k.jsxs("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},children:[k.jsx(NA,{value:A.code,size:160,includeMargin:!0}),k.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",letterSpacing:"0.3em"},children:A.code})]}),k.jsxs("div",{style:{marginTop:"1.5rem"},children:[k.jsx("h4",{style:{textAlign:"center",marginBottom:"0.3rem"},children:"Legg til student manuelt"}),k.jsx("p",{style:{fontSize:"0.8rem",color:"#6b7280",textAlign:"center",marginTop:0,marginBottom:"0.5rem"},children:"Brukes dersom en student ikke kan skanne eller skrive inn kode."}),me&&k.jsx("div",{style:{display:"flex",justifyContent:"center"},children:k.jsx(yo,{})}),k.jsxs("div",{style:{position:"relative",maxWidth:"360px",margin:"0 auto"},children:[k.jsx("input",{value:ct,onChange:re=>{je(re.target.value),z(!0)},onFocus:()=>{ct.trim().length>0&&z(!0)},placeholder:me?"Laster studenter...":"Sk p navn eller e-post",disabled:me,style:{width:"100%",padding:"0.4rem",fontSize:"14px",borderRadius:"0.5rem",border:"1px solid #d1d5db"}}),F&&Ye.length>0&&k.jsx("ul",{style:{position:"absolute",top:"100%",left:0,right:0,zIndex:20,background:"white",border:"1px solid #e5e7eb",borderRadius:"0.5rem",marginTop:"0.2rem",listStyle:"none",padding:0,maxHeight:"220px",overflowY:"auto",boxShadow:"0 10px 20px rgba(0,0,0,0.08)"},children:Ye.map(re=>k.jsxs("li",{onClick:()=>ae(re),style:{padding:"0.4rem 0.6rem",cursor:"pointer",borderBottom:"1px solid #f3f4f6"},onMouseDown:ye=>ye.preventDefault(),children:[k.jsx("div",{children:re.name||"(Uten navn)"}),k.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[re.email,re.term&&`  termin ${re.term}`]})]},re.id))})]})]}),k.jsx("div",{style:{marginTop:"1.2rem",display:"flex",justifyContent:"center"},children:k.jsx("button",{onClick:q,style:{padding:"0.5rem 1.2rem",borderRadius:"999px",border:"none",background:"#dc2626",color:"white",fontWeight:500,cursor:"pointer"},children:"Lukk kt"})}),k.jsx("hr",{style:{margin:"1rem 0"}}),k.jsx("h4",{children:"Registrerte studenter"}),O.length===0?k.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"Ingen har registrert seg enn."}):k.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[k.jsx("thead",{children:k.jsxs("tr",{children:[k.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"Navn"}),k.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"E-post"}),k.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"Tidspunkt"})]})}),k.jsx("tbody",{children:O.map(re=>k.jsxs("tr",{children:[k.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:re.studentName||"-"}),k.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:re.studentEmail||"-"}),k.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6",fontSize:"0.8rem",color:"#6b7280"},children:re.createdAt?new Date(re.createdAt.toMillis()).toLocaleTimeString("no-NO",{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-"})]},re.id))})]})]})]})}function HE(a){const e=a.match(/^\s*(\d+)/);return e?parseInt(e[1],10):Number.POSITIVE_INFINITY}function l1(){const a="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789!@#$";let e="";for(let n=0;n<12;n++)e+=a[Math.floor(Math.random()*a.length)];return e}const a8=()=>{const[a,e]=Ce.useState([]),[n,o]=Ce.useState(!0),[h,m]=Ce.useState(""),[x,v]=Ce.useState("teachers"),[T,A]=Ce.useState("all"),[S,O]=Ce.useState("name"),[B,Y]=Ce.useState("asc"),[te,le]=Ce.useState("all"),[de,Ge]=Ce.useState("name"),[Le,me]=Ce.useState("asc"),[Be,ct]=Ce.useState("name"),[je,F]=Ce.useState("asc"),[z,V]=Ce.useState([]),Z=Ce.useMemo(()=>z.slice().sort((ee,ze)=>(ee.order??ee.value)-(ze.order??ze.value)).map(ee=>({value:ee.value,label:ee.label||`Termin ${ee.value}`})),[z]);Ce.useEffect(()=>{(async()=>{try{const ut=(await di(Rr(Ot,"terms"))).docs.map(We=>{const Rt=We.data(),jt=typeof Rt?.value=="number"?Rt.value:void 0;if(typeof jt!="number")return null;const Dn=typeof Rt?.label=="string"?Rt.label:"",hn=typeof Rt?.order=="number"?Rt.order:void 0;return{value:jt,label:Dn,order:hn}}).filter(Boolean);ut.sort((We,Rt)=>(We.order??We.value)-(Rt.order??Rt.value)),V(ut)}catch(ze){console.warn("Kunne ikke laste terminer fra Firestore for admin-brukerpanel:",ze)}})()},[]);const[X,W]=Ce.useState(null),[G,Qe]=Ce.useState(null),[oe,ue]=Ce.useState(""),[Ae,Ye]=Ce.useState(""),[ft,yt]=Ce.useState(""),[q,ae]=Ce.useState("teacher"),[re,ye]=Ce.useState([]),[ke,we]=Ce.useState(null),[rt,at]=Ce.useState(null),[wt,mn]=Ce.useState(""),[zt,zn]=Ce.useState(""),[dt,wn]=Ce.useState(""),[Nn,Kn]=Ce.useState("student"),[qt,Pt]=Ce.useState(null),[Ve,Et]=Ce.useState(null),[Xe,jr]=Ce.useState({}),Hr=(ee,ze)=>{if(ee&&ze!=null)return Xe[ee]?.[ze]},pn=async(ee,ze)=>{if(!(!ee||ze==null)&&Xe[ee]?.[ze]===void 0)try{const ut=or(Ot,"users",ee,"books",String(ze)),We=await ac(ut),Rt=We.exists()?{approved:!!We.data().approved,approvedAt:We.data().approvedAt??null}:{approved:!1,approvedAt:null};jr(jt=>({...jt,[ee]:{...jt[ee]??{},[ze]:Rt}}))}catch(ut){console.error("Kunne ikke laste godkjenning for bok:",ut)}},Te=({uid:ee,term:ze})=>{const ut=Hr(ee,ze);if(Ce.useEffect(()=>{ut===void 0&&pn(ee,ze)},[ee,ze,ut]),!ut)return k.jsx("span",{style:{color:"#9ca3af"},children:""});if(ut.approved){const We=ut.approvedAt,Rt=We?new Date(We.toDate()).toLocaleString("nb-NO"):void 0;return k.jsx("span",{title:Rt,style:{color:"#16a34a",fontSize:"1rem"},children:""})}return k.jsx("span",{style:{color:"#9ca3af"},children:""})},[De,He]=Ce.useState(null),[Je,$e]=Ce.useState(null),[On,tt]=Ce.useState(""),[Xt,Ze]=Ce.useState(""),[ve,vt]=Ce.useState(""),[lt,Vt]=Ce.useState("admin");Ce.useEffect(()=>{(async()=>{try{o(!0);const ut=(await di(Rr(Ot,"users"))).docs.map(We=>{const Rt=We.data();return{docId:We.id,email:Rt.email??"",displayName:Rt.name??Rt.displayName??Rt.email??"(uten navn)",role:Rt.role??"student",term:Rt.term??null,phone:Rt.phone??null,allowedTerms:Rt.allowedTerms??[]}});ut.sort((We,Rt)=>We.displayName.localeCompare(Rt.displayName,"nb-NO",{sensitivity:"base"})),e(ut)}catch(ze){console.error("Feil ved lasting av brukere:",ze),e([])}finally{o(!1)}})()},[]);const jn=Ce.useMemo(()=>{const ee=h.trim().toLowerCase();return ee?a.filter(ze=>{const ut=(ze.displayName??"").toLowerCase(),We=(ze.email??"").toLowerCase(),Rt=(ze.phone??"").toLowerCase();return`${ut} ${We} ${Rt}`.includes(ee)}):a},[a,h]);let ni=jn.filter(ee=>ee.role==="teacher"),pr=jn.filter(ee=>ee.role==="student"),It=jn.filter(ee=>ee.role==="admin");if(T!=="all"){const ee=T;ni=ni.filter(ze=>(ze.allowedTerms??[]).includes(ee))}if(te!=="all"){const ee=te;pr=pr.filter(ze=>ze.term===ee)}ni.sort((ee,ze)=>{const ut=jt=>S==="name"?jt.displayName??"":S==="email"?jt.email??"":jt.phone??"",We=ut(ee).toLowerCase(),Rt=ut(ze).toLowerCase();return We<Rt?B==="asc"?-1:1:We>Rt?B==="asc"?1:-1:0}),pr.sort((ee,ze)=>{const ut=jt=>de==="name"?jt.displayName??"":de==="email"?jt.email??"":jt.phone??"",We=ut(ee).toLowerCase(),Rt=ut(ze).toLowerCase();return We<Rt?Le==="asc"?-1:1:We>Rt?Le==="asc"?1:-1:0}),It.sort((ee,ze)=>{const ut=jt=>Be==="name"?jt.displayName??"":Be==="email"?jt.email??"":jt.phone??"",We=ut(ee).toLowerCase(),Rt=ut(ze).toLowerCase();return We<Rt?je==="asc"?-1:1:We>Rt?je==="asc"?1:-1:0}),ni=ni.slice(0,50),pr=pr.slice(0,50),It=It.slice(0,50);const yn=ee=>{O(ze=>ze===ee?(Y(ut=>ut==="asc"?"desc":"asc"),ze):(Y("asc"),ee))},mi=ee=>{Ge(ze=>ze===ee?(me(ut=>ut==="asc"?"desc":"asc"),ze):(me("asc"),ee))},Gr=ee=>{ct(ze=>ze===ee?(F(ut=>ut==="asc"?"desc":"asc"),ze):(F("asc"),ee))},Hn=()=>{W("create"),Qe(null),ue(""),Ye(""),yt(""),ae("teacher"),ye([])},Xs=async()=>{const ee=Ae.trim(),ze=oe.trim(),ut=ft.trim();if(!ee){alert("E-post m fylles ut for  opprette lrer.");return}if(!re||re.length===0){alert("Velg minst n termin lreren kan registrere for.");return}try{const We=l1(),jt=(await Zh(o1,ee,We)).user.uid,Dn={email:ee,displayName:ze||ee,name:ze||ee,role:q,term:null,phone:ut||null,allowedTerms:re};await el(or(Ot,"users",jt),Dn,{merge:!0}),e(hn=>{const Ct=[{docId:jt,email:ee,displayName:Dn.displayName,role:q,term:null,phone:ut||null,allowedTerms:[...re]},...hn];return Ct.sort((cr,Gn)=>cr.displayName.localeCompare(Gn.displayName,"nb-NO",{sensitivity:"base"})),Ct}),W(null),Qe(null),alert(`Ny lrer opprettet.

E-post: ${ee}
Midlertidig passord: ${We}

Gi passordet til lreren og be dem bytte etter frste innlogging.`)}catch(We){console.error("Feil ved oppretting av lrer:",We),We?.code==="auth/email-already-in-use"?alert("E-posten er allerede i bruk i Auth. Bruk en annen eller koble eksisterende bruker."):alert("Kunne ikke opprette lrer. Se console for mer info.")}},rr=ee=>{W("edit"),Qe(ee),ue(ee.displayName),Ye(ee.email),yt(ee.phone??""),ae(ee.role),ye(ee.allowedTerms??[])},Dr=async()=>{if(!G)return;const ee=G.docId;try{const ze=or(Ot,"users",ee);await tl(ze,{displayName:oe,email:Ae,phone:ft||null,role:q,allowedTerms:re}),e(ut=>ut.map(We=>We.docId===ee?{...We,displayName:oe,email:Ae,phone:ft||null,role:q,allowedTerms:[...re]}:We)),W(null),Qe(null)}catch(ze){console.error("Feil ved lagring av lrer:",ze),alert("Kunne ikke lagre endringer for lrer.")}},vi=()=>{W(null),Qe(null)},ri=ee=>{ye(ze=>ze.includes(ee)?ze.filter(ut=>ut!==ee):[...ze,ee])},ps=()=>{we("create"),at(null),mn(""),zn(""),wn(""),Kn("student"),Pt(null)},pi=async()=>{const ee=zt.trim(),ze=wt.trim(),ut=dt.trim();if(!ee){alert("E-post m fylles ut for  opprette student.");return}if(qt==null){alert("Velg termin studenten tilhrer.");return}try{const We=l1(),jt=(await Zh(o1,ee,We)).user.uid,Dn={email:ee,displayName:ze||ee,name:ze||ee,role:Nn,term:qt,phone:ut||null,allowedTerms:[]};await el(or(Ot,"users",jt),Dn,{merge:!0}),e(hn=>{const Ct=[{docId:jt,email:ee,displayName:Dn.displayName,role:Nn,term:qt,phone:ut||null,allowedTerms:[]},...hn];return Ct.sort((cr,Gn)=>cr.displayName.localeCompare(Gn.displayName,"nb-NO",{sensitivity:"base"})),Ct}),we(null),at(null),alert(`Ny student opprettet.

E-post: ${ee}
Midlertidig passord: ${We}

Gi passordet til studenten og be dem bytte etter frste innlogging.`)}catch(We){console.error("Feil ved oppretting av student:",We),We?.code==="auth/email-already-in-use"?alert("E-posten er allerede i bruk i Auth. Bruk en annen eller koble eksisterende bruker."):alert("Kunne ikke opprette student. Se console for mer info.")}},ys=ee=>{we("edit"),at(ee),mn(ee.displayName),zn(ee.email),wn(ee.phone??""),Kn(ee.role),Pt(ee.term??null)},Qn=async()=>{if(!rt)return;const ee=rt.docId;try{const ze=or(Ot,"users",ee);await tl(ze,{displayName:wt,email:zt,phone:dt||null,role:Nn,term:qt??null}),e(ut=>ut.map(We=>We.docId===ee?{...We,displayName:wt,email:zt,phone:dt||null,role:Nn,term:qt??null}:We)),we(null),at(null)}catch(ze){console.error("Feil ved lagring av student:",ze),alert("Kunne ikke lagre endringer for student.")}},Mr=()=>{we(null),at(null)},Lr=()=>{He("create"),$e(null),tt(""),Ze(""),vt(""),Vt("admin")},qe=async()=>{const ee=Xt.trim(),ze=On.trim(),ut=ve.trim();if(!ee){alert("E-post m fylles ut for  opprette admin.");return}if(!ut){alert("Mobilnummer m fylles ut for  opprette admin.");return}try{const We=l1(),jt=(await Zh(o1,ee,We)).user.uid,Dn={email:ee,displayName:ze||ee,name:ze||ee,role:lt,term:null,phone:ut,allowedTerms:[]};await el(or(Ot,"users",jt),Dn,{merge:!0}),e(hn=>{const Ct=[{docId:jt,email:ee,displayName:Dn.displayName,role:lt,term:null,phone:ut,allowedTerms:[]},...hn];return Ct.sort((cr,Gn)=>cr.displayName.localeCompare(Gn.displayName,"nb-NO",{sensitivity:"base"})),Ct}),He(null),$e(null),alert(`Ny admin opprettet.

E-post: ${ee}
Midlertidig passord: ${We}

Gi passordet til admin og be dem bytte etter frste innlogging.`)}catch(We){console.error("Feil ved oppretting av admin:",We),We?.code==="auth/email-already-in-use"?alert("E-posten er allerede i bruk i Auth. Bruk en annen eller koble eksisterende bruker."):alert("Kunne ikke opprette admin. Se console for mer info.")}},wr=ee=>{He("edit"),$e(ee),tt(ee.displayName),Ze(ee.email),vt(ee.phone??""),Vt(ee.role)},Un=async()=>{if(!Je)return;const ee=Je.docId;try{const ze=or(Ot,"users",ee);await tl(ze,{displayName:On,email:Xt,phone:ve||null,role:lt}),e(ut=>ut.map(We=>We.docId===ee?{...We,displayName:On,email:Xt,phone:ve||null,role:lt}:We)),He(null),$e(null)}catch(ze){console.error("Feil ved lagring av admin:",ze),alert("Kunne ikke lagre endringer for admin.")}},ln=()=>{He(null),$e(null)};return k.jsxs("div",{style:{marginBottom:"2rem"},children:[k.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem"},children:[k.jsx("button",{type:"button",onClick:()=>v("teachers"),style:{flex:1,padding:"0.35rem 0.5rem",borderRadius:"999px",border:"1px solid #d1d5db",background:x==="teachers"?"#b91c1c":"#ffffff",color:x==="teachers"?"#ffffff":"#111827",fontSize:"0.85rem",cursor:"pointer"},children:"Lrere"}),k.jsx("button",{type:"button",onClick:()=>v("students"),style:{flex:1,padding:"0.35rem 0.5rem",borderRadius:"999px",border:"1px solid #d1d5db",background:x==="students"?"#b91c1c":"#ffffff",color:x==="students"?"#ffffff":"#111827",fontSize:"0.85rem",cursor:"pointer"},children:"Studenter"}),k.jsx("button",{type:"button",onClick:()=>v("admins"),style:{flex:1,padding:"0.35rem 0.5rem",borderRadius:"999px",border:"1px solid #d1d5db",background:x==="admins"?"#b91c1c":"#ffffff",color:x==="admins"?"#ffffff":"#111827",fontSize:"0.85rem",cursor:"pointer"},children:"Admin"})]}),k.jsx("input",{type:"text",placeholder:"Sk p navn, e-post eller mobil...",value:h,onChange:ee=>m(ee.target.value),style:{width:"100%",padding:"0.4rem 0.6rem",marginBottom:"0.75rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.9rem"}}),n?k.jsx(yo,{}):k.jsxs(k.Fragment,{children:[x==="teachers"&&k.jsxs("div",{style:{marginBottom:"1.2rem"},children:[k.jsxs("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",gap:"0.5rem",marginBottom:"0.4rem"},children:[k.jsx("div",{style:{fontSize:"0.8rem"},children:k.jsx("label",{children:k.jsxs("select",{value:T==="all"?"":T,onChange:ee=>{const ze=ee.target.value;A(ze===""?"all":parseInt(ze,10))},style:{padding:"0.2rem 0.4rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.8rem"},children:[k.jsx("option",{value:"",children:"Alle terminer"}),Z.map(ee=>k.jsx("option",{value:ee.value,children:ee.label},ee.value))]})})}),k.jsx("button",{type:"button",onClick:Hn,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.8rem",cursor:"pointer"},children:"Legg til"})]}),k.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[k.jsx("thead",{children:k.jsxs("tr",{children:[k.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>yn("name"),children:["Navn"," ",S==="name"&&(B==="asc"?"":"")]}),k.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>yn("email"),children:["E-post"," ",S==="email"&&(B==="asc"?"":"")]}),k.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>yn("phone"),children:["Mobil"," ",S==="phone"&&(B==="asc"?"":"")]})]})}),k.jsx("tbody",{children:ni.length===0?k.jsx("tr",{children:k.jsx("td",{colSpan:3,style:{padding:"0.4rem",fontSize:"0.85rem",color:"#6b7280"},children:"Ingen lrere funnet."})}):ni.map(ee=>k.jsxs("tr",{onClick:()=>rr(ee),style:{cursor:"pointer"},children:[k.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:ee.displayName}),k.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:ee.email}),k.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:ee.phone??""})]},ee.docId))})]})]}),x==="students"&&k.jsxs("div",{style:{marginBottom:"1.2rem"},children:[k.jsxs("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",gap:"0.5rem",marginBottom:"0.4rem"},children:[k.jsx("div",{style:{fontSize:"0.8rem"},children:k.jsx("label",{children:k.jsxs("select",{value:te==="all"?"":te,onChange:ee=>{const ze=ee.target.value;le(ze===""?"all":parseInt(ze,10))},style:{padding:"0.2rem 0.4rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.8rem"},children:[k.jsx("option",{value:"",children:"Alle terminer"}),Z.map(ee=>k.jsx("option",{value:ee.value,children:ee.label},ee.value))]})})}),k.jsx("button",{type:"button",onClick:ps,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.8rem",cursor:"pointer"},children:"Legg til"})]}),pr.length===0?k.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280"},children:"Ingen studenter funnet."}):k.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[k.jsx("thead",{children:k.jsxs("tr",{children:[k.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>mi("name"),children:["Navn"," ",de==="name"&&(Le==="asc"?"":"")]}),k.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem"},children:"Termin"}),k.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem"},children:"Godkjent?"})]})}),k.jsx("tbody",{children:pr.map(ee=>k.jsxs("tr",{onClick:()=>ys(ee),style:{cursor:"pointer"},children:[k.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:ee.displayName}),k.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:ee.term!=null&&ee.term!==void 0?i8(Z,ee.term):"Ingen"}),k.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},onMouseEnter:ze=>{pn(ee.docId,ee.term??null)},children:ee.term==null?"":k.jsx(Te,{uid:ee.docId,term:ee.term})})]},ee.docId))})]})]}),x==="admins"&&k.jsxs("div",{style:{marginBottom:"1.2rem"},children:[k.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"end",gap:"0.5rem",marginBottom:"0.4rem"},children:k.jsx("button",{type:"button",onClick:Lr,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.8rem",cursor:"pointer"},children:"Legg til"})}),It.length===0?k.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280"},children:"Ingen administratorer funnet."}):k.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[k.jsx("thead",{children:k.jsxs("tr",{children:[k.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>Gr("name"),children:["Navn"," ",Be==="name"&&(je==="asc"?"":"")]}),k.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>Gr("email"),children:["E-post"," ",Be==="email"&&(je==="asc"?"":"")]}),k.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>Gr("phone"),children:["Mobil"," ",Be==="phone"&&(je==="asc"?"":"")]})]})}),k.jsx("tbody",{children:It.map(ee=>k.jsxs("tr",{onClick:()=>wr(ee),style:{cursor:"pointer"},children:[k.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:ee.displayName}),k.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:ee.email}),k.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:ee.phone??""})]},ee.docId))})]})]})]}),X&&k.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:k.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[k.jsx("h3",{style:{marginTop:0,marginBottom:"0.5rem"},children:X==="create"?"Ny lrer":"Rediger lrer"}),k.jsx("p",{style:{marginTop:0,marginBottom:"0.9rem",fontSize:"0.8rem",color:"#6b7280"},children:X==="create"?"Opprett ny lrer, velg hvilke terminer de kan registrere for og lagre.":"Endre navn, e-post, mobil, rolle og hvilke terminer lreren kan undervise p."}),k.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.75rem"},children:[k.jsxs("label",{style:{fontSize:"0.8rem"},children:["Navn",k.jsx("input",{type:"text",value:oe,onChange:ee=>ue(ee.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),k.jsxs("label",{style:{fontSize:"0.8rem"},children:["E-post",k.jsx("input",{type:"email",value:Ae,onChange:ee=>Ye(ee.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),k.jsxs("label",{style:{fontSize:"0.8rem"},children:["Mobil",k.jsx("input",{type:"tel",value:ft,onChange:ee=>yt(ee.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),k.jsxs("label",{style:{fontSize:"0.8rem"},children:["Rolle",k.jsxs("select",{value:q,onChange:ee=>ae(ee.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"},children:[k.jsx("option",{value:"teacher",children:"Lrer"}),k.jsx("option",{value:"student",children:"Student"}),k.jsx("option",{value:"admin",children:"Admin"})]})]}),k.jsxs("div",{style:{fontSize:"0.8rem"},children:[k.jsx("div",{style:{marginBottom:"0.25rem"},children:"Termin(er) lreren kan registrere for:"}),k.jsx("div",{style:{maxHeight:"150px",overflowY:"auto",borderRadius:"0.5rem",border:"1px solid #e5e7eb",padding:"0.35rem 0.45rem"},children:Z.map(ee=>k.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.35rem",fontSize:"0.8rem",padding:"0.15rem 0"},children:[k.jsx("input",{type:"checkbox",checked:re.includes(ee.value),onChange:()=>ri(ee.value)}),k.jsx("span",{children:ee.label})]},ee.value))})]})]}),k.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"0.5rem"},children:[k.jsx("button",{type:"button",onClick:vi,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.85rem",cursor:"pointer"},children:"Avbryt"}),k.jsx("button",{type:"button",onClick:X==="create"?Xs:Dr,style:{padding:"0.3rem 0.9rem",borderRadius:"999px",border:"none",backgroundColor:"#16a34a",color:"#ffffff",fontSize:"0.85rem",cursor:"pointer"},children:X==="create"?"Opprett lrer":"Lagre"})]})]})}),ke&&k.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:k.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[k.jsx("h3",{style:{marginTop:0,marginBottom:"0.5rem"},children:ke==="create"?"Ny student":"Rediger student"}),k.jsx("p",{style:{marginTop:0,marginBottom:"0.9rem",fontSize:"0.8rem",color:"#6b7280"},children:ke==="create"?"Opprett ny student og velg termin.":"Endre navn, e-post, mobil, rolle og termin."}),k.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.75rem"},children:[k.jsxs("label",{style:{fontSize:"0.8rem"},children:["Navn",k.jsx("input",{type:"text",value:wt,onChange:ee=>mn(ee.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),k.jsxs("label",{style:{fontSize:"0.8rem"},children:["E-post",k.jsx("input",{type:"email",value:zt,onChange:ee=>zn(ee.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),k.jsxs("label",{style:{fontSize:"0.8rem"},children:["Mobil",k.jsx("input",{type:"tel",value:dt,onChange:ee=>wn(ee.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),k.jsxs("label",{style:{fontSize:"0.8rem"},children:["Rolle",k.jsxs("select",{value:Nn,onChange:ee=>Kn(ee.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"},children:[k.jsx("option",{value:"student",children:"Student"}),k.jsx("option",{value:"teacher",children:"Lrer"}),k.jsx("option",{value:"admin",children:"Admin"})]})]}),k.jsxs("label",{style:{fontSize:"0.8rem"},children:["Termin",k.jsxs("select",{value:qt??"",onChange:ee=>{const ze=ee.target.value;Pt(ze===""?null:parseInt(ze,10))},style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"},children:[k.jsx("option",{value:"",children:"Ingen"}),Z.map(ee=>k.jsx("option",{value:ee.value,children:ee.label},ee.value))]})]})]}),k.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"0.5rem"},children:[k.jsx("button",{type:"button",onClick:Mr,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.85rem",cursor:"pointer"},children:"Avbryt"}),k.jsx("button",{type:"button",onClick:ke==="create"?pi:Qn,style:{padding:"0.3rem 0.9rem",borderRadius:"999px",border:"none",backgroundColor:"#16a34a",color:"#ffffff",fontSize:"0.85rem",cursor:"pointer"},children:ke==="create"?"Opprett student":"Lagre"})]})]})}),De&&k.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:k.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[k.jsx("h3",{style:{marginTop:0,marginBottom:"0.5rem"},children:De==="create"?"Ny admin":"Rediger admin"}),k.jsx("p",{style:{marginTop:0,marginBottom:"0.9rem",fontSize:"0.8rem",color:"#6b7280"},children:De==="create"?"Opprett ny admin.":"Endre navn, e-post, mobil og rolle."}),k.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.75rem"},children:[k.jsxs("label",{style:{fontSize:"0.8rem"},children:["Navn",k.jsx("input",{type:"text",value:On,onChange:ee=>tt(ee.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),k.jsxs("label",{style:{fontSize:"0.8rem"},children:["E-post",k.jsx("input",{type:"email",value:Xt,onChange:ee=>Ze(ee.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),k.jsxs("label",{style:{fontSize:"0.8rem"},children:["Mobil",k.jsx("input",{type:"tel",value:ve,onChange:ee=>vt(ee.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),k.jsxs("label",{style:{fontSize:"0.8rem"},children:["Rolle",k.jsxs("select",{value:lt,onChange:ee=>Vt(ee.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"},children:[k.jsx("option",{value:"admin",children:"Admin"}),k.jsx("option",{value:"teacher",children:"Lrer"}),k.jsx("option",{value:"student",children:"Student"})]})]})]}),k.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"0.5rem"},children:[k.jsx("button",{type:"button",onClick:ln,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.85rem",cursor:"pointer"},children:"Avbryt"}),k.jsx("button",{type:"button",onClick:De==="create"?qe:Un,style:{padding:"0.3rem 0.9rem",borderRadius:"999px",border:"none",backgroundColor:"#16a34a",color:"#ffffff",fontSize:"0.85rem",cursor:"pointer"},children:De==="create"?"Opprett admin":"Lagre"})]})]})})]})},o8=()=>{const[a,e]=Ce.useState([]),[n,o]=Ce.useState(""),[h,m]=Ce.useState([]),[x,v]=Ce.useState(!0),[T,A]=Ce.useState(""),[S,O]=Ce.useState({}),[B,Y]=Ce.useState(null),[te,le]=Ce.useState(""),[de,Ge]=Ce.useState(""),[Le,me]=Ce.useState(null),[Be,ct]=Ce.useState(0),[je,F]=Ce.useState({}),[z,V]=Ce.useState([]),[Z,X]=Ce.useState(!1),[W,G]=Ce.useState(""),Qe=Ce.useRef(null),[oe,ue]=Ce.useState(!1),[Ae,Ye]=Ce.useState([]),[ft,yt]=Ce.useState(!1),[q,ae]=Ce.useState([]);Ce.useEffect(()=>{(async()=>{try{v(!0);const[De,He,Je,$e]=await Promise.all([di(Rr(Ot,"requirements")),di(Rr(Ot,"times")),di(Rr(Ot,"termLabels")).catch(()=>null),di(Rr(Ot,"terms")).catch(()=>null)]),On=De.docs.map(Xt=>{const Ze=Xt.data();return{id:Xt.id,term:Ze.term,category:Ze.category,requiredCount:Ze.requiredCount??0,order:typeof Ze?.order=="number"?Ze.order:void 0}}),tt=He.docs.map(Xt=>{const Ze=Xt.data();return{id:Xt.id,name:Ze.name,category:Ze.category,term:Ze.term}});if(e(On),m(tt),$e){const Xt=$e.docs.map(Ze=>{const ve=Ze.data(),vt=typeof ve?.value=="number"?ve.value:void 0,lt=typeof ve?.label=="string"?ve.label:"",Vt=typeof ve?.order=="number"?ve.order:void 0;return typeof vt!="number"?null:{docId:Ze.id,value:vt,label:lt,order:Vt}}).filter(Boolean);Xt.sort((Ze,ve)=>{const vt=Ze.order??Ze.value,lt=ve.order??ve.value;return vt-lt}),V(Xt)}if(Je){const Xt={};Je.docs.forEach(Ze=>{const ve=Ze.data(),vt=parseInt(Ze.id,10);!Number.isNaN(vt)&&typeof ve?.label=="string"&&ve.label.trim()&&(Xt[vt]=ve.label.trim())}),F(Xt)}}catch(De){console.error("Feil ved lasting av termin-oppsett:",De)}finally{v(!1)}})()},[]);const re=a.filter(Te=>Te.term===n).sort((Te,De)=>{const He=Te.order??Number.MAX_SAFE_INTEGER,Je=De.order??Number.MAX_SAFE_INTEGER;return He!==Je?He-Je:Te.category.localeCompare(De.category,"nb-NO",{sensitivity:"base"})}),ye=Ce.useMemo(()=>{const Te=z.slice().sort((De,He)=>(De.order??De.value)-(He.order??He.value)).map(De=>({value:De.value,label:De.label||`Termin ${De.value}`}));return Object.keys(je).length>0?Te.map(De=>({...De,label:je[De.value]??De.label})):Te},[z,je]),ke=Te=>zg(ye,Te??null),we=()=>{if(n==="")return;const Te=ke(n);G(Te),X(!0),setTimeout(()=>Qe.current?.focus(),0)},rt=()=>{X(!1),G("")},at=async()=>{if(n==="")return;const Te=ke(n),De=W.trim();if(!De||De===Te){X(!1);return}try{const He=z.find(Je=>Je.value===Number(n));if(He)await tl(or(Ot,"terms",He.docId),{label:De,updatedAt:lf()}),V(Je=>Je.map($e=>$e.docId===He.docId?{...$e,label:De}:$e));else{const Je=String(n);await el(or(Ot,"termLabels",Je),{label:De,updatedAt:lf(),value:Number(n)},{merge:!0}),F($e=>({...$e,[Number(n)]:De}))}X(!1)}catch(He){console.error("Feil ved endring av modulnavn:",He),alert("Kunne ikke endre navn p modulen.")}},wt=async()=>{try{const Te=z.map(Ze=>Ze.value),De=z.map(Ze=>Ze.order??Ze.value),He=Te.length>0?Math.max(...Te):0,Je=De.length>0?Math.max(...De):0,$e=He+1,On=Je+1,Xt={docId:(await of(Rr(Ot,"terms"),{value:$e,label:"",order:On,createdAt:lf()})).id,value:$e,label:"",order:On};V(Ze=>[...Ze,Xt]),o($e),G(""),X(!0),setTimeout(()=>Qe.current?.focus(),0)}catch(Te){console.error("Kunne ikke opprette ny oppmtebok:",Te),alert("Kunne ikke opprette ny oppmtebok.")}},mn=()=>{if(z.length===0)return;const Te=z.slice().sort((De,He)=>(De.order??De.value)-(He.order??He.value));Ye(Te),ue(!0)},zt=(Te,De)=>{Ye(He=>{const Je=He.slice(),$e=Te+De;if($e<0||$e>=Je.length)return He;const[On]=Je.splice(Te,1);return Je.splice($e,0,On),Je})},zn=async()=>{try{const Te=a1(Ot);Ae.forEach((De,He)=>{Te.update(or(Ot,"terms",De.docId),{order:He+1})}),await Te.commit(),V(Ae.map((De,He)=>({...De,order:He+1}))),ue(!1)}catch(Te){console.error("Kunne ikke lagre sortering av terminer:",Te),alert("Kunne ikke lagre sortering av terminer.")}},dt=()=>{if(n==="")return;const Te=a.filter(De=>De.term===n).slice().sort((De,He)=>{const Je=De.order??Number.MAX_SAFE_INTEGER,$e=He.order??Number.MAX_SAFE_INTEGER;return Je!==$e?Je-$e:De.category.localeCompare(He.category,"nb-NO",{sensitivity:"base"})});ae(Te),yt(!0)},wn=(Te,De)=>{ae(He=>{const Je=He.slice(),$e=Te+De;if($e<0||$e>=Je.length)return He;const[On]=Je.splice(Te,1);return Je.splice($e,0,On),Je})},Nn=async()=>{try{const Te=a1(Ot);q.forEach((De,He)=>{Te.update(or(Ot,"requirements",De.id),{order:He+1})}),await Te.commit(),e(De=>{const He={};return q.forEach((Je,$e)=>He[Je.id]=$e+1),De.map(Je=>He[Je.id]?{...Je,order:He[Je.id]}:Je)}),yt(!1)}catch(Te){console.error("Kunne ikke lagre sortering av grupper:",Te),alert("Kunne ikke lagre sortering av grupper.")}},Kn=async Te=>{const De=te.trim();if(!De||De===Te.name){Y(null),le("");return}try{await tl(or(Ot,"times",Te.id),{name:De}),m(He=>He.map(Je=>Je.id===Te.id?{...Je,name:De}:Je)),Y(null),le("")}catch(He){console.error("Feil ved endring av timenavn:",He),alert("Kunne ikke oppdatere navn p timen.")}},qt=h.filter(Te=>Te.term===n),Pt=Te=>{me(Te.id),Ge(Te.category),ct(Te.requiredCount??0)},Ve=()=>{me(null)},Et=async Te=>{if(!Le)return;const De=Te.category,He=(de||"").trim()||De,Je=h.filter(tt=>tt.term===Te.term&&tt.category===De).length;let $e=Be;if((Number.isNaN($e)||$e<0)&&($e=0),Je>0&&$e>Je&&($e=Je),re.find(tt=>tt.id!==Te.id&&tt.category.toLowerCase()===He.toLowerCase())){alert("Det finnes allerede en gruppe med dette navnet i valgt termin.");return}try{const tt=a1(Ot),Xt=or(Ot,"requirements",Te.id);tt.update(Xt,{category:He,requiredCount:$e});const Ze=uo(Rr(Ot,"times"),ms("term","==",Te.term),ms("category","==",De));(await di(Ze)).forEach(Vt=>{tt.update(Vt.ref,{category:He})});const vt=uo(Rr(Ot,"sessions"),ms("term","==",Te.term),ms("category","==",De));(await di(vt)).forEach(Vt=>{tt.update(Vt.ref,{category:He})}),await tt.commit(),e(Vt=>Vt.map(jn=>jn.id===Te.id?{...jn,category:He,requiredCount:$e}:jn)),m(Vt=>Vt.map(jn=>jn.term===Te.term&&jn.category===De?{...jn,category:He}:jn)),me(null)}catch(tt){console.error("Feil ved lagring av gruppe:",tt),alert("Kunne ikke lagre endringene for gruppen.")}},Xe=async()=>{const Te=T.trim();if(!Te)return;if(re.some(He=>He.category.toLowerCase()===Te.toLowerCase())){alert("Denne gruppen finnes allerede for valgt termin.");return}try{const He=a.filter(tt=>tt.term===n),$e=(He.length?Math.max(...He.map(tt=>typeof tt.order=="number"?tt.order:0)):0)+1,On=await of(Rr(Ot,"requirements"),{term:n,category:Te,requiredCount:0,order:$e});e(tt=>[...tt,{id:On.id,term:n,category:Te,requiredCount:0,order:$e}]),A("")}catch(He){console.error("Feil ved oppretting av kategori:",He),alert("Kunne ikke opprette kategori.")}},jr=async Te=>{if(window.confirm("Er du sikker p at du vil slette denne gruppen for terminen?"))try{await NE(or(Ot,"requirements",Te)),e(De=>De.filter(He=>He.id!==Te))}catch(De){console.error("Feil ved sletting av krav:",De),alert("Kunne ikke slette gruppen.")}},Hr=async Te=>{const De=Te.id,He=(S[De]??"").trim();if(He)try{const Je=await of(Rr(Ot,"times"),{term:n,category:Te.category,name:He});m($e=>[...$e,{id:Je.id,term:n,category:Te.category,name:He}]),O($e=>({...$e,[De]:""}))}catch(Je){console.error("Feil ved oppretting av time:",Je),alert("Kunne ikke opprette time.")}},pn=async Te=>{if(window.confirm(`Slette timen "${Te.name}" fra ${ke(Te.term)}? Historiske sesjoner beholdes, men timen forsvinner fra admin-oppsettet.`))try{await NE(or(Ot,"times",Te.id)),m(He=>He.filter(Je=>Je.id!==Te.id))}catch(He){console.error("Feil ved sletting av time:",He),alert("Kunne ikke slette time.")}};return x?k.jsx(yo,{}):k.jsxs(k.Fragment,{children:[k.jsxs("section",{style:{marginBottom:"2rem"},children:[k.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.75rem"},children:[k.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[Z?k.jsx("input",{ref:Qe,type:"text",value:W,onChange:Te=>G(Te.target.value),onKeyDown:Te=>{Te.key==="Enter"?(Te.preventDefault(),at()):Te.key==="Escape"&&(Te.preventDefault(),rt())},placeholder:"Navn p modul",style:{flex:1,minWidth:0,padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db"}}):k.jsxs("select",{value:n,onChange:Te=>{const De=Te.target.value;if(De==="__new__"){wt();return}o(De===""?"":parseInt(De,10))},style:{flex:1,minWidth:0,padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db"},children:[k.jsx("option",{value:"",disabled:!0,children:"Velg termin"}),ye.map(Te=>k.jsx("option",{value:Te.value,children:Te.label},Te.value)),k.jsx("option",{value:"__new__",children:"+ Ny oppmtebok"})]}),k.jsx("button",{type:"button",disabled:n===""&&!Z,onClick:()=>{Z?at():we()},style:{width:"160px",padding:"0.45rem 0.9rem",borderRadius:"999px",border:"none",backgroundColor:"#dc2626",color:"#ffffff",fontSize:"0.9rem",cursor:n===""&&!Z?"not-allowed":"pointer",whiteSpace:"nowrap"},children:Z?"Lagre":"Endre navn"}),k.jsx("button",{type:"button",title:"Sorter oppmtebker",disabled:z.length===0,onClick:mn,style:{padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",background:"#ffffff",fontSize:"0.9rem",cursor:z.length===0?"not-allowed":"pointer"},children:""})]}),k.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",alignItems:"center"},children:[k.jsx("input",{type:"text",placeholder:"Ny gruppe...",value:T,onChange:Te=>A(Te.target.value),onKeyDown:Te=>{Te.key==="Enter"&&(Te.preventDefault(),Xe())},style:{flex:1,minWidth:0,padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db"}}),k.jsx("button",{type:"button",onClick:Xe,style:{width:"160px",padding:"0.45rem 0.9rem",borderRadius:"999px",border:"none",backgroundColor:"#dc2626",color:"#ffffff",fontSize:"0.9rem",cursor:"pointer",whiteSpace:"nowrap"},children:"Legg til gruppe"}),k.jsx("button",{type:"button",title:"Sorter grupper",disabled:n===""||re.length===0,onClick:dt,style:{padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",background:"#ffffff",fontSize:"0.9rem",cursor:n===""||re.length===0?"not-allowed":"pointer"},children:""})]})]}),re.length===0?k.jsxs("p",{style:{fontSize:"0.85rem",color:"#6b7280"},children:["Ingen grupper definert enn for ",ke(n),"."]}):k.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:re.map(Te=>{const De=Te.id,He=qt.filter(tt=>tt.category===Te.category).sort((tt,Xt)=>{const Ze=HE(tt.name),ve=HE(Xt.name);return Ze!==ve?Ze-ve:tt.name.localeCompare(Xt.name,"nb-NO",{sensitivity:"base"})}),Je=S[De]??"",$e=qt.filter(tt=>tt.category===Te.category).length,On=Le===Te.id;return k.jsxs("div",{style:{borderRadius:"0.75rem",border:"1px solid #e5e7eb",padding:"0.75rem 0.75rem",backgroundColor:"#f9fafb"},children:[k.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem",gap:"0.5rem",flexWrap:"wrap"},children:[k.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:On?k.jsxs(k.Fragment,{children:[k.jsx("input",{type:"text",value:de,onChange:tt=>Ge(tt.target.value),onKeyDown:tt=>{tt.key==="Enter"?Et(Te):tt.key==="Escape"&&Ve()},autoFocus:!0,style:{minWidth:"12rem",padding:"0.2rem 0.35rem",borderRadius:"0.4rem",border:"1px solid #d1d5db",fontSize:"0.9rem"}}),k.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[k.jsx("input",{type:"number",min:0,max:$e,value:Be,onChange:tt=>{const Xt=parseInt(tt.target.value,10);ct(Number.isNaN(Xt)?0:Xt)},onKeyDown:tt=>{tt.key==="Enter"?Et(Te):tt.key==="Escape"&&Ve()},style:{width:"4rem",padding:"0.2rem 0.35rem",borderRadius:"0.4rem",border:"1px solid #d1d5db",fontSize:"0.9rem",textAlign:"center"}}),k.jsxs("span",{style:{fontSize:"0.8rem",color:"#6b7280"},children:["/ ",$e]})]})]}):k.jsxs("div",{style:{fontWeight:600,fontSize:"0.95rem"},children:[Te.category," (",Te.requiredCount,"/",$e,")"]})}),k.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[k.jsx("button",{type:"button",onClick:()=>On?void Et(Te):Pt(Te),style:{padding:"0.25rem 0.6rem",borderRadius:"999px",border:"none",backgroundColor:"#e5e7eb",color:"#111827",fontSize:"0.75rem",cursor:"pointer"},children:On?"Lagre":"Endre gruppe"}),k.jsx("button",{type:"button",onClick:()=>jr(Te.id),style:{padding:"0.25rem 0.6rem",borderRadius:"999px",border:"none",backgroundColor:"#fee2e2",color:"#991b1b",fontSize:"0.75rem",cursor:"pointer"},children:"Slett gruppe"})]})]}),He.length>0?k.jsx("ul",{style:{listStyle:"none",paddingLeft:0,margin:"0 0 0.5rem 0",fontSize:"0.85rem"},children:He.map(tt=>{const Xt=B===tt.id;return k.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.15rem 0",borderBottom:"1px dashed #e5e7eb",gap:"0.5rem"},children:[k.jsx("div",{style:{flex:1},children:Xt?k.jsx("input",{type:"text",value:te,onChange:Ze=>le(Ze.target.value),onKeyDown:Ze=>{Ze.key==="Enter"?Kn(tt):Ze.key==="Escape"&&(Y(null),le(""))},autoFocus:!0,style:{width:"100%",padding:"0.2rem 0.35rem",borderRadius:"0.4rem",border:"1px solid #d1d5db",fontSize:"0.85rem"}}):k.jsx("span",{children:tt.name})}),k.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem"},children:[Xt?k.jsx("button",{type:"button",onClick:()=>void Kn(tt),style:{padding:"0.15rem 0.45rem",borderRadius:"999px",border:"none",backgroundColor:"#e5e7eb",color:"#111827",fontSize:"0.75rem",cursor:"pointer"},children:"Lagre"}):k.jsx("button",{type:"button",onClick:()=>{Y(tt.id),le(tt.name)},style:{padding:"0.15rem 0.45rem",borderRadius:"999px",border:"none",backgroundColor:"#e5e7eb",color:"#111827",fontSize:"0.75rem",cursor:"pointer"},children:"Endre"}),k.jsx("button",{type:"button",onClick:()=>pn(tt),style:{padding:"0.15rem 0.45rem",borderRadius:"999px",border:"none",backgroundColor:"#fee2e2",color:"#b91c1c",fontSize:"0.75rem",cursor:"pointer"},children:"Slett"})]})]},tt.id)})}):k.jsx("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.8rem",color:"#9ca3af"},children:"Ingen timer lagt til i denne gruppen."}),k.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.25rem"},children:[k.jsx("input",{type:"text",placeholder:"Ny time...",value:Je,onChange:tt=>O(Xt=>({...Xt,[De]:tt.target.value})),onKeyDown:tt=>{tt.key==="Enter"&&(tt.preventDefault(),Hr(Te))},style:{flex:1,padding:"0.3rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem"}}),k.jsx("button",{type:"button",onClick:()=>Hr(Te),style:{padding:"0.35rem 0.8rem",borderRadius:"999px",border:"none",backgroundColor:"#4b5563",color:"#ffffff",fontSize:"0.8rem",cursor:"pointer"},children:"Legg til time"})]})]},Te.id)})})]}),oe&&k.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:k.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[k.jsx("h3",{style:{marginTop:0},children:"Sorter oppmtebker"}),k.jsx("ul",{style:{listStyle:"none",padding:0,margin:"0 0 0.75rem"},children:Ae.map((Te,De)=>k.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"0.4rem 0.6rem",marginBottom:"0.4rem"},children:[k.jsx("span",{style:{fontSize:"0.9rem"},children:Te.label||`Termin ${Te.value}`}),k.jsxs("span",{style:{display:"flex",gap:"0.25rem"},children:[k.jsx("button",{type:"button",onClick:()=>zt(De,-1),disabled:De===0,style:{padding:"0.2rem 0.4rem",borderRadius:"0.35rem",border:"1px solid #d1d5db",background:"#fff"},children:""}),k.jsx("button",{type:"button",onClick:()=>zt(De,1),disabled:De===Ae.length-1,style:{padding:"0.2rem 0.4rem",borderRadius:"0.35rem",border:"1px solid #d1d5db",background:"#fff"},children:""})]})]},Te.docId))}),k.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem"},children:[k.jsx("button",{type:"button",onClick:()=>ue(!1),style:{padding:"0.35rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#fff"},children:"Avbryt"}),k.jsx("button",{type:"button",onClick:()=>void zn(),style:{padding:"0.35rem 0.7rem",borderRadius:"999px",border:"none",background:"#16a34a",color:"#fff"},children:"Lagre rekkeflge"})]})]})}),ft&&k.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:k.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[k.jsx("h3",{style:{marginTop:0},children:"Sorter grupper"}),k.jsx("ul",{style:{listStyle:"none",padding:0,margin:"0 0 0.75rem"},children:q.map((Te,De)=>k.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"0.4rem 0.6rem",marginBottom:"0.4rem"},children:[k.jsx("span",{style:{fontSize:"0.9rem"},children:Te.category}),k.jsxs("span",{style:{display:"flex",gap:"0.25rem"},children:[k.jsx("button",{type:"button",onClick:()=>wn(De,-1),disabled:De===0,style:{padding:"0.2rem 0.4rem",borderRadius:"0.35rem",border:"1px solid #d1d5db",background:"#fff"},children:""}),k.jsx("button",{type:"button",onClick:()=>wn(De,1),disabled:De===q.length-1,style:{padding:"0.2rem 0.4rem",borderRadius:"0.35rem",border:"1px solid #d1d5db",background:"#fff"},children:""})]})]},Te.id))}),k.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem"},children:[k.jsx("button",{type:"button",onClick:()=>yt(!1),style:{padding:"0.35rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#fff"},children:"Avbryt"}),k.jsx("button",{type:"button",onClick:()=>void Nn(),style:{padding:"0.35rem 0.7rem",borderRadius:"999px",border:"none",background:"#16a34a",color:"#fff"},children:"Lagre rekkeflge"})]})]})})]})},l8=()=>{const{user:a,loading:e}=mA(),[n,o]=Ce.useState("setup");return e?k.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#f5f5f7"},children:k.jsx(yo,{})}):!a||a.role!=="admin"?k.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#f5f5f7",padding:"1.5rem"},children:k.jsxs("div",{className:"page-card page-card--admin",children:[k.jsx("h2",{children:"Ingen tilgang"}),k.jsx("p",{children:"Du m vre logget inn som administrator for  se denne siden."})]})}):k.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"flex-start",justifyContent:"center",background:"#f5f5f7",padding:"1.5rem 1rem"},children:k.jsxs("div",{className:"page-card page-card--admin",children:[k.jsxs("header",{style:{marginBottom:"1rem",borderBottom:"1px solid #e5e7eb",paddingBottom:"0.75rem"},children:[k.jsx("h2",{style:{margin:0},children:"Adminpanel"}),k.jsx("p",{style:{margin:"0.25rem 0 0.75rem",fontSize:"0.85rem",color:"#6b7280"},children:"Oppsett av krav per termin, administrasjon av brukere og forhndsvisning for lrere."}),k.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[k.jsx("button",{type:"button",onClick:()=>o("setup"),style:{flex:1,padding:"0.35rem 0.5rem",borderRadius:"999px",border:"1px solid #e5e7eb",background:n==="setup"?"#b91c1c":"#ffffff",color:n==="setup"?"#ffffff":"#111827",fontSize:"0.85rem",cursor:"pointer"},children:"Oppmtebker"}),k.jsx("button",{type:"button",onClick:()=>o("users"),style:{flex:1,padding:"0.35rem 0.5rem",borderRadius:"999px",border:"1px solid #e5e7eb",background:n==="users"?"#b91c1c":"#ffffff",color:n==="users"?"#ffffff":"#111827",fontSize:"0.85rem",cursor:"pointer"},children:"Brukere"})]})]}),n==="setup"&&k.jsx(o8,{}),n==="users"&&k.jsx(a8,{}),n==="teacherView"&&k.jsx(TeacherPreview,{})]})})},c1={minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"Helvetica, Arial, sans-serif"},u1={background:"white",borderRadius:"0.75rem",padding:"1.5rem",boxShadow:"0 10px 25px rgba(0,0,0,0.08)",width:"100%",maxWidth:"960px"};function c8(){const{user:a,loading:e,login:n,logout:o}=mA(),[h,m]=Ce.useState(""),[x,v]=Ce.useState(""),[T,A]=Ce.useState(null),[S,O]=Ce.useState(!1),B=async Y=>{if(Y.preventDefault(),A(null),!h||!x){A("Fyll inn bde e-post og passord.");return}O(!0);try{await n(h.trim(),x)}catch(te){console.error(te);let le="Kunne ikke logge inn.";te?.code==="auth/user-not-found"?le="Bruker finnes ikke.":te?.code==="auth/wrong-password"?le="Feil passord.":te?.code==="auth/email-already-in-use"?le="E-postadressen er allerede registrert.":te?.code==="auth/weak-password"&&(le="Passordet er for svakt (min. 6 tegn)."),A(le)}finally{O(!1)}};return e?k.jsx("div",{style:c1,children:k.jsx("div",{style:u1,children:k.jsx(yo,{})})}):a?k.jsx("div",{style:c1,children:k.jsxs("div",{style:u1,children:[k.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[k.jsx("div",{children:k.jsx("div",{children:a.displayName||a.email})}),k.jsx("button",{onClick:o,style:{padding:"0.3rem 0.8rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#f9fafb",cursor:"pointer",fontSize:"0.85rem"},children:"Logg ut"})]}),k.jsx("main",{children:a.role==="admin"?k.jsx(l8,{user:a}):a.role==="teacher"?k.jsx(s8,{user:a}):k.jsx(q4,{user:a})})]})}):k.jsx("div",{className:"front-page",style:{...c1,background:"#CEFFDF",width:"100%"},children:k.jsxs("div",{style:{...u1,maxWidth:"420px"},children:[k.jsx("h1",{style:{marginBottom:"2rem",textAlign:"center"},children:"Oppmteregistrering"}),k.jsxs("form",{onSubmit:B,children:[k.jsxs("div",{style:{marginBottom:"0.75rem"},children:[k.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.2rem"},children:"Mobil / Epost"}),k.jsx("input",{type:"email",value:h,onChange:Y=>m(Y.target.value),placeholder:"uiobrukernavn@uio.no",style:{width:"100%",padding:"0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db"}})]}),k.jsxs("div",{style:{marginBottom:"0.75rem"},children:[k.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.2rem"},children:"Passord"}),k.jsx("input",{type:"password",value:x,onChange:Y=>v(Y.target.value),placeholder:"Minst 6 tegn",style:{width:"100%",padding:"0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db"}})]}),T&&k.jsx("p",{style:{color:"red",fontSize:"0.85rem",marginBottom:"0.75rem"},children:T}),k.jsx("button",{type:"submit",disabled:S,style:{width:"100%",padding:"0.6rem 1rem",borderRadius:"999px",border:"none",background:"#6CE1AB",color:"black",fontWeight:500,cursor:"pointer",marginTop:"1.5rem",marginBottom:"1rem"},children:S?"Logger inn...":"Logg inn"})]})]})})}sT.createRoot(document.getElementById("root")).render(k.jsx(Ir.StrictMode,{children:k.jsx(c8,{})}));
