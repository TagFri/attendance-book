function Yw(a,e){for(var n=0;n<e.length;n++){const o=e[n];if(typeof o!="string"&&!Array.isArray(o)){for(const h in o)if(h!=="default"&&!(h in a)){const m=Object.getOwnPropertyDescriptor(o,h);m&&Object.defineProperty(a,h,m.get?m:{enumerable:!0,get:()=>o[h]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))o(h);new MutationObserver(h=>{for(const m of h)if(m.type==="childList")for(const _ of m.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&o(_)}).observe(document,{childList:!0,subtree:!0});function n(h){const m={};return h.integrity&&(m.integrity=h.integrity),h.referrerPolicy&&(m.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?m.credentials="include":h.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function o(h){if(h.ep)return;h.ep=!0;const m=n(h);fetch(h.href,m)}})();var Hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function z1(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var z0={exports:{}},Kc={};var H2;function Ww(){if(H2)return Kc;H2=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(o,h,m){var _=null;if(m!==void 0&&(_=""+m),h.key!==void 0&&(_=""+h.key),"key"in h){m={};for(var b in h)b!=="key"&&(m[b]=h[b])}else m=h;return h=m.ref,{$$typeof:a,type:o,key:_,ref:h!==void 0?h:null,props:m}}return Kc.Fragment=e,Kc.jsx=n,Kc.jsxs=n,Kc}var G2;function Kw(){return G2||(G2=1,z0.exports=Ww()),z0.exports}var U=Kw(),j0={exports:{}},At={};var q2;function Qw(){if(q2)return At;q2=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),_=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),B=Symbol.iterator;function Y(Z){return Z===null||typeof Z!="object"?null:(Z=B&&Z[B]||Z["@@iterator"],typeof Z=="function"?Z:null)}var ne={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ie=Object.assign,ge={};function Ue(Z,X,de){this.props=Z,this.context=X,this.refs=ge,this.updater=de||ne}Ue.prototype.isReactComponent={},Ue.prototype.setState=function(Z,X){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,X,"setState")},Ue.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function Oe(){}Oe.prototype=Ue.prototype;function pe(Z,X,de){this.props=Z,this.context=X,this.refs=ge,this.updater=de||ne}var Le=pe.prototype=new Oe;Le.constructor=pe,ie(Le,Ue.prototype),Le.isPureReactComponent=!0;var nt=Array.isArray;function ze(){}var F={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function P(Z,X,de){var we=de.ref;return{$$typeof:a,type:Z,key:X,ref:we!==void 0?we:null,props:de}}function Q(Z,X){return P(Z.type,X,Z.props)}function q(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===a}function W(Z){var X={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(de){return X[de]})}var G=/\/+/g;function Qe(Z,X){return typeof Z=="object"&&Z!==null&&Z.key!=null?W(""+Z.key):X.toString(36)}function oe(Z){switch(Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason;default:switch(typeof Z.status=="string"?Z.then(ze,ze):(Z.status="pending",Z.then(function(X){Z.status==="pending"&&(Z.status="fulfilled",Z.value=X)},function(X){Z.status==="pending"&&(Z.status="rejected",Z.reason=X)})),Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason}}throw Z}function $(Z,X,de,we,Fe){var ye=typeof Z;(ye==="undefined"||ye==="boolean")&&(Z=null);var Xe=!1;if(Z===null)Xe=!0;else switch(ye){case"bigint":case"string":case"number":Xe=!0;break;case"object":switch(Z.$$typeof){case a:case e:Xe=!0;break;case S:return Xe=Z._init,$(Xe(Z._payload),X,de,we,Fe)}}if(Xe)return Fe=Fe(Z),Xe=we===""?"."+Qe(Z,0):we,nt(Fe)?(de="",Xe!=null&&(de=Xe.replace(G,"$&/")+"/"),$(Fe,X,de,"",function(mn){return mn})):Fe!=null&&(q(Fe)&&(Fe=Q(Fe,de+(Fe.key==null||Z&&Z.key===Fe.key?"":(""+Fe.key).replace(G,"$&/")+"/")+Xe)),X.push(Fe)),1;Xe=0;var et=we===""?".":we+":";if(nt(Z))for(var lt=0;lt<Z.length;lt++)we=Z[lt],ye=et+Qe(we,lt),Xe+=$(we,X,de,ye,Fe);else if(lt=Y(Z),typeof lt=="function")for(Z=lt.call(Z),lt=0;!(we=Z.next()).done;)we=we.value,ye=et+Qe(we,lt++),Xe+=$(we,X,de,ye,Fe);else if(ye==="object"){if(typeof Z.then=="function")return $(oe(Z),X,de,we,Fe);throw X=String(Z),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return Xe}function le(Z,X,de){if(Z==null)return Z;var we=[],Fe=0;return $(Z,we,"","",function(ye){return X.call(de,ye,Fe++)}),we}function Re(Z){if(Z._status===-1){var X=Z._result;X=X(),X.then(function(de){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=de)},function(de){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=de)}),Z._status===-1&&(Z._status=0,Z._result=X)}if(Z._status===1)return Z._result.default;throw Z._result}var He=typeof reportError=="function"?reportError:function(Z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Z=="object"&&Z!==null&&typeof Z.message=="string"?String(Z.message):String(Z),error:Z});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Z);return}console.error(Z)},Ye={map:le,forEach:function(Z,X,de){le(Z,function(){X.apply(this,arguments)},de)},count:function(Z){var X=0;return le(Z,function(){X++}),X},toArray:function(Z){return le(Z,function(X){return X})||[]},only:function(Z){if(!q(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}};return At.Activity=O,At.Children=Ye,At.Component=Ue,At.Fragment=n,At.Profiler=h,At.PureComponent=pe,At.StrictMode=o,At.Suspense=T,At.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,At.__COMPILER_RUNTIME={__proto__:null,c:function(Z){return F.H.useMemoCache(Z)}},At.cache=function(Z){return function(){return Z.apply(null,arguments)}},At.cacheSignal=function(){return null},At.cloneElement=function(Z,X,de){if(Z==null)throw Error("The argument must be a React element, but you passed "+Z+".");var we=ie({},Z.props),Fe=Z.key;if(X!=null)for(ye in X.key!==void 0&&(Fe=""+X.key),X)!j.call(X,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&X.ref===void 0||(we[ye]=X[ye]);var ye=arguments.length-2;if(ye===1)we.children=de;else if(1<ye){for(var Xe=Array(ye),et=0;et<ye;et++)Xe[et]=arguments[et+2];we.children=Xe}return P(Z.type,Fe,we)},At.createContext=function(Z){return Z={$$typeof:_,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null},Z.Provider=Z,Z.Consumer={$$typeof:m,_context:Z},Z},At.createElement=function(Z,X,de){var we,Fe={},ye=null;if(X!=null)for(we in X.key!==void 0&&(ye=""+X.key),X)j.call(X,we)&&we!=="key"&&we!=="__self"&&we!=="__source"&&(Fe[we]=X[we]);var Xe=arguments.length-2;if(Xe===1)Fe.children=de;else if(1<Xe){for(var et=Array(Xe),lt=0;lt<Xe;lt++)et[lt]=arguments[lt+2];Fe.children=et}if(Z&&Z.defaultProps)for(we in Xe=Z.defaultProps,Xe)Fe[we]===void 0&&(Fe[we]=Xe[we]);return P(Z,ye,Fe)},At.createRef=function(){return{current:null}},At.forwardRef=function(Z){return{$$typeof:b,render:Z}},At.isValidElement=q,At.lazy=function(Z){return{$$typeof:S,_payload:{_status:-1,_result:Z},_init:Re}},At.memo=function(Z,X){return{$$typeof:A,type:Z,compare:X===void 0?null:X}},At.startTransition=function(Z){var X=F.T,de={};F.T=de;try{var we=Z(),Fe=F.S;Fe!==null&&Fe(de,we),typeof we=="object"&&we!==null&&typeof we.then=="function"&&we.then(ze,He)}catch(ye){He(ye)}finally{X!==null&&de.types!==null&&(X.types=de.types),F.T=X}},At.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},At.use=function(Z){return F.H.use(Z)},At.useActionState=function(Z,X,de){return F.H.useActionState(Z,X,de)},At.useCallback=function(Z,X){return F.H.useCallback(Z,X)},At.useContext=function(Z){return F.H.useContext(Z)},At.useDebugValue=function(){},At.useDeferredValue=function(Z,X){return F.H.useDeferredValue(Z,X)},At.useEffect=function(Z,X){return F.H.useEffect(Z,X)},At.useEffectEvent=function(Z){return F.H.useEffectEvent(Z)},At.useId=function(){return F.H.useId()},At.useImperativeHandle=function(Z,X,de){return F.H.useImperativeHandle(Z,X,de)},At.useInsertionEffect=function(Z,X){return F.H.useInsertionEffect(Z,X)},At.useLayoutEffect=function(Z,X){return F.H.useLayoutEffect(Z,X)},At.useMemo=function(Z,X){return F.H.useMemo(Z,X)},At.useOptimistic=function(Z,X){return F.H.useOptimistic(Z,X)},At.useReducer=function(Z,X,de){return F.H.useReducer(Z,X,de)},At.useRef=function(Z){return F.H.useRef(Z)},At.useState=function(Z){return F.H.useState(Z)},At.useSyncExternalStore=function(Z,X,de){return F.H.useSyncExternalStore(Z,X,de)},At.useTransition=function(){return F.H.useTransition()},At.version="19.2.0",At}var X2;function j1(){return X2||(X2=1,j0.exports=Qw()),j0.exports}var ke=j1();const pr=z1(ke);var H0={exports:{}},Qc={},G0={exports:{}},q0={};var Y2;function Zw(){return Y2||(Y2=1,(function(a){function e($,le){var Re=$.length;$.push(le);e:for(;0<Re;){var He=Re-1>>>1,Ye=$[He];if(0<h(Ye,le))$[He]=le,$[Re]=Ye,Re=He;else break e}}function n($){return $.length===0?null:$[0]}function o($){if($.length===0)return null;var le=$[0],Re=$.pop();if(Re!==le){$[0]=Re;e:for(var He=0,Ye=$.length,Z=Ye>>>1;He<Z;){var X=2*(He+1)-1,de=$[X],we=X+1,Fe=$[we];if(0>h(de,Re))we<Ye&&0>h(Fe,de)?($[He]=Fe,$[we]=Re,He=we):($[He]=de,$[X]=Re,He=X);else if(we<Ye&&0>h(Fe,Re))$[He]=Fe,$[we]=Re,He=we;else break e}}return le}function h($,le){var Re=$.sortIndex-le.sortIndex;return Re!==0?Re:$.id-le.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;a.unstable_now=function(){return m.now()}}else{var _=Date,b=_.now();a.unstable_now=function(){return _.now()-b}}var T=[],A=[],S=1,O=null,B=3,Y=!1,ne=!1,ie=!1,ge=!1,Ue=typeof setTimeout=="function"?setTimeout:null,Oe=typeof clearTimeout=="function"?clearTimeout:null,pe=typeof setImmediate<"u"?setImmediate:null;function Le($){for(var le=n(A);le!==null;){if(le.callback===null)o(A);else if(le.startTime<=$)o(A),le.sortIndex=le.expirationTime,e(T,le);else break;le=n(A)}}function nt($){if(ie=!1,Le($),!ne)if(n(T)!==null)ne=!0,ze||(ze=!0,W());else{var le=n(A);le!==null&&oe(nt,le.startTime-$)}}var ze=!1,F=-1,j=5,P=-1;function Q(){return ge?!0:!(a.unstable_now()-P<j)}function q(){if(ge=!1,ze){var $=a.unstable_now();P=$;var le=!0;try{e:{ne=!1,ie&&(ie=!1,Oe(F),F=-1),Y=!0;var Re=B;try{t:{for(Le($),O=n(T);O!==null&&!(O.expirationTime>$&&Q());){var He=O.callback;if(typeof He=="function"){O.callback=null,B=O.priorityLevel;var Ye=He(O.expirationTime<=$);if($=a.unstable_now(),typeof Ye=="function"){O.callback=Ye,Le($),le=!0;break t}O===n(T)&&o(T),Le($)}else o(T);O=n(T)}if(O!==null)le=!0;else{var Z=n(A);Z!==null&&oe(nt,Z.startTime-$),le=!1}}break e}finally{O=null,B=Re,Y=!1}le=void 0}}finally{le?W():ze=!1}}}var W;if(typeof pe=="function")W=function(){pe(q)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Qe=G.port2;G.port1.onmessage=q,W=function(){Qe.postMessage(null)}}else W=function(){Ue(q,0)};function oe($,le){F=Ue(function(){$(a.unstable_now())},le)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function($){$.callback=null},a.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<$?Math.floor(1e3/$):5},a.unstable_getCurrentPriorityLevel=function(){return B},a.unstable_next=function($){switch(B){case 1:case 2:case 3:var le=3;break;default:le=B}var Re=B;B=le;try{return $()}finally{B=Re}},a.unstable_requestPaint=function(){ge=!0},a.unstable_runWithPriority=function($,le){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Re=B;B=$;try{return le()}finally{B=Re}},a.unstable_scheduleCallback=function($,le,Re){var He=a.unstable_now();switch(typeof Re=="object"&&Re!==null?(Re=Re.delay,Re=typeof Re=="number"&&0<Re?He+Re:He):Re=He,$){case 1:var Ye=-1;break;case 2:Ye=250;break;case 5:Ye=1073741823;break;case 4:Ye=1e4;break;default:Ye=5e3}return Ye=Re+Ye,$={id:S++,callback:le,priorityLevel:$,startTime:Re,expirationTime:Ye,sortIndex:-1},Re>He?($.sortIndex=Re,e(A,$),n(T)===null&&$===n(A)&&(ie?(Oe(F),F=-1):ie=!0,oe(nt,Re-He))):($.sortIndex=Ye,e(T,$),ne||Y||(ne=!0,ze||(ze=!0,W()))),$},a.unstable_shouldYield=Q,a.unstable_wrapCallback=function($){var le=B;return function(){var Re=B;B=le;try{return $.apply(this,arguments)}finally{B=Re}}}})(q0)),q0}var W2;function Jw(){return W2||(W2=1,G0.exports=Zw()),G0.exports}var X0={exports:{}},Kr={};var K2;function $w(){if(K2)return Kr;K2=1;var a=j1();function e(T){var A="https://react.dev/errors/"+T;if(1<arguments.length){A+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)A+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+T+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},h=Symbol.for("react.portal");function m(T,A,S){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:O==null?null:""+O,children:T,containerInfo:A,implementation:S}}var _=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function b(T,A){if(T==="font")return"";if(typeof A=="string")return A==="use-credentials"?A:""}return Kr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Kr.createPortal=function(T,A){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)throw Error(e(299));return m(T,A,null,S)},Kr.flushSync=function(T){var A=_.T,S=o.p;try{if(_.T=null,o.p=2,T)return T()}finally{_.T=A,o.p=S,o.d.f()}},Kr.preconnect=function(T,A){typeof T=="string"&&(A?(A=A.crossOrigin,A=typeof A=="string"?A==="use-credentials"?A:"":void 0):A=null,o.d.C(T,A))},Kr.prefetchDNS=function(T){typeof T=="string"&&o.d.D(T)},Kr.preinit=function(T,A){if(typeof T=="string"&&A&&typeof A.as=="string"){var S=A.as,O=b(S,A.crossOrigin),B=typeof A.integrity=="string"?A.integrity:void 0,Y=typeof A.fetchPriority=="string"?A.fetchPriority:void 0;S==="style"?o.d.S(T,typeof A.precedence=="string"?A.precedence:void 0,{crossOrigin:O,integrity:B,fetchPriority:Y}):S==="script"&&o.d.X(T,{crossOrigin:O,integrity:B,fetchPriority:Y,nonce:typeof A.nonce=="string"?A.nonce:void 0})}},Kr.preinitModule=function(T,A){if(typeof T=="string")if(typeof A=="object"&&A!==null){if(A.as==null||A.as==="script"){var S=b(A.as,A.crossOrigin);o.d.M(T,{crossOrigin:S,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0})}}else A==null&&o.d.M(T)},Kr.preload=function(T,A){if(typeof T=="string"&&typeof A=="object"&&A!==null&&typeof A.as=="string"){var S=A.as,O=b(S,A.crossOrigin);o.d.L(T,S,{crossOrigin:O,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0,type:typeof A.type=="string"?A.type:void 0,fetchPriority:typeof A.fetchPriority=="string"?A.fetchPriority:void 0,referrerPolicy:typeof A.referrerPolicy=="string"?A.referrerPolicy:void 0,imageSrcSet:typeof A.imageSrcSet=="string"?A.imageSrcSet:void 0,imageSizes:typeof A.imageSizes=="string"?A.imageSizes:void 0,media:typeof A.media=="string"?A.media:void 0})}},Kr.preloadModule=function(T,A){if(typeof T=="string")if(A){var S=b(A.as,A.crossOrigin);o.d.m(T,{as:typeof A.as=="string"&&A.as!=="script"?A.as:void 0,crossOrigin:S,integrity:typeof A.integrity=="string"?A.integrity:void 0})}else o.d.m(T)},Kr.requestFormReset=function(T){o.d.r(T)},Kr.unstable_batchedUpdates=function(T,A){return T(A)},Kr.useFormState=function(T,A,S){return _.H.useFormState(T,A,S)},Kr.useFormStatus=function(){return _.H.useHostTransitionStatus()},Kr.version="19.2.0",Kr}var Q2;function eT(){if(Q2)return X0.exports;Q2=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),X0.exports=$w(),X0.exports}var Z2;function tT(){if(Z2)return Qc;Z2=1;var a=Jw(),e=j1(),n=eT();function o(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function m(t){var i=t,c=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(c=i.return),t=i.return;while(t)}return i.tag===3?c:null}function _(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function b(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function T(t){if(m(t)!==t)throw Error(o(188))}function A(t){var i=t.alternate;if(!i){if(i=m(t),i===null)throw Error(o(188));return i!==t?null:t}for(var c=t,d=i;;){var E=c.return;if(E===null)break;var w=E.alternate;if(w===null){if(d=E.return,d!==null){c=d;continue}break}if(E.child===w.child){for(w=E.child;w;){if(w===c)return T(E),t;if(w===d)return T(E),i;w=w.sibling}throw Error(o(188))}if(c.return!==d.return)c=E,d=w;else{for(var R=!1,k=E.child;k;){if(k===c){R=!0,c=E,d=w;break}if(k===d){R=!0,d=E,c=w;break}k=k.sibling}if(!R){for(k=w.child;k;){if(k===c){R=!0,c=w,d=E;break}if(k===d){R=!0,d=w,c=E;break}k=k.sibling}if(!R)throw Error(o(189))}}if(c.alternate!==d)throw Error(o(190))}if(c.tag!==3)throw Error(o(188));return c.stateNode.current===c?t:i}function S(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=S(t),i!==null)return i;t=t.sibling}return null}var O=Object.assign,B=Symbol.for("react.element"),Y=Symbol.for("react.transitional.element"),ne=Symbol.for("react.portal"),ie=Symbol.for("react.fragment"),ge=Symbol.for("react.strict_mode"),Ue=Symbol.for("react.profiler"),Oe=Symbol.for("react.consumer"),pe=Symbol.for("react.context"),Le=Symbol.for("react.forward_ref"),nt=Symbol.for("react.suspense"),ze=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function W(t){return t===null||typeof t!="object"?null:(t=q&&t[q]||t["@@iterator"],typeof t=="function"?t:null)}var G=Symbol.for("react.client.reference");function Qe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===G?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ie:return"Fragment";case Ue:return"Profiler";case ge:return"StrictMode";case nt:return"Suspense";case ze:return"SuspenseList";case P:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case ne:return"Portal";case pe:return t.displayName||"Context";case Oe:return(t._context.displayName||"Context")+".Consumer";case Le:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case F:return i=t.displayName||null,i!==null?i:Qe(t.type)||"Memo";case j:i=t._payload,t=t._init;try{return Qe(t(i))}catch{}}return null}var oe=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Re={pending:!1,data:null,method:null,action:null},He=[],Ye=-1;function Z(t){return{current:t}}function X(t){0>Ye||(t.current=He[Ye],He[Ye]=null,Ye--)}function de(t,i){Ye++,He[Ye]=t.current,t.current=i}var we=Z(null),Fe=Z(null),ye=Z(null),Xe=Z(null);function et(t,i){switch(de(ye,i),de(Fe,t),de(we,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?f2(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=f2(i),t=d2(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}X(we),de(we,t)}function lt(){X(we),X(Fe),X(ye)}function mn(t){t.memoizedState!==null&&de(Xe,t);var i=we.current,c=d2(i,t.type);i!==c&&(de(Fe,t),de(we,c))}function Zt(t){Fe.current===t&&(X(we),X(Fe)),Xe.current===t&&(X(Xe),qc._currentValue=Re)}var kn,_t;function Bn(t){if(kn===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);kn=i&&i[1]||"",_t=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+kn+t+_t}var ur=!1;function _r(t,i){if(!t||ur)return"";ur=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(i){var ve=function(){throw Error()};if(Object.defineProperty(ve.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ve,[])}catch(Ae){var me=Ae}Reflect.construct(t,[],ve)}else{try{ve.call()}catch(Ae){me=Ae}t.call(ve.prototype)}}else{try{throw Error()}catch(Ae){me=Ae}(ve=t())&&typeof ve.catch=="function"&&ve.catch(function(){})}}catch(Ae){if(Ae&&me&&typeof Ae.stack=="string")return[Ae.stack,me.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=d.DetermineComponentFrameRoot(),R=w[0],k=w[1];if(R&&k){var K=R.split(`
`),fe=k.split(`
`);for(E=d=0;d<K.length&&!K[d].includes("DetermineComponentFrameRoot");)d++;for(;E<fe.length&&!fe[E].includes("DetermineComponentFrameRoot");)E++;if(d===K.length||E===fe.length)for(d=K.length-1,E=fe.length-1;1<=d&&0<=E&&K[d]!==fe[E];)E--;for(;1<=d&&0<=E;d--,E--)if(K[d]!==fe[E]){if(d!==1||E!==1)do if(d--,E--,0>E||K[d]!==fe[E]){var Te=`
`+K[d].replace(" at new "," at ");return t.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",t.displayName)),Te}while(1<=d&&0<=E);break}}}finally{ur=!1,Error.prepareStackTrace=c}return(c=t?t.displayName||t.name:"")?Bn(c):""}function pn(t,i){switch(t.tag){case 26:case 27:case 5:return Bn(t.type);case 16:return Bn("Lazy");case 13:return t.child!==i&&i!==null?Bn("Suspense Fallback"):Bn("Suspense");case 19:return Bn("SuspenseList");case 0:case 15:return _r(t.type,!1);case 11:return _r(t.type.render,!1);case 1:return _r(t.type,!0);case 31:return Bn("Activity");default:return""}}function Wt(t){try{var i="",c=null;do i+=pn(t,c),c=t,t=t.return;while(t);return i}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var rt=Object.prototype.hasOwnProperty,yn=a.unstable_scheduleCallback,je=a.unstable_cancelCallback,Ni=a.unstable_shouldYield,fs=a.unstable_requestPaint,cn=a.unstable_now,ei=a.unstable_getCurrentPriorityLevel,qn=a.unstable_ImmediatePriority,qi=a.unstable_UserBlockingPriority,ir=a.unstable_NormalPriority,bn=a.unstable_LowPriority,ti=a.unstable_IdlePriority,ni=a.log,Cs=a.unstable_setDisableYieldValue,Ft=null,De=null;function Jt(t){if(typeof ni=="function"&&Cs(t),De&&typeof De.setStrictMode=="function")try{De.setStrictMode(Ft,t)}catch{}}var ut=Math.clz32?Math.clz32:bs,En=Math.log,pi=Math.LN2;function bs(t){return t>>>=0,t===0?32:31-(En(t)/pi|0)|0}var ri=256,bt=262144,un=4194304;function ii(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function si(t,i,c){var d=t.pendingLanes;if(d===0)return 0;var E=0,w=t.suspendedLanes,R=t.pingedLanes;t=t.warmLanes;var k=d&134217727;return k!==0?(d=k&~w,d!==0?E=ii(d):(R&=k,R!==0?E=ii(R):c||(c=k&~t,c!==0&&(E=ii(c))))):(k=d&~w,k!==0?E=ii(k):R!==0?E=ii(R):c||(c=d&~t,c!==0&&(E=ii(c)))),E===0?0:i!==0&&i!==E&&(i&w)===0&&(w=E&-E,c=i&-i,w>=c||w===32&&(c&4194048)!==0)?i:E}function On(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function qs(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xn(){var t=un;return un<<=1,(un&62914560)===0&&(un=4194304),t}function xr(t){for(var i=[],c=0;31>c;c++)i.push(t);return i}function yi(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function jr(t,i,c,d,E,w){var R=t.pendingLanes;t.pendingLanes=c,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=c,t.entangledLanes&=c,t.errorRecoveryDisabledLanes&=c,t.shellSuspendCounter=0;var k=t.entanglements,K=t.expirationTimes,fe=t.hiddenUpdates;for(c=R&~c;0<c;){var Te=31-ut(c),ve=1<<Te;k[Te]=0,K[Te]=-1;var me=fe[Te];if(me!==null)for(fe[Te]=null,Te=0;Te<me.length;Te++){var Ae=me[Te];Ae!==null&&(Ae.lane&=-536870913)}c&=~ve}d!==0&&ce(t,d,0),w!==0&&E===0&&t.tag!==0&&(t.suspendedLanes|=w&~(R&~i))}function ce(t,i,c){t.pendingLanes|=i,t.suspendedLanes&=~i;var d=31-ut(i);t.entangledLanes|=i,t.entanglements[d]=t.entanglements[d]|1073741824|c&261930}function Ge(t,i){var c=t.entangledLanes|=i;for(t=t.entanglements;c;){var d=31-ut(c),E=1<<d;E&i|t[d]&i&&(t[d]|=i),c&=~E}}function mt(t,i){var c=i&-i;return c=(c&42)!==0?1:We(c),(c&(t.suspendedLanes|i))!==0?0:c}function We(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Tt(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Nt(){var t=le.p;return t!==0?t:(t=window.event,t===void 0?32:k2(t.type))}function Ve(t,i){var c=le.p;try{return le.p=t,i()}finally{le.p=c}}var Vn=Math.random().toString(36).slice(2),tn="__reactFiber$"+Vn,Ot="__reactProps$"+Vn,Yn="__reactContainer$"+Vn,ds="__reactEvents$"+Vn,Ia="__reactListeners$"+Vn,ai="__reactHandles$"+Vn,hl="__reactResources$"+Vn,Xi="__reactMarker$"+Vn;function Nr(t){delete t[tn],delete t[Ot],delete t[ds],delete t[Ia],delete t[ai]}function Rn(t){var i=t[tn];if(i)return i;for(var c=t.parentNode;c;){if(i=c[Yn]||c[tn]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(t=x2(t);t!==null;){if(c=t[tn])return c;t=x2(t)}return i}t=c,c=t.parentNode}return null}function Lt(t){if(t=t[tn]||t[Yn]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function Hr(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(o(33))}function Ar(t){var i=t[hl];return i||(i=t[hl]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Un(t){t[Xi]=!0}var Se=new Set,Io={};function nn(t,i){Or(t,i),Or(t+"Capture",i)}function Or(t,i){for(Io[t]=i,t=0;t<i.length;t++)Se.add(i[t])}var Ro=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zt={},Pt={};function It(t){return rt.call(Pt,t)?!0:rt.call(zt,t)?!1:Ro.test(t)?Pt[t]=!0:(zt[t]=!0,!1)}function vs(t,i,c){if(It(i))if(c===null)t.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var d=i.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+c)}}function Dr(t,i,c){if(c===null)t.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+c)}}function Fn(t,i,c,d){if(d===null)t.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(c);return}t.setAttributeNS(i,c,""+d)}}function Dt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Mr(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function No(t,i,c){var d=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var E=d.get,w=d.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return E.call(this)},set:function(R){c=""+R,w.call(this,R)}}),Object.defineProperty(t,i,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(R){c=""+R},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function ht(t){if(!t._valueTracker){var i=Mr(t)?"checked":"value";t._valueTracker=No(t,i,""+t[i])}}function Gr(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var c=i.getValue(),d="";return t&&(d=Mr(t)?t.checked?"true":"false":t.value),t=d,t!==c?(i.setValue(t),!0):!1}function Yi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ei=/[\n"\\]/g;function vt(t){return t.replace(Ei,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Wn(t,i,c,d,E,w,R,k){t.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?t.type=R:t.removeAttribute("type"),i!=null?R==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Dt(i)):t.value!==""+Dt(i)&&(t.value=""+Dt(i)):R!=="submit"&&R!=="reset"||t.removeAttribute("value"),i!=null?z(t,R,Dt(i)):c!=null?z(t,R,Dt(c)):d!=null&&t.removeAttribute("value"),E==null&&w!=null&&(t.defaultChecked=!!w),E!=null&&(t.checked=E&&typeof E!="function"&&typeof E!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?t.name=""+Dt(k):t.removeAttribute("name")}function ue(t,i,c,d,E,w,R,k){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(t.type=w),i!=null||c!=null){if(!(w!=="submit"&&w!=="reset"||i!=null)){ht(t);return}c=c!=null?""+Dt(c):"",i=i!=null?""+Dt(i):c,k||i===t.value||(t.value=i),t.defaultValue=i}d=d??E,d=typeof d!="function"&&typeof d!="symbol"&&!!d,t.checked=k?t.checked:!!d,t.defaultChecked=!!d,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(t.name=R),ht(t)}function z(t,i,c){i==="number"&&Yi(t.ownerDocument)===t||t.defaultValue===""+c||(t.defaultValue=""+c)}function Je(t,i,c,d){if(t=t.options,i){i={};for(var E=0;E<c.length;E++)i["$"+c[E]]=!0;for(c=0;c<t.length;c++)E=i.hasOwnProperty("$"+t[c].value),t[c].selected!==E&&(t[c].selected=E),E&&d&&(t[c].defaultSelected=!0)}else{for(c=""+Dt(c),i=null,E=0;E<t.length;E++){if(t[E].value===c){t[E].selected=!0,d&&(t[E].defaultSelected=!0);return}i!==null||t[E].disabled||(i=t[E])}i!==null&&(i.selected=!0)}}function Kn(t,i,c){if(i!=null&&(i=""+Dt(i),i!==t.value&&(t.value=i),c==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=c!=null?""+Dt(c):""}function sr(t,i,c,d){if(i==null){if(d!=null){if(c!=null)throw Error(o(92));if(oe(d)){if(1<d.length)throw Error(o(93));d=d[0]}c=d}c==null&&(c=""),i=c}c=Dt(i),t.defaultValue=c,d=t.textContent,d===c&&d!==""&&d!==null&&(t.value=d),ht(t)}function qr(t,i){if(i){var c=t.firstChild;if(c&&c===t.lastChild&&c.nodeType===3){c.nodeValue=i;return}}t.textContent=i}var Ra=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function br(t,i,c){var d=i.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":d?t.setProperty(i,c):typeof c!="number"||c===0||Ra.has(i)?i==="float"?t.cssFloat=c:t[i]=(""+c).trim():t[i]=c+"px"}function it(t,i,c){if(i!=null&&typeof i!="object")throw Error(o(62));if(t=t.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||i!=null&&i.hasOwnProperty(d)||(d.indexOf("--")===0?t.setProperty(d,""):d==="float"?t.cssFloat="":t[d]="");for(var E in i)d=i[E],i.hasOwnProperty(E)&&c[E]!==d&&br(t,E,d)}else for(var w in i)i.hasOwnProperty(w)&&br(t,w,i[w])}function hn(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ss=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Is(t){return Ss.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Xr(){}var Xs=null;function _i(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vn=null,Yr=null;function Wr(t){var i=Lt(t);if(i&&(t=i.stateNode)){var c=t[Ot]||null;e:switch(t=i.stateNode,i.type){case"input":if(Wn(t,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),i=c.name,c.type==="radio"&&i!=null){for(c=t;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+vt(""+i)+'"][type="radio"]'),i=0;i<c.length;i++){var d=c[i];if(d!==t&&d.form===t.form){var E=d[Ot]||null;if(!E)throw Error(o(90));Wn(d,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(i=0;i<c.length;i++)d=c[i],d.form===t.form&&Gr(d)}break e;case"textarea":Kn(t,c.value,c.defaultValue);break e;case"select":i=c.value,i!=null&&Je(t,!!c.multiple,i,!1)}}}var st=!1;function Rs(t,i,c){if(st)return t(i,c);st=!0;try{var d=t(i);return d}finally{if(st=!1,(vn!==null||Yr!==null)&&(Ah(),vn&&(i=vn,t=Yr,Yr=vn=null,Wr(i),t)))for(i=0;i<t.length;i++)Wr(t[i])}}function ct(t,i){var c=t.stateNode;if(c===null)return null;var d=c[Ot]||null;if(d===null)return null;c=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(t=t.type,d=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!d;break e;default:t=!1}if(t)return null;if(c&&typeof c!="function")throw Error(o(231,i,typeof c));return c}var fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ys=!1;if(fn)try{var sn={};Object.defineProperty(sn,"passive",{get:function(){Ys=!0}}),window.addEventListener("test",sn,sn),window.removeEventListener("test",sn,sn)}catch{Ys=!1}var Oi=null,Di=null,Ws=null;function gs(){if(Ws)return Ws;var t,i=Di,c=i.length,d,E="value"in Oi?Oi.value:Oi.textContent,w=E.length;for(t=0;t<c&&i[t]===E[t];t++);var R=c-t;for(d=1;d<=R&&i[c-d]===E[w-d];d++);return Ws=E.slice(t,1<d?1-d:void 0)}function Mi(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function oi(){return!0}function xi(){return!1}function Qn(t){function i(c,d,E,w,R){this._reactName=c,this._targetInst=E,this.type=d,this.nativeEvent=w,this.target=R,this.currentTarget=null;for(var k in t)t.hasOwnProperty(k)&&(c=t[k],this[k]=c?c(w):w[k]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?oi:xi,this.isPropagationStopped=xi,this}return O(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=oi)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=oi)},persist:function(){},isPersistent:oi}),i}var li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dn=Qn(li),ms=O({},li,{view:0,detail:0}),Na=Qn(ms),ps,Oa,Wi,Da=O({},ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Wi&&(Wi&&t.type==="mousemove"?(ps=t.screenX-Wi.screenX,Oa=t.screenY-Wi.screenY):Oa=ps=0,Wi=t),ps)},movementY:function(t){return"movementY"in t?t.movementY:Oa}}),$t=Qn(Da),Ns=O({},Da,{dataTransfer:0}),Ks=Qn(Ns),Li=O({},ms,{relatedTarget:0}),Qs=Qn(Li),Ee=O({},li,{animationName:0,elapsedTime:0,pseudoElement:0}),xt=Qn(Ee),zn=O({},li,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Zs=Qn(zn),Do=O({},li,{data:0}),Ki=Qn(Do),fl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ma={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jn(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Ma[t])?!!i[t]:!1}function Qi(){return jn}var Mt=O({},ms,{key:function(t){if(t.key){var i=fl[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Mi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dl[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qi,charCode:function(t){return t.type==="keypress"?Mi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Mi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Js=Qn(Mt),Zi=O({},Da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kt=Qn(Zi),p=O({},ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qi}),v=Qn(p),N=O({},li,{propertyName:0,elapsedTime:0,pseudoElement:0}),V=Qn(N),se=O({},Da,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xe=Qn(se),Be=O({},li,{newState:0,oldState:0}),pt=Qn(Be),Hn=[9,13,27,32],Kt=fn&&"CompositionEvent"in window,Sn=null;fn&&"documentMode"in document&&(Sn=document.documentMode);var ci=fn&&"TextEvent"in window&&!Sn,Ji=fn&&(!Kt||Sn&&8<Sn&&11>=Sn),vr=" ",ui=!1;function $s(t,i){switch(t){case"keyup":return Hn.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $i(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var La=!1;function Os(t,i){switch(t){case"compositionend":return $i(i);case"keypress":return i.which!==32?null:(ui=!0,vr);case"textInput":return t=i.data,t===vr&&ui?null:t;default:return null}}function gl(t,i){if(La)return t==="compositionend"||!Kt&&$s(t,i)?(t=gs(),Ws=Di=Oi=null,La=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ji&&i.locale!=="ko"?null:i.data;default:return null}}var Ai={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mc(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Ai[t.type]:i==="textarea"}function Pi(t,i,c,d){vn?Yr?Yr.push(d):Yr=[d]:vn=d,i=Ih(i,"onChange"),0<i.length&&(c=new Dn("onChange","change",null,c,d),t.push({event:c,listeners:i}))}var Mo=null,ea=null;function ed(t){a2(t,0)}function Lo(t){var i=Hr(t);if(Gr(i))return t}function ki(t,i){if(t==="change")return i}var Uu=!1;if(fn){var Po;if(fn){var ta="oninput"in document;if(!ta){var jt=document.createElement("div");jt.setAttribute("oninput","return;"),ta=typeof jt.oninput=="function"}Po=ta}else Po=!1;Uu=Po&&(!document.documentMode||9<document.documentMode)}function ko(){Mo&&(Mo.detachEvent("onpropertychange",D),ea=Mo=null)}function D(t){if(t.propertyName==="value"&&Lo(ea)){var i=[];Pi(i,ea,t,_i(t)),Rs(ed,i)}}function r(t,i,c){t==="focusin"?(ko(),Mo=i,ea=c,Mo.attachEvent("onpropertychange",D)):t==="focusout"&&ko()}function s(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Lo(ea)}function l(t,i){if(t==="click")return Lo(i)}function u(t,i){if(t==="input"||t==="change")return Lo(i)}function f(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var g=typeof Object.is=="function"?Object.is:f;function y(t,i){if(g(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var c=Object.keys(t),d=Object.keys(i);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var E=c[d];if(!rt.call(i,E)||!g(t[E],i[E]))return!1}return!0}function x(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function C(t,i){var c=x(t);t=0;for(var d;c;){if(c.nodeType===3){if(d=t+c.textContent.length,t<=i&&d>=i)return{node:c,offset:i-t};t=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=x(c)}}function I(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?I(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function M(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Yi(t.document);i instanceof t.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)t=i.contentWindow;else break;i=Yi(t.document)}return i}function L(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var H=fn&&"documentMode"in document&&11>=document.documentMode,J=null,ee=null,ae=null,_e=!1;function Pe(t,i,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;_e||J==null||J!==Yi(d)||(d=J,"selectionStart"in d&&L(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ae&&y(ae,d)||(ae=d,d=Ih(ee,"onSelect"),0<d.length&&(i=new Dn("onSelect","select",null,i,c),t.push({event:i,listeners:d}),i.target=J)))}function Me(t,i){var c={};return c[t.toLowerCase()]=i.toLowerCase(),c["Webkit"+t]="webkit"+i,c["Moz"+t]="moz"+i,c}var Ne={animationend:Me("Animation","AnimationEnd"),animationiteration:Me("Animation","AnimationIteration"),animationstart:Me("Animation","AnimationStart"),transitionrun:Me("Transition","TransitionRun"),transitionstart:Me("Transition","TransitionStart"),transitioncancel:Me("Transition","TransitionCancel"),transitionend:Me("Transition","TransitionEnd")},Rt={},yt={};fn&&(yt=document.createElement("div").style,"AnimationEvent"in window||(delete Ne.animationend.animation,delete Ne.animationiteration.animation,delete Ne.animationstart.animation),"TransitionEvent"in window||delete Ne.transitionend.transition);function Jn(t){if(Rt[t])return Rt[t];if(!Ne[t])return t;var i=Ne[t],c;for(c in i)if(i.hasOwnProperty(c)&&c in yt)return Rt[t]=i[c];return t}var wi=Jn("animationend"),Lr=Jn("animationiteration"),dn=Jn("animationstart"),wr=Jn("transitionrun"),hi=Jn("transitionstart"),Pa=Jn("transitioncancel"),na=Jn("transitionend"),Fu=new Map,pc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pc.push("scrollEnd");function ys(t,i){Fu.set(t,i),nn(i,[t])}var zu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},es=[],ml=0,td=0;function ju(){for(var t=ml,i=td=ml=0;i<t;){var c=es[i];es[i++]=null;var d=es[i];es[i++]=null;var E=es[i];es[i++]=null;var w=es[i];if(es[i++]=null,d!==null&&E!==null){var R=d.pending;R===null?E.next=E:(E.next=R.next,R.next=E),d.pending=E}w!==0&&zg(c,E,w)}}function Hu(t,i,c,d){es[ml++]=t,es[ml++]=i,es[ml++]=c,es[ml++]=d,td|=d,t.lanes|=d,t=t.alternate,t!==null&&(t.lanes|=d)}function nd(t,i,c,d){return Hu(t,i,c,d),Gu(t)}function Bo(t,i){return Hu(t,null,null,i),Gu(t)}function zg(t,i,c){t.lanes|=c;var d=t.alternate;d!==null&&(d.lanes|=c);for(var E=!1,w=t.return;w!==null;)w.childLanes|=c,d=w.alternate,d!==null&&(d.childLanes|=c),w.tag===22&&(t=w.stateNode,t===null||t._visibility&1||(E=!0)),t=w,w=w.return;return t.tag===3?(w=t.stateNode,E&&i!==null&&(E=31-ut(c),t=w.hiddenUpdates,d=t[E],d===null?t[E]=[i]:d.push(i),i.lane=c|536870912),w):null}function Gu(t){if(50<Vc)throw Vc=0,h0=null,Error(o(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var pl={};function NA(t,i,c,d){this.tag=t,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bi(t,i,c,d){return new NA(t,i,c,d)}function rd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ra(t,i){var c=t.alternate;return c===null?(c=Bi(t.tag,i,t.key,t.mode),c.elementType=t.elementType,c.type=t.type,c.stateNode=t.stateNode,c.alternate=t,t.alternate=c):(c.pendingProps=i,c.type=t.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=t.flags&65011712,c.childLanes=t.childLanes,c.lanes=t.lanes,c.child=t.child,c.memoizedProps=t.memoizedProps,c.memoizedState=t.memoizedState,c.updateQueue=t.updateQueue,i=t.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=t.sibling,c.index=t.index,c.ref=t.ref,c.refCleanup=t.refCleanup,c}function jg(t,i){t.flags&=65011714;var c=t.alternate;return c===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=c.childLanes,t.lanes=c.lanes,t.child=c.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=c.memoizedProps,t.memoizedState=c.memoizedState,t.updateQueue=c.updateQueue,t.type=c.type,i=c.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function qu(t,i,c,d,E,w){var R=0;if(d=t,typeof t=="function")rd(t)&&(R=1);else if(typeof t=="string")R=Pw(t,c,we.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case P:return t=Bi(31,c,i,E),t.elementType=P,t.lanes=w,t;case ie:return Vo(c.children,E,w,i);case ge:R=8,E|=24;break;case Ue:return t=Bi(12,c,i,E|2),t.elementType=Ue,t.lanes=w,t;case nt:return t=Bi(13,c,i,E),t.elementType=nt,t.lanes=w,t;case ze:return t=Bi(19,c,i,E),t.elementType=ze,t.lanes=w,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case pe:R=10;break e;case Oe:R=9;break e;case Le:R=11;break e;case F:R=14;break e;case j:R=16,d=null;break e}R=29,c=Error(o(130,t===null?"null":typeof t,"")),d=null}return i=Bi(R,c,i,E),i.elementType=t,i.type=d,i.lanes=w,i}function Vo(t,i,c,d){return t=Bi(7,t,d,i),t.lanes=c,t}function id(t,i,c){return t=Bi(6,t,null,i),t.lanes=c,t}function Hg(t){var i=Bi(18,null,null,0);return i.stateNode=t,i}function sd(t,i,c){return i=Bi(4,t.children!==null?t.children:[],t.key,i),i.lanes=c,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Gg=new WeakMap;function ts(t,i){if(typeof t=="object"&&t!==null){var c=Gg.get(t);return c!==void 0?c:(i={value:t,source:i,stack:Wt(i)},Gg.set(t,i),i)}return{value:t,source:i,stack:Wt(i)}}var yl=[],El=0,Xu=null,yc=0,ns=[],rs=0,ka=null,Ds=1,Ms="";function ia(t,i){yl[El++]=yc,yl[El++]=Xu,Xu=t,yc=i}function qg(t,i,c){ns[rs++]=Ds,ns[rs++]=Ms,ns[rs++]=ka,ka=t;var d=Ds;t=Ms;var E=32-ut(d)-1;d&=~(1<<E),c+=1;var w=32-ut(i)+E;if(30<w){var R=E-E%5;w=(d&(1<<R)-1).toString(32),d>>=R,E-=R,Ds=1<<32-ut(i)+E|c<<E|d,Ms=w+t}else Ds=1<<w|c<<E|d,Ms=t}function ad(t){t.return!==null&&(ia(t,1),qg(t,1,0))}function od(t){for(;t===Xu;)Xu=yl[--El],yl[El]=null,yc=yl[--El],yl[El]=null;for(;t===ka;)ka=ns[--rs],ns[rs]=null,Ms=ns[--rs],ns[rs]=null,Ds=ns[--rs],ns[rs]=null}function Xg(t,i){ns[rs++]=Ds,ns[rs++]=Ms,ns[rs++]=ka,Ds=i.id,Ms=i.overflow,ka=t}var Pr=null,Mn=null,Qt=!1,Ba=null,is=!1,ld=Error(o(519));function Va(t){var i=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ec(ts(i,t)),ld}function Yg(t){var i=t.stateNode,c=t.type,d=t.memoizedProps;switch(i[tn]=t,i[Ot]=d,c){case"dialog":Vt("cancel",i),Vt("close",i);break;case"iframe":case"object":case"embed":Vt("load",i);break;case"video":case"audio":for(c=0;c<Fc.length;c++)Vt(Fc[c],i);break;case"source":Vt("error",i);break;case"img":case"image":case"link":Vt("error",i),Vt("load",i);break;case"details":Vt("toggle",i);break;case"input":Vt("invalid",i),ue(i,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Vt("invalid",i);break;case"textarea":Vt("invalid",i),sr(i,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||i.textContent===""+c||d.suppressHydrationWarning===!0||u2(i.textContent,c)?(d.popover!=null&&(Vt("beforetoggle",i),Vt("toggle",i)),d.onScroll!=null&&Vt("scroll",i),d.onScrollEnd!=null&&Vt("scrollend",i),d.onClick!=null&&(i.onclick=Xr),i=!0):i=!1,i||Va(t,!0)}function Wg(t){for(Pr=t.return;Pr;)switch(Pr.tag){case 5:case 31:case 13:is=!1;return;case 27:case 3:is=!0;return;default:Pr=Pr.return}}function _l(t){if(t!==Pr)return!1;if(!Qt)return Wg(t),Qt=!0,!1;var i=t.tag,c;if((c=i!==3&&i!==27)&&((c=i===5)&&(c=t.type,c=!(c!=="form"&&c!=="button")||v0(t.type,t.memoizedProps)),c=!c),c&&Mn&&Va(t),Wg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));Mn=_2(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));Mn=_2(t)}else i===27?(i=Mn,Ja(t.type)?(t=O0,O0=null,Mn=t):Mn=i):Mn=Pr?as(t.stateNode.nextSibling):null;return!0}function Uo(){Mn=Pr=null,Qt=!1}function cd(){var t=Ba;return t!==null&&(vi===null?vi=t:vi.push.apply(vi,t),Ba=null),t}function Ec(t){Ba===null?Ba=[t]:Ba.push(t)}var ud=Z(null),Fo=null,sa=null;function Ua(t,i,c){de(ud,i._currentValue),i._currentValue=c}function aa(t){t._currentValue=ud.current,X(ud)}function hd(t,i,c){for(;t!==null;){var d=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),t===c)break;t=t.return}}function fd(t,i,c,d){var E=t.child;for(E!==null&&(E.return=t);E!==null;){var w=E.dependencies;if(w!==null){var R=E.child;w=w.firstContext;e:for(;w!==null;){var k=w;w=E;for(var K=0;K<i.length;K++)if(k.context===i[K]){w.lanes|=c,k=w.alternate,k!==null&&(k.lanes|=c),hd(w.return,c,t),d||(R=null);break e}w=k.next}}else if(E.tag===18){if(R=E.return,R===null)throw Error(o(341));R.lanes|=c,w=R.alternate,w!==null&&(w.lanes|=c),hd(R,c,t),R=null}else R=E.child;if(R!==null)R.return=E;else for(R=E;R!==null;){if(R===t){R=null;break}if(E=R.sibling,E!==null){E.return=R.return,R=E;break}R=R.return}E=R}}function xl(t,i,c,d){t=null;for(var E=i,w=!1;E!==null;){if(!w){if((E.flags&524288)!==0)w=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var R=E.alternate;if(R===null)throw Error(o(387));if(R=R.memoizedProps,R!==null){var k=E.type;g(E.pendingProps.value,R.value)||(t!==null?t.push(k):t=[k])}}else if(E===Xe.current){if(R=E.alternate,R===null)throw Error(o(387));R.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(t!==null?t.push(qc):t=[qc])}E=E.return}t!==null&&fd(i,t,c,d),i.flags|=262144}function Yu(t){for(t=t.firstContext;t!==null;){if(!g(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function zo(t){Fo=t,sa=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function kr(t){return Kg(Fo,t)}function Wu(t,i){return Fo===null&&zo(t),Kg(t,i)}function Kg(t,i){var c=i._currentValue;if(i={context:i,memoizedValue:c,next:null},sa===null){if(t===null)throw Error(o(308));sa=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else sa=sa.next=i;return c}var OA=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(c,d){t.push(d)}};this.abort=function(){i.aborted=!0,t.forEach(function(c){return c()})}},DA=a.unstable_scheduleCallback,MA=a.unstable_NormalPriority,hr={$$typeof:pe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dd(){return{controller:new OA,data:new Map,refCount:0}}function _c(t){t.refCount--,t.refCount===0&&DA(MA,function(){t.controller.abort()})}var xc=null,gd=0,Al=0,wl=null;function LA(t,i){if(xc===null){var c=xc=[];gd=0,Al=y0(),wl={status:"pending",value:void 0,then:function(d){c.push(d)}}}return gd++,i.then(Qg,Qg),i}function Qg(){if(--gd===0&&xc!==null){wl!==null&&(wl.status="fulfilled");var t=xc;xc=null,Al=0,wl=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function PA(t,i){var c=[],d={status:"pending",value:null,reason:null,then:function(E){c.push(E)}};return t.then(function(){d.status="fulfilled",d.value=i;for(var E=0;E<c.length;E++)(0,c[E])(i)},function(E){for(d.status="rejected",d.reason=E,E=0;E<c.length;E++)(0,c[E])(void 0)}),d}var Zg=$.S;$.S=function(t,i){Lp=cn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&LA(t,i),Zg!==null&&Zg(t,i)};var jo=Z(null);function md(){var t=jo.current;return t!==null?t:In.pooledCache}function Ku(t,i){i===null?de(jo,jo.current):de(jo,i.pool)}function Jg(){var t=md();return t===null?null:{parent:hr._currentValue,pool:t}}var Tl=Error(o(460)),pd=Error(o(474)),Qu=Error(o(542)),Zu={then:function(){}};function $g(t){return t=t.status,t==="fulfilled"||t==="rejected"}function em(t,i,c){switch(c=t[c],c===void 0?t.push(i):c!==i&&(i.then(Xr,Xr),i=c),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,nm(t),t;default:if(typeof i.status=="string")i.then(Xr,Xr);else{if(t=In,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=i,t.status="pending",t.then(function(d){if(i.status==="pending"){var E=i;E.status="fulfilled",E.value=d}},function(d){if(i.status==="pending"){var E=i;E.status="rejected",E.reason=d}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,nm(t),t}throw Go=i,Tl}}function Ho(t){try{var i=t._init;return i(t._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Go=c,Tl):c}}var Go=null;function tm(){if(Go===null)throw Error(o(459));var t=Go;return Go=null,t}function nm(t){if(t===Tl||t===Qu)throw Error(o(483))}var Cl=null,Ac=0;function Ju(t){var i=Ac;return Ac+=1,Cl===null&&(Cl=[]),em(Cl,t,i)}function wc(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function $u(t,i){throw i.$$typeof===B?Error(o(525)):(t=Object.prototype.toString.call(i),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function rm(t){function i(re,te){if(t){var he=re.deletions;he===null?(re.deletions=[te],re.flags|=16):he.push(te)}}function c(re,te){if(!t)return null;for(;te!==null;)i(re,te),te=te.sibling;return null}function d(re){for(var te=new Map;re!==null;)re.key!==null?te.set(re.key,re):te.set(re.index,re),re=re.sibling;return te}function E(re,te){return re=ra(re,te),re.index=0,re.sibling=null,re}function w(re,te,he){return re.index=he,t?(he=re.alternate,he!==null?(he=he.index,he<te?(re.flags|=67108866,te):he):(re.flags|=67108866,te)):(re.flags|=1048576,te)}function R(re){return t&&re.alternate===null&&(re.flags|=67108866),re}function k(re,te,he,Ce){return te===null||te.tag!==6?(te=id(he,re.mode,Ce),te.return=re,te):(te=E(te,he),te.return=re,te)}function K(re,te,he,Ce){var at=he.type;return at===ie?Te(re,te,he.props.children,Ce,he.key):te!==null&&(te.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===j&&Ho(at)===te.type)?(te=E(te,he.props),wc(te,he),te.return=re,te):(te=qu(he.type,he.key,he.props,null,re.mode,Ce),wc(te,he),te.return=re,te)}function fe(re,te,he,Ce){return te===null||te.tag!==4||te.stateNode.containerInfo!==he.containerInfo||te.stateNode.implementation!==he.implementation?(te=sd(he,re.mode,Ce),te.return=re,te):(te=E(te,he.children||[]),te.return=re,te)}function Te(re,te,he,Ce,at){return te===null||te.tag!==7?(te=Vo(he,re.mode,Ce,at),te.return=re,te):(te=E(te,he),te.return=re,te)}function ve(re,te,he){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return te=id(""+te,re.mode,he),te.return=re,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case Y:return he=qu(te.type,te.key,te.props,null,re.mode,he),wc(he,te),he.return=re,he;case ne:return te=sd(te,re.mode,he),te.return=re,te;case j:return te=Ho(te),ve(re,te,he)}if(oe(te)||W(te))return te=Vo(te,re.mode,he,null),te.return=re,te;if(typeof te.then=="function")return ve(re,Ju(te),he);if(te.$$typeof===pe)return ve(re,Wu(re,te),he);$u(re,te)}return null}function me(re,te,he,Ce){var at=te!==null?te.key:null;if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return at!==null?null:k(re,te,""+he,Ce);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case Y:return he.key===at?K(re,te,he,Ce):null;case ne:return he.key===at?fe(re,te,he,Ce):null;case j:return he=Ho(he),me(re,te,he,Ce)}if(oe(he)||W(he))return at!==null?null:Te(re,te,he,Ce,null);if(typeof he.then=="function")return me(re,te,Ju(he),Ce);if(he.$$typeof===pe)return me(re,te,Wu(re,he),Ce);$u(re,he)}return null}function Ae(re,te,he,Ce,at){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return re=re.get(he)||null,k(te,re,""+Ce,at);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case Y:return re=re.get(Ce.key===null?he:Ce.key)||null,K(te,re,Ce,at);case ne:return re=re.get(Ce.key===null?he:Ce.key)||null,fe(te,re,Ce,at);case j:return Ce=Ho(Ce),Ae(re,te,he,Ce,at)}if(oe(Ce)||W(Ce))return re=re.get(he)||null,Te(te,re,Ce,at,null);if(typeof Ce.then=="function")return Ae(re,te,he,Ju(Ce),at);if(Ce.$$typeof===pe)return Ae(re,te,he,Wu(te,Ce),at);$u(te,Ce)}return null}function $e(re,te,he,Ce){for(var at=null,an=null,tt=te,St=te=0,Gt=null;tt!==null&&St<he.length;St++){tt.index>St?(Gt=tt,tt=null):Gt=tt.sibling;var on=me(re,tt,he[St],Ce);if(on===null){tt===null&&(tt=Gt);break}t&&tt&&on.alternate===null&&i(re,tt),te=w(on,te,St),an===null?at=on:an.sibling=on,an=on,tt=Gt}if(St===he.length)return c(re,tt),Qt&&ia(re,St),at;if(tt===null){for(;St<he.length;St++)tt=ve(re,he[St],Ce),tt!==null&&(te=w(tt,te,St),an===null?at=tt:an.sibling=tt,an=tt);return Qt&&ia(re,St),at}for(tt=d(tt);St<he.length;St++)Gt=Ae(tt,re,St,he[St],Ce),Gt!==null&&(t&&Gt.alternate!==null&&tt.delete(Gt.key===null?St:Gt.key),te=w(Gt,te,St),an===null?at=Gt:an.sibling=Gt,an=Gt);return t&&tt.forEach(function(ro){return i(re,ro)}),Qt&&ia(re,St),at}function ft(re,te,he,Ce){if(he==null)throw Error(o(151));for(var at=null,an=null,tt=te,St=te=0,Gt=null,on=he.next();tt!==null&&!on.done;St++,on=he.next()){tt.index>St?(Gt=tt,tt=null):Gt=tt.sibling;var ro=me(re,tt,on.value,Ce);if(ro===null){tt===null&&(tt=Gt);break}t&&tt&&ro.alternate===null&&i(re,tt),te=w(ro,te,St),an===null?at=ro:an.sibling=ro,an=ro,tt=Gt}if(on.done)return c(re,tt),Qt&&ia(re,St),at;if(tt===null){for(;!on.done;St++,on=he.next())on=ve(re,on.value,Ce),on!==null&&(te=w(on,te,St),an===null?at=on:an.sibling=on,an=on);return Qt&&ia(re,St),at}for(tt=d(tt);!on.done;St++,on=he.next())on=Ae(tt,re,St,on.value,Ce),on!==null&&(t&&on.alternate!==null&&tt.delete(on.key===null?St:on.key),te=w(on,te,St),an===null?at=on:an.sibling=on,an=on);return t&&tt.forEach(function(Xw){return i(re,Xw)}),Qt&&ia(re,St),at}function Cn(re,te,he,Ce){if(typeof he=="object"&&he!==null&&he.type===ie&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case Y:e:{for(var at=he.key;te!==null;){if(te.key===at){if(at=he.type,at===ie){if(te.tag===7){c(re,te.sibling),Ce=E(te,he.props.children),Ce.return=re,re=Ce;break e}}else if(te.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===j&&Ho(at)===te.type){c(re,te.sibling),Ce=E(te,he.props),wc(Ce,he),Ce.return=re,re=Ce;break e}c(re,te);break}else i(re,te);te=te.sibling}he.type===ie?(Ce=Vo(he.props.children,re.mode,Ce,he.key),Ce.return=re,re=Ce):(Ce=qu(he.type,he.key,he.props,null,re.mode,Ce),wc(Ce,he),Ce.return=re,re=Ce)}return R(re);case ne:e:{for(at=he.key;te!==null;){if(te.key===at)if(te.tag===4&&te.stateNode.containerInfo===he.containerInfo&&te.stateNode.implementation===he.implementation){c(re,te.sibling),Ce=E(te,he.children||[]),Ce.return=re,re=Ce;break e}else{c(re,te);break}else i(re,te);te=te.sibling}Ce=sd(he,re.mode,Ce),Ce.return=re,re=Ce}return R(re);case j:return he=Ho(he),Cn(re,te,he,Ce)}if(oe(he))return $e(re,te,he,Ce);if(W(he)){if(at=W(he),typeof at!="function")throw Error(o(150));return he=at.call(he),ft(re,te,he,Ce)}if(typeof he.then=="function")return Cn(re,te,Ju(he),Ce);if(he.$$typeof===pe)return Cn(re,te,Wu(re,he),Ce);$u(re,he)}return typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint"?(he=""+he,te!==null&&te.tag===6?(c(re,te.sibling),Ce=E(te,he),Ce.return=re,re=Ce):(c(re,te),Ce=id(he,re.mode,Ce),Ce.return=re,re=Ce),R(re)):c(re,te)}return function(re,te,he,Ce){try{Ac=0;var at=Cn(re,te,he,Ce);return Cl=null,at}catch(tt){if(tt===Tl||tt===Qu)throw tt;var an=Bi(29,tt,null,re.mode);return an.lanes=Ce,an.return=re,an}finally{}}}var qo=rm(!0),im=rm(!1),Fa=!1;function yd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ed(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function za(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ja(t,i,c){var d=t.updateQueue;if(d===null)return null;if(d=d.shared,(ln&2)!==0){var E=d.pending;return E===null?i.next=i:(i.next=E.next,E.next=i),d.pending=i,i=Gu(t),zg(t,null,c),i}return Hu(t,d,i,c),Gu(t)}function Tc(t,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194048)!==0)){var d=i.lanes;d&=t.pendingLanes,c|=d,i.lanes=c,Ge(t,c)}}function _d(t,i){var c=t.updateQueue,d=t.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var E=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var R={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};w===null?E=w=R:w=w.next=R,c=c.next}while(c!==null);w===null?E=w=i:w=w.next=i}else E=w=i;c={baseState:d.baseState,firstBaseUpdate:E,lastBaseUpdate:w,shared:d.shared,callbacks:d.callbacks},t.updateQueue=c;return}t=c.lastBaseUpdate,t===null?c.firstBaseUpdate=i:t.next=i,c.lastBaseUpdate=i}var xd=!1;function Cc(){if(xd){var t=wl;if(t!==null)throw t}}function bc(t,i,c,d){xd=!1;var E=t.updateQueue;Fa=!1;var w=E.firstBaseUpdate,R=E.lastBaseUpdate,k=E.shared.pending;if(k!==null){E.shared.pending=null;var K=k,fe=K.next;K.next=null,R===null?w=fe:R.next=fe,R=K;var Te=t.alternate;Te!==null&&(Te=Te.updateQueue,k=Te.lastBaseUpdate,k!==R&&(k===null?Te.firstBaseUpdate=fe:k.next=fe,Te.lastBaseUpdate=K))}if(w!==null){var ve=E.baseState;R=0,Te=fe=K=null,k=w;do{var me=k.lane&-536870913,Ae=me!==k.lane;if(Ae?(Ht&me)===me:(d&me)===me){me!==0&&me===Al&&(xd=!0),Te!==null&&(Te=Te.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var $e=t,ft=k;me=i;var Cn=c;switch(ft.tag){case 1:if($e=ft.payload,typeof $e=="function"){ve=$e.call(Cn,ve,me);break e}ve=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=ft.payload,me=typeof $e=="function"?$e.call(Cn,ve,me):$e,me==null)break e;ve=O({},ve,me);break e;case 2:Fa=!0}}me=k.callback,me!==null&&(t.flags|=64,Ae&&(t.flags|=8192),Ae=E.callbacks,Ae===null?E.callbacks=[me]:Ae.push(me))}else Ae={lane:me,tag:k.tag,payload:k.payload,callback:k.callback,next:null},Te===null?(fe=Te=Ae,K=ve):Te=Te.next=Ae,R|=me;if(k=k.next,k===null){if(k=E.shared.pending,k===null)break;Ae=k,k=Ae.next,Ae.next=null,E.lastBaseUpdate=Ae,E.shared.pending=null}}while(!0);Te===null&&(K=ve),E.baseState=K,E.firstBaseUpdate=fe,E.lastBaseUpdate=Te,w===null&&(E.shared.lanes=0),Ya|=R,t.lanes=R,t.memoizedState=ve}}function sm(t,i){if(typeof t!="function")throw Error(o(191,t));t.call(i)}function am(t,i){var c=t.callbacks;if(c!==null)for(t.callbacks=null,t=0;t<c.length;t++)sm(c[t],i)}var bl=Z(null),eh=Z(0);function om(t,i){t=ma,de(eh,t),de(bl,i),ma=t|i.baseLanes}function Ad(){de(eh,ma),de(bl,bl.current)}function wd(){ma=eh.current,X(bl),X(eh)}var Vi=Z(null),ss=null;function Ha(t){var i=t.alternate;de(ar,ar.current&1),de(Vi,t),ss===null&&(i===null||bl.current!==null||i.memoizedState!==null)&&(ss=t)}function Td(t){de(ar,ar.current),de(Vi,t),ss===null&&(ss=t)}function lm(t){t.tag===22?(de(ar,ar.current),de(Vi,t),ss===null&&(ss=t)):Ga()}function Ga(){de(ar,ar.current),de(Vi,Vi.current)}function Ui(t){X(Vi),ss===t&&(ss=null),X(ar)}var ar=Z(0);function th(t){for(var i=t;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||R0(c)||N0(c)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var oa=0,Ct=null,wn=null,fr=null,nh=!1,vl=!1,Xo=!1,rh=0,vc=0,Sl=null,kA=0;function $n(){throw Error(o(321))}function Cd(t,i){if(i===null)return!1;for(var c=0;c<i.length&&c<t.length;c++)if(!g(t[c],i[c]))return!1;return!0}function bd(t,i,c,d,E,w){return oa=w,Ct=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,$.H=t===null||t.memoizedState===null?qm:Fd,Xo=!1,w=c(d,E),Xo=!1,vl&&(w=um(i,c,d,E)),cm(t),w}function cm(t){$.H=Rc;var i=wn!==null&&wn.next!==null;if(oa=0,fr=wn=Ct=null,nh=!1,vc=0,Sl=null,i)throw Error(o(300));t===null||dr||(t=t.dependencies,t!==null&&Yu(t)&&(dr=!0))}function um(t,i,c,d){Ct=t;var E=0;do{if(vl&&(Sl=null),vc=0,vl=!1,25<=E)throw Error(o(301));if(E+=1,fr=wn=null,t.updateQueue!=null){var w=t.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}$.H=Xm,w=i(c,d)}while(vl);return w}function BA(){var t=$.H,i=t.useState()[0];return i=typeof i.then=="function"?Sc(i):i,t=t.useState()[0],(wn!==null?wn.memoizedState:null)!==t&&(Ct.flags|=1024),i}function vd(){var t=rh!==0;return rh=0,t}function Sd(t,i,c){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~c}function Id(t){if(nh){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}nh=!1}oa=0,fr=wn=Ct=null,vl=!1,vc=rh=0,Sl=null}function fi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fr===null?Ct.memoizedState=fr=t:fr=fr.next=t,fr}function or(){if(wn===null){var t=Ct.alternate;t=t!==null?t.memoizedState:null}else t=wn.next;var i=fr===null?Ct.memoizedState:fr.next;if(i!==null)fr=i,wn=t;else{if(t===null)throw Ct.alternate===null?Error(o(467)):Error(o(310));wn=t,t={memoizedState:wn.memoizedState,baseState:wn.baseState,baseQueue:wn.baseQueue,queue:wn.queue,next:null},fr===null?Ct.memoizedState=fr=t:fr=fr.next=t}return fr}function ih(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sc(t){var i=vc;return vc+=1,Sl===null&&(Sl=[]),t=em(Sl,t,i),i=Ct,(fr===null?i.memoizedState:fr.next)===null&&(i=i.alternate,$.H=i===null||i.memoizedState===null?qm:Fd),t}function sh(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Sc(t);if(t.$$typeof===pe)return kr(t)}throw Error(o(438,String(t)))}function Rd(t){var i=null,c=Ct.updateQueue;if(c!==null&&(i=c.memoCache),i==null){var d=Ct.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(i={data:d.data.map(function(E){return E.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),c===null&&(c=ih(),Ct.updateQueue=c),c.memoCache=i,c=i.data[i.index],c===void 0)for(c=i.data[i.index]=Array(t),d=0;d<t;d++)c[d]=Q;return i.index++,c}function la(t,i){return typeof i=="function"?i(t):i}function ah(t){var i=or();return Nd(i,wn,t)}function Nd(t,i,c){var d=t.queue;if(d===null)throw Error(o(311));d.lastRenderedReducer=c;var E=t.baseQueue,w=d.pending;if(w!==null){if(E!==null){var R=E.next;E.next=w.next,w.next=R}i.baseQueue=E=w,d.pending=null}if(w=t.baseState,E===null)t.memoizedState=w;else{i=E.next;var k=R=null,K=null,fe=i,Te=!1;do{var ve=fe.lane&-536870913;if(ve!==fe.lane?(Ht&ve)===ve:(oa&ve)===ve){var me=fe.revertLane;if(me===0)K!==null&&(K=K.next={lane:0,revertLane:0,gesture:null,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),ve===Al&&(Te=!0);else if((oa&me)===me){fe=fe.next,me===Al&&(Te=!0);continue}else ve={lane:0,revertLane:fe.revertLane,gesture:null,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},K===null?(k=K=ve,R=w):K=K.next=ve,Ct.lanes|=me,Ya|=me;ve=fe.action,Xo&&c(w,ve),w=fe.hasEagerState?fe.eagerState:c(w,ve)}else me={lane:ve,revertLane:fe.revertLane,gesture:fe.gesture,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},K===null?(k=K=me,R=w):K=K.next=me,Ct.lanes|=ve,Ya|=ve;fe=fe.next}while(fe!==null&&fe!==i);if(K===null?R=w:K.next=k,!g(w,t.memoizedState)&&(dr=!0,Te&&(c=wl,c!==null)))throw c;t.memoizedState=w,t.baseState=R,t.baseQueue=K,d.lastRenderedState=w}return E===null&&(d.lanes=0),[t.memoizedState,d.dispatch]}function Od(t){var i=or(),c=i.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=t;var d=c.dispatch,E=c.pending,w=i.memoizedState;if(E!==null){c.pending=null;var R=E=E.next;do w=t(w,R.action),R=R.next;while(R!==E);g(w,i.memoizedState)||(dr=!0),i.memoizedState=w,i.baseQueue===null&&(i.baseState=w),c.lastRenderedState=w}return[w,d]}function hm(t,i,c){var d=Ct,E=or(),w=Qt;if(w){if(c===void 0)throw Error(o(407));c=c()}else c=i();var R=!g((wn||E).memoizedState,c);if(R&&(E.memoizedState=c,dr=!0),E=E.queue,Ld(gm.bind(null,d,E,t),[t]),E.getSnapshot!==i||R||fr!==null&&fr.memoizedState.tag&1){if(d.flags|=2048,Il(9,{destroy:void 0},dm.bind(null,d,E,c,i),null),In===null)throw Error(o(349));w||(oa&127)!==0||fm(d,i,c)}return c}function fm(t,i,c){t.flags|=16384,t={getSnapshot:i,value:c},i=Ct.updateQueue,i===null?(i=ih(),Ct.updateQueue=i,i.stores=[t]):(c=i.stores,c===null?i.stores=[t]:c.push(t))}function dm(t,i,c,d){i.value=c,i.getSnapshot=d,mm(i)&&pm(t)}function gm(t,i,c){return c(function(){mm(i)&&pm(t)})}function mm(t){var i=t.getSnapshot;t=t.value;try{var c=i();return!g(t,c)}catch{return!0}}function pm(t){var i=Bo(t,2);i!==null&&Si(i,t,2)}function Dd(t){var i=fi();if(typeof t=="function"){var c=t;if(t=c(),Xo){Jt(!0);try{c()}finally{Jt(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:t},i}function ym(t,i,c,d){return t.baseState=c,Nd(t,wn,typeof d=="function"?d:la)}function VA(t,i,c,d,E){if(ch(t))throw Error(o(485));if(t=i.action,t!==null){var w={payload:E,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){w.listeners.push(R)}};$.T!==null?c(!0):w.isTransition=!1,d(w),c=i.pending,c===null?(w.next=i.pending=w,Em(i,w)):(w.next=c.next,i.pending=c.next=w)}}function Em(t,i){var c=i.action,d=i.payload,E=t.state;if(i.isTransition){var w=$.T,R={};$.T=R;try{var k=c(E,d),K=$.S;K!==null&&K(R,k),_m(t,i,k)}catch(fe){Md(t,i,fe)}finally{w!==null&&R.types!==null&&(w.types=R.types),$.T=w}}else try{w=c(E,d),_m(t,i,w)}catch(fe){Md(t,i,fe)}}function _m(t,i,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){xm(t,i,d)},function(d){return Md(t,i,d)}):xm(t,i,c)}function xm(t,i,c){i.status="fulfilled",i.value=c,Am(i),t.state=c,i=t.pending,i!==null&&(c=i.next,c===i?t.pending=null:(c=c.next,i.next=c,Em(t,c)))}function Md(t,i,c){var d=t.pending;if(t.pending=null,d!==null){d=d.next;do i.status="rejected",i.reason=c,Am(i),i=i.next;while(i!==d)}t.action=null}function Am(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function wm(t,i){return i}function Tm(t,i){if(Qt){var c=In.formState;if(c!==null){e:{var d=Ct;if(Qt){if(Mn){t:{for(var E=Mn,w=is;E.nodeType!==8;){if(!w){E=null;break t}if(E=as(E.nextSibling),E===null){E=null;break t}}w=E.data,E=w==="F!"||w==="F"?E:null}if(E){Mn=as(E.nextSibling),d=E.data==="F!";break e}}Va(d)}d=!1}d&&(i=c[0])}}return c=fi(),c.memoizedState=c.baseState=i,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wm,lastRenderedState:i},c.queue=d,c=jm.bind(null,Ct,d),d.dispatch=c,d=Dd(!1),w=Ud.bind(null,Ct,!1,d.queue),d=fi(),E={state:i,dispatch:null,action:t,pending:null},d.queue=E,c=VA.bind(null,Ct,E,w,c),E.dispatch=c,d.memoizedState=t,[i,c,!1]}function Cm(t){var i=or();return bm(i,wn,t)}function bm(t,i,c){if(i=Nd(t,i,wm)[0],t=ah(la)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var d=Sc(i)}catch(R){throw R===Tl?Qu:R}else d=i;i=or();var E=i.queue,w=E.dispatch;return c!==i.memoizedState&&(Ct.flags|=2048,Il(9,{destroy:void 0},UA.bind(null,E,c),null)),[d,w,t]}function UA(t,i){t.action=i}function vm(t){var i=or(),c=wn;if(c!==null)return bm(i,c,t);or(),i=i.memoizedState,c=or();var d=c.queue.dispatch;return c.memoizedState=t,[i,d,!1]}function Il(t,i,c,d){return t={tag:t,create:c,deps:d,inst:i,next:null},i=Ct.updateQueue,i===null&&(i=ih(),Ct.updateQueue=i),c=i.lastEffect,c===null?i.lastEffect=t.next=t:(d=c.next,c.next=t,t.next=d,i.lastEffect=t),t}function Sm(){return or().memoizedState}function oh(t,i,c,d){var E=fi();Ct.flags|=t,E.memoizedState=Il(1|i,{destroy:void 0},c,d===void 0?null:d)}function lh(t,i,c,d){var E=or();d=d===void 0?null:d;var w=E.memoizedState.inst;wn!==null&&d!==null&&Cd(d,wn.memoizedState.deps)?E.memoizedState=Il(i,w,c,d):(Ct.flags|=t,E.memoizedState=Il(1|i,w,c,d))}function Im(t,i){oh(8390656,8,t,i)}function Ld(t,i){lh(2048,8,t,i)}function FA(t){Ct.flags|=4;var i=Ct.updateQueue;if(i===null)i=ih(),Ct.updateQueue=i,i.events=[t];else{var c=i.events;c===null?i.events=[t]:c.push(t)}}function Rm(t){var i=or().memoizedState;return FA({ref:i,nextImpl:t}),function(){if((ln&2)!==0)throw Error(o(440));return i.impl.apply(void 0,arguments)}}function Nm(t,i){return lh(4,2,t,i)}function Om(t,i){return lh(4,4,t,i)}function Dm(t,i){if(typeof i=="function"){t=t();var c=i(t);return function(){typeof c=="function"?c():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Mm(t,i,c){c=c!=null?c.concat([t]):null,lh(4,4,Dm.bind(null,i,t),c)}function Pd(){}function Lm(t,i){var c=or();i=i===void 0?null:i;var d=c.memoizedState;return i!==null&&Cd(i,d[1])?d[0]:(c.memoizedState=[t,i],t)}function Pm(t,i){var c=or();i=i===void 0?null:i;var d=c.memoizedState;if(i!==null&&Cd(i,d[1]))return d[0];if(d=t(),Xo){Jt(!0);try{t()}finally{Jt(!1)}}return c.memoizedState=[d,i],d}function kd(t,i,c){return c===void 0||(oa&1073741824)!==0&&(Ht&261930)===0?t.memoizedState=i:(t.memoizedState=c,t=kp(),Ct.lanes|=t,Ya|=t,c)}function km(t,i,c,d){return g(c,i)?c:bl.current!==null?(t=kd(t,c,d),g(t,i)||(dr=!0),t):(oa&42)===0||(oa&1073741824)!==0&&(Ht&261930)===0?(dr=!0,t.memoizedState=c):(t=kp(),Ct.lanes|=t,Ya|=t,i)}function Bm(t,i,c,d,E){var w=le.p;le.p=w!==0&&8>w?w:8;var R=$.T,k={};$.T=k,Ud(t,!1,i,c);try{var K=E(),fe=$.S;if(fe!==null&&fe(k,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var Te=PA(K,d);Ic(t,i,Te,ji(t))}else Ic(t,i,d,ji(t))}catch(ve){Ic(t,i,{then:function(){},status:"rejected",reason:ve},ji())}finally{le.p=w,R!==null&&k.types!==null&&(R.types=k.types),$.T=R}}function zA(){}function Bd(t,i,c,d){if(t.tag!==5)throw Error(o(476));var E=Vm(t).queue;Bm(t,E,i,Re,c===null?zA:function(){return Um(t),c(d)})}function Vm(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:Re,baseState:Re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:Re},next:null};var c={};return i.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:c},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Um(t){var i=Vm(t);i.next===null&&(i=t.alternate.memoizedState),Ic(t,i.next.queue,{},ji())}function Vd(){return kr(qc)}function Fm(){return or().memoizedState}function zm(){return or().memoizedState}function jA(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var c=ji();t=za(c);var d=ja(i,t,c);d!==null&&(Si(d,i,c),Tc(d,i,c)),i={cache:dd()},t.payload=i;return}i=i.return}}function HA(t,i,c){var d=ji();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},ch(t)?Hm(i,c):(c=nd(t,i,c,d),c!==null&&(Si(c,t,d),Gm(c,i,d)))}function jm(t,i,c){var d=ji();Ic(t,i,c,d)}function Ic(t,i,c,d){var E={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(ch(t))Hm(i,E);else{var w=t.alternate;if(t.lanes===0&&(w===null||w.lanes===0)&&(w=i.lastRenderedReducer,w!==null))try{var R=i.lastRenderedState,k=w(R,c);if(E.hasEagerState=!0,E.eagerState=k,g(k,R))return Hu(t,i,E,0),In===null&&ju(),!1}catch{}finally{}if(c=nd(t,i,E,d),c!==null)return Si(c,t,d),Gm(c,i,d),!0}return!1}function Ud(t,i,c,d){if(d={lane:2,revertLane:y0(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},ch(t)){if(i)throw Error(o(479))}else i=nd(t,c,d,2),i!==null&&Si(i,t,2)}function ch(t){var i=t.alternate;return t===Ct||i!==null&&i===Ct}function Hm(t,i){vl=nh=!0;var c=t.pending;c===null?i.next=i:(i.next=c.next,c.next=i),t.pending=i}function Gm(t,i,c){if((c&4194048)!==0){var d=i.lanes;d&=t.pendingLanes,c|=d,i.lanes=c,Ge(t,c)}}var Rc={readContext:kr,use:sh,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useLayoutEffect:$n,useInsertionEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useSyncExternalStore:$n,useId:$n,useHostTransitionStatus:$n,useFormState:$n,useActionState:$n,useOptimistic:$n,useMemoCache:$n,useCacheRefresh:$n};Rc.useEffectEvent=$n;var qm={readContext:kr,use:sh,useCallback:function(t,i){return fi().memoizedState=[t,i===void 0?null:i],t},useContext:kr,useEffect:Im,useImperativeHandle:function(t,i,c){c=c!=null?c.concat([t]):null,oh(4194308,4,Dm.bind(null,i,t),c)},useLayoutEffect:function(t,i){return oh(4194308,4,t,i)},useInsertionEffect:function(t,i){oh(4,2,t,i)},useMemo:function(t,i){var c=fi();i=i===void 0?null:i;var d=t();if(Xo){Jt(!0);try{t()}finally{Jt(!1)}}return c.memoizedState=[d,i],d},useReducer:function(t,i,c){var d=fi();if(c!==void 0){var E=c(i);if(Xo){Jt(!0);try{c(i)}finally{Jt(!1)}}}else E=i;return d.memoizedState=d.baseState=E,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:E},d.queue=t,t=t.dispatch=HA.bind(null,Ct,t),[d.memoizedState,t]},useRef:function(t){var i=fi();return t={current:t},i.memoizedState=t},useState:function(t){t=Dd(t);var i=t.queue,c=jm.bind(null,Ct,i);return i.dispatch=c,[t.memoizedState,c]},useDebugValue:Pd,useDeferredValue:function(t,i){var c=fi();return kd(c,t,i)},useTransition:function(){var t=Dd(!1);return t=Bm.bind(null,Ct,t.queue,!0,!1),fi().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,c){var d=Ct,E=fi();if(Qt){if(c===void 0)throw Error(o(407));c=c()}else{if(c=i(),In===null)throw Error(o(349));(Ht&127)!==0||fm(d,i,c)}E.memoizedState=c;var w={value:c,getSnapshot:i};return E.queue=w,Im(gm.bind(null,d,w,t),[t]),d.flags|=2048,Il(9,{destroy:void 0},dm.bind(null,d,w,c,i),null),c},useId:function(){var t=fi(),i=In.identifierPrefix;if(Qt){var c=Ms,d=Ds;c=(d&~(1<<32-ut(d)-1)).toString(32)+c,i="_"+i+"R_"+c,c=rh++,0<c&&(i+="H"+c.toString(32)),i+="_"}else c=kA++,i="_"+i+"r_"+c.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:Vd,useFormState:Tm,useActionState:Tm,useOptimistic:function(t){var i=fi();i.memoizedState=i.baseState=t;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=c,i=Ud.bind(null,Ct,!0,c),c.dispatch=i,[t,i]},useMemoCache:Rd,useCacheRefresh:function(){return fi().memoizedState=jA.bind(null,Ct)},useEffectEvent:function(t){var i=fi(),c={impl:t};return i.memoizedState=c,function(){if((ln&2)!==0)throw Error(o(440));return c.impl.apply(void 0,arguments)}}},Fd={readContext:kr,use:sh,useCallback:Lm,useContext:kr,useEffect:Ld,useImperativeHandle:Mm,useInsertionEffect:Nm,useLayoutEffect:Om,useMemo:Pm,useReducer:ah,useRef:Sm,useState:function(){return ah(la)},useDebugValue:Pd,useDeferredValue:function(t,i){var c=or();return km(c,wn.memoizedState,t,i)},useTransition:function(){var t=ah(la)[0],i=or().memoizedState;return[typeof t=="boolean"?t:Sc(t),i]},useSyncExternalStore:hm,useId:Fm,useHostTransitionStatus:Vd,useFormState:Cm,useActionState:Cm,useOptimistic:function(t,i){var c=or();return ym(c,wn,t,i)},useMemoCache:Rd,useCacheRefresh:zm};Fd.useEffectEvent=Rm;var Xm={readContext:kr,use:sh,useCallback:Lm,useContext:kr,useEffect:Ld,useImperativeHandle:Mm,useInsertionEffect:Nm,useLayoutEffect:Om,useMemo:Pm,useReducer:Od,useRef:Sm,useState:function(){return Od(la)},useDebugValue:Pd,useDeferredValue:function(t,i){var c=or();return wn===null?kd(c,t,i):km(c,wn.memoizedState,t,i)},useTransition:function(){var t=Od(la)[0],i=or().memoizedState;return[typeof t=="boolean"?t:Sc(t),i]},useSyncExternalStore:hm,useId:Fm,useHostTransitionStatus:Vd,useFormState:vm,useActionState:vm,useOptimistic:function(t,i){var c=or();return wn!==null?ym(c,wn,t,i):(c.baseState=t,[t,c.queue.dispatch])},useMemoCache:Rd,useCacheRefresh:zm};Xm.useEffectEvent=Rm;function zd(t,i,c,d){i=t.memoizedState,c=c(d,i),c=c==null?i:O({},i,c),t.memoizedState=c,t.lanes===0&&(t.updateQueue.baseState=c)}var jd={enqueueSetState:function(t,i,c){t=t._reactInternals;var d=ji(),E=za(d);E.payload=i,c!=null&&(E.callback=c),i=ja(t,E,d),i!==null&&(Si(i,t,d),Tc(i,t,d))},enqueueReplaceState:function(t,i,c){t=t._reactInternals;var d=ji(),E=za(d);E.tag=1,E.payload=i,c!=null&&(E.callback=c),i=ja(t,E,d),i!==null&&(Si(i,t,d),Tc(i,t,d))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var c=ji(),d=za(c);d.tag=2,i!=null&&(d.callback=i),i=ja(t,d,c),i!==null&&(Si(i,t,c),Tc(i,t,c))}};function Ym(t,i,c,d,E,w,R){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(d,w,R):i.prototype&&i.prototype.isPureReactComponent?!y(c,d)||!y(E,w):!0}function Wm(t,i,c,d){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,d),i.state!==t&&jd.enqueueReplaceState(i,i.state,null)}function Yo(t,i){var c=i;if("ref"in i){c={};for(var d in i)d!=="ref"&&(c[d]=i[d])}if(t=t.defaultProps){c===i&&(c=O({},c));for(var E in t)c[E]===void 0&&(c[E]=t[E])}return c}function Km(t){zu(t)}function Qm(t){console.error(t)}function Zm(t){zu(t)}function uh(t,i){try{var c=t.onUncaughtError;c(i.value,{componentStack:i.stack})}catch(d){setTimeout(function(){throw d})}}function Jm(t,i,c){try{var d=t.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function Hd(t,i,c){return c=za(c),c.tag=3,c.payload={element:null},c.callback=function(){uh(t,i)},c}function $m(t){return t=za(t),t.tag=3,t}function ep(t,i,c,d){var E=c.type.getDerivedStateFromError;if(typeof E=="function"){var w=d.value;t.payload=function(){return E(w)},t.callback=function(){Jm(i,c,d)}}var R=c.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(t.callback=function(){Jm(i,c,d),typeof E!="function"&&(Wa===null?Wa=new Set([this]):Wa.add(this));var k=d.stack;this.componentDidCatch(d.value,{componentStack:k!==null?k:""})})}function GA(t,i,c,d,E){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(i=c.alternate,i!==null&&xl(i,c,E,!0),c=Vi.current,c!==null){switch(c.tag){case 31:case 13:return ss===null?wh():c.alternate===null&&er===0&&(er=3),c.flags&=-257,c.flags|=65536,c.lanes=E,d===Zu?c.flags|=16384:(i=c.updateQueue,i===null?c.updateQueue=new Set([d]):i.add(d),g0(t,d,E)),!1;case 22:return c.flags|=65536,d===Zu?c.flags|=16384:(i=c.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=i):(c=i.retryQueue,c===null?i.retryQueue=new Set([d]):c.add(d)),g0(t,d,E)),!1}throw Error(o(435,c.tag))}return g0(t,d,E),wh(),!1}if(Qt)return i=Vi.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=E,d!==ld&&(t=Error(o(422),{cause:d}),Ec(ts(t,c)))):(d!==ld&&(i=Error(o(423),{cause:d}),Ec(ts(i,c))),t=t.current.alternate,t.flags|=65536,E&=-E,t.lanes|=E,d=ts(d,c),E=Hd(t.stateNode,d,E),_d(t,E),er!==4&&(er=2)),!1;var w=Error(o(520),{cause:d});if(w=ts(w,c),Bc===null?Bc=[w]:Bc.push(w),er!==4&&(er=2),i===null)return!0;d=ts(d,c),c=i;do{switch(c.tag){case 3:return c.flags|=65536,t=E&-E,c.lanes|=t,t=Hd(c.stateNode,d,t),_d(c,t),!1;case 1:if(i=c.type,w=c.stateNode,(c.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Wa===null||!Wa.has(w))))return c.flags|=65536,E&=-E,c.lanes|=E,E=$m(E),ep(E,t,c,d),_d(c,E),!1}c=c.return}while(c!==null);return!1}var Gd=Error(o(461)),dr=!1;function Br(t,i,c,d){i.child=t===null?im(i,null,c,d):qo(i,t.child,c,d)}function tp(t,i,c,d,E){c=c.render;var w=i.ref;if("ref"in d){var R={};for(var k in d)k!=="ref"&&(R[k]=d[k])}else R=d;return zo(i),d=bd(t,i,c,R,w,E),k=vd(),t!==null&&!dr?(Sd(t,i,E),ca(t,i,E)):(Qt&&k&&ad(i),i.flags|=1,Br(t,i,d,E),i.child)}function np(t,i,c,d,E){if(t===null){var w=c.type;return typeof w=="function"&&!rd(w)&&w.defaultProps===void 0&&c.compare===null?(i.tag=15,i.type=w,rp(t,i,w,d,E)):(t=qu(c.type,null,d,i,i.mode,E),t.ref=i.ref,t.return=i,i.child=t)}if(w=t.child,!Jd(t,E)){var R=w.memoizedProps;if(c=c.compare,c=c!==null?c:y,c(R,d)&&t.ref===i.ref)return ca(t,i,E)}return i.flags|=1,t=ra(w,d),t.ref=i.ref,t.return=i,i.child=t}function rp(t,i,c,d,E){if(t!==null){var w=t.memoizedProps;if(y(w,d)&&t.ref===i.ref)if(dr=!1,i.pendingProps=d=w,Jd(t,E))(t.flags&131072)!==0&&(dr=!0);else return i.lanes=t.lanes,ca(t,i,E)}return qd(t,i,c,d,E)}function ip(t,i,c,d){var E=d.children,w=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((i.flags&128)!==0){if(w=w!==null?w.baseLanes|c:c,t!==null){for(d=i.child=t.child,E=0;d!==null;)E=E|d.lanes|d.childLanes,d=d.sibling;d=E&~w}else d=0,i.child=null;return sp(t,i,w,c,d)}if((c&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ku(i,w!==null?w.cachePool:null),w!==null?om(i,w):Ad(),lm(i);else return d=i.lanes=536870912,sp(t,i,w!==null?w.baseLanes|c:c,c,d)}else w!==null?(Ku(i,w.cachePool),om(i,w),Ga(),i.memoizedState=null):(t!==null&&Ku(i,null),Ad(),Ga());return Br(t,i,E,c),i.child}function Nc(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function sp(t,i,c,d,E){var w=md();return w=w===null?null:{parent:hr._currentValue,pool:w},i.memoizedState={baseLanes:c,cachePool:w},t!==null&&Ku(i,null),Ad(),lm(i),t!==null&&xl(t,i,d,!0),i.childLanes=E,null}function hh(t,i){return i=dh({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function ap(t,i,c){return qo(i,t.child,null,c),t=hh(i,i.pendingProps),t.flags|=2,Ui(i),i.memoizedState=null,t}function qA(t,i,c){var d=i.pendingProps,E=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Qt){if(d.mode==="hidden")return t=hh(i,d),i.lanes=536870912,Nc(null,t);if(Td(i),(t=Mn)?(t=E2(t,is),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:ka!==null?{id:Ds,overflow:Ms}:null,retryLane:536870912,hydrationErrors:null},c=Hg(t),c.return=i,i.child=c,Pr=i,Mn=null)):t=null,t===null)throw Va(i);return i.lanes=536870912,null}return hh(i,d)}var w=t.memoizedState;if(w!==null){var R=w.dehydrated;if(Td(i),E)if(i.flags&256)i.flags&=-257,i=ap(t,i,c);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(o(558));else if(dr||xl(t,i,c,!1),E=(c&t.childLanes)!==0,dr||E){if(d=In,d!==null&&(R=mt(d,c),R!==0&&R!==w.retryLane))throw w.retryLane=R,Bo(t,R),Si(d,t,R),Gd;wh(),i=ap(t,i,c)}else t=w.treeContext,Mn=as(R.nextSibling),Pr=i,Qt=!0,Ba=null,is=!1,t!==null&&Xg(i,t),i=hh(i,d),i.flags|=4096;return i}return t=ra(t.child,{mode:d.mode,children:d.children}),t.ref=i.ref,i.child=t,t.return=i,t}function fh(t,i){var c=i.ref;if(c===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(o(284));(t===null||t.ref!==c)&&(i.flags|=4194816)}}function qd(t,i,c,d,E){return zo(i),c=bd(t,i,c,d,void 0,E),d=vd(),t!==null&&!dr?(Sd(t,i,E),ca(t,i,E)):(Qt&&d&&ad(i),i.flags|=1,Br(t,i,c,E),i.child)}function op(t,i,c,d,E,w){return zo(i),i.updateQueue=null,c=um(i,d,c,E),cm(t),d=vd(),t!==null&&!dr?(Sd(t,i,w),ca(t,i,w)):(Qt&&d&&ad(i),i.flags|=1,Br(t,i,c,w),i.child)}function lp(t,i,c,d,E){if(zo(i),i.stateNode===null){var w=pl,R=c.contextType;typeof R=="object"&&R!==null&&(w=kr(R)),w=new c(d,w),i.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=jd,i.stateNode=w,w._reactInternals=i,w=i.stateNode,w.props=d,w.state=i.memoizedState,w.refs={},yd(i),R=c.contextType,w.context=typeof R=="object"&&R!==null?kr(R):pl,w.state=i.memoizedState,R=c.getDerivedStateFromProps,typeof R=="function"&&(zd(i,c,R,d),w.state=i.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(R=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),R!==w.state&&jd.enqueueReplaceState(w,w.state,null),bc(i,d,w,E),Cc(),w.state=i.memoizedState),typeof w.componentDidMount=="function"&&(i.flags|=4194308),d=!0}else if(t===null){w=i.stateNode;var k=i.memoizedProps,K=Yo(c,k);w.props=K;var fe=w.context,Te=c.contextType;R=pl,typeof Te=="object"&&Te!==null&&(R=kr(Te));var ve=c.getDerivedStateFromProps;Te=typeof ve=="function"||typeof w.getSnapshotBeforeUpdate=="function",k=i.pendingProps!==k,Te||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k||fe!==R)&&Wm(i,w,d,R),Fa=!1;var me=i.memoizedState;w.state=me,bc(i,d,w,E),Cc(),fe=i.memoizedState,k||me!==fe||Fa?(typeof ve=="function"&&(zd(i,c,ve,d),fe=i.memoizedState),(K=Fa||Ym(i,c,K,d,me,fe,R))?(Te||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=fe),w.props=d,w.state=fe,w.context=R,d=K):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{w=i.stateNode,Ed(t,i),R=i.memoizedProps,Te=Yo(c,R),w.props=Te,ve=i.pendingProps,me=w.context,fe=c.contextType,K=pl,typeof fe=="object"&&fe!==null&&(K=kr(fe)),k=c.getDerivedStateFromProps,(fe=typeof k=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(R!==ve||me!==K)&&Wm(i,w,d,K),Fa=!1,me=i.memoizedState,w.state=me,bc(i,d,w,E),Cc();var Ae=i.memoizedState;R!==ve||me!==Ae||Fa||t!==null&&t.dependencies!==null&&Yu(t.dependencies)?(typeof k=="function"&&(zd(i,c,k,d),Ae=i.memoizedState),(Te=Fa||Ym(i,c,Te,d,me,Ae,K)||t!==null&&t.dependencies!==null&&Yu(t.dependencies))?(fe||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(d,Ae,K),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(d,Ae,K)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||R===t.memoizedProps&&me===t.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||R===t.memoizedProps&&me===t.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=Ae),w.props=d,w.state=Ae,w.context=K,d=Te):(typeof w.componentDidUpdate!="function"||R===t.memoizedProps&&me===t.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||R===t.memoizedProps&&me===t.memoizedState||(i.flags|=1024),d=!1)}return w=d,fh(t,i),d=(i.flags&128)!==0,w||d?(w=i.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:w.render(),i.flags|=1,t!==null&&d?(i.child=qo(i,t.child,null,E),i.child=qo(i,null,c,E)):Br(t,i,c,E),i.memoizedState=w.state,t=i.child):t=ca(t,i,E),t}function cp(t,i,c,d){return Uo(),i.flags|=256,Br(t,i,c,d),i.child}var Xd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yd(t){return{baseLanes:t,cachePool:Jg()}}function Wd(t,i,c){return t=t!==null?t.childLanes&~c:0,i&&(t|=zi),t}function up(t,i,c){var d=i.pendingProps,E=!1,w=(i.flags&128)!==0,R;if((R=w)||(R=t!==null&&t.memoizedState===null?!1:(ar.current&2)!==0),R&&(E=!0,i.flags&=-129),R=(i.flags&32)!==0,i.flags&=-33,t===null){if(Qt){if(E?Ha(i):Ga(),(t=Mn)?(t=E2(t,is),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:ka!==null?{id:Ds,overflow:Ms}:null,retryLane:536870912,hydrationErrors:null},c=Hg(t),c.return=i,i.child=c,Pr=i,Mn=null)):t=null,t===null)throw Va(i);return N0(t)?i.lanes=32:i.lanes=536870912,null}var k=d.children;return d=d.fallback,E?(Ga(),E=i.mode,k=dh({mode:"hidden",children:k},E),d=Vo(d,E,c,null),k.return=i,d.return=i,k.sibling=d,i.child=k,d=i.child,d.memoizedState=Yd(c),d.childLanes=Wd(t,R,c),i.memoizedState=Xd,Nc(null,d)):(Ha(i),Kd(i,k))}var K=t.memoizedState;if(K!==null&&(k=K.dehydrated,k!==null)){if(w)i.flags&256?(Ha(i),i.flags&=-257,i=Qd(t,i,c)):i.memoizedState!==null?(Ga(),i.child=t.child,i.flags|=128,i=null):(Ga(),k=d.fallback,E=i.mode,d=dh({mode:"visible",children:d.children},E),k=Vo(k,E,c,null),k.flags|=2,d.return=i,k.return=i,d.sibling=k,i.child=d,qo(i,t.child,null,c),d=i.child,d.memoizedState=Yd(c),d.childLanes=Wd(t,R,c),i.memoizedState=Xd,i=Nc(null,d));else if(Ha(i),N0(k)){if(R=k.nextSibling&&k.nextSibling.dataset,R)var fe=R.dgst;R=fe,d=Error(o(419)),d.stack="",d.digest=R,Ec({value:d,source:null,stack:null}),i=Qd(t,i,c)}else if(dr||xl(t,i,c,!1),R=(c&t.childLanes)!==0,dr||R){if(R=In,R!==null&&(d=mt(R,c),d!==0&&d!==K.retryLane))throw K.retryLane=d,Bo(t,d),Si(R,t,d),Gd;R0(k)||wh(),i=Qd(t,i,c)}else R0(k)?(i.flags|=192,i.child=t.child,i=null):(t=K.treeContext,Mn=as(k.nextSibling),Pr=i,Qt=!0,Ba=null,is=!1,t!==null&&Xg(i,t),i=Kd(i,d.children),i.flags|=4096);return i}return E?(Ga(),k=d.fallback,E=i.mode,K=t.child,fe=K.sibling,d=ra(K,{mode:"hidden",children:d.children}),d.subtreeFlags=K.subtreeFlags&65011712,fe!==null?k=ra(fe,k):(k=Vo(k,E,c,null),k.flags|=2),k.return=i,d.return=i,d.sibling=k,i.child=d,Nc(null,d),d=i.child,k=t.child.memoizedState,k===null?k=Yd(c):(E=k.cachePool,E!==null?(K=hr._currentValue,E=E.parent!==K?{parent:K,pool:K}:E):E=Jg(),k={baseLanes:k.baseLanes|c,cachePool:E}),d.memoizedState=k,d.childLanes=Wd(t,R,c),i.memoizedState=Xd,Nc(t.child,d)):(Ha(i),c=t.child,t=c.sibling,c=ra(c,{mode:"visible",children:d.children}),c.return=i,c.sibling=null,t!==null&&(R=i.deletions,R===null?(i.deletions=[t],i.flags|=16):R.push(t)),i.child=c,i.memoizedState=null,c)}function Kd(t,i){return i=dh({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function dh(t,i){return t=Bi(22,t,null,i),t.lanes=0,t}function Qd(t,i,c){return qo(i,t.child,null,c),t=Kd(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function hp(t,i,c){t.lanes|=i;var d=t.alternate;d!==null&&(d.lanes|=i),hd(t.return,i,c)}function Zd(t,i,c,d,E,w){var R=t.memoizedState;R===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:E,treeForkCount:w}:(R.isBackwards=i,R.rendering=null,R.renderingStartTime=0,R.last=d,R.tail=c,R.tailMode=E,R.treeForkCount=w)}function fp(t,i,c){var d=i.pendingProps,E=d.revealOrder,w=d.tail;d=d.children;var R=ar.current,k=(R&2)!==0;if(k?(R=R&1|2,i.flags|=128):R&=1,de(ar,R),Br(t,i,d,c),d=Qt?yc:0,!k&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hp(t,c,i);else if(t.tag===19)hp(t,c,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(E){case"forwards":for(c=i.child,E=null;c!==null;)t=c.alternate,t!==null&&th(t)===null&&(E=c),c=c.sibling;c=E,c===null?(E=i.child,i.child=null):(E=c.sibling,c.sibling=null),Zd(i,!1,E,c,w,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,E=i.child,i.child=null;E!==null;){if(t=E.alternate,t!==null&&th(t)===null){i.child=E;break}t=E.sibling,E.sibling=c,c=E,E=t}Zd(i,!0,c,null,w,d);break;case"together":Zd(i,!1,null,null,void 0,d);break;default:i.memoizedState=null}return i.child}function ca(t,i,c){if(t!==null&&(i.dependencies=t.dependencies),Ya|=i.lanes,(c&i.childLanes)===0)if(t!==null){if(xl(t,i,c,!1),(c&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(o(153));if(i.child!==null){for(t=i.child,c=ra(t,t.pendingProps),i.child=c,c.return=i;t.sibling!==null;)t=t.sibling,c=c.sibling=ra(t,t.pendingProps),c.return=i;c.sibling=null}return i.child}function Jd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Yu(t)))}function XA(t,i,c){switch(i.tag){case 3:et(i,i.stateNode.containerInfo),Ua(i,hr,t.memoizedState.cache),Uo();break;case 27:case 5:mn(i);break;case 4:et(i,i.stateNode.containerInfo);break;case 10:Ua(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Td(i),null;break;case 13:var d=i.memoizedState;if(d!==null)return d.dehydrated!==null?(Ha(i),i.flags|=128,null):(c&i.child.childLanes)!==0?up(t,i,c):(Ha(i),t=ca(t,i,c),t!==null?t.sibling:null);Ha(i);break;case 19:var E=(t.flags&128)!==0;if(d=(c&i.childLanes)!==0,d||(xl(t,i,c,!1),d=(c&i.childLanes)!==0),E){if(d)return fp(t,i,c);i.flags|=128}if(E=i.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),de(ar,ar.current),d)break;return null;case 22:return i.lanes=0,ip(t,i,c,i.pendingProps);case 24:Ua(i,hr,t.memoizedState.cache)}return ca(t,i,c)}function dp(t,i,c){if(t!==null)if(t.memoizedProps!==i.pendingProps)dr=!0;else{if(!Jd(t,c)&&(i.flags&128)===0)return dr=!1,XA(t,i,c);dr=(t.flags&131072)!==0}else dr=!1,Qt&&(i.flags&1048576)!==0&&qg(i,yc,i.index);switch(i.lanes=0,i.tag){case 16:e:{var d=i.pendingProps;if(t=Ho(i.elementType),i.type=t,typeof t=="function")rd(t)?(d=Yo(t,d),i.tag=1,i=lp(null,i,t,d,c)):(i.tag=0,i=qd(null,i,t,d,c));else{if(t!=null){var E=t.$$typeof;if(E===Le){i.tag=11,i=tp(null,i,t,d,c);break e}else if(E===F){i.tag=14,i=np(null,i,t,d,c);break e}}throw i=Qe(t)||t,Error(o(306,i,""))}}return i;case 0:return qd(t,i,i.type,i.pendingProps,c);case 1:return d=i.type,E=Yo(d,i.pendingProps),lp(t,i,d,E,c);case 3:e:{if(et(i,i.stateNode.containerInfo),t===null)throw Error(o(387));d=i.pendingProps;var w=i.memoizedState;E=w.element,Ed(t,i),bc(i,d,null,c);var R=i.memoizedState;if(d=R.cache,Ua(i,hr,d),d!==w.cache&&fd(i,[hr],c,!0),Cc(),d=R.element,w.isDehydrated)if(w={element:d,isDehydrated:!1,cache:R.cache},i.updateQueue.baseState=w,i.memoizedState=w,i.flags&256){i=cp(t,i,d,c);break e}else if(d!==E){E=ts(Error(o(424)),i),Ec(E),i=cp(t,i,d,c);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Mn=as(t.firstChild),Pr=i,Qt=!0,Ba=null,is=!0,c=im(i,null,d,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Uo(),d===E){i=ca(t,i,c);break e}Br(t,i,d,c)}i=i.child}return i;case 26:return fh(t,i),t===null?(c=C2(i.type,null,i.pendingProps,null))?i.memoizedState=c:Qt||(c=i.type,t=i.pendingProps,d=Rh(ye.current).createElement(c),d[tn]=i,d[Ot]=t,Vr(d,c,t),Un(d),i.stateNode=d):i.memoizedState=C2(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return mn(i),t===null&&Qt&&(d=i.stateNode=A2(i.type,i.pendingProps,ye.current),Pr=i,is=!0,E=Mn,Ja(i.type)?(O0=E,Mn=as(d.firstChild)):Mn=E),Br(t,i,i.pendingProps.children,c),fh(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Qt&&((E=d=Mn)&&(d=ww(d,i.type,i.pendingProps,is),d!==null?(i.stateNode=d,Pr=i,Mn=as(d.firstChild),is=!1,E=!0):E=!1),E||Va(i)),mn(i),E=i.type,w=i.pendingProps,R=t!==null?t.memoizedProps:null,d=w.children,v0(E,w)?d=null:R!==null&&v0(E,R)&&(i.flags|=32),i.memoizedState!==null&&(E=bd(t,i,BA,null,null,c),qc._currentValue=E),fh(t,i),Br(t,i,d,c),i.child;case 6:return t===null&&Qt&&((t=c=Mn)&&(c=Tw(c,i.pendingProps,is),c!==null?(i.stateNode=c,Pr=i,Mn=null,t=!0):t=!1),t||Va(i)),null;case 13:return up(t,i,c);case 4:return et(i,i.stateNode.containerInfo),d=i.pendingProps,t===null?i.child=qo(i,null,d,c):Br(t,i,d,c),i.child;case 11:return tp(t,i,i.type,i.pendingProps,c);case 7:return Br(t,i,i.pendingProps,c),i.child;case 8:return Br(t,i,i.pendingProps.children,c),i.child;case 12:return Br(t,i,i.pendingProps.children,c),i.child;case 10:return d=i.pendingProps,Ua(i,i.type,d.value),Br(t,i,d.children,c),i.child;case 9:return E=i.type._context,d=i.pendingProps.children,zo(i),E=kr(E),d=d(E),i.flags|=1,Br(t,i,d,c),i.child;case 14:return np(t,i,i.type,i.pendingProps,c);case 15:return rp(t,i,i.type,i.pendingProps,c);case 19:return fp(t,i,c);case 31:return qA(t,i,c);case 22:return ip(t,i,c,i.pendingProps);case 24:return zo(i),d=kr(hr),t===null?(E=md(),E===null&&(E=In,w=dd(),E.pooledCache=w,w.refCount++,w!==null&&(E.pooledCacheLanes|=c),E=w),i.memoizedState={parent:d,cache:E},yd(i),Ua(i,hr,E)):((t.lanes&c)!==0&&(Ed(t,i),bc(i,null,null,c),Cc()),E=t.memoizedState,w=i.memoizedState,E.parent!==d?(E={parent:d,cache:d},i.memoizedState=E,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=E),Ua(i,hr,d)):(d=w.cache,Ua(i,hr,d),d!==E.cache&&fd(i,[hr],c,!0))),Br(t,i,i.pendingProps.children,c),i.child;case 29:throw i.pendingProps}throw Error(o(156,i.tag))}function ua(t){t.flags|=4}function $d(t,i,c,d,E){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(E&335544128)===E)if(t.stateNode.complete)t.flags|=8192;else if(Fp())t.flags|=8192;else throw Go=Zu,pd}else t.flags&=-16777217}function gp(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!R2(i))if(Fp())t.flags|=8192;else throw Go=Zu,pd}function gh(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Xn():536870912,t.lanes|=i,Dl|=i)}function Oc(t,i){if(!Qt)switch(t.tailMode){case"hidden":i=t.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?t.tail=null:c.sibling=null;break;case"collapsed":c=t.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:d.sibling=null}}function Ln(t){var i=t.alternate!==null&&t.alternate.child===t.child,c=0,d=0;if(i)for(var E=t.child;E!==null;)c|=E.lanes|E.childLanes,d|=E.subtreeFlags&65011712,d|=E.flags&65011712,E.return=t,E=E.sibling;else for(E=t.child;E!==null;)c|=E.lanes|E.childLanes,d|=E.subtreeFlags,d|=E.flags,E.return=t,E=E.sibling;return t.subtreeFlags|=d,t.childLanes=c,i}function YA(t,i,c){var d=i.pendingProps;switch(od(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(i),null;case 1:return Ln(i),null;case 3:return c=i.stateNode,d=null,t!==null&&(d=t.memoizedState.cache),i.memoizedState.cache!==d&&(i.flags|=2048),aa(hr),lt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(_l(i)?ua(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,cd())),Ln(i),null;case 26:var E=i.type,w=i.memoizedState;return t===null?(ua(i),w!==null?(Ln(i),gp(i,w)):(Ln(i),$d(i,E,null,d,c))):w?w!==t.memoizedState?(ua(i),Ln(i),gp(i,w)):(Ln(i),i.flags&=-16777217):(t=t.memoizedProps,t!==d&&ua(i),Ln(i),$d(i,E,t,d,c)),null;case 27:if(Zt(i),c=ye.current,E=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==d&&ua(i);else{if(!d){if(i.stateNode===null)throw Error(o(166));return Ln(i),null}t=we.current,_l(i)?Yg(i):(t=A2(E,d,c),i.stateNode=t,ua(i))}return Ln(i),null;case 5:if(Zt(i),E=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==d&&ua(i);else{if(!d){if(i.stateNode===null)throw Error(o(166));return Ln(i),null}if(w=we.current,_l(i))Yg(i);else{var R=Rh(ye.current);switch(w){case 1:w=R.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:w=R.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":w=R.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":w=R.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":w=R.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof d.is=="string"?R.createElement("select",{is:d.is}):R.createElement("select"),d.multiple?w.multiple=!0:d.size&&(w.size=d.size);break;default:w=typeof d.is=="string"?R.createElement(E,{is:d.is}):R.createElement(E)}}w[tn]=i,w[Ot]=d;e:for(R=i.child;R!==null;){if(R.tag===5||R.tag===6)w.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===i)break e;for(;R.sibling===null;){if(R.return===null||R.return===i)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}i.stateNode=w;e:switch(Vr(w,E,d),E){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&ua(i)}}return Ln(i),$d(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,c),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==d&&ua(i);else{if(typeof d!="string"&&i.stateNode===null)throw Error(o(166));if(t=ye.current,_l(i)){if(t=i.stateNode,c=i.memoizedProps,d=null,E=Pr,E!==null)switch(E.tag){case 27:case 5:d=E.memoizedProps}t[tn]=i,t=!!(t.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||u2(t.nodeValue,c)),t||Va(i,!0)}else t=Rh(t).createTextNode(d),t[tn]=i,i.stateNode=t}return Ln(i),null;case 31:if(c=i.memoizedState,t===null||t.memoizedState!==null){if(d=_l(i),c!==null){if(t===null){if(!d)throw Error(o(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[tn]=i}else Uo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ln(i),t=!1}else c=cd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),t=!0;if(!t)return i.flags&256?(Ui(i),i):(Ui(i),null);if((i.flags&128)!==0)throw Error(o(558))}return Ln(i),null;case 13:if(d=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(E=_l(i),d!==null&&d.dehydrated!==null){if(t===null){if(!E)throw Error(o(318));if(E=i.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(o(317));E[tn]=i}else Uo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ln(i),E=!1}else E=cd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=E),E=!0;if(!E)return i.flags&256?(Ui(i),i):(Ui(i),null)}return Ui(i),(i.flags&128)!==0?(i.lanes=c,i):(c=d!==null,t=t!==null&&t.memoizedState!==null,c&&(d=i.child,E=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(E=d.alternate.memoizedState.cachePool.pool),w=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(w=d.memoizedState.cachePool.pool),w!==E&&(d.flags|=2048)),c!==t&&c&&(i.child.flags|=8192),gh(i,i.updateQueue),Ln(i),null);case 4:return lt(),t===null&&A0(i.stateNode.containerInfo),Ln(i),null;case 10:return aa(i.type),Ln(i),null;case 19:if(X(ar),d=i.memoizedState,d===null)return Ln(i),null;if(E=(i.flags&128)!==0,w=d.rendering,w===null)if(E)Oc(d,!1);else{if(er!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(w=th(t),w!==null){for(i.flags|=128,Oc(d,!1),t=w.updateQueue,i.updateQueue=t,gh(i,t),i.subtreeFlags=0,t=c,c=i.child;c!==null;)jg(c,t),c=c.sibling;return de(ar,ar.current&1|2),Qt&&ia(i,d.treeForkCount),i.child}t=t.sibling}d.tail!==null&&cn()>_h&&(i.flags|=128,E=!0,Oc(d,!1),i.lanes=4194304)}else{if(!E)if(t=th(w),t!==null){if(i.flags|=128,E=!0,t=t.updateQueue,i.updateQueue=t,gh(i,t),Oc(d,!0),d.tail===null&&d.tailMode==="hidden"&&!w.alternate&&!Qt)return Ln(i),null}else 2*cn()-d.renderingStartTime>_h&&c!==536870912&&(i.flags|=128,E=!0,Oc(d,!1),i.lanes=4194304);d.isBackwards?(w.sibling=i.child,i.child=w):(t=d.last,t!==null?t.sibling=w:i.child=w,d.last=w)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=cn(),t.sibling=null,c=ar.current,de(ar,E?c&1|2:c&1),Qt&&ia(i,d.treeForkCount),t):(Ln(i),null);case 22:case 23:return Ui(i),wd(),d=i.memoizedState!==null,t!==null?t.memoizedState!==null!==d&&(i.flags|=8192):d&&(i.flags|=8192),d?(c&536870912)!==0&&(i.flags&128)===0&&(Ln(i),i.subtreeFlags&6&&(i.flags|=8192)):Ln(i),c=i.updateQueue,c!==null&&gh(i,c.retryQueue),c=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),d=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),d!==c&&(i.flags|=2048),t!==null&&X(jo),null;case 24:return c=null,t!==null&&(c=t.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),aa(hr),Ln(i),null;case 25:return null;case 30:return null}throw Error(o(156,i.tag))}function WA(t,i){switch(od(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return aa(hr),lt(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Zt(i),null;case 31:if(i.memoizedState!==null){if(Ui(i),i.alternate===null)throw Error(o(340));Uo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(Ui(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(o(340));Uo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return X(ar),null;case 4:return lt(),null;case 10:return aa(i.type),null;case 22:case 23:return Ui(i),wd(),t!==null&&X(jo),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return aa(hr),null;case 25:return null;default:return null}}function mp(t,i){switch(od(i),i.tag){case 3:aa(hr),lt();break;case 26:case 27:case 5:Zt(i);break;case 4:lt();break;case 31:i.memoizedState!==null&&Ui(i);break;case 13:Ui(i);break;case 19:X(ar);break;case 10:aa(i.type);break;case 22:case 23:Ui(i),wd(),t!==null&&X(jo);break;case 24:aa(hr)}}function Dc(t,i){try{var c=i.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var E=d.next;c=E;do{if((c.tag&t)===t){d=void 0;var w=c.create,R=c.inst;d=w(),R.destroy=d}c=c.next}while(c!==E)}}catch(k){xn(i,i.return,k)}}function qa(t,i,c){try{var d=i.updateQueue,E=d!==null?d.lastEffect:null;if(E!==null){var w=E.next;d=w;do{if((d.tag&t)===t){var R=d.inst,k=R.destroy;if(k!==void 0){R.destroy=void 0,E=i;var K=c,fe=k;try{fe()}catch(Te){xn(E,K,Te)}}}d=d.next}while(d!==w)}}catch(Te){xn(i,i.return,Te)}}function pp(t){var i=t.updateQueue;if(i!==null){var c=t.stateNode;try{am(i,c)}catch(d){xn(t,t.return,d)}}}function yp(t,i,c){c.props=Yo(t.type,t.memoizedProps),c.state=t.memoizedState;try{c.componentWillUnmount()}catch(d){xn(t,i,d)}}function Mc(t,i){try{var c=t.ref;if(c!==null){switch(t.tag){case 26:case 27:case 5:var d=t.stateNode;break;case 30:d=t.stateNode;break;default:d=t.stateNode}typeof c=="function"?t.refCleanup=c(d):c.current=d}}catch(E){xn(t,i,E)}}function Ls(t,i){var c=t.ref,d=t.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(E){xn(t,i,E)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(E){xn(t,i,E)}else c.current=null}function Ep(t){var i=t.type,c=t.memoizedProps,d=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(E){xn(t,t.return,E)}}function e0(t,i,c){try{var d=t.stateNode;pw(d,t.type,c,i),d[Ot]=i}catch(E){xn(t,t.return,E)}}function _p(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ja(t.type)||t.tag===4}function t0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_p(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ja(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function n0(t,i,c){var d=t.tag;if(d===5||d===6)t=t.stateNode,i?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(t,i):(i=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,i.appendChild(t),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=Xr));else if(d!==4&&(d===27&&Ja(t.type)&&(c=t.stateNode,i=null),t=t.child,t!==null))for(n0(t,i,c),t=t.sibling;t!==null;)n0(t,i,c),t=t.sibling}function mh(t,i,c){var d=t.tag;if(d===5||d===6)t=t.stateNode,i?c.insertBefore(t,i):c.appendChild(t);else if(d!==4&&(d===27&&Ja(t.type)&&(c=t.stateNode),t=t.child,t!==null))for(mh(t,i,c),t=t.sibling;t!==null;)mh(t,i,c),t=t.sibling}function xp(t){var i=t.stateNode,c=t.memoizedProps;try{for(var d=t.type,E=i.attributes;E.length;)i.removeAttributeNode(E[0]);Vr(i,d,c),i[tn]=t,i[Ot]=c}catch(w){xn(t,t.return,w)}}var ha=!1,gr=!1,r0=!1,Ap=typeof WeakSet=="function"?WeakSet:Set,Sr=null;function KA(t,i){if(t=t.containerInfo,C0=kh,t=M(t),L(t)){if("selectionStart"in t)var c={start:t.selectionStart,end:t.selectionEnd};else e:{c=(c=t.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var E=d.anchorOffset,w=d.focusNode;d=d.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var R=0,k=-1,K=-1,fe=0,Te=0,ve=t,me=null;t:for(;;){for(var Ae;ve!==c||E!==0&&ve.nodeType!==3||(k=R+E),ve!==w||d!==0&&ve.nodeType!==3||(K=R+d),ve.nodeType===3&&(R+=ve.nodeValue.length),(Ae=ve.firstChild)!==null;)me=ve,ve=Ae;for(;;){if(ve===t)break t;if(me===c&&++fe===E&&(k=R),me===w&&++Te===d&&(K=R),(Ae=ve.nextSibling)!==null)break;ve=me,me=ve.parentNode}ve=Ae}c=k===-1||K===-1?null:{start:k,end:K}}else c=null}c=c||{start:0,end:0}}else c=null;for(b0={focusedElem:t,selectionRange:c},kh=!1,Sr=i;Sr!==null;)if(i=Sr,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Sr=t;else for(;Sr!==null;){switch(i=Sr,w=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(c=0;c<t.length;c++)E=t[c],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&w!==null){t=void 0,c=i,E=w.memoizedProps,w=w.memoizedState,d=c.stateNode;try{var $e=Yo(c.type,E);t=d.getSnapshotBeforeUpdate($e,w),d.__reactInternalSnapshotBeforeUpdate=t}catch(ft){xn(c,c.return,ft)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,c=t.nodeType,c===9)I0(t);else if(c===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":I0(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=i.sibling,t!==null){t.return=i.return,Sr=t;break}Sr=i.return}}function wp(t,i,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:da(t,c),d&4&&Dc(5,c);break;case 1:if(da(t,c),d&4)if(t=c.stateNode,i===null)try{t.componentDidMount()}catch(R){xn(c,c.return,R)}else{var E=Yo(c.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(E,i,t.__reactInternalSnapshotBeforeUpdate)}catch(R){xn(c,c.return,R)}}d&64&&pp(c),d&512&&Mc(c,c.return);break;case 3:if(da(t,c),d&64&&(t=c.updateQueue,t!==null)){if(i=null,c.child!==null)switch(c.child.tag){case 27:case 5:i=c.child.stateNode;break;case 1:i=c.child.stateNode}try{am(t,i)}catch(R){xn(c,c.return,R)}}break;case 27:i===null&&d&4&&xp(c);case 26:case 5:da(t,c),i===null&&d&4&&Ep(c),d&512&&Mc(c,c.return);break;case 12:da(t,c);break;case 31:da(t,c),d&4&&bp(t,c);break;case 13:da(t,c),d&4&&vp(t,c),d&64&&(t=c.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(c=iw.bind(null,c),Cw(t,c))));break;case 22:if(d=c.memoizedState!==null||ha,!d){i=i!==null&&i.memoizedState!==null||gr,E=ha;var w=gr;ha=d,(gr=i)&&!w?ga(t,c,(c.subtreeFlags&8772)!==0):da(t,c),ha=E,gr=w}break;case 30:break;default:da(t,c)}}function Tp(t){var i=t.alternate;i!==null&&(t.alternate=null,Tp(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Nr(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Gn=null,Ti=!1;function fa(t,i,c){for(c=c.child;c!==null;)Cp(t,i,c),c=c.sibling}function Cp(t,i,c){if(De&&typeof De.onCommitFiberUnmount=="function")try{De.onCommitFiberUnmount(Ft,c)}catch{}switch(c.tag){case 26:gr||Ls(c,i),fa(t,i,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:gr||Ls(c,i);var d=Gn,E=Ti;Ja(c.type)&&(Gn=c.stateNode,Ti=!1),fa(t,i,c),jc(c.stateNode),Gn=d,Ti=E;break;case 5:gr||Ls(c,i);case 6:if(d=Gn,E=Ti,Gn=null,fa(t,i,c),Gn=d,Ti=E,Gn!==null)if(Ti)try{(Gn.nodeType===9?Gn.body:Gn.nodeName==="HTML"?Gn.ownerDocument.body:Gn).removeChild(c.stateNode)}catch(w){xn(c,i,w)}else try{Gn.removeChild(c.stateNode)}catch(w){xn(c,i,w)}break;case 18:Gn!==null&&(Ti?(t=Gn,p2(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,c.stateNode),Fl(t)):p2(Gn,c.stateNode));break;case 4:d=Gn,E=Ti,Gn=c.stateNode.containerInfo,Ti=!0,fa(t,i,c),Gn=d,Ti=E;break;case 0:case 11:case 14:case 15:qa(2,c,i),gr||qa(4,c,i),fa(t,i,c);break;case 1:gr||(Ls(c,i),d=c.stateNode,typeof d.componentWillUnmount=="function"&&yp(c,i,d)),fa(t,i,c);break;case 21:fa(t,i,c);break;case 22:gr=(d=gr)||c.memoizedState!==null,fa(t,i,c),gr=d;break;default:fa(t,i,c)}}function bp(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Fl(t)}catch(c){xn(i,i.return,c)}}}function vp(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Fl(t)}catch(c){xn(i,i.return,c)}}function QA(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Ap),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Ap),i;default:throw Error(o(435,t.tag))}}function ph(t,i){var c=QA(t);i.forEach(function(d){if(!c.has(d)){c.add(d);var E=sw.bind(null,t,d);d.then(E,E)}})}function Ci(t,i){var c=i.deletions;if(c!==null)for(var d=0;d<c.length;d++){var E=c[d],w=t,R=i,k=R;e:for(;k!==null;){switch(k.tag){case 27:if(Ja(k.type)){Gn=k.stateNode,Ti=!1;break e}break;case 5:Gn=k.stateNode,Ti=!1;break e;case 3:case 4:Gn=k.stateNode.containerInfo,Ti=!0;break e}k=k.return}if(Gn===null)throw Error(o(160));Cp(w,R,E),Gn=null,Ti=!1,w=E.alternate,w!==null&&(w.return=null),E.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Sp(i,t),i=i.sibling}var Es=null;function Sp(t,i){var c=t.alternate,d=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ci(i,t),bi(t),d&4&&(qa(3,t,t.return),Dc(3,t),qa(5,t,t.return));break;case 1:Ci(i,t),bi(t),d&512&&(gr||c===null||Ls(c,c.return)),d&64&&ha&&(t=t.updateQueue,t!==null&&(d=t.callbacks,d!==null&&(c=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var E=Es;if(Ci(i,t),bi(t),d&512&&(gr||c===null||Ls(c,c.return)),d&4){var w=c!==null?c.memoizedState:null;if(d=t.memoizedState,c===null)if(d===null)if(t.stateNode===null){e:{d=t.type,c=t.memoizedProps,E=E.ownerDocument||E;t:switch(d){case"title":w=E.getElementsByTagName("title")[0],(!w||w[Xi]||w[tn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=E.createElement(d),E.head.insertBefore(w,E.querySelector("head > title"))),Vr(w,d,c),w[tn]=t,Un(w),d=w;break e;case"link":var R=S2("link","href",E).get(d+(c.href||""));if(R){for(var k=0;k<R.length;k++)if(w=R[k],w.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&w.getAttribute("rel")===(c.rel==null?null:c.rel)&&w.getAttribute("title")===(c.title==null?null:c.title)&&w.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){R.splice(k,1);break t}}w=E.createElement(d),Vr(w,d,c),E.head.appendChild(w);break;case"meta":if(R=S2("meta","content",E).get(d+(c.content||""))){for(k=0;k<R.length;k++)if(w=R[k],w.getAttribute("content")===(c.content==null?null:""+c.content)&&w.getAttribute("name")===(c.name==null?null:c.name)&&w.getAttribute("property")===(c.property==null?null:c.property)&&w.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&w.getAttribute("charset")===(c.charSet==null?null:c.charSet)){R.splice(k,1);break t}}w=E.createElement(d),Vr(w,d,c),E.head.appendChild(w);break;default:throw Error(o(468,d))}w[tn]=t,Un(w),d=w}t.stateNode=d}else I2(E,t.type,t.stateNode);else t.stateNode=v2(E,d,t.memoizedProps);else w!==d?(w===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):w.count--,d===null?I2(E,t.type,t.stateNode):v2(E,d,t.memoizedProps)):d===null&&t.stateNode!==null&&e0(t,t.memoizedProps,c.memoizedProps)}break;case 27:Ci(i,t),bi(t),d&512&&(gr||c===null||Ls(c,c.return)),c!==null&&d&4&&e0(t,t.memoizedProps,c.memoizedProps);break;case 5:if(Ci(i,t),bi(t),d&512&&(gr||c===null||Ls(c,c.return)),t.flags&32){E=t.stateNode;try{qr(E,"")}catch($e){xn(t,t.return,$e)}}d&4&&t.stateNode!=null&&(E=t.memoizedProps,e0(t,E,c!==null?c.memoizedProps:E)),d&1024&&(r0=!0);break;case 6:if(Ci(i,t),bi(t),d&4){if(t.stateNode===null)throw Error(o(162));d=t.memoizedProps,c=t.stateNode;try{c.nodeValue=d}catch($e){xn(t,t.return,$e)}}break;case 3:if(Dh=null,E=Es,Es=Nh(i.containerInfo),Ci(i,t),Es=E,bi(t),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Fl(i.containerInfo)}catch($e){xn(t,t.return,$e)}r0&&(r0=!1,Ip(t));break;case 4:d=Es,Es=Nh(t.stateNode.containerInfo),Ci(i,t),bi(t),Es=d;break;case 12:Ci(i,t),bi(t);break;case 31:Ci(i,t),bi(t),d&4&&(d=t.updateQueue,d!==null&&(t.updateQueue=null,ph(t,d)));break;case 13:Ci(i,t),bi(t),t.child.flags&8192&&t.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Eh=cn()),d&4&&(d=t.updateQueue,d!==null&&(t.updateQueue=null,ph(t,d)));break;case 22:E=t.memoizedState!==null;var K=c!==null&&c.memoizedState!==null,fe=ha,Te=gr;if(ha=fe||E,gr=Te||K,Ci(i,t),gr=Te,ha=fe,bi(t),d&8192)e:for(i=t.stateNode,i._visibility=E?i._visibility&-2:i._visibility|1,E&&(c===null||K||ha||gr||Wo(t)),c=null,i=t;;){if(i.tag===5||i.tag===26){if(c===null){K=c=i;try{if(w=K.stateNode,E)R=w.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{k=K.stateNode;var ve=K.memoizedProps.style,me=ve!=null&&ve.hasOwnProperty("display")?ve.display:null;k.style.display=me==null||typeof me=="boolean"?"":(""+me).trim()}}catch($e){xn(K,K.return,$e)}}}else if(i.tag===6){if(c===null){K=i;try{K.stateNode.nodeValue=E?"":K.memoizedProps}catch($e){xn(K,K.return,$e)}}}else if(i.tag===18){if(c===null){K=i;try{var Ae=K.stateNode;E?y2(Ae,!0):y2(K.stateNode,!1)}catch($e){xn(K,K.return,$e)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;c===i&&(c=null),i=i.return}c===i&&(c=null),i.sibling.return=i.return,i=i.sibling}d&4&&(d=t.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,ph(t,c))));break;case 19:Ci(i,t),bi(t),d&4&&(d=t.updateQueue,d!==null&&(t.updateQueue=null,ph(t,d)));break;case 30:break;case 21:break;default:Ci(i,t),bi(t)}}function bi(t){var i=t.flags;if(i&2){try{for(var c,d=t.return;d!==null;){if(_p(d)){c=d;break}d=d.return}if(c==null)throw Error(o(160));switch(c.tag){case 27:var E=c.stateNode,w=t0(t);mh(t,w,E);break;case 5:var R=c.stateNode;c.flags&32&&(qr(R,""),c.flags&=-33);var k=t0(t);mh(t,k,R);break;case 3:case 4:var K=c.stateNode.containerInfo,fe=t0(t);n0(t,fe,K);break;default:throw Error(o(161))}}catch(Te){xn(t,t.return,Te)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Ip(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Ip(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function da(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)wp(t,i.alternate,i),i=i.sibling}function Wo(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:qa(4,i,i.return),Wo(i);break;case 1:Ls(i,i.return);var c=i.stateNode;typeof c.componentWillUnmount=="function"&&yp(i,i.return,c),Wo(i);break;case 27:jc(i.stateNode);case 26:case 5:Ls(i,i.return),Wo(i);break;case 22:i.memoizedState===null&&Wo(i);break;case 30:Wo(i);break;default:Wo(i)}t=t.sibling}}function ga(t,i,c){for(c=c&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var d=i.alternate,E=t,w=i,R=w.flags;switch(w.tag){case 0:case 11:case 15:ga(E,w,c),Dc(4,w);break;case 1:if(ga(E,w,c),d=w,E=d.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(fe){xn(d,d.return,fe)}if(d=w,E=d.updateQueue,E!==null){var k=d.stateNode;try{var K=E.shared.hiddenCallbacks;if(K!==null)for(E.shared.hiddenCallbacks=null,E=0;E<K.length;E++)sm(K[E],k)}catch(fe){xn(d,d.return,fe)}}c&&R&64&&pp(w),Mc(w,w.return);break;case 27:xp(w);case 26:case 5:ga(E,w,c),c&&d===null&&R&4&&Ep(w),Mc(w,w.return);break;case 12:ga(E,w,c);break;case 31:ga(E,w,c),c&&R&4&&bp(E,w);break;case 13:ga(E,w,c),c&&R&4&&vp(E,w);break;case 22:w.memoizedState===null&&ga(E,w,c),Mc(w,w.return);break;case 30:break;default:ga(E,w,c)}i=i.sibling}}function i0(t,i){var c=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==c&&(t!=null&&t.refCount++,c!=null&&_c(c))}function s0(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&_c(t))}function _s(t,i,c,d){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Rp(t,i,c,d),i=i.sibling}function Rp(t,i,c,d){var E=i.flags;switch(i.tag){case 0:case 11:case 15:_s(t,i,c,d),E&2048&&Dc(9,i);break;case 1:_s(t,i,c,d);break;case 3:_s(t,i,c,d),E&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&_c(t)));break;case 12:if(E&2048){_s(t,i,c,d),t=i.stateNode;try{var w=i.memoizedProps,R=w.id,k=w.onPostCommit;typeof k=="function"&&k(R,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(K){xn(i,i.return,K)}}else _s(t,i,c,d);break;case 31:_s(t,i,c,d);break;case 13:_s(t,i,c,d);break;case 23:break;case 22:w=i.stateNode,R=i.alternate,i.memoizedState!==null?w._visibility&2?_s(t,i,c,d):Lc(t,i):w._visibility&2?_s(t,i,c,d):(w._visibility|=2,Rl(t,i,c,d,(i.subtreeFlags&10256)!==0||!1)),E&2048&&i0(R,i);break;case 24:_s(t,i,c,d),E&2048&&s0(i.alternate,i);break;default:_s(t,i,c,d)}}function Rl(t,i,c,d,E){for(E=E&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var w=t,R=i,k=c,K=d,fe=R.flags;switch(R.tag){case 0:case 11:case 15:Rl(w,R,k,K,E),Dc(8,R);break;case 23:break;case 22:var Te=R.stateNode;R.memoizedState!==null?Te._visibility&2?Rl(w,R,k,K,E):Lc(w,R):(Te._visibility|=2,Rl(w,R,k,K,E)),E&&fe&2048&&i0(R.alternate,R);break;case 24:Rl(w,R,k,K,E),E&&fe&2048&&s0(R.alternate,R);break;default:Rl(w,R,k,K,E)}i=i.sibling}}function Lc(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var c=t,d=i,E=d.flags;switch(d.tag){case 22:Lc(c,d),E&2048&&i0(d.alternate,d);break;case 24:Lc(c,d),E&2048&&s0(d.alternate,d);break;default:Lc(c,d)}i=i.sibling}}var Pc=8192;function Nl(t,i,c){if(t.subtreeFlags&Pc)for(t=t.child;t!==null;)Np(t,i,c),t=t.sibling}function Np(t,i,c){switch(t.tag){case 26:Nl(t,i,c),t.flags&Pc&&t.memoizedState!==null&&kw(c,Es,t.memoizedState,t.memoizedProps);break;case 5:Nl(t,i,c);break;case 3:case 4:var d=Es;Es=Nh(t.stateNode.containerInfo),Nl(t,i,c),Es=d;break;case 22:t.memoizedState===null&&(d=t.alternate,d!==null&&d.memoizedState!==null?(d=Pc,Pc=16777216,Nl(t,i,c),Pc=d):Nl(t,i,c));break;default:Nl(t,i,c)}}function Op(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function kc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var d=i[c];Sr=d,Mp(d,t)}Op(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Dp(t),t=t.sibling}function Dp(t){switch(t.tag){case 0:case 11:case 15:kc(t),t.flags&2048&&qa(9,t,t.return);break;case 3:kc(t);break;case 12:kc(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,yh(t)):kc(t);break;default:kc(t)}}function yh(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var d=i[c];Sr=d,Mp(d,t)}Op(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:qa(8,i,i.return),yh(i);break;case 22:c=i.stateNode,c._visibility&2&&(c._visibility&=-3,yh(i));break;default:yh(i)}t=t.sibling}}function Mp(t,i){for(;Sr!==null;){var c=Sr;switch(c.tag){case 0:case 11:case 15:qa(8,c,i);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:_c(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,Sr=d;else e:for(c=t;Sr!==null;){d=Sr;var E=d.sibling,w=d.return;if(Tp(d),d===c){Sr=null;break e}if(E!==null){E.return=w,Sr=E;break e}Sr=w}}}var ZA={getCacheForType:function(t){var i=kr(hr),c=i.data.get(t);return c===void 0&&(c=t(),i.data.set(t,c)),c},cacheSignal:function(){return kr(hr).controller.signal}},JA=typeof WeakMap=="function"?WeakMap:Map,ln=0,In=null,Bt=null,Ht=0,_n=0,Fi=null,Xa=!1,Ol=!1,a0=!1,ma=0,er=0,Ya=0,Ko=0,o0=0,zi=0,Dl=0,Bc=null,vi=null,l0=!1,Eh=0,Lp=0,_h=1/0,xh=null,Wa=null,Tr=0,Ka=null,Ml=null,pa=0,c0=0,u0=null,Pp=null,Vc=0,h0=null;function ji(){return(ln&2)!==0&&Ht!==0?Ht&-Ht:$.T!==null?y0():Nt()}function kp(){if(zi===0)if((Ht&536870912)===0||Qt){var t=bt;bt<<=1,(bt&3932160)===0&&(bt=262144),zi=t}else zi=536870912;return t=Vi.current,t!==null&&(t.flags|=32),zi}function Si(t,i,c){(t===In&&(_n===2||_n===9)||t.cancelPendingCommit!==null)&&(Ll(t,0),Qa(t,Ht,zi,!1)),yi(t,c),((ln&2)===0||t!==In)&&(t===In&&((ln&2)===0&&(Ko|=c),er===4&&Qa(t,Ht,zi,!1)),Ps(t))}function Bp(t,i,c){if((ln&6)!==0)throw Error(o(327));var d=!c&&(i&127)===0&&(i&t.expiredLanes)===0||On(t,i),E=d?tw(t,i):d0(t,i,!0),w=d;do{if(E===0){Ol&&!d&&Qa(t,i,0,!1);break}else{if(c=t.current.alternate,w&&!$A(c)){E=d0(t,i,!1),w=!1;continue}if(E===2){if(w=i,t.errorRecoveryDisabledLanes&w)var R=0;else R=t.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){i=R;e:{var k=t;E=Bc;var K=k.current.memoizedState.isDehydrated;if(K&&(Ll(k,R).flags|=256),R=d0(k,R,!1),R!==2){if(a0&&!K){k.errorRecoveryDisabledLanes|=w,Ko|=w,E=4;break e}w=vi,vi=E,w!==null&&(vi===null?vi=w:vi.push.apply(vi,w))}E=R}if(w=!1,E!==2)continue}}if(E===1){Ll(t,0),Qa(t,i,0,!0);break}e:{switch(d=t,w=E,w){case 0:case 1:throw Error(o(345));case 4:if((i&4194048)!==i)break;case 6:Qa(d,i,zi,!Xa);break e;case 2:vi=null;break;case 3:case 5:break;default:throw Error(o(329))}if((i&62914560)===i&&(E=Eh+300-cn(),10<E)){if(Qa(d,i,zi,!Xa),si(d,0,!0)!==0)break e;pa=i,d.timeoutHandle=g2(Vp.bind(null,d,c,vi,xh,l0,i,zi,Ko,Dl,Xa,w,"Throttled",-0,0),E);break e}Vp(d,c,vi,xh,l0,i,zi,Ko,Dl,Xa,w,null,-0,0)}}break}while(!0);Ps(t)}function Vp(t,i,c,d,E,w,R,k,K,fe,Te,ve,me,Ae){if(t.timeoutHandle=-1,ve=i.subtreeFlags,ve&8192||(ve&16785408)===16785408){ve={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xr},Np(i,w,ve);var $e=(w&62914560)===w?Eh-cn():(w&4194048)===w?Lp-cn():0;if($e=Bw(ve,$e),$e!==null){pa=w,t.cancelPendingCommit=$e(Xp.bind(null,t,i,w,c,d,E,R,k,K,Te,ve,null,me,Ae)),Qa(t,w,R,!fe);return}}Xp(t,i,w,c,d,E,R,k,K)}function $A(t){for(var i=t;;){var c=i.tag;if((c===0||c===11||c===15)&&i.flags&16384&&(c=i.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var E=c[d],w=E.getSnapshot;E=E.value;try{if(!g(w(),E))return!1}catch{return!1}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Qa(t,i,c,d){i&=~o0,i&=~Ko,t.suspendedLanes|=i,t.pingedLanes&=~i,d&&(t.warmLanes|=i),d=t.expirationTimes;for(var E=i;0<E;){var w=31-ut(E),R=1<<w;d[w]=-1,E&=~R}c!==0&&ce(t,c,i)}function Ah(){return(ln&6)===0?(Uc(0),!1):!0}function f0(){if(Bt!==null){if(_n===0)var t=Bt.return;else t=Bt,sa=Fo=null,Id(t),Cl=null,Ac=0,t=Bt;for(;t!==null;)mp(t.alternate,t),t=t.return;Bt=null}}function Ll(t,i){var c=t.timeoutHandle;c!==-1&&(t.timeoutHandle=-1,_w(c)),c=t.cancelPendingCommit,c!==null&&(t.cancelPendingCommit=null,c()),pa=0,f0(),In=t,Bt=c=ra(t.current,null),Ht=i,_n=0,Fi=null,Xa=!1,Ol=On(t,i),a0=!1,Dl=zi=o0=Ko=Ya=er=0,vi=Bc=null,l0=!1,(i&8)!==0&&(i|=i&32);var d=t.entangledLanes;if(d!==0)for(t=t.entanglements,d&=i;0<d;){var E=31-ut(d),w=1<<E;i|=t[E],d&=~w}return ma=i,ju(),c}function Up(t,i){Ct=null,$.H=Rc,i===Tl||i===Qu?(i=tm(),_n=3):i===pd?(i=tm(),_n=4):_n=i===Gd?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Fi=i,Bt===null&&(er=1,uh(t,ts(i,t.current)))}function Fp(){var t=Vi.current;return t===null?!0:(Ht&4194048)===Ht?ss===null:(Ht&62914560)===Ht||(Ht&536870912)!==0?t===ss:!1}function zp(){var t=$.H;return $.H=Rc,t===null?Rc:t}function jp(){var t=$.A;return $.A=ZA,t}function wh(){er=4,Xa||(Ht&4194048)!==Ht&&Vi.current!==null||(Ol=!0),(Ya&134217727)===0&&(Ko&134217727)===0||In===null||Qa(In,Ht,zi,!1)}function d0(t,i,c){var d=ln;ln|=2;var E=zp(),w=jp();(In!==t||Ht!==i)&&(xh=null,Ll(t,i)),i=!1;var R=er;e:do try{if(_n!==0&&Bt!==null){var k=Bt,K=Fi;switch(_n){case 8:f0(),R=6;break e;case 3:case 2:case 9:case 6:Vi.current===null&&(i=!0);var fe=_n;if(_n=0,Fi=null,Pl(t,k,K,fe),c&&Ol){R=0;break e}break;default:fe=_n,_n=0,Fi=null,Pl(t,k,K,fe)}}ew(),R=er;break}catch(Te){Up(t,Te)}while(!0);return i&&t.shellSuspendCounter++,sa=Fo=null,ln=d,$.H=E,$.A=w,Bt===null&&(In=null,Ht=0,ju()),R}function ew(){for(;Bt!==null;)Hp(Bt)}function tw(t,i){var c=ln;ln|=2;var d=zp(),E=jp();In!==t||Ht!==i?(xh=null,_h=cn()+500,Ll(t,i)):Ol=On(t,i);e:do try{if(_n!==0&&Bt!==null){i=Bt;var w=Fi;t:switch(_n){case 1:_n=0,Fi=null,Pl(t,i,w,1);break;case 2:case 9:if($g(w)){_n=0,Fi=null,Gp(i);break}i=function(){_n!==2&&_n!==9||In!==t||(_n=7),Ps(t)},w.then(i,i);break e;case 3:_n=7;break e;case 4:_n=5;break e;case 7:$g(w)?(_n=0,Fi=null,Gp(i)):(_n=0,Fi=null,Pl(t,i,w,7));break;case 5:var R=null;switch(Bt.tag){case 26:R=Bt.memoizedState;case 5:case 27:var k=Bt;if(R?R2(R):k.stateNode.complete){_n=0,Fi=null;var K=k.sibling;if(K!==null)Bt=K;else{var fe=k.return;fe!==null?(Bt=fe,Th(fe)):Bt=null}break t}}_n=0,Fi=null,Pl(t,i,w,5);break;case 6:_n=0,Fi=null,Pl(t,i,w,6);break;case 8:f0(),er=6;break e;default:throw Error(o(462))}}nw();break}catch(Te){Up(t,Te)}while(!0);return sa=Fo=null,$.H=d,$.A=E,ln=c,Bt!==null?0:(In=null,Ht=0,ju(),er)}function nw(){for(;Bt!==null&&!Ni();)Hp(Bt)}function Hp(t){var i=dp(t.alternate,t,ma);t.memoizedProps=t.pendingProps,i===null?Th(t):Bt=i}function Gp(t){var i=t,c=i.alternate;switch(i.tag){case 15:case 0:i=op(c,i,i.pendingProps,i.type,void 0,Ht);break;case 11:i=op(c,i,i.pendingProps,i.type.render,i.ref,Ht);break;case 5:Id(i);default:mp(c,i),i=Bt=jg(i,ma),i=dp(c,i,ma)}t.memoizedProps=t.pendingProps,i===null?Th(t):Bt=i}function Pl(t,i,c,d){sa=Fo=null,Id(i),Cl=null,Ac=0;var E=i.return;try{if(GA(t,E,i,c,Ht)){er=1,uh(t,ts(c,t.current)),Bt=null;return}}catch(w){if(E!==null)throw Bt=E,w;er=1,uh(t,ts(c,t.current)),Bt=null;return}i.flags&32768?(Qt||d===1?t=!0:Ol||(Ht&536870912)!==0?t=!1:(Xa=t=!0,(d===2||d===9||d===3||d===6)&&(d=Vi.current,d!==null&&d.tag===13&&(d.flags|=16384))),qp(i,t)):Th(i)}function Th(t){var i=t;do{if((i.flags&32768)!==0){qp(i,Xa);return}t=i.return;var c=YA(i.alternate,i,ma);if(c!==null){Bt=c;return}if(i=i.sibling,i!==null){Bt=i;return}Bt=i=t}while(i!==null);er===0&&(er=5)}function qp(t,i){do{var c=WA(t.alternate,t);if(c!==null){c.flags&=32767,Bt=c;return}if(c=t.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!i&&(t=t.sibling,t!==null)){Bt=t;return}Bt=t=c}while(t!==null);er=6,Bt=null}function Xp(t,i,c,d,E,w,R,k,K){t.cancelPendingCommit=null;do Ch();while(Tr!==0);if((ln&6)!==0)throw Error(o(327));if(i!==null){if(i===t.current)throw Error(o(177));if(w=i.lanes|i.childLanes,w|=td,jr(t,c,w,R,k,K),t===In&&(Bt=In=null,Ht=0),Ml=i,Ka=t,pa=c,c0=w,u0=E,Pp=d,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,aw(ir,function(){return Zp(),null})):(t.callbackNode=null,t.callbackPriority=0),d=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||d){d=$.T,$.T=null,E=le.p,le.p=2,R=ln,ln|=4;try{KA(t,i,c)}finally{ln=R,le.p=E,$.T=d}}Tr=1,Yp(),Wp(),Kp()}}function Yp(){if(Tr===1){Tr=0;var t=Ka,i=Ml,c=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||c){c=$.T,$.T=null;var d=le.p;le.p=2;var E=ln;ln|=4;try{Sp(i,t);var w=b0,R=M(t.containerInfo),k=w.focusedElem,K=w.selectionRange;if(R!==k&&k&&k.ownerDocument&&I(k.ownerDocument.documentElement,k)){if(K!==null&&L(k)){var fe=K.start,Te=K.end;if(Te===void 0&&(Te=fe),"selectionStart"in k)k.selectionStart=fe,k.selectionEnd=Math.min(Te,k.value.length);else{var ve=k.ownerDocument||document,me=ve&&ve.defaultView||window;if(me.getSelection){var Ae=me.getSelection(),$e=k.textContent.length,ft=Math.min(K.start,$e),Cn=K.end===void 0?ft:Math.min(K.end,$e);!Ae.extend&&ft>Cn&&(R=Cn,Cn=ft,ft=R);var re=C(k,ft),te=C(k,Cn);if(re&&te&&(Ae.rangeCount!==1||Ae.anchorNode!==re.node||Ae.anchorOffset!==re.offset||Ae.focusNode!==te.node||Ae.focusOffset!==te.offset)){var he=ve.createRange();he.setStart(re.node,re.offset),Ae.removeAllRanges(),ft>Cn?(Ae.addRange(he),Ae.extend(te.node,te.offset)):(he.setEnd(te.node,te.offset),Ae.addRange(he))}}}}for(ve=[],Ae=k;Ae=Ae.parentNode;)Ae.nodeType===1&&ve.push({element:Ae,left:Ae.scrollLeft,top:Ae.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<ve.length;k++){var Ce=ve[k];Ce.element.scrollLeft=Ce.left,Ce.element.scrollTop=Ce.top}}kh=!!C0,b0=C0=null}finally{ln=E,le.p=d,$.T=c}}t.current=i,Tr=2}}function Wp(){if(Tr===2){Tr=0;var t=Ka,i=Ml,c=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||c){c=$.T,$.T=null;var d=le.p;le.p=2;var E=ln;ln|=4;try{wp(t,i.alternate,i)}finally{ln=E,le.p=d,$.T=c}}Tr=3}}function Kp(){if(Tr===4||Tr===3){Tr=0,fs();var t=Ka,i=Ml,c=pa,d=Pp;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Tr=5:(Tr=0,Ml=Ka=null,Qp(t,t.pendingLanes));var E=t.pendingLanes;if(E===0&&(Wa=null),Tt(c),i=i.stateNode,De&&typeof De.onCommitFiberRoot=="function")try{De.onCommitFiberRoot(Ft,i,void 0,(i.current.flags&128)===128)}catch{}if(d!==null){i=$.T,E=le.p,le.p=2,$.T=null;try{for(var w=t.onRecoverableError,R=0;R<d.length;R++){var k=d[R];w(k.value,{componentStack:k.stack})}}finally{$.T=i,le.p=E}}(pa&3)!==0&&Ch(),Ps(t),E=t.pendingLanes,(c&261930)!==0&&(E&42)!==0?t===h0?Vc++:(Vc=0,h0=t):Vc=0,Uc(0)}}function Qp(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,_c(i)))}function Ch(){return Yp(),Wp(),Kp(),Zp()}function Zp(){if(Tr!==5)return!1;var t=Ka,i=c0;c0=0;var c=Tt(pa),d=$.T,E=le.p;try{le.p=32>c?32:c,$.T=null,c=u0,u0=null;var w=Ka,R=pa;if(Tr=0,Ml=Ka=null,pa=0,(ln&6)!==0)throw Error(o(331));var k=ln;if(ln|=4,Dp(w.current),Rp(w,w.current,R,c),ln=k,Uc(0,!1),De&&typeof De.onPostCommitFiberRoot=="function")try{De.onPostCommitFiberRoot(Ft,w)}catch{}return!0}finally{le.p=E,$.T=d,Qp(t,i)}}function Jp(t,i,c){i=ts(c,i),i=Hd(t.stateNode,i,2),t=ja(t,i,2),t!==null&&(yi(t,2),Ps(t))}function xn(t,i,c){if(t.tag===3)Jp(t,t,c);else for(;i!==null;){if(i.tag===3){Jp(i,t,c);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Wa===null||!Wa.has(d))){t=ts(c,t),c=$m(2),d=ja(i,c,2),d!==null&&(ep(c,d,i,t),yi(d,2),Ps(d));break}}i=i.return}}function g0(t,i,c){var d=t.pingCache;if(d===null){d=t.pingCache=new JA;var E=new Set;d.set(i,E)}else E=d.get(i),E===void 0&&(E=new Set,d.set(i,E));E.has(c)||(a0=!0,E.add(c),t=rw.bind(null,t,i,c),i.then(t,t))}function rw(t,i,c){var d=t.pingCache;d!==null&&d.delete(i),t.pingedLanes|=t.suspendedLanes&c,t.warmLanes&=~c,In===t&&(Ht&c)===c&&(er===4||er===3&&(Ht&62914560)===Ht&&300>cn()-Eh?(ln&2)===0&&Ll(t,0):o0|=c,Dl===Ht&&(Dl=0)),Ps(t)}function $p(t,i){i===0&&(i=Xn()),t=Bo(t,i),t!==null&&(yi(t,i),Ps(t))}function iw(t){var i=t.memoizedState,c=0;i!==null&&(c=i.retryLane),$p(t,c)}function sw(t,i){var c=0;switch(t.tag){case 31:case 13:var d=t.stateNode,E=t.memoizedState;E!==null&&(c=E.retryLane);break;case 19:d=t.stateNode;break;case 22:d=t.stateNode._retryCache;break;default:throw Error(o(314))}d!==null&&d.delete(i),$p(t,c)}function aw(t,i){return yn(t,i)}var bh=null,kl=null,m0=!1,vh=!1,p0=!1,Za=0;function Ps(t){t!==kl&&t.next===null&&(kl===null?bh=kl=t:kl=kl.next=t),vh=!0,m0||(m0=!0,lw())}function Uc(t,i){if(!p0&&vh){p0=!0;do for(var c=!1,d=bh;d!==null;){if(t!==0){var E=d.pendingLanes;if(E===0)var w=0;else{var R=d.suspendedLanes,k=d.pingedLanes;w=(1<<31-ut(42|t)+1)-1,w&=E&~(R&~k),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(c=!0,r2(d,w))}else w=Ht,w=si(d,d===In?w:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(w&3)===0||On(d,w)||(c=!0,r2(d,w));d=d.next}while(c);p0=!1}}function ow(){e2()}function e2(){vh=m0=!1;var t=0;Za!==0&&Ew()&&(t=Za);for(var i=cn(),c=null,d=bh;d!==null;){var E=d.next,w=t2(d,i);w===0?(d.next=null,c===null?bh=E:c.next=E,E===null&&(kl=c)):(c=d,(t!==0||(w&3)!==0)&&(vh=!0)),d=E}Tr!==0&&Tr!==5||Uc(t),Za!==0&&(Za=0)}function t2(t,i){for(var c=t.suspendedLanes,d=t.pingedLanes,E=t.expirationTimes,w=t.pendingLanes&-62914561;0<w;){var R=31-ut(w),k=1<<R,K=E[R];K===-1?((k&c)===0||(k&d)!==0)&&(E[R]=qs(k,i)):K<=i&&(t.expiredLanes|=k),w&=~k}if(i=In,c=Ht,c=si(t,t===i?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),d=t.callbackNode,c===0||t===i&&(_n===2||_n===9)||t.cancelPendingCommit!==null)return d!==null&&d!==null&&je(d),t.callbackNode=null,t.callbackPriority=0;if((c&3)===0||On(t,c)){if(i=c&-c,i===t.callbackPriority)return i;switch(d!==null&&je(d),Tt(c)){case 2:case 8:c=qi;break;case 32:c=ir;break;case 268435456:c=ti;break;default:c=ir}return d=n2.bind(null,t),c=yn(c,d),t.callbackPriority=i,t.callbackNode=c,i}return d!==null&&d!==null&&je(d),t.callbackPriority=2,t.callbackNode=null,2}function n2(t,i){if(Tr!==0&&Tr!==5)return t.callbackNode=null,t.callbackPriority=0,null;var c=t.callbackNode;if(Ch()&&t.callbackNode!==c)return null;var d=Ht;return d=si(t,t===In?d:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),d===0?null:(Bp(t,d,i),t2(t,cn()),t.callbackNode!=null&&t.callbackNode===c?n2.bind(null,t):null)}function r2(t,i){if(Ch())return null;Bp(t,i,!0)}function lw(){xw(function(){(ln&6)!==0?yn(qn,ow):e2()})}function y0(){if(Za===0){var t=Al;t===0&&(t=ri,ri<<=1,(ri&261888)===0&&(ri=256)),Za=t}return Za}function i2(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Is(""+t)}function s2(t,i){var c=i.ownerDocument.createElement("input");return c.name=i.name,c.value=i.value,t.id&&c.setAttribute("form",t.id),i.parentNode.insertBefore(c,i),t=new FormData(t),c.parentNode.removeChild(c),t}function cw(t,i,c,d,E){if(i==="submit"&&c&&c.stateNode===E){var w=i2((E[Ot]||null).action),R=d.submitter;R&&(i=(i=R[Ot]||null)?i2(i.formAction):R.getAttribute("formAction"),i!==null&&(w=i,R=null));var k=new Dn("action","action",null,d,E);t.push({event:k,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Za!==0){var K=R?s2(E,R):new FormData(E);Bd(c,{pending:!0,data:K,method:E.method,action:w},null,K)}}else typeof w=="function"&&(k.preventDefault(),K=R?s2(E,R):new FormData(E),Bd(c,{pending:!0,data:K,method:E.method,action:w},w,K))},currentTarget:E}]})}}for(var E0=0;E0<pc.length;E0++){var _0=pc[E0],uw=_0.toLowerCase(),hw=_0[0].toUpperCase()+_0.slice(1);ys(uw,"on"+hw)}ys(wi,"onAnimationEnd"),ys(Lr,"onAnimationIteration"),ys(dn,"onAnimationStart"),ys("dblclick","onDoubleClick"),ys("focusin","onFocus"),ys("focusout","onBlur"),ys(wr,"onTransitionRun"),ys(hi,"onTransitionStart"),ys(Pa,"onTransitionCancel"),ys(na,"onTransitionEnd"),Or("onMouseEnter",["mouseout","mouseover"]),Or("onMouseLeave",["mouseout","mouseover"]),Or("onPointerEnter",["pointerout","pointerover"]),Or("onPointerLeave",["pointerout","pointerover"]),nn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),nn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),nn("onBeforeInput",["compositionend","keypress","textInput","paste"]),nn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),nn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),nn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fc));function a2(t,i){i=(i&4)!==0;for(var c=0;c<t.length;c++){var d=t[c],E=d.event;d=d.listeners;e:{var w=void 0;if(i)for(var R=d.length-1;0<=R;R--){var k=d[R],K=k.instance,fe=k.currentTarget;if(k=k.listener,K!==w&&E.isPropagationStopped())break e;w=k,E.currentTarget=fe;try{w(E)}catch(Te){zu(Te)}E.currentTarget=null,w=K}else for(R=0;R<d.length;R++){if(k=d[R],K=k.instance,fe=k.currentTarget,k=k.listener,K!==w&&E.isPropagationStopped())break e;w=k,E.currentTarget=fe;try{w(E)}catch(Te){zu(Te)}E.currentTarget=null,w=K}}}}function Vt(t,i){var c=i[ds];c===void 0&&(c=i[ds]=new Set);var d=t+"__bubble";c.has(d)||(o2(i,t,2,!1),c.add(d))}function x0(t,i,c){var d=0;i&&(d|=4),o2(c,t,d,i)}var Sh="_reactListening"+Math.random().toString(36).slice(2);function A0(t){if(!t[Sh]){t[Sh]=!0,Se.forEach(function(c){c!=="selectionchange"&&(fw.has(c)||x0(c,!1,t),x0(c,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Sh]||(i[Sh]=!0,x0("selectionchange",!1,i))}}function o2(t,i,c,d){switch(k2(i)){case 2:var E=Fw;break;case 8:E=zw;break;default:E=k0}c=E.bind(null,i,c,t),E=void 0,!Ys||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(E=!0),d?E!==void 0?t.addEventListener(i,c,{capture:!0,passive:E}):t.addEventListener(i,c,!0):E!==void 0?t.addEventListener(i,c,{passive:E}):t.addEventListener(i,c,!1)}function w0(t,i,c,d,E){var w=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var R=d.tag;if(R===3||R===4){var k=d.stateNode.containerInfo;if(k===E)break;if(R===4)for(R=d.return;R!==null;){var K=R.tag;if((K===3||K===4)&&R.stateNode.containerInfo===E)return;R=R.return}for(;k!==null;){if(R=Rn(k),R===null)return;if(K=R.tag,K===5||K===6||K===26||K===27){d=w=R;continue e}k=k.parentNode}}d=d.return}Rs(function(){var fe=w,Te=_i(c),ve=[];e:{var me=Fu.get(t);if(me!==void 0){var Ae=Dn,$e=t;switch(t){case"keypress":if(Mi(c)===0)break e;case"keydown":case"keyup":Ae=Js;break;case"focusin":$e="focus",Ae=Qs;break;case"focusout":$e="blur",Ae=Qs;break;case"beforeblur":case"afterblur":Ae=Qs;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ae=$t;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ae=Ks;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ae=v;break;case wi:case Lr:case dn:Ae=xt;break;case na:Ae=V;break;case"scroll":case"scrollend":Ae=Na;break;case"wheel":Ae=xe;break;case"copy":case"cut":case"paste":Ae=Zs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ae=kt;break;case"toggle":case"beforetoggle":Ae=pt}var ft=(i&4)!==0,Cn=!ft&&(t==="scroll"||t==="scrollend"),re=ft?me!==null?me+"Capture":null:me;ft=[];for(var te=fe,he;te!==null;){var Ce=te;if(he=Ce.stateNode,Ce=Ce.tag,Ce!==5&&Ce!==26&&Ce!==27||he===null||re===null||(Ce=ct(te,re),Ce!=null&&ft.push(zc(te,Ce,he))),Cn)break;te=te.return}0<ft.length&&(me=new Ae(me,$e,null,c,Te),ve.push({event:me,listeners:ft}))}}if((i&7)===0){e:{if(me=t==="mouseover"||t==="pointerover",Ae=t==="mouseout"||t==="pointerout",me&&c!==Xs&&($e=c.relatedTarget||c.fromElement)&&(Rn($e)||$e[Yn]))break e;if((Ae||me)&&(me=Te.window===Te?Te:(me=Te.ownerDocument)?me.defaultView||me.parentWindow:window,Ae?($e=c.relatedTarget||c.toElement,Ae=fe,$e=$e?Rn($e):null,$e!==null&&(Cn=m($e),ft=$e.tag,$e!==Cn||ft!==5&&ft!==27&&ft!==6)&&($e=null)):(Ae=null,$e=fe),Ae!==$e)){if(ft=$t,Ce="onMouseLeave",re="onMouseEnter",te="mouse",(t==="pointerout"||t==="pointerover")&&(ft=kt,Ce="onPointerLeave",re="onPointerEnter",te="pointer"),Cn=Ae==null?me:Hr(Ae),he=$e==null?me:Hr($e),me=new ft(Ce,te+"leave",Ae,c,Te),me.target=Cn,me.relatedTarget=he,Ce=null,Rn(Te)===fe&&(ft=new ft(re,te+"enter",$e,c,Te),ft.target=he,ft.relatedTarget=Cn,Ce=ft),Cn=Ce,Ae&&$e)t:{for(ft=dw,re=Ae,te=$e,he=0,Ce=re;Ce;Ce=ft(Ce))he++;Ce=0;for(var at=te;at;at=ft(at))Ce++;for(;0<he-Ce;)re=ft(re),he--;for(;0<Ce-he;)te=ft(te),Ce--;for(;he--;){if(re===te||te!==null&&re===te.alternate){ft=re;break t}re=ft(re),te=ft(te)}ft=null}else ft=null;Ae!==null&&l2(ve,me,Ae,ft,!1),$e!==null&&Cn!==null&&l2(ve,Cn,$e,ft,!0)}}e:{if(me=fe?Hr(fe):window,Ae=me.nodeName&&me.nodeName.toLowerCase(),Ae==="select"||Ae==="input"&&me.type==="file")var an=ki;else if(mc(me))if(Uu)an=u;else{an=s;var tt=r}else Ae=me.nodeName,!Ae||Ae.toLowerCase()!=="input"||me.type!=="checkbox"&&me.type!=="radio"?fe&&hn(fe.elementType)&&(an=ki):an=l;if(an&&(an=an(t,fe))){Pi(ve,an,c,Te);break e}tt&&tt(t,me,fe),t==="focusout"&&fe&&me.type==="number"&&fe.memoizedProps.value!=null&&z(me,"number",me.value)}switch(tt=fe?Hr(fe):window,t){case"focusin":(mc(tt)||tt.contentEditable==="true")&&(J=tt,ee=fe,ae=null);break;case"focusout":ae=ee=J=null;break;case"mousedown":_e=!0;break;case"contextmenu":case"mouseup":case"dragend":_e=!1,Pe(ve,c,Te);break;case"selectionchange":if(H)break;case"keydown":case"keyup":Pe(ve,c,Te)}var St;if(Kt)e:{switch(t){case"compositionstart":var Gt="onCompositionStart";break e;case"compositionend":Gt="onCompositionEnd";break e;case"compositionupdate":Gt="onCompositionUpdate";break e}Gt=void 0}else La?$s(t,c)&&(Gt="onCompositionEnd"):t==="keydown"&&c.keyCode===229&&(Gt="onCompositionStart");Gt&&(Ji&&c.locale!=="ko"&&(La||Gt!=="onCompositionStart"?Gt==="onCompositionEnd"&&La&&(St=gs()):(Oi=Te,Di="value"in Oi?Oi.value:Oi.textContent,La=!0)),tt=Ih(fe,Gt),0<tt.length&&(Gt=new Ki(Gt,t,null,c,Te),ve.push({event:Gt,listeners:tt}),St?Gt.data=St:(St=$i(c),St!==null&&(Gt.data=St)))),(St=ci?Os(t,c):gl(t,c))&&(Gt=Ih(fe,"onBeforeInput"),0<Gt.length&&(tt=new Ki("onBeforeInput","beforeinput",null,c,Te),ve.push({event:tt,listeners:Gt}),tt.data=St)),cw(ve,t,fe,c,Te)}a2(ve,i)})}function zc(t,i,c){return{instance:t,listener:i,currentTarget:c}}function Ih(t,i){for(var c=i+"Capture",d=[];t!==null;){var E=t,w=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||w===null||(E=ct(t,c),E!=null&&d.unshift(zc(t,E,w)),E=ct(t,i),E!=null&&d.push(zc(t,E,w))),t.tag===3)return d;t=t.return}return[]}function dw(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function l2(t,i,c,d,E){for(var w=i._reactName,R=[];c!==null&&c!==d;){var k=c,K=k.alternate,fe=k.stateNode;if(k=k.tag,K!==null&&K===d)break;k!==5&&k!==26&&k!==27||fe===null||(K=fe,E?(fe=ct(c,w),fe!=null&&R.unshift(zc(c,fe,K))):E||(fe=ct(c,w),fe!=null&&R.push(zc(c,fe,K)))),c=c.return}R.length!==0&&t.push({event:i,listeners:R})}var gw=/\r\n?/g,mw=/\u0000|\uFFFD/g;function c2(t){return(typeof t=="string"?t:""+t).replace(gw,`
`).replace(mw,"")}function u2(t,i){return i=c2(i),c2(t)===i}function Tn(t,i,c,d,E,w){switch(c){case"children":typeof d=="string"?i==="body"||i==="textarea"&&d===""||qr(t,d):(typeof d=="number"||typeof d=="bigint")&&i!=="body"&&qr(t,""+d);break;case"className":Dr(t,"class",d);break;case"tabIndex":Dr(t,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Dr(t,c,d);break;case"style":it(t,d,w);break;case"data":if(i!=="object"){Dr(t,"data",d);break}case"src":case"href":if(d===""&&(i!=="a"||c!=="href")){t.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){t.removeAttribute(c);break}d=Is(""+d),t.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){t.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(c==="formAction"?(i!=="input"&&Tn(t,i,"name",E.name,E,null),Tn(t,i,"formEncType",E.formEncType,E,null),Tn(t,i,"formMethod",E.formMethod,E,null),Tn(t,i,"formTarget",E.formTarget,E,null)):(Tn(t,i,"encType",E.encType,E,null),Tn(t,i,"method",E.method,E,null),Tn(t,i,"target",E.target,E,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){t.removeAttribute(c);break}d=Is(""+d),t.setAttribute(c,d);break;case"onClick":d!=null&&(t.onclick=Xr);break;case"onScroll":d!=null&&Vt("scroll",t);break;case"onScrollEnd":d!=null&&Vt("scrollend",t);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(o(61));if(c=d.__html,c!=null){if(E.children!=null)throw Error(o(60));t.innerHTML=c}}break;case"multiple":t.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":t.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){t.removeAttribute("xlink:href");break}c=Is(""+d),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?t.setAttribute(c,""+d):t.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?t.setAttribute(c,""):t.removeAttribute(c);break;case"capture":case"download":d===!0?t.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?t.setAttribute(c,d):t.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?t.setAttribute(c,d):t.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?t.removeAttribute(c):t.setAttribute(c,d);break;case"popover":Vt("beforetoggle",t),Vt("toggle",t),vs(t,"popover",d);break;case"xlinkActuate":Fn(t,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Fn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Fn(t,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Fn(t,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Fn(t,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Fn(t,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Fn(t,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Fn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Fn(t,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":vs(t,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Oo.get(c)||c,vs(t,c,d))}}function T0(t,i,c,d,E,w){switch(c){case"style":it(t,d,w);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(o(61));if(c=d.__html,c!=null){if(E.children!=null)throw Error(o(60));t.innerHTML=c}}break;case"children":typeof d=="string"?qr(t,d):(typeof d=="number"||typeof d=="bigint")&&qr(t,""+d);break;case"onScroll":d!=null&&Vt("scroll",t);break;case"onScrollEnd":d!=null&&Vt("scrollend",t);break;case"onClick":d!=null&&(t.onclick=Xr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Io.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(E=c.endsWith("Capture"),i=c.slice(2,E?c.length-7:void 0),w=t[Ot]||null,w=w!=null?w[c]:null,typeof w=="function"&&t.removeEventListener(i,w,E),typeof d=="function")){typeof w!="function"&&w!==null&&(c in t?t[c]=null:t.hasAttribute(c)&&t.removeAttribute(c)),t.addEventListener(i,d,E);break e}c in t?t[c]=d:d===!0?t.setAttribute(c,""):vs(t,c,d)}}}function Vr(t,i,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vt("error",t),Vt("load",t);var d=!1,E=!1,w;for(w in c)if(c.hasOwnProperty(w)){var R=c[w];if(R!=null)switch(w){case"src":d=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,i));default:Tn(t,i,w,R,c,null)}}E&&Tn(t,i,"srcSet",c.srcSet,c,null),d&&Tn(t,i,"src",c.src,c,null);return;case"input":Vt("invalid",t);var k=w=R=E=null,K=null,fe=null;for(d in c)if(c.hasOwnProperty(d)){var Te=c[d];if(Te!=null)switch(d){case"name":E=Te;break;case"type":R=Te;break;case"checked":K=Te;break;case"defaultChecked":fe=Te;break;case"value":w=Te;break;case"defaultValue":k=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(o(137,i));break;default:Tn(t,i,d,Te,c,null)}}ue(t,w,k,K,fe,R,E,!1);return;case"select":Vt("invalid",t),d=R=w=null;for(E in c)if(c.hasOwnProperty(E)&&(k=c[E],k!=null))switch(E){case"value":w=k;break;case"defaultValue":R=k;break;case"multiple":d=k;default:Tn(t,i,E,k,c,null)}i=w,c=R,t.multiple=!!d,i!=null?Je(t,!!d,i,!1):c!=null&&Je(t,!!d,c,!0);return;case"textarea":Vt("invalid",t),w=E=d=null;for(R in c)if(c.hasOwnProperty(R)&&(k=c[R],k!=null))switch(R){case"value":d=k;break;case"defaultValue":E=k;break;case"children":w=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(o(91));break;default:Tn(t,i,R,k,c,null)}sr(t,d,E,w);return;case"option":for(K in c)if(c.hasOwnProperty(K)&&(d=c[K],d!=null))switch(K){case"selected":t.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Tn(t,i,K,d,c,null)}return;case"dialog":Vt("beforetoggle",t),Vt("toggle",t),Vt("cancel",t),Vt("close",t);break;case"iframe":case"object":Vt("load",t);break;case"video":case"audio":for(d=0;d<Fc.length;d++)Vt(Fc[d],t);break;case"image":Vt("error",t),Vt("load",t);break;case"details":Vt("toggle",t);break;case"embed":case"source":case"link":Vt("error",t),Vt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(fe in c)if(c.hasOwnProperty(fe)&&(d=c[fe],d!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,i));default:Tn(t,i,fe,d,c,null)}return;default:if(hn(i)){for(Te in c)c.hasOwnProperty(Te)&&(d=c[Te],d!==void 0&&T0(t,i,Te,d,c,void 0));return}}for(k in c)c.hasOwnProperty(k)&&(d=c[k],d!=null&&Tn(t,i,k,d,c,null))}function pw(t,i,c,d){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,w=null,R=null,k=null,K=null,fe=null,Te=null;for(Ae in c){var ve=c[Ae];if(c.hasOwnProperty(Ae)&&ve!=null)switch(Ae){case"checked":break;case"value":break;case"defaultValue":K=ve;default:d.hasOwnProperty(Ae)||Tn(t,i,Ae,null,d,ve)}}for(var me in d){var Ae=d[me];if(ve=c[me],d.hasOwnProperty(me)&&(Ae!=null||ve!=null))switch(me){case"type":w=Ae;break;case"name":E=Ae;break;case"checked":fe=Ae;break;case"defaultChecked":Te=Ae;break;case"value":R=Ae;break;case"defaultValue":k=Ae;break;case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(o(137,i));break;default:Ae!==ve&&Tn(t,i,me,Ae,d,ve)}}Wn(t,R,k,K,fe,Te,w,E);return;case"select":Ae=R=k=me=null;for(w in c)if(K=c[w],c.hasOwnProperty(w)&&K!=null)switch(w){case"value":break;case"multiple":Ae=K;default:d.hasOwnProperty(w)||Tn(t,i,w,null,d,K)}for(E in d)if(w=d[E],K=c[E],d.hasOwnProperty(E)&&(w!=null||K!=null))switch(E){case"value":me=w;break;case"defaultValue":k=w;break;case"multiple":R=w;default:w!==K&&Tn(t,i,E,w,d,K)}i=k,c=R,d=Ae,me!=null?Je(t,!!c,me,!1):!!d!=!!c&&(i!=null?Je(t,!!c,i,!0):Je(t,!!c,c?[]:"",!1));return;case"textarea":Ae=me=null;for(k in c)if(E=c[k],c.hasOwnProperty(k)&&E!=null&&!d.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:Tn(t,i,k,null,d,E)}for(R in d)if(E=d[R],w=c[R],d.hasOwnProperty(R)&&(E!=null||w!=null))switch(R){case"value":me=E;break;case"defaultValue":Ae=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(o(91));break;default:E!==w&&Tn(t,i,R,E,d,w)}Kn(t,me,Ae);return;case"option":for(var $e in c)if(me=c[$e],c.hasOwnProperty($e)&&me!=null&&!d.hasOwnProperty($e))switch($e){case"selected":t.selected=!1;break;default:Tn(t,i,$e,null,d,me)}for(K in d)if(me=d[K],Ae=c[K],d.hasOwnProperty(K)&&me!==Ae&&(me!=null||Ae!=null))switch(K){case"selected":t.selected=me&&typeof me!="function"&&typeof me!="symbol";break;default:Tn(t,i,K,me,d,Ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ft in c)me=c[ft],c.hasOwnProperty(ft)&&me!=null&&!d.hasOwnProperty(ft)&&Tn(t,i,ft,null,d,me);for(fe in d)if(me=d[fe],Ae=c[fe],d.hasOwnProperty(fe)&&me!==Ae&&(me!=null||Ae!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(o(137,i));break;default:Tn(t,i,fe,me,d,Ae)}return;default:if(hn(i)){for(var Cn in c)me=c[Cn],c.hasOwnProperty(Cn)&&me!==void 0&&!d.hasOwnProperty(Cn)&&T0(t,i,Cn,void 0,d,me);for(Te in d)me=d[Te],Ae=c[Te],!d.hasOwnProperty(Te)||me===Ae||me===void 0&&Ae===void 0||T0(t,i,Te,me,d,Ae);return}}for(var re in c)me=c[re],c.hasOwnProperty(re)&&me!=null&&!d.hasOwnProperty(re)&&Tn(t,i,re,null,d,me);for(ve in d)me=d[ve],Ae=c[ve],!d.hasOwnProperty(ve)||me===Ae||me==null&&Ae==null||Tn(t,i,ve,me,d,Ae)}function h2(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function yw(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var E=c[d],w=E.transferSize,R=E.initiatorType,k=E.duration;if(w&&k&&h2(R)){for(R=0,k=E.responseEnd,d+=1;d<c.length;d++){var K=c[d],fe=K.startTime;if(fe>k)break;var Te=K.transferSize,ve=K.initiatorType;Te&&h2(ve)&&(K=K.responseEnd,R+=Te*(K<k?1:(k-fe)/(K-fe)))}if(--d,i+=8*(w+R)/(E.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var C0=null,b0=null;function Rh(t){return t.nodeType===9?t:t.ownerDocument}function f2(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function d2(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function v0(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var S0=null;function Ew(){var t=window.event;return t&&t.type==="popstate"?t===S0?!1:(S0=t,!0):(S0=null,!1)}var g2=typeof setTimeout=="function"?setTimeout:void 0,_w=typeof clearTimeout=="function"?clearTimeout:void 0,m2=typeof Promise=="function"?Promise:void 0,xw=typeof queueMicrotask=="function"?queueMicrotask:typeof m2<"u"?function(t){return m2.resolve(null).then(t).catch(Aw)}:g2;function Aw(t){setTimeout(function(){throw t})}function Ja(t){return t==="head"}function p2(t,i){var c=i,d=0;do{var E=c.nextSibling;if(t.removeChild(c),E&&E.nodeType===8)if(c=E.data,c==="/$"||c==="/&"){if(d===0){t.removeChild(E),Fl(i);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")jc(t.ownerDocument.documentElement);else if(c==="head"){c=t.ownerDocument.head,jc(c);for(var w=c.firstChild;w;){var R=w.nextSibling,k=w.nodeName;w[Xi]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&w.rel.toLowerCase()==="stylesheet"||c.removeChild(w),w=R}}else c==="body"&&jc(t.ownerDocument.body);c=E}while(c);Fl(i)}function y2(t,i){var c=t;t=0;do{var d=c.nextSibling;if(c.nodeType===1?i?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(i?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(t===0)break;t--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||t++;c=d}while(c)}function I0(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var c=i;switch(i=i.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":I0(c),Nr(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}t.removeChild(c)}}function ww(t,i,c,d){for(;t.nodeType===1;){var E=c;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!d&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(d){if(!t[Xi])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(w=t.getAttribute("rel"),w==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(w!==E.rel||t.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||t.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||t.getAttribute("title")!==(E.title==null?null:E.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(w=t.getAttribute("src"),(w!==(E.src==null?null:E.src)||t.getAttribute("type")!==(E.type==null?null:E.type)||t.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&w&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var w=E.name==null?null:""+E.name;if(E.type==="hidden"&&t.getAttribute("name")===w)return t}else return t;if(t=as(t.nextSibling),t===null)break}return null}function Tw(t,i,c){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!c||(t=as(t.nextSibling),t===null))return null;return t}function E2(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=as(t.nextSibling),t===null))return null;return t}function R0(t){return t.data==="$?"||t.data==="$~"}function N0(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Cw(t,i){var c=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||c.readyState!=="loading")i();else{var d=function(){i(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),t._reactRetry=d}}function as(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var O0=null;function _2(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var c=t.data;if(c==="/$"||c==="/&"){if(i===0)return as(t.nextSibling);i--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||i++}t=t.nextSibling}return null}function x2(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var c=t.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(i===0)return t;i--}else c!=="/$"&&c!=="/&"||i++}t=t.previousSibling}return null}function A2(t,i,c){switch(i=Rh(c),t){case"html":if(t=i.documentElement,!t)throw Error(o(452));return t;case"head":if(t=i.head,!t)throw Error(o(453));return t;case"body":if(t=i.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function jc(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Nr(t)}var os=new Map,w2=new Set;function Nh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ya=le.d;le.d={f:bw,r:vw,D:Sw,C:Iw,L:Rw,m:Nw,X:Dw,S:Ow,M:Mw};function bw(){var t=ya.f(),i=Ah();return t||i}function vw(t){var i=Lt(t);i!==null&&i.tag===5&&i.type==="form"?Um(i):ya.r(t)}var Bl=typeof document>"u"?null:document;function T2(t,i,c){var d=Bl;if(d&&typeof i=="string"&&i){var E=vt(i);E='link[rel="'+t+'"][href="'+E+'"]',typeof c=="string"&&(E+='[crossorigin="'+c+'"]'),w2.has(E)||(w2.add(E),t={rel:t,crossOrigin:c,href:i},d.querySelector(E)===null&&(i=d.createElement("link"),Vr(i,"link",t),Un(i),d.head.appendChild(i)))}}function Sw(t){ya.D(t),T2("dns-prefetch",t,null)}function Iw(t,i){ya.C(t,i),T2("preconnect",t,i)}function Rw(t,i,c){ya.L(t,i,c);var d=Bl;if(d&&t&&i){var E='link[rel="preload"][as="'+vt(i)+'"]';i==="image"&&c&&c.imageSrcSet?(E+='[imagesrcset="'+vt(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(E+='[imagesizes="'+vt(c.imageSizes)+'"]')):E+='[href="'+vt(t)+'"]';var w=E;switch(i){case"style":w=Vl(t);break;case"script":w=Ul(t)}os.has(w)||(t=O({rel:"preload",href:i==="image"&&c&&c.imageSrcSet?void 0:t,as:i},c),os.set(w,t),d.querySelector(E)!==null||i==="style"&&d.querySelector(Hc(w))||i==="script"&&d.querySelector(Gc(w))||(i=d.createElement("link"),Vr(i,"link",t),Un(i),d.head.appendChild(i)))}}function Nw(t,i){ya.m(t,i);var c=Bl;if(c&&t){var d=i&&typeof i.as=="string"?i.as:"script",E='link[rel="modulepreload"][as="'+vt(d)+'"][href="'+vt(t)+'"]',w=E;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Ul(t)}if(!os.has(w)&&(t=O({rel:"modulepreload",href:t},i),os.set(w,t),c.querySelector(E)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Gc(w)))return}d=c.createElement("link"),Vr(d,"link",t),Un(d),c.head.appendChild(d)}}}function Ow(t,i,c){ya.S(t,i,c);var d=Bl;if(d&&t){var E=Ar(d).hoistableStyles,w=Vl(t);i=i||"default";var R=E.get(w);if(!R){var k={loading:0,preload:null};if(R=d.querySelector(Hc(w)))k.loading=5;else{t=O({rel:"stylesheet",href:t,"data-precedence":i},c),(c=os.get(w))&&D0(t,c);var K=R=d.createElement("link");Un(K),Vr(K,"link",t),K._p=new Promise(function(fe,Te){K.onload=fe,K.onerror=Te}),K.addEventListener("load",function(){k.loading|=1}),K.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Oh(R,i,d)}R={type:"stylesheet",instance:R,count:1,state:k},E.set(w,R)}}}function Dw(t,i){ya.X(t,i);var c=Bl;if(c&&t){var d=Ar(c).hoistableScripts,E=Ul(t),w=d.get(E);w||(w=c.querySelector(Gc(E)),w||(t=O({src:t,async:!0},i),(i=os.get(E))&&M0(t,i),w=c.createElement("script"),Un(w),Vr(w,"link",t),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(E,w))}}function Mw(t,i){ya.M(t,i);var c=Bl;if(c&&t){var d=Ar(c).hoistableScripts,E=Ul(t),w=d.get(E);w||(w=c.querySelector(Gc(E)),w||(t=O({src:t,async:!0,type:"module"},i),(i=os.get(E))&&M0(t,i),w=c.createElement("script"),Un(w),Vr(w,"link",t),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(E,w))}}function C2(t,i,c,d){var E=(E=ye.current)?Nh(E):null;if(!E)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(i=Vl(c.href),c=Ar(E).hoistableStyles,d=c.get(i),d||(d={type:"style",instance:null,count:0,state:null},c.set(i,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){t=Vl(c.href);var w=Ar(E).hoistableStyles,R=w.get(t);if(R||(E=E.ownerDocument||E,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(t,R),(w=E.querySelector(Hc(t)))&&!w._p&&(R.instance=w,R.state.loading=5),os.has(t)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},os.set(t,c),w||Lw(E,t,c,R.state))),i&&d===null)throw Error(o(528,""));return R}if(i&&d!==null)throw Error(o(529,""));return null;case"script":return i=c.async,c=c.src,typeof c=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ul(c),c=Ar(E).hoistableScripts,d=c.get(i),d||(d={type:"script",instance:null,count:0,state:null},c.set(i,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Vl(t){return'href="'+vt(t)+'"'}function Hc(t){return'link[rel="stylesheet"]['+t+"]"}function b2(t){return O({},t,{"data-precedence":t.precedence,precedence:null})}function Lw(t,i,c,d){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?d.loading=1:(i=t.createElement("link"),d.preload=i,i.addEventListener("load",function(){return d.loading|=1}),i.addEventListener("error",function(){return d.loading|=2}),Vr(i,"link",c),Un(i),t.head.appendChild(i))}function Ul(t){return'[src="'+vt(t)+'"]'}function Gc(t){return"script[async]"+t}function v2(t,i,c){if(i.count++,i.instance===null)switch(i.type){case"style":var d=t.querySelector('style[data-href~="'+vt(c.href)+'"]');if(d)return i.instance=d,Un(d),d;var E=O({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(t.ownerDocument||t).createElement("style"),Un(d),Vr(d,"style",E),Oh(d,c.precedence,t),i.instance=d;case"stylesheet":E=Vl(c.href);var w=t.querySelector(Hc(E));if(w)return i.state.loading|=4,i.instance=w,Un(w),w;d=b2(c),(E=os.get(E))&&D0(d,E),w=(t.ownerDocument||t).createElement("link"),Un(w);var R=w;return R._p=new Promise(function(k,K){R.onload=k,R.onerror=K}),Vr(w,"link",d),i.state.loading|=4,Oh(w,c.precedence,t),i.instance=w;case"script":return w=Ul(c.src),(E=t.querySelector(Gc(w)))?(i.instance=E,Un(E),E):(d=c,(E=os.get(w))&&(d=O({},c),M0(d,E)),t=t.ownerDocument||t,E=t.createElement("script"),Un(E),Vr(E,"link",d),t.head.appendChild(E),i.instance=E);case"void":return null;default:throw Error(o(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(d=i.instance,i.state.loading|=4,Oh(d,c.precedence,t));return i.instance}function Oh(t,i,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=d.length?d[d.length-1]:null,w=E,R=0;R<d.length;R++){var k=d[R];if(k.dataset.precedence===i)w=k;else if(w!==E)break}w?w.parentNode.insertBefore(t,w.nextSibling):(i=c.nodeType===9?c.head:c,i.insertBefore(t,i.firstChild))}function D0(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function M0(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Dh=null;function S2(t,i,c){if(Dh===null){var d=new Map,E=Dh=new Map;E.set(c,d)}else E=Dh,d=E.get(c),d||(d=new Map,E.set(c,d));if(d.has(t))return d;for(d.set(t,null),c=c.getElementsByTagName(t),E=0;E<c.length;E++){var w=c[E];if(!(w[Xi]||w[tn]||t==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var R=w.getAttribute(i)||"";R=t+R;var k=d.get(R);k?k.push(w):d.set(R,[w])}}return d}function I2(t,i,c){t=t.ownerDocument||t,t.head.insertBefore(c,i==="title"?t.querySelector("head > title"):null)}function Pw(t,i,c){if(c===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function R2(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function kw(t,i,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var E=Vl(d.href),w=i.querySelector(Hc(E));if(w){i=w._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Mh.bind(t),i.then(t,t)),c.state.loading|=4,c.instance=w,Un(w);return}w=i.ownerDocument||i,d=b2(d),(E=os.get(E))&&D0(d,E),w=w.createElement("link"),Un(w);var R=w;R._p=new Promise(function(k,K){R.onload=k,R.onerror=K}),Vr(w,"link",d),c.instance=w}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(c,i),(i=c.state.preload)&&(c.state.loading&3)===0&&(t.count++,c=Mh.bind(t),i.addEventListener("load",c),i.addEventListener("error",c))}}var L0=0;function Bw(t,i){return t.stylesheets&&t.count===0&&Ph(t,t.stylesheets),0<t.count||0<t.imgCount?function(c){var d=setTimeout(function(){if(t.stylesheets&&Ph(t,t.stylesheets),t.unsuspend){var w=t.unsuspend;t.unsuspend=null,w()}},6e4+i);0<t.imgBytes&&L0===0&&(L0=62500*yw());var E=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Ph(t,t.stylesheets),t.unsuspend)){var w=t.unsuspend;t.unsuspend=null,w()}},(t.imgBytes>L0?50:800)+i);return t.unsuspend=c,function(){t.unsuspend=null,clearTimeout(d),clearTimeout(E)}}:null}function Mh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ph(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Lh=null;function Ph(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Lh=new Map,i.forEach(Vw,t),Lh=null,Mh.call(t))}function Vw(t,i){if(!(i.state.loading&4)){var c=Lh.get(t);if(c)var d=c.get(null);else{c=new Map,Lh.set(t,c);for(var E=t.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<E.length;w++){var R=E[w];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(c.set(R.dataset.precedence,R),d=R)}d&&c.set(null,d)}E=i.instance,R=E.getAttribute("data-precedence"),w=c.get(R)||d,w===d&&c.set(null,E),c.set(R,E),this.count++,d=Mh.bind(this),E.addEventListener("load",d),E.addEventListener("error",d),w?w.parentNode.insertBefore(E,w.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(E,t.firstChild)),i.state.loading|=4}}var qc={$$typeof:pe,Provider:null,Consumer:null,_currentValue:Re,_currentValue2:Re,_threadCount:0};function Uw(t,i,c,d,E,w,R,k,K){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xr(0),this.hiddenUpdates=xr(null),this.identifierPrefix=d,this.onUncaughtError=E,this.onCaughtError=w,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function N2(t,i,c,d,E,w,R,k,K,fe,Te,ve){return t=new Uw(t,i,c,R,K,fe,Te,ve,k),i=1,w===!0&&(i|=24),w=Bi(3,null,null,i),t.current=w,w.stateNode=t,i=dd(),i.refCount++,t.pooledCache=i,i.refCount++,w.memoizedState={element:d,isDehydrated:c,cache:i},yd(w),t}function O2(t){return t?(t=pl,t):pl}function D2(t,i,c,d,E,w){E=O2(E),d.context===null?d.context=E:d.pendingContext=E,d=za(i),d.payload={element:c},w=w===void 0?null:w,w!==null&&(d.callback=w),c=ja(t,d,i),c!==null&&(Si(c,t,i),Tc(c,t,i))}function M2(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var c=t.retryLane;t.retryLane=c!==0&&c<i?c:i}}function P0(t,i){M2(t,i),(t=t.alternate)&&M2(t,i)}function L2(t){if(t.tag===13||t.tag===31){var i=Bo(t,67108864);i!==null&&Si(i,t,67108864),P0(t,67108864)}}function P2(t){if(t.tag===13||t.tag===31){var i=ji();i=We(i);var c=Bo(t,i);c!==null&&Si(c,t,i),P0(t,i)}}var kh=!0;function Fw(t,i,c,d){var E=$.T;$.T=null;var w=le.p;try{le.p=2,k0(t,i,c,d)}finally{le.p=w,$.T=E}}function zw(t,i,c,d){var E=$.T;$.T=null;var w=le.p;try{le.p=8,k0(t,i,c,d)}finally{le.p=w,$.T=E}}function k0(t,i,c,d){if(kh){var E=B0(d);if(E===null)w0(t,i,d,Bh,c),B2(t,d);else if(Hw(E,t,i,c,d))d.stopPropagation();else if(B2(t,d),i&4&&-1<jw.indexOf(t)){for(;E!==null;){var w=Lt(E);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var R=ii(w.pendingLanes);if(R!==0){var k=w;for(k.pendingLanes|=2,k.entangledLanes|=2;R;){var K=1<<31-ut(R);k.entanglements[1]|=K,R&=~K}Ps(w),(ln&6)===0&&(_h=cn()+500,Uc(0))}}break;case 31:case 13:k=Bo(w,2),k!==null&&Si(k,w,2),Ah(),P0(w,2)}if(w=B0(d),w===null&&w0(t,i,d,Bh,c),w===E)break;E=w}E!==null&&d.stopPropagation()}else w0(t,i,d,null,c)}}function B0(t){return t=_i(t),V0(t)}var Bh=null;function V0(t){if(Bh=null,t=Rn(t),t!==null){var i=m(t);if(i===null)t=null;else{var c=i.tag;if(c===13){if(t=_(i),t!==null)return t;t=null}else if(c===31){if(t=b(i),t!==null)return t;t=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Bh=t,null}function k2(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ei()){case qn:return 2;case qi:return 8;case ir:case bn:return 32;case ti:return 268435456;default:return 32}default:return 32}}var U0=!1,$a=null,eo=null,to=null,Xc=new Map,Yc=new Map,no=[],jw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function B2(t,i){switch(t){case"focusin":case"focusout":$a=null;break;case"dragenter":case"dragleave":eo=null;break;case"mouseover":case"mouseout":to=null;break;case"pointerover":case"pointerout":Xc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yc.delete(i.pointerId)}}function Wc(t,i,c,d,E,w){return t===null||t.nativeEvent!==w?(t={blockedOn:i,domEventName:c,eventSystemFlags:d,nativeEvent:w,targetContainers:[E]},i!==null&&(i=Lt(i),i!==null&&L2(i)),t):(t.eventSystemFlags|=d,i=t.targetContainers,E!==null&&i.indexOf(E)===-1&&i.push(E),t)}function Hw(t,i,c,d,E){switch(i){case"focusin":return $a=Wc($a,t,i,c,d,E),!0;case"dragenter":return eo=Wc(eo,t,i,c,d,E),!0;case"mouseover":return to=Wc(to,t,i,c,d,E),!0;case"pointerover":var w=E.pointerId;return Xc.set(w,Wc(Xc.get(w)||null,t,i,c,d,E)),!0;case"gotpointercapture":return w=E.pointerId,Yc.set(w,Wc(Yc.get(w)||null,t,i,c,d,E)),!0}return!1}function V2(t){var i=Rn(t.target);if(i!==null){var c=m(i);if(c!==null){if(i=c.tag,i===13){if(i=_(c),i!==null){t.blockedOn=i,Ve(t.priority,function(){P2(c)});return}}else if(i===31){if(i=b(c),i!==null){t.blockedOn=i,Ve(t.priority,function(){P2(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){t.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vh(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var c=B0(t.nativeEvent);if(c===null){c=t.nativeEvent;var d=new c.constructor(c.type,c);Xs=d,c.target.dispatchEvent(d),Xs=null}else return i=Lt(c),i!==null&&L2(i),t.blockedOn=c,!1;i.shift()}return!0}function U2(t,i,c){Vh(t)&&c.delete(i)}function Gw(){U0=!1,$a!==null&&Vh($a)&&($a=null),eo!==null&&Vh(eo)&&(eo=null),to!==null&&Vh(to)&&(to=null),Xc.forEach(U2),Yc.forEach(U2)}function Uh(t,i){t.blockedOn===i&&(t.blockedOn=null,U0||(U0=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Gw)))}var Fh=null;function F2(t){Fh!==t&&(Fh=t,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Fh===t&&(Fh=null);for(var i=0;i<t.length;i+=3){var c=t[i],d=t[i+1],E=t[i+2];if(typeof d!="function"){if(V0(d||c)===null)continue;break}var w=Lt(c);w!==null&&(t.splice(i,3),i-=3,Bd(w,{pending:!0,data:E,method:c.method,action:d},d,E))}}))}function Fl(t){function i(K){return Uh(K,t)}$a!==null&&Uh($a,t),eo!==null&&Uh(eo,t),to!==null&&Uh(to,t),Xc.forEach(i),Yc.forEach(i);for(var c=0;c<no.length;c++){var d=no[c];d.blockedOn===t&&(d.blockedOn=null)}for(;0<no.length&&(c=no[0],c.blockedOn===null);)V2(c),c.blockedOn===null&&no.shift();if(c=(t.ownerDocument||t).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var E=c[d],w=c[d+1],R=E[Ot]||null;if(typeof w=="function")R||F2(c);else if(R){var k=null;if(w&&w.hasAttribute("formAction")){if(E=w,R=w[Ot]||null)k=R.formAction;else if(V0(E)!==null)continue}else k=R.action;typeof k=="function"?c[d+1]=k:(c.splice(d,3),d-=3),F2(c)}}}function z2(){function t(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(R){return E=R})},focusReset:"manual",scroll:"manual"})}function i(){E!==null&&(E(),E=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,E=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),E!==null&&(E(),E=null)}}}function F0(t){this._internalRoot=t}zh.prototype.render=F0.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(o(409));var c=i.current,d=ji();D2(c,d,t,i,null,null)},zh.prototype.unmount=F0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;D2(t.current,2,null,t,null,null),Ah(),i[Yn]=null}};function zh(t){this._internalRoot=t}zh.prototype.unstable_scheduleHydration=function(t){if(t){var i=Nt();t={blockedOn:null,target:t,priority:i};for(var c=0;c<no.length&&i!==0&&i<no[c].priority;c++);no.splice(c,0,t),c===0&&V2(t)}};var j2=e.version;if(j2!=="19.2.0")throw Error(o(527,j2,"19.2.0"));le.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=A(i),t=t!==null?S(t):null,t=t===null?null:t.stateNode,t};var qw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jh.isDisabled&&jh.supportsFiber)try{Ft=jh.inject(qw),De=jh}catch{}}return Qc.createRoot=function(t,i){if(!h(t))throw Error(o(299));var c=!1,d="",E=Km,w=Qm,R=Zm;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(E=i.onUncaughtError),i.onCaughtError!==void 0&&(w=i.onCaughtError),i.onRecoverableError!==void 0&&(R=i.onRecoverableError)),i=N2(t,1,!1,null,null,c,d,null,E,w,R,z2),t[Yn]=i.current,A0(t),new F0(i)},Qc.hydrateRoot=function(t,i,c){if(!h(t))throw Error(o(299));var d=!1,E="",w=Km,R=Qm,k=Zm,K=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(E=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(R=c.onCaughtError),c.onRecoverableError!==void 0&&(k=c.onRecoverableError),c.formState!==void 0&&(K=c.formState)),i=N2(t,1,!0,i,c??null,d,E,K,w,R,k,z2),i.context=O2(null),c=i.current,d=ji(),d=We(d),E=za(d),E.callback=null,ja(c,E,d),c=d,i.current.lanes=c,yi(i,c),Ps(i),t[Yn]=i.current,A0(t),new zh(i)},Qc.version="19.2.0",Qc}var J2;function nT(){if(J2)return H0.exports;J2=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),H0.exports=tT(),H0.exports}var rT=nT();const iT=z1(rT),yo=()=>U.jsxs("div",{style:{padding:"1.5rem 0",display:"flex",justifyContent:"center",alignItems:"center"},children:[U.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",border:"3px solid #e5e7eb",borderTopColor:"#2EC483",animation:"spin 1s linear infinite"}}),U.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `})]}),sT=()=>{};var $2={};const HE=function(a){const e=[];let n=0;for(let o=0;o<a.length;o++){let h=a.charCodeAt(o);h<128?e[n++]=h:h<2048?(e[n++]=h>>6|192,e[n++]=h&63|128):(h&64512)===55296&&o+1<a.length&&(a.charCodeAt(o+1)&64512)===56320?(h=65536+((h&1023)<<10)+(a.charCodeAt(++o)&1023),e[n++]=h>>18|240,e[n++]=h>>12&63|128,e[n++]=h>>6&63|128,e[n++]=h&63|128):(e[n++]=h>>12|224,e[n++]=h>>6&63|128,e[n++]=h&63|128)}return e},aT=function(a){const e=[];let n=0,o=0;for(;n<a.length;){const h=a[n++];if(h<128)e[o++]=String.fromCharCode(h);else if(h>191&&h<224){const m=a[n++];e[o++]=String.fromCharCode((h&31)<<6|m&63)}else if(h>239&&h<365){const m=a[n++],_=a[n++],b=a[n++],T=((h&7)<<18|(m&63)<<12|(_&63)<<6|b&63)-65536;e[o++]=String.fromCharCode(55296+(T>>10)),e[o++]=String.fromCharCode(56320+(T&1023))}else{const m=a[n++],_=a[n++];e[o++]=String.fromCharCode((h&15)<<12|(m&63)<<6|_&63)}}return e.join("")},GE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,e){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let h=0;h<a.length;h+=3){const m=a[h],_=h+1<a.length,b=_?a[h+1]:0,T=h+2<a.length,A=T?a[h+2]:0,S=m>>2,O=(m&3)<<4|b>>4;let B=(b&15)<<2|A>>6,Y=A&63;T||(Y=64,_||(B=64)),o.push(n[S],n[O],n[B],n[Y])}return o.join("")},encodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(a):this.encodeByteArray(HE(a),e)},decodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(a):aT(this.decodeStringToByteArray(a,e))},decodeStringToByteArray(a,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let h=0;h<a.length;){const m=n[a.charAt(h++)],b=h<a.length?n[a.charAt(h)]:0;++h;const A=h<a.length?n[a.charAt(h)]:64;++h;const O=h<a.length?n[a.charAt(h)]:64;if(++h,m==null||b==null||A==null||O==null)throw new oT;const B=m<<2|b>>4;if(o.push(B),A!==64){const Y=b<<4&240|A>>2;if(o.push(Y),O!==64){const ne=A<<6&192|O;o.push(ne)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class oT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lT=function(a){const e=HE(a);return GE.encodeByteArray(e,!0)},cf=function(a){return lT(a).replace(/\./g,"")},qE=function(a){try{return GE.decodeString(a,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function cT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const uT=()=>cT().__FIREBASE_DEFAULTS__,hT=()=>{if(typeof process>"u"||typeof $2>"u")return;const a=$2.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},fT=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=a&&qE(a[1]);return e&&JSON.parse(e)},Df=()=>{try{return sT()||uT()||hT()||fT()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},XE=a=>Df()?.emulatorHosts?.[a],dT=a=>{const e=XE(a);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),o]:[e.substring(0,n),o]},YE=()=>Df()?.config,WE=a=>Df()?.[`_${a}`];class gT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,o)=>{n?this.reject(n):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,o))}}}function lc(a){try{return(a.startsWith("http://")||a.startsWith("https://")?new URL(a).hostname:a).endsWith(".cloudworkstations.dev")}catch{return!1}}async function KE(a){return(await fetch(a,{credentials:"include"})).ok}function mT(a,e){if(a.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},o=e||"demo-project",h=a.iat||0,m=a.sub||a.user_id;if(!m)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const _={iss:`https://securetoken.google.com/${o}`,aud:o,iat:h,exp:h+3600,auth_time:h,sub:m,user_id:m,firebase:{sign_in_provider:"custom",identities:{}},...a};return[cf(JSON.stringify(n)),cf(JSON.stringify(_)),""].join(".")}const iu={};function pT(){const a={prod:[],emulator:[]};for(const e of Object.keys(iu))iu[e]?a.emulator.push(e):a.prod.push(e);return a}function yT(a){let e=document.getElementById(a),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",a),n=!0),{created:n,element:e}}let ey=!1;function QE(a,e){if(typeof window>"u"||typeof document>"u"||!lc(window.location.host)||iu[a]===e||iu[a]||ey)return;iu[a]=e;function n(B){return`__firebase__banner__${B}`}const o="__firebase__banner",m=pT().prod.length>0;function _(){const B=document.getElementById(o);B&&B.remove()}function b(B){B.style.display="flex",B.style.background="#7faaf0",B.style.position="fixed",B.style.bottom="5px",B.style.left="5px",B.style.padding=".5em",B.style.borderRadius="5px",B.style.alignItems="center"}function T(B,Y){B.setAttribute("width","24"),B.setAttribute("id",Y),B.setAttribute("height","24"),B.setAttribute("viewBox","0 0 24 24"),B.setAttribute("fill","none"),B.style.marginLeft="-6px"}function A(){const B=document.createElement("span");return B.style.cursor="pointer",B.style.marginLeft="16px",B.style.fontSize="24px",B.innerHTML=" &times;",B.onclick=()=>{ey=!0,_()},B}function S(B,Y){B.setAttribute("id",Y),B.innerText="Learn more",B.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",B.setAttribute("target","__blank"),B.style.paddingLeft="5px",B.style.textDecoration="underline"}function O(){const B=yT(o),Y=n("text"),ne=document.getElementById(Y)||document.createElement("span"),ie=n("learnmore"),ge=document.getElementById(ie)||document.createElement("a"),Ue=n("preprendIcon"),Oe=document.getElementById(Ue)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(B.created){const pe=B.element;b(pe),S(ge,ie);const Le=A();T(Oe,Ue),pe.append(Oe,ne,ge,Le),document.body.appendChild(pe)}m?(ne.innerText="Preview backend disconnected.",Oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,ne.innerText="Preview backend running in this workspace."),ne.setAttribute("id",Y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",O):O()}function $r(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ET(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($r())}function _T(){const a=Df()?.forceEnvironment;if(a==="node")return!0;if(a==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function AT(){const a=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof a=="object"&&a.id!==void 0}function wT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TT(){const a=$r();return a.indexOf("MSIE ")>=0||a.indexOf("Trident/")>=0}function CT(){return!_T()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bT(){try{return typeof indexedDB=="object"}catch{return!1}}function vT(){return new Promise((a,e)=>{try{let n=!0;const o="validate-browser-context-for-indexeddb-analytics-module",h=self.indexedDB.open(o);h.onsuccess=()=>{h.result.close(),n||self.indexedDB.deleteDatabase(o),a(!0)},h.onupgradeneeded=()=>{n=!1},h.onerror=()=>{e(h.error?.message||"")}}catch(n){e(n)}})}const ST="FirebaseError";class Sa extends Error{constructor(e,n,o){super(n),this.code=e,this.customData=o,this.name=ST,Object.setPrototypeOf(this,Sa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wu.prototype.create)}}class wu{constructor(e,n,o){this.service=e,this.serviceName=n,this.errors=o}create(e,...n){const o=n[0]||{},h=`${this.service}/${e}`,m=this.errors[e],_=m?IT(m,o):"Error",b=`${this.serviceName}: ${_} (${h}).`;return new Sa(h,b,o)}}function IT(a,e){return a.replace(RT,(n,o)=>{const h=e[o];return h!=null?String(h):`<${o}?>`})}const RT=/\{\$([^}]+)}/g;function NT(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}function el(a,e){if(a===e)return!0;const n=Object.keys(a),o=Object.keys(e);for(const h of n){if(!o.includes(h))return!1;const m=a[h],_=e[h];if(ty(m)&&ty(_)){if(!el(m,_))return!1}else if(m!==_)return!1}for(const h of o)if(!n.includes(h))return!1;return!0}function ty(a){return a!==null&&typeof a=="object"}function Tu(a){const e=[];for(const[n,o]of Object.entries(a))Array.isArray(o)?o.forEach(h=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(h))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(o));return e.length?"&"+e.join("&"):""}function Zc(a){const e={};return a.replace(/^\?/,"").split("&").forEach(o=>{if(o){const[h,m]=o.split("=");e[decodeURIComponent(h)]=decodeURIComponent(m)}}),e}function Jc(a){const e=a.indexOf("?");if(!e)return"";const n=a.indexOf("#",e);return a.substring(e,n>0?n:void 0)}function OT(a,e){const n=new DT(a,e);return n.subscribe.bind(n)}class DT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(o=>{this.error(o)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,o){let h;if(e===void 0&&n===void 0&&o===void 0)throw new Error("Missing Observer.");MT(e,["next","error","complete"])?h=e:h={next:e,error:n,complete:o},h.next===void 0&&(h.next=Y0),h.error===void 0&&(h.error=Y0),h.complete===void 0&&(h.complete=Y0);const m=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?h.error(this.finalError):h.complete()}catch{}}),this.observers.push(h),m}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(o){typeof console<"u"&&console.error&&console.error(o)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function MT(a,e){if(typeof a!="object"||a===null)return!1;for(const n of e)if(n in a&&typeof a[n]=="function")return!0;return!1}function Y0(){}function cr(a){return a&&a._delegate?a._delegate:a}class tl{constructor(e,n,o){this.name=e,this.instanceFactory=n,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Qo="[DEFAULT]";class LT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const o=new gT;if(this.instancesDeferred.set(n,o),this.isInitialized(n)||this.shouldAutoInitialize())try{const h=this.getOrInitializeService({instanceIdentifier:n});h&&o.resolve(h)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),o=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(h){if(o)return null;throw h}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kT(e))try{this.getOrInitializeService({instanceIdentifier:Qo})}catch{}for(const[n,o]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(n);try{const m=this.getOrInitializeService({instanceIdentifier:h});o.resolve(m)}catch{}}}}clearInstance(e=Qo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qo){return this.instances.has(e)}getOptions(e=Qo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const h=this.getOrInitializeService({instanceIdentifier:o,options:n});for(const[m,_]of this.instancesDeferred.entries()){const b=this.normalizeInstanceIdentifier(m);o===b&&_.resolve(h)}return h}onInit(e,n){const o=this.normalizeInstanceIdentifier(n),h=this.onInitCallbacks.get(o)??new Set;h.add(e),this.onInitCallbacks.set(o,h);const m=this.instances.get(o);return m&&e(m,o),()=>{h.delete(e)}}invokeOnInitCallbacks(e,n){const o=this.onInitCallbacks.get(n);if(o)for(const h of o)try{h(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:PT(e),options:n}),this.instances.set(e,o),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=Qo){return this.component?this.component.multipleInstances?e:Qo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PT(a){return a===Qo?void 0:a}function kT(a){return a.instantiationMode==="EAGER"}class BT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new LT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var qt;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(qt||(qt={}));const VT={debug:qt.DEBUG,verbose:qt.VERBOSE,info:qt.INFO,warn:qt.WARN,error:qt.ERROR,silent:qt.SILENT},UT=qt.INFO,FT={[qt.DEBUG]:"log",[qt.VERBOSE]:"log",[qt.INFO]:"info",[qt.WARN]:"warn",[qt.ERROR]:"error"},zT=(a,e,...n)=>{if(e<a.logLevel)return;const o=new Date().toISOString(),h=FT[e];if(h)console[h](`[${o}]  ${a.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class H1{constructor(e){this.name=e,this._logLevel=UT,this._logHandler=zT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qt.DEBUG,...e),this._logHandler(this,qt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qt.VERBOSE,...e),this._logHandler(this,qt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qt.INFO,...e),this._logHandler(this,qt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qt.WARN,...e),this._logHandler(this,qt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qt.ERROR,...e),this._logHandler(this,qt.ERROR,...e)}}const jT=(a,e)=>e.some(n=>a instanceof n);let ny,ry;function HT(){return ny||(ny=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GT(){return ry||(ry=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ZE=new WeakMap,u1=new WeakMap,JE=new WeakMap,W0=new WeakMap,G1=new WeakMap;function qT(a){const e=new Promise((n,o)=>{const h=()=>{a.removeEventListener("success",m),a.removeEventListener("error",_)},m=()=>{n(ho(a.result)),h()},_=()=>{o(a.error),h()};a.addEventListener("success",m),a.addEventListener("error",_)});return e.then(n=>{n instanceof IDBCursor&&ZE.set(n,a)}).catch(()=>{}),G1.set(e,a),e}function XT(a){if(u1.has(a))return;const e=new Promise((n,o)=>{const h=()=>{a.removeEventListener("complete",m),a.removeEventListener("error",_),a.removeEventListener("abort",_)},m=()=>{n(),h()},_=()=>{o(a.error||new DOMException("AbortError","AbortError")),h()};a.addEventListener("complete",m),a.addEventListener("error",_),a.addEventListener("abort",_)});u1.set(a,e)}let h1={get(a,e,n){if(a instanceof IDBTransaction){if(e==="done")return u1.get(a);if(e==="objectStoreNames")return a.objectStoreNames||JE.get(a);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ho(a[e])},set(a,e,n){return a[e]=n,!0},has(a,e){return a instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in a}};function YT(a){h1=a(h1)}function WT(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const o=a.call(K0(this),e,...n);return JE.set(o,e.sort?e.sort():[e]),ho(o)}:GT().includes(a)?function(...e){return a.apply(K0(this),e),ho(ZE.get(this))}:function(...e){return ho(a.apply(K0(this),e))}}function KT(a){return typeof a=="function"?WT(a):(a instanceof IDBTransaction&&XT(a),jT(a,HT())?new Proxy(a,h1):a)}function ho(a){if(a instanceof IDBRequest)return qT(a);if(W0.has(a))return W0.get(a);const e=KT(a);return e!==a&&(W0.set(a,e),G1.set(e,a)),e}const K0=a=>G1.get(a);function QT(a,e,{blocked:n,upgrade:o,blocking:h,terminated:m}={}){const _=indexedDB.open(a,e),b=ho(_);return o&&_.addEventListener("upgradeneeded",T=>{o(ho(_.result),T.oldVersion,T.newVersion,ho(_.transaction),T)}),n&&_.addEventListener("blocked",T=>n(T.oldVersion,T.newVersion,T)),b.then(T=>{m&&T.addEventListener("close",()=>m()),h&&T.addEventListener("versionchange",A=>h(A.oldVersion,A.newVersion,A))}).catch(()=>{}),b}const ZT=["get","getKey","getAll","getAllKeys","count"],JT=["put","add","delete","clear"],Q0=new Map;function iy(a,e){if(!(a instanceof IDBDatabase&&!(e in a)&&typeof e=="string"))return;if(Q0.get(e))return Q0.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,h=JT.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(h||ZT.includes(n)))return;const m=async function(_,...b){const T=this.transaction(_,h?"readwrite":"readonly");let A=T.store;return o&&(A=A.index(b.shift())),(await Promise.all([A[n](...b),h&&T.done]))[0]};return Q0.set(e,m),m}YT(a=>({...a,get:(e,n,o)=>iy(e,n)||a.get(e,n,o),has:(e,n)=>!!iy(e,n)||a.has(e,n)}));class $T{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(e3(n)){const o=n.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(n=>n).join(" ")}}function e3(a){return a.getComponent()?.type==="VERSION"}const f1="@firebase/app",sy="0.14.6";const Ta=new H1("@firebase/app"),t3="@firebase/app-compat",n3="@firebase/analytics-compat",r3="@firebase/analytics",i3="@firebase/app-check-compat",s3="@firebase/app-check",a3="@firebase/auth",o3="@firebase/auth-compat",l3="@firebase/database",c3="@firebase/data-connect",u3="@firebase/database-compat",h3="@firebase/functions",f3="@firebase/functions-compat",d3="@firebase/installations",g3="@firebase/installations-compat",m3="@firebase/messaging",p3="@firebase/messaging-compat",y3="@firebase/performance",E3="@firebase/performance-compat",_3="@firebase/remote-config",x3="@firebase/remote-config-compat",A3="@firebase/storage",w3="@firebase/storage-compat",T3="@firebase/firestore",C3="@firebase/ai",b3="@firebase/firestore-compat",v3="firebase",S3="12.6.0";const d1="[DEFAULT]",I3={[f1]:"fire-core",[t3]:"fire-core-compat",[r3]:"fire-analytics",[n3]:"fire-analytics-compat",[s3]:"fire-app-check",[i3]:"fire-app-check-compat",[a3]:"fire-auth",[o3]:"fire-auth-compat",[l3]:"fire-rtdb",[c3]:"fire-data-connect",[u3]:"fire-rtdb-compat",[h3]:"fire-fn",[f3]:"fire-fn-compat",[d3]:"fire-iid",[g3]:"fire-iid-compat",[m3]:"fire-fcm",[p3]:"fire-fcm-compat",[y3]:"fire-perf",[E3]:"fire-perf-compat",[_3]:"fire-rc",[x3]:"fire-rc-compat",[A3]:"fire-gcs",[w3]:"fire-gcs-compat",[T3]:"fire-fst",[b3]:"fire-fst-compat",[C3]:"fire-vertex","fire-js":"fire-js",[v3]:"fire-js-all"};const uu=new Map,R3=new Map,g1=new Map;function ay(a,e){try{a.container.addComponent(e)}catch(n){Ta.debug(`Component ${e.name} failed to register with FirebaseApp ${a.name}`,n)}}function ec(a){const e=a.name;if(g1.has(e))return Ta.debug(`There were multiple attempts to register component ${e}.`),!1;g1.set(e,a);for(const n of uu.values())ay(n,a);for(const n of R3.values())ay(n,a);return!0}function q1(a,e){const n=a.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),a.container.getProvider(e)}function ls(a){return a==null?!1:a.settings!==void 0}const N3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fo=new wu("app","Firebase",N3);class O3{constructor(e,n,o){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new tl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fo.create("app-deleted",{appName:this._name})}}const cc=S3;function X1(a,e={}){let n=a;typeof e!="object"&&(e={name:e});const o={name:d1,automaticDataCollectionEnabled:!0,...e},h=o.name;if(typeof h!="string"||!h)throw fo.create("bad-app-name",{appName:String(h)});if(n||(n=YE()),!n)throw fo.create("no-options");const m=uu.get(h);if(m){if(el(n,m.options)&&el(o,m.config))return m;throw fo.create("duplicate-app",{appName:h})}const _=new BT(h);for(const T of g1.values())_.addComponent(T);const b=new O3(n,o,_);return uu.set(h,b),b}function Y1(a=d1){const e=uu.get(a);if(!e&&a===d1&&YE())return X1();if(!e)throw fo.create("no-app",{appName:a});return e}function $E(){return Array.from(uu.values())}function go(a,e,n){let o=I3[a]??a;n&&(o+=`-${n}`);const h=o.match(/\s|\//),m=e.match(/\s|\//);if(h||m){const _=[`Unable to register library "${o}" with version "${e}":`];h&&_.push(`library name "${o}" contains illegal characters (whitespace or "/")`),h&&m&&_.push("and"),m&&_.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ta.warn(_.join(" "));return}ec(new tl(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}const D3="firebase-heartbeat-database",M3=1,hu="firebase-heartbeat-store";let Z0=null;function e_(){return Z0||(Z0=QT(D3,M3,{upgrade:(a,e)=>{switch(e){case 0:try{a.createObjectStore(hu)}catch(n){console.warn(n)}}}}).catch(a=>{throw fo.create("idb-open",{originalErrorMessage:a.message})})),Z0}async function L3(a){try{const n=(await e_()).transaction(hu),o=await n.objectStore(hu).get(t_(a));return await n.done,o}catch(e){if(e instanceof Sa)Ta.warn(e.message);else{const n=fo.create("idb-get",{originalErrorMessage:e?.message});Ta.warn(n.message)}}}async function oy(a,e){try{const o=(await e_()).transaction(hu,"readwrite");await o.objectStore(hu).put(e,t_(a)),await o.done}catch(n){if(n instanceof Sa)Ta.warn(n.message);else{const o=fo.create("idb-set",{originalErrorMessage:n?.message});Ta.warn(o.message)}}}function t_(a){return`${a.name}!${a.options.appId}`}const P3=1024,k3=30;class B3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new U3(n),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=ly();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(h=>h.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:n}),this._heartbeatsCache.heartbeats.length>k3){const h=F3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ta.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ly(),{heartbeatsToSend:n,unsentEntries:o}=V3(this._heartbeatsCache.heartbeats),h=cf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),h}catch(e){return Ta.warn(e),""}}}function ly(){return new Date().toISOString().substring(0,10)}function V3(a,e=P3){const n=[];let o=a.slice();for(const h of a){const m=n.find(_=>_.agent===h.agent);if(m){if(m.dates.push(h.date),cy(n)>e){m.dates.pop();break}}else if(n.push({agent:h.agent,dates:[h.date]}),cy(n)>e){n.pop();break}o=o.slice(1)}return{heartbeatsToSend:n,unsentEntries:o}}class U3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bT()?vT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await L3(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return oy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return oy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function cy(a){return cf(JSON.stringify({version:2,heartbeats:a})).length}function F3(a){if(a.length===0)return-1;let e=0,n=a[0].date;for(let o=1;o<a.length;o++)a[o].date<n&&(n=a[o].date,e=o);return e}function z3(a){ec(new tl("platform-logger",e=>new $T(e),"PRIVATE")),ec(new tl("heartbeat",e=>new B3(e),"PRIVATE")),go(f1,sy,a),go(f1,sy,"esm2020"),go("fire-js","")}z3("");var j3="firebase",H3="12.6.0";go(j3,H3,"app");function n_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const G3=n_,r_=new wu("auth","Firebase",n_());const uf=new H1("@firebase/auth");function q3(a,...e){uf.logLevel<=qt.WARN&&uf.warn(`Auth (${cc}): ${a}`,...e)}function Zh(a,...e){uf.logLevel<=qt.ERROR&&uf.error(`Auth (${cc}): ${a}`,...e)}function ws(a,...e){throw W1(a,...e)}function Bs(a,...e){return W1(a,...e)}function i_(a,e,n){const o={...G3(),[e]:n};return new wu("auth","Firebase",o).create(e,{appName:a.name})}function Aa(a){return i_(a,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function W1(a,...e){if(typeof a!="string"){const n=e[0],o=[...e.slice(1)];return o[0]&&(o[0].appName=a.name),a._errorFactory.create(n,...o)}return r_.create(a,...e)}function dt(a,e,...n){if(!a)throw W1(e,...n)}function _a(a){const e="INTERNAL ASSERTION FAILED: "+a;throw Zh(e),new Error(e)}function Ca(a,e){a||_a(e)}function m1(){return typeof self<"u"&&self.location?.href||""}function X3(){return uy()==="http:"||uy()==="https:"}function uy(){return typeof self<"u"&&self.location?.protocol||null}function Y3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(X3()||AT()||"connection"in navigator)?navigator.onLine:!0}function W3(){if(typeof navigator>"u")return null;const a=navigator;return a.languages&&a.languages[0]||a.language||null}class Cu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ca(n>e,"Short delay should be less than long delay!"),this.isMobile=ET()||wT()}get(){return Y3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function K1(a,e){Ca(a.emulator,"Emulator should always be set here");const{url:n}=a.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class s_{static initialize(e,n,o){this.fetchImpl=e,n&&(this.headersImpl=n),o&&(this.responseImpl=o)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_a("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_a("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_a("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const K3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Q3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Z3=new Cu(3e4,6e4);function Co(a,e){return a.tenantId&&!e.tenantId?{...e,tenantId:a.tenantId}:e}async function bo(a,e,n,o,h={}){return a_(a,h,async()=>{let m={},_={};o&&(e==="GET"?_=o:m={body:JSON.stringify(o)});const b=Tu({key:a.config.apiKey,..._}).slice(1),T=await a._getAdditionalHeaders();T["Content-Type"]="application/json",a.languageCode&&(T["X-Firebase-Locale"]=a.languageCode);const A={method:e,headers:T,...m};return xT()||(A.referrerPolicy="no-referrer"),a.emulatorConfig&&lc(a.emulatorConfig.host)&&(A.credentials="include"),s_.fetch()(await o_(a,a.config.apiHost,n,b),A)})}async function a_(a,e,n){a._canInitEmulator=!1;const o={...K3,...e};try{const h=new $3(a),m=await Promise.race([n(),h.promise]);h.clearNetworkTimeout();const _=await m.json();if("needConfirmation"in _)throw Gh(a,"account-exists-with-different-credential",_);if(m.ok&&!("errorMessage"in _))return _;{const b=m.ok?_.errorMessage:_.error.message,[T,A]=b.split(" : ");if(T==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gh(a,"credential-already-in-use",_);if(T==="EMAIL_EXISTS")throw Gh(a,"email-already-in-use",_);if(T==="USER_DISABLED")throw Gh(a,"user-disabled",_);const S=o[T]||T.toLowerCase().replace(/[_\s]+/g,"-");if(A)throw i_(a,S,A);ws(a,S)}}catch(h){if(h instanceof Sa)throw h;ws(a,"network-request-failed",{message:String(h)})}}async function bu(a,e,n,o,h={}){const m=await bo(a,e,n,o,h);return"mfaPendingCredential"in m&&ws(a,"multi-factor-auth-required",{_serverResponse:m}),m}async function o_(a,e,n,o){const h=`${e}${n}?${o}`,m=a,_=m.config.emulator?K1(a.config,h):`${a.config.apiScheme}://${h}`;return Q3.includes(n)&&(await m._persistenceManagerAvailable,m._getPersistenceType()==="COOKIE")?m._getPersistence()._getFinalTarget(_).toString():_}function J3(a){switch(a){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,o)=>{this.timer=setTimeout(()=>o(Bs(this.auth,"network-request-failed")),Z3.get())})}}function Gh(a,e,n){const o={appName:a.name};n.email&&(o.email=n.email),n.phoneNumber&&(o.phoneNumber=n.phoneNumber);const h=Bs(a,e,o);return h.customData._tokenResponse=n,h}function hy(a){return a!==void 0&&a.enterprise!==void 0}class eC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return J3(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function tC(a,e){return bo(a,"GET","/v2/recaptchaConfig",Co(a,e))}async function nC(a,e){return bo(a,"POST","/v1/accounts:delete",e)}async function hf(a,e){return bo(a,"POST","/v1/accounts:lookup",e)}function su(a){if(a)try{const e=new Date(Number(a));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rC(a,e=!1){const n=cr(a),o=await n.getIdToken(e),h=Q1(o);dt(h&&h.exp&&h.auth_time&&h.iat,n.auth,"internal-error");const m=typeof h.firebase=="object"?h.firebase:void 0,_=m?.sign_in_provider;return{claims:h,token:o,authTime:su(J0(h.auth_time)),issuedAtTime:su(J0(h.iat)),expirationTime:su(J0(h.exp)),signInProvider:_||null,signInSecondFactor:m?.sign_in_second_factor||null}}function J0(a){return Number(a)*1e3}function Q1(a){const[e,n,o]=a.split(".");if(e===void 0||n===void 0||o===void 0)return Zh("JWT malformed, contained fewer than 3 sections"),null;try{const h=qE(n);return h?JSON.parse(h):(Zh("Failed to decode base64 JWT payload"),null)}catch(h){return Zh("Caught error parsing JWT payload as JSON",h?.toString()),null}}function fy(a){const e=Q1(a);return dt(e,"internal-error"),dt(typeof e.exp<"u","internal-error"),dt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function fu(a,e,n=!1){if(n)return e;try{return await e}catch(o){throw o instanceof Sa&&iC(o)&&a.auth.currentUser===a&&await a.auth.signOut(),o}}function iC({code:a}){return a==="auth/user-disabled"||a==="auth/user-token-expired"}class sC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const o=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class p1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=su(this.lastLoginAt),this.creationTime=su(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ff(a){const e=a.auth,n=await a.getIdToken(),o=await fu(a,hf(e,{idToken:n}));dt(o?.users.length,e,"internal-error");const h=o.users[0];a._notifyReloadListener(h);const m=h.providerUserInfo?.length?l_(h.providerUserInfo):[],_=oC(a.providerData,m),b=a.isAnonymous,T=!(a.email&&h.passwordHash)&&!_?.length,A=b?T:!1,S={uid:h.localId,displayName:h.displayName||null,photoURL:h.photoUrl||null,email:h.email||null,emailVerified:h.emailVerified||!1,phoneNumber:h.phoneNumber||null,tenantId:h.tenantId||null,providerData:_,metadata:new p1(h.createdAt,h.lastLoginAt),isAnonymous:A};Object.assign(a,S)}async function aC(a){const e=cr(a);await ff(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oC(a,e){return[...a.filter(o=>!e.some(h=>h.providerId===o.providerId)),...e]}function l_(a){return a.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function lC(a,e){const n=await a_(a,{},async()=>{const o=Tu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:h,apiKey:m}=a.config,_=await o_(a,h,"/v1/token",`key=${m}`),b=await a._getAdditionalHeaders();b["Content-Type"]="application/x-www-form-urlencoded";const T={method:"POST",headers:b,body:o};return a.emulatorConfig&&lc(a.emulatorConfig.host)&&(T.credentials="include"),s_.fetch()(_,T)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function cC(a,e){return bo(a,"POST","/v2/accounts:revokeToken",Co(a,e))}class Wl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){dt(e.idToken,"internal-error"),dt(typeof e.idToken<"u","internal-error"),dt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){dt(e.length!==0,"internal-error");const n=fy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(dt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:o,refreshToken:h,expiresIn:m}=await lC(e,n);this.updateTokensAndExpiration(o,h,Number(m))}updateTokensAndExpiration(e,n,o){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+o*1e3}static fromJSON(e,n){const{refreshToken:o,accessToken:h,expirationTime:m}=n,_=new Wl;return o&&(dt(typeof o=="string","internal-error",{appName:e}),_.refreshToken=o),h&&(dt(typeof h=="string","internal-error",{appName:e}),_.accessToken=h),m&&(dt(typeof m=="number","internal-error",{appName:e}),_.expirationTime=m),_}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wl,this.toJSON())}_performRefresh(){return _a("not implemented")}}function io(a,e){dt(typeof a=="string"||typeof a>"u","internal-error",{appName:e})}class As{constructor({uid:e,auth:n,stsTokenManager:o,...h}){this.providerId="firebase",this.proactiveRefresh=new sC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=h.displayName||null,this.email=h.email||null,this.emailVerified=h.emailVerified||!1,this.phoneNumber=h.phoneNumber||null,this.photoURL=h.photoURL||null,this.isAnonymous=h.isAnonymous||!1,this.tenantId=h.tenantId||null,this.providerData=h.providerData?[...h.providerData]:[],this.metadata=new p1(h.createdAt||void 0,h.lastLoginAt||void 0)}async getIdToken(e){const n=await fu(this,this.stsTokenManager.getToken(this.auth,e));return dt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return rC(this,e)}reload(){return aC(this)}_assign(e){this!==e&&(dt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new As({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){dt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let o=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),o=!0),n&&await ff(this),await this.auth._persistUserIfCurrent(this),o&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ls(this.auth.app))return Promise.reject(Aa(this.auth));const e=await this.getIdToken();return await fu(this,nC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const o=n.displayName??void 0,h=n.email??void 0,m=n.phoneNumber??void 0,_=n.photoURL??void 0,b=n.tenantId??void 0,T=n._redirectEventId??void 0,A=n.createdAt??void 0,S=n.lastLoginAt??void 0,{uid:O,emailVerified:B,isAnonymous:Y,providerData:ne,stsTokenManager:ie}=n;dt(O&&ie,e,"internal-error");const ge=Wl.fromJSON(this.name,ie);dt(typeof O=="string",e,"internal-error"),io(o,e.name),io(h,e.name),dt(typeof B=="boolean",e,"internal-error"),dt(typeof Y=="boolean",e,"internal-error"),io(m,e.name),io(_,e.name),io(b,e.name),io(T,e.name),io(A,e.name),io(S,e.name);const Ue=new As({uid:O,auth:e,email:h,emailVerified:B,displayName:o,isAnonymous:Y,photoURL:_,phoneNumber:m,tenantId:b,stsTokenManager:ge,createdAt:A,lastLoginAt:S});return ne&&Array.isArray(ne)&&(Ue.providerData=ne.map(Oe=>({...Oe}))),T&&(Ue._redirectEventId=T),Ue}static async _fromIdTokenResponse(e,n,o=!1){const h=new Wl;h.updateFromServerResponse(n);const m=new As({uid:n.localId,auth:e,stsTokenManager:h,isAnonymous:o});return await ff(m),m}static async _fromGetAccountInfoResponse(e,n,o){const h=n.users[0];dt(h.localId!==void 0,"internal-error");const m=h.providerUserInfo!==void 0?l_(h.providerUserInfo):[],_=!(h.email&&h.passwordHash)&&!m?.length,b=new Wl;b.updateFromIdToken(o);const T=new As({uid:h.localId,auth:e,stsTokenManager:b,isAnonymous:_}),A={uid:h.localId,displayName:h.displayName||null,photoURL:h.photoUrl||null,email:h.email||null,emailVerified:h.emailVerified||!1,phoneNumber:h.phoneNumber||null,tenantId:h.tenantId||null,providerData:m,metadata:new p1(h.createdAt,h.lastLoginAt),isAnonymous:!(h.email&&h.passwordHash)&&!m?.length};return Object.assign(T,A),T}}const dy=new Map;function xa(a){Ca(a instanceof Function,"Expected a class definition");let e=dy.get(a);return e?(Ca(e instanceof a,"Instance stored in cache mismatched with class"),e):(e=new a,dy.set(a,e),e)}class c_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}c_.type="NONE";const gy=c_;function Jh(a,e,n){return`firebase:${a}:${e}:${n}`}class Kl{constructor(e,n,o){this.persistence=e,this.auth=n,this.userKey=o;const{config:h,name:m}=this.auth;this.fullUserKey=Jh(this.userKey,h.apiKey,m),this.fullPersistenceKey=Jh("persistence",h.apiKey,m),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await hf(this.auth,{idToken:e}).catch(()=>{});return n?As._fromGetAccountInfoResponse(this.auth,n,e):null}return As._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,o="authUser"){if(!n.length)return new Kl(xa(gy),e,o);const h=(await Promise.all(n.map(async A=>{if(await A._isAvailable())return A}))).filter(A=>A);let m=h[0]||xa(gy);const _=Jh(o,e.config.apiKey,e.name);let b=null;for(const A of n)try{const S=await A._get(_);if(S){let O;if(typeof S=="string"){const B=await hf(e,{idToken:S}).catch(()=>{});if(!B)break;O=await As._fromGetAccountInfoResponse(e,B,S)}else O=As._fromJSON(e,S);A!==m&&(b=O),m=A;break}}catch{}const T=h.filter(A=>A._shouldAllowMigration);return!m._shouldAllowMigration||!T.length?new Kl(m,e,o):(m=T[0],b&&await m._set(_,b.toJSON()),await Promise.all(n.map(async A=>{if(A!==m)try{await A._remove(_)}catch{}})),new Kl(m,e,o))}}function my(a){const e=a.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(d_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(u_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(m_(e))return"Blackberry";if(p_(e))return"Webos";if(h_(e))return"Safari";if((e.includes("chrome/")||f_(e))&&!e.includes("edge/"))return"Chrome";if(g_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,o=a.match(n);if(o?.length===2)return o[1]}return"Other"}function u_(a=$r()){return/firefox\//i.test(a)}function h_(a=$r()){const e=a.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function f_(a=$r()){return/crios\//i.test(a)}function d_(a=$r()){return/iemobile/i.test(a)}function g_(a=$r()){return/android/i.test(a)}function m_(a=$r()){return/blackberry/i.test(a)}function p_(a=$r()){return/webos/i.test(a)}function Z1(a=$r()){return/iphone|ipad|ipod/i.test(a)||/macintosh/i.test(a)&&/mobile/i.test(a)}function uC(a=$r()){return Z1(a)&&!!window.navigator?.standalone}function hC(){return TT()&&document.documentMode===10}function y_(a=$r()){return Z1(a)||g_(a)||p_(a)||m_(a)||/windows phone/i.test(a)||d_(a)}function E_(a,e=[]){let n;switch(a){case"Browser":n=my($r());break;case"Worker":n=`${my($r())}-${a}`;break;default:n=a}const o=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${cc}/${o}`}class fC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const o=m=>new Promise((_,b)=>{try{const T=e(m);_(T)}catch(T){b(T)}});o.onAbort=n,this.queue.push(o);const h=this.queue.length-1;return()=>{this.queue[h]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const o of this.queue)await o(e),o.onAbort&&n.push(o.onAbort)}catch(o){n.reverse();for(const h of n)try{h()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:o?.message})}}}async function dC(a,e={}){return bo(a,"GET","/v2/passwordPolicy",Co(a,e))}const gC=6;class mC{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??gC,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const o=this.customStrengthOptions.minPasswordLength,h=this.customStrengthOptions.maxPasswordLength;o&&(n.meetsMinPasswordLength=e.length>=o),h&&(n.meetsMaxPasswordLength=e.length<=h)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let o;for(let h=0;h<e.length;h++)o=e.charAt(h),this.updatePasswordCharacterOptionsStatuses(n,o>="a"&&o<="z",o>="A"&&o<="Z",o>="0"&&o<="9",this.allowedNonAlphanumericCharacters.includes(o))}updatePasswordCharacterOptionsStatuses(e,n,o,h,m){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=o)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=h)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=m))}}class pC{constructor(e,n,o,h){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=o,this.config=h,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new py(this),this.idTokenSubscription=new py(this),this.beforeStateQueue=new fC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=r_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=h.sdkClientVersion,this._persistenceManagerAvailable=new Promise(m=>this._resolvePersistenceManagerAvailable=m)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=xa(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Kl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await hf(this,{idToken:e}),o=await As._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(o)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ls(this.app)){const m=this.app.settings.authIdToken;return m?new Promise(_=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(m).then(_,_))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let o=n,h=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const m=this.redirectUser?._redirectEventId,_=o?._redirectEventId,b=await this.tryRedirectSignIn(e);(!m||m===_)&&b?.user&&(o=b.user,h=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(h)try{await this.beforeStateQueue.runMiddleware(o)}catch(m){o=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(m))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return dt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ff(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=W3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ls(this.app))return Promise.reject(Aa(this));const n=e?cr(e):null;return n&&dt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&dt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ls(this.app)?Promise.reject(Aa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ls(this.app)?Promise.reject(Aa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dC(this),n=new mC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wu("auth","Firebase",e())}onAuthStateChanged(e,n,o){return this.registerStateListener(this.authStateSubscription,e,n,o)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,o){return this.registerStateListener(this.idTokenSubscription,e,n,o)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const o=this.onAuthStateChanged(()=>{o(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),o={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(o.tenantId=this.tenantId),await cC(this,o)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const o=await this.getOrInitRedirectPersistenceManager(n);return e===null?o.removeCurrentUser():o.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&xa(e)||this._popupRedirectResolver;dt(n,this,"argument-error"),this.redirectPersistenceManager=await Kl.create(this,[xa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,o,h){if(this._deleted)return()=>{};const m=typeof n=="function"?n:n.next.bind(n);let _=!1;const b=this._isInitialized?Promise.resolve():this._initializationPromise;if(dt(b,this,"internal-error"),b.then(()=>{_||m(this.currentUser)}),typeof n=="function"){const T=e.addObserver(n,o,h);return()=>{_=!0,T()}}else{const T=e.addObserver(n);return()=>{_=!0,T()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return dt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=E_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const o=await this._getAppCheckToken();return o&&(e["X-Firebase-AppCheck"]=o),e}async _getAppCheckToken(){if(ls(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&q3(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ol(a){return cr(a)}class py{constructor(e){this.auth=e,this.observer=null,this.addObserver=OT(n=>this.observer=n)}get next(){return dt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Mf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yC(a){Mf=a}function __(a){return Mf.loadJS(a)}function EC(){return Mf.recaptchaEnterpriseScript}function _C(){return Mf.gapiScript}function xC(a){return`__${a}${Math.floor(Math.random()*1e6)}`}class AC{constructor(){this.enterprise=new wC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class wC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const TC="recaptcha-enterprise",x_="NO_RECAPTCHA";class CC{constructor(e){this.type=TC,this.auth=ol(e)}async verify(e="verify",n=!1){async function o(m){if(!n){if(m.tenantId==null&&m._agentRecaptchaConfig!=null)return m._agentRecaptchaConfig.siteKey;if(m.tenantId!=null&&m._tenantRecaptchaConfigs[m.tenantId]!==void 0)return m._tenantRecaptchaConfigs[m.tenantId].siteKey}return new Promise(async(_,b)=>{tC(m,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(T=>{if(T.recaptchaKey===void 0)b(new Error("recaptcha Enterprise site key undefined"));else{const A=new eC(T);return m.tenantId==null?m._agentRecaptchaConfig=A:m._tenantRecaptchaConfigs[m.tenantId]=A,_(A.siteKey)}}).catch(T=>{b(T)})})}function h(m,_,b){const T=window.grecaptcha;hy(T)?T.enterprise.ready(()=>{T.enterprise.execute(m,{action:e}).then(A=>{_(A)}).catch(()=>{_(x_)})}):b(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new AC().execute("siteKey",{action:"verify"}):new Promise((m,_)=>{o(this.auth).then(b=>{if(!n&&hy(window.grecaptcha))h(b,m,_);else{if(typeof window>"u"){_(new Error("RecaptchaVerifier is only supported in browser"));return}let T=EC();T.length!==0&&(T+=b),__(T).then(()=>{h(b,m,_)}).catch(A=>{_(A)})}}).catch(b=>{_(b)})})}}async function yy(a,e,n,o=!1,h=!1){const m=new CC(a);let _;if(h)_=x_;else try{_=await m.verify(n)}catch{_=await m.verify(n,!0)}const b={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in b){const T=b.phoneEnrollmentInfo.phoneNumber,A=b.phoneEnrollmentInfo.recaptchaToken;Object.assign(b,{phoneEnrollmentInfo:{phoneNumber:T,recaptchaToken:A,captchaResponse:_,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in b){const T=b.phoneSignInInfo.recaptchaToken;Object.assign(b,{phoneSignInInfo:{recaptchaToken:T,captchaResponse:_,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return b}return o?Object.assign(b,{captchaResp:_}):Object.assign(b,{captchaResponse:_}),Object.assign(b,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(b,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),b}async function y1(a,e,n,o,h){if(a._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const m=await yy(a,e,n,n==="getOobCode");return o(a,m)}else return o(a,e).catch(async m=>{if(m.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const _=await yy(a,e,n,n==="getOobCode");return o(a,_)}else return Promise.reject(m)})}function bC(a,e){const n=q1(a,"auth");if(n.isInitialized()){const h=n.getImmediate(),m=n.getOptions();if(el(m,e??{}))return h;ws(h,"already-initialized")}return n.initialize({options:e})}function vC(a,e){const n=e?.persistence||[],o=(Array.isArray(n)?n:[n]).map(xa);e?.errorMap&&a._updateErrorMap(e.errorMap),a._initializeWithPersistence(o,e?.popupRedirectResolver)}function SC(a,e,n){const o=ol(a);dt(/^https?:\/\//.test(e),o,"invalid-emulator-scheme");const h=!1,m=A_(e),{host:_,port:b}=IC(e),T=b===null?"":`:${b}`,A={url:`${m}//${_}${T}/`},S=Object.freeze({host:_,port:b,protocol:m.replace(":",""),options:Object.freeze({disableWarnings:h})});if(!o._canInitEmulator){dt(o.config.emulator&&o.emulatorConfig,o,"emulator-config-failed"),dt(el(A,o.config.emulator)&&el(S,o.emulatorConfig),o,"emulator-config-failed");return}o.config.emulator=A,o.emulatorConfig=S,o.settings.appVerificationDisabledForTesting=!0,lc(_)?(KE(`${m}//${_}${T}`),QE("Auth",!0)):RC()}function A_(a){const e=a.indexOf(":");return e<0?"":a.substr(0,e+1)}function IC(a){const e=A_(a),n=/(\/\/)?([^?#/]+)/.exec(a.substr(e.length));if(!n)return{host:"",port:null};const o=n[2].split("@").pop()||"",h=/^(\[[^\]]+\])(:|$)/.exec(o);if(h){const m=h[1];return{host:m,port:Ey(o.substr(m.length+1))}}else{const[m,_]=o.split(":");return{host:m,port:Ey(_)}}}function Ey(a){if(!a)return null;const e=Number(a);return isNaN(e)?null:e}function RC(){function a(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",a):a())}class J1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return _a("not implemented")}_getIdTokenResponse(e){return _a("not implemented")}_linkToIdToken(e,n){return _a("not implemented")}_getReauthenticationResolver(e){return _a("not implemented")}}async function NC(a,e){return bo(a,"POST","/v1/accounts:signUp",e)}async function OC(a,e){return bu(a,"POST","/v1/accounts:signInWithPassword",Co(a,e))}async function DC(a,e){return bu(a,"POST","/v1/accounts:signInWithEmailLink",Co(a,e))}async function MC(a,e){return bu(a,"POST","/v1/accounts:signInWithEmailLink",Co(a,e))}class du extends J1{constructor(e,n,o,h=null){super("password",o),this._email=e,this._password=n,this._tenantId=h}static _fromEmailAndPassword(e,n){return new du(e,n,"password")}static _fromEmailAndCode(e,n,o=null){return new du(e,n,"emailLink",o)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return y1(e,n,"signInWithPassword",OC);case"emailLink":return DC(e,{email:this._email,oobCode:this._password});default:ws(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const o={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return y1(e,o,"signUpPassword",NC);case"emailLink":return MC(e,{idToken:n,email:this._email,oobCode:this._password});default:ws(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ql(a,e){return bu(a,"POST","/v1/accounts:signInWithIdp",Co(a,e))}const LC="http://localhost";class nl extends J1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new nl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ws("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:o,signInMethod:h,...m}=n;if(!o||!h)return null;const _=new nl(o,h);return _.idToken=m.idToken||void 0,_.accessToken=m.accessToken||void 0,_.secret=m.secret,_.nonce=m.nonce,_.pendingToken=m.pendingToken||null,_}_getIdTokenResponse(e){const n=this.buildRequest();return Ql(e,n)}_linkToIdToken(e,n){const o=this.buildRequest();return o.idToken=n,Ql(e,o)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ql(e,n)}buildRequest(){const e={requestUri:LC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Tu(n)}return e}}function PC(a){switch(a){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function kC(a){const e=Zc(Jc(a)).link,n=e?Zc(Jc(e)).deep_link_id:null,o=Zc(Jc(a)).deep_link_id;return(o?Zc(Jc(o)).link:null)||o||n||e||a}class $1{constructor(e){const n=Zc(Jc(e)),o=n.apiKey??null,h=n.oobCode??null,m=PC(n.mode??null);dt(o&&h&&m,"argument-error"),this.apiKey=o,this.operation=m,this.code=h,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=kC(e);try{return new $1(n)}catch{return null}}}class uc{constructor(){this.providerId=uc.PROVIDER_ID}static credential(e,n){return du._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const o=$1.parseLink(n);return dt(o,"argument-error"),du._fromEmailAndCode(e,o.code,o.tenantId)}}uc.PROVIDER_ID="password";uc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";uc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class w_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class vu extends w_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class so extends vu{constructor(){super("facebook.com")}static credential(e){return nl._fromParams({providerId:so.PROVIDER_ID,signInMethod:so.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return so.credentialFromTaggedObject(e)}static credentialFromError(e){return so.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return so.credential(e.oauthAccessToken)}catch{return null}}}so.FACEBOOK_SIGN_IN_METHOD="facebook.com";so.PROVIDER_ID="facebook.com";class ao extends vu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return nl._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ao.credentialFromTaggedObject(e)}static credentialFromError(e){return ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:o}=e;if(!n&&!o)return null;try{return ao.credential(n,o)}catch{return null}}}ao.GOOGLE_SIGN_IN_METHOD="google.com";ao.PROVIDER_ID="google.com";class oo extends vu{constructor(){super("github.com")}static credential(e){return nl._fromParams({providerId:oo.PROVIDER_ID,signInMethod:oo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oo.credentialFromTaggedObject(e)}static credentialFromError(e){return oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oo.credential(e.oauthAccessToken)}catch{return null}}}oo.GITHUB_SIGN_IN_METHOD="github.com";oo.PROVIDER_ID="github.com";class lo extends vu{constructor(){super("twitter.com")}static credential(e,n){return nl._fromParams({providerId:lo.PROVIDER_ID,signInMethod:lo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return lo.credentialFromTaggedObject(e)}static credentialFromError(e){return lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:o}=e;if(!n||!o)return null;try{return lo.credential(n,o)}catch{return null}}}lo.TWITTER_SIGN_IN_METHOD="twitter.com";lo.PROVIDER_ID="twitter.com";async function BC(a,e){return bu(a,"POST","/v1/accounts:signUp",Co(a,e))}class rl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,o,h=!1){const m=await As._fromIdTokenResponse(e,o,h),_=_y(o);return new rl({user:m,providerId:_,_tokenResponse:o,operationType:n})}static async _forOperation(e,n,o){await e._updateTokensIfNecessary(o,!0);const h=_y(o);return new rl({user:e,providerId:h,_tokenResponse:o,operationType:n})}}function _y(a){return a.providerId?a.providerId:"phoneNumber"in a?"phone":null}class df extends Sa{constructor(e,n,o,h){super(n.code,n.message),this.operationType=o,this.user=h,Object.setPrototypeOf(this,df.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:o}}static _fromErrorAndOperation(e,n,o,h){return new df(e,n,o,h)}}function T_(a,e,n,o){return(e==="reauthenticate"?n._getReauthenticationResolver(a):n._getIdTokenResponse(a)).catch(m=>{throw m.code==="auth/multi-factor-auth-required"?df._fromErrorAndOperation(a,m,e,o):m})}async function VC(a,e,n=!1){const o=await fu(a,e._linkToIdToken(a.auth,await a.getIdToken()),n);return rl._forOperation(a,"link",o)}async function UC(a,e,n=!1){const{auth:o}=a;if(ls(o.app))return Promise.reject(Aa(o));const h="reauthenticate";try{const m=await fu(a,T_(o,h,e,a),n);dt(m.idToken,o,"internal-error");const _=Q1(m.idToken);dt(_,o,"internal-error");const{sub:b}=_;return dt(a.uid===b,o,"user-mismatch"),rl._forOperation(a,h,m)}catch(m){throw m?.code==="auth/user-not-found"&&ws(o,"user-mismatch"),m}}async function C_(a,e,n=!1){if(ls(a.app))return Promise.reject(Aa(a));const o="signIn",h=await T_(a,o,e),m=await rl._fromIdTokenResponse(a,o,h);return n||await a._updateCurrentUser(m.user),m}async function FC(a,e){return C_(ol(a),e)}async function b_(a){const e=ol(a);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function $h(a,e,n){if(ls(a.app))return Promise.reject(Aa(a));const o=ol(a),_=await y1(o,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",BC).catch(T=>{throw T.code==="auth/password-does-not-meet-requirements"&&b_(a),T}),b=await rl._fromIdTokenResponse(o,"signIn",_);return await o._updateCurrentUser(b.user),b}function zC(a,e,n){return ls(a.app)?Promise.reject(Aa(a)):FC(cr(a),uc.credential(e,n)).catch(async o=>{throw o.code==="auth/password-does-not-meet-requirements"&&b_(a),o})}function jC(a,e,n,o){return cr(a).onIdTokenChanged(e,n,o)}function HC(a,e,n){return cr(a).beforeAuthStateChanged(e,n)}function GC(a,e,n,o){return cr(a).onAuthStateChanged(e,n,o)}function qC(a){return cr(a).signOut()}const gf="__sak";class v_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(gf,"1"),this.storage.removeItem(gf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const XC=1e3,YC=10;class S_ extends v_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=y_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const o=this.storage.getItem(n),h=this.localCache[n];o!==h&&e(n,h,o)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((_,b,T)=>{this.notifyListeners(_,T)});return}const o=e.key;n?this.detachListener():this.stopPolling();const h=()=>{const _=this.storage.getItem(o);!n&&this.localCache[o]===_||this.notifyListeners(o,_)},m=this.storage.getItem(o);hC()&&m!==e.newValue&&e.newValue!==e.oldValue?setTimeout(h,YC):h()}notifyListeners(e,n){this.localCache[e]=n;const o=this.listeners[e];if(o)for(const h of Array.from(o))h(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,o)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:o}),!0)})},XC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}S_.type="LOCAL";const WC=S_;class I_ extends v_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}I_.type="SESSION";const R_=I_;function KC(a){return Promise.all(a.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Lf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(h=>h.isListeningto(e));if(n)return n;const o=new Lf(e);return this.receivers.push(o),o}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:o,eventType:h,data:m}=n.data,_=this.handlersMap[h];if(!_?.size)return;n.ports[0].postMessage({status:"ack",eventId:o,eventType:h});const b=Array.from(_).map(async A=>A(n.origin,m)),T=await KC(b);n.ports[0].postMessage({status:"done",eventId:o,eventType:h,response:T})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lf.receivers=[];function eg(a="",e=10){let n="";for(let o=0;o<e;o++)n+=Math.floor(Math.random()*10);return a+n}class QC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,o=50){const h=typeof MessageChannel<"u"?new MessageChannel:null;if(!h)throw new Error("connection_unavailable");let m,_;return new Promise((b,T)=>{const A=eg("",20);h.port1.start();const S=setTimeout(()=>{T(new Error("unsupported_event"))},o);_={messageChannel:h,onMessage(O){const B=O;if(B.data.eventId===A)switch(B.data.status){case"ack":clearTimeout(S),m=setTimeout(()=>{T(new Error("timeout"))},3e3);break;case"done":clearTimeout(m),b(B.data.response);break;default:clearTimeout(S),clearTimeout(m),T(new Error("invalid_response"));break}}},this.handlers.add(_),h.port1.addEventListener("message",_.onMessage),this.target.postMessage({eventType:e,eventId:A,data:n},[h.port2])}).finally(()=>{_&&this.removeMessageHandler(_)})}}function Vs(){return window}function ZC(a){Vs().location.href=a}function N_(){return typeof Vs().WorkerGlobalScope<"u"&&typeof Vs().importScripts=="function"}async function JC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $C(){return navigator?.serviceWorker?.controller||null}function eb(){return N_()?self:null}const O_="firebaseLocalStorageDb",tb=1,mf="firebaseLocalStorage",D_="fbase_key";class Su{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Pf(a,e){return a.transaction([mf],e?"readwrite":"readonly").objectStore(mf)}function nb(){const a=indexedDB.deleteDatabase(O_);return new Su(a).toPromise()}function E1(){const a=indexedDB.open(O_,tb);return new Promise((e,n)=>{a.addEventListener("error",()=>{n(a.error)}),a.addEventListener("upgradeneeded",()=>{const o=a.result;try{o.createObjectStore(mf,{keyPath:D_})}catch(h){n(h)}}),a.addEventListener("success",async()=>{const o=a.result;o.objectStoreNames.contains(mf)?e(o):(o.close(),await nb(),e(await E1()))})})}async function xy(a,e,n){const o=Pf(a,!0).put({[D_]:e,value:n});return new Su(o).toPromise()}async function rb(a,e){const n=Pf(a,!1).get(e),o=await new Su(n).toPromise();return o===void 0?null:o.value}function Ay(a,e){const n=Pf(a,!0).delete(e);return new Su(n).toPromise()}const ib=800,sb=3;class M_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await E1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const o=await this._openDb();return await e(o)}catch(o){if(n++>sb)throw o;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return N_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lf._getInstance(eb()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await JC(),!this.activeServiceWorker)return;this.sender=new QC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$C()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await E1();return await xy(e,gf,"1"),await Ay(e,gf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(o=>xy(o,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(o=>rb(o,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ay(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(h=>{const m=Pf(h,!1).getAll();return new Su(m).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],o=new Set;if(e.length!==0)for(const{fbase_key:h,value:m}of e)o.add(h),JSON.stringify(this.localCache[h])!==JSON.stringify(m)&&(this.notifyListeners(h,m),n.push(h));for(const h of Object.keys(this.localCache))this.localCache[h]&&!o.has(h)&&(this.notifyListeners(h,null),n.push(h));return n}notifyListeners(e,n){this.localCache[e]=n;const o=this.listeners[e];if(o)for(const h of Array.from(o))h(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ib)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}M_.type="LOCAL";const ab=M_;new Cu(3e4,6e4);function ob(a,e){return e?xa(e):(dt(a._popupRedirectResolver,a,"argument-error"),a._popupRedirectResolver)}class tg extends J1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ql(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ql(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ql(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function lb(a){return C_(a.auth,new tg(a),a.bypassAuthState)}function cb(a){const{auth:e,user:n}=a;return dt(n,e,"internal-error"),UC(n,new tg(a),a.bypassAuthState)}async function ub(a){const{auth:e,user:n}=a;return dt(n,e,"internal-error"),VC(n,new tg(a),a.bypassAuthState)}class L_{constructor(e,n,o,h,m=!1){this.auth=e,this.resolver=o,this.user=h,this.bypassAuthState=m,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(o){this.reject(o)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:o,postBody:h,tenantId:m,error:_,type:b}=e;if(_){this.reject(_);return}const T={auth:this.auth,requestUri:n,sessionId:o,tenantId:m||void 0,postBody:h||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(b)(T))}catch(A){this.reject(A)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lb;case"linkViaPopup":case"linkViaRedirect":return ub;case"reauthViaPopup":case"reauthViaRedirect":return cb;default:ws(this.auth,"internal-error")}}resolve(e){Ca(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ca(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const hb=new Cu(2e3,1e4);class ql extends L_{constructor(e,n,o,h,m){super(e,n,h,m),this.provider=o,this.authWindow=null,this.pollId=null,ql.currentPopupAction&&ql.currentPopupAction.cancel(),ql.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return dt(e,this.auth,"internal-error"),e}async onExecution(){Ca(this.filter.length===1,"Popup operations only handle one event");const e=eg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Bs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Bs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ql.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hb.get())};e()}}ql.currentPopupAction=null;const fb="pendingRedirect",ef=new Map;class db extends L_{constructor(e,n,o=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,o),this.eventId=null}async execute(){let e=ef.get(this.auth._key());if(!e){try{const o=await gb(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(o)}catch(n){e=()=>Promise.reject(n)}ef.set(this.auth._key(),e)}return this.bypassAuthState||ef.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gb(a,e){const n=yb(e),o=pb(a);if(!await o._isAvailable())return!1;const h=await o._get(n)==="true";return await o._remove(n),h}function mb(a,e){ef.set(a._key(),e)}function pb(a){return xa(a._redirectPersistence)}function yb(a){return Jh(fb,a.config.apiKey,a.name)}async function Eb(a,e,n=!1){if(ls(a.app))return Promise.reject(Aa(a));const o=ol(a),h=ob(o,e),_=await new db(o,h,n).execute();return _&&!n&&(delete _.user._redirectEventId,await o._persistUserIfCurrent(_.user),await o._setRedirectUser(null,e)),_}const _b=600*1e3;class xb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(o=>{this.isEventForConsumer(e,o)&&(n=!0,this.sendToConsumer(e,o),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ab(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!P_(e)){const o=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Bs(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const o=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&o}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_b&&this.cachedEventUids.clear(),this.cachedEventUids.has(wy(e))}saveEventToCache(e){this.cachedEventUids.add(wy(e)),this.lastProcessedEventTime=Date.now()}}function wy(a){return[a.type,a.eventId,a.sessionId,a.tenantId].filter(e=>e).join("-")}function P_({type:a,error:e}){return a==="unknown"&&e?.code==="auth/no-auth-event"}function Ab(a){switch(a.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return P_(a);default:return!1}}async function wb(a,e={}){return bo(a,"GET","/v1/projects",e)}const Tb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Cb=/^https?/;async function bb(a){if(a.config.emulator)return;const{authorizedDomains:e}=await wb(a);for(const n of e)try{if(vb(n))return}catch{}ws(a,"unauthorized-domain")}function vb(a){const e=m1(),{protocol:n,hostname:o}=new URL(e);if(a.startsWith("chrome-extension://")){const _=new URL(a);return _.hostname===""&&o===""?n==="chrome-extension:"&&a.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&_.hostname===o}if(!Cb.test(n))return!1;if(Tb.test(a))return o===a;const h=a.replace(/\./g,"\\.");return new RegExp("^(.+\\."+h+"|"+h+")$","i").test(o)}const Sb=new Cu(3e4,6e4);function Ty(){const a=Vs().___jsl;if(a?.H){for(const e of Object.keys(a.H))if(a.H[e].r=a.H[e].r||[],a.H[e].L=a.H[e].L||[],a.H[e].r=[...a.H[e].L],a.CP)for(let n=0;n<a.CP.length;n++)a.CP[n]=null}}function Ib(a){return new Promise((e,n)=>{function o(){Ty(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ty(),n(Bs(a,"network-request-failed"))},timeout:Sb.get()})}if(Vs().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Vs().gapi?.load)o();else{const h=xC("iframefcb");return Vs()[h]=()=>{gapi.load?o():n(Bs(a,"network-request-failed"))},__(`${_C()}?onload=${h}`).catch(m=>n(m))}}).catch(e=>{throw tf=null,e})}let tf=null;function Rb(a){return tf=tf||Ib(a),tf}const Nb=new Cu(5e3,15e3),Ob="__/auth/iframe",Db="emulator/auth/iframe",Mb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Lb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pb(a){const e=a.config;dt(e.authDomain,a,"auth-domain-config-required");const n=e.emulator?K1(e,Db):`https://${a.config.authDomain}/${Ob}`,o={apiKey:e.apiKey,appName:a.name,v:cc},h=Lb.get(a.config.apiHost);h&&(o.eid=h);const m=a._getFrameworks();return m.length&&(o.fw=m.join(",")),`${n}?${Tu(o).slice(1)}`}async function kb(a){const e=await Rb(a),n=Vs().gapi;return dt(n,a,"internal-error"),e.open({where:document.body,url:Pb(a),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Mb,dontclear:!0},o=>new Promise(async(h,m)=>{await o.restyle({setHideOnLeave:!1});const _=Bs(a,"network-request-failed"),b=Vs().setTimeout(()=>{m(_)},Nb.get());function T(){Vs().clearTimeout(b),h(o)}o.ping(T).then(T,()=>{m(_)})}))}const Bb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Vb=500,Ub=600,Fb="_blank",zb="http://localhost";class Cy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jb(a,e,n,o=Vb,h=Ub){const m=Math.max((window.screen.availHeight-h)/2,0).toString(),_=Math.max((window.screen.availWidth-o)/2,0).toString();let b="";const T={...Bb,width:o.toString(),height:h.toString(),top:m,left:_},A=$r().toLowerCase();n&&(b=f_(A)?Fb:n),u_(A)&&(e=e||zb,T.scrollbars="yes");const S=Object.entries(T).reduce((B,[Y,ne])=>`${B}${Y}=${ne},`,"");if(uC(A)&&b!=="_self")return Hb(e||"",b),new Cy(null);const O=window.open(e||"",b,S);dt(O,a,"popup-blocked");try{O.focus()}catch{}return new Cy(O)}function Hb(a,e){const n=document.createElement("a");n.href=a,n.target=e;const o=document.createEvent("MouseEvent");o.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(o)}const Gb="__/auth/handler",qb="emulator/auth/handler",Xb=encodeURIComponent("fac");async function by(a,e,n,o,h,m){dt(a.config.authDomain,a,"auth-domain-config-required"),dt(a.config.apiKey,a,"invalid-api-key");const _={apiKey:a.config.apiKey,appName:a.name,authType:n,redirectUrl:o,v:cc,eventId:h};if(e instanceof w_){e.setDefaultLanguage(a.languageCode),_.providerId=e.providerId||"",NT(e.getCustomParameters())||(_.customParameters=JSON.stringify(e.getCustomParameters()));for(const[S,O]of Object.entries({}))_[S]=O}if(e instanceof vu){const S=e.getScopes().filter(O=>O!=="");S.length>0&&(_.scopes=S.join(","))}a.tenantId&&(_.tid=a.tenantId);const b=_;for(const S of Object.keys(b))b[S]===void 0&&delete b[S];const T=await a._getAppCheckToken(),A=T?`#${Xb}=${encodeURIComponent(T)}`:"";return`${Yb(a)}?${Tu(b).slice(1)}${A}`}function Yb({config:a}){return a.emulator?K1(a,qb):`https://${a.authDomain}/${Gb}`}const $0="webStorageSupport";class Wb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=R_,this._completeRedirectFn=Eb,this._overrideRedirectResult=mb}async _openPopup(e,n,o,h){Ca(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const m=await by(e,n,o,m1(),h);return jb(e,m,eg())}async _openRedirect(e,n,o,h){await this._originValidation(e);const m=await by(e,n,o,m1(),h);return ZC(m),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:h,promise:m}=this.eventManagers[n];return h?Promise.resolve(h):(Ca(m,"If manager is not set, promise should be"),m)}const o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch(()=>{delete this.eventManagers[n]}),o}async initAndGetManager(e){const n=await kb(e),o=new xb(e);return n.register("authEvent",h=>(dt(h?.authEvent,e,"invalid-auth-event"),{status:o.onEvent(h.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:o},this.iframes[e._key()]=n,o}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($0,{type:$0},h=>{const m=h?.[0]?.[$0];m!==void 0&&n(!!m),ws(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=bb(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return y_()||h_()||Z1()}}const Kb=Wb;var vy="@firebase/auth",Sy="1.11.1";class Qb{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(o=>{e(o?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){dt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Zb(a){switch(a){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Jb(a){ec(new tl("auth",(e,{options:n})=>{const o=e.getProvider("app").getImmediate(),h=e.getProvider("heartbeat"),m=e.getProvider("app-check-internal"),{apiKey:_,authDomain:b}=o.options;dt(_&&!_.includes(":"),"invalid-api-key",{appName:o.name});const T={apiKey:_,authDomain:b,clientPlatform:a,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:E_(a)},A=new pC(o,h,m,T);return vC(A,n),A},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,o)=>{e.getProvider("auth-internal").initialize()})),ec(new tl("auth-internal",e=>{const n=ol(e.getProvider("auth").getImmediate());return(o=>new Qb(o))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),go(vy,Sy,Zb(a)),go(vy,Sy,"esm2020")}const $b=300,ev=WE("authIdTokenMaxAge")||$b;let Iy=null;const tv=a=>async e=>{const n=e&&await e.getIdTokenResult(),o=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(o&&o>ev)return;const h=n?.token;Iy!==h&&(Iy=h,await fetch(a,{method:h?"POST":"DELETE",headers:h?{Authorization:`Bearer ${h}`}:{}}))};function k_(a=Y1()){const e=q1(a,"auth");if(e.isInitialized())return e.getImmediate();const n=bC(a,{popupRedirectResolver:Kb,persistence:[ab,WC,R_]}),o=WE("authTokenSyncURL");if(o&&typeof isSecureContext=="boolean"&&isSecureContext){const m=new URL(o,location.origin);if(location.origin===m.origin){const _=tv(m.toString());HC(n,_,()=>_(n.currentUser)),jC(n,b=>_(b))}}const h=XE("auth");return h&&SC(n,`http://${h}`),n}function nv(){return document.getElementsByTagName("head")?.[0]??document}yC({loadJS(a){return new Promise((e,n)=>{const o=document.createElement("script");o.setAttribute("src",a),o.onload=e,o.onerror=h=>{const m=Bs("internal-error");m.customData=h,n(m)},o.type="text/javascript",o.charset="UTF-8",nv().appendChild(o)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Jb("Browser");var Ry=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var mo,B_;(function(){var a;function e(F,j){function P(){}P.prototype=j.prototype,F.F=j.prototype,F.prototype=new P,F.prototype.constructor=F,F.D=function(Q,q,W){for(var G=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)G[Qe-2]=arguments[Qe];return j.prototype[q].apply(Q,G)}}function n(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(o,n),o.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function h(F,j,P){P||(P=0);const Q=Array(16);if(typeof j=="string")for(var q=0;q<16;++q)Q[q]=j.charCodeAt(P++)|j.charCodeAt(P++)<<8|j.charCodeAt(P++)<<16|j.charCodeAt(P++)<<24;else for(q=0;q<16;++q)Q[q]=j[P++]|j[P++]<<8|j[P++]<<16|j[P++]<<24;j=F.g[0],P=F.g[1],q=F.g[2];let W=F.g[3],G;G=j+(W^P&(q^W))+Q[0]+3614090360&4294967295,j=P+(G<<7&4294967295|G>>>25),G=W+(q^j&(P^q))+Q[1]+3905402710&4294967295,W=j+(G<<12&4294967295|G>>>20),G=q+(P^W&(j^P))+Q[2]+606105819&4294967295,q=W+(G<<17&4294967295|G>>>15),G=P+(j^q&(W^j))+Q[3]+3250441966&4294967295,P=q+(G<<22&4294967295|G>>>10),G=j+(W^P&(q^W))+Q[4]+4118548399&4294967295,j=P+(G<<7&4294967295|G>>>25),G=W+(q^j&(P^q))+Q[5]+1200080426&4294967295,W=j+(G<<12&4294967295|G>>>20),G=q+(P^W&(j^P))+Q[6]+2821735955&4294967295,q=W+(G<<17&4294967295|G>>>15),G=P+(j^q&(W^j))+Q[7]+4249261313&4294967295,P=q+(G<<22&4294967295|G>>>10),G=j+(W^P&(q^W))+Q[8]+1770035416&4294967295,j=P+(G<<7&4294967295|G>>>25),G=W+(q^j&(P^q))+Q[9]+2336552879&4294967295,W=j+(G<<12&4294967295|G>>>20),G=q+(P^W&(j^P))+Q[10]+4294925233&4294967295,q=W+(G<<17&4294967295|G>>>15),G=P+(j^q&(W^j))+Q[11]+2304563134&4294967295,P=q+(G<<22&4294967295|G>>>10),G=j+(W^P&(q^W))+Q[12]+1804603682&4294967295,j=P+(G<<7&4294967295|G>>>25),G=W+(q^j&(P^q))+Q[13]+4254626195&4294967295,W=j+(G<<12&4294967295|G>>>20),G=q+(P^W&(j^P))+Q[14]+2792965006&4294967295,q=W+(G<<17&4294967295|G>>>15),G=P+(j^q&(W^j))+Q[15]+1236535329&4294967295,P=q+(G<<22&4294967295|G>>>10),G=j+(q^W&(P^q))+Q[1]+4129170786&4294967295,j=P+(G<<5&4294967295|G>>>27),G=W+(P^q&(j^P))+Q[6]+3225465664&4294967295,W=j+(G<<9&4294967295|G>>>23),G=q+(j^P&(W^j))+Q[11]+643717713&4294967295,q=W+(G<<14&4294967295|G>>>18),G=P+(W^j&(q^W))+Q[0]+3921069994&4294967295,P=q+(G<<20&4294967295|G>>>12),G=j+(q^W&(P^q))+Q[5]+3593408605&4294967295,j=P+(G<<5&4294967295|G>>>27),G=W+(P^q&(j^P))+Q[10]+38016083&4294967295,W=j+(G<<9&4294967295|G>>>23),G=q+(j^P&(W^j))+Q[15]+3634488961&4294967295,q=W+(G<<14&4294967295|G>>>18),G=P+(W^j&(q^W))+Q[4]+3889429448&4294967295,P=q+(G<<20&4294967295|G>>>12),G=j+(q^W&(P^q))+Q[9]+568446438&4294967295,j=P+(G<<5&4294967295|G>>>27),G=W+(P^q&(j^P))+Q[14]+3275163606&4294967295,W=j+(G<<9&4294967295|G>>>23),G=q+(j^P&(W^j))+Q[3]+4107603335&4294967295,q=W+(G<<14&4294967295|G>>>18),G=P+(W^j&(q^W))+Q[8]+1163531501&4294967295,P=q+(G<<20&4294967295|G>>>12),G=j+(q^W&(P^q))+Q[13]+2850285829&4294967295,j=P+(G<<5&4294967295|G>>>27),G=W+(P^q&(j^P))+Q[2]+4243563512&4294967295,W=j+(G<<9&4294967295|G>>>23),G=q+(j^P&(W^j))+Q[7]+1735328473&4294967295,q=W+(G<<14&4294967295|G>>>18),G=P+(W^j&(q^W))+Q[12]+2368359562&4294967295,P=q+(G<<20&4294967295|G>>>12),G=j+(P^q^W)+Q[5]+4294588738&4294967295,j=P+(G<<4&4294967295|G>>>28),G=W+(j^P^q)+Q[8]+2272392833&4294967295,W=j+(G<<11&4294967295|G>>>21),G=q+(W^j^P)+Q[11]+1839030562&4294967295,q=W+(G<<16&4294967295|G>>>16),G=P+(q^W^j)+Q[14]+4259657740&4294967295,P=q+(G<<23&4294967295|G>>>9),G=j+(P^q^W)+Q[1]+2763975236&4294967295,j=P+(G<<4&4294967295|G>>>28),G=W+(j^P^q)+Q[4]+1272893353&4294967295,W=j+(G<<11&4294967295|G>>>21),G=q+(W^j^P)+Q[7]+4139469664&4294967295,q=W+(G<<16&4294967295|G>>>16),G=P+(q^W^j)+Q[10]+3200236656&4294967295,P=q+(G<<23&4294967295|G>>>9),G=j+(P^q^W)+Q[13]+681279174&4294967295,j=P+(G<<4&4294967295|G>>>28),G=W+(j^P^q)+Q[0]+3936430074&4294967295,W=j+(G<<11&4294967295|G>>>21),G=q+(W^j^P)+Q[3]+3572445317&4294967295,q=W+(G<<16&4294967295|G>>>16),G=P+(q^W^j)+Q[6]+76029189&4294967295,P=q+(G<<23&4294967295|G>>>9),G=j+(P^q^W)+Q[9]+3654602809&4294967295,j=P+(G<<4&4294967295|G>>>28),G=W+(j^P^q)+Q[12]+3873151461&4294967295,W=j+(G<<11&4294967295|G>>>21),G=q+(W^j^P)+Q[15]+530742520&4294967295,q=W+(G<<16&4294967295|G>>>16),G=P+(q^W^j)+Q[2]+3299628645&4294967295,P=q+(G<<23&4294967295|G>>>9),G=j+(q^(P|~W))+Q[0]+4096336452&4294967295,j=P+(G<<6&4294967295|G>>>26),G=W+(P^(j|~q))+Q[7]+1126891415&4294967295,W=j+(G<<10&4294967295|G>>>22),G=q+(j^(W|~P))+Q[14]+2878612391&4294967295,q=W+(G<<15&4294967295|G>>>17),G=P+(W^(q|~j))+Q[5]+4237533241&4294967295,P=q+(G<<21&4294967295|G>>>11),G=j+(q^(P|~W))+Q[12]+1700485571&4294967295,j=P+(G<<6&4294967295|G>>>26),G=W+(P^(j|~q))+Q[3]+2399980690&4294967295,W=j+(G<<10&4294967295|G>>>22),G=q+(j^(W|~P))+Q[10]+4293915773&4294967295,q=W+(G<<15&4294967295|G>>>17),G=P+(W^(q|~j))+Q[1]+2240044497&4294967295,P=q+(G<<21&4294967295|G>>>11),G=j+(q^(P|~W))+Q[8]+1873313359&4294967295,j=P+(G<<6&4294967295|G>>>26),G=W+(P^(j|~q))+Q[15]+4264355552&4294967295,W=j+(G<<10&4294967295|G>>>22),G=q+(j^(W|~P))+Q[6]+2734768916&4294967295,q=W+(G<<15&4294967295|G>>>17),G=P+(W^(q|~j))+Q[13]+1309151649&4294967295,P=q+(G<<21&4294967295|G>>>11),G=j+(q^(P|~W))+Q[4]+4149444226&4294967295,j=P+(G<<6&4294967295|G>>>26),G=W+(P^(j|~q))+Q[11]+3174756917&4294967295,W=j+(G<<10&4294967295|G>>>22),G=q+(j^(W|~P))+Q[2]+718787259&4294967295,q=W+(G<<15&4294967295|G>>>17),G=P+(W^(q|~j))+Q[9]+3951481745&4294967295,F.g[0]=F.g[0]+j&4294967295,F.g[1]=F.g[1]+(q+(G<<21&4294967295|G>>>11))&4294967295,F.g[2]=F.g[2]+q&4294967295,F.g[3]=F.g[3]+W&4294967295}o.prototype.v=function(F,j){j===void 0&&(j=F.length);const P=j-this.blockSize,Q=this.C;let q=this.h,W=0;for(;W<j;){if(q==0)for(;W<=P;)h(this,F,W),W+=this.blockSize;if(typeof F=="string"){for(;W<j;)if(Q[q++]=F.charCodeAt(W++),q==this.blockSize){h(this,Q),q=0;break}}else for(;W<j;)if(Q[q++]=F[W++],q==this.blockSize){h(this,Q),q=0;break}}this.h=q,this.o+=j},o.prototype.A=function(){var F=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);F[0]=128;for(var j=1;j<F.length-8;++j)F[j]=0;j=this.o*8;for(var P=F.length-8;P<F.length;++P)F[P]=j&255,j/=256;for(this.v(F),F=Array(16),j=0,P=0;P<4;++P)for(let Q=0;Q<32;Q+=8)F[j++]=this.g[P]>>>Q&255;return F};function m(F,j){var P=b;return Object.prototype.hasOwnProperty.call(P,F)?P[F]:P[F]=j(F)}function _(F,j){this.h=j;const P=[];let Q=!0;for(let q=F.length-1;q>=0;q--){const W=F[q]|0;Q&&W==j||(P[q]=W,Q=!1)}this.g=P}var b={};function T(F){return-128<=F&&F<128?m(F,function(j){return new _([j|0],j<0?-1:0)}):new _([F|0],F<0?-1:0)}function A(F){if(isNaN(F)||!isFinite(F))return O;if(F<0)return ge(A(-F));const j=[];let P=1;for(let Q=0;F>=P;Q++)j[Q]=F/P|0,P*=4294967296;return new _(j,0)}function S(F,j){if(F.length==0)throw Error("number format error: empty string");if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(F.charAt(0)=="-")return ge(S(F.substring(1),j));if(F.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=A(Math.pow(j,8));let Q=O;for(let W=0;W<F.length;W+=8){var q=Math.min(8,F.length-W);const G=parseInt(F.substring(W,W+q),j);q<8?(q=A(Math.pow(j,q)),Q=Q.j(q).add(A(G))):(Q=Q.j(P),Q=Q.add(A(G)))}return Q}var O=T(0),B=T(1),Y=T(16777216);a=_.prototype,a.m=function(){if(ie(this))return-ge(this).m();let F=0,j=1;for(let P=0;P<this.g.length;P++){const Q=this.i(P);F+=(Q>=0?Q:4294967296+Q)*j,j*=4294967296}return F},a.toString=function(F){if(F=F||10,F<2||36<F)throw Error("radix out of range: "+F);if(ne(this))return"0";if(ie(this))return"-"+ge(this).toString(F);const j=A(Math.pow(F,6));var P=this;let Q="";for(;;){const q=Le(P,j).g;P=Ue(P,q.j(j));let W=((P.g.length>0?P.g[0]:P.h)>>>0).toString(F);if(P=q,ne(P))return W+Q;for(;W.length<6;)W="0"+W;Q=W+Q}},a.i=function(F){return F<0?0:F<this.g.length?this.g[F]:this.h};function ne(F){if(F.h!=0)return!1;for(let j=0;j<F.g.length;j++)if(F.g[j]!=0)return!1;return!0}function ie(F){return F.h==-1}a.l=function(F){return F=Ue(this,F),ie(F)?-1:ne(F)?0:1};function ge(F){const j=F.g.length,P=[];for(let Q=0;Q<j;Q++)P[Q]=~F.g[Q];return new _(P,~F.h).add(B)}a.abs=function(){return ie(this)?ge(this):this},a.add=function(F){const j=Math.max(this.g.length,F.g.length),P=[];let Q=0;for(let q=0;q<=j;q++){let W=Q+(this.i(q)&65535)+(F.i(q)&65535),G=(W>>>16)+(this.i(q)>>>16)+(F.i(q)>>>16);Q=G>>>16,W&=65535,G&=65535,P[q]=G<<16|W}return new _(P,P[P.length-1]&-2147483648?-1:0)};function Ue(F,j){return F.add(ge(j))}a.j=function(F){if(ne(this)||ne(F))return O;if(ie(this))return ie(F)?ge(this).j(ge(F)):ge(ge(this).j(F));if(ie(F))return ge(this.j(ge(F)));if(this.l(Y)<0&&F.l(Y)<0)return A(this.m()*F.m());const j=this.g.length+F.g.length,P=[];for(var Q=0;Q<2*j;Q++)P[Q]=0;for(Q=0;Q<this.g.length;Q++)for(let q=0;q<F.g.length;q++){const W=this.i(Q)>>>16,G=this.i(Q)&65535,Qe=F.i(q)>>>16,oe=F.i(q)&65535;P[2*Q+2*q]+=G*oe,Oe(P,2*Q+2*q),P[2*Q+2*q+1]+=W*oe,Oe(P,2*Q+2*q+1),P[2*Q+2*q+1]+=G*Qe,Oe(P,2*Q+2*q+1),P[2*Q+2*q+2]+=W*Qe,Oe(P,2*Q+2*q+2)}for(F=0;F<j;F++)P[F]=P[2*F+1]<<16|P[2*F];for(F=j;F<2*j;F++)P[F]=0;return new _(P,0)};function Oe(F,j){for(;(F[j]&65535)!=F[j];)F[j+1]+=F[j]>>>16,F[j]&=65535,j++}function pe(F,j){this.g=F,this.h=j}function Le(F,j){if(ne(j))throw Error("division by zero");if(ne(F))return new pe(O,O);if(ie(F))return j=Le(ge(F),j),new pe(ge(j.g),ge(j.h));if(ie(j))return j=Le(F,ge(j)),new pe(ge(j.g),j.h);if(F.g.length>30){if(ie(F)||ie(j))throw Error("slowDivide_ only works with positive integers.");for(var P=B,Q=j;Q.l(F)<=0;)P=nt(P),Q=nt(Q);var q=ze(P,1),W=ze(Q,1);for(Q=ze(Q,2),P=ze(P,2);!ne(Q);){var G=W.add(Q);G.l(F)<=0&&(q=q.add(P),W=G),Q=ze(Q,1),P=ze(P,1)}return j=Ue(F,q.j(j)),new pe(q,j)}for(q=O;F.l(j)>=0;){for(P=Math.max(1,Math.floor(F.m()/j.m())),Q=Math.ceil(Math.log(P)/Math.LN2),Q=Q<=48?1:Math.pow(2,Q-48),W=A(P),G=W.j(j);ie(G)||G.l(F)>0;)P-=Q,W=A(P),G=W.j(j);ne(W)&&(W=B),q=q.add(W),F=Ue(F,G)}return new pe(q,F)}a.B=function(F){return Le(this,F).h},a.and=function(F){const j=Math.max(this.g.length,F.g.length),P=[];for(let Q=0;Q<j;Q++)P[Q]=this.i(Q)&F.i(Q);return new _(P,this.h&F.h)},a.or=function(F){const j=Math.max(this.g.length,F.g.length),P=[];for(let Q=0;Q<j;Q++)P[Q]=this.i(Q)|F.i(Q);return new _(P,this.h|F.h)},a.xor=function(F){const j=Math.max(this.g.length,F.g.length),P=[];for(let Q=0;Q<j;Q++)P[Q]=this.i(Q)^F.i(Q);return new _(P,this.h^F.h)};function nt(F){const j=F.g.length+1,P=[];for(let Q=0;Q<j;Q++)P[Q]=F.i(Q)<<1|F.i(Q-1)>>>31;return new _(P,F.h)}function ze(F,j){const P=j>>5;j%=32;const Q=F.g.length-P,q=[];for(let W=0;W<Q;W++)q[W]=j>0?F.i(W+P)>>>j|F.i(W+P+1)<<32-j:F.i(W+P);return new _(q,F.h)}o.prototype.digest=o.prototype.A,o.prototype.reset=o.prototype.u,o.prototype.update=o.prototype.v,B_=o,_.prototype.add=_.prototype.add,_.prototype.multiply=_.prototype.j,_.prototype.modulo=_.prototype.B,_.prototype.compare=_.prototype.l,_.prototype.toNumber=_.prototype.m,_.prototype.toString=_.prototype.toString,_.prototype.getBits=_.prototype.i,_.fromNumber=A,_.fromString=S,mo=_}).apply(typeof Ry<"u"?Ry:typeof self<"u"?self:typeof window<"u"?window:{});var qh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var V_,$c,U_,nf,_1,F_,z_,j_;(function(){var a,e=Object.defineProperty;function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof qh=="object"&&qh];for(var v=0;v<p.length;++v){var N=p[v];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var o=n(this);function h(p,v){if(v)e:{var N=o;p=p.split(".");for(var V=0;V<p.length-1;V++){var se=p[V];if(!(se in N))break e;N=N[se]}p=p[p.length-1],V=N[p],v=v(V),v!=V&&v!=null&&e(N,p,{configurable:!0,writable:!0,value:v})}}h("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),h("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),h("Object.entries",function(p){return p||function(v){var N=[],V;for(V in v)Object.prototype.hasOwnProperty.call(v,V)&&N.push([V,v[V]]);return N}});var m=m||{},_=this||self;function b(p){var v=typeof p;return v=="object"&&p!=null||v=="function"}function T(p,v,N){return p.call.apply(p.bind,arguments)}function A(p,v,N){return A=T,A.apply(null,arguments)}function S(p,v){var N=Array.prototype.slice.call(arguments,1);return function(){var V=N.slice();return V.push.apply(V,arguments),p.apply(this,V)}}function O(p,v){function N(){}N.prototype=v.prototype,p.Z=v.prototype,p.prototype=new N,p.prototype.constructor=p,p.Ob=function(V,se,xe){for(var Be=Array(arguments.length-2),pt=2;pt<arguments.length;pt++)Be[pt-2]=arguments[pt];return v.prototype[se].apply(V,Be)}}var B=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function Y(p){const v=p.length;if(v>0){const N=Array(v);for(let V=0;V<v;V++)N[V]=p[V];return N}return[]}function ne(p,v){for(let V=1;V<arguments.length;V++){const se=arguments[V];var N=typeof se;if(N=N!="object"?N:se?Array.isArray(se)?"array":N:"null",N=="array"||N=="object"&&typeof se.length=="number"){N=p.length||0;const xe=se.length||0;p.length=N+xe;for(let Be=0;Be<xe;Be++)p[N+Be]=se[Be]}else p.push(se)}}class ie{constructor(v,N){this.i=v,this.j=N,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function ge(p){_.setTimeout(()=>{throw p},0)}function Ue(){var p=F;let v=null;return p.g&&(v=p.g,p.g=p.g.next,p.g||(p.h=null),v.next=null),v}class Oe{constructor(){this.h=this.g=null}add(v,N){const V=pe.get();V.set(v,N),this.h?this.h.next=V:this.g=V,this.h=V}}var pe=new ie(()=>new Le,p=>p.reset());class Le{constructor(){this.next=this.g=this.h=null}set(v,N){this.h=v,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let nt,ze=!1,F=new Oe,j=()=>{const p=Promise.resolve(void 0);nt=()=>{p.then(P)}};function P(){for(var p;p=Ue();){try{p.h.call(p.g)}catch(N){ge(N)}var v=pe;v.j(p),v.h<100&&(v.h++,p.next=v.g,v.g=p)}ze=!1}function Q(){this.u=this.u,this.C=this.C}Q.prototype.u=!1,Q.prototype.dispose=function(){this.u||(this.u=!0,this.N())},Q.prototype[Symbol.dispose]=function(){this.dispose()},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function q(p,v){this.type=p,this.g=this.target=v,this.defaultPrevented=!1}q.prototype.h=function(){this.defaultPrevented=!0};var W=(function(){if(!_.addEventListener||!Object.defineProperty)return!1;var p=!1,v=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const N=()=>{};_.addEventListener("test",N,v),_.removeEventListener("test",N,v)}catch{}return p})();function G(p){return/^[\s\xa0]*$/.test(p)}function Qe(p,v){q.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,v)}O(Qe,q),Qe.prototype.init=function(p,v){const N=this.type=p.type,V=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=v,v=p.relatedTarget,v||(N=="mouseover"?v=p.fromElement:N=="mouseout"&&(v=p.toElement)),this.relatedTarget=v,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&Qe.Z.h.call(this)},Qe.prototype.h=function(){Qe.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var oe="closure_listenable_"+(Math.random()*1e6|0),$=0;function le(p,v,N,V,se){this.listener=p,this.proxy=null,this.src=v,this.type=N,this.capture=!!V,this.ha=se,this.key=++$,this.da=this.fa=!1}function Re(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function He(p,v,N){for(const V in p)v.call(N,p[V],V,p)}function Ye(p,v){for(const N in p)v.call(void 0,p[N],N,p)}function Z(p){const v={};for(const N in p)v[N]=p[N];return v}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(p,v){let N,V;for(let se=1;se<arguments.length;se++){V=arguments[se];for(N in V)p[N]=V[N];for(let xe=0;xe<X.length;xe++)N=X[xe],Object.prototype.hasOwnProperty.call(V,N)&&(p[N]=V[N])}}function we(p){this.src=p,this.g={},this.h=0}we.prototype.add=function(p,v,N,V,se){const xe=p.toString();p=this.g[xe],p||(p=this.g[xe]=[],this.h++);const Be=ye(p,v,V,se);return Be>-1?(v=p[Be],N||(v.fa=!1)):(v=new le(v,this.src,xe,!!V,se),v.fa=N,p.push(v)),v};function Fe(p,v){const N=v.type;if(N in p.g){var V=p.g[N],se=Array.prototype.indexOf.call(V,v,void 0),xe;(xe=se>=0)&&Array.prototype.splice.call(V,se,1),xe&&(Re(v),p.g[N].length==0&&(delete p.g[N],p.h--))}}function ye(p,v,N,V){for(let se=0;se<p.length;++se){const xe=p[se];if(!xe.da&&xe.listener==v&&xe.capture==!!N&&xe.ha==V)return se}return-1}var Xe="closure_lm_"+(Math.random()*1e6|0),et={};function lt(p,v,N,V,se){if(Array.isArray(v)){for(let xe=0;xe<v.length;xe++)lt(p,v[xe],N,V,se);return null}return N=Wt(N),p&&p[oe]?p.J(v,N,b(V)?!!V.capture:!1,se):mn(p,v,N,!1,V,se)}function mn(p,v,N,V,se,xe){if(!v)throw Error("Invalid event type");const Be=b(se)?!!se.capture:!!se;let pt=_r(p);if(pt||(p[Xe]=pt=new we(p)),N=pt.add(v,N,V,Be,xe),N.proxy)return N;if(V=Zt(),N.proxy=V,V.src=p,V.listener=N,p.addEventListener)W||(se=Be),se===void 0&&(se=!1),p.addEventListener(v.toString(),V,se);else if(p.attachEvent)p.attachEvent(Bn(v.toString()),V);else if(p.addListener&&p.removeListener)p.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return N}function Zt(){function p(N){return v.call(p.src,p.listener,N)}const v=ur;return p}function kn(p,v,N,V,se){if(Array.isArray(v))for(var xe=0;xe<v.length;xe++)kn(p,v[xe],N,V,se);else V=b(V)?!!V.capture:!!V,N=Wt(N),p&&p[oe]?(p=p.i,xe=String(v).toString(),xe in p.g&&(v=p.g[xe],N=ye(v,N,V,se),N>-1&&(Re(v[N]),Array.prototype.splice.call(v,N,1),v.length==0&&(delete p.g[xe],p.h--)))):p&&(p=_r(p))&&(v=p.g[v.toString()],p=-1,v&&(p=ye(v,N,V,se)),(N=p>-1?v[p]:null)&&_t(N))}function _t(p){if(typeof p!="number"&&p&&!p.da){var v=p.src;if(v&&v[oe])Fe(v.i,p);else{var N=p.type,V=p.proxy;v.removeEventListener?v.removeEventListener(N,V,p.capture):v.detachEvent?v.detachEvent(Bn(N),V):v.addListener&&v.removeListener&&v.removeListener(V),(N=_r(v))?(Fe(N,p),N.h==0&&(N.src=null,v[Xe]=null)):Re(p)}}}function Bn(p){return p in et?et[p]:et[p]="on"+p}function ur(p,v){if(p.da)p=!0;else{v=new Qe(v,this);const N=p.listener,V=p.ha||p.src;p.fa&&_t(p),p=N.call(V,v)}return p}function _r(p){return p=p[Xe],p instanceof we?p:null}var pn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Wt(p){return typeof p=="function"?p:(p[pn]||(p[pn]=function(v){return p.handleEvent(v)}),p[pn])}function rt(){Q.call(this),this.i=new we(this),this.M=this,this.G=null}O(rt,Q),rt.prototype[oe]=!0,rt.prototype.removeEventListener=function(p,v,N,V){kn(this,p,v,N,V)};function yn(p,v){var N,V=p.G;if(V)for(N=[];V;V=V.G)N.push(V);if(p=p.M,V=v.type||v,typeof v=="string")v=new q(v,p);else if(v instanceof q)v.target=v.target||p;else{var se=v;v=new q(V,p),de(v,se)}se=!0;let xe,Be;if(N)for(Be=N.length-1;Be>=0;Be--)xe=v.g=N[Be],se=je(xe,V,!0,v)&&se;if(xe=v.g=p,se=je(xe,V,!0,v)&&se,se=je(xe,V,!1,v)&&se,N)for(Be=0;Be<N.length;Be++)xe=v.g=N[Be],se=je(xe,V,!1,v)&&se}rt.prototype.N=function(){if(rt.Z.N.call(this),this.i){var p=this.i;for(const v in p.g){const N=p.g[v];for(let V=0;V<N.length;V++)Re(N[V]);delete p.g[v],p.h--}}this.G=null},rt.prototype.J=function(p,v,N,V){return this.i.add(String(p),v,!1,N,V)},rt.prototype.K=function(p,v,N,V){return this.i.add(String(p),v,!0,N,V)};function je(p,v,N,V){if(v=p.i.g[String(v)],!v)return!0;v=v.concat();let se=!0;for(let xe=0;xe<v.length;++xe){const Be=v[xe];if(Be&&!Be.da&&Be.capture==N){const pt=Be.listener,Hn=Be.ha||Be.src;Be.fa&&Fe(p.i,Be),se=pt.call(Hn,V)!==!1&&se}}return se&&!V.defaultPrevented}function Ni(p,v){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=A(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:_.setTimeout(p,v||0)}function fs(p){p.g=Ni(()=>{p.g=null,p.i&&(p.i=!1,fs(p))},p.l);const v=p.h;p.h=null,p.m.apply(null,v)}class cn extends Q{constructor(v,N){super(),this.m=v,this.l=N,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:fs(this)}N(){super.N(),this.g&&(_.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ei(p){Q.call(this),this.h=p,this.g={}}O(ei,Q);var qn=[];function qi(p){He(p.g,function(v,N){this.g.hasOwnProperty(N)&&_t(v)},p),p.g={}}ei.prototype.N=function(){ei.Z.N.call(this),qi(this)},ei.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ir=_.JSON.stringify,bn=_.JSON.parse,ti=class{stringify(p){return _.JSON.stringify(p,void 0)}parse(p){return _.JSON.parse(p,void 0)}};function ni(){}function Cs(){}var Ft={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function De(){q.call(this,"d")}O(De,q);function Jt(){q.call(this,"c")}O(Jt,q);var ut={},En=null;function pi(){return En=En||new rt}ut.Ia="serverreachability";function bs(p){q.call(this,ut.Ia,p)}O(bs,q);function ri(p){const v=pi();yn(v,new bs(v))}ut.STAT_EVENT="statevent";function bt(p,v){q.call(this,ut.STAT_EVENT,p),this.stat=v}O(bt,q);function un(p){const v=pi();yn(v,new bt(v,p))}ut.Ja="timingevent";function ii(p,v){q.call(this,ut.Ja,p),this.size=v}O(ii,q);function si(p,v){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return _.setTimeout(function(){p()},v)}function On(){this.g=!0}On.prototype.ua=function(){this.g=!1};function qs(p,v,N,V,se,xe){p.info(function(){if(p.g)if(xe){var Be="",pt=xe.split("&");for(let Kt=0;Kt<pt.length;Kt++){var Hn=pt[Kt].split("=");if(Hn.length>1){const Sn=Hn[0];Hn=Hn[1];const ci=Sn.split("_");Be=ci.length>=2&&ci[1]=="type"?Be+(Sn+"="+Hn+"&"):Be+(Sn+"=redacted&")}}}else Be=null;else Be=xe;return"XMLHTTP REQ ("+V+") [attempt "+se+"]: "+v+`
`+N+`
`+Be})}function Xn(p,v,N,V,se,xe,Be){p.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+se+"]: "+v+`
`+N+`
`+xe+" "+Be})}function xr(p,v,N,V){p.info(function(){return"XMLHTTP TEXT ("+v+"): "+jr(p,N)+(V?" "+V:"")})}function yi(p,v){p.info(function(){return"TIMEOUT: "+v})}On.prototype.info=function(){};function jr(p,v){if(!p.g)return v;if(!v)return null;try{const xe=JSON.parse(v);if(xe){for(p=0;p<xe.length;p++)if(Array.isArray(xe[p])){var N=xe[p];if(!(N.length<2)){var V=N[1];if(Array.isArray(V)&&!(V.length<1)){var se=V[0];if(se!="noop"&&se!="stop"&&se!="close")for(let Be=1;Be<V.length;Be++)V[Be]=""}}}}return ir(xe)}catch{return v}}var ce={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ge={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},mt;function We(){}O(We,ni),We.prototype.g=function(){return new XMLHttpRequest},mt=new We;function Tt(p){return encodeURIComponent(String(p))}function Nt(p){var v=1;p=p.split(":");const N=[];for(;v>0&&p.length;)N.push(p.shift()),v--;return p.length&&N.push(p.join(":")),N}function Ve(p,v,N,V){this.j=p,this.i=v,this.l=N,this.S=V||1,this.V=new ei(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Vn}function Vn(){this.i=null,this.g="",this.h=!1}var tn={},Ot={};function Yn(p,v,N){p.M=1,p.A=Gr(Fn(v)),p.u=N,p.R=!0,ds(p,null)}function ds(p,v){p.F=Date.now(),Xi(p),p.B=Fn(p.A);var N=p.B,V=p.S;Array.isArray(V)||(V=[String(V)]),hn(N.i,"t",V),p.C=0,N=p.j.L,p.h=new Vn,p.g=Ma(p.j,N?v:null,!p.u),p.P>0&&(p.O=new cn(A(p.Y,p,p.g),p.P)),v=p.V,N=p.g,V=p.ba;var se="readystatechange";Array.isArray(se)||(se&&(qn[0]=se.toString()),se=qn);for(let xe=0;xe<se.length;xe++){const Be=lt(N,se[xe],V||v.handleEvent,!1,v.h||v);if(!Be)break;v.g[Be.key]=Be}v=p.J?Z(p.J):{},p.u?(p.v||(p.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,v)):(p.v="GET",p.g.ea(p.B,p.v,null,v)),ri(),qs(p.i,p.v,p.B,p.l,p.S,p.u)}Ve.prototype.ba=function(p){p=p.target;const v=this.O;v&&xi(p)==3?v.j():this.Y(p)},Ve.prototype.Y=function(p){try{if(p==this.g)e:{const pt=xi(this.g),Hn=this.g.ya(),Kt=this.g.ca();if(!(pt<3)&&(pt!=3||this.g&&(this.h.h||this.g.la()||Qn(this.g)))){this.K||pt!=4||Hn==7||(Hn==8||Kt<=0?ri(3):ri(2)),Rn(this);var v=this.g.ca();this.X=v;var N=Ia(this);if(this.o=v==200,Xn(this.i,this.v,this.B,this.l,this.S,pt,v),this.o){if(this.U&&!this.L){t:{if(this.g){var V,se=this.g;if((V=se.g?se.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(V)){var xe=V;break t}}xe=null}if(p=xe)xr(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ar(this,p);else{this.o=!1,this.m=3,un(12),Hr(this),Lt(this);break e}}if(this.R){p=!0;let Sn;for(;!this.K&&this.C<N.length;)if(Sn=hl(this,N),Sn==Ot){pt==4&&(this.m=4,un(14),p=!1),xr(this.i,this.l,null,"[Incomplete Response]");break}else if(Sn==tn){this.m=4,un(15),xr(this.i,this.l,N,"[Invalid Chunk]"),p=!1;break}else xr(this.i,this.l,Sn,null),Ar(this,Sn);if(ai(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||N.length!=0||this.h.h||(this.m=1,un(16),p=!1),this.o=this.o&&p,!p)xr(this.i,this.l,N,"[Invalid Chunked Response]"),Hr(this),Lt(this);else if(N.length>0&&!this.W){this.W=!0;var Be=this.j;Be.g==this&&Be.aa&&!Be.P&&(Be.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),Ee(Be),Be.P=!0,un(11))}}else xr(this.i,this.l,N,null),Ar(this,N);pt==4&&Hr(this),this.o&&!this.K&&(pt==4?Zs(this.j,this):(this.o=!1,Xi(this)))}else li(this.g),v==400&&N.indexOf("Unknown SID")>0?(this.m=3,un(12)):(this.m=0,un(13)),Hr(this),Lt(this)}}}catch{}finally{}};function Ia(p){if(!ai(p))return p.g.la();const v=Qn(p.g);if(v==="")return"";let N="";const V=v.length,se=xi(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return Hr(p),Lt(p),"";p.h.i=new _.TextDecoder}for(let xe=0;xe<V;xe++)p.h.h=!0,N+=p.h.i.decode(v[xe],{stream:!(se&&xe==V-1)});return v.length=0,p.h.g+=N,p.C=0,p.h.g}function ai(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function hl(p,v){var N=p.C,V=v.indexOf(`
`,N);return V==-1?Ot:(N=Number(v.substring(N,V)),isNaN(N)?tn:(V+=1,V+N>v.length?Ot:(v=v.slice(V,V+N),p.C=V+N,v)))}Ve.prototype.cancel=function(){this.K=!0,Hr(this)};function Xi(p){p.T=Date.now()+p.H,Nr(p,p.H)}function Nr(p,v){if(p.D!=null)throw Error("WatchDog timer not null");p.D=si(A(p.aa,p),v)}function Rn(p){p.D&&(_.clearTimeout(p.D),p.D=null)}Ve.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(yi(this.i,this.B),this.M!=2&&(ri(),un(17)),Hr(this),this.m=2,Lt(this)):Nr(this,this.T-p)};function Lt(p){p.j.I==0||p.K||Zs(p.j,p)}function Hr(p){Rn(p);var v=p.O;v&&typeof v.dispose=="function"&&v.dispose(),p.O=null,qi(p.V),p.g&&(v=p.g,p.g=null,v.abort(),v.dispose())}function Ar(p,v){try{var N=p.j;if(N.I!=0&&(N.g==p||Or(N.h,p))){if(!p.L&&Or(N.h,p)&&N.I==3){try{var V=N.Ba.g.parse(v)}catch{V=null}if(Array.isArray(V)&&V.length==3){var se=V;if(se[0]==0){e:if(!N.v){if(N.g)if(N.g.F+3e3<p.F)zn(N),ps(N);else break e;Qs(N),un(18)}}else N.xa=se[1],0<N.xa-N.K&&se[2]<37500&&N.F&&N.A==0&&!N.C&&(N.C=si(A(N.Va,N),6e3));nn(N.h)<=1&&N.ta&&(N.ta=void 0)}else Ki(N,11)}else if((p.L||N.g==p)&&zn(N),!G(v))for(se=N.Ba.g.parse(v),v=0;v<se.length;v++){let Kt=se[v];const Sn=Kt[0];if(!(Sn<=N.K))if(N.K=Sn,Kt=Kt[1],N.I==2)if(Kt[0]=="c"){N.M=Kt[1],N.ba=Kt[2];const ci=Kt[3];ci!=null&&(N.ka=ci,N.j.info("VER="+N.ka));const Ji=Kt[4];Ji!=null&&(N.za=Ji,N.j.info("SVER="+N.za));const vr=Kt[5];vr!=null&&typeof vr=="number"&&vr>0&&(V=1.5*vr,N.O=V,N.j.info("backChannelRequestTimeoutMs_="+V)),V=N;const ui=p.g;if(ui){const $s=ui.g?ui.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($s){var xe=V.h;xe.g||$s.indexOf("spdy")==-1&&$s.indexOf("quic")==-1&&$s.indexOf("h2")==-1||(xe.j=xe.l,xe.g=new Set,xe.h&&(Ro(xe,xe.h),xe.h=null))}if(V.G){const $i=ui.g?ui.g.getResponseHeader("X-HTTP-Session-Id"):null;$i&&(V.wa=$i,ht(V.J,V.G,$i))}}N.I=3,N.l&&N.l.ra(),N.aa&&(N.T=Date.now()-p.F,N.j.info("Handshake RTT: "+N.T+"ms")),V=N;var Be=p;if(V.na=dl(V,V.L?V.ba:null,V.W),Be.L){zt(V.h,Be);var pt=Be,Hn=V.O;Hn&&(pt.H=Hn),pt.D&&(Rn(pt),Xi(pt)),V.g=Be}else Li(V);N.i.length>0&&Wi(N)}else Kt[0]!="stop"&&Kt[0]!="close"||Ki(N,7);else N.I==3&&(Kt[0]=="stop"||Kt[0]=="close"?Kt[0]=="stop"?Ki(N,7):Na(N):Kt[0]!="noop"&&N.l&&N.l.qa(Kt),N.A=0)}}ri(4)}catch{}}var Un=class{constructor(p,v){this.g=p,this.map=v}};function Se(p){this.l=p||10,_.PerformanceNavigationTiming?(p=_.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(_.chrome&&_.chrome.loadTimes&&_.chrome.loadTimes()&&_.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Io(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function nn(p){return p.h?1:p.g?p.g.size:0}function Or(p,v){return p.h?p.h==v:p.g?p.g.has(v):!1}function Ro(p,v){p.g?p.g.add(v):p.h=v}function zt(p,v){p.h&&p.h==v?p.h=null:p.g&&p.g.has(v)&&p.g.delete(v)}Se.prototype.cancel=function(){if(this.i=Pt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Pt(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let v=p.i;for(const N of p.g.values())v=v.concat(N.G);return v}return Y(p.i)}var It=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vs(p,v){if(p){p=p.split("&");for(let N=0;N<p.length;N++){const V=p[N].indexOf("=");let se,xe=null;V>=0?(se=p[N].substring(0,V),xe=p[N].substring(V+1)):se=p[N],v(se,xe?decodeURIComponent(xe.replace(/\+/g," ")):"")}}}function Dr(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;p instanceof Dr?(this.l=p.l,Dt(this,p.j),this.o=p.o,this.g=p.g,Mr(this,p.u),this.h=p.h,No(this,Oo(p.i)),this.m=p.m):p&&(v=String(p).match(It))?(this.l=!1,Dt(this,v[1]||"",!0),this.o=Yi(v[2]||""),this.g=Yi(v[3]||"",!0),Mr(this,v[4]),this.h=Yi(v[5]||"",!0),No(this,v[6]||"",!0),this.m=Yi(v[7]||"")):(this.l=!1,this.i=new sr(null,this.l))}Dr.prototype.toString=function(){const p=[];var v=this.j;v&&p.push(Ei(v,Wn,!0),":");var N=this.g;return(N||v=="file")&&(p.push("//"),(v=this.o)&&p.push(Ei(v,Wn,!0),"@"),p.push(Tt(N).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.u,N!=null&&p.push(":",String(N))),(N=this.h)&&(this.g&&N.charAt(0)!="/"&&p.push("/"),p.push(Ei(N,N.charAt(0)=="/"?z:ue,!0))),(N=this.i.toString())&&p.push("?",N),(N=this.m)&&p.push("#",Ei(N,Kn)),p.join("")},Dr.prototype.resolve=function(p){const v=Fn(this);let N=!!p.j;N?Dt(v,p.j):N=!!p.o,N?v.o=p.o:N=!!p.g,N?v.g=p.g:N=p.u!=null;var V=p.h;if(N)Mr(v,p.u);else if(N=!!p.h){if(V.charAt(0)!="/")if(this.g&&!this.h)V="/"+V;else{var se=v.h.lastIndexOf("/");se!=-1&&(V=v.h.slice(0,se+1)+V)}if(se=V,se==".."||se==".")V="";else if(se.indexOf("./")!=-1||se.indexOf("/.")!=-1){V=se.lastIndexOf("/",0)==0,se=se.split("/");const xe=[];for(let Be=0;Be<se.length;){const pt=se[Be++];pt=="."?V&&Be==se.length&&xe.push(""):pt==".."?((xe.length>1||xe.length==1&&xe[0]!="")&&xe.pop(),V&&Be==se.length&&xe.push("")):(xe.push(pt),V=!0)}V=xe.join("/")}else V=se}return N?v.h=V:N=p.i.toString()!=="",N?No(v,Oo(p.i)):N=!!p.m,N&&(v.m=p.m),v};function Fn(p){return new Dr(p)}function Dt(p,v,N){p.j=N?Yi(v,!0):v,p.j&&(p.j=p.j.replace(/:$/,""))}function Mr(p,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);p.u=v}else p.u=null}function No(p,v,N){v instanceof sr?(p.i=v,Is(p.i,p.l)):(N||(v=Ei(v,Je)),p.i=new sr(v,p.l))}function ht(p,v,N){p.i.set(v,N)}function Gr(p){return ht(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function Yi(p,v){return p?v?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Ei(p,v,N){return typeof p=="string"?(p=encodeURI(p).replace(v,vt),N&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function vt(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Wn=/[#\/\?@]/g,ue=/[#\?:]/g,z=/[#\?]/g,Je=/[#\?@]/g,Kn=/#/g;function sr(p,v){this.h=this.g=null,this.i=p||null,this.j=!!v}function qr(p){p.g||(p.g=new Map,p.h=0,p.i&&vs(p.i,function(v,N){p.add(decodeURIComponent(v.replace(/\+/g," ")),N)}))}a=sr.prototype,a.add=function(p,v){qr(this),this.i=null,p=Ss(this,p);let N=this.g.get(p);return N||this.g.set(p,N=[]),N.push(v),this.h+=1,this};function Ra(p,v){qr(p),v=Ss(p,v),p.g.has(v)&&(p.i=null,p.h-=p.g.get(v).length,p.g.delete(v))}function br(p,v){return qr(p),v=Ss(p,v),p.g.has(v)}a.forEach=function(p,v){qr(this),this.g.forEach(function(N,V){N.forEach(function(se){p.call(v,se,V,this)},this)},this)};function it(p,v){qr(p);let N=[];if(typeof v=="string")br(p,v)&&(N=N.concat(p.g.get(Ss(p,v))));else for(p=Array.from(p.g.values()),v=0;v<p.length;v++)N=N.concat(p[v]);return N}a.set=function(p,v){return qr(this),this.i=null,p=Ss(this,p),br(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[v]),this.h+=1,this},a.get=function(p,v){return p?(p=it(this,p),p.length>0?String(p[0]):v):v};function hn(p,v,N){Ra(p,v),N.length>0&&(p.i=null,p.g.set(Ss(p,v),Y(N)),p.h+=N.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],v=Array.from(this.g.keys());for(let V=0;V<v.length;V++){var N=v[V];const se=Tt(N);N=it(this,N);for(let xe=0;xe<N.length;xe++){let Be=se;N[xe]!==""&&(Be+="="+Tt(N[xe])),p.push(Be)}}return this.i=p.join("&")};function Oo(p){const v=new sr;return v.i=p.i,p.g&&(v.g=new Map(p.g),v.h=p.h),v}function Ss(p,v){return v=String(v),p.j&&(v=v.toLowerCase()),v}function Is(p,v){v&&!p.j&&(qr(p),p.i=null,p.g.forEach(function(N,V){const se=V.toLowerCase();V!=se&&(Ra(this,V),hn(this,se,N))},p)),p.j=v}function Xr(p,v){const N=new On;if(_.Image){const V=new Image;V.onload=S(_i,N,"TestLoadImage: loaded",!0,v,V),V.onerror=S(_i,N,"TestLoadImage: error",!1,v,V),V.onabort=S(_i,N,"TestLoadImage: abort",!1,v,V),V.ontimeout=S(_i,N,"TestLoadImage: timeout",!1,v,V),_.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=p}else v(!1)}function Xs(p,v){const N=new On,V=new AbortController,se=setTimeout(()=>{V.abort(),_i(N,"TestPingServer: timeout",!1,v)},1e4);fetch(p,{signal:V.signal}).then(xe=>{clearTimeout(se),xe.ok?_i(N,"TestPingServer: ok",!0,v):_i(N,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(se),_i(N,"TestPingServer: error",!1,v)})}function _i(p,v,N,V,se){try{se&&(se.onload=null,se.onerror=null,se.onabort=null,se.ontimeout=null),V(N)}catch{}}function vn(){this.g=new ti}function Yr(p){this.i=p.Sb||null,this.h=p.ab||!1}O(Yr,ni),Yr.prototype.g=function(){return new Wr(this.i,this.h)};function Wr(p,v){rt.call(this),this.H=p,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}O(Wr,rt),a=Wr.prototype,a.open=function(p,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=v,this.readyState=1,ct(this)},a.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(v.body=p),(this.H||_).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Rs(this)),this.readyState=0},a.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,ct(this)),this.g&&(this.readyState=3,ct(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof _.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;st(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function st(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}a.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var v=p.value?p.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!p.done}))&&(this.response=this.responseText+=v)}p.done?Rs(this):ct(this),this.readyState==3&&st(this)}},a.Oa=function(p){this.g&&(this.response=this.responseText=p,Rs(this))},a.Na=function(p){this.g&&(this.response=p,Rs(this))},a.ga=function(){this.g&&Rs(this)};function Rs(p){p.readyState=4,p.l=null,p.j=null,p.B=null,ct(p)}a.setRequestHeader=function(p,v){this.A.append(p,v)},a.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],v=this.h.entries();for(var N=v.next();!N.done;)N=N.value,p.push(N[0]+": "+N[1]),N=v.next();return p.join(`\r
`)};function ct(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Wr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function fn(p){let v="";return He(p,function(N,V){v+=V,v+=":",v+=N,v+=`\r
`}),v}function Ys(p,v,N){e:{for(V in N){var V=!1;break e}V=!0}V||(N=fn(N),typeof p=="string"?N!=null&&Tt(N):ht(p,v,N))}function sn(p){rt.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}O(sn,rt);var Oi=/^https?$/i,Di=["POST","PUT"];a=sn.prototype,a.Fa=function(p){this.H=p},a.ea=function(p,v,N,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);v=v?v.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():mt.g(),this.g.onreadystatechange=B(A(this.Ca,this));try{this.B=!0,this.g.open(v,String(p),!0),this.B=!1}catch(xe){Ws(this,xe);return}if(p=N||"",N=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var se in V)N.set(se,V[se]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const xe of V.keys())N.set(xe,V.get(xe));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(N.keys()).find(xe=>xe.toLowerCase()=="content-type"),se=_.FormData&&p instanceof _.FormData,!(Array.prototype.indexOf.call(Di,v,void 0)>=0)||V||se||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[xe,Be]of N)this.g.setRequestHeader(xe,Be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(xe){Ws(this,xe)}};function Ws(p,v){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=v,p.o=5,gs(p),oi(p)}function gs(p){p.A||(p.A=!0,yn(p,"complete"),yn(p,"error"))}a.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,yn(this,"complete"),yn(this,"abort"),oi(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),oi(this,!0)),sn.Z.N.call(this)},a.Ca=function(){this.u||(this.B||this.v||this.j?Mi(this):this.Xa())},a.Xa=function(){Mi(this)};function Mi(p){if(p.h&&typeof m<"u"){if(p.v&&xi(p)==4)setTimeout(p.Ca.bind(p),0);else if(yn(p,"readystatechange"),xi(p)==4){p.h=!1;try{const xe=p.ca();e:switch(xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var N;if(!(N=v)){var V;if(V=xe===0){let Be=String(p.D).match(It)[1]||null;!Be&&_.self&&_.self.location&&(Be=_.self.location.protocol.slice(0,-1)),V=!Oi.test(Be?Be.toLowerCase():"")}N=V}if(N)yn(p,"complete"),yn(p,"success");else{p.o=6;try{var se=xi(p)>2?p.g.statusText:""}catch{se=""}p.l=se+" ["+p.ca()+"]",gs(p)}}finally{oi(p)}}}}function oi(p,v){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const N=p.g;p.g=null,v||yn(p,"ready");try{N.onreadystatechange=null}catch{}}}a.isActive=function(){return!!this.g};function xi(p){return p.g?p.g.readyState:0}a.ca=function(){try{return xi(this)>2?this.g.status:-1}catch{return-1}},a.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.La=function(p){if(this.g){var v=this.g.responseText;return p&&v.indexOf(p)==0&&(v=v.substring(p.length)),bn(v)}};function Qn(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function li(p){const v={};p=(p.g&&xi(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<p.length;V++){if(G(p[V]))continue;var N=Nt(p[V]);const se=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const xe=v[se]||[];v[se]=xe,xe.push(N)}Ye(v,function(V){return V.join(", ")})}a.ya=function(){return this.o},a.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Dn(p,v,N){return N&&N.internalChannelParams&&N.internalChannelParams[p]||v}function ms(p){this.za=0,this.i=[],this.j=new On,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Dn("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Dn("baseRetryDelayMs",5e3,p),this.Za=Dn("retryDelaySeedMs",1e4,p),this.Ta=Dn("forwardChannelMaxRetries",2,p),this.va=Dn("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new Se(p&&p.concurrentRequestLimit),this.Ba=new vn,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}a=ms.prototype,a.ka=8,a.I=1,a.connect=function(p,v,N,V){un(0),this.W=p,this.H=v||{},N&&V!==void 0&&(this.H.OSID=N,this.H.OAID=V),this.F=this.X,this.J=dl(this,null,this.W),Wi(this)};function Na(p){if(Oa(p),p.I==3){var v=p.V++,N=Fn(p.J);if(ht(N,"SID",p.M),ht(N,"RID",v),ht(N,"TYPE","terminate"),Ns(p,N),v=new Ve(p,p.j,v),v.M=2,v.A=Gr(Fn(N)),N=!1,_.navigator&&_.navigator.sendBeacon)try{N=_.navigator.sendBeacon(v.A.toString(),"")}catch{}!N&&_.Image&&(new Image().src=v.A,N=!0),N||(v.g=Ma(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Xi(v)}fl(p)}function ps(p){p.g&&(Ee(p),p.g.cancel(),p.g=null)}function Oa(p){ps(p),p.v&&(_.clearTimeout(p.v),p.v=null),zn(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&_.clearTimeout(p.m),p.m=null)}function Wi(p){if(!Io(p.h)&&!p.m){p.m=!0;var v=p.Ea;nt||j(),ze||(nt(),ze=!0),F.add(v,p),p.D=0}}function Da(p,v){return nn(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=v.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=si(A(p.Ea,p,v),Do(p,p.D)),p.D++,!0)}a.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const se=new Ve(this,this.j,p);let xe=this.o;if(this.U&&(xe?(xe=Z(xe),de(xe,this.U)):xe=this.U),this.u!==null||this.R||(se.J=xe,xe=null),this.S)e:{for(var v=0,N=0;N<this.i.length;N++){t:{var V=this.i[N];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(v+=V,v>4096){v=N;break e}if(v===4096||N===this.i.length-1){v=N+1;break e}}v=1e3}else v=1e3;v=Ks(this,se,v),N=Fn(this.J),ht(N,"RID",p),ht(N,"CVER",22),this.G&&ht(N,"X-HTTP-Session-Id",this.G),Ns(this,N),xe&&(this.R?v="headers="+Tt(fn(xe))+"&"+v:this.u&&Ys(N,this.u,xe)),Ro(this.h,se),this.Ra&&ht(N,"TYPE","init"),this.S?(ht(N,"$req",v),ht(N,"SID","null"),se.U=!0,Yn(se,N,null)):Yn(se,N,v),this.I=2}}else this.I==3&&(p?$t(this,p):this.i.length==0||Io(this.h)||$t(this))};function $t(p,v){var N;v?N=v.l:N=p.V++;const V=Fn(p.J);ht(V,"SID",p.M),ht(V,"RID",N),ht(V,"AID",p.K),Ns(p,V),p.u&&p.o&&Ys(V,p.u,p.o),N=new Ve(p,p.j,N,p.D+1),p.u===null&&(N.J=p.o),v&&(p.i=v.G.concat(p.i)),v=Ks(p,N,1e3),N.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),Ro(p.h,N),Yn(N,V,v)}function Ns(p,v){p.H&&He(p.H,function(N,V){ht(v,V,N)}),p.l&&He({},function(N,V){ht(v,V,N)})}function Ks(p,v,N){N=Math.min(p.i.length,N);const V=p.l?A(p.l.Ka,p.l,p):null;e:{var se=p.i;let pt=-1;for(;;){const Hn=["count="+N];pt==-1?N>0?(pt=se[0].g,Hn.push("ofs="+pt)):pt=0:Hn.push("ofs="+pt);let Kt=!0;for(let Sn=0;Sn<N;Sn++){var xe=se[Sn].g;const ci=se[Sn].map;if(xe-=pt,xe<0)pt=Math.max(0,se[Sn].g-100),Kt=!1;else try{xe="req"+xe+"_"||"";try{var Be=ci instanceof Map?ci:Object.entries(ci);for(const[Ji,vr]of Be){let ui=vr;b(vr)&&(ui=ir(vr)),Hn.push(xe+Ji+"="+encodeURIComponent(ui))}}catch(Ji){throw Hn.push(xe+"type="+encodeURIComponent("_badmap")),Ji}}catch{V&&V(ci)}}if(Kt){Be=Hn.join("&");break e}}Be=void 0}return p=p.i.splice(0,N),v.G=p,Be}function Li(p){if(!p.g&&!p.v){p.Y=1;var v=p.Da;nt||j(),ze||(nt(),ze=!0),F.add(v,p),p.A=0}}function Qs(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=si(A(p.Da,p),Do(p,p.A)),p.A++,!0)}a.Da=function(){if(this.v=null,xt(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=si(A(this.Wa,this),p)}},a.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,un(10),ps(this),xt(this))};function Ee(p){p.B!=null&&(_.clearTimeout(p.B),p.B=null)}function xt(p){p.g=new Ve(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var v=Fn(p.na);ht(v,"RID","rpc"),ht(v,"SID",p.M),ht(v,"AID",p.K),ht(v,"CI",p.F?"0":"1"),!p.F&&p.ia&&ht(v,"TO",p.ia),ht(v,"TYPE","xmlhttp"),Ns(p,v),p.u&&p.o&&Ys(v,p.u,p.o),p.O&&(p.g.H=p.O);var N=p.g;p=p.ba,N.M=1,N.A=Gr(Fn(v)),N.u=null,N.R=!0,ds(N,p)}a.Va=function(){this.C!=null&&(this.C=null,ps(this),Qs(this),un(19))};function zn(p){p.C!=null&&(_.clearTimeout(p.C),p.C=null)}function Zs(p,v){var N=null;if(p.g==v){zn(p),Ee(p),p.g=null;var V=2}else if(Or(p.h,v))N=v.G,zt(p.h,v),V=1;else return;if(p.I!=0){if(v.o)if(V==1){N=v.u?v.u.length:0,v=Date.now()-v.F;var se=p.D;V=pi(),yn(V,new ii(V,N)),Wi(p)}else Li(p);else if(se=v.m,se==3||se==0&&v.X>0||!(V==1&&Da(p,v)||V==2&&Qs(p)))switch(N&&N.length>0&&(v=p.h,v.i=v.i.concat(N)),se){case 1:Ki(p,5);break;case 4:Ki(p,10);break;case 3:Ki(p,6);break;default:Ki(p,2)}}}function Do(p,v){let N=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(N*=2),N*v}function Ki(p,v){if(p.j.info("Error code "+v),v==2){var N=A(p.bb,p),V=p.Ua;const se=!V;V=new Dr(V||"//www.google.com/images/cleardot.gif"),_.location&&_.location.protocol=="http"||Dt(V,"https"),Gr(V),se?Xr(V.toString(),N):Xs(V.toString(),N)}else un(2);p.I=0,p.l&&p.l.pa(v),fl(p),Oa(p)}a.bb=function(p){p?(this.j.info("Successfully pinged google.com"),un(2)):(this.j.info("Failed to ping google.com"),un(1))};function fl(p){if(p.I=0,p.ja=[],p.l){const v=Pt(p.h);(v.length!=0||p.i.length!=0)&&(ne(p.ja,v),ne(p.ja,p.i),p.h.i.length=0,Y(p.i),p.i.length=0),p.l.oa()}}function dl(p,v,N){var V=N instanceof Dr?Fn(N):new Dr(N);if(V.g!="")v&&(V.g=v+"."+V.g),Mr(V,V.u);else{var se=_.location;V=se.protocol,v=v?v+"."+se.hostname:se.hostname,se=+se.port;const xe=new Dr(null);V&&Dt(xe,V),v&&(xe.g=v),se&&Mr(xe,se),N&&(xe.h=N),V=xe}return N=p.G,v=p.wa,N&&v&&ht(V,N,v),ht(V,"VER",p.ka),Ns(p,V),V}function Ma(p,v,N){if(v&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=p.Aa&&!p.ma?new sn(new Yr({ab:N})):new sn(p.ma),v.Fa(p.L),v}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function jn(){}a=jn.prototype,a.ra=function(){},a.qa=function(){},a.pa=function(){},a.oa=function(){},a.isActive=function(){return!0},a.Ka=function(){};function Qi(){}Qi.prototype.g=function(p,v){return new Mt(p,v)};function Mt(p,v){rt.call(this),this.g=new ms(v),this.l=p,this.h=v&&v.messageUrlParams||null,p=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(p?p["X-WebChannel-Content-Type"]=v.messageContentType:p={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(p?p["X-WebChannel-Client-Profile"]=v.sa:p={"X-WebChannel-Client-Profile":v.sa}),this.g.U=p,(p=v&&v.Qb)&&!G(p)&&(this.g.u=p),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!G(v)&&(this.g.G=v,p=this.h,p!==null&&v in p&&(p=this.h,v in p&&delete p[v])),this.j=new kt(this)}O(Mt,rt),Mt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Mt.prototype.close=function(){Na(this.g)},Mt.prototype.o=function(p){var v=this.g;if(typeof p=="string"){var N={};N.__data__=p,p=N}else this.v&&(N={},N.__data__=ir(p),p=N);v.i.push(new Un(v.Ya++,p)),v.I==3&&Wi(v)},Mt.prototype.N=function(){this.g.l=null,delete this.j,Na(this.g),delete this.g,Mt.Z.N.call(this)};function Js(p){De.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var v=p.__sm__;if(v){e:{for(const N in v){p=N;break e}p=void 0}(this.i=p)&&(p=this.i,v=v!==null&&p in v?v[p]:void 0),this.data=v}else this.data=p}O(Js,De);function Zi(){Jt.call(this),this.status=1}O(Zi,Jt);function kt(p){this.g=p}O(kt,jn),kt.prototype.ra=function(){yn(this.g,"a")},kt.prototype.qa=function(p){yn(this.g,new Js(p))},kt.prototype.pa=function(p){yn(this.g,new Zi)},kt.prototype.oa=function(){yn(this.g,"b")},Qi.prototype.createWebChannel=Qi.prototype.g,Mt.prototype.send=Mt.prototype.o,Mt.prototype.open=Mt.prototype.m,Mt.prototype.close=Mt.prototype.close,j_=function(){return new Qi},z_=function(){return pi()},F_=ut,_1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ce.NO_ERROR=0,ce.TIMEOUT=8,ce.HTTP_ERROR=6,nf=ce,Ge.COMPLETE="complete",U_=Ge,Cs.EventType=Ft,Ft.OPEN="a",Ft.CLOSE="b",Ft.ERROR="c",Ft.MESSAGE="d",rt.prototype.listen=rt.prototype.J,$c=Cs,sn.prototype.listenOnce=sn.prototype.K,sn.prototype.getLastError=sn.prototype.Ha,sn.prototype.getLastErrorCode=sn.prototype.ya,sn.prototype.getStatus=sn.prototype.ca,sn.prototype.getResponseJson=sn.prototype.La,sn.prototype.getResponseText=sn.prototype.la,sn.prototype.send=sn.prototype.ea,sn.prototype.setWithCredentials=sn.prototype.Fa,V_=sn}).apply(typeof qh<"u"?qh:typeof self<"u"?self:typeof window<"u"?window:{});const Ny="@firebase/firestore",Oy="4.9.2";class Zr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zr.UNAUTHENTICATED=new Zr(null),Zr.GOOGLE_CREDENTIALS=new Zr("google-credentials-uid"),Zr.FIRST_PARTY=new Zr("first-party-uid"),Zr.MOCK_USER=new Zr("mock-user");let hc="12.3.0";const il=new H1("@firebase/firestore");function zl(){return il.logLevel}function Ke(a,...e){if(il.logLevel<=qt.DEBUG){const n=e.map(ng);il.debug(`Firestore (${hc}): ${a}`,...n)}}function ba(a,...e){if(il.logLevel<=qt.ERROR){const n=e.map(ng);il.error(`Firestore (${hc}): ${a}`,...n)}}function tc(a,...e){if(il.logLevel<=qt.WARN){const n=e.map(ng);il.warn(`Firestore (${hc}): ${a}`,...n)}}function ng(a){if(typeof a=="string")return a;try{return(function(n){return JSON.stringify(n)})(a)}catch{return a}}function gt(a,e,n){let o="Unexpected state";typeof e=="string"?o=e:n=e,H_(a,o,n)}function H_(a,e,n){let o=`FIRESTORE (${hc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${a.toString(16)})`;if(n!==void 0)try{o+=" CONTEXT: "+JSON.stringify(n)}catch{o+=" CONTEXT: "+n}throw ba(o),new Error(o)}function gn(a,e,n,o){let h="Unexpected state";typeof n=="string"?h=n:o=n,a||H_(e,h,o)}function wt(a,e){return a}const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends Sa{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class wa{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class G_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Zr.UNAUTHENTICATED)))}shutdown(){}}class iv{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class sv{constructor(e){this.t=e,this.currentUser=Zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){gn(this.o===void 0,42304);let o=this.i;const h=T=>this.i!==o?(o=this.i,n(T)):Promise.resolve();let m=new wa;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new wa,e.enqueueRetryable((()=>h(this.currentUser)))};const _=()=>{const T=m;e.enqueueRetryable((async()=>{await T.promise,await h(this.currentUser)}))},b=T=>{Ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=T,this.o&&(this.auth.addAuthTokenListener(this.o),_())};this.t.onInit((T=>b(T))),setTimeout((()=>{if(!this.auth){const T=this.t.getImmediate({optional:!0});T?b(T):(Ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),m.resolve(),m=new wa)}}),0),_()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((o=>this.i!==e?(Ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(gn(typeof o.accessToken=="string",31837,{l:o}),new G_(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return gn(e===null||typeof e=="string",2055,{h:e}),new Zr(e)}}class av{constructor(e,n,o){this.P=e,this.T=n,this.I=o,this.type="FirstParty",this.user=Zr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ov{constructor(e,n,o){this.P=e,this.T=n,this.I=o}getToken(){return Promise.resolve(new av(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Zr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Dy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lv{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ls(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){gn(this.o===void 0,3512);const o=m=>{m.error!=null&&Ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const _=m.token!==this.m;return this.m=m.token,Ke("FirebaseAppCheckTokenProvider",`Received ${_?"new":"existing"} token.`),_?n(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable((()=>o(m)))};const h=m=>{Ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((m=>h(m))),setTimeout((()=>{if(!this.appCheck){const m=this.V.getImmediate({optional:!0});m?h(m):Ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Dy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(gn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Dy(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function cv(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(a);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let o=0;o<a;o++)n[o]=Math.floor(256*Math.random());return n}class rg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const h=cv(40);for(let m=0;m<h.length;++m)o.length<20&&h[m]<n&&(o+=e.charAt(h[m]%62))}return o}}function Xt(a,e){return a<e?-1:a>e?1:0}function x1(a,e){const n=Math.min(a.length,e.length);for(let o=0;o<n;o++){const h=a.charAt(o),m=e.charAt(o);if(h!==m)return e1(h)===e1(m)?Xt(h,m):e1(h)?1:-1}return Xt(a.length,e.length)}const uv=55296,hv=57343;function e1(a){const e=a.charCodeAt(0);return e>=uv&&e<=hv}function nc(a,e,n){return a.length===e.length&&a.every(((o,h)=>n(o,e[h])))}const My="__name__";class ks{constructor(e,n,o){n===void 0?n=0:n>e.length&&gt(637,{offset:n,range:e.length}),o===void 0?o=e.length-n:o>e.length-n&&gt(1746,{length:o,range:e.length-n}),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return ks.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ks?e.forEach((o=>{n.push(o)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let h=0;h<o;h++){const m=ks.compareSegments(e.get(h),n.get(h));if(m!==0)return m}return Xt(e.length,n.length)}static compareSegments(e,n){const o=ks.isNumericId(e),h=ks.isNumericId(n);return o&&!h?-1:!o&&h?1:o&&h?ks.extractNumericId(e).compare(ks.extractNumericId(n)):x1(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mo.fromString(e.substring(4,e.length-2))}}class Nn extends ks{construct(e,n,o){return new Nn(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new qe(be.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter((h=>h.length>0)))}return new Nn(n)}static emptyPath(){return new Nn([])}}const fv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fr extends ks{construct(e,n,o){return new Fr(e,n,o)}static isValidIdentifier(e){return fv.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===My}static keyField(){return new Fr([My])}static fromServerFormat(e){const n=[];let o="",h=0;const m=()=>{if(o.length===0)throw new qe(be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let _=!1;for(;h<e.length;){const b=e[h];if(b==="\\"){if(h+1===e.length)throw new qe(be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const T=e[h+1];if(T!=="\\"&&T!=="."&&T!=="`")throw new qe(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=T,h+=2}else b==="`"?(_=!_,h++):b!=="."||_?(o+=b,h++):(m(),h++)}if(m(),_)throw new qe(be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fr(n)}static emptyPath(){return new Fr([])}}class ot{constructor(e){this.path=e}static fromPath(e){return new ot(Nn.fromString(e))}static fromName(e){return new ot(Nn.fromString(e).popFirst(5))}static empty(){return new ot(Nn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Nn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ot(new Nn(e.slice()))}}function q_(a,e,n){if(!n)throw new qe(be.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function dv(a,e,n,o){if(e===!0&&o===!0)throw new qe(be.INVALID_ARGUMENT,`${a} and ${n} cannot be used together.`)}function Ly(a){if(!ot.isDocumentKey(a))throw new qe(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function Py(a){if(ot.isDocumentKey(a))throw new qe(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function X_(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}function kf(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(a);return e?`a custom ${e} object`:"an object"}}return typeof a=="function"?"a function":gt(12329,{type:typeof a})}function gi(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new qe(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=kf(a);throw new qe(be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return a}function Er(a,e){const n={typeString:a};return e&&(n.value=e),n}function Iu(a,e){if(!X_(a))throw new qe(be.INVALID_ARGUMENT,"JSON must be an object");let n;for(const o in e)if(e[o]){const h=e[o].typeString,m="value"in e[o]?{value:e[o].value}:void 0;if(!(o in a)){n=`JSON missing required field: '${o}'`;break}const _=a[o];if(h&&typeof _!==h){n=`JSON field '${o}' must be a ${h}.`;break}if(m!==void 0&&_!==m.value){n=`Expected '${o}' field to equal '${m.value}'`;break}}if(n)throw new qe(be.INVALID_ARGUMENT,n);return!0}const ky=-62135596800,By=1e6;class An{static now(){return An.fromMillis(Date.now())}static fromDate(e){return An.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor((e-1e3*n)*By);return new An(n,o)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new qe(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new qe(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ky)throw new qe(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qe(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/By}_compareTo(e){return this.seconds===e.seconds?Xt(this.nanoseconds,e.nanoseconds):Xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:An._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Iu(e,An._jsonSchema))return new An(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ky;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}An._jsonSchemaVersion="firestore/timestamp/1.0",An._jsonSchema={type:Er("string",An._jsonSchemaVersion),seconds:Er("number"),nanoseconds:Er("number")};class Et{static fromTimestamp(e){return new Et(e)}static min(){return new Et(new An(0,0))}static max(){return new Et(new An(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const gu=-1;function gv(a,e){const n=a.toTimestamp().seconds,o=a.toTimestamp().nanoseconds+1,h=Et.fromTimestamp(o===1e9?new An(n+1,0):new An(n,o));return new Eo(h,ot.empty(),e)}function mv(a){return new Eo(a.readTime,a.key,gu)}class Eo{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new Eo(Et.min(),ot.empty(),gu)}static max(){return new Eo(Et.max(),ot.empty(),gu)}}function pv(a,e){let n=a.readTime.compareTo(e.readTime);return n!==0?n:(n=ot.comparator(a.documentKey,e.documentKey),n!==0?n:Xt(a.largestBatchId,e.largestBatchId))}const yv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ev{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function fc(a){if(a.code!==be.FAILED_PRECONDITION||a.message!==yv)throw a;Ke("LocalStore","Unexpectedly lost primary lease")}class Ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&gt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ie(((o,h)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(o,h)},this.catchCallback=m=>{this.wrapFailure(n,m).next(o,h)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Ie?n:Ie.resolve(n)}catch(n){return Ie.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Ie.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Ie.reject(n)}static resolve(e){return new Ie(((n,o)=>{n(e)}))}static reject(e){return new Ie(((n,o)=>{o(e)}))}static waitFor(e){return new Ie(((n,o)=>{let h=0,m=0,_=!1;e.forEach((b=>{++h,b.next((()=>{++m,_&&m===h&&n()}),(T=>o(T)))})),_=!0,m===h&&n()}))}static or(e){let n=Ie.resolve(!1);for(const o of e)n=n.next((h=>h?Ie.resolve(h):o()));return n}static forEach(e,n){const o=[];return e.forEach(((h,m)=>{o.push(n.call(this,h,m))})),this.waitFor(o)}static mapArray(e,n){return new Ie(((o,h)=>{const m=e.length,_=new Array(m);let b=0;for(let T=0;T<m;T++){const A=T;n(e[A]).next((S=>{_[A]=S,++b,b===m&&o(_)}),(S=>h(S)))}}))}static doWhile(e,n){return new Ie(((o,h)=>{const m=()=>{e()===!0?n().next((()=>{m()}),h):o()};m()}))}}function _v(a){const e=a.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function dc(a){return a.name==="IndexedDbTransactionError"}class Bf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>n.writeSequenceNumber(o))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Bf.ce=-1;const ig=-1;function Vf(a){return a==null}function pf(a){return a===0&&1/a==-1/0}function xv(a){return typeof a=="number"&&Number.isInteger(a)&&!pf(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}const Y_="";function Av(a){let e="";for(let n=0;n<a.length;n++)e.length>0&&(e=Vy(e)),e=wv(a.get(n),e);return Vy(e)}function wv(a,e){let n=e;const o=a.length;for(let h=0;h<o;h++){const m=a.charAt(h);switch(m){case"\0":n+="";break;case Y_:n+="";break;default:n+=m}}return n}function Vy(a){return a+Y_+""}function Uy(a){let e=0;for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&e++;return e}function vo(a,e){for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&e(n,a[n])}function W_(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}class Zn{constructor(e,n){this.comparator=e,this.root=n||Ur.EMPTY}insert(e,n){return new Zn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ur.BLACK,null,null))}remove(e){return new Zn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ur.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(o===0)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const h=this.comparator(e,o.key);if(h===0)return n+o.left.size;h<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,o)=>(e(n,o),!1)))}toString(){const e=[];return this.inorderTraversal(((n,o)=>(e.push(`${n}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xh(this.root,e,this.comparator,!0)}}class Xh{constructor(e,n,o,h){this.isReverse=h,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=n?o(e.key,n):1,n&&h&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(m===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ur{constructor(e,n,o,h,m){this.key=e,this.value=n,this.color=o??Ur.RED,this.left=h??Ur.EMPTY,this.right=m??Ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,h,m){return new Ur(e??this.key,n??this.value,o??this.color,h??this.left,m??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let h=this;const m=o(e,h.key);return h=m<0?h.copy(null,null,null,h.left.insert(e,n,o),null):m===0?h.copy(null,n,null,null,null):h.copy(null,null,null,null,h.right.insert(e,n,o)),h.fixUp()}removeMin(){if(this.left.isEmpty())return Ur.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,h=this;if(n(e,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(e,n),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),n(e,h.key)===0){if(h.right.isEmpty())return Ur.EMPTY;o=h.right.min(),h=h.copy(o.key,o.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(e,n))}return h.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw gt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw gt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw gt(27949);return e+(this.isRed()?0:1)}}Ur.EMPTY=null,Ur.RED=!0,Ur.BLACK=!1;Ur.EMPTY=new class{constructor(){this.size=0}get key(){throw gt(57766)}get value(){throw gt(16141)}get color(){throw gt(16727)}get left(){throw gt(29726)}get right(){throw gt(36894)}copy(e,n,o,h,m){return this}insert(e,n,o){return new Ur(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Cr{constructor(e){this.comparator=e,this.data=new Zn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,o)=>(e(n),!1)))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const h=o.getNext();if(this.comparator(h.key,e[1])>=0)return;n(h.key)}}forEachWhile(e,n){let o;for(o=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Fy(this.data.getIterator())}getIteratorFrom(e){return new Fy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((o=>{n=n.add(o)})),n}isEqual(e){if(!(e instanceof Cr)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const h=n.getNext().key,m=o.getNext().key;if(this.comparator(h,m)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Cr(this.comparator);return n.data=e,n}}class Fy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Gi{constructor(e){this.fields=e,e.sort(Fr.comparator)}static empty(){return new Gi([])}unionWith(e){let n=new Cr(Fr.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new Gi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return nc(this.fields,e.fields,((n,o)=>n.isEqual(o)))}}class K_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class zr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(h){try{return atob(h)}catch(m){throw typeof DOMException<"u"&&m instanceof DOMException?new K_("Invalid base64 string: "+m):m}})(e);return new zr(n)}static fromUint8Array(e){const n=(function(h){let m="";for(let _=0;_<h.length;++_)m+=String.fromCharCode(h[_]);return m})(e);return new zr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const o=new Uint8Array(n.length);for(let h=0;h<n.length;h++)o[h]=n.charCodeAt(h);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zr.EMPTY_BYTE_STRING=new zr("");const Tv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _o(a){if(gn(!!a,39018),typeof a=="string"){let e=0;const n=Tv.exec(a);if(gn(!!n,46558,{timestamp:a}),n[1]){let h=n[1];h=(h+"000000000").substr(0,9),e=Number(h)}const o=new Date(a);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:lr(a.seconds),nanos:lr(a.nanos)}}function lr(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function xo(a){return typeof a=="string"?zr.fromBase64String(a):zr.fromUint8Array(a)}const Q_="server_timestamp",Z_="__type__",J_="__previous_value__",$_="__local_write_time__";function sg(a){return(a?.mapValue?.fields||{})[Z_]?.stringValue===Q_}function Uf(a){const e=a.mapValue.fields[J_];return sg(e)?Uf(e):e}function mu(a){const e=_o(a.mapValue.fields[$_].timestampValue);return new An(e.seconds,e.nanos)}class Cv{constructor(e,n,o,h,m,_,b,T,A,S){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=h,this.ssl=m,this.forceLongPolling=_,this.autoDetectLongPolling=b,this.longPollingOptions=T,this.useFetchStreams=A,this.isUsingEmulator=S}}const yf="(default)";class pu{constructor(e,n){this.projectId=e,this.database=n||yf}static empty(){return new pu("","")}get isDefaultDatabase(){return this.database===yf}isEqual(e){return e instanceof pu&&e.projectId===this.projectId&&e.database===this.database}}const ex="__type__",bv="__max__",Yh={mapValue:{}},tx="__vector__",Ef="value";function Ao(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?sg(a)?4:Sv(a)?9007199254740991:vv(a)?10:11:gt(28295,{value:a})}function Hs(a,e){if(a===e)return!0;const n=Ao(a);if(n!==Ao(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return mu(a).isEqual(mu(e));case 3:return(function(h,m){if(typeof h.timestampValue=="string"&&typeof m.timestampValue=="string"&&h.timestampValue.length===m.timestampValue.length)return h.timestampValue===m.timestampValue;const _=_o(h.timestampValue),b=_o(m.timestampValue);return _.seconds===b.seconds&&_.nanos===b.nanos})(a,e);case 5:return a.stringValue===e.stringValue;case 6:return(function(h,m){return xo(h.bytesValue).isEqual(xo(m.bytesValue))})(a,e);case 7:return a.referenceValue===e.referenceValue;case 8:return(function(h,m){return lr(h.geoPointValue.latitude)===lr(m.geoPointValue.latitude)&&lr(h.geoPointValue.longitude)===lr(m.geoPointValue.longitude)})(a,e);case 2:return(function(h,m){if("integerValue"in h&&"integerValue"in m)return lr(h.integerValue)===lr(m.integerValue);if("doubleValue"in h&&"doubleValue"in m){const _=lr(h.doubleValue),b=lr(m.doubleValue);return _===b?pf(_)===pf(b):isNaN(_)&&isNaN(b)}return!1})(a,e);case 9:return nc(a.arrayValue.values||[],e.arrayValue.values||[],Hs);case 10:case 11:return(function(h,m){const _=h.mapValue.fields||{},b=m.mapValue.fields||{};if(Uy(_)!==Uy(b))return!1;for(const T in _)if(_.hasOwnProperty(T)&&(b[T]===void 0||!Hs(_[T],b[T])))return!1;return!0})(a,e);default:return gt(52216,{left:a})}}function yu(a,e){return(a.values||[]).find((n=>Hs(n,e)))!==void 0}function rc(a,e){if(a===e)return 0;const n=Ao(a),o=Ao(e);if(n!==o)return Xt(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xt(a.booleanValue,e.booleanValue);case 2:return(function(m,_){const b=lr(m.integerValue||m.doubleValue),T=lr(_.integerValue||_.doubleValue);return b<T?-1:b>T?1:b===T?0:isNaN(b)?isNaN(T)?0:-1:1})(a,e);case 3:return zy(a.timestampValue,e.timestampValue);case 4:return zy(mu(a),mu(e));case 5:return x1(a.stringValue,e.stringValue);case 6:return(function(m,_){const b=xo(m),T=xo(_);return b.compareTo(T)})(a.bytesValue,e.bytesValue);case 7:return(function(m,_){const b=m.split("/"),T=_.split("/");for(let A=0;A<b.length&&A<T.length;A++){const S=Xt(b[A],T[A]);if(S!==0)return S}return Xt(b.length,T.length)})(a.referenceValue,e.referenceValue);case 8:return(function(m,_){const b=Xt(lr(m.latitude),lr(_.latitude));return b!==0?b:Xt(lr(m.longitude),lr(_.longitude))})(a.geoPointValue,e.geoPointValue);case 9:return jy(a.arrayValue,e.arrayValue);case 10:return(function(m,_){const b=m.fields||{},T=_.fields||{},A=b[Ef]?.arrayValue,S=T[Ef]?.arrayValue,O=Xt(A?.values?.length||0,S?.values?.length||0);return O!==0?O:jy(A,S)})(a.mapValue,e.mapValue);case 11:return(function(m,_){if(m===Yh.mapValue&&_===Yh.mapValue)return 0;if(m===Yh.mapValue)return 1;if(_===Yh.mapValue)return-1;const b=m.fields||{},T=Object.keys(b),A=_.fields||{},S=Object.keys(A);T.sort(),S.sort();for(let O=0;O<T.length&&O<S.length;++O){const B=x1(T[O],S[O]);if(B!==0)return B;const Y=rc(b[T[O]],A[S[O]]);if(Y!==0)return Y}return Xt(T.length,S.length)})(a.mapValue,e.mapValue);default:throw gt(23264,{he:n})}}function zy(a,e){if(typeof a=="string"&&typeof e=="string"&&a.length===e.length)return Xt(a,e);const n=_o(a),o=_o(e),h=Xt(n.seconds,o.seconds);return h!==0?h:Xt(n.nanos,o.nanos)}function jy(a,e){const n=a.values||[],o=e.values||[];for(let h=0;h<n.length&&h<o.length;++h){const m=rc(n[h],o[h]);if(m)return m}return Xt(n.length,o.length)}function ic(a){return A1(a)}function A1(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?(function(n){const o=_o(n);return`time(${o.seconds},${o.nanos})`})(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?(function(n){return xo(n).toBase64()})(a.bytesValue):"referenceValue"in a?(function(n){return ot.fromName(n).toString()})(a.referenceValue):"geoPointValue"in a?(function(n){return`geo(${n.latitude},${n.longitude})`})(a.geoPointValue):"arrayValue"in a?(function(n){let o="[",h=!0;for(const m of n.values||[])h?h=!1:o+=",",o+=A1(m);return o+"]"})(a.arrayValue):"mapValue"in a?(function(n){const o=Object.keys(n.fields||{}).sort();let h="{",m=!0;for(const _ of o)m?m=!1:h+=",",h+=`${_}:${A1(n.fields[_])}`;return h+"}"})(a.mapValue):gt(61005,{value:a})}function rf(a){switch(Ao(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uf(a);return e?16+rf(e):16;case 5:return 2*a.stringValue.length;case 6:return xo(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((h,m)=>h+rf(m)),0)})(a.arrayValue);case 10:case 11:return(function(o){let h=0;return vo(o.fields,((m,_)=>{h+=m.length+rf(_)})),h})(a.mapValue);default:throw gt(13486,{value:a})}}function Hy(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function w1(a){return!!a&&"integerValue"in a}function ag(a){return!!a&&"arrayValue"in a}function Gy(a){return!!a&&"nullValue"in a}function qy(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function sf(a){return!!a&&"mapValue"in a}function vv(a){return(a?.mapValue?.fields||{})[ex]?.stringValue===tx}function au(a){if(a.geoPointValue)return{geoPointValue:{...a.geoPointValue}};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:{...a.timestampValue}};if(a.mapValue){const e={mapValue:{fields:{}}};return vo(a.mapValue.fields,((n,o)=>e.mapValue.fields[n]=au(o))),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(a.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=au(a.arrayValue.values[n]);return e}return{...a}}function Sv(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue===bv}class Ri{constructor(e){this.value=e}static empty(){return new Ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!sf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=au(n)}setAll(e){let n=Fr.emptyPath(),o={},h=[];e.forEach(((_,b)=>{if(!n.isImmediateParentOf(b)){const T=this.getFieldsMap(n);this.applyChanges(T,o,h),o={},h=[],n=b.popLast()}_?o[b.lastSegment()]=au(_):h.push(b.lastSegment())}));const m=this.getFieldsMap(n);this.applyChanges(m,o,h)}delete(e){const n=this.field(e.popLast());sf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let h=n.mapValue.fields[e.get(o)];sf(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=h),n=h}return n.mapValue.fields}applyChanges(e,n,o){vo(n,((h,m)=>e[h]=m));for(const h of o)delete e[h]}clone(){return new Ri(au(this.value))}}function nx(a){const e=[];return vo(a.fields,((n,o)=>{const h=new Fr([n]);if(sf(o)){const m=nx(o.mapValue).fields;if(m.length===0)e.push(h);else for(const _ of m)e.push(h.child(_))}else e.push(h)})),new Gi(e)}class Jr{constructor(e,n,o,h,m,_,b){this.key=e,this.documentType=n,this.version=o,this.readTime=h,this.createTime=m,this.data=_,this.documentState=b}static newInvalidDocument(e){return new Jr(e,0,Et.min(),Et.min(),Et.min(),Ri.empty(),0)}static newFoundDocument(e,n,o,h){return new Jr(e,1,n,Et.min(),o,h,0)}static newNoDocument(e,n){return new Jr(e,2,n,Et.min(),Et.min(),Ri.empty(),0)}static newUnknownDocument(e,n){return new Jr(e,3,n,Et.min(),Et.min(),Ri.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class _f{constructor(e,n){this.position=e,this.inclusive=n}}function Xy(a,e,n){let o=0;for(let h=0;h<a.position.length;h++){const m=e[h],_=a.position[h];if(m.field.isKeyField()?o=ot.comparator(ot.fromName(_.referenceValue),n.key):o=rc(_,n.data.field(m.field)),m.dir==="desc"&&(o*=-1),o!==0)break}return o}function Yy(a,e){if(a===null)return e===null;if(e===null||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let n=0;n<a.position.length;n++)if(!Hs(a.position[n],e.position[n]))return!1;return!0}class xf{constructor(e,n="asc"){this.field=e,this.dir=n}}function Iv(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}class rx{}class yr extends rx{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,o):new Nv(e,n,o):n==="array-contains"?new Mv(e,o):n==="in"?new Lv(e,o):n==="not-in"?new Pv(e,o):n==="array-contains-any"?new kv(e,o):new yr(e,n,o)}static createKeyFieldInFilter(e,n,o){return n==="in"?new Ov(e,o):new Dv(e,o)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(rc(n,this.value)):n!==null&&Ao(this.value)===Ao(n)&&this.matchesComparison(rc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return gt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ts extends rx{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ts(e,n)}matches(e){return ix(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ix(a){return a.op==="and"}function sx(a){return Rv(a)&&ix(a)}function Rv(a){for(const e of a.filters)if(e instanceof Ts)return!1;return!0}function T1(a){if(a instanceof yr)return a.field.canonicalString()+a.op.toString()+ic(a.value);if(sx(a))return a.filters.map((e=>T1(e))).join(",");{const e=a.filters.map((n=>T1(n))).join(",");return`${a.op}(${e})`}}function ax(a,e){return a instanceof yr?(function(o,h){return h instanceof yr&&o.op===h.op&&o.field.isEqual(h.field)&&Hs(o.value,h.value)})(a,e):a instanceof Ts?(function(o,h){return h instanceof Ts&&o.op===h.op&&o.filters.length===h.filters.length?o.filters.reduce(((m,_,b)=>m&&ax(_,h.filters[b])),!0):!1})(a,e):void gt(19439)}function ox(a){return a instanceof yr?(function(n){return`${n.field.canonicalString()} ${n.op} ${ic(n.value)}`})(a):a instanceof Ts?(function(n){return n.op.toString()+" {"+n.getFilters().map(ox).join(" ,")+"}"})(a):"Filter"}class Nv extends yr{constructor(e,n,o){super(e,n,o),this.key=ot.fromName(o.referenceValue)}matches(e){const n=ot.comparator(e.key,this.key);return this.matchesComparison(n)}}class Ov extends yr{constructor(e,n){super(e,"in",n),this.keys=lx("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Dv extends yr{constructor(e,n){super(e,"not-in",n),this.keys=lx("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function lx(a,e){return(e.arrayValue?.values||[]).map((n=>ot.fromName(n.referenceValue)))}class Mv extends yr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ag(n)&&yu(n.arrayValue,this.value)}}class Lv extends yr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&yu(this.value.arrayValue,n)}}class Pv extends yr{constructor(e,n){super(e,"not-in",n)}matches(e){if(yu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!yu(this.value.arrayValue,n)}}class kv extends yr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ag(n)||!n.arrayValue.values)&&n.arrayValue.values.some((o=>yu(this.value.arrayValue,o)))}}class Bv{constructor(e,n=null,o=[],h=[],m=null,_=null,b=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=h,this.limit=m,this.startAt=_,this.endAt=b,this.Te=null}}function Wy(a,e=null,n=[],o=[],h=null,m=null,_=null){return new Bv(a,e,n,o,h,m,_)}function og(a){const e=wt(a);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((o=>T1(o))).join(","),n+="|ob:",n+=e.orderBy.map((o=>(function(m){return m.field.canonicalString()+m.dir})(o))).join(","),Vf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((o=>ic(o))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((o=>ic(o))).join(",")),e.Te=n}return e.Te}function lg(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<a.orderBy.length;n++)if(!Iv(a.orderBy[n],e.orderBy[n]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let n=0;n<a.filters.length;n++)if(!ax(a.filters[n],e.filters[n]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!Yy(a.startAt,e.startAt)&&Yy(a.endAt,e.endAt)}function C1(a){return ot.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}class Ru{constructor(e,n=null,o=[],h=[],m=null,_="F",b=null,T=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=h,this.limit=m,this.limitType=_,this.startAt=b,this.endAt=T,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Vv(a,e,n,o,h,m,_,b){return new Ru(a,e,n,o,h,m,_,b)}function Ff(a){return new Ru(a)}function Ky(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function cx(a){return a.collectionGroup!==null}function ou(a){const e=wt(a);if(e.Ie===null){e.Ie=[];const n=new Set;for(const m of e.explicitOrderBy)e.Ie.push(m),n.add(m.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(_){let b=new Cr(Fr.comparator);return _.filters.forEach((T=>{T.getFlattenedFilters().forEach((A=>{A.isInequality()&&(b=b.add(A.field))}))})),b})(e).forEach((m=>{n.has(m.canonicalString())||m.isKeyField()||e.Ie.push(new xf(m,o))})),n.has(Fr.keyField().canonicalString())||e.Ie.push(new xf(Fr.keyField(),o))}return e.Ie}function Us(a){const e=wt(a);return e.Ee||(e.Ee=Uv(e,ou(a))),e.Ee}function Uv(a,e){if(a.limitType==="F")return Wy(a.path,a.collectionGroup,e,a.filters,a.limit,a.startAt,a.endAt);{e=e.map((h=>{const m=h.dir==="desc"?"asc":"desc";return new xf(h.field,m)}));const n=a.endAt?new _f(a.endAt.position,a.endAt.inclusive):null,o=a.startAt?new _f(a.startAt.position,a.startAt.inclusive):null;return Wy(a.path,a.collectionGroup,e,a.filters,a.limit,n,o)}}function b1(a,e){const n=a.filters.concat([e]);return new Ru(a.path,a.collectionGroup,a.explicitOrderBy.slice(),n,a.limit,a.limitType,a.startAt,a.endAt)}function v1(a,e,n){return new Ru(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,n,a.startAt,a.endAt)}function zf(a,e){return lg(Us(a),Us(e))&&a.limitType===e.limitType}function ux(a){return`${og(Us(a))}|lt:${a.limitType}`}function jl(a){return`Query(target=${(function(n){let o=n.path.canonicalString();return n.collectionGroup!==null&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map((h=>ox(h))).join(", ")}]`),Vf(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map((h=>(function(_){return`${_.field.canonicalString()} (${_.dir})`})(h))).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map((h=>ic(h))).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map((h=>ic(h))).join(",")),`Target(${o})`})(Us(a))}; limitType=${a.limitType})`}function jf(a,e){return e.isFoundDocument()&&(function(o,h){const m=h.key.path;return o.collectionGroup!==null?h.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(m):ot.isDocumentKey(o.path)?o.path.isEqual(m):o.path.isImmediateParentOf(m)})(a,e)&&(function(o,h){for(const m of ou(o))if(!m.field.isKeyField()&&h.data.field(m.field)===null)return!1;return!0})(a,e)&&(function(o,h){for(const m of o.filters)if(!m.matches(h))return!1;return!0})(a,e)&&(function(o,h){return!(o.startAt&&!(function(_,b,T){const A=Xy(_,b,T);return _.inclusive?A<=0:A<0})(o.startAt,ou(o),h)||o.endAt&&!(function(_,b,T){const A=Xy(_,b,T);return _.inclusive?A>=0:A>0})(o.endAt,ou(o),h))})(a,e)}function Fv(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function hx(a){return(e,n)=>{let o=!1;for(const h of ou(a)){const m=zv(h,e,n);if(m!==0)return m;o=o||h.field.isKeyField()}return 0}}function zv(a,e,n){const o=a.field.isKeyField()?ot.comparator(e.key,n.key):(function(m,_,b){const T=_.data.field(m),A=b.data.field(m);return T!==null&&A!==null?rc(T,A):gt(42886)})(a.field,e,n);switch(a.dir){case"asc":return o;case"desc":return-1*o;default:return gt(19790,{direction:a.dir})}}class ll{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o!==void 0){for(const[h,m]of o)if(this.equalsFn(h,e))return m}}has(e){return this.get(e)!==void 0}set(e,n){const o=this.mapKeyFn(e),h=this.inner[o];if(h===void 0)return this.inner[o]=[[e,n]],void this.innerSize++;for(let m=0;m<h.length;m++)if(this.equalsFn(h[m][0],e))return void(h[m]=[e,n]);h.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o===void 0)return!1;for(let h=0;h<o.length;h++)if(this.equalsFn(o[h][0],e))return o.length===1?delete this.inner[n]:o.splice(h,1),this.innerSize--,!0;return!1}forEach(e){vo(this.inner,((n,o)=>{for(const[h,m]of o)e(h,m)}))}isEmpty(){return W_(this.inner)}size(){return this.innerSize}}const jv=new Zn(ot.comparator);function va(){return jv}const fx=new Zn(ot.comparator);function eu(...a){let e=fx;for(const n of a)e=e.insert(n.key,n);return e}function dx(a){let e=fx;return a.forEach(((n,o)=>e=e.insert(n,o.overlayedDocument))),e}function Zo(){return lu()}function gx(){return lu()}function lu(){return new ll((a=>a.toString()),((a,e)=>a.isEqual(e)))}const Hv=new Zn(ot.comparator),Gv=new Cr(ot.comparator);function Yt(...a){let e=Gv;for(const n of a)e=e.add(n);return e}const qv=new Cr(Xt);function Xv(){return qv}function cg(a,e){if(a.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pf(e)?"-0":e}}function mx(a){return{integerValue:""+a}}function Yv(a,e){return xv(e)?mx(e):cg(a,e)}class Hf{constructor(){this._=void 0}}function Wv(a,e,n){return a instanceof Eu?(function(h,m){const _={fields:{[Z_]:{stringValue:Q_},[$_]:{timestampValue:{seconds:h.seconds,nanos:h.nanoseconds}}}};return m&&sg(m)&&(m=Uf(m)),m&&(_.fields[J_]=m),{mapValue:_}})(n,e):a instanceof _u?yx(a,e):a instanceof xu?Ex(a,e):(function(h,m){const _=px(h,m),b=Qy(_)+Qy(h.Ae);return w1(_)&&w1(h.Ae)?mx(b):cg(h.serializer,b)})(a,e)}function Kv(a,e,n){return a instanceof _u?yx(a,e):a instanceof xu?Ex(a,e):n}function px(a,e){return a instanceof Af?(function(o){return w1(o)||(function(m){return!!m&&"doubleValue"in m})(o)})(e)?e:{integerValue:0}:null}class Eu extends Hf{}class _u extends Hf{constructor(e){super(),this.elements=e}}function yx(a,e){const n=_x(e);for(const o of a.elements)n.some((h=>Hs(h,o)))||n.push(o);return{arrayValue:{values:n}}}class xu extends Hf{constructor(e){super(),this.elements=e}}function Ex(a,e){let n=_x(e);for(const o of a.elements)n=n.filter((h=>!Hs(h,o)));return{arrayValue:{values:n}}}class Af extends Hf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Qy(a){return lr(a.integerValue||a.doubleValue)}function _x(a){return ag(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}class Qv{constructor(e,n){this.field=e,this.transform=n}}function Zv(a,e){return a.field.isEqual(e.field)&&(function(o,h){return o instanceof _u&&h instanceof _u||o instanceof xu&&h instanceof xu?nc(o.elements,h.elements,Hs):o instanceof Af&&h instanceof Af?Hs(o.Ae,h.Ae):o instanceof Eu&&h instanceof Eu})(a.transform,e.transform)}class Jv{constructor(e,n){this.version=e,this.transformResults=n}}class mi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new mi}static exists(e){return new mi(void 0,e)}static updateTime(e){return new mi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function af(a,e){return a.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(a.updateTime):a.exists===void 0||a.exists===e.isFoundDocument()}class Gf{}function xx(a,e){if(!a.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return a.isNoDocument()?new qf(a.key,mi.none()):new Nu(a.key,a.data,mi.none());{const n=a.data,o=Ri.empty();let h=new Cr(Fr.comparator);for(let m of e.fields)if(!h.has(m)){let _=n.field(m);_===null&&m.length>1&&(m=m.popLast(),_=n.field(m)),_===null?o.delete(m):o.set(m,_),h=h.add(m)}return new So(a.key,o,new Gi(h.toArray()),mi.none())}}function $v(a,e,n){a instanceof Nu?(function(h,m,_){const b=h.value.clone(),T=Jy(h.fieldTransforms,m,_.transformResults);b.setAll(T),m.convertToFoundDocument(_.version,b).setHasCommittedMutations()})(a,e,n):a instanceof So?(function(h,m,_){if(!af(h.precondition,m))return void m.convertToUnknownDocument(_.version);const b=Jy(h.fieldTransforms,m,_.transformResults),T=m.data;T.setAll(Ax(h)),T.setAll(b),m.convertToFoundDocument(_.version,T).setHasCommittedMutations()})(a,e,n):(function(h,m,_){m.convertToNoDocument(_.version).setHasCommittedMutations()})(0,e,n)}function cu(a,e,n,o){return a instanceof Nu?(function(m,_,b,T){if(!af(m.precondition,_))return b;const A=m.value.clone(),S=$y(m.fieldTransforms,T,_);return A.setAll(S),_.convertToFoundDocument(_.version,A).setHasLocalMutations(),null})(a,e,n,o):a instanceof So?(function(m,_,b,T){if(!af(m.precondition,_))return b;const A=$y(m.fieldTransforms,T,_),S=_.data;return S.setAll(Ax(m)),S.setAll(A),_.convertToFoundDocument(_.version,S).setHasLocalMutations(),b===null?null:b.unionWith(m.fieldMask.fields).unionWith(m.fieldTransforms.map((O=>O.field)))})(a,e,n,o):(function(m,_,b){return af(m.precondition,_)?(_.convertToNoDocument(_.version).setHasLocalMutations(),null):b})(a,e,n)}function eS(a,e){let n=null;for(const o of a.fieldTransforms){const h=e.data.field(o.field),m=px(o.transform,h||null);m!=null&&(n===null&&(n=Ri.empty()),n.set(o.field,m))}return n||null}function Zy(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&!!(function(o,h){return o===void 0&&h===void 0||!(!o||!h)&&nc(o,h,((m,_)=>Zv(m,_)))})(a.fieldTransforms,e.fieldTransforms)&&(a.type===0?a.value.isEqual(e.value):a.type!==1||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask))}class Nu extends Gf{constructor(e,n,o,h=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=h,this.type=0}getFieldMask(){return null}}class So extends Gf{constructor(e,n,o,h,m=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=h,this.fieldTransforms=m,this.type=1}getFieldMask(){return this.fieldMask}}function Ax(a){const e=new Map;return a.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const o=a.data.field(n);e.set(n,o)}})),e}function Jy(a,e,n){const o=new Map;gn(a.length===n.length,32656,{Re:n.length,Ve:a.length});for(let h=0;h<n.length;h++){const m=a[h],_=m.transform,b=e.data.field(m.field);o.set(m.field,Kv(_,b,n[h]))}return o}function $y(a,e,n){const o=new Map;for(const h of a){const m=h.transform,_=n.data.field(h.field);o.set(h.field,Wv(m,_,e))}return o}class qf extends Gf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tS extends Gf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class nS{constructor(e,n,o,h){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=h}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let h=0;h<this.mutations.length;h++){const m=this.mutations[h];m.key.isEqual(e.key)&&$v(m,e,o[h])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=cu(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=cu(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=gx();return this.mutations.forEach((h=>{const m=e.get(h.key),_=m.overlayedDocument;let b=this.applyToLocalView(_,m.mutatedFields);b=n.has(h.key)?null:b;const T=xx(_,b);T!==null&&o.set(h.key,T),_.isValidDocument()||_.convertToNoDocument(Et.min())})),o}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Yt())}isEqual(e){return this.batchId===e.batchId&&nc(this.mutations,e.mutations,((n,o)=>Zy(n,o)))&&nc(this.baseMutations,e.baseMutations,((n,o)=>Zy(n,o)))}}class ug{constructor(e,n,o,h){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=h}static from(e,n,o){gn(e.mutations.length===o.length,58842,{me:e.mutations.length,fe:o.length});let h=(function(){return Hv})();const m=e.mutations;for(let _=0;_<m.length;_++)h=h.insert(m[_].key,o[_].version);return new ug(e,n,o,h)}}class rS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class iS{constructor(e,n){this.count=e,this.unchangedNames=n}}var mr,en;function sS(a){switch(a){case be.OK:return gt(64938);case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0;default:return gt(15467,{code:a})}}function wx(a){if(a===void 0)return ba("GRPC error has no .code"),be.UNKNOWN;switch(a){case mr.OK:return be.OK;case mr.CANCELLED:return be.CANCELLED;case mr.UNKNOWN:return be.UNKNOWN;case mr.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case mr.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case mr.INTERNAL:return be.INTERNAL;case mr.UNAVAILABLE:return be.UNAVAILABLE;case mr.UNAUTHENTICATED:return be.UNAUTHENTICATED;case mr.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case mr.NOT_FOUND:return be.NOT_FOUND;case mr.ALREADY_EXISTS:return be.ALREADY_EXISTS;case mr.PERMISSION_DENIED:return be.PERMISSION_DENIED;case mr.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case mr.ABORTED:return be.ABORTED;case mr.OUT_OF_RANGE:return be.OUT_OF_RANGE;case mr.UNIMPLEMENTED:return be.UNIMPLEMENTED;case mr.DATA_LOSS:return be.DATA_LOSS;default:return gt(39323,{code:a})}}(en=mr||(mr={}))[en.OK=0]="OK",en[en.CANCELLED=1]="CANCELLED",en[en.UNKNOWN=2]="UNKNOWN",en[en.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",en[en.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",en[en.NOT_FOUND=5]="NOT_FOUND",en[en.ALREADY_EXISTS=6]="ALREADY_EXISTS",en[en.PERMISSION_DENIED=7]="PERMISSION_DENIED",en[en.UNAUTHENTICATED=16]="UNAUTHENTICATED",en[en.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",en[en.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",en[en.ABORTED=10]="ABORTED",en[en.OUT_OF_RANGE=11]="OUT_OF_RANGE",en[en.UNIMPLEMENTED=12]="UNIMPLEMENTED",en[en.INTERNAL=13]="INTERNAL",en[en.UNAVAILABLE=14]="UNAVAILABLE",en[en.DATA_LOSS=15]="DATA_LOSS";function aS(){return new TextEncoder}const oS=new mo([4294967295,4294967295],0);function eE(a){const e=aS().encode(a),n=new B_;return n.update(e),new Uint8Array(n.digest())}function tE(a){const e=new DataView(a.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),h=e.getUint32(8,!0),m=e.getUint32(12,!0);return[new mo([n,o],0),new mo([h,m],0)]}class hg{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new tu(`Invalid padding: ${n}`);if(o<0)throw new tu(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new tu(`Invalid hash count: ${o}`);if(e.length===0&&n!==0)throw new tu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=mo.fromNumber(this.ge)}ye(e,n,o){let h=e.add(n.multiply(mo.fromNumber(o)));return h.compare(oS)===1&&(h=new mo([h.getBits(0),h.getBits(1)],0)),h.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=eE(e),[o,h]=tE(n);for(let m=0;m<this.hashCount;m++){const _=this.ye(o,h,m);if(!this.we(_))return!1}return!0}static create(e,n,o){const h=e%8==0?0:8-e%8,m=new Uint8Array(Math.ceil(e/8)),_=new hg(m,h,n);return o.forEach((b=>_.insert(b))),_}insert(e){if(this.ge===0)return;const n=eE(e),[o,h]=tE(n);for(let m=0;m<this.hashCount;m++){const _=this.ye(o,h,m);this.Se(_)}}Se(e){const n=Math.floor(e/8),o=e%8;this.bitmap[n]|=1<<o}}class tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Xf{constructor(e,n,o,h,m){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=h,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const h=new Map;return h.set(e,Ou.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new Xf(Et.min(),h,new Zn(Xt),va(),Yt())}}class Ou{constructor(e,n,o,h,m){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=h,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new Ou(o,n,Yt(),Yt(),Yt())}}class of{constructor(e,n,o,h){this.be=e,this.removedTargetIds=n,this.key=o,this.De=h}}class Tx{constructor(e,n){this.targetId=e,this.Ce=n}}class Cx{constructor(e,n,o=zr.EMPTY_BYTE_STRING,h=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=h}}class nE{constructor(){this.ve=0,this.Fe=rE(),this.Me=zr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Yt(),n=Yt(),o=Yt();return this.Fe.forEach(((h,m)=>{switch(m){case 0:e=e.add(h);break;case 2:n=n.add(h);break;case 1:o=o.add(h);break;default:gt(38017,{changeType:m})}})),new Ou(this.Me,this.xe,e,n,o)}qe(){this.Oe=!1,this.Fe=rE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,gn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class lS{constructor(e){this.Ge=e,this.ze=new Map,this.je=va(),this.Je=Wh(),this.He=Wh(),this.Ye=new Zn(Xt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const o=this.nt(n);switch(e.state){case 0:this.rt(n)&&o.Le(e.resumeToken);break;case 1:o.Ke(),o.Ne||o.qe(),o.Le(e.resumeToken);break;case 2:o.Ke(),o.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(o.We(),o.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),o.Le(e.resumeToken));break;default:gt(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((o,h)=>{this.rt(h)&&n(h)}))}st(e){const n=e.targetId,o=e.Ce.count,h=this.ot(n);if(h){const m=h.target;if(C1(m))if(o===0){const _=new ot(m.path);this.et(n,_,Jr.newNoDocument(_,Et.min()))}else gn(o===1,20013,{expectedCount:o});else{const _=this._t(n);if(_!==o){const b=this.ut(e),T=b?this.ct(b,e,_):1;if(T!==0){this.it(n);const A=T===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,A)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:h=0},hashCount:m=0}=n;let _,b;try{_=xo(o).toUint8Array()}catch(T){if(T instanceof K_)return tc("Decoding the base64 bloom filter in existence filter failed ("+T.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw T}try{b=new hg(_,h,m)}catch(T){return tc(T instanceof tu?"BloomFilter error: ":"Applying bloom filter failed: ",T),null}return b.ge===0?null:b}ct(e,n,o){return n.Ce.count===o-this.Pt(e,n.targetId)?0:2}Pt(e,n){const o=this.Ge.getRemoteKeysForTarget(n);let h=0;return o.forEach((m=>{const _=this.Ge.ht(),b=`projects/${_.projectId}/databases/${_.database}/documents/${m.path.canonicalString()}`;e.mightContain(b)||(this.et(n,m,null),h++)})),h}Tt(e){const n=new Map;this.ze.forEach(((m,_)=>{const b=this.ot(_);if(b){if(m.current&&C1(b.target)){const T=new ot(b.target.path);this.It(T).has(_)||this.Et(_,T)||this.et(_,T,Jr.newNoDocument(T,e))}m.Be&&(n.set(_,m.ke()),m.qe())}}));let o=Yt();this.He.forEach(((m,_)=>{let b=!0;_.forEachWhile((T=>{const A=this.ot(T);return!A||A.purpose==="TargetPurposeLimboResolution"||(b=!1,!1)})),b&&(o=o.add(m))})),this.je.forEach(((m,_)=>_.setReadTime(e)));const h=new Xf(e,n,this.Ye,this.je,o);return this.je=va(),this.Je=Wh(),this.He=Wh(),this.Ye=new Zn(Xt),h}Xe(e,n){if(!this.rt(e))return;const o=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,o),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,o){if(!this.rt(e))return;const h=this.nt(e);this.Et(e,n)?h.Qe(n,1):h.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),o&&(this.je=this.je.insert(n,o))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new nE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Cr(Xt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Cr(Xt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ke("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new nE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Wh(){return new Zn(ot.comparator)}function rE(){return new Zn(ot.comparator)}const cS={asc:"ASCENDING",desc:"DESCENDING"},uS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hS={and:"AND",or:"OR"};class fS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function S1(a,e){return a.useProto3Json||Vf(e)?e:{value:e}}function wf(a,e){return a.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bx(a,e){return a.useProto3Json?e.toBase64():e.toUint8Array()}function dS(a,e){return wf(a,e.toTimestamp())}function Fs(a){return gn(!!a,49232),Et.fromTimestamp((function(n){const o=_o(n);return new An(o.seconds,o.nanos)})(a))}function fg(a,e){return I1(a,e).canonicalString()}function I1(a,e){const n=(function(h){return new Nn(["projects",h.projectId,"databases",h.database])})(a).child("documents");return e===void 0?n:n.child(e)}function vx(a){const e=Nn.fromString(a);return gn(Ox(e),10190,{key:e.toString()}),e}function R1(a,e){return fg(a.databaseId,e.path)}function t1(a,e){const n=vx(e);if(n.get(1)!==a.databaseId.projectId)throw new qe(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+a.databaseId.projectId);if(n.get(3)!==a.databaseId.database)throw new qe(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+a.databaseId.database);return new ot(Ix(n))}function Sx(a,e){return fg(a.databaseId,e)}function gS(a){const e=vx(a);return e.length===4?Nn.emptyPath():Ix(e)}function N1(a){return new Nn(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function Ix(a){return gn(a.length>4&&a.get(4)==="documents",29091,{key:a.toString()}),a.popFirst(5)}function iE(a,e,n){return{name:R1(a,e),fields:n.value.mapValue.fields}}function mS(a,e){let n;if("targetChange"in e){e.targetChange;const o=(function(A){return A==="NO_CHANGE"?0:A==="ADD"?1:A==="REMOVE"?2:A==="CURRENT"?3:A==="RESET"?4:gt(39313,{state:A})})(e.targetChange.targetChangeType||"NO_CHANGE"),h=e.targetChange.targetIds||[],m=(function(A,S){return A.useProto3Json?(gn(S===void 0||typeof S=="string",58123),zr.fromBase64String(S||"")):(gn(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),zr.fromUint8Array(S||new Uint8Array))})(a,e.targetChange.resumeToken),_=e.targetChange.cause,b=_&&(function(A){const S=A.code===void 0?be.UNKNOWN:wx(A.code);return new qe(S,A.message||"")})(_);n=new Cx(o,h,m,b||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const h=t1(a,o.document.name),m=Fs(o.document.updateTime),_=o.document.createTime?Fs(o.document.createTime):Et.min(),b=new Ri({mapValue:{fields:o.document.fields}}),T=Jr.newFoundDocument(h,m,_,b),A=o.targetIds||[],S=o.removedTargetIds||[];n=new of(A,S,T.key,T)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const h=t1(a,o.document),m=o.readTime?Fs(o.readTime):Et.min(),_=Jr.newNoDocument(h,m),b=o.removedTargetIds||[];n=new of([],b,_.key,_)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const h=t1(a,o.document),m=o.removedTargetIds||[];n=new of([],m,h,null)}else{if(!("filter"in e))return gt(11601,{Rt:e});{e.filter;const o=e.filter;o.targetId;const{count:h=0,unchangedNames:m}=o,_=new iS(h,m),b=o.targetId;n=new Tx(b,_)}}return n}function pS(a,e){let n;if(e instanceof Nu)n={update:iE(a,e.key,e.value)};else if(e instanceof qf)n={delete:R1(a,e.key)};else if(e instanceof So)n={update:iE(a,e.key,e.data),updateMask:bS(e.fieldMask)};else{if(!(e instanceof tS))return gt(16599,{Vt:e.type});n={verify:R1(a,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((o=>(function(m,_){const b=_.transform;if(b instanceof Eu)return{fieldPath:_.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(b instanceof _u)return{fieldPath:_.field.canonicalString(),appendMissingElements:{values:b.elements}};if(b instanceof xu)return{fieldPath:_.field.canonicalString(),removeAllFromArray:{values:b.elements}};if(b instanceof Af)return{fieldPath:_.field.canonicalString(),increment:b.Ae};throw gt(20930,{transform:_.transform})})(0,o)))),e.precondition.isNone||(n.currentDocument=(function(h,m){return m.updateTime!==void 0?{updateTime:dS(h,m.updateTime)}:m.exists!==void 0?{exists:m.exists}:gt(27497)})(a,e.precondition)),n}function yS(a,e){return a&&a.length>0?(gn(e!==void 0,14353),a.map((n=>(function(h,m){let _=h.updateTime?Fs(h.updateTime):Fs(m);return _.isEqual(Et.min())&&(_=Fs(m)),new Jv(_,h.transformResults||[])})(n,e)))):[]}function ES(a,e){return{documents:[Sx(a,e.path)]}}function _S(a,e){const n={structuredQuery:{}},o=e.path;let h;e.collectionGroup!==null?(h=o,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(h=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=Sx(a,h);const m=(function(A){if(A.length!==0)return Nx(Ts.create(A,"and"))})(e.filters);m&&(n.structuredQuery.where=m);const _=(function(A){if(A.length!==0)return A.map((S=>(function(B){return{field:Hl(B.field),direction:wS(B.dir)}})(S)))})(e.orderBy);_&&(n.structuredQuery.orderBy=_);const b=S1(a,e.limit);return b!==null&&(n.structuredQuery.limit=b),e.startAt&&(n.structuredQuery.startAt=(function(A){return{before:A.inclusive,values:A.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(A){return{before:!A.inclusive,values:A.position}})(e.endAt)),{ft:n,parent:h}}function xS(a){let e=gS(a.parent);const n=a.structuredQuery,o=n.from?n.from.length:0;let h=null;if(o>0){gn(o===1,65062);const S=n.from[0];S.allDescendants?h=S.collectionId:e=e.child(S.collectionId)}let m=[];n.where&&(m=(function(O){const B=Rx(O);return B instanceof Ts&&sx(B)?B.getFilters():[B]})(n.where));let _=[];n.orderBy&&(_=(function(O){return O.map((B=>(function(ne){return new xf(Gl(ne.field),(function(ge){switch(ge){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(ne.direction))})(B)))})(n.orderBy));let b=null;n.limit&&(b=(function(O){let B;return B=typeof O=="object"?O.value:O,Vf(B)?null:B})(n.limit));let T=null;n.startAt&&(T=(function(O){const B=!!O.before,Y=O.values||[];return new _f(Y,B)})(n.startAt));let A=null;return n.endAt&&(A=(function(O){const B=!O.before,Y=O.values||[];return new _f(Y,B)})(n.endAt)),Vv(e,h,_,m,b,"F",T,A)}function AS(a,e){const n=(function(h){switch(h){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gt(28987,{purpose:h})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Rx(a){return a.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=Gl(n.unaryFilter.field);return yr.create(o,"==",{doubleValue:NaN});case"IS_NULL":const h=Gl(n.unaryFilter.field);return yr.create(h,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const m=Gl(n.unaryFilter.field);return yr.create(m,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const _=Gl(n.unaryFilter.field);return yr.create(_,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return gt(61313);default:return gt(60726)}})(a):a.fieldFilter!==void 0?(function(n){return yr.create(Gl(n.fieldFilter.field),(function(h){switch(h){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return gt(58110);default:return gt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(a):a.compositeFilter!==void 0?(function(n){return Ts.create(n.compositeFilter.filters.map((o=>Rx(o))),(function(h){switch(h){case"AND":return"and";case"OR":return"or";default:return gt(1026)}})(n.compositeFilter.op))})(a):gt(30097,{filter:a})}function wS(a){return cS[a]}function TS(a){return uS[a]}function CS(a){return hS[a]}function Hl(a){return{fieldPath:a.canonicalString()}}function Gl(a){return Fr.fromServerFormat(a.fieldPath)}function Nx(a){return a instanceof yr?(function(n){if(n.op==="=="){if(qy(n.value))return{unaryFilter:{field:Hl(n.field),op:"IS_NAN"}};if(Gy(n.value))return{unaryFilter:{field:Hl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(qy(n.value))return{unaryFilter:{field:Hl(n.field),op:"IS_NOT_NAN"}};if(Gy(n.value))return{unaryFilter:{field:Hl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hl(n.field),op:TS(n.op),value:n.value}}})(a):a instanceof Ts?(function(n){const o=n.getFilters().map((h=>Nx(h)));return o.length===1?o[0]:{compositeFilter:{op:CS(n.op),filters:o}}})(a):gt(54877,{filter:a})}function bS(a){const e=[];return a.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Ox(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}class co{constructor(e,n,o,h,m=Et.min(),_=Et.min(),b=zr.EMPTY_BYTE_STRING,T=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=h,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=_,this.resumeToken=b,this.expectedCount=T}withSequenceNumber(e){return new co(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class vS{constructor(e){this.yt=e}}function SS(a){const e=xS({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?v1(e,e.limit,"L"):e}class IS{constructor(){this.Cn=new RS}addToCollectionParentIndex(e,n){return this.Cn.add(n),Ie.resolve()}getCollectionParents(e,n){return Ie.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Ie.resolve()}deleteFieldIndex(e,n){return Ie.resolve()}deleteAllFieldIndexes(e){return Ie.resolve()}createTargetIndexes(e,n){return Ie.resolve()}getDocumentsMatchingTarget(e,n){return Ie.resolve(null)}getIndexType(e,n){return Ie.resolve(0)}getFieldIndexes(e,n){return Ie.resolve([])}getNextCollectionGroupToUpdate(e){return Ie.resolve(null)}getMinOffset(e,n){return Ie.resolve(Eo.min())}getMinOffsetFromCollectionGroup(e,n){return Ie.resolve(Eo.min())}updateCollectionGroup(e,n,o){return Ie.resolve()}updateIndexEntries(e,n){return Ie.resolve()}}class RS{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),h=this.index[n]||new Cr(Nn.comparator),m=!h.has(o);return this.index[n]=h.add(o),m}has(e){const n=e.lastSegment(),o=e.popLast(),h=this.index[n];return h&&h.has(o)}getEntries(e){return(this.index[e]||new Cr(Nn.comparator)).toArray()}}const sE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Dx=41943040;class Ii{static withCacheSize(e){return new Ii(e,Ii.DEFAULT_COLLECTION_PERCENTILE,Ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}}Ii.DEFAULT_COLLECTION_PERCENTILE=10,Ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ii.DEFAULT=new Ii(Dx,Ii.DEFAULT_COLLECTION_PERCENTILE,Ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ii.DISABLED=new Ii(-1,0,0);class sc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new sc(0)}static cr(){return new sc(-1)}}const aE="LruGarbageCollector",NS=1048576;function oE([a,e],[n,o]){const h=Xt(a,n);return h===0?Xt(e,o):h}class OS{constructor(e){this.Ir=e,this.buffer=new Cr(oE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();oE(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class DS{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ke(aE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){dc(n)?Ke(aE,"Ignoring IndexedDB error during garbage collection: ",n):await fc(n)}await this.Vr(3e5)}))}}class MS{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((o=>Math.floor(n/100*o)))}nthSequenceNumber(e,n){if(n===0)return Ie.resolve(Bf.ce);const o=new OS(n);return this.mr.forEachTarget(e,(h=>o.Ar(h.sequenceNumber))).next((()=>this.mr.pr(e,(h=>o.Ar(h))))).next((()=>o.maxValue))}removeTargets(e,n,o){return this.mr.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ke("LruGarbageCollector","Garbage collection skipped; disabled"),Ie.resolve(sE)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let o,h,m,_,b,T,A;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((O=>(O>this.params.maximumSequenceNumbersToCollect?(Ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),h=this.params.maximumSequenceNumbersToCollect):h=O,_=Date.now(),this.nthSequenceNumber(e,h)))).next((O=>(o=O,b=Date.now(),this.removeTargets(e,o,n)))).next((O=>(m=O,T=Date.now(),this.removeOrphanedDocuments(e,o)))).next((O=>(A=Date.now(),zl()<=qt.DEBUG&&Ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${_-S}ms
	Determined least recently used ${h} in `+(b-_)+`ms
	Removed ${m} targets in `+(T-b)+`ms
	Removed ${O} documents in `+(A-T)+`ms
Total Duration: ${A-S}ms`),Ie.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:m,documentsRemoved:O}))))}}function LS(a,e){return new MS(a,e)}class PS{constructor(){this.changes=new ll((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Jr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return o!==void 0?Ie.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class kS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class BS{constructor(e,n,o,h){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=h}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next((h=>(o=h,this.remoteDocumentCache.getEntry(e,n)))).next((h=>(o!==null&&cu(o.mutation,h,Gi.empty(),An.now()),h)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.getLocalViewOfDocuments(e,o,Yt()).next((()=>o))))}getLocalViewOfDocuments(e,n,o=Yt()){const h=Zo();return this.populateOverlays(e,h,n).next((()=>this.computeViews(e,n,h,o).next((m=>{let _=eu();return m.forEach(((b,T)=>{_=_.insert(b,T.overlayedDocument)})),_}))))}getOverlayedDocuments(e,n){const o=Zo();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,Yt())))}populateOverlays(e,n,o){const h=[];return o.forEach((m=>{n.has(m)||h.push(m)})),this.documentOverlayCache.getOverlays(e,h).next((m=>{m.forEach(((_,b)=>{n.set(_,b)}))}))}computeViews(e,n,o,h){let m=va();const _=lu(),b=(function(){return lu()})();return n.forEach(((T,A)=>{const S=o.get(A.key);h.has(A.key)&&(S===void 0||S.mutation instanceof So)?m=m.insert(A.key,A):S!==void 0?(_.set(A.key,S.mutation.getFieldMask()),cu(S.mutation,A,S.mutation.getFieldMask(),An.now())):_.set(A.key,Gi.empty())})),this.recalculateAndSaveOverlays(e,m).next((T=>(T.forEach(((A,S)=>_.set(A,S))),n.forEach(((A,S)=>b.set(A,new kS(S,_.get(A)??null)))),b)))}recalculateAndSaveOverlays(e,n){const o=lu();let h=new Zn(((_,b)=>_-b)),m=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((_=>{for(const b of _)b.keys().forEach((T=>{const A=n.get(T);if(A===null)return;let S=o.get(T)||Gi.empty();S=b.applyToLocalView(A,S),o.set(T,S);const O=(h.get(b.batchId)||Yt()).add(T);h=h.insert(b.batchId,O)}))})).next((()=>{const _=[],b=h.getReverseIterator();for(;b.hasNext();){const T=b.getNext(),A=T.key,S=T.value,O=gx();S.forEach((B=>{if(!m.has(B)){const Y=xx(n.get(B),o.get(B));Y!==null&&O.set(B,Y),m=m.add(B)}})),_.push(this.documentOverlayCache.saveOverlays(e,A,O))}return Ie.waitFor(_)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,n,o,h){return(function(_){return ot.isDocumentKey(_.path)&&_.collectionGroup===null&&_.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):cx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,h):this.getDocumentsMatchingCollectionQuery(e,n,o,h)}getNextDocuments(e,n,o,h){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,h).next((m=>{const _=h-m.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,h-m.size):Ie.resolve(Zo());let b=gu,T=m;return _.next((A=>Ie.forEach(A,((S,O)=>(b<O.largestBatchId&&(b=O.largestBatchId),m.get(S)?Ie.resolve():this.remoteDocumentCache.getEntry(e,S).next((B=>{T=T.insert(S,B)}))))).next((()=>this.populateOverlays(e,A,m))).next((()=>this.computeViews(e,T,A,Yt()))).next((S=>({batchId:b,changes:dx(S)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ot(n)).next((o=>{let h=eu();return o.isFoundDocument()&&(h=h.insert(o.key,o)),h}))}getDocumentsMatchingCollectionGroupQuery(e,n,o,h){const m=n.collectionGroup;let _=eu();return this.indexManager.getCollectionParents(e,m).next((b=>Ie.forEach(b,(T=>{const A=(function(O,B){return new Ru(B,null,O.explicitOrderBy.slice(),O.filters.slice(),O.limit,O.limitType,O.startAt,O.endAt)})(n,T.child(m));return this.getDocumentsMatchingCollectionQuery(e,A,o,h).next((S=>{S.forEach(((O,B)=>{_=_.insert(O,B)}))}))})).next((()=>_))))}getDocumentsMatchingCollectionQuery(e,n,o,h){let m;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next((_=>(m=_,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,m,h)))).next((_=>{m.forEach(((T,A)=>{const S=A.getKey();_.get(S)===null&&(_=_.insert(S,Jr.newInvalidDocument(S)))}));let b=eu();return _.forEach(((T,A)=>{const S=m.get(T);S!==void 0&&cu(S.mutation,A,Gi.empty(),An.now()),jf(n,A)&&(b=b.insert(T,A))})),b}))}}class VS{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Ie.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(h){return{id:h.id,version:h.version,createTime:Fs(h.createTime)}})(n)),Ie.resolve()}getNamedQuery(e,n){return Ie.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(h){return{name:h.name,query:SS(h.bundledQuery),readTime:Fs(h.readTime)}})(n)),Ie.resolve()}}class US{constructor(){this.overlays=new Zn(ot.comparator),this.qr=new Map}getOverlay(e,n){return Ie.resolve(this.overlays.get(n))}getOverlays(e,n){const o=Zo();return Ie.forEach(n,(h=>this.getOverlay(e,h).next((m=>{m!==null&&o.set(h,m)})))).next((()=>o))}saveOverlays(e,n,o){return o.forEach(((h,m)=>{this.St(e,n,m)})),Ie.resolve()}removeOverlaysForBatchId(e,n,o){const h=this.qr.get(o);return h!==void 0&&(h.forEach((m=>this.overlays=this.overlays.remove(m))),this.qr.delete(o)),Ie.resolve()}getOverlaysForCollection(e,n,o){const h=Zo(),m=n.length+1,_=new ot(n.child("")),b=this.overlays.getIteratorFrom(_);for(;b.hasNext();){const T=b.getNext().value,A=T.getKey();if(!n.isPrefixOf(A.path))break;A.path.length===m&&T.largestBatchId>o&&h.set(T.getKey(),T)}return Ie.resolve(h)}getOverlaysForCollectionGroup(e,n,o,h){let m=new Zn(((A,S)=>A-S));const _=this.overlays.getIterator();for(;_.hasNext();){const A=_.getNext().value;if(A.getKey().getCollectionGroup()===n&&A.largestBatchId>o){let S=m.get(A.largestBatchId);S===null&&(S=Zo(),m=m.insert(A.largestBatchId,S)),S.set(A.getKey(),A)}}const b=Zo(),T=m.getIterator();for(;T.hasNext()&&(T.getNext().value.forEach(((A,S)=>b.set(A,S))),!(b.size()>=h)););return Ie.resolve(b)}St(e,n,o){const h=this.overlays.get(o.key);if(h!==null){const _=this.qr.get(h.largestBatchId).delete(o.key);this.qr.set(h.largestBatchId,_)}this.overlays=this.overlays.insert(o.key,new rS(n,o));let m=this.qr.get(n);m===void 0&&(m=Yt(),this.qr.set(n,m)),this.qr.set(n,m.add(o.key))}}class FS{constructor(){this.sessionToken=zr.EMPTY_BYTE_STRING}getSessionToken(e){return Ie.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ie.resolve()}}class dg{constructor(){this.Qr=new Cr(Ir.$r),this.Ur=new Cr(Ir.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const o=new Ir(e,n);this.Qr=this.Qr.add(o),this.Ur=this.Ur.add(o)}Wr(e,n){e.forEach((o=>this.addReference(o,n)))}removeReference(e,n){this.Gr(new Ir(e,n))}zr(e,n){e.forEach((o=>this.removeReference(o,n)))}jr(e){const n=new ot(new Nn([])),o=new Ir(n,e),h=new Ir(n,e+1),m=[];return this.Ur.forEachInRange([o,h],(_=>{this.Gr(_),m.push(_.key)})),m}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ot(new Nn([])),o=new Ir(n,e),h=new Ir(n,e+1);let m=Yt();return this.Ur.forEachInRange([o,h],(_=>{m=m.add(_.key)})),m}containsKey(e){const n=new Ir(e,0),o=this.Qr.firstAfterOrEqual(n);return o!==null&&e.isEqual(o.key)}}class Ir{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ot.comparator(e.key,n.key)||Xt(e.Yr,n.Yr)}static Kr(e,n){return Xt(e.Yr,n.Yr)||ot.comparator(e.key,n.key)}}class zS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Cr(Ir.$r)}checkEmpty(e){return Ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,o,h){const m=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const _=new nS(m,n,o,h);this.mutationQueue.push(_);for(const b of h)this.Zr=this.Zr.add(new Ir(b.key,m)),this.indexManager.addToCollectionParentIndex(e,b.key.path.popLast());return Ie.resolve(_)}lookupMutationBatch(e,n){return Ie.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const o=n+1,h=this.ei(o),m=h<0?0:h;return Ie.resolve(this.mutationQueue.length>m?this.mutationQueue[m]:null)}getHighestUnacknowledgedBatchId(){return Ie.resolve(this.mutationQueue.length===0?ig:this.tr-1)}getAllMutationBatches(e){return Ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new Ir(n,0),h=new Ir(n,Number.POSITIVE_INFINITY),m=[];return this.Zr.forEachInRange([o,h],(_=>{const b=this.Xr(_.Yr);m.push(b)})),Ie.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new Cr(Xt);return n.forEach((h=>{const m=new Ir(h,0),_=new Ir(h,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([m,_],(b=>{o=o.add(b.Yr)}))})),Ie.resolve(this.ti(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,h=o.length+1;let m=o;ot.isDocumentKey(m)||(m=m.child(""));const _=new Ir(new ot(m),0);let b=new Cr(Xt);return this.Zr.forEachWhile((T=>{const A=T.key.path;return!!o.isPrefixOf(A)&&(A.length===h&&(b=b.add(T.Yr)),!0)}),_),Ie.resolve(this.ti(b))}ti(e){const n=[];return e.forEach((o=>{const h=this.Xr(o);h!==null&&n.push(h)})),n}removeMutationBatch(e,n){gn(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Zr;return Ie.forEach(n.mutations,(h=>{const m=new Ir(h.key,n.batchId);return o=o.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,h.key)})).next((()=>{this.Zr=o}))}ir(e){}containsKey(e,n){const o=new Ir(n,0),h=this.Zr.firstAfterOrEqual(o);return Ie.resolve(n.isEqual(h&&h.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ie.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class jS{constructor(e){this.ri=e,this.docs=(function(){return new Zn(ot.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,h=this.docs.get(o),m=h?h.size:0,_=this.ri(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:_}),this.size+=_-m,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return Ie.resolve(o?o.document.mutableCopy():Jr.newInvalidDocument(n))}getEntries(e,n){let o=va();return n.forEach((h=>{const m=this.docs.get(h);o=o.insert(h,m?m.document.mutableCopy():Jr.newInvalidDocument(h))})),Ie.resolve(o)}getDocumentsMatchingQuery(e,n,o,h){let m=va();const _=n.path,b=new ot(_.child("__id-9223372036854775808__")),T=this.docs.getIteratorFrom(b);for(;T.hasNext();){const{key:A,value:{document:S}}=T.getNext();if(!_.isPrefixOf(A.path))break;A.path.length>_.length+1||pv(mv(S),o)<=0||(h.has(S.key)||jf(n,S))&&(m=m.insert(S.key,S.mutableCopy()))}return Ie.resolve(m)}getAllFromCollectionGroup(e,n,o,h){gt(9500)}ii(e,n){return Ie.forEach(this.docs,(o=>n(o)))}newChangeBuffer(e){return new HS(this)}getSize(e){return Ie.resolve(this.size)}}class HS extends PS{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((o,h)=>{h.isValidDocument()?n.push(this.Nr.addEntry(e,h)):this.Nr.removeEntry(o)})),Ie.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class GS{constructor(e){this.persistence=e,this.si=new ll((n=>og(n)),lg),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.oi=0,this._i=new dg,this.targetCount=0,this.ai=sc.ur()}forEachTarget(e,n){return this.si.forEach(((o,h)=>n(h))),Ie.resolve()}getLastRemoteSnapshotVersion(e){return Ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ie.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.oi&&(this.oi=n),Ie.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new sc(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Ie.resolve()}updateTargetData(e,n){return this.Pr(n),Ie.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Ie.resolve()}removeTargets(e,n,o){let h=0;const m=[];return this.si.forEach(((_,b)=>{b.sequenceNumber<=n&&o.get(b.targetId)===null&&(this.si.delete(_),m.push(this.removeMatchingKeysForTargetId(e,b.targetId)),h++)})),Ie.waitFor(m).next((()=>h))}getTargetCount(e){return Ie.resolve(this.targetCount)}getTargetData(e,n){const o=this.si.get(n)||null;return Ie.resolve(o)}addMatchingKeys(e,n,o){return this._i.Wr(n,o),Ie.resolve()}removeMatchingKeys(e,n,o){this._i.zr(n,o);const h=this.persistence.referenceDelegate,m=[];return h&&n.forEach((_=>{m.push(h.markPotentiallyOrphaned(e,_))})),Ie.waitFor(m)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Ie.resolve()}getMatchingKeysForTargetId(e,n){const o=this._i.Hr(n);return Ie.resolve(o)}containsKey(e,n){return Ie.resolve(this._i.containsKey(n))}}class Mx{constructor(e,n){this.ui={},this.overlays={},this.ci=new Bf(0),this.li=!1,this.li=!0,this.hi=new FS,this.referenceDelegate=e(this),this.Pi=new GS(this),this.indexManager=new IS,this.remoteDocumentCache=(function(h){return new jS(h)})((o=>this.referenceDelegate.Ti(o))),this.serializer=new vS(n),this.Ii=new VS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new US,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.ui[e.toKey()];return o||(o=new zS(n,this.referenceDelegate),this.ui[e.toKey()]=o),o}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,o){Ke("MemoryPersistence","Starting transaction:",e);const h=new qS(this.ci.next());return this.referenceDelegate.Ei(),o(h).next((m=>this.referenceDelegate.di(h).next((()=>m)))).toPromise().then((m=>(h.raiseOnCommittedEvent(),m)))}Ai(e,n){return Ie.or(Object.values(this.ui).map((o=>()=>o.containsKey(e,n))))}}class qS extends Ev{constructor(e){super(),this.currentSequenceNumber=e}}class gg{constructor(e){this.persistence=e,this.Ri=new dg,this.Vi=null}static mi(e){return new gg(e)}get fi(){if(this.Vi)return this.Vi;throw gt(60996)}addReference(e,n,o){return this.Ri.addReference(o,n),this.fi.delete(o.toString()),Ie.resolve()}removeReference(e,n,o){return this.Ri.removeReference(o,n),this.fi.add(o.toString()),Ie.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Ie.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((h=>this.fi.add(h.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next((h=>{h.forEach((m=>this.fi.add(m.toString())))})).next((()=>o.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ie.forEach(this.fi,(o=>{const h=ot.fromPath(o);return this.gi(e,h).next((m=>{m||n.removeEntry(h,Et.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((o=>{o?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Ie.or([()=>Ie.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Tf{constructor(e,n){this.persistence=e,this.pi=new ll((o=>Av(o.path)),((o,h)=>o.isEqual(h))),this.garbageCollector=LS(this,n)}static mi(e,n){return new Tf(e,n)}Ei(){}di(e){return Ie.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>n.next((h=>o+h))))}wr(e){let n=0;return this.pr(e,(o=>{n++})).next((()=>n))}pr(e,n){return Ie.forEach(this.pi,((o,h)=>this.br(e,o,h).next((m=>m?Ie.resolve():n(h)))))}removeTargets(e,n,o){return this.persistence.getTargetCache().removeTargets(e,n,o)}removeOrphanedDocuments(e,n){let o=0;const h=this.persistence.getRemoteDocumentCache(),m=h.newChangeBuffer();return h.ii(e,(_=>this.br(e,_,n).next((b=>{b||(o++,m.removeEntry(_,Et.min()))})))).next((()=>m.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Ie.resolve()}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,n,o){return this.pi.set(o,e.currentSequenceNumber),Ie.resolve()}removeReference(e,n,o){return this.pi.set(o,e.currentSequenceNumber),Ie.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Ie.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=rf(e.data.value)),n}br(e,n,o){return Ie.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const h=this.pi.get(n);return Ie.resolve(h!==void 0&&h>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class mg{constructor(e,n,o,h){this.targetId=e,this.fromCache=n,this.Es=o,this.ds=h}static As(e,n){let o=Yt(),h=Yt();for(const m of n.docChanges)switch(m.type){case 0:o=o.add(m.doc.key);break;case 1:h=h.add(m.doc.key)}return new mg(e,n.fromCache,o,h)}}class XS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class YS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return CT()?8:_v($r())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,o,h){const m={result:null};return this.ys(e,n).next((_=>{m.result=_})).next((()=>{if(!m.result)return this.ws(e,n,h,o).next((_=>{m.result=_}))})).next((()=>{if(m.result)return;const _=new XS;return this.Ss(e,n,_).next((b=>{if(m.result=b,this.Vs)return this.bs(e,n,_,b.size)}))})).next((()=>m.result))}bs(e,n,o,h){return o.documentReadCount<this.fs?(zl()<=qt.DEBUG&&Ke("QueryEngine","SDK will not create cache indexes for query:",jl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ie.resolve()):(zl()<=qt.DEBUG&&Ke("QueryEngine","Query:",jl(n),"scans",o.documentReadCount,"local documents and returns",h,"documents as results."),o.documentReadCount>this.gs*h?(zl()<=qt.DEBUG&&Ke("QueryEngine","The SDK decides to create cache indexes for query:",jl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Us(n))):Ie.resolve())}ys(e,n){if(Ky(n))return Ie.resolve(null);let o=Us(n);return this.indexManager.getIndexType(e,o).next((h=>h===0?null:(n.limit!==null&&h===1&&(n=v1(n,null,"F"),o=Us(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next((m=>{const _=Yt(...m);return this.ps.getDocuments(e,_).next((b=>this.indexManager.getMinOffset(e,o).next((T=>{const A=this.Ds(n,b);return this.Cs(n,A,_,T.readTime)?this.ys(e,v1(n,null,"F")):this.vs(e,A,n,T)}))))})))))}ws(e,n,o,h){return Ky(n)||h.isEqual(Et.min())?Ie.resolve(null):this.ps.getDocuments(e,o).next((m=>{const _=this.Ds(n,m);return this.Cs(n,_,o,h)?Ie.resolve(null):(zl()<=qt.DEBUG&&Ke("QueryEngine","Re-using previous result from %s to execute query: %s",h.toString(),jl(n)),this.vs(e,_,n,gv(h,gu)).next((b=>b)))}))}Ds(e,n){let o=new Cr(hx(e));return n.forEach(((h,m)=>{jf(e,m)&&(o=o.add(m))})),o}Cs(e,n,o,h){if(e.limit===null)return!1;if(o.size!==n.size)return!0;const m=e.limitType==="F"?n.last():n.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(h)>0)}Ss(e,n,o){return zl()<=qt.DEBUG&&Ke("QueryEngine","Using full collection scan to execute query:",jl(n)),this.ps.getDocumentsMatchingQuery(e,n,Eo.min(),o)}vs(e,n,o,h){return this.ps.getDocumentsMatchingQuery(e,o,h).next((m=>(n.forEach((_=>{m=m.insert(_.key,_)})),m)))}}const pg="LocalStore",WS=3e8;class KS{constructor(e,n,o,h){this.persistence=e,this.Fs=n,this.serializer=h,this.Ms=new Zn(Xt),this.xs=new ll((m=>og(m)),lg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(o)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function QS(a,e,n,o){return new KS(a,e,n,o)}async function Lx(a,e){const n=wt(a);return await n.persistence.runTransaction("Handle user change","readonly",(o=>{let h;return n.mutationQueue.getAllMutationBatches(o).next((m=>(h=m,n.Bs(e),n.mutationQueue.getAllMutationBatches(o)))).next((m=>{const _=[],b=[];let T=Yt();for(const A of h){_.push(A.batchId);for(const S of A.mutations)T=T.add(S.key)}for(const A of m){b.push(A.batchId);for(const S of A.mutations)T=T.add(S.key)}return n.localDocuments.getDocuments(o,T).next((A=>({Ls:A,removedBatchIds:_,addedBatchIds:b})))}))}))}function ZS(a,e){const n=wt(a);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const h=e.batch.keys(),m=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(b,T,A,S){const O=A.batch,B=O.keys();let Y=Ie.resolve();return B.forEach((ne=>{Y=Y.next((()=>S.getEntry(T,ne))).next((ie=>{const ge=A.docVersions.get(ne);gn(ge!==null,48541),ie.version.compareTo(ge)<0&&(O.applyToRemoteDocument(ie,A),ie.isValidDocument()&&(ie.setReadTime(A.commitVersion),S.addEntry(ie)))}))})),Y.next((()=>b.mutationQueue.removeMutationBatch(T,O)))})(n,o,e,m).next((()=>m.apply(o))).next((()=>n.mutationQueue.performConsistencyCheck(o))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(o,h,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(b){let T=Yt();for(let A=0;A<b.mutationResults.length;++A)b.mutationResults[A].transformResults.length>0&&(T=T.add(b.batch.mutations[A].key));return T})(e)))).next((()=>n.localDocuments.getDocuments(o,h)))}))}function Px(a){const e=wt(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function JS(a,e){const n=wt(a),o=e.snapshotVersion;let h=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(m=>{const _=n.Ns.newChangeBuffer({trackRemovals:!0});h=n.Ms;const b=[];e.targetChanges.forEach(((S,O)=>{const B=h.get(O);if(!B)return;b.push(n.Pi.removeMatchingKeys(m,S.removedDocuments,O).next((()=>n.Pi.addMatchingKeys(m,S.addedDocuments,O))));let Y=B.withSequenceNumber(m.currentSequenceNumber);e.targetMismatches.get(O)!==null?Y=Y.withResumeToken(zr.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):S.resumeToken.approximateByteSize()>0&&(Y=Y.withResumeToken(S.resumeToken,o)),h=h.insert(O,Y),(function(ie,ge,Ue){return ie.resumeToken.approximateByteSize()===0||ge.snapshotVersion.toMicroseconds()-ie.snapshotVersion.toMicroseconds()>=WS?!0:Ue.addedDocuments.size+Ue.modifiedDocuments.size+Ue.removedDocuments.size>0})(B,Y,S)&&b.push(n.Pi.updateTargetData(m,Y))}));let T=va(),A=Yt();if(e.documentUpdates.forEach((S=>{e.resolvedLimboDocuments.has(S)&&b.push(n.persistence.referenceDelegate.updateLimboDocument(m,S))})),b.push($S(m,_,e.documentUpdates).next((S=>{T=S.ks,A=S.qs}))),!o.isEqual(Et.min())){const S=n.Pi.getLastRemoteSnapshotVersion(m).next((O=>n.Pi.setTargetsMetadata(m,m.currentSequenceNumber,o)));b.push(S)}return Ie.waitFor(b).next((()=>_.apply(m))).next((()=>n.localDocuments.getLocalViewOfDocuments(m,T,A))).next((()=>T))})).then((m=>(n.Ms=h,m)))}function $S(a,e,n){let o=Yt(),h=Yt();return n.forEach((m=>o=o.add(m))),e.getEntries(a,o).next((m=>{let _=va();return n.forEach(((b,T)=>{const A=m.get(b);T.isFoundDocument()!==A.isFoundDocument()&&(h=h.add(b)),T.isNoDocument()&&T.version.isEqual(Et.min())?(e.removeEntry(b,T.readTime),_=_.insert(b,T)):!A.isValidDocument()||T.version.compareTo(A.version)>0||T.version.compareTo(A.version)===0&&A.hasPendingWrites?(e.addEntry(T),_=_.insert(b,T)):Ke(pg,"Ignoring outdated watch update for ",b,". Current version:",A.version," Watch version:",T.version)})),{ks:_,qs:h}}))}function eI(a,e){const n=wt(a);return n.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=ig),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function tI(a,e){const n=wt(a);return n.persistence.runTransaction("Allocate target","readwrite",(o=>{let h;return n.Pi.getTargetData(o,e).next((m=>m?(h=m,Ie.resolve(h)):n.Pi.allocateTargetId(o).next((_=>(h=new co(e,_,"TargetPurposeListen",o.currentSequenceNumber),n.Pi.addTargetData(o,h).next((()=>h)))))))})).then((o=>{const h=n.Ms.get(o.targetId);return(h===null||o.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(o.targetId,o),n.xs.set(e,o.targetId)),o}))}async function O1(a,e,n){const o=wt(a),h=o.Ms.get(e),m=n?"readwrite":"readwrite-primary";try{n||await o.persistence.runTransaction("Release target",m,(_=>o.persistence.referenceDelegate.removeTarget(_,h)))}catch(_){if(!dc(_))throw _;Ke(pg,`Failed to update sequence numbers for target ${e}: ${_}`)}o.Ms=o.Ms.remove(e),o.xs.delete(h.target)}function lE(a,e,n){const o=wt(a);let h=Et.min(),m=Yt();return o.persistence.runTransaction("Execute query","readwrite",(_=>(function(T,A,S){const O=wt(T),B=O.xs.get(S);return B!==void 0?Ie.resolve(O.Ms.get(B)):O.Pi.getTargetData(A,S)})(o,_,Us(e)).next((b=>{if(b)return h=b.lastLimboFreeSnapshotVersion,o.Pi.getMatchingKeysForTargetId(_,b.targetId).next((T=>{m=T}))})).next((()=>o.Fs.getDocumentsMatchingQuery(_,e,n?h:Et.min(),n?m:Yt()))).next((b=>(nI(o,Fv(e),b),{documents:b,Qs:m})))))}function nI(a,e,n){let o=a.Os.get(e)||Et.min();n.forEach(((h,m)=>{m.readTime.compareTo(o)>0&&(o=m.readTime)})),a.Os.set(e,o)}class cE{constructor(){this.activeTargetIds=Xv()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rI{constructor(){this.Mo=new cE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,o){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new cE,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class iI{Oo(e){}shutdown(){}}const uE="ConnectivityMonitor";class hE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ke(uE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ke(uE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Kh=null;function D1(){return Kh===null?Kh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Kh++,"0x"+Kh.toString(16)}const n1="RestConnection",sI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),h=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${o}/databases/${h}`,this.Wo=this.databaseId.database===yf?`project_id=${o}`:`project_id=${o}&database_id=${h}`}Go(e,n,o,h,m){const _=D1(),b=this.zo(e,n.toUriEncodedString());Ke(n1,`Sending RPC '${e}' ${_}:`,b,o);const T={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(T,h,m);const{host:A}=new URL(b),S=lc(A);return this.Jo(e,b,T,o,S).then((O=>(Ke(n1,`Received RPC '${e}' ${_}: `,O),O)),(O=>{throw tc(n1,`RPC '${e}' ${_} failed with error: `,O,"url: ",b,"request:",o),O}))}Ho(e,n,o,h,m,_){return this.Go(e,n,o,h,m)}jo(e,n,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+hc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((h,m)=>e[m]=h)),o&&o.headers.forEach(((h,m)=>e[m]=h))}zo(e,n){const o=sI[e];return`${this.Uo}/v1/${n}:${o}`}terminate(){}}class oI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Qr="WebChannelConnection";class lI extends aI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,o,h,m){const _=D1();return new Promise(((b,T)=>{const A=new V_;A.setWithCredentials(!0),A.listenOnce(U_.COMPLETE,(()=>{try{switch(A.getLastErrorCode()){case nf.NO_ERROR:const O=A.getResponseJson();Ke(Qr,`XHR for RPC '${e}' ${_} received:`,JSON.stringify(O)),b(O);break;case nf.TIMEOUT:Ke(Qr,`RPC '${e}' ${_} timed out`),T(new qe(be.DEADLINE_EXCEEDED,"Request time out"));break;case nf.HTTP_ERROR:const B=A.getStatus();if(Ke(Qr,`RPC '${e}' ${_} failed with status:`,B,"response text:",A.getResponseText()),B>0){let Y=A.getResponseJson();Array.isArray(Y)&&(Y=Y[0]);const ne=Y?.error;if(ne&&ne.status&&ne.message){const ie=(function(Ue){const Oe=Ue.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(Oe)>=0?Oe:be.UNKNOWN})(ne.status);T(new qe(ie,ne.message))}else T(new qe(be.UNKNOWN,"Server responded with status "+A.getStatus()))}else T(new qe(be.UNAVAILABLE,"Connection failed."));break;default:gt(9055,{l_:e,streamId:_,h_:A.getLastErrorCode(),P_:A.getLastError()})}}finally{Ke(Qr,`RPC '${e}' ${_} completed.`)}}));const S=JSON.stringify(h);Ke(Qr,`RPC '${e}' ${_} sending request:`,h),A.send(n,"POST",S,o,15)}))}T_(e,n,o){const h=D1(),m=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],_=j_(),b=z_(),T={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},A=this.longPollingOptions.timeoutSeconds;A!==void 0&&(T.longPollingTimeout=Math.round(1e3*A)),this.useFetchStreams&&(T.useFetchStreams=!0),this.jo(T.initMessageHeaders,n,o),T.encodeInitMessageHeaders=!0;const S=m.join("");Ke(Qr,`Creating RPC '${e}' stream ${h}: ${S}`,T);const O=_.createWebChannel(S,T);this.I_(O);let B=!1,Y=!1;const ne=new oI({Yo:ge=>{Y?Ke(Qr,`Not sending because RPC '${e}' stream ${h} is closed:`,ge):(B||(Ke(Qr,`Opening RPC '${e}' stream ${h} transport.`),O.open(),B=!0),Ke(Qr,`RPC '${e}' stream ${h} sending:`,ge),O.send(ge))},Zo:()=>O.close()}),ie=(ge,Ue,Oe)=>{ge.listen(Ue,(pe=>{try{Oe(pe)}catch(Le){setTimeout((()=>{throw Le}),0)}}))};return ie(O,$c.EventType.OPEN,(()=>{Y||(Ke(Qr,`RPC '${e}' stream ${h} transport opened.`),ne.o_())})),ie(O,$c.EventType.CLOSE,(()=>{Y||(Y=!0,Ke(Qr,`RPC '${e}' stream ${h} transport closed`),ne.a_(),this.E_(O))})),ie(O,$c.EventType.ERROR,(ge=>{Y||(Y=!0,tc(Qr,`RPC '${e}' stream ${h} transport errored. Name:`,ge.name,"Message:",ge.message),ne.a_(new qe(be.UNAVAILABLE,"The operation could not be completed")))})),ie(O,$c.EventType.MESSAGE,(ge=>{if(!Y){const Ue=ge.data[0];gn(!!Ue,16349);const Oe=Ue,pe=Oe?.error||Oe[0]?.error;if(pe){Ke(Qr,`RPC '${e}' stream ${h} received error:`,pe);const Le=pe.status;let nt=(function(j){const P=mr[j];if(P!==void 0)return wx(P)})(Le),ze=pe.message;nt===void 0&&(nt=be.INTERNAL,ze="Unknown error status: "+Le+" with message "+pe.message),Y=!0,ne.a_(new qe(nt,ze)),O.close()}else Ke(Qr,`RPC '${e}' stream ${h} received:`,Ue),ne.u_(Ue)}})),ie(b,F_.STAT_EVENT,(ge=>{ge.stat===_1.PROXY?Ke(Qr,`RPC '${e}' stream ${h} detected buffering proxy`):ge.stat===_1.NOPROXY&&Ke(Qr,`RPC '${e}' stream ${h} detected no buffering proxy`)})),setTimeout((()=>{ne.__()}),0),ne}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function r1(){return typeof document<"u"?document:null}function Yf(a){return new fS(a,!0)}class kx{constructor(e,n,o=1e3,h=1.5,m=6e4){this.Mi=e,this.timerId=n,this.d_=o,this.A_=h,this.R_=m,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),o=Math.max(0,Date.now()-this.f_),h=Math.max(0,n-o);h>0&&Ke("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,h,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const fE="PersistentStream";class Bx{constructor(e,n,o,h,m,_,b,T){this.Mi=e,this.S_=o,this.b_=h,this.connection=m,this.authCredentialsProvider=_,this.appCheckCredentialsProvider=b,this.listener=T,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new kx(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===be.RESOURCE_EXHAUSTED?(ba(n.toString()),ba("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,h])=>{this.D_===n&&this.G_(o,h)}),(o=>{e((()=>{const h=new qe(be.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(h)}))}))}G_(e,n){const o=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{o((()=>this.listener.Xo()))})),this.stream.t_((()=>{o((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((h=>{o((()=>this.z_(h)))})),this.stream.onMessage((h=>{o((()=>++this.F_==1?this.J_(h):this.onNext(h)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ke(fE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Ke(fE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class cI extends Bx{constructor(e,n,o,h,m,_){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,h,_),this.serializer=m}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=mS(this.serializer,e),o=(function(m){if(!("targetChange"in m))return Et.min();const _=m.targetChange;return _.targetIds&&_.targetIds.length?Et.min():_.readTime?Fs(_.readTime):Et.min()})(e);return this.listener.H_(n,o)}Y_(e){const n={};n.database=N1(this.serializer),n.addTarget=(function(m,_){let b;const T=_.target;if(b=C1(T)?{documents:ES(m,T)}:{query:_S(m,T).ft},b.targetId=_.targetId,_.resumeToken.approximateByteSize()>0){b.resumeToken=bx(m,_.resumeToken);const A=S1(m,_.expectedCount);A!==null&&(b.expectedCount=A)}else if(_.snapshotVersion.compareTo(Et.min())>0){b.readTime=wf(m,_.snapshotVersion.toTimestamp());const A=S1(m,_.expectedCount);A!==null&&(b.expectedCount=A)}return b})(this.serializer,e);const o=AS(this.serializer,e);o&&(n.labels=o),this.q_(n)}Z_(e){const n={};n.database=N1(this.serializer),n.removeTarget=e,this.q_(n)}}class uI extends Bx{constructor(e,n,o,h,m,_){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,h,_),this.serializer=m}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return gn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,gn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){gn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=yS(e.writeResults,e.commitTime),o=Fs(e.commitTime);return this.listener.na(o,n)}ra(){const e={};e.database=N1(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((o=>pS(this.serializer,o)))};this.q_(n)}}class hI{}class fI extends hI{constructor(e,n,o,h){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=h,this.ia=!1}sa(){if(this.ia)throw new qe(be.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,o,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([m,_])=>this.connection.Go(e,I1(n,o),h,m,_))).catch((m=>{throw m.name==="FirebaseError"?(m.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new qe(be.UNKNOWN,m.toString())}))}Ho(e,n,o,h,m){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([_,b])=>this.connection.Ho(e,I1(n,o),h,_,b,m))).catch((_=>{throw _.name==="FirebaseError"?(_.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),_):new qe(be.UNKNOWN,_.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class dI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ba(n),this.aa=!1):Ke("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const sl="RemoteStore";class gI{constructor(e,n,o,h,m){this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=m,this.Aa.Oo((_=>{o.enqueueAndForget((async()=>{cl(this)&&(Ke(sl,"Restarting streams for network reachability change."),await(async function(T){const A=wt(T);A.Ea.add(4),await Du(A),A.Ra.set("Unknown"),A.Ea.delete(4),await Wf(A)})(this))}))})),this.Ra=new dI(o,h)}}async function Wf(a){if(cl(a))for(const e of a.da)await e(!0)}async function Du(a){for(const e of a.da)await e(!1)}function Vx(a,e){const n=wt(a);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),xg(n)?_g(n):gc(n).O_()&&Eg(n,e))}function yg(a,e){const n=wt(a),o=gc(n);n.Ia.delete(e),o.O_()&&Ux(n,e),n.Ia.size===0&&(o.O_()?o.L_():cl(n)&&n.Ra.set("Unknown"))}function Eg(a,e){if(a.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Et.min())>0){const n=a.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}gc(a).Y_(e)}function Ux(a,e){a.Va.Ue(e),gc(a).Z_(e)}function _g(a){a.Va=new lS({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),At:e=>a.Ia.get(e)||null,ht:()=>a.datastore.serializer.databaseId}),gc(a).start(),a.Ra.ua()}function xg(a){return cl(a)&&!gc(a).x_()&&a.Ia.size>0}function cl(a){return wt(a).Ea.size===0}function Fx(a){a.Va=void 0}async function mI(a){a.Ra.set("Online")}async function pI(a){a.Ia.forEach(((e,n)=>{Eg(a,e)}))}async function yI(a,e){Fx(a),xg(a)?(a.Ra.ha(e),_g(a)):a.Ra.set("Unknown")}async function EI(a,e,n){if(a.Ra.set("Online"),e instanceof Cx&&e.state===2&&e.cause)try{await(async function(h,m){const _=m.cause;for(const b of m.targetIds)h.Ia.has(b)&&(await h.remoteSyncer.rejectListen(b,_),h.Ia.delete(b),h.Va.removeTarget(b))})(a,e)}catch(o){Ke(sl,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await Cf(a,o)}else if(e instanceof of?a.Va.Ze(e):e instanceof Tx?a.Va.st(e):a.Va.tt(e),!n.isEqual(Et.min()))try{const o=await Px(a.localStore);n.compareTo(o)>=0&&await(function(m,_){const b=m.Va.Tt(_);return b.targetChanges.forEach(((T,A)=>{if(T.resumeToken.approximateByteSize()>0){const S=m.Ia.get(A);S&&m.Ia.set(A,S.withResumeToken(T.resumeToken,_))}})),b.targetMismatches.forEach(((T,A)=>{const S=m.Ia.get(T);if(!S)return;m.Ia.set(T,S.withResumeToken(zr.EMPTY_BYTE_STRING,S.snapshotVersion)),Ux(m,T);const O=new co(S.target,T,A,S.sequenceNumber);Eg(m,O)})),m.remoteSyncer.applyRemoteEvent(b)})(a,n)}catch(o){Ke(sl,"Failed to raise snapshot:",o),await Cf(a,o)}}async function Cf(a,e,n){if(!dc(e))throw e;a.Ea.add(1),await Du(a),a.Ra.set("Offline"),n||(n=()=>Px(a.localStore)),a.asyncQueue.enqueueRetryable((async()=>{Ke(sl,"Retrying IndexedDB access"),await n(),a.Ea.delete(1),await Wf(a)}))}function zx(a,e){return e().catch((n=>Cf(a,n,e)))}async function Kf(a){const e=wt(a),n=wo(e);let o=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ig;for(;_I(e);)try{const h=await eI(e.localStore,o);if(h===null){e.Ta.length===0&&n.L_();break}o=h.batchId,xI(e,h)}catch(h){await Cf(e,h)}jx(e)&&Hx(e)}function _I(a){return cl(a)&&a.Ta.length<10}function xI(a,e){a.Ta.push(e);const n=wo(a);n.O_()&&n.X_&&n.ea(e.mutations)}function jx(a){return cl(a)&&!wo(a).x_()&&a.Ta.length>0}function Hx(a){wo(a).start()}async function AI(a){wo(a).ra()}async function wI(a){const e=wo(a);for(const n of a.Ta)e.ea(n.mutations)}async function TI(a,e,n){const o=a.Ta.shift(),h=ug.from(o,e,n);await zx(a,(()=>a.remoteSyncer.applySuccessfulWrite(h))),await Kf(a)}async function CI(a,e){e&&wo(a).X_&&await(async function(o,h){if((function(_){return sS(_)&&_!==be.ABORTED})(h.code)){const m=o.Ta.shift();wo(o).B_(),await zx(o,(()=>o.remoteSyncer.rejectFailedWrite(m.batchId,h))),await Kf(o)}})(a,e),jx(a)&&Hx(a)}async function dE(a,e){const n=wt(a);n.asyncQueue.verifyOperationInProgress(),Ke(sl,"RemoteStore received new credentials");const o=cl(n);n.Ea.add(3),await Du(n),o&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Wf(n)}async function bI(a,e){const n=wt(a);e?(n.Ea.delete(2),await Wf(n)):e||(n.Ea.add(2),await Du(n),n.Ra.set("Unknown"))}function gc(a){return a.ma||(a.ma=(function(n,o,h){const m=wt(n);return m.sa(),new cI(o,m.connection,m.authCredentials,m.appCheckCredentials,m.serializer,h)})(a.datastore,a.asyncQueue,{Xo:mI.bind(null,a),t_:pI.bind(null,a),r_:yI.bind(null,a),H_:EI.bind(null,a)}),a.da.push((async e=>{e?(a.ma.B_(),xg(a)?_g(a):a.Ra.set("Unknown")):(await a.ma.stop(),Fx(a))}))),a.ma}function wo(a){return a.fa||(a.fa=(function(n,o,h){const m=wt(n);return m.sa(),new uI(o,m.connection,m.authCredentials,m.appCheckCredentials,m.serializer,h)})(a.datastore,a.asyncQueue,{Xo:()=>Promise.resolve(),t_:AI.bind(null,a),r_:CI.bind(null,a),ta:wI.bind(null,a),na:TI.bind(null,a)}),a.da.push((async e=>{e?(a.fa.B_(),await Kf(a)):(await a.fa.stop(),a.Ta.length>0&&(Ke(sl,`Stopping write stream with ${a.Ta.length} pending writes`),a.Ta=[]))}))),a.fa}class Ag{constructor(e,n,o,h,m){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=h,this.removalCallback=m,this.deferred=new wa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((_=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,h,m){const _=Date.now()+o,b=new Ag(e,n,_,h,m);return b.start(o),b}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qe(be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wg(a,e){if(ba("AsyncQueue",`${e}: ${a}`),dc(a))return new qe(be.UNAVAILABLE,`${e}: ${a}`);throw a}class Zl{static emptySet(e){return new Zl(e.comparator)}constructor(e){this.comparator=e?(n,o)=>e(n,o)||ot.comparator(n.key,o.key):(n,o)=>ot.comparator(n.key,o.key),this.keyedMap=eu(),this.sortedSet=new Zn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,o)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const h=n.getNext().key,m=o.getNext().key;if(!h.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const o=new Zl;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class gE{constructor(){this.ga=new Zn(ot.comparator)}track(e){const n=e.doc.key,o=this.ga.get(n);o?e.type!==0&&o.type===3?this.ga=this.ga.insert(n,e):e.type===3&&o.type!==1?this.ga=this.ga.insert(n,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.ga=this.ga.remove(n):e.type===1&&o.type===2?this.ga=this.ga.insert(n,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):gt(63341,{Rt:e,pa:o}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,o)=>{e.push(o)})),e}}class ac{constructor(e,n,o,h,m,_,b,T,A){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=h,this.mutatedKeys=m,this.fromCache=_,this.syncStateChanged=b,this.excludesMetadataChanges=T,this.hasCachedResults=A}static fromInitialDocuments(e,n,o,h,m){const _=[];return n.forEach((b=>{_.push({type:0,doc:b})})),new ac(e,n,Zl.emptySet(n),_,o,h,!0,!1,m)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let h=0;h<n.length;h++)if(n[h].type!==o[h].type||!n[h].doc.isEqual(o[h].doc))return!1;return!0}}class vI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class SI{constructor(){this.queries=mE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,o){const h=wt(n),m=h.queries;h.queries=mE(),m.forEach(((_,b)=>{for(const T of b.Sa)T.onError(o)}))})(this,new qe(be.ABORTED,"Firestore shutting down"))}}function mE(){return new ll((a=>ux(a)),zf)}async function Tg(a,e){const n=wt(a);let o=3;const h=e.query;let m=n.queries.get(h);m?!m.ba()&&e.Da()&&(o=2):(m=new vI,o=e.Da()?0:1);try{switch(o){case 0:m.wa=await n.onListen(h,!0);break;case 1:m.wa=await n.onListen(h,!1);break;case 2:await n.onFirstRemoteStoreListen(h)}}catch(_){const b=wg(_,`Initialization of query '${jl(e.query)}' failed`);return void e.onError(b)}n.queries.set(h,m),m.Sa.push(e),e.va(n.onlineState),m.wa&&e.Fa(m.wa)&&bg(n)}async function Cg(a,e){const n=wt(a),o=e.query;let h=3;const m=n.queries.get(o);if(m){const _=m.Sa.indexOf(e);_>=0&&(m.Sa.splice(_,1),m.Sa.length===0?h=e.Da()?0:1:!m.ba()&&e.Da()&&(h=2))}switch(h){case 0:return n.queries.delete(o),n.onUnlisten(o,!0);case 1:return n.queries.delete(o),n.onUnlisten(o,!1);case 2:return n.onLastRemoteStoreUnlisten(o);default:return}}function II(a,e){const n=wt(a);let o=!1;for(const h of e){const m=h.query,_=n.queries.get(m);if(_){for(const b of _.Sa)b.Fa(h)&&(o=!0);_.wa=h}}o&&bg(n)}function RI(a,e,n){const o=wt(a),h=o.queries.get(e);if(h)for(const m of h.Sa)m.onError(n);o.queries.delete(e)}function bg(a){a.Ca.forEach((e=>{e.next()}))}var M1,pE;(pE=M1||(M1={})).Ma="default",pE.Cache="cache";class vg{constructor(e,n,o){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(e){if(!this.options.includeMetadataChanges){const o=[];for(const h of e.docChanges)h.type!==3&&o.push(h);e=new ac(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const o=n!=="Offline";return(!this.options.qa||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ac.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==M1.Cache}}class Gx{constructor(e){this.key=e}}class qx{constructor(e){this.key=e}}class NI{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Yt(),this.mutatedKeys=Yt(),this.eu=hx(e),this.tu=new Zl(this.eu)}get nu(){return this.Ya}ru(e,n){const o=n?n.iu:new gE,h=n?n.tu:this.tu;let m=n?n.mutatedKeys:this.mutatedKeys,_=h,b=!1;const T=this.query.limitType==="F"&&h.size===this.query.limit?h.last():null,A=this.query.limitType==="L"&&h.size===this.query.limit?h.first():null;if(e.inorderTraversal(((S,O)=>{const B=h.get(S),Y=jf(this.query,O)?O:null,ne=!!B&&this.mutatedKeys.has(B.key),ie=!!Y&&(Y.hasLocalMutations||this.mutatedKeys.has(Y.key)&&Y.hasCommittedMutations);let ge=!1;B&&Y?B.data.isEqual(Y.data)?ne!==ie&&(o.track({type:3,doc:Y}),ge=!0):this.su(B,Y)||(o.track({type:2,doc:Y}),ge=!0,(T&&this.eu(Y,T)>0||A&&this.eu(Y,A)<0)&&(b=!0)):!B&&Y?(o.track({type:0,doc:Y}),ge=!0):B&&!Y&&(o.track({type:1,doc:B}),ge=!0,(T||A)&&(b=!0)),ge&&(Y?(_=_.add(Y),m=ie?m.add(S):m.delete(S)):(_=_.delete(S),m=m.delete(S)))})),this.query.limit!==null)for(;_.size>this.query.limit;){const S=this.query.limitType==="F"?_.last():_.first();_=_.delete(S.key),m=m.delete(S.key),o.track({type:1,doc:S})}return{tu:_,iu:o,Cs:b,mutatedKeys:m}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o,h){const m=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const _=e.iu.ya();_.sort(((S,O)=>(function(Y,ne){const ie=ge=>{switch(ge){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt(20277,{Rt:ge})}};return ie(Y)-ie(ne)})(S.type,O.type)||this.eu(S.doc,O.doc))),this.ou(o),h=h??!1;const b=n&&!h?this._u():[],T=this.Xa.size===0&&this.current&&!h?1:0,A=T!==this.Za;return this.Za=T,_.length!==0||A?{snapshot:new ac(this.query,e.tu,m,_,e.mutatedKeys,T===0,A,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:b}:{au:b}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new gE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Yt(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Xa=this.Xa.add(o.key))}));const n=[];return e.forEach((o=>{this.Xa.has(o)||n.push(new qx(o))})),this.Xa.forEach((o=>{e.has(o)||n.push(new Gx(o))})),n}cu(e){this.Ya=e.Qs,this.Xa=Yt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ac.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Sg="SyncEngine";class OI{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class DI{constructor(e){this.key=e,this.hu=!1}}class MI{constructor(e,n,o,h,m,_){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=h,this.currentUser=m,this.maxConcurrentLimboResolutions=_,this.Pu={},this.Tu=new ll((b=>ux(b)),zf),this.Iu=new Map,this.Eu=new Set,this.du=new Zn(ot.comparator),this.Au=new Map,this.Ru=new dg,this.Vu={},this.mu=new Map,this.fu=sc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function LI(a,e,n=!0){const o=Zx(a);let h;const m=o.Tu.get(e);return m?(o.sharedClientState.addLocalQueryTarget(m.targetId),h=m.view.lu()):h=await Xx(o,e,n,!0),h}async function PI(a,e){const n=Zx(a);await Xx(n,e,!0,!1)}async function Xx(a,e,n,o){const h=await tI(a.localStore,Us(e)),m=h.targetId,_=a.sharedClientState.addLocalQueryTarget(m,n);let b;return o&&(b=await kI(a,e,m,_==="current",h.resumeToken)),a.isPrimaryClient&&n&&Vx(a.remoteStore,h),b}async function kI(a,e,n,o,h){a.pu=(O,B,Y)=>(async function(ie,ge,Ue,Oe){let pe=ge.view.ru(Ue);pe.Cs&&(pe=await lE(ie.localStore,ge.query,!1).then((({documents:F})=>ge.view.ru(F,pe))));const Le=Oe&&Oe.targetChanges.get(ge.targetId),nt=Oe&&Oe.targetMismatches.get(ge.targetId)!=null,ze=ge.view.applyChanges(pe,ie.isPrimaryClient,Le,nt);return EE(ie,ge.targetId,ze.au),ze.snapshot})(a,O,B,Y);const m=await lE(a.localStore,e,!0),_=new NI(e,m.Qs),b=_.ru(m.documents),T=Ou.createSynthesizedTargetChangeForCurrentChange(n,o&&a.onlineState!=="Offline",h),A=_.applyChanges(b,a.isPrimaryClient,T);EE(a,n,A.au);const S=new OI(e,n,_);return a.Tu.set(e,S),a.Iu.has(n)?a.Iu.get(n).push(e):a.Iu.set(n,[e]),A.snapshot}async function BI(a,e,n){const o=wt(a),h=o.Tu.get(e),m=o.Iu.get(h.targetId);if(m.length>1)return o.Iu.set(h.targetId,m.filter((_=>!zf(_,e)))),void o.Tu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(h.targetId),o.sharedClientState.isActiveQueryTarget(h.targetId)||await O1(o.localStore,h.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(h.targetId),n&&yg(o.remoteStore,h.targetId),L1(o,h.targetId)})).catch(fc)):(L1(o,h.targetId),await O1(o.localStore,h.targetId,!0))}async function VI(a,e){const n=wt(a),o=n.Tu.get(e),h=n.Iu.get(o.targetId);n.isPrimaryClient&&h.length===1&&(n.sharedClientState.removeLocalQueryTarget(o.targetId),yg(n.remoteStore,o.targetId))}async function UI(a,e,n){const o=XI(a);try{const h=await(function(_,b){const T=wt(_),A=An.now(),S=b.reduce(((Y,ne)=>Y.add(ne.key)),Yt());let O,B;return T.persistence.runTransaction("Locally write mutations","readwrite",(Y=>{let ne=va(),ie=Yt();return T.Ns.getEntries(Y,S).next((ge=>{ne=ge,ne.forEach(((Ue,Oe)=>{Oe.isValidDocument()||(ie=ie.add(Ue))}))})).next((()=>T.localDocuments.getOverlayedDocuments(Y,ne))).next((ge=>{O=ge;const Ue=[];for(const Oe of b){const pe=eS(Oe,O.get(Oe.key).overlayedDocument);pe!=null&&Ue.push(new So(Oe.key,pe,nx(pe.value.mapValue),mi.exists(!0)))}return T.mutationQueue.addMutationBatch(Y,A,Ue,b)})).next((ge=>{B=ge;const Ue=ge.applyToLocalDocumentSet(O,ie);return T.documentOverlayCache.saveOverlays(Y,ge.batchId,Ue)}))})).then((()=>({batchId:B.batchId,changes:dx(O)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(h.batchId),(function(_,b,T){let A=_.Vu[_.currentUser.toKey()];A||(A=new Zn(Xt)),A=A.insert(b,T),_.Vu[_.currentUser.toKey()]=A})(o,h.batchId,n),await Mu(o,h.changes),await Kf(o.remoteStore)}catch(h){const m=wg(h,"Failed to persist write");n.reject(m)}}async function Yx(a,e){const n=wt(a);try{const o=await JS(n.localStore,e);e.targetChanges.forEach(((h,m)=>{const _=n.Au.get(m);_&&(gn(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1,22616),h.addedDocuments.size>0?_.hu=!0:h.modifiedDocuments.size>0?gn(_.hu,14607):h.removedDocuments.size>0&&(gn(_.hu,42227),_.hu=!1))})),await Mu(n,o,e)}catch(o){await fc(o)}}function yE(a,e,n){const o=wt(a);if(o.isPrimaryClient&&n===0||!o.isPrimaryClient&&n===1){const h=[];o.Tu.forEach(((m,_)=>{const b=_.view.va(e);b.snapshot&&h.push(b.snapshot)})),(function(_,b){const T=wt(_);T.onlineState=b;let A=!1;T.queries.forEach(((S,O)=>{for(const B of O.Sa)B.va(b)&&(A=!0)})),A&&bg(T)})(o.eventManager,e),h.length&&o.Pu.H_(h),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function FI(a,e,n){const o=wt(a);o.sharedClientState.updateQueryState(e,"rejected",n);const h=o.Au.get(e),m=h&&h.key;if(m){let _=new Zn(ot.comparator);_=_.insert(m,Jr.newNoDocument(m,Et.min()));const b=Yt().add(m),T=new Xf(Et.min(),new Map,new Zn(Xt),_,b);await Yx(o,T),o.du=o.du.remove(m),o.Au.delete(e),Ig(o)}else await O1(o.localStore,e,!1).then((()=>L1(o,e,n))).catch(fc)}async function zI(a,e){const n=wt(a),o=e.batch.batchId;try{const h=await ZS(n.localStore,e);Kx(n,o,null),Wx(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),await Mu(n,h)}catch(h){await fc(h)}}async function jI(a,e,n){const o=wt(a);try{const h=await(function(_,b){const T=wt(_);return T.persistence.runTransaction("Reject batch","readwrite-primary",(A=>{let S;return T.mutationQueue.lookupMutationBatch(A,b).next((O=>(gn(O!==null,37113),S=O.keys(),T.mutationQueue.removeMutationBatch(A,O)))).next((()=>T.mutationQueue.performConsistencyCheck(A))).next((()=>T.documentOverlayCache.removeOverlaysForBatchId(A,S,b))).next((()=>T.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(A,S))).next((()=>T.localDocuments.getDocuments(A,S)))}))})(o.localStore,e);Kx(o,e,n),Wx(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),await Mu(o,h)}catch(h){await fc(h)}}function Wx(a,e){(a.mu.get(e)||[]).forEach((n=>{n.resolve()})),a.mu.delete(e)}function Kx(a,e,n){const o=wt(a);let h=o.Vu[o.currentUser.toKey()];if(h){const m=h.get(e);m&&(n?m.reject(n):m.resolve(),h=h.remove(e)),o.Vu[o.currentUser.toKey()]=h}}function L1(a,e,n=null){a.sharedClientState.removeLocalQueryTarget(e);for(const o of a.Iu.get(e))a.Tu.delete(o),n&&a.Pu.yu(o,n);a.Iu.delete(e),a.isPrimaryClient&&a.Ru.jr(e).forEach((o=>{a.Ru.containsKey(o)||Qx(a,o)}))}function Qx(a,e){a.Eu.delete(e.path.canonicalString());const n=a.du.get(e);n!==null&&(yg(a.remoteStore,n),a.du=a.du.remove(e),a.Au.delete(n),Ig(a))}function EE(a,e,n){for(const o of n)o instanceof Gx?(a.Ru.addReference(o.key,e),HI(a,o)):o instanceof qx?(Ke(Sg,"Document no longer in limbo: "+o.key),a.Ru.removeReference(o.key,e),a.Ru.containsKey(o.key)||Qx(a,o.key)):gt(19791,{wu:o})}function HI(a,e){const n=e.key,o=n.path.canonicalString();a.du.get(n)||a.Eu.has(o)||(Ke(Sg,"New document in limbo: "+n),a.Eu.add(o),Ig(a))}function Ig(a){for(;a.Eu.size>0&&a.du.size<a.maxConcurrentLimboResolutions;){const e=a.Eu.values().next().value;a.Eu.delete(e);const n=new ot(Nn.fromString(e)),o=a.fu.next();a.Au.set(o,new DI(n)),a.du=a.du.insert(n,o),Vx(a.remoteStore,new co(Us(Ff(n.path)),o,"TargetPurposeLimboResolution",Bf.ce))}}async function Mu(a,e,n){const o=wt(a),h=[],m=[],_=[];o.Tu.isEmpty()||(o.Tu.forEach(((b,T)=>{_.push(o.pu(T,e,n).then((A=>{if((A||n)&&o.isPrimaryClient){const S=A?!A.fromCache:n?.targetChanges.get(T.targetId)?.current;o.sharedClientState.updateQueryState(T.targetId,S?"current":"not-current")}if(A){h.push(A);const S=mg.As(T.targetId,A);m.push(S)}})))})),await Promise.all(_),o.Pu.H_(h),await(async function(T,A){const S=wt(T);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(O=>Ie.forEach(A,(B=>Ie.forEach(B.Es,(Y=>S.persistence.referenceDelegate.addReference(O,B.targetId,Y))).next((()=>Ie.forEach(B.ds,(Y=>S.persistence.referenceDelegate.removeReference(O,B.targetId,Y)))))))))}catch(O){if(!dc(O))throw O;Ke(pg,"Failed to update sequence numbers: "+O)}for(const O of A){const B=O.targetId;if(!O.fromCache){const Y=S.Ms.get(B),ne=Y.snapshotVersion,ie=Y.withLastLimboFreeSnapshotVersion(ne);S.Ms=S.Ms.insert(B,ie)}}})(o.localStore,m))}async function GI(a,e){const n=wt(a);if(!n.currentUser.isEqual(e)){Ke(Sg,"User change. New user:",e.toKey());const o=await Lx(n.localStore,e);n.currentUser=e,(function(m,_){m.mu.forEach((b=>{b.forEach((T=>{T.reject(new qe(be.CANCELLED,_))}))})),m.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await Mu(n,o.Ls)}}function qI(a,e){const n=wt(a),o=n.Au.get(e);if(o&&o.hu)return Yt().add(o.key);{let h=Yt();const m=n.Iu.get(e);if(!m)return h;for(const _ of m){const b=n.Tu.get(_);h=h.unionWith(b.view.nu)}return h}}function Zx(a){const e=wt(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=Yx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FI.bind(null,e),e.Pu.H_=II.bind(null,e.eventManager),e.Pu.yu=RI.bind(null,e.eventManager),e}function XI(a){const e=wt(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jI.bind(null,e),e}class bf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return QS(this.persistence,new YS,e.initialUser,this.serializer)}Cu(e){return new Mx(gg.mi,this.serializer)}Du(e){return new rI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bf.provider={build:()=>new bf};class YI extends bf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){gn(this.persistence.referenceDelegate instanceof Tf,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new DS(o,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ii.withCacheSize(this.cacheSizeBytes):Ii.DEFAULT;return new Mx((o=>Tf.mi(o,n)),this.serializer)}}class P1{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>yE(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=GI.bind(null,this.syncEngine),await bI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new SI})()}createDatastore(e){const n=Yf(e.databaseInfo.databaseId),o=(function(m){return new lI(m)})(e.databaseInfo);return(function(m,_,b,T){return new fI(m,_,b,T)})(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return(function(o,h,m,_,b){return new gI(o,h,m,_,b)})(this.localStore,this.datastore,e.asyncQueue,(n=>yE(this.syncEngine,n,0)),(function(){return hE.v()?new hE:new iI})())}createSyncEngine(e,n){return(function(h,m,_,b,T,A,S){const O=new MI(h,m,_,b,T,A);return S&&(O.gu=!0),O})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const o=wt(n);Ke(sl,"RemoteStore shutting down."),o.Ea.add(5),await Du(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}P1.provider={build:()=>new P1};class Rg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ba("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const To="FirestoreClient";class WI{constructor(e,n,o,h,m){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=h,this.user=Zr.UNAUTHENTICATED,this.clientId=rg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=m,this.authCredentials.start(o,(async _=>{Ke(To,"Received user=",_.uid),await this.authCredentialListener(_),this.user=_})),this.appCheckCredentials.start(o,(_=>(Ke(To,"Received new app check token=",_),this.appCheckCredentialListener(_,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const o=wg(n,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function i1(a,e){a.asyncQueue.verifyOperationInProgress(),Ke(To,"Initializing OfflineComponentProvider");const n=a.configuration;await e.initialize(n);let o=n.initialUser;a.setCredentialChangeListener((async h=>{o.isEqual(h)||(await Lx(e.localStore,h),o=h)})),e.persistence.setDatabaseDeletedListener((()=>a.terminate())),a._offlineComponents=e}async function _E(a,e){a.asyncQueue.verifyOperationInProgress();const n=await KI(a);Ke(To,"Initializing OnlineComponentProvider"),await e.initialize(n,a.configuration),a.setCredentialChangeListener((o=>dE(e.remoteStore,o))),a.setAppCheckTokenChangeListener(((o,h)=>dE(e.remoteStore,h))),a._onlineComponents=e}async function KI(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){Ke(To,"Using user provided OfflineComponentProvider");try{await i1(a,a._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(h){return h.name==="FirebaseError"?h.code===be.FAILED_PRECONDITION||h.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&h instanceof DOMException)||h.code===22||h.code===20||h.code===11})(n))throw n;tc("Error using user provided cache. Falling back to memory cache: "+n),await i1(a,new bf)}}else Ke(To,"Using default OfflineComponentProvider"),await i1(a,new YI(void 0));return a._offlineComponents}async function Jx(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(Ke(To,"Using user provided OnlineComponentProvider"),await _E(a,a._uninitializedComponentsProvider._online)):(Ke(To,"Using default OnlineComponentProvider"),await _E(a,new P1))),a._onlineComponents}function QI(a){return Jx(a).then((e=>e.syncEngine))}async function vf(a){const e=await Jx(a),n=e.eventManager;return n.onListen=LI.bind(null,e.syncEngine),n.onUnlisten=BI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=PI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=VI.bind(null,e.syncEngine),n}function ZI(a,e,n={}){const o=new wa;return a.asyncQueue.enqueueAndForget((async()=>(function(m,_,b,T,A){const S=new Rg({next:B=>{S.Nu(),_.enqueueAndForget((()=>Cg(m,O)));const Y=B.docs.has(b);!Y&&B.fromCache?A.reject(new qe(be.UNAVAILABLE,"Failed to get document because the client is offline.")):Y&&B.fromCache&&T&&T.source==="server"?A.reject(new qe(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):A.resolve(B)},error:B=>A.reject(B)}),O=new vg(Ff(b.path),S,{includeMetadataChanges:!0,qa:!0});return Tg(m,O)})(await vf(a),a.asyncQueue,e,n,o))),o.promise}function JI(a,e,n={}){const o=new wa;return a.asyncQueue.enqueueAndForget((async()=>(function(m,_,b,T,A){const S=new Rg({next:B=>{S.Nu(),_.enqueueAndForget((()=>Cg(m,O))),B.fromCache&&T.source==="server"?A.reject(new qe(be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):A.resolve(B)},error:B=>A.reject(B)}),O=new vg(b,S,{includeMetadataChanges:!0,qa:!0});return Tg(m,O)})(await vf(a),a.asyncQueue,e,n,o))),o.promise}function $x(a){const e={};return a.timeoutSeconds!==void 0&&(e.timeoutSeconds=a.timeoutSeconds),e}const xE=new Map;const eA="firestore.googleapis.com",AE=!0;class wE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new qe(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=eA,this.ssl=AE}else this.host=e.host,this.ssl=e.ssl??AE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Dx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<NS)throw new qe(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$x(e.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new qe(be.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new qe(be.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new qe(be.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,h){return o.timeoutSeconds===h.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qf{constructor(e,n,o,h){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=h,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qe(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new qe(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new rv;switch(o.type){case"firstParty":return new ov(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new qe(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const o=xE.get(n);o&&(Ke("ComponentProvider","Removing Datastore"),xE.delete(n),o.terminate())})(this),Promise.resolve()}}function $I(a,e,n,o={}){a=gi(a,Qf);const h=lc(e),m=a._getSettings(),_={...m,emulatorOptions:a._getEmulatorOptions()},b=`${e}:${n}`;h&&(KE(`https://${b}`),QE("Firestore",!0)),m.host!==eA&&m.host!==b&&tc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const T={...m,host:b,ssl:h,emulatorOptions:o};if(!el(T,_)&&(a._setSettings(T),o.mockUserToken)){let A,S;if(typeof o.mockUserToken=="string")A=o.mockUserToken,S=Zr.MOCK_USER;else{A=mT(o.mockUserToken,a._app?.options.projectId);const O=o.mockUserToken.sub||o.mockUserToken.user_id;if(!O)throw new qe(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Zr(O)}a._authCredentials=new iv(new G_(A,S))}}class ul{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new ul(this.firestore,e,this._query)}}class rr{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new po(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rr(this.firestore,e,this._key)}toJSON(){return{type:rr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,o){if(Iu(n,rr._jsonSchema))return new rr(e,o||null,new ot(Nn.fromString(n.referencePath)))}}rr._jsonSchemaVersion="firestore/documentReference/1.0",rr._jsonSchema={type:Er("string",rr._jsonSchemaVersion),referencePath:Er("string")};class po extends ul{constructor(e,n,o){super(e,n,Ff(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rr(this.firestore,null,new ot(e))}withConverter(e){return new po(this.firestore,e,this._path)}}function di(a,e,...n){if(a=cr(a),q_("collection","path",e),a instanceof Qf){const o=Nn.fromString(e,...n);return Py(o),new po(a,null,o)}{if(!(a instanceof rr||a instanceof po))throw new qe(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=a._path.child(Nn.fromString(e,...n));return Py(o),new po(a.firestore,null,o)}}function Rr(a,e,...n){if(a=cr(a),arguments.length===1&&(e=rg.newId()),q_("doc","path",e),a instanceof Qf){const o=Nn.fromString(e,...n);return Ly(o),new rr(a,null,new ot(o))}{if(!(a instanceof rr||a instanceof po))throw new qe(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=a._path.child(Nn.fromString(e,...n));return Ly(o),new rr(a.firestore,a instanceof po?a.converter:null,new ot(o))}}const TE="AsyncQueue";class CE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new kx(this,"async_queue_retry"),this._c=()=>{const o=r1();o&&Ke(TE,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=e;const n=r1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=r1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new wa;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!dc(e))throw e;Ke(TE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((o=>{throw this.nc=o,this.rc=!1,ba("INTERNAL UNHANDLED ERROR: ",bE(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=n,n}enqueueAfterDelay(e,n,o){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const h=Ag.createAndSchedule(this,e,n,o,(m=>this.hc(m)));return this.tc.push(h),h}uc(){this.nc&&gt(47125,{Pc:bE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,o)=>n.targetTimeMs-o.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function bE(a){let e=a.message||"";return a.stack&&(e=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),e}function vE(a){return(function(n,o){if(typeof n!="object"||n===null)return!1;const h=n;for(const m of o)if(m in h&&typeof h[m]=="function")return!0;return!1})(a,["next","error","complete"])}class Gs extends Qf{constructor(e,n,o,h){super(e,n,o,h),this.type="firestore",this._queue=new CE,this._persistenceKey=h?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new CE(e),this._firestoreClient=void 0,await e}}}function e4(a,e){const n=typeof a=="object"?a:Y1(),o=typeof a=="string"?a:yf,h=q1(n,"firestore").getImmediate({identifier:o});if(!h._initialized){const m=dT("firestore");m&&$I(h,...m)}return h}function Lu(a){if(a._terminated)throw new qe(be.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||t4(a),a._firestoreClient}function t4(a){const e=a._freezeSettings(),n=(function(h,m,_,b){return new Cv(h,m,_,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,$x(b.experimentalLongPollingOptions),b.useFetchStreams,b.isUsingEmulator)})(a._databaseId,a._app?.options.appId||"",a._persistenceKey,e);a._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(a._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),a._firestoreClient=new WI(a._authCredentials,a._appCheckCredentials,a._queue,n,a._componentsProvider&&(function(h){const m=h?._online.build();return{_offline:h?._offline.build(m),_online:m}})(a._componentsProvider))}class cs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cs(zr.fromBase64String(e))}catch(n){throw new qe(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new cs(zr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:cs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Iu(e,cs._jsonSchema))return cs.fromBase64String(e.bytes)}}cs._jsonSchemaVersion="firestore/bytes/1.0",cs._jsonSchema={type:Er("string",cs._jsonSchemaVersion),bytes:Er("string")};class Pu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new qe(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Zf{constructor(e){this._methodName=e}}class zs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new qe(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new qe(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xt(this._lat,e._lat)||Xt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:zs._jsonSchemaVersion}}static fromJSON(e){if(Iu(e,zs._jsonSchema))return new zs(e.latitude,e.longitude)}}zs._jsonSchemaVersion="firestore/geoPoint/1.0",zs._jsonSchema={type:Er("string",zs._jsonSchemaVersion),latitude:Er("number"),longitude:Er("number")};class js{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,h){if(o.length!==h.length)return!1;for(let m=0;m<o.length;++m)if(o[m]!==h[m])return!1;return!0})(this._values,e._values)}toJSON(){return{type:js._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Iu(e,js._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new js(e.vectorValues);throw new qe(be.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}js._jsonSchemaVersion="firestore/vectorValue/1.0",js._jsonSchema={type:Er("string",js._jsonSchemaVersion),vectorValues:Er("object")};const n4=/^__.*__$/;class r4{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return this.fieldMask!==null?new So(e,this.data,this.fieldMask,n,this.fieldTransforms):new Nu(e,this.data,n,this.fieldTransforms)}}class tA{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new So(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function nA(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt(40011,{Ac:a})}}class Ng{constructor(e,n,o,h,m,_){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=h,m===void 0&&this.Rc(),this.fieldTransforms=m||[],this.fieldMask=_||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ng({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),o=this.Vc({path:n,fc:!1});return o.gc(e),o}yc(e){const n=this.path?.child(e),o=this.Vc({path:n,fc:!1});return o.Rc(),o}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Sf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(nA(this.Ac)&&n4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class i4{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||Yf(e)}Cc(e,n,o,h=!1){return new Ng({Ac:e,methodName:n,Dc:o,path:Fr.emptyPath(),fc:!1,bc:h},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ku(a){const e=a._freezeSettings(),n=Yf(a._databaseId);return new i4(a._databaseId,!!e.ignoreUndefinedProperties,n)}function Og(a,e,n,o,h,m={}){const _=a.Cc(m.merge||m.mergeFields?2:0,e,n,h);Mg("Data must be an object, but it was:",_,o);const b=sA(o,_);let T,A;if(m.merge)T=new Gi(_.fieldMask),A=_.fieldTransforms;else if(m.mergeFields){const S=[];for(const O of m.mergeFields){const B=k1(e,O,n);if(!_.contains(B))throw new qe(be.INVALID_ARGUMENT,`Field '${B}' is specified in your field mask but missing from your input data.`);oA(S,B)||S.push(B)}T=new Gi(S),A=_.fieldTransforms.filter((O=>T.covers(O.field)))}else T=null,A=_.fieldTransforms;return new r4(new Ri(b),T,A)}class Jf extends Zf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jf}}class Dg extends Zf{_toFieldTransform(e){return new Qv(e.path,new Eu)}isEqual(e){return e instanceof Dg}}function rA(a,e,n,o){const h=a.Cc(1,e,n);Mg("Data must be an object, but it was:",h,o);const m=[],_=Ri.empty();vo(o,((T,A)=>{const S=Lg(e,T,n);A=cr(A);const O=h.yc(S);if(A instanceof Jf)m.push(S);else{const B=Bu(A,O);B!=null&&(m.push(S),_.set(S,B))}}));const b=new Gi(m);return new tA(_,b,h.fieldTransforms)}function iA(a,e,n,o,h,m){const _=a.Cc(1,e,n),b=[k1(e,o,n)],T=[h];if(m.length%2!=0)throw new qe(be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let B=0;B<m.length;B+=2)b.push(k1(e,m[B])),T.push(m[B+1]);const A=[],S=Ri.empty();for(let B=b.length-1;B>=0;--B)if(!oA(A,b[B])){const Y=b[B];let ne=T[B];ne=cr(ne);const ie=_.yc(Y);if(ne instanceof Jf)A.push(Y);else{const ge=Bu(ne,ie);ge!=null&&(A.push(Y),S.set(Y,ge))}}const O=new Gi(A);return new tA(S,O,_.fieldTransforms)}function s4(a,e,n,o=!1){return Bu(n,a.Cc(o?4:3,e))}function Bu(a,e){if(aA(a=cr(a)))return Mg("Unsupported field value:",e,a),sA(a,e);if(a instanceof Zf)return(function(o,h){if(!nA(h.Ac))throw h.Sc(`${o._methodName}() can only be used with update() and set()`);if(!h.path)throw h.Sc(`${o._methodName}() is not currently supported inside arrays`);const m=o._toFieldTransform(h);m&&h.fieldTransforms.push(m)})(a,e),null;if(a===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(o,h){const m=[];let _=0;for(const b of o){let T=Bu(b,h.wc(_));T==null&&(T={nullValue:"NULL_VALUE"}),m.push(T),_++}return{arrayValue:{values:m}}})(a,e)}return(function(o,h){if((o=cr(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return Yv(h.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const m=An.fromDate(o);return{timestampValue:wf(h.serializer,m)}}if(o instanceof An){const m=new An(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:wf(h.serializer,m)}}if(o instanceof zs)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof cs)return{bytesValue:bx(h.serializer,o._byteString)};if(o instanceof rr){const m=h.databaseId,_=o.firestore._databaseId;if(!_.isEqual(m))throw h.Sc(`Document reference is for database ${_.projectId}/${_.database} but should be for database ${m.projectId}/${m.database}`);return{referenceValue:fg(o.firestore._databaseId||h.databaseId,o._key.path)}}if(o instanceof js)return(function(_,b){return{mapValue:{fields:{[ex]:{stringValue:tx},[Ef]:{arrayValue:{values:_.toArray().map((A=>{if(typeof A!="number")throw b.Sc("VectorValues must only contain numeric values.");return cg(b.serializer,A)}))}}}}}})(o,h);throw h.Sc(`Unsupported field value: ${kf(o)}`)})(a,e)}function sA(a,e){const n={};return W_(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vo(a,((o,h)=>{const m=Bu(h,e.mc(o));m!=null&&(n[o]=m)})),{mapValue:{fields:n}}}function aA(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof An||a instanceof zs||a instanceof cs||a instanceof rr||a instanceof Zf||a instanceof js)}function Mg(a,e,n){if(!aA(n)||!X_(n)){const o=kf(n);throw o==="an object"?e.Sc(a+" a custom object"):e.Sc(a+" "+o)}}function k1(a,e,n){if((e=cr(e))instanceof Pu)return e._internalPath;if(typeof e=="string")return Lg(a,e);throw Sf("Field path arguments must be of type string or ",a,!1,void 0,n)}const a4=new RegExp("[~\\*/\\[\\]]");function Lg(a,e,n){if(e.search(a4)>=0)throw Sf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,n);try{return new Pu(...e.split("."))._internalPath}catch{throw Sf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,n)}}function Sf(a,e,n,o,h){const m=o&&!o.isEmpty(),_=h!==void 0;let b=`Function ${e}() called with invalid data`;n&&(b+=" (via `toFirestore()`)"),b+=". ";let T="";return(m||_)&&(T+=" (found",m&&(T+=` in field ${o}`),_&&(T+=` in document ${h}`),T+=")"),new qe(be.INVALID_ARGUMENT,b+a+T)}function oA(a,e){return a.some((n=>n.isEqual(e)))}class lA{constructor(e,n,o,h,m){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=h,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new rr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new o4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Pg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class o4 extends lA{data(){return super.data()}}function Pg(a,e){return typeof e=="string"?Lg(a,e):e instanceof Pu?e._internalPath:e._delegate._internalPath}function cA(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new qe(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kg{}class l4 extends kg{}function uo(a,e,...n){let o=[];e instanceof kg&&o.push(e),o=o.concat(n),(function(m){const _=m.filter((T=>T instanceof Bg)).length,b=m.filter((T=>T instanceof $f)).length;if(_>1||_>0&&b>0)throw new qe(be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const h of o)a=h._apply(a);return a}class $f extends l4{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new $f(e,n,o)}_apply(e){const n=this._parse(e);return uA(e._query,n),new ul(e.firestore,e.converter,b1(e._query,n))}_parse(e){const n=ku(e.firestore);return(function(m,_,b,T,A,S,O){let B;if(A.isKeyField()){if(S==="array-contains"||S==="array-contains-any")throw new qe(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on documentId().`);if(S==="in"||S==="not-in"){IE(O,S);const ne=[];for(const ie of O)ne.push(SE(T,m,ie));B={arrayValue:{values:ne}}}else B=SE(T,m,O)}else S!=="in"&&S!=="not-in"&&S!=="array-contains-any"||IE(O,S),B=s4(b,_,O,S==="in"||S==="not-in");return yr.create(A,S,B)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function us(a,e,n){const o=e,h=Pg("where",a);return $f._create(h,o,n)}class Bg extends kg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Bg(e,n)}_parse(e){const n=this._queryConstraints.map((o=>o._parse(e))).filter((o=>o.getFilters().length>0));return n.length===1?n[0]:Ts.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(h,m){let _=h;const b=m.getFlattenedFilters();for(const T of b)uA(_,T),_=b1(_,T)})(e._query,n),new ul(e.firestore,e.converter,b1(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function SE(a,e,n){if(typeof(n=cr(n))=="string"){if(n==="")throw new qe(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cx(e)&&n.indexOf("/")!==-1)throw new qe(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(Nn.fromString(n));if(!ot.isDocumentKey(o))throw new qe(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Hy(a,new ot(o))}if(n instanceof rr)return Hy(a,n._key);throw new qe(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kf(n)}.`)}function IE(a,e){if(!Array.isArray(a)||a.length===0)throw new qe(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uA(a,e){const n=(function(h,m){for(const _ of h)for(const b of _.getFlattenedFilters())if(m.indexOf(b.op)>=0)return b.op;return null})(a.filters,(function(h){switch(h){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new qe(be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new qe(be.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class c4{convertValue(e,n="none"){switch(Ao(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw gt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return vo(e,((h,m)=>{o[h]=this.convertValue(m,n)})),o}convertVectorValue(e){const n=e.fields?.[Ef].arrayValue?.values?.map((o=>lr(o.doubleValue)));return new js(n)}convertGeoPoint(e){return new zs(lr(e.latitude),lr(e.longitude))}convertArray(e,n){return(e.values||[]).map((o=>this.convertValue(o,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const o=Uf(e);return o==null?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(mu(e));default:return null}}convertTimestamp(e){const n=_o(e);return new An(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=Nn.fromString(e);gn(Ox(o),9688,{name:e});const h=new pu(o.get(1),o.get(3)),m=new ot(o.popFirst(5));return h.isEqual(n)||ba(`Document ${m} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),m}}function Vg(a,e,n){let o;return o=a?n&&(n.merge||n.mergeFields)?a.toFirestore(e,n):a.toFirestore(e):e,o}class nu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jo extends lA{constructor(e,n,o,h,m,_){super(e,n,o,h,_),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new lf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(Pg("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(be.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Jo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Jo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Jo._jsonSchema={type:Er("string",Jo._jsonSchemaVersion),bundleSource:Er("string","DocumentSnapshot"),bundleName:Er("string"),bundle:Er("string")};class lf extends Jo{data(e={}){return super.data(e)}}class $o{constructor(e,n,o,h){this._firestore=e,this._userDataWriter=n,this._snapshot=h,this.metadata=new nu(h.hasPendingWrites,h.fromCache),this.query=o}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((o=>{e.call(n,new lf(this._firestore,this._userDataWriter,o.key,o,new nu(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new qe(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(h,m){if(h._snapshot.oldDocs.isEmpty()){let _=0;return h._snapshot.docChanges.map((b=>{const T=new lf(h._firestore,h._userDataWriter,b.doc.key,b.doc,new nu(h._snapshot.mutatedKeys.has(b.doc.key),h._snapshot.fromCache),h.query.converter);return b.doc,{type:"added",doc:T,oldIndex:-1,newIndex:_++}}))}{let _=h._snapshot.oldDocs;return h._snapshot.docChanges.filter((b=>m||b.type!==3)).map((b=>{const T=new lf(h._firestore,h._userDataWriter,b.doc.key,b.doc,new nu(h._snapshot.mutatedKeys.has(b.doc.key),h._snapshot.fromCache),h.query.converter);let A=-1,S=-1;return b.type!==0&&(A=_.indexOf(b.doc.key),_=_.delete(b.doc.key)),b.type!==1&&(_=_.add(b.doc),S=_.indexOf(b.doc.key)),{type:u4(b.type),doc:T,oldIndex:A,newIndex:S}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(be.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$o._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=rg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],o=[],h=[];return this.docs.forEach((m=>{m._document!==null&&(n.push(m._document),o.push(this._userDataWriter.convertObjectMap(m._document.data.value.mapValue.fields,"previous")),h.push(m.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function u4(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt(61501,{type:a})}}function Au(a){a=gi(a,rr);const e=gi(a.firestore,Gs);return ZI(Lu(e),a._key).then((n=>hA(e,a,n)))}$o._jsonSchemaVersion="firestore/querySnapshot/1.0",$o._jsonSchema={type:Er("string",$o._jsonSchemaVersion),bundleSource:Er("string","QuerySnapshot"),bundleName:Er("string"),bundle:Er("string")};class Ug extends c4{constructor(e){super(),this.firestore=e}convertBytes(e){return new cs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rr(this.firestore,null,n)}}function hs(a){a=gi(a,ul);const e=gi(a.firestore,Gs),n=Lu(e),o=new Ug(e);return cA(a._query),JI(n,a._query).then((h=>new $o(e,o,a,h)))}function Jl(a,e,n){a=gi(a,rr);const o=gi(a.firestore,Gs),h=Vg(a.converter,e,n);return Vu(o,[Og(ku(o),"setDoc",a._key,h,a.converter!==null,n).toMutation(a._key,mi.none())])}function $l(a,e,n,...o){a=gi(a,rr);const h=gi(a.firestore,Gs),m=ku(h);let _;return _=typeof(e=cr(e))=="string"||e instanceof Pu?iA(m,"updateDoc",a._key,e,n,o):rA(m,"updateDoc",a._key,e),Vu(h,[_.toMutation(a._key,mi.exists(!0))])}function RE(a){return Vu(gi(a.firestore,Gs),[new qf(a._key,mi.none())])}function B1(a,e){const n=gi(a.firestore,Gs),o=Rr(a),h=Vg(a.converter,e);return Vu(n,[Og(ku(a.firestore),"addDoc",o._key,h,a.converter!==null,{}).toMutation(o._key,mi.exists(!1))]).then((()=>o))}function h4(a,...e){a=cr(a);let n={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||vE(e[o])||(n=e[o++]);const h={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(vE(e[o])){const T=e[o];e[o]=T.next?.bind(T),e[o+1]=T.error?.bind(T),e[o+2]=T.complete?.bind(T)}let m,_,b;if(a instanceof rr)_=gi(a.firestore,Gs),b=Ff(a._key.path),m={next:T=>{e[o]&&e[o](hA(_,a,T))},error:e[o+1],complete:e[o+2]};else{const T=gi(a,ul);_=gi(T.firestore,Gs),b=T._query;const A=new Ug(_);m={next:S=>{e[o]&&e[o](new $o(_,A,T,S))},error:e[o+1],complete:e[o+2]},cA(a._query)}return(function(A,S,O,B){const Y=new Rg(B),ne=new vg(S,Y,O);return A.asyncQueue.enqueueAndForget((async()=>Tg(await vf(A),ne))),()=>{Y.Nu(),A.asyncQueue.enqueueAndForget((async()=>Cg(await vf(A),ne)))}})(Lu(_),b,h,m)}function Vu(a,e){return(function(o,h){const m=new wa;return o.asyncQueue.enqueueAndForget((async()=>UI(await QI(o),h,m))),m.promise})(Lu(a),e)}function hA(a,e,n){const o=n.docs.get(e._key),h=new Ug(a);return new Jo(a,h,e._key,o,new nu(n.hasPendingWrites,n.fromCache),e.converter)}class f4{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ku(e)}set(e,n,o){this._verifyNotCommitted();const h=s1(e,this._firestore),m=Vg(h.converter,n,o),_=Og(this._dataReader,"WriteBatch.set",h._key,m,h.converter!==null,o);return this._mutations.push(_.toMutation(h._key,mi.none())),this}update(e,n,o,...h){this._verifyNotCommitted();const m=s1(e,this._firestore);let _;return _=typeof(n=cr(n))=="string"||n instanceof Pu?iA(this._dataReader,"WriteBatch.update",m._key,n,o,h):rA(this._dataReader,"WriteBatch.update",m._key,n),this._mutations.push(_.toMutation(m._key,mi.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=s1(e,this._firestore);return this._mutations=this._mutations.concat(new qf(n._key,mi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new qe(be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function s1(a,e){if((a=cr(a)).firestore!==e)throw new qe(be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}function d4(){return new Dg("serverTimestamp")}function g4(a){return Lu(a=gi(a,Gs)),new f4(a,(e=>Vu(a,e)))}(function(e,n=!0){(function(h){hc=h})(cc),ec(new tl("firestore",((o,{instanceIdentifier:h,options:m})=>{const _=o.getProvider("app").getImmediate(),b=new Gs(new sv(o.getProvider("auth-internal")),new lv(_,o.getProvider("app-check-internal")),(function(A,S){if(!Object.prototype.hasOwnProperty.apply(A.options,["projectId"]))throw new qe(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pu(A.options.projectId,S)})(_,h),_);return m={useFetchStreams:n,...m},b._setSettings(m),b}),"PUBLIC").setMultipleInstances(!0)),go(Ny,Oy,e),go(Ny,Oy,"esm2020")})();const fA={apiKey:"AIzaSyARwb6K0M4l-hWKi8FrOLEVqRqeHRf8JR4",authDomain:"oppmoteboka.firebaseapp.com",projectId:"oppmoteboka",storageBucket:"oppmoteboka.firebasestorage.app",messagingSenderId:"732911922070",appId:"1:732911922070:web:b16d9de65062395c018bb7"},dA=$E().length?Y1():X1(fA),Qh=k_(dA),rn=e4(dA),m4=$E().find(a=>a.name==="secondary")??X1(fA,"secondary"),a1=k_(m4);function gA(){const[a,e]=ke.useState(null),[n,o]=ke.useState(!0);return ke.useEffect(()=>{const b=GC(Qh,async T=>{if(!T){e(null),o(!1);return}try{const A=Rr(rn,"users",T.uid);let S=await Au(A);if(!S.exists()){const Y={uid:T.uid,email:T.email??"",displayName:T.displayName??T.email??"",role:"student",term:null,termLabel:null,semesterStatus:"aktiv"};await Jl(A,{...Y,createdAt:d4()}),e(Y),o(!1);return}const O=S.data(),B={uid:T.uid,email:O?.email??T.email??"",role:O?.role??"student",term:O?.term??null,termLabel:O?.termLabel??null,semesterStatus:O?.semesterStatus??null,displayName:O?.name??O?.displayName??T.displayName??T.email??""};e(B)}catch(A){console.error("Feil ved henting/oppretting av bruker:",A),e(null)}finally{o(!1)}});return()=>b()},[]),{user:a,loading:n,login:async(b,T)=>{await zC(Qh,b,T)},register:async(b,T)=>{await $h(Qh,b,T)},logout:async()=>{await qC(Qh)}}}var Ze;(function(a){a[a.QR_CODE=0]="QR_CODE",a[a.AZTEC=1]="AZTEC",a[a.CODABAR=2]="CODABAR",a[a.CODE_39=3]="CODE_39",a[a.CODE_93=4]="CODE_93",a[a.CODE_128=5]="CODE_128",a[a.DATA_MATRIX=6]="DATA_MATRIX",a[a.MAXICODE=7]="MAXICODE",a[a.ITF=8]="ITF",a[a.EAN_13=9]="EAN_13",a[a.EAN_8=10]="EAN_8",a[a.PDF_417=11]="PDF_417",a[a.RSS_14=12]="RSS_14",a[a.RSS_EXPANDED=13]="RSS_EXPANDED",a[a.UPC_A=14]="UPC_A",a[a.UPC_E=15]="UPC_E",a[a.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ze||(Ze={}));var NE=new Map([[Ze.QR_CODE,"QR_CODE"],[Ze.AZTEC,"AZTEC"],[Ze.CODABAR,"CODABAR"],[Ze.CODE_39,"CODE_39"],[Ze.CODE_93,"CODE_93"],[Ze.CODE_128,"CODE_128"],[Ze.DATA_MATRIX,"DATA_MATRIX"],[Ze.MAXICODE,"MAXICODE"],[Ze.ITF,"ITF"],[Ze.EAN_13,"EAN_13"],[Ze.EAN_8,"EAN_8"],[Ze.PDF_417,"PDF_417"],[Ze.RSS_14,"RSS_14"],[Ze.RSS_EXPANDED,"RSS_EXPANDED"],[Ze.UPC_A,"UPC_A"],[Ze.UPC_E,"UPC_E"],[Ze.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),OE;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.URL=1]="URL"})(OE||(OE={}));function p4(a){return Object.values(Ze).includes(a)}var If;(function(a){a[a.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",a[a.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(If||(If={}));var y4=(function(){function a(){}return a.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",a.SCAN_DEFAULT_FPS=2,a.DEFAULT_DISABLE_FLIP=!1,a.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,a.DEFAULT_SUPPORTED_SCAN_TYPE=[If.SCAN_TYPE_CAMERA,If.SCAN_TYPE_FILE],a})(),mA=(function(){function a(e,n){this.format=e,this.formatName=n}return a.prototype.toString=function(){return this.formatName},a.create=function(e){if(!NE.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new a(e,NE.get(e))},a})(),DE=(function(){function a(){}return a.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},a.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},a})(),V1;(function(a){a[a.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",a[a.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",a[a.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(V1||(V1={}));var E4=(function(){function a(){}return a.createFrom=function(e){return{errorMessage:e,type:V1.UNKWOWN_ERROR}},a})(),_4=(function(){function a(e){this.verbose=e}return a.prototype.log=function(e){this.verbose&&console.log(e)},a.prototype.warn=function(e){this.verbose&&console.warn(e)},a.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},a.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},a})();function Ea(a){return typeof a>"u"||a===null}var Xl=(function(){function a(){}return a.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},a.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},a.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},a.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},a.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},a.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},a.scannerPaused=function(){return"Scanner paused"},a})(),pA=(function(){function a(){}return a.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var o=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(o,"."),!0),!1}for(var h=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],m=new Set(h),_=Object.keys(e),b=0,T=_;b<T.length;b++){var A=T[b];if(m.has(A))return n.logError("".concat(A," is not supported videoConstaints."),!0),!1}return!0},a})(),ru={exports:{}},x4=ru.exports,ME;function A4(){return ME||(ME=1,(function(a,e){(function(n,o){o(e)})(x4,(function(n){function o(D){return D==null}var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,r){D.__proto__=r}||function(D,r){for(var s in r)r.hasOwnProperty(s)&&(D[s]=r[s])};function m(D,r){h(D,r);function s(){this.constructor=D}D.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}function _(D,r){var s=Object.setPrototypeOf;s?s(D,r):D.__proto__=r}function b(D,r){r===void 0&&(r=D.constructor);var s=Error.captureStackTrace;s&&s(D,r)}var T=(function(D){m(r,D);function r(s){var l=this.constructor,u=D.call(this,s)||this;return Object.defineProperty(u,"name",{value:l.name,enumerable:!1}),_(u,l.prototype),b(u),u}return r})(Error);class A extends T{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}A.kind="Exception";class S extends A{}S.kind="ArgumentException";class O extends A{}O.kind="IllegalArgumentException";class B{constructor(r){if(this.binarizer=r,r===null)throw new O("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,s){return this.binarizer.getBlackRow(r,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,s,l,u){const f=this.binarizer.getLuminanceSource().crop(r,s,l,u);return new B(this.binarizer.createBinarizer(f))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new B(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new B(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class Y extends A{static getChecksumInstance(){return new Y}}Y.kind="ChecksumException";class ne{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class ie{static arraycopy(r,s,l,u,f){for(;f--;)l[u++]=r[s++]}static currentTimeMillis(){return Date.now()}}class ge extends A{}ge.kind="IndexOutOfBoundsException";class Ue extends ge{constructor(r=void 0,s=void 0){super(s),this.index=r,this.message=s}}Ue.kind="ArrayIndexOutOfBoundsException";class Oe{static fill(r,s){for(let l=0,u=r.length;l<u;l++)r[l]=s}static fillWithin(r,s,l,u){Oe.rangeCheck(r.length,s,l);for(let f=s;f<l;f++)r[f]=u}static rangeCheck(r,s,l){if(s>l)throw new O("fromIndex("+s+") > toIndex("+l+")");if(s<0)throw new Ue(s);if(l>r)throw new Ue(l)}static asList(...r){return r}static create(r,s,l){return Array.from({length:r}).map(f=>Array.from({length:s}).fill(l))}static createInt32Array(r,s,l){return Array.from({length:r}).map(f=>Int32Array.from({length:s}).fill(l))}static equals(r,s){if(!r||!s||!r.length||!s.length||r.length!==s.length)return!1;for(let l=0,u=r.length;l<u;l++)if(r[l]!==s[l])return!1;return!0}static hashCode(r){if(r===null)return 0;let s=1;for(const l of r)s=31*s+l;return s}static fillUint8Array(r,s){for(let l=0;l!==r.length;l++)r[l]=s}static copyOf(r,s){return r.slice(0,s)}static copyOfUint8Array(r,s){if(r.length<=s){const l=new Uint8Array(s);return l.set(r),l}return r.slice(0,s)}static copyOfRange(r,s,l){const u=l-s,f=new Int32Array(u);return ie.arraycopy(r,s,f,0,u),f}static binarySearch(r,s,l){l===void 0&&(l=Oe.numberComparator);let u=0,f=r.length-1;for(;u<=f;){const g=f+u>>1,y=l(s,r[g]);if(y>0)u=g+1;else if(y<0)f=g-1;else return g}return-u-1}static numberComparator(r,s){return r-s}}class pe{static numberOfTrailingZeros(r){let s;if(r===0)return 32;let l=31;return s=r<<16,s!==0&&(l-=16,r=s),s=r<<8,s!==0&&(l-=8,r=s),s=r<<4,s!==0&&(l-=4,r=s),s=r<<2,s!==0&&(l-=2,r=s),l-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let s=1;return r>>>16||(s+=16,r<<=16),r>>>24||(s+=8,r<<=8),r>>>28||(s+=4,r<<=4),r>>>30||(s+=2,r<<=2),s-=r>>>31,s}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,s){return Math.trunc(r/s)}static parseInt(r,s=void 0){return parseInt(r,s)}}pe.MIN_VALUE_32_BITS=-2147483648,pe.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Le{constructor(r,s){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,s==null?this.bits=Le.makeArray(r):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const s=Le.makeArray(r);ie.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const s=this.size;if(r>=s)return s;const l=this.bits;let u=Math.floor(r/32),f=l[u];f&=~((1<<(r&31))-1);const g=l.length;for(;f===0;){if(++u===g)return s;f=l[u]}const y=u*32+pe.numberOfTrailingZeros(f);return y>s?s:y}getNextUnset(r){const s=this.size;if(r>=s)return s;const l=this.bits;let u=Math.floor(r/32),f=~l[u];f&=~((1<<(r&31))-1);const g=l.length;for(;f===0;){if(++u===g)return s;f=~l[u]}const y=u*32+pe.numberOfTrailingZeros(f);return y>s?s:y}setBulk(r,s){this.bits[Math.floor(r/32)]=s}setRange(r,s){if(s<r||r<0||s>this.size)throw new O;if(s===r)return;s--;const l=Math.floor(r/32),u=Math.floor(s/32),f=this.bits;for(let g=l;g<=u;g++){const y=g>l?0:r&31,C=(2<<(g<u?31:s&31))-(1<<y);f[g]|=C}}clear(){const r=this.bits.length,s=this.bits;for(let l=0;l<r;l++)s[l]=0}isRange(r,s,l){if(s<r||r<0||s>this.size)throw new O;if(s===r)return!0;s--;const u=Math.floor(r/32),f=Math.floor(s/32),g=this.bits;for(let y=u;y<=f;y++){const x=y>u?0:r&31,I=(2<<(y<f?31:s&31))-(1<<x)&4294967295;if((g[y]&I)!==(l?I:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,s){if(s<0||s>32)throw new O("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let l=s;l>0;l--)this.appendBit((r>>l-1&1)===1)}appendBitArray(r){const s=r.size;this.ensureCapacity(this.size+s);for(let l=0;l<s;l++)this.appendBit(r.get(l))}xor(r){if(this.size!==r.size)throw new O("Sizes don't match");const s=this.bits;for(let l=0,u=s.length;l<u;l++)s[l]^=r.bits[l]}toBytes(r,s,l,u){for(let f=0;f<u;f++){let g=0;for(let y=0;y<8;y++)this.get(r)&&(g|=1<<7-y),r++;s[l+f]=g}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),l=s+1,u=this.bits;for(let f=0;f<l;f++){let g=u[f];g=g>>1&1431655765|(g&1431655765)<<1,g=g>>2&858993459|(g&858993459)<<2,g=g>>4&252645135|(g&252645135)<<4,g=g>>8&16711935|(g&16711935)<<8,g=g>>16&65535|(g&65535)<<16,r[s-f]=g}if(this.size!==l*32){const f=l*32-this.size;let g=r[0]>>>f;for(let y=1;y<l;y++){const x=r[y];g|=x<<32-f,r[y-1]=g,g=x>>>f}r[l-1]=g}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof Le))return!1;const s=r;return this.size===s.size&&Oe.equals(this.bits,s.bits)}hashCode(){return 31*this.size+Oe.hashCode(this.bits)}toString(){let r="";for(let s=0,l=this.size;s<l;s++)(s&7)===0&&(r+=" "),r+=this.get(s)?"X":".";return r}clone(){return new Le(this.size,this.bits.slice())}}var nt;(function(D){D[D.OTHER=0]="OTHER",D[D.PURE_BARCODE=1]="PURE_BARCODE",D[D.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",D[D.TRY_HARDER=3]="TRY_HARDER",D[D.CHARACTER_SET=4]="CHARACTER_SET",D[D.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",D[D.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",D[D.ASSUME_GS1=7]="ASSUME_GS1",D[D.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",D[D.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",D[D.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(nt||(nt={}));var ze=nt;class F extends A{static getFormatInstance(){return new F}}F.kind="FormatException";var j;(function(D){D[D.Cp437=0]="Cp437",D[D.ISO8859_1=1]="ISO8859_1",D[D.ISO8859_2=2]="ISO8859_2",D[D.ISO8859_3=3]="ISO8859_3",D[D.ISO8859_4=4]="ISO8859_4",D[D.ISO8859_5=5]="ISO8859_5",D[D.ISO8859_6=6]="ISO8859_6",D[D.ISO8859_7=7]="ISO8859_7",D[D.ISO8859_8=8]="ISO8859_8",D[D.ISO8859_9=9]="ISO8859_9",D[D.ISO8859_10=10]="ISO8859_10",D[D.ISO8859_11=11]="ISO8859_11",D[D.ISO8859_13=12]="ISO8859_13",D[D.ISO8859_14=13]="ISO8859_14",D[D.ISO8859_15=14]="ISO8859_15",D[D.ISO8859_16=15]="ISO8859_16",D[D.SJIS=16]="SJIS",D[D.Cp1250=17]="Cp1250",D[D.Cp1251=18]="Cp1251",D[D.Cp1252=19]="Cp1252",D[D.Cp1256=20]="Cp1256",D[D.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",D[D.UTF8=22]="UTF8",D[D.ASCII=23]="ASCII",D[D.Big5=24]="Big5",D[D.GB18030=25]="GB18030",D[D.EUC_KR=26]="EUC_KR"})(j||(j={}));class P{constructor(r,s,l,...u){this.valueIdentifier=r,this.name=l,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=u,P.VALUE_IDENTIFIER_TO_ECI.set(r,this),P.NAME_TO_ECI.set(l,this);const f=this.values;for(let g=0,y=f.length;g!==y;g++){const x=f[g];P.VALUES_TO_ECI.set(x,this)}for(const g of u)P.NAME_TO_ECI.set(g,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new F("incorect value");const s=P.VALUES_TO_ECI.get(r);if(s===void 0)throw new F("incorect value");return s}static getCharacterSetECIByName(r){const s=P.NAME_TO_ECI.get(r);if(s===void 0)throw new F("incorect value");return s}equals(r){if(!(r instanceof P))return!1;const s=r;return this.getName()===s.getName()}}P.VALUE_IDENTIFIER_TO_ECI=new Map,P.VALUES_TO_ECI=new Map,P.NAME_TO_ECI=new Map,P.Cp437=new P(j.Cp437,Int32Array.from([0,2]),"Cp437"),P.ISO8859_1=new P(j.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),P.ISO8859_2=new P(j.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),P.ISO8859_3=new P(j.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),P.ISO8859_4=new P(j.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),P.ISO8859_5=new P(j.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),P.ISO8859_6=new P(j.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),P.ISO8859_7=new P(j.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),P.ISO8859_8=new P(j.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),P.ISO8859_9=new P(j.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),P.ISO8859_10=new P(j.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),P.ISO8859_11=new P(j.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),P.ISO8859_13=new P(j.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),P.ISO8859_14=new P(j.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),P.ISO8859_15=new P(j.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),P.ISO8859_16=new P(j.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),P.SJIS=new P(j.SJIS,20,"SJIS","Shift_JIS"),P.Cp1250=new P(j.Cp1250,21,"Cp1250","windows-1250"),P.Cp1251=new P(j.Cp1251,22,"Cp1251","windows-1251"),P.Cp1252=new P(j.Cp1252,23,"Cp1252","windows-1252"),P.Cp1256=new P(j.Cp1256,24,"Cp1256","windows-1256"),P.UnicodeBigUnmarked=new P(j.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),P.UTF8=new P(j.UTF8,26,"UTF8","UTF-8"),P.ASCII=new P(j.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),P.Big5=new P(j.Big5,28,"Big5"),P.GB18030=new P(j.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),P.EUC_KR=new P(j.EUC_KR,30,"EUC_KR","EUC-KR");class Q extends A{}Q.kind="UnsupportedOperationException";class q{static decode(r,s){const l=this.encodingName(s);return this.customDecoder?this.customDecoder(r,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(r,l):new TextDecoder(l).decode(r)}static shouldDecodeOnFallback(r){return!q.isBrowser()&&r==="ISO-8859-1"}static encode(r,s){const l=this.encodingName(s);return this.customEncoder?this.customEncoder(r,l):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof P?r:P.getCharacterSetECIByName(r)}static decodeFallback(r,s){const l=this.encodingCharacterSet(s);if(q.isDecodeFallbackSupported(l)){let u="";for(let f=0,g=r.length;f<g;f++){let y=r[f].toString(16);y.length<2&&(y="0"+y),u+="%"+y}return decodeURIComponent(u)}if(l.equals(P.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new Q(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(P.UTF8)||r.equals(P.ISO8859_1)||r.equals(P.ASCII)}static encodeFallback(r){const l=btoa(unescape(encodeURIComponent(r))).split(""),u=[];for(let f=0;f<l.length;f++)u.push(l[f].charCodeAt(0));return new Uint8Array(u)}}class W{static castAsNonUtf8Char(r,s=null){const l=s?s.getName():this.ISO88591;return q.decode(new Uint8Array([r]),l)}static guessEncoding(r,s){if(s!=null&&s.get(ze.CHARACTER_SET)!==void 0)return s.get(ze.CHARACTER_SET).toString();const l=r.length;let u=!0,f=!0,g=!0,y=0,x=0,C=0,I=0,M=0,L=0,H=0,J=0,ee=0,ae=0,_e=0;const Pe=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let Me=0;Me<l&&(u||f||g);Me++){const Ne=r[Me]&255;g&&(y>0?(Ne&128)===0?g=!1:y--:(Ne&128)!==0&&((Ne&64)===0?g=!1:(y++,(Ne&32)===0?x++:(y++,(Ne&16)===0?C++:(y++,(Ne&8)===0?I++:g=!1))))),u&&(Ne>127&&Ne<160?u=!1:Ne>159&&(Ne<192||Ne===215||Ne===247)&&_e++),f&&(M>0?Ne<64||Ne===127||Ne>252?f=!1:M--:Ne===128||Ne===160||Ne>239?f=!1:Ne>160&&Ne<224?(L++,J=0,H++,H>ee&&(ee=H)):Ne>127?(M++,H=0,J++,J>ae&&(ae=J)):(H=0,J=0))}return g&&y>0&&(g=!1),f&&M>0&&(f=!1),g&&(Pe||x+C+I>0)?W.UTF8:f&&(W.ASSUME_SHIFT_JIS||ee>=3||ae>=3)?W.SHIFT_JIS:u&&f?ee===2&&L===2||_e*10>=l?W.SHIFT_JIS:W.ISO88591:u?W.ISO88591:f?W.SHIFT_JIS:g?W.UTF8:W.PLATFORM_DEFAULT_ENCODING}static format(r,...s){let l=-1;function u(g,y,x,C,I,M){if(g==="%%")return"%";if(s[++l]===void 0)return;g=C?parseInt(C.substr(1)):void 0;let L=I?parseInt(I.substr(1)):void 0,H;switch(M){case"s":H=s[l];break;case"c":H=s[l][0];break;case"f":H=parseFloat(s[l]).toFixed(g);break;case"p":H=parseFloat(s[l]).toPrecision(g);break;case"e":H=parseFloat(s[l]).toExponential(g);break;case"x":H=parseInt(s[l]).toString(L||16);break;case"d":H=parseFloat(parseInt(s[l],L||10).toPrecision(g)).toFixed(0);break}H=typeof H=="object"?JSON.stringify(H):(+H).toString(L);let J=parseInt(x),ee=x&&x[0]+""=="0"?"0":" ";for(;H.length<J;)H=y!==void 0?H+ee:ee+H;return H}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(f,u)}static getBytes(r,s){return q.encode(r,s)}static getCharCode(r,s=0){return r.charCodeAt(s)}static getCharAt(r){return String.fromCharCode(r)}}W.SHIFT_JIS=P.SJIS.getName(),W.GB2312="GB2312",W.ISO88591=P.ISO8859_1.getName(),W.EUC_JP="EUC_JP",W.UTF8=P.UTF8.getName(),W.PLATFORM_DEFAULT_ENCODING=W.UTF8,W.ASSUME_SHIFT_JIS=!1;class G{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=W.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,s,l){for(let u=s;s<s+l;u++)this.append(r[u]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+1)}substring(r,s){return this.value.substring(r,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+s.length)}}class Qe{constructor(r,s,l,u){if(this.width=r,this.height=s,this.rowSize=l,this.bits=u,s==null&&(s=r),this.height=s,r<1||s<1)throw new O("Both dimensions must be greater than 0");l==null&&(l=Math.floor((r+31)/32)),this.rowSize=l,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const s=r.length,l=r[0].length,u=new Qe(l,s);for(let f=0;f<s;f++){const g=r[f];for(let y=0;y<l;y++)g[y]&&u.set(y,f)}return u}static parseFromString(r,s,l){if(r===null)throw new O("stringRepresentation cannot be null");const u=new Array(r.length);let f=0,g=0,y=-1,x=0,C=0;for(;C<r.length;)if(r.charAt(C)===`
`||r.charAt(C)==="\r"){if(f>g){if(y===-1)y=f-g;else if(f-g!==y)throw new O("row lengths do not match");g=f,x++}C++}else if(r.substring(C,C+s.length)===s)C+=s.length,u[f]=!0,f++;else if(r.substring(C,C+l.length)===l)C+=l.length,u[f]=!1,f++;else throw new O("illegal character encountered: "+r.substring(C));if(f>g){if(y===-1)y=f-g;else if(f-g!==y)throw new O("row lengths do not match");x++}const I=new Qe(y,x);for(let M=0;M<f;M++)u[M]&&I.set(Math.floor(M%y),Math.floor(M/y));return I}get(r,s){const l=s*this.rowSize+Math.floor(r/32);return(this.bits[l]>>>(r&31)&1)!==0}set(r,s){const l=s*this.rowSize+Math.floor(r/32);this.bits[l]|=1<<(r&31)&4294967295}unset(r,s){const l=s*this.rowSize+Math.floor(r/32);this.bits[l]&=~(1<<(r&31)&4294967295)}flip(r,s){const l=s*this.rowSize+Math.floor(r/32);this.bits[l]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new O("input matrix dimensions do not match");const s=new Le(Math.floor(this.width/32)+1),l=this.rowSize,u=this.bits;for(let f=0,g=this.height;f<g;f++){const y=f*l,x=r.getRow(f,s).getBitArray();for(let C=0;C<l;C++)u[y+C]^=x[C]}}clear(){const r=this.bits,s=r.length;for(let l=0;l<s;l++)r[l]=0}setRegion(r,s,l,u){if(s<0||r<0)throw new O("Left and top must be nonnegative");if(u<1||l<1)throw new O("Height and width must be at least 1");const f=r+l,g=s+u;if(g>this.height||f>this.width)throw new O("The region must fit inside the matrix");const y=this.rowSize,x=this.bits;for(let C=s;C<g;C++){const I=C*y;for(let M=r;M<f;M++)x[I+Math.floor(M/32)]|=1<<(M&31)&4294967295}}getRow(r,s){s==null||s.getSize()<this.width?s=new Le(this.width):s.clear();const l=this.rowSize,u=this.bits,f=r*l;for(let g=0;g<l;g++)s.setBulk(g*32,u[f+g]);return s}setRow(r,s){ie.arraycopy(s.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),s=this.getHeight();let l=new Le(r),u=new Le(r);for(let f=0,g=Math.floor((s+1)/2);f<g;f++)l=this.getRow(f,l),u=this.getRow(s-1-f,u),l.reverse(),u.reverse(),this.setRow(f,u),this.setRow(s-1-f,l)}getEnclosingRectangle(){const r=this.width,s=this.height,l=this.rowSize,u=this.bits;let f=r,g=s,y=-1,x=-1;for(let C=0;C<s;C++)for(let I=0;I<l;I++){const M=u[C*l+I];if(M!==0){if(C<g&&(g=C),C>x&&(x=C),I*32<f){let L=0;for(;(M<<31-L&4294967295)===0;)L++;I*32+L<f&&(f=I*32+L)}if(I*32+31>y){let L=31;for(;!(M>>>L);)L--;I*32+L>y&&(y=I*32+L)}}}return y<f||x<g?null:Int32Array.from([f,g,y-f+1,x-g+1])}getTopLeftOnBit(){const r=this.rowSize,s=this.bits;let l=0;for(;l<s.length&&s[l]===0;)l++;if(l===s.length)return null;const u=l/r;let f=l%r*32;const g=s[l];let y=0;for(;(g<<31-y&4294967295)===0;)y++;return f+=y,Int32Array.from([f,u])}getBottomRightOnBit(){const r=this.rowSize,s=this.bits;let l=s.length-1;for(;l>=0&&s[l]===0;)l--;if(l<0)return null;const u=Math.floor(l/r);let f=Math.floor(l%r)*32;const g=s[l];let y=31;for(;!(g>>>y);)y--;return f+=y,Int32Array.from([f,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof Qe))return!1;const s=r;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&Oe.equals(this.bits,s.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+Oe.hashCode(this.bits),r}toString(r="X ",s="  ",l=`
`){return this.buildToString(r,s,l)}buildToString(r,s,l){let u=new G;for(let f=0,g=this.height;f<g;f++){for(let y=0,x=this.width;y<x;y++)u.append(this.get(y,f)?r:s);u.append(l)}return u.toString()}clone(){return new Qe(this.width,this.height,this.rowSize,this.bits.slice())}}class oe extends A{static getNotFoundInstance(){return new oe}}oe.kind="NotFoundException";class $ extends ne{constructor(r){super(r),this.luminances=$.EMPTY,this.buckets=new Int32Array($.LUMINANCE_BUCKETS)}getBlackRow(r,s){const l=this.getLuminanceSource(),u=l.getWidth();s==null||s.getSize()<u?s=new Le(u):s.clear(),this.initArrays(u);const f=l.getRow(r,this.luminances),g=this.buckets;for(let x=0;x<u;x++)g[(f[x]&255)>>$.LUMINANCE_SHIFT]++;const y=$.estimateBlackPoint(g);if(u<3)for(let x=0;x<u;x++)(f[x]&255)<y&&s.set(x);else{let x=f[0]&255,C=f[1]&255;for(let I=1;I<u-1;I++){const M=f[I+1]&255;(C*4-x-M)/2<y&&s.set(I),x=C,C=M}}return s}getBlackMatrix(){const r=this.getLuminanceSource(),s=r.getWidth(),l=r.getHeight(),u=new Qe(s,l);this.initArrays(s);const f=this.buckets;for(let x=1;x<5;x++){const C=Math.floor(l*x/5),I=r.getRow(C,this.luminances),M=Math.floor(s*4/5);for(let L=Math.floor(s/5);L<M;L++){const H=I[L]&255;f[H>>$.LUMINANCE_SHIFT]++}}const g=$.estimateBlackPoint(f),y=r.getMatrix();for(let x=0;x<l;x++){const C=x*s;for(let I=0;I<s;I++)(y[C+I]&255)<g&&u.set(I,x)}return u}createBinarizer(r){return new $(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const s=this.buckets;for(let l=0;l<$.LUMINANCE_BUCKETS;l++)s[l]=0}static estimateBlackPoint(r){const s=r.length;let l=0,u=0,f=0;for(let I=0;I<s;I++)r[I]>f&&(u=I,f=r[I]),r[I]>l&&(l=r[I]);let g=0,y=0;for(let I=0;I<s;I++){const M=I-u,L=r[I]*M*M;L>y&&(g=I,y=L)}if(u>g){const I=u;u=g,g=I}if(g-u<=s/16)throw new oe;let x=g-1,C=-1;for(let I=g-1;I>u;I--){const M=I-u,L=M*M*(g-I)*(l-r[I]);L>C&&(x=I,C=L)}return x<<$.LUMINANCE_SHIFT}}$.LUMINANCE_BITS=5,$.LUMINANCE_SHIFT=8-$.LUMINANCE_BITS,$.LUMINANCE_BUCKETS=1<<$.LUMINANCE_BITS,$.EMPTY=Uint8ClampedArray.from([0]);class le extends ${constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),s=r.getWidth(),l=r.getHeight();if(s>=le.MINIMUM_DIMENSION&&l>=le.MINIMUM_DIMENSION){const u=r.getMatrix();let f=s>>le.BLOCK_SIZE_POWER;(s&le.BLOCK_SIZE_MASK)!==0&&f++;let g=l>>le.BLOCK_SIZE_POWER;(l&le.BLOCK_SIZE_MASK)!==0&&g++;const y=le.calculateBlackPoints(u,f,g,s,l),x=new Qe(s,l);le.calculateThresholdForBlock(u,f,g,s,l,y,x),this.matrix=x}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new le(r)}static calculateThresholdForBlock(r,s,l,u,f,g,y){const x=f-le.BLOCK_SIZE,C=u-le.BLOCK_SIZE;for(let I=0;I<l;I++){let M=I<<le.BLOCK_SIZE_POWER;M>x&&(M=x);const L=le.cap(I,2,l-3);for(let H=0;H<s;H++){let J=H<<le.BLOCK_SIZE_POWER;J>C&&(J=C);const ee=le.cap(H,2,s-3);let ae=0;for(let Pe=-2;Pe<=2;Pe++){const Me=g[L+Pe];ae+=Me[ee-2]+Me[ee-1]+Me[ee]+Me[ee+1]+Me[ee+2]}const _e=ae/25;le.thresholdBlock(r,J,M,_e,u,y)}}}static cap(r,s,l){return r<s?s:r>l?l:r}static thresholdBlock(r,s,l,u,f,g){for(let y=0,x=l*f+s;y<le.BLOCK_SIZE;y++,x+=f)for(let C=0;C<le.BLOCK_SIZE;C++)(r[x+C]&255)<=u&&g.set(s+C,l+y)}static calculateBlackPoints(r,s,l,u,f){const g=f-le.BLOCK_SIZE,y=u-le.BLOCK_SIZE,x=new Array(l);for(let C=0;C<l;C++){x[C]=new Int32Array(s);let I=C<<le.BLOCK_SIZE_POWER;I>g&&(I=g);for(let M=0;M<s;M++){let L=M<<le.BLOCK_SIZE_POWER;L>y&&(L=y);let H=0,J=255,ee=0;for(let _e=0,Pe=I*u+L;_e<le.BLOCK_SIZE;_e++,Pe+=u){for(let Me=0;Me<le.BLOCK_SIZE;Me++){const Ne=r[Pe+Me]&255;H+=Ne,Ne<J&&(J=Ne),Ne>ee&&(ee=Ne)}if(ee-J>le.MIN_DYNAMIC_RANGE)for(_e++,Pe+=u;_e<le.BLOCK_SIZE;_e++,Pe+=u)for(let Me=0;Me<le.BLOCK_SIZE;Me++)H+=r[Pe+Me]&255}let ae=H>>le.BLOCK_SIZE_POWER*2;if(ee-J<=le.MIN_DYNAMIC_RANGE&&(ae=J/2,C>0&&M>0)){const _e=(x[C-1][M]+2*x[C][M-1]+x[C-1][M-1])/4;J<_e&&(ae=_e)}x[C][M]=ae}}return x}}le.BLOCK_SIZE_POWER=3,le.BLOCK_SIZE=1<<le.BLOCK_SIZE_POWER,le.BLOCK_SIZE_MASK=le.BLOCK_SIZE-1,le.MINIMUM_DIMENSION=le.BLOCK_SIZE*5,le.MIN_DYNAMIC_RANGE=24;class Re{constructor(r,s){this.width=r,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,s,l,u){throw new Q("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Q("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Q("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let s=new G;for(let l=0;l<this.height;l++){const u=this.getRow(l,r);for(let f=0;f<this.width;f++){const g=u[f]&255;let y;g<64?y="#":g<128?y="+":g<192?y=".":y=" ",s.append(y)}s.append(`
`)}return s.toString()}}class He extends Re{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,s){const l=this.delegate.getRow(r,s),u=this.getWidth();for(let f=0;f<u;f++)l[f]=255-(l[f]&255);return l}getMatrix(){const r=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(s);for(let u=0;u<s;u++)l[u]=255-(r[u]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(r,s,l,u){return new He(this.delegate.crop(r,s,l,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new He(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new He(this.delegate.rotateCounterClockwise45())}}class Ye extends Re{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=Ye.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const s=r.getContext("2d").getImageData(0,0,r.width,r.height);return Ye.toGrayscaleBuffer(s.data,r.width,r.height)}static toGrayscaleBuffer(r,s,l){const u=new Uint8ClampedArray(s*l);for(let f=0,g=0,y=r.length;f<y;f+=4,g++){let x;if(r[f+3]===0)x=255;else{const I=r[f],M=r[f+1],L=r[f+2];x=306*I+601*M+117*L+512>>10}u[g]=x}return u}getRow(r,s){if(r<0||r>=this.getHeight())throw new O("Requested row is outside the image: "+r);const l=this.getWidth(),u=r*l;return s===null?s=this.buffer.slice(u,u+l):(s.length<l&&(s=new Uint8ClampedArray(l)),s.set(this.buffer.slice(u,u+l))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,s,l,u){return super.crop(r,s,l,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const s=this.getTempCanvasElement(),l=s.getContext("2d"),u=r*Ye.DEGREE_TO_RADIANS,f=this.canvas.width,g=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(u))*f+Math.abs(Math.sin(u))*g),x=Math.ceil(Math.abs(Math.sin(u))*f+Math.abs(Math.cos(u))*g);return s.width=y,s.height=x,l.translate(y/2,x/2),l.rotate(u),l.drawImage(this.canvas,f/-2,g/-2),this.buffer=Ye.makeBufferFromCanvasImageData(s),this}invert(){return new He(this)}}Ye.DEGREE_TO_RADIANS=Math.PI/180;class Z{constructor(r,s,l){this.deviceId=r,this.label=s,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var X=(globalThis||Hh||self||window||void 0)&&(globalThis||Hh||self||window||void 0).__awaiter||function(D,r,s,l){function u(f){return f instanceof s?f:new s(function(g){g(f)})}return new(s||(s=Promise))(function(f,g){function y(I){try{C(l.next(I))}catch(M){g(M)}}function x(I){try{C(l.throw(I))}catch(M){g(M)}}function C(I){I.done?f(I.value):u(I.value).then(y,x)}C((l=l.apply(D,r||[])).next())})};class de{constructor(r,s=500,l){this.reader=r,this.timeBetweenScansMillis=s,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return X(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const l of r){const u=l.kind==="video"?"videoinput":l.kind;if(u!=="videoinput")continue;const f=l.deviceId||l.id,g=l.label||`Video device ${s.length+1}`,y=l.groupId,x={deviceId:f,label:g,kind:u,groupId:y};s.push(x)}return s})}getVideoInputDevices(){return X(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new Z(s.deviceId,s.label))})}findDeviceById(r){return X(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(l=>l.deviceId===r):null})}decodeFromInputVideoDevice(r,s){return X(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,s)})}decodeOnceFromVideoDevice(r,s){return X(this,void 0,void 0,function*(){this.reset();let l;r?l={deviceId:{exact:r}}:l={facingMode:"environment"};const u={video:l};return yield this.decodeOnceFromConstraints(u,s)})}decodeOnceFromConstraints(r,s){return X(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(l,s)})}decodeOnceFromStream(r,s){return X(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(r,s);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(r,s,l){return X(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,s,l)})}decodeFromVideoDevice(r,s,l){return X(this,void 0,void 0,function*(){let u;r?u={deviceId:{exact:r}}:u={facingMode:"environment"};const f={video:u};return yield this.decodeFromConstraints(f,s,l)})}decodeFromConstraints(r,s,l){return X(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(u,s,l)})}decodeFromStream(r,s,l){return X(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(r,s);return yield this.decodeContinuously(u,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,s){return X(this,void 0,void 0,function*(){const l=this.prepareVideoElement(s);return this.addVideoSource(l,r),this.videoElement=l,this.stream=r,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(r){return new Promise((s,l)=>this.playVideoOnLoad(r,()=>s()))}playVideoOnLoad(r,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",s),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return X(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,s){const l=document.getElementById(r);if(!l)throw new S(`element with id '${r}' not found`);if(l.nodeName.toLowerCase()!==s.toLowerCase())throw new S(`element with id '${r}' must be an ${s} element`);return l}decodeFromImage(r,s){if(!r&&!s)throw new S("either imageElement with a src set or an url must be provided");return s&&!r?this.decodeFromImageUrl(s):this.decodeFromImageElement(r)}decodeFromVideo(r,s){if(!r&&!s)throw new S("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,s,l){if(r===void 0&&s===void 0)throw new S("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrlContinuously(s,l):this.decodeFromVideoElementContinuously(r,l)}decodeFromImageElement(r){if(!r)throw new S("An image element must be provided.");this.reset();const s=this.prepareImageElement(r);this.imageElement=s;let l;return this.isImageLoaded(s)?l=this.decodeOnce(s,!1,!0):l=this._decodeOnLoadImage(s),l}decodeFromVideoElement(r){const s=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(r,s){const l=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(l,s)}_decodeFromVideoElementSetup(r){if(!r)throw new S("A video element must be provided.");this.reset();const s=this.prepareVideoElement(r);return this.videoElement=s,s}decodeFromImageUrl(r){if(!r)throw new S("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const l=this._decodeOnLoadImage(s);return s.src=r,l}decodeFromVideoUrl(r){if(!r)throw new S("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),l=this.decodeFromVideoElement(s);return s.src=r,l}decodeFromVideoUrlContinuously(r,s){if(!r)throw new S("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(l,s);return l.src=r,u}_decodeOnLoadImage(r){return new Promise((s,l)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(s,l),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return X(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,s){return X(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,s)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let s;return typeof r>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(s=r),s}prepareVideoElement(r){let s;return!r&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(s=r),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(r,s=!0,l=!0){this._stopAsyncDecode=!1;const u=(f,g)=>{if(this._stopAsyncDecode){g(new oe("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const y=this.decode(r);f(y)}catch(y){const x=s&&y instanceof oe,I=(y instanceof Y||y instanceof F)&&l;if(x||I)return setTimeout(u,this._timeBetweenDecodingAttempts,f,g);g(y)}};return new Promise((f,g)=>u(f,g))}decodeContinuously(r,s){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(r);s(u,null),setTimeout(l,this.timeBetweenScansMillis)}catch(u){s(null,u);const f=u instanceof Y||u instanceof F,g=u instanceof oe;(f||g)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(r){const s=this.createBinaryBitmap(r);return this.decodeBitmap(s)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,s,l){s||(s={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(r,s,l=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const s=this.getCaptureCanvas(r),l=new Ye(s),u=new le(l);return new B(u)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const s=this.createCaptureCanvas(r);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let l,u;return typeof r<"u"&&(r instanceof HTMLVideoElement?(l=r.videoWidth,u=r.videoHeight):r instanceof HTMLImageElement&&(l=r.naturalWidth||r.width,u=r.naturalHeight||r.height)),s.style.width=l+"px",s.style.height=u+"px",s.width=l,s.height=u,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,s){try{r.srcObject=s}catch{r.src=URL.createObjectURL(s)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class we{constructor(r,s,l=s==null?0:8*s.length,u,f,g=ie.currentTimeMillis()){this.text=r,this.rawBytes=s,this.numBits=l,this.resultPoints=u,this.format=f,this.timestamp=g,this.text=r,this.rawBytes=s,l==null?this.numBits=s==null?0:8*s.length:this.numBits=l,this.resultPoints=u,this.format=f,this.resultMetadata=null,g==null?this.timestamp=ie.currentTimeMillis():this.timestamp=g}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,s)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const s=this.resultPoints;if(s===null)this.resultPoints=r;else if(r!==null&&r.length>0){const l=new Array(s.length+r.length);ie.arraycopy(s,0,l,0,s.length),ie.arraycopy(r,0,l,s.length,r.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Fe;(function(D){D[D.AZTEC=0]="AZTEC",D[D.CODABAR=1]="CODABAR",D[D.CODE_39=2]="CODE_39",D[D.CODE_93=3]="CODE_93",D[D.CODE_128=4]="CODE_128",D[D.DATA_MATRIX=5]="DATA_MATRIX",D[D.EAN_8=6]="EAN_8",D[D.EAN_13=7]="EAN_13",D[D.ITF=8]="ITF",D[D.MAXICODE=9]="MAXICODE",D[D.PDF_417=10]="PDF_417",D[D.QR_CODE=11]="QR_CODE",D[D.RSS_14=12]="RSS_14",D[D.RSS_EXPANDED=13]="RSS_EXPANDED",D[D.UPC_A=14]="UPC_A",D[D.UPC_E=15]="UPC_E",D[D.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Fe||(Fe={}));var ye=Fe,Xe;(function(D){D[D.OTHER=0]="OTHER",D[D.ORIENTATION=1]="ORIENTATION",D[D.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",D[D.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",D[D.ISSUE_NUMBER=4]="ISSUE_NUMBER",D[D.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",D[D.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",D[D.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",D[D.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",D[D.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",D[D.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Xe||(Xe={}));var et=Xe;class lt{constructor(r,s,l,u,f=-1,g=-1){this.rawBytes=r,this.text=s,this.byteSegments=l,this.ecLevel=u,this.structuredAppendSequenceNumber=f,this.structuredAppendParity=g,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class mn{exp(r){return this.expTable[r]}log(r){if(r===0)throw new O;return this.logTable[r]}static addOrSubtract(r,s){return r^s}}class Zt{constructor(r,s){if(s.length===0)throw new O;this.field=r;const l=s.length;if(l>1&&s[0]===0){let u=1;for(;u<l&&s[u]===0;)u++;u===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-u),ie.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const s=this.coefficients;let l;if(r===1){l=0;for(let g=0,y=s.length;g!==y;g++){const x=s[g];l=mn.addOrSubtract(l,x)}return l}l=s[0];const u=s.length,f=this.field;for(let g=1;g<u;g++)l=mn.addOrSubtract(f.multiply(r,l),s[g]);return l}addOrSubtract(r){if(!this.field.equals(r.field))throw new O("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,l=r.coefficients;if(s.length>l.length){const g=s;s=l,l=g}let u=new Int32Array(l.length);const f=l.length-s.length;ie.arraycopy(l,0,u,0,f);for(let g=f;g<l.length;g++)u[g]=mn.addOrSubtract(s[g-f],l[g]);return new Zt(this.field,u)}multiply(r){if(!this.field.equals(r.field))throw new O("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const s=this.coefficients,l=s.length,u=r.coefficients,f=u.length,g=new Int32Array(l+f-1),y=this.field;for(let x=0;x<l;x++){const C=s[x];for(let I=0;I<f;I++)g[x+I]=mn.addOrSubtract(g[x+I],y.multiply(C,u[I]))}return new Zt(y,g)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const s=this.coefficients.length,l=this.field,u=new Int32Array(s),f=this.coefficients;for(let g=0;g<s;g++)u[g]=l.multiply(f[g],r);return new Zt(l,u)}multiplyByMonomial(r,s){if(r<0)throw new O;if(s===0)return this.field.getZero();const l=this.coefficients,u=l.length,f=new Int32Array(u+r),g=this.field;for(let y=0;y<u;y++)f[y]=g.multiply(l[y],s);return new Zt(g,f)}divide(r){if(!this.field.equals(r.field))throw new O("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new O("Divide by 0");const s=this.field;let l=s.getZero(),u=this;const f=r.getCoefficient(r.getDegree()),g=s.inverse(f);for(;u.getDegree()>=r.getDegree()&&!u.isZero();){const y=u.getDegree()-r.getDegree(),x=s.multiply(u.getCoefficient(u.getDegree()),g),C=r.multiplyByMonomial(y,x),I=s.buildMonomial(y,x);l=l.addOrSubtract(I),u=u.addOrSubtract(C)}return[l,u]}toString(){let r="";for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);if(l!==0){if(l<0?(r+=" - ",l=-l):r.length>0&&(r+=" + "),s===0||l!==1){const u=this.field.log(l);u===0?r+="1":u===1?r+="a":(r+="a^",r+=u)}s!==0&&(s===1?r+="x":(r+="x^",r+=s))}}return r}}class kn extends A{}kn.kind="ArithmeticException";class _t extends mn{constructor(r,s,l){super(),this.primitive=r,this.size=s,this.generatorBase=l;const u=new Int32Array(s);let f=1;for(let y=0;y<s;y++)u[y]=f,f*=2,f>=s&&(f^=r,f&=s-1);this.expTable=u;const g=new Int32Array(s);for(let y=0;y<s-1;y++)g[u[y]]=y;this.logTable=g,this.zero=new Zt(this,Int32Array.from([0])),this.one=new Zt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new O;if(s===0)return this.zero;const l=new Int32Array(r+1);return l[0]=s,new Zt(this,l)}inverse(r){if(r===0)throw new kn;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+pe.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}_t.AZTEC_DATA_12=new _t(4201,4096,1),_t.AZTEC_DATA_10=new _t(1033,1024,1),_t.AZTEC_DATA_6=new _t(67,64,1),_t.AZTEC_PARAM=new _t(19,16,1),_t.QR_CODE_FIELD_256=new _t(285,256,0),_t.DATA_MATRIX_FIELD_256=new _t(301,256,1),_t.AZTEC_DATA_8=_t.DATA_MATRIX_FIELD_256,_t.MAXICODE_FIELD_64=_t.AZTEC_DATA_6;class Bn extends A{}Bn.kind="ReedSolomonException";class ur extends A{}ur.kind="IllegalStateException";class _r{constructor(r){this.field=r}decode(r,s){const l=this.field,u=new Zt(l,r),f=new Int32Array(s);let g=!0;for(let H=0;H<s;H++){const J=u.evaluateAt(l.exp(H+l.getGeneratorBase()));f[f.length-1-H]=J,J!==0&&(g=!1)}if(g)return;const y=new Zt(l,f),x=this.runEuclideanAlgorithm(l.buildMonomial(s,1),y,s),C=x[0],I=x[1],M=this.findErrorLocations(C),L=this.findErrorMagnitudes(I,M);for(let H=0;H<M.length;H++){const J=r.length-1-l.log(M[H]);if(J<0)throw new Bn("Bad error location");r[J]=_t.addOrSubtract(r[J],L[H])}}runEuclideanAlgorithm(r,s,l){if(r.getDegree()<s.getDegree()){const H=r;r=s,s=H}const u=this.field;let f=r,g=s,y=u.getZero(),x=u.getOne();for(;g.getDegree()>=(l/2|0);){let H=f,J=y;if(f=g,y=x,f.isZero())throw new Bn("r_{i-1} was zero");g=H;let ee=u.getZero();const ae=f.getCoefficient(f.getDegree()),_e=u.inverse(ae);for(;g.getDegree()>=f.getDegree()&&!g.isZero();){const Pe=g.getDegree()-f.getDegree(),Me=u.multiply(g.getCoefficient(g.getDegree()),_e);ee=ee.addOrSubtract(u.buildMonomial(Pe,Me)),g=g.addOrSubtract(f.multiplyByMonomial(Pe,Me))}if(x=ee.multiply(y).addOrSubtract(J),g.getDegree()>=f.getDegree())throw new ur("Division algorithm failed to reduce polynomial?")}const C=x.getCoefficient(0);if(C===0)throw new Bn("sigmaTilde(0) was zero");const I=u.inverse(C),M=x.multiplyScalar(I),L=g.multiplyScalar(I);return[M,L]}findErrorLocations(r){const s=r.getDegree();if(s===1)return Int32Array.from([r.getCoefficient(1)]);const l=new Int32Array(s);let u=0;const f=this.field;for(let g=1;g<f.getSize()&&u<s;g++)r.evaluateAt(g)===0&&(l[u]=f.inverse(g),u++);if(u!==s)throw new Bn("Error locator degree does not match number of roots");return l}findErrorMagnitudes(r,s){const l=s.length,u=new Int32Array(l),f=this.field;for(let g=0;g<l;g++){const y=f.inverse(s[g]);let x=1;for(let C=0;C<l;C++)if(g!==C){const I=f.multiply(s[C],y),M=(I&1)===0?I|1:I&-2;x=f.multiply(x,M)}u[g]=f.multiply(r.evaluateAt(y),f.inverse(x)),f.getGeneratorBase()!==0&&(u[g]=f.multiply(u[g],y))}return u}}var pn;(function(D){D[D.UPPER=0]="UPPER",D[D.LOWER=1]="LOWER",D[D.MIXED=2]="MIXED",D[D.DIGIT=3]="DIGIT",D[D.PUNCT=4]="PUNCT",D[D.BINARY=5]="BINARY"})(pn||(pn={}));class Wt{decode(r){this.ddata=r;let s=r.getBits(),l=this.extractBits(s),u=this.correctBits(l),f=Wt.convertBoolArrayToByteArray(u),g=Wt.getEncodedData(u),y=new lt(f,g,null,null);return y.setNumBits(u.length),y}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let s=r.length,l=pn.UPPER,u=pn.UPPER,f="",g=0;for(;g<s;)if(u===pn.BINARY){if(s-g<5)break;let y=Wt.readCode(r,g,5);if(g+=5,y===0){if(s-g<11)break;y=Wt.readCode(r,g,11)+31,g+=11}for(let x=0;x<y;x++){if(s-g<8){g=s;break}const C=Wt.readCode(r,g,8);f+=W.castAsNonUtf8Char(C),g+=8}u=l}else{let y=u===pn.DIGIT?4:5;if(s-g<y)break;let x=Wt.readCode(r,g,y);g+=y;let C=Wt.getCharacter(u,x);C.startsWith("CTRL_")?(l=u,u=Wt.getTable(C.charAt(5)),C.charAt(6)==="L"&&(l=u)):(f+=C,u=l)}return f}static getTable(r){switch(r){case"L":return pn.LOWER;case"P":return pn.PUNCT;case"M":return pn.MIXED;case"D":return pn.DIGIT;case"B":return pn.BINARY;case"U":default:return pn.UPPER}}static getCharacter(r,s){switch(r){case pn.UPPER:return Wt.UPPER_TABLE[s];case pn.LOWER:return Wt.LOWER_TABLE[s];case pn.MIXED:return Wt.MIXED_TABLE[s];case pn.PUNCT:return Wt.PUNCT_TABLE[s];case pn.DIGIT:return Wt.DIGIT_TABLE[s];default:throw new ur("Bad table")}}correctBits(r){let s,l;this.ddata.getNbLayers()<=2?(l=6,s=_t.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,s=_t.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,s=_t.AZTEC_DATA_10):(l=12,s=_t.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),f=r.length/l;if(f<u)throw new F;let g=r.length%l,y=new Int32Array(f);for(let L=0;L<f;L++,g+=l)y[L]=Wt.readCode(r,g,l);try{new _r(s).decode(y,f-u)}catch(L){throw new F(L)}let x=(1<<l)-1,C=0;for(let L=0;L<u;L++){let H=y[L];if(H===0||H===x)throw new F;(H===1||H===x-1)&&C++}let I=new Array(u*l-C),M=0;for(let L=0;L<u;L++){let H=y[L];if(H===1||H===x-1)I.fill(H>1,M,M+l-1),M+=l-1;else for(let J=l-1;J>=0;--J)I[M++]=(H&1<<J)!==0}return I}extractBits(r){let s=this.ddata.isCompact(),l=this.ddata.getNbLayers(),u=(s?11:14)+l*4,f=new Int32Array(u),g=new Array(this.totalBitsInLayer(l,s));if(s)for(let y=0;y<f.length;y++)f[y]=y;else{let y=u+1+2*pe.truncDivision(pe.truncDivision(u,2)-1,15),x=u/2,C=pe.truncDivision(y,2);for(let I=0;I<x;I++){let M=I+pe.truncDivision(I,15);f[x-I-1]=C-M-1,f[x+I]=C+M+1}}for(let y=0,x=0;y<l;y++){let C=(l-y)*4+(s?9:12),I=y*2,M=u-1-I;for(let L=0;L<C;L++){let H=L*2;for(let J=0;J<2;J++)g[x+H+J]=r.get(f[I+J],f[I+L]),g[x+2*C+H+J]=r.get(f[I+L],f[M-J]),g[x+4*C+H+J]=r.get(f[M-J],f[M-L]),g[x+6*C+H+J]=r.get(f[M-L],f[I+J])}x+=C*8}return g}static readCode(r,s,l){let u=0;for(let f=s;f<s+l;f++)u<<=1,r[f]&&(u|=1);return u}static readByte(r,s){let l=r.length-s;return l>=8?Wt.readCode(r,s,8):Wt.readCode(r,s,l)<<8-l}static convertBoolArrayToByteArray(r){let s=new Uint8Array((r.length+7)/8);for(let l=0;l<s.length;l++)s[l]=Wt.readByte(r,8*l);return s}totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}Wt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Wt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Wt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Wt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Wt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class rt{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,s,l,u){const f=r-l,g=s-u;return Math.sqrt(f*f+g*g)}static sum(r){let s=0;for(let l=0,u=r.length;l!==u;l++){const f=r[l];s+=f}return s}}class yn{static floatToIntBits(r){return r}}yn.MAX_VALUE=Number.MAX_SAFE_INTEGER;class je{constructor(r,s){this.x=r,this.y=s}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof je){const s=r;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*yn.floatToIntBits(this.x)+yn.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const s=this.distance(r[0],r[1]),l=this.distance(r[1],r[2]),u=this.distance(r[0],r[2]);let f,g,y;if(l>=s&&l>=u?(g=r[0],f=r[1],y=r[2]):u>=l&&u>=s?(g=r[1],f=r[0],y=r[2]):(g=r[2],f=r[0],y=r[1]),this.crossProductZ(f,g,y)<0){const x=f;f=y,y=x}r[0]=f,r[1]=g,r[2]=y}static distance(r,s){return rt.distance(r.x,r.y,s.x,s.y)}static crossProductZ(r,s,l){const u=s.x,f=s.y;return(l.x-u)*(r.y-f)-(l.y-f)*(r.x-u)}}class Ni{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class fs extends Ni{constructor(r,s,l,u,f){super(r,s),this.compact=l,this.nbDatablocks=u,this.nbLayers=f}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class cn{constructor(r,s,l,u){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),s==null&&(s=cn.INIT_SIZE),l==null&&(l=r.getWidth()/2|0),u==null&&(u=r.getHeight()/2|0);const f=s/2|0;if(this.leftInit=l-f,this.rightInit=l+f,this.upInit=u-f,this.downInit=u+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new oe}detect(){let r=this.leftInit,s=this.rightInit,l=this.upInit,u=this.downInit,f=!1,g=!0,y=!1,x=!1,C=!1,I=!1,M=!1;const L=this.width,H=this.height;for(;g;){g=!1;let J=!0;for(;(J||!x)&&s<L;)J=this.containsBlackPoint(l,u,s,!1),J?(s++,g=!0,x=!0):x||s++;if(s>=L){f=!0;break}let ee=!0;for(;(ee||!C)&&u<H;)ee=this.containsBlackPoint(r,s,u,!0),ee?(u++,g=!0,C=!0):C||u++;if(u>=H){f=!0;break}let ae=!0;for(;(ae||!I)&&r>=0;)ae=this.containsBlackPoint(l,u,r,!1),ae?(r--,g=!0,I=!0):I||r--;if(r<0){f=!0;break}let _e=!0;for(;(_e||!M)&&l>=0;)_e=this.containsBlackPoint(r,s,l,!0),_e?(l--,g=!0,M=!0):M||l--;if(l<0){f=!0;break}g&&(y=!0)}if(!f&&y){const J=s-r;let ee=null;for(let Me=1;ee===null&&Me<J;Me++)ee=this.getBlackPointOnSegment(r,u-Me,r+Me,u);if(ee==null)throw new oe;let ae=null;for(let Me=1;ae===null&&Me<J;Me++)ae=this.getBlackPointOnSegment(r,l+Me,r+Me,l);if(ae==null)throw new oe;let _e=null;for(let Me=1;_e===null&&Me<J;Me++)_e=this.getBlackPointOnSegment(s,l+Me,s-Me,l);if(_e==null)throw new oe;let Pe=null;for(let Me=1;Pe===null&&Me<J;Me++)Pe=this.getBlackPointOnSegment(s,u-Me,s-Me,u);if(Pe==null)throw new oe;return this.centerEdges(Pe,ee,_e,ae)}else throw new oe}getBlackPointOnSegment(r,s,l,u){const f=rt.round(rt.distance(r,s,l,u)),g=(l-r)/f,y=(u-s)/f,x=this.image;for(let C=0;C<f;C++){const I=rt.round(r+C*g),M=rt.round(s+C*y);if(x.get(I,M))return new je(I,M)}return null}centerEdges(r,s,l,u){const f=r.getX(),g=r.getY(),y=s.getX(),x=s.getY(),C=l.getX(),I=l.getY(),M=u.getX(),L=u.getY(),H=cn.CORR;return f<this.width/2?[new je(M-H,L+H),new je(y+H,x+H),new je(C-H,I-H),new je(f+H,g-H)]:[new je(M+H,L+H),new je(y+H,x-H),new je(C-H,I+H),new je(f-H,g-H)]}containsBlackPoint(r,s,l,u){const f=this.image;if(u){for(let g=r;g<=s;g++)if(f.get(g,l))return!0}else for(let g=r;g<=s;g++)if(f.get(l,g))return!0;return!1}}cn.INIT_SIZE=10,cn.CORR=1;class ei{static checkAndNudgePoints(r,s){const l=r.getWidth(),u=r.getHeight();let f=!0;for(let g=0;g<s.length&&f;g+=2){const y=Math.floor(s[g]),x=Math.floor(s[g+1]);if(y<-1||y>l||x<-1||x>u)throw new oe;f=!1,y===-1?(s[g]=0,f=!0):y===l&&(s[g]=l-1,f=!0),x===-1?(s[g+1]=0,f=!0):x===u&&(s[g+1]=u-1,f=!0)}f=!0;for(let g=s.length-2;g>=0&&f;g-=2){const y=Math.floor(s[g]),x=Math.floor(s[g+1]);if(y<-1||y>l||x<-1||x>u)throw new oe;f=!1,y===-1?(s[g]=0,f=!0):y===l&&(s[g]=l-1,f=!0),x===-1?(s[g+1]=0,f=!0):x===u&&(s[g+1]=u-1,f=!0)}}}class qn{constructor(r,s,l,u,f,g,y,x,C){this.a11=r,this.a21=s,this.a31=l,this.a12=u,this.a22=f,this.a32=g,this.a13=y,this.a23=x,this.a33=C}static quadrilateralToQuadrilateral(r,s,l,u,f,g,y,x,C,I,M,L,H,J,ee,ae){const _e=qn.quadrilateralToSquare(r,s,l,u,f,g,y,x);return qn.squareToQuadrilateral(C,I,M,L,H,J,ee,ae).times(_e)}transformPoints(r){const s=r.length,l=this.a11,u=this.a12,f=this.a13,g=this.a21,y=this.a22,x=this.a23,C=this.a31,I=this.a32,M=this.a33;for(let L=0;L<s;L+=2){const H=r[L],J=r[L+1],ee=f*H+x*J+M;r[L]=(l*H+g*J+C)/ee,r[L+1]=(u*H+y*J+I)/ee}}transformPointsWithValues(r,s){const l=this.a11,u=this.a12,f=this.a13,g=this.a21,y=this.a22,x=this.a23,C=this.a31,I=this.a32,M=this.a33,L=r.length;for(let H=0;H<L;H++){const J=r[H],ee=s[H],ae=f*J+x*ee+M;r[H]=(l*J+g*ee+C)/ae,s[H]=(u*J+y*ee+I)/ae}}static squareToQuadrilateral(r,s,l,u,f,g,y,x){const C=r-l+f-y,I=s-u+g-x;if(C===0&&I===0)return new qn(l-r,f-l,r,u-s,g-u,s,0,0,1);{const M=l-f,L=y-f,H=u-g,J=x-g,ee=M*J-L*H,ae=(C*J-L*I)/ee,_e=(M*I-C*H)/ee;return new qn(l-r+ae*l,y-r+_e*y,r,u-s+ae*u,x-s+_e*x,s,ae,_e,1)}}static quadrilateralToSquare(r,s,l,u,f,g,y,x){return qn.squareToQuadrilateral(r,s,l,u,f,g,y,x).buildAdjoint()}buildAdjoint(){return new qn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new qn(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class qi extends ei{sampleGrid(r,s,l,u,f,g,y,x,C,I,M,L,H,J,ee,ae,_e,Pe,Me){const Ne=qn.quadrilateralToQuadrilateral(u,f,g,y,x,C,I,M,L,H,J,ee,ae,_e,Pe,Me);return this.sampleGridWithTransform(r,s,l,Ne)}sampleGridWithTransform(r,s,l,u){if(s<=0||l<=0)throw new oe;const f=new Qe(s,l),g=new Float32Array(2*s);for(let y=0;y<l;y++){const x=g.length,C=y+.5;for(let I=0;I<x;I+=2)g[I]=I/2+.5,g[I+1]=C;u.transformPoints(g),ei.checkAndNudgePoints(r,g);try{for(let I=0;I<x;I+=2)r.get(Math.floor(g[I]),Math.floor(g[I+1]))&&f.set(I/2,y)}catch{throw new oe}}return f}}class ir{static setGridSampler(r){ir.gridSampler=r}static getInstance(){return ir.gridSampler}}ir.gridSampler=new qi;class bn{constructor(r,s){this.x=r,this.y=s}toResultPoint(){return new je(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class ti{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let s=this.getMatrixCenter(),l=this.getBullsEyeCorners(s);if(r){let g=l[0];l[0]=l[2],l[2]=g}this.extractParameters(l);let u=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),f=this.getMatrixCornerPoints(l);return new fs(u,f,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new oe;let s=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(r[0],r[1],s),this.sampleLine(r[1],r[2],s),this.sampleLine(r[2],r[3],s),this.sampleLine(r[3],r[0],s)]);this.shift=this.getRotation(l,s);let u=0;for(let g=0;g<4;g++){let y=l[(this.shift+g)%4];this.compact?(u<<=7,u+=y>>1&127):(u<<=10,u+=(y>>2&992)+(y>>1&31))}let f=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(f>>6)+1,this.nbDataBlocks=(f&63)+1):(this.nbLayers=(f>>11)+1,this.nbDataBlocks=(f&2047)+1)}getRotation(r,s){let l=0;r.forEach((u,f,g)=>{let y=(u>>s-2<<1)+(u&1);l=(l<<3)+y}),l=((l&1)<<11)+(l>>1);for(let u=0;u<4;u++)if(pe.bitCount(l^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new oe}getCorrectedParameterData(r,s){let l,u;s?(l=7,u=2):(l=10,u=4);let f=l-u,g=new Int32Array(l);for(let x=l-1;x>=0;--x)g[x]=r&15,r>>=4;try{new _r(_t.AZTEC_PARAM).decode(g,f)}catch{throw new oe}let y=0;for(let x=0;x<u;x++)y=(y<<4)+g[x];return y}getBullsEyeCorners(r){let s=r,l=r,u=r,f=r,g=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let M=this.getFirstDifferent(s,g,1,-1),L=this.getFirstDifferent(l,g,1,1),H=this.getFirstDifferent(u,g,-1,1),J=this.getFirstDifferent(f,g,-1,-1);if(this.nbCenterLayers>2){let ee=this.distancePoint(J,M)*this.nbCenterLayers/(this.distancePoint(f,s)*(this.nbCenterLayers+2));if(ee<.75||ee>1.25||!this.isWhiteOrBlackRectangle(M,L,H,J))break}s=M,l=L,u=H,f=J,g=!g}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new oe;this.compact=this.nbCenterLayers===5;let y=new je(s.getX()+.5,s.getY()-.5),x=new je(l.getX()+.5,l.getY()+.5),C=new je(u.getX()-.5,u.getY()+.5),I=new je(f.getX()-.5,f.getY()-.5);return this.expandSquare([y,x,C,I],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,s,l,u;try{let y=new cn(this.image).detect();r=y[0],s=y[1],l=y[2],u=y[3]}catch{let x=this.image.getWidth()/2,C=this.image.getHeight()/2;r=this.getFirstDifferent(new bn(x+7,C-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new bn(x+7,C+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new bn(x-7,C+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new bn(x-7,C-7),!1,-1,-1).toResultPoint()}let f=rt.round((r.getX()+u.getX()+s.getX()+l.getX())/4),g=rt.round((r.getY()+u.getY()+s.getY()+l.getY())/4);try{let y=new cn(this.image,15,f,g).detect();r=y[0],s=y[1],l=y[2],u=y[3]}catch{r=this.getFirstDifferent(new bn(f+7,g-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new bn(f+7,g+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new bn(f-7,g+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new bn(f-7,g-7),!1,-1,-1).toResultPoint()}return f=rt.round((r.getX()+u.getX()+s.getX()+l.getX())/4),g=rt.round((r.getY()+u.getY()+s.getY()+l.getY())/4),new bn(f,g)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,s,l,u,f){let g=ir.getInstance(),y=this.getDimension(),x=y/2-this.nbCenterLayers,C=y/2+this.nbCenterLayers;return g.sampleGrid(r,y,y,x,x,C,x,C,C,x,C,s.getX(),s.getY(),l.getX(),l.getY(),u.getX(),u.getY(),f.getX(),f.getY())}sampleLine(r,s,l){let u=0,f=this.distanceResultPoint(r,s),g=f/l,y=r.getX(),x=r.getY(),C=g*(s.getX()-r.getX())/f,I=g*(s.getY()-r.getY())/f;for(let M=0;M<l;M++)this.image.get(rt.round(y+M*C),rt.round(x+M*I))&&(u|=1<<l-M-1);return u}isWhiteOrBlackRectangle(r,s,l,u){let f=3;r=new bn(r.getX()-f,r.getY()+f),s=new bn(s.getX()-f,s.getY()-f),l=new bn(l.getX()+f,l.getY()-f),u=new bn(u.getX()+f,u.getY()+f);let g=this.getColor(u,r);if(g===0)return!1;let y=this.getColor(r,s);return y!==g||(y=this.getColor(s,l),y!==g)?!1:(y=this.getColor(l,u),y===g)}getColor(r,s){let l=this.distancePoint(r,s),u=(s.getX()-r.getX())/l,f=(s.getY()-r.getY())/l,g=0,y=r.getX(),x=r.getY(),C=this.image.get(r.getX(),r.getY()),I=Math.ceil(l);for(let L=0;L<I;L++)y+=u,x+=f,this.image.get(rt.round(y),rt.round(x))!==C&&g++;let M=g/l;return M>.1&&M<.9?0:M<=.1===C?1:-1}getFirstDifferent(r,s,l,u){let f=r.getX()+l,g=r.getY()+u;for(;this.isValid(f,g)&&this.image.get(f,g)===s;)f+=l,g+=u;for(f-=l,g-=u;this.isValid(f,g)&&this.image.get(f,g)===s;)f+=l;for(f-=l;this.isValid(f,g)&&this.image.get(f,g)===s;)g+=u;return g-=u,new bn(f,g)}expandSquare(r,s,l){let u=l/(2*s),f=r[0].getX()-r[2].getX(),g=r[0].getY()-r[2].getY(),y=(r[0].getX()+r[2].getX())/2,x=(r[0].getY()+r[2].getY())/2,C=new je(y+u*f,x+u*g),I=new je(y-u*f,x-u*g);f=r[1].getX()-r[3].getX(),g=r[1].getY()-r[3].getY(),y=(r[1].getX()+r[3].getX())/2,x=(r[1].getY()+r[3].getY())/2;let M=new je(y+u*f,x+u*g),L=new je(y-u*f,x-u*g);return[C,M,I,L]}isValid(r,s){return r>=0&&r<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(r){let s=rt.round(r.getX()),l=rt.round(r.getY());return this.isValid(s,l)}distancePoint(r,s){return rt.distance(r.getX(),r.getY(),s.getX(),s.getY())}distanceResultPoint(r,s){return rt.distance(r.getX(),r.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(pe.truncDivision(this.nbLayers-4,8)+1)+15}}class ni{decode(r,s=null){let l=null,u=new ti(r.getBlackMatrix()),f=null,g=null;try{let I=u.detectMirror(!1);f=I.getPoints(),this.reportFoundResultPoints(s,f),g=new Wt().decode(I)}catch(I){l=I}if(g==null)try{let I=u.detectMirror(!0);f=I.getPoints(),this.reportFoundResultPoints(s,f),g=new Wt().decode(I)}catch(I){throw l??I}let y=new we(g.getText(),g.getRawBytes(),g.getNumBits(),f,ye.AZTEC,ie.currentTimeMillis()),x=g.getByteSegments();x!=null&&y.putMetadata(et.BYTE_SEGMENTS,x);let C=g.getECLevel();return C!=null&&y.putMetadata(et.ERROR_CORRECTION_LEVEL,C),y}reportFoundResultPoints(r,s){if(r!=null){let l=r.get(ze.NEED_RESULT_POINT_CALLBACK);l!=null&&s.forEach((u,f,g)=>{l.foundPossibleResultPoint(u)})}}reset(){}}class Cs extends de{constructor(r=500){super(new ni,r)}}class Ft{decode(r,s){try{return this.doDecode(r,s)}catch{if(s&&s.get(ze.TRY_HARDER)===!0&&r.isRotateSupported()){const f=r.rotateCounterClockwise(),g=this.doDecode(f,s),y=g.getResultMetadata();let x=270;y!==null&&y.get(et.ORIENTATION)===!0&&(x=x+y.get(et.ORIENTATION)%360),g.putMetadata(et.ORIENTATION,x);const C=g.getResultPoints();if(C!==null){const I=f.getHeight();for(let M=0;M<C.length;M++)C[M]=new je(I-C[M].getY()-1,C[M].getX())}return g}else throw new oe}}reset(){}doDecode(r,s){const l=r.getWidth(),u=r.getHeight();let f=new Le(l);const g=s&&s.get(ze.TRY_HARDER)===!0,y=Math.max(1,u>>(g?8:5));let x;g?x=u:x=15;const C=Math.trunc(u/2);for(let I=0;I<x;I++){const M=Math.trunc((I+1)/2),L=(I&1)===0,H=C+y*(L?M:-M);if(H<0||H>=u)break;try{f=r.getBlackRow(H,f)}catch{continue}for(let J=0;J<2;J++){if(J===1&&(f.reverse(),s&&s.get(ze.NEED_RESULT_POINT_CALLBACK)===!0)){const ee=new Map;s.forEach((ae,_e)=>ee.set(_e,ae)),ee.delete(ze.NEED_RESULT_POINT_CALLBACK),s=ee}try{const ee=this.decodeRow(H,f,s);if(J===1){ee.putMetadata(et.ORIENTATION,180);const ae=ee.getResultPoints();ae!==null&&(ae[0]=new je(l-ae[0].getX()-1,ae[0].getY()),ae[1]=new je(l-ae[1].getX()-1,ae[1].getY()))}return ee}catch{}}}throw new oe}static recordPattern(r,s,l){const u=l.length;for(let C=0;C<u;C++)l[C]=0;const f=r.getSize();if(s>=f)throw new oe;let g=!r.get(s),y=0,x=s;for(;x<f;){if(r.get(x)!==g)l[y]++;else{if(++y===u)break;l[y]=1,g=!g}x++}if(!(y===u||y===u-1&&x===f))throw new oe}static recordPatternInReverse(r,s,l){let u=l.length,f=r.get(s);for(;s>0&&u>=0;)r.get(--s)!==f&&(u--,f=!f);if(u>=0)throw new oe;Ft.recordPattern(r,s+1,l)}static patternMatchVariance(r,s,l){const u=r.length;let f=0,g=0;for(let C=0;C<u;C++)f+=r[C],g+=s[C];if(f<g)return Number.POSITIVE_INFINITY;const y=f/g;l*=y;let x=0;for(let C=0;C<u;C++){const I=r[C],M=s[C]*y,L=I>M?I-M:M-I;if(L>l)return Number.POSITIVE_INFINITY;x+=L}return x/f}}class De extends Ft{static findStartPattern(r){const s=r.getSize(),l=r.getNextSet(0);let u=0,f=Int32Array.from([0,0,0,0,0,0]),g=l,y=!1;const x=6;for(let C=l;C<s;C++)if(r.get(C)!==y)f[u]++;else{if(u===x-1){let I=De.MAX_AVG_VARIANCE,M=-1;for(let L=De.CODE_START_A;L<=De.CODE_START_C;L++){const H=Ft.patternMatchVariance(f,De.CODE_PATTERNS[L],De.MAX_INDIVIDUAL_VARIANCE);H<I&&(I=H,M=L)}if(M>=0&&r.isRange(Math.max(0,g-(C-g)/2),g,!1))return Int32Array.from([g,C,M]);g+=f[0]+f[1],f=f.slice(2,f.length-1),f[u-1]=0,f[u]=0,u--}else u++;f[u]=1,y=!y}throw new oe}static decodeCode(r,s,l){Ft.recordPattern(r,l,s);let u=De.MAX_AVG_VARIANCE,f=-1;for(let g=0;g<De.CODE_PATTERNS.length;g++){const y=De.CODE_PATTERNS[g],x=this.patternMatchVariance(s,y,De.MAX_INDIVIDUAL_VARIANCE);x<u&&(u=x,f=g)}if(f>=0)return f;throw new oe}decodeRow(r,s,l){const u=l&&l.get(ze.ASSUME_GS1)===!0,f=De.findStartPattern(s),g=f[2];let y=0;const x=new Uint8Array(20);x[y++]=g;let C;switch(g){case De.CODE_START_A:C=De.CODE_CODE_A;break;case De.CODE_START_B:C=De.CODE_CODE_B;break;case De.CODE_START_C:C=De.CODE_CODE_C;break;default:throw new F}let I=!1,M=!1,L="",H=f[0],J=f[1];const ee=Int32Array.from([0,0,0,0,0,0]);let ae=0,_e=0,Pe=g,Me=0,Ne=!0,Rt=!1,yt=!1;for(;!I;){const na=M;switch(M=!1,ae=_e,_e=De.decodeCode(s,ee,J),x[y++]=_e,_e!==De.CODE_STOP&&(Ne=!0),_e!==De.CODE_STOP&&(Me++,Pe+=Me*_e),H=J,J+=ee.reduce((Fu,pc)=>Fu+pc,0),_e){case De.CODE_START_A:case De.CODE_START_B:case De.CODE_START_C:throw new F}switch(C){case De.CODE_CODE_A:if(_e<64)yt===Rt?L+=String.fromCharCode(32+_e):L+=String.fromCharCode(32+_e+128),yt=!1;else if(_e<96)yt===Rt?L+=String.fromCharCode(_e-64):L+=String.fromCharCode(_e+64),yt=!1;else switch(_e!==De.CODE_STOP&&(Ne=!1),_e){case De.CODE_FNC_1:u&&(L.length===0?L+="]C1":L+="");break;case De.CODE_FNC_2:case De.CODE_FNC_3:break;case De.CODE_FNC_4_A:!Rt&&yt?(Rt=!0,yt=!1):Rt&&yt?(Rt=!1,yt=!1):yt=!0;break;case De.CODE_SHIFT:M=!0,C=De.CODE_CODE_B;break;case De.CODE_CODE_B:C=De.CODE_CODE_B;break;case De.CODE_CODE_C:C=De.CODE_CODE_C;break;case De.CODE_STOP:I=!0;break}break;case De.CODE_CODE_B:if(_e<96)yt===Rt?L+=String.fromCharCode(32+_e):L+=String.fromCharCode(32+_e+128),yt=!1;else switch(_e!==De.CODE_STOP&&(Ne=!1),_e){case De.CODE_FNC_1:u&&(L.length===0?L+="]C1":L+="");break;case De.CODE_FNC_2:case De.CODE_FNC_3:break;case De.CODE_FNC_4_B:!Rt&&yt?(Rt=!0,yt=!1):Rt&&yt?(Rt=!1,yt=!1):yt=!0;break;case De.CODE_SHIFT:M=!0,C=De.CODE_CODE_A;break;case De.CODE_CODE_A:C=De.CODE_CODE_A;break;case De.CODE_CODE_C:C=De.CODE_CODE_C;break;case De.CODE_STOP:I=!0;break}break;case De.CODE_CODE_C:if(_e<100)_e<10&&(L+="0"),L+=_e;else switch(_e!==De.CODE_STOP&&(Ne=!1),_e){case De.CODE_FNC_1:u&&(L.length===0?L+="]C1":L+="");break;case De.CODE_CODE_A:C=De.CODE_CODE_A;break;case De.CODE_CODE_B:C=De.CODE_CODE_B;break;case De.CODE_STOP:I=!0;break}break}na&&(C=C===De.CODE_CODE_A?De.CODE_CODE_B:De.CODE_CODE_A)}const Jn=J-H;if(J=s.getNextUnset(J),!s.isRange(J,Math.min(s.getSize(),J+(J-H)/2),!1))throw new oe;if(Pe-=Me*ae,Pe%103!==ae)throw new Y;const wi=L.length;if(wi===0)throw new oe;wi>0&&Ne&&(C===De.CODE_CODE_C?L=L.substring(0,wi-2):L=L.substring(0,wi-1));const Lr=(f[1]+f[0])/2,dn=H+Jn/2,wr=x.length,hi=new Uint8Array(wr);for(let na=0;na<wr;na++)hi[na]=x[na];const Pa=[new je(Lr,r),new je(dn,r)];return new we(L,hi,0,Pa,ye.CODE_128,new Date().getTime())}}De.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],De.MAX_AVG_VARIANCE=.25,De.MAX_INDIVIDUAL_VARIANCE=.7,De.CODE_SHIFT=98,De.CODE_CODE_C=99,De.CODE_CODE_B=100,De.CODE_CODE_A=101,De.CODE_FNC_1=102,De.CODE_FNC_2=97,De.CODE_FNC_3=96,De.CODE_FNC_4_A=101,De.CODE_FNC_4_B=100,De.CODE_START_A=103,De.CODE_START_B=104,De.CODE_START_C=105,De.CODE_STOP=106;class Jt extends Ft{constructor(r=!1,s=!1){super(),this.usingCheckDigit=r,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,s,l){let u=this.counters;u.fill(0),this.decodeRowResult="";let f=Jt.findAsteriskPattern(s,u),g=s.getNextSet(f[1]),y=s.getSize(),x,C;do{Jt.recordPattern(s,g,u);let ee=Jt.toNarrowWidePattern(u);if(ee<0)throw new oe;x=Jt.patternToChar(ee),this.decodeRowResult+=x,C=g;for(let ae of u)g+=ae;g=s.getNextSet(g)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let I=0;for(let ee of u)I+=ee;let M=g-C-I;if(g!==y&&M*2<I)throw new oe;if(this.usingCheckDigit){let ee=this.decodeRowResult.length-1,ae=0;for(let _e=0;_e<ee;_e++)ae+=Jt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(_e));if(this.decodeRowResult.charAt(ee)!==Jt.ALPHABET_STRING.charAt(ae%43))throw new Y;this.decodeRowResult=this.decodeRowResult.substring(0,ee)}if(this.decodeRowResult.length===0)throw new oe;let L;this.extendedMode?L=Jt.decodeExtended(this.decodeRowResult):L=this.decodeRowResult;let H=(f[1]+f[0])/2,J=C+I/2;return new we(L,null,0,[new je(H,r),new je(J,r)],ye.CODE_39,new Date().getTime())}static findAsteriskPattern(r,s){let l=r.getSize(),u=r.getNextSet(0),f=0,g=u,y=!1,x=s.length;for(let C=u;C<l;C++)if(r.get(C)!==y)s[f]++;else{if(f===x-1){if(this.toNarrowWidePattern(s)===Jt.ASTERISK_ENCODING&&r.isRange(Math.max(0,g-Math.floor((C-g)/2)),g,!1))return[g,C];g+=s[0]+s[1],s.copyWithin(0,2,2+f-1),s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,y=!y}throw new oe}static toNarrowWidePattern(r){let s=r.length,l=0,u;do{let f=2147483647;for(let x of r)x<f&&x>l&&(f=x);l=f,u=0;let g=0,y=0;for(let x=0;x<s;x++){let C=r[x];C>l&&(y|=1<<s-1-x,u++,g+=C)}if(u===3){for(let x=0;x<s&&u>0;x++){let C=r[x];if(C>l&&(u--,C*2>=g))return-1}return y}}while(u>3);return-1}static patternToChar(r){for(let s=0;s<Jt.CHARACTER_ENCODINGS.length;s++)if(Jt.CHARACTER_ENCODINGS[s]===r)return Jt.ALPHABET_STRING.charAt(s);if(r===Jt.ASTERISK_ENCODING)return"*";throw new oe}static decodeExtended(r){let s=r.length,l="";for(let u=0;u<s;u++){let f=r.charAt(u);if(f==="+"||f==="$"||f==="%"||f==="/"){let g=r.charAt(u+1),y="\0";switch(f){case"+":if(g>="A"&&g<="Z")y=String.fromCharCode(g.charCodeAt(0)+32);else throw new F;break;case"$":if(g>="A"&&g<="Z")y=String.fromCharCode(g.charCodeAt(0)-64);else throw new F;break;case"%":if(g>="A"&&g<="E")y=String.fromCharCode(g.charCodeAt(0)-38);else if(g>="F"&&g<="J")y=String.fromCharCode(g.charCodeAt(0)-11);else if(g>="K"&&g<="O")y=String.fromCharCode(g.charCodeAt(0)+16);else if(g>="P"&&g<="T")y=String.fromCharCode(g.charCodeAt(0)+43);else if(g==="U")y="\0";else if(g==="V")y="@";else if(g==="W")y="`";else if(g==="X"||g==="Y"||g==="Z")y="";else throw new F;break;case"/":if(g>="A"&&g<="O")y=String.fromCharCode(g.charCodeAt(0)-32);else if(g==="Z")y=":";else throw new F;break}l+=y,u++}else l+=f}return l}}Jt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Jt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Jt.ASTERISK_ENCODING=148;class ut extends Ft{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,s,l){let u=this.decodeStart(s),f=this.decodeEnd(s),g=new G;ut.decodeMiddle(s,u[1],f[0],g);let y=g.toString(),x=null;l!=null&&(x=l.get(ze.ALLOWED_LENGTHS)),x==null&&(x=ut.DEFAULT_ALLOWED_LENGTHS);let C=y.length,I=!1,M=0;for(let J of x){if(C===J){I=!0;break}J>M&&(M=J)}if(!I&&C>M&&(I=!0),!I)throw new F;const L=[new je(u[1],r),new je(f[0],r)];return new we(y,null,0,L,ye.ITF,new Date().getTime())}static decodeMiddle(r,s,l,u){let f=new Int32Array(10),g=new Int32Array(5),y=new Int32Array(5);for(f.fill(0),g.fill(0),y.fill(0);s<l;){Ft.recordPattern(r,s,f);for(let C=0;C<5;C++){let I=2*C;g[C]=f[I],y[C]=f[I+1]}let x=ut.decodeDigit(g);u.append(x.toString()),x=this.decodeDigit(y),u.append(x.toString()),f.forEach(function(C){s+=C})}}decodeStart(r){let s=ut.skipWhiteSpace(r),l=ut.findGuardPattern(r,s,ut.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(r,l[0]),l}validateQuietZone(r,s){let l=this.narrowLineWidth*10;l=l<s?l:s;for(let u=s-1;l>0&&u>=0&&!r.get(u);u--)l--;if(l!==0)throw new oe}static skipWhiteSpace(r){const s=r.getSize(),l=r.getNextSet(0);if(l===s)throw new oe;return l}decodeEnd(r){r.reverse();try{let s=ut.skipWhiteSpace(r),l;try{l=ut.findGuardPattern(r,s,ut.END_PATTERN_REVERSED[0])}catch(f){f instanceof oe&&(l=ut.findGuardPattern(r,s,ut.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,l[0]);let u=l[0];return l[0]=r.getSize()-l[1],l[1]=r.getSize()-u,l}finally{r.reverse()}}static findGuardPattern(r,s,l){let u=l.length,f=new Int32Array(u),g=r.getSize(),y=!1,x=0,C=s;f.fill(0);for(let I=s;I<g;I++)if(r.get(I)!==y)f[x]++;else{if(x===u-1){if(Ft.patternMatchVariance(f,l,ut.MAX_INDIVIDUAL_VARIANCE)<ut.MAX_AVG_VARIANCE)return[C,I];C+=f[0]+f[1],ie.arraycopy(f,2,f,0,x-1),f[x-1]=0,f[x]=0,x--}else x++;f[x]=1,y=!y}throw new oe}static decodeDigit(r){let s=ut.MAX_AVG_VARIANCE,l=-1,u=ut.PATTERNS.length;for(let f=0;f<u;f++){let g=ut.PATTERNS[f],y=Ft.patternMatchVariance(r,g,ut.MAX_INDIVIDUAL_VARIANCE);y<s?(s=y,l=f):y===s&&(l=-1)}if(l>=0)return l%10;throw new oe}}ut.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ut.MAX_AVG_VARIANCE=.38,ut.MAX_INDIVIDUAL_VARIANCE=.5,ut.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ut.START_PATTERN=Int32Array.from([1,1,1,1]),ut.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class En extends Ft{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let s=!1,l,u=0,f=Int32Array.from([0,0,0]);for(;!s;){f=Int32Array.from([0,0,0]),l=En.findGuardPattern(r,u,!1,this.START_END_PATTERN,f);let g=l[0];u=l[1];let y=g-(u-g);y>=0&&(s=r.isRange(y,g,!1))}return l}static checkChecksum(r){return En.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let l=parseInt(r.charAt(s-1),10);return En.getStandardUPCEANChecksum(r.substring(0,s-1))===l}static getStandardUPCEANChecksum(r){let s=r.length,l=0;for(let u=s-1;u>=0;u-=2){let f=r.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new F;l+=f}l*=3;for(let u=s-2;u>=0;u-=2){let f=r.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new F;l+=f}return(1e3-l)%10}static decodeEnd(r,s){return En.findGuardPattern(r,s,!1,En.START_END_PATTERN,new Int32Array(En.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,s,l,u){return this.findGuardPattern(r,s,l,u,new Int32Array(u.length))}static findGuardPattern(r,s,l,u,f){let g=r.getSize();s=l?r.getNextUnset(s):r.getNextSet(s);let y=0,x=s,C=u.length,I=l;for(let M=s;M<g;M++)if(r.get(M)!==I)f[y]++;else{if(y===C-1){if(Ft.patternMatchVariance(f,u,En.MAX_INDIVIDUAL_VARIANCE)<En.MAX_AVG_VARIANCE)return Int32Array.from([x,M]);x+=f[0]+f[1];let L=f.slice(2,f.length-1);for(let H=0;H<y-1;H++)f[H]=L[H];f[y-1]=0,f[y]=0,y--}else y++;f[y]=1,I=!I}throw new oe}static decodeDigit(r,s,l,u){this.recordPattern(r,l,s);let f=this.MAX_AVG_VARIANCE,g=-1,y=u.length;for(let x=0;x<y;x++){let C=u[x],I=Ft.patternMatchVariance(s,C,En.MAX_INDIVIDUAL_VARIANCE);I<f&&(f=I,g=x)}if(g>=0)return g;throw new oe}}En.MAX_AVG_VARIANCE=.48,En.MAX_INDIVIDUAL_VARIANCE=.7,En.START_END_PATTERN=Int32Array.from([1,1,1]),En.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),En.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),En.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class pi{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,l){let u=this.decodeRowStringBuffer,f=this.decodeMiddle(s,l,u),g=u.toString(),y=pi.parseExtensionString(g),x=[new je((l[0]+l[1])/2,r),new je(f,r)],C=new we(g,null,0,x,ye.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&C.putAllMetadata(y),C}decodeMiddle(r,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=r.getSize(),g=s[1],y=0;for(let C=0;C<5&&g<f;C++){let I=En.decodeDigit(r,u,g,En.L_AND_G_PATTERNS);l+=String.fromCharCode(48+I%10);for(let M of u)g+=M;I>=10&&(y|=1<<4-C),C!==4&&(g=r.getNextSet(g),g=r.getNextUnset(g))}if(l.length!==5)throw new oe;let x=this.determineCheckDigit(y);if(pi.extensionChecksum(l.toString())!==x)throw new oe;return g}static extensionChecksum(r){let s=r.length,l=0;for(let u=s-2;u>=0;u-=2)l+=r.charAt(u).charCodeAt(0)-48;l*=3;for(let u=s-1;u>=0;u-=2)l+=r.charAt(u).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(r){for(let s=0;s<10;s++)if(r===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new oe}static parseExtensionString(r){if(r.length!==5)return null;let s=pi.parseExtension5String(r);return s==null?null:new Map([[et.SUGGESTED_PRICE,s]])}static parseExtension5String(r){let s;switch(r.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let l=parseInt(r.substring(1)),u=(l/100).toString(),f=l%100,g=f<10?"0"+f:f.toString();return s+u+"."+g}}class bs{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,l){let u=this.decodeRowStringBuffer,f=this.decodeMiddle(s,l,u),g=u.toString(),y=bs.parseExtensionString(g),x=[new je((l[0]+l[1])/2,r),new je(f,r)],C=new we(g,null,0,x,ye.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&C.putAllMetadata(y),C}decodeMiddle(r,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=r.getSize(),g=s[1],y=0;for(let x=0;x<2&&g<f;x++){let C=En.decodeDigit(r,u,g,En.L_AND_G_PATTERNS);l+=String.fromCharCode(48+C%10);for(let I of u)g+=I;C>=10&&(y|=1<<1-x),x!==1&&(g=r.getNextSet(g),g=r.getNextUnset(g))}if(l.length!==2)throw new oe;if(parseInt(l.toString())%4!==y)throw new oe;return g}static parseExtensionString(r){return r.length!==2?null:new Map([[et.ISSUE_NUMBER,parseInt(r)]])}}class ri{static decodeRow(r,s,l){let u=En.findGuardPattern(s,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new pi().decodeRow(r,s,u)}catch{return new bs().decodeRow(r,s,u)}}}ri.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class bt extends En{constructor(){super(),this.decodeRowStringBuffer="",bt.L_AND_G_PATTERNS=bt.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let s=bt.L_PATTERNS[r-10],l=new Int32Array(s.length);for(let u=0;u<s.length;u++)l[u]=s[s.length-u-1];bt.L_AND_G_PATTERNS[r]=l}}decodeRow(r,s,l){let u=bt.findStartGuardPattern(s),f=l==null?null:l.get(ze.NEED_RESULT_POINT_CALLBACK);if(f!=null){const Ne=new je((u[0]+u[1])/2,r);f.foundPossibleResultPoint(Ne)}let g=this.decodeMiddle(s,u,this.decodeRowStringBuffer),y=g.rowOffset,x=g.resultString;if(f!=null){const Ne=new je(y,r);f.foundPossibleResultPoint(Ne)}let C=this.decodeEnd(s,y);if(f!=null){const Ne=new je((C[0]+C[1])/2,r);f.foundPossibleResultPoint(Ne)}let I=C[1],M=I+(I-C[0]);if(M>=s.getSize()||!s.isRange(I,M,!1))throw new oe;let L=x.toString();if(L.length<8)throw new F;if(!bt.checkChecksum(L))throw new Y;let H=(u[1]+u[0])/2,J=(C[1]+C[0])/2,ee=this.getBarcodeFormat(),ae=[new je(H,r),new je(J,r)],_e=new we(L,null,0,ae,ee,new Date().getTime()),Pe=0;try{let Ne=ri.decodeRow(r,s,C[1]);_e.putMetadata(et.UPC_EAN_EXTENSION,Ne.getText()),_e.putAllMetadata(Ne.getResultMetadata()),_e.addResultPoints(Ne.getResultPoints()),Pe=Ne.getText().length}catch{}let Me=l==null?null:l.get(ze.ALLOWED_EAN_EXTENSIONS);if(Me!=null){let Ne=!1;for(let Rt in Me)if(Pe.toString()===Rt){Ne=!0;break}if(!Ne)throw new oe}return _e}decodeEnd(r,s){return bt.findGuardPattern(r,s,!1,bt.START_END_PATTERN,new Int32Array(bt.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return bt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let l=parseInt(r.charAt(s-1),10);return bt.getStandardUPCEANChecksum(r.substring(0,s-1))===l}static getStandardUPCEANChecksum(r){let s=r.length,l=0;for(let u=s-1;u>=0;u-=2){let f=r.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new F;l+=f}l*=3;for(let u=s-2;u>=0;u-=2){let f=r.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new F;l+=f}return(1e3-l)%10}}class un extends bt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=r.getSize(),g=s[1],y=0;for(let C=0;C<6&&g<f;C++){let I=bt.decodeDigit(r,u,g,bt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+I%10);for(let M of u)g+=M;I>=10&&(y|=1<<5-C)}l=un.determineFirstDigit(l,y),g=bt.findGuardPattern(r,g,!0,bt.MIDDLE_PATTERN,new Int32Array(bt.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<6&&g<f;C++){let I=bt.decodeDigit(r,u,g,bt.L_PATTERNS);l+=String.fromCharCode(48+I);for(let M of u)g+=M}return{rowOffset:g,resultString:l}}getBarcodeFormat(){return ye.EAN_13}static determineFirstDigit(r,s){for(let l=0;l<10;l++)if(s===this.FIRST_DIGIT_ENCODINGS[l])return r=String.fromCharCode(48+l)+r,r;throw new oe}}un.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ii extends bt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,l){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=r.getSize(),g=s[1];for(let x=0;x<4&&g<f;x++){let C=bt.decodeDigit(r,u,g,bt.L_PATTERNS);l+=String.fromCharCode(48+C);for(let I of u)g+=I}g=bt.findGuardPattern(r,g,!0,bt.MIDDLE_PATTERN,new Int32Array(bt.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<4&&g<f;x++){let C=bt.decodeDigit(r,u,g,bt.L_PATTERNS);l+=String.fromCharCode(48+C);for(let I of u)g+=I}return{rowOffset:g,resultString:l}}getBarcodeFormat(){return ye.EAN_8}}class si extends bt{constructor(){super(...arguments),this.ean13Reader=new un}getBarcodeFormat(){return ye.UPC_A}decode(r,s){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,s,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,s,l))}decodeMiddle(r,s,l){return this.ean13Reader.decodeMiddle(r,s,l)}maybeReturnResult(r){let s=r.getText();if(s.charAt(0)==="0"){let l=new we(s.substring(1),null,null,r.getResultPoints(),ye.UPC_A);return r.getResultMetadata()!=null&&l.putAllMetadata(r.getResultMetadata()),l}else throw new oe}reset(){this.ean13Reader.reset()}}class On extends bt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,s,l){const u=this.decodeMiddleCounters.map(C=>C);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const f=r.getSize();let g=s[1],y=0;for(let C=0;C<6&&g<f;C++){const I=On.decodeDigit(r,u,g,On.L_AND_G_PATTERNS);l+=String.fromCharCode(48+I%10);for(let M of u)g+=M;I>=10&&(y|=1<<5-C)}let x=On.determineNumSysAndCheckDigit(l,y);return{rowOffset:g,resultString:x}}decodeEnd(r,s){return On.findGuardPatternWithoutCounters(r,s,!0,On.MIDDLE_END_PATTERN)}checkChecksum(r){return bt.checkChecksum(On.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,s){for(let l=0;l<=1;l++)for(let u=0;u<10;u++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][u]){let f=String.fromCharCode(48+l),g=String.fromCharCode(48+u);return f+r+g}throw oe.getNotFoundInstance()}getBarcodeFormat(){return ye.UPC_E}static convertUPCEtoUPCA(r){const s=r.slice(1,7).split("").map(f=>f.charCodeAt(0)),l=new G;l.append(r.charAt(0));let u=s[5];switch(u){case 0:case 1:case 2:l.appendChars(s,0,2),l.append(u),l.append("0000"),l.appendChars(s,2,3);break;case 3:l.appendChars(s,0,3),l.append("00000"),l.appendChars(s,3,2);break;case 4:l.appendChars(s,0,4),l.append("00000"),l.append(s[4]);break;default:l.appendChars(s,0,5),l.append("0000"),l.append(u);break}return r.length>=8&&l.append(r.charAt(7)),l.toString()}}On.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),On.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class qs extends Ft{constructor(r){super();let s=r==null?null:r.get(ze.POSSIBLE_FORMATS),l=[];o(s)?(l.push(new un),l.push(new si),l.push(new ii),l.push(new On)):(s.indexOf(ye.EAN_13)>-1&&l.push(new un),s.indexOf(ye.UPC_A)>-1&&l.push(new si),s.indexOf(ye.EAN_8)>-1&&l.push(new ii),s.indexOf(ye.UPC_E)>-1&&l.push(new On)),this.readers=l}decodeRow(r,s,l){for(let u of this.readers)try{const f=u.decodeRow(r,s,l),g=f.getBarcodeFormat()===ye.EAN_13&&f.getText().charAt(0)==="0",y=l==null?null:l.get(ze.POSSIBLE_FORMATS),x=y==null||y.includes(ye.UPC_A);if(g&&x){const C=f.getRawBytes(),I=new we(f.getText().substring(1),C,C?C.length:null,f.getResultPoints(),ye.UPC_A);return I.putAllMetadata(f.getResultMetadata()),I}return f}catch{}throw new oe}reset(){for(let r of this.readers)r.reset()}}class Xn extends Ft{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,s){for(let l=0;l<s.length;l++)if(Ft.patternMatchVariance(r,s[l],Xn.MAX_INDIVIDUAL_VARIANCE)<Xn.MAX_AVG_VARIANCE)return l;throw new oe}static count(r){return rt.sum(new Int32Array(r))}static increment(r,s){let l=0,u=s[0];for(let f=1;f<r.length;f++)s[f]>u&&(u=s[f],l=f);r[l]++}static decrement(r,s){let l=0,u=s[0];for(let f=1;f<r.length;f++)s[f]<u&&(u=s[f],l=f);r[l]--}static isFinderPattern(r){let s=r[0]+r[1],l=s+r[2]+r[3],u=s/l;if(u>=Xn.MIN_FINDER_PATTERN_RATIO&&u<=Xn.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;for(let y of r)y>g&&(g=y),y<f&&(f=y);return g<10*f}return!1}}Xn.MAX_AVG_VARIANCE=.2,Xn.MAX_INDIVIDUAL_VARIANCE=.45,Xn.MIN_FINDER_PATTERN_RATIO=9.5/12,Xn.MAX_FINDER_PATTERN_RATIO=12.5/14;class xr{constructor(r,s){this.value=r,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof xr))return!1;const s=r;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class yi{constructor(r,s,l,u,f){this.value=r,this.startEnd=s,this.value=r,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new je(l,f)),this.resultPoints.push(new je(u,f))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof yi))return!1;const s=r;return this.value===s.value}hashCode(){return this.value}}class jr{constructor(){}static getRSSvalue(r,s,l){let u=0;for(let x of r)u+=x;let f=0,g=0,y=r.length;for(let x=0;x<y-1;x++){let C;for(C=1,g|=1<<x;C<r[x];C++,g&=~(1<<x)){let I=jr.combins(u-C-1,y-x-2);if(l&&g===0&&u-C-(y-x-1)>=y-x-1&&(I-=jr.combins(u-C-(y-x),y-x-2)),y-x-1>1){let M=0;for(let L=u-C-(y-x-2);L>s;L--)M+=jr.combins(u-C-L-1,y-x-3);I-=M*(y-1-x)}else u-C>s&&I--;f+=I}u-=C}return f}static combins(r,s){let l,u;r-s>s?(u=s,l=r-s):(u=r-s,l=s);let f=1,g=1;for(let y=r;y>l;y--)f*=y,g<=u&&(f/=g,g++);for(;g<=u;)f/=g,g++;return f}}class ce{static buildBitArray(r){let s=r.length*2-1;r[r.length-1].getRightChar()==null&&(s-=1);let l=12*s,u=new Le(l),f=0,y=r[0].getRightChar().getValue();for(let x=11;x>=0;--x)(y&1<<x)!=0&&u.set(f),f++;for(let x=1;x<r.length;++x){let C=r[x],I=C.getLeftChar().getValue();for(let M=11;M>=0;--M)(I&1<<M)!=0&&u.set(f),f++;if(C.getRightChar()!=null){let M=C.getRightChar().getValue();for(let L=11;L>=0;--L)(M&1<<L)!=0&&u.set(f),f++}}return u}}class Ge{constructor(r,s){s?this.decodedInformation=null:(this.finished=r,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class mt{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class We extends mt{constructor(r,s){super(r),this.value=s}getValue(){return this.value}isFNC1(){return this.value===We.FNC1}}We.FNC1="$";class Tt extends mt{constructor(r,s,l){super(r),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Nt extends mt{constructor(r,s,l){if(super(r),s<0||s>10||l<0||l>10)throw new F;this.firstDigit=s,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Nt.FNC1}isSecondDigitFNC1(){return this.secondDigit===Nt.FNC1}isAnyFNC1(){return this.firstDigit===Nt.FNC1||this.secondDigit===Nt.FNC1}}Nt.FNC1=10;class Ve{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new oe;let s=r.substring(0,2);for(let f of Ve.TWO_DIGIT_DATA_LENGTH)if(f[0]===s)return f[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(2,f[2],r):Ve.processFixedAI(2,f[1],r);if(r.length<3)throw new oe;let l=r.substring(0,3);for(let f of Ve.THREE_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(3,f[2],r):Ve.processFixedAI(3,f[1],r);for(let f of Ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(4,f[2],r):Ve.processFixedAI(4,f[1],r);if(r.length<4)throw new oe;let u=r.substring(0,4);for(let f of Ve.FOUR_DIGIT_DATA_LENGTH)if(f[0]===u)return f[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(4,f[2],r):Ve.processFixedAI(4,f[1],r);throw new oe}static processFixedAI(r,s,l){if(l.length<r)throw new oe;let u=l.substring(0,r);if(l.length<r+s)throw new oe;let f=l.substring(r,r+s),g=l.substring(r+s),y="("+u+")"+f,x=Ve.parseFieldsInGeneralPurpose(g);return x==null?y:y+x}static processVariableAI(r,s,l){let u=l.substring(0,r),f;l.length<r+s?f=l.length:f=r+s;let g=l.substring(r,f),y=l.substring(f),x="("+u+")"+g,C=Ve.parseFieldsInGeneralPurpose(y);return C==null?x:x+C}}Ve.VARIABLE_LENGTH=[],Ve.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ve.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ve.VARIABLE_LENGTH,20],["22",Ve.VARIABLE_LENGTH,29],["30",Ve.VARIABLE_LENGTH,8],["37",Ve.VARIABLE_LENGTH,8],["90",Ve.VARIABLE_LENGTH,30],["91",Ve.VARIABLE_LENGTH,30],["92",Ve.VARIABLE_LENGTH,30],["93",Ve.VARIABLE_LENGTH,30],["94",Ve.VARIABLE_LENGTH,30],["95",Ve.VARIABLE_LENGTH,30],["96",Ve.VARIABLE_LENGTH,30],["97",Ve.VARIABLE_LENGTH,3],["98",Ve.VARIABLE_LENGTH,30],["99",Ve.VARIABLE_LENGTH,30]],Ve.THREE_DIGIT_DATA_LENGTH=[["240",Ve.VARIABLE_LENGTH,30],["241",Ve.VARIABLE_LENGTH,30],["242",Ve.VARIABLE_LENGTH,6],["250",Ve.VARIABLE_LENGTH,30],["251",Ve.VARIABLE_LENGTH,30],["253",Ve.VARIABLE_LENGTH,17],["254",Ve.VARIABLE_LENGTH,20],["400",Ve.VARIABLE_LENGTH,30],["401",Ve.VARIABLE_LENGTH,30],["402",17],["403",Ve.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ve.VARIABLE_LENGTH,20],["421",Ve.VARIABLE_LENGTH,15],["422",3],["423",Ve.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ve.VARIABLE_LENGTH,15],["391",Ve.VARIABLE_LENGTH,18],["392",Ve.VARIABLE_LENGTH,15],["393",Ve.VARIABLE_LENGTH,18],["703",Ve.VARIABLE_LENGTH,30]],Ve.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ve.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ve.VARIABLE_LENGTH,20],["8003",Ve.VARIABLE_LENGTH,30],["8004",Ve.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ve.VARIABLE_LENGTH,30],["8008",Ve.VARIABLE_LENGTH,12],["8018",18],["8020",Ve.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ve.VARIABLE_LENGTH,70],["8200",Ve.VARIABLE_LENGTH,70]];class Vn{constructor(r){this.buffer=new G,this.information=r}decodeAllCodes(r,s){let l=s,u=null;do{let f=this.decodeGeneralPurposeField(l,u),g=Ve.parseFieldsInGeneralPurpose(f.getNewString());if(g!=null&&r.append(g),f.isRemaining()?u=""+f.getRemainingValue():u=null,l===f.getNewPosition())break;l=f.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let s=r;s<r+3;++s)if(this.information.get(s))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let f=this.extractNumericValueFromBitArray(r,4);return f===0?new Nt(this.information.getSize(),Nt.FNC1,Nt.FNC1):new Nt(this.information.getSize(),f-1,Nt.FNC1)}let s=this.extractNumericValueFromBitArray(r,7),l=(s-8)/11,u=(s-8)%11;return new Nt(r+7,l,u)}extractNumericValueFromBitArray(r,s){return Vn.extractNumericValueFromBitArray(this.information,r,s)}static extractNumericValueFromBitArray(r,s,l){let u=0;for(let f=0;f<l;++f)r.get(s+f)&&(u|=1<<l-f-1);return u}decodeGeneralPurposeField(r,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(r);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new Tt(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new Tt(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,s;do{let l=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),r=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),r=s.isFinished()):(s=this.parseNumericBlock(),r=s.isFinished()),!(l!==this.current.getPosition())&&!r)break}while(!r);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let s;return r.isSecondDigitFNC1()?s=new Tt(this.current.getPosition(),this.buffer.toString()):s=new Tt(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new Ge(!0,s)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let s=new Tt(this.current.getPosition(),this.buffer.toString());return new Ge(!0,s)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ge(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Tt(this.current.getPosition(),this.buffer.toString());return new Ge(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ge(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Tt(this.current.getPosition(),this.buffer.toString());return new Ge(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ge(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<116)return!0;if(r+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(r,8);return u>=232&&u<253}decodeIsoIec646(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new We(r+5,We.FNC1);if(s>=5&&s<15)return new We(r+5,"0"+(s-5));let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<90)return new We(r+7,""+(l+1));if(l>=90&&l<116)return new We(r+7,""+(l+7));let u=this.extractNumericValueFromBitArray(r,8),f;switch(u){case 232:f="!";break;case 233:f='"';break;case 234:f="%";break;case 235:f="&";break;case 236:f="'";break;case 237:f="(";break;case 238:f=")";break;case 239:f="*";break;case 240:f="+";break;case 241:f=",";break;case 242:f="-";break;case 243:f=".";break;case 244:f="/";break;case 245:f=":";break;case 246:f=";";break;case 247:f="<";break;case 248:f="=";break;case 249:f=">";break;case 250:f="?";break;case 251:f="_";break;case 252:f=" ";break;default:throw new F}return new We(r+8,f)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,6);return l>=16&&l<63}decodeAlphanumeric(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new We(r+5,We.FNC1);if(s>=5&&s<15)return new We(r+5,"0"+(s-5));let l=this.extractNumericValueFromBitArray(r,6);if(l>=32&&l<58)return new We(r+6,""+(l+33));let u;switch(l){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new ur("Decoding invalid alphanumeric value: "+l)}return new We(r+6,u)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<5&&s+r<this.information.getSize();++s)if(s===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+s))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let s=r;s<r+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<4&&s+r<this.information.getSize();++s)if(this.information.get(r+s))return!1;return!0}}class tn{constructor(r){this.information=r,this.generalDecoder=new Vn(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ot extends tn{constructor(r){super(r)}encodeCompressedGtin(r,s){r.append("(01)");let l=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,s,l)}encodeCompressedGtinWithoutAI(r,s,l){for(let u=0;u<4;++u){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*u,10);f/100===0&&r.append("0"),f/10===0&&r.append("0"),r.append(f)}Ot.appendCheckDigit(r,l)}static appendCheckDigit(r,s){let l=0;for(let u=0;u<13;u++){let f=r.charAt(u+s).charCodeAt(0)-48;l+=(u&1)===0?3*f:f}l=10-l%10,l===10&&(l=0),r.append(l)}}Ot.GTIN_SIZE=40;class Yn extends Ot{constructor(r){super(r)}parseInformation(){let r=new G;r.append("(01)");let s=r.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(Yn.HEADER_SIZE,4);return r.append(l),this.encodeCompressedGtinWithoutAI(r,Yn.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(r,Yn.HEADER_SIZE+44)}}Yn.HEADER_SIZE=4;class ds extends tn{constructor(r){super(r)}parseInformation(){let r=new G;return this.getGeneralDecoder().decodeAllCodes(r,ds.HEADER_SIZE)}}ds.HEADER_SIZE=5;class Ia extends Ot{constructor(r){super(r)}encodeCompressedWeight(r,s,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s,l);this.addWeightCode(r,u);let f=this.checkWeight(u),g=1e5;for(let y=0;y<5;++y)f/g===0&&r.append("0"),g/=10;r.append(f)}}class ai extends Ia{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=ai.HEADER_SIZE+Ia.GTIN_SIZE+ai.WEIGHT_SIZE)throw new oe;let r=new G;return this.encodeCompressedGtin(r,ai.HEADER_SIZE),this.encodeCompressedWeight(r,ai.HEADER_SIZE+Ia.GTIN_SIZE,ai.WEIGHT_SIZE),r.toString()}}ai.HEADER_SIZE=5,ai.WEIGHT_SIZE=15;class hl extends ai{constructor(r){super(r)}addWeightCode(r,s){r.append("(3103)")}checkWeight(r){return r}}class Xi extends ai{constructor(r){super(r)}addWeightCode(r,s){s<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class Nr extends Ot{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Nr.HEADER_SIZE+Ot.GTIN_SIZE)throw new oe;let r=new G;this.encodeCompressedGtin(r,Nr.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Nr.HEADER_SIZE+Ot.GTIN_SIZE,Nr.LAST_DIGIT_SIZE);r.append("(392"),r.append(s),r.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(Nr.HEADER_SIZE+Ot.GTIN_SIZE+Nr.LAST_DIGIT_SIZE,null);return r.append(l.getNewString()),r.toString()}}Nr.HEADER_SIZE=8,Nr.LAST_DIGIT_SIZE=2;class Rn extends Ot{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Rn.HEADER_SIZE+Ot.GTIN_SIZE)throw new oe;let r=new G;this.encodeCompressedGtin(r,Rn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Rn.HEADER_SIZE+Ot.GTIN_SIZE,Rn.LAST_DIGIT_SIZE);r.append("(393"),r.append(s),r.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(Rn.HEADER_SIZE+Ot.GTIN_SIZE+Rn.LAST_DIGIT_SIZE,Rn.FIRST_THREE_DIGITS_SIZE);l/100==0&&r.append("0"),l/10==0&&r.append("0"),r.append(l);let u=this.getGeneralDecoder().decodeGeneralPurposeField(Rn.HEADER_SIZE+Ot.GTIN_SIZE+Rn.LAST_DIGIT_SIZE+Rn.FIRST_THREE_DIGITS_SIZE,null);return r.append(u.getNewString()),r.toString()}}Rn.HEADER_SIZE=8,Rn.LAST_DIGIT_SIZE=2,Rn.FIRST_THREE_DIGITS_SIZE=10;class Lt extends Ia{constructor(r,s,l){super(r),this.dateCode=l,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=Lt.HEADER_SIZE+Lt.GTIN_SIZE+Lt.WEIGHT_SIZE+Lt.DATE_SIZE)throw new oe;let r=new G;return this.encodeCompressedGtin(r,Lt.HEADER_SIZE),this.encodeCompressedWeight(r,Lt.HEADER_SIZE+Lt.GTIN_SIZE,Lt.WEIGHT_SIZE),this.encodeCompressedDate(r,Lt.HEADER_SIZE+Lt.GTIN_SIZE+Lt.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,s){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(s,Lt.DATE_SIZE);if(l==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let u=l%32;l/=32;let f=l%12+1;l/=12;let g=l;g/10==0&&r.append("0"),r.append(g),f/10==0&&r.append("0"),r.append(f),u/10==0&&r.append("0"),r.append(u)}addWeightCode(r,s){r.append("("),r.append(this.firstAIdigits),r.append(s/1e5),r.append(")")}checkWeight(r){return r%1e5}}Lt.HEADER_SIZE=8,Lt.WEIGHT_SIZE=20,Lt.DATE_SIZE=16;function Hr(D){try{if(D.get(1))return new Yn(D);if(!D.get(2))return new ds(D);switch(Vn.extractNumericValueFromBitArray(D,1,4)){case 4:return new hl(D);case 5:return new Xi(D)}switch(Vn.extractNumericValueFromBitArray(D,1,5)){case 12:return new Nr(D);case 13:return new Rn(D)}switch(Vn.extractNumericValueFromBitArray(D,1,7)){case 56:return new Lt(D,"310","11");case 57:return new Lt(D,"320","11");case 58:return new Lt(D,"310","13");case 59:return new Lt(D,"320","13");case 60:return new Lt(D,"310","15");case 61:return new Lt(D,"320","15");case 62:return new Lt(D,"310","17");case 63:return new Lt(D,"320","17")}}catch(r){throw console.log(r),new ur("unknown decoder: "+D)}}class Ar{constructor(r,s,l,u){this.leftchar=r,this.rightchar=s,this.finderpattern=l,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,s){return r instanceof Ar?Ar.equalsOrNull(r.leftchar,s.leftchar)&&Ar.equalsOrNull(r.rightchar,s.rightchar)&&Ar.equalsOrNull(r.finderpattern,s.finderpattern):!1}static equalsOrNull(r,s){return r===null?s===null:Ar.equals(r,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Un{constructor(r,s,l){this.pairs=r,this.rowNumber=s,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,s){return r instanceof Un?this.checkEqualitity(r,s)&&r.wasReversed===s.wasReversed:!1}checkEqualitity(r,s){if(!r||!s)return;let l;return r.forEach((u,f)=>{s.forEach(g=>{u.getLeftChar().getValue()===g.getLeftChar().getValue()&&u.getRightChar().getValue()===g.getRightChar().getValue()&&u.getFinderPatter().getValue()===g.getFinderPatter().getValue()&&(l=!0)})}),l}}class Se extends Xn{constructor(r){super(...arguments),this.pairs=new Array(Se.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,s,l){this.pairs.length=0,this.startFromEven=!1;try{return Se.constructResult(this.decodeRow2pairs(r,s))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,Se.constructResult(this.decodeRow2pairs(r,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,s){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,r))}catch(f){if(f instanceof oe){if(!this.pairs.length)throw new oe;l=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(r,!1),u){let f=this.checkRowsBoolean(!1);if(f!=null||(f=this.checkRowsBoolean(!0),f!=null))return f}throw new oe}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return r&&(this.rows=this.rows.reverse()),s}checkRows(r,s){for(let l=s;l<this.rows.length;l++){let u=this.rows[l];this.pairs.length=0;for(let g of r)this.pairs.push(g.getPairs());if(this.pairs.push(u.getPairs()),!Se.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let f=new Array(r);f.push(u);try{return this.checkRows(f,l+1)}catch(g){this.verbose&&console.log(g)}}throw new oe}static isValidSequence(r){for(let s of Se.FINDER_PATTERN_SEQUENCES){if(r.length>s.length)continue;let l=!0;for(let u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!=s[u]){l=!1;break}if(l)return!0}return!1}storeRow(r,s){let l=0,u=!1,f=!1;for(;l<this.rows.length;){let g=this.rows[l];if(g.getRowNumber()>r){f=g.isEquivalent(this.pairs);break}u=g.isEquivalent(this.pairs),l++}f||u||Se.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new Un(this.pairs,r,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,s){for(let l of s)if(l.getPairs().length!==r.length){for(let u of l.getPairs())for(let f of r)if(Ar.equals(u,f))break}}static isPartialRow(r,s){for(let l of s){let u=!0;for(let f of r){let g=!1;for(let y of l.getPairs())if(f.equals(y)){g=!0;break}if(!g){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(r){let s=ce.buildBitArray(r),u=Hr(s).parseInformation(),f=r[0].getFinderPattern().getResultPoints(),g=r[r.length-1].getFinderPattern().getResultPoints(),y=[f[0],f[1],g[0],g[1]];return new we(u,null,null,y,ye.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),s=r.getLeftChar(),l=r.getRightChar();if(l==null)return!1;let u=l.getChecksumPortion(),f=2;for(let y=1;y<this.pairs.size();++y){let x=this.pairs.get(y);u+=x.getLeftChar().getChecksumPortion(),f++;let C=x.getRightChar();C!=null&&(u+=C.getChecksumPortion(),f++)}return u%=211,211*(f-4)+u==s.getValue()}static getNextSecondBar(r,s){let l;return r.get(s)?(l=r.getNextUnset(s),l=r.getNextSet(l)):(l=r.getNextSet(s),l=r.getNextUnset(l)),l}retrieveNextPair(r,s,l){let u=s.length%2==0;this.startFromEven&&(u=!u);let f,g=!0,y=-1;do this.findNextPair(r,s,y),f=this.parseFoundFinderPattern(r,l,u),f==null?y=Se.getNextSecondBar(r,this.startEnd[0]):g=!1;while(g);let x=this.decodeDataCharacter(r,f,u,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new oe;let C;try{C=this.decodeDataCharacter(r,f,u,!1)}catch(I){C=null,this.verbose&&console.log(I)}return new Ar(x,C,f,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,s,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=r.getSize(),g;l>=0?g=l:this.isEmptyPair(s)?g=0:g=s[s.length-1].getFinderPattern().getStartEnd()[1];let y=s.length%2!=0;this.startFromEven&&(y=!y);let x=!1;for(;g<f&&(x=!r.get(g),!!x);)g++;let C=0,I=g;for(let M=g;M<f;M++)if(r.get(M)!=x)u[C]++;else{if(C==3){if(y&&Se.reverseCounters(u),Se.isFinderPattern(u)){this.startEnd[0]=I,this.startEnd[1]=M;return}y&&Se.reverseCounters(u),I+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,C--}else C++;u[C]=1,x=!x}throw new oe}static reverseCounters(r){let s=r.length;for(let l=0;l<s/2;++l){let u=r[l];r[l]=r[s-l-1],r[s-l-1]=u}}parseFoundFinderPattern(r,s,l){let u,f,g;if(l){let C=this.startEnd[0]-1;for(;C>=0&&!r.get(C);)C--;C++,u=this.startEnd[0]-C,f=C,g=this.startEnd[1]}else f=this.startEnd[0],g=r.getNextUnset(this.startEnd[1]+1),u=g-this.startEnd[1];let y=this.getDecodeFinderCounters();ie.arraycopy(y,0,y,1,y.length-1),y[0]=u;let x;try{x=this.parseFinderValue(y,Se.FINDER_PATTERNS)}catch{return null}return new yi(x,[f,g],f,g,s)}decodeDataCharacter(r,s,l,u){let f=this.getDataCharacterCounters();for(let dn=0;dn<f.length;dn++)f[dn]=0;if(u)Se.recordPatternInReverse(r,s.getStartEnd()[0],f);else{Se.recordPattern(r,s.getStartEnd()[1],f);for(let dn=0,wr=f.length-1;dn<wr;dn++,wr--){let hi=f[dn];f[dn]=f[wr],f[wr]=hi}}let g=17,y=rt.sum(new Int32Array(f))/g,x=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(y-x)/x>.3)throw new oe;let C=this.getOddCounts(),I=this.getEvenCounts(),M=this.getOddRoundingErrors(),L=this.getEvenRoundingErrors();for(let dn=0;dn<f.length;dn++){let wr=1*f[dn]/y,hi=wr+.5;if(hi<1){if(wr<.3)throw new oe;hi=1}else if(hi>8){if(wr>8.7)throw new oe;hi=8}let Pa=dn/2;(dn&1)==0?(C[Pa]=hi,M[Pa]=wr-hi):(I[Pa]=hi,L[Pa]=wr-hi)}this.adjustOddEvenCounts(g);let H=4*s.getValue()+(l?0:2)+(u?0:1)-1,J=0,ee=0;for(let dn=C.length-1;dn>=0;dn--){if(Se.isNotA1left(s,l,u)){let wr=Se.WEIGHTS[H][2*dn];ee+=C[dn]*wr}J+=C[dn]}let ae=0;for(let dn=I.length-1;dn>=0;dn--)if(Se.isNotA1left(s,l,u)){let wr=Se.WEIGHTS[H][2*dn+1];ae+=I[dn]*wr}let _e=ee+ae;if((J&1)!=0||J>13||J<4)throw new oe;let Pe=(13-J)/2,Me=Se.SYMBOL_WIDEST[Pe],Ne=9-Me,Rt=jr.getRSSvalue(C,Me,!0),yt=jr.getRSSvalue(I,Ne,!1),Jn=Se.EVEN_TOTAL_SUBSET[Pe],wi=Se.GSUM[Pe],Lr=Rt*Jn+yt+wi;return new xr(Lr,_e)}static isNotA1left(r,s,l){return!(r.getValue()==0&&s&&l)}adjustOddEvenCounts(r){let s=rt.sum(new Int32Array(this.getOddCounts())),l=rt.sum(new Int32Array(this.getEvenCounts())),u=!1,f=!1;s>13?f=!0:s<4&&(u=!0);let g=!1,y=!1;l>13?y=!0:l<4&&(g=!0);let x=s+l-r,C=(s&1)==1,I=(l&1)==0;if(x==1)if(C){if(I)throw new oe;f=!0}else{if(!I)throw new oe;y=!0}else if(x==-1)if(C){if(I)throw new oe;u=!0}else{if(!I)throw new oe;g=!0}else if(x==0){if(C){if(!I)throw new oe;s<l?(u=!0,y=!0):(f=!0,g=!0)}else if(I)throw new oe}else throw new oe;if(u){if(f)throw new oe;Se.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Se.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(y)throw new oe;Se.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&Se.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Se.SYMBOL_WIDEST=[7,5,4,3,1],Se.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Se.GSUM=[0,348,1388,2948,3988],Se.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Se.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Se.FINDER_PAT_A=0,Se.FINDER_PAT_B=1,Se.FINDER_PAT_C=2,Se.FINDER_PAT_D=3,Se.FINDER_PAT_E=4,Se.FINDER_PAT_F=5,Se.FINDER_PATTERN_SEQUENCES=[[Se.FINDER_PAT_A,Se.FINDER_PAT_A],[Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B],[Se.FINDER_PAT_A,Se.FINDER_PAT_C,Se.FINDER_PAT_B,Se.FINDER_PAT_D],[Se.FINDER_PAT_A,Se.FINDER_PAT_E,Se.FINDER_PAT_B,Se.FINDER_PAT_D,Se.FINDER_PAT_C],[Se.FINDER_PAT_A,Se.FINDER_PAT_E,Se.FINDER_PAT_B,Se.FINDER_PAT_D,Se.FINDER_PAT_D,Se.FINDER_PAT_F],[Se.FINDER_PAT_A,Se.FINDER_PAT_E,Se.FINDER_PAT_B,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_F,Se.FINDER_PAT_F],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_D],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_E],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_F,Se.FINDER_PAT_F],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_E,Se.FINDER_PAT_F,Se.FINDER_PAT_F]],Se.MAX_PAIRS=11;class Io extends xr{constructor(r,s,l){super(r,s),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class nn extends Xn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,s,l){const u=this.decodePair(s,!1,r,l);nn.addOrTally(this.possibleLeftPairs,u),s.reverse();let f=this.decodePair(s,!0,r,l);nn.addOrTally(this.possibleRightPairs,f),s.reverse();for(let g of this.possibleLeftPairs)if(g.getCount()>1){for(let y of this.possibleRightPairs)if(y.getCount()>1&&nn.checkChecksum(g,y))return nn.constructResult(g,y)}throw new oe}static addOrTally(r,s){if(s==null)return;let l=!1;for(let u of r)if(u.getValue()===s.getValue()){u.incrementCount(),l=!0;break}l||r.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,s){let l=4537077*r.getValue()+s.getValue(),u=new String(l).toString(),f=new G;for(let C=13-u.length;C>0;C--)f.append("0");f.append(u);let g=0;for(let C=0;C<13;C++){let I=f.charAt(C).charCodeAt(0)-48;g+=(C&1)===0?3*I:I}g=10-g%10,g===10&&(g=0),f.append(g.toString());let y=r.getFinderPattern().getResultPoints(),x=s.getFinderPattern().getResultPoints();return new we(f.toString(),null,0,[y[0],y[1],x[0],x[1]],ye.RSS_14,new Date().getTime())}static checkChecksum(r,s){let l=(r.getChecksumPortion()+16*s.getChecksumPortion())%79,u=9*r.getFinderPattern().getValue()+s.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,l===u}decodePair(r,s,l,u){try{let f=this.findFinderPattern(r,s),g=this.parseFoundFinderPattern(r,l,s,f),y=u==null?null:u.get(ze.NEED_RESULT_POINT_CALLBACK);if(y!=null){let I=(f[0]+f[1])/2;s&&(I=r.getSize()-1-I),y.foundPossibleResultPoint(new je(I,l))}let x=this.decodeDataCharacter(r,g,!0),C=this.decodeDataCharacter(r,g,!1);return new Io(1597*x.getValue()+C.getValue(),x.getChecksumPortion()+4*C.getChecksumPortion(),g)}catch{return null}}decodeDataCharacter(r,s,l){let u=this.getDataCharacterCounters();for(let ae=0;ae<u.length;ae++)u[ae]=0;if(l)Ft.recordPatternInReverse(r,s.getStartEnd()[0],u);else{Ft.recordPattern(r,s.getStartEnd()[1]+1,u);for(let ae=0,_e=u.length-1;ae<_e;ae++,_e--){let Pe=u[ae];u[ae]=u[_e],u[_e]=Pe}}let f=l?16:15,g=rt.sum(new Int32Array(u))/f,y=this.getOddCounts(),x=this.getEvenCounts(),C=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let ae=0;ae<u.length;ae++){let _e=u[ae]/g,Pe=Math.floor(_e+.5);Pe<1?Pe=1:Pe>8&&(Pe=8);let Me=Math.floor(ae/2);(ae&1)===0?(y[Me]=Pe,C[Me]=_e-Pe):(x[Me]=Pe,I[Me]=_e-Pe)}this.adjustOddEvenCounts(l,f);let M=0,L=0;for(let ae=y.length-1;ae>=0;ae--)L*=9,L+=y[ae],M+=y[ae];let H=0,J=0;for(let ae=x.length-1;ae>=0;ae--)H*=9,H+=x[ae],J+=x[ae];let ee=L+3*H;if(l){if((M&1)!==0||M>12||M<4)throw new oe;let ae=(12-M)/2,_e=nn.OUTSIDE_ODD_WIDEST[ae],Pe=9-_e,Me=jr.getRSSvalue(y,_e,!1),Ne=jr.getRSSvalue(x,Pe,!0),Rt=nn.OUTSIDE_EVEN_TOTAL_SUBSET[ae],yt=nn.OUTSIDE_GSUM[ae];return new xr(Me*Rt+Ne+yt,ee)}else{if((J&1)!==0||J>10||J<4)throw new oe;let ae=(10-J)/2,_e=nn.INSIDE_ODD_WIDEST[ae],Pe=9-_e,Me=jr.getRSSvalue(y,_e,!0),Ne=jr.getRSSvalue(x,Pe,!1),Rt=nn.INSIDE_ODD_TOTAL_SUBSET[ae],yt=nn.INSIDE_GSUM[ae];return new xr(Ne*Rt+Me+yt,ee)}}findFinderPattern(r,s){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=r.getSize(),f=!1,g=0;for(;g<u&&(f=!r.get(g),s!==f);)g++;let y=0,x=g;for(let C=g;C<u;C++)if(r.get(C)!==f)l[y]++;else{if(y===3){if(Xn.isFinderPattern(l))return[x,C];x+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,y--}else y++;l[y]=1,f=!f}throw new oe}parseFoundFinderPattern(r,s,l,u){let f=r.get(u[0]),g=u[0]-1;for(;g>=0&&f!==r.get(g);)g--;g++;const y=u[0]-g,x=this.getDecodeFinderCounters(),C=new Int32Array(x.length);ie.arraycopy(x,0,C,1,x.length-1),C[0]=y;const I=this.parseFinderValue(C,nn.FINDER_PATTERNS);let M=g,L=u[1];return l&&(M=r.getSize()-1-M,L=r.getSize()-1-L),new yi(I,[g,u[1]],M,L,s)}adjustOddEvenCounts(r,s){let l=rt.sum(new Int32Array(this.getOddCounts())),u=rt.sum(new Int32Array(this.getEvenCounts())),f=!1,g=!1,y=!1,x=!1;r?(l>12?g=!0:l<4&&(f=!0),u>12?x=!0:u<4&&(y=!0)):(l>11?g=!0:l<5&&(f=!0),u>10?x=!0:u<4&&(y=!0));let C=l+u-s,I=(l&1)===(r?1:0),M=(u&1)===1;if(C===1)if(I){if(M)throw new oe;g=!0}else{if(!M)throw new oe;x=!0}else if(C===-1)if(I){if(M)throw new oe;f=!0}else{if(!M)throw new oe;y=!0}else if(C===0){if(I){if(!M)throw new oe;l<u?(f=!0,x=!0):(g=!0,y=!0)}else if(M)throw new oe}else throw new oe;if(f){if(g)throw new oe;Xn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&Xn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(x)throw new oe;Xn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&Xn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}nn.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],nn.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],nn.OUTSIDE_GSUM=[0,161,961,2015,2715],nn.INSIDE_GSUM=[0,336,1036,1516],nn.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],nn.INSIDE_ODD_WIDEST=[2,4,6,8],nn.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Or extends Ft{constructor(r,s){super(),this.readers=[],this.verbose=s===!0;const l=r?r.get(ze.POSSIBLE_FORMATS):null,u=r&&r.get(ze.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(ye.EAN_13)||l.includes(ye.UPC_A)||l.includes(ye.EAN_8)||l.includes(ye.UPC_E))&&this.readers.push(new qs(r)),l.includes(ye.CODE_39)&&this.readers.push(new Jt(u)),l.includes(ye.CODE_128)&&this.readers.push(new De),l.includes(ye.ITF)&&this.readers.push(new ut),l.includes(ye.RSS_14)&&this.readers.push(new nn),l.includes(ye.RSS_EXPANDED)&&this.readers.push(new Se(this.verbose))):(this.readers.push(new qs(r)),this.readers.push(new Jt),this.readers.push(new qs(r)),this.readers.push(new De),this.readers.push(new ut),this.readers.push(new nn),this.readers.push(new Se(this.verbose)))}decodeRow(r,s,l){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(r,s,l)}catch{}throw new oe}reset(){this.readers.forEach(r=>r.reset())}}class Ro extends de{constructor(r=500,s){super(new Or(s),r,s)}}class zt{constructor(r,s,l){this.ecCodewords=r,this.ecBlocks=[s],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Pt{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class It{constructor(r,s,l,u,f,g){this.versionNumber=r,this.symbolSizeRows=s,this.symbolSizeColumns=l,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=f,this.ecBlocks=g;let y=0;const x=g.getECCodewords(),C=g.getECBlocks();for(let I of C)y+=I.getCount()*(I.getDataCodewords()+x);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,s){if((r&1)!==0||(s&1)!==0)throw new F;for(let l of It.VERSIONS)if(l.symbolSizeRows===r&&l.symbolSizeColumns===s)return l;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new It(1,10,10,8,8,new zt(5,new Pt(1,3))),new It(2,12,12,10,10,new zt(7,new Pt(1,5))),new It(3,14,14,12,12,new zt(10,new Pt(1,8))),new It(4,16,16,14,14,new zt(12,new Pt(1,12))),new It(5,18,18,16,16,new zt(14,new Pt(1,18))),new It(6,20,20,18,18,new zt(18,new Pt(1,22))),new It(7,22,22,20,20,new zt(20,new Pt(1,30))),new It(8,24,24,22,22,new zt(24,new Pt(1,36))),new It(9,26,26,24,24,new zt(28,new Pt(1,44))),new It(10,32,32,14,14,new zt(36,new Pt(1,62))),new It(11,36,36,16,16,new zt(42,new Pt(1,86))),new It(12,40,40,18,18,new zt(48,new Pt(1,114))),new It(13,44,44,20,20,new zt(56,new Pt(1,144))),new It(14,48,48,22,22,new zt(68,new Pt(1,174))),new It(15,52,52,24,24,new zt(42,new Pt(2,102))),new It(16,64,64,14,14,new zt(56,new Pt(2,140))),new It(17,72,72,16,16,new zt(36,new Pt(4,92))),new It(18,80,80,18,18,new zt(48,new Pt(4,114))),new It(19,88,88,20,20,new zt(56,new Pt(4,144))),new It(20,96,96,22,22,new zt(68,new Pt(4,174))),new It(21,104,104,24,24,new zt(56,new Pt(6,136))),new It(22,120,120,18,18,new zt(68,new Pt(6,175))),new It(23,132,132,20,20,new zt(62,new Pt(8,163))),new It(24,144,144,22,22,new zt(62,new Pt(8,156),new Pt(2,155))),new It(25,8,18,6,16,new zt(7,new Pt(1,5))),new It(26,8,32,6,14,new zt(11,new Pt(1,10))),new It(27,12,26,10,24,new zt(14,new Pt(1,16))),new It(28,12,36,10,16,new zt(18,new Pt(1,22))),new It(29,16,36,14,16,new zt(24,new Pt(1,32))),new It(30,16,48,14,22,new zt(28,new Pt(1,49)))]}}It.VERSIONS=It.buildVersions();class vs{constructor(r){const s=r.getHeight();if(s<8||s>144||(s&1)!==0)throw new F;this.version=vs.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new Qe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const s=r.getHeight(),l=r.getWidth();return It.getVersionForDimensions(s,l)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let s=0,l=4,u=0;const f=this.mappingBitMatrix.getHeight(),g=this.mappingBitMatrix.getWidth();let y=!1,x=!1,C=!1,I=!1;do if(l===f&&u===0&&!y)r[s++]=this.readCorner1(f,g)&255,l-=2,u+=2,y=!0;else if(l===f-2&&u===0&&(g&3)!==0&&!x)r[s++]=this.readCorner2(f,g)&255,l-=2,u+=2,x=!0;else if(l===f+4&&u===2&&(g&7)===0&&!C)r[s++]=this.readCorner3(f,g)&255,l-=2,u+=2,C=!0;else if(l===f-2&&u===0&&(g&7)===4&&!I)r[s++]=this.readCorner4(f,g)&255,l-=2,u+=2,I=!0;else{do l<f&&u>=0&&!this.readMappingMatrix.get(u,l)&&(r[s++]=this.readUtah(l,u,f,g)&255),l-=2,u+=2;while(l>=0&&u<g);l+=1,u+=3;do l>=0&&u<g&&!this.readMappingMatrix.get(u,l)&&(r[s++]=this.readUtah(l,u,f,g)&255),l+=2,u-=2;while(l<f&&u>=0);l+=3,u+=1}while(l<f||u<g);if(s!==this.version.getTotalCodewords())throw new F;return r}readModule(r,s,l,u){return r<0&&(r+=l,s+=4-(l+4&7)),s<0&&(s+=u,r+=4-(u+4&7)),this.readMappingMatrix.set(s,r),this.mappingBitMatrix.get(s,r)}readUtah(r,s,l,u){let f=0;return this.readModule(r-2,s-2,l,u)&&(f|=1),f<<=1,this.readModule(r-2,s-1,l,u)&&(f|=1),f<<=1,this.readModule(r-1,s-2,l,u)&&(f|=1),f<<=1,this.readModule(r-1,s-1,l,u)&&(f|=1),f<<=1,this.readModule(r-1,s,l,u)&&(f|=1),f<<=1,this.readModule(r,s-2,l,u)&&(f|=1),f<<=1,this.readModule(r,s-1,l,u)&&(f|=1),f<<=1,this.readModule(r,s,l,u)&&(f|=1),f}readCorner1(r,s){let l=0;return this.readModule(r-1,0,r,s)&&(l|=1),l<<=1,this.readModule(r-1,1,r,s)&&(l|=1),l<<=1,this.readModule(r-1,2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-1,r,s)&&(l|=1),l<<=1,this.readModule(1,s-1,r,s)&&(l|=1),l<<=1,this.readModule(2,s-1,r,s)&&(l|=1),l<<=1,this.readModule(3,s-1,r,s)&&(l|=1),l}readCorner2(r,s){let l=0;return this.readModule(r-3,0,r,s)&&(l|=1),l<<=1,this.readModule(r-2,0,r,s)&&(l|=1),l<<=1,this.readModule(r-1,0,r,s)&&(l|=1),l<<=1,this.readModule(0,s-4,r,s)&&(l|=1),l<<=1,this.readModule(0,s-3,r,s)&&(l|=1),l<<=1,this.readModule(0,s-2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-1,r,s)&&(l|=1),l<<=1,this.readModule(1,s-1,r,s)&&(l|=1),l}readCorner3(r,s){let l=0;return this.readModule(r-1,0,r,s)&&(l|=1),l<<=1,this.readModule(r-1,s-1,r,s)&&(l|=1),l<<=1,this.readModule(0,s-3,r,s)&&(l|=1),l<<=1,this.readModule(0,s-2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-1,r,s)&&(l|=1),l<<=1,this.readModule(1,s-3,r,s)&&(l|=1),l<<=1,this.readModule(1,s-2,r,s)&&(l|=1),l<<=1,this.readModule(1,s-1,r,s)&&(l|=1),l}readCorner4(r,s){let l=0;return this.readModule(r-3,0,r,s)&&(l|=1),l<<=1,this.readModule(r-2,0,r,s)&&(l|=1),l<<=1,this.readModule(r-1,0,r,s)&&(l|=1),l<<=1,this.readModule(0,s-2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-1,r,s)&&(l|=1),l<<=1,this.readModule(1,s-1,r,s)&&(l|=1),l<<=1,this.readModule(2,s-1,r,s)&&(l|=1),l<<=1,this.readModule(3,s-1,r,s)&&(l|=1),l}extractDataRegion(r){const s=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(r.getHeight()!==s)throw new O("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),f=this.version.getDataRegionSizeColumns(),g=s/u|0,y=l/f|0,x=g*u,C=y*f,I=new Qe(C,x);for(let M=0;M<g;++M){const L=M*u;for(let H=0;H<y;++H){const J=H*f;for(let ee=0;ee<u;++ee){const ae=M*(u+2)+1+ee,_e=L+ee;for(let Pe=0;Pe<f;++Pe){const Me=H*(f+2)+1+Pe;if(r.get(Me,ae)){const Ne=J+Pe;I.set(Ne,_e)}}}}}return I}}class Dr{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s){const l=s.getECBlocks();let u=0;const f=l.getECBlocks();for(let ee of f)u+=ee.getCount();const g=new Array(u);let y=0;for(let ee of f)for(let ae=0;ae<ee.getCount();ae++){const _e=ee.getDataCodewords(),Pe=l.getECCodewords()+_e;g[y++]=new Dr(_e,new Uint8Array(Pe))}const C=g[0].codewords.length-l.getECCodewords(),I=C-1;let M=0;for(let ee=0;ee<I;ee++)for(let ae=0;ae<y;ae++)g[ae].codewords[ee]=r[M++];const L=s.getVersionNumber()===24,H=L?8:y;for(let ee=0;ee<H;ee++)g[ee].codewords[C-1]=r[M++];const J=g[0].codewords.length;for(let ee=C;ee<J;ee++)for(let ae=0;ae<y;ae++){const _e=L?(ae+8)%y:ae,Pe=L&&_e>7?ee-1:ee;g[_e].codewords[Pe]=r[M++]}if(M!==r.length)throw new O;return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Fn{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new O(""+r);let s=0,l=this.bitOffset,u=this.byteOffset;const f=this.bytes;if(l>0){const g=8-l,y=r<g?r:g,x=g-y,C=255>>8-y<<x;s=(f[u]&C)>>x,r-=y,l+=y,l===8&&(l=0,u++)}if(r>0){for(;r>=8;)s=s<<8|f[u]&255,u++,r-=8;if(r>0){const g=8-r,y=255>>g<<g;s=s<<r|(f[u]&y)>>g,l+=r}}return this.bitOffset=l,this.byteOffset=u,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Dt;(function(D){D[D.PAD_ENCODE=0]="PAD_ENCODE",D[D.ASCII_ENCODE=1]="ASCII_ENCODE",D[D.C40_ENCODE=2]="C40_ENCODE",D[D.TEXT_ENCODE=3]="TEXT_ENCODE",D[D.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",D[D.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",D[D.BASE256_ENCODE=6]="BASE256_ENCODE"})(Dt||(Dt={}));class Mr{static decode(r){const s=new Fn(r),l=new G,u=new G,f=new Array;let g=Dt.ASCII_ENCODE;do if(g===Dt.ASCII_ENCODE)g=this.decodeAsciiSegment(s,l,u);else{switch(g){case Dt.C40_ENCODE:this.decodeC40Segment(s,l);break;case Dt.TEXT_ENCODE:this.decodeTextSegment(s,l);break;case Dt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,l);break;case Dt.EDIFACT_ENCODE:this.decodeEdifactSegment(s,l);break;case Dt.BASE256_ENCODE:this.decodeBase256Segment(s,l,f);break;default:throw new F}g=Dt.ASCII_ENCODE}while(g!==Dt.PAD_ENCODE&&s.available()>0);return u.length()>0&&l.append(u.toString()),new lt(r,l.toString(),f.length===0?null:f,null)}static decodeAsciiSegment(r,s,l){let u=!1;do{let f=r.readBits(8);if(f===0)throw new F;if(f<=128)return u&&(f+=128),s.append(String.fromCharCode(f-1)),Dt.ASCII_ENCODE;if(f===129)return Dt.PAD_ENCODE;if(f<=229){const g=f-130;g<10&&s.append("0"),s.append(""+g)}else switch(f){case 230:return Dt.C40_ENCODE;case 231:return Dt.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:s.append("[)>05"),l.insert(0,"");break;case 237:s.append("[)>06"),l.insert(0,"");break;case 238:return Dt.ANSIX12_ENCODE;case 239:return Dt.TEXT_ENCODE;case 240:return Dt.EDIFACT_ENCODE;case 241:break;default:if(f!==254||r.available()!==0)throw new F;break}}while(r.available()>0);return Dt.ASCII_ENCODE}static decodeC40Segment(r,s){let l=!1;const u=[];let f=0;do{if(r.available()===8)return;const g=r.readBits(8);if(g===254)return;this.parseTwoBytes(g,r.readBits(8),u);for(let y=0;y<3;y++){const x=u[y];switch(f){case 0:if(x<3)f=x+1;else if(x<this.C40_BASIC_SET_CHARS.length){const C=this.C40_BASIC_SET_CHARS[x];l?(s.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):s.append(C)}else throw new F;break;case 1:l?(s.append(String.fromCharCode(x+128)),l=!1):s.append(String.fromCharCode(x)),f=0;break;case 2:if(x<this.C40_SHIFT2_SET_CHARS.length){const C=this.C40_SHIFT2_SET_CHARS[x];l?(s.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):s.append(C)}else switch(x){case 27:s.append("");break;case 30:l=!0;break;default:throw new F}f=0;break;case 3:l?(s.append(String.fromCharCode(x+224)),l=!1):s.append(String.fromCharCode(x+96)),f=0;break;default:throw new F}}}while(r.available()>0)}static decodeTextSegment(r,s){let l=!1,u=[],f=0;do{if(r.available()===8)return;const g=r.readBits(8);if(g===254)return;this.parseTwoBytes(g,r.readBits(8),u);for(let y=0;y<3;y++){const x=u[y];switch(f){case 0:if(x<3)f=x+1;else if(x<this.TEXT_BASIC_SET_CHARS.length){const C=this.TEXT_BASIC_SET_CHARS[x];l?(s.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):s.append(C)}else throw new F;break;case 1:l?(s.append(String.fromCharCode(x+128)),l=!1):s.append(String.fromCharCode(x)),f=0;break;case 2:if(x<this.TEXT_SHIFT2_SET_CHARS.length){const C=this.TEXT_SHIFT2_SET_CHARS[x];l?(s.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):s.append(C)}else switch(x){case 27:s.append("");break;case 30:l=!0;break;default:throw new F}f=0;break;case 3:if(x<this.TEXT_SHIFT3_SET_CHARS.length){const C=this.TEXT_SHIFT3_SET_CHARS[x];l?(s.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):s.append(C),f=0}else throw new F;break;default:throw new F}}}while(r.available()>0)}static decodeAnsiX12Segment(r,s){const l=[];do{if(r.available()===8)return;const u=r.readBits(8);if(u===254)return;this.parseTwoBytes(u,r.readBits(8),l);for(let f=0;f<3;f++){const g=l[f];switch(g){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(g<14)s.append(String.fromCharCode(g+44));else if(g<40)s.append(String.fromCharCode(g+51));else throw new F;break}}}while(r.available()>0)}static parseTwoBytes(r,s,l){let u=(r<<8)+s-1,f=Math.floor(u/1600);l[0]=f,u-=f*1600,f=Math.floor(u/40),l[1]=f,l[2]=u-f*40}static decodeEdifactSegment(r,s){do{if(r.available()<=16)return;for(let l=0;l<4;l++){let u=r.readBits(6);if(u===31){const f=8-r.getBitOffset();f!==8&&r.readBits(f);return}(u&32)===0&&(u|=64),s.append(String.fromCharCode(u))}}while(r.available()>0)}static decodeBase256Segment(r,s,l){let u=1+r.getByteOffset();const f=this.unrandomize255State(r.readBits(8),u++);let g;if(f===0?g=r.available()/8|0:f<250?g=f:g=250*(f-249)+this.unrandomize255State(r.readBits(8),u++),g<0)throw new F;const y=new Uint8Array(g);for(let x=0;x<g;x++){if(r.available()<8)throw new F;y[x]=this.unrandomize255State(r.readBits(8),u++)}l.push(y);try{s.append(q.decode(y,W.ISO88591))}catch(x){throw new ur("Platform does not support required encoding: "+x.message)}}static unrandomize255State(r,s){const l=149*s%255+1,u=r-l;return u>=0?u:u+256}}Mr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Mr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Mr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Mr.TEXT_SHIFT2_SET_CHARS=Mr.C40_SHIFT2_SET_CHARS,Mr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class No{constructor(){this.rsDecoder=new _r(_t.DATA_MATRIX_FIELD_256)}decode(r){const s=new vs(r),l=s.getVersion(),u=s.readCodewords(),f=Dr.getDataBlocks(u,l);let g=0;for(let C of f)g+=C.getNumDataCodewords();const y=new Uint8Array(g),x=f.length;for(let C=0;C<x;C++){const I=f[C],M=I.getCodewords(),L=I.getNumDataCodewords();this.correctErrors(M,L);for(let H=0;H<L;H++)y[H*x+C]=M[H]}return Mr.decode(y)}correctErrors(r,s){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-s)}catch{throw new Y}for(let u=0;u<s;u++)r[u]=l[u]}}class ht{constructor(r){this.image=r,this.rectangleDetector=new cn(this.image)}detect(){const r=this.rectangleDetector.detect();let s=this.detectSolid1(r);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new oe;s=this.shiftToModuleCenter(s);const l=s[0],u=s[1],f=s[2],g=s[3];let y=this.transitionsBetween(l,g)+1,x=this.transitionsBetween(f,g)+1;(y&1)===1&&(y+=1),(x&1)===1&&(x+=1),4*y<7*x&&4*x<7*y&&(y=x=Math.max(y,x));let C=ht.sampleGrid(this.image,l,u,f,g,y,x);return new Ni(C,[l,u,f,g])}static shiftPoint(r,s,l){let u=(s.getX()-r.getX())/(l+1),f=(s.getY()-r.getY())/(l+1);return new je(r.getX()+u,r.getY()+f)}static moveAway(r,s,l){let u=r.getX(),f=r.getY();return u<s?u-=1:u+=1,f<l?f-=1:f+=1,new je(u,f)}detectSolid1(r){let s=r[0],l=r[1],u=r[3],f=r[2],g=this.transitionsBetween(s,l),y=this.transitionsBetween(l,u),x=this.transitionsBetween(u,f),C=this.transitionsBetween(f,s),I=g,M=[f,s,l,u];return I>y&&(I=y,M[0]=s,M[1]=l,M[2]=u,M[3]=f),I>x&&(I=x,M[0]=l,M[1]=u,M[2]=f,M[3]=s),I>C&&(M[0]=u,M[1]=f,M[2]=s,M[3]=l),M}detectSolid2(r){let s=r[0],l=r[1],u=r[2],f=r[3],g=this.transitionsBetween(s,f),y=ht.shiftPoint(l,u,(g+1)*4),x=ht.shiftPoint(u,l,(g+1)*4),C=this.transitionsBetween(y,s),I=this.transitionsBetween(x,f);return C<I?(r[0]=s,r[1]=l,r[2]=u,r[3]=f):(r[0]=l,r[1]=u,r[2]=f,r[3]=s),r}correctTopRight(r){let s=r[0],l=r[1],u=r[2],f=r[3],g=this.transitionsBetween(s,f),y=this.transitionsBetween(l,f),x=ht.shiftPoint(s,l,(y+1)*4),C=ht.shiftPoint(u,l,(g+1)*4);g=this.transitionsBetween(x,f),y=this.transitionsBetween(C,f);let I=new je(f.getX()+(u.getX()-l.getX())/(g+1),f.getY()+(u.getY()-l.getY())/(g+1)),M=new je(f.getX()+(s.getX()-l.getX())/(y+1),f.getY()+(s.getY()-l.getY())/(y+1));if(!this.isValid(I))return this.isValid(M)?M:null;if(!this.isValid(M))return I;let L=this.transitionsBetween(x,I)+this.transitionsBetween(C,I),H=this.transitionsBetween(x,M)+this.transitionsBetween(C,M);return L>H?I:M}shiftToModuleCenter(r){let s=r[0],l=r[1],u=r[2],f=r[3],g=this.transitionsBetween(s,f)+1,y=this.transitionsBetween(u,f)+1,x=ht.shiftPoint(s,l,y*4),C=ht.shiftPoint(u,l,g*4);g=this.transitionsBetween(x,f)+1,y=this.transitionsBetween(C,f)+1,(g&1)===1&&(g+=1),(y&1)===1&&(y+=1);let I=(s.getX()+l.getX()+u.getX()+f.getX())/4,M=(s.getY()+l.getY()+u.getY()+f.getY())/4;s=ht.moveAway(s,I,M),l=ht.moveAway(l,I,M),u=ht.moveAway(u,I,M),f=ht.moveAway(f,I,M);let L,H;return x=ht.shiftPoint(s,l,y*4),x=ht.shiftPoint(x,f,g*4),L=ht.shiftPoint(l,s,y*4),L=ht.shiftPoint(L,u,g*4),C=ht.shiftPoint(u,f,y*4),C=ht.shiftPoint(C,l,g*4),H=ht.shiftPoint(f,u,y*4),H=ht.shiftPoint(H,s,g*4),[x,L,C,H]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,s,l,u,f,g,y){return ir.getInstance().sampleGrid(r,g,y,.5,.5,g-.5,.5,g-.5,y-.5,.5,y-.5,s.getX(),s.getY(),f.getX(),f.getY(),u.getX(),u.getY(),l.getX(),l.getY())}transitionsBetween(r,s){let l=Math.trunc(r.getX()),u=Math.trunc(r.getY()),f=Math.trunc(s.getX()),g=Math.trunc(s.getY()),y=Math.abs(g-u)>Math.abs(f-l);if(y){let ee=l;l=u,u=ee,ee=f,f=g,g=ee}let x=Math.abs(f-l),C=Math.abs(g-u),I=-x/2,M=u<g?1:-1,L=l<f?1:-1,H=0,J=this.image.get(y?u:l,y?l:u);for(let ee=l,ae=u;ee!==f;ee+=L){let _e=this.image.get(y?ae:ee,y?ee:ae);if(_e!==J&&(H++,J=_e),I+=C,I>0){if(ae===g)break;ae+=M,I-=x}}return H}}class Gr{constructor(){this.decoder=new No}decode(r,s=null){let l,u;if(s!=null&&s.has(ze.PURE_BARCODE)){const C=Gr.extractPureBits(r.getBlackMatrix());l=this.decoder.decode(C),u=Gr.NO_POINTS}else{const C=new ht(r.getBlackMatrix()).detect();l=this.decoder.decode(C.getBits()),u=C.getPoints()}const f=l.getRawBytes(),g=new we(l.getText(),f,8*f.length,u,ye.DATA_MATRIX,ie.currentTimeMillis()),y=l.getByteSegments();y!=null&&g.putMetadata(et.BYTE_SEGMENTS,y);const x=l.getECLevel();return x!=null&&g.putMetadata(et.ERROR_CORRECTION_LEVEL,x),g}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(s==null||l==null)throw new oe;const u=this.moduleSize(s,r);let f=s[1];const g=l[1];let y=s[0];const C=(l[0]-y+1)/u,I=(g-f+1)/u;if(C<=0||I<=0)throw new oe;const M=u/2;f+=M,y+=M;const L=new Qe(C,I);for(let H=0;H<I;H++){const J=f+H*u;for(let ee=0;ee<C;ee++)r.get(y+ee*u,J)&&L.set(ee,H)}return L}static moduleSize(r,s){const l=s.getWidth();let u=r[0];const f=r[1];for(;u<l&&s.get(u,f);)u++;if(u===l)throw new oe;const g=u-r[0];if(g===0)throw new oe;return g}}Gr.NO_POINTS=[];class Yi extends de{constructor(r=500){super(new Gr,r)}}var Ei;(function(D){D[D.L=0]="L",D[D.M=1]="M",D[D.Q=2]="Q",D[D.H=3]="H"})(Ei||(Ei={}));class vt{constructor(r,s,l){this.value=r,this.stringValue=s,this.bits=l,vt.FOR_BITS.set(l,this),vt.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return vt.L;case"M":return vt.M;case"Q":return vt.Q;case"H":return vt.H;default:throw new S(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof vt))return!1;const s=r;return this.value===s.value}static forBits(r){if(r<0||r>=vt.FOR_BITS.size)throw new O;return vt.FOR_BITS.get(r)}}vt.FOR_BITS=new Map,vt.FOR_VALUE=new Map,vt.L=new vt(Ei.L,"L",1),vt.M=new vt(Ei.M,"M",0),vt.Q=new vt(Ei.Q,"Q",3),vt.H=new vt(Ei.H,"H",2);class Wn{constructor(r){this.errorCorrectionLevel=vt.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,s){return pe.bitCount(r^s)}static decodeFormatInformation(r,s){const l=Wn.doDecodeFormatInformation(r,s);return l!==null?l:Wn.doDecodeFormatInformation(r^Wn.FORMAT_INFO_MASK_QR,s^Wn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,s){let l=Number.MAX_SAFE_INTEGER,u=0;for(const f of Wn.FORMAT_INFO_DECODE_LOOKUP){const g=f[0];if(g===r||g===s)return new Wn(f[1]);let y=Wn.numBitsDiffering(r,g);y<l&&(u=f[1],l=y),r!==s&&(y=Wn.numBitsDiffering(s,g),y<l&&(u=f[1],l=y))}return l<=3?new Wn(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof Wn))return!1;const s=r;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}Wn.FORMAT_INFO_MASK_QR=21522,Wn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ue{constructor(r,...s){this.ecCodewordsPerBlock=r,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const s=this.ecBlocks;for(const l of s)r+=l.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class z{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Je{constructor(r,s,...l){this.versionNumber=r,this.alignmentPatternCenters=s,this.ecBlocks=l;let u=0;const f=l[0].getECCodewordsPerBlock(),g=l[0].getECBlocks();for(const y of g)u+=y.getCount()*(y.getDataCodewords()+f);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new F;try{return this.getVersionForNumber((r-17)/4)}catch{throw new F}}static getVersionForNumber(r){if(r<1||r>40)throw new O;return Je.VERSIONS[r-1]}static decodeVersionInformation(r){let s=Number.MAX_SAFE_INTEGER,l=0;for(let u=0;u<Je.VERSION_DECODE_INFO.length;u++){const f=Je.VERSION_DECODE_INFO[u];if(f===r)return Je.getVersionForNumber(u+7);const g=Wn.numBitsDiffering(r,f);g<s&&(l=u+7,s=g)}return s<=3?Je.getVersionForNumber(l):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),s=new Qe(r);s.setRegion(0,0,9,9),s.setRegion(r-8,0,8,9),s.setRegion(0,r-8,9,8);const l=this.alignmentPatternCenters.length;for(let u=0;u<l;u++){const f=this.alignmentPatternCenters[u]-2;for(let g=0;g<l;g++)u===0&&(g===0||g===l-1)||u===l-1&&g===0||s.setRegion(this.alignmentPatternCenters[g]-2,f,5,5)}return s.setRegion(6,9,1,r-17),s.setRegion(9,6,r-17,1),this.versionNumber>6&&(s.setRegion(r-11,0,3,6),s.setRegion(0,r-11,6,3)),s}toString(){return""+this.versionNumber}}Je.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Je.VERSIONS=[new Je(1,new Int32Array(0),new ue(7,new z(1,19)),new ue(10,new z(1,16)),new ue(13,new z(1,13)),new ue(17,new z(1,9))),new Je(2,Int32Array.from([6,18]),new ue(10,new z(1,34)),new ue(16,new z(1,28)),new ue(22,new z(1,22)),new ue(28,new z(1,16))),new Je(3,Int32Array.from([6,22]),new ue(15,new z(1,55)),new ue(26,new z(1,44)),new ue(18,new z(2,17)),new ue(22,new z(2,13))),new Je(4,Int32Array.from([6,26]),new ue(20,new z(1,80)),new ue(18,new z(2,32)),new ue(26,new z(2,24)),new ue(16,new z(4,9))),new Je(5,Int32Array.from([6,30]),new ue(26,new z(1,108)),new ue(24,new z(2,43)),new ue(18,new z(2,15),new z(2,16)),new ue(22,new z(2,11),new z(2,12))),new Je(6,Int32Array.from([6,34]),new ue(18,new z(2,68)),new ue(16,new z(4,27)),new ue(24,new z(4,19)),new ue(28,new z(4,15))),new Je(7,Int32Array.from([6,22,38]),new ue(20,new z(2,78)),new ue(18,new z(4,31)),new ue(18,new z(2,14),new z(4,15)),new ue(26,new z(4,13),new z(1,14))),new Je(8,Int32Array.from([6,24,42]),new ue(24,new z(2,97)),new ue(22,new z(2,38),new z(2,39)),new ue(22,new z(4,18),new z(2,19)),new ue(26,new z(4,14),new z(2,15))),new Je(9,Int32Array.from([6,26,46]),new ue(30,new z(2,116)),new ue(22,new z(3,36),new z(2,37)),new ue(20,new z(4,16),new z(4,17)),new ue(24,new z(4,12),new z(4,13))),new Je(10,Int32Array.from([6,28,50]),new ue(18,new z(2,68),new z(2,69)),new ue(26,new z(4,43),new z(1,44)),new ue(24,new z(6,19),new z(2,20)),new ue(28,new z(6,15),new z(2,16))),new Je(11,Int32Array.from([6,30,54]),new ue(20,new z(4,81)),new ue(30,new z(1,50),new z(4,51)),new ue(28,new z(4,22),new z(4,23)),new ue(24,new z(3,12),new z(8,13))),new Je(12,Int32Array.from([6,32,58]),new ue(24,new z(2,92),new z(2,93)),new ue(22,new z(6,36),new z(2,37)),new ue(26,new z(4,20),new z(6,21)),new ue(28,new z(7,14),new z(4,15))),new Je(13,Int32Array.from([6,34,62]),new ue(26,new z(4,107)),new ue(22,new z(8,37),new z(1,38)),new ue(24,new z(8,20),new z(4,21)),new ue(22,new z(12,11),new z(4,12))),new Je(14,Int32Array.from([6,26,46,66]),new ue(30,new z(3,115),new z(1,116)),new ue(24,new z(4,40),new z(5,41)),new ue(20,new z(11,16),new z(5,17)),new ue(24,new z(11,12),new z(5,13))),new Je(15,Int32Array.from([6,26,48,70]),new ue(22,new z(5,87),new z(1,88)),new ue(24,new z(5,41),new z(5,42)),new ue(30,new z(5,24),new z(7,25)),new ue(24,new z(11,12),new z(7,13))),new Je(16,Int32Array.from([6,26,50,74]),new ue(24,new z(5,98),new z(1,99)),new ue(28,new z(7,45),new z(3,46)),new ue(24,new z(15,19),new z(2,20)),new ue(30,new z(3,15),new z(13,16))),new Je(17,Int32Array.from([6,30,54,78]),new ue(28,new z(1,107),new z(5,108)),new ue(28,new z(10,46),new z(1,47)),new ue(28,new z(1,22),new z(15,23)),new ue(28,new z(2,14),new z(17,15))),new Je(18,Int32Array.from([6,30,56,82]),new ue(30,new z(5,120),new z(1,121)),new ue(26,new z(9,43),new z(4,44)),new ue(28,new z(17,22),new z(1,23)),new ue(28,new z(2,14),new z(19,15))),new Je(19,Int32Array.from([6,30,58,86]),new ue(28,new z(3,113),new z(4,114)),new ue(26,new z(3,44),new z(11,45)),new ue(26,new z(17,21),new z(4,22)),new ue(26,new z(9,13),new z(16,14))),new Je(20,Int32Array.from([6,34,62,90]),new ue(28,new z(3,107),new z(5,108)),new ue(26,new z(3,41),new z(13,42)),new ue(30,new z(15,24),new z(5,25)),new ue(28,new z(15,15),new z(10,16))),new Je(21,Int32Array.from([6,28,50,72,94]),new ue(28,new z(4,116),new z(4,117)),new ue(26,new z(17,42)),new ue(28,new z(17,22),new z(6,23)),new ue(30,new z(19,16),new z(6,17))),new Je(22,Int32Array.from([6,26,50,74,98]),new ue(28,new z(2,111),new z(7,112)),new ue(28,new z(17,46)),new ue(30,new z(7,24),new z(16,25)),new ue(24,new z(34,13))),new Je(23,Int32Array.from([6,30,54,78,102]),new ue(30,new z(4,121),new z(5,122)),new ue(28,new z(4,47),new z(14,48)),new ue(30,new z(11,24),new z(14,25)),new ue(30,new z(16,15),new z(14,16))),new Je(24,Int32Array.from([6,28,54,80,106]),new ue(30,new z(6,117),new z(4,118)),new ue(28,new z(6,45),new z(14,46)),new ue(30,new z(11,24),new z(16,25)),new ue(30,new z(30,16),new z(2,17))),new Je(25,Int32Array.from([6,32,58,84,110]),new ue(26,new z(8,106),new z(4,107)),new ue(28,new z(8,47),new z(13,48)),new ue(30,new z(7,24),new z(22,25)),new ue(30,new z(22,15),new z(13,16))),new Je(26,Int32Array.from([6,30,58,86,114]),new ue(28,new z(10,114),new z(2,115)),new ue(28,new z(19,46),new z(4,47)),new ue(28,new z(28,22),new z(6,23)),new ue(30,new z(33,16),new z(4,17))),new Je(27,Int32Array.from([6,34,62,90,118]),new ue(30,new z(8,122),new z(4,123)),new ue(28,new z(22,45),new z(3,46)),new ue(30,new z(8,23),new z(26,24)),new ue(30,new z(12,15),new z(28,16))),new Je(28,Int32Array.from([6,26,50,74,98,122]),new ue(30,new z(3,117),new z(10,118)),new ue(28,new z(3,45),new z(23,46)),new ue(30,new z(4,24),new z(31,25)),new ue(30,new z(11,15),new z(31,16))),new Je(29,Int32Array.from([6,30,54,78,102,126]),new ue(30,new z(7,116),new z(7,117)),new ue(28,new z(21,45),new z(7,46)),new ue(30,new z(1,23),new z(37,24)),new ue(30,new z(19,15),new z(26,16))),new Je(30,Int32Array.from([6,26,52,78,104,130]),new ue(30,new z(5,115),new z(10,116)),new ue(28,new z(19,47),new z(10,48)),new ue(30,new z(15,24),new z(25,25)),new ue(30,new z(23,15),new z(25,16))),new Je(31,Int32Array.from([6,30,56,82,108,134]),new ue(30,new z(13,115),new z(3,116)),new ue(28,new z(2,46),new z(29,47)),new ue(30,new z(42,24),new z(1,25)),new ue(30,new z(23,15),new z(28,16))),new Je(32,Int32Array.from([6,34,60,86,112,138]),new ue(30,new z(17,115)),new ue(28,new z(10,46),new z(23,47)),new ue(30,new z(10,24),new z(35,25)),new ue(30,new z(19,15),new z(35,16))),new Je(33,Int32Array.from([6,30,58,86,114,142]),new ue(30,new z(17,115),new z(1,116)),new ue(28,new z(14,46),new z(21,47)),new ue(30,new z(29,24),new z(19,25)),new ue(30,new z(11,15),new z(46,16))),new Je(34,Int32Array.from([6,34,62,90,118,146]),new ue(30,new z(13,115),new z(6,116)),new ue(28,new z(14,46),new z(23,47)),new ue(30,new z(44,24),new z(7,25)),new ue(30,new z(59,16),new z(1,17))),new Je(35,Int32Array.from([6,30,54,78,102,126,150]),new ue(30,new z(12,121),new z(7,122)),new ue(28,new z(12,47),new z(26,48)),new ue(30,new z(39,24),new z(14,25)),new ue(30,new z(22,15),new z(41,16))),new Je(36,Int32Array.from([6,24,50,76,102,128,154]),new ue(30,new z(6,121),new z(14,122)),new ue(28,new z(6,47),new z(34,48)),new ue(30,new z(46,24),new z(10,25)),new ue(30,new z(2,15),new z(64,16))),new Je(37,Int32Array.from([6,28,54,80,106,132,158]),new ue(30,new z(17,122),new z(4,123)),new ue(28,new z(29,46),new z(14,47)),new ue(30,new z(49,24),new z(10,25)),new ue(30,new z(24,15),new z(46,16))),new Je(38,Int32Array.from([6,32,58,84,110,136,162]),new ue(30,new z(4,122),new z(18,123)),new ue(28,new z(13,46),new z(32,47)),new ue(30,new z(48,24),new z(14,25)),new ue(30,new z(42,15),new z(32,16))),new Je(39,Int32Array.from([6,26,54,82,110,138,166]),new ue(30,new z(20,117),new z(4,118)),new ue(28,new z(40,47),new z(7,48)),new ue(30,new z(43,24),new z(22,25)),new ue(30,new z(10,15),new z(67,16))),new Je(40,Int32Array.from([6,30,58,86,114,142,170]),new ue(30,new z(19,118),new z(6,119)),new ue(28,new z(18,47),new z(31,48)),new ue(30,new z(34,24),new z(34,25)),new ue(30,new z(20,15),new z(61,16)))];var Kn;(function(D){D[D.DATA_MASK_000=0]="DATA_MASK_000",D[D.DATA_MASK_001=1]="DATA_MASK_001",D[D.DATA_MASK_010=2]="DATA_MASK_010",D[D.DATA_MASK_011=3]="DATA_MASK_011",D[D.DATA_MASK_100=4]="DATA_MASK_100",D[D.DATA_MASK_101=5]="DATA_MASK_101",D[D.DATA_MASK_110=6]="DATA_MASK_110",D[D.DATA_MASK_111=7]="DATA_MASK_111"})(Kn||(Kn={}));class sr{constructor(r,s){this.value=r,this.isMasked=s}unmaskBitMatrix(r,s){for(let l=0;l<s;l++)for(let u=0;u<s;u++)this.isMasked(l,u)&&r.flip(u,l)}}sr.values=new Map([[Kn.DATA_MASK_000,new sr(Kn.DATA_MASK_000,(D,r)=>(D+r&1)===0)],[Kn.DATA_MASK_001,new sr(Kn.DATA_MASK_001,(D,r)=>(D&1)===0)],[Kn.DATA_MASK_010,new sr(Kn.DATA_MASK_010,(D,r)=>r%3===0)],[Kn.DATA_MASK_011,new sr(Kn.DATA_MASK_011,(D,r)=>(D+r)%3===0)],[Kn.DATA_MASK_100,new sr(Kn.DATA_MASK_100,(D,r)=>(Math.floor(D/2)+Math.floor(r/3)&1)===0)],[Kn.DATA_MASK_101,new sr(Kn.DATA_MASK_101,(D,r)=>D*r%6===0)],[Kn.DATA_MASK_110,new sr(Kn.DATA_MASK_110,(D,r)=>D*r%6<3)],[Kn.DATA_MASK_111,new sr(Kn.DATA_MASK_111,(D,r)=>(D+r+D*r%3&1)===0)]]);class qr{constructor(r){const s=r.getHeight();if(s<21||(s&3)!==1)throw new F;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let f=0;f<6;f++)r=this.copyBit(f,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let f=5;f>=0;f--)r=this.copyBit(8,f,r);const s=this.bitMatrix.getHeight();let l=0;const u=s-7;for(let f=s-1;f>=u;f--)l=this.copyBit(8,f,l);for(let f=s-8;f<s;f++)l=this.copyBit(f,8,l);if(this.parsedFormatInfo=Wn.decodeFormatInformation(r,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new F}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),s=Math.floor((r-17)/4);if(s<=6)return Je.getVersionForNumber(s);let l=0;const u=r-11;for(let g=5;g>=0;g--)for(let y=r-9;y>=u;y--)l=this.copyBit(y,g,l);let f=Je.decodeVersionInformation(l);if(f!==null&&f.getDimensionForVersion()===r)return this.parsedVersion=f,f;l=0;for(let g=5;g>=0;g--)for(let y=r-9;y>=u;y--)l=this.copyBit(g,y,l);if(f=Je.decodeVersionInformation(l),f!==null&&f.getDimensionForVersion()===r)return this.parsedVersion=f,f;throw new F}copyBit(r,s,l){return(this.isMirror?this.bitMatrix.get(s,r):this.bitMatrix.get(r,s))?l<<1|1:l<<1}readCodewords(){const r=this.readFormatInformation(),s=this.readVersion(),l=sr.values.get(r.getDataMask()),u=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,u);const f=s.buildFunctionPattern();let g=!0;const y=new Uint8Array(s.getTotalCodewords());let x=0,C=0,I=0;for(let M=u-1;M>0;M-=2){M===6&&M--;for(let L=0;L<u;L++){const H=g?u-1-L:L;for(let J=0;J<2;J++)f.get(M-J,H)||(I++,C<<=1,this.bitMatrix.get(M-J,H)&&(C|=1),I===8&&(y[x++]=C,I=0,C=0))}g=!g}if(x!==s.getTotalCodewords())throw new F;return y}remask(){if(this.parsedFormatInfo===null)return;const r=sr.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,s)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let s=0,l=r.getWidth();s<l;s++)for(let u=s+1,f=r.getHeight();u<f;u++)r.get(s,u)!==r.get(u,s)&&(r.flip(u,s),r.flip(s,u))}}class Ra{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s,l){if(r.length!==s.getTotalCodewords())throw new O;const u=s.getECBlocksForLevel(l);let f=0;const g=u.getECBlocks();for(const J of g)f+=J.getCount();const y=new Array(f);let x=0;for(const J of g)for(let ee=0;ee<J.getCount();ee++){const ae=J.getDataCodewords(),_e=u.getECCodewordsPerBlock()+ae;y[x++]=new Ra(ae,new Uint8Array(_e))}const C=y[0].codewords.length;let I=y.length-1;for(;I>=0&&y[I].codewords.length!==C;)I--;I++;const M=C-u.getECCodewordsPerBlock();let L=0;for(let J=0;J<M;J++)for(let ee=0;ee<x;ee++)y[ee].codewords[J]=r[L++];for(let J=I;J<x;J++)y[J].codewords[M]=r[L++];const H=y[0].codewords.length;for(let J=M;J<H;J++)for(let ee=0;ee<x;ee++){const ae=ee<I?J:J+1;y[ee].codewords[ae]=r[L++]}return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var br;(function(D){D[D.TERMINATOR=0]="TERMINATOR",D[D.NUMERIC=1]="NUMERIC",D[D.ALPHANUMERIC=2]="ALPHANUMERIC",D[D.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",D[D.BYTE=4]="BYTE",D[D.ECI=5]="ECI",D[D.KANJI=6]="KANJI",D[D.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",D[D.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",D[D.HANZI=9]="HANZI"})(br||(br={}));class it{constructor(r,s,l,u){this.value=r,this.stringValue=s,this.characterCountBitsForVersions=l,this.bits=u,it.FOR_BITS.set(u,this),it.FOR_VALUE.set(r,this)}static forBits(r){const s=it.FOR_BITS.get(r);if(s===void 0)throw new O;return s}getCharacterCountBits(r){const s=r.getVersionNumber();let l;return s<=9?l=0:s<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof it))return!1;const s=r;return this.value===s.value}toString(){return this.stringValue}}it.FOR_BITS=new Map,it.FOR_VALUE=new Map,it.TERMINATOR=new it(br.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),it.NUMERIC=new it(br.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),it.ALPHANUMERIC=new it(br.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),it.STRUCTURED_APPEND=new it(br.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),it.BYTE=new it(br.BYTE,"BYTE",Int32Array.from([8,16,16]),4),it.ECI=new it(br.ECI,"ECI",Int32Array.from([0,0,0]),7),it.KANJI=new it(br.KANJI,"KANJI",Int32Array.from([8,10,12]),8),it.FNC1_FIRST_POSITION=new it(br.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),it.FNC1_SECOND_POSITION=new it(br.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),it.HANZI=new it(br.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class hn{static decode(r,s,l,u){const f=new Fn(r);let g=new G;const y=new Array;let x=-1,C=-1;try{let I=null,M=!1,L;do{if(f.available()<4)L=it.TERMINATOR;else{const H=f.readBits(4);L=it.forBits(H)}switch(L){case it.TERMINATOR:break;case it.FNC1_FIRST_POSITION:case it.FNC1_SECOND_POSITION:M=!0;break;case it.STRUCTURED_APPEND:if(f.available()<16)throw new F;x=f.readBits(8),C=f.readBits(8);break;case it.ECI:const H=hn.parseECIValue(f);if(I=P.getCharacterSetECIByValue(H),I===null)throw new F;break;case it.HANZI:const J=f.readBits(4),ee=f.readBits(L.getCharacterCountBits(s));J===hn.GB2312_SUBSET&&hn.decodeHanziSegment(f,g,ee);break;default:const ae=f.readBits(L.getCharacterCountBits(s));switch(L){case it.NUMERIC:hn.decodeNumericSegment(f,g,ae);break;case it.ALPHANUMERIC:hn.decodeAlphanumericSegment(f,g,ae,M);break;case it.BYTE:hn.decodeByteSegment(f,g,ae,I,y,u);break;case it.KANJI:hn.decodeKanjiSegment(f,g,ae);break;default:throw new F}break}}while(L!==it.TERMINATOR)}catch{throw new F}return new lt(r,g.toString(),y.length===0?null:y,l===null?null:l.toString(),x,C)}static decodeHanziSegment(r,s,l){if(l*13>r.available())throw new F;const u=new Uint8Array(2*l);let f=0;for(;l>0;){const g=r.readBits(13);let y=g/96<<8&4294967295|g%96;y<959?y+=41377:y+=42657,u[f]=y>>8&255,u[f+1]=y&255,f+=2,l--}try{s.append(q.decode(u,W.GB2312))}catch(g){throw new F(g)}}static decodeKanjiSegment(r,s,l){if(l*13>r.available())throw new F;const u=new Uint8Array(2*l);let f=0;for(;l>0;){const g=r.readBits(13);let y=g/192<<8&4294967295|g%192;y<7936?y+=33088:y+=49472,u[f]=y>>8,u[f+1]=y,f+=2,l--}try{s.append(q.decode(u,W.SHIFT_JIS))}catch(g){throw new F(g)}}static decodeByteSegment(r,s,l,u,f,g){if(8*l>r.available())throw new F;const y=new Uint8Array(l);for(let C=0;C<l;C++)y[C]=r.readBits(8);let x;u===null?x=W.guessEncoding(y,g):x=u.getName();try{s.append(q.decode(y,x))}catch(C){throw new F(C)}f.push(y)}static toAlphaNumericChar(r){if(r>=hn.ALPHANUMERIC_CHARS.length)throw new F;return hn.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,s,l,u){const f=s.length();for(;l>1;){if(r.available()<11)throw new F;const g=r.readBits(11);s.append(hn.toAlphaNumericChar(Math.floor(g/45))),s.append(hn.toAlphaNumericChar(g%45)),l-=2}if(l===1){if(r.available()<6)throw new F;s.append(hn.toAlphaNumericChar(r.readBits(6)))}if(u)for(let g=f;g<s.length();g++)s.charAt(g)==="%"&&(g<s.length()-1&&s.charAt(g+1)==="%"?s.deleteCharAt(g+1):s.setCharAt(g,""))}static decodeNumericSegment(r,s,l){for(;l>=3;){if(r.available()<10)throw new F;const u=r.readBits(10);if(u>=1e3)throw new F;s.append(hn.toAlphaNumericChar(Math.floor(u/100))),s.append(hn.toAlphaNumericChar(Math.floor(u/10)%10)),s.append(hn.toAlphaNumericChar(u%10)),l-=3}if(l===2){if(r.available()<7)throw new F;const u=r.readBits(7);if(u>=100)throw new F;s.append(hn.toAlphaNumericChar(Math.floor(u/10))),s.append(hn.toAlphaNumericChar(u%10))}else if(l===1){if(r.available()<4)throw new F;const u=r.readBits(4);if(u>=10)throw new F;s.append(hn.toAlphaNumericChar(u))}}static parseECIValue(r){const s=r.readBits(8);if((s&128)===0)return s&127;if((s&192)===128){const l=r.readBits(8);return(s&63)<<8&4294967295|l}if((s&224)===192){const l=r.readBits(16);return(s&31)<<16&4294967295|l}throw new F}}hn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",hn.GB2312_SUBSET=1;class Oo{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const s=r[0];r[0]=r[2],r[2]=s}}class Ss{constructor(){this.rsDecoder=new _r(_t.QR_CODE_FIELD_256)}decodeBooleanArray(r,s){return this.decodeBitMatrix(Qe.parseFromBooleanArray(r),s)}decodeBitMatrix(r,s){const l=new qr(r);let u=null;try{return this.decodeBitMatrixParser(l,s)}catch(f){u=f}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const f=this.decodeBitMatrixParser(l,s);return f.setOther(new Oo(!0)),f}catch(f){throw u!==null?u:f}}decodeBitMatrixParser(r,s){const l=r.readVersion(),u=r.readFormatInformation().getErrorCorrectionLevel(),f=r.readCodewords(),g=Ra.getDataBlocks(f,l,u);let y=0;for(const I of g)y+=I.getNumDataCodewords();const x=new Uint8Array(y);let C=0;for(const I of g){const M=I.getCodewords(),L=I.getNumDataCodewords();this.correctErrors(M,L);for(let H=0;H<L;H++)x[C++]=M[H]}return hn.decode(x,l,u,s)}correctErrors(r,s){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-s)}catch{throw new Y}for(let u=0;u<s;u++)r[u]=l[u]}}class Is extends je{constructor(r,s,l){super(r,s),this.estimatedModuleSize=l}aboutEquals(r,s,l){if(Math.abs(s-this.getY())<=r&&Math.abs(l-this.getX())<=r){const u=Math.abs(r-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(r,s,l){const u=(this.getX()+s)/2,f=(this.getY()+r)/2,g=(this.estimatedModuleSize+l)/2;return new Is(u,f,g)}}class Xr{constructor(r,s,l,u,f,g,y){this.image=r,this.startX=s,this.startY=l,this.width=u,this.height=f,this.moduleSize=g,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,s=this.height,l=this.width,u=r+l,f=this.startY+s/2,g=new Int32Array(3),y=this.image;for(let x=0;x<s;x++){const C=f+((x&1)===0?Math.floor((x+1)/2):-Math.floor((x+1)/2));g[0]=0,g[1]=0,g[2]=0;let I=r;for(;I<u&&!y.get(I,C);)I++;let M=0;for(;I<u;){if(y.get(I,C))if(M===1)g[1]++;else if(M===2){if(this.foundPatternCross(g)){const L=this.handlePossibleCenter(g,C,I);if(L!==null)return L}g[0]=g[2],g[1]=1,g[2]=0,M=1}else g[++M]++;else M===1&&M++,g[M]++;I++}if(this.foundPatternCross(g)){const L=this.handlePossibleCenter(g,C,u);if(L!==null)return L}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new oe}static centerFromEnd(r,s){return s-r[2]-r[1]/2}foundPatternCross(r){const s=this.moduleSize,l=s/2;for(let u=0;u<3;u++)if(Math.abs(s-r[u])>=l)return!1;return!0}crossCheckVertical(r,s,l,u){const f=this.image,g=f.getHeight(),y=this.crossCheckStateCount;y[0]=0,y[1]=0,y[2]=0;let x=r;for(;x>=0&&f.get(s,x)&&y[1]<=l;)y[1]++,x--;if(x<0||y[1]>l)return NaN;for(;x>=0&&!f.get(s,x)&&y[0]<=l;)y[0]++,x--;if(y[0]>l)return NaN;for(x=r+1;x<g&&f.get(s,x)&&y[1]<=l;)y[1]++,x++;if(x===g||y[1]>l)return NaN;for(;x<g&&!f.get(s,x)&&y[2]<=l;)y[2]++,x++;if(y[2]>l)return NaN;const C=y[0]+y[1]+y[2];return 5*Math.abs(C-u)>=2*u?NaN:this.foundPatternCross(y)?Xr.centerFromEnd(y,x):NaN}handlePossibleCenter(r,s,l){const u=r[0]+r[1]+r[2],f=Xr.centerFromEnd(r,l),g=this.crossCheckVertical(s,f,2*r[1],u);if(!isNaN(g)){const y=(r[0]+r[1]+r[2])/3;for(const C of this.possibleCenters)if(C.aboutEquals(y,g,f))return C.combineEstimate(g,f,y);const x=new Is(f,g,y);this.possibleCenters.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return null}}class Xs extends je{constructor(r,s,l,u){super(r,s),this.estimatedModuleSize=l,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,s,l){if(Math.abs(s-this.getY())<=r&&Math.abs(l-this.getX())<=r){const u=Math.abs(r-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(r,s,l){const u=this.count+1,f=(this.count*this.getX()+s)/u,g=(this.count*this.getY()+r)/u,y=(this.count*this.estimatedModuleSize+l)/u;return new Xs(f,g,y,u)}}class _i{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class vn{constructor(r,s){this.image=r,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const s=r!=null&&r.get(ze.TRY_HARDER)!==void 0,l=r!=null&&r.get(ze.PURE_BARCODE)!==void 0,u=this.image,f=u.getHeight(),g=u.getWidth();let y=Math.floor(3*f/(4*vn.MAX_MODULES));(y<vn.MIN_SKIP||s)&&(y=vn.MIN_SKIP);let x=!1;const C=new Int32Array(5);for(let M=y-1;M<f&&!x;M+=y){C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0;let L=0;for(let H=0;H<g;H++)if(u.get(H,M))(L&1)===1&&L++,C[L]++;else if((L&1)===0)if(L===4)if(vn.foundPatternCross(C)){if(this.handlePossibleCenter(C,M,H,l)===!0)if(y=2,this.hasSkipped===!0)x=this.haveMultiplyConfirmedCenters();else{const ee=this.findRowSkip();ee>C[2]&&(M+=ee-C[2]-y,H=g-1)}else{C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,L=3;continue}L=0,C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0}else C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,L=3;else C[++L]++;else C[L]++;vn.foundPatternCross(C)&&this.handlePossibleCenter(C,M,g,l)===!0&&(y=C[0],this.hasSkipped&&(x=this.haveMultiplyConfirmedCenters()))}const I=this.selectBestPatterns();return je.orderBestPatterns(I),new _i(I)}static centerFromEnd(r,s){return s-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let s=0;for(let f=0;f<5;f++){const g=r[f];if(g===0)return!1;s+=g}if(s<7)return!1;const l=s/7,u=l/2;return Math.abs(l-r[0])<u&&Math.abs(l-r[1])<u&&Math.abs(3*l-r[2])<3*u&&Math.abs(l-r[3])<u&&Math.abs(l-r[4])<u}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,s,l,u){const f=this.getCrossCheckStateCount();let g=0;const y=this.image;for(;r>=g&&s>=g&&y.get(s-g,r-g);)f[2]++,g++;if(r<g||s<g)return!1;for(;r>=g&&s>=g&&!y.get(s-g,r-g)&&f[1]<=l;)f[1]++,g++;if(r<g||s<g||f[1]>l)return!1;for(;r>=g&&s>=g&&y.get(s-g,r-g)&&f[0]<=l;)f[0]++,g++;if(f[0]>l)return!1;const x=y.getHeight(),C=y.getWidth();for(g=1;r+g<x&&s+g<C&&y.get(s+g,r+g);)f[2]++,g++;if(r+g>=x||s+g>=C)return!1;for(;r+g<x&&s+g<C&&!y.get(s+g,r+g)&&f[3]<l;)f[3]++,g++;if(r+g>=x||s+g>=C||f[3]>=l)return!1;for(;r+g<x&&s+g<C&&y.get(s+g,r+g)&&f[4]<l;)f[4]++,g++;if(f[4]>=l)return!1;const I=f[0]+f[1]+f[2]+f[3]+f[4];return Math.abs(I-u)<2*u&&vn.foundPatternCross(f)}crossCheckVertical(r,s,l,u){const f=this.image,g=f.getHeight(),y=this.getCrossCheckStateCount();let x=r;for(;x>=0&&f.get(s,x);)y[2]++,x--;if(x<0)return NaN;for(;x>=0&&!f.get(s,x)&&y[1]<=l;)y[1]++,x--;if(x<0||y[1]>l)return NaN;for(;x>=0&&f.get(s,x)&&y[0]<=l;)y[0]++,x--;if(y[0]>l)return NaN;for(x=r+1;x<g&&f.get(s,x);)y[2]++,x++;if(x===g)return NaN;for(;x<g&&!f.get(s,x)&&y[3]<l;)y[3]++,x++;if(x===g||y[3]>=l)return NaN;for(;x<g&&f.get(s,x)&&y[4]<l;)y[4]++,x++;if(y[4]>=l)return NaN;const C=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(C-u)>=2*u?NaN:vn.foundPatternCross(y)?vn.centerFromEnd(y,x):NaN}crossCheckHorizontal(r,s,l,u){const f=this.image,g=f.getWidth(),y=this.getCrossCheckStateCount();let x=r;for(;x>=0&&f.get(x,s);)y[2]++,x--;if(x<0)return NaN;for(;x>=0&&!f.get(x,s)&&y[1]<=l;)y[1]++,x--;if(x<0||y[1]>l)return NaN;for(;x>=0&&f.get(x,s)&&y[0]<=l;)y[0]++,x--;if(y[0]>l)return NaN;for(x=r+1;x<g&&f.get(x,s);)y[2]++,x++;if(x===g)return NaN;for(;x<g&&!f.get(x,s)&&y[3]<l;)y[3]++,x++;if(x===g||y[3]>=l)return NaN;for(;x<g&&f.get(x,s)&&y[4]<l;)y[4]++,x++;if(y[4]>=l)return NaN;const C=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(C-u)>=u?NaN:vn.foundPatternCross(y)?vn.centerFromEnd(y,x):NaN}handlePossibleCenter(r,s,l,u){const f=r[0]+r[1]+r[2]+r[3]+r[4];let g=vn.centerFromEnd(r,l),y=this.crossCheckVertical(s,Math.floor(g),r[2],f);if(!isNaN(y)&&(g=this.crossCheckHorizontal(Math.floor(g),Math.floor(y),r[2],f),!isNaN(g)&&(!u||this.crossCheckDiagonal(Math.floor(y),Math.floor(g),r[2],f)))){const x=f/7;let C=!1;const I=this.possibleCenters;for(let M=0,L=I.length;M<L;M++){const H=I[M];if(H.aboutEquals(x,y,g)){I[M]=H.combineEstimate(y,g,x),C=!0;break}}if(!C){const M=new Xs(g,y,x);I.push(M),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(M)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const l of this.possibleCenters)if(l.getCount()>=vn.CENTER_QUORUM)if(s==null)s=l;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-l.getX())-Math.abs(s.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,s=0;const l=this.possibleCenters.length;for(const g of this.possibleCenters)g.getCount()>=vn.CENTER_QUORUM&&(r++,s+=g.getEstimatedModuleSize());if(r<3)return!1;const u=s/l;let f=0;for(const g of this.possibleCenters)f+=Math.abs(g.getEstimatedModuleSize()-u);return f<=.05*s}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new oe;const s=this.possibleCenters;let l;if(r>3){let u=0,f=0;for(const x of this.possibleCenters){const C=x.getEstimatedModuleSize();u+=C,f+=C*C}l=u/r;let g=Math.sqrt(f/r-l*l);s.sort((x,C)=>{const I=Math.abs(C.getEstimatedModuleSize()-l),M=Math.abs(x.getEstimatedModuleSize()-l);return I<M?-1:I>M?1:0});const y=Math.max(.2*l,g);for(let x=0;x<s.length&&s.length>3;x++){const C=s[x];Math.abs(C.getEstimatedModuleSize()-l)>y&&(s.splice(x,1),x--)}}if(s.length>3){let u=0;for(const f of s)u+=f.getEstimatedModuleSize();l=u/s.length,s.sort((f,g)=>{if(g.getCount()===f.getCount()){const y=Math.abs(g.getEstimatedModuleSize()-l),x=Math.abs(f.getEstimatedModuleSize()-l);return y<x?1:y>x?-1:0}else return g.getCount()-f.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}vn.CENTER_QUORUM=2,vn.MIN_SKIP=3,vn.MAX_MODULES=57;class Yr{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(ze.NEED_RESULT_POINT_CALLBACK);const l=new vn(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(l)}processFinderPatternInfo(r){const s=r.getTopLeft(),l=r.getTopRight(),u=r.getBottomLeft(),f=this.calculateModuleSize(s,l,u);if(f<1)throw new oe("No pattern found in proccess finder.");const g=Yr.computeDimension(s,l,u,f),y=Je.getProvisionalVersionForDimension(g),x=y.getDimensionForVersion()-7;let C=null;if(y.getAlignmentPatternCenters().length>0){const H=l.getX()-s.getX()+u.getX(),J=l.getY()-s.getY()+u.getY(),ee=1-3/x,ae=Math.floor(s.getX()+ee*(H-s.getX())),_e=Math.floor(s.getY()+ee*(J-s.getY()));for(let Pe=4;Pe<=16;Pe<<=1)try{C=this.findAlignmentInRegion(f,ae,_e,Pe);break}catch(Me){if(!(Me instanceof oe))throw Me}}const I=Yr.createTransform(s,l,u,C,g),M=Yr.sampleGrid(this.image,I,g);let L;return C===null?L=[u,s,l]:L=[u,s,l,C],new Ni(M,L)}static createTransform(r,s,l,u,f){const g=f-3.5;let y,x,C,I;return u!==null?(y=u.getX(),x=u.getY(),C=g-3,I=C):(y=s.getX()-r.getX()+l.getX(),x=s.getY()-r.getY()+l.getY(),C=g,I=g),qn.quadrilateralToQuadrilateral(3.5,3.5,g,3.5,C,I,3.5,g,r.getX(),r.getY(),s.getX(),s.getY(),y,x,l.getX(),l.getY())}static sampleGrid(r,s,l){return ir.getInstance().sampleGridWithTransform(r,l,l,s)}static computeDimension(r,s,l,u){const f=rt.round(je.distance(r,s)/u),g=rt.round(je.distance(r,l)/u);let y=Math.floor((f+g)/2)+7;switch(y&3){case 0:y++;break;case 2:y--;break;case 3:throw new oe("Dimensions could be not found.")}return y}calculateModuleSize(r,s,l){return(this.calculateModuleSizeOneWay(r,s)+this.calculateModuleSizeOneWay(r,l))/2}calculateModuleSizeOneWay(r,s){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(s.getX()),Math.floor(s.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(l)?u/7:isNaN(u)?l/7:(l+u)/14}sizeOfBlackWhiteBlackRunBothWays(r,s,l,u){let f=this.sizeOfBlackWhiteBlackRun(r,s,l,u),g=1,y=r-(l-r);y<0?(g=r/(r-y),y=0):y>=this.image.getWidth()&&(g=(this.image.getWidth()-1-r)/(y-r),y=this.image.getWidth()-1);let x=Math.floor(s-(u-s)*g);return g=1,x<0?(g=s/(s-x),x=0):x>=this.image.getHeight()&&(g=(this.image.getHeight()-1-s)/(x-s),x=this.image.getHeight()-1),y=Math.floor(r+(y-r)*g),f+=this.sizeOfBlackWhiteBlackRun(r,s,y,x),f-1}sizeOfBlackWhiteBlackRun(r,s,l,u){const f=Math.abs(u-s)>Math.abs(l-r);if(f){let H=r;r=s,s=H,H=l,l=u,u=H}const g=Math.abs(l-r),y=Math.abs(u-s);let x=-g/2;const C=r<l?1:-1,I=s<u?1:-1;let M=0;const L=l+C;for(let H=r,J=s;H!==L;H+=C){const ee=f?J:H,ae=f?H:J;if(M===1===this.image.get(ee,ae)){if(M===2)return rt.distance(H,J,r,s);M++}if(x+=y,x>0){if(J===u)break;J+=I,x-=g}}return M===2?rt.distance(l+C,u,r,s):NaN}findAlignmentInRegion(r,s,l,u){const f=Math.floor(u*r),g=Math.max(0,s-f),y=Math.min(this.image.getWidth()-1,s+f);if(y-g<r*3)throw new oe("Alignment top exceeds estimated module size.");const x=Math.max(0,l-f),C=Math.min(this.image.getHeight()-1,l+f);if(C-x<r*3)throw new oe("Alignment bottom exceeds estimated module size.");return new Xr(this.image,g,x,y-g,C-x,r,this.resultPointCallback).find()}}class Wr{constructor(){this.decoder=new Ss}getDecoder(){return this.decoder}decode(r,s){let l,u;if(s!=null&&s.get(ze.PURE_BARCODE)!==void 0){const x=Wr.extractPureBits(r.getBlackMatrix());l=this.decoder.decodeBitMatrix(x,s),u=Wr.NO_POINTS}else{const x=new Yr(r.getBlackMatrix()).detect(s);l=this.decoder.decodeBitMatrix(x.getBits(),s),u=x.getPoints()}l.getOther()instanceof Oo&&l.getOther().applyMirroredCorrection(u);const f=new we(l.getText(),l.getRawBytes(),void 0,u,ye.QR_CODE,void 0),g=l.getByteSegments();g!==null&&f.putMetadata(et.BYTE_SEGMENTS,g);const y=l.getECLevel();return y!==null&&f.putMetadata(et.ERROR_CORRECTION_LEVEL,y),l.hasStructuredAppend()&&(f.putMetadata(et.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),f.putMetadata(et.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),f}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(s===null||l===null)throw new oe;const u=this.moduleSize(s,r);let f=s[1],g=l[1],y=s[0],x=l[0];if(y>=x||f>=g)throw new oe;if(g-f!==x-y&&(x=y+(g-f),x>=r.getWidth()))throw new oe;const C=Math.round((x-y+1)/u),I=Math.round((g-f+1)/u);if(C<=0||I<=0)throw new oe;if(I!==C)throw new oe;const M=Math.floor(u/2);f+=M,y+=M;const L=y+Math.floor((C-1)*u)-x;if(L>0){if(L>M)throw new oe;y-=L}const H=f+Math.floor((I-1)*u)-g;if(H>0){if(H>M)throw new oe;f-=H}const J=new Qe(C,I);for(let ee=0;ee<I;ee++){const ae=f+Math.floor(ee*u);for(let _e=0;_e<C;_e++)r.get(y+Math.floor(_e*u),ae)&&J.set(_e,ee)}return J}static moduleSize(r,s){const l=s.getHeight(),u=s.getWidth();let f=r[0],g=r[1],y=!0,x=0;for(;f<u&&g<l;){if(y!==s.get(f,g)){if(++x===5)break;y=!y}f++,g++}if(f===u||g===l)throw new oe;return(f-r[0])/7}}Wr.NO_POINTS=new Array;class st{PDF417Common(){}static getBitCountSum(r){return rt.sum(r)}static toIntArray(r){if(r==null||!r.length)return st.EMPTY_INT_ARRAY;const s=new Int32Array(r.length);let l=0;for(const u of r)s[l++]=u;return s}static getCodeword(r){const s=Oe.binarySearch(st.SYMBOL_TABLE,r&262143);return s<0?-1:(st.CODEWORD_TABLE[s]-1)%st.NUMBER_OF_CODEWORDS}}st.NUMBER_OF_CODEWORDS=929,st.MAX_CODEWORDS_IN_BARCODE=st.NUMBER_OF_CODEWORDS-1,st.MIN_ROWS_IN_BARCODE=3,st.MAX_ROWS_IN_BARCODE=90,st.MODULES_IN_CODEWORD=17,st.MODULES_IN_STOP_PATTERN=18,st.BARS_IN_MODULE=8,st.EMPTY_INT_ARRAY=new Int32Array([]),st.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),st.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Rs{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class ct{static detectMultiple(r,s,l){let u=r.getBlackMatrix(),f=ct.detect(l,u);return f.length||(u=u.clone(),u.rotate180(),f=ct.detect(l,u)),new Rs(u,f)}static detect(r,s){const l=new Array;let u=0,f=0,g=!1;for(;u<s.getHeight();){const y=ct.findVertices(s,u,f);if(y[0]==null&&y[3]==null){if(!g)break;g=!1,f=0;for(const x of l)x[1]!=null&&(u=Math.trunc(Math.max(u,x[1].getY()))),x[3]!=null&&(u=Math.max(u,Math.trunc(x[3].getY())));u+=ct.ROW_STEP;continue}if(g=!0,l.push(y),!r)break;y[2]!=null?(f=Math.trunc(y[2].getX()),u=Math.trunc(y[2].getY())):(f=Math.trunc(y[4].getX()),u=Math.trunc(y[4].getY()))}return l}static findVertices(r,s,l){const u=r.getHeight(),f=r.getWidth(),g=new Array(8);return ct.copyToResult(g,ct.findRowsWithPattern(r,u,f,s,l,ct.START_PATTERN),ct.INDEXES_START_PATTERN),g[4]!=null&&(l=Math.trunc(g[4].getX()),s=Math.trunc(g[4].getY())),ct.copyToResult(g,ct.findRowsWithPattern(r,u,f,s,l,ct.STOP_PATTERN),ct.INDEXES_STOP_PATTERN),g}static copyToResult(r,s,l){for(let u=0;u<l.length;u++)r[l[u]]=s[u]}static findRowsWithPattern(r,s,l,u,f,g){const y=new Array(4);let x=!1;const C=new Int32Array(g.length);for(;u<s;u+=ct.ROW_STEP){let M=ct.findGuardPattern(r,f,u,l,!1,g,C);if(M!=null){for(;u>0;){const L=ct.findGuardPattern(r,f,--u,l,!1,g,C);if(L!=null)M=L;else{u++;break}}y[0]=new je(M[0],u),y[1]=new je(M[1],u),x=!0;break}}let I=u+1;if(x){let M=0,L=Int32Array.from([Math.trunc(y[0].getX()),Math.trunc(y[1].getX())]);for(;I<s;I++){const H=ct.findGuardPattern(r,L[0],I,l,!1,g,C);if(H!=null&&Math.abs(L[0]-H[0])<ct.MAX_PATTERN_DRIFT&&Math.abs(L[1]-H[1])<ct.MAX_PATTERN_DRIFT)L=H,M=0;else{if(M>ct.SKIPPED_ROW_COUNT_MAX)break;M++}}I-=M+1,y[2]=new je(L[0],I),y[3]=new je(L[1],I)}return I-u<ct.BARCODE_MIN_HEIGHT&&Oe.fill(y,null),y}static findGuardPattern(r,s,l,u,f,g,y){Oe.fillWithin(y,0,y.length,0);let x=s,C=0;for(;r.get(x,l)&&x>0&&C++<ct.MAX_PIXEL_DRIFT;)x--;let I=x,M=0,L=g.length;for(let H=f;I<u;I++)if(r.get(I,l)!==H)y[M]++;else{if(M===L-1){if(ct.patternMatchVariance(y,g,ct.MAX_INDIVIDUAL_VARIANCE)<ct.MAX_AVG_VARIANCE)return new Int32Array([x,I]);x+=y[0]+y[1],ie.arraycopy(y,2,y,0,M-1),y[M-1]=0,y[M]=0,M--}else M++;y[M]=1,H=!H}return M===L-1&&ct.patternMatchVariance(y,g,ct.MAX_INDIVIDUAL_VARIANCE)<ct.MAX_AVG_VARIANCE?new Int32Array([x,I-1]):null}static patternMatchVariance(r,s,l){let u=r.length,f=0,g=0;for(let C=0;C<u;C++)f+=r[C],g+=s[C];if(f<g)return 1/0;let y=f/g;l*=y;let x=0;for(let C=0;C<u;C++){let I=r[C],M=s[C]*y,L=I>M?I-M:M-I;if(L>l)return 1/0;x+=L}return x/f}}ct.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ct.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ct.MAX_AVG_VARIANCE=.42,ct.MAX_INDIVIDUAL_VARIANCE=.8,ct.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ct.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ct.MAX_PIXEL_DRIFT=3,ct.MAX_PATTERN_DRIFT=5,ct.SKIPPED_ROW_COUNT_MAX=25,ct.ROW_STEP=5,ct.BARCODE_MIN_HEIGHT=10;class fn{constructor(r,s){if(s.length===0)throw new O;this.field=r;let l=s.length;if(l>1&&s[0]===0){let u=1;for(;u<l&&s[u]===0;)u++;u===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-u),ie.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let u=0;for(let f of this.coefficients)u=this.field.add(u,f);return u}let s=this.coefficients[0],l=this.coefficients.length;for(let u=1;u<l;u++)s=this.field.add(this.field.multiply(r,s),this.coefficients[u]);return s}add(r){if(!this.field.equals(r.field))throw new O("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,l=r.coefficients;if(s.length>l.length){let g=s;s=l,l=g}let u=new Int32Array(l.length),f=l.length-s.length;ie.arraycopy(l,0,u,0,f);for(let g=f;g<l.length;g++)u[g]=this.field.add(s[g-f],l[g]);return new fn(this.field,u)}subtract(r){if(!this.field.equals(r.field))throw new O("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof fn?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new O("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new fn(this.field,new Int32Array([0]));let s=this.coefficients,l=s.length,u=r.coefficients,f=u.length,g=new Int32Array(l+f-1);for(let y=0;y<l;y++){let x=s[y];for(let C=0;C<f;C++)g[y+C]=this.field.add(g[y+C],this.field.multiply(x,u[C]))}return new fn(this.field,g)}negative(){let r=this.coefficients.length,s=new Int32Array(r);for(let l=0;l<r;l++)s[l]=this.field.subtract(0,this.coefficients[l]);return new fn(this.field,s)}multiplyScalar(r){if(r===0)return new fn(this.field,new Int32Array([0]));if(r===1)return this;let s=this.coefficients.length,l=new Int32Array(s);for(let u=0;u<s;u++)l[u]=this.field.multiply(this.coefficients[u],r);return new fn(this.field,l)}multiplyByMonomial(r,s){if(r<0)throw new O;if(s===0)return new fn(this.field,new Int32Array([0]));let l=this.coefficients.length,u=new Int32Array(l+r);for(let f=0;f<l;f++)u[f]=this.field.multiply(this.coefficients[f],s);return new fn(this.field,u)}toString(){let r=new G;for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);l!==0&&(l<0?(r.append(" - "),l=-l):r.length()>0&&r.append(" + "),(s===0||l!==1)&&r.append(l),s!==0&&(s===1?r.append("x"):(r.append("x^"),r.append(s))))}return r.toString()}}class Ys{add(r,s){return(r+s)%this.modulus}subtract(r,s){return(this.modulus+r-s)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new O;return this.logTable[r]}inverse(r){if(r===0)throw new kn;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class sn extends Ys{constructor(r,s){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let l=1;for(let u=0;u<r;u++)this.expTable[u]=l,l=l*s%r;for(let u=0;u<r-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new fn(this,new Int32Array([0])),this.one=new fn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new O;if(s===0)return this.zero;let l=new Int32Array(r+1);return l[0]=s,new fn(this,l)}}sn.PDF417_GF=new sn(st.NUMBER_OF_CODEWORDS,3);class Oi{constructor(){this.field=sn.PDF417_GF}decode(r,s,l){let u=new fn(this.field,r),f=new Int32Array(s),g=!1;for(let J=s;J>0;J--){let ee=u.evaluateAt(this.field.exp(J));f[s-J]=ee,ee!==0&&(g=!0)}if(!g)return 0;let y=this.field.getOne();if(l!=null)for(const J of l){let ee=this.field.exp(r.length-1-J),ae=new fn(this.field,new Int32Array([this.field.subtract(0,ee),1]));y=y.multiply(ae)}let x=new fn(this.field,f),C=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),x,s),I=C[0],M=C[1],L=this.findErrorLocations(I),H=this.findErrorMagnitudes(M,I,L);for(let J=0;J<L.length;J++){let ee=r.length-1-this.field.log(L[J]);if(ee<0)throw Y.getChecksumInstance();r[ee]=this.field.subtract(r[ee],H[J])}return L.length}runEuclideanAlgorithm(r,s,l){if(r.getDegree()<s.getDegree()){let L=r;r=s,s=L}let u=r,f=s,g=this.field.getZero(),y=this.field.getOne();for(;f.getDegree()>=Math.round(l/2);){let L=u,H=g;if(u=f,g=y,u.isZero())throw Y.getChecksumInstance();f=L;let J=this.field.getZero(),ee=u.getCoefficient(u.getDegree()),ae=this.field.inverse(ee);for(;f.getDegree()>=u.getDegree()&&!f.isZero();){let _e=f.getDegree()-u.getDegree(),Pe=this.field.multiply(f.getCoefficient(f.getDegree()),ae);J=J.add(this.field.buildMonomial(_e,Pe)),f=f.subtract(u.multiplyByMonomial(_e,Pe))}y=J.multiply(g).subtract(H).negative()}let x=y.getCoefficient(0);if(x===0)throw Y.getChecksumInstance();let C=this.field.inverse(x),I=y.multiply(C),M=f.multiply(C);return[I,M]}findErrorLocations(r){let s=r.getDegree(),l=new Int32Array(s),u=0;for(let f=1;f<this.field.getSize()&&u<s;f++)r.evaluateAt(f)===0&&(l[u]=this.field.inverse(f),u++);if(u!==s)throw Y.getChecksumInstance();return l}findErrorMagnitudes(r,s,l){let u=s.getDegree(),f=new Int32Array(u);for(let C=1;C<=u;C++)f[u-C]=this.field.multiply(C,s.getCoefficient(C));let g=new fn(this.field,f),y=l.length,x=new Int32Array(y);for(let C=0;C<y;C++){let I=this.field.inverse(l[C]),M=this.field.subtract(0,r.evaluateAt(I)),L=this.field.inverse(g.evaluateAt(I));x[C]=this.field.multiply(M,L)}return x}}class Di{constructor(r,s,l,u,f){r instanceof Di?this.constructor_2(r):this.constructor_1(r,s,l,u,f)}constructor_1(r,s,l,u,f){const g=s==null||l==null,y=u==null||f==null;if(g&&y)throw new oe;g?(s=new je(0,u.getY()),l=new je(0,f.getY())):y&&(u=new je(r.getWidth()-1,s.getY()),f=new je(r.getWidth()-1,l.getY())),this.image=r,this.topLeft=s,this.bottomLeft=l,this.topRight=u,this.bottomRight=f,this.minX=Math.trunc(Math.min(s.getX(),l.getX())),this.maxX=Math.trunc(Math.max(u.getX(),f.getX())),this.minY=Math.trunc(Math.min(s.getY(),u.getY())),this.maxY=Math.trunc(Math.max(l.getY(),f.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,s){return r==null?s:s==null?r:new Di(r.image,r.topLeft,r.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(r,s,l){let u=this.topLeft,f=this.bottomLeft,g=this.topRight,y=this.bottomRight;if(r>0){let x=l?this.topLeft:this.topRight,C=Math.trunc(x.getY()-r);C<0&&(C=0);let I=new je(x.getX(),C);l?u=I:g=I}if(s>0){let x=l?this.bottomLeft:this.bottomRight,C=Math.trunc(x.getY()+s);C>=this.image.getHeight()&&(C=this.image.getHeight()-1);let I=new je(x.getX(),C);l?f=I:y=I}return new Di(this.image,u,f,g,y)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ws{constructor(r,s,l,u){this.columnCount=r,this.errorCorrectionLevel=u,this.rowCountUpperPart=s,this.rowCountLowerPart=l,this.rowCount=s+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class gs{constructor(){this.buffer=""}static form(r,s){let l=-1;function u(g,y,x,C,I,M){if(g==="%%")return"%";if(s[++l]===void 0)return;g=C?parseInt(C.substr(1)):void 0;let L=I?parseInt(I.substr(1)):void 0,H;switch(M){case"s":H=s[l];break;case"c":H=s[l][0];break;case"f":H=parseFloat(s[l]).toFixed(g);break;case"p":H=parseFloat(s[l]).toPrecision(g);break;case"e":H=parseFloat(s[l]).toExponential(g);break;case"x":H=parseInt(s[l]).toString(L||16);break;case"d":H=parseFloat(parseInt(s[l],L||10).toPrecision(g)).toFixed(0);break}H=typeof H=="object"?JSON.stringify(H):(+H).toString(L);let J=parseInt(x),ee=x&&x[0]+""=="0"?"0":" ";for(;H.length<J;)H=y!==void 0?H+ee:ee+H;return H}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(f,u)}format(r,...s){this.buffer+=gs.form(r,s)}toString(){return this.buffer}}class Mi{constructor(r){this.boundingBox=new Di(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let s=this.getCodeword(r);if(s!=null)return s;for(let l=1;l<Mi.MAX_NEARBY_DISTANCE;l++){let u=this.imageRowToCodewordIndex(r)-l;if(u>=0&&(s=this.codewords[u],s!=null)||(u=this.imageRowToCodewordIndex(r)+l,u<this.codewords.length&&(s=this.codewords[u],s!=null)))return s}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,s){this.codewords[this.imageRowToCodewordIndex(r)]=s}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new gs;let s=0;for(const l of this.codewords){if(l==null){r.format("%3d:    |   %n",s++);continue}r.format("%3d: %3d|%3d%n",s++,l.getRowNumber(),l.getValue())}return r.toString()}}Mi.MAX_NEARBY_DISTANCE=5;class oi{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let s=this.values.get(r);s==null&&(s=0),s++,this.values.set(r,s)}getValue(){let r=-1,s=new Array;for(const[l,u]of this.values.entries()){const f={getKey:()=>l,getValue:()=>u};f.getValue()>r?(r=f.getValue(),s=[],s.push(f.getKey())):f.getValue()===r&&s.push(f.getKey())}return st.toIntArray(s)}getConfidence(r){return this.values.get(r)}}class xi extends Mi{constructor(r,s){super(r),this._isLeft=s}setRowNumbers(){for(let r of this.getCodewords())r?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,r);let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),f=this._isLeft?l.getBottomLeft():l.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=this.imageRowToCodewordIndex(Math.trunc(f.getY())),x=-1,C=1,I=0;for(let M=g;M<y;M++){if(s[M]==null)continue;let L=s[M],H=L.getRowNumber()-x;if(H===0)I++;else if(H===1)C=Math.max(C,I),I=1,x=L.getRowNumber();else if(H<0||L.getRowNumber()>=r.getRowCount()||H>M)s[M]=null;else{let J;C>2?J=(C-2)*H:J=H;let ee=J>=M;for(let ae=1;ae<=J&&!ee;ae++)ee=s[M-ae]!=null;ee?s[M]=null:(x=L.getRowNumber(),I=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let s=new Int32Array(r.getRowCount());for(let l of this.getCodewords())if(l!=null){let u=l.getRowNumber();if(u>=s.length)continue;s[u]++}return s}adjustIncompleteIndicatorColumnRowNumbers(r){let s=this.getBoundingBox(),l=this._isLeft?s.getTopLeft():s.getTopRight(),u=this._isLeft?s.getBottomLeft():s.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(l.getY())),g=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=this.getCodewords(),x=-1;for(let C=f;C<g;C++){if(y[C]==null)continue;let I=y[C];I.setRowNumberAsRowIndicatorColumn();let M=I.getRowNumber()-x;M===0||(M===1?x=I.getRowNumber():I.getRowNumber()>=r.getRowCount()?y[C]=null:x=I.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),s=new oi,l=new oi,u=new oi,f=new oi;for(let y of r){if(y==null)continue;y.setRowNumberAsRowIndicatorColumn();let x=y.getValue()%30,C=y.getRowNumber();switch(this._isLeft||(C+=2),C%3){case 0:l.setValue(x*3+1);break;case 1:f.setValue(x/3),u.setValue(x%3);break;case 2:s.setValue(x+1);break}}if(s.getValue().length===0||l.getValue().length===0||u.getValue().length===0||f.getValue().length===0||s.getValue()[0]<1||l.getValue()[0]+u.getValue()[0]<st.MIN_ROWS_IN_BARCODE||l.getValue()[0]+u.getValue()[0]>st.MAX_ROWS_IN_BARCODE)return null;let g=new Ws(s.getValue()[0],l.getValue()[0],u.getValue()[0],f.getValue()[0]);return this.removeIncorrectCodewords(r,g),g}removeIncorrectCodewords(r,s){for(let l=0;l<r.length;l++){let u=r[l];if(r[l]==null)continue;let f=u.getValue()%30,g=u.getRowNumber();if(g>s.getRowCount()){r[l]=null;continue}switch(this._isLeft||(g+=2),g%3){case 0:f*3+1!==s.getRowCountUpperPart()&&(r[l]=null);break;case 1:(Math.trunc(f/3)!==s.getErrorCorrectionLevel()||f%3!==s.getRowCountLowerPart())&&(r[l]=null);break;case 2:f+1!==s.getColumnCount()&&(r[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Qn{constructor(r,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=st.MAX_CODEWORDS_IN_BARCODE,s;do s=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let l=this.detectionResultColumns[s].getCodewords();for(let u=0;u<l.length;u++)l[u]!=null&&(l[u].hasValidRowNumber()||this.adjustRowNumbers(s,u,l))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<r.length;l++)if(r[l]!=null&&s[l]!=null&&r[l].getRowNumber()===s[l].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let f=this.detectionResultColumns[u].getCodewords()[l];f!=null&&(f.setRowNumber(r[l].getRowNumber()),f.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<s.length;l++){if(s[l]==null)continue;let u=s[l].getRowNumber(),f=0;for(let g=this.barcodeColumnCount+1;g>0&&f<this.ADJUST_ROW_NUMBER_SKIP;g--){let y=this.detectionResultColumns[g].getCodewords()[l];y!=null&&(f=Qn.adjustRowNumberIfValid(u,f,y),y.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,s=this.detectionResultColumns[0].getCodewords();for(let l=0;l<s.length;l++){if(s[l]==null)continue;let u=s[l].getRowNumber(),f=0;for(let g=1;g<this.barcodeColumnCount+1&&f<this.ADJUST_ROW_NUMBER_SKIP;g++){let y=this.detectionResultColumns[g].getCodewords()[l];y!=null&&(f=Qn.adjustRowNumberIfValid(u,f,y),y.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,s,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(r)?(l.setRowNumber(r),s=0):++s),s}adjustRowNumbers(r,s,l){if(!this.detectionResultColumns[r-1])return;let u=l[s],f=this.detectionResultColumns[r-1].getCodewords(),g=f;this.detectionResultColumns[r+1]!=null&&(g=this.detectionResultColumns[r+1].getCodewords());let y=new Array(14);y[2]=f[s],y[3]=g[s],s>0&&(y[0]=l[s-1],y[4]=f[s-1],y[5]=g[s-1]),s>1&&(y[8]=l[s-2],y[10]=f[s-2],y[11]=g[s-2]),s<l.length-1&&(y[1]=l[s+1],y[6]=f[s+1],y[7]=g[s+1]),s<l.length-2&&(y[9]=l[s+2],y[12]=f[s+2],y[13]=g[s+2]);for(let x of y)if(Qn.adjustRowNumber(u,x))return}static adjustRowNumber(r,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===r.getBucket()?(r.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,s){this.detectionResultColumns[r]=s}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new gs;for(let l=0;l<r.getCodewords().length;l++){s.format("CW %3d:",l);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){s.format("    |   ");continue}let f=this.detectionResultColumns[u].getCodewords()[l];if(f==null){s.format("    |   ");continue}s.format(" %3d|%3d",f.getRowNumber(),f.getValue())}s.format("%n")}return s.toString()}}class li{constructor(r,s,l,u){this.rowNumber=li.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(s),this.bucket=Math.trunc(l),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==li.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}li.BARCODE_ROW_UNKNOWN=-1;class Dn{static initialize(){for(let r=0;r<st.SYMBOL_TABLE.length;r++){let s=st.SYMBOL_TABLE[r],l=s&1;for(let u=0;u<st.BARS_IN_MODULE;u++){let f=0;for(;(s&1)===l;)f+=1,s>>=1;l=s&1,Dn.RATIOS_TABLE[r]||(Dn.RATIOS_TABLE[r]=new Array(st.BARS_IN_MODULE)),Dn.RATIOS_TABLE[r][st.BARS_IN_MODULE-u-1]=Math.fround(f/st.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let s=Dn.getDecodedCodewordValue(Dn.sampleBitCounts(r));return s!==-1?s:Dn.getClosestDecodedValue(r)}static sampleBitCounts(r){let s=rt.sum(r),l=new Int32Array(st.BARS_IN_MODULE),u=0,f=0;for(let g=0;g<st.MODULES_IN_CODEWORD;g++){let y=s/(2*st.MODULES_IN_CODEWORD)+g*s/st.MODULES_IN_CODEWORD;f+r[u]<=y&&(f+=r[u],u++),l[u]++}return l}static getDecodedCodewordValue(r){let s=Dn.getBitValue(r);return st.getCodeword(s)===-1?-1:s}static getBitValue(r){let s=0;for(let l=0;l<r.length;l++)for(let u=0;u<r[l];u++)s=s<<1|(l%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(r){let s=rt.sum(r),l=new Array(st.BARS_IN_MODULE);if(s>1)for(let g=0;g<l.length;g++)l[g]=Math.fround(r[g]/s);let u=yn.MAX_VALUE,f=-1;this.bSymbolTableReady||Dn.initialize();for(let g=0;g<Dn.RATIOS_TABLE.length;g++){let y=0,x=Dn.RATIOS_TABLE[g];for(let C=0;C<st.BARS_IN_MODULE;C++){let I=Math.fround(x[C]-l[C]);if(y+=Math.fround(I*I),y>=u)break}y<u&&(u=y,f=st.SYMBOL_TABLE[g])}return f}}Dn.bSymbolTableReady=!1,Dn.RATIOS_TABLE=new Array(st.SYMBOL_TABLE.length).map(D=>new Array(st.BARS_IN_MODULE));class ms{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class Na{static parseLong(r,s=void 0){return parseInt(r,s)}}class ps extends A{}ps.kind="NullPointerException";class Oa{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,s,l){if(r==null)throw new ps;if(s<0||s>r.length||l<0||s+l>r.length||s+l<0)throw new ge;if(l===0)return;for(let u=0;u<l;u++)this.write(r[s+u])}flush(){}close(){}}class Wi extends A{}class Da extends Oa{constructor(r=32){if(super(),this.count=0,r<0)throw new O("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let l=this.buf.length<<1;if(l-r<0&&(l=r),l<0){if(r<0)throw new Wi;l=pe.MAX_VALUE}this.buf=Oe.copyOfUint8Array(this.buf,l)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,s,l){if(s<0||s>r.length||l<0||s+l-r.length>0)throw new ge;this.ensureCapacity(this.count+l),ie.arraycopy(r,s,this.buf,this.count,l),this.count+=l}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return Oe.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var $t;(function(D){D[D.ALPHA=0]="ALPHA",D[D.LOWER=1]="LOWER",D[D.MIXED=2]="MIXED",D[D.PUNCT=3]="PUNCT",D[D.ALPHA_SHIFT=4]="ALPHA_SHIFT",D[D.PUNCT_SHIFT=5]="PUNCT_SHIFT"})($t||($t={}));function Ns(){if(typeof window<"u")return window.BigInt||null;if(typeof Hh<"u")return Hh.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ks;function Li(D){if(typeof Ks>"u"&&(Ks=Ns()),Ks===null)throw new Error("BigInt is not supported!");return Ks(D)}function Qs(){let D=[];D[0]=Li(1);let r=Li(900);D[1]=r;for(let s=2;s<16;s++)D[s]=D[s-1]*r;return D}class Ee{static decode(r,s){let l=new G(""),u=P.ISO8859_1;l.enableDecoding(u);let f=1,g=r[f++],y=new ms;for(;f<r[0];){switch(g){case Ee.TEXT_COMPACTION_MODE_LATCH:f=Ee.textCompaction(r,f,l);break;case Ee.BYTE_COMPACTION_MODE_LATCH:case Ee.BYTE_COMPACTION_MODE_LATCH_6:f=Ee.byteCompaction(g,r,u,f,l);break;case Ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[f++]);break;case Ee.NUMERIC_COMPACTION_MODE_LATCH:f=Ee.numericCompaction(r,f,l);break;case Ee.ECI_CHARSET:P.getCharacterSetECIByValue(r[f++]);break;case Ee.ECI_GENERAL_PURPOSE:f+=2;break;case Ee.ECI_USER_DEFINED:f++;break;case Ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK:f=Ee.decodeMacroBlock(r,f,y);break;case Ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ee.MACRO_PDF417_TERMINATOR:throw new F;default:f--,f=Ee.textCompaction(r,f,l);break}if(f<r.length)g=r[f++];else throw F.getFormatInstance()}if(l.length()===0)throw F.getFormatInstance();let x=new lt(null,l.toString(),null,s);return x.setOther(y),x}static decodeMacroBlock(r,s,l){if(s+Ee.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw F.getFormatInstance();let u=new Int32Array(Ee.NUMBER_OF_SEQUENCE_CODEWORDS);for(let y=0;y<Ee.NUMBER_OF_SEQUENCE_CODEWORDS;y++,s++)u[y]=r[s];l.setSegmentIndex(pe.parseInt(Ee.decodeBase900toBase10(u,Ee.NUMBER_OF_SEQUENCE_CODEWORDS)));let f=new G;s=Ee.textCompaction(r,s,f),l.setFileId(f.toString());let g=-1;for(r[s]===Ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(g=s+1);s<r[0];)switch(r[s]){case Ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,r[s]){case Ee.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let y=new G;s=Ee.textCompaction(r,s+1,y),l.setFileName(y.toString());break;case Ee.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let x=new G;s=Ee.textCompaction(r,s+1,x),l.setSender(x.toString());break;case Ee.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let C=new G;s=Ee.textCompaction(r,s+1,C),l.setAddressee(C.toString());break;case Ee.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let I=new G;s=Ee.numericCompaction(r,s+1,I),l.setSegmentCount(pe.parseInt(I.toString()));break;case Ee.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let M=new G;s=Ee.numericCompaction(r,s+1,M),l.setTimestamp(Na.parseLong(M.toString()));break;case Ee.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let L=new G;s=Ee.numericCompaction(r,s+1,L),l.setChecksum(pe.parseInt(L.toString()));break;case Ee.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let H=new G;s=Ee.numericCompaction(r,s+1,H),l.setFileSize(Na.parseLong(H.toString()));break;default:throw F.getFormatInstance()}break;case Ee.MACRO_PDF417_TERMINATOR:s++,l.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(g!==-1){let y=s-g;l.isLastSegment()&&y--,l.setOptionalData(Oe.copyOfRange(r,g,g+y))}return s}static textCompaction(r,s,l){let u=new Int32Array((r[0]-s)*2),f=new Int32Array((r[0]-s)*2),g=0,y=!1;for(;s<r[0]&&!y;){let x=r[s++];if(x<Ee.TEXT_COMPACTION_MODE_LATCH)u[g]=x/30,u[g+1]=x%30,g+=2;else switch(x){case Ee.TEXT_COMPACTION_MODE_LATCH:u[g++]=Ee.TEXT_COMPACTION_MODE_LATCH;break;case Ee.BYTE_COMPACTION_MODE_LATCH:case Ee.BYTE_COMPACTION_MODE_LATCH_6:case Ee.NUMERIC_COMPACTION_MODE_LATCH:case Ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ee.MACRO_PDF417_TERMINATOR:s--,y=!0;break;case Ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[g]=Ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,x=r[s++],f[g]=x,g++;break}}return Ee.decodeTextCompaction(u,f,g,l),s}static decodeTextCompaction(r,s,l,u){let f=$t.ALPHA,g=$t.ALPHA,y=0;for(;y<l;){let x=r[y],C="";switch(f){case $t.ALPHA:if(x<26)C=String.fromCharCode(65+x);else switch(x){case 26:C=" ";break;case Ee.LL:f=$t.LOWER;break;case Ee.ML:f=$t.MIXED;break;case Ee.PS:g=f,f=$t.PUNCT_SHIFT;break;case Ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case Ee.TEXT_COMPACTION_MODE_LATCH:f=$t.ALPHA;break}break;case $t.LOWER:if(x<26)C=String.fromCharCode(97+x);else switch(x){case 26:C=" ";break;case Ee.AS:g=f,f=$t.ALPHA_SHIFT;break;case Ee.ML:f=$t.MIXED;break;case Ee.PS:g=f,f=$t.PUNCT_SHIFT;break;case Ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case Ee.TEXT_COMPACTION_MODE_LATCH:f=$t.ALPHA;break}break;case $t.MIXED:if(x<Ee.PL)C=Ee.MIXED_CHARS[x];else switch(x){case Ee.PL:f=$t.PUNCT;break;case 26:C=" ";break;case Ee.LL:f=$t.LOWER;break;case Ee.AL:f=$t.ALPHA;break;case Ee.PS:g=f,f=$t.PUNCT_SHIFT;break;case Ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case Ee.TEXT_COMPACTION_MODE_LATCH:f=$t.ALPHA;break}break;case $t.PUNCT:if(x<Ee.PAL)C=Ee.PUNCT_CHARS[x];else switch(x){case Ee.PAL:f=$t.ALPHA;break;case Ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case Ee.TEXT_COMPACTION_MODE_LATCH:f=$t.ALPHA;break}break;case $t.ALPHA_SHIFT:if(f=g,x<26)C=String.fromCharCode(65+x);else switch(x){case 26:C=" ";break;case Ee.TEXT_COMPACTION_MODE_LATCH:f=$t.ALPHA;break}break;case $t.PUNCT_SHIFT:if(f=g,x<Ee.PAL)C=Ee.PUNCT_CHARS[x];else switch(x){case Ee.PAL:f=$t.ALPHA;break;case Ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case Ee.TEXT_COMPACTION_MODE_LATCH:f=$t.ALPHA;break}break}C!==""&&u.append(C),y++}}static byteCompaction(r,s,l,u,f){let g=new Da,y=0,x=0,C=!1;switch(r){case Ee.BYTE_COMPACTION_MODE_LATCH:let I=new Int32Array(6),M=s[u++];for(;u<s[0]&&!C;)switch(I[y++]=M,x=900*x+M,M=s[u++],M){case Ee.TEXT_COMPACTION_MODE_LATCH:case Ee.BYTE_COMPACTION_MODE_LATCH:case Ee.NUMERIC_COMPACTION_MODE_LATCH:case Ee.BYTE_COMPACTION_MODE_LATCH_6:case Ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ee.MACRO_PDF417_TERMINATOR:u--,C=!0;break;default:if(y%5===0&&y>0){for(let L=0;L<6;++L)g.write(Number(Li(x)>>Li(8*(5-L))));x=0,y=0}break}u===s[0]&&M<Ee.TEXT_COMPACTION_MODE_LATCH&&(I[y++]=M);for(let L=0;L<y;L++)g.write(I[L]);break;case Ee.BYTE_COMPACTION_MODE_LATCH_6:for(;u<s[0]&&!C;){let L=s[u++];if(L<Ee.TEXT_COMPACTION_MODE_LATCH)y++,x=900*x+L;else switch(L){case Ee.TEXT_COMPACTION_MODE_LATCH:case Ee.BYTE_COMPACTION_MODE_LATCH:case Ee.NUMERIC_COMPACTION_MODE_LATCH:case Ee.BYTE_COMPACTION_MODE_LATCH_6:case Ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ee.MACRO_PDF417_TERMINATOR:u--,C=!0;break}if(y%5===0&&y>0){for(let H=0;H<6;++H)g.write(Number(Li(x)>>Li(8*(5-H))));x=0,y=0}}break}return f.append(q.decode(g.toByteArray(),l)),u}static numericCompaction(r,s,l){let u=0,f=!1,g=new Int32Array(Ee.MAX_NUMERIC_CODEWORDS);for(;s<r[0]&&!f;){let y=r[s++];if(s===r[0]&&(f=!0),y<Ee.TEXT_COMPACTION_MODE_LATCH)g[u]=y,u++;else switch(y){case Ee.TEXT_COMPACTION_MODE_LATCH:case Ee.BYTE_COMPACTION_MODE_LATCH:case Ee.BYTE_COMPACTION_MODE_LATCH_6:case Ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ee.MACRO_PDF417_TERMINATOR:s--,f=!0;break}(u%Ee.MAX_NUMERIC_CODEWORDS===0||y===Ee.NUMERIC_COMPACTION_MODE_LATCH||f)&&u>0&&(l.append(Ee.decodeBase900toBase10(g,u)),u=0)}return s}static decodeBase900toBase10(r,s){let l=Li(0);for(let f=0;f<s;f++)l+=Ee.EXP900[s-f-1]*Li(r[f]);let u=l.toString();if(u.charAt(0)!=="1")throw new F;return u.substring(1)}}Ee.TEXT_COMPACTION_MODE_LATCH=900,Ee.BYTE_COMPACTION_MODE_LATCH=901,Ee.NUMERIC_COMPACTION_MODE_LATCH=902,Ee.BYTE_COMPACTION_MODE_LATCH_6=924,Ee.ECI_USER_DEFINED=925,Ee.ECI_GENERAL_PURPOSE=926,Ee.ECI_CHARSET=927,Ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Ee.MACRO_PDF417_TERMINATOR=922,Ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Ee.MAX_NUMERIC_CODEWORDS=15,Ee.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Ee.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Ee.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Ee.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Ee.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Ee.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Ee.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Ee.PL=25,Ee.LL=27,Ee.AS=27,Ee.ML=28,Ee.AL=28,Ee.PS=29,Ee.PAL=29,Ee.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Ee.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Ee.EXP900=Ns()?Qs():[],Ee.NUMBER_OF_SEQUENCE_CODEWORDS=2;class xt{constructor(){}static decode(r,s,l,u,f,g,y){let x=new Di(r,s,l,u,f),C=null,I=null,M;for(let J=!0;;J=!1){if(s!=null&&(C=xt.getRowIndicatorColumn(r,x,s,!0,g,y)),u!=null&&(I=xt.getRowIndicatorColumn(r,x,u,!1,g,y)),M=xt.merge(C,I),M==null)throw oe.getNotFoundInstance();let ee=M.getBoundingBox();if(J&&ee!=null&&(ee.getMinY()<x.getMinY()||ee.getMaxY()>x.getMaxY()))x=ee;else break}M.setBoundingBox(x);let L=M.getBarcodeColumnCount()+1;M.setDetectionResultColumn(0,C),M.setDetectionResultColumn(L,I);let H=C!=null;for(let J=1;J<=L;J++){let ee=H?J:L-J;if(M.getDetectionResultColumn(ee)!==void 0)continue;let ae;ee===0||ee===L?ae=new xi(x,ee===0):ae=new Mi(x),M.setDetectionResultColumn(ee,ae);let _e=-1,Pe=_e;for(let Me=x.getMinY();Me<=x.getMaxY();Me++){if(_e=xt.getStartColumn(M,ee,Me,H),_e<0||_e>x.getMaxX()){if(Pe===-1)continue;_e=Pe}let Ne=xt.detectCodeword(r,x.getMinX(),x.getMaxX(),H,_e,Me,g,y);Ne!=null&&(ae.setCodeword(Me,Ne),Pe=_e,g=Math.min(g,Ne.getWidth()),y=Math.max(y,Ne.getWidth()))}}return xt.createDecoderResult(M)}static merge(r,s){if(r==null&&s==null)return null;let l=xt.getBarcodeMetadata(r,s);if(l==null)return null;let u=Di.merge(xt.adjustBoundingBox(r),xt.adjustBoundingBox(s));return new Qn(l,u)}static adjustBoundingBox(r){if(r==null)return null;let s=r.getRowHeights();if(s==null)return null;let l=xt.getMax(s),u=0;for(let y of s)if(u+=l-y,y>0)break;let f=r.getCodewords();for(let y=0;u>0&&f[y]==null;y++)u--;let g=0;for(let y=s.length-1;y>=0&&(g+=l-s[y],!(s[y]>0));y--);for(let y=f.length-1;g>0&&f[y]==null;y--)g--;return r.getBoundingBox().addMissingRows(u,g,r.isLeft())}static getMax(r){let s=-1;for(let l of r)s=Math.max(s,l);return s}static getBarcodeMetadata(r,s){let l;if(r==null||(l=r.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let u;return s==null||(u=s.getBarcodeMetadata())==null?l:l.getColumnCount()!==u.getColumnCount()&&l.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&l.getRowCount()!==u.getRowCount()?null:l}static getRowIndicatorColumn(r,s,l,u,f,g){let y=new xi(s,u);for(let x=0;x<2;x++){let C=x===0?1:-1,I=Math.trunc(Math.trunc(l.getX()));for(let M=Math.trunc(Math.trunc(l.getY()));M<=s.getMaxY()&&M>=s.getMinY();M+=C){let L=xt.detectCodeword(r,0,r.getWidth(),u,I,M,f,g);L!=null&&(y.setCodeword(M,L),u?I=L.getStartX():I=L.getEndX())}}return y}static adjustCodewordCount(r,s){let l=s[0][1],u=l.getValue(),f=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-xt.getNumberOfECCodeWords(r.getBarcodeECLevel());if(u.length===0){if(f<1||f>st.MAX_CODEWORDS_IN_BARCODE)throw oe.getNotFoundInstance();l.setValue(f)}else u[0]!==f&&l.setValue(f)}static createDecoderResult(r){let s=xt.createBarcodeMatrix(r);xt.adjustCodewordCount(r,s);let l=new Array,u=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),f=[],g=new Array;for(let x=0;x<r.getBarcodeRowCount();x++)for(let C=0;C<r.getBarcodeColumnCount();C++){let I=s[x][C+1].getValue(),M=x*r.getBarcodeColumnCount()+C;I.length===0?l.push(M):I.length===1?u[M]=I[0]:(g.push(M),f.push(I))}let y=new Array(f.length);for(let x=0;x<y.length;x++)y[x]=f[x];return xt.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),u,st.toIntArray(l),st.toIntArray(g),y)}static createDecoderResultFromAmbiguousValues(r,s,l,u,f){let g=new Int32Array(u.length),y=100;for(;y-- >0;){for(let x=0;x<g.length;x++)s[u[x]]=f[x][g[x]];try{return xt.decodeCodewords(s,r,l)}catch(x){if(!(x instanceof Y))throw x}if(g.length===0)throw Y.getChecksumInstance();for(let x=0;x<g.length;x++)if(g[x]<f[x].length-1){g[x]++;break}else if(g[x]=0,x===g.length-1)throw Y.getChecksumInstance()}throw Y.getChecksumInstance()}static createBarcodeMatrix(r){let s=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let u=0;u<s.length;u++)for(let f=0;f<s[u].length;f++)s[u][f]=new oi;let l=0;for(let u of r.getDetectionResultColumns()){if(u!=null){for(let f of u.getCodewords())if(f!=null){let g=f.getRowNumber();if(g>=0){if(g>=s.length)continue;s[g][l].setValue(f.getValue())}}}l++}return s}static isValidBarcodeColumn(r,s){return s>=0&&s<=r.getBarcodeColumnCount()+1}static getStartColumn(r,s,l,u){let f=u?1:-1,g=null;if(xt.isValidBarcodeColumn(r,s-f)&&(g=r.getDetectionResultColumn(s-f).getCodeword(l)),g!=null)return u?g.getEndX():g.getStartX();if(g=r.getDetectionResultColumn(s).getCodewordNearby(l),g!=null)return u?g.getStartX():g.getEndX();if(xt.isValidBarcodeColumn(r,s-f)&&(g=r.getDetectionResultColumn(s-f).getCodewordNearby(l)),g!=null)return u?g.getEndX():g.getStartX();let y=0;for(;xt.isValidBarcodeColumn(r,s-f);){s-=f;for(let x of r.getDetectionResultColumn(s).getCodewords())if(x!=null)return(u?x.getEndX():x.getStartX())+f*y*(x.getEndX()-x.getStartX());y++}return u?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,s,l,u,f,g,y,x){f=xt.adjustCodewordStartColumn(r,s,l,u,f,g);let C=xt.getModuleBitCount(r,s,l,u,f,g);if(C==null)return null;let I,M=rt.sum(C);if(u)I=f+M;else{for(let J=0;J<C.length/2;J++){let ee=C[J];C[J]=C[C.length-1-J],C[C.length-1-J]=ee}I=f,f=I-M}if(!xt.checkCodewordSkew(M,y,x))return null;let L=Dn.getDecodedValue(C),H=st.getCodeword(L);return H===-1?null:new li(f,I,xt.getCodewordBucketNumber(L),H)}static getModuleBitCount(r,s,l,u,f,g){let y=f,x=new Int32Array(8),C=0,I=u?1:-1,M=u;for(;(u?y<l:y>=s)&&C<x.length;)r.get(y,g)===M?(x[C]++,y+=I):(C++,M=!M);return C===x.length||y===(u?l:s)&&C===x.length-1?x:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,s,l,u,f,g){let y=f,x=u?-1:1;for(let C=0;C<2;C++){for(;(u?y>=s:y<l)&&u===r.get(y,g);){if(Math.abs(f-y)>xt.CODEWORD_SKEW_SIZE)return f;y+=x}x=-x,u=!u}return y}static checkCodewordSkew(r,s,l){return s-xt.CODEWORD_SKEW_SIZE<=r&&r<=l+xt.CODEWORD_SKEW_SIZE}static decodeCodewords(r,s,l){if(r.length===0)throw F.getFormatInstance();let u=1<<s+1,f=xt.correctErrors(r,l,u);xt.verifyCodewordCount(r,u);let g=Ee.decode(r,""+s);return g.setErrorsCorrected(f),g.setErasures(l.length),g}static correctErrors(r,s,l){if(s!=null&&s.length>l/2+xt.MAX_ERRORS||l<0||l>xt.MAX_EC_CODEWORDS)throw Y.getChecksumInstance();return xt.errorCorrection.decode(r,l,s)}static verifyCodewordCount(r,s){if(r.length<4)throw F.getFormatInstance();let l=r[0];if(l>r.length)throw F.getFormatInstance();if(l===0)if(s<r.length)r[0]=r.length-s;else throw F.getFormatInstance()}static getBitCountForCodeword(r){let s=new Int32Array(8),l=0,u=s.length-1;for(;!((r&1)!==l&&(l=r&1,u--,u<0));)s[u]++,r>>=1;return s}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return xt.getCodewordBucketNumber(xt.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let s=new gs;for(let l=0;l<r.length;l++){s.format("Row %2d: ",l);for(let u=0;u<r[l].length;u++){let f=r[l][u];f.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",f.getValue()[0],f.getConfidence(f.getValue()[0]))}s.format("%n")}return s.toString()}}xt.CODEWORD_SKEW_SIZE=2,xt.MAX_ERRORS=3,xt.MAX_EC_CODEWORDS=512,xt.errorCorrection=new Oi;class zn{decode(r,s=null){let l=zn.decode(r,s,!1);if(l==null||l.length===0||l[0]==null)throw oe.getNotFoundInstance();return l[0]}decodeMultiple(r,s=null){try{return zn.decode(r,s,!0)}catch(l){throw l instanceof F||l instanceof Y?oe.getNotFoundInstance():l}}static decode(r,s,l){const u=new Array,f=ct.detectMultiple(r,s,l);for(const g of f.getPoints()){const y=xt.decode(f.getBits(),g[4],g[5],g[6],g[7],zn.getMinCodewordWidth(g),zn.getMaxCodewordWidth(g)),x=new we(y.getText(),y.getRawBytes(),void 0,g,ye.PDF_417);x.putMetadata(et.ERROR_CORRECTION_LEVEL,y.getECLevel());const C=y.getOther();C!=null&&x.putMetadata(et.PDF417_EXTRA_METADATA,C),u.push(x)}return u.map(g=>g)}static getMaxWidth(r,s){return r==null||s==null?0:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMinWidth(r,s){return r==null||s==null?pe.MAX_VALUE:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(zn.getMaxWidth(r[0],r[4]),zn.getMaxWidth(r[6],r[2])*st.MODULES_IN_CODEWORD/st.MODULES_IN_STOP_PATTERN),Math.max(zn.getMaxWidth(r[1],r[5]),zn.getMaxWidth(r[7],r[3])*st.MODULES_IN_CODEWORD/st.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(zn.getMinWidth(r[0],r[4]),zn.getMinWidth(r[6],r[2])*st.MODULES_IN_CODEWORD/st.MODULES_IN_STOP_PATTERN),Math.min(zn.getMinWidth(r[1],r[5]),zn.getMinWidth(r[7],r[3])*st.MODULES_IN_CODEWORD/st.MODULES_IN_STOP_PATTERN)))}reset(){}}class Zs extends A{}Zs.kind="ReaderException";class Do{constructor(r,s){this.verbose=r===!0,s&&this.setHints(s)}decode(r,s){return s&&this.setHints(s),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const s=!o(r)&&r.get(ze.TRY_HARDER)===!0,l=o(r)?null:r.get(ze.POSSIBLE_FORMATS),u=new Array;if(!o(l)){const f=l.some(g=>g===ye.UPC_A||g===ye.UPC_E||g===ye.EAN_13||g===ye.EAN_8||g===ye.CODABAR||g===ye.CODE_39||g===ye.CODE_93||g===ye.CODE_128||g===ye.ITF||g===ye.RSS_14||g===ye.RSS_EXPANDED);f&&!s&&u.push(new Or(r,this.verbose)),l.includes(ye.QR_CODE)&&u.push(new Wr),l.includes(ye.DATA_MATRIX)&&u.push(new Gr),l.includes(ye.AZTEC)&&u.push(new ni),l.includes(ye.PDF_417)&&u.push(new zn),f&&s&&u.push(new Or(r,this.verbose))}u.length===0&&(s||u.push(new Or(r,this.verbose)),u.push(new Wr),u.push(new Gr),u.push(new ni),u.push(new zn),s&&u.push(new Or(r,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new Zs("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(r,this.hints)}catch(l){if(l instanceof Zs)continue}throw new oe("No MultiFormat Readers were able to detect the code.")}}class Ki extends de{constructor(r=null,s=500){const l=new Do;l.setHints(r),super(l,s)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class fl extends de{constructor(r=500){super(new zn,r)}}class dl extends de{constructor(r=500){super(new Wr,r)}}var Ma;(function(D){D[D.ERROR_CORRECTION=0]="ERROR_CORRECTION",D[D.CHARACTER_SET=1]="CHARACTER_SET",D[D.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",D[D.MIN_SIZE=3]="MIN_SIZE",D[D.MAX_SIZE=4]="MAX_SIZE",D[D.MARGIN=5]="MARGIN",D[D.PDF417_COMPACT=6]="PDF417_COMPACT",D[D.PDF417_COMPACTION=7]="PDF417_COMPACTION",D[D.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",D[D.AZTEC_LAYERS=9]="AZTEC_LAYERS",D[D.QR_VERSION=10]="QR_VERSION"})(Ma||(Ma={}));var jn=Ma;class Qi{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new Zt(r,Int32Array.from([1])))}buildGenerator(r){const s=this.cachedGenerators;if(r>=s.length){let l=s[s.length-1];const u=this.field;for(let f=s.length;f<=r;f++){const g=l.multiply(new Zt(u,Int32Array.from([1,u.exp(f-1+u.getGeneratorBase())])));s.push(g),l=g}}return s[r]}encode(r,s){if(s===0)throw new O("No error correction bytes");const l=r.length-s;if(l<=0)throw new O("No data bytes provided");const u=this.buildGenerator(s),f=new Int32Array(l);ie.arraycopy(r,0,f,0,l);let g=new Zt(this.field,f);g=g.multiplyByMonomial(s,1);const x=g.divide(u)[1].getCoefficients(),C=s-x.length;for(let I=0;I<C;I++)r[l+I]=0;ie.arraycopy(x,0,r,l+C,x.length)}}class Mt{constructor(){}static applyMaskPenaltyRule1(r){return Mt.applyMaskPenaltyRule1Internal(r,!0)+Mt.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let s=0;const l=r.getArray(),u=r.getWidth(),f=r.getHeight();for(let g=0;g<f-1;g++){const y=l[g];for(let x=0;x<u-1;x++){const C=y[x];C===y[x+1]&&C===l[g+1][x]&&C===l[g+1][x+1]&&s++}}return Mt.N2*s}static applyMaskPenaltyRule3(r){let s=0;const l=r.getArray(),u=r.getWidth(),f=r.getHeight();for(let g=0;g<f;g++)for(let y=0;y<u;y++){const x=l[g];y+6<u&&x[y]===1&&x[y+1]===0&&x[y+2]===1&&x[y+3]===1&&x[y+4]===1&&x[y+5]===0&&x[y+6]===1&&(Mt.isWhiteHorizontal(x,y-4,y)||Mt.isWhiteHorizontal(x,y+7,y+11))&&s++,g+6<f&&l[g][y]===1&&l[g+1][y]===0&&l[g+2][y]===1&&l[g+3][y]===1&&l[g+4][y]===1&&l[g+5][y]===0&&l[g+6][y]===1&&(Mt.isWhiteVertical(l,y,g-4,g)||Mt.isWhiteVertical(l,y,g+7,g+11))&&s++}return s*Mt.N3}static isWhiteHorizontal(r,s,l){s=Math.max(s,0),l=Math.min(l,r.length);for(let u=s;u<l;u++)if(r[u]===1)return!1;return!0}static isWhiteVertical(r,s,l,u){l=Math.max(l,0),u=Math.min(u,r.length);for(let f=l;f<u;f++)if(r[f][s]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let s=0;const l=r.getArray(),u=r.getWidth(),f=r.getHeight();for(let x=0;x<f;x++){const C=l[x];for(let I=0;I<u;I++)C[I]===1&&s++}const g=r.getHeight()*r.getWidth();return Math.floor(Math.abs(s*2-g)*10/g)*Mt.N4}static getDataMaskBit(r,s,l){let u,f;switch(r){case 0:u=l+s&1;break;case 1:u=l&1;break;case 2:u=s%3;break;case 3:u=(l+s)%3;break;case 4:u=Math.floor(l/2)+Math.floor(s/3)&1;break;case 5:f=l*s,u=(f&1)+f%3;break;case 6:f=l*s,u=(f&1)+f%3&1;break;case 7:f=l*s,u=f%3+(l+s&1)&1;break;default:throw new O("Invalid mask pattern: "+r)}return u===0}static applyMaskPenaltyRule1Internal(r,s){let l=0;const u=s?r.getHeight():r.getWidth(),f=s?r.getWidth():r.getHeight(),g=r.getArray();for(let y=0;y<u;y++){let x=0,C=-1;for(let I=0;I<f;I++){const M=s?g[y][I]:g[I][y];M===C?x++:(x>=5&&(l+=Mt.N1+(x-5)),x=1,C=M)}x>=5&&(l+=Mt.N1+(x-5))}return l}}Mt.N1=3,Mt.N2=3,Mt.N3=40,Mt.N4=10;class Js{constructor(r,s){this.width=r,this.height=s;const l=new Array(s);for(let u=0;u!==s;u++)l[u]=new Uint8Array(r);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(r,s){return this.bytes[s][r]}getArray(){return this.bytes}setNumber(r,s,l){this.bytes[s][r]=l}setBoolean(r,s,l){this.bytes[s][r]=l?1:0}clear(r){for(const s of this.bytes)Oe.fill(s,r)}equals(r){if(!(r instanceof Js))return!1;const s=r;if(this.width!==s.width||this.height!==s.height)return!1;for(let l=0,u=this.height;l<u;++l){const f=this.bytes[l],g=s.bytes[l];for(let y=0,x=this.width;y<x;++y)if(f[y]!==g[y])return!1}return!0}toString(){const r=new G;for(let s=0,l=this.height;s<l;++s){const u=this.bytes[s];for(let f=0,g=this.width;f<g;++f)switch(u[f]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class Zi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new G;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<Zi.NUM_MASK_PATTERNS}}Zi.NUM_MASK_PATTERNS=8;class kt extends A{}kt.kind="WriterException";class p{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,s,l,u,f){p.clearMatrix(f),p.embedBasicPatterns(l,f),p.embedTypeInfo(s,u,f),p.maybeEmbedVersionInfo(l,f),p.embedDataBits(r,u,f)}static embedBasicPatterns(r,s){p.embedPositionDetectionPatternsAndSeparators(s),p.embedDarkDotAtLeftBottomCorner(s),p.maybeEmbedPositionAdjustmentPatterns(r,s),p.embedTimingPatterns(s)}static embedTypeInfo(r,s,l){const u=new Le;p.makeTypeInfoBits(r,s,u);for(let f=0,g=u.getSize();f<g;++f){const y=u.get(u.getSize()-1-f),x=p.TYPE_INFO_COORDINATES[f],C=x[0],I=x[1];if(l.setBoolean(C,I,y),f<8){const M=l.getWidth()-f-1;l.setBoolean(M,8,y)}else{const L=l.getHeight()-7+(f-8);l.setBoolean(8,L,y)}}}static maybeEmbedVersionInfo(r,s){if(r.getVersionNumber()<7)return;const l=new Le;p.makeVersionInfoBits(r,l);let u=17;for(let f=0;f<6;++f)for(let g=0;g<3;++g){const y=l.get(u);u--,s.setBoolean(f,s.getHeight()-11+g,y),s.setBoolean(s.getHeight()-11+g,f,y)}}static embedDataBits(r,s,l){let u=0,f=-1,g=l.getWidth()-1,y=l.getHeight()-1;for(;g>0;){for(g===6&&(g-=1);y>=0&&y<l.getHeight();){for(let x=0;x<2;++x){const C=g-x;if(!p.isEmpty(l.get(C,y)))continue;let I;u<r.getSize()?(I=r.get(u),++u):I=!1,s!==255&&Mt.getDataMaskBit(s,C,y)&&(I=!I),l.setBoolean(C,y,I)}y+=f}f=-f,y+=f,g-=2}if(u!==r.getSize())throw new kt("Not all bits consumed: "+u+"/"+r.getSize())}static findMSBSet(r){return 32-pe.numberOfLeadingZeros(r)}static calculateBCHCode(r,s){if(s===0)throw new O("0 polynomial");const l=p.findMSBSet(s);for(r<<=l-1;p.findMSBSet(r)>=l;)r^=s<<p.findMSBSet(r)-l;return r}static makeTypeInfoBits(r,s,l){if(!Zi.isValidMaskPattern(s))throw new kt("Invalid mask pattern");const u=r.getBits()<<3|s;l.appendBits(u,5);const f=p.calculateBCHCode(u,p.TYPE_INFO_POLY);l.appendBits(f,10);const g=new Le;if(g.appendBits(p.TYPE_INFO_MASK_PATTERN,15),l.xor(g),l.getSize()!==15)throw new kt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(r,s){s.appendBits(r.getVersionNumber(),6);const l=p.calculateBCHCode(r.getVersionNumber(),p.VERSION_INFO_POLY);if(s.appendBits(l,12),s.getSize()!==18)throw new kt("should not happen but we got: "+s.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let s=8;s<r.getWidth()-8;++s){const l=(s+1)%2;p.isEmpty(r.get(s,6))&&r.setNumber(s,6,l),p.isEmpty(r.get(6,s))&&r.setNumber(6,s,l)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new kt;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,s,l){for(let u=0;u<8;++u){if(!p.isEmpty(l.get(r+u,s)))throw new kt;l.setNumber(r+u,s,0)}}static embedVerticalSeparationPattern(r,s,l){for(let u=0;u<7;++u){if(!p.isEmpty(l.get(r,s+u)))throw new kt;l.setNumber(r,s+u,0)}}static embedPositionAdjustmentPattern(r,s,l){for(let u=0;u<5;++u){const f=p.POSITION_ADJUSTMENT_PATTERN[u];for(let g=0;g<5;++g)l.setNumber(r+g,s+u,f[g])}}static embedPositionDetectionPattern(r,s,l){for(let u=0;u<7;++u){const f=p.POSITION_DETECTION_PATTERN[u];for(let g=0;g<7;++g)l.setNumber(r+g,s+u,f[g])}}static embedPositionDetectionPatternsAndSeparators(r){const s=p.POSITION_DETECTION_PATTERN[0].length;p.embedPositionDetectionPattern(0,0,r),p.embedPositionDetectionPattern(r.getWidth()-s,0,r),p.embedPositionDetectionPattern(0,r.getWidth()-s,r);const l=8;p.embedHorizontalSeparationPattern(0,l-1,r),p.embedHorizontalSeparationPattern(r.getWidth()-l,l-1,r),p.embedHorizontalSeparationPattern(0,r.getWidth()-l,r);const u=7;p.embedVerticalSeparationPattern(u,0,r),p.embedVerticalSeparationPattern(r.getHeight()-u-1,0,r),p.embedVerticalSeparationPattern(u,r.getHeight()-u,r)}static maybeEmbedPositionAdjustmentPatterns(r,s){if(r.getVersionNumber()<2)return;const l=r.getVersionNumber()-1,u=p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let f=0,g=u.length;f!==g;f++){const y=u[f];if(y>=0)for(let x=0;x!==g;x++){const C=u[x];C>=0&&p.isEmpty(s.get(C,y))&&p.embedPositionAdjustmentPattern(C-2,y-2,s)}}}}p.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),p.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),p.VERSION_INFO_POLY=7973,p.TYPE_INFO_POLY=1335,p.TYPE_INFO_MASK_PATTERN=21522;class v{constructor(r,s){this.dataBytes=r,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class N{constructor(){}static calculateMaskPenalty(r){return Mt.applyMaskPenaltyRule1(r)+Mt.applyMaskPenaltyRule2(r)+Mt.applyMaskPenaltyRule3(r)+Mt.applyMaskPenaltyRule4(r)}static encode(r,s,l=null){let u=N.DEFAULT_BYTE_MODE_ENCODING;const f=l!==null&&l.get(jn.CHARACTER_SET)!==void 0;f&&(u=l.get(jn.CHARACTER_SET).toString());const g=this.chooseMode(r,u),y=new Le;if(g===it.BYTE&&(f||N.DEFAULT_BYTE_MODE_ENCODING!==u)){const Me=P.getCharacterSetECIByName(u);Me!==void 0&&this.appendECI(Me,y)}this.appendModeInfo(g,y);const x=new Le;this.appendBytes(r,g,x,u);let C;if(l!==null&&l.get(jn.QR_VERSION)!==void 0){const Me=Number.parseInt(l.get(jn.QR_VERSION).toString(),10);C=Je.getVersionForNumber(Me);const Ne=this.calculateBitsNeeded(g,y,x,C);if(!this.willFit(Ne,C,s))throw new kt("Data too big for requested version")}else C=this.recommendVersion(s,g,y,x);const I=new Le;I.appendBitArray(y);const M=g===it.BYTE?x.getSizeInBytes():r.length;this.appendLengthInfo(M,C,g,I),I.appendBitArray(x);const L=C.getECBlocksForLevel(s),H=C.getTotalCodewords()-L.getTotalECCodewords();this.terminateBits(H,I);const J=this.interleaveWithECBytes(I,C.getTotalCodewords(),H,L.getNumBlocks()),ee=new Zi;ee.setECLevel(s),ee.setMode(g),ee.setVersion(C);const ae=C.getDimensionForVersion(),_e=new Js(ae,ae),Pe=this.chooseMaskPattern(J,s,C,_e);return ee.setMaskPattern(Pe),p.buildMatrix(J,s,C,Pe,_e),ee.setMatrix(_e),ee}static recommendVersion(r,s,l,u){const f=this.calculateBitsNeeded(s,l,u,Je.getVersionForNumber(1)),g=this.chooseVersion(f,r),y=this.calculateBitsNeeded(s,l,u,g);return this.chooseVersion(y,r)}static calculateBitsNeeded(r,s,l,u){return s.getSize()+r.getCharacterCountBits(u)+l.getSize()}static getAlphanumericCode(r){return r<N.ALPHANUMERIC_TABLE.length?N.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,s=null){if(P.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(r))return it.KANJI;let l=!1,u=!1;for(let f=0,g=r.length;f<g;++f){const y=r.charAt(f);if(N.isDigit(y))l=!0;else if(this.getAlphanumericCode(y.charCodeAt(0))!==-1)u=!0;else return it.BYTE}return u?it.ALPHANUMERIC:l?it.NUMERIC:it.BYTE}static isOnlyDoubleByteKanji(r){let s;try{s=q.encode(r,P.SJIS)}catch{return!1}const l=s.length;if(l%2!==0)return!1;for(let u=0;u<l;u+=2){const f=s[u]&255;if((f<129||f>159)&&(f<224||f>235))return!1}return!0}static chooseMaskPattern(r,s,l,u){let f=Number.MAX_SAFE_INTEGER,g=-1;for(let y=0;y<Zi.NUM_MASK_PATTERNS;y++){p.buildMatrix(r,s,l,y,u);let x=this.calculateMaskPenalty(u);x<f&&(f=x,g=y)}return g}static chooseVersion(r,s){for(let l=1;l<=40;l++){const u=Je.getVersionForNumber(l);if(N.willFit(r,u,s))return u}throw new kt("Data too big")}static willFit(r,s,l){const u=s.getTotalCodewords(),g=s.getECBlocksForLevel(l).getTotalECCodewords(),y=u-g,x=(r+7)/8;return y>=x}static terminateBits(r,s){const l=r*8;if(s.getSize()>l)throw new kt("data bits cannot fit in the QR Code"+s.getSize()+" > "+l);for(let g=0;g<4&&s.getSize()<l;++g)s.appendBit(!1);const u=s.getSize()&7;if(u>0)for(let g=u;g<8;g++)s.appendBit(!1);const f=r-s.getSizeInBytes();for(let g=0;g<f;++g)s.appendBits((g&1)===0?236:17,8);if(s.getSize()!==l)throw new kt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,s,l,u,f,g){if(u>=l)throw new kt("Block ID too large");const y=r%l,x=l-y,C=Math.floor(r/l),I=C+1,M=Math.floor(s/l),L=M+1,H=C-M,J=I-L;if(H!==J)throw new kt("EC bytes mismatch");if(l!==x+y)throw new kt("RS blocks mismatch");if(r!==(M+H)*x+(L+J)*y)throw new kt("Total bytes mismatch");u<x?(f[0]=M,g[0]=H):(f[0]=L,g[0]=J)}static interleaveWithECBytes(r,s,l,u){if(r.getSizeInBytes()!==l)throw new kt("Number of bits and data bytes does not match");let f=0,g=0,y=0;const x=new Array;for(let I=0;I<u;++I){const M=new Int32Array(1),L=new Int32Array(1);N.getNumDataBytesAndNumECBytesForBlockID(s,l,u,I,M,L);const H=M[0],J=new Uint8Array(H);r.toBytes(8*f,J,0,H);const ee=N.generateECBytes(J,L[0]);x.push(new v(J,ee)),g=Math.max(g,H),y=Math.max(y,ee.length),f+=M[0]}if(l!==f)throw new kt("Data bytes does not match offset");const C=new Le;for(let I=0;I<g;++I)for(const M of x){const L=M.getDataBytes();I<L.length&&C.appendBits(L[I],8)}for(let I=0;I<y;++I)for(const M of x){const L=M.getErrorCorrectionBytes();I<L.length&&C.appendBits(L[I],8)}if(s!==C.getSizeInBytes())throw new kt("Interleaving error: "+s+" and "+C.getSizeInBytes()+" differ.");return C}static generateECBytes(r,s){const l=r.length,u=new Int32Array(l+s);for(let g=0;g<l;g++)u[g]=r[g]&255;new Qi(_t.QR_CODE_FIELD_256).encode(u,s);const f=new Uint8Array(s);for(let g=0;g<s;g++)f[g]=u[l+g];return f}static appendModeInfo(r,s){s.appendBits(r.getBits(),4)}static appendLengthInfo(r,s,l,u){const f=l.getCharacterCountBits(s);if(r>=1<<f)throw new kt(r+" is bigger than "+((1<<f)-1));u.appendBits(r,f)}static appendBytes(r,s,l,u){switch(s){case it.NUMERIC:N.appendNumericBytes(r,l);break;case it.ALPHANUMERIC:N.appendAlphanumericBytes(r,l);break;case it.BYTE:N.append8BitBytes(r,l,u);break;case it.KANJI:N.appendKanjiBytes(r,l);break;default:throw new kt("Invalid mode: "+s)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const s=N.getDigit(r);return s>=0&&s<=9}static appendNumericBytes(r,s){const l=r.length;let u=0;for(;u<l;){const f=N.getDigit(r.charAt(u));if(u+2<l){const g=N.getDigit(r.charAt(u+1)),y=N.getDigit(r.charAt(u+2));s.appendBits(f*100+g*10+y,10),u+=3}else if(u+1<l){const g=N.getDigit(r.charAt(u+1));s.appendBits(f*10+g,7),u+=2}else s.appendBits(f,4),u++}}static appendAlphanumericBytes(r,s){const l=r.length;let u=0;for(;u<l;){const f=N.getAlphanumericCode(r.charCodeAt(u));if(f===-1)throw new kt;if(u+1<l){const g=N.getAlphanumericCode(r.charCodeAt(u+1));if(g===-1)throw new kt;s.appendBits(f*45+g,11),u+=2}else s.appendBits(f,6),u++}}static append8BitBytes(r,s,l){let u;try{u=q.encode(r,l)}catch(f){throw new kt(f)}for(let f=0,g=u.length;f!==g;f++){const y=u[f];s.appendBits(y,8)}}static appendKanjiBytes(r,s){let l;try{l=q.encode(r,P.SJIS)}catch(f){throw new kt(f)}const u=l.length;for(let f=0;f<u;f+=2){const g=l[f]&255,y=l[f+1]&255,x=g<<8&4294967295|y;let C=-1;if(x>=33088&&x<=40956?C=x-33088:x>=57408&&x<=60351&&(C=x-49472),C===-1)throw new kt("Invalid byte sequence");const I=(C>>8)*192+(C&255);s.appendBits(I,13)}}static appendECI(r,s){s.appendBits(it.ECI.getBits(),4),s.appendBits(r.getValue(),8)}}N.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),N.DEFAULT_BYTE_MODE_ENCODING=P.UTF8.getName();class V{write(r,s,l,u=null){if(r.length===0)throw new O("Found empty contents");if(s<0||l<0)throw new O("Requested dimensions are too small: "+s+"x"+l);let f=vt.L,g=V.QUIET_ZONE_SIZE;u!==null&&(u.get(jn.ERROR_CORRECTION)!==void 0&&(f=vt.fromString(u.get(jn.ERROR_CORRECTION).toString())),u.get(jn.MARGIN)!==void 0&&(g=Number.parseInt(u.get(jn.MARGIN).toString(),10)));const y=N.encode(r,f,u);return this.renderResult(y,s,l,g)}writeToDom(r,s,l,u,f=null){typeof r=="string"&&(r=document.querySelector(r));const g=this.write(s,l,u,f);r&&r.appendChild(g)}renderResult(r,s,l,u){const f=r.getMatrix();if(f===null)throw new ur;const g=f.getWidth(),y=f.getHeight(),x=g+u*2,C=y+u*2,I=Math.max(s,x),M=Math.max(l,C),L=Math.min(Math.floor(I/x),Math.floor(M/C)),H=Math.floor((I-g*L)/2),J=Math.floor((M-y*L)/2),ee=this.createSVGElement(I,M);for(let ae=0,_e=J;ae<y;ae++,_e+=L)for(let Pe=0,Me=H;Pe<g;Pe++,Me+=L)if(f.get(Pe,ae)===1){const Ne=this.createSvgRectElement(Me,_e,L,L);ee.appendChild(Ne)}return ee}createSVGElement(r,s){const l=document.createElementNS(V.SVG_NS,"svg");return l.setAttributeNS(null,"height",r.toString()),l.setAttributeNS(null,"width",s.toString()),l}createSvgRectElement(r,s,l,u){const f=document.createElementNS(V.SVG_NS,"rect");return f.setAttributeNS(null,"x",r.toString()),f.setAttributeNS(null,"y",s.toString()),f.setAttributeNS(null,"height",l.toString()),f.setAttributeNS(null,"width",u.toString()),f.setAttributeNS(null,"fill","#000000"),f}}V.QUIET_ZONE_SIZE=4,V.SVG_NS="http://www.w3.org/2000/svg";class se{encode(r,s,l,u,f){if(r.length===0)throw new O("Found empty contents");if(s!==ye.QR_CODE)throw new O("Can only encode QR_CODE, but got "+s);if(l<0||u<0)throw new O(`Requested dimensions are too small: ${l}x${u}`);let g=vt.L,y=se.QUIET_ZONE_SIZE;f!==null&&(f.get(jn.ERROR_CORRECTION)!==void 0&&(g=vt.fromString(f.get(jn.ERROR_CORRECTION).toString())),f.get(jn.MARGIN)!==void 0&&(y=Number.parseInt(f.get(jn.MARGIN).toString(),10)));const x=N.encode(r,g,f);return se.renderResult(x,l,u,y)}static renderResult(r,s,l,u){const f=r.getMatrix();if(f===null)throw new ur;const g=f.getWidth(),y=f.getHeight(),x=g+u*2,C=y+u*2,I=Math.max(s,x),M=Math.max(l,C),L=Math.min(Math.floor(I/x),Math.floor(M/C)),H=Math.floor((I-g*L)/2),J=Math.floor((M-y*L)/2),ee=new Qe(I,M);for(let ae=0,_e=J;ae<y;ae++,_e+=L)for(let Pe=0,Me=H;Pe<g;Pe++,Me+=L)f.get(Pe,ae)===1&&ee.setRegion(Me,_e,L,L);return ee}}se.QUIET_ZONE_SIZE=4;class xe{encode(r,s,l,u,f){let g;switch(s){case ye.QR_CODE:g=new se;break;default:throw new O("No encoder available for format "+s)}return g.encode(r,s,l,u,f)}}class Be extends Re{constructor(r,s,l,u,f,g,y,x){if(super(g,y),this.yuvData=r,this.dataWidth=s,this.dataHeight=l,this.left=u,this.top=f,u+g>s||f+y>l)throw new O("Crop rectangle does not fit within image data.");x&&this.reverseHorizontal(g,y)}getRow(r,s){if(r<0||r>=this.getHeight())throw new O("Requested row is outside the image: "+r);const l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));const u=(r+this.top)*this.dataWidth+this.left;return ie.arraycopy(this.yuvData,u,s,0,l),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.yuvData;const l=r*s,u=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return ie.arraycopy(this.yuvData,f,u,0,l),u;for(let g=0;g<s;g++){const y=g*r;ie.arraycopy(this.yuvData,f,u,y,r),f+=this.dataWidth}return u}isCropSupported(){return!0}crop(r,s,l,u){return new Be(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+s,l,u,!1)}renderThumbnail(){const r=this.getWidth()/Be.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/Be.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(r*s),u=this.yuvData;let f=this.top*this.dataWidth+this.left;for(let g=0;g<s;g++){const y=g*r;for(let x=0;x<r;x++){const C=u[f+x*Be.THUMBNAIL_SCALE_FACTOR]&255;l[y+x]=4278190080|C*65793}f+=this.dataWidth*Be.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Be.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Be.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,s){const l=this.yuvData;for(let u=0,f=this.top*this.dataWidth+this.left;u<s;u++,f+=this.dataWidth){const g=f+r/2;for(let y=f,x=f+r-1;y<g;y++,x--){const C=l[y];l[y]=l[x],l[x]=C}}}invert(){return new He(this)}}Be.THUMBNAIL_SCALE_FACTOR=2;class pt extends Re{constructor(r,s,l,u,f,g,y){if(super(s,l),this.dataWidth=u,this.dataHeight=f,this.left=g,this.top=y,r.BYTES_PER_ELEMENT===4){const x=s*l,C=new Uint8ClampedArray(x);for(let I=0;I<x;I++){const M=r[I],L=M>>16&255,H=M>>7&510,J=M&255;C[I]=(L+H+J)/4&255}this.luminances=C}else this.luminances=r;if(u===void 0&&(this.dataWidth=s),f===void 0&&(this.dataHeight=l),g===void 0&&(this.left=0),y===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+l>this.dataHeight)throw new O("Crop rectangle does not fit within image data.")}getRow(r,s){if(r<0||r>=this.getHeight())throw new O("Requested row is outside the image: "+r);const l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));const u=(r+this.top)*this.dataWidth+this.left;return ie.arraycopy(this.luminances,u,s,0,l),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.luminances;const l=r*s,u=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return ie.arraycopy(this.luminances,f,u,0,l),u;for(let g=0;g<s;g++){const y=g*r;ie.arraycopy(this.luminances,f,u,y,r),f+=this.dataWidth}return u}isCropSupported(){return!0}crop(r,s,l,u){return new pt(this.luminances,l,u,this.dataWidth,this.dataHeight,this.left+r,this.top+s)}invert(){return new He(this)}}class Hn extends P{static forName(r){return this.getCharacterSetECIByName(r)}}class Kt{}Kt.ISO_8859_1=P.ISO8859_1;class Sn{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class ci{static singletonList(r){return[r]}static min(r,s){return r.sort(s)[0]}}class Ji{constructor(r){this.previous=r}getPrevious(){return this.previous}}class vr extends Ji{constructor(r,s,l){super(r),this.value=s,this.bitCount=l}appendTo(r,s){r.appendBits(this.value,this.bitCount)}add(r,s){return new vr(this,r,s)}addBinaryShift(r,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new vr(this,r,s)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+pe.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class ui extends vr{constructor(r,s,l){super(r,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=l}appendTo(r,s){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):l===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(s[this.binaryShiftStart+l],8)}addBinaryShift(r,s){return new ui(this,r,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function $s(D,r,s){return new ui(D,r,s)}function $i(D,r,s){return new vr(D,r,s)}const La=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Os=0,gl=1,Ai=2,mc=3,Pi=4,Mo=new vr(null,0,0),ea=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function ed(D){for(let r of D)Oe.fill(r,-1);return D[Os][Pi]=0,D[gl][Pi]=0,D[gl][Os]=28,D[mc][Pi]=0,D[Ai][Pi]=0,D[Ai][Os]=15,D}const Lo=ed(Oe.createInt32Array(6,6));class ki{constructor(r,s,l,u){this.token=r,this.mode=s,this.binaryShiftByteCount=l,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,s){let l=this.bitCount,u=this.token;if(r!==this.mode){let g=ea[this.mode][r];u=$i(u,g&65535,g>>16),l+=g>>16}let f=r===Ai?4:5;return u=$i(u,s,f),new ki(u,r,0,l+f)}shiftAndAppend(r,s){let l=this.token,u=this.mode===Ai?4:5;return l=$i(l,Lo[this.mode][r],u),l=$i(l,s,5),new ki(l,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(r){let s=this.token,l=this.mode,u=this.bitCount;if(this.mode===Pi||this.mode===Ai){let y=ea[l][Os];s=$i(s,y&65535,y>>16),u+=y>>16,l=Os}let f=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,g=new ki(s,l,this.binaryShiftByteCount+1,u+f);return g.binaryShiftByteCount===2078&&(g=g.endBinaryShift(r+1)),g}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=$s(s,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new ki(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let s=this.bitCount+(ea[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?s+=ki.calculateBinaryShiftCost(r)-ki.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(s+=10),s<=r.bitCount}toBitArray(r){let s=[];for(let u=this.endBinaryShift(r.length).token;u!==null;u=u.getPrevious())s.unshift(u);let l=new Le;for(const u of s)u.appendTo(l,r);return l}toString(){return W.format("%s bits=%d bytes=%d",La[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}ki.INITIAL_STATE=new ki(Mo,Os,0,0);function Uu(D){const r=W.getCharCode(" "),s=W.getCharCode("."),l=W.getCharCode(",");D[Os][r]=1;const u=W.getCharCode("Z"),f=W.getCharCode("A");for(let L=f;L<=u;L++)D[Os][L]=L-f+2;D[gl][r]=1;const g=W.getCharCode("z"),y=W.getCharCode("a");for(let L=y;L<=g;L++)D[gl][L]=L-y+2;D[Ai][r]=1;const x=W.getCharCode("9"),C=W.getCharCode("0");for(let L=C;L<=x;L++)D[Ai][L]=L-C+2;D[Ai][l]=12,D[Ai][s]=13;const I=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let L=0;L<I.length;L++)D[mc][W.getCharCode(I[L])]=L;const M=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let L=0;L<M.length;L++)W.getCharCode(M[L])>0&&(D[Pi][W.getCharCode(M[L])]=L);return D}const Po=Uu(Oe.createInt32Array(5,256));class ta{constructor(r){this.text=r}encode(){const r=W.getCharCode(" "),s=W.getCharCode(`
`);let l=ci.singletonList(ki.INITIAL_STATE);for(let f=0;f<this.text.length;f++){let g,y=f+1<this.text.length?this.text[f+1]:0;switch(this.text[f]){case W.getCharCode("\r"):g=y===s?2:0;break;case W.getCharCode("."):g=y===r?3:0;break;case W.getCharCode(","):g=y===r?4:0;break;case W.getCharCode(":"):g=y===r?5:0;break;default:g=0}g>0?(l=ta.updateStateListForPair(l,f,g),f++):l=this.updateStateListForChar(l,f)}return ci.min(l,(f,g)=>f.getBitCount()-g.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,s){const l=[];for(let u of r)this.updateStateForChar(u,s,l);return ta.simplifyStates(l)}updateStateForChar(r,s,l){let u=this.text[s]&255,f=Po[r.getMode()][u]>0,g=null;for(let y=0;y<=Pi;y++){let x=Po[y][u];if(x>0){if(g==null&&(g=r.endBinaryShift(s)),!f||y===r.getMode()||y===Ai){const C=g.latchAndAppend(y,x);l.push(C)}if(!f&&Lo[r.getMode()][y]>=0){const C=g.shiftAndAppend(y,x);l.push(C)}}}if(r.getBinaryShiftByteCount()>0||Po[r.getMode()][u]===0){let y=r.addBinaryShiftChar(s);l.push(y)}}static updateStateListForPair(r,s,l){const u=[];for(let f of r)this.updateStateForPair(f,s,l,u);return this.simplifyStates(u)}static updateStateForPair(r,s,l,u){let f=r.endBinaryShift(s);if(u.push(f.latchAndAppend(Pi,l)),r.getMode()!==Pi&&u.push(f.shiftAndAppend(Pi,l)),l===3||l===4){let g=f.latchAndAppend(Ai,16-l).latchAndAppend(Ai,1);u.push(g)}if(r.getBinaryShiftByteCount()>0){let g=r.addBinaryShiftChar(s).addBinaryShiftChar(s+1);u.push(g)}}static simplifyStates(r){let s=[];for(const l of r){let u=!0;for(const f of s){if(f.isBetterThanOrEqualTo(l)){u=!1;break}l.isBetterThanOrEqualTo(f)&&(s=s.filter(g=>g!==f))}u&&s.push(l)}return s}}class jt{constructor(){}static encodeBytes(r){return jt.encode(r,jt.DEFAULT_EC_PERCENT,jt.DEFAULT_AZTEC_LAYERS)}static encode(r,s,l){let u=new ta(r).encode(),f=pe.truncDivision(u.getSize()*s,100)+11,g=u.getSize()+f,y,x,C,I,M;if(l!==jt.DEFAULT_AZTEC_LAYERS){if(y=l<0,x=Math.abs(l),x>(y?jt.MAX_NB_BITS_COMPACT:jt.MAX_NB_BITS))throw new O(W.format("Illegal value %s for layers",l));C=jt.totalBitsInLayer(x,y),I=jt.WORD_SIZE[x];let Ne=C-C%I;if(M=jt.stuffBits(u,I),M.getSize()+f>Ne)throw new O("Data to large for user specified layer");if(y&&M.getSize()>I*64)throw new O("Data to large for user specified layer")}else{I=0,M=null;for(let Ne=0;;Ne++){if(Ne>jt.MAX_NB_BITS)throw new O("Data too large for an Aztec code");if(y=Ne<=3,x=y?Ne+1:Ne,C=jt.totalBitsInLayer(x,y),g>C)continue;(M==null||I!==jt.WORD_SIZE[x])&&(I=jt.WORD_SIZE[x],M=jt.stuffBits(u,I));let Rt=C-C%I;if(!(y&&M.getSize()>I*64)&&M.getSize()+f<=Rt)break}}let L=jt.generateCheckWords(M,C,I),H=M.getSize()/I,J=jt.generateModeMessage(y,x,H),ee=(y?11:14)+x*4,ae=new Int32Array(ee),_e;if(y){_e=ee;for(let Ne=0;Ne<ae.length;Ne++)ae[Ne]=Ne}else{_e=ee+1+2*pe.truncDivision(pe.truncDivision(ee,2)-1,15);let Ne=pe.truncDivision(ee,2),Rt=pe.truncDivision(_e,2);for(let yt=0;yt<Ne;yt++){let Jn=yt+pe.truncDivision(yt,15);ae[Ne-yt-1]=Rt-Jn-1,ae[Ne+yt]=Rt+Jn+1}}let Pe=new Qe(_e);for(let Ne=0,Rt=0;Ne<x;Ne++){let yt=(x-Ne)*4+(y?9:12);for(let Jn=0;Jn<yt;Jn++){let wi=Jn*2;for(let Lr=0;Lr<2;Lr++)L.get(Rt+wi+Lr)&&Pe.set(ae[Ne*2+Lr],ae[Ne*2+Jn]),L.get(Rt+yt*2+wi+Lr)&&Pe.set(ae[Ne*2+Jn],ae[ee-1-Ne*2-Lr]),L.get(Rt+yt*4+wi+Lr)&&Pe.set(ae[ee-1-Ne*2-Lr],ae[ee-1-Ne*2-Jn]),L.get(Rt+yt*6+wi+Lr)&&Pe.set(ae[ee-1-Ne*2-Jn],ae[Ne*2+Lr])}Rt+=yt*8}if(jt.drawModeMessage(Pe,y,_e,J),y)jt.drawBullsEye(Pe,pe.truncDivision(_e,2),5);else{jt.drawBullsEye(Pe,pe.truncDivision(_e,2),7);for(let Ne=0,Rt=0;Ne<pe.truncDivision(ee,2)-1;Ne+=15,Rt+=16)for(let yt=pe.truncDivision(_e,2)&1;yt<_e;yt+=2)Pe.set(pe.truncDivision(_e,2)-Rt,yt),Pe.set(pe.truncDivision(_e,2)+Rt,yt),Pe.set(yt,pe.truncDivision(_e,2)-Rt),Pe.set(yt,pe.truncDivision(_e,2)+Rt)}let Me=new Sn;return Me.setCompact(y),Me.setSize(_e),Me.setLayers(x),Me.setCodeWords(H),Me.setMatrix(Pe),Me}static drawBullsEye(r,s,l){for(let u=0;u<l;u+=2)for(let f=s-u;f<=s+u;f++)r.set(f,s-u),r.set(f,s+u),r.set(s-u,f),r.set(s+u,f);r.set(s-l,s-l),r.set(s-l+1,s-l),r.set(s-l,s-l+1),r.set(s+l,s-l),r.set(s+l,s-l+1),r.set(s+l,s+l-1)}static generateModeMessage(r,s,l){let u=new Le;return r?(u.appendBits(s-1,2),u.appendBits(l-1,6),u=jt.generateCheckWords(u,28,4)):(u.appendBits(s-1,5),u.appendBits(l-1,11),u=jt.generateCheckWords(u,40,4)),u}static drawModeMessage(r,s,l,u){let f=pe.truncDivision(l,2);if(s)for(let g=0;g<7;g++){let y=f-3+g;u.get(g)&&r.set(y,f-5),u.get(g+7)&&r.set(f+5,y),u.get(20-g)&&r.set(y,f+5),u.get(27-g)&&r.set(f-5,y)}else for(let g=0;g<10;g++){let y=f-5+g+pe.truncDivision(g,5);u.get(g)&&r.set(y,f-7),u.get(g+10)&&r.set(f+7,y),u.get(29-g)&&r.set(y,f+7),u.get(39-g)&&r.set(f-7,y)}}static generateCheckWords(r,s,l){let u=r.getSize()/l,f=new Qi(jt.getGF(l)),g=pe.truncDivision(s,l),y=jt.bitsToWords(r,l,g);f.encode(y,g-u);let x=s%l,C=new Le;C.appendBits(0,x);for(const I of Array.from(y))C.appendBits(I,l);return C}static bitsToWords(r,s,l){let u=new Int32Array(l),f,g;for(f=0,g=r.getSize()/s;f<g;f++){let y=0;for(let x=0;x<s;x++)y|=r.get(f*s+x)?1<<s-x-1:0;u[f]=y}return u}static getGF(r){switch(r){case 4:return _t.AZTEC_PARAM;case 6:return _t.AZTEC_DATA_6;case 8:return _t.AZTEC_DATA_8;case 10:return _t.AZTEC_DATA_10;case 12:return _t.AZTEC_DATA_12;default:throw new O("Unsupported word size "+r)}}static stuffBits(r,s){let l=new Le,u=r.getSize(),f=(1<<s)-2;for(let g=0;g<u;g+=s){let y=0;for(let x=0;x<s;x++)(g+x>=u||r.get(g+x))&&(y|=1<<s-1-x);(y&f)===f?(l.appendBits(y&f,s),g--):(y&f)===0?(l.appendBits(y|1,s),g--):l.appendBits(y,s)}return l}static totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}jt.DEFAULT_EC_PERCENT=33,jt.DEFAULT_AZTEC_LAYERS=0,jt.MAX_NB_BITS=32,jt.MAX_NB_BITS_COMPACT=4,jt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ko{encode(r,s,l,u){return this.encodeWithHints(r,s,l,u,null)}encodeWithHints(r,s,l,u,f){let g=Kt.ISO_8859_1,y=jt.DEFAULT_EC_PERCENT,x=jt.DEFAULT_AZTEC_LAYERS;return f!=null&&(f.has(jn.CHARACTER_SET)&&(g=Hn.forName(f.get(jn.CHARACTER_SET).toString())),f.has(jn.ERROR_CORRECTION)&&(y=pe.parseInt(f.get(jn.ERROR_CORRECTION).toString())),f.has(jn.AZTEC_LAYERS)&&(x=pe.parseInt(f.get(jn.AZTEC_LAYERS).toString()))),ko.encodeLayers(r,s,l,u,g,y,x)}static encodeLayers(r,s,l,u,f,g,y){if(s!==ye.AZTEC)throw new O("Can only encode AZTEC, but got "+s);let x=jt.encode(W.getBytes(r,f),g,y);return ko.renderResult(x,l,u)}static renderResult(r,s,l){let u=r.getMatrix();if(u==null)throw new ur;let f=u.getWidth(),g=u.getHeight(),y=Math.max(s,f),x=Math.max(l,g),C=Math.min(y/f,x/g),I=(y-f*C)/2,M=(x-g*C)/2,L=new Qe(y,x);for(let H=0,J=M;H<g;H++,J+=C)for(let ee=0,ae=I;ee<f;ee++,ae+=C)u.get(ee,H)&&L.setRegion(ae,J,C,C);return L}}n.AbstractExpandedDecoder=tn,n.ArgumentException=S,n.ArithmeticException=kn,n.AztecCode=Sn,n.AztecCodeReader=ni,n.AztecCodeWriter=ko,n.AztecDecoder=Wt,n.AztecDetector=ti,n.AztecDetectorResult=fs,n.AztecEncoder=jt,n.AztecHighLevelEncoder=ta,n.AztecPoint=bn,n.BarcodeFormat=ye,n.Binarizer=ne,n.BinaryBitmap=B,n.BitArray=Le,n.BitMatrix=Qe,n.BitSource=Fn,n.BrowserAztecCodeReader=Cs,n.BrowserBarcodeReader=Ro,n.BrowserCodeReader=de,n.BrowserDatamatrixCodeReader=Yi,n.BrowserMultiFormatReader=Ki,n.BrowserPDF417Reader=fl,n.BrowserQRCodeReader=dl,n.BrowserQRCodeSvgWriter=V,n.CharacterSetECI=P,n.ChecksumException=Y,n.Code128Reader=De,n.Code39Reader=Jt,n.DataMatrixDecodedBitStreamParser=Mr,n.DataMatrixReader=Gr,n.DecodeHintType=ze,n.DecoderResult=lt,n.DefaultGridSampler=qi,n.DetectorResult=Ni,n.EAN13Reader=un,n.EncodeHintType=jn,n.Exception=A,n.FormatException=F,n.GenericGF=_t,n.GenericGFPoly=Zt,n.GlobalHistogramBinarizer=$,n.GridSampler=ei,n.GridSamplerInstance=ir,n.HTMLCanvasElementLuminanceSource=Ye,n.HybridBinarizer=le,n.ITFReader=ut,n.IllegalArgumentException=O,n.IllegalStateException=ur,n.InvertedLuminanceSource=He,n.LuminanceSource=Re,n.MathUtils=rt,n.MultiFormatOneDReader=Or,n.MultiFormatReader=Do,n.MultiFormatWriter=xe,n.NotFoundException=oe,n.OneDReader=Ft,n.PDF417DecodedBitStreamParser=Ee,n.PDF417DecoderErrorCorrection=Oi,n.PDF417Reader=zn,n.PDF417ResultMetadata=ms,n.PerspectiveTransform=qn,n.PlanarYUVLuminanceSource=Be,n.QRCodeByteMatrix=Js,n.QRCodeDataMask=sr,n.QRCodeDecodedBitStreamParser=hn,n.QRCodeDecoderErrorCorrectionLevel=vt,n.QRCodeDecoderFormatInformation=Wn,n.QRCodeEncoder=N,n.QRCodeEncoderQRCode=Zi,n.QRCodeMaskUtil=Mt,n.QRCodeMatrixUtil=p,n.QRCodeMode=it,n.QRCodeReader=Wr,n.QRCodeVersion=Je,n.QRCodeWriter=se,n.RGBLuminanceSource=pt,n.RSS14Reader=nn,n.RSSExpandedReader=Se,n.ReaderException=Zs,n.ReedSolomonDecoder=_r,n.ReedSolomonEncoder=Qi,n.ReedSolomonException=Bn,n.Result=we,n.ResultMetadataType=et,n.ResultPoint=je,n.StringUtils=W,n.UnsupportedOperationException=Q,n.VideoInputDevice=Z,n.WhiteRectangleDetector=cn,n.WriterException=kt,n.ZXingArrays=Oe,n.ZXingCharset=Hn,n.ZXingInteger=pe,n.ZXingStandardCharsets=Kt,n.ZXingStringBuilder=G,n.ZXingStringEncoding=q,n.ZXingSystem=ie,n.createAbstractExpandedDecoder=Hr,Object.defineProperty(n,"__esModule",{value:!0})}))})(ru,ru.exports)),ru.exports}var Pn=A4();const w4=z1(Pn),T4=Yw({__proto__:null,default:w4},[Pn]);var LE=(function(){function a(e,n,o){if(this.formatMap=new Map([[Ze.QR_CODE,Pn.BarcodeFormat.QR_CODE],[Ze.AZTEC,Pn.BarcodeFormat.AZTEC],[Ze.CODABAR,Pn.BarcodeFormat.CODABAR],[Ze.CODE_39,Pn.BarcodeFormat.CODE_39],[Ze.CODE_93,Pn.BarcodeFormat.CODE_93],[Ze.CODE_128,Pn.BarcodeFormat.CODE_128],[Ze.DATA_MATRIX,Pn.BarcodeFormat.DATA_MATRIX],[Ze.MAXICODE,Pn.BarcodeFormat.MAXICODE],[Ze.ITF,Pn.BarcodeFormat.ITF],[Ze.EAN_13,Pn.BarcodeFormat.EAN_13],[Ze.EAN_8,Pn.BarcodeFormat.EAN_8],[Ze.PDF_417,Pn.BarcodeFormat.PDF_417],[Ze.RSS_14,Pn.BarcodeFormat.RSS_14],[Ze.RSS_EXPANDED,Pn.BarcodeFormat.RSS_EXPANDED],[Ze.UPC_A,Pn.BarcodeFormat.UPC_A],[Ze.UPC_E,Pn.BarcodeFormat.UPC_E],[Ze.UPC_EAN_EXTENSION,Pn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!T4)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=o;var h=this.createZXingFormats(e),m=new Map;m.set(Pn.DecodeHintType.POSSIBLE_FORMATS,h),m.set(Pn.DecodeHintType.TRY_HARDER,!1),this.hints=m}return a.prototype.decodeAsync=function(e){var n=this;return new Promise(function(o,h){try{o(n.decode(e))}catch(m){h(m)}})},a.prototype.decode=function(e){var n=new Pn.MultiFormatReader(this.verbose,this.hints),o=new Pn.HTMLCanvasElementLuminanceSource(e),h=new Pn.BinaryBitmap(new Pn.HybridBinarizer(o)),m=n.decode(h);return{text:m.text,format:mA.create(this.toHtml5QrcodeSupportedFormats(m.format)),debugData:this.createDebugData()}},a.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,h){e.set(n,o)}),e},a.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},a.prototype.createZXingFormats=function(e){for(var n=[],o=0,h=e;o<h.length;o++){var m=h[o];this.formatMap.has(m)?n.push(this.formatMap.get(m)):this.logger.logError("".concat(m," is not supported by")+"ZXingHtml5QrcodeShim")}return n},a.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},a})(),C4=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(_){_(m)})}return new(n||(n=Promise))(function(m,_){function b(S){try{A(o.next(S))}catch(O){_(O)}}function T(S){try{A(o.throw(S))}catch(O){_(O)}}function A(S){S.done?m(S.value):h(S.value).then(b,T)}A((o=o.apply(a,e||[])).next())})},b4=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,_;return _={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function b(A){return function(S){return T([A,S])}}function T(A){if(o)throw new TypeError("Generator is already executing.");for(;_&&(_=0,A[0]&&(n=0)),n;)try{if(o=1,h&&(m=A[0]&2?h.return:A[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,A[1])).done)return m;switch(h=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,h=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){n.label=A[1];break}if(A[0]===6&&n.label<m[1]){n.label=m[1],m=A;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(A);break}m[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(a,n)}catch(S){A=[6,S],h=0}finally{o=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},PE=(function(){function a(e,n,o){if(this.formatMap=new Map([[Ze.QR_CODE,"qr_code"],[Ze.AZTEC,"aztec"],[Ze.CODABAR,"codabar"],[Ze.CODE_39,"code_39"],[Ze.CODE_93,"code_93"],[Ze.CODE_128,"code_128"],[Ze.DATA_MATRIX,"data_matrix"],[Ze.ITF,"itf"],[Ze.EAN_13,"ean_13"],[Ze.EAN_8,"ean_8"],[Ze.PDF_417,"pdf417"],[Ze.UPC_A,"upc_a"],[Ze.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!a.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=o;var h=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(h),!this.detector)throw"BarcodeDetector detector not supported"}return a.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},a.prototype.decodeAsync=function(e){return C4(this,void 0,void 0,function(){var n,o;return b4(this,function(h){switch(h.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=h.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return o=this.selectLargestBarcode(n),[2,{text:o.rawValue,format:mA.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}]}})})},a.prototype.selectLargestBarcode=function(e){for(var n=null,o=0,h=0,m=e;h<m.length;h++){var _=m[h],b=_.boundingBox.width*_.boundingBox.height;b>o&&(o=b,n=_)}if(!n)throw"No largest barcode found";return n},a.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],o=0,h=e;o<h.length;o++){var m=h[o];this.formatMap.has(m)?n.push(this.formatMap.get(m)):this.logger.warn("".concat(m," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},a.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},a.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,h){e.set(n,o)}),e},a.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},a})(),kE=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(_){_(m)})}return new(n||(n=Promise))(function(m,_){function b(S){try{A(o.next(S))}catch(O){_(O)}}function T(S){try{A(o.throw(S))}catch(O){_(O)}}function A(S){S.done?m(S.value):h(S.value).then(b,T)}A((o=o.apply(a,e||[])).next())})},BE=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,_;return _={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function b(A){return function(S){return T([A,S])}}function T(A){if(o)throw new TypeError("Generator is already executing.");for(;_&&(_=0,A[0]&&(n=0)),n;)try{if(o=1,h&&(m=A[0]&2?h.return:A[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,A[1])).done)return m;switch(h=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,h=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){n.label=A[1];break}if(A[0]===6&&n.label<m[1]){n.label=m[1],m=A;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(A);break}m[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(a,n)}catch(S){A=[6,S],h=0}finally{o=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},v4=(function(){function a(e,n,o,h){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=o,n&&PE.isSupported()?(this.primaryDecoder=new PE(e,o,h),this.secondaryDecoder=new LE(e,o,h)):this.primaryDecoder=new LE(e,o,h)}return a.prototype.decodeAsync=function(e){return kE(this,void 0,void 0,function(){var n;return BE(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,o.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},a.prototype.decodeRobustlyAsync=function(e){return kE(this,void 0,void 0,function(){var n,o;return BE(this,function(h){switch(h.label){case 0:n=performance.now(),h.label=1;case 1:return h.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,h.sent()];case 3:if(o=h.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw o;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},a.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},a.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},a.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,o=this.executionResults;n<o.length;n++){var h=o[n];e+=h}var m=e/this.executionResults.length;console.log("".concat(m," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},a})(),Fg=(function(){var a=function(e,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(o[m]=h[m])},a(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");a(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Rf=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(_){_(m)})}return new(n||(n=Promise))(function(m,_){function b(S){try{A(o.next(S))}catch(O){_(O)}}function T(S){try{A(o.throw(S))}catch(O){_(O)}}function A(S){S.done?m(S.value):h(S.value).then(b,T)}A((o=o.apply(a,e||[])).next())})},Nf=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,_;return _={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function b(A){return function(S){return T([A,S])}}function T(A){if(o)throw new TypeError("Generator is already executing.");for(;_&&(_=0,A[0]&&(n=0)),n;)try{if(o=1,h&&(m=A[0]&2?h.return:A[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,A[1])).done)return m;switch(h=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,h=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){n.label=A[1];break}if(A[0]===6&&n.label<m[1]){n.label=m[1],m=A;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(A);break}m[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(a,n)}catch(S){A=[6,S],h=0}finally{o=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},yA=(function(){function a(e,n){this.name=e,this.track=n}return a.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},a.prototype.apply=function(e){var n={};n[this.name]=e;var o={advanced:[n]};return this.track.applyConstraints(o)},a.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},a})(),S4=(function(a){Fg(e,a);function e(n,o){return a.call(this,n,o)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var o={};o[this.name]=n;var h={advanced:[o]};return this.track.applyConstraints(h)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),o=n[this.name];return{min:o.min,max:o.max,step:o.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(yA),I4=(function(a){Fg(e,a);function e(n){return a.call(this,"zoom",n)||this}return e})(S4),R4=(function(a){Fg(e,a);function e(n){return a.call(this,"torch",n)||this}return e})(yA),N4=(function(){function a(e){this.track=e}return a.prototype.zoomFeature=function(){return new I4(this.track)},a.prototype.torchFeature=function(){return new R4(this.track)},a})(),O4=(function(){function a(e,n,o){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=o,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return a.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},a.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var o=e.surface.clientWidth,h=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(o,h),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},a.create=function(e,n,o,h){return Rf(this,void 0,void 0,function(){var m,_;return Nf(this,function(b){switch(b.label){case 0:return m=new a(e,n,h),o.aspectRatio?(_={aspectRatio:o.aspectRatio},[4,m.getFirstTrackOrFail().applyConstraints(_)]):[3,2];case 1:b.sent(),b.label=2;case 2:return m.setupSurface(),[2,m]}})})},a.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},a.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},a.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},a.prototype.resume=function(e){this.failIfClosed();var n=this,o=function(){setTimeout(e,200),n.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.play()},a.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},a.prototype.getSurface=function(){return this.failIfClosed(),this.surface},a.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},a.prototype.applyVideoConstraints=function(e){return Rf(this,void 0,void 0,function(){return Nf(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},a.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,o){var h=e.mediaStream.getVideoTracks(),m=h.length,_=0;e.mediaStream.getVideoTracks().forEach(function(b){e.mediaStream.removeTrack(b),b.stop(),++_,_>=m&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},a.prototype.getCapabilities=function(){return new N4(this.getFirstTrackOrFail())},a})(),D4=(function(){function a(e){this.mediaStream=e}return a.prototype.render=function(e,n,o){return Rf(this,void 0,void 0,function(){return Nf(this,function(h){return[2,O4.create(e,this.mediaStream,n,o)]})})},a.create=function(e){return Rf(this,void 0,void 0,function(){var n,o;return Nf(this,function(h){switch(h.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return o=h.sent(),[2,new a(o)]}})})},a})(),VE=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(_){_(m)})}return new(n||(n=Promise))(function(m,_){function b(S){try{A(o.next(S))}catch(O){_(O)}}function T(S){try{A(o.throw(S))}catch(O){_(O)}}function A(S){S.done?m(S.value):h(S.value).then(b,T)}A((o=o.apply(a,e||[])).next())})},UE=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,_;return _={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function b(A){return function(S){return T([A,S])}}function T(A){if(o)throw new TypeError("Generator is already executing.");for(;_&&(_=0,A[0]&&(n=0)),n;)try{if(o=1,h&&(m=A[0]&2?h.return:A[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,A[1])).done)return m;switch(h=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,h=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){n.label=A[1];break}if(A[0]===6&&n.label<m[1]){n.label=m[1],m=A;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(A);break}m[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(a,n)}catch(S){A=[6,S],h=0}finally{o=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},M4=(function(){function a(){}return a.failIfNotSupported=function(){return VE(this,void 0,void 0,function(){return UE(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new a]})})},a.prototype.create=function(e){return VE(this,void 0,void 0,function(){return UE(this,function(n){return[2,D4.create(e)]})})},a})(),L4=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(_){_(m)})}return new(n||(n=Promise))(function(m,_){function b(S){try{A(o.next(S))}catch(O){_(O)}}function T(S){try{A(o.throw(S))}catch(O){_(O)}}function A(S){S.done?m(S.value):h(S.value).then(b,T)}A((o=o.apply(a,e||[])).next())})},P4=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,_;return _={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function b(A){return function(S){return T([A,S])}}function T(A){if(o)throw new TypeError("Generator is already executing.");for(;_&&(_=0,A[0]&&(n=0)),n;)try{if(o=1,h&&(m=A[0]&2?h.return:A[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,A[1])).done)return m;switch(h=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,h=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){n.label=A[1];break}if(A[0]===6&&n.label<m[1]){n.label=m[1],m=A;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(A);break}m[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(a,n)}catch(S){A=[6,S],h=0}finally{o=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},k4=(function(){function a(){}return a.retrieve=function(){if(navigator.mediaDevices)return a.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?a.getCamerasFromMediaStreamTrack():a.rejectWithError()},a.rejectWithError=function(){var e=Xl.unableToQuerySupportedDevices();return a.isHttpsOrLocalhost()||(e=Xl.insecureContextCameraQueryError()),Promise.reject(e)},a.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},a.getCamerasFromMediaDevices=function(){return L4(this,void 0,void 0,function(){var e,n,o,h,m,_,b;return P4(this,function(T){switch(T.label){case 0:return e=function(A){for(var S=A.getVideoTracks(),O=0,B=S;O<B.length;O++){var Y=B[O];Y.enabled=!1,Y.stop(),A.removeTrack(Y)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=T.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(o=T.sent(),h=[],m=0,_=o;m<_.length;m++)b=_[m],b.kind==="videoinput"&&h.push({id:b.deviceId,label:b.label});return e(n),[2,h]}})})},a.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var o=function(m){for(var _=[],b=0,T=m;b<T.length;b++){var A=T[b];A.kind==="video"&&_.push({id:A.id,label:A.label})}e(_)},h=MediaStreamTrack;h.getSources(o)})},a})(),nr;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.NOT_STARTED=1]="NOT_STARTED",a[a.SCANNING=2]="SCANNING",a[a.PAUSED=3]="PAUSED"})(nr||(nr={}));var B4=(function(){function a(){this.state=nr.NOT_STARTED,this.onGoingTransactionNewState=nr.UNKNOWN}return a.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},a.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},a.prototype.execute=function(){if(this.onGoingTransactionNewState===nr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=nr.UNKNOWN,this.directTransition(e)},a.prototype.cancel=function(){if(this.onGoingTransactionNewState===nr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=nr.UNKNOWN},a.prototype.getState=function(){return this.state},a.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==nr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},a.prototype.validateTransition=function(e){switch(this.state){case nr.UNKNOWN:throw"Transition from unknown is not allowed";case nr.NOT_STARTED:this.failIfNewStateIs(e,[nr.PAUSED]);break;case nr.SCANNING:break;case nr.PAUSED:break}},a.prototype.failIfNewStateIs=function(e,n){for(var o=0,h=n;o<h.length;o++){var m=h[o];if(e===m)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},a})(),V4=(function(){function a(e){this.stateManager=e}return a.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},a.prototype.directTransition=function(e){this.stateManager.directTransition(e)},a.prototype.getState=function(){return this.stateManager.getState()},a.prototype.canScanFile=function(){return this.stateManager.getState()===nr.NOT_STARTED},a.prototype.isScanning=function(){return this.stateManager.getState()!==nr.NOT_STARTED},a.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===nr.SCANNING},a.prototype.isPaused=function(){return this.stateManager.getState()===nr.PAUSED},a})(),U4=(function(){function a(){}return a.create=function(){return new V4(new B4)},a})(),F4=(function(){var a=function(e,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(o[m]=h[m])},a(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");a(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Hi=(function(a){F4(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(y4),z4=(function(){function a(e,n){this.logger=n,this.fps=Hi.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Hi.DEFAULT_DISABLE_FLIP}return a.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?pA.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},a.prototype.isShadedBoxEnabled=function(){return!Ea(this.qrbox)},a.create=function(e,n){return new a(e,n)},a})(),j4=(function(){function a(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var o;typeof n=="boolean"?this.verbose=n===!0:n&&(o=n,this.verbose=o.verbose===!0,o.experimentalFeatures),this.logger=new _4(this.verbose),this.qrcode=new v4(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(o),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=U4.create()}return a.prototype.start=function(e,n,o,h){var m=this;if(!e)throw"cameraIdOrConfig is required";if(!o||typeof o!="function")throw"qrCodeSuccessCallback is required and should be a function.";var _;h?_=h:_=this.verbose?this.logger.log:function(){};var b=z4.create(n,this.logger);this.clearElement();var T=!1;b.videoConstraints&&(b.isMediaStreamConstraintsValid()?T=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var A=T,S=document.getElementById(this.elementId);S.clientWidth?S.clientWidth:Hi.DEFAULT_WIDTH,S.style.position="relative",this.shouldScan=!0,this.element=S;var O=this,B=this.stateManagerProxy.startTransition(nr.SCANNING);return new Promise(function(Y,ne){var ie=A?b.videoConstraints:O.createVideoConstraints(e);if(!ie){B.cancel(),ne("videoConstraints should be defined");return}var ge={};(!A||b.aspectRatio)&&(ge.aspectRatio=b.aspectRatio);var Ue={onRenderSurfaceReady:function(Oe,pe){O.setupUi(Oe,pe,b),O.isScanning=!0,O.foreverScan(b,o,_)}};M4.failIfNotSupported().then(function(Oe){Oe.create(ie).then(function(pe){return pe.render(m.element,ge,Ue).then(function(Le){O.renderedCamera=Le,B.execute(),Y(null)}).catch(function(Le){B.cancel(),ne(Le)})}).catch(function(pe){B.cancel(),ne(Xl.errorGettingUserMedia(pe))})}).catch(function(Oe){B.cancel(),ne(Xl.cameraStreamingNotSupported())})})},a.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(nr.PAUSED),this.showPausedState(),(Ea(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},a.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(nr.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},a.prototype.getState=function(){return this.stateManagerProxy.getState()},a.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(nr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var o=function(){if(e.element){var m=document.getElementById(Hi.SHADED_REGION_ELEMENT_ID);m&&e.element.removeChild(m)}},h=this;return this.renderedCamera.close().then(function(){return h.renderedCamera=null,h.element&&(h.element.removeChild(h.canvasElement),h.canvasElement=null),o(),h.qrRegion&&(h.qrRegion=null),h.context&&(h.context=null),n.execute(),h.hidePausedState(),h.isScanning=!1,Promise.resolve()})},a.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(o){return o.decodedText})},a.prototype.scanFileV2=function(e,n){var o=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ea(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(h,m){o.possiblyCloseLastScanImageFile(),o.clearElement(),o.lastScanImageFile=URL.createObjectURL(e);var _=new Image;_.onload=function(){var b=_.width,T=_.height,A=document.getElementById(o.elementId),S=A.clientWidth?A.clientWidth:Hi.DEFAULT_WIDTH,O=Math.max(A.clientHeight?A.clientHeight:T,Hi.FILE_SCAN_MIN_HEIGHT),B=o.computeCanvasDrawConfig(b,T,S,O);if(n){var Y=o.createCanvasElement(S,O,"qr-canvas-visible");Y.style.display="inline-block",A.appendChild(Y);var ne=Y.getContext("2d");if(!ne)throw"Unable to get 2d context from canvas";ne.canvas.width=S,ne.canvas.height=O,ne.drawImage(_,0,0,b,T,B.x,B.y,B.width,B.height)}var ie=Hi.FILE_SCAN_HIDDEN_CANVAS_PADDING,ge=Math.max(_.width,B.width),Ue=Math.max(_.height,B.height),Oe=ge+2*ie,pe=Ue+2*ie,Le=o.createCanvasElement(Oe,pe);A.appendChild(Le);var nt=Le.getContext("2d");if(!nt)throw"Unable to get 2d context from canvas";nt.canvas.width=Oe,nt.canvas.height=pe,nt.drawImage(_,0,0,b,T,ie,ie,ge,Ue);try{o.qrcode.decodeRobustlyAsync(Le).then(function(ze){h(DE.createFromQrcodeResult(ze))}).catch(m)}catch(ze){m("QR code parse error, error = ".concat(ze))}},_.onerror=m,_.onabort=m,_.onstalled=m,_.onsuspend=m,_.src=URL.createObjectURL(e)})},a.prototype.clear=function(){this.clearElement()},a.getCameras=function(){return k4.retrieve()},a.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},a.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},a.prototype.applyVideoConstraints=function(e){if(e){if(!pA.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},a.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},a.prototype.getSupportedFormats=function(e){var n=[Ze.QR_CODE,Ze.AZTEC,Ze.CODABAR,Ze.CODE_39,Ze.CODE_93,Ze.CODE_128,Ze.DATA_MATRIX,Ze.MAXICODE,Ze.ITF,Ze.EAN_13,Ze.EAN_8,Ze.PDF_417,Ze.RSS_14,Ze.RSS_EXPANDED,Ze.UPC_A,Ze.UPC_E,Ze.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var o=[],h=0,m=e.formatsToSupport;h<m.length;h++){var _=m[h];p4(_)?o.push(_):this.logger.warn("Invalid format: ".concat(_," passed in config, ignoring."))}if(o.length===0)throw"None of formatsToSupport match supported values.";return o},a.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Ea(e))return!0;if(!Ea(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Ea(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return Ea(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},a.prototype.validateQrboxSize=function(e,n,o){var h=this,m=o.qrbox;this.validateQrboxConfig(m);var _=this.toQrdimensions(e,n,m),b=function(A){if(A<Hi.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Hi.MIN_QR_BOX_SIZE,"px.")},T=function(A){return A>e&&(h.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),A=e),A};b(_.width),b(_.height),_.width=T(_.width)},a.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},a.prototype.toQrdimensions=function(e,n,o){if(typeof o=="number")return{width:o,height:o};if(typeof o=="function")try{return o(e,n)}catch(h){throw new Error("qrbox config was passed as a function but it failed with unknown error"+h)}return o},a.prototype.setupUi=function(e,n,o){o.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,o);var h=Ea(o.qrbox)?{width:e,height:n}:o.qrbox;this.validateQrboxConfig(h);var m=this.toQrdimensions(e,n,h);m.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var _=o.isShadedBoxEnabled()&&m.height<=n,b={x:0,y:0,width:e,height:n},T=_?this.getShadedRegionBounds(e,n,m):b,A=this.createCanvasElement(T.width,T.height),S={willReadFrequently:!0},O=A.getContext("2d",S);O.canvas.width=T.width,O.canvas.height=T.height,this.element.append(A),_&&this.possiblyInsertShadingElement(this.element,e,n,m),this.createScannerPausedUiElement(this.element),this.qrRegion=T,this.context=O,this.canvasElement=A},a.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Xl.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},a.prototype.scanContext=function(e,n){var o=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(h){return e(h.text,DE.createFromQrcodeResult(h)),o.possiblyUpdateShaders(!0),!0}).catch(function(h){o.possiblyUpdateShaders(!1);var m=Xl.codeParseError(h);return n(m,E4.createFrom(m)),!1})},a.prototype.foreverScan=function(e,n,o){var h=this;if(this.shouldScan&&this.renderedCamera){var m=this.renderedCamera.getSurface(),_=m.videoWidth/m.clientWidth,b=m.videoHeight/m.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var T=this.qrRegion.width*_,A=this.qrRegion.height*b,S=this.qrRegion.x*_,O=this.qrRegion.y*b;this.context.drawImage(m,S,O,T,A,0,0,this.qrRegion.width,this.qrRegion.height);var B=function(){h.foreverScanTimeout=setTimeout(function(){h.foreverScan(e,n,o)},h.getTimeoutFps(e.fps))};this.scanContext(n,o).then(function(Y){!Y&&e.disableFlip!==!0?(h.context.translate(h.context.canvas.width,0),h.context.scale(-1,1),h.scanContext(n,o).finally(function(){B()})):B()}).catch(function(Y){h.logger.logError("Error happend while scanning context",Y),B()})}},a.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",o="deviceId",h={user:!0,environment:!0},m="exact",_=function(ne){if(ne in h)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(ne,"'")},b=Object.keys(e);if(b.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(b.length," keys");var T=Object.keys(e)[0];if(T!==n&&T!==o)throw"Only '".concat(n,"' and '").concat(o,"' ")+" are supported for 'cameraIdOrConfig'";if(T===n){var A=e.facingMode;if(typeof A=="string"){if(_(A))return{facingMode:A}}else if(typeof A=="object")if(m in A){if(_(A["".concat(m)]))return{facingMode:{exact:A["".concat(m)]}}}else throw"'facingMode' should be string or object with"+" ".concat(m," as key.");else{var S=typeof A;throw"Invalid type of 'facingMode' = ".concat(S)}}else{var O=e.deviceId;if(typeof O=="string")return{deviceId:O};if(typeof O=="object"){if(m in O)return{deviceId:{exact:O["".concat(m)]}};throw"'deviceId' should be string or object with"+" ".concat(m," as key.")}else{var B=typeof O;throw"Invalid type of 'deviceId' = ".concat(B)}}}var Y=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(Y)},a.prototype.computeCanvasDrawConfig=function(e,n,o,h){if(e<=o&&n<=h){var m=(o-e)/2,_=(h-n)/2;return{x:m,y:_,width:e,height:n}}else{var b=e,T=n;return e>o&&(n=o/e*n,e=o),n>h&&(e=h/n*e,n=h),this.logger.log("Image downsampled from "+"".concat(b,"X").concat(T)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,o,h)}},a.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},a.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Hi.BORDER_SHADER_MATCH_COLOR:Hi.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},a.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},a.prototype.createCanvasElement=function(e,n,o){var h=e,m=n,_=document.createElement("canvas");return _.style.width="".concat(h,"px"),_.style.height="".concat(m,"px"),_.style.display="none",_.id=Ea(o)?"qr-canvas":o,_},a.prototype.getShadedRegionBounds=function(e,n,o){if(o.width>e||o.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-o.width)/2,y:(n-o.height)/2,width:o.width,height:o.height}},a.prototype.possiblyInsertShadingElement=function(e,n,o,h){if(!(n-h.width<1||o-h.height<1)){var m=document.createElement("div");m.style.position="absolute";var _=(n-h.width)/2,b=(o-h.height)/2;if(m.style.borderLeft="".concat(_,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderRight="".concat(_,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderTop="".concat(b,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderBottom="".concat(b,"px solid rgba(0, 0, 0, 0.48)"),m.style.boxSizing="border-box",m.style.top="0px",m.style.bottom="0px",m.style.left="0px",m.style.right="0px",m.id="".concat(Hi.SHADED_REGION_ELEMENT_ID),n-h.width<11||o-h.height<11)this.hasBorderShaders=!1;else{var T=5,A=40;this.insertShaderBorders(m,A,T,-T,null,0,!0),this.insertShaderBorders(m,A,T,-T,null,0,!1),this.insertShaderBorders(m,A,T,null,-T,0,!0),this.insertShaderBorders(m,A,T,null,-T,0,!1),this.insertShaderBorders(m,T,A+T,-T,null,-T,!0),this.insertShaderBorders(m,T,A+T,null,-T,-T,!0),this.insertShaderBorders(m,T,A+T,-T,null,-T,!1),this.insertShaderBorders(m,T,A+T,null,-T,-T,!1),this.hasBorderShaders=!0}e.append(m)}},a.prototype.insertShaderBorders=function(e,n,o,h,m,_,b){var T=document.createElement("div");T.style.position="absolute",T.style.backgroundColor=Hi.BORDER_SHADER_DEFAULT_COLOR,T.style.width="".concat(n,"px"),T.style.height="".concat(o,"px"),h!==null&&(T.style.top="".concat(h,"px")),m!==null&&(T.style.bottom="".concat(m,"px")),b?T.style.left="".concat(_,"px"):T.style.right="".concat(_,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(T),e.appendChild(T)},a.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},a.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},a.prototype.getTimeoutFps=function(e){return 1e3/e},a})(),FE;(function(a){a[a.STATUS_DEFAULT=0]="STATUS_DEFAULT",a[a.STATUS_SUCCESS=1]="STATUS_SUCCESS",a[a.STATUS_WARNING=2]="STATUS_WARNING",a[a.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(FE||(FE={}));const H4=({onCode:a})=>(ke.useEffect(()=>{const e="qr-reader",n=new j4(e);return n.start({facingMode:"environment"},{fps:10,qrbox:250},o=>{a(o)},()=>{}).catch(o=>{console.error("Kunne ikke starte QR-leser:",o)}),()=>{n.stop().then(()=>n.clear()).catch(()=>{})}},[a]),U.jsx("div",{id:"qr-reader",style:{width:"100%"}})),xs=[{value:101,label:"Modul 1 - Blokk 1"},{value:102,label:"Modul 1 - Blokk 2"},{value:103,label:"Modul 1 - Blokk 3"},{value:201,label:"Modul 2 - Termin 1"},{value:202,label:"Modul 2 - Termin 2"},{value:203,label:"Modul 2 - Propen"},{value:301,label:"Modul 3 - Termin 1"},{value:302,label:"Modul 3 - Termin 2"},{value:4,label:"Modul 4"},{value:5,label:"Modul 5"},{value:6,label:"Modul 6"},{value:7,label:"Modul 7"},{value:801,label:"Modul 8 - termin 1"},{value:802,label:"Modul 8 - termin 2"}];function oc(a){if(!a)return"Ukjent termin";const e=xs.find(n=>n.value===a);return e?e.label:`Termin ${a}`}function G4(a){const e=/(Modul|Termin)\s+(\d+)\s*-\s*Blokk\s+(\d+)/i,n=a.match(e);if(n){const m=n[2],_=n[3];return`M${m}B${_}`}const o=/(Modul|Termin)\s+(\d+)/i,h=a.match(o);return h?`M${h[2]}`:a}function q4(a){const e=oc(a);return e?G4(e):""}function X4({user:a}){const[e,n]=ke.useState(""),[o,h]=ke.useState(!1),m=a.term??11,[_,b]=ke.useState([]),[T,A]=ke.useState(!1),[S,O]=ke.useState(0),[B,Y]=ke.useState(!1),[ne,ie]=ke.useState("idle"),[ge,Ue]=ke.useState(null),[Oe,pe]=ke.useState(null),Le=a.semesterStatus&&a.semesterStatus!=="aktiv",nt=()=>{ie("idle"),Ue(null),pe(null),n(""),Y(!1)},ze=async P=>{if(!(!P||P.length<6)){h(!0),ie("idle"),Ue(null);try{const Q=di(rn,"sessions"),q=uo(Q,us("code","==",P)),W=await hs(q);if(W.empty){ie("error"),Ue("Fant ingen kt med denne koden."),n(""),Y(!1),h(!1);return}const G=W.docs[0],Qe=G.data(),oe=Rr(rn,"sessions",G.id,"attendance",a.uid);if((await Au(oe)).exists()){ie("error"),Ue("Du er allerede registrert p denne kten."),n(""),Y(!1),h(!1);return}await Jl(oe,{userId:a.uid,studentName:a.displayName,studentEmail:a.email,createdAt:An.now(),status:"present"});const le=Qe.name||"kten";pe(le),ie("success"),Ue(null),Y(!1),n(""),O(Re=>Re+1)}catch(Q){console.error(Q),ie("error"),Ue("Noe gikk galt ved registrering av oppmte."),n(""),Y(!1)}finally{h(!1)}}},F=P=>{if(!P||o)return;const Q=P.replace(/\D/g,"").slice(0,6);Q.length===6&&(n(Q),ze(Q))};ke.useEffect(()=>{(async()=>{A(!0);try{const Q=di(rn,"requirements"),q=uo(Q,us("term","==",m)),G=(await hs(q)).docs.map(ye=>{const Xe=ye.data();return{category:Xe.category,requiredCount:Xe.requiredCount}}),Qe=di(rn,"sessions"),oe=uo(Qe,us("term","==",m)),le=(await hs(oe)).docs.map(ye=>{const Xe=ye.data();return{id:ye.id,category:Xe.category}}),Re=di(rn,"times"),He=uo(Re,us("term","==",m)),Z=(await hs(He)).docs.map(ye=>({category:ye.data().category})),X=new Map;for(const ye of Z)ye.category&&X.set(ye.category,(X.get(ye.category)??0)+1);const de=new Map;for(const ye of le){if(!ye.category)continue;const Xe=Rr(rn,"sessions",ye.id,"attendance",a.uid);(await Au(Xe)).exists()&&de.set(ye.category,(de.get(ye.category)??0)+1)}const we=new Set;for(const ye of G)we.add(ye.category);for(const ye of le)ye.category&&we.add(ye.category);for(const ye of Z)ye.category&&we.add(ye.category);const Fe=[];we.forEach(ye=>{const Xe=G.find(Zt=>Zt.category===ye),et=Xe?Xe.requiredCount:null,lt=X.get(ye)??0,mn=de.get(ye)??0;Fe.push({category:ye,attendedCount:mn,totalSessions:lt,requiredCount:et})}),Fe.sort((ye,Xe)=>ye.category.localeCompare(Xe.category,"nb-NO",{sensitivity:"base"})),b(Fe)}catch(Q){console.error(Q),b([])}finally{A(!1)}})()},[m,a.uid,S]);const j=P=>{const q=P.target.value.replace(/\D/g,"").slice(0,6);n(q),q.length===6&&!o&&ze(q)};return ke.useEffect(()=>{if(ne==="idle")return;const Q=setTimeout(()=>{nt()},5e3);return()=>clearTimeout(Q)},[ne]),U.jsxs("div",{className:"page-card page-card--student",children:[U.jsx("h2",{style:{textAlign:"center",marginBottom:"1rem"},children:"Registrer oppmte"}),Le&&U.jsxs("p",{style:{color:"red",textAlign:"center"},children:['Du er markert som "',a.semesterStatus,'" dette semesteret. Ingen oppmtekrav, men du kan fortsatt registrere oppmte.']}),U.jsx("div",{style:{marginTop:"1rem",textAlign:"center"},children:ne==="success"?U.jsxs(U.Fragment,{children:[U.jsx("div",{style:{fontSize:"4rem",color:"#16a34a",marginBottom:"0.5rem"},children:""}),U.jsx("h3",{style:{margin:0,marginBottom:"0.3rem"},children:"Oppmte registrert"}),Oe&&U.jsx("p",{style:{margin:0,marginBottom:"1rem",fontSize:"1rem",color:"#374151"},children:Oe}),U.jsx("button",{type:"button",onClick:nt,style:{marginTop:"0.5rem",padding:"0.5rem 1.2rem",borderRadius:"999px",border:"none",background:"#2563eb",color:"white",fontWeight:500,cursor:"pointer",fontSize:"0.95rem"},children:"Registrer en kode til"})]}):ne==="error"?U.jsxs(U.Fragment,{children:[U.jsx("div",{style:{fontSize:"4rem",color:"#dc2626",marginBottom:"0.5rem"},children:""}),U.jsx("h3",{style:{margin:0,marginBottom:"0.3rem"},children:"Kunne ikke registrere oppmte"}),ge&&U.jsx("p",{style:{margin:0,marginBottom:"1rem",fontSize:"0.95rem",color:"#374151"},children:ge}),U.jsx("button",{type:"button",onClick:nt,style:{marginTop:"0.5rem",padding:"0.5rem 1.2rem",borderRadius:"999px",border:"none",background:"#6b7280",color:"white",fontWeight:500,cursor:"pointer",fontSize:"0.95rem"},children:"Prv en kode til"})]}):U.jsxs(U.Fragment,{children:[U.jsx("label",{style:{display:"block",marginBottom:"0.3rem"},children:"6-sifret kode fra lrer"}),U.jsx("input",{value:e,onChange:j,maxLength:6,placeholder:"482931",style:{padding:"0.5rem 0.8rem",fontSize:"1.2rem",letterSpacing:"0.3em",textAlign:"center",borderRadius:"0.5rem",border:"1px solid #d1d5db",minWidth:"10rem"}}),o&&U.jsx(yo,{}),U.jsx("p",{style:{fontSize:"0.8rem",color:"#6b7280",marginTop:"0.4rem"},children:"Koden registreres automatisk nr du har skrevet inn 6 siffer."}),U.jsx("button",{type:"button",onClick:()=>Y(P=>!P),style:{marginTop:"0.5rem",padding:"0.4rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:B?"#e5e7eb":"#f9fafb",cursor:"pointer",fontSize:"0.9rem"},children:B?"Stopp skanning":"Skann QR-kode"}),B&&U.jsx("div",{style:{marginTop:"0.8rem",display:"flex",justifyContent:"center"},children:U.jsx("div",{style:{width:"260px",maxWidth:"100%",borderRadius:"0.75rem",overflow:"hidden",border:"1px solid #d1d5db"},children:U.jsx(H4,{onCode:F})})})]})}),U.jsx("hr",{style:{marginTop:"2rem",marginBottom:"1rem"}}),U.jsxs("section",{children:[U.jsx("h3",{style:{textAlign:"center"},children:oc(m)}),T?U.jsx(yo,{}):_.length===0?U.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"Ingen registrerte timer for denne terminen enn."}):U.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[U.jsx("thead",{children:U.jsxs("tr",{children:[U.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"Gruppe"}),U.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"Registrerte oppmter"}),U.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"Krav"})]})}),U.jsx("tbody",{children:_.map(P=>{const q={padding:"0.3rem",borderBottom:"1px solid #f3f4f6",background:P.requiredCount!=null&&P.attendedCount>=P.requiredCount?"#dcfce7":"transparent"};return U.jsxs("tr",{children:[U.jsx("td",{style:q,children:P.category}),U.jsx("td",{style:q,children:P.totalSessions>0?`${P.attendedCount}/${P.totalSessions}`:P.attendedCount}),U.jsx("td",{style:q,children:P.requiredCount??"-"})]},P.category)})})]})]})]})}var Y4=Object.defineProperty,Of=Object.getOwnPropertySymbols,EA=Object.prototype.hasOwnProperty,_A=Object.prototype.propertyIsEnumerable,zE=(a,e,n)=>e in a?Y4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,U1=(a,e)=>{for(var n in e||(e={}))EA.call(e,n)&&zE(a,n,e[n]);if(Of)for(var n of Of(e))_A.call(e,n)&&zE(a,n,e[n]);return a},F1=(a,e)=>{var n={};for(var o in a)EA.call(a,o)&&e.indexOf(o)<0&&(n[o]=a[o]);if(a!=null&&Of)for(var o of Of(a))e.indexOf(o)<0&&_A.call(a,o)&&(n[o]=a[o]);return n};var al;(a=>{const e=class Ut{constructor(T,A,S,O){if(this.version=T,this.errorCorrectionLevel=A,this.modules=[],this.isFunction=[],T<Ut.MIN_VERSION||T>Ut.MAX_VERSION)throw new RangeError("Version value out of range");if(O<-1||O>7)throw new RangeError("Mask value out of range");this.size=T*4+17;let B=[];for(let ne=0;ne<this.size;ne++)B.push(!1);for(let ne=0;ne<this.size;ne++)this.modules.push(B.slice()),this.isFunction.push(B.slice());this.drawFunctionPatterns();const Y=this.addEccAndInterleave(S);if(this.drawCodewords(Y),O==-1){let ne=1e9;for(let ie=0;ie<8;ie++){this.applyMask(ie),this.drawFormatBits(ie);const ge=this.getPenaltyScore();ge<ne&&(O=ie,ne=ge),this.applyMask(ie)}}h(0<=O&&O<=7),this.mask=O,this.applyMask(O),this.drawFormatBits(O),this.isFunction=[]}static encodeText(T,A){const S=a.QrSegment.makeSegments(T);return Ut.encodeSegments(S,A)}static encodeBinary(T,A){const S=a.QrSegment.makeBytes(T);return Ut.encodeSegments([S],A)}static encodeSegments(T,A,S=1,O=40,B=-1,Y=!0){if(!(Ut.MIN_VERSION<=S&&S<=O&&O<=Ut.MAX_VERSION)||B<-1||B>7)throw new RangeError("Invalid value");let ne,ie;for(ne=S;;ne++){const pe=Ut.getNumDataCodewords(ne,A)*8,Le=_.getTotalBits(T,ne);if(Le<=pe){ie=Le;break}if(ne>=O)throw new RangeError("Data too long")}for(const pe of[Ut.Ecc.MEDIUM,Ut.Ecc.QUARTILE,Ut.Ecc.HIGH])Y&&ie<=Ut.getNumDataCodewords(ne,pe)*8&&(A=pe);let ge=[];for(const pe of T){n(pe.mode.modeBits,4,ge),n(pe.numChars,pe.mode.numCharCountBits(ne),ge);for(const Le of pe.getData())ge.push(Le)}h(ge.length==ie);const Ue=Ut.getNumDataCodewords(ne,A)*8;h(ge.length<=Ue),n(0,Math.min(4,Ue-ge.length),ge),n(0,(8-ge.length%8)%8,ge),h(ge.length%8==0);for(let pe=236;ge.length<Ue;pe^=253)n(pe,8,ge);let Oe=[];for(;Oe.length*8<ge.length;)Oe.push(0);return ge.forEach((pe,Le)=>Oe[Le>>>3]|=pe<<7-(Le&7)),new Ut(ne,A,Oe,B)}getModule(T,A){return 0<=T&&T<this.size&&0<=A&&A<this.size&&this.modules[A][T]}getModules(){return this.modules}drawFunctionPatterns(){for(let S=0;S<this.size;S++)this.setFunctionModule(6,S,S%2==0),this.setFunctionModule(S,6,S%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const T=this.getAlignmentPatternPositions(),A=T.length;for(let S=0;S<A;S++)for(let O=0;O<A;O++)S==0&&O==0||S==0&&O==A-1||S==A-1&&O==0||this.drawAlignmentPattern(T[S],T[O]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(T){const A=this.errorCorrectionLevel.formatBits<<3|T;let S=A;for(let B=0;B<10;B++)S=S<<1^(S>>>9)*1335;const O=(A<<10|S)^21522;h(O>>>15==0);for(let B=0;B<=5;B++)this.setFunctionModule(8,B,o(O,B));this.setFunctionModule(8,7,o(O,6)),this.setFunctionModule(8,8,o(O,7)),this.setFunctionModule(7,8,o(O,8));for(let B=9;B<15;B++)this.setFunctionModule(14-B,8,o(O,B));for(let B=0;B<8;B++)this.setFunctionModule(this.size-1-B,8,o(O,B));for(let B=8;B<15;B++)this.setFunctionModule(8,this.size-15+B,o(O,B));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let T=this.version;for(let S=0;S<12;S++)T=T<<1^(T>>>11)*7973;const A=this.version<<12|T;h(A>>>18==0);for(let S=0;S<18;S++){const O=o(A,S),B=this.size-11+S%3,Y=Math.floor(S/3);this.setFunctionModule(B,Y,O),this.setFunctionModule(Y,B,O)}}drawFinderPattern(T,A){for(let S=-4;S<=4;S++)for(let O=-4;O<=4;O++){const B=Math.max(Math.abs(O),Math.abs(S)),Y=T+O,ne=A+S;0<=Y&&Y<this.size&&0<=ne&&ne<this.size&&this.setFunctionModule(Y,ne,B!=2&&B!=4)}}drawAlignmentPattern(T,A){for(let S=-2;S<=2;S++)for(let O=-2;O<=2;O++)this.setFunctionModule(T+O,A+S,Math.max(Math.abs(O),Math.abs(S))!=1)}setFunctionModule(T,A,S){this.modules[A][T]=S,this.isFunction[A][T]=!0}addEccAndInterleave(T){const A=this.version,S=this.errorCorrectionLevel;if(T.length!=Ut.getNumDataCodewords(A,S))throw new RangeError("Invalid argument");const O=Ut.NUM_ERROR_CORRECTION_BLOCKS[S.ordinal][A],B=Ut.ECC_CODEWORDS_PER_BLOCK[S.ordinal][A],Y=Math.floor(Ut.getNumRawDataModules(A)/8),ne=O-Y%O,ie=Math.floor(Y/O);let ge=[];const Ue=Ut.reedSolomonComputeDivisor(B);for(let pe=0,Le=0;pe<O;pe++){let nt=T.slice(Le,Le+ie-B+(pe<ne?0:1));Le+=nt.length;const ze=Ut.reedSolomonComputeRemainder(nt,Ue);pe<ne&&nt.push(0),ge.push(nt.concat(ze))}let Oe=[];for(let pe=0;pe<ge[0].length;pe++)ge.forEach((Le,nt)=>{(pe!=ie-B||nt>=ne)&&Oe.push(Le[pe])});return h(Oe.length==Y),Oe}drawCodewords(T){if(T.length!=Math.floor(Ut.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let A=0;for(let S=this.size-1;S>=1;S-=2){S==6&&(S=5);for(let O=0;O<this.size;O++)for(let B=0;B<2;B++){const Y=S-B,ie=(S+1&2)==0?this.size-1-O:O;!this.isFunction[ie][Y]&&A<T.length*8&&(this.modules[ie][Y]=o(T[A>>>3],7-(A&7)),A++)}}h(A==T.length*8)}applyMask(T){if(T<0||T>7)throw new RangeError("Mask value out of range");for(let A=0;A<this.size;A++)for(let S=0;S<this.size;S++){let O;switch(T){case 0:O=(S+A)%2==0;break;case 1:O=A%2==0;break;case 2:O=S%3==0;break;case 3:O=(S+A)%3==0;break;case 4:O=(Math.floor(S/3)+Math.floor(A/2))%2==0;break;case 5:O=S*A%2+S*A%3==0;break;case 6:O=(S*A%2+S*A%3)%2==0;break;case 7:O=((S+A)%2+S*A%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[A][S]&&O&&(this.modules[A][S]=!this.modules[A][S])}}getPenaltyScore(){let T=0;for(let B=0;B<this.size;B++){let Y=!1,ne=0,ie=[0,0,0,0,0,0,0];for(let ge=0;ge<this.size;ge++)this.modules[B][ge]==Y?(ne++,ne==5?T+=Ut.PENALTY_N1:ne>5&&T++):(this.finderPenaltyAddHistory(ne,ie),Y||(T+=this.finderPenaltyCountPatterns(ie)*Ut.PENALTY_N3),Y=this.modules[B][ge],ne=1);T+=this.finderPenaltyTerminateAndCount(Y,ne,ie)*Ut.PENALTY_N3}for(let B=0;B<this.size;B++){let Y=!1,ne=0,ie=[0,0,0,0,0,0,0];for(let ge=0;ge<this.size;ge++)this.modules[ge][B]==Y?(ne++,ne==5?T+=Ut.PENALTY_N1:ne>5&&T++):(this.finderPenaltyAddHistory(ne,ie),Y||(T+=this.finderPenaltyCountPatterns(ie)*Ut.PENALTY_N3),Y=this.modules[ge][B],ne=1);T+=this.finderPenaltyTerminateAndCount(Y,ne,ie)*Ut.PENALTY_N3}for(let B=0;B<this.size-1;B++)for(let Y=0;Y<this.size-1;Y++){const ne=this.modules[B][Y];ne==this.modules[B][Y+1]&&ne==this.modules[B+1][Y]&&ne==this.modules[B+1][Y+1]&&(T+=Ut.PENALTY_N2)}let A=0;for(const B of this.modules)A=B.reduce((Y,ne)=>Y+(ne?1:0),A);const S=this.size*this.size,O=Math.ceil(Math.abs(A*20-S*10)/S)-1;return h(0<=O&&O<=9),T+=O*Ut.PENALTY_N4,h(0<=T&&T<=2568888),T}getAlignmentPatternPositions(){if(this.version==1)return[];{const T=Math.floor(this.version/7)+2,A=this.version==32?26:Math.ceil((this.version*4+4)/(T*2-2))*2;let S=[6];for(let O=this.size-7;S.length<T;O-=A)S.splice(1,0,O);return S}}static getNumRawDataModules(T){if(T<Ut.MIN_VERSION||T>Ut.MAX_VERSION)throw new RangeError("Version number out of range");let A=(16*T+128)*T+64;if(T>=2){const S=Math.floor(T/7)+2;A-=(25*S-10)*S-55,T>=7&&(A-=36)}return h(208<=A&&A<=29648),A}static getNumDataCodewords(T,A){return Math.floor(Ut.getNumRawDataModules(T)/8)-Ut.ECC_CODEWORDS_PER_BLOCK[A.ordinal][T]*Ut.NUM_ERROR_CORRECTION_BLOCKS[A.ordinal][T]}static reedSolomonComputeDivisor(T){if(T<1||T>255)throw new RangeError("Degree out of range");let A=[];for(let O=0;O<T-1;O++)A.push(0);A.push(1);let S=1;for(let O=0;O<T;O++){for(let B=0;B<A.length;B++)A[B]=Ut.reedSolomonMultiply(A[B],S),B+1<A.length&&(A[B]^=A[B+1]);S=Ut.reedSolomonMultiply(S,2)}return A}static reedSolomonComputeRemainder(T,A){let S=A.map(O=>0);for(const O of T){const B=O^S.shift();S.push(0),A.forEach((Y,ne)=>S[ne]^=Ut.reedSolomonMultiply(Y,B))}return S}static reedSolomonMultiply(T,A){if(T>>>8||A>>>8)throw new RangeError("Byte out of range");let S=0;for(let O=7;O>=0;O--)S=S<<1^(S>>>7)*285,S^=(A>>>O&1)*T;return h(S>>>8==0),S}finderPenaltyCountPatterns(T){const A=T[1];h(A<=this.size*3);const S=A>0&&T[2]==A&&T[3]==A*3&&T[4]==A&&T[5]==A;return(S&&T[0]>=A*4&&T[6]>=A?1:0)+(S&&T[6]>=A*4&&T[0]>=A?1:0)}finderPenaltyTerminateAndCount(T,A,S){return T&&(this.finderPenaltyAddHistory(A,S),A=0),A+=this.size,this.finderPenaltyAddHistory(A,S),this.finderPenaltyCountPatterns(S)}finderPenaltyAddHistory(T,A){A[0]==0&&(T+=this.size),A.pop(),A.unshift(T)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],a.QrCode=e;function n(b,T,A){if(T<0||T>31||b>>>T)throw new RangeError("Value out of range");for(let S=T-1;S>=0;S--)A.push(b>>>S&1)}function o(b,T){return(b>>>T&1)!=0}function h(b){if(!b)throw new Error("Assertion error")}const m=class tr{constructor(T,A,S){if(this.mode=T,this.numChars=A,this.bitData=S,A<0)throw new RangeError("Invalid argument");this.bitData=S.slice()}static makeBytes(T){let A=[];for(const S of T)n(S,8,A);return new tr(tr.Mode.BYTE,T.length,A)}static makeNumeric(T){if(!tr.isNumeric(T))throw new RangeError("String contains non-numeric characters");let A=[];for(let S=0;S<T.length;){const O=Math.min(T.length-S,3);n(parseInt(T.substring(S,S+O),10),O*3+1,A),S+=O}return new tr(tr.Mode.NUMERIC,T.length,A)}static makeAlphanumeric(T){if(!tr.isAlphanumeric(T))throw new RangeError("String contains unencodable characters in alphanumeric mode");let A=[],S;for(S=0;S+2<=T.length;S+=2){let O=tr.ALPHANUMERIC_CHARSET.indexOf(T.charAt(S))*45;O+=tr.ALPHANUMERIC_CHARSET.indexOf(T.charAt(S+1)),n(O,11,A)}return S<T.length&&n(tr.ALPHANUMERIC_CHARSET.indexOf(T.charAt(S)),6,A),new tr(tr.Mode.ALPHANUMERIC,T.length,A)}static makeSegments(T){return T==""?[]:tr.isNumeric(T)?[tr.makeNumeric(T)]:tr.isAlphanumeric(T)?[tr.makeAlphanumeric(T)]:[tr.makeBytes(tr.toUtf8ByteArray(T))]}static makeEci(T){let A=[];if(T<0)throw new RangeError("ECI assignment value out of range");if(T<128)n(T,8,A);else if(T<16384)n(2,2,A),n(T,14,A);else if(T<1e6)n(6,3,A),n(T,21,A);else throw new RangeError("ECI assignment value out of range");return new tr(tr.Mode.ECI,0,A)}static isNumeric(T){return tr.NUMERIC_REGEX.test(T)}static isAlphanumeric(T){return tr.ALPHANUMERIC_REGEX.test(T)}getData(){return this.bitData.slice()}static getTotalBits(T,A){let S=0;for(const O of T){const B=O.mode.numCharCountBits(A);if(O.numChars>=1<<B)return 1/0;S+=4+B+O.bitData.length}return S}static toUtf8ByteArray(T){T=encodeURI(T);let A=[];for(let S=0;S<T.length;S++)T.charAt(S)!="%"?A.push(T.charCodeAt(S)):(A.push(parseInt(T.substring(S+1,S+3),16)),S+=2);return A}};m.NUMERIC_REGEX=/^[0-9]*$/,m.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,m.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let _=m;a.QrSegment=m})(al||(al={}));(a=>{(e=>{const n=class{constructor(h,m){this.ordinal=h,this.formatBits=m}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(a.QrCode||(a.QrCode={}))})(al||(al={}));(a=>{(e=>{const n=class{constructor(h,m){this.modeBits=h,this.numBitsCharCount=m}numCharCountBits(h){return this.numBitsCharCount[Math.floor((h+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(a.QrSegment||(a.QrSegment={}))})(al||(al={}));var Yl=al;var W4={L:Yl.QrCode.Ecc.LOW,M:Yl.QrCode.Ecc.MEDIUM,Q:Yl.QrCode.Ecc.QUARTILE,H:Yl.QrCode.Ecc.HIGH},xA=128,AA="L",wA="#FFFFFF",TA="#000000",CA=!1,bA=1,K4=4,Q4=0,Z4=.1;function vA(a,e=0){const n=[];return a.forEach(function(o,h){let m=null;o.forEach(function(_,b){if(!_&&m!==null){n.push(`M${m+e} ${h+e}h${b-m}v1H${m+e}z`),m=null;return}if(b===o.length-1){if(!_)return;m===null?n.push(`M${b+e},${h+e} h1v1H${b+e}z`):n.push(`M${m+e},${h+e} h${b+1-m}v1H${m+e}z`);return}_&&m===null&&(m=b)})}),n.join("")}function SA(a,e){return a.slice().map((n,o)=>o<e.y||o>=e.y+e.h?n:n.map((h,m)=>m<e.x||m>=e.x+e.w?h:!1))}function J4(a,e,n,o){if(o==null)return null;const h=a.length+n*2,m=Math.floor(e*Z4),_=h/e,b=(o.width||m)*_,T=(o.height||m)*_,A=o.x==null?a.length/2-b/2:o.x*_,S=o.y==null?a.length/2-T/2:o.y*_,O=o.opacity==null?1:o.opacity;let B=null;if(o.excavate){let ne=Math.floor(A),ie=Math.floor(S),ge=Math.ceil(b+A-ne),Ue=Math.ceil(T+S-ie);B={x:ne,y:ie,w:ge,h:Ue}}const Y=o.crossOrigin;return{x:A,y:S,h:T,w:b,excavation:B,opacity:O,crossOrigin:Y}}function $4(a,e){return e!=null?Math.max(Math.floor(e),0):a?K4:Q4}function IA({value:a,level:e,minVersion:n,includeMargin:o,marginSize:h,imageSettings:m,size:_,boostLevel:b}){let T=pr.useMemo(()=>{const ne=(Array.isArray(a)?a:[a]).reduce((ie,ge)=>(ie.push(...Yl.QrSegment.makeSegments(ge)),ie),[]);return Yl.QrCode.encodeSegments(ne,W4[e],n,void 0,void 0,b)},[a,e,n,b]);const{cells:A,margin:S,numCells:O,calculatedImageSettings:B}=pr.useMemo(()=>{let Y=T.getModules();const ne=$4(o,h),ie=Y.length+ne*2,ge=J4(Y,_,ne,m);return{cells:Y,margin:ne,numCells:ie,calculatedImageSettings:ge}},[T,_,m,o,h]);return{qrcode:T,margin:S,cells:A,numCells:O,calculatedImageSettings:B}}var e8=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),RA=pr.forwardRef(function(e,n){const o=e,{value:h,size:m=xA,level:_=AA,bgColor:b=wA,fgColor:T=TA,includeMargin:A=CA,minVersion:S=bA,boostLevel:O,marginSize:B,imageSettings:Y}=o,ie=F1(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:ge}=ie,Ue=F1(ie,["style"]),Oe=Y?.src,pe=pr.useRef(null),Le=pr.useRef(null),nt=pr.useCallback(Qe=>{pe.current=Qe,typeof n=="function"?n(Qe):n&&(n.current=Qe)},[n]),[ze,F]=pr.useState(!1),{margin:j,cells:P,numCells:Q,calculatedImageSettings:q}=IA({value:h,level:_,minVersion:S,boostLevel:O,includeMargin:A,marginSize:B,imageSettings:Y,size:m});pr.useEffect(()=>{if(pe.current!=null){const Qe=pe.current,oe=Qe.getContext("2d");if(!oe)return;let $=P;const le=Le.current,Re=q!=null&&le!==null&&le.complete&&le.naturalHeight!==0&&le.naturalWidth!==0;Re&&q.excavation!=null&&($=SA(P,q.excavation));const He=window.devicePixelRatio||1;Qe.height=Qe.width=m*He;const Ye=m/Q*He;oe.scale(Ye,Ye),oe.fillStyle=b,oe.fillRect(0,0,Q,Q),oe.fillStyle=T,e8?oe.fill(new Path2D(vA($,j))):P.forEach(function(Z,X){Z.forEach(function(de,we){de&&oe.fillRect(we+j,X+j,1,1)})}),q&&(oe.globalAlpha=q.opacity),Re&&oe.drawImage(le,q.x+j,q.y+j,q.w,q.h)}}),pr.useEffect(()=>{F(!1)},[Oe]);const W=U1({height:m,width:m},ge);let G=null;return Oe!=null&&(G=pr.createElement("img",{src:Oe,key:Oe,style:{display:"none"},onLoad:()=>{F(!0)},ref:Le,crossOrigin:q?.crossOrigin})),pr.createElement(pr.Fragment,null,pr.createElement("canvas",U1({style:W,height:m,width:m,ref:nt,role:"img"},Ue)),G)});RA.displayName="QRCodeCanvas";var t8=pr.forwardRef(function(e,n){const o=e,{value:h,size:m=xA,level:_=AA,bgColor:b=wA,fgColor:T=TA,includeMargin:A=CA,minVersion:S=bA,boostLevel:O,title:B,marginSize:Y,imageSettings:ne}=o,ie=F1(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:ge,cells:Ue,numCells:Oe,calculatedImageSettings:pe}=IA({value:h,level:_,minVersion:S,boostLevel:O,includeMargin:A,marginSize:Y,imageSettings:ne,size:m});let Le=Ue,nt=null;ne!=null&&pe!=null&&(pe.excavation!=null&&(Le=SA(Ue,pe.excavation)),nt=pr.createElement("image",{href:ne.src,height:pe.h,width:pe.w,x:pe.x+ge,y:pe.y+ge,preserveAspectRatio:"none",opacity:pe.opacity,crossOrigin:pe.crossOrigin}));const ze=vA(Le,ge);return pr.createElement("svg",U1({height:m,width:m,viewBox:`0 0 ${Oe} ${Oe}`,ref:n,role:"img"},ie),!!B&&pr.createElement("title",null,B),pr.createElement("path",{fill:b,d:`M0,0 h${Oe}v${Oe}H0z`,shapeRendering:"crispEdges"}),pr.createElement("path",{fill:T,d:ze,shapeRendering:"crispEdges"}),nt)});t8.displayName="QRCodeSVG";function n8({user:a}){const[e,n]=ke.useState([]),[o,h]=ke.useState(a.term??11),[m,_]=ke.useState(null),[b,T]=ke.useState(""),[A,S]=ke.useState(null),[O,B]=ke.useState([]),[Y,ne]=ke.useState(!0),[ie,ge]=ke.useState(!1),[Ue,Oe]=ke.useState([]),[pe,Le]=ke.useState(!0),[nt,ze]=ke.useState(""),[F,j]=ke.useState(!1),P=ke.useRef(null),Q=ke.useRef(null),q=ke.useRef(!1),W=ke.useRef(null),G=ke.useRef(!1);ke.useEffect(()=>{(async()=>{ne(!0);const we=(await hs(di(rn,"times"))).docs.map(Fe=>{const ye=Fe.data();return{id:Fe.id,name:ye.name,category:ye.category,term:ye.term}});n(we),ne(!1)})()},[]),ke.useEffect(()=>{(async()=>{try{const de=Rr(rn,"users",a.uid),we=await Au(de),Fe=we.exists()?we.data():null,ye=Array.isArray(Fe?.allowedTerms)?Fe.allowedTerms.map(Xe=>typeof Xe=="number"?Xe:parseInt(Xe,10)).filter(Xe=>!Number.isNaN(Xe)):[];_(ye),ye.length>0&&(a.term&&ye.includes(a.term)?h(a.term):h(ye[0]))}catch(de){console.warn("Kunne ikke hente allowedTerms for lrer:",de),_([])}})()},[a.uid]);const Qe=ke.useMemo(()=>{if(m===null)return xs;const X=new Set(m??[]);return xs.filter(de=>X.has(de.value))},[m]);ke.useEffect(()=>{q.current||m!==null&&Qe.length===1&&(q.current=!0,setTimeout(()=>{Q.current?.focus()},0))},[m,Qe.length]),ke.useEffect(()=>{G.current||m!==null&&Qe.length>1&&(G.current=!0,setTimeout(()=>{const X=W.current;if(X)if(typeof X.showPicker=="function")X.showPicker();else{X.focus();try{X.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0}))}catch{X.click()}}},50))},[m,Qe.length]),ke.useEffect(()=>{(async()=>{if(m!==null){Le(!0);try{const de=di(rn,"users"),we=[],Fe=Array.isArray(m)?m.filter(mn=>typeof mn=="number"):[];if(Fe.length>0)for(let mn=0;mn<Fe.length;mn+=10){const Zt=Fe.slice(mn,mn+10),kn=uo(de,us("role","==","student"),us("term","in",Zt)),_t=await hs(kn);we.push(_t)}const ye=uo(de,us("role","==","student"),us("term","==",null)),Xe=await hs(ye);we.push(Xe);const et=new Set,lt=[];for(const mn of we)mn.docs.forEach(Zt=>{if(et.has(Zt.id))return;et.add(Zt.id);const kn=Zt.data();lt.push({id:Zt.id,name:kn.name||kn.displayName||null,email:kn.email,term:kn.term??null})});Oe(lt)}catch(de){console.error("Feil ved lasting av studenter:",de),Oe([])}finally{Le(!1)}}})()},[m]),ke.useEffect(()=>{if(!A){B([]);return}const X=di(rn,"sessions",A.id,"attendance"),de=h4(X,we=>{const Fe=we.docs.map(ye=>{const Xe=ye.data();return{id:ye.id,studentName:Xe.studentName??null,studentEmail:Xe.studentEmail??null,createdAt:Xe.createdAt}}).sort((ye,Xe)=>{const et=ye.createdAt?.toMillis?.()??0,lt=Xe.createdAt?.toMillis?.()??0;return et-lt});B(Fe)});return()=>de()},[A?.id]),ke.useEffect(()=>{A&&P.current&&P.current.scrollIntoView({behavior:"smooth",block:"start"})},[A]);const oe=ke.useMemo(()=>e.filter(X=>X.term===o),[e,o]),$=ke.useMemo(()=>{const X=b.trim().toLowerCase();return X?oe.filter(de=>de.name.toLowerCase().includes(X)).sort((de,we)=>de.name.localeCompare(we.name,"nb-NO",{sensitivity:"base"})):[]},[oe,b]),le=ke.useMemo(()=>{const X=nt.trim().toLowerCase();return!X||!A?[]:Ue.filter(de=>{if(de.term&&de.term!==A.term)return!1;const we=(de.name??"").toLowerCase(),Fe=de.email.toLowerCase();return we.includes(X)||Fe.includes(X)}).slice(0,10)},[Ue,nt,A]),Re=async X=>{const de=e.find(lt=>lt.id===X);if(!de)return;if(A){const lt=Rr(rn,"sessions",A.id);await $l(lt,{isOpen:!1}),S(null)}const we=Math.floor(1e5+Math.random()*9e5),Fe=String(we),ye=di(rn,"sessions"),et={id:(await B1(ye,{timeId:de.id,name:de.name,category:de.category,term:de.term,code:Fe,teacherId:a.uid,teacherName:a.displayName,teacherEmail:a.email,createdAt:An.now(),isOpen:!0})).id,timeId:de.id,name:de.name,category:de.category,term:de.term,code:Fe,teacherId:a.uid,createdAt:An.now()};S(et)},He=async X=>{T(X.name),ge(!1),await Re(X.id),Q.current&&Q.current.blur()},Ye=async()=>{if(!A)return;const X=Rr(rn,"sessions",A.id);await $l(X,{isOpen:!1}),S(null),B([])},Z=async X=>{if(A)try{const de=Rr(rn,"sessions",A.id,"attendance",X.id);if((await Au(de)).exists()){alert("Studenten er allerede registrert p denne kten.");return}await Jl(de,{userId:X.id,studentName:X.name??null,studentEmail:X.email,createdAt:An.now(),status:"present",addedManually:!0,addedBy:a.uid}),ze(""),j(!1)}catch(de){console.error(de),alert("Kunne ikke legge til student manuelt.")}};return Y?U.jsx("div",{className:"page-card page-card--teacher",children:U.jsx(yo,{})}):U.jsxs("div",{className:"page-card page-card--teacher",children:[U.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem"},children:"Registrer oppmte"}),U.jsxs("section",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",alignItems:"center"},children:[U.jsx("div",{style:{marginBottom:"1rem",width:"100%",maxWidth:520},children:(()=>{const X=m!==null?new Set(m??[]):null,de=X?xs.filter(we=>X.has(we.value)):xs;if(de.length===0)return U.jsx("div",{style:{width:"100%",padding:"0.6rem 0.75rem",fontSize:"16px",border:"1px solid #e5e7eb",borderRadius:"0.5rem",background:"#f9fafb",color:"#6b7280",textAlign:"center"},children:"Ingen terminer tilgjengelig"});if(de.length<=1){const we=de[0]??xs.find(Fe=>Fe.value===o);return U.jsx("div",{style:{width:"100%",padding:"0.6rem 0.75rem",fontSize:"16px",border:"1px solid #e5e7eb",borderRadius:"0.5rem",background:"#f9fafb",textAlign:"center"},children:we?we.label:oc(o)})}return U.jsx("select",{ref:W,value:o,onChange:we=>{const Fe=parseInt(we.target.value,10);h(Fe),T(""),ge(!1),S(null),B([]),setTimeout(()=>{Q.current?.focus()},0)},style:{width:"100%",padding:"0.6rem 0.75rem",fontSize:"16px",textAlign:"center"},children:de.map(we=>U.jsx("option",{value:we.value,children:we.label},we.value))})})()}),U.jsxs("div",{style:{position:"relative",marginBottom:"0.75rem",width:"100%",maxWidth:520},children:[U.jsx("input",{ref:Q,value:b,onChange:X=>{T(X.target.value),ge(!0)},onFocus:()=>{b.trim().length>0&&ge(!0)},placeholder:"Start  skrive navnet p timen...",style:{width:"100%",padding:"0.6rem 0rem",fontSize:"16px",textAlign:"center"}}),ie&&$.length>0&&U.jsx("ul",{style:{position:"absolute",top:"100%",left:0,right:0,zIndex:10,background:"white",border:"1px solid #e5e7eb",borderRadius:"0.5rem",marginTop:"0.2rem",listStyle:"none",padding:0,maxHeight:"220px",overflowY:"auto",boxShadow:"0 10px 20px rgba(0,0,0,0.08)"},children:$.map(X=>U.jsxs("li",{onClick:()=>He(X),style:{padding:"0.4rem 0.6rem",cursor:"pointer",borderBottom:"1px solid #f3f4f6"},onMouseDown:de=>de.preventDefault(),children:[U.jsx("div",{children:X.name}),U.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:X.category})]},X.id))})]})]}),A&&U.jsxs("section",{ref:P,style:{marginTop:"2rem",padding:"1rem",border:"1px solid #e5e7eb",borderRadius:"0.75rem",background:"#f9fafb"},children:[U.jsxs("div",{style:{textAlign:"center"},children:[U.jsx("h3",{style:{marginTop:0,marginBottom:"0.25rem"},children:oc(A.term)}),U.jsxs("p",{style:{margin:0},children:[U.jsx("strong",{children:"Time:"})," ",A.name]}),U.jsxs("p",{style:{marginTop:"0.2rem"},children:[U.jsx("strong",{children:"Gruppe:"})," ",A.category]})]}),U.jsxs("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},children:[U.jsx(RA,{value:A.code,size:160,includeMargin:!0}),U.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",letterSpacing:"0.3em"},children:A.code})]}),U.jsxs("div",{style:{marginTop:"1.5rem"},children:[U.jsx("h4",{style:{textAlign:"center",marginBottom:"0.3rem"},children:"Legg til student manuelt"}),U.jsx("p",{style:{fontSize:"0.8rem",color:"#6b7280",textAlign:"center",marginTop:0,marginBottom:"0.5rem"},children:"Brukes dersom en student ikke kan skanne eller skrive inn kode."}),pe&&U.jsx("div",{style:{display:"flex",justifyContent:"center"},children:U.jsx(yo,{})}),U.jsxs("div",{style:{position:"relative",maxWidth:"360px",margin:"0 auto"},children:[U.jsx("input",{value:nt,onChange:X=>{ze(X.target.value),j(!0)},onFocus:()=>{nt.trim().length>0&&j(!0)},placeholder:pe?"Laster studenter...":"Sk p navn eller e-post",disabled:pe,style:{width:"100%",padding:"0.4rem",fontSize:"14px",borderRadius:"0.5rem",border:"1px solid #d1d5db"}}),F&&le.length>0&&U.jsx("ul",{style:{position:"absolute",top:"100%",left:0,right:0,zIndex:20,background:"white",border:"1px solid #e5e7eb",borderRadius:"0.5rem",marginTop:"0.2rem",listStyle:"none",padding:0,maxHeight:"220px",overflowY:"auto",boxShadow:"0 10px 20px rgba(0,0,0,0.08)"},children:le.map(X=>U.jsxs("li",{onClick:()=>Z(X),style:{padding:"0.4rem 0.6rem",cursor:"pointer",borderBottom:"1px solid #f3f4f6"},onMouseDown:de=>de.preventDefault(),children:[U.jsx("div",{children:X.name||"(Uten navn)"}),U.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[X.email,X.term&&`  termin ${X.term}`]})]},X.id))})]})]}),U.jsx("div",{style:{marginTop:"1.2rem",display:"flex",justifyContent:"center"},children:U.jsx("button",{onClick:Ye,style:{padding:"0.5rem 1.2rem",borderRadius:"999px",border:"none",background:"#dc2626",color:"white",fontWeight:500,cursor:"pointer"},children:"Lukk kt"})}),U.jsx("hr",{style:{margin:"1rem 0"}}),U.jsx("h4",{children:"Registrerte studenter"}),O.length===0?U.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"Ingen har registrert seg enn."}):U.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[U.jsx("thead",{children:U.jsxs("tr",{children:[U.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"Navn"}),U.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"E-post"}),U.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"Tidspunkt"})]})}),U.jsx("tbody",{children:O.map(X=>U.jsxs("tr",{children:[U.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:X.studentName||"-"}),U.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:X.studentEmail||"-"}),U.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6",fontSize:"0.8rem",color:"#6b7280"},children:X.createdAt?new Date(X.createdAt.toMillis()).toLocaleTimeString("no-NO",{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-"})]},X.id))})]})]})]})}function jE(a){const e=a.match(/^\s*(\d+)/);return e?parseInt(e[1],10):Number.POSITIVE_INFINITY}function o1(){const a="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789!@#$";let e="";for(let n=0;n<12;n++)e+=a[Math.floor(Math.random()*a.length)];return e}const r8=()=>{const[a,e]=ke.useState([]),[n,o]=ke.useState(!0),[h,m]=ke.useState(""),[_,b]=ke.useState("teachers"),[T,A]=ke.useState("all"),[S,O]=ke.useState("name"),[B,Y]=ke.useState("asc"),[ne,ie]=ke.useState("all"),[ge,Ue]=ke.useState("name"),[Oe,pe]=ke.useState("asc"),[Le,nt]=ke.useState("name"),[ze,F]=ke.useState("asc"),[j,P]=ke.useState(null),[Q,q]=ke.useState(null),[W,G]=ke.useState(""),[Qe,oe]=ke.useState(""),[$,le]=ke.useState(""),[Re,He]=ke.useState("teacher"),[Ye,Z]=ke.useState([]),[X,de]=ke.useState(null),[we,Fe]=ke.useState(null),[ye,Xe]=ke.useState(""),[et,lt]=ke.useState(""),[mn,Zt]=ke.useState(""),[kn,_t]=ke.useState("student"),[Bn,ur]=ke.useState(null),[_r,pn]=ke.useState(null),[Wt,rt]=ke.useState(null),[yn,je]=ke.useState(""),[Ni,fs]=ke.useState(""),[cn,ei]=ke.useState(""),[qn,qi]=ke.useState("admin");ke.useEffect(()=>{(async()=>{try{o(!0);const mt=(await hs(di(rn,"users"))).docs.map(We=>{const Tt=We.data();return{docId:We.id,email:Tt.email??"",displayName:Tt.name??Tt.displayName??Tt.email??"(uten navn)",role:Tt.role??"student",term:Tt.term??null,phone:Tt.phone??null,allowedTerms:Tt.allowedTerms??[]}});mt.sort((We,Tt)=>We.displayName.localeCompare(Tt.displayName,"nb-NO",{sensitivity:"base"})),e(mt)}catch(Ge){console.error("Feil ved lasting av brukere:",Ge),e([])}finally{o(!1)}})()},[]);const ir=ke.useMemo(()=>{const ce=h.trim().toLowerCase();return ce?a.filter(Ge=>{const mt=(Ge.displayName??"").toLowerCase(),We=(Ge.email??"").toLowerCase(),Tt=(Ge.phone??"").toLowerCase();return`${mt} ${We} ${Tt}`.includes(ce)}):a},[a,h]);let bn=ir.filter(ce=>ce.role==="teacher"),ti=ir.filter(ce=>ce.role==="student"),ni=ir.filter(ce=>ce.role==="admin");if(T!=="all"){const ce=T;bn=bn.filter(Ge=>(Ge.allowedTerms??[]).includes(ce))}if(ne!=="all"){const ce=ne;ti=ti.filter(Ge=>Ge.term===ce)}bn.sort((ce,Ge)=>{const mt=Nt=>S==="name"?Nt.displayName??"":S==="email"?Nt.email??"":Nt.phone??"",We=mt(ce).toLowerCase(),Tt=mt(Ge).toLowerCase();return We<Tt?B==="asc"?-1:1:We>Tt?B==="asc"?1:-1:0}),ti.sort((ce,Ge)=>{const mt=Nt=>ge==="name"?Nt.displayName??"":ge==="email"?Nt.email??"":Nt.phone??"",We=mt(ce).toLowerCase(),Tt=mt(Ge).toLowerCase();return We<Tt?Oe==="asc"?-1:1:We>Tt?Oe==="asc"?1:-1:0}),ni.sort((ce,Ge)=>{const mt=Nt=>Le==="name"?Nt.displayName??"":Le==="email"?Nt.email??"":Nt.phone??"",We=mt(ce).toLowerCase(),Tt=mt(Ge).toLowerCase();return We<Tt?ze==="asc"?-1:1:We>Tt?ze==="asc"?1:-1:0}),bn=bn.slice(0,50),ti=ti.slice(0,50),ni=ni.slice(0,50);const Cs=ce=>{O(Ge=>Ge===ce?(Y(mt=>mt==="asc"?"desc":"asc"),Ge):(Y("asc"),ce))},Ft=ce=>{Ue(Ge=>Ge===ce?(pe(mt=>mt==="asc"?"desc":"asc"),Ge):(pe("asc"),ce))},De=ce=>{nt(Ge=>Ge===ce?(F(mt=>mt==="asc"?"desc":"asc"),Ge):(F("asc"),ce))},Jt=()=>{P("create"),q(null),G(""),oe(""),le(""),He("teacher"),Z([])},ut=async()=>{const ce=Qe.trim(),Ge=W.trim(),mt=$.trim();if(!ce){alert("E-post m fylles ut for  opprette lrer.");return}if(!Ye||Ye.length===0){alert("Velg minst n termin lreren kan registrere for.");return}try{const We=o1(),Nt=(await $h(a1,ce,We)).user.uid,Ve={email:ce,displayName:Ge||ce,name:Ge||ce,role:Re,term:null,phone:mt||null,allowedTerms:Ye};await Jl(Rr(rn,"users",Nt),Ve,{merge:!0}),e(Vn=>{const tn=[{docId:Nt,email:ce,displayName:Ve.displayName,role:Re,term:null,phone:mt||null,allowedTerms:[...Ye]},...Vn];return tn.sort((Ot,Yn)=>Ot.displayName.localeCompare(Yn.displayName,"nb-NO",{sensitivity:"base"})),tn}),P(null),q(null),alert(`Ny lrer opprettet.

E-post: ${ce}
Midlertidig passord: ${We}

Gi passordet til lreren og be dem bytte etter frste innlogging.`)}catch(We){console.error("Feil ved oppretting av lrer:",We),We?.code==="auth/email-already-in-use"?alert("E-posten er allerede i bruk i Auth. Bruk en annen eller koble eksisterende bruker."):alert("Kunne ikke opprette lrer. Se console for mer info.")}},En=ce=>{P("edit"),q(ce),G(ce.displayName),oe(ce.email),le(ce.phone??""),He(ce.role),Z(ce.allowedTerms??[])},pi=async()=>{if(!Q)return;const ce=Q.docId;try{const Ge=Rr(rn,"users",ce);await $l(Ge,{displayName:W,email:Qe,phone:$||null,role:Re,allowedTerms:Ye}),e(mt=>mt.map(We=>We.docId===ce?{...We,displayName:W,email:Qe,phone:$||null,role:Re,allowedTerms:[...Ye]}:We)),P(null),q(null)}catch(Ge){console.error("Feil ved lagring av lrer:",Ge),alert("Kunne ikke lagre endringer for lrer.")}},bs=()=>{P(null),q(null)},ri=ce=>{Z(Ge=>Ge.includes(ce)?Ge.filter(mt=>mt!==ce):[...Ge,ce])},bt=()=>{de("create"),Fe(null),Xe(""),lt(""),Zt(""),_t("student"),ur(null)},un=async()=>{const ce=et.trim(),Ge=ye.trim(),mt=mn.trim();if(!ce){alert("E-post m fylles ut for  opprette student.");return}if(Bn==null){alert("Velg termin studenten tilhrer.");return}try{const We=o1(),Nt=(await $h(a1,ce,We)).user.uid,Ve={email:ce,displayName:Ge||ce,name:Ge||ce,role:kn,term:Bn,phone:mt||null,allowedTerms:[]};await Jl(Rr(rn,"users",Nt),Ve,{merge:!0}),e(Vn=>{const tn=[{docId:Nt,email:ce,displayName:Ve.displayName,role:kn,term:Bn,phone:mt||null,allowedTerms:[]},...Vn];return tn.sort((Ot,Yn)=>Ot.displayName.localeCompare(Yn.displayName,"nb-NO",{sensitivity:"base"})),tn}),de(null),Fe(null),alert(`Ny student opprettet.

E-post: ${ce}
Midlertidig passord: ${We}

Gi passordet til studenten og be dem bytte etter frste innlogging.`)}catch(We){console.error("Feil ved oppretting av student:",We),We?.code==="auth/email-already-in-use"?alert("E-posten er allerede i bruk i Auth. Bruk en annen eller koble eksisterende bruker."):alert("Kunne ikke opprette student. Se console for mer info.")}},ii=ce=>{de("edit"),Fe(ce),Xe(ce.displayName),lt(ce.email),Zt(ce.phone??""),_t(ce.role),ur(ce.term??null)},si=async()=>{if(!we)return;const ce=we.docId;try{const Ge=Rr(rn,"users",ce);await $l(Ge,{displayName:ye,email:et,phone:mn||null,role:kn,term:Bn??null}),e(mt=>mt.map(We=>We.docId===ce?{...We,displayName:ye,email:et,phone:mn||null,role:kn,term:Bn??null}:We)),de(null),Fe(null)}catch(Ge){console.error("Feil ved lagring av student:",Ge),alert("Kunne ikke lagre endringer for student.")}},On=()=>{de(null),Fe(null)},qs=()=>{pn("create"),rt(null),je(""),fs(""),ei(""),qi("admin")},Xn=async()=>{const ce=Ni.trim(),Ge=yn.trim(),mt=cn.trim();if(!ce){alert("E-post m fylles ut for  opprette admin.");return}if(!mt){alert("Mobilnummer m fylles ut for  opprette admin.");return}try{const We=o1(),Nt=(await $h(a1,ce,We)).user.uid,Ve={email:ce,displayName:Ge||ce,name:Ge||ce,role:qn,term:null,phone:mt,allowedTerms:[]};await Jl(Rr(rn,"users",Nt),Ve,{merge:!0}),e(Vn=>{const tn=[{docId:Nt,email:ce,displayName:Ve.displayName,role:qn,term:null,phone:mt,allowedTerms:[]},...Vn];return tn.sort((Ot,Yn)=>Ot.displayName.localeCompare(Yn.displayName,"nb-NO",{sensitivity:"base"})),tn}),pn(null),rt(null),alert(`Ny admin opprettet.

E-post: ${ce}
Midlertidig passord: ${We}

Gi passordet til admin og be dem bytte etter frste innlogging.`)}catch(We){console.error("Feil ved oppretting av admin:",We),We?.code==="auth/email-already-in-use"?alert("E-posten er allerede i bruk i Auth. Bruk en annen eller koble eksisterende bruker."):alert("Kunne ikke opprette admin. Se console for mer info.")}},xr=ce=>{pn("edit"),rt(ce),je(ce.displayName),fs(ce.email),ei(ce.phone??""),qi(ce.role)},yi=async()=>{if(!Wt)return;const ce=Wt.docId;try{const Ge=Rr(rn,"users",ce);await $l(Ge,{displayName:yn,email:Ni,phone:cn||null,role:qn}),e(mt=>mt.map(We=>We.docId===ce?{...We,displayName:yn,email:Ni,phone:cn||null,role:qn}:We)),pn(null),rt(null)}catch(Ge){console.error("Feil ved lagring av admin:",Ge),alert("Kunne ikke lagre endringer for admin.")}},jr=()=>{pn(null),rt(null)};return U.jsxs("div",{style:{marginBottom:"2rem"},children:[U.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem"},children:[U.jsx("button",{type:"button",onClick:()=>b("teachers"),style:{flex:1,padding:"0.35rem 0.5rem",borderRadius:"999px",border:"1px solid #d1d5db",background:_==="teachers"?"#b91c1c":"#ffffff",color:_==="teachers"?"#ffffff":"#111827",fontSize:"0.85rem",cursor:"pointer"},children:"Lrere"}),U.jsx("button",{type:"button",onClick:()=>b("students"),style:{flex:1,padding:"0.35rem 0.5rem",borderRadius:"999px",border:"1px solid #d1d5db",background:_==="students"?"#b91c1c":"#ffffff",color:_==="students"?"#ffffff":"#111827",fontSize:"0.85rem",cursor:"pointer"},children:"Studenter"}),U.jsx("button",{type:"button",onClick:()=>b("admins"),style:{flex:1,padding:"0.35rem 0.5rem",borderRadius:"999px",border:"1px solid #d1d5db",background:_==="admins"?"#b91c1c":"#ffffff",color:_==="admins"?"#ffffff":"#111827",fontSize:"0.85rem",cursor:"pointer"},children:"Admin"})]}),U.jsx("input",{type:"text",placeholder:"Sk p navn, e-post eller mobil...",value:h,onChange:ce=>m(ce.target.value),style:{width:"100%",padding:"0.4rem 0.6rem",marginBottom:"0.75rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.9rem"}}),n?U.jsx(yo,{}):U.jsxs(U.Fragment,{children:[_==="teachers"&&U.jsxs("div",{style:{marginBottom:"1.2rem"},children:[U.jsxs("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",gap:"0.5rem",marginBottom:"0.4rem"},children:[U.jsx("div",{style:{fontSize:"0.8rem"},children:U.jsx("label",{children:U.jsxs("select",{value:T==="all"?"":T,onChange:ce=>{const Ge=ce.target.value;A(Ge===""?"all":parseInt(Ge,10))},style:{padding:"0.2rem 0.4rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.8rem"},children:[U.jsx("option",{value:"",children:"Alle terminer"}),xs.map(ce=>U.jsx("option",{value:ce.value,children:ce.label},ce.value))]})})}),U.jsx("button",{type:"button",onClick:Jt,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.8rem",cursor:"pointer"},children:"Legg til"})]}),U.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[U.jsx("thead",{children:U.jsxs("tr",{children:[U.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>Cs("name"),children:["Navn"," ",S==="name"&&(B==="asc"?"":"")]}),U.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>Cs("email"),children:["E-post"," ",S==="email"&&(B==="asc"?"":"")]}),U.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>Cs("phone"),children:["Mobil"," ",S==="phone"&&(B==="asc"?"":"")]})]})}),U.jsx("tbody",{children:bn.length===0?U.jsx("tr",{children:U.jsx("td",{colSpan:3,style:{padding:"0.4rem",fontSize:"0.85rem",color:"#6b7280"},children:"Ingen lrere funnet."})}):bn.map(ce=>U.jsxs("tr",{onClick:()=>En(ce),style:{cursor:"pointer"},children:[U.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:ce.displayName}),U.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:ce.email}),U.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:ce.phone??""})]},ce.docId))})]})]}),_==="students"&&U.jsxs("div",{style:{marginBottom:"1.2rem"},children:[U.jsxs("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",gap:"0.5rem",marginBottom:"0.4rem"},children:[U.jsx("div",{style:{fontSize:"0.8rem"},children:U.jsx("label",{children:U.jsxs("select",{value:ne==="all"?"":ne,onChange:ce=>{const Ge=ce.target.value;ie(Ge===""?"all":parseInt(Ge,10))},style:{padding:"0.2rem 0.4rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.8rem"},children:[U.jsx("option",{value:"",children:"Alle terminer"}),xs.map(ce=>U.jsx("option",{value:ce.value,children:ce.label},ce.value))]})})}),U.jsx("button",{type:"button",onClick:bt,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.8rem",cursor:"pointer"},children:"Legg til"})]}),ti.length===0?U.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280"},children:"Ingen studenter funnet."}):U.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[U.jsx("thead",{children:U.jsxs("tr",{children:[U.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>Ft("name"),children:["Navn"," ",ge==="name"&&(Oe==="asc"?"":"")]}),U.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>Ft("email"),children:["E-post"," ",ge==="email"&&(Oe==="asc"?"":"")]}),U.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>Ft("phone"),children:["Mobil"," ",ge==="phone"&&(Oe==="asc"?"":"")]}),U.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem"},children:"Termin"})]})}),U.jsx("tbody",{children:ti.map(ce=>U.jsxs("tr",{onClick:()=>ii(ce),style:{cursor:"pointer"},children:[U.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:ce.displayName}),U.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:ce.email}),U.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:ce.phone??""}),U.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:ce.term!=null&&ce.term!==void 0?q4(ce.term):"Ingen"})]},ce.docId))})]})]}),_==="admins"&&U.jsxs("div",{style:{marginBottom:"1.2rem"},children:[U.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"end",gap:"0.5rem",marginBottom:"0.4rem"},children:U.jsx("button",{type:"button",onClick:qs,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.8rem",cursor:"pointer"},children:"Legg til"})}),ni.length===0?U.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280"},children:"Ingen administratorer funnet."}):U.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[U.jsx("thead",{children:U.jsxs("tr",{children:[U.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>De("name"),children:["Navn"," ",Le==="name"&&(ze==="asc"?"":"")]}),U.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>De("email"),children:["E-post"," ",Le==="email"&&(ze==="asc"?"":"")]}),U.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>De("phone"),children:["Mobil"," ",Le==="phone"&&(ze==="asc"?"":"")]})]})}),U.jsx("tbody",{children:ni.map(ce=>U.jsxs("tr",{onClick:()=>xr(ce),style:{cursor:"pointer"},children:[U.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:ce.displayName}),U.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:ce.email}),U.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:ce.phone??""})]},ce.docId))})]})]})]}),j&&U.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:U.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[U.jsx("h3",{style:{marginTop:0,marginBottom:"0.5rem"},children:j==="create"?"Ny lrer":"Rediger lrer"}),U.jsx("p",{style:{marginTop:0,marginBottom:"0.9rem",fontSize:"0.8rem",color:"#6b7280"},children:j==="create"?"Opprett ny lrer, velg hvilke terminer de kan registrere for og lagre.":"Endre navn, e-post, mobil, rolle og hvilke terminer lreren kan undervise p."}),U.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.75rem"},children:[U.jsxs("label",{style:{fontSize:"0.8rem"},children:["Navn",U.jsx("input",{type:"text",value:W,onChange:ce=>G(ce.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),U.jsxs("label",{style:{fontSize:"0.8rem"},children:["E-post",U.jsx("input",{type:"email",value:Qe,onChange:ce=>oe(ce.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),U.jsxs("label",{style:{fontSize:"0.8rem"},children:["Mobil",U.jsx("input",{type:"tel",value:$,onChange:ce=>le(ce.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),U.jsxs("label",{style:{fontSize:"0.8rem"},children:["Rolle",U.jsxs("select",{value:Re,onChange:ce=>He(ce.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"},children:[U.jsx("option",{value:"teacher",children:"Lrer"}),U.jsx("option",{value:"student",children:"Student"}),U.jsx("option",{value:"admin",children:"Admin"})]})]}),U.jsxs("div",{style:{fontSize:"0.8rem"},children:[U.jsx("div",{style:{marginBottom:"0.25rem"},children:"Termin(er) lreren kan registrere for:"}),U.jsx("div",{style:{maxHeight:"150px",overflowY:"auto",borderRadius:"0.5rem",border:"1px solid #e5e7eb",padding:"0.35rem 0.45rem"},children:xs.map(ce=>U.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.35rem",fontSize:"0.8rem",padding:"0.15rem 0"},children:[U.jsx("input",{type:"checkbox",checked:Ye.includes(ce.value),onChange:()=>ri(ce.value)}),U.jsx("span",{children:ce.label})]},ce.value))})]})]}),U.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"0.5rem"},children:[U.jsx("button",{type:"button",onClick:bs,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.85rem",cursor:"pointer"},children:"Avbryt"}),U.jsx("button",{type:"button",onClick:j==="create"?ut:pi,style:{padding:"0.3rem 0.9rem",borderRadius:"999px",border:"none",backgroundColor:"#16a34a",color:"#ffffff",fontSize:"0.85rem",cursor:"pointer"},children:j==="create"?"Opprett lrer":"Lagre"})]})]})}),X&&U.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:U.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[U.jsx("h3",{style:{marginTop:0,marginBottom:"0.5rem"},children:X==="create"?"Ny student":"Rediger student"}),U.jsx("p",{style:{marginTop:0,marginBottom:"0.9rem",fontSize:"0.8rem",color:"#6b7280"},children:X==="create"?"Opprett ny student og velg termin.":"Endre navn, e-post, mobil, rolle og termin."}),U.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.75rem"},children:[U.jsxs("label",{style:{fontSize:"0.8rem"},children:["Navn",U.jsx("input",{type:"text",value:ye,onChange:ce=>Xe(ce.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),U.jsxs("label",{style:{fontSize:"0.8rem"},children:["E-post",U.jsx("input",{type:"email",value:et,onChange:ce=>lt(ce.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),U.jsxs("label",{style:{fontSize:"0.8rem"},children:["Mobil",U.jsx("input",{type:"tel",value:mn,onChange:ce=>Zt(ce.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),U.jsxs("label",{style:{fontSize:"0.8rem"},children:["Rolle",U.jsxs("select",{value:kn,onChange:ce=>_t(ce.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"},children:[U.jsx("option",{value:"student",children:"Student"}),U.jsx("option",{value:"teacher",children:"Lrer"}),U.jsx("option",{value:"admin",children:"Admin"})]})]}),U.jsxs("label",{style:{fontSize:"0.8rem"},children:["Termin",U.jsxs("select",{value:Bn??"",onChange:ce=>{const Ge=ce.target.value;ur(Ge===""?null:parseInt(Ge,10))},style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"},children:[U.jsx("option",{value:"",children:"Ingen"}),xs.map(ce=>U.jsx("option",{value:ce.value,children:ce.label},ce.value))]})]})]}),U.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"0.5rem"},children:[U.jsx("button",{type:"button",onClick:On,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.85rem",cursor:"pointer"},children:"Avbryt"}),U.jsx("button",{type:"button",onClick:X==="create"?un:si,style:{padding:"0.3rem 0.9rem",borderRadius:"999px",border:"none",backgroundColor:"#16a34a",color:"#ffffff",fontSize:"0.85rem",cursor:"pointer"},children:X==="create"?"Opprett student":"Lagre"})]})]})}),_r&&U.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:U.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[U.jsx("h3",{style:{marginTop:0,marginBottom:"0.5rem"},children:_r==="create"?"Ny admin":"Rediger admin"}),U.jsx("p",{style:{marginTop:0,marginBottom:"0.9rem",fontSize:"0.8rem",color:"#6b7280"},children:_r==="create"?"Opprett ny admin.":"Endre navn, e-post, mobil og rolle."}),U.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.75rem"},children:[U.jsxs("label",{style:{fontSize:"0.8rem"},children:["Navn",U.jsx("input",{type:"text",value:yn,onChange:ce=>je(ce.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),U.jsxs("label",{style:{fontSize:"0.8rem"},children:["E-post",U.jsx("input",{type:"email",value:Ni,onChange:ce=>fs(ce.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),U.jsxs("label",{style:{fontSize:"0.8rem"},children:["Mobil",U.jsx("input",{type:"tel",value:cn,onChange:ce=>ei(ce.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),U.jsxs("label",{style:{fontSize:"0.8rem"},children:["Rolle",U.jsxs("select",{value:qn,onChange:ce=>qi(ce.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"},children:[U.jsx("option",{value:"admin",children:"Admin"}),U.jsx("option",{value:"teacher",children:"Lrer"}),U.jsx("option",{value:"student",children:"Student"})]})]})]}),U.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"0.5rem"},children:[U.jsx("button",{type:"button",onClick:jr,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.85rem",cursor:"pointer"},children:"Avbryt"}),U.jsx("button",{type:"button",onClick:_r==="create"?Xn:yi,style:{padding:"0.3rem 0.9rem",borderRadius:"999px",border:"none",backgroundColor:"#16a34a",color:"#ffffff",fontSize:"0.85rem",cursor:"pointer"},children:_r==="create"?"Opprett admin":"Lagre"})]})]})})]})},i8=()=>{const[a,e]=ke.useState([]),[n,o]=ke.useState(""),[h,m]=ke.useState([]),[_,b]=ke.useState(!0),[T,A]=ke.useState(""),[S,O]=ke.useState({}),[B,Y]=ke.useState(null),[ne,ie]=ke.useState(""),[ge,Ue]=ke.useState(""),[Oe,pe]=ke.useState(null),[Le,nt]=ke.useState(0);ke.useEffect(()=>{(async()=>{try{b(!0);const[le,Re]=await Promise.all([hs(di(rn,"requirements")),hs(di(rn,"times"))]),He=le.docs.map(Z=>{const X=Z.data();return{id:Z.id,term:X.term,category:X.category,requiredCount:X.requiredCount??0}}),Ye=Re.docs.map(Z=>{const X=Z.data();return{id:Z.id,name:X.name,category:X.category,term:X.term}});e(He),m(Ye)}catch(le){console.error("Feil ved lasting av termin-oppsett:",le)}finally{b(!1)}})()},[]);const ze=a.filter($=>$.term===n).sort(($,le)=>$.category.localeCompare(le.category,"nb-NO",{sensitivity:"base"})),F=async $=>{const le=ne.trim();if(!le||le===$.name){Y(null),ie("");return}try{await $l(Rr(rn,"times",$.id),{name:le}),m(Re=>Re.map(He=>He.id===$.id?{...He,name:le}:He)),Y(null),ie("")}catch(Re){console.error("Feil ved endring av timenavn:",Re),alert("Kunne ikke oppdatere navn p timen.")}},j=h.filter($=>$.term===n),P=$=>{pe($.id),Ue($.category),nt($.requiredCount??0)},Q=()=>{pe(null)},q=async $=>{if(!Oe)return;const le=$.category,Re=(ge||"").trim()||le,He=h.filter(X=>X.term===$.term&&X.category===le).length;let Ye=Le;if((Number.isNaN(Ye)||Ye<0)&&(Ye=0),He>0&&Ye>He&&(Ye=He),ze.find(X=>X.id!==$.id&&X.category.toLowerCase()===Re.toLowerCase())){alert("Det finnes allerede en gruppe med dette navnet i valgt termin.");return}try{const X=g4(rn),de=Rr(rn,"requirements",$.id);X.update(de,{category:Re,requiredCount:Ye});const we=uo(di(rn,"times"),us("term","==",$.term),us("category","==",le));(await hs(we)).forEach(et=>{X.update(et.ref,{category:Re})});const ye=uo(di(rn,"sessions"),us("term","==",$.term),us("category","==",le));(await hs(ye)).forEach(et=>{X.update(et.ref,{category:Re})}),await X.commit(),e(et=>et.map(lt=>lt.id===$.id?{...lt,category:Re,requiredCount:Ye}:lt)),m(et=>et.map(lt=>lt.term===$.term&&lt.category===le?{...lt,category:Re}:lt)),pe(null)}catch(X){console.error("Feil ved lagring av gruppe:",X),alert("Kunne ikke lagre endringene for gruppen.")}},W=async()=>{const $=T.trim();if(!$)return;if(ze.some(Re=>Re.category.toLowerCase()===$.toLowerCase())){alert("Denne gruppen finnes allerede for valgt termin.");return}try{const Re=await B1(di(rn,"requirements"),{term:n,category:$,requiredCount:0});e(He=>[...He,{id:Re.id,term:n,category:$,requiredCount:0}]),A("")}catch(Re){console.error("Feil ved oppretting av kategori:",Re),alert("Kunne ikke opprette kategori.")}},G=async $=>{if(window.confirm("Er du sikker p at du vil slette denne gruppen for terminen?"))try{await RE(Rr(rn,"requirements",$)),e(le=>le.filter(Re=>Re.id!==$))}catch(le){console.error("Feil ved sletting av krav:",le),alert("Kunne ikke slette gruppen.")}},Qe=async $=>{const le=$.id,Re=(S[le]??"").trim();if(Re)try{const He=await B1(di(rn,"times"),{term:n,category:$.category,name:Re});m(Ye=>[...Ye,{id:He.id,term:n,category:$.category,name:Re}]),O(Ye=>({...Ye,[le]:""}))}catch(He){console.error("Feil ved oppretting av time:",He),alert("Kunne ikke opprette time.")}},oe=async $=>{if(window.confirm(`Slette timen "${$.name}" fra ${oc($.term)}? Historiske sesjoner beholdes, men timen forsvinner fra admin-oppsettet.`))try{await RE(Rr(rn,"times",$.id)),m(Re=>Re.filter(He=>He.id!==$.id))}catch(Re){console.error("Feil ved sletting av time:",Re),alert("Kunne ikke slette time.")}};return _?U.jsx(yo,{}):U.jsxs("section",{style:{marginBottom:"2rem"},children:[U.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.75rem"},children:[U.jsx("div",{children:U.jsxs("select",{value:n,onChange:$=>{const le=$.target.value;o(le===""?"":parseInt(le,10))},style:{width:"100%",padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db"},children:[U.jsx("option",{value:"",disabled:!0,children:"Velg termin"}),xs.map($=>U.jsx("option",{value:$.value,children:$.label},$.value))]})}),U.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",alignItems:"center"},children:[U.jsx("input",{type:"text",placeholder:"Ny gruppe...",value:T,onChange:$=>A($.target.value),style:{flex:1,minWidth:0,padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db"}}),U.jsx("button",{type:"button",onClick:W,style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"none",backgroundColor:"#dc2626",color:"#ffffff",fontSize:"0.9rem",cursor:"pointer",whiteSpace:"nowrap"},children:"Legg til gruppe"})]})]}),ze.length===0?U.jsxs("p",{style:{fontSize:"0.85rem",color:"#6b7280"},children:["Ingen grupper definert enn for ",oc(n),"."]}):U.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:ze.map($=>{const le=$.id,Re=j.filter(X=>X.category===$.category).sort((X,de)=>{const we=jE(X.name),Fe=jE(de.name);return we!==Fe?we-Fe:X.name.localeCompare(de.name,"nb-NO",{sensitivity:"base"})}),He=S[le]??"",Ye=j.filter(X=>X.category===$.category).length,Z=Oe===$.id;return U.jsxs("div",{style:{borderRadius:"0.75rem",border:"1px solid #e5e7eb",padding:"0.75rem 0.75rem",backgroundColor:"#f9fafb"},children:[U.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem",gap:"0.5rem",flexWrap:"wrap"},children:[U.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:Z?U.jsxs(U.Fragment,{children:[U.jsx("input",{type:"text",value:ge,onChange:X=>Ue(X.target.value),onKeyDown:X=>{X.key==="Enter"?q($):X.key==="Escape"&&Q()},autoFocus:!0,style:{minWidth:"12rem",padding:"0.2rem 0.35rem",borderRadius:"0.4rem",border:"1px solid #d1d5db",fontSize:"0.9rem"}}),U.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[U.jsx("input",{type:"number",min:0,max:Ye,value:Le,onChange:X=>{const de=parseInt(X.target.value,10);nt(Number.isNaN(de)?0:de)},onKeyDown:X=>{X.key==="Enter"?q($):X.key==="Escape"&&Q()},style:{width:"4rem",padding:"0.2rem 0.35rem",borderRadius:"0.4rem",border:"1px solid #d1d5db",fontSize:"0.9rem",textAlign:"center"}}),U.jsxs("span",{style:{fontSize:"0.8rem",color:"#6b7280"},children:["/ ",Ye]})]})]}):U.jsxs("div",{style:{fontWeight:600,fontSize:"0.95rem"},children:[$.category," (",$.requiredCount,"/",Ye,")"]})}),U.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[U.jsx("button",{type:"button",onClick:()=>Z?void q($):P($),style:{padding:"0.25rem 0.6rem",borderRadius:"999px",border:"none",backgroundColor:"#e5e7eb",color:"#111827",fontSize:"0.75rem",cursor:"pointer"},children:Z?"Lagre":"Endre gruppe"}),U.jsx("button",{type:"button",onClick:()=>G($.id),style:{padding:"0.25rem 0.6rem",borderRadius:"999px",border:"none",backgroundColor:"#fee2e2",color:"#991b1b",fontSize:"0.75rem",cursor:"pointer"},children:"Slett gruppe"})]})]}),Re.length>0?U.jsx("ul",{style:{listStyle:"none",paddingLeft:0,margin:"0 0 0.5rem 0",fontSize:"0.85rem"},children:Re.map(X=>{const de=B===X.id;return U.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.15rem 0",borderBottom:"1px dashed #e5e7eb",gap:"0.5rem"},children:[U.jsx("div",{style:{flex:1},children:de?U.jsx("input",{type:"text",value:ne,onChange:we=>ie(we.target.value),onKeyDown:we=>{we.key==="Enter"?F(X):we.key==="Escape"&&(Y(null),ie(""))},autoFocus:!0,style:{width:"100%",padding:"0.2rem 0.35rem",borderRadius:"0.4rem",border:"1px solid #d1d5db",fontSize:"0.85rem"}}):U.jsx("span",{children:X.name})}),U.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem"},children:[de?U.jsx("button",{type:"button",onClick:()=>void F(X),style:{padding:"0.15rem 0.45rem",borderRadius:"999px",border:"none",backgroundColor:"#e5e7eb",color:"#111827",fontSize:"0.75rem",cursor:"pointer"},children:"Lagre"}):U.jsx("button",{type:"button",onClick:()=>{Y(X.id),ie(X.name)},style:{padding:"0.15rem 0.45rem",borderRadius:"999px",border:"none",backgroundColor:"#e5e7eb",color:"#111827",fontSize:"0.75rem",cursor:"pointer"},children:"Endre"}),U.jsx("button",{type:"button",onClick:()=>oe(X),style:{padding:"0.15rem 0.45rem",borderRadius:"999px",border:"none",backgroundColor:"#fee2e2",color:"#b91c1c",fontSize:"0.75rem",cursor:"pointer"},children:"Slett"})]})]},X.id)})}):U.jsx("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.8rem",color:"#9ca3af"},children:"Ingen timer lagt til i denne gruppen."}),U.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.25rem"},children:[U.jsx("input",{type:"text",placeholder:"Ny time...",value:He,onChange:X=>O(de=>({...de,[le]:X.target.value})),style:{flex:1,padding:"0.3rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem"}}),U.jsx("button",{type:"button",onClick:()=>Qe($),style:{padding:"0.35rem 0.8rem",borderRadius:"999px",border:"none",backgroundColor:"#4b5563",color:"#ffffff",fontSize:"0.8rem",cursor:"pointer"},children:"Legg til time"})]})]},$.id)})})]})},s8=()=>{const{user:a,loading:e}=gA(),[n,o]=ke.useState("setup");return e?U.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#f5f5f7"},children:U.jsx(yo,{})}):!a||a.role!=="admin"?U.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#f5f5f7",padding:"1.5rem"},children:U.jsxs("div",{className:"page-card page-card--admin",children:[U.jsx("h2",{children:"Ingen tilgang"}),U.jsx("p",{children:"Du m vre logget inn som administrator for  se denne siden."})]})}):U.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"flex-start",justifyContent:"center",background:"#f5f5f7",padding:"1.5rem 1rem"},children:U.jsxs("div",{className:"page-card page-card--admin",children:[U.jsxs("header",{style:{marginBottom:"1rem",borderBottom:"1px solid #e5e7eb",paddingBottom:"0.75rem"},children:[U.jsx("h2",{style:{margin:0},children:"Adminpanel"}),U.jsx("p",{style:{margin:"0.25rem 0 0.75rem",fontSize:"0.85rem",color:"#6b7280"},children:"Oppsett av krav per termin, administrasjon av brukere og forhndsvisning for lrere."}),U.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[U.jsx("button",{type:"button",onClick:()=>o("setup"),style:{flex:1,padding:"0.35rem 0.5rem",borderRadius:"999px",border:"1px solid #e5e7eb",background:n==="setup"?"#b91c1c":"#ffffff",color:n==="setup"?"#ffffff":"#111827",fontSize:"0.85rem",cursor:"pointer"},children:"Oppmtebker"}),U.jsx("button",{type:"button",onClick:()=>o("users"),style:{flex:1,padding:"0.35rem 0.5rem",borderRadius:"999px",border:"1px solid #e5e7eb",background:n==="users"?"#b91c1c":"#ffffff",color:n==="users"?"#ffffff":"#111827",fontSize:"0.85rem",cursor:"pointer"},children:"Brukere"})]})]}),n==="setup"&&U.jsx(i8,{}),n==="users"&&U.jsx(r8,{}),n==="teacherView"&&U.jsx(TeacherPreview,{})]})})},l1={minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"Helvetica, Arial, sans-serif"},c1={background:"white",borderRadius:"0.75rem",padding:"1.5rem",boxShadow:"0 10px 25px rgba(0,0,0,0.08)",width:"100%",maxWidth:"960px"};function a8(){const{user:a,loading:e,login:n,logout:o}=gA(),[h,m]=ke.useState(""),[_,b]=ke.useState(""),[T,A]=ke.useState(null),[S,O]=ke.useState(!1),B=async Y=>{if(Y.preventDefault(),A(null),!h||!_){A("Fyll inn bde e-post og passord.");return}O(!0);try{await n(h.trim(),_)}catch(ne){console.error(ne);let ie="Kunne ikke logge inn.";ne?.code==="auth/user-not-found"?ie="Bruker finnes ikke.":ne?.code==="auth/wrong-password"?ie="Feil passord.":ne?.code==="auth/email-already-in-use"?ie="E-postadressen er allerede registrert.":ne?.code==="auth/weak-password"&&(ie="Passordet er for svakt (min. 6 tegn)."),A(ie)}finally{O(!1)}};return e?U.jsx("div",{style:l1,children:U.jsx("div",{style:c1,children:U.jsx(yo,{})})}):a?U.jsx("div",{style:l1,children:U.jsxs("div",{style:c1,children:[U.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[U.jsx("div",{children:U.jsx("div",{children:a.displayName||a.email})}),U.jsx("button",{onClick:o,style:{padding:"0.3rem 0.8rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#f9fafb",cursor:"pointer",fontSize:"0.85rem"},children:"Logg ut"})]}),U.jsx("main",{children:a.role==="admin"?U.jsx(s8,{user:a}):a.role==="teacher"?U.jsx(n8,{user:a}):U.jsx(X4,{user:a})})]})}):U.jsx("div",{className:"front-page",style:{...l1,background:"#CEFFDF",width:"100%"},children:U.jsxs("div",{style:{...c1,maxWidth:"420px"},children:[U.jsx("h1",{style:{marginBottom:"2rem",textAlign:"center"},children:"Oppmteregistrering"}),U.jsxs("form",{onSubmit:B,children:[U.jsxs("div",{style:{marginBottom:"0.75rem"},children:[U.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.2rem"},children:"Mobil / Epost"}),U.jsx("input",{type:"email",value:h,onChange:Y=>m(Y.target.value),placeholder:"uiobrukernavn@uio.no",style:{width:"100%",padding:"0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db"}})]}),U.jsxs("div",{style:{marginBottom:"0.75rem"},children:[U.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.2rem"},children:"Passord"}),U.jsx("input",{type:"password",value:_,onChange:Y=>b(Y.target.value),placeholder:"Minst 6 tegn",style:{width:"100%",padding:"0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db"}})]}),T&&U.jsx("p",{style:{color:"red",fontSize:"0.85rem",marginBottom:"0.75rem"},children:T}),U.jsx("button",{type:"submit",disabled:S,style:{width:"100%",padding:"0.6rem 1rem",borderRadius:"999px",border:"none",background:"#6CE1AB",color:"black",fontWeight:500,cursor:"pointer",marginTop:"1.5rem",marginBottom:"1rem"},children:S?"Logger inn...":"Logg inn"})]})]})})}iT.createRoot(document.getElementById("root")).render(U.jsx(pr.StrictMode,{children:U.jsx(a8,{})}));
