function Uw(a,e){for(var n=0;n<e.length;n++){const o=e[n];if(typeof o!="string"&&!Array.isArray(o)){for(const h in o)if(h!=="default"&&!(h in a)){const m=Object.getOwnPropertyDescriptor(o,h);m&&Object.defineProperty(a,h,m.get?m:{enumerable:!0,get:()=>o[h]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))o(h);new MutationObserver(h=>{for(const m of h)if(m.type==="childList")for(const _ of m.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&o(_)}).observe(document,{childList:!0,subtree:!0});function n(h){const m={};return h.integrity&&(m.integrity=h.integrity),h.referrerPolicy&&(m.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?m.credentials="include":h.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function o(h){if(h.ep)return;h.ep=!0;const m=n(h);fetch(h.href,m)}})();var Ph=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function L0(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var P1={exports:{}},Gc={};var B2;function Fw(){if(B2)return Gc;B2=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(o,h,m){var _=null;if(m!==void 0&&(_=""+m),h.key!==void 0&&(_=""+h.key),"key"in h){m={};for(var v in h)v!=="key"&&(m[v]=h[v])}else m=h;return h=m.ref,{$$typeof:a,type:o,key:_,ref:h!==void 0?h:null,props:m}}return Gc.Fragment=e,Gc.jsx=n,Gc.jsxs=n,Gc}var k2;function zw(){return k2||(k2=1,P1.exports=Fw()),P1.exports}var q=zw(),B1={exports:{}},gt={};var V2;function jw(){if(V2)return gt;V2=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),_=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),V=Symbol.iterator;function G(Z){return Z===null||typeof Z!="object"?null:(Z=V&&Z[V]||Z["@@iterator"],typeof Z=="function"?Z:null)}var ee={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ie=Object.assign,he={};function Le(Z,pe,Oe){this.props=Z,this.context=pe,this.refs=he,this.updater=Oe||ee}Le.prototype.isReactComponent={},Le.prototype.setState=function(Z,pe){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,pe,"setState")},Le.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function be(){}be.prototype=Le.prototype;function me(Z,pe,Oe){this.props=Z,this.context=pe,this.refs=he,this.updater=Oe||ee}var Be=me.prototype=new be;Be.constructor=me,ie(Be,Le.prototype),Be.isPureReactComponent=!0;var $e=Array.isArray;function xe(){}var k={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function L(Z,pe,Oe){var Pe=Oe.ref;return{$$typeof:a,type:Z,key:pe,ref:Pe!==void 0?Pe:null,props:Oe}}function W(Z,pe){return L(Z.type,pe,Z.props)}function X(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===a}function Y(Z){var pe={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(Oe){return pe[Oe]})}var H=/\/+/g;function qe(Z,pe){return typeof Z=="object"&&Z!==null&&Z.key!=null?Y(""+Z.key):pe.toString(36)}function le(Z){switch(Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason;default:switch(typeof Z.status=="string"?Z.then(xe,xe):(Z.status="pending",Z.then(function(pe){Z.status==="pending"&&(Z.status="fulfilled",Z.value=pe)},function(pe){Z.status==="pending"&&(Z.status="rejected",Z.reason=pe)})),Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason}}throw Z}function J(Z,pe,Oe,Pe,et){var Ae=typeof Z;(Ae==="undefined"||Ae==="boolean")&&(Z=null);var rt=!1;if(Z===null)rt=!0;else switch(Ae){case"bigint":case"string":case"number":rt=!0;break;case"object":switch(Z.$$typeof){case a:case e:rt=!0;break;case b:return rt=Z._init,J(rt(Z._payload),pe,Oe,Pe,et)}}if(rt)return et=et(Z),rt=Pe===""?"."+qe(Z,0):Pe,$e(et)?(Oe="",rt!=null&&(Oe=rt.replace(H,"$&/")+"/"),J(et,pe,Oe,"",function(Yi){return Yi})):et!=null&&(X(et)&&(et=W(et,Oe+(et.key==null||Z&&Z.key===et.key?"":(""+et.key).replace(H,"$&/")+"/")+rt)),pe.push(et)),1;rt=0;var yt=Pe===""?".":Pe+":";if($e(Z))for(var qt=0;qt<Z.length;qt++)Pe=Z[qt],Ae=yt+qe(Pe,qt),rt+=J(Pe,pe,Oe,Ae,et);else if(qt=G(Z),typeof qt=="function")for(Z=qt.call(Z),qt=0;!(Pe=Z.next()).done;)Pe=Pe.value,Ae=yt+qe(Pe,qt++),rt+=J(Pe,pe,Oe,Ae,et);else if(Ae==="object"){if(typeof Z.then=="function")return J(le(Z),pe,Oe,Pe,et);throw pe=String(Z),Error("Objects are not valid as a React child (found: "+(pe==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":pe)+"). If you meant to render a collection of children, use an array instead.")}return rt}function re(Z,pe,Oe){if(Z==null)return Z;var Pe=[],et=0;return J(Z,Pe,"","",function(Ae){return pe.call(Oe,Ae,et++)}),Pe}function ke(Z){if(Z._status===-1){var pe=Z._result;pe=pe(),pe.then(function(Oe){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=Oe)},function(Oe){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=Oe)}),Z._status===-1&&(Z._status=0,Z._result=pe)}if(Z._status===1)return Z._result.default;throw Z._result}var We=typeof reportError=="function"?reportError:function(Z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var pe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Z=="object"&&Z!==null&&typeof Z.message=="string"?String(Z.message):String(Z),error:Z});if(!window.dispatchEvent(pe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Z);return}console.error(Z)},Qe={map:re,forEach:function(Z,pe,Oe){re(Z,function(){pe.apply(this,arguments)},Oe)},count:function(Z){var pe=0;return re(Z,function(){pe++}),pe},toArray:function(Z){return re(Z,function(pe){return pe})||[]},only:function(Z){if(!X(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}};return gt.Activity=O,gt.Children=Qe,gt.Component=Le,gt.Fragment=n,gt.Profiler=h,gt.PureComponent=me,gt.StrictMode=o,gt.Suspense=T,gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,gt.__COMPILER_RUNTIME={__proto__:null,c:function(Z){return k.H.useMemoCache(Z)}},gt.cache=function(Z){return function(){return Z.apply(null,arguments)}},gt.cacheSignal=function(){return null},gt.cloneElement=function(Z,pe,Oe){if(Z==null)throw Error("The argument must be a React element, but you passed "+Z+".");var Pe=ie({},Z.props),et=Z.key;if(pe!=null)for(Ae in pe.key!==void 0&&(et=""+pe.key),pe)!F.call(pe,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&pe.ref===void 0||(Pe[Ae]=pe[Ae]);var Ae=arguments.length-2;if(Ae===1)Pe.children=Oe;else if(1<Ae){for(var rt=Array(Ae),yt=0;yt<Ae;yt++)rt[yt]=arguments[yt+2];Pe.children=rt}return L(Z.type,et,Pe)},gt.createContext=function(Z){return Z={$$typeof:_,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null},Z.Provider=Z,Z.Consumer={$$typeof:m,_context:Z},Z},gt.createElement=function(Z,pe,Oe){var Pe,et={},Ae=null;if(pe!=null)for(Pe in pe.key!==void 0&&(Ae=""+pe.key),pe)F.call(pe,Pe)&&Pe!=="key"&&Pe!=="__self"&&Pe!=="__source"&&(et[Pe]=pe[Pe]);var rt=arguments.length-2;if(rt===1)et.children=Oe;else if(1<rt){for(var yt=Array(rt),qt=0;qt<rt;qt++)yt[qt]=arguments[qt+2];et.children=yt}if(Z&&Z.defaultProps)for(Pe in rt=Z.defaultProps,rt)et[Pe]===void 0&&(et[Pe]=rt[Pe]);return L(Z,Ae,et)},gt.createRef=function(){return{current:null}},gt.forwardRef=function(Z){return{$$typeof:v,render:Z}},gt.isValidElement=X,gt.lazy=function(Z){return{$$typeof:b,_payload:{_status:-1,_result:Z},_init:ke}},gt.memo=function(Z,pe){return{$$typeof:A,type:Z,compare:pe===void 0?null:pe}},gt.startTransition=function(Z){var pe=k.T,Oe={};k.T=Oe;try{var Pe=Z(),et=k.S;et!==null&&et(Oe,Pe),typeof Pe=="object"&&Pe!==null&&typeof Pe.then=="function"&&Pe.then(xe,We)}catch(Ae){We(Ae)}finally{pe!==null&&Oe.types!==null&&(pe.types=Oe.types),k.T=pe}},gt.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},gt.use=function(Z){return k.H.use(Z)},gt.useActionState=function(Z,pe,Oe){return k.H.useActionState(Z,pe,Oe)},gt.useCallback=function(Z,pe){return k.H.useCallback(Z,pe)},gt.useContext=function(Z){return k.H.useContext(Z)},gt.useDebugValue=function(){},gt.useDeferredValue=function(Z,pe){return k.H.useDeferredValue(Z,pe)},gt.useEffect=function(Z,pe){return k.H.useEffect(Z,pe)},gt.useEffectEvent=function(Z){return k.H.useEffectEvent(Z)},gt.useId=function(){return k.H.useId()},gt.useImperativeHandle=function(Z,pe,Oe){return k.H.useImperativeHandle(Z,pe,Oe)},gt.useInsertionEffect=function(Z,pe){return k.H.useInsertionEffect(Z,pe)},gt.useLayoutEffect=function(Z,pe){return k.H.useLayoutEffect(Z,pe)},gt.useMemo=function(Z,pe){return k.H.useMemo(Z,pe)},gt.useOptimistic=function(Z,pe){return k.H.useOptimistic(Z,pe)},gt.useReducer=function(Z,pe,Oe){return k.H.useReducer(Z,pe,Oe)},gt.useRef=function(Z){return k.H.useRef(Z)},gt.useState=function(Z){return k.H.useState(Z)},gt.useSyncExternalStore=function(Z,pe,Oe){return k.H.useSyncExternalStore(Z,pe,Oe)},gt.useTransition=function(){return k.H.useTransition()},gt.version="19.2.0",gt}var U2;function P0(){return U2||(U2=1,B1.exports=jw()),B1.exports}var nt=P0();const ni=L0(nt);var k1={exports:{}},qc={},V1={exports:{}},U1={};var F2;function Hw(){return F2||(F2=1,(function(a){function e(J,re){var ke=J.length;J.push(re);e:for(;0<ke;){var We=ke-1>>>1,Qe=J[We];if(0<h(Qe,re))J[We]=re,J[ke]=Qe,ke=We;else break e}}function n(J){return J.length===0?null:J[0]}function o(J){if(J.length===0)return null;var re=J[0],ke=J.pop();if(ke!==re){J[0]=ke;e:for(var We=0,Qe=J.length,Z=Qe>>>1;We<Z;){var pe=2*(We+1)-1,Oe=J[pe],Pe=pe+1,et=J[Pe];if(0>h(Oe,ke))Pe<Qe&&0>h(et,Oe)?(J[We]=et,J[Pe]=ke,We=Pe):(J[We]=Oe,J[pe]=ke,We=pe);else if(Pe<Qe&&0>h(et,ke))J[We]=et,J[Pe]=ke,We=Pe;else break e}}return re}function h(J,re){var ke=J.sortIndex-re.sortIndex;return ke!==0?ke:J.id-re.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;a.unstable_now=function(){return m.now()}}else{var _=Date,v=_.now();a.unstable_now=function(){return _.now()-v}}var T=[],A=[],b=1,O=null,V=3,G=!1,ee=!1,ie=!1,he=!1,Le=typeof setTimeout=="function"?setTimeout:null,be=typeof clearTimeout=="function"?clearTimeout:null,me=typeof setImmediate<"u"?setImmediate:null;function Be(J){for(var re=n(A);re!==null;){if(re.callback===null)o(A);else if(re.startTime<=J)o(A),re.sortIndex=re.expirationTime,e(T,re);else break;re=n(A)}}function $e(J){if(ie=!1,Be(J),!ee)if(n(T)!==null)ee=!0,xe||(xe=!0,Y());else{var re=n(A);re!==null&&le($e,re.startTime-J)}}var xe=!1,k=-1,F=5,L=-1;function W(){return he?!0:!(a.unstable_now()-L<F)}function X(){if(he=!1,xe){var J=a.unstable_now();L=J;var re=!0;try{e:{ee=!1,ie&&(ie=!1,be(k),k=-1),G=!0;var ke=V;try{t:{for(Be(J),O=n(T);O!==null&&!(O.expirationTime>J&&W());){var We=O.callback;if(typeof We=="function"){O.callback=null,V=O.priorityLevel;var Qe=We(O.expirationTime<=J);if(J=a.unstable_now(),typeof Qe=="function"){O.callback=Qe,Be(J),re=!0;break t}O===n(T)&&o(T),Be(J)}else o(T);O=n(T)}if(O!==null)re=!0;else{var Z=n(A);Z!==null&&le($e,Z.startTime-J),re=!1}}break e}finally{O=null,V=ke,G=!1}re=void 0}}finally{re?Y():xe=!1}}}var Y;if(typeof me=="function")Y=function(){me(X)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,qe=H.port2;H.port1.onmessage=X,Y=function(){qe.postMessage(null)}}else Y=function(){Le(X,0)};function le(J,re){k=Le(function(){J(a.unstable_now())},re)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(J){J.callback=null},a.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<J?Math.floor(1e3/J):5},a.unstable_getCurrentPriorityLevel=function(){return V},a.unstable_next=function(J){switch(V){case 1:case 2:case 3:var re=3;break;default:re=V}var ke=V;V=re;try{return J()}finally{V=ke}},a.unstable_requestPaint=function(){he=!0},a.unstable_runWithPriority=function(J,re){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ke=V;V=J;try{return re()}finally{V=ke}},a.unstable_scheduleCallback=function(J,re,ke){var We=a.unstable_now();switch(typeof ke=="object"&&ke!==null?(ke=ke.delay,ke=typeof ke=="number"&&0<ke?We+ke:We):ke=We,J){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=ke+Qe,J={id:b++,callback:re,priorityLevel:J,startTime:ke,expirationTime:Qe,sortIndex:-1},ke>We?(J.sortIndex=ke,e(A,J),n(T)===null&&J===n(A)&&(ie?(be(k),k=-1):ie=!0,le($e,ke-We))):(J.sortIndex=Qe,e(T,J),ee||G||(ee=!0,xe||(xe=!0,Y()))),J},a.unstable_shouldYield=W,a.unstable_wrapCallback=function(J){var re=V;return function(){var ke=V;V=re;try{return J.apply(this,arguments)}finally{V=ke}}}})(U1)),U1}var z2;function Gw(){return z2||(z2=1,V1.exports=Hw()),V1.exports}var F1={exports:{}},zi={};var j2;function qw(){if(j2)return zi;j2=1;var a=P0();function e(T){var A="https://react.dev/errors/"+T;if(1<arguments.length){A+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)A+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+T+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},h=Symbol.for("react.portal");function m(T,A,b){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:O==null?null:""+O,children:T,containerInfo:A,implementation:b}}var _=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function v(T,A){if(T==="font")return"";if(typeof A=="string")return A==="use-credentials"?A:""}return zi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,zi.createPortal=function(T,A){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)throw Error(e(299));return m(T,A,null,b)},zi.flushSync=function(T){var A=_.T,b=o.p;try{if(_.T=null,o.p=2,T)return T()}finally{_.T=A,o.p=b,o.d.f()}},zi.preconnect=function(T,A){typeof T=="string"&&(A?(A=A.crossOrigin,A=typeof A=="string"?A==="use-credentials"?A:"":void 0):A=null,o.d.C(T,A))},zi.prefetchDNS=function(T){typeof T=="string"&&o.d.D(T)},zi.preinit=function(T,A){if(typeof T=="string"&&A&&typeof A.as=="string"){var b=A.as,O=v(b,A.crossOrigin),V=typeof A.integrity=="string"?A.integrity:void 0,G=typeof A.fetchPriority=="string"?A.fetchPriority:void 0;b==="style"?o.d.S(T,typeof A.precedence=="string"?A.precedence:void 0,{crossOrigin:O,integrity:V,fetchPriority:G}):b==="script"&&o.d.X(T,{crossOrigin:O,integrity:V,fetchPriority:G,nonce:typeof A.nonce=="string"?A.nonce:void 0})}},zi.preinitModule=function(T,A){if(typeof T=="string")if(typeof A=="object"&&A!==null){if(A.as==null||A.as==="script"){var b=v(A.as,A.crossOrigin);o.d.M(T,{crossOrigin:b,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0})}}else A==null&&o.d.M(T)},zi.preload=function(T,A){if(typeof T=="string"&&typeof A=="object"&&A!==null&&typeof A.as=="string"){var b=A.as,O=v(b,A.crossOrigin);o.d.L(T,b,{crossOrigin:O,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0,type:typeof A.type=="string"?A.type:void 0,fetchPriority:typeof A.fetchPriority=="string"?A.fetchPriority:void 0,referrerPolicy:typeof A.referrerPolicy=="string"?A.referrerPolicy:void 0,imageSrcSet:typeof A.imageSrcSet=="string"?A.imageSrcSet:void 0,imageSizes:typeof A.imageSizes=="string"?A.imageSizes:void 0,media:typeof A.media=="string"?A.media:void 0})}},zi.preloadModule=function(T,A){if(typeof T=="string")if(A){var b=v(A.as,A.crossOrigin);o.d.m(T,{as:typeof A.as=="string"&&A.as!=="script"?A.as:void 0,crossOrigin:b,integrity:typeof A.integrity=="string"?A.integrity:void 0})}else o.d.m(T)},zi.requestFormReset=function(T){o.d.r(T)},zi.unstable_batchedUpdates=function(T,A){return T(A)},zi.useFormState=function(T,A,b){return _.H.useFormState(T,A,b)},zi.useFormStatus=function(){return _.H.useHostTransitionStatus()},zi.version="19.2.0",zi}var H2;function Xw(){if(H2)return F1.exports;H2=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),F1.exports=qw(),F1.exports}var G2;function Yw(){if(G2)return qc;G2=1;var a=Gw(),e=P0(),n=Xw();function o(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)r+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function m(t){var r=t,c=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(c=r.return),t=r.return;while(t)}return r.tag===3?c:null}function _(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function v(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function T(t){if(m(t)!==t)throw Error(o(188))}function A(t){var r=t.alternate;if(!r){if(r=m(t),r===null)throw Error(o(188));return r!==t?null:t}for(var c=t,d=r;;){var E=c.return;if(E===null)break;var w=E.alternate;if(w===null){if(d=E.return,d!==null){c=d;continue}break}if(E.child===w.child){for(w=E.child;w;){if(w===c)return T(E),t;if(w===d)return T(E),r;w=w.sibling}throw Error(o(188))}if(c.return!==d.return)c=E,d=w;else{for(var R=!1,B=E.child;B;){if(B===c){R=!0,c=E,d=w;break}if(B===d){R=!0,d=E,c=w;break}B=B.sibling}if(!R){for(B=w.child;B;){if(B===c){R=!0,c=w,d=E;break}if(B===d){R=!0,d=w,c=E;break}B=B.sibling}if(!R)throw Error(o(189))}}if(c.alternate!==d)throw Error(o(190))}if(c.tag!==3)throw Error(o(188));return c.stateNode.current===c?t:r}function b(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=b(t),r!==null)return r;t=t.sibling}return null}var O=Object.assign,V=Symbol.for("react.element"),G=Symbol.for("react.transitional.element"),ee=Symbol.for("react.portal"),ie=Symbol.for("react.fragment"),he=Symbol.for("react.strict_mode"),Le=Symbol.for("react.profiler"),be=Symbol.for("react.consumer"),me=Symbol.for("react.context"),Be=Symbol.for("react.forward_ref"),$e=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),W=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function Y(t){return t===null||typeof t!="object"?null:(t=X&&t[X]||t["@@iterator"],typeof t=="function"?t:null)}var H=Symbol.for("react.client.reference");function qe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===H?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ie:return"Fragment";case Le:return"Profiler";case he:return"StrictMode";case $e:return"Suspense";case xe:return"SuspenseList";case L:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case ee:return"Portal";case me:return t.displayName||"Context";case be:return(t._context.displayName||"Context")+".Consumer";case Be:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k:return r=t.displayName||null,r!==null?r:qe(t.type)||"Memo";case F:r=t._payload,t=t._init;try{return qe(t(r))}catch{}}return null}var le=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ke={pending:!1,data:null,method:null,action:null},We=[],Qe=-1;function Z(t){return{current:t}}function pe(t){0>Qe||(t.current=We[Qe],We[Qe]=null,Qe--)}function Oe(t,r){Qe++,We[Qe]=t.current,t.current=r}var Pe=Z(null),et=Z(null),Ae=Z(null),rt=Z(null);function yt(t,r){switch(Oe(Ae,r),Oe(et,t),Oe(Pe,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?s2(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=s2(r),t=a2(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}pe(Pe),Oe(Pe,t)}function qt(){pe(Pe),pe(et),pe(Ae)}function Yi(t){t.memoizedState!==null&&Oe(rt,t);var r=Pe.current,c=a2(r,t.type);r!==c&&(Oe(et,t),Oe(Pe,c))}function On(t){et.current===t&&(pe(Pe),pe(et)),rt.current===t&&(pe(rt),Fc._currentValue=ke)}var is,Tt;function mi(t){if(is===void 0)try{throw Error()}catch(c){var r=c.stack.trim().match(/\n( *(at )?)/);is=r&&r[1]||"",Tt=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+is+t+Tt}var Li=!1;function pr(t,r){if(!t||Li)return"";Li=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(Ee){var fe=Ee}Reflect.construct(t,[],Ce)}else{try{Ce.call()}catch(Ee){fe=Ee}t.call(Ce.prototype)}}else{try{throw Error()}catch(Ee){fe=Ee}(Ce=t())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(Ee){if(Ee&&fe&&typeof Ee.stack=="string")return[Ee.stack,fe.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=d.DetermineComponentFrameRoot(),R=w[0],B=w[1];if(R&&B){var K=R.split(`
`),ue=B.split(`
`);for(E=d=0;d<K.length&&!K[d].includes("DetermineComponentFrameRoot");)d++;for(;E<ue.length&&!ue[E].includes("DetermineComponentFrameRoot");)E++;if(d===K.length||E===ue.length)for(d=K.length-1,E=ue.length-1;1<=d&&0<=E&&K[d]!==ue[E];)E--;for(;1<=d&&0<=E;d--,E--)if(K[d]!==ue[E]){if(d!==1||E!==1)do if(d--,E--,0>E||K[d]!==ue[E]){var _e=`
`+K[d].replace(" at new "," at ");return t.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",t.displayName)),_e}while(1<=d&&0<=E);break}}}finally{Li=!1,Error.prepareStackTrace=c}return(c=t?t.displayName||t.name:"")?mi(c):""}function Dn(t,r){switch(t.tag){case 26:case 27:case 5:return mi(t.type);case 16:return mi("Lazy");case 13:return t.child!==r&&r!==null?mi("Suspense Fallback"):mi("Suspense");case 19:return mi("SuspenseList");case 0:case 15:return pr(t.type,!1);case 11:return pr(t.type.render,!1);case 1:return pr(t.type,!0);case 31:return mi("Activity");default:return""}}function Xt(t){try{var r="",c=null;do r+=Dn(t,c),c=t,t=t.return;while(t);return r}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var tt=Object.prototype.hasOwnProperty,Tn=a.unstable_scheduleCallback,Fe=a.unstable_cancelCallback,xa=a.unstable_shouldYield,wo=a.unstable_requestPaint,En=a.unstable_now,rs=a.unstable_getCurrentPriorityLevel,pi=a.unstable_ImmediatePriority,Aa=a.unstable_UserBlockingPriority,yi=a.unstable_NormalPriority,si=a.unstable_LowPriority,To=a.unstable_IdlePriority,Ps=a.log,ll=a.unstable_setDisableYieldValue,Yt=null,Re=null;function Wt(t){if(typeof Ps=="function"&&ll(t),Re&&typeof Re.setStrictMode=="function")try{Re.setStrictMode(Yt,t)}catch{}}var ot=Math.clz32?Math.clz32:wa,fn=Math.log,Br=Math.LN2;function wa(t){return t>>>=0,t===0?32:31-(fn(t)/Br|0)|0}var yr=256,wt=262144,ln=4194304;function Er(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function _r(t,r,c){var d=t.pendingLanes;if(d===0)return 0;var E=0,w=t.suspendedLanes,R=t.pingedLanes;t=t.warmLanes;var B=d&134217727;return B!==0?(d=B&~w,d!==0?E=Er(d):(R&=B,R!==0?E=Er(R):c||(c=B&~t,c!==0&&(E=Er(c))))):(B=d&~w,B!==0?E=Er(B):R!==0?E=Er(R):c||(c=d&~t,c!==0&&(E=Er(c)))),E===0?0:r!==0&&r!==E&&(r&w)===0&&(w=E&-E,c=r&-r,w>=c||w===32&&(c&4194048)!==0)?r:E}function Mn(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Co(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qn(){var t=ln;return ln<<=1,(ln&62914560)===0&&(ln=4194304),t}function Ei(t){for(var r=[],c=0;31>c;c++)r.push(t);return r}function kr(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ir(t,r,c,d,E,w){var R=t.pendingLanes;t.pendingLanes=c,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=c,t.entangledLanes&=c,t.errorRecoveryDisabledLanes&=c,t.shellSuspendCounter=0;var B=t.entanglements,K=t.expirationTimes,ue=t.hiddenUpdates;for(c=R&~c;0<c;){var _e=31-ot(c),Ce=1<<_e;B[_e]=0,K[_e]=-1;var fe=ue[_e];if(fe!==null)for(ue[_e]=null,_e=0;_e<fe.length;_e++){var Ee=fe[_e];Ee!==null&&(Ee.lane&=-536870913)}c&=~Ce}d!==0&&Bs(t,d,0),w!==0&&E===0&&t.tag!==0&&(t.suspendedLanes|=w&~(R&~r))}function Bs(t,r,c){t.pendingLanes|=r,t.suspendedLanes&=~r;var d=31-ot(r);t.entangledLanes|=r,t.entanglements[d]=t.entanglements[d]|1073741824|c&261930}function xr(t,r){var c=t.entangledLanes|=r;for(t=t.entanglements;c;){var d=31-ot(c),E=1<<d;E&r|t[d]&r&&(t[d]|=r),c&=~E}}function ks(t,r){var c=r&-r;return c=(c&42)!==0?1:Vn(c),(c&(t.suspendedLanes|r))!==0?0:c}function Vn(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function _i(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function xi(){var t=re.p;return t!==0?t:(t=window.event,t===void 0?32:R2(t.type))}function Ve(t,r){var c=re.p;try{return re.p=t,r()}finally{re.p=c}}var ui=Math.random().toString(36).slice(2),Cn="__reactFiber$"+ui,Ht="__reactProps$"+ui,Ai="__reactContainer$"+ui,ss="__reactEvents$"+ui,Ta="__reactListeners$"+ui,Wi="__reactHandles$"+ui,cl="__reactResources$"+ui,Vr="__reactMarker$"+ui;function wi(t){delete t[Cn],delete t[Ht],delete t[ss],delete t[Ta],delete t[Wi]}function pn(t){var r=t[Cn];if(r)return r;for(var c=t.parentNode;c;){if(r=c[Ai]||c[Cn]){if(c=r.alternate,r.child!==null||c!==null&&c.child!==null)for(t=d2(t);t!==null;){if(c=t[Cn])return c;t=d2(t)}return r}t=c,c=t.parentNode}return null}function St(t){if(t=t[Cn]||t[Ai]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function Pi(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(o(33))}function ai(t){var r=t[cl];return r||(r=t[cl]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function vn(t){t[Vr]=!0}var ve=new Set,vo={};function Gt(t,r){Ti(t,r),Ti(t+"Capture",r)}function Ti(t,r){for(vo[t]=r,t=0;t<r.length;t++)ve.add(r[t])}var So=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Dt={},bt={};function xt(t){return tt.call(bt,t)?!0:tt.call(Dt,t)?!1:So.test(t)?bt[t]=!0:(Dt[t]=!0,!1)}function ms(t,r,c){if(xt(r))if(c===null)t.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+c)}}function Ci(t,r,c){if(c===null)t.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+c)}}function Sn(t,r,c,d){if(d===null)t.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(c);return}t.setAttributeNS(r,c,""+d)}}function Ct(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vi(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function bo(t,r,c){var d=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var E=d.get,w=d.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return E.call(this)},set:function(R){c=""+R,w.call(this,R)}}),Object.defineProperty(t,r,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(R){c=""+R},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function st(t){if(!t._valueTracker){var r=vi(t)?"checked":"value";t._valueTracker=bo(t,r,""+t[r])}}function Bi(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var c=r.getValue(),d="";return t&&(d=vi(t)?t.checked?"true":"false":t.value),t=d,t!==c?(r.setValue(t),!0):!1}function Ur(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var rr=/[\n"\\]/g;function Et(t){return t.replace(rr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ln(t,r,c,d,E,w,R,B){t.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?t.type=R:t.removeAttribute("type"),r!=null?R==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+Ct(r)):t.value!==""+Ct(r)&&(t.value=""+Ct(r)):R!=="submit"&&R!=="reset"||t.removeAttribute("value"),r!=null?z(t,R,Ct(r)):c!=null?z(t,R,Ct(c)):d!=null&&t.removeAttribute("value"),E==null&&w!=null&&(t.defaultChecked=!!w),E!=null&&(t.checked=E&&typeof E!="function"&&typeof E!="symbol"),B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?t.name=""+Ct(B):t.removeAttribute("name")}function oe(t,r,c,d,E,w,R,B){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(t.type=w),r!=null||c!=null){if(!(w!=="submit"&&w!=="reset"||r!=null)){st(t);return}c=c!=null?""+Ct(c):"",r=r!=null?""+Ct(r):c,B||r===t.value||(t.value=r),t.defaultValue=r}d=d??E,d=typeof d!="function"&&typeof d!="symbol"&&!!d,t.checked=B?t.checked:!!d,t.defaultChecked=!!d,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(t.name=R),st(t)}function z(t,r,c){r==="number"&&Ur(t.ownerDocument)===t||t.defaultValue===""+c||(t.defaultValue=""+c)}function He(t,r,c,d){if(t=t.options,r){r={};for(var E=0;E<c.length;E++)r["$"+c[E]]=!0;for(c=0;c<t.length;c++)E=r.hasOwnProperty("$"+t[c].value),t[c].selected!==E&&(t[c].selected=E),E&&d&&(t[c].defaultSelected=!0)}else{for(c=""+Ct(c),r=null,E=0;E<t.length;E++){if(t[E].value===c){t[E].selected=!0,d&&(t[E].defaultSelected=!0);return}r!==null||t[E].disabled||(r=t[E])}r!==null&&(r.selected=!0)}}function Pn(t,r,c){if(r!=null&&(r=""+Ct(r),r!==t.value&&(t.value=r),c==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=c!=null?""+Ct(c):""}function Xn(t,r,c,d){if(r==null){if(d!=null){if(c!=null)throw Error(o(92));if(le(d)){if(1<d.length)throw Error(o(93));d=d[0]}c=d}c==null&&(c=""),r=c}c=Ct(r),t.defaultValue=c,d=t.textContent,d===c&&d!==""&&d!==null&&(t.value=d),st(t)}function ki(t,r){if(r){var c=t.firstChild;if(c&&c===t.lastChild&&c.nodeType===3){c.nodeValue=r;return}}t.textContent=r}var Ca=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hi(t,r,c){var d=r.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":d?t.setProperty(r,c):typeof c!="number"||c===0||Ca.has(r)?r==="float"?t.cssFloat=c:t[r]=(""+c).trim():t[r]=c+"px"}function Ye(t,r,c){if(r!=null&&typeof r!="object")throw Error(o(62));if(t=t.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?t.setProperty(d,""):d==="float"?t.cssFloat="":t[d]="");for(var E in r)d=r[E],r.hasOwnProperty(E)&&c[E]!==d&&hi(t,E,d)}else for(var w in r)r.hasOwnProperty(w)&&hi(t,w,r[w])}function $t(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Io=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ps=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ys(t){return ps.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Vi(){}var Vs=null;function sr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var dn=null,Ui=null;function Fi(t){var r=St(t);if(r&&(t=r.stateNode)){var c=t[Ht]||null;e:switch(t=r.stateNode,r.type){case"input":if(Ln(t,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),r=c.name,c.type==="radio"&&r!=null){for(c=t;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Et(""+r)+'"][type="radio"]'),r=0;r<c.length;r++){var d=c[r];if(d!==t&&d.form===t.form){var E=d[Ht]||null;if(!E)throw Error(o(90));Ln(d,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(r=0;r<c.length;r++)d=c[r],d.form===t.form&&Bi(d)}break e;case"textarea":Pn(t,c.value,c.defaultValue);break e;case"select":r=c.value,r!=null&&He(t,!!c.multiple,r,!1)}}}var Ke=!1;function Es(t,r,c){if(Ke)return t(r,c);Ke=!0;try{var d=t(r);return d}finally{if(Ke=!1,(dn!==null||Ui!==null)&&(dh(),dn&&(r=dn,t=Ui,Ui=dn=null,Fi(r),t)))for(r=0;r<t.length;r++)Fi(t[r])}}function it(t,r){var c=t.stateNode;if(c===null)return null;var d=c[Ht]||null;if(d===null)return null;c=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(t=t.type,d=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!d;break e;default:t=!1}if(t)return null;if(c&&typeof c!="function")throw Error(o(231,r,typeof c));return c}var en=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Us=!1;if(en)try{var Kt={};Object.defineProperty(Kt,"passive",{get:function(){Us=!0}}),window.addEventListener("test",Kt,Kt),window.removeEventListener("test",Kt,Kt)}catch{Us=!1}var Ar=null,wr=null,Fs=null;function as(){if(Fs)return Fs;var t,r=wr,c=r.length,d,E="value"in Ar?Ar.value:Ar.textContent,w=E.length;for(t=0;t<c&&r[t]===E[t];t++);var R=c-t;for(d=1;d<=R&&r[c-d]===E[w-d];d++);return Fs=E.slice(t,1<d?1-d:void 0)}function Tr(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Ki(){return!0}function ar(){return!1}function Bn(t){function r(c,d,E,w,R){this._reactName=c,this._targetInst=E,this.type=d,this.nativeEvent=w,this.target=R,this.currentTarget=null;for(var B in t)t.hasOwnProperty(B)&&(c=t[B],this[B]=c?c(w):w[B]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Ki:ar,this.isPropagationStopped=ar,this}return O(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Ki)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Ki)},persist:function(){},isPersistent:Ki}),r}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_n=Bn(Qi),os=O({},Qi,{view:0,detail:0}),va=Bn(os),ls,Sa,Fr,ba=O({},os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fr&&(Fr&&t.type==="mousemove"?(ls=t.screenX-Fr.screenX,Sa=t.screenY-Fr.screenY):Sa=ls=0,Fr=t),ls)},movementY:function(t){return"movementY"in t?t.movementY:Sa}}),zt=Bn(ba),_s=O({},ba,{dataTransfer:0}),zs=Bn(_s),Cr=O({},os,{relatedTarget:0}),js=Bn(Cr),de=O({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),dt=Bn(de),bn=O({},Qi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Hs=Bn(bn),Ro=O({},Qi,{data:0}),zr=Bn(Ro),ul={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ia={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Ia[t])?!!r[t]:!1}function jr(){return In}var vt=O({},os,{key:function(t){if(t.key){var r=ul[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Tr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hl[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jr,charCode:function(t){return t.type==="keypress"?Tr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Tr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Gs=Bn(vt),Hr=O({},ba,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),It=Bn(Hr),p=O({},os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jr}),S=Bn(p),N=O({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),U=Bn(N),se=O({},ba,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ye=Bn(se),Me=O({},Qi,{newState:0,oldState:0}),ut=Bn(Me),Rn=[9,13,27,32],Ut=en&&"CompositionEvent"in window,gn=null;en&&"documentMode"in document&&(gn=document.documentMode);var Zi=en&&"TextEvent"in window&&!gn,Gr=en&&(!Ut||gn&&8<gn&&11>=gn),fi=" ",Ji=!1;function qs(t,r){switch(t){case"keyup":return Rn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qr(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ra=!1;function xs(t,r){switch(t){case"compositionend":return qr(r);case"keypress":return r.which!==32?null:(Ji=!0,fi);case"textInput":return t=r.data,t===fi&&Ji?null:t;default:return null}}function fl(t,r){if(Ra)return t==="compositionend"||!Ut&&qs(t,r)?(t=as(),Fs=wr=Ar=null,Ra=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Gr&&r.locale!=="ko"?null:r.data;default:return null}}var or={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uc(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!or[t.type]:r==="textarea"}function vr(t,r,c,d){dn?Ui?Ui.push(d):Ui=[d]:dn=d,r=xh(r,"onChange"),0<r.length&&(c=new _n("onChange","change",null,c,d),t.push({event:c,listeners:r}))}var No=null,Xs=null;function Wf(t){$p(t,0)}function Oo(t){var r=Pi(t);if(Bi(r))return t}function Sr(t,r){if(t==="change")return r}var Ou=!1;if(en){var Do;if(en){var Ys="oninput"in document;if(!Ys){var Mt=document.createElement("div");Mt.setAttribute("oninput","return;"),Ys=typeof Mt.oninput=="function"}Do=Ys}else Do=!1;Ou=Do&&(!document.documentMode||9<document.documentMode)}function Mo(){No&&(No.detachEvent("onpropertychange",D),Xs=No=null)}function D(t){if(t.propertyName==="value"&&Oo(Xs)){var r=[];vr(r,Xs,t,sr(t)),Es(Wf,r)}}function i(t,r,c){t==="focusin"?(Mo(),No=r,Xs=c,No.attachEvent("onpropertychange",D)):t==="focusout"&&Mo()}function s(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Oo(Xs)}function l(t,r){if(t==="click")return Oo(r)}function u(t,r){if(t==="input"||t==="change")return Oo(r)}function f(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var g=typeof Object.is=="function"?Object.is:f;function y(t,r){if(g(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var c=Object.keys(t),d=Object.keys(r);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var E=c[d];if(!tt.call(r,E)||!g(t[E],r[E]))return!1}return!0}function x(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function C(t,r){var c=x(t);t=0;for(var d;c;){if(c.nodeType===3){if(d=t+c.textContent.length,t<=r&&d>=r)return{node:c,offset:r-t};t=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=x(c)}}function I(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?I(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function M(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Ur(t.document);r instanceof t.HTMLIFrameElement;){try{var c=typeof r.contentWindow.location.href=="string"}catch{c=!1}if(c)t=r.contentWindow;else break;r=Ur(t.document)}return r}function P(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var j=en&&"documentMode"in document&&11>=document.documentMode,Q=null,$=null,ae=null,ge=!1;function De(t,r,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;ge||Q==null||Q!==Ur(d)||(d=Q,"selectionStart"in d&&P(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ae&&y(ae,d)||(ae=d,d=xh($,"onSelect"),0<d.length&&(r=new _n("onSelect","select",null,r,c),t.push({event:r,listeners:d}),r.target=Q)))}function Ne(t,r){var c={};return c[t.toLowerCase()]=r.toLowerCase(),c["Webkit"+t]="webkit"+r,c["Moz"+t]="moz"+r,c}var Ie={animationend:Ne("Animation","AnimationEnd"),animationiteration:Ne("Animation","AnimationIteration"),animationstart:Ne("Animation","AnimationStart"),transitionrun:Ne("Transition","TransitionRun"),transitionstart:Ne("Transition","TransitionStart"),transitioncancel:Ne("Transition","TransitionCancel"),transitionend:Ne("Transition","TransitionEnd")},At={},ht={};en&&(ht=document.createElement("div").style,"AnimationEvent"in window||(delete Ie.animationend.animation,delete Ie.animationiteration.animation,delete Ie.animationstart.animation),"TransitionEvent"in window||delete Ie.transitionend.transition);function Un(t){if(At[t])return At[t];if(!Ie[t])return t;var r=Ie[t],c;for(c in r)if(r.hasOwnProperty(c)&&c in ht)return At[t]=r[c];return t}var lr=Un("animationend"),Si=Un("animationiteration"),tn=Un("animationstart"),oi=Un("transitionrun"),$i=Un("transitionstart"),Na=Un("transitioncancel"),Ws=Un("transitionend"),Du=new Map,hc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hc.push("scrollEnd");function cs(t,r){Du.set(t,r),Gt(r,[t])}var Mu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Xr=[],dl=0,Kf=0;function Lu(){for(var t=dl,r=Kf=dl=0;r<t;){var c=Xr[r];Xr[r++]=null;var d=Xr[r];Xr[r++]=null;var E=Xr[r];Xr[r++]=null;var w=Xr[r];if(Xr[r++]=null,d!==null&&E!==null){var R=d.pending;R===null?E.next=E:(E.next=R.next,R.next=E),d.pending=E}w!==0&&Lg(c,E,w)}}function Pu(t,r,c,d){Xr[dl++]=t,Xr[dl++]=r,Xr[dl++]=c,Xr[dl++]=d,Kf|=d,t.lanes|=d,t=t.alternate,t!==null&&(t.lanes|=d)}function Qf(t,r,c,d){return Pu(t,r,c,d),Bu(t)}function Lo(t,r){return Pu(t,null,null,r),Bu(t)}function Lg(t,r,c){t.lanes|=c;var d=t.alternate;d!==null&&(d.lanes|=c);for(var E=!1,w=t.return;w!==null;)w.childLanes|=c,d=w.alternate,d!==null&&(d.childLanes|=c),w.tag===22&&(t=w.stateNode,t===null||t._visibility&1||(E=!0)),t=w,w=w.return;return t.tag===3?(w=t.stateNode,E&&r!==null&&(E=31-ot(c),t=w.hiddenUpdates,d=t[E],d===null?t[E]=[r]:d.push(r),r.lane=c|536870912),w):null}function Bu(t){if(50<Mc)throw Mc=0,s1=null,Error(o(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var gl={};function wA(t,r,c,d){this.tag=t,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function br(t,r,c,d){return new wA(t,r,c,d)}function Zf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ks(t,r){var c=t.alternate;return c===null?(c=br(t.tag,r,t.key,t.mode),c.elementType=t.elementType,c.type=t.type,c.stateNode=t.stateNode,c.alternate=t,t.alternate=c):(c.pendingProps=r,c.type=t.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=t.flags&65011712,c.childLanes=t.childLanes,c.lanes=t.lanes,c.child=t.child,c.memoizedProps=t.memoizedProps,c.memoizedState=t.memoizedState,c.updateQueue=t.updateQueue,r=t.dependencies,c.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},c.sibling=t.sibling,c.index=t.index,c.ref=t.ref,c.refCleanup=t.refCleanup,c}function Pg(t,r){t.flags&=65011714;var c=t.alternate;return c===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=c.childLanes,t.lanes=c.lanes,t.child=c.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=c.memoizedProps,t.memoizedState=c.memoizedState,t.updateQueue=c.updateQueue,t.type=c.type,r=c.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function ku(t,r,c,d,E,w){var R=0;if(d=t,typeof t=="function")Zf(t)&&(R=1);else if(typeof t=="string")R=bw(t,c,Pe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case L:return t=br(31,c,r,E),t.elementType=L,t.lanes=w,t;case ie:return Po(c.children,E,w,r);case he:R=8,E|=24;break;case Le:return t=br(12,c,r,E|2),t.elementType=Le,t.lanes=w,t;case $e:return t=br(13,c,r,E),t.elementType=$e,t.lanes=w,t;case xe:return t=br(19,c,r,E),t.elementType=xe,t.lanes=w,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case me:R=10;break e;case be:R=9;break e;case Be:R=11;break e;case k:R=14;break e;case F:R=16,d=null;break e}R=29,c=Error(o(130,t===null?"null":typeof t,"")),d=null}return r=br(R,c,r,E),r.elementType=t,r.type=d,r.lanes=w,r}function Po(t,r,c,d){return t=br(7,t,d,r),t.lanes=c,t}function Jf(t,r,c){return t=br(6,t,null,r),t.lanes=c,t}function Bg(t){var r=br(18,null,null,0);return r.stateNode=t,r}function $f(t,r,c){return r=br(4,t.children!==null?t.children:[],t.key,r),r.lanes=c,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var kg=new WeakMap;function Yr(t,r){if(typeof t=="object"&&t!==null){var c=kg.get(t);return c!==void 0?c:(r={value:t,source:r,stack:Xt(r)},kg.set(t,r),r)}return{value:t,source:r,stack:Xt(r)}}var ml=[],pl=0,Vu=null,fc=0,Wr=[],Kr=0,Oa=null,As=1,ws="";function Qs(t,r){ml[pl++]=fc,ml[pl++]=Vu,Vu=t,fc=r}function Vg(t,r,c){Wr[Kr++]=As,Wr[Kr++]=ws,Wr[Kr++]=Oa,Oa=t;var d=As;t=ws;var E=32-ot(d)-1;d&=~(1<<E),c+=1;var w=32-ot(r)+E;if(30<w){var R=E-E%5;w=(d&(1<<R)-1).toString(32),d>>=R,E-=R,As=1<<32-ot(r)+E|c<<E|d,ws=w+t}else As=1<<w|c<<E|d,ws=t}function ed(t){t.return!==null&&(Qs(t,1),Vg(t,1,0))}function td(t){for(;t===Vu;)Vu=ml[--pl],ml[pl]=null,fc=ml[--pl],ml[pl]=null;for(;t===Oa;)Oa=Wr[--Kr],Wr[Kr]=null,ws=Wr[--Kr],Wr[Kr]=null,As=Wr[--Kr],Wr[Kr]=null}function Ug(t,r){Wr[Kr++]=As,Wr[Kr++]=ws,Wr[Kr++]=Oa,As=r.id,ws=r.overflow,Oa=t}var bi=null,xn=null,Ft=!1,Da=null,Qr=!1,nd=Error(o(519));function Ma(t){var r=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw dc(Yr(r,t)),nd}function Fg(t){var r=t.stateNode,c=t.type,d=t.memoizedProps;switch(r[Cn]=t,r[Ht]=d,c){case"dialog":Nt("cancel",r),Nt("close",r);break;case"iframe":case"object":case"embed":Nt("load",r);break;case"video":case"audio":for(c=0;c<Pc.length;c++)Nt(Pc[c],r);break;case"source":Nt("error",r);break;case"img":case"image":case"link":Nt("error",r),Nt("load",r);break;case"details":Nt("toggle",r);break;case"input":Nt("invalid",r),oe(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Nt("invalid",r);break;case"textarea":Nt("invalid",r),Xn(r,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||r.textContent===""+c||d.suppressHydrationWarning===!0||i2(r.textContent,c)?(d.popover!=null&&(Nt("beforetoggle",r),Nt("toggle",r)),d.onScroll!=null&&Nt("scroll",r),d.onScrollEnd!=null&&Nt("scrollend",r),d.onClick!=null&&(r.onclick=Vi),r=!0):r=!1,r||Ma(t,!0)}function zg(t){for(bi=t.return;bi;)switch(bi.tag){case 5:case 31:case 13:Qr=!1;return;case 27:case 3:Qr=!0;return;default:bi=bi.return}}function yl(t){if(t!==bi)return!1;if(!Ft)return zg(t),Ft=!0,!1;var r=t.tag,c;if((c=r!==3&&r!==27)&&((c=r===5)&&(c=t.type,c=!(c!=="form"&&c!=="button")||x1(t.type,t.memoizedProps)),c=!c),c&&xn&&Ma(t),zg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));xn=f2(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));xn=f2(t)}else r===27?(r=xn,Ya(t.type)?(t=v1,v1=null,xn=t):xn=r):xn=bi?Jr(t.stateNode.nextSibling):null;return!0}function Bo(){xn=bi=null,Ft=!1}function id(){var t=Da;return t!==null&&(fr===null?fr=t:fr.push.apply(fr,t),Da=null),t}function dc(t){Da===null?Da=[t]:Da.push(t)}var rd=Z(null),ko=null,Zs=null;function La(t,r,c){Oe(rd,r._currentValue),r._currentValue=c}function Js(t){t._currentValue=rd.current,pe(rd)}function sd(t,r,c){for(;t!==null;){var d=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),t===c)break;t=t.return}}function ad(t,r,c,d){var E=t.child;for(E!==null&&(E.return=t);E!==null;){var w=E.dependencies;if(w!==null){var R=E.child;w=w.firstContext;e:for(;w!==null;){var B=w;w=E;for(var K=0;K<r.length;K++)if(B.context===r[K]){w.lanes|=c,B=w.alternate,B!==null&&(B.lanes|=c),sd(w.return,c,t),d||(R=null);break e}w=B.next}}else if(E.tag===18){if(R=E.return,R===null)throw Error(o(341));R.lanes|=c,w=R.alternate,w!==null&&(w.lanes|=c),sd(R,c,t),R=null}else R=E.child;if(R!==null)R.return=E;else for(R=E;R!==null;){if(R===t){R=null;break}if(E=R.sibling,E!==null){E.return=R.return,R=E;break}R=R.return}E=R}}function El(t,r,c,d){t=null;for(var E=r,w=!1;E!==null;){if(!w){if((E.flags&524288)!==0)w=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var R=E.alternate;if(R===null)throw Error(o(387));if(R=R.memoizedProps,R!==null){var B=E.type;g(E.pendingProps.value,R.value)||(t!==null?t.push(B):t=[B])}}else if(E===rt.current){if(R=E.alternate,R===null)throw Error(o(387));R.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(t!==null?t.push(Fc):t=[Fc])}E=E.return}t!==null&&ad(r,t,c,d),r.flags|=262144}function Uu(t){for(t=t.firstContext;t!==null;){if(!g(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Vo(t){ko=t,Zs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ii(t){return jg(ko,t)}function Fu(t,r){return ko===null&&Vo(t),jg(t,r)}function jg(t,r){var c=r._currentValue;if(r={context:r,memoizedValue:c,next:null},Zs===null){if(t===null)throw Error(o(308));Zs=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Zs=Zs.next=r;return c}var TA=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(c,d){t.push(d)}};this.abort=function(){r.aborted=!0,t.forEach(function(c){return c()})}},CA=a.unstable_scheduleCallback,vA=a.unstable_NormalPriority,Zn={$$typeof:me,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function od(){return{controller:new TA,data:new Map,refCount:0}}function gc(t){t.refCount--,t.refCount===0&&CA(vA,function(){t.controller.abort()})}var mc=null,ld=0,_l=0,xl=null;function SA(t,r){if(mc===null){var c=mc=[];ld=0,_l=h1(),xl={status:"pending",value:void 0,then:function(d){c.push(d)}}}return ld++,r.then(Hg,Hg),r}function Hg(){if(--ld===0&&mc!==null){xl!==null&&(xl.status="fulfilled");var t=mc;mc=null,_l=0,xl=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function bA(t,r){var c=[],d={status:"pending",value:null,reason:null,then:function(E){c.push(E)}};return t.then(function(){d.status="fulfilled",d.value=r;for(var E=0;E<c.length;E++)(0,c[E])(r)},function(E){for(d.status="rejected",d.reason=E,E=0;E<c.length;E++)(0,c[E])(void 0)}),d}var Gg=J.S;J.S=function(t,r){bp=En(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&SA(t,r),Gg!==null&&Gg(t,r)};var Uo=Z(null);function cd(){var t=Uo.current;return t!==null?t:mn.pooledCache}function zu(t,r){r===null?Oe(Uo,Uo.current):Oe(Uo,r.pool)}function qg(){var t=cd();return t===null?null:{parent:Zn._currentValue,pool:t}}var Al=Error(o(460)),ud=Error(o(474)),ju=Error(o(542)),Hu={then:function(){}};function Xg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Yg(t,r,c){switch(c=t[c],c===void 0?t.push(r):c!==r&&(r.then(Vi,Vi),r=c),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Kg(t),t;default:if(typeof r.status=="string")r.then(Vi,Vi);else{if(t=mn,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=r,t.status="pending",t.then(function(d){if(r.status==="pending"){var E=r;E.status="fulfilled",E.value=d}},function(d){if(r.status==="pending"){var E=r;E.status="rejected",E.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Kg(t),t}throw zo=r,Al}}function Fo(t){try{var r=t._init;return r(t._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(zo=c,Al):c}}var zo=null;function Wg(){if(zo===null)throw Error(o(459));var t=zo;return zo=null,t}function Kg(t){if(t===Al||t===ju)throw Error(o(483))}var wl=null,pc=0;function Gu(t){var r=pc;return pc+=1,wl===null&&(wl=[]),Yg(wl,t,r)}function yc(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function qu(t,r){throw r.$$typeof===V?Error(o(525)):(t=Object.prototype.toString.call(r),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Qg(t){function r(ne,te){if(t){var ce=ne.deletions;ce===null?(ne.deletions=[te],ne.flags|=16):ce.push(te)}}function c(ne,te){if(!t)return null;for(;te!==null;)r(ne,te),te=te.sibling;return null}function d(ne){for(var te=new Map;ne!==null;)ne.key!==null?te.set(ne.key,ne):te.set(ne.index,ne),ne=ne.sibling;return te}function E(ne,te){return ne=Ks(ne,te),ne.index=0,ne.sibling=null,ne}function w(ne,te,ce){return ne.index=ce,t?(ce=ne.alternate,ce!==null?(ce=ce.index,ce<te?(ne.flags|=67108866,te):ce):(ne.flags|=67108866,te)):(ne.flags|=1048576,te)}function R(ne){return t&&ne.alternate===null&&(ne.flags|=67108866),ne}function B(ne,te,ce,we){return te===null||te.tag!==6?(te=Jf(ce,ne.mode,we),te.return=ne,te):(te=E(te,ce),te.return=ne,te)}function K(ne,te,ce,we){var Ze=ce.type;return Ze===ie?_e(ne,te,ce.props.children,we,ce.key):te!==null&&(te.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===F&&Fo(Ze)===te.type)?(te=E(te,ce.props),yc(te,ce),te.return=ne,te):(te=ku(ce.type,ce.key,ce.props,null,ne.mode,we),yc(te,ce),te.return=ne,te)}function ue(ne,te,ce,we){return te===null||te.tag!==4||te.stateNode.containerInfo!==ce.containerInfo||te.stateNode.implementation!==ce.implementation?(te=$f(ce,ne.mode,we),te.return=ne,te):(te=E(te,ce.children||[]),te.return=ne,te)}function _e(ne,te,ce,we,Ze){return te===null||te.tag!==7?(te=Po(ce,ne.mode,we,Ze),te.return=ne,te):(te=E(te,ce),te.return=ne,te)}function Ce(ne,te,ce){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return te=Jf(""+te,ne.mode,ce),te.return=ne,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case G:return ce=ku(te.type,te.key,te.props,null,ne.mode,ce),yc(ce,te),ce.return=ne,ce;case ee:return te=$f(te,ne.mode,ce),te.return=ne,te;case F:return te=Fo(te),Ce(ne,te,ce)}if(le(te)||Y(te))return te=Po(te,ne.mode,ce,null),te.return=ne,te;if(typeof te.then=="function")return Ce(ne,Gu(te),ce);if(te.$$typeof===me)return Ce(ne,Fu(ne,te),ce);qu(ne,te)}return null}function fe(ne,te,ce,we){var Ze=te!==null?te.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return Ze!==null?null:B(ne,te,""+ce,we);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case G:return ce.key===Ze?K(ne,te,ce,we):null;case ee:return ce.key===Ze?ue(ne,te,ce,we):null;case F:return ce=Fo(ce),fe(ne,te,ce,we)}if(le(ce)||Y(ce))return Ze!==null?null:_e(ne,te,ce,we,null);if(typeof ce.then=="function")return fe(ne,te,Gu(ce),we);if(ce.$$typeof===me)return fe(ne,te,Fu(ne,ce),we);qu(ne,ce)}return null}function Ee(ne,te,ce,we,Ze){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return ne=ne.get(ce)||null,B(te,ne,""+we,Ze);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case G:return ne=ne.get(we.key===null?ce:we.key)||null,K(te,ne,we,Ze);case ee:return ne=ne.get(we.key===null?ce:we.key)||null,ue(te,ne,we,Ze);case F:return we=Fo(we),Ee(ne,te,ce,we,Ze)}if(le(we)||Y(we))return ne=ne.get(ce)||null,_e(te,ne,we,Ze,null);if(typeof we.then=="function")return Ee(ne,te,ce,Gu(we),Ze);if(we.$$typeof===me)return Ee(ne,te,ce,Fu(te,we),Ze);qu(te,we)}return null}function Ge(ne,te,ce,we){for(var Ze=null,Qt=null,Xe=te,_t=te=0,Pt=null;Xe!==null&&_t<ce.length;_t++){Xe.index>_t?(Pt=Xe,Xe=null):Pt=Xe.sibling;var Zt=fe(ne,Xe,ce[_t],we);if(Zt===null){Xe===null&&(Xe=Pt);break}t&&Xe&&Zt.alternate===null&&r(ne,Xe),te=w(Zt,te,_t),Qt===null?Ze=Zt:Qt.sibling=Zt,Qt=Zt,Xe=Pt}if(_t===ce.length)return c(ne,Xe),Ft&&Qs(ne,_t),Ze;if(Xe===null){for(;_t<ce.length;_t++)Xe=Ce(ne,ce[_t],we),Xe!==null&&(te=w(Xe,te,_t),Qt===null?Ze=Xe:Qt.sibling=Xe,Qt=Xe);return Ft&&Qs(ne,_t),Ze}for(Xe=d(Xe);_t<ce.length;_t++)Pt=Ee(Xe,ne,_t,ce[_t],we),Pt!==null&&(t&&Pt.alternate!==null&&Xe.delete(Pt.key===null?_t:Pt.key),te=w(Pt,te,_t),Qt===null?Ze=Pt:Qt.sibling=Pt,Qt=Pt);return t&&Xe.forEach(function(Ja){return r(ne,Ja)}),Ft&&Qs(ne,_t),Ze}function at(ne,te,ce,we){if(ce==null)throw Error(o(151));for(var Ze=null,Qt=null,Xe=te,_t=te=0,Pt=null,Zt=ce.next();Xe!==null&&!Zt.done;_t++,Zt=ce.next()){Xe.index>_t?(Pt=Xe,Xe=null):Pt=Xe.sibling;var Ja=fe(ne,Xe,Zt.value,we);if(Ja===null){Xe===null&&(Xe=Pt);break}t&&Xe&&Ja.alternate===null&&r(ne,Xe),te=w(Ja,te,_t),Qt===null?Ze=Ja:Qt.sibling=Ja,Qt=Ja,Xe=Pt}if(Zt.done)return c(ne,Xe),Ft&&Qs(ne,_t),Ze;if(Xe===null){for(;!Zt.done;_t++,Zt=ce.next())Zt=Ce(ne,Zt.value,we),Zt!==null&&(te=w(Zt,te,_t),Qt===null?Ze=Zt:Qt.sibling=Zt,Qt=Zt);return Ft&&Qs(ne,_t),Ze}for(Xe=d(Xe);!Zt.done;_t++,Zt=ce.next())Zt=Ee(Xe,ne,_t,Zt.value,we),Zt!==null&&(t&&Zt.alternate!==null&&Xe.delete(Zt.key===null?_t:Zt.key),te=w(Zt,te,_t),Qt===null?Ze=Zt:Qt.sibling=Zt,Qt=Zt);return t&&Xe.forEach(function(Vw){return r(ne,Vw)}),Ft&&Qs(ne,_t),Ze}function hn(ne,te,ce,we){if(typeof ce=="object"&&ce!==null&&ce.type===ie&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case G:e:{for(var Ze=ce.key;te!==null;){if(te.key===Ze){if(Ze=ce.type,Ze===ie){if(te.tag===7){c(ne,te.sibling),we=E(te,ce.props.children),we.return=ne,ne=we;break e}}else if(te.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===F&&Fo(Ze)===te.type){c(ne,te.sibling),we=E(te,ce.props),yc(we,ce),we.return=ne,ne=we;break e}c(ne,te);break}else r(ne,te);te=te.sibling}ce.type===ie?(we=Po(ce.props.children,ne.mode,we,ce.key),we.return=ne,ne=we):(we=ku(ce.type,ce.key,ce.props,null,ne.mode,we),yc(we,ce),we.return=ne,ne=we)}return R(ne);case ee:e:{for(Ze=ce.key;te!==null;){if(te.key===Ze)if(te.tag===4&&te.stateNode.containerInfo===ce.containerInfo&&te.stateNode.implementation===ce.implementation){c(ne,te.sibling),we=E(te,ce.children||[]),we.return=ne,ne=we;break e}else{c(ne,te);break}else r(ne,te);te=te.sibling}we=$f(ce,ne.mode,we),we.return=ne,ne=we}return R(ne);case F:return ce=Fo(ce),hn(ne,te,ce,we)}if(le(ce))return Ge(ne,te,ce,we);if(Y(ce)){if(Ze=Y(ce),typeof Ze!="function")throw Error(o(150));return ce=Ze.call(ce),at(ne,te,ce,we)}if(typeof ce.then=="function")return hn(ne,te,Gu(ce),we);if(ce.$$typeof===me)return hn(ne,te,Fu(ne,ce),we);qu(ne,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,te!==null&&te.tag===6?(c(ne,te.sibling),we=E(te,ce),we.return=ne,ne=we):(c(ne,te),we=Jf(ce,ne.mode,we),we.return=ne,ne=we),R(ne)):c(ne,te)}return function(ne,te,ce,we){try{pc=0;var Ze=hn(ne,te,ce,we);return wl=null,Ze}catch(Xe){if(Xe===Al||Xe===ju)throw Xe;var Qt=br(29,Xe,null,ne.mode);return Qt.lanes=we,Qt.return=ne,Qt}finally{}}}var jo=Qg(!0),Zg=Qg(!1),Pa=!1;function hd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fd(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ba(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ka(t,r,c){var d=t.updateQueue;if(d===null)return null;if(d=d.shared,(Jt&2)!==0){var E=d.pending;return E===null?r.next=r:(r.next=E.next,E.next=r),d.pending=r,r=Bu(t),Lg(t,null,c),r}return Pu(t,d,r,c),Bu(t)}function Ec(t,r,c){if(r=r.updateQueue,r!==null&&(r=r.shared,(c&4194048)!==0)){var d=r.lanes;d&=t.pendingLanes,c|=d,r.lanes=c,xr(t,c)}}function dd(t,r){var c=t.updateQueue,d=t.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var E=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var R={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};w===null?E=w=R:w=w.next=R,c=c.next}while(c!==null);w===null?E=w=r:w=w.next=r}else E=w=r;c={baseState:d.baseState,firstBaseUpdate:E,lastBaseUpdate:w,shared:d.shared,callbacks:d.callbacks},t.updateQueue=c;return}t=c.lastBaseUpdate,t===null?c.firstBaseUpdate=r:t.next=r,c.lastBaseUpdate=r}var gd=!1;function _c(){if(gd){var t=xl;if(t!==null)throw t}}function xc(t,r,c,d){gd=!1;var E=t.updateQueue;Pa=!1;var w=E.firstBaseUpdate,R=E.lastBaseUpdate,B=E.shared.pending;if(B!==null){E.shared.pending=null;var K=B,ue=K.next;K.next=null,R===null?w=ue:R.next=ue,R=K;var _e=t.alternate;_e!==null&&(_e=_e.updateQueue,B=_e.lastBaseUpdate,B!==R&&(B===null?_e.firstBaseUpdate=ue:B.next=ue,_e.lastBaseUpdate=K))}if(w!==null){var Ce=E.baseState;R=0,_e=ue=K=null,B=w;do{var fe=B.lane&-536870913,Ee=fe!==B.lane;if(Ee?(Lt&fe)===fe:(d&fe)===fe){fe!==0&&fe===_l&&(gd=!0),_e!==null&&(_e=_e.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});e:{var Ge=t,at=B;fe=r;var hn=c;switch(at.tag){case 1:if(Ge=at.payload,typeof Ge=="function"){Ce=Ge.call(hn,Ce,fe);break e}Ce=Ge;break e;case 3:Ge.flags=Ge.flags&-65537|128;case 0:if(Ge=at.payload,fe=typeof Ge=="function"?Ge.call(hn,Ce,fe):Ge,fe==null)break e;Ce=O({},Ce,fe);break e;case 2:Pa=!0}}fe=B.callback,fe!==null&&(t.flags|=64,Ee&&(t.flags|=8192),Ee=E.callbacks,Ee===null?E.callbacks=[fe]:Ee.push(fe))}else Ee={lane:fe,tag:B.tag,payload:B.payload,callback:B.callback,next:null},_e===null?(ue=_e=Ee,K=Ce):_e=_e.next=Ee,R|=fe;if(B=B.next,B===null){if(B=E.shared.pending,B===null)break;Ee=B,B=Ee.next,Ee.next=null,E.lastBaseUpdate=Ee,E.shared.pending=null}}while(!0);_e===null&&(K=Ce),E.baseState=K,E.firstBaseUpdate=ue,E.lastBaseUpdate=_e,w===null&&(E.shared.lanes=0),ja|=R,t.lanes=R,t.memoizedState=Ce}}function Jg(t,r){if(typeof t!="function")throw Error(o(191,t));t.call(r)}function $g(t,r){var c=t.callbacks;if(c!==null)for(t.callbacks=null,t=0;t<c.length;t++)Jg(c[t],r)}var Tl=Z(null),Xu=Z(0);function em(t,r){t=oa,Oe(Xu,t),Oe(Tl,r),oa=t|r.baseLanes}function md(){Oe(Xu,oa),Oe(Tl,Tl.current)}function pd(){oa=Xu.current,pe(Tl),pe(Xu)}var Ir=Z(null),Zr=null;function Va(t){var r=t.alternate;Oe(Yn,Yn.current&1),Oe(Ir,t),Zr===null&&(r===null||Tl.current!==null||r.memoizedState!==null)&&(Zr=t)}function yd(t){Oe(Yn,Yn.current),Oe(Ir,t),Zr===null&&(Zr=t)}function tm(t){t.tag===22?(Oe(Yn,Yn.current),Oe(Ir,t),Zr===null&&(Zr=t)):Ua()}function Ua(){Oe(Yn,Yn.current),Oe(Ir,Ir.current)}function Rr(t){pe(Ir),Zr===t&&(Zr=null),pe(Yn)}var Yn=Z(0);function Yu(t){for(var r=t;r!==null;){if(r.tag===13){var c=r.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||T1(c)||C1(c)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var $s=0,pt=null,cn=null,Jn=null,Wu=!1,Cl=!1,Ho=!1,Ku=0,Ac=0,vl=null,IA=0;function Fn(){throw Error(o(321))}function Ed(t,r){if(r===null)return!1;for(var c=0;c<r.length&&c<t.length;c++)if(!g(t[c],r[c]))return!1;return!0}function _d(t,r,c,d,E,w){return $s=w,pt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,J.H=t===null||t.memoizedState===null?Vm:Ld,Ho=!1,w=c(d,E),Ho=!1,Cl&&(w=im(r,c,d,E)),nm(t),w}function nm(t){J.H=Cc;var r=cn!==null&&cn.next!==null;if($s=0,Jn=cn=pt=null,Wu=!1,Ac=0,vl=null,r)throw Error(o(300));t===null||$n||(t=t.dependencies,t!==null&&Uu(t)&&($n=!0))}function im(t,r,c,d){pt=t;var E=0;do{if(Cl&&(vl=null),Ac=0,Cl=!1,25<=E)throw Error(o(301));if(E+=1,Jn=cn=null,t.updateQueue!=null){var w=t.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}J.H=Um,w=r(c,d)}while(Cl);return w}function RA(){var t=J.H,r=t.useState()[0];return r=typeof r.then=="function"?wc(r):r,t=t.useState()[0],(cn!==null?cn.memoizedState:null)!==t&&(pt.flags|=1024),r}function xd(){var t=Ku!==0;return Ku=0,t}function Ad(t,r,c){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~c}function wd(t){if(Wu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Wu=!1}$s=0,Jn=cn=pt=null,Cl=!1,Ac=Ku=0,vl=null}function er(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jn===null?pt.memoizedState=Jn=t:Jn=Jn.next=t,Jn}function Wn(){if(cn===null){var t=pt.alternate;t=t!==null?t.memoizedState:null}else t=cn.next;var r=Jn===null?pt.memoizedState:Jn.next;if(r!==null)Jn=r,cn=t;else{if(t===null)throw pt.alternate===null?Error(o(467)):Error(o(310));cn=t,t={memoizedState:cn.memoizedState,baseState:cn.baseState,baseQueue:cn.baseQueue,queue:cn.queue,next:null},Jn===null?pt.memoizedState=Jn=t:Jn=Jn.next=t}return Jn}function Qu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wc(t){var r=Ac;return Ac+=1,vl===null&&(vl=[]),t=Yg(vl,t,r),r=pt,(Jn===null?r.memoizedState:Jn.next)===null&&(r=r.alternate,J.H=r===null||r.memoizedState===null?Vm:Ld),t}function Zu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return wc(t);if(t.$$typeof===me)return Ii(t)}throw Error(o(438,String(t)))}function Td(t){var r=null,c=pt.updateQueue;if(c!==null&&(r=c.memoCache),r==null){var d=pt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(E){return E.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),c===null&&(c=Qu(),pt.updateQueue=c),c.memoCache=r,c=r.data[r.index],c===void 0)for(c=r.data[r.index]=Array(t),d=0;d<t;d++)c[d]=W;return r.index++,c}function ea(t,r){return typeof r=="function"?r(t):r}function Ju(t){var r=Wn();return Cd(r,cn,t)}function Cd(t,r,c){var d=t.queue;if(d===null)throw Error(o(311));d.lastRenderedReducer=c;var E=t.baseQueue,w=d.pending;if(w!==null){if(E!==null){var R=E.next;E.next=w.next,w.next=R}r.baseQueue=E=w,d.pending=null}if(w=t.baseState,E===null)t.memoizedState=w;else{r=E.next;var B=R=null,K=null,ue=r,_e=!1;do{var Ce=ue.lane&-536870913;if(Ce!==ue.lane?(Lt&Ce)===Ce:($s&Ce)===Ce){var fe=ue.revertLane;if(fe===0)K!==null&&(K=K.next={lane:0,revertLane:0,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),Ce===_l&&(_e=!0);else if(($s&fe)===fe){ue=ue.next,fe===_l&&(_e=!0);continue}else Ce={lane:0,revertLane:ue.revertLane,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},K===null?(B=K=Ce,R=w):K=K.next=Ce,pt.lanes|=fe,ja|=fe;Ce=ue.action,Ho&&c(w,Ce),w=ue.hasEagerState?ue.eagerState:c(w,Ce)}else fe={lane:Ce,revertLane:ue.revertLane,gesture:ue.gesture,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},K===null?(B=K=fe,R=w):K=K.next=fe,pt.lanes|=Ce,ja|=Ce;ue=ue.next}while(ue!==null&&ue!==r);if(K===null?R=w:K.next=B,!g(w,t.memoizedState)&&($n=!0,_e&&(c=xl,c!==null)))throw c;t.memoizedState=w,t.baseState=R,t.baseQueue=K,d.lastRenderedState=w}return E===null&&(d.lanes=0),[t.memoizedState,d.dispatch]}function vd(t){var r=Wn(),c=r.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=t;var d=c.dispatch,E=c.pending,w=r.memoizedState;if(E!==null){c.pending=null;var R=E=E.next;do w=t(w,R.action),R=R.next;while(R!==E);g(w,r.memoizedState)||($n=!0),r.memoizedState=w,r.baseQueue===null&&(r.baseState=w),c.lastRenderedState=w}return[w,d]}function rm(t,r,c){var d=pt,E=Wn(),w=Ft;if(w){if(c===void 0)throw Error(o(407));c=c()}else c=r();var R=!g((cn||E).memoizedState,c);if(R&&(E.memoizedState=c,$n=!0),E=E.queue,Id(om.bind(null,d,E,t),[t]),E.getSnapshot!==r||R||Jn!==null&&Jn.memoizedState.tag&1){if(d.flags|=2048,Sl(9,{destroy:void 0},am.bind(null,d,E,c,r),null),mn===null)throw Error(o(349));w||($s&127)!==0||sm(d,r,c)}return c}function sm(t,r,c){t.flags|=16384,t={getSnapshot:r,value:c},r=pt.updateQueue,r===null?(r=Qu(),pt.updateQueue=r,r.stores=[t]):(c=r.stores,c===null?r.stores=[t]:c.push(t))}function am(t,r,c,d){r.value=c,r.getSnapshot=d,lm(r)&&cm(t)}function om(t,r,c){return c(function(){lm(r)&&cm(t)})}function lm(t){var r=t.getSnapshot;t=t.value;try{var c=r();return!g(t,c)}catch{return!0}}function cm(t){var r=Lo(t,2);r!==null&&dr(r,t,2)}function Sd(t){var r=er();if(typeof t=="function"){var c=t;if(t=c(),Ho){Wt(!0);try{c()}finally{Wt(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:t},r}function um(t,r,c,d){return t.baseState=c,Cd(t,cn,typeof d=="function"?d:ea)}function NA(t,r,c,d,E){if(th(t))throw Error(o(485));if(t=r.action,t!==null){var w={payload:E,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){w.listeners.push(R)}};J.T!==null?c(!0):w.isTransition=!1,d(w),c=r.pending,c===null?(w.next=r.pending=w,hm(r,w)):(w.next=c.next,r.pending=c.next=w)}}function hm(t,r){var c=r.action,d=r.payload,E=t.state;if(r.isTransition){var w=J.T,R={};J.T=R;try{var B=c(E,d),K=J.S;K!==null&&K(R,B),fm(t,r,B)}catch(ue){bd(t,r,ue)}finally{w!==null&&R.types!==null&&(w.types=R.types),J.T=w}}else try{w=c(E,d),fm(t,r,w)}catch(ue){bd(t,r,ue)}}function fm(t,r,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){dm(t,r,d)},function(d){return bd(t,r,d)}):dm(t,r,c)}function dm(t,r,c){r.status="fulfilled",r.value=c,gm(r),t.state=c,r=t.pending,r!==null&&(c=r.next,c===r?t.pending=null:(c=c.next,r.next=c,hm(t,c)))}function bd(t,r,c){var d=t.pending;if(t.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=c,gm(r),r=r.next;while(r!==d)}t.action=null}function gm(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function mm(t,r){return r}function pm(t,r){if(Ft){var c=mn.formState;if(c!==null){e:{var d=pt;if(Ft){if(xn){t:{for(var E=xn,w=Qr;E.nodeType!==8;){if(!w){E=null;break t}if(E=Jr(E.nextSibling),E===null){E=null;break t}}w=E.data,E=w==="F!"||w==="F"?E:null}if(E){xn=Jr(E.nextSibling),d=E.data==="F!";break e}}Ma(d)}d=!1}d&&(r=c[0])}}return c=er(),c.memoizedState=c.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mm,lastRenderedState:r},c.queue=d,c=Pm.bind(null,pt,d),d.dispatch=c,d=Sd(!1),w=Md.bind(null,pt,!1,d.queue),d=er(),E={state:r,dispatch:null,action:t,pending:null},d.queue=E,c=NA.bind(null,pt,E,w,c),E.dispatch=c,d.memoizedState=t,[r,c,!1]}function ym(t){var r=Wn();return Em(r,cn,t)}function Em(t,r,c){if(r=Cd(t,r,mm)[0],t=Ju(ea)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=wc(r)}catch(R){throw R===Al?ju:R}else d=r;r=Wn();var E=r.queue,w=E.dispatch;return c!==r.memoizedState&&(pt.flags|=2048,Sl(9,{destroy:void 0},OA.bind(null,E,c),null)),[d,w,t]}function OA(t,r){t.action=r}function _m(t){var r=Wn(),c=cn;if(c!==null)return Em(r,c,t);Wn(),r=r.memoizedState,c=Wn();var d=c.queue.dispatch;return c.memoizedState=t,[r,d,!1]}function Sl(t,r,c,d){return t={tag:t,create:c,deps:d,inst:r,next:null},r=pt.updateQueue,r===null&&(r=Qu(),pt.updateQueue=r),c=r.lastEffect,c===null?r.lastEffect=t.next=t:(d=c.next,c.next=t,t.next=d,r.lastEffect=t),t}function xm(){return Wn().memoizedState}function $u(t,r,c,d){var E=er();pt.flags|=t,E.memoizedState=Sl(1|r,{destroy:void 0},c,d===void 0?null:d)}function eh(t,r,c,d){var E=Wn();d=d===void 0?null:d;var w=E.memoizedState.inst;cn!==null&&d!==null&&Ed(d,cn.memoizedState.deps)?E.memoizedState=Sl(r,w,c,d):(pt.flags|=t,E.memoizedState=Sl(1|r,w,c,d))}function Am(t,r){$u(8390656,8,t,r)}function Id(t,r){eh(2048,8,t,r)}function DA(t){pt.flags|=4;var r=pt.updateQueue;if(r===null)r=Qu(),pt.updateQueue=r,r.events=[t];else{var c=r.events;c===null?r.events=[t]:c.push(t)}}function wm(t){var r=Wn().memoizedState;return DA({ref:r,nextImpl:t}),function(){if((Jt&2)!==0)throw Error(o(440));return r.impl.apply(void 0,arguments)}}function Tm(t,r){return eh(4,2,t,r)}function Cm(t,r){return eh(4,4,t,r)}function vm(t,r){if(typeof r=="function"){t=t();var c=r(t);return function(){typeof c=="function"?c():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Sm(t,r,c){c=c!=null?c.concat([t]):null,eh(4,4,vm.bind(null,r,t),c)}function Rd(){}function bm(t,r){var c=Wn();r=r===void 0?null:r;var d=c.memoizedState;return r!==null&&Ed(r,d[1])?d[0]:(c.memoizedState=[t,r],t)}function Im(t,r){var c=Wn();r=r===void 0?null:r;var d=c.memoizedState;if(r!==null&&Ed(r,d[1]))return d[0];if(d=t(),Ho){Wt(!0);try{t()}finally{Wt(!1)}}return c.memoizedState=[d,r],d}function Nd(t,r,c){return c===void 0||($s&1073741824)!==0&&(Lt&261930)===0?t.memoizedState=r:(t.memoizedState=c,t=Rp(),pt.lanes|=t,ja|=t,c)}function Rm(t,r,c,d){return g(c,r)?c:Tl.current!==null?(t=Nd(t,c,d),g(t,r)||($n=!0),t):($s&42)===0||($s&1073741824)!==0&&(Lt&261930)===0?($n=!0,t.memoizedState=c):(t=Rp(),pt.lanes|=t,ja|=t,r)}function Nm(t,r,c,d,E){var w=re.p;re.p=w!==0&&8>w?w:8;var R=J.T,B={};J.T=B,Md(t,!1,r,c);try{var K=E(),ue=J.S;if(ue!==null&&ue(B,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var _e=bA(K,d);Tc(t,r,_e,Dr(t))}else Tc(t,r,d,Dr(t))}catch(Ce){Tc(t,r,{then:function(){},status:"rejected",reason:Ce},Dr())}finally{re.p=w,R!==null&&B.types!==null&&(R.types=B.types),J.T=R}}function MA(){}function Od(t,r,c,d){if(t.tag!==5)throw Error(o(476));var E=Om(t).queue;Nm(t,E,r,ke,c===null?MA:function(){return Dm(t),c(d)})}function Om(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ke,baseState:ke,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:ke},next:null};var c={};return r.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:c},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Dm(t){var r=Om(t);r.next===null&&(r=t.alternate.memoizedState),Tc(t,r.next.queue,{},Dr())}function Dd(){return Ii(Fc)}function Mm(){return Wn().memoizedState}function Lm(){return Wn().memoizedState}function LA(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var c=Dr();t=Ba(c);var d=ka(r,t,c);d!==null&&(dr(d,r,c),Ec(d,r,c)),r={cache:od()},t.payload=r;return}r=r.return}}function PA(t,r,c){var d=Dr();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},th(t)?Bm(r,c):(c=Qf(t,r,c,d),c!==null&&(dr(c,t,d),km(c,r,d)))}function Pm(t,r,c){var d=Dr();Tc(t,r,c,d)}function Tc(t,r,c,d){var E={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(th(t))Bm(r,E);else{var w=t.alternate;if(t.lanes===0&&(w===null||w.lanes===0)&&(w=r.lastRenderedReducer,w!==null))try{var R=r.lastRenderedState,B=w(R,c);if(E.hasEagerState=!0,E.eagerState=B,g(B,R))return Pu(t,r,E,0),mn===null&&Lu(),!1}catch{}finally{}if(c=Qf(t,r,E,d),c!==null)return dr(c,t,d),km(c,r,d),!0}return!1}function Md(t,r,c,d){if(d={lane:2,revertLane:h1(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},th(t)){if(r)throw Error(o(479))}else r=Qf(t,c,d,2),r!==null&&dr(r,t,2)}function th(t){var r=t.alternate;return t===pt||r!==null&&r===pt}function Bm(t,r){Cl=Wu=!0;var c=t.pending;c===null?r.next=r:(r.next=c.next,c.next=r),t.pending=r}function km(t,r,c){if((c&4194048)!==0){var d=r.lanes;d&=t.pendingLanes,c|=d,r.lanes=c,xr(t,c)}}var Cc={readContext:Ii,use:Zu,useCallback:Fn,useContext:Fn,useEffect:Fn,useImperativeHandle:Fn,useLayoutEffect:Fn,useInsertionEffect:Fn,useMemo:Fn,useReducer:Fn,useRef:Fn,useState:Fn,useDebugValue:Fn,useDeferredValue:Fn,useTransition:Fn,useSyncExternalStore:Fn,useId:Fn,useHostTransitionStatus:Fn,useFormState:Fn,useActionState:Fn,useOptimistic:Fn,useMemoCache:Fn,useCacheRefresh:Fn};Cc.useEffectEvent=Fn;var Vm={readContext:Ii,use:Zu,useCallback:function(t,r){return er().memoizedState=[t,r===void 0?null:r],t},useContext:Ii,useEffect:Am,useImperativeHandle:function(t,r,c){c=c!=null?c.concat([t]):null,$u(4194308,4,vm.bind(null,r,t),c)},useLayoutEffect:function(t,r){return $u(4194308,4,t,r)},useInsertionEffect:function(t,r){$u(4,2,t,r)},useMemo:function(t,r){var c=er();r=r===void 0?null:r;var d=t();if(Ho){Wt(!0);try{t()}finally{Wt(!1)}}return c.memoizedState=[d,r],d},useReducer:function(t,r,c){var d=er();if(c!==void 0){var E=c(r);if(Ho){Wt(!0);try{c(r)}finally{Wt(!1)}}}else E=r;return d.memoizedState=d.baseState=E,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:E},d.queue=t,t=t.dispatch=PA.bind(null,pt,t),[d.memoizedState,t]},useRef:function(t){var r=er();return t={current:t},r.memoizedState=t},useState:function(t){t=Sd(t);var r=t.queue,c=Pm.bind(null,pt,r);return r.dispatch=c,[t.memoizedState,c]},useDebugValue:Rd,useDeferredValue:function(t,r){var c=er();return Nd(c,t,r)},useTransition:function(){var t=Sd(!1);return t=Nm.bind(null,pt,t.queue,!0,!1),er().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,c){var d=pt,E=er();if(Ft){if(c===void 0)throw Error(o(407));c=c()}else{if(c=r(),mn===null)throw Error(o(349));(Lt&127)!==0||sm(d,r,c)}E.memoizedState=c;var w={value:c,getSnapshot:r};return E.queue=w,Am(om.bind(null,d,w,t),[t]),d.flags|=2048,Sl(9,{destroy:void 0},am.bind(null,d,w,c,r),null),c},useId:function(){var t=er(),r=mn.identifierPrefix;if(Ft){var c=ws,d=As;c=(d&~(1<<32-ot(d)-1)).toString(32)+c,r="_"+r+"R_"+c,c=Ku++,0<c&&(r+="H"+c.toString(32)),r+="_"}else c=IA++,r="_"+r+"r_"+c.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:Dd,useFormState:pm,useActionState:pm,useOptimistic:function(t){var r=er();r.memoizedState=r.baseState=t;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=c,r=Md.bind(null,pt,!0,c),c.dispatch=r,[t,r]},useMemoCache:Td,useCacheRefresh:function(){return er().memoizedState=LA.bind(null,pt)},useEffectEvent:function(t){var r=er(),c={impl:t};return r.memoizedState=c,function(){if((Jt&2)!==0)throw Error(o(440));return c.impl.apply(void 0,arguments)}}},Ld={readContext:Ii,use:Zu,useCallback:bm,useContext:Ii,useEffect:Id,useImperativeHandle:Sm,useInsertionEffect:Tm,useLayoutEffect:Cm,useMemo:Im,useReducer:Ju,useRef:xm,useState:function(){return Ju(ea)},useDebugValue:Rd,useDeferredValue:function(t,r){var c=Wn();return Rm(c,cn.memoizedState,t,r)},useTransition:function(){var t=Ju(ea)[0],r=Wn().memoizedState;return[typeof t=="boolean"?t:wc(t),r]},useSyncExternalStore:rm,useId:Mm,useHostTransitionStatus:Dd,useFormState:ym,useActionState:ym,useOptimistic:function(t,r){var c=Wn();return um(c,cn,t,r)},useMemoCache:Td,useCacheRefresh:Lm};Ld.useEffectEvent=wm;var Um={readContext:Ii,use:Zu,useCallback:bm,useContext:Ii,useEffect:Id,useImperativeHandle:Sm,useInsertionEffect:Tm,useLayoutEffect:Cm,useMemo:Im,useReducer:vd,useRef:xm,useState:function(){return vd(ea)},useDebugValue:Rd,useDeferredValue:function(t,r){var c=Wn();return cn===null?Nd(c,t,r):Rm(c,cn.memoizedState,t,r)},useTransition:function(){var t=vd(ea)[0],r=Wn().memoizedState;return[typeof t=="boolean"?t:wc(t),r]},useSyncExternalStore:rm,useId:Mm,useHostTransitionStatus:Dd,useFormState:_m,useActionState:_m,useOptimistic:function(t,r){var c=Wn();return cn!==null?um(c,cn,t,r):(c.baseState=t,[t,c.queue.dispatch])},useMemoCache:Td,useCacheRefresh:Lm};Um.useEffectEvent=wm;function Pd(t,r,c,d){r=t.memoizedState,c=c(d,r),c=c==null?r:O({},r,c),t.memoizedState=c,t.lanes===0&&(t.updateQueue.baseState=c)}var Bd={enqueueSetState:function(t,r,c){t=t._reactInternals;var d=Dr(),E=Ba(d);E.payload=r,c!=null&&(E.callback=c),r=ka(t,E,d),r!==null&&(dr(r,t,d),Ec(r,t,d))},enqueueReplaceState:function(t,r,c){t=t._reactInternals;var d=Dr(),E=Ba(d);E.tag=1,E.payload=r,c!=null&&(E.callback=c),r=ka(t,E,d),r!==null&&(dr(r,t,d),Ec(r,t,d))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var c=Dr(),d=Ba(c);d.tag=2,r!=null&&(d.callback=r),r=ka(t,d,c),r!==null&&(dr(r,t,c),Ec(r,t,c))}};function Fm(t,r,c,d,E,w,R){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(d,w,R):r.prototype&&r.prototype.isPureReactComponent?!y(c,d)||!y(E,w):!0}function zm(t,r,c,d){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(c,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(c,d),r.state!==t&&Bd.enqueueReplaceState(r,r.state,null)}function Go(t,r){var c=r;if("ref"in r){c={};for(var d in r)d!=="ref"&&(c[d]=r[d])}if(t=t.defaultProps){c===r&&(c=O({},c));for(var E in t)c[E]===void 0&&(c[E]=t[E])}return c}function jm(t){Mu(t)}function Hm(t){console.error(t)}function Gm(t){Mu(t)}function nh(t,r){try{var c=t.onUncaughtError;c(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function qm(t,r,c){try{var d=t.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function kd(t,r,c){return c=Ba(c),c.tag=3,c.payload={element:null},c.callback=function(){nh(t,r)},c}function Xm(t){return t=Ba(t),t.tag=3,t}function Ym(t,r,c,d){var E=c.type.getDerivedStateFromError;if(typeof E=="function"){var w=d.value;t.payload=function(){return E(w)},t.callback=function(){qm(r,c,d)}}var R=c.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(t.callback=function(){qm(r,c,d),typeof E!="function"&&(Ha===null?Ha=new Set([this]):Ha.add(this));var B=d.stack;this.componentDidCatch(d.value,{componentStack:B!==null?B:""})})}function BA(t,r,c,d,E){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=c.alternate,r!==null&&El(r,c,E,!0),c=Ir.current,c!==null){switch(c.tag){case 31:case 13:return Zr===null?gh():c.alternate===null&&zn===0&&(zn=3),c.flags&=-257,c.flags|=65536,c.lanes=E,d===Hu?c.flags|=16384:(r=c.updateQueue,r===null?c.updateQueue=new Set([d]):r.add(d),l1(t,d,E)),!1;case 22:return c.flags|=65536,d===Hu?c.flags|=16384:(r=c.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=r):(c=r.retryQueue,c===null?r.retryQueue=new Set([d]):c.add(d)),l1(t,d,E)),!1}throw Error(o(435,c.tag))}return l1(t,d,E),gh(),!1}if(Ft)return r=Ir.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=E,d!==nd&&(t=Error(o(422),{cause:d}),dc(Yr(t,c)))):(d!==nd&&(r=Error(o(423),{cause:d}),dc(Yr(r,c))),t=t.current.alternate,t.flags|=65536,E&=-E,t.lanes|=E,d=Yr(d,c),E=kd(t.stateNode,d,E),dd(t,E),zn!==4&&(zn=2)),!1;var w=Error(o(520),{cause:d});if(w=Yr(w,c),Dc===null?Dc=[w]:Dc.push(w),zn!==4&&(zn=2),r===null)return!0;d=Yr(d,c),c=r;do{switch(c.tag){case 3:return c.flags|=65536,t=E&-E,c.lanes|=t,t=kd(c.stateNode,d,t),dd(c,t),!1;case 1:if(r=c.type,w=c.stateNode,(c.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ha===null||!Ha.has(w))))return c.flags|=65536,E&=-E,c.lanes|=E,E=Xm(E),Ym(E,t,c,d),dd(c,E),!1}c=c.return}while(c!==null);return!1}var Vd=Error(o(461)),$n=!1;function Ri(t,r,c,d){r.child=t===null?Zg(r,null,c,d):jo(r,t.child,c,d)}function Wm(t,r,c,d,E){c=c.render;var w=r.ref;if("ref"in d){var R={};for(var B in d)B!=="ref"&&(R[B]=d[B])}else R=d;return Vo(r),d=_d(t,r,c,R,w,E),B=xd(),t!==null&&!$n?(Ad(t,r,E),ta(t,r,E)):(Ft&&B&&ed(r),r.flags|=1,Ri(t,r,d,E),r.child)}function Km(t,r,c,d,E){if(t===null){var w=c.type;return typeof w=="function"&&!Zf(w)&&w.defaultProps===void 0&&c.compare===null?(r.tag=15,r.type=w,Qm(t,r,w,d,E)):(t=ku(c.type,null,d,r,r.mode,E),t.ref=r.ref,t.return=r,r.child=t)}if(w=t.child,!Xd(t,E)){var R=w.memoizedProps;if(c=c.compare,c=c!==null?c:y,c(R,d)&&t.ref===r.ref)return ta(t,r,E)}return r.flags|=1,t=Ks(w,d),t.ref=r.ref,t.return=r,r.child=t}function Qm(t,r,c,d,E){if(t!==null){var w=t.memoizedProps;if(y(w,d)&&t.ref===r.ref)if($n=!1,r.pendingProps=d=w,Xd(t,E))(t.flags&131072)!==0&&($n=!0);else return r.lanes=t.lanes,ta(t,r,E)}return Ud(t,r,c,d,E)}function Zm(t,r,c,d){var E=d.children,w=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((r.flags&128)!==0){if(w=w!==null?w.baseLanes|c:c,t!==null){for(d=r.child=t.child,E=0;d!==null;)E=E|d.lanes|d.childLanes,d=d.sibling;d=E&~w}else d=0,r.child=null;return Jm(t,r,w,c,d)}if((c&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&zu(r,w!==null?w.cachePool:null),w!==null?em(r,w):md(),tm(r);else return d=r.lanes=536870912,Jm(t,r,w!==null?w.baseLanes|c:c,c,d)}else w!==null?(zu(r,w.cachePool),em(r,w),Ua(),r.memoizedState=null):(t!==null&&zu(r,null),md(),Ua());return Ri(t,r,E,c),r.child}function vc(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Jm(t,r,c,d,E){var w=cd();return w=w===null?null:{parent:Zn._currentValue,pool:w},r.memoizedState={baseLanes:c,cachePool:w},t!==null&&zu(r,null),md(),tm(r),t!==null&&El(t,r,d,!0),r.childLanes=E,null}function ih(t,r){return r=sh({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function $m(t,r,c){return jo(r,t.child,null,c),t=ih(r,r.pendingProps),t.flags|=2,Rr(r),r.memoizedState=null,t}function kA(t,r,c){var d=r.pendingProps,E=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(Ft){if(d.mode==="hidden")return t=ih(r,d),r.lanes=536870912,vc(null,t);if(yd(r),(t=xn)?(t=h2(t,Qr),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Oa!==null?{id:As,overflow:ws}:null,retryLane:536870912,hydrationErrors:null},c=Bg(t),c.return=r,r.child=c,bi=r,xn=null)):t=null,t===null)throw Ma(r);return r.lanes=536870912,null}return ih(r,d)}var w=t.memoizedState;if(w!==null){var R=w.dehydrated;if(yd(r),E)if(r.flags&256)r.flags&=-257,r=$m(t,r,c);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(o(558));else if($n||El(t,r,c,!1),E=(c&t.childLanes)!==0,$n||E){if(d=mn,d!==null&&(R=ks(d,c),R!==0&&R!==w.retryLane))throw w.retryLane=R,Lo(t,R),dr(d,t,R),Vd;gh(),r=$m(t,r,c)}else t=w.treeContext,xn=Jr(R.nextSibling),bi=r,Ft=!0,Da=null,Qr=!1,t!==null&&Ug(r,t),r=ih(r,d),r.flags|=4096;return r}return t=Ks(t.child,{mode:d.mode,children:d.children}),t.ref=r.ref,r.child=t,t.return=r,t}function rh(t,r){var c=r.ref;if(c===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(o(284));(t===null||t.ref!==c)&&(r.flags|=4194816)}}function Ud(t,r,c,d,E){return Vo(r),c=_d(t,r,c,d,void 0,E),d=xd(),t!==null&&!$n?(Ad(t,r,E),ta(t,r,E)):(Ft&&d&&ed(r),r.flags|=1,Ri(t,r,c,E),r.child)}function ep(t,r,c,d,E,w){return Vo(r),r.updateQueue=null,c=im(r,d,c,E),nm(t),d=xd(),t!==null&&!$n?(Ad(t,r,w),ta(t,r,w)):(Ft&&d&&ed(r),r.flags|=1,Ri(t,r,c,w),r.child)}function tp(t,r,c,d,E){if(Vo(r),r.stateNode===null){var w=gl,R=c.contextType;typeof R=="object"&&R!==null&&(w=Ii(R)),w=new c(d,w),r.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Bd,r.stateNode=w,w._reactInternals=r,w=r.stateNode,w.props=d,w.state=r.memoizedState,w.refs={},hd(r),R=c.contextType,w.context=typeof R=="object"&&R!==null?Ii(R):gl,w.state=r.memoizedState,R=c.getDerivedStateFromProps,typeof R=="function"&&(Pd(r,c,R,d),w.state=r.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(R=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),R!==w.state&&Bd.enqueueReplaceState(w,w.state,null),xc(r,d,w,E),_c(),w.state=r.memoizedState),typeof w.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(t===null){w=r.stateNode;var B=r.memoizedProps,K=Go(c,B);w.props=K;var ue=w.context,_e=c.contextType;R=gl,typeof _e=="object"&&_e!==null&&(R=Ii(_e));var Ce=c.getDerivedStateFromProps;_e=typeof Ce=="function"||typeof w.getSnapshotBeforeUpdate=="function",B=r.pendingProps!==B,_e||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(B||ue!==R)&&zm(r,w,d,R),Pa=!1;var fe=r.memoizedState;w.state=fe,xc(r,d,w,E),_c(),ue=r.memoizedState,B||fe!==ue||Pa?(typeof Ce=="function"&&(Pd(r,c,Ce,d),ue=r.memoizedState),(K=Pa||Fm(r,c,K,d,fe,ue,R))?(_e||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(r.flags|=4194308)):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=ue),w.props=d,w.state=ue,w.context=R,d=K):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{w=r.stateNode,fd(t,r),R=r.memoizedProps,_e=Go(c,R),w.props=_e,Ce=r.pendingProps,fe=w.context,ue=c.contextType,K=gl,typeof ue=="object"&&ue!==null&&(K=Ii(ue)),B=c.getDerivedStateFromProps,(ue=typeof B=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(R!==Ce||fe!==K)&&zm(r,w,d,K),Pa=!1,fe=r.memoizedState,w.state=fe,xc(r,d,w,E),_c();var Ee=r.memoizedState;R!==Ce||fe!==Ee||Pa||t!==null&&t.dependencies!==null&&Uu(t.dependencies)?(typeof B=="function"&&(Pd(r,c,B,d),Ee=r.memoizedState),(_e=Pa||Fm(r,c,_e,d,fe,Ee,K)||t!==null&&t.dependencies!==null&&Uu(t.dependencies))?(ue||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(d,Ee,K),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(d,Ee,K)),typeof w.componentDidUpdate=="function"&&(r.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof w.componentDidUpdate!="function"||R===t.memoizedProps&&fe===t.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||R===t.memoizedProps&&fe===t.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=Ee),w.props=d,w.state=Ee,w.context=K,d=_e):(typeof w.componentDidUpdate!="function"||R===t.memoizedProps&&fe===t.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||R===t.memoizedProps&&fe===t.memoizedState||(r.flags|=1024),d=!1)}return w=d,rh(t,r),d=(r.flags&128)!==0,w||d?(w=r.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:w.render(),r.flags|=1,t!==null&&d?(r.child=jo(r,t.child,null,E),r.child=jo(r,null,c,E)):Ri(t,r,c,E),r.memoizedState=w.state,t=r.child):t=ta(t,r,E),t}function np(t,r,c,d){return Bo(),r.flags|=256,Ri(t,r,c,d),r.child}var Fd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zd(t){return{baseLanes:t,cachePool:qg()}}function jd(t,r,c){return t=t!==null?t.childLanes&~c:0,r&&(t|=Or),t}function ip(t,r,c){var d=r.pendingProps,E=!1,w=(r.flags&128)!==0,R;if((R=w)||(R=t!==null&&t.memoizedState===null?!1:(Yn.current&2)!==0),R&&(E=!0,r.flags&=-129),R=(r.flags&32)!==0,r.flags&=-33,t===null){if(Ft){if(E?Va(r):Ua(),(t=xn)?(t=h2(t,Qr),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Oa!==null?{id:As,overflow:ws}:null,retryLane:536870912,hydrationErrors:null},c=Bg(t),c.return=r,r.child=c,bi=r,xn=null)):t=null,t===null)throw Ma(r);return C1(t)?r.lanes=32:r.lanes=536870912,null}var B=d.children;return d=d.fallback,E?(Ua(),E=r.mode,B=sh({mode:"hidden",children:B},E),d=Po(d,E,c,null),B.return=r,d.return=r,B.sibling=d,r.child=B,d=r.child,d.memoizedState=zd(c),d.childLanes=jd(t,R,c),r.memoizedState=Fd,vc(null,d)):(Va(r),Hd(r,B))}var K=t.memoizedState;if(K!==null&&(B=K.dehydrated,B!==null)){if(w)r.flags&256?(Va(r),r.flags&=-257,r=Gd(t,r,c)):r.memoizedState!==null?(Ua(),r.child=t.child,r.flags|=128,r=null):(Ua(),B=d.fallback,E=r.mode,d=sh({mode:"visible",children:d.children},E),B=Po(B,E,c,null),B.flags|=2,d.return=r,B.return=r,d.sibling=B,r.child=d,jo(r,t.child,null,c),d=r.child,d.memoizedState=zd(c),d.childLanes=jd(t,R,c),r.memoizedState=Fd,r=vc(null,d));else if(Va(r),C1(B)){if(R=B.nextSibling&&B.nextSibling.dataset,R)var ue=R.dgst;R=ue,d=Error(o(419)),d.stack="",d.digest=R,dc({value:d,source:null,stack:null}),r=Gd(t,r,c)}else if($n||El(t,r,c,!1),R=(c&t.childLanes)!==0,$n||R){if(R=mn,R!==null&&(d=ks(R,c),d!==0&&d!==K.retryLane))throw K.retryLane=d,Lo(t,d),dr(R,t,d),Vd;T1(B)||gh(),r=Gd(t,r,c)}else T1(B)?(r.flags|=192,r.child=t.child,r=null):(t=K.treeContext,xn=Jr(B.nextSibling),bi=r,Ft=!0,Da=null,Qr=!1,t!==null&&Ug(r,t),r=Hd(r,d.children),r.flags|=4096);return r}return E?(Ua(),B=d.fallback,E=r.mode,K=t.child,ue=K.sibling,d=Ks(K,{mode:"hidden",children:d.children}),d.subtreeFlags=K.subtreeFlags&65011712,ue!==null?B=Ks(ue,B):(B=Po(B,E,c,null),B.flags|=2),B.return=r,d.return=r,d.sibling=B,r.child=d,vc(null,d),d=r.child,B=t.child.memoizedState,B===null?B=zd(c):(E=B.cachePool,E!==null?(K=Zn._currentValue,E=E.parent!==K?{parent:K,pool:K}:E):E=qg(),B={baseLanes:B.baseLanes|c,cachePool:E}),d.memoizedState=B,d.childLanes=jd(t,R,c),r.memoizedState=Fd,vc(t.child,d)):(Va(r),c=t.child,t=c.sibling,c=Ks(c,{mode:"visible",children:d.children}),c.return=r,c.sibling=null,t!==null&&(R=r.deletions,R===null?(r.deletions=[t],r.flags|=16):R.push(t)),r.child=c,r.memoizedState=null,c)}function Hd(t,r){return r=sh({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function sh(t,r){return t=br(22,t,null,r),t.lanes=0,t}function Gd(t,r,c){return jo(r,t.child,null,c),t=Hd(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function rp(t,r,c){t.lanes|=r;var d=t.alternate;d!==null&&(d.lanes|=r),sd(t.return,r,c)}function qd(t,r,c,d,E,w){var R=t.memoizedState;R===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:E,treeForkCount:w}:(R.isBackwards=r,R.rendering=null,R.renderingStartTime=0,R.last=d,R.tail=c,R.tailMode=E,R.treeForkCount=w)}function sp(t,r,c){var d=r.pendingProps,E=d.revealOrder,w=d.tail;d=d.children;var R=Yn.current,B=(R&2)!==0;if(B?(R=R&1|2,r.flags|=128):R&=1,Oe(Yn,R),Ri(t,r,d,c),d=Ft?fc:0,!B&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&rp(t,c,r);else if(t.tag===19)rp(t,c,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(E){case"forwards":for(c=r.child,E=null;c!==null;)t=c.alternate,t!==null&&Yu(t)===null&&(E=c),c=c.sibling;c=E,c===null?(E=r.child,r.child=null):(E=c.sibling,c.sibling=null),qd(r,!1,E,c,w,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,E=r.child,r.child=null;E!==null;){if(t=E.alternate,t!==null&&Yu(t)===null){r.child=E;break}t=E.sibling,E.sibling=c,c=E,E=t}qd(r,!0,c,null,w,d);break;case"together":qd(r,!1,null,null,void 0,d);break;default:r.memoizedState=null}return r.child}function ta(t,r,c){if(t!==null&&(r.dependencies=t.dependencies),ja|=r.lanes,(c&r.childLanes)===0)if(t!==null){if(El(t,r,c,!1),(c&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(o(153));if(r.child!==null){for(t=r.child,c=Ks(t,t.pendingProps),r.child=c,c.return=r;t.sibling!==null;)t=t.sibling,c=c.sibling=Ks(t,t.pendingProps),c.return=r;c.sibling=null}return r.child}function Xd(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Uu(t)))}function VA(t,r,c){switch(r.tag){case 3:yt(r,r.stateNode.containerInfo),La(r,Zn,t.memoizedState.cache),Bo();break;case 27:case 5:Yi(r);break;case 4:yt(r,r.stateNode.containerInfo);break;case 10:La(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,yd(r),null;break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(Va(r),r.flags|=128,null):(c&r.child.childLanes)!==0?ip(t,r,c):(Va(r),t=ta(t,r,c),t!==null?t.sibling:null);Va(r);break;case 19:var E=(t.flags&128)!==0;if(d=(c&r.childLanes)!==0,d||(El(t,r,c,!1),d=(c&r.childLanes)!==0),E){if(d)return sp(t,r,c);r.flags|=128}if(E=r.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Oe(Yn,Yn.current),d)break;return null;case 22:return r.lanes=0,Zm(t,r,c,r.pendingProps);case 24:La(r,Zn,t.memoizedState.cache)}return ta(t,r,c)}function ap(t,r,c){if(t!==null)if(t.memoizedProps!==r.pendingProps)$n=!0;else{if(!Xd(t,c)&&(r.flags&128)===0)return $n=!1,VA(t,r,c);$n=(t.flags&131072)!==0}else $n=!1,Ft&&(r.flags&1048576)!==0&&Vg(r,fc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var d=r.pendingProps;if(t=Fo(r.elementType),r.type=t,typeof t=="function")Zf(t)?(d=Go(t,d),r.tag=1,r=tp(null,r,t,d,c)):(r.tag=0,r=Ud(null,r,t,d,c));else{if(t!=null){var E=t.$$typeof;if(E===Be){r.tag=11,r=Wm(null,r,t,d,c);break e}else if(E===k){r.tag=14,r=Km(null,r,t,d,c);break e}}throw r=qe(t)||t,Error(o(306,r,""))}}return r;case 0:return Ud(t,r,r.type,r.pendingProps,c);case 1:return d=r.type,E=Go(d,r.pendingProps),tp(t,r,d,E,c);case 3:e:{if(yt(r,r.stateNode.containerInfo),t===null)throw Error(o(387));d=r.pendingProps;var w=r.memoizedState;E=w.element,fd(t,r),xc(r,d,null,c);var R=r.memoizedState;if(d=R.cache,La(r,Zn,d),d!==w.cache&&ad(r,[Zn],c,!0),_c(),d=R.element,w.isDehydrated)if(w={element:d,isDehydrated:!1,cache:R.cache},r.updateQueue.baseState=w,r.memoizedState=w,r.flags&256){r=np(t,r,d,c);break e}else if(d!==E){E=Yr(Error(o(424)),r),dc(E),r=np(t,r,d,c);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(xn=Jr(t.firstChild),bi=r,Ft=!0,Da=null,Qr=!0,c=Zg(r,null,d,c),r.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Bo(),d===E){r=ta(t,r,c);break e}Ri(t,r,d,c)}r=r.child}return r;case 26:return rh(t,r),t===null?(c=y2(r.type,null,r.pendingProps,null))?r.memoizedState=c:Ft||(c=r.type,t=r.pendingProps,d=Ah(Ae.current).createElement(c),d[Cn]=r,d[Ht]=t,Ni(d,c,t),vn(d),r.stateNode=d):r.memoizedState=y2(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Yi(r),t===null&&Ft&&(d=r.stateNode=g2(r.type,r.pendingProps,Ae.current),bi=r,Qr=!0,E=xn,Ya(r.type)?(v1=E,xn=Jr(d.firstChild)):xn=E),Ri(t,r,r.pendingProps.children,c),rh(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Ft&&((E=d=xn)&&(d=gw(d,r.type,r.pendingProps,Qr),d!==null?(r.stateNode=d,bi=r,xn=Jr(d.firstChild),Qr=!1,E=!0):E=!1),E||Ma(r)),Yi(r),E=r.type,w=r.pendingProps,R=t!==null?t.memoizedProps:null,d=w.children,x1(E,w)?d=null:R!==null&&x1(E,R)&&(r.flags|=32),r.memoizedState!==null&&(E=_d(t,r,RA,null,null,c),Fc._currentValue=E),rh(t,r),Ri(t,r,d,c),r.child;case 6:return t===null&&Ft&&((t=c=xn)&&(c=mw(c,r.pendingProps,Qr),c!==null?(r.stateNode=c,bi=r,xn=null,t=!0):t=!1),t||Ma(r)),null;case 13:return ip(t,r,c);case 4:return yt(r,r.stateNode.containerInfo),d=r.pendingProps,t===null?r.child=jo(r,null,d,c):Ri(t,r,d,c),r.child;case 11:return Wm(t,r,r.type,r.pendingProps,c);case 7:return Ri(t,r,r.pendingProps,c),r.child;case 8:return Ri(t,r,r.pendingProps.children,c),r.child;case 12:return Ri(t,r,r.pendingProps.children,c),r.child;case 10:return d=r.pendingProps,La(r,r.type,d.value),Ri(t,r,d.children,c),r.child;case 9:return E=r.type._context,d=r.pendingProps.children,Vo(r),E=Ii(E),d=d(E),r.flags|=1,Ri(t,r,d,c),r.child;case 14:return Km(t,r,r.type,r.pendingProps,c);case 15:return Qm(t,r,r.type,r.pendingProps,c);case 19:return sp(t,r,c);case 31:return kA(t,r,c);case 22:return Zm(t,r,c,r.pendingProps);case 24:return Vo(r),d=Ii(Zn),t===null?(E=cd(),E===null&&(E=mn,w=od(),E.pooledCache=w,w.refCount++,w!==null&&(E.pooledCacheLanes|=c),E=w),r.memoizedState={parent:d,cache:E},hd(r),La(r,Zn,E)):((t.lanes&c)!==0&&(fd(t,r),xc(r,null,null,c),_c()),E=t.memoizedState,w=r.memoizedState,E.parent!==d?(E={parent:d,cache:d},r.memoizedState=E,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=E),La(r,Zn,d)):(d=w.cache,La(r,Zn,d),d!==E.cache&&ad(r,[Zn],c,!0))),Ri(t,r,r.pendingProps.children,c),r.child;case 29:throw r.pendingProps}throw Error(o(156,r.tag))}function na(t){t.flags|=4}function Yd(t,r,c,d,E){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(E&335544128)===E)if(t.stateNode.complete)t.flags|=8192;else if(Mp())t.flags|=8192;else throw zo=Hu,ud}else t.flags&=-16777217}function op(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!w2(r))if(Mp())t.flags|=8192;else throw zo=Hu,ud}function ah(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?qn():536870912,t.lanes|=r,Nl|=r)}function Sc(t,r){if(!Ft)switch(t.tailMode){case"hidden":r=t.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?t.tail=null:c.sibling=null;break;case"collapsed":c=t.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:d.sibling=null}}function An(t){var r=t.alternate!==null&&t.alternate.child===t.child,c=0,d=0;if(r)for(var E=t.child;E!==null;)c|=E.lanes|E.childLanes,d|=E.subtreeFlags&65011712,d|=E.flags&65011712,E.return=t,E=E.sibling;else for(E=t.child;E!==null;)c|=E.lanes|E.childLanes,d|=E.subtreeFlags,d|=E.flags,E.return=t,E=E.sibling;return t.subtreeFlags|=d,t.childLanes=c,r}function UA(t,r,c){var d=r.pendingProps;switch(td(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return An(r),null;case 1:return An(r),null;case 3:return c=r.stateNode,d=null,t!==null&&(d=t.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),Js(Zn),qt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(yl(r)?na(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,id())),An(r),null;case 26:var E=r.type,w=r.memoizedState;return t===null?(na(r),w!==null?(An(r),op(r,w)):(An(r),Yd(r,E,null,d,c))):w?w!==t.memoizedState?(na(r),An(r),op(r,w)):(An(r),r.flags&=-16777217):(t=t.memoizedProps,t!==d&&na(r),An(r),Yd(r,E,t,d,c)),null;case 27:if(On(r),c=Ae.current,E=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==d&&na(r);else{if(!d){if(r.stateNode===null)throw Error(o(166));return An(r),null}t=Pe.current,yl(r)?Fg(r):(t=g2(E,d,c),r.stateNode=t,na(r))}return An(r),null;case 5:if(On(r),E=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==d&&na(r);else{if(!d){if(r.stateNode===null)throw Error(o(166));return An(r),null}if(w=Pe.current,yl(r))Fg(r);else{var R=Ah(Ae.current);switch(w){case 1:w=R.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:w=R.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":w=R.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":w=R.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":w=R.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof d.is=="string"?R.createElement("select",{is:d.is}):R.createElement("select"),d.multiple?w.multiple=!0:d.size&&(w.size=d.size);break;default:w=typeof d.is=="string"?R.createElement(E,{is:d.is}):R.createElement(E)}}w[Cn]=r,w[Ht]=d;e:for(R=r.child;R!==null;){if(R.tag===5||R.tag===6)w.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===r)break e;for(;R.sibling===null;){if(R.return===null||R.return===r)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}r.stateNode=w;e:switch(Ni(w,E,d),E){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&na(r)}}return An(r),Yd(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,c),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==d&&na(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(o(166));if(t=Ae.current,yl(r)){if(t=r.stateNode,c=r.memoizedProps,d=null,E=bi,E!==null)switch(E.tag){case 27:case 5:d=E.memoizedProps}t[Cn]=r,t=!!(t.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||i2(t.nodeValue,c)),t||Ma(r,!0)}else t=Ah(t).createTextNode(d),t[Cn]=r,r.stateNode=t}return An(r),null;case 31:if(c=r.memoizedState,t===null||t.memoizedState!==null){if(d=yl(r),c!==null){if(t===null){if(!d)throw Error(o(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[Cn]=r}else Bo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;An(r),t=!1}else c=id(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),t=!0;if(!t)return r.flags&256?(Rr(r),r):(Rr(r),null);if((r.flags&128)!==0)throw Error(o(558))}return An(r),null;case 13:if(d=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(E=yl(r),d!==null&&d.dehydrated!==null){if(t===null){if(!E)throw Error(o(318));if(E=r.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(o(317));E[Cn]=r}else Bo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;An(r),E=!1}else E=id(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=E),E=!0;if(!E)return r.flags&256?(Rr(r),r):(Rr(r),null)}return Rr(r),(r.flags&128)!==0?(r.lanes=c,r):(c=d!==null,t=t!==null&&t.memoizedState!==null,c&&(d=r.child,E=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(E=d.alternate.memoizedState.cachePool.pool),w=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(w=d.memoizedState.cachePool.pool),w!==E&&(d.flags|=2048)),c!==t&&c&&(r.child.flags|=8192),ah(r,r.updateQueue),An(r),null);case 4:return qt(),t===null&&m1(r.stateNode.containerInfo),An(r),null;case 10:return Js(r.type),An(r),null;case 19:if(pe(Yn),d=r.memoizedState,d===null)return An(r),null;if(E=(r.flags&128)!==0,w=d.rendering,w===null)if(E)Sc(d,!1);else{if(zn!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(w=Yu(t),w!==null){for(r.flags|=128,Sc(d,!1),t=w.updateQueue,r.updateQueue=t,ah(r,t),r.subtreeFlags=0,t=c,c=r.child;c!==null;)Pg(c,t),c=c.sibling;return Oe(Yn,Yn.current&1|2),Ft&&Qs(r,d.treeForkCount),r.child}t=t.sibling}d.tail!==null&&En()>hh&&(r.flags|=128,E=!0,Sc(d,!1),r.lanes=4194304)}else{if(!E)if(t=Yu(w),t!==null){if(r.flags|=128,E=!0,t=t.updateQueue,r.updateQueue=t,ah(r,t),Sc(d,!0),d.tail===null&&d.tailMode==="hidden"&&!w.alternate&&!Ft)return An(r),null}else 2*En()-d.renderingStartTime>hh&&c!==536870912&&(r.flags|=128,E=!0,Sc(d,!1),r.lanes=4194304);d.isBackwards?(w.sibling=r.child,r.child=w):(t=d.last,t!==null?t.sibling=w:r.child=w,d.last=w)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=En(),t.sibling=null,c=Yn.current,Oe(Yn,E?c&1|2:c&1),Ft&&Qs(r,d.treeForkCount),t):(An(r),null);case 22:case 23:return Rr(r),pd(),d=r.memoizedState!==null,t!==null?t.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(c&536870912)!==0&&(r.flags&128)===0&&(An(r),r.subtreeFlags&6&&(r.flags|=8192)):An(r),c=r.updateQueue,c!==null&&ah(r,c.retryQueue),c=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==c&&(r.flags|=2048),t!==null&&pe(Uo),null;case 24:return c=null,t!==null&&(c=t.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Js(Zn),An(r),null;case 25:return null;case 30:return null}throw Error(o(156,r.tag))}function FA(t,r){switch(td(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Js(Zn),qt(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return On(r),null;case 31:if(r.memoizedState!==null){if(Rr(r),r.alternate===null)throw Error(o(340));Bo()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(Rr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(o(340));Bo()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return pe(Yn),null;case 4:return qt(),null;case 10:return Js(r.type),null;case 22:case 23:return Rr(r),pd(),t!==null&&pe(Uo),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Js(Zn),null;case 25:return null;default:return null}}function lp(t,r){switch(td(r),r.tag){case 3:Js(Zn),qt();break;case 26:case 27:case 5:On(r);break;case 4:qt();break;case 31:r.memoizedState!==null&&Rr(r);break;case 13:Rr(r);break;case 19:pe(Yn);break;case 10:Js(r.type);break;case 22:case 23:Rr(r),pd(),t!==null&&pe(Uo);break;case 24:Js(Zn)}}function bc(t,r){try{var c=r.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var E=d.next;c=E;do{if((c.tag&t)===t){d=void 0;var w=c.create,R=c.inst;d=w(),R.destroy=d}c=c.next}while(c!==E)}}catch(B){an(r,r.return,B)}}function Fa(t,r,c){try{var d=r.updateQueue,E=d!==null?d.lastEffect:null;if(E!==null){var w=E.next;d=w;do{if((d.tag&t)===t){var R=d.inst,B=R.destroy;if(B!==void 0){R.destroy=void 0,E=r;var K=c,ue=B;try{ue()}catch(_e){an(E,K,_e)}}}d=d.next}while(d!==w)}}catch(_e){an(r,r.return,_e)}}function cp(t){var r=t.updateQueue;if(r!==null){var c=t.stateNode;try{$g(r,c)}catch(d){an(t,t.return,d)}}}function up(t,r,c){c.props=Go(t.type,t.memoizedProps),c.state=t.memoizedState;try{c.componentWillUnmount()}catch(d){an(t,r,d)}}function Ic(t,r){try{var c=t.ref;if(c!==null){switch(t.tag){case 26:case 27:case 5:var d=t.stateNode;break;case 30:d=t.stateNode;break;default:d=t.stateNode}typeof c=="function"?t.refCleanup=c(d):c.current=d}}catch(E){an(t,r,E)}}function Ts(t,r){var c=t.ref,d=t.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(E){an(t,r,E)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(E){an(t,r,E)}else c.current=null}function hp(t){var r=t.type,c=t.memoizedProps,d=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(E){an(t,t.return,E)}}function Wd(t,r,c){try{var d=t.stateNode;lw(d,t.type,c,r),d[Ht]=r}catch(E){an(t,t.return,E)}}function fp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ya(t.type)||t.tag===4}function Kd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ya(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qd(t,r,c){var d=t.tag;if(d===5||d===6)t=t.stateNode,r?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(t,r):(r=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,r.appendChild(t),c=c._reactRootContainer,c!=null||r.onclick!==null||(r.onclick=Vi));else if(d!==4&&(d===27&&Ya(t.type)&&(c=t.stateNode,r=null),t=t.child,t!==null))for(Qd(t,r,c),t=t.sibling;t!==null;)Qd(t,r,c),t=t.sibling}function oh(t,r,c){var d=t.tag;if(d===5||d===6)t=t.stateNode,r?c.insertBefore(t,r):c.appendChild(t);else if(d!==4&&(d===27&&Ya(t.type)&&(c=t.stateNode),t=t.child,t!==null))for(oh(t,r,c),t=t.sibling;t!==null;)oh(t,r,c),t=t.sibling}function dp(t){var r=t.stateNode,c=t.memoizedProps;try{for(var d=t.type,E=r.attributes;E.length;)r.removeAttributeNode(E[0]);Ni(r,d,c),r[Cn]=t,r[Ht]=c}catch(w){an(t,t.return,w)}}var ia=!1,ei=!1,Zd=!1,gp=typeof WeakSet=="function"?WeakSet:Set,di=null;function zA(t,r){if(t=t.containerInfo,E1=Ih,t=M(t),P(t)){if("selectionStart"in t)var c={start:t.selectionStart,end:t.selectionEnd};else e:{c=(c=t.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var E=d.anchorOffset,w=d.focusNode;d=d.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var R=0,B=-1,K=-1,ue=0,_e=0,Ce=t,fe=null;t:for(;;){for(var Ee;Ce!==c||E!==0&&Ce.nodeType!==3||(B=R+E),Ce!==w||d!==0&&Ce.nodeType!==3||(K=R+d),Ce.nodeType===3&&(R+=Ce.nodeValue.length),(Ee=Ce.firstChild)!==null;)fe=Ce,Ce=Ee;for(;;){if(Ce===t)break t;if(fe===c&&++ue===E&&(B=R),fe===w&&++_e===d&&(K=R),(Ee=Ce.nextSibling)!==null)break;Ce=fe,fe=Ce.parentNode}Ce=Ee}c=B===-1||K===-1?null:{start:B,end:K}}else c=null}c=c||{start:0,end:0}}else c=null;for(_1={focusedElem:t,selectionRange:c},Ih=!1,di=r;di!==null;)if(r=di,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,di=t;else for(;di!==null;){switch(r=di,w=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(c=0;c<t.length;c++)E=t[c],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&w!==null){t=void 0,c=r,E=w.memoizedProps,w=w.memoizedState,d=c.stateNode;try{var Ge=Go(c.type,E);t=d.getSnapshotBeforeUpdate(Ge,w),d.__reactInternalSnapshotBeforeUpdate=t}catch(at){an(c,c.return,at)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,c=t.nodeType,c===9)w1(t);else if(c===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":w1(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=r.sibling,t!==null){t.return=r.return,di=t;break}di=r.return}}function mp(t,r,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:sa(t,c),d&4&&bc(5,c);break;case 1:if(sa(t,c),d&4)if(t=c.stateNode,r===null)try{t.componentDidMount()}catch(R){an(c,c.return,R)}else{var E=Go(c.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(E,r,t.__reactInternalSnapshotBeforeUpdate)}catch(R){an(c,c.return,R)}}d&64&&cp(c),d&512&&Ic(c,c.return);break;case 3:if(sa(t,c),d&64&&(t=c.updateQueue,t!==null)){if(r=null,c.child!==null)switch(c.child.tag){case 27:case 5:r=c.child.stateNode;break;case 1:r=c.child.stateNode}try{$g(t,r)}catch(R){an(c,c.return,R)}}break;case 27:r===null&&d&4&&dp(c);case 26:case 5:sa(t,c),r===null&&d&4&&hp(c),d&512&&Ic(c,c.return);break;case 12:sa(t,c);break;case 31:sa(t,c),d&4&&Ep(t,c);break;case 13:sa(t,c),d&4&&_p(t,c),d&64&&(t=c.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(c=QA.bind(null,c),pw(t,c))));break;case 22:if(d=c.memoizedState!==null||ia,!d){r=r!==null&&r.memoizedState!==null||ei,E=ia;var w=ei;ia=d,(ei=r)&&!w?aa(t,c,(c.subtreeFlags&8772)!==0):sa(t,c),ia=E,ei=w}break;case 30:break;default:sa(t,c)}}function pp(t){var r=t.alternate;r!==null&&(t.alternate=null,pp(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&wi(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Nn=null,cr=!1;function ra(t,r,c){for(c=c.child;c!==null;)yp(t,r,c),c=c.sibling}function yp(t,r,c){if(Re&&typeof Re.onCommitFiberUnmount=="function")try{Re.onCommitFiberUnmount(Yt,c)}catch{}switch(c.tag){case 26:ei||Ts(c,r),ra(t,r,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:ei||Ts(c,r);var d=Nn,E=cr;Ya(c.type)&&(Nn=c.stateNode,cr=!1),ra(t,r,c),kc(c.stateNode),Nn=d,cr=E;break;case 5:ei||Ts(c,r);case 6:if(d=Nn,E=cr,Nn=null,ra(t,r,c),Nn=d,cr=E,Nn!==null)if(cr)try{(Nn.nodeType===9?Nn.body:Nn.nodeName==="HTML"?Nn.ownerDocument.body:Nn).removeChild(c.stateNode)}catch(w){an(c,r,w)}else try{Nn.removeChild(c.stateNode)}catch(w){an(c,r,w)}break;case 18:Nn!==null&&(cr?(t=Nn,c2(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,c.stateNode),Vl(t)):c2(Nn,c.stateNode));break;case 4:d=Nn,E=cr,Nn=c.stateNode.containerInfo,cr=!0,ra(t,r,c),Nn=d,cr=E;break;case 0:case 11:case 14:case 15:Fa(2,c,r),ei||Fa(4,c,r),ra(t,r,c);break;case 1:ei||(Ts(c,r),d=c.stateNode,typeof d.componentWillUnmount=="function"&&up(c,r,d)),ra(t,r,c);break;case 21:ra(t,r,c);break;case 22:ei=(d=ei)||c.memoizedState!==null,ra(t,r,c),ei=d;break;default:ra(t,r,c)}}function Ep(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Vl(t)}catch(c){an(r,r.return,c)}}}function _p(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Vl(t)}catch(c){an(r,r.return,c)}}function jA(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new gp),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new gp),r;default:throw Error(o(435,t.tag))}}function lh(t,r){var c=jA(t);r.forEach(function(d){if(!c.has(d)){c.add(d);var E=ZA.bind(null,t,d);d.then(E,E)}})}function ur(t,r){var c=r.deletions;if(c!==null)for(var d=0;d<c.length;d++){var E=c[d],w=t,R=r,B=R;e:for(;B!==null;){switch(B.tag){case 27:if(Ya(B.type)){Nn=B.stateNode,cr=!1;break e}break;case 5:Nn=B.stateNode,cr=!1;break e;case 3:case 4:Nn=B.stateNode.containerInfo,cr=!0;break e}B=B.return}if(Nn===null)throw Error(o(160));yp(w,R,E),Nn=null,cr=!1,w=E.alternate,w!==null&&(w.return=null),E.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)xp(r,t),r=r.sibling}var us=null;function xp(t,r){var c=t.alternate,d=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ur(r,t),hr(t),d&4&&(Fa(3,t,t.return),bc(3,t),Fa(5,t,t.return));break;case 1:ur(r,t),hr(t),d&512&&(ei||c===null||Ts(c,c.return)),d&64&&ia&&(t=t.updateQueue,t!==null&&(d=t.callbacks,d!==null&&(c=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var E=us;if(ur(r,t),hr(t),d&512&&(ei||c===null||Ts(c,c.return)),d&4){var w=c!==null?c.memoizedState:null;if(d=t.memoizedState,c===null)if(d===null)if(t.stateNode===null){e:{d=t.type,c=t.memoizedProps,E=E.ownerDocument||E;t:switch(d){case"title":w=E.getElementsByTagName("title")[0],(!w||w[Vr]||w[Cn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=E.createElement(d),E.head.insertBefore(w,E.querySelector("head > title"))),Ni(w,d,c),w[Cn]=t,vn(w),d=w;break e;case"link":var R=x2("link","href",E).get(d+(c.href||""));if(R){for(var B=0;B<R.length;B++)if(w=R[B],w.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&w.getAttribute("rel")===(c.rel==null?null:c.rel)&&w.getAttribute("title")===(c.title==null?null:c.title)&&w.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){R.splice(B,1);break t}}w=E.createElement(d),Ni(w,d,c),E.head.appendChild(w);break;case"meta":if(R=x2("meta","content",E).get(d+(c.content||""))){for(B=0;B<R.length;B++)if(w=R[B],w.getAttribute("content")===(c.content==null?null:""+c.content)&&w.getAttribute("name")===(c.name==null?null:c.name)&&w.getAttribute("property")===(c.property==null?null:c.property)&&w.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&w.getAttribute("charset")===(c.charSet==null?null:c.charSet)){R.splice(B,1);break t}}w=E.createElement(d),Ni(w,d,c),E.head.appendChild(w);break;default:throw Error(o(468,d))}w[Cn]=t,vn(w),d=w}t.stateNode=d}else A2(E,t.type,t.stateNode);else t.stateNode=_2(E,d,t.memoizedProps);else w!==d?(w===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):w.count--,d===null?A2(E,t.type,t.stateNode):_2(E,d,t.memoizedProps)):d===null&&t.stateNode!==null&&Wd(t,t.memoizedProps,c.memoizedProps)}break;case 27:ur(r,t),hr(t),d&512&&(ei||c===null||Ts(c,c.return)),c!==null&&d&4&&Wd(t,t.memoizedProps,c.memoizedProps);break;case 5:if(ur(r,t),hr(t),d&512&&(ei||c===null||Ts(c,c.return)),t.flags&32){E=t.stateNode;try{ki(E,"")}catch(Ge){an(t,t.return,Ge)}}d&4&&t.stateNode!=null&&(E=t.memoizedProps,Wd(t,E,c!==null?c.memoizedProps:E)),d&1024&&(Zd=!0);break;case 6:if(ur(r,t),hr(t),d&4){if(t.stateNode===null)throw Error(o(162));d=t.memoizedProps,c=t.stateNode;try{c.nodeValue=d}catch(Ge){an(t,t.return,Ge)}}break;case 3:if(Ch=null,E=us,us=wh(r.containerInfo),ur(r,t),us=E,hr(t),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Vl(r.containerInfo)}catch(Ge){an(t,t.return,Ge)}Zd&&(Zd=!1,Ap(t));break;case 4:d=us,us=wh(t.stateNode.containerInfo),ur(r,t),hr(t),us=d;break;case 12:ur(r,t),hr(t);break;case 31:ur(r,t),hr(t),d&4&&(d=t.updateQueue,d!==null&&(t.updateQueue=null,lh(t,d)));break;case 13:ur(r,t),hr(t),t.child.flags&8192&&t.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(uh=En()),d&4&&(d=t.updateQueue,d!==null&&(t.updateQueue=null,lh(t,d)));break;case 22:E=t.memoizedState!==null;var K=c!==null&&c.memoizedState!==null,ue=ia,_e=ei;if(ia=ue||E,ei=_e||K,ur(r,t),ei=_e,ia=ue,hr(t),d&8192)e:for(r=t.stateNode,r._visibility=E?r._visibility&-2:r._visibility|1,E&&(c===null||K||ia||ei||qo(t)),c=null,r=t;;){if(r.tag===5||r.tag===26){if(c===null){K=c=r;try{if(w=K.stateNode,E)R=w.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{B=K.stateNode;var Ce=K.memoizedProps.style,fe=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;B.style.display=fe==null||typeof fe=="boolean"?"":(""+fe).trim()}}catch(Ge){an(K,K.return,Ge)}}}else if(r.tag===6){if(c===null){K=r;try{K.stateNode.nodeValue=E?"":K.memoizedProps}catch(Ge){an(K,K.return,Ge)}}}else if(r.tag===18){if(c===null){K=r;try{var Ee=K.stateNode;E?u2(Ee,!0):u2(K.stateNode,!1)}catch(Ge){an(K,K.return,Ge)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;c===r&&(c=null),r=r.return}c===r&&(c=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=t.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,lh(t,c))));break;case 19:ur(r,t),hr(t),d&4&&(d=t.updateQueue,d!==null&&(t.updateQueue=null,lh(t,d)));break;case 30:break;case 21:break;default:ur(r,t),hr(t)}}function hr(t){var r=t.flags;if(r&2){try{for(var c,d=t.return;d!==null;){if(fp(d)){c=d;break}d=d.return}if(c==null)throw Error(o(160));switch(c.tag){case 27:var E=c.stateNode,w=Kd(t);oh(t,w,E);break;case 5:var R=c.stateNode;c.flags&32&&(ki(R,""),c.flags&=-33);var B=Kd(t);oh(t,B,R);break;case 3:case 4:var K=c.stateNode.containerInfo,ue=Kd(t);Qd(t,ue,K);break;default:throw Error(o(161))}}catch(_e){an(t,t.return,_e)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Ap(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Ap(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function sa(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)mp(t,r.alternate,r),r=r.sibling}function qo(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Fa(4,r,r.return),qo(r);break;case 1:Ts(r,r.return);var c=r.stateNode;typeof c.componentWillUnmount=="function"&&up(r,r.return,c),qo(r);break;case 27:kc(r.stateNode);case 26:case 5:Ts(r,r.return),qo(r);break;case 22:r.memoizedState===null&&qo(r);break;case 30:qo(r);break;default:qo(r)}t=t.sibling}}function aa(t,r,c){for(c=c&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,E=t,w=r,R=w.flags;switch(w.tag){case 0:case 11:case 15:aa(E,w,c),bc(4,w);break;case 1:if(aa(E,w,c),d=w,E=d.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(ue){an(d,d.return,ue)}if(d=w,E=d.updateQueue,E!==null){var B=d.stateNode;try{var K=E.shared.hiddenCallbacks;if(K!==null)for(E.shared.hiddenCallbacks=null,E=0;E<K.length;E++)Jg(K[E],B)}catch(ue){an(d,d.return,ue)}}c&&R&64&&cp(w),Ic(w,w.return);break;case 27:dp(w);case 26:case 5:aa(E,w,c),c&&d===null&&R&4&&hp(w),Ic(w,w.return);break;case 12:aa(E,w,c);break;case 31:aa(E,w,c),c&&R&4&&Ep(E,w);break;case 13:aa(E,w,c),c&&R&4&&_p(E,w);break;case 22:w.memoizedState===null&&aa(E,w,c),Ic(w,w.return);break;case 30:break;default:aa(E,w,c)}r=r.sibling}}function Jd(t,r){var c=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==c&&(t!=null&&t.refCount++,c!=null&&gc(c))}function $d(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&gc(t))}function hs(t,r,c,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)wp(t,r,c,d),r=r.sibling}function wp(t,r,c,d){var E=r.flags;switch(r.tag){case 0:case 11:case 15:hs(t,r,c,d),E&2048&&bc(9,r);break;case 1:hs(t,r,c,d);break;case 3:hs(t,r,c,d),E&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&gc(t)));break;case 12:if(E&2048){hs(t,r,c,d),t=r.stateNode;try{var w=r.memoizedProps,R=w.id,B=w.onPostCommit;typeof B=="function"&&B(R,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(K){an(r,r.return,K)}}else hs(t,r,c,d);break;case 31:hs(t,r,c,d);break;case 13:hs(t,r,c,d);break;case 23:break;case 22:w=r.stateNode,R=r.alternate,r.memoizedState!==null?w._visibility&2?hs(t,r,c,d):Rc(t,r):w._visibility&2?hs(t,r,c,d):(w._visibility|=2,bl(t,r,c,d,(r.subtreeFlags&10256)!==0||!1)),E&2048&&Jd(R,r);break;case 24:hs(t,r,c,d),E&2048&&$d(r.alternate,r);break;default:hs(t,r,c,d)}}function bl(t,r,c,d,E){for(E=E&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var w=t,R=r,B=c,K=d,ue=R.flags;switch(R.tag){case 0:case 11:case 15:bl(w,R,B,K,E),bc(8,R);break;case 23:break;case 22:var _e=R.stateNode;R.memoizedState!==null?_e._visibility&2?bl(w,R,B,K,E):Rc(w,R):(_e._visibility|=2,bl(w,R,B,K,E)),E&&ue&2048&&Jd(R.alternate,R);break;case 24:bl(w,R,B,K,E),E&&ue&2048&&$d(R.alternate,R);break;default:bl(w,R,B,K,E)}r=r.sibling}}function Rc(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var c=t,d=r,E=d.flags;switch(d.tag){case 22:Rc(c,d),E&2048&&Jd(d.alternate,d);break;case 24:Rc(c,d),E&2048&&$d(d.alternate,d);break;default:Rc(c,d)}r=r.sibling}}var Nc=8192;function Il(t,r,c){if(t.subtreeFlags&Nc)for(t=t.child;t!==null;)Tp(t,r,c),t=t.sibling}function Tp(t,r,c){switch(t.tag){case 26:Il(t,r,c),t.flags&Nc&&t.memoizedState!==null&&Iw(c,us,t.memoizedState,t.memoizedProps);break;case 5:Il(t,r,c);break;case 3:case 4:var d=us;us=wh(t.stateNode.containerInfo),Il(t,r,c),us=d;break;case 22:t.memoizedState===null&&(d=t.alternate,d!==null&&d.memoizedState!==null?(d=Nc,Nc=16777216,Il(t,r,c),Nc=d):Il(t,r,c));break;default:Il(t,r,c)}}function Cp(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Oc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var d=r[c];di=d,Sp(d,t)}Cp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)vp(t),t=t.sibling}function vp(t){switch(t.tag){case 0:case 11:case 15:Oc(t),t.flags&2048&&Fa(9,t,t.return);break;case 3:Oc(t);break;case 12:Oc(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,ch(t)):Oc(t);break;default:Oc(t)}}function ch(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var d=r[c];di=d,Sp(d,t)}Cp(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Fa(8,r,r.return),ch(r);break;case 22:c=r.stateNode,c._visibility&2&&(c._visibility&=-3,ch(r));break;default:ch(r)}t=t.sibling}}function Sp(t,r){for(;di!==null;){var c=di;switch(c.tag){case 0:case 11:case 15:Fa(8,c,r);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:gc(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,di=d;else e:for(c=t;di!==null;){d=di;var E=d.sibling,w=d.return;if(pp(d),d===c){di=null;break e}if(E!==null){E.return=w,di=E;break e}di=w}}}var HA={getCacheForType:function(t){var r=Ii(Zn),c=r.data.get(t);return c===void 0&&(c=t(),r.data.set(t,c)),c},cacheSignal:function(){return Ii(Zn).controller.signal}},GA=typeof WeakMap=="function"?WeakMap:Map,Jt=0,mn=null,Rt=null,Lt=0,sn=0,Nr=null,za=!1,Rl=!1,e1=!1,oa=0,zn=0,ja=0,Xo=0,t1=0,Or=0,Nl=0,Dc=null,fr=null,n1=!1,uh=0,bp=0,hh=1/0,fh=null,Ha=null,li=0,Ga=null,Ol=null,la=0,i1=0,r1=null,Ip=null,Mc=0,s1=null;function Dr(){return(Jt&2)!==0&&Lt!==0?Lt&-Lt:J.T!==null?h1():xi()}function Rp(){if(Or===0)if((Lt&536870912)===0||Ft){var t=wt;wt<<=1,(wt&3932160)===0&&(wt=262144),Or=t}else Or=536870912;return t=Ir.current,t!==null&&(t.flags|=32),Or}function dr(t,r,c){(t===mn&&(sn===2||sn===9)||t.cancelPendingCommit!==null)&&(Dl(t,0),qa(t,Lt,Or,!1)),kr(t,c),((Jt&2)===0||t!==mn)&&(t===mn&&((Jt&2)===0&&(Xo|=c),zn===4&&qa(t,Lt,Or,!1)),Cs(t))}function Np(t,r,c){if((Jt&6)!==0)throw Error(o(327));var d=!c&&(r&127)===0&&(r&t.expiredLanes)===0||Mn(t,r),E=d?YA(t,r):o1(t,r,!0),w=d;do{if(E===0){Rl&&!d&&qa(t,r,0,!1);break}else{if(c=t.current.alternate,w&&!qA(c)){E=o1(t,r,!1),w=!1;continue}if(E===2){if(w=r,t.errorRecoveryDisabledLanes&w)var R=0;else R=t.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){r=R;e:{var B=t;E=Dc;var K=B.current.memoizedState.isDehydrated;if(K&&(Dl(B,R).flags|=256),R=o1(B,R,!1),R!==2){if(e1&&!K){B.errorRecoveryDisabledLanes|=w,Xo|=w,E=4;break e}w=fr,fr=E,w!==null&&(fr===null?fr=w:fr.push.apply(fr,w))}E=R}if(w=!1,E!==2)continue}}if(E===1){Dl(t,0),qa(t,r,0,!0);break}e:{switch(d=t,w=E,w){case 0:case 1:throw Error(o(345));case 4:if((r&4194048)!==r)break;case 6:qa(d,r,Or,!za);break e;case 2:fr=null;break;case 3:case 5:break;default:throw Error(o(329))}if((r&62914560)===r&&(E=uh+300-En(),10<E)){if(qa(d,r,Or,!za),_r(d,0,!0)!==0)break e;la=r,d.timeoutHandle=o2(Op.bind(null,d,c,fr,fh,n1,r,Or,Xo,Nl,za,w,"Throttled",-0,0),E);break e}Op(d,c,fr,fh,n1,r,Or,Xo,Nl,za,w,null,-0,0)}}break}while(!0);Cs(t)}function Op(t,r,c,d,E,w,R,B,K,ue,_e,Ce,fe,Ee){if(t.timeoutHandle=-1,Ce=r.subtreeFlags,Ce&8192||(Ce&16785408)===16785408){Ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vi},Tp(r,w,Ce);var Ge=(w&62914560)===w?uh-En():(w&4194048)===w?bp-En():0;if(Ge=Rw(Ce,Ge),Ge!==null){la=w,t.cancelPendingCommit=Ge(Up.bind(null,t,r,w,c,d,E,R,B,K,_e,Ce,null,fe,Ee)),qa(t,w,R,!ue);return}}Up(t,r,w,c,d,E,R,B,K)}function qA(t){for(var r=t;;){var c=r.tag;if((c===0||c===11||c===15)&&r.flags&16384&&(c=r.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var E=c[d],w=E.getSnapshot;E=E.value;try{if(!g(w(),E))return!1}catch{return!1}}if(c=r.child,r.subtreeFlags&16384&&c!==null)c.return=r,r=c;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function qa(t,r,c,d){r&=~t1,r&=~Xo,t.suspendedLanes|=r,t.pingedLanes&=~r,d&&(t.warmLanes|=r),d=t.expirationTimes;for(var E=r;0<E;){var w=31-ot(E),R=1<<w;d[w]=-1,E&=~R}c!==0&&Bs(t,c,r)}function dh(){return(Jt&6)===0?(Lc(0),!1):!0}function a1(){if(Rt!==null){if(sn===0)var t=Rt.return;else t=Rt,Zs=ko=null,wd(t),wl=null,pc=0,t=Rt;for(;t!==null;)lp(t.alternate,t),t=t.return;Rt=null}}function Dl(t,r){var c=t.timeoutHandle;c!==-1&&(t.timeoutHandle=-1,hw(c)),c=t.cancelPendingCommit,c!==null&&(t.cancelPendingCommit=null,c()),la=0,a1(),mn=t,Rt=c=Ks(t.current,null),Lt=r,sn=0,Nr=null,za=!1,Rl=Mn(t,r),e1=!1,Nl=Or=t1=Xo=ja=zn=0,fr=Dc=null,n1=!1,(r&8)!==0&&(r|=r&32);var d=t.entangledLanes;if(d!==0)for(t=t.entanglements,d&=r;0<d;){var E=31-ot(d),w=1<<E;r|=t[E],d&=~w}return oa=r,Lu(),c}function Dp(t,r){pt=null,J.H=Cc,r===Al||r===ju?(r=Wg(),sn=3):r===ud?(r=Wg(),sn=4):sn=r===Vd?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Nr=r,Rt===null&&(zn=1,nh(t,Yr(r,t.current)))}function Mp(){var t=Ir.current;return t===null?!0:(Lt&4194048)===Lt?Zr===null:(Lt&62914560)===Lt||(Lt&536870912)!==0?t===Zr:!1}function Lp(){var t=J.H;return J.H=Cc,t===null?Cc:t}function Pp(){var t=J.A;return J.A=HA,t}function gh(){zn=4,za||(Lt&4194048)!==Lt&&Ir.current!==null||(Rl=!0),(ja&134217727)===0&&(Xo&134217727)===0||mn===null||qa(mn,Lt,Or,!1)}function o1(t,r,c){var d=Jt;Jt|=2;var E=Lp(),w=Pp();(mn!==t||Lt!==r)&&(fh=null,Dl(t,r)),r=!1;var R=zn;e:do try{if(sn!==0&&Rt!==null){var B=Rt,K=Nr;switch(sn){case 8:a1(),R=6;break e;case 3:case 2:case 9:case 6:Ir.current===null&&(r=!0);var ue=sn;if(sn=0,Nr=null,Ml(t,B,K,ue),c&&Rl){R=0;break e}break;default:ue=sn,sn=0,Nr=null,Ml(t,B,K,ue)}}XA(),R=zn;break}catch(_e){Dp(t,_e)}while(!0);return r&&t.shellSuspendCounter++,Zs=ko=null,Jt=d,J.H=E,J.A=w,Rt===null&&(mn=null,Lt=0,Lu()),R}function XA(){for(;Rt!==null;)Bp(Rt)}function YA(t,r){var c=Jt;Jt|=2;var d=Lp(),E=Pp();mn!==t||Lt!==r?(fh=null,hh=En()+500,Dl(t,r)):Rl=Mn(t,r);e:do try{if(sn!==0&&Rt!==null){r=Rt;var w=Nr;t:switch(sn){case 1:sn=0,Nr=null,Ml(t,r,w,1);break;case 2:case 9:if(Xg(w)){sn=0,Nr=null,kp(r);break}r=function(){sn!==2&&sn!==9||mn!==t||(sn=7),Cs(t)},w.then(r,r);break e;case 3:sn=7;break e;case 4:sn=5;break e;case 7:Xg(w)?(sn=0,Nr=null,kp(r)):(sn=0,Nr=null,Ml(t,r,w,7));break;case 5:var R=null;switch(Rt.tag){case 26:R=Rt.memoizedState;case 5:case 27:var B=Rt;if(R?w2(R):B.stateNode.complete){sn=0,Nr=null;var K=B.sibling;if(K!==null)Rt=K;else{var ue=B.return;ue!==null?(Rt=ue,mh(ue)):Rt=null}break t}}sn=0,Nr=null,Ml(t,r,w,5);break;case 6:sn=0,Nr=null,Ml(t,r,w,6);break;case 8:a1(),zn=6;break e;default:throw Error(o(462))}}WA();break}catch(_e){Dp(t,_e)}while(!0);return Zs=ko=null,J.H=d,J.A=E,Jt=c,Rt!==null?0:(mn=null,Lt=0,Lu(),zn)}function WA(){for(;Rt!==null&&!xa();)Bp(Rt)}function Bp(t){var r=ap(t.alternate,t,oa);t.memoizedProps=t.pendingProps,r===null?mh(t):Rt=r}function kp(t){var r=t,c=r.alternate;switch(r.tag){case 15:case 0:r=ep(c,r,r.pendingProps,r.type,void 0,Lt);break;case 11:r=ep(c,r,r.pendingProps,r.type.render,r.ref,Lt);break;case 5:wd(r);default:lp(c,r),r=Rt=Pg(r,oa),r=ap(c,r,oa)}t.memoizedProps=t.pendingProps,r===null?mh(t):Rt=r}function Ml(t,r,c,d){Zs=ko=null,wd(r),wl=null,pc=0;var E=r.return;try{if(BA(t,E,r,c,Lt)){zn=1,nh(t,Yr(c,t.current)),Rt=null;return}}catch(w){if(E!==null)throw Rt=E,w;zn=1,nh(t,Yr(c,t.current)),Rt=null;return}r.flags&32768?(Ft||d===1?t=!0:Rl||(Lt&536870912)!==0?t=!1:(za=t=!0,(d===2||d===9||d===3||d===6)&&(d=Ir.current,d!==null&&d.tag===13&&(d.flags|=16384))),Vp(r,t)):mh(r)}function mh(t){var r=t;do{if((r.flags&32768)!==0){Vp(r,za);return}t=r.return;var c=UA(r.alternate,r,oa);if(c!==null){Rt=c;return}if(r=r.sibling,r!==null){Rt=r;return}Rt=r=t}while(r!==null);zn===0&&(zn=5)}function Vp(t,r){do{var c=FA(t.alternate,t);if(c!==null){c.flags&=32767,Rt=c;return}if(c=t.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!r&&(t=t.sibling,t!==null)){Rt=t;return}Rt=t=c}while(t!==null);zn=6,Rt=null}function Up(t,r,c,d,E,w,R,B,K){t.cancelPendingCommit=null;do ph();while(li!==0);if((Jt&6)!==0)throw Error(o(327));if(r!==null){if(r===t.current)throw Error(o(177));if(w=r.lanes|r.childLanes,w|=Kf,ir(t,c,w,R,B,K),t===mn&&(Rt=mn=null,Lt=0),Ol=r,Ga=t,la=c,i1=w,r1=E,Ip=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,JA(yi,function(){return Gp(),null})):(t.callbackNode=null,t.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=J.T,J.T=null,E=re.p,re.p=2,R=Jt,Jt|=4;try{zA(t,r,c)}finally{Jt=R,re.p=E,J.T=d}}li=1,Fp(),zp(),jp()}}function Fp(){if(li===1){li=0;var t=Ga,r=Ol,c=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||c){c=J.T,J.T=null;var d=re.p;re.p=2;var E=Jt;Jt|=4;try{xp(r,t);var w=_1,R=M(t.containerInfo),B=w.focusedElem,K=w.selectionRange;if(R!==B&&B&&B.ownerDocument&&I(B.ownerDocument.documentElement,B)){if(K!==null&&P(B)){var ue=K.start,_e=K.end;if(_e===void 0&&(_e=ue),"selectionStart"in B)B.selectionStart=ue,B.selectionEnd=Math.min(_e,B.value.length);else{var Ce=B.ownerDocument||document,fe=Ce&&Ce.defaultView||window;if(fe.getSelection){var Ee=fe.getSelection(),Ge=B.textContent.length,at=Math.min(K.start,Ge),hn=K.end===void 0?at:Math.min(K.end,Ge);!Ee.extend&&at>hn&&(R=hn,hn=at,at=R);var ne=C(B,at),te=C(B,hn);if(ne&&te&&(Ee.rangeCount!==1||Ee.anchorNode!==ne.node||Ee.anchorOffset!==ne.offset||Ee.focusNode!==te.node||Ee.focusOffset!==te.offset)){var ce=Ce.createRange();ce.setStart(ne.node,ne.offset),Ee.removeAllRanges(),at>hn?(Ee.addRange(ce),Ee.extend(te.node,te.offset)):(ce.setEnd(te.node,te.offset),Ee.addRange(ce))}}}}for(Ce=[],Ee=B;Ee=Ee.parentNode;)Ee.nodeType===1&&Ce.push({element:Ee,left:Ee.scrollLeft,top:Ee.scrollTop});for(typeof B.focus=="function"&&B.focus(),B=0;B<Ce.length;B++){var we=Ce[B];we.element.scrollLeft=we.left,we.element.scrollTop=we.top}}Ih=!!E1,_1=E1=null}finally{Jt=E,re.p=d,J.T=c}}t.current=r,li=2}}function zp(){if(li===2){li=0;var t=Ga,r=Ol,c=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||c){c=J.T,J.T=null;var d=re.p;re.p=2;var E=Jt;Jt|=4;try{mp(t,r.alternate,r)}finally{Jt=E,re.p=d,J.T=c}}li=3}}function jp(){if(li===4||li===3){li=0,wo();var t=Ga,r=Ol,c=la,d=Ip;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?li=5:(li=0,Ol=Ga=null,Hp(t,t.pendingLanes));var E=t.pendingLanes;if(E===0&&(Ha=null),_i(c),r=r.stateNode,Re&&typeof Re.onCommitFiberRoot=="function")try{Re.onCommitFiberRoot(Yt,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=J.T,E=re.p,re.p=2,J.T=null;try{for(var w=t.onRecoverableError,R=0;R<d.length;R++){var B=d[R];w(B.value,{componentStack:B.stack})}}finally{J.T=r,re.p=E}}(la&3)!==0&&ph(),Cs(t),E=t.pendingLanes,(c&261930)!==0&&(E&42)!==0?t===s1?Mc++:(Mc=0,s1=t):Mc=0,Lc(0)}}function Hp(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,gc(r)))}function ph(){return Fp(),zp(),jp(),Gp()}function Gp(){if(li!==5)return!1;var t=Ga,r=i1;i1=0;var c=_i(la),d=J.T,E=re.p;try{re.p=32>c?32:c,J.T=null,c=r1,r1=null;var w=Ga,R=la;if(li=0,Ol=Ga=null,la=0,(Jt&6)!==0)throw Error(o(331));var B=Jt;if(Jt|=4,vp(w.current),wp(w,w.current,R,c),Jt=B,Lc(0,!1),Re&&typeof Re.onPostCommitFiberRoot=="function")try{Re.onPostCommitFiberRoot(Yt,w)}catch{}return!0}finally{re.p=E,J.T=d,Hp(t,r)}}function qp(t,r,c){r=Yr(c,r),r=kd(t.stateNode,r,2),t=ka(t,r,2),t!==null&&(kr(t,2),Cs(t))}function an(t,r,c){if(t.tag===3)qp(t,t,c);else for(;r!==null;){if(r.tag===3){qp(r,t,c);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ha===null||!Ha.has(d))){t=Yr(c,t),c=Xm(2),d=ka(r,c,2),d!==null&&(Ym(c,d,r,t),kr(d,2),Cs(d));break}}r=r.return}}function l1(t,r,c){var d=t.pingCache;if(d===null){d=t.pingCache=new GA;var E=new Set;d.set(r,E)}else E=d.get(r),E===void 0&&(E=new Set,d.set(r,E));E.has(c)||(e1=!0,E.add(c),t=KA.bind(null,t,r,c),r.then(t,t))}function KA(t,r,c){var d=t.pingCache;d!==null&&d.delete(r),t.pingedLanes|=t.suspendedLanes&c,t.warmLanes&=~c,mn===t&&(Lt&c)===c&&(zn===4||zn===3&&(Lt&62914560)===Lt&&300>En()-uh?(Jt&2)===0&&Dl(t,0):t1|=c,Nl===Lt&&(Nl=0)),Cs(t)}function Xp(t,r){r===0&&(r=qn()),t=Lo(t,r),t!==null&&(kr(t,r),Cs(t))}function QA(t){var r=t.memoizedState,c=0;r!==null&&(c=r.retryLane),Xp(t,c)}function ZA(t,r){var c=0;switch(t.tag){case 31:case 13:var d=t.stateNode,E=t.memoizedState;E!==null&&(c=E.retryLane);break;case 19:d=t.stateNode;break;case 22:d=t.stateNode._retryCache;break;default:throw Error(o(314))}d!==null&&d.delete(r),Xp(t,c)}function JA(t,r){return Tn(t,r)}var yh=null,Ll=null,c1=!1,Eh=!1,u1=!1,Xa=0;function Cs(t){t!==Ll&&t.next===null&&(Ll===null?yh=Ll=t:Ll=Ll.next=t),Eh=!0,c1||(c1=!0,ew())}function Lc(t,r){if(!u1&&Eh){u1=!0;do for(var c=!1,d=yh;d!==null;){if(t!==0){var E=d.pendingLanes;if(E===0)var w=0;else{var R=d.suspendedLanes,B=d.pingedLanes;w=(1<<31-ot(42|t)+1)-1,w&=E&~(R&~B),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(c=!0,Qp(d,w))}else w=Lt,w=_r(d,d===mn?w:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(w&3)===0||Mn(d,w)||(c=!0,Qp(d,w));d=d.next}while(c);u1=!1}}function $A(){Yp()}function Yp(){Eh=c1=!1;var t=0;Xa!==0&&uw()&&(t=Xa);for(var r=En(),c=null,d=yh;d!==null;){var E=d.next,w=Wp(d,r);w===0?(d.next=null,c===null?yh=E:c.next=E,E===null&&(Ll=c)):(c=d,(t!==0||(w&3)!==0)&&(Eh=!0)),d=E}li!==0&&li!==5||Lc(t),Xa!==0&&(Xa=0)}function Wp(t,r){for(var c=t.suspendedLanes,d=t.pingedLanes,E=t.expirationTimes,w=t.pendingLanes&-62914561;0<w;){var R=31-ot(w),B=1<<R,K=E[R];K===-1?((B&c)===0||(B&d)!==0)&&(E[R]=Co(B,r)):K<=r&&(t.expiredLanes|=B),w&=~B}if(r=mn,c=Lt,c=_r(t,t===r?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),d=t.callbackNode,c===0||t===r&&(sn===2||sn===9)||t.cancelPendingCommit!==null)return d!==null&&d!==null&&Fe(d),t.callbackNode=null,t.callbackPriority=0;if((c&3)===0||Mn(t,c)){if(r=c&-c,r===t.callbackPriority)return r;switch(d!==null&&Fe(d),_i(c)){case 2:case 8:c=Aa;break;case 32:c=yi;break;case 268435456:c=To;break;default:c=yi}return d=Kp.bind(null,t),c=Tn(c,d),t.callbackPriority=r,t.callbackNode=c,r}return d!==null&&d!==null&&Fe(d),t.callbackPriority=2,t.callbackNode=null,2}function Kp(t,r){if(li!==0&&li!==5)return t.callbackNode=null,t.callbackPriority=0,null;var c=t.callbackNode;if(ph()&&t.callbackNode!==c)return null;var d=Lt;return d=_r(t,t===mn?d:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),d===0?null:(Np(t,d,r),Wp(t,En()),t.callbackNode!=null&&t.callbackNode===c?Kp.bind(null,t):null)}function Qp(t,r){if(ph())return null;Np(t,r,!0)}function ew(){fw(function(){(Jt&6)!==0?Tn(pi,$A):Yp()})}function h1(){if(Xa===0){var t=_l;t===0&&(t=yr,yr<<=1,(yr&261888)===0&&(yr=256)),Xa=t}return Xa}function Zp(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ys(""+t)}function Jp(t,r){var c=r.ownerDocument.createElement("input");return c.name=r.name,c.value=r.value,t.id&&c.setAttribute("form",t.id),r.parentNode.insertBefore(c,r),t=new FormData(t),c.parentNode.removeChild(c),t}function tw(t,r,c,d,E){if(r==="submit"&&c&&c.stateNode===E){var w=Zp((E[Ht]||null).action),R=d.submitter;R&&(r=(r=R[Ht]||null)?Zp(r.formAction):R.getAttribute("formAction"),r!==null&&(w=r,R=null));var B=new _n("action","action",null,d,E);t.push({event:B,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Xa!==0){var K=R?Jp(E,R):new FormData(E);Od(c,{pending:!0,data:K,method:E.method,action:w},null,K)}}else typeof w=="function"&&(B.preventDefault(),K=R?Jp(E,R):new FormData(E),Od(c,{pending:!0,data:K,method:E.method,action:w},w,K))},currentTarget:E}]})}}for(var f1=0;f1<hc.length;f1++){var d1=hc[f1],nw=d1.toLowerCase(),iw=d1[0].toUpperCase()+d1.slice(1);cs(nw,"on"+iw)}cs(lr,"onAnimationEnd"),cs(Si,"onAnimationIteration"),cs(tn,"onAnimationStart"),cs("dblclick","onDoubleClick"),cs("focusin","onFocus"),cs("focusout","onBlur"),cs(oi,"onTransitionRun"),cs($i,"onTransitionStart"),cs(Na,"onTransitionCancel"),cs(Ws,"onTransitionEnd"),Ti("onMouseEnter",["mouseout","mouseover"]),Ti("onMouseLeave",["mouseout","mouseover"]),Ti("onPointerEnter",["pointerout","pointerover"]),Ti("onPointerLeave",["pointerout","pointerover"]),Gt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pc));function $p(t,r){r=(r&4)!==0;for(var c=0;c<t.length;c++){var d=t[c],E=d.event;d=d.listeners;e:{var w=void 0;if(r)for(var R=d.length-1;0<=R;R--){var B=d[R],K=B.instance,ue=B.currentTarget;if(B=B.listener,K!==w&&E.isPropagationStopped())break e;w=B,E.currentTarget=ue;try{w(E)}catch(_e){Mu(_e)}E.currentTarget=null,w=K}else for(R=0;R<d.length;R++){if(B=d[R],K=B.instance,ue=B.currentTarget,B=B.listener,K!==w&&E.isPropagationStopped())break e;w=B,E.currentTarget=ue;try{w(E)}catch(_e){Mu(_e)}E.currentTarget=null,w=K}}}}function Nt(t,r){var c=r[ss];c===void 0&&(c=r[ss]=new Set);var d=t+"__bubble";c.has(d)||(e2(r,t,2,!1),c.add(d))}function g1(t,r,c){var d=0;r&&(d|=4),e2(c,t,d,r)}var _h="_reactListening"+Math.random().toString(36).slice(2);function m1(t){if(!t[_h]){t[_h]=!0,ve.forEach(function(c){c!=="selectionchange"&&(rw.has(c)||g1(c,!1,t),g1(c,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[_h]||(r[_h]=!0,g1("selectionchange",!1,r))}}function e2(t,r,c,d){switch(R2(r)){case 2:var E=Dw;break;case 8:E=Mw;break;default:E=N1}c=E.bind(null,r,c,t),E=void 0,!Us||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(E=!0),d?E!==void 0?t.addEventListener(r,c,{capture:!0,passive:E}):t.addEventListener(r,c,!0):E!==void 0?t.addEventListener(r,c,{passive:E}):t.addEventListener(r,c,!1)}function p1(t,r,c,d,E){var w=d;if((r&1)===0&&(r&2)===0&&d!==null)e:for(;;){if(d===null)return;var R=d.tag;if(R===3||R===4){var B=d.stateNode.containerInfo;if(B===E)break;if(R===4)for(R=d.return;R!==null;){var K=R.tag;if((K===3||K===4)&&R.stateNode.containerInfo===E)return;R=R.return}for(;B!==null;){if(R=pn(B),R===null)return;if(K=R.tag,K===5||K===6||K===26||K===27){d=w=R;continue e}B=B.parentNode}}d=d.return}Es(function(){var ue=w,_e=sr(c),Ce=[];e:{var fe=Du.get(t);if(fe!==void 0){var Ee=_n,Ge=t;switch(t){case"keypress":if(Tr(c)===0)break e;case"keydown":case"keyup":Ee=Gs;break;case"focusin":Ge="focus",Ee=js;break;case"focusout":Ge="blur",Ee=js;break;case"beforeblur":case"afterblur":Ee=js;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ee=zt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ee=zs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ee=S;break;case lr:case Si:case tn:Ee=dt;break;case Ws:Ee=U;break;case"scroll":case"scrollend":Ee=va;break;case"wheel":Ee=ye;break;case"copy":case"cut":case"paste":Ee=Hs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ee=It;break;case"toggle":case"beforetoggle":Ee=ut}var at=(r&4)!==0,hn=!at&&(t==="scroll"||t==="scrollend"),ne=at?fe!==null?fe+"Capture":null:fe;at=[];for(var te=ue,ce;te!==null;){var we=te;if(ce=we.stateNode,we=we.tag,we!==5&&we!==26&&we!==27||ce===null||ne===null||(we=it(te,ne),we!=null&&at.push(Bc(te,we,ce))),hn)break;te=te.return}0<at.length&&(fe=new Ee(fe,Ge,null,c,_e),Ce.push({event:fe,listeners:at}))}}if((r&7)===0){e:{if(fe=t==="mouseover"||t==="pointerover",Ee=t==="mouseout"||t==="pointerout",fe&&c!==Vs&&(Ge=c.relatedTarget||c.fromElement)&&(pn(Ge)||Ge[Ai]))break e;if((Ee||fe)&&(fe=_e.window===_e?_e:(fe=_e.ownerDocument)?fe.defaultView||fe.parentWindow:window,Ee?(Ge=c.relatedTarget||c.toElement,Ee=ue,Ge=Ge?pn(Ge):null,Ge!==null&&(hn=m(Ge),at=Ge.tag,Ge!==hn||at!==5&&at!==27&&at!==6)&&(Ge=null)):(Ee=null,Ge=ue),Ee!==Ge)){if(at=zt,we="onMouseLeave",ne="onMouseEnter",te="mouse",(t==="pointerout"||t==="pointerover")&&(at=It,we="onPointerLeave",ne="onPointerEnter",te="pointer"),hn=Ee==null?fe:Pi(Ee),ce=Ge==null?fe:Pi(Ge),fe=new at(we,te+"leave",Ee,c,_e),fe.target=hn,fe.relatedTarget=ce,we=null,pn(_e)===ue&&(at=new at(ne,te+"enter",Ge,c,_e),at.target=ce,at.relatedTarget=hn,we=at),hn=we,Ee&&Ge)t:{for(at=sw,ne=Ee,te=Ge,ce=0,we=ne;we;we=at(we))ce++;we=0;for(var Ze=te;Ze;Ze=at(Ze))we++;for(;0<ce-we;)ne=at(ne),ce--;for(;0<we-ce;)te=at(te),we--;for(;ce--;){if(ne===te||te!==null&&ne===te.alternate){at=ne;break t}ne=at(ne),te=at(te)}at=null}else at=null;Ee!==null&&t2(Ce,fe,Ee,at,!1),Ge!==null&&hn!==null&&t2(Ce,hn,Ge,at,!0)}}e:{if(fe=ue?Pi(ue):window,Ee=fe.nodeName&&fe.nodeName.toLowerCase(),Ee==="select"||Ee==="input"&&fe.type==="file")var Qt=Sr;else if(uc(fe))if(Ou)Qt=u;else{Qt=s;var Xe=i}else Ee=fe.nodeName,!Ee||Ee.toLowerCase()!=="input"||fe.type!=="checkbox"&&fe.type!=="radio"?ue&&$t(ue.elementType)&&(Qt=Sr):Qt=l;if(Qt&&(Qt=Qt(t,ue))){vr(Ce,Qt,c,_e);break e}Xe&&Xe(t,fe,ue),t==="focusout"&&ue&&fe.type==="number"&&ue.memoizedProps.value!=null&&z(fe,"number",fe.value)}switch(Xe=ue?Pi(ue):window,t){case"focusin":(uc(Xe)||Xe.contentEditable==="true")&&(Q=Xe,$=ue,ae=null);break;case"focusout":ae=$=Q=null;break;case"mousedown":ge=!0;break;case"contextmenu":case"mouseup":case"dragend":ge=!1,De(Ce,c,_e);break;case"selectionchange":if(j)break;case"keydown":case"keyup":De(Ce,c,_e)}var _t;if(Ut)e:{switch(t){case"compositionstart":var Pt="onCompositionStart";break e;case"compositionend":Pt="onCompositionEnd";break e;case"compositionupdate":Pt="onCompositionUpdate";break e}Pt=void 0}else Ra?qs(t,c)&&(Pt="onCompositionEnd"):t==="keydown"&&c.keyCode===229&&(Pt="onCompositionStart");Pt&&(Gr&&c.locale!=="ko"&&(Ra||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&Ra&&(_t=as()):(Ar=_e,wr="value"in Ar?Ar.value:Ar.textContent,Ra=!0)),Xe=xh(ue,Pt),0<Xe.length&&(Pt=new zr(Pt,t,null,c,_e),Ce.push({event:Pt,listeners:Xe}),_t?Pt.data=_t:(_t=qr(c),_t!==null&&(Pt.data=_t)))),(_t=Zi?xs(t,c):fl(t,c))&&(Pt=xh(ue,"onBeforeInput"),0<Pt.length&&(Xe=new zr("onBeforeInput","beforeinput",null,c,_e),Ce.push({event:Xe,listeners:Pt}),Xe.data=_t)),tw(Ce,t,ue,c,_e)}$p(Ce,r)})}function Bc(t,r,c){return{instance:t,listener:r,currentTarget:c}}function xh(t,r){for(var c=r+"Capture",d=[];t!==null;){var E=t,w=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||w===null||(E=it(t,c),E!=null&&d.unshift(Bc(t,E,w)),E=it(t,r),E!=null&&d.push(Bc(t,E,w))),t.tag===3)return d;t=t.return}return[]}function sw(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function t2(t,r,c,d,E){for(var w=r._reactName,R=[];c!==null&&c!==d;){var B=c,K=B.alternate,ue=B.stateNode;if(B=B.tag,K!==null&&K===d)break;B!==5&&B!==26&&B!==27||ue===null||(K=ue,E?(ue=it(c,w),ue!=null&&R.unshift(Bc(c,ue,K))):E||(ue=it(c,w),ue!=null&&R.push(Bc(c,ue,K)))),c=c.return}R.length!==0&&t.push({event:r,listeners:R})}var aw=/\r\n?/g,ow=/\u0000|\uFFFD/g;function n2(t){return(typeof t=="string"?t:""+t).replace(aw,`
`).replace(ow,"")}function i2(t,r){return r=n2(r),n2(t)===r}function un(t,r,c,d,E,w){switch(c){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||ki(t,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&ki(t,""+d);break;case"className":Ci(t,"class",d);break;case"tabIndex":Ci(t,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Ci(t,c,d);break;case"style":Ye(t,d,w);break;case"data":if(r!=="object"){Ci(t,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||c!=="href")){t.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){t.removeAttribute(c);break}d=ys(""+d),t.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){t.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(c==="formAction"?(r!=="input"&&un(t,r,"name",E.name,E,null),un(t,r,"formEncType",E.formEncType,E,null),un(t,r,"formMethod",E.formMethod,E,null),un(t,r,"formTarget",E.formTarget,E,null)):(un(t,r,"encType",E.encType,E,null),un(t,r,"method",E.method,E,null),un(t,r,"target",E.target,E,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){t.removeAttribute(c);break}d=ys(""+d),t.setAttribute(c,d);break;case"onClick":d!=null&&(t.onclick=Vi);break;case"onScroll":d!=null&&Nt("scroll",t);break;case"onScrollEnd":d!=null&&Nt("scrollend",t);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(o(61));if(c=d.__html,c!=null){if(E.children!=null)throw Error(o(60));t.innerHTML=c}}break;case"multiple":t.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":t.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){t.removeAttribute("xlink:href");break}c=ys(""+d),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?t.setAttribute(c,""+d):t.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?t.setAttribute(c,""):t.removeAttribute(c);break;case"capture":case"download":d===!0?t.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?t.setAttribute(c,d):t.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?t.setAttribute(c,d):t.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?t.removeAttribute(c):t.setAttribute(c,d);break;case"popover":Nt("beforetoggle",t),Nt("toggle",t),ms(t,"popover",d);break;case"xlinkActuate":Sn(t,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Sn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Sn(t,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Sn(t,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Sn(t,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Sn(t,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Sn(t,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Sn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Sn(t,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":ms(t,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Io.get(c)||c,ms(t,c,d))}}function y1(t,r,c,d,E,w){switch(c){case"style":Ye(t,d,w);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(o(61));if(c=d.__html,c!=null){if(E.children!=null)throw Error(o(60));t.innerHTML=c}}break;case"children":typeof d=="string"?ki(t,d):(typeof d=="number"||typeof d=="bigint")&&ki(t,""+d);break;case"onScroll":d!=null&&Nt("scroll",t);break;case"onScrollEnd":d!=null&&Nt("scrollend",t);break;case"onClick":d!=null&&(t.onclick=Vi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vo.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(E=c.endsWith("Capture"),r=c.slice(2,E?c.length-7:void 0),w=t[Ht]||null,w=w!=null?w[c]:null,typeof w=="function"&&t.removeEventListener(r,w,E),typeof d=="function")){typeof w!="function"&&w!==null&&(c in t?t[c]=null:t.hasAttribute(c)&&t.removeAttribute(c)),t.addEventListener(r,d,E);break e}c in t?t[c]=d:d===!0?t.setAttribute(c,""):ms(t,c,d)}}}function Ni(t,r,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nt("error",t),Nt("load",t);var d=!1,E=!1,w;for(w in c)if(c.hasOwnProperty(w)){var R=c[w];if(R!=null)switch(w){case"src":d=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,r));default:un(t,r,w,R,c,null)}}E&&un(t,r,"srcSet",c.srcSet,c,null),d&&un(t,r,"src",c.src,c,null);return;case"input":Nt("invalid",t);var B=w=R=E=null,K=null,ue=null;for(d in c)if(c.hasOwnProperty(d)){var _e=c[d];if(_e!=null)switch(d){case"name":E=_e;break;case"type":R=_e;break;case"checked":K=_e;break;case"defaultChecked":ue=_e;break;case"value":w=_e;break;case"defaultValue":B=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(o(137,r));break;default:un(t,r,d,_e,c,null)}}oe(t,w,B,K,ue,R,E,!1);return;case"select":Nt("invalid",t),d=R=w=null;for(E in c)if(c.hasOwnProperty(E)&&(B=c[E],B!=null))switch(E){case"value":w=B;break;case"defaultValue":R=B;break;case"multiple":d=B;default:un(t,r,E,B,c,null)}r=w,c=R,t.multiple=!!d,r!=null?He(t,!!d,r,!1):c!=null&&He(t,!!d,c,!0);return;case"textarea":Nt("invalid",t),w=E=d=null;for(R in c)if(c.hasOwnProperty(R)&&(B=c[R],B!=null))switch(R){case"value":d=B;break;case"defaultValue":E=B;break;case"children":w=B;break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(o(91));break;default:un(t,r,R,B,c,null)}Xn(t,d,E,w);return;case"option":for(K in c)if(c.hasOwnProperty(K)&&(d=c[K],d!=null))switch(K){case"selected":t.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:un(t,r,K,d,c,null)}return;case"dialog":Nt("beforetoggle",t),Nt("toggle",t),Nt("cancel",t),Nt("close",t);break;case"iframe":case"object":Nt("load",t);break;case"video":case"audio":for(d=0;d<Pc.length;d++)Nt(Pc[d],t);break;case"image":Nt("error",t),Nt("load",t);break;case"details":Nt("toggle",t);break;case"embed":case"source":case"link":Nt("error",t),Nt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ue in c)if(c.hasOwnProperty(ue)&&(d=c[ue],d!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,r));default:un(t,r,ue,d,c,null)}return;default:if($t(r)){for(_e in c)c.hasOwnProperty(_e)&&(d=c[_e],d!==void 0&&y1(t,r,_e,d,c,void 0));return}}for(B in c)c.hasOwnProperty(B)&&(d=c[B],d!=null&&un(t,r,B,d,c,null))}function lw(t,r,c,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,w=null,R=null,B=null,K=null,ue=null,_e=null;for(Ee in c){var Ce=c[Ee];if(c.hasOwnProperty(Ee)&&Ce!=null)switch(Ee){case"checked":break;case"value":break;case"defaultValue":K=Ce;default:d.hasOwnProperty(Ee)||un(t,r,Ee,null,d,Ce)}}for(var fe in d){var Ee=d[fe];if(Ce=c[fe],d.hasOwnProperty(fe)&&(Ee!=null||Ce!=null))switch(fe){case"type":w=Ee;break;case"name":E=Ee;break;case"checked":ue=Ee;break;case"defaultChecked":_e=Ee;break;case"value":R=Ee;break;case"defaultValue":B=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(o(137,r));break;default:Ee!==Ce&&un(t,r,fe,Ee,d,Ce)}}Ln(t,R,B,K,ue,_e,w,E);return;case"select":Ee=R=B=fe=null;for(w in c)if(K=c[w],c.hasOwnProperty(w)&&K!=null)switch(w){case"value":break;case"multiple":Ee=K;default:d.hasOwnProperty(w)||un(t,r,w,null,d,K)}for(E in d)if(w=d[E],K=c[E],d.hasOwnProperty(E)&&(w!=null||K!=null))switch(E){case"value":fe=w;break;case"defaultValue":B=w;break;case"multiple":R=w;default:w!==K&&un(t,r,E,w,d,K)}r=B,c=R,d=Ee,fe!=null?He(t,!!c,fe,!1):!!d!=!!c&&(r!=null?He(t,!!c,r,!0):He(t,!!c,c?[]:"",!1));return;case"textarea":Ee=fe=null;for(B in c)if(E=c[B],c.hasOwnProperty(B)&&E!=null&&!d.hasOwnProperty(B))switch(B){case"value":break;case"children":break;default:un(t,r,B,null,d,E)}for(R in d)if(E=d[R],w=c[R],d.hasOwnProperty(R)&&(E!=null||w!=null))switch(R){case"value":fe=E;break;case"defaultValue":Ee=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(o(91));break;default:E!==w&&un(t,r,R,E,d,w)}Pn(t,fe,Ee);return;case"option":for(var Ge in c)if(fe=c[Ge],c.hasOwnProperty(Ge)&&fe!=null&&!d.hasOwnProperty(Ge))switch(Ge){case"selected":t.selected=!1;break;default:un(t,r,Ge,null,d,fe)}for(K in d)if(fe=d[K],Ee=c[K],d.hasOwnProperty(K)&&fe!==Ee&&(fe!=null||Ee!=null))switch(K){case"selected":t.selected=fe&&typeof fe!="function"&&typeof fe!="symbol";break;default:un(t,r,K,fe,d,Ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var at in c)fe=c[at],c.hasOwnProperty(at)&&fe!=null&&!d.hasOwnProperty(at)&&un(t,r,at,null,d,fe);for(ue in d)if(fe=d[ue],Ee=c[ue],d.hasOwnProperty(ue)&&fe!==Ee&&(fe!=null||Ee!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(o(137,r));break;default:un(t,r,ue,fe,d,Ee)}return;default:if($t(r)){for(var hn in c)fe=c[hn],c.hasOwnProperty(hn)&&fe!==void 0&&!d.hasOwnProperty(hn)&&y1(t,r,hn,void 0,d,fe);for(_e in d)fe=d[_e],Ee=c[_e],!d.hasOwnProperty(_e)||fe===Ee||fe===void 0&&Ee===void 0||y1(t,r,_e,fe,d,Ee);return}}for(var ne in c)fe=c[ne],c.hasOwnProperty(ne)&&fe!=null&&!d.hasOwnProperty(ne)&&un(t,r,ne,null,d,fe);for(Ce in d)fe=d[Ce],Ee=c[Ce],!d.hasOwnProperty(Ce)||fe===Ee||fe==null&&Ee==null||un(t,r,Ce,fe,d,Ee)}function r2(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function cw(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var E=c[d],w=E.transferSize,R=E.initiatorType,B=E.duration;if(w&&B&&r2(R)){for(R=0,B=E.responseEnd,d+=1;d<c.length;d++){var K=c[d],ue=K.startTime;if(ue>B)break;var _e=K.transferSize,Ce=K.initiatorType;_e&&r2(Ce)&&(K=K.responseEnd,R+=_e*(K<B?1:(B-ue)/(K-ue)))}if(--d,r+=8*(w+R)/(E.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var E1=null,_1=null;function Ah(t){return t.nodeType===9?t:t.ownerDocument}function s2(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function a2(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function x1(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var A1=null;function uw(){var t=window.event;return t&&t.type==="popstate"?t===A1?!1:(A1=t,!0):(A1=null,!1)}var o2=typeof setTimeout=="function"?setTimeout:void 0,hw=typeof clearTimeout=="function"?clearTimeout:void 0,l2=typeof Promise=="function"?Promise:void 0,fw=typeof queueMicrotask=="function"?queueMicrotask:typeof l2<"u"?function(t){return l2.resolve(null).then(t).catch(dw)}:o2;function dw(t){setTimeout(function(){throw t})}function Ya(t){return t==="head"}function c2(t,r){var c=r,d=0;do{var E=c.nextSibling;if(t.removeChild(c),E&&E.nodeType===8)if(c=E.data,c==="/$"||c==="/&"){if(d===0){t.removeChild(E),Vl(r);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")kc(t.ownerDocument.documentElement);else if(c==="head"){c=t.ownerDocument.head,kc(c);for(var w=c.firstChild;w;){var R=w.nextSibling,B=w.nodeName;w[Vr]||B==="SCRIPT"||B==="STYLE"||B==="LINK"&&w.rel.toLowerCase()==="stylesheet"||c.removeChild(w),w=R}}else c==="body"&&kc(t.ownerDocument.body);c=E}while(c);Vl(r)}function u2(t,r){var c=t;t=0;do{var d=c.nextSibling;if(c.nodeType===1?r?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(r?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(t===0)break;t--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||t++;c=d}while(c)}function w1(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var c=r;switch(r=r.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":w1(c),wi(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}t.removeChild(c)}}function gw(t,r,c,d){for(;t.nodeType===1;){var E=c;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(d){if(!t[Vr])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(w=t.getAttribute("rel"),w==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(w!==E.rel||t.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||t.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||t.getAttribute("title")!==(E.title==null?null:E.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(w=t.getAttribute("src"),(w!==(E.src==null?null:E.src)||t.getAttribute("type")!==(E.type==null?null:E.type)||t.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&w&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var w=E.name==null?null:""+E.name;if(E.type==="hidden"&&t.getAttribute("name")===w)return t}else return t;if(t=Jr(t.nextSibling),t===null)break}return null}function mw(t,r,c){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!c||(t=Jr(t.nextSibling),t===null))return null;return t}function h2(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Jr(t.nextSibling),t===null))return null;return t}function T1(t){return t.data==="$?"||t.data==="$~"}function C1(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function pw(t,r){var c=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||c.readyState!=="loading")r();else{var d=function(){r(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),t._reactRetry=d}}function Jr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var v1=null;function f2(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var c=t.data;if(c==="/$"||c==="/&"){if(r===0)return Jr(t.nextSibling);r--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||r++}t=t.nextSibling}return null}function d2(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var c=t.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(r===0)return t;r--}else c!=="/$"&&c!=="/&"||r++}t=t.previousSibling}return null}function g2(t,r,c){switch(r=Ah(c),t){case"html":if(t=r.documentElement,!t)throw Error(o(452));return t;case"head":if(t=r.head,!t)throw Error(o(453));return t;case"body":if(t=r.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function kc(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);wi(t)}var $r=new Map,m2=new Set;function wh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ca=re.d;re.d={f:yw,r:Ew,D:_w,C:xw,L:Aw,m:ww,X:Cw,S:Tw,M:vw};function yw(){var t=ca.f(),r=dh();return t||r}function Ew(t){var r=St(t);r!==null&&r.tag===5&&r.type==="form"?Dm(r):ca.r(t)}var Pl=typeof document>"u"?null:document;function p2(t,r,c){var d=Pl;if(d&&typeof r=="string"&&r){var E=Et(r);E='link[rel="'+t+'"][href="'+E+'"]',typeof c=="string"&&(E+='[crossorigin="'+c+'"]'),m2.has(E)||(m2.add(E),t={rel:t,crossOrigin:c,href:r},d.querySelector(E)===null&&(r=d.createElement("link"),Ni(r,"link",t),vn(r),d.head.appendChild(r)))}}function _w(t){ca.D(t),p2("dns-prefetch",t,null)}function xw(t,r){ca.C(t,r),p2("preconnect",t,r)}function Aw(t,r,c){ca.L(t,r,c);var d=Pl;if(d&&t&&r){var E='link[rel="preload"][as="'+Et(r)+'"]';r==="image"&&c&&c.imageSrcSet?(E+='[imagesrcset="'+Et(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(E+='[imagesizes="'+Et(c.imageSizes)+'"]')):E+='[href="'+Et(t)+'"]';var w=E;switch(r){case"style":w=Bl(t);break;case"script":w=kl(t)}$r.has(w)||(t=O({rel:"preload",href:r==="image"&&c&&c.imageSrcSet?void 0:t,as:r},c),$r.set(w,t),d.querySelector(E)!==null||r==="style"&&d.querySelector(Vc(w))||r==="script"&&d.querySelector(Uc(w))||(r=d.createElement("link"),Ni(r,"link",t),vn(r),d.head.appendChild(r)))}}function ww(t,r){ca.m(t,r);var c=Pl;if(c&&t){var d=r&&typeof r.as=="string"?r.as:"script",E='link[rel="modulepreload"][as="'+Et(d)+'"][href="'+Et(t)+'"]',w=E;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=kl(t)}if(!$r.has(w)&&(t=O({rel:"modulepreload",href:t},r),$r.set(w,t),c.querySelector(E)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Uc(w)))return}d=c.createElement("link"),Ni(d,"link",t),vn(d),c.head.appendChild(d)}}}function Tw(t,r,c){ca.S(t,r,c);var d=Pl;if(d&&t){var E=ai(d).hoistableStyles,w=Bl(t);r=r||"default";var R=E.get(w);if(!R){var B={loading:0,preload:null};if(R=d.querySelector(Vc(w)))B.loading=5;else{t=O({rel:"stylesheet",href:t,"data-precedence":r},c),(c=$r.get(w))&&S1(t,c);var K=R=d.createElement("link");vn(K),Ni(K,"link",t),K._p=new Promise(function(ue,_e){K.onload=ue,K.onerror=_e}),K.addEventListener("load",function(){B.loading|=1}),K.addEventListener("error",function(){B.loading|=2}),B.loading|=4,Th(R,r,d)}R={type:"stylesheet",instance:R,count:1,state:B},E.set(w,R)}}}function Cw(t,r){ca.X(t,r);var c=Pl;if(c&&t){var d=ai(c).hoistableScripts,E=kl(t),w=d.get(E);w||(w=c.querySelector(Uc(E)),w||(t=O({src:t,async:!0},r),(r=$r.get(E))&&b1(t,r),w=c.createElement("script"),vn(w),Ni(w,"link",t),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(E,w))}}function vw(t,r){ca.M(t,r);var c=Pl;if(c&&t){var d=ai(c).hoistableScripts,E=kl(t),w=d.get(E);w||(w=c.querySelector(Uc(E)),w||(t=O({src:t,async:!0,type:"module"},r),(r=$r.get(E))&&b1(t,r),w=c.createElement("script"),vn(w),Ni(w,"link",t),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(E,w))}}function y2(t,r,c,d){var E=(E=Ae.current)?wh(E):null;if(!E)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(r=Bl(c.href),c=ai(E).hoistableStyles,d=c.get(r),d||(d={type:"style",instance:null,count:0,state:null},c.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){t=Bl(c.href);var w=ai(E).hoistableStyles,R=w.get(t);if(R||(E=E.ownerDocument||E,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(t,R),(w=E.querySelector(Vc(t)))&&!w._p&&(R.instance=w,R.state.loading=5),$r.has(t)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},$r.set(t,c),w||Sw(E,t,c,R.state))),r&&d===null)throw Error(o(528,""));return R}if(r&&d!==null)throw Error(o(529,""));return null;case"script":return r=c.async,c=c.src,typeof c=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=kl(c),c=ai(E).hoistableScripts,d=c.get(r),d||(d={type:"script",instance:null,count:0,state:null},c.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Bl(t){return'href="'+Et(t)+'"'}function Vc(t){return'link[rel="stylesheet"]['+t+"]"}function E2(t){return O({},t,{"data-precedence":t.precedence,precedence:null})}function Sw(t,r,c,d){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=t.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),Ni(r,"link",c),vn(r),t.head.appendChild(r))}function kl(t){return'[src="'+Et(t)+'"]'}function Uc(t){return"script[async]"+t}function _2(t,r,c){if(r.count++,r.instance===null)switch(r.type){case"style":var d=t.querySelector('style[data-href~="'+Et(c.href)+'"]');if(d)return r.instance=d,vn(d),d;var E=O({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(t.ownerDocument||t).createElement("style"),vn(d),Ni(d,"style",E),Th(d,c.precedence,t),r.instance=d;case"stylesheet":E=Bl(c.href);var w=t.querySelector(Vc(E));if(w)return r.state.loading|=4,r.instance=w,vn(w),w;d=E2(c),(E=$r.get(E))&&S1(d,E),w=(t.ownerDocument||t).createElement("link"),vn(w);var R=w;return R._p=new Promise(function(B,K){R.onload=B,R.onerror=K}),Ni(w,"link",d),r.state.loading|=4,Th(w,c.precedence,t),r.instance=w;case"script":return w=kl(c.src),(E=t.querySelector(Uc(w)))?(r.instance=E,vn(E),E):(d=c,(E=$r.get(w))&&(d=O({},c),b1(d,E)),t=t.ownerDocument||t,E=t.createElement("script"),vn(E),Ni(E,"link",d),t.head.appendChild(E),r.instance=E);case"void":return null;default:throw Error(o(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,Th(d,c.precedence,t));return r.instance}function Th(t,r,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=d.length?d[d.length-1]:null,w=E,R=0;R<d.length;R++){var B=d[R];if(B.dataset.precedence===r)w=B;else if(w!==E)break}w?w.parentNode.insertBefore(t,w.nextSibling):(r=c.nodeType===9?c.head:c,r.insertBefore(t,r.firstChild))}function S1(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function b1(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Ch=null;function x2(t,r,c){if(Ch===null){var d=new Map,E=Ch=new Map;E.set(c,d)}else E=Ch,d=E.get(c),d||(d=new Map,E.set(c,d));if(d.has(t))return d;for(d.set(t,null),c=c.getElementsByTagName(t),E=0;E<c.length;E++){var w=c[E];if(!(w[Vr]||w[Cn]||t==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var R=w.getAttribute(r)||"";R=t+R;var B=d.get(R);B?B.push(w):d.set(R,[w])}}return d}function A2(t,r,c){t=t.ownerDocument||t,t.head.insertBefore(c,r==="title"?t.querySelector("head > title"):null)}function bw(t,r,c){if(c===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function w2(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Iw(t,r,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var E=Bl(d.href),w=r.querySelector(Vc(E));if(w){r=w._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=vh.bind(t),r.then(t,t)),c.state.loading|=4,c.instance=w,vn(w);return}w=r.ownerDocument||r,d=E2(d),(E=$r.get(E))&&S1(d,E),w=w.createElement("link"),vn(w);var R=w;R._p=new Promise(function(B,K){R.onload=B,R.onerror=K}),Ni(w,"link",d),c.instance=w}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(c,r),(r=c.state.preload)&&(c.state.loading&3)===0&&(t.count++,c=vh.bind(t),r.addEventListener("load",c),r.addEventListener("error",c))}}var I1=0;function Rw(t,r){return t.stylesheets&&t.count===0&&bh(t,t.stylesheets),0<t.count||0<t.imgCount?function(c){var d=setTimeout(function(){if(t.stylesheets&&bh(t,t.stylesheets),t.unsuspend){var w=t.unsuspend;t.unsuspend=null,w()}},6e4+r);0<t.imgBytes&&I1===0&&(I1=62500*cw());var E=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&bh(t,t.stylesheets),t.unsuspend)){var w=t.unsuspend;t.unsuspend=null,w()}},(t.imgBytes>I1?50:800)+r);return t.unsuspend=c,function(){t.unsuspend=null,clearTimeout(d),clearTimeout(E)}}:null}function vh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)bh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Sh=null;function bh(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Sh=new Map,r.forEach(Nw,t),Sh=null,vh.call(t))}function Nw(t,r){if(!(r.state.loading&4)){var c=Sh.get(t);if(c)var d=c.get(null);else{c=new Map,Sh.set(t,c);for(var E=t.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<E.length;w++){var R=E[w];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(c.set(R.dataset.precedence,R),d=R)}d&&c.set(null,d)}E=r.instance,R=E.getAttribute("data-precedence"),w=c.get(R)||d,w===d&&c.set(null,E),c.set(R,E),this.count++,d=vh.bind(this),E.addEventListener("load",d),E.addEventListener("error",d),w?w.parentNode.insertBefore(E,w.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(E,t.firstChild)),r.state.loading|=4}}var Fc={$$typeof:me,Provider:null,Consumer:null,_currentValue:ke,_currentValue2:ke,_threadCount:0};function Ow(t,r,c,d,E,w,R,B,K){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ei(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ei(0),this.hiddenUpdates=Ei(null),this.identifierPrefix=d,this.onUncaughtError=E,this.onCaughtError=w,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function T2(t,r,c,d,E,w,R,B,K,ue,_e,Ce){return t=new Ow(t,r,c,R,K,ue,_e,Ce,B),r=1,w===!0&&(r|=24),w=br(3,null,null,r),t.current=w,w.stateNode=t,r=od(),r.refCount++,t.pooledCache=r,r.refCount++,w.memoizedState={element:d,isDehydrated:c,cache:r},hd(w),t}function C2(t){return t?(t=gl,t):gl}function v2(t,r,c,d,E,w){E=C2(E),d.context===null?d.context=E:d.pendingContext=E,d=Ba(r),d.payload={element:c},w=w===void 0?null:w,w!==null&&(d.callback=w),c=ka(t,d,r),c!==null&&(dr(c,t,r),Ec(c,t,r))}function S2(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var c=t.retryLane;t.retryLane=c!==0&&c<r?c:r}}function R1(t,r){S2(t,r),(t=t.alternate)&&S2(t,r)}function b2(t){if(t.tag===13||t.tag===31){var r=Lo(t,67108864);r!==null&&dr(r,t,67108864),R1(t,67108864)}}function I2(t){if(t.tag===13||t.tag===31){var r=Dr();r=Vn(r);var c=Lo(t,r);c!==null&&dr(c,t,r),R1(t,r)}}var Ih=!0;function Dw(t,r,c,d){var E=J.T;J.T=null;var w=re.p;try{re.p=2,N1(t,r,c,d)}finally{re.p=w,J.T=E}}function Mw(t,r,c,d){var E=J.T;J.T=null;var w=re.p;try{re.p=8,N1(t,r,c,d)}finally{re.p=w,J.T=E}}function N1(t,r,c,d){if(Ih){var E=O1(d);if(E===null)p1(t,r,d,Rh,c),N2(t,d);else if(Pw(E,t,r,c,d))d.stopPropagation();else if(N2(t,d),r&4&&-1<Lw.indexOf(t)){for(;E!==null;){var w=St(E);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var R=Er(w.pendingLanes);if(R!==0){var B=w;for(B.pendingLanes|=2,B.entangledLanes|=2;R;){var K=1<<31-ot(R);B.entanglements[1]|=K,R&=~K}Cs(w),(Jt&6)===0&&(hh=En()+500,Lc(0))}}break;case 31:case 13:B=Lo(w,2),B!==null&&dr(B,w,2),dh(),R1(w,2)}if(w=O1(d),w===null&&p1(t,r,d,Rh,c),w===E)break;E=w}E!==null&&d.stopPropagation()}else p1(t,r,d,null,c)}}function O1(t){return t=sr(t),D1(t)}var Rh=null;function D1(t){if(Rh=null,t=pn(t),t!==null){var r=m(t);if(r===null)t=null;else{var c=r.tag;if(c===13){if(t=_(r),t!==null)return t;t=null}else if(c===31){if(t=v(r),t!==null)return t;t=null}else if(c===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Rh=t,null}function R2(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rs()){case pi:return 2;case Aa:return 8;case yi:case si:return 32;case To:return 268435456;default:return 32}default:return 32}}var M1=!1,Wa=null,Ka=null,Qa=null,zc=new Map,jc=new Map,Za=[],Lw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function N2(t,r){switch(t){case"focusin":case"focusout":Wa=null;break;case"dragenter":case"dragleave":Ka=null;break;case"mouseover":case"mouseout":Qa=null;break;case"pointerover":case"pointerout":zc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":jc.delete(r.pointerId)}}function Hc(t,r,c,d,E,w){return t===null||t.nativeEvent!==w?(t={blockedOn:r,domEventName:c,eventSystemFlags:d,nativeEvent:w,targetContainers:[E]},r!==null&&(r=St(r),r!==null&&b2(r)),t):(t.eventSystemFlags|=d,r=t.targetContainers,E!==null&&r.indexOf(E)===-1&&r.push(E),t)}function Pw(t,r,c,d,E){switch(r){case"focusin":return Wa=Hc(Wa,t,r,c,d,E),!0;case"dragenter":return Ka=Hc(Ka,t,r,c,d,E),!0;case"mouseover":return Qa=Hc(Qa,t,r,c,d,E),!0;case"pointerover":var w=E.pointerId;return zc.set(w,Hc(zc.get(w)||null,t,r,c,d,E)),!0;case"gotpointercapture":return w=E.pointerId,jc.set(w,Hc(jc.get(w)||null,t,r,c,d,E)),!0}return!1}function O2(t){var r=pn(t.target);if(r!==null){var c=m(r);if(c!==null){if(r=c.tag,r===13){if(r=_(c),r!==null){t.blockedOn=r,Ve(t.priority,function(){I2(c)});return}}else if(r===31){if(r=v(c),r!==null){t.blockedOn=r,Ve(t.priority,function(){I2(c)});return}}else if(r===3&&c.stateNode.current.memoizedState.isDehydrated){t.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nh(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var c=O1(t.nativeEvent);if(c===null){c=t.nativeEvent;var d=new c.constructor(c.type,c);Vs=d,c.target.dispatchEvent(d),Vs=null}else return r=St(c),r!==null&&b2(r),t.blockedOn=c,!1;r.shift()}return!0}function D2(t,r,c){Nh(t)&&c.delete(r)}function Bw(){M1=!1,Wa!==null&&Nh(Wa)&&(Wa=null),Ka!==null&&Nh(Ka)&&(Ka=null),Qa!==null&&Nh(Qa)&&(Qa=null),zc.forEach(D2),jc.forEach(D2)}function Oh(t,r){t.blockedOn===r&&(t.blockedOn=null,M1||(M1=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Bw)))}var Dh=null;function M2(t){Dh!==t&&(Dh=t,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Dh===t&&(Dh=null);for(var r=0;r<t.length;r+=3){var c=t[r],d=t[r+1],E=t[r+2];if(typeof d!="function"){if(D1(d||c)===null)continue;break}var w=St(c);w!==null&&(t.splice(r,3),r-=3,Od(w,{pending:!0,data:E,method:c.method,action:d},d,E))}}))}function Vl(t){function r(K){return Oh(K,t)}Wa!==null&&Oh(Wa,t),Ka!==null&&Oh(Ka,t),Qa!==null&&Oh(Qa,t),zc.forEach(r),jc.forEach(r);for(var c=0;c<Za.length;c++){var d=Za[c];d.blockedOn===t&&(d.blockedOn=null)}for(;0<Za.length&&(c=Za[0],c.blockedOn===null);)O2(c),c.blockedOn===null&&Za.shift();if(c=(t.ownerDocument||t).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var E=c[d],w=c[d+1],R=E[Ht]||null;if(typeof w=="function")R||M2(c);else if(R){var B=null;if(w&&w.hasAttribute("formAction")){if(E=w,R=w[Ht]||null)B=R.formAction;else if(D1(E)!==null)continue}else B=R.action;typeof B=="function"?c[d+1]=B:(c.splice(d,3),d-=3),M2(c)}}}function L2(){function t(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(R){return E=R})},focusReset:"manual",scroll:"manual"})}function r(){E!==null&&(E(),E=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,E=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),E!==null&&(E(),E=null)}}}function L1(t){this._internalRoot=t}Mh.prototype.render=L1.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(o(409));var c=r.current,d=Dr();v2(c,d,t,r,null,null)},Mh.prototype.unmount=L1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;v2(t.current,2,null,t,null,null),dh(),r[Ai]=null}};function Mh(t){this._internalRoot=t}Mh.prototype.unstable_scheduleHydration=function(t){if(t){var r=xi();t={blockedOn:null,target:t,priority:r};for(var c=0;c<Za.length&&r!==0&&r<Za[c].priority;c++);Za.splice(c,0,t),c===0&&O2(t)}};var P2=e.version;if(P2!=="19.2.0")throw Error(o(527,P2,"19.2.0"));re.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=A(r),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var kw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lh.isDisabled&&Lh.supportsFiber)try{Yt=Lh.inject(kw),Re=Lh}catch{}}return qc.createRoot=function(t,r){if(!h(t))throw Error(o(299));var c=!1,d="",E=jm,w=Hm,R=Gm;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(E=r.onUncaughtError),r.onCaughtError!==void 0&&(w=r.onCaughtError),r.onRecoverableError!==void 0&&(R=r.onRecoverableError)),r=T2(t,1,!1,null,null,c,d,null,E,w,R,L2),t[Ai]=r.current,m1(t),new L1(r)},qc.hydrateRoot=function(t,r,c){if(!h(t))throw Error(o(299));var d=!1,E="",w=jm,R=Hm,B=Gm,K=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(E=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(R=c.onCaughtError),c.onRecoverableError!==void 0&&(B=c.onRecoverableError),c.formState!==void 0&&(K=c.formState)),r=T2(t,1,!0,r,c??null,d,E,K,w,R,B,L2),r.context=C2(null),c=r.current,d=Dr(),d=Vn(d),E=Ba(d),E.callback=null,ka(c,E,d),c=d,r.current.lanes=c,kr(r,c),Cs(r),t[Ai]=r.current,m1(t),new Mh(r)},qc.version="19.2.0",qc}var q2;function Ww(){if(q2)return k1.exports;q2=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),k1.exports=Yw(),k1.exports}var Kw=Ww();const Qw=L0(Kw),B0=()=>q.jsxs("div",{style:{padding:"1.5rem 0",display:"flex",justifyContent:"center",alignItems:"center"},children:[q.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",border:"3px solid #e5e7eb",borderTopColor:"#2563eb",animation:"spin 1s linear infinite"}}),q.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `})]}),Zw=()=>{};var X2={};const BE=function(a){const e=[];let n=0;for(let o=0;o<a.length;o++){let h=a.charCodeAt(o);h<128?e[n++]=h:h<2048?(e[n++]=h>>6|192,e[n++]=h&63|128):(h&64512)===55296&&o+1<a.length&&(a.charCodeAt(o+1)&64512)===56320?(h=65536+((h&1023)<<10)+(a.charCodeAt(++o)&1023),e[n++]=h>>18|240,e[n++]=h>>12&63|128,e[n++]=h>>6&63|128,e[n++]=h&63|128):(e[n++]=h>>12|224,e[n++]=h>>6&63|128,e[n++]=h&63|128)}return e},Jw=function(a){const e=[];let n=0,o=0;for(;n<a.length;){const h=a[n++];if(h<128)e[o++]=String.fromCharCode(h);else if(h>191&&h<224){const m=a[n++];e[o++]=String.fromCharCode((h&31)<<6|m&63)}else if(h>239&&h<365){const m=a[n++],_=a[n++],v=a[n++],T=((h&7)<<18|(m&63)<<12|(_&63)<<6|v&63)-65536;e[o++]=String.fromCharCode(55296+(T>>10)),e[o++]=String.fromCharCode(56320+(T&1023))}else{const m=a[n++],_=a[n++];e[o++]=String.fromCharCode((h&15)<<12|(m&63)<<6|_&63)}}return e.join("")},kE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,e){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let h=0;h<a.length;h+=3){const m=a[h],_=h+1<a.length,v=_?a[h+1]:0,T=h+2<a.length,A=T?a[h+2]:0,b=m>>2,O=(m&3)<<4|v>>4;let V=(v&15)<<2|A>>6,G=A&63;T||(G=64,_||(V=64)),o.push(n[b],n[O],n[V],n[G])}return o.join("")},encodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(a):this.encodeByteArray(BE(a),e)},decodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(a):Jw(this.decodeStringToByteArray(a,e))},decodeStringToByteArray(a,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let h=0;h<a.length;){const m=n[a.charAt(h++)],v=h<a.length?n[a.charAt(h)]:0;++h;const A=h<a.length?n[a.charAt(h)]:64;++h;const O=h<a.length?n[a.charAt(h)]:64;if(++h,m==null||v==null||A==null||O==null)throw new $w;const V=m<<2|v>>4;if(o.push(V),A!==64){const G=v<<4&240|A>>2;if(o.push(G),O!==64){const ee=A<<6&192|O;o.push(ee)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class $w extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eT=function(a){const e=BE(a);return kE.encodeByteArray(e,!0)},$h=function(a){return eT(a).replace(/\./g,"")},VE=function(a){try{return kE.decodeString(a,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function tT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const nT=()=>tT().__FIREBASE_DEFAULTS__,iT=()=>{if(typeof process>"u"||typeof X2>"u")return;const a=X2.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},rT=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=a&&VE(a[1]);return e&&JSON.parse(e)},bf=()=>{try{return Zw()||nT()||iT()||rT()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},UE=a=>bf()?.emulatorHosts?.[a],sT=a=>{const e=UE(a);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),o]:[e.substring(0,n),o]},FE=()=>bf()?.config,zE=a=>bf()?.[`_${a}`];class aT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,o)=>{n?this.reject(n):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,o))}}}function ic(a){try{return(a.startsWith("http://")||a.startsWith("https://")?new URL(a).hostname:a).endsWith(".cloudworkstations.dev")}catch{return!1}}async function jE(a){return(await fetch(a,{credentials:"include"})).ok}function oT(a,e){if(a.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},o=e||"demo-project",h=a.iat||0,m=a.sub||a.user_id;if(!m)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const _={iss:`https://securetoken.google.com/${o}`,aud:o,iat:h,exp:h+3600,auth_time:h,sub:m,user_id:m,firebase:{sign_in_provider:"custom",identities:{}},...a};return[$h(JSON.stringify(n)),$h(JSON.stringify(_)),""].join(".")}const $c={};function lT(){const a={prod:[],emulator:[]};for(const e of Object.keys($c))$c[e]?a.emulator.push(e):a.prod.push(e);return a}function cT(a){let e=document.getElementById(a),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",a),n=!0),{created:n,element:e}}let Y2=!1;function HE(a,e){if(typeof window>"u"||typeof document>"u"||!ic(window.location.host)||$c[a]===e||$c[a]||Y2)return;$c[a]=e;function n(V){return`__firebase__banner__${V}`}const o="__firebase__banner",m=lT().prod.length>0;function _(){const V=document.getElementById(o);V&&V.remove()}function v(V){V.style.display="flex",V.style.background="#7faaf0",V.style.position="fixed",V.style.bottom="5px",V.style.left="5px",V.style.padding=".5em",V.style.borderRadius="5px",V.style.alignItems="center"}function T(V,G){V.setAttribute("width","24"),V.setAttribute("id",G),V.setAttribute("height","24"),V.setAttribute("viewBox","0 0 24 24"),V.setAttribute("fill","none"),V.style.marginLeft="-6px"}function A(){const V=document.createElement("span");return V.style.cursor="pointer",V.style.marginLeft="16px",V.style.fontSize="24px",V.innerHTML=" &times;",V.onclick=()=>{Y2=!0,_()},V}function b(V,G){V.setAttribute("id",G),V.innerText="Learn more",V.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",V.setAttribute("target","__blank"),V.style.paddingLeft="5px",V.style.textDecoration="underline"}function O(){const V=cT(o),G=n("text"),ee=document.getElementById(G)||document.createElement("span"),ie=n("learnmore"),he=document.getElementById(ie)||document.createElement("a"),Le=n("preprendIcon"),be=document.getElementById(Le)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(V.created){const me=V.element;v(me),b(he,ie);const Be=A();T(be,Le),me.append(be,ee,he,Be),document.body.appendChild(me)}m?(ee.innerText="Preview backend disconnected.",be.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(be.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,ee.innerText="Preview backend running in this workspace."),ee.setAttribute("id",G)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",O):O()}function Xi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xi())}function hT(){const a=bf()?.forceEnvironment;if(a==="node")return!0;if(a==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dT(){const a=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof a=="object"&&a.id!==void 0}function gT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mT(){const a=Xi();return a.indexOf("MSIE ")>=0||a.indexOf("Trident/")>=0}function pT(){return!hT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yT(){try{return typeof indexedDB=="object"}catch{return!1}}function ET(){return new Promise((a,e)=>{try{let n=!0;const o="validate-browser-context-for-indexeddb-analytics-module",h=self.indexedDB.open(o);h.onsuccess=()=>{h.result.close(),n||self.indexedDB.deleteDatabase(o),a(!0)},h.onupgradeneeded=()=>{n=!1},h.onerror=()=>{e(h.error?.message||"")}}catch(n){e(n)}})}const _T="FirebaseError";class _a extends Error{constructor(e,n,o){super(n),this.code=e,this.customData=o,this.name=_T,Object.setPrototypeOf(this,_a.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gu.prototype.create)}}class gu{constructor(e,n,o){this.service=e,this.serviceName=n,this.errors=o}create(e,...n){const o=n[0]||{},h=`${this.service}/${e}`,m=this.errors[e],_=m?xT(m,o):"Error",v=`${this.serviceName}: ${_} (${h}).`;return new _a(h,v,o)}}function xT(a,e){return a.replace(AT,(n,o)=>{const h=e[o];return h!=null?String(h):`<${o}?>`})}const AT=/\{\$([^}]+)}/g;function wT(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}function Zo(a,e){if(a===e)return!0;const n=Object.keys(a),o=Object.keys(e);for(const h of n){if(!o.includes(h))return!1;const m=a[h],_=e[h];if(W2(m)&&W2(_)){if(!Zo(m,_))return!1}else if(m!==_)return!1}for(const h of o)if(!n.includes(h))return!1;return!0}function W2(a){return a!==null&&typeof a=="object"}function mu(a){const e=[];for(const[n,o]of Object.entries(a))Array.isArray(o)?o.forEach(h=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(h))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(o));return e.length?"&"+e.join("&"):""}function Xc(a){const e={};return a.replace(/^\?/,"").split("&").forEach(o=>{if(o){const[h,m]=o.split("=");e[decodeURIComponent(h)]=decodeURIComponent(m)}}),e}function Yc(a){const e=a.indexOf("?");if(!e)return"";const n=a.indexOf("#",e);return a.substring(e,n>0?n:void 0)}function TT(a,e){const n=new CT(a,e);return n.subscribe.bind(n)}class CT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(o=>{this.error(o)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,o){let h;if(e===void 0&&n===void 0&&o===void 0)throw new Error("Missing Observer.");vT(e,["next","error","complete"])?h=e:h={next:e,error:n,complete:o},h.next===void 0&&(h.next=z1),h.error===void 0&&(h.error=z1),h.complete===void 0&&(h.complete=z1);const m=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?h.error(this.finalError):h.complete()}catch{}}),this.observers.push(h),m}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(o){typeof console<"u"&&console.error&&console.error(o)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vT(a,e){if(typeof a!="object"||a===null)return!1;for(const n of e)if(n in a&&typeof a[n]=="function")return!0;return!1}function z1(){}function Qn(a){return a&&a._delegate?a._delegate:a}class Jo{constructor(e,n,o){this.name=e,this.instanceFactory=n,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Yo="[DEFAULT]";class ST{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const o=new aT;if(this.instancesDeferred.set(n,o),this.isInitialized(n)||this.shouldAutoInitialize())try{const h=this.getOrInitializeService({instanceIdentifier:n});h&&o.resolve(h)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),o=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(h){if(o)return null;throw h}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IT(e))try{this.getOrInitializeService({instanceIdentifier:Yo})}catch{}for(const[n,o]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(n);try{const m=this.getOrInitializeService({instanceIdentifier:h});o.resolve(m)}catch{}}}}clearInstance(e=Yo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yo){return this.instances.has(e)}getOptions(e=Yo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const h=this.getOrInitializeService({instanceIdentifier:o,options:n});for(const[m,_]of this.instancesDeferred.entries()){const v=this.normalizeInstanceIdentifier(m);o===v&&_.resolve(h)}return h}onInit(e,n){const o=this.normalizeInstanceIdentifier(n),h=this.onInitCallbacks.get(o)??new Set;h.add(e),this.onInitCallbacks.set(o,h);const m=this.instances.get(o);return m&&e(m,o),()=>{h.delete(e)}}invokeOnInitCallbacks(e,n){const o=this.onInitCallbacks.get(n);if(o)for(const h of o)try{h(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:bT(e),options:n}),this.instances.set(e,o),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=Yo){return this.component?this.component.multipleInstances?e:Yo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bT(a){return a===Yo?void 0:a}function IT(a){return a.instantiationMode==="EAGER"}class RT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ST(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Bt;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(Bt||(Bt={}));const NT={debug:Bt.DEBUG,verbose:Bt.VERBOSE,info:Bt.INFO,warn:Bt.WARN,error:Bt.ERROR,silent:Bt.SILENT},OT=Bt.INFO,DT={[Bt.DEBUG]:"log",[Bt.VERBOSE]:"log",[Bt.INFO]:"info",[Bt.WARN]:"warn",[Bt.ERROR]:"error"},MT=(a,e,...n)=>{if(e<a.logLevel)return;const o=new Date().toISOString(),h=DT[e];if(h)console[h](`[${o}]  ${a.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class k0{constructor(e){this.name=e,this._logLevel=OT,this._logHandler=MT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Bt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Bt.DEBUG,...e),this._logHandler(this,Bt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Bt.VERBOSE,...e),this._logHandler(this,Bt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Bt.INFO,...e),this._logHandler(this,Bt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Bt.WARN,...e),this._logHandler(this,Bt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Bt.ERROR,...e),this._logHandler(this,Bt.ERROR,...e)}}const LT=(a,e)=>e.some(n=>a instanceof n);let K2,Q2;function PT(){return K2||(K2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BT(){return Q2||(Q2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GE=new WeakMap,i0=new WeakMap,qE=new WeakMap,j1=new WeakMap,V0=new WeakMap;function kT(a){const e=new Promise((n,o)=>{const h=()=>{a.removeEventListener("success",m),a.removeEventListener("error",_)},m=()=>{n(ao(a.result)),h()},_=()=>{o(a.error),h()};a.addEventListener("success",m),a.addEventListener("error",_)});return e.then(n=>{n instanceof IDBCursor&&GE.set(n,a)}).catch(()=>{}),V0.set(e,a),e}function VT(a){if(i0.has(a))return;const e=new Promise((n,o)=>{const h=()=>{a.removeEventListener("complete",m),a.removeEventListener("error",_),a.removeEventListener("abort",_)},m=()=>{n(),h()},_=()=>{o(a.error||new DOMException("AbortError","AbortError")),h()};a.addEventListener("complete",m),a.addEventListener("error",_),a.addEventListener("abort",_)});i0.set(a,e)}let r0={get(a,e,n){if(a instanceof IDBTransaction){if(e==="done")return i0.get(a);if(e==="objectStoreNames")return a.objectStoreNames||qE.get(a);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ao(a[e])},set(a,e,n){return a[e]=n,!0},has(a,e){return a instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in a}};function UT(a){r0=a(r0)}function FT(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const o=a.call(H1(this),e,...n);return qE.set(o,e.sort?e.sort():[e]),ao(o)}:BT().includes(a)?function(...e){return a.apply(H1(this),e),ao(GE.get(this))}:function(...e){return ao(a.apply(H1(this),e))}}function zT(a){return typeof a=="function"?FT(a):(a instanceof IDBTransaction&&VT(a),LT(a,PT())?new Proxy(a,r0):a)}function ao(a){if(a instanceof IDBRequest)return kT(a);if(j1.has(a))return j1.get(a);const e=zT(a);return e!==a&&(j1.set(a,e),V0.set(e,a)),e}const H1=a=>V0.get(a);function jT(a,e,{blocked:n,upgrade:o,blocking:h,terminated:m}={}){const _=indexedDB.open(a,e),v=ao(_);return o&&_.addEventListener("upgradeneeded",T=>{o(ao(_.result),T.oldVersion,T.newVersion,ao(_.transaction),T)}),n&&_.addEventListener("blocked",T=>n(T.oldVersion,T.newVersion,T)),v.then(T=>{m&&T.addEventListener("close",()=>m()),h&&T.addEventListener("versionchange",A=>h(A.oldVersion,A.newVersion,A))}).catch(()=>{}),v}const HT=["get","getKey","getAll","getAllKeys","count"],GT=["put","add","delete","clear"],G1=new Map;function Z2(a,e){if(!(a instanceof IDBDatabase&&!(e in a)&&typeof e=="string"))return;if(G1.get(e))return G1.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,h=GT.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(h||HT.includes(n)))return;const m=async function(_,...v){const T=this.transaction(_,h?"readwrite":"readonly");let A=T.store;return o&&(A=A.index(v.shift())),(await Promise.all([A[n](...v),h&&T.done]))[0]};return G1.set(e,m),m}UT(a=>({...a,get:(e,n,o)=>Z2(e,n)||a.get(e,n,o),has:(e,n)=>!!Z2(e,n)||a.has(e,n)}));class qT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(XT(n)){const o=n.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(n=>n).join(" ")}}function XT(a){return a.getComponent()?.type==="VERSION"}const s0="@firebase/app",J2="0.14.6";const ma=new k0("@firebase/app"),YT="@firebase/app-compat",WT="@firebase/analytics-compat",KT="@firebase/analytics",QT="@firebase/app-check-compat",ZT="@firebase/app-check",JT="@firebase/auth",$T="@firebase/auth-compat",e3="@firebase/database",t3="@firebase/data-connect",n3="@firebase/database-compat",i3="@firebase/functions",r3="@firebase/functions-compat",s3="@firebase/installations",a3="@firebase/installations-compat",o3="@firebase/messaging",l3="@firebase/messaging-compat",c3="@firebase/performance",u3="@firebase/performance-compat",h3="@firebase/remote-config",f3="@firebase/remote-config-compat",d3="@firebase/storage",g3="@firebase/storage-compat",m3="@firebase/firestore",p3="@firebase/ai",y3="@firebase/firestore-compat",E3="firebase",_3="12.6.0";const a0="[DEFAULT]",x3={[s0]:"fire-core",[YT]:"fire-core-compat",[KT]:"fire-analytics",[WT]:"fire-analytics-compat",[ZT]:"fire-app-check",[QT]:"fire-app-check-compat",[JT]:"fire-auth",[$T]:"fire-auth-compat",[e3]:"fire-rtdb",[t3]:"fire-data-connect",[n3]:"fire-rtdb-compat",[i3]:"fire-fn",[r3]:"fire-fn-compat",[s3]:"fire-iid",[a3]:"fire-iid-compat",[o3]:"fire-fcm",[l3]:"fire-fcm-compat",[c3]:"fire-perf",[u3]:"fire-perf-compat",[h3]:"fire-rc",[f3]:"fire-rc-compat",[d3]:"fire-gcs",[g3]:"fire-gcs-compat",[m3]:"fire-fst",[y3]:"fire-fst-compat",[p3]:"fire-vertex","fire-js":"fire-js",[E3]:"fire-js-all"};const ef=new Map,A3=new Map,o0=new Map;function $2(a,e){try{a.container.addComponent(e)}catch(n){ma.debug(`Component ${e.name} failed to register with FirebaseApp ${a.name}`,n)}}function Ql(a){const e=a.name;if(o0.has(e))return ma.debug(`There were multiple attempts to register component ${e}.`),!1;o0.set(e,a);for(const n of ef.values())$2(n,a);for(const n of A3.values())$2(n,a);return!0}function U0(a,e){const n=a.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),a.container.getProvider(e)}function es(a){return a==null?!1:a.settings!==void 0}const w3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oo=new gu("app","Firebase",w3);class T3{constructor(e,n,o){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new Jo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oo.create("app-deleted",{appName:this._name})}}const rc=_3;function XE(a,e={}){let n=a;typeof e!="object"&&(e={name:e});const o={name:a0,automaticDataCollectionEnabled:!0,...e},h=o.name;if(typeof h!="string"||!h)throw oo.create("bad-app-name",{appName:String(h)});if(n||(n=FE()),!n)throw oo.create("no-options");const m=ef.get(h);if(m){if(Zo(n,m.options)&&Zo(o,m.config))return m;throw oo.create("duplicate-app",{appName:h})}const _=new RT(h);for(const T of o0.values())_.addComponent(T);const v=new T3(n,o,_);return ef.set(h,v),v}function YE(a=a0){const e=ef.get(a);if(!e&&a===a0&&FE())return XE();if(!e)throw oo.create("no-app",{appName:a});return e}function lo(a,e,n){let o=x3[a]??a;n&&(o+=`-${n}`);const h=o.match(/\s|\//),m=e.match(/\s|\//);if(h||m){const _=[`Unable to register library "${o}" with version "${e}":`];h&&_.push(`library name "${o}" contains illegal characters (whitespace or "/")`),h&&m&&_.push("and"),m&&_.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ma.warn(_.join(" "));return}Ql(new Jo(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}const C3="firebase-heartbeat-database",v3=1,su="firebase-heartbeat-store";let q1=null;function WE(){return q1||(q1=jT(C3,v3,{upgrade:(a,e)=>{switch(e){case 0:try{a.createObjectStore(su)}catch(n){console.warn(n)}}}}).catch(a=>{throw oo.create("idb-open",{originalErrorMessage:a.message})})),q1}async function S3(a){try{const n=(await WE()).transaction(su),o=await n.objectStore(su).get(KE(a));return await n.done,o}catch(e){if(e instanceof _a)ma.warn(e.message);else{const n=oo.create("idb-get",{originalErrorMessage:e?.message});ma.warn(n.message)}}}async function ey(a,e){try{const o=(await WE()).transaction(su,"readwrite");await o.objectStore(su).put(e,KE(a)),await o.done}catch(n){if(n instanceof _a)ma.warn(n.message);else{const o=oo.create("idb-set",{originalErrorMessage:n?.message});ma.warn(o.message)}}}function KE(a){return`${a.name}!${a.options.appId}`}const b3=1024,I3=30;class R3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new O3(n),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=ty();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(h=>h.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:n}),this._heartbeatsCache.heartbeats.length>I3){const h=D3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ma.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ty(),{heartbeatsToSend:n,unsentEntries:o}=N3(this._heartbeatsCache.heartbeats),h=$h(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),h}catch(e){return ma.warn(e),""}}}function ty(){return new Date().toISOString().substring(0,10)}function N3(a,e=b3){const n=[];let o=a.slice();for(const h of a){const m=n.find(_=>_.agent===h.agent);if(m){if(m.dates.push(h.date),ny(n)>e){m.dates.pop();break}}else if(n.push({agent:h.agent,dates:[h.date]}),ny(n)>e){n.pop();break}o=o.slice(1)}return{heartbeatsToSend:n,unsentEntries:o}}class O3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yT()?ET().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await S3(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return ey(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return ey(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function ny(a){return $h(JSON.stringify({version:2,heartbeats:a})).length}function D3(a){if(a.length===0)return-1;let e=0,n=a[0].date;for(let o=1;o<a.length;o++)a[o].date<n&&(n=a[o].date,e=o);return e}function M3(a){Ql(new Jo("platform-logger",e=>new qT(e),"PRIVATE")),Ql(new Jo("heartbeat",e=>new R3(e),"PRIVATE")),lo(s0,J2,a),lo(s0,J2,"esm2020"),lo("fire-js","")}M3("");var L3="firebase",P3="12.6.0";lo(L3,P3,"app");function QE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const B3=QE,ZE=new gu("auth","Firebase",QE());const tf=new k0("@firebase/auth");function k3(a,...e){tf.logLevel<=Bt.WARN&&tf.warn(`Auth (${rc}): ${a}`,...e)}function Hh(a,...e){tf.logLevel<=Bt.ERROR&&tf.error(`Auth (${rc}): ${a}`,...e)}function ds(a,...e){throw F0(a,...e)}function bs(a,...e){return F0(a,...e)}function JE(a,e,n){const o={...B3(),[e]:n};return new gu("auth","Firebase",o).create(e,{appName:a.name})}function da(a){return JE(a,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function F0(a,...e){if(typeof a!="string"){const n=e[0],o=[...e.slice(1)];return o[0]&&(o[0].appName=a.name),a._errorFactory.create(n,...o)}return ZE.create(a,...e)}function lt(a,e,...n){if(!a)throw F0(e,...n)}function ha(a){const e="INTERNAL ASSERTION FAILED: "+a;throw Hh(e),new Error(e)}function pa(a,e){a||ha(e)}function l0(){return typeof self<"u"&&self.location?.href||""}function V3(){return iy()==="http:"||iy()==="https:"}function iy(){return typeof self<"u"&&self.location?.protocol||null}function U3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(V3()||dT()||"connection"in navigator)?navigator.onLine:!0}function F3(){if(typeof navigator>"u")return null;const a=navigator;return a.languages&&a.languages[0]||a.language||null}class pu{constructor(e,n){this.shortDelay=e,this.longDelay=n,pa(n>e,"Short delay should be less than long delay!"),this.isMobile=uT()||gT()}get(){return U3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function z0(a,e){pa(a.emulator,"Emulator should always be set here");const{url:n}=a.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class $E{static initialize(e,n,o){this.fetchImpl=e,n&&(this.headersImpl=n),o&&(this.responseImpl=o)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ha("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ha("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ha("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const z3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const j3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],H3=new pu(3e4,6e4);function Eo(a,e){return a.tenantId&&!e.tenantId?{...e,tenantId:a.tenantId}:e}async function _o(a,e,n,o,h={}){return e_(a,h,async()=>{let m={},_={};o&&(e==="GET"?_=o:m={body:JSON.stringify(o)});const v=mu({key:a.config.apiKey,..._}).slice(1),T=await a._getAdditionalHeaders();T["Content-Type"]="application/json",a.languageCode&&(T["X-Firebase-Locale"]=a.languageCode);const A={method:e,headers:T,...m};return fT()||(A.referrerPolicy="no-referrer"),a.emulatorConfig&&ic(a.emulatorConfig.host)&&(A.credentials="include"),$E.fetch()(await t_(a,a.config.apiHost,n,v),A)})}async function e_(a,e,n){a._canInitEmulator=!1;const o={...z3,...e};try{const h=new q3(a),m=await Promise.race([n(),h.promise]);h.clearNetworkTimeout();const _=await m.json();if("needConfirmation"in _)throw Bh(a,"account-exists-with-different-credential",_);if(m.ok&&!("errorMessage"in _))return _;{const v=m.ok?_.errorMessage:_.error.message,[T,A]=v.split(" : ");if(T==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bh(a,"credential-already-in-use",_);if(T==="EMAIL_EXISTS")throw Bh(a,"email-already-in-use",_);if(T==="USER_DISABLED")throw Bh(a,"user-disabled",_);const b=o[T]||T.toLowerCase().replace(/[_\s]+/g,"-");if(A)throw JE(a,b,A);ds(a,b)}}catch(h){if(h instanceof _a)throw h;ds(a,"network-request-failed",{message:String(h)})}}async function yu(a,e,n,o,h={}){const m=await _o(a,e,n,o,h);return"mfaPendingCredential"in m&&ds(a,"multi-factor-auth-required",{_serverResponse:m}),m}async function t_(a,e,n,o){const h=`${e}${n}?${o}`,m=a,_=m.config.emulator?z0(a.config,h):`${a.config.apiScheme}://${h}`;return j3.includes(n)&&(await m._persistenceManagerAvailable,m._getPersistenceType()==="COOKIE")?m._getPersistence()._getFinalTarget(_).toString():_}function G3(a){switch(a){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class q3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,o)=>{this.timer=setTimeout(()=>o(bs(this.auth,"network-request-failed")),H3.get())})}}function Bh(a,e,n){const o={appName:a.name};n.email&&(o.email=n.email),n.phoneNumber&&(o.phoneNumber=n.phoneNumber);const h=bs(a,e,o);return h.customData._tokenResponse=n,h}function ry(a){return a!==void 0&&a.enterprise!==void 0}class X3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return G3(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Y3(a,e){return _o(a,"GET","/v2/recaptchaConfig",Eo(a,e))}async function W3(a,e){return _o(a,"POST","/v1/accounts:delete",e)}async function nf(a,e){return _o(a,"POST","/v1/accounts:lookup",e)}function eu(a){if(a)try{const e=new Date(Number(a));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function K3(a,e=!1){const n=Qn(a),o=await n.getIdToken(e),h=j0(o);lt(h&&h.exp&&h.auth_time&&h.iat,n.auth,"internal-error");const m=typeof h.firebase=="object"?h.firebase:void 0,_=m?.sign_in_provider;return{claims:h,token:o,authTime:eu(X1(h.auth_time)),issuedAtTime:eu(X1(h.iat)),expirationTime:eu(X1(h.exp)),signInProvider:_||null,signInSecondFactor:m?.sign_in_second_factor||null}}function X1(a){return Number(a)*1e3}function j0(a){const[e,n,o]=a.split(".");if(e===void 0||n===void 0||o===void 0)return Hh("JWT malformed, contained fewer than 3 sections"),null;try{const h=VE(n);return h?JSON.parse(h):(Hh("Failed to decode base64 JWT payload"),null)}catch(h){return Hh("Caught error parsing JWT payload as JSON",h?.toString()),null}}function sy(a){const e=j0(a);return lt(e,"internal-error"),lt(typeof e.exp<"u","internal-error"),lt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function au(a,e,n=!1){if(n)return e;try{return await e}catch(o){throw o instanceof _a&&Q3(o)&&a.auth.currentUser===a&&await a.auth.signOut(),o}}function Q3({code:a}){return a==="auth/user-disabled"||a==="auth/user-token-expired"}class Z3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const o=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class c0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=eu(this.lastLoginAt),this.creationTime=eu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function rf(a){const e=a.auth,n=await a.getIdToken(),o=await au(a,nf(e,{idToken:n}));lt(o?.users.length,e,"internal-error");const h=o.users[0];a._notifyReloadListener(h);const m=h.providerUserInfo?.length?n_(h.providerUserInfo):[],_=$3(a.providerData,m),v=a.isAnonymous,T=!(a.email&&h.passwordHash)&&!_?.length,A=v?T:!1,b={uid:h.localId,displayName:h.displayName||null,photoURL:h.photoUrl||null,email:h.email||null,emailVerified:h.emailVerified||!1,phoneNumber:h.phoneNumber||null,tenantId:h.tenantId||null,providerData:_,metadata:new c0(h.createdAt,h.lastLoginAt),isAnonymous:A};Object.assign(a,b)}async function J3(a){const e=Qn(a);await rf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $3(a,e){return[...a.filter(o=>!e.some(h=>h.providerId===o.providerId)),...e]}function n_(a){return a.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function eC(a,e){const n=await e_(a,{},async()=>{const o=mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:h,apiKey:m}=a.config,_=await t_(a,h,"/v1/token",`key=${m}`),v=await a._getAdditionalHeaders();v["Content-Type"]="application/x-www-form-urlencoded";const T={method:"POST",headers:v,body:o};return a.emulatorConfig&&ic(a.emulatorConfig.host)&&(T.credentials="include"),$E.fetch()(_,T)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function tC(a,e){return _o(a,"POST","/v2/accounts:revokeToken",Eo(a,e))}class Xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){lt(e.idToken,"internal-error"),lt(typeof e.idToken<"u","internal-error"),lt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){lt(e.length!==0,"internal-error");const n=sy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(lt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:o,refreshToken:h,expiresIn:m}=await eC(e,n);this.updateTokensAndExpiration(o,h,Number(m))}updateTokensAndExpiration(e,n,o){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+o*1e3}static fromJSON(e,n){const{refreshToken:o,accessToken:h,expirationTime:m}=n,_=new Xl;return o&&(lt(typeof o=="string","internal-error",{appName:e}),_.refreshToken=o),h&&(lt(typeof h=="string","internal-error",{appName:e}),_.accessToken=h),m&&(lt(typeof m=="number","internal-error",{appName:e}),_.expirationTime=m),_}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xl,this.toJSON())}_performRefresh(){return ha("not implemented")}}function $a(a,e){lt(typeof a=="string"||typeof a>"u","internal-error",{appName:e})}class fs{constructor({uid:e,auth:n,stsTokenManager:o,...h}){this.providerId="firebase",this.proactiveRefresh=new Z3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=h.displayName||null,this.email=h.email||null,this.emailVerified=h.emailVerified||!1,this.phoneNumber=h.phoneNumber||null,this.photoURL=h.photoURL||null,this.isAnonymous=h.isAnonymous||!1,this.tenantId=h.tenantId||null,this.providerData=h.providerData?[...h.providerData]:[],this.metadata=new c0(h.createdAt||void 0,h.lastLoginAt||void 0)}async getIdToken(e){const n=await au(this,this.stsTokenManager.getToken(this.auth,e));return lt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return K3(this,e)}reload(){return J3(this)}_assign(e){this!==e&&(lt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){lt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let o=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),o=!0),n&&await rf(this),await this.auth._persistUserIfCurrent(this),o&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(es(this.auth.app))return Promise.reject(da(this.auth));const e=await this.getIdToken();return await au(this,W3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const o=n.displayName??void 0,h=n.email??void 0,m=n.phoneNumber??void 0,_=n.photoURL??void 0,v=n.tenantId??void 0,T=n._redirectEventId??void 0,A=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:O,emailVerified:V,isAnonymous:G,providerData:ee,stsTokenManager:ie}=n;lt(O&&ie,e,"internal-error");const he=Xl.fromJSON(this.name,ie);lt(typeof O=="string",e,"internal-error"),$a(o,e.name),$a(h,e.name),lt(typeof V=="boolean",e,"internal-error"),lt(typeof G=="boolean",e,"internal-error"),$a(m,e.name),$a(_,e.name),$a(v,e.name),$a(T,e.name),$a(A,e.name),$a(b,e.name);const Le=new fs({uid:O,auth:e,email:h,emailVerified:V,displayName:o,isAnonymous:G,photoURL:_,phoneNumber:m,tenantId:v,stsTokenManager:he,createdAt:A,lastLoginAt:b});return ee&&Array.isArray(ee)&&(Le.providerData=ee.map(be=>({...be}))),T&&(Le._redirectEventId=T),Le}static async _fromIdTokenResponse(e,n,o=!1){const h=new Xl;h.updateFromServerResponse(n);const m=new fs({uid:n.localId,auth:e,stsTokenManager:h,isAnonymous:o});return await rf(m),m}static async _fromGetAccountInfoResponse(e,n,o){const h=n.users[0];lt(h.localId!==void 0,"internal-error");const m=h.providerUserInfo!==void 0?n_(h.providerUserInfo):[],_=!(h.email&&h.passwordHash)&&!m?.length,v=new Xl;v.updateFromIdToken(o);const T=new fs({uid:h.localId,auth:e,stsTokenManager:v,isAnonymous:_}),A={uid:h.localId,displayName:h.displayName||null,photoURL:h.photoUrl||null,email:h.email||null,emailVerified:h.emailVerified||!1,phoneNumber:h.phoneNumber||null,tenantId:h.tenantId||null,providerData:m,metadata:new c0(h.createdAt,h.lastLoginAt),isAnonymous:!(h.email&&h.passwordHash)&&!m?.length};return Object.assign(T,A),T}}const ay=new Map;function fa(a){pa(a instanceof Function,"Expected a class definition");let e=ay.get(a);return e?(pa(e instanceof a,"Instance stored in cache mismatched with class"),e):(e=new a,ay.set(a,e),e)}class i_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}i_.type="NONE";const oy=i_;function Gh(a,e,n){return`firebase:${a}:${e}:${n}`}class Yl{constructor(e,n,o){this.persistence=e,this.auth=n,this.userKey=o;const{config:h,name:m}=this.auth;this.fullUserKey=Gh(this.userKey,h.apiKey,m),this.fullPersistenceKey=Gh("persistence",h.apiKey,m),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await nf(this.auth,{idToken:e}).catch(()=>{});return n?fs._fromGetAccountInfoResponse(this.auth,n,e):null}return fs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,o="authUser"){if(!n.length)return new Yl(fa(oy),e,o);const h=(await Promise.all(n.map(async A=>{if(await A._isAvailable())return A}))).filter(A=>A);let m=h[0]||fa(oy);const _=Gh(o,e.config.apiKey,e.name);let v=null;for(const A of n)try{const b=await A._get(_);if(b){let O;if(typeof b=="string"){const V=await nf(e,{idToken:b}).catch(()=>{});if(!V)break;O=await fs._fromGetAccountInfoResponse(e,V,b)}else O=fs._fromJSON(e,b);A!==m&&(v=O),m=A;break}}catch{}const T=h.filter(A=>A._shouldAllowMigration);return!m._shouldAllowMigration||!T.length?new Yl(m,e,o):(m=T[0],v&&await m._set(_,v.toJSON()),await Promise.all(n.map(async A=>{if(A!==m)try{await A._remove(_)}catch{}})),new Yl(m,e,o))}}function ly(a){const e=a.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(o_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(r_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(c_(e))return"Blackberry";if(u_(e))return"Webos";if(s_(e))return"Safari";if((e.includes("chrome/")||a_(e))&&!e.includes("edge/"))return"Chrome";if(l_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,o=a.match(n);if(o?.length===2)return o[1]}return"Other"}function r_(a=Xi()){return/firefox\//i.test(a)}function s_(a=Xi()){const e=a.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function a_(a=Xi()){return/crios\//i.test(a)}function o_(a=Xi()){return/iemobile/i.test(a)}function l_(a=Xi()){return/android/i.test(a)}function c_(a=Xi()){return/blackberry/i.test(a)}function u_(a=Xi()){return/webos/i.test(a)}function H0(a=Xi()){return/iphone|ipad|ipod/i.test(a)||/macintosh/i.test(a)&&/mobile/i.test(a)}function nC(a=Xi()){return H0(a)&&!!window.navigator?.standalone}function iC(){return mT()&&document.documentMode===10}function h_(a=Xi()){return H0(a)||l_(a)||u_(a)||c_(a)||/windows phone/i.test(a)||o_(a)}function f_(a,e=[]){let n;switch(a){case"Browser":n=ly(Xi());break;case"Worker":n=`${ly(Xi())}-${a}`;break;default:n=a}const o=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${rc}/${o}`}class rC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const o=m=>new Promise((_,v)=>{try{const T=e(m);_(T)}catch(T){v(T)}});o.onAbort=n,this.queue.push(o);const h=this.queue.length-1;return()=>{this.queue[h]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const o of this.queue)await o(e),o.onAbort&&n.push(o.onAbort)}catch(o){n.reverse();for(const h of n)try{h()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:o?.message})}}}async function sC(a,e={}){return _o(a,"GET","/v2/passwordPolicy",Eo(a,e))}const aC=6;class oC{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??aC,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const o=this.customStrengthOptions.minPasswordLength,h=this.customStrengthOptions.maxPasswordLength;o&&(n.meetsMinPasswordLength=e.length>=o),h&&(n.meetsMaxPasswordLength=e.length<=h)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let o;for(let h=0;h<e.length;h++)o=e.charAt(h),this.updatePasswordCharacterOptionsStatuses(n,o>="a"&&o<="z",o>="A"&&o<="Z",o>="0"&&o<="9",this.allowedNonAlphanumericCharacters.includes(o))}updatePasswordCharacterOptionsStatuses(e,n,o,h,m){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=o)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=h)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=m))}}class lC{constructor(e,n,o,h){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=o,this.config=h,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cy(this),this.idTokenSubscription=new cy(this),this.beforeStateQueue=new rC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=h.sdkClientVersion,this._persistenceManagerAvailable=new Promise(m=>this._resolvePersistenceManagerAvailable=m)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fa(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Yl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await nf(this,{idToken:e}),o=await fs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(o)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(es(this.app)){const m=this.app.settings.authIdToken;return m?new Promise(_=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(m).then(_,_))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let o=n,h=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const m=this.redirectUser?._redirectEventId,_=o?._redirectEventId,v=await this.tryRedirectSignIn(e);(!m||m===_)&&v?.user&&(o=v.user,h=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(h)try{await this.beforeStateQueue.runMiddleware(o)}catch(m){o=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(m))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return lt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await rf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=F3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(es(this.app))return Promise.reject(da(this));const n=e?Qn(e):null;return n&&lt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&lt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return es(this.app)?Promise.reject(da(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return es(this.app)?Promise.reject(da(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sC(this),n=new oC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gu("auth","Firebase",e())}onAuthStateChanged(e,n,o){return this.registerStateListener(this.authStateSubscription,e,n,o)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,o){return this.registerStateListener(this.idTokenSubscription,e,n,o)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const o=this.onAuthStateChanged(()=>{o(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),o={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(o.tenantId=this.tenantId),await tC(this,o)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const o=await this.getOrInitRedirectPersistenceManager(n);return e===null?o.removeCurrentUser():o.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fa(e)||this._popupRedirectResolver;lt(n,this,"argument-error"),this.redirectPersistenceManager=await Yl.create(this,[fa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,o,h){if(this._deleted)return()=>{};const m=typeof n=="function"?n:n.next.bind(n);let _=!1;const v=this._isInitialized?Promise.resolve():this._initializationPromise;if(lt(v,this,"internal-error"),v.then(()=>{_||m(this.currentUser)}),typeof n=="function"){const T=e.addObserver(n,o,h);return()=>{_=!0,T()}}else{const T=e.addObserver(n);return()=>{_=!0,T()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return lt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=f_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const o=await this._getAppCheckToken();return o&&(e["X-Firebase-AppCheck"]=o),e}async _getAppCheckToken(){if(es(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&k3(`Error while retrieving App Check token: ${e.error}`),e?.token}}function rl(a){return Qn(a)}class cy{constructor(e){this.auth=e,this.observer=null,this.addObserver=TT(n=>this.observer=n)}get next(){return lt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let If={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cC(a){If=a}function d_(a){return If.loadJS(a)}function uC(){return If.recaptchaEnterpriseScript}function hC(){return If.gapiScript}function fC(a){return`__${a}${Math.floor(Math.random()*1e6)}`}class dC{constructor(){this.enterprise=new gC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class gC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const mC="recaptcha-enterprise",g_="NO_RECAPTCHA";class pC{constructor(e){this.type=mC,this.auth=rl(e)}async verify(e="verify",n=!1){async function o(m){if(!n){if(m.tenantId==null&&m._agentRecaptchaConfig!=null)return m._agentRecaptchaConfig.siteKey;if(m.tenantId!=null&&m._tenantRecaptchaConfigs[m.tenantId]!==void 0)return m._tenantRecaptchaConfigs[m.tenantId].siteKey}return new Promise(async(_,v)=>{Y3(m,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(T=>{if(T.recaptchaKey===void 0)v(new Error("recaptcha Enterprise site key undefined"));else{const A=new X3(T);return m.tenantId==null?m._agentRecaptchaConfig=A:m._tenantRecaptchaConfigs[m.tenantId]=A,_(A.siteKey)}}).catch(T=>{v(T)})})}function h(m,_,v){const T=window.grecaptcha;ry(T)?T.enterprise.ready(()=>{T.enterprise.execute(m,{action:e}).then(A=>{_(A)}).catch(()=>{_(g_)})}):v(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new dC().execute("siteKey",{action:"verify"}):new Promise((m,_)=>{o(this.auth).then(v=>{if(!n&&ry(window.grecaptcha))h(v,m,_);else{if(typeof window>"u"){_(new Error("RecaptchaVerifier is only supported in browser"));return}let T=uC();T.length!==0&&(T+=v),d_(T).then(()=>{h(v,m,_)}).catch(A=>{_(A)})}}).catch(v=>{_(v)})})}}async function uy(a,e,n,o=!1,h=!1){const m=new pC(a);let _;if(h)_=g_;else try{_=await m.verify(n)}catch{_=await m.verify(n,!0)}const v={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in v){const T=v.phoneEnrollmentInfo.phoneNumber,A=v.phoneEnrollmentInfo.recaptchaToken;Object.assign(v,{phoneEnrollmentInfo:{phoneNumber:T,recaptchaToken:A,captchaResponse:_,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in v){const T=v.phoneSignInInfo.recaptchaToken;Object.assign(v,{phoneSignInInfo:{recaptchaToken:T,captchaResponse:_,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return v}return o?Object.assign(v,{captchaResp:_}):Object.assign(v,{captchaResponse:_}),Object.assign(v,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(v,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),v}async function u0(a,e,n,o,h){if(a._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const m=await uy(a,e,n,n==="getOobCode");return o(a,m)}else return o(a,e).catch(async m=>{if(m.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const _=await uy(a,e,n,n==="getOobCode");return o(a,_)}else return Promise.reject(m)})}function yC(a,e){const n=U0(a,"auth");if(n.isInitialized()){const h=n.getImmediate(),m=n.getOptions();if(Zo(m,e??{}))return h;ds(h,"already-initialized")}return n.initialize({options:e})}function EC(a,e){const n=e?.persistence||[],o=(Array.isArray(n)?n:[n]).map(fa);e?.errorMap&&a._updateErrorMap(e.errorMap),a._initializeWithPersistence(o,e?.popupRedirectResolver)}function _C(a,e,n){const o=rl(a);lt(/^https?:\/\//.test(e),o,"invalid-emulator-scheme");const h=!1,m=m_(e),{host:_,port:v}=xC(e),T=v===null?"":`:${v}`,A={url:`${m}//${_}${T}/`},b=Object.freeze({host:_,port:v,protocol:m.replace(":",""),options:Object.freeze({disableWarnings:h})});if(!o._canInitEmulator){lt(o.config.emulator&&o.emulatorConfig,o,"emulator-config-failed"),lt(Zo(A,o.config.emulator)&&Zo(b,o.emulatorConfig),o,"emulator-config-failed");return}o.config.emulator=A,o.emulatorConfig=b,o.settings.appVerificationDisabledForTesting=!0,ic(_)?(jE(`${m}//${_}${T}`),HE("Auth",!0)):AC()}function m_(a){const e=a.indexOf(":");return e<0?"":a.substr(0,e+1)}function xC(a){const e=m_(a),n=/(\/\/)?([^?#/]+)/.exec(a.substr(e.length));if(!n)return{host:"",port:null};const o=n[2].split("@").pop()||"",h=/^(\[[^\]]+\])(:|$)/.exec(o);if(h){const m=h[1];return{host:m,port:hy(o.substr(m.length+1))}}else{const[m,_]=o.split(":");return{host:m,port:hy(_)}}}function hy(a){if(!a)return null;const e=Number(a);return isNaN(e)?null:e}function AC(){function a(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",a):a())}class G0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ha("not implemented")}_getIdTokenResponse(e){return ha("not implemented")}_linkToIdToken(e,n){return ha("not implemented")}_getReauthenticationResolver(e){return ha("not implemented")}}async function wC(a,e){return _o(a,"POST","/v1/accounts:signUp",e)}async function TC(a,e){return yu(a,"POST","/v1/accounts:signInWithPassword",Eo(a,e))}async function CC(a,e){return yu(a,"POST","/v1/accounts:signInWithEmailLink",Eo(a,e))}async function vC(a,e){return yu(a,"POST","/v1/accounts:signInWithEmailLink",Eo(a,e))}class ou extends G0{constructor(e,n,o,h=null){super("password",o),this._email=e,this._password=n,this._tenantId=h}static _fromEmailAndPassword(e,n){return new ou(e,n,"password")}static _fromEmailAndCode(e,n,o=null){return new ou(e,n,"emailLink",o)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return u0(e,n,"signInWithPassword",TC);case"emailLink":return CC(e,{email:this._email,oobCode:this._password});default:ds(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const o={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return u0(e,o,"signUpPassword",wC);case"emailLink":return vC(e,{idToken:n,email:this._email,oobCode:this._password});default:ds(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Wl(a,e){return yu(a,"POST","/v1/accounts:signInWithIdp",Eo(a,e))}const SC="http://localhost";class $o extends G0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $o(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ds("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:o,signInMethod:h,...m}=n;if(!o||!h)return null;const _=new $o(o,h);return _.idToken=m.idToken||void 0,_.accessToken=m.accessToken||void 0,_.secret=m.secret,_.nonce=m.nonce,_.pendingToken=m.pendingToken||null,_}_getIdTokenResponse(e){const n=this.buildRequest();return Wl(e,n)}_linkToIdToken(e,n){const o=this.buildRequest();return o.idToken=n,Wl(e,o)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Wl(e,n)}buildRequest(){const e={requestUri:SC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=mu(n)}return e}}function bC(a){switch(a){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function IC(a){const e=Xc(Yc(a)).link,n=e?Xc(Yc(e)).deep_link_id:null,o=Xc(Yc(a)).deep_link_id;return(o?Xc(Yc(o)).link:null)||o||n||e||a}class q0{constructor(e){const n=Xc(Yc(e)),o=n.apiKey??null,h=n.oobCode??null,m=bC(n.mode??null);lt(o&&h&&m,"argument-error"),this.apiKey=o,this.operation=m,this.code=h,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=IC(e);try{return new q0(n)}catch{return null}}}class sc{constructor(){this.providerId=sc.PROVIDER_ID}static credential(e,n){return ou._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const o=q0.parseLink(n);return lt(o,"argument-error"),ou._fromEmailAndCode(e,o.code,o.tenantId)}}sc.PROVIDER_ID="password";sc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";sc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class p_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Eu extends p_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class eo extends Eu{constructor(){super("facebook.com")}static credential(e){return $o._fromParams({providerId:eo.PROVIDER_ID,signInMethod:eo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return eo.credentialFromTaggedObject(e)}static credentialFromError(e){return eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return eo.credential(e.oauthAccessToken)}catch{return null}}}eo.FACEBOOK_SIGN_IN_METHOD="facebook.com";eo.PROVIDER_ID="facebook.com";class to extends Eu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $o._fromParams({providerId:to.PROVIDER_ID,signInMethod:to.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return to.credentialFromTaggedObject(e)}static credentialFromError(e){return to.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:o}=e;if(!n&&!o)return null;try{return to.credential(n,o)}catch{return null}}}to.GOOGLE_SIGN_IN_METHOD="google.com";to.PROVIDER_ID="google.com";class no extends Eu{constructor(){super("github.com")}static credential(e){return $o._fromParams({providerId:no.PROVIDER_ID,signInMethod:no.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return no.credentialFromTaggedObject(e)}static credentialFromError(e){return no.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return no.credential(e.oauthAccessToken)}catch{return null}}}no.GITHUB_SIGN_IN_METHOD="github.com";no.PROVIDER_ID="github.com";class io extends Eu{constructor(){super("twitter.com")}static credential(e,n){return $o._fromParams({providerId:io.PROVIDER_ID,signInMethod:io.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return io.credentialFromTaggedObject(e)}static credentialFromError(e){return io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:o}=e;if(!n||!o)return null;try{return io.credential(n,o)}catch{return null}}}io.TWITTER_SIGN_IN_METHOD="twitter.com";io.PROVIDER_ID="twitter.com";async function RC(a,e){return yu(a,"POST","/v1/accounts:signUp",Eo(a,e))}class el{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,o,h=!1){const m=await fs._fromIdTokenResponse(e,o,h),_=fy(o);return new el({user:m,providerId:_,_tokenResponse:o,operationType:n})}static async _forOperation(e,n,o){await e._updateTokensIfNecessary(o,!0);const h=fy(o);return new el({user:e,providerId:h,_tokenResponse:o,operationType:n})}}function fy(a){return a.providerId?a.providerId:"phoneNumber"in a?"phone":null}class sf extends _a{constructor(e,n,o,h){super(n.code,n.message),this.operationType=o,this.user=h,Object.setPrototypeOf(this,sf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:o}}static _fromErrorAndOperation(e,n,o,h){return new sf(e,n,o,h)}}function y_(a,e,n,o){return(e==="reauthenticate"?n._getReauthenticationResolver(a):n._getIdTokenResponse(a)).catch(m=>{throw m.code==="auth/multi-factor-auth-required"?sf._fromErrorAndOperation(a,m,e,o):m})}async function NC(a,e,n=!1){const o=await au(a,e._linkToIdToken(a.auth,await a.getIdToken()),n);return el._forOperation(a,"link",o)}async function OC(a,e,n=!1){const{auth:o}=a;if(es(o.app))return Promise.reject(da(o));const h="reauthenticate";try{const m=await au(a,y_(o,h,e,a),n);lt(m.idToken,o,"internal-error");const _=j0(m.idToken);lt(_,o,"internal-error");const{sub:v}=_;return lt(a.uid===v,o,"user-mismatch"),el._forOperation(a,h,m)}catch(m){throw m?.code==="auth/user-not-found"&&ds(o,"user-mismatch"),m}}async function E_(a,e,n=!1){if(es(a.app))return Promise.reject(da(a));const o="signIn",h=await y_(a,o,e),m=await el._fromIdTokenResponse(a,o,h);return n||await a._updateCurrentUser(m.user),m}async function DC(a,e){return E_(rl(a),e)}async function __(a){const e=rl(a);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function MC(a,e,n){if(es(a.app))return Promise.reject(da(a));const o=rl(a),_=await u0(o,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",RC).catch(T=>{throw T.code==="auth/password-does-not-meet-requirements"&&__(a),T}),v=await el._fromIdTokenResponse(o,"signIn",_);return await o._updateCurrentUser(v.user),v}function LC(a,e,n){return es(a.app)?Promise.reject(da(a)):DC(Qn(a),sc.credential(e,n)).catch(async o=>{throw o.code==="auth/password-does-not-meet-requirements"&&__(a),o})}function PC(a,e,n,o){return Qn(a).onIdTokenChanged(e,n,o)}function BC(a,e,n){return Qn(a).beforeAuthStateChanged(e,n)}function kC(a,e,n,o){return Qn(a).onAuthStateChanged(e,n,o)}function VC(a){return Qn(a).signOut()}const af="__sak";class x_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(af,"1"),this.storage.removeItem(af),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const UC=1e3,FC=10;class A_ extends x_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=h_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const o=this.storage.getItem(n),h=this.localCache[n];o!==h&&e(n,h,o)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((_,v,T)=>{this.notifyListeners(_,T)});return}const o=e.key;n?this.detachListener():this.stopPolling();const h=()=>{const _=this.storage.getItem(o);!n&&this.localCache[o]===_||this.notifyListeners(o,_)},m=this.storage.getItem(o);iC()&&m!==e.newValue&&e.newValue!==e.oldValue?setTimeout(h,FC):h()}notifyListeners(e,n){this.localCache[e]=n;const o=this.listeners[e];if(o)for(const h of Array.from(o))h(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,o)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:o}),!0)})},UC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}A_.type="LOCAL";const zC=A_;class w_ extends x_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}w_.type="SESSION";const T_=w_;function jC(a){return Promise.all(a.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Rf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(h=>h.isListeningto(e));if(n)return n;const o=new Rf(e);return this.receivers.push(o),o}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:o,eventType:h,data:m}=n.data,_=this.handlersMap[h];if(!_?.size)return;n.ports[0].postMessage({status:"ack",eventId:o,eventType:h});const v=Array.from(_).map(async A=>A(n.origin,m)),T=await jC(v);n.ports[0].postMessage({status:"done",eventId:o,eventType:h,response:T})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rf.receivers=[];function X0(a="",e=10){let n="";for(let o=0;o<e;o++)n+=Math.floor(Math.random()*10);return a+n}class HC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,o=50){const h=typeof MessageChannel<"u"?new MessageChannel:null;if(!h)throw new Error("connection_unavailable");let m,_;return new Promise((v,T)=>{const A=X0("",20);h.port1.start();const b=setTimeout(()=>{T(new Error("unsupported_event"))},o);_={messageChannel:h,onMessage(O){const V=O;if(V.data.eventId===A)switch(V.data.status){case"ack":clearTimeout(b),m=setTimeout(()=>{T(new Error("timeout"))},3e3);break;case"done":clearTimeout(m),v(V.data.response);break;default:clearTimeout(b),clearTimeout(m),T(new Error("invalid_response"));break}}},this.handlers.add(_),h.port1.addEventListener("message",_.onMessage),this.target.postMessage({eventType:e,eventId:A,data:n},[h.port2])}).finally(()=>{_&&this.removeMessageHandler(_)})}}function Is(){return window}function GC(a){Is().location.href=a}function C_(){return typeof Is().WorkerGlobalScope<"u"&&typeof Is().importScripts=="function"}async function qC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XC(){return navigator?.serviceWorker?.controller||null}function YC(){return C_()?self:null}const v_="firebaseLocalStorageDb",WC=1,of="firebaseLocalStorage",S_="fbase_key";class _u{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Nf(a,e){return a.transaction([of],e?"readwrite":"readonly").objectStore(of)}function KC(){const a=indexedDB.deleteDatabase(v_);return new _u(a).toPromise()}function h0(){const a=indexedDB.open(v_,WC);return new Promise((e,n)=>{a.addEventListener("error",()=>{n(a.error)}),a.addEventListener("upgradeneeded",()=>{const o=a.result;try{o.createObjectStore(of,{keyPath:S_})}catch(h){n(h)}}),a.addEventListener("success",async()=>{const o=a.result;o.objectStoreNames.contains(of)?e(o):(o.close(),await KC(),e(await h0()))})})}async function dy(a,e,n){const o=Nf(a,!0).put({[S_]:e,value:n});return new _u(o).toPromise()}async function QC(a,e){const n=Nf(a,!1).get(e),o=await new _u(n).toPromise();return o===void 0?null:o.value}function gy(a,e){const n=Nf(a,!0).delete(e);return new _u(n).toPromise()}const ZC=800,JC=3;class b_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await h0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const o=await this._openDb();return await e(o)}catch(o){if(n++>JC)throw o;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return C_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rf._getInstance(YC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await qC(),!this.activeServiceWorker)return;this.sender=new HC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||XC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await h0();return await dy(e,af,"1"),await gy(e,af),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(o=>dy(o,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(o=>QC(o,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>gy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(h=>{const m=Nf(h,!1).getAll();return new _u(m).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],o=new Set;if(e.length!==0)for(const{fbase_key:h,value:m}of e)o.add(h),JSON.stringify(this.localCache[h])!==JSON.stringify(m)&&(this.notifyListeners(h,m),n.push(h));for(const h of Object.keys(this.localCache))this.localCache[h]&&!o.has(h)&&(this.notifyListeners(h,null),n.push(h));return n}notifyListeners(e,n){this.localCache[e]=n;const o=this.listeners[e];if(o)for(const h of Array.from(o))h(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ZC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}b_.type="LOCAL";const $C=b_;new pu(3e4,6e4);function ev(a,e){return e?fa(e):(lt(a._popupRedirectResolver,a,"argument-error"),a._popupRedirectResolver)}class Y0 extends G0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Wl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Wl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function tv(a){return E_(a.auth,new Y0(a),a.bypassAuthState)}function nv(a){const{auth:e,user:n}=a;return lt(n,e,"internal-error"),OC(n,new Y0(a),a.bypassAuthState)}async function iv(a){const{auth:e,user:n}=a;return lt(n,e,"internal-error"),NC(n,new Y0(a),a.bypassAuthState)}class I_{constructor(e,n,o,h,m=!1){this.auth=e,this.resolver=o,this.user=h,this.bypassAuthState=m,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(o){this.reject(o)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:o,postBody:h,tenantId:m,error:_,type:v}=e;if(_){this.reject(_);return}const T={auth:this.auth,requestUri:n,sessionId:o,tenantId:m||void 0,postBody:h||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(v)(T))}catch(A){this.reject(A)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tv;case"linkViaPopup":case"linkViaRedirect":return iv;case"reauthViaPopup":case"reauthViaRedirect":return nv;default:ds(this.auth,"internal-error")}}resolve(e){pa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const rv=new pu(2e3,1e4);class Hl extends I_{constructor(e,n,o,h,m){super(e,n,h,m),this.provider=o,this.authWindow=null,this.pollId=null,Hl.currentPopupAction&&Hl.currentPopupAction.cancel(),Hl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return lt(e,this.auth,"internal-error"),e}async onExecution(){pa(this.filter.length===1,"Popup operations only handle one event");const e=X0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(bs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(bs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rv.get())};e()}}Hl.currentPopupAction=null;const sv="pendingRedirect",qh=new Map;class av extends I_{constructor(e,n,o=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,o),this.eventId=null}async execute(){let e=qh.get(this.auth._key());if(!e){try{const o=await ov(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(o)}catch(n){e=()=>Promise.reject(n)}qh.set(this.auth._key(),e)}return this.bypassAuthState||qh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ov(a,e){const n=uv(e),o=cv(a);if(!await o._isAvailable())return!1;const h=await o._get(n)==="true";return await o._remove(n),h}function lv(a,e){qh.set(a._key(),e)}function cv(a){return fa(a._redirectPersistence)}function uv(a){return Gh(sv,a.config.apiKey,a.name)}async function hv(a,e,n=!1){if(es(a.app))return Promise.reject(da(a));const o=rl(a),h=ev(o,e),_=await new av(o,h,n).execute();return _&&!n&&(delete _.user._redirectEventId,await o._persistUserIfCurrent(_.user),await o._setRedirectUser(null,e)),_}const fv=600*1e3;class dv{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(o=>{this.isEventForConsumer(e,o)&&(n=!0,this.sendToConsumer(e,o),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gv(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!R_(e)){const o=e.error.code?.split("auth/")[1]||"internal-error";n.onError(bs(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const o=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&o}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fv&&this.cachedEventUids.clear(),this.cachedEventUids.has(my(e))}saveEventToCache(e){this.cachedEventUids.add(my(e)),this.lastProcessedEventTime=Date.now()}}function my(a){return[a.type,a.eventId,a.sessionId,a.tenantId].filter(e=>e).join("-")}function R_({type:a,error:e}){return a==="unknown"&&e?.code==="auth/no-auth-event"}function gv(a){switch(a.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return R_(a);default:return!1}}async function mv(a,e={}){return _o(a,"GET","/v1/projects",e)}const pv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yv=/^https?/;async function Ev(a){if(a.config.emulator)return;const{authorizedDomains:e}=await mv(a);for(const n of e)try{if(_v(n))return}catch{}ds(a,"unauthorized-domain")}function _v(a){const e=l0(),{protocol:n,hostname:o}=new URL(e);if(a.startsWith("chrome-extension://")){const _=new URL(a);return _.hostname===""&&o===""?n==="chrome-extension:"&&a.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&_.hostname===o}if(!yv.test(n))return!1;if(pv.test(a))return o===a;const h=a.replace(/\./g,"\\.");return new RegExp("^(.+\\."+h+"|"+h+")$","i").test(o)}const xv=new pu(3e4,6e4);function py(){const a=Is().___jsl;if(a?.H){for(const e of Object.keys(a.H))if(a.H[e].r=a.H[e].r||[],a.H[e].L=a.H[e].L||[],a.H[e].r=[...a.H[e].L],a.CP)for(let n=0;n<a.CP.length;n++)a.CP[n]=null}}function Av(a){return new Promise((e,n)=>{function o(){py(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{py(),n(bs(a,"network-request-failed"))},timeout:xv.get()})}if(Is().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Is().gapi?.load)o();else{const h=fC("iframefcb");return Is()[h]=()=>{gapi.load?o():n(bs(a,"network-request-failed"))},d_(`${hC()}?onload=${h}`).catch(m=>n(m))}}).catch(e=>{throw Xh=null,e})}let Xh=null;function wv(a){return Xh=Xh||Av(a),Xh}const Tv=new pu(5e3,15e3),Cv="__/auth/iframe",vv="emulator/auth/iframe",Sv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Iv(a){const e=a.config;lt(e.authDomain,a,"auth-domain-config-required");const n=e.emulator?z0(e,vv):`https://${a.config.authDomain}/${Cv}`,o={apiKey:e.apiKey,appName:a.name,v:rc},h=bv.get(a.config.apiHost);h&&(o.eid=h);const m=a._getFrameworks();return m.length&&(o.fw=m.join(",")),`${n}?${mu(o).slice(1)}`}async function Rv(a){const e=await wv(a),n=Is().gapi;return lt(n,a,"internal-error"),e.open({where:document.body,url:Iv(a),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sv,dontclear:!0},o=>new Promise(async(h,m)=>{await o.restyle({setHideOnLeave:!1});const _=bs(a,"network-request-failed"),v=Is().setTimeout(()=>{m(_)},Tv.get());function T(){Is().clearTimeout(v),h(o)}o.ping(T).then(T,()=>{m(_)})}))}const Nv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ov=500,Dv=600,Mv="_blank",Lv="http://localhost";class yy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Pv(a,e,n,o=Ov,h=Dv){const m=Math.max((window.screen.availHeight-h)/2,0).toString(),_=Math.max((window.screen.availWidth-o)/2,0).toString();let v="";const T={...Nv,width:o.toString(),height:h.toString(),top:m,left:_},A=Xi().toLowerCase();n&&(v=a_(A)?Mv:n),r_(A)&&(e=e||Lv,T.scrollbars="yes");const b=Object.entries(T).reduce((V,[G,ee])=>`${V}${G}=${ee},`,"");if(nC(A)&&v!=="_self")return Bv(e||"",v),new yy(null);const O=window.open(e||"",v,b);lt(O,a,"popup-blocked");try{O.focus()}catch{}return new yy(O)}function Bv(a,e){const n=document.createElement("a");n.href=a,n.target=e;const o=document.createEvent("MouseEvent");o.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(o)}const kv="__/auth/handler",Vv="emulator/auth/handler",Uv=encodeURIComponent("fac");async function Ey(a,e,n,o,h,m){lt(a.config.authDomain,a,"auth-domain-config-required"),lt(a.config.apiKey,a,"invalid-api-key");const _={apiKey:a.config.apiKey,appName:a.name,authType:n,redirectUrl:o,v:rc,eventId:h};if(e instanceof p_){e.setDefaultLanguage(a.languageCode),_.providerId=e.providerId||"",wT(e.getCustomParameters())||(_.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,O]of Object.entries({}))_[b]=O}if(e instanceof Eu){const b=e.getScopes().filter(O=>O!=="");b.length>0&&(_.scopes=b.join(","))}a.tenantId&&(_.tid=a.tenantId);const v=_;for(const b of Object.keys(v))v[b]===void 0&&delete v[b];const T=await a._getAppCheckToken(),A=T?`#${Uv}=${encodeURIComponent(T)}`:"";return`${Fv(a)}?${mu(v).slice(1)}${A}`}function Fv({config:a}){return a.emulator?z0(a,Vv):`https://${a.authDomain}/${kv}`}const Y1="webStorageSupport";class zv{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=T_,this._completeRedirectFn=hv,this._overrideRedirectResult=lv}async _openPopup(e,n,o,h){pa(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const m=await Ey(e,n,o,l0(),h);return Pv(e,m,X0())}async _openRedirect(e,n,o,h){await this._originValidation(e);const m=await Ey(e,n,o,l0(),h);return GC(m),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:h,promise:m}=this.eventManagers[n];return h?Promise.resolve(h):(pa(m,"If manager is not set, promise should be"),m)}const o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch(()=>{delete this.eventManagers[n]}),o}async initAndGetManager(e){const n=await Rv(e),o=new dv(e);return n.register("authEvent",h=>(lt(h?.authEvent,e,"invalid-auth-event"),{status:o.onEvent(h.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:o},this.iframes[e._key()]=n,o}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Y1,{type:Y1},h=>{const m=h?.[0]?.[Y1];m!==void 0&&n(!!m),ds(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Ev(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return h_()||s_()||H0()}}const jv=zv;var _y="@firebase/auth",xy="1.11.1";class Hv{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(o=>{e(o?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){lt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Gv(a){switch(a){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qv(a){Ql(new Jo("auth",(e,{options:n})=>{const o=e.getProvider("app").getImmediate(),h=e.getProvider("heartbeat"),m=e.getProvider("app-check-internal"),{apiKey:_,authDomain:v}=o.options;lt(_&&!_.includes(":"),"invalid-api-key",{appName:o.name});const T={apiKey:_,authDomain:v,clientPlatform:a,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:f_(a)},A=new lC(o,h,m,T);return EC(A,n),A},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,o)=>{e.getProvider("auth-internal").initialize()})),Ql(new Jo("auth-internal",e=>{const n=rl(e.getProvider("auth").getImmediate());return(o=>new Hv(o))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),lo(_y,xy,Gv(a)),lo(_y,xy,"esm2020")}const Xv=300,Yv=zE("authIdTokenMaxAge")||Xv;let Ay=null;const Wv=a=>async e=>{const n=e&&await e.getIdTokenResult(),o=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(o&&o>Yv)return;const h=n?.token;Ay!==h&&(Ay=h,await fetch(a,{method:h?"POST":"DELETE",headers:h?{Authorization:`Bearer ${h}`}:{}}))};function Kv(a=YE()){const e=U0(a,"auth");if(e.isInitialized())return e.getImmediate();const n=yC(a,{popupRedirectResolver:jv,persistence:[$C,zC,T_]}),o=zE("authTokenSyncURL");if(o&&typeof isSecureContext=="boolean"&&isSecureContext){const m=new URL(o,location.origin);if(location.origin===m.origin){const _=Wv(m.toString());BC(n,_,()=>_(n.currentUser)),PC(n,v=>_(v))}}const h=UE("auth");return h&&_C(n,`http://${h}`),n}function Qv(){return document.getElementsByTagName("head")?.[0]??document}cC({loadJS(a){return new Promise((e,n)=>{const o=document.createElement("script");o.setAttribute("src",a),o.onload=e,o.onerror=h=>{const m=bs("internal-error");m.customData=h,n(m)},o.type="text/javascript",o.charset="UTF-8",Qv().appendChild(o)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qv("Browser");var wy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var co,N_;(function(){var a;function e(k,F){function L(){}L.prototype=F.prototype,k.F=F.prototype,k.prototype=new L,k.prototype.constructor=k,k.D=function(W,X,Y){for(var H=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)H[qe-2]=arguments[qe];return F.prototype[X].apply(W,H)}}function n(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(o,n),o.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function h(k,F,L){L||(L=0);const W=Array(16);if(typeof F=="string")for(var X=0;X<16;++X)W[X]=F.charCodeAt(L++)|F.charCodeAt(L++)<<8|F.charCodeAt(L++)<<16|F.charCodeAt(L++)<<24;else for(X=0;X<16;++X)W[X]=F[L++]|F[L++]<<8|F[L++]<<16|F[L++]<<24;F=k.g[0],L=k.g[1],X=k.g[2];let Y=k.g[3],H;H=F+(Y^L&(X^Y))+W[0]+3614090360&4294967295,F=L+(H<<7&4294967295|H>>>25),H=Y+(X^F&(L^X))+W[1]+3905402710&4294967295,Y=F+(H<<12&4294967295|H>>>20),H=X+(L^Y&(F^L))+W[2]+606105819&4294967295,X=Y+(H<<17&4294967295|H>>>15),H=L+(F^X&(Y^F))+W[3]+3250441966&4294967295,L=X+(H<<22&4294967295|H>>>10),H=F+(Y^L&(X^Y))+W[4]+4118548399&4294967295,F=L+(H<<7&4294967295|H>>>25),H=Y+(X^F&(L^X))+W[5]+1200080426&4294967295,Y=F+(H<<12&4294967295|H>>>20),H=X+(L^Y&(F^L))+W[6]+2821735955&4294967295,X=Y+(H<<17&4294967295|H>>>15),H=L+(F^X&(Y^F))+W[7]+4249261313&4294967295,L=X+(H<<22&4294967295|H>>>10),H=F+(Y^L&(X^Y))+W[8]+1770035416&4294967295,F=L+(H<<7&4294967295|H>>>25),H=Y+(X^F&(L^X))+W[9]+2336552879&4294967295,Y=F+(H<<12&4294967295|H>>>20),H=X+(L^Y&(F^L))+W[10]+4294925233&4294967295,X=Y+(H<<17&4294967295|H>>>15),H=L+(F^X&(Y^F))+W[11]+2304563134&4294967295,L=X+(H<<22&4294967295|H>>>10),H=F+(Y^L&(X^Y))+W[12]+1804603682&4294967295,F=L+(H<<7&4294967295|H>>>25),H=Y+(X^F&(L^X))+W[13]+4254626195&4294967295,Y=F+(H<<12&4294967295|H>>>20),H=X+(L^Y&(F^L))+W[14]+2792965006&4294967295,X=Y+(H<<17&4294967295|H>>>15),H=L+(F^X&(Y^F))+W[15]+1236535329&4294967295,L=X+(H<<22&4294967295|H>>>10),H=F+(X^Y&(L^X))+W[1]+4129170786&4294967295,F=L+(H<<5&4294967295|H>>>27),H=Y+(L^X&(F^L))+W[6]+3225465664&4294967295,Y=F+(H<<9&4294967295|H>>>23),H=X+(F^L&(Y^F))+W[11]+643717713&4294967295,X=Y+(H<<14&4294967295|H>>>18),H=L+(Y^F&(X^Y))+W[0]+3921069994&4294967295,L=X+(H<<20&4294967295|H>>>12),H=F+(X^Y&(L^X))+W[5]+3593408605&4294967295,F=L+(H<<5&4294967295|H>>>27),H=Y+(L^X&(F^L))+W[10]+38016083&4294967295,Y=F+(H<<9&4294967295|H>>>23),H=X+(F^L&(Y^F))+W[15]+3634488961&4294967295,X=Y+(H<<14&4294967295|H>>>18),H=L+(Y^F&(X^Y))+W[4]+3889429448&4294967295,L=X+(H<<20&4294967295|H>>>12),H=F+(X^Y&(L^X))+W[9]+568446438&4294967295,F=L+(H<<5&4294967295|H>>>27),H=Y+(L^X&(F^L))+W[14]+3275163606&4294967295,Y=F+(H<<9&4294967295|H>>>23),H=X+(F^L&(Y^F))+W[3]+4107603335&4294967295,X=Y+(H<<14&4294967295|H>>>18),H=L+(Y^F&(X^Y))+W[8]+1163531501&4294967295,L=X+(H<<20&4294967295|H>>>12),H=F+(X^Y&(L^X))+W[13]+2850285829&4294967295,F=L+(H<<5&4294967295|H>>>27),H=Y+(L^X&(F^L))+W[2]+4243563512&4294967295,Y=F+(H<<9&4294967295|H>>>23),H=X+(F^L&(Y^F))+W[7]+1735328473&4294967295,X=Y+(H<<14&4294967295|H>>>18),H=L+(Y^F&(X^Y))+W[12]+2368359562&4294967295,L=X+(H<<20&4294967295|H>>>12),H=F+(L^X^Y)+W[5]+4294588738&4294967295,F=L+(H<<4&4294967295|H>>>28),H=Y+(F^L^X)+W[8]+2272392833&4294967295,Y=F+(H<<11&4294967295|H>>>21),H=X+(Y^F^L)+W[11]+1839030562&4294967295,X=Y+(H<<16&4294967295|H>>>16),H=L+(X^Y^F)+W[14]+4259657740&4294967295,L=X+(H<<23&4294967295|H>>>9),H=F+(L^X^Y)+W[1]+2763975236&4294967295,F=L+(H<<4&4294967295|H>>>28),H=Y+(F^L^X)+W[4]+1272893353&4294967295,Y=F+(H<<11&4294967295|H>>>21),H=X+(Y^F^L)+W[7]+4139469664&4294967295,X=Y+(H<<16&4294967295|H>>>16),H=L+(X^Y^F)+W[10]+3200236656&4294967295,L=X+(H<<23&4294967295|H>>>9),H=F+(L^X^Y)+W[13]+681279174&4294967295,F=L+(H<<4&4294967295|H>>>28),H=Y+(F^L^X)+W[0]+3936430074&4294967295,Y=F+(H<<11&4294967295|H>>>21),H=X+(Y^F^L)+W[3]+3572445317&4294967295,X=Y+(H<<16&4294967295|H>>>16),H=L+(X^Y^F)+W[6]+76029189&4294967295,L=X+(H<<23&4294967295|H>>>9),H=F+(L^X^Y)+W[9]+3654602809&4294967295,F=L+(H<<4&4294967295|H>>>28),H=Y+(F^L^X)+W[12]+3873151461&4294967295,Y=F+(H<<11&4294967295|H>>>21),H=X+(Y^F^L)+W[15]+530742520&4294967295,X=Y+(H<<16&4294967295|H>>>16),H=L+(X^Y^F)+W[2]+3299628645&4294967295,L=X+(H<<23&4294967295|H>>>9),H=F+(X^(L|~Y))+W[0]+4096336452&4294967295,F=L+(H<<6&4294967295|H>>>26),H=Y+(L^(F|~X))+W[7]+1126891415&4294967295,Y=F+(H<<10&4294967295|H>>>22),H=X+(F^(Y|~L))+W[14]+2878612391&4294967295,X=Y+(H<<15&4294967295|H>>>17),H=L+(Y^(X|~F))+W[5]+4237533241&4294967295,L=X+(H<<21&4294967295|H>>>11),H=F+(X^(L|~Y))+W[12]+1700485571&4294967295,F=L+(H<<6&4294967295|H>>>26),H=Y+(L^(F|~X))+W[3]+2399980690&4294967295,Y=F+(H<<10&4294967295|H>>>22),H=X+(F^(Y|~L))+W[10]+4293915773&4294967295,X=Y+(H<<15&4294967295|H>>>17),H=L+(Y^(X|~F))+W[1]+2240044497&4294967295,L=X+(H<<21&4294967295|H>>>11),H=F+(X^(L|~Y))+W[8]+1873313359&4294967295,F=L+(H<<6&4294967295|H>>>26),H=Y+(L^(F|~X))+W[15]+4264355552&4294967295,Y=F+(H<<10&4294967295|H>>>22),H=X+(F^(Y|~L))+W[6]+2734768916&4294967295,X=Y+(H<<15&4294967295|H>>>17),H=L+(Y^(X|~F))+W[13]+1309151649&4294967295,L=X+(H<<21&4294967295|H>>>11),H=F+(X^(L|~Y))+W[4]+4149444226&4294967295,F=L+(H<<6&4294967295|H>>>26),H=Y+(L^(F|~X))+W[11]+3174756917&4294967295,Y=F+(H<<10&4294967295|H>>>22),H=X+(F^(Y|~L))+W[2]+718787259&4294967295,X=Y+(H<<15&4294967295|H>>>17),H=L+(Y^(X|~F))+W[9]+3951481745&4294967295,k.g[0]=k.g[0]+F&4294967295,k.g[1]=k.g[1]+(X+(H<<21&4294967295|H>>>11))&4294967295,k.g[2]=k.g[2]+X&4294967295,k.g[3]=k.g[3]+Y&4294967295}o.prototype.v=function(k,F){F===void 0&&(F=k.length);const L=F-this.blockSize,W=this.C;let X=this.h,Y=0;for(;Y<F;){if(X==0)for(;Y<=L;)h(this,k,Y),Y+=this.blockSize;if(typeof k=="string"){for(;Y<F;)if(W[X++]=k.charCodeAt(Y++),X==this.blockSize){h(this,W),X=0;break}}else for(;Y<F;)if(W[X++]=k[Y++],X==this.blockSize){h(this,W),X=0;break}}this.h=X,this.o+=F},o.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var F=1;F<k.length-8;++F)k[F]=0;F=this.o*8;for(var L=k.length-8;L<k.length;++L)k[L]=F&255,F/=256;for(this.v(k),k=Array(16),F=0,L=0;L<4;++L)for(let W=0;W<32;W+=8)k[F++]=this.g[L]>>>W&255;return k};function m(k,F){var L=v;return Object.prototype.hasOwnProperty.call(L,k)?L[k]:L[k]=F(k)}function _(k,F){this.h=F;const L=[];let W=!0;for(let X=k.length-1;X>=0;X--){const Y=k[X]|0;W&&Y==F||(L[X]=Y,W=!1)}this.g=L}var v={};function T(k){return-128<=k&&k<128?m(k,function(F){return new _([F|0],F<0?-1:0)}):new _([k|0],k<0?-1:0)}function A(k){if(isNaN(k)||!isFinite(k))return O;if(k<0)return he(A(-k));const F=[];let L=1;for(let W=0;k>=L;W++)F[W]=k/L|0,L*=4294967296;return new _(F,0)}function b(k,F){if(k.length==0)throw Error("number format error: empty string");if(F=F||10,F<2||36<F)throw Error("radix out of range: "+F);if(k.charAt(0)=="-")return he(b(k.substring(1),F));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const L=A(Math.pow(F,8));let W=O;for(let Y=0;Y<k.length;Y+=8){var X=Math.min(8,k.length-Y);const H=parseInt(k.substring(Y,Y+X),F);X<8?(X=A(Math.pow(F,X)),W=W.j(X).add(A(H))):(W=W.j(L),W=W.add(A(H)))}return W}var O=T(0),V=T(1),G=T(16777216);a=_.prototype,a.m=function(){if(ie(this))return-he(this).m();let k=0,F=1;for(let L=0;L<this.g.length;L++){const W=this.i(L);k+=(W>=0?W:4294967296+W)*F,F*=4294967296}return k},a.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(ee(this))return"0";if(ie(this))return"-"+he(this).toString(k);const F=A(Math.pow(k,6));var L=this;let W="";for(;;){const X=Be(L,F).g;L=Le(L,X.j(F));let Y=((L.g.length>0?L.g[0]:L.h)>>>0).toString(k);if(L=X,ee(L))return Y+W;for(;Y.length<6;)Y="0"+Y;W=Y+W}},a.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function ee(k){if(k.h!=0)return!1;for(let F=0;F<k.g.length;F++)if(k.g[F]!=0)return!1;return!0}function ie(k){return k.h==-1}a.l=function(k){return k=Le(this,k),ie(k)?-1:ee(k)?0:1};function he(k){const F=k.g.length,L=[];for(let W=0;W<F;W++)L[W]=~k.g[W];return new _(L,~k.h).add(V)}a.abs=function(){return ie(this)?he(this):this},a.add=function(k){const F=Math.max(this.g.length,k.g.length),L=[];let W=0;for(let X=0;X<=F;X++){let Y=W+(this.i(X)&65535)+(k.i(X)&65535),H=(Y>>>16)+(this.i(X)>>>16)+(k.i(X)>>>16);W=H>>>16,Y&=65535,H&=65535,L[X]=H<<16|Y}return new _(L,L[L.length-1]&-2147483648?-1:0)};function Le(k,F){return k.add(he(F))}a.j=function(k){if(ee(this)||ee(k))return O;if(ie(this))return ie(k)?he(this).j(he(k)):he(he(this).j(k));if(ie(k))return he(this.j(he(k)));if(this.l(G)<0&&k.l(G)<0)return A(this.m()*k.m());const F=this.g.length+k.g.length,L=[];for(var W=0;W<2*F;W++)L[W]=0;for(W=0;W<this.g.length;W++)for(let X=0;X<k.g.length;X++){const Y=this.i(W)>>>16,H=this.i(W)&65535,qe=k.i(X)>>>16,le=k.i(X)&65535;L[2*W+2*X]+=H*le,be(L,2*W+2*X),L[2*W+2*X+1]+=Y*le,be(L,2*W+2*X+1),L[2*W+2*X+1]+=H*qe,be(L,2*W+2*X+1),L[2*W+2*X+2]+=Y*qe,be(L,2*W+2*X+2)}for(k=0;k<F;k++)L[k]=L[2*k+1]<<16|L[2*k];for(k=F;k<2*F;k++)L[k]=0;return new _(L,0)};function be(k,F){for(;(k[F]&65535)!=k[F];)k[F+1]+=k[F]>>>16,k[F]&=65535,F++}function me(k,F){this.g=k,this.h=F}function Be(k,F){if(ee(F))throw Error("division by zero");if(ee(k))return new me(O,O);if(ie(k))return F=Be(he(k),F),new me(he(F.g),he(F.h));if(ie(F))return F=Be(k,he(F)),new me(he(F.g),F.h);if(k.g.length>30){if(ie(k)||ie(F))throw Error("slowDivide_ only works with positive integers.");for(var L=V,W=F;W.l(k)<=0;)L=$e(L),W=$e(W);var X=xe(L,1),Y=xe(W,1);for(W=xe(W,2),L=xe(L,2);!ee(W);){var H=Y.add(W);H.l(k)<=0&&(X=X.add(L),Y=H),W=xe(W,1),L=xe(L,1)}return F=Le(k,X.j(F)),new me(X,F)}for(X=O;k.l(F)>=0;){for(L=Math.max(1,Math.floor(k.m()/F.m())),W=Math.ceil(Math.log(L)/Math.LN2),W=W<=48?1:Math.pow(2,W-48),Y=A(L),H=Y.j(F);ie(H)||H.l(k)>0;)L-=W,Y=A(L),H=Y.j(F);ee(Y)&&(Y=V),X=X.add(Y),k=Le(k,H)}return new me(X,k)}a.B=function(k){return Be(this,k).h},a.and=function(k){const F=Math.max(this.g.length,k.g.length),L=[];for(let W=0;W<F;W++)L[W]=this.i(W)&k.i(W);return new _(L,this.h&k.h)},a.or=function(k){const F=Math.max(this.g.length,k.g.length),L=[];for(let W=0;W<F;W++)L[W]=this.i(W)|k.i(W);return new _(L,this.h|k.h)},a.xor=function(k){const F=Math.max(this.g.length,k.g.length),L=[];for(let W=0;W<F;W++)L[W]=this.i(W)^k.i(W);return new _(L,this.h^k.h)};function $e(k){const F=k.g.length+1,L=[];for(let W=0;W<F;W++)L[W]=k.i(W)<<1|k.i(W-1)>>>31;return new _(L,k.h)}function xe(k,F){const L=F>>5;F%=32;const W=k.g.length-L,X=[];for(let Y=0;Y<W;Y++)X[Y]=F>0?k.i(Y+L)>>>F|k.i(Y+L+1)<<32-F:k.i(Y+L);return new _(X,k.h)}o.prototype.digest=o.prototype.A,o.prototype.reset=o.prototype.u,o.prototype.update=o.prototype.v,N_=o,_.prototype.add=_.prototype.add,_.prototype.multiply=_.prototype.j,_.prototype.modulo=_.prototype.B,_.prototype.compare=_.prototype.l,_.prototype.toNumber=_.prototype.m,_.prototype.toString=_.prototype.toString,_.prototype.getBits=_.prototype.i,_.fromNumber=A,_.fromString=b,co=_}).apply(typeof wy<"u"?wy:typeof self<"u"?self:typeof window<"u"?window:{});var kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var O_,Wc,D_,Yh,f0,M_,L_,P_;(function(){var a,e=Object.defineProperty;function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof kh=="object"&&kh];for(var S=0;S<p.length;++S){var N=p[S];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var o=n(this);function h(p,S){if(S)e:{var N=o;p=p.split(".");for(var U=0;U<p.length-1;U++){var se=p[U];if(!(se in N))break e;N=N[se]}p=p[p.length-1],U=N[p],S=S(U),S!=U&&S!=null&&e(N,p,{configurable:!0,writable:!0,value:S})}}h("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),h("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),h("Object.entries",function(p){return p||function(S){var N=[],U;for(U in S)Object.prototype.hasOwnProperty.call(S,U)&&N.push([U,S[U]]);return N}});var m=m||{},_=this||self;function v(p){var S=typeof p;return S=="object"&&p!=null||S=="function"}function T(p,S,N){return p.call.apply(p.bind,arguments)}function A(p,S,N){return A=T,A.apply(null,arguments)}function b(p,S){var N=Array.prototype.slice.call(arguments,1);return function(){var U=N.slice();return U.push.apply(U,arguments),p.apply(this,U)}}function O(p,S){function N(){}N.prototype=S.prototype,p.Z=S.prototype,p.prototype=new N,p.prototype.constructor=p,p.Ob=function(U,se,ye){for(var Me=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)Me[ut-2]=arguments[ut];return S.prototype[se].apply(U,Me)}}var V=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function G(p){const S=p.length;if(S>0){const N=Array(S);for(let U=0;U<S;U++)N[U]=p[U];return N}return[]}function ee(p,S){for(let U=1;U<arguments.length;U++){const se=arguments[U];var N=typeof se;if(N=N!="object"?N:se?Array.isArray(se)?"array":N:"null",N=="array"||N=="object"&&typeof se.length=="number"){N=p.length||0;const ye=se.length||0;p.length=N+ye;for(let Me=0;Me<ye;Me++)p[N+Me]=se[Me]}else p.push(se)}}class ie{constructor(S,N){this.i=S,this.j=N,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function he(p){_.setTimeout(()=>{throw p},0)}function Le(){var p=k;let S=null;return p.g&&(S=p.g,p.g=p.g.next,p.g||(p.h=null),S.next=null),S}class be{constructor(){this.h=this.g=null}add(S,N){const U=me.get();U.set(S,N),this.h?this.h.next=U:this.g=U,this.h=U}}var me=new ie(()=>new Be,p=>p.reset());class Be{constructor(){this.next=this.g=this.h=null}set(S,N){this.h=S,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let $e,xe=!1,k=new be,F=()=>{const p=Promise.resolve(void 0);$e=()=>{p.then(L)}};function L(){for(var p;p=Le();){try{p.h.call(p.g)}catch(N){he(N)}var S=me;S.j(p),S.h<100&&(S.h++,p.next=S.g,S.g=p)}xe=!1}function W(){this.u=this.u,this.C=this.C}W.prototype.u=!1,W.prototype.dispose=function(){this.u||(this.u=!0,this.N())},W.prototype[Symbol.dispose]=function(){this.dispose()},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function X(p,S){this.type=p,this.g=this.target=S,this.defaultPrevented=!1}X.prototype.h=function(){this.defaultPrevented=!0};var Y=(function(){if(!_.addEventListener||!Object.defineProperty)return!1;var p=!1,S=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const N=()=>{};_.addEventListener("test",N,S),_.removeEventListener("test",N,S)}catch{}return p})();function H(p){return/^[\s\xa0]*$/.test(p)}function qe(p,S){X.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,S)}O(qe,X),qe.prototype.init=function(p,S){const N=this.type=p.type,U=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=S,S=p.relatedTarget,S||(N=="mouseover"?S=p.fromElement:N=="mouseout"&&(S=p.toElement)),this.relatedTarget=S,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&qe.Z.h.call(this)},qe.prototype.h=function(){qe.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var le="closure_listenable_"+(Math.random()*1e6|0),J=0;function re(p,S,N,U,se){this.listener=p,this.proxy=null,this.src=S,this.type=N,this.capture=!!U,this.ha=se,this.key=++J,this.da=this.fa=!1}function ke(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function We(p,S,N){for(const U in p)S.call(N,p[U],U,p)}function Qe(p,S){for(const N in p)S.call(void 0,p[N],N,p)}function Z(p){const S={};for(const N in p)S[N]=p[N];return S}const pe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Oe(p,S){let N,U;for(let se=1;se<arguments.length;se++){U=arguments[se];for(N in U)p[N]=U[N];for(let ye=0;ye<pe.length;ye++)N=pe[ye],Object.prototype.hasOwnProperty.call(U,N)&&(p[N]=U[N])}}function Pe(p){this.src=p,this.g={},this.h=0}Pe.prototype.add=function(p,S,N,U,se){const ye=p.toString();p=this.g[ye],p||(p=this.g[ye]=[],this.h++);const Me=Ae(p,S,U,se);return Me>-1?(S=p[Me],N||(S.fa=!1)):(S=new re(S,this.src,ye,!!U,se),S.fa=N,p.push(S)),S};function et(p,S){const N=S.type;if(N in p.g){var U=p.g[N],se=Array.prototype.indexOf.call(U,S,void 0),ye;(ye=se>=0)&&Array.prototype.splice.call(U,se,1),ye&&(ke(S),p.g[N].length==0&&(delete p.g[N],p.h--))}}function Ae(p,S,N,U){for(let se=0;se<p.length;++se){const ye=p[se];if(!ye.da&&ye.listener==S&&ye.capture==!!N&&ye.ha==U)return se}return-1}var rt="closure_lm_"+(Math.random()*1e6|0),yt={};function qt(p,S,N,U,se){if(Array.isArray(S)){for(let ye=0;ye<S.length;ye++)qt(p,S[ye],N,U,se);return null}return N=Xt(N),p&&p[le]?p.J(S,N,v(U)?!!U.capture:!1,se):Yi(p,S,N,!1,U,se)}function Yi(p,S,N,U,se,ye){if(!S)throw Error("Invalid event type");const Me=v(se)?!!se.capture:!!se;let ut=pr(p);if(ut||(p[rt]=ut=new Pe(p)),N=ut.add(S,N,U,Me,ye),N.proxy)return N;if(U=On(),N.proxy=U,U.src=p,U.listener=N,p.addEventListener)Y||(se=Me),se===void 0&&(se=!1),p.addEventListener(S.toString(),U,se);else if(p.attachEvent)p.attachEvent(mi(S.toString()),U);else if(p.addListener&&p.removeListener)p.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return N}function On(){function p(N){return S.call(p.src,p.listener,N)}const S=Li;return p}function is(p,S,N,U,se){if(Array.isArray(S))for(var ye=0;ye<S.length;ye++)is(p,S[ye],N,U,se);else U=v(U)?!!U.capture:!!U,N=Xt(N),p&&p[le]?(p=p.i,ye=String(S).toString(),ye in p.g&&(S=p.g[ye],N=Ae(S,N,U,se),N>-1&&(ke(S[N]),Array.prototype.splice.call(S,N,1),S.length==0&&(delete p.g[ye],p.h--)))):p&&(p=pr(p))&&(S=p.g[S.toString()],p=-1,S&&(p=Ae(S,N,U,se)),(N=p>-1?S[p]:null)&&Tt(N))}function Tt(p){if(typeof p!="number"&&p&&!p.da){var S=p.src;if(S&&S[le])et(S.i,p);else{var N=p.type,U=p.proxy;S.removeEventListener?S.removeEventListener(N,U,p.capture):S.detachEvent?S.detachEvent(mi(N),U):S.addListener&&S.removeListener&&S.removeListener(U),(N=pr(S))?(et(N,p),N.h==0&&(N.src=null,S[rt]=null)):ke(p)}}}function mi(p){return p in yt?yt[p]:yt[p]="on"+p}function Li(p,S){if(p.da)p=!0;else{S=new qe(S,this);const N=p.listener,U=p.ha||p.src;p.fa&&Tt(p),p=N.call(U,S)}return p}function pr(p){return p=p[rt],p instanceof Pe?p:null}var Dn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Xt(p){return typeof p=="function"?p:(p[Dn]||(p[Dn]=function(S){return p.handleEvent(S)}),p[Dn])}function tt(){W.call(this),this.i=new Pe(this),this.M=this,this.G=null}O(tt,W),tt.prototype[le]=!0,tt.prototype.removeEventListener=function(p,S,N,U){is(this,p,S,N,U)};function Tn(p,S){var N,U=p.G;if(U)for(N=[];U;U=U.G)N.push(U);if(p=p.M,U=S.type||S,typeof S=="string")S=new X(S,p);else if(S instanceof X)S.target=S.target||p;else{var se=S;S=new X(U,p),Oe(S,se)}se=!0;let ye,Me;if(N)for(Me=N.length-1;Me>=0;Me--)ye=S.g=N[Me],se=Fe(ye,U,!0,S)&&se;if(ye=S.g=p,se=Fe(ye,U,!0,S)&&se,se=Fe(ye,U,!1,S)&&se,N)for(Me=0;Me<N.length;Me++)ye=S.g=N[Me],se=Fe(ye,U,!1,S)&&se}tt.prototype.N=function(){if(tt.Z.N.call(this),this.i){var p=this.i;for(const S in p.g){const N=p.g[S];for(let U=0;U<N.length;U++)ke(N[U]);delete p.g[S],p.h--}}this.G=null},tt.prototype.J=function(p,S,N,U){return this.i.add(String(p),S,!1,N,U)},tt.prototype.K=function(p,S,N,U){return this.i.add(String(p),S,!0,N,U)};function Fe(p,S,N,U){if(S=p.i.g[String(S)],!S)return!0;S=S.concat();let se=!0;for(let ye=0;ye<S.length;++ye){const Me=S[ye];if(Me&&!Me.da&&Me.capture==N){const ut=Me.listener,Rn=Me.ha||Me.src;Me.fa&&et(p.i,Me),se=ut.call(Rn,U)!==!1&&se}}return se&&!U.defaultPrevented}function xa(p,S){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=A(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:_.setTimeout(p,S||0)}function wo(p){p.g=xa(()=>{p.g=null,p.i&&(p.i=!1,wo(p))},p.l);const S=p.h;p.h=null,p.m.apply(null,S)}class En extends W{constructor(S,N){super(),this.m=S,this.l=N,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:wo(this)}N(){super.N(),this.g&&(_.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rs(p){W.call(this),this.h=p,this.g={}}O(rs,W);var pi=[];function Aa(p){We(p.g,function(S,N){this.g.hasOwnProperty(N)&&Tt(S)},p),p.g={}}rs.prototype.N=function(){rs.Z.N.call(this),Aa(this)},rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yi=_.JSON.stringify,si=_.JSON.parse,To=class{stringify(p){return _.JSON.stringify(p,void 0)}parse(p){return _.JSON.parse(p,void 0)}};function Ps(){}function ll(){}var Yt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Re(){X.call(this,"d")}O(Re,X);function Wt(){X.call(this,"c")}O(Wt,X);var ot={},fn=null;function Br(){return fn=fn||new tt}ot.Ia="serverreachability";function wa(p){X.call(this,ot.Ia,p)}O(wa,X);function yr(p){const S=Br();Tn(S,new wa(S))}ot.STAT_EVENT="statevent";function wt(p,S){X.call(this,ot.STAT_EVENT,p),this.stat=S}O(wt,X);function ln(p){const S=Br();Tn(S,new wt(S,p))}ot.Ja="timingevent";function Er(p,S){X.call(this,ot.Ja,p),this.size=S}O(Er,X);function _r(p,S){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return _.setTimeout(function(){p()},S)}function Mn(){this.g=!0}Mn.prototype.ua=function(){this.g=!1};function Co(p,S,N,U,se,ye){p.info(function(){if(p.g)if(ye){var Me="",ut=ye.split("&");for(let Ut=0;Ut<ut.length;Ut++){var Rn=ut[Ut].split("=");if(Rn.length>1){const gn=Rn[0];Rn=Rn[1];const Zi=gn.split("_");Me=Zi.length>=2&&Zi[1]=="type"?Me+(gn+"="+Rn+"&"):Me+(gn+"=redacted&")}}}else Me=null;else Me=ye;return"XMLHTTP REQ ("+U+") [attempt "+se+"]: "+S+`
`+N+`
`+Me})}function qn(p,S,N,U,se,ye,Me){p.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+se+"]: "+S+`
`+N+`
`+ye+" "+Me})}function Ei(p,S,N,U){p.info(function(){return"XMLHTTP TEXT ("+S+"): "+ir(p,N)+(U?" "+U:"")})}function kr(p,S){p.info(function(){return"TIMEOUT: "+S})}Mn.prototype.info=function(){};function ir(p,S){if(!p.g)return S;if(!S)return null;try{const ye=JSON.parse(S);if(ye){for(p=0;p<ye.length;p++)if(Array.isArray(ye[p])){var N=ye[p];if(!(N.length<2)){var U=N[1];if(Array.isArray(U)&&!(U.length<1)){var se=U[0];if(se!="noop"&&se!="stop"&&se!="close")for(let Me=1;Me<U.length;Me++)U[Me]=""}}}}return yi(ye)}catch{return S}}var Bs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},xr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ks;function Vn(){}O(Vn,Ps),Vn.prototype.g=function(){return new XMLHttpRequest},ks=new Vn;function _i(p){return encodeURIComponent(String(p))}function xi(p){var S=1;p=p.split(":");const N=[];for(;S>0&&p.length;)N.push(p.shift()),S--;return p.length&&N.push(p.join(":")),N}function Ve(p,S,N,U){this.j=p,this.i=S,this.l=N,this.S=U||1,this.V=new rs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ui}function ui(){this.i=null,this.g="",this.h=!1}var Cn={},Ht={};function Ai(p,S,N){p.M=1,p.A=Bi(Sn(S)),p.u=N,p.R=!0,ss(p,null)}function ss(p,S){p.F=Date.now(),Vr(p),p.B=Sn(p.A);var N=p.B,U=p.S;Array.isArray(U)||(U=[String(U)]),$t(N.i,"t",U),p.C=0,N=p.j.L,p.h=new ui,p.g=Ia(p.j,N?S:null,!p.u),p.P>0&&(p.O=new En(A(p.Y,p,p.g),p.P)),S=p.V,N=p.g,U=p.ba;var se="readystatechange";Array.isArray(se)||(se&&(pi[0]=se.toString()),se=pi);for(let ye=0;ye<se.length;ye++){const Me=qt(N,se[ye],U||S.handleEvent,!1,S.h||S);if(!Me)break;S.g[Me.key]=Me}S=p.J?Z(p.J):{},p.u?(p.v||(p.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,S)):(p.v="GET",p.g.ea(p.B,p.v,null,S)),yr(),Co(p.i,p.v,p.B,p.l,p.S,p.u)}Ve.prototype.ba=function(p){p=p.target;const S=this.O;S&&ar(p)==3?S.j():this.Y(p)},Ve.prototype.Y=function(p){try{if(p==this.g)e:{const ut=ar(this.g),Rn=this.g.ya(),Ut=this.g.ca();if(!(ut<3)&&(ut!=3||this.g&&(this.h.h||this.g.la()||Bn(this.g)))){this.K||ut!=4||Rn==7||(Rn==8||Ut<=0?yr(3):yr(2)),pn(this);var S=this.g.ca();this.X=S;var N=Ta(this);if(this.o=S==200,qn(this.i,this.v,this.B,this.l,this.S,ut,S),this.o){if(this.U&&!this.L){t:{if(this.g){var U,se=this.g;if((U=se.g?se.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(U)){var ye=U;break t}}ye=null}if(p=ye)Ei(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ai(this,p);else{this.o=!1,this.m=3,ln(12),Pi(this),St(this);break e}}if(this.R){p=!0;let gn;for(;!this.K&&this.C<N.length;)if(gn=cl(this,N),gn==Ht){ut==4&&(this.m=4,ln(14),p=!1),Ei(this.i,this.l,null,"[Incomplete Response]");break}else if(gn==Cn){this.m=4,ln(15),Ei(this.i,this.l,N,"[Invalid Chunk]"),p=!1;break}else Ei(this.i,this.l,gn,null),ai(this,gn);if(Wi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||N.length!=0||this.h.h||(this.m=1,ln(16),p=!1),this.o=this.o&&p,!p)Ei(this.i,this.l,N,"[Invalid Chunked Response]"),Pi(this),St(this);else if(N.length>0&&!this.W){this.W=!0;var Me=this.j;Me.g==this&&Me.aa&&!Me.P&&(Me.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),de(Me),Me.P=!0,ln(11))}}else Ei(this.i,this.l,N,null),ai(this,N);ut==4&&Pi(this),this.o&&!this.K&&(ut==4?Hs(this.j,this):(this.o=!1,Vr(this)))}else Qi(this.g),S==400&&N.indexOf("Unknown SID")>0?(this.m=3,ln(12)):(this.m=0,ln(13)),Pi(this),St(this)}}}catch{}finally{}};function Ta(p){if(!Wi(p))return p.g.la();const S=Bn(p.g);if(S==="")return"";let N="";const U=S.length,se=ar(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return Pi(p),St(p),"";p.h.i=new _.TextDecoder}for(let ye=0;ye<U;ye++)p.h.h=!0,N+=p.h.i.decode(S[ye],{stream:!(se&&ye==U-1)});return S.length=0,p.h.g+=N,p.C=0,p.h.g}function Wi(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function cl(p,S){var N=p.C,U=S.indexOf(`
`,N);return U==-1?Ht:(N=Number(S.substring(N,U)),isNaN(N)?Cn:(U+=1,U+N>S.length?Ht:(S=S.slice(U,U+N),p.C=U+N,S)))}Ve.prototype.cancel=function(){this.K=!0,Pi(this)};function Vr(p){p.T=Date.now()+p.H,wi(p,p.H)}function wi(p,S){if(p.D!=null)throw Error("WatchDog timer not null");p.D=_r(A(p.aa,p),S)}function pn(p){p.D&&(_.clearTimeout(p.D),p.D=null)}Ve.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(kr(this.i,this.B),this.M!=2&&(yr(),ln(17)),Pi(this),this.m=2,St(this)):wi(this,this.T-p)};function St(p){p.j.I==0||p.K||Hs(p.j,p)}function Pi(p){pn(p);var S=p.O;S&&typeof S.dispose=="function"&&S.dispose(),p.O=null,Aa(p.V),p.g&&(S=p.g,p.g=null,S.abort(),S.dispose())}function ai(p,S){try{var N=p.j;if(N.I!=0&&(N.g==p||Ti(N.h,p))){if(!p.L&&Ti(N.h,p)&&N.I==3){try{var U=N.Ba.g.parse(S)}catch{U=null}if(Array.isArray(U)&&U.length==3){var se=U;if(se[0]==0){e:if(!N.v){if(N.g)if(N.g.F+3e3<p.F)bn(N),ls(N);else break e;js(N),ln(18)}}else N.xa=se[1],0<N.xa-N.K&&se[2]<37500&&N.F&&N.A==0&&!N.C&&(N.C=_r(A(N.Va,N),6e3));Gt(N.h)<=1&&N.ta&&(N.ta=void 0)}else zr(N,11)}else if((p.L||N.g==p)&&bn(N),!H(S))for(se=N.Ba.g.parse(S),S=0;S<se.length;S++){let Ut=se[S];const gn=Ut[0];if(!(gn<=N.K))if(N.K=gn,Ut=Ut[1],N.I==2)if(Ut[0]=="c"){N.M=Ut[1],N.ba=Ut[2];const Zi=Ut[3];Zi!=null&&(N.ka=Zi,N.j.info("VER="+N.ka));const Gr=Ut[4];Gr!=null&&(N.za=Gr,N.j.info("SVER="+N.za));const fi=Ut[5];fi!=null&&typeof fi=="number"&&fi>0&&(U=1.5*fi,N.O=U,N.j.info("backChannelRequestTimeoutMs_="+U)),U=N;const Ji=p.g;if(Ji){const qs=Ji.g?Ji.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qs){var ye=U.h;ye.g||qs.indexOf("spdy")==-1&&qs.indexOf("quic")==-1&&qs.indexOf("h2")==-1||(ye.j=ye.l,ye.g=new Set,ye.h&&(So(ye,ye.h),ye.h=null))}if(U.G){const qr=Ji.g?Ji.g.getResponseHeader("X-HTTP-Session-Id"):null;qr&&(U.wa=qr,st(U.J,U.G,qr))}}N.I=3,N.l&&N.l.ra(),N.aa&&(N.T=Date.now()-p.F,N.j.info("Handshake RTT: "+N.T+"ms")),U=N;var Me=p;if(U.na=hl(U,U.L?U.ba:null,U.W),Me.L){Dt(U.h,Me);var ut=Me,Rn=U.O;Rn&&(ut.H=Rn),ut.D&&(pn(ut),Vr(ut)),U.g=Me}else Cr(U);N.i.length>0&&Fr(N)}else Ut[0]!="stop"&&Ut[0]!="close"||zr(N,7);else N.I==3&&(Ut[0]=="stop"||Ut[0]=="close"?Ut[0]=="stop"?zr(N,7):va(N):Ut[0]!="noop"&&N.l&&N.l.qa(Ut),N.A=0)}}yr(4)}catch{}}var vn=class{constructor(p,S){this.g=p,this.map=S}};function ve(p){this.l=p||10,_.PerformanceNavigationTiming?(p=_.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(_.chrome&&_.chrome.loadTimes&&_.chrome.loadTimes()&&_.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function vo(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Gt(p){return p.h?1:p.g?p.g.size:0}function Ti(p,S){return p.h?p.h==S:p.g?p.g.has(S):!1}function So(p,S){p.g?p.g.add(S):p.h=S}function Dt(p,S){p.h&&p.h==S?p.h=null:p.g&&p.g.has(S)&&p.g.delete(S)}ve.prototype.cancel=function(){if(this.i=bt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function bt(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let S=p.i;for(const N of p.g.values())S=S.concat(N.G);return S}return G(p.i)}var xt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ms(p,S){if(p){p=p.split("&");for(let N=0;N<p.length;N++){const U=p[N].indexOf("=");let se,ye=null;U>=0?(se=p[N].substring(0,U),ye=p[N].substring(U+1)):se=p[N],S(se,ye?decodeURIComponent(ye.replace(/\+/g," ")):"")}}}function Ci(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;p instanceof Ci?(this.l=p.l,Ct(this,p.j),this.o=p.o,this.g=p.g,vi(this,p.u),this.h=p.h,bo(this,Io(p.i)),this.m=p.m):p&&(S=String(p).match(xt))?(this.l=!1,Ct(this,S[1]||"",!0),this.o=Ur(S[2]||""),this.g=Ur(S[3]||"",!0),vi(this,S[4]),this.h=Ur(S[5]||"",!0),bo(this,S[6]||"",!0),this.m=Ur(S[7]||"")):(this.l=!1,this.i=new Xn(null,this.l))}Ci.prototype.toString=function(){const p=[];var S=this.j;S&&p.push(rr(S,Ln,!0),":");var N=this.g;return(N||S=="file")&&(p.push("//"),(S=this.o)&&p.push(rr(S,Ln,!0),"@"),p.push(_i(N).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.u,N!=null&&p.push(":",String(N))),(N=this.h)&&(this.g&&N.charAt(0)!="/"&&p.push("/"),p.push(rr(N,N.charAt(0)=="/"?z:oe,!0))),(N=this.i.toString())&&p.push("?",N),(N=this.m)&&p.push("#",rr(N,Pn)),p.join("")},Ci.prototype.resolve=function(p){const S=Sn(this);let N=!!p.j;N?Ct(S,p.j):N=!!p.o,N?S.o=p.o:N=!!p.g,N?S.g=p.g:N=p.u!=null;var U=p.h;if(N)vi(S,p.u);else if(N=!!p.h){if(U.charAt(0)!="/")if(this.g&&!this.h)U="/"+U;else{var se=S.h.lastIndexOf("/");se!=-1&&(U=S.h.slice(0,se+1)+U)}if(se=U,se==".."||se==".")U="";else if(se.indexOf("./")!=-1||se.indexOf("/.")!=-1){U=se.lastIndexOf("/",0)==0,se=se.split("/");const ye=[];for(let Me=0;Me<se.length;){const ut=se[Me++];ut=="."?U&&Me==se.length&&ye.push(""):ut==".."?((ye.length>1||ye.length==1&&ye[0]!="")&&ye.pop(),U&&Me==se.length&&ye.push("")):(ye.push(ut),U=!0)}U=ye.join("/")}else U=se}return N?S.h=U:N=p.i.toString()!=="",N?bo(S,Io(p.i)):N=!!p.m,N&&(S.m=p.m),S};function Sn(p){return new Ci(p)}function Ct(p,S,N){p.j=N?Ur(S,!0):S,p.j&&(p.j=p.j.replace(/:$/,""))}function vi(p,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);p.u=S}else p.u=null}function bo(p,S,N){S instanceof Xn?(p.i=S,ys(p.i,p.l)):(N||(S=rr(S,He)),p.i=new Xn(S,p.l))}function st(p,S,N){p.i.set(S,N)}function Bi(p){return st(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function Ur(p,S){return p?S?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function rr(p,S,N){return typeof p=="string"?(p=encodeURI(p).replace(S,Et),N&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Et(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Ln=/[#\/\?@]/g,oe=/[#\?:]/g,z=/[#\?]/g,He=/[#\?@]/g,Pn=/#/g;function Xn(p,S){this.h=this.g=null,this.i=p||null,this.j=!!S}function ki(p){p.g||(p.g=new Map,p.h=0,p.i&&ms(p.i,function(S,N){p.add(decodeURIComponent(S.replace(/\+/g," ")),N)}))}a=Xn.prototype,a.add=function(p,S){ki(this),this.i=null,p=ps(this,p);let N=this.g.get(p);return N||this.g.set(p,N=[]),N.push(S),this.h+=1,this};function Ca(p,S){ki(p),S=ps(p,S),p.g.has(S)&&(p.i=null,p.h-=p.g.get(S).length,p.g.delete(S))}function hi(p,S){return ki(p),S=ps(p,S),p.g.has(S)}a.forEach=function(p,S){ki(this),this.g.forEach(function(N,U){N.forEach(function(se){p.call(S,se,U,this)},this)},this)};function Ye(p,S){ki(p);let N=[];if(typeof S=="string")hi(p,S)&&(N=N.concat(p.g.get(ps(p,S))));else for(p=Array.from(p.g.values()),S=0;S<p.length;S++)N=N.concat(p[S]);return N}a.set=function(p,S){return ki(this),this.i=null,p=ps(this,p),hi(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[S]),this.h+=1,this},a.get=function(p,S){return p?(p=Ye(this,p),p.length>0?String(p[0]):S):S};function $t(p,S,N){Ca(p,S),N.length>0&&(p.i=null,p.g.set(ps(p,S),G(N)),p.h+=N.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],S=Array.from(this.g.keys());for(let U=0;U<S.length;U++){var N=S[U];const se=_i(N);N=Ye(this,N);for(let ye=0;ye<N.length;ye++){let Me=se;N[ye]!==""&&(Me+="="+_i(N[ye])),p.push(Me)}}return this.i=p.join("&")};function Io(p){const S=new Xn;return S.i=p.i,p.g&&(S.g=new Map(p.g),S.h=p.h),S}function ps(p,S){return S=String(S),p.j&&(S=S.toLowerCase()),S}function ys(p,S){S&&!p.j&&(ki(p),p.i=null,p.g.forEach(function(N,U){const se=U.toLowerCase();U!=se&&(Ca(this,U),$t(this,se,N))},p)),p.j=S}function Vi(p,S){const N=new Mn;if(_.Image){const U=new Image;U.onload=b(sr,N,"TestLoadImage: loaded",!0,S,U),U.onerror=b(sr,N,"TestLoadImage: error",!1,S,U),U.onabort=b(sr,N,"TestLoadImage: abort",!1,S,U),U.ontimeout=b(sr,N,"TestLoadImage: timeout",!1,S,U),_.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=p}else S(!1)}function Vs(p,S){const N=new Mn,U=new AbortController,se=setTimeout(()=>{U.abort(),sr(N,"TestPingServer: timeout",!1,S)},1e4);fetch(p,{signal:U.signal}).then(ye=>{clearTimeout(se),ye.ok?sr(N,"TestPingServer: ok",!0,S):sr(N,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(se),sr(N,"TestPingServer: error",!1,S)})}function sr(p,S,N,U,se){try{se&&(se.onload=null,se.onerror=null,se.onabort=null,se.ontimeout=null),U(N)}catch{}}function dn(){this.g=new To}function Ui(p){this.i=p.Sb||null,this.h=p.ab||!1}O(Ui,Ps),Ui.prototype.g=function(){return new Fi(this.i,this.h)};function Fi(p,S){tt.call(this),this.H=p,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}O(Fi,tt),a=Fi.prototype,a.open=function(p,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=S,this.readyState=1,it(this)},a.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(S.body=p),(this.H||_).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Es(this)),this.readyState=0},a.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,it(this)),this.g&&(this.readyState=3,it(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof _.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ke(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ke(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}a.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var S=p.value?p.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!p.done}))&&(this.response=this.responseText+=S)}p.done?Es(this):it(this),this.readyState==3&&Ke(this)}},a.Oa=function(p){this.g&&(this.response=this.responseText=p,Es(this))},a.Na=function(p){this.g&&(this.response=p,Es(this))},a.ga=function(){this.g&&Es(this)};function Es(p){p.readyState=4,p.l=null,p.j=null,p.B=null,it(p)}a.setRequestHeader=function(p,S){this.A.append(p,S)},a.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],S=this.h.entries();for(var N=S.next();!N.done;)N=N.value,p.push(N[0]+": "+N[1]),N=S.next();return p.join(`\r
`)};function it(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Fi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function en(p){let S="";return We(p,function(N,U){S+=U,S+=":",S+=N,S+=`\r
`}),S}function Us(p,S,N){e:{for(U in N){var U=!1;break e}U=!0}U||(N=en(N),typeof p=="string"?N!=null&&_i(N):st(p,S,N))}function Kt(p){tt.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}O(Kt,tt);var Ar=/^https?$/i,wr=["POST","PUT"];a=Kt.prototype,a.Fa=function(p){this.H=p},a.ea=function(p,S,N,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);S=S?S.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ks.g(),this.g.onreadystatechange=V(A(this.Ca,this));try{this.B=!0,this.g.open(S,String(p),!0),this.B=!1}catch(ye){Fs(this,ye);return}if(p=N||"",N=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var se in U)N.set(se,U[se]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const ye of U.keys())N.set(ye,U.get(ye));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(N.keys()).find(ye=>ye.toLowerCase()=="content-type"),se=_.FormData&&p instanceof _.FormData,!(Array.prototype.indexOf.call(wr,S,void 0)>=0)||U||se||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ye,Me]of N)this.g.setRequestHeader(ye,Me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(ye){Fs(this,ye)}};function Fs(p,S){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=S,p.o=5,as(p),Ki(p)}function as(p){p.A||(p.A=!0,Tn(p,"complete"),Tn(p,"error"))}a.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,Tn(this,"complete"),Tn(this,"abort"),Ki(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ki(this,!0)),Kt.Z.N.call(this)},a.Ca=function(){this.u||(this.B||this.v||this.j?Tr(this):this.Xa())},a.Xa=function(){Tr(this)};function Tr(p){if(p.h&&typeof m<"u"){if(p.v&&ar(p)==4)setTimeout(p.Ca.bind(p),0);else if(Tn(p,"readystatechange"),ar(p)==4){p.h=!1;try{const ye=p.ca();e:switch(ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var N;if(!(N=S)){var U;if(U=ye===0){let Me=String(p.D).match(xt)[1]||null;!Me&&_.self&&_.self.location&&(Me=_.self.location.protocol.slice(0,-1)),U=!Ar.test(Me?Me.toLowerCase():"")}N=U}if(N)Tn(p,"complete"),Tn(p,"success");else{p.o=6;try{var se=ar(p)>2?p.g.statusText:""}catch{se=""}p.l=se+" ["+p.ca()+"]",as(p)}}finally{Ki(p)}}}}function Ki(p,S){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const N=p.g;p.g=null,S||Tn(p,"ready");try{N.onreadystatechange=null}catch{}}}a.isActive=function(){return!!this.g};function ar(p){return p.g?p.g.readyState:0}a.ca=function(){try{return ar(this)>2?this.g.status:-1}catch{return-1}},a.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.La=function(p){if(this.g){var S=this.g.responseText;return p&&S.indexOf(p)==0&&(S=S.substring(p.length)),si(S)}};function Bn(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Qi(p){const S={};p=(p.g&&ar(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<p.length;U++){if(H(p[U]))continue;var N=xi(p[U]);const se=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const ye=S[se]||[];S[se]=ye,ye.push(N)}Qe(S,function(U){return U.join(", ")})}a.ya=function(){return this.o},a.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function _n(p,S,N){return N&&N.internalChannelParams&&N.internalChannelParams[p]||S}function os(p){this.za=0,this.i=[],this.j=new Mn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=_n("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=_n("baseRetryDelayMs",5e3,p),this.Za=_n("retryDelaySeedMs",1e4,p),this.Ta=_n("forwardChannelMaxRetries",2,p),this.va=_n("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new ve(p&&p.concurrentRequestLimit),this.Ba=new dn,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}a=os.prototype,a.ka=8,a.I=1,a.connect=function(p,S,N,U){ln(0),this.W=p,this.H=S||{},N&&U!==void 0&&(this.H.OSID=N,this.H.OAID=U),this.F=this.X,this.J=hl(this,null,this.W),Fr(this)};function va(p){if(Sa(p),p.I==3){var S=p.V++,N=Sn(p.J);if(st(N,"SID",p.M),st(N,"RID",S),st(N,"TYPE","terminate"),_s(p,N),S=new Ve(p,p.j,S),S.M=2,S.A=Bi(Sn(N)),N=!1,_.navigator&&_.navigator.sendBeacon)try{N=_.navigator.sendBeacon(S.A.toString(),"")}catch{}!N&&_.Image&&(new Image().src=S.A,N=!0),N||(S.g=Ia(S.j,null),S.g.ea(S.A)),S.F=Date.now(),Vr(S)}ul(p)}function ls(p){p.g&&(de(p),p.g.cancel(),p.g=null)}function Sa(p){ls(p),p.v&&(_.clearTimeout(p.v),p.v=null),bn(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&_.clearTimeout(p.m),p.m=null)}function Fr(p){if(!vo(p.h)&&!p.m){p.m=!0;var S=p.Ea;$e||F(),xe||($e(),xe=!0),k.add(S,p),p.D=0}}function ba(p,S){return Gt(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=S.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=_r(A(p.Ea,p,S),Ro(p,p.D)),p.D++,!0)}a.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const se=new Ve(this,this.j,p);let ye=this.o;if(this.U&&(ye?(ye=Z(ye),Oe(ye,this.U)):ye=this.U),this.u!==null||this.R||(se.J=ye,ye=null),this.S)e:{for(var S=0,N=0;N<this.i.length;N++){t:{var U=this.i[N];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(S+=U,S>4096){S=N;break e}if(S===4096||N===this.i.length-1){S=N+1;break e}}S=1e3}else S=1e3;S=zs(this,se,S),N=Sn(this.J),st(N,"RID",p),st(N,"CVER",22),this.G&&st(N,"X-HTTP-Session-Id",this.G),_s(this,N),ye&&(this.R?S="headers="+_i(en(ye))+"&"+S:this.u&&Us(N,this.u,ye)),So(this.h,se),this.Ra&&st(N,"TYPE","init"),this.S?(st(N,"$req",S),st(N,"SID","null"),se.U=!0,Ai(se,N,null)):Ai(se,N,S),this.I=2}}else this.I==3&&(p?zt(this,p):this.i.length==0||vo(this.h)||zt(this))};function zt(p,S){var N;S?N=S.l:N=p.V++;const U=Sn(p.J);st(U,"SID",p.M),st(U,"RID",N),st(U,"AID",p.K),_s(p,U),p.u&&p.o&&Us(U,p.u,p.o),N=new Ve(p,p.j,N,p.D+1),p.u===null&&(N.J=p.o),S&&(p.i=S.G.concat(p.i)),S=zs(p,N,1e3),N.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),So(p.h,N),Ai(N,U,S)}function _s(p,S){p.H&&We(p.H,function(N,U){st(S,U,N)}),p.l&&We({},function(N,U){st(S,U,N)})}function zs(p,S,N){N=Math.min(p.i.length,N);const U=p.l?A(p.l.Ka,p.l,p):null;e:{var se=p.i;let ut=-1;for(;;){const Rn=["count="+N];ut==-1?N>0?(ut=se[0].g,Rn.push("ofs="+ut)):ut=0:Rn.push("ofs="+ut);let Ut=!0;for(let gn=0;gn<N;gn++){var ye=se[gn].g;const Zi=se[gn].map;if(ye-=ut,ye<0)ut=Math.max(0,se[gn].g-100),Ut=!1;else try{ye="req"+ye+"_"||"";try{var Me=Zi instanceof Map?Zi:Object.entries(Zi);for(const[Gr,fi]of Me){let Ji=fi;v(fi)&&(Ji=yi(fi)),Rn.push(ye+Gr+"="+encodeURIComponent(Ji))}}catch(Gr){throw Rn.push(ye+"type="+encodeURIComponent("_badmap")),Gr}}catch{U&&U(Zi)}}if(Ut){Me=Rn.join("&");break e}}Me=void 0}return p=p.i.splice(0,N),S.G=p,Me}function Cr(p){if(!p.g&&!p.v){p.Y=1;var S=p.Da;$e||F(),xe||($e(),xe=!0),k.add(S,p),p.A=0}}function js(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=_r(A(p.Da,p),Ro(p,p.A)),p.A++,!0)}a.Da=function(){if(this.v=null,dt(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=_r(A(this.Wa,this),p)}},a.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ln(10),ls(this),dt(this))};function de(p){p.B!=null&&(_.clearTimeout(p.B),p.B=null)}function dt(p){p.g=new Ve(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var S=Sn(p.na);st(S,"RID","rpc"),st(S,"SID",p.M),st(S,"AID",p.K),st(S,"CI",p.F?"0":"1"),!p.F&&p.ia&&st(S,"TO",p.ia),st(S,"TYPE","xmlhttp"),_s(p,S),p.u&&p.o&&Us(S,p.u,p.o),p.O&&(p.g.H=p.O);var N=p.g;p=p.ba,N.M=1,N.A=Bi(Sn(S)),N.u=null,N.R=!0,ss(N,p)}a.Va=function(){this.C!=null&&(this.C=null,ls(this),js(this),ln(19))};function bn(p){p.C!=null&&(_.clearTimeout(p.C),p.C=null)}function Hs(p,S){var N=null;if(p.g==S){bn(p),de(p),p.g=null;var U=2}else if(Ti(p.h,S))N=S.G,Dt(p.h,S),U=1;else return;if(p.I!=0){if(S.o)if(U==1){N=S.u?S.u.length:0,S=Date.now()-S.F;var se=p.D;U=Br(),Tn(U,new Er(U,N)),Fr(p)}else Cr(p);else if(se=S.m,se==3||se==0&&S.X>0||!(U==1&&ba(p,S)||U==2&&js(p)))switch(N&&N.length>0&&(S=p.h,S.i=S.i.concat(N)),se){case 1:zr(p,5);break;case 4:zr(p,10);break;case 3:zr(p,6);break;default:zr(p,2)}}}function Ro(p,S){let N=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(N*=2),N*S}function zr(p,S){if(p.j.info("Error code "+S),S==2){var N=A(p.bb,p),U=p.Ua;const se=!U;U=new Ci(U||"//www.google.com/images/cleardot.gif"),_.location&&_.location.protocol=="http"||Ct(U,"https"),Bi(U),se?Vi(U.toString(),N):Vs(U.toString(),N)}else ln(2);p.I=0,p.l&&p.l.pa(S),ul(p),Sa(p)}a.bb=function(p){p?(this.j.info("Successfully pinged google.com"),ln(2)):(this.j.info("Failed to ping google.com"),ln(1))};function ul(p){if(p.I=0,p.ja=[],p.l){const S=bt(p.h);(S.length!=0||p.i.length!=0)&&(ee(p.ja,S),ee(p.ja,p.i),p.h.i.length=0,G(p.i),p.i.length=0),p.l.oa()}}function hl(p,S,N){var U=N instanceof Ci?Sn(N):new Ci(N);if(U.g!="")S&&(U.g=S+"."+U.g),vi(U,U.u);else{var se=_.location;U=se.protocol,S=S?S+"."+se.hostname:se.hostname,se=+se.port;const ye=new Ci(null);U&&Ct(ye,U),S&&(ye.g=S),se&&vi(ye,se),N&&(ye.h=N),U=ye}return N=p.G,S=p.wa,N&&S&&st(U,N,S),st(U,"VER",p.ka),_s(p,U),U}function Ia(p,S,N){if(S&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=p.Aa&&!p.ma?new Kt(new Ui({ab:N})):new Kt(p.ma),S.Fa(p.L),S}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function In(){}a=In.prototype,a.ra=function(){},a.qa=function(){},a.pa=function(){},a.oa=function(){},a.isActive=function(){return!0},a.Ka=function(){};function jr(){}jr.prototype.g=function(p,S){return new vt(p,S)};function vt(p,S){tt.call(this),this.g=new os(S),this.l=p,this.h=S&&S.messageUrlParams||null,p=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(p?p["X-WebChannel-Content-Type"]=S.messageContentType:p={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(p?p["X-WebChannel-Client-Profile"]=S.sa:p={"X-WebChannel-Client-Profile":S.sa}),this.g.U=p,(p=S&&S.Qb)&&!H(p)&&(this.g.u=p),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!H(S)&&(this.g.G=S,p=this.h,p!==null&&S in p&&(p=this.h,S in p&&delete p[S])),this.j=new It(this)}O(vt,tt),vt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vt.prototype.close=function(){va(this.g)},vt.prototype.o=function(p){var S=this.g;if(typeof p=="string"){var N={};N.__data__=p,p=N}else this.v&&(N={},N.__data__=yi(p),p=N);S.i.push(new vn(S.Ya++,p)),S.I==3&&Fr(S)},vt.prototype.N=function(){this.g.l=null,delete this.j,va(this.g),delete this.g,vt.Z.N.call(this)};function Gs(p){Re.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var S=p.__sm__;if(S){e:{for(const N in S){p=N;break e}p=void 0}(this.i=p)&&(p=this.i,S=S!==null&&p in S?S[p]:void 0),this.data=S}else this.data=p}O(Gs,Re);function Hr(){Wt.call(this),this.status=1}O(Hr,Wt);function It(p){this.g=p}O(It,In),It.prototype.ra=function(){Tn(this.g,"a")},It.prototype.qa=function(p){Tn(this.g,new Gs(p))},It.prototype.pa=function(p){Tn(this.g,new Hr)},It.prototype.oa=function(){Tn(this.g,"b")},jr.prototype.createWebChannel=jr.prototype.g,vt.prototype.send=vt.prototype.o,vt.prototype.open=vt.prototype.m,vt.prototype.close=vt.prototype.close,P_=function(){return new jr},L_=function(){return Br()},M_=ot,f0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Bs.NO_ERROR=0,Bs.TIMEOUT=8,Bs.HTTP_ERROR=6,Yh=Bs,xr.COMPLETE="complete",D_=xr,ll.EventType=Yt,Yt.OPEN="a",Yt.CLOSE="b",Yt.ERROR="c",Yt.MESSAGE="d",tt.prototype.listen=tt.prototype.J,Wc=ll,Kt.prototype.listenOnce=Kt.prototype.K,Kt.prototype.getLastError=Kt.prototype.Ha,Kt.prototype.getLastErrorCode=Kt.prototype.ya,Kt.prototype.getStatus=Kt.prototype.ca,Kt.prototype.getResponseJson=Kt.prototype.La,Kt.prototype.getResponseText=Kt.prototype.la,Kt.prototype.send=Kt.prototype.ea,Kt.prototype.setWithCredentials=Kt.prototype.Fa,O_=Kt}).apply(typeof kh<"u"?kh:typeof self<"u"?self:typeof window<"u"?window:{});const Ty="@firebase/firestore",Cy="4.9.2";class Hi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Hi.UNAUTHENTICATED=new Hi(null),Hi.GOOGLE_CREDENTIALS=new Hi("google-credentials-uid"),Hi.FIRST_PARTY=new Hi("first-party-uid"),Hi.MOCK_USER=new Hi("mock-user");let ac="12.3.0";const tl=new k0("@firebase/firestore");function Ul(){return tl.logLevel}function ze(a,...e){if(tl.logLevel<=Bt.DEBUG){const n=e.map(W0);tl.debug(`Firestore (${ac}): ${a}`,...n)}}function ya(a,...e){if(tl.logLevel<=Bt.ERROR){const n=e.map(W0);tl.error(`Firestore (${ac}): ${a}`,...n)}}function Zl(a,...e){if(tl.logLevel<=Bt.WARN){const n=e.map(W0);tl.warn(`Firestore (${ac}): ${a}`,...n)}}function W0(a){if(typeof a=="string")return a;try{return(function(n){return JSON.stringify(n)})(a)}catch{return a}}function ct(a,e,n){let o="Unexpected state";typeof e=="string"?o=e:n=e,B_(a,o,n)}function B_(a,e,n){let o=`FIRESTORE (${ac}) INTERNAL ASSERTION FAILED: ${e} (ID: ${a.toString(16)})`;if(n!==void 0)try{o+=" CONTEXT: "+JSON.stringify(n)}catch{o+=" CONTEXT: "+n}throw ya(o),new Error(o)}function rn(a,e,n,o){let h="Unexpected state";typeof n=="string"?h=n:o=n,a||B_(e,h,o)}function mt(a,e){return a}const Te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends _a{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ga{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class k_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Zv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Hi.UNAUTHENTICATED)))}shutdown(){}}class Jv{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class $v{constructor(e){this.t=e,this.currentUser=Hi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){rn(this.o===void 0,42304);let o=this.i;const h=T=>this.i!==o?(o=this.i,n(T)):Promise.resolve();let m=new ga;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new ga,e.enqueueRetryable((()=>h(this.currentUser)))};const _=()=>{const T=m;e.enqueueRetryable((async()=>{await T.promise,await h(this.currentUser)}))},v=T=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=T,this.o&&(this.auth.addAuthTokenListener(this.o),_())};this.t.onInit((T=>v(T))),setTimeout((()=>{if(!this.auth){const T=this.t.getImmediate({optional:!0});T?v(T):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),m.resolve(),m=new ga)}}),0),_()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((o=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(rn(typeof o.accessToken=="string",31837,{l:o}),new k_(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rn(e===null||typeof e=="string",2055,{h:e}),new Hi(e)}}class eS{constructor(e,n,o){this.P=e,this.T=n,this.I=o,this.type="FirstParty",this.user=Hi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tS{constructor(e,n,o){this.P=e,this.T=n,this.I=o}getToken(){return Promise.resolve(new eS(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Hi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class vy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nS{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,es(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){rn(this.o===void 0,3512);const o=m=>{m.error!=null&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const _=m.token!==this.m;return this.m=m.token,ze("FirebaseAppCheckTokenProvider",`Received ${_?"new":"existing"} token.`),_?n(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable((()=>o(m)))};const h=m=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((m=>h(m))),setTimeout((()=>{if(!this.appCheck){const m=this.V.getImmediate({optional:!0});m?h(m):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new vy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(rn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new vy(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function iS(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(a);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let o=0;o<a;o++)n[o]=Math.floor(256*Math.random());return n}class K0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const h=iS(40);for(let m=0;m<h.length;++m)o.length<20&&h[m]<n&&(o+=e.charAt(h[m]%62))}return o}}function kt(a,e){return a<e?-1:a>e?1:0}function d0(a,e){const n=Math.min(a.length,e.length);for(let o=0;o<n;o++){const h=a.charAt(o),m=e.charAt(o);if(h!==m)return W1(h)===W1(m)?kt(h,m):W1(h)?1:-1}return kt(a.length,e.length)}const rS=55296,sS=57343;function W1(a){const e=a.charCodeAt(0);return e>=rS&&e<=sS}function Jl(a,e,n){return a.length===e.length&&a.every(((o,h)=>n(o,e[h])))}const Sy="__name__";class vs{constructor(e,n,o){n===void 0?n=0:n>e.length&&ct(637,{offset:n,range:e.length}),o===void 0?o=e.length-n:o>e.length-n&&ct(1746,{length:o,range:e.length-n}),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return vs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof vs?e.forEach((o=>{n.push(o)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let h=0;h<o;h++){const m=vs.compareSegments(e.get(h),n.get(h));if(m!==0)return m}return kt(e.length,n.length)}static compareSegments(e,n){const o=vs.isNumericId(e),h=vs.isNumericId(n);return o&&!h?-1:!o&&h?1:o&&h?vs.extractNumericId(e).compare(vs.extractNumericId(n)):d0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return co.fromString(e.substring(4,e.length-2))}}class yn extends vs{construct(e,n,o){return new yn(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new Ue(Te.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter((h=>h.length>0)))}return new yn(n)}static emptyPath(){return new yn([])}}const aS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Di extends vs{construct(e,n,o){return new Di(e,n,o)}static isValidIdentifier(e){return aS.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Di.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Sy}static keyField(){return new Di([Sy])}static fromServerFormat(e){const n=[];let o="",h=0;const m=()=>{if(o.length===0)throw new Ue(Te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let _=!1;for(;h<e.length;){const v=e[h];if(v==="\\"){if(h+1===e.length)throw new Ue(Te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const T=e[h+1];if(T!=="\\"&&T!=="."&&T!=="`")throw new Ue(Te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=T,h+=2}else v==="`"?(_=!_,h++):v!=="."||_?(o+=v,h++):(m(),h++)}if(m(),_)throw new Ue(Te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Di(n)}static emptyPath(){return new Di([])}}class Je{constructor(e){this.path=e}static fromPath(e){return new Je(yn.fromString(e))}static fromName(e){return new Je(yn.fromString(e).popFirst(5))}static empty(){return new Je(yn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return yn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new yn(e.slice()))}}function V_(a,e,n){if(!n)throw new Ue(Te.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function oS(a,e,n,o){if(e===!0&&o===!0)throw new Ue(Te.INVALID_ARGUMENT,`${a} and ${n} cannot be used together.`)}function by(a){if(!Je.isDocumentKey(a))throw new Ue(Te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function Iy(a){if(Je.isDocumentKey(a))throw new Ue(Te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function U_(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}function Of(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(a);return e?`a custom ${e} object`:"an object"}}return typeof a=="function"?"a function":ct(12329,{type:typeof a})}function tr(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new Ue(Te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Of(a);throw new Ue(Te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return a}function ri(a,e){const n={typeString:a};return e&&(n.value=e),n}function xu(a,e){if(!U_(a))throw new Ue(Te.INVALID_ARGUMENT,"JSON must be an object");let n;for(const o in e)if(e[o]){const h=e[o].typeString,m="value"in e[o]?{value:e[o].value}:void 0;if(!(o in a)){n=`JSON missing required field: '${o}'`;break}const _=a[o];if(h&&typeof _!==h){n=`JSON field '${o}' must be a ${h}.`;break}if(m!==void 0&&_!==m.value){n=`Expected '${o}' field to equal '${m.value}'`;break}}if(n)throw new Ue(Te.INVALID_ARGUMENT,n);return!0}const Ry=-62135596800,Ny=1e6;class on{static now(){return on.fromMillis(Date.now())}static fromDate(e){return on.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor((e-1e3*n)*Ny);return new on(n,o)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ue(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ue(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Ry)throw new Ue(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ny}_compareTo(e){return this.seconds===e.seconds?kt(this.nanoseconds,e.nanoseconds):kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:on._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(xu(e,on._jsonSchema))return new on(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ry;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}on._jsonSchemaVersion="firestore/timestamp/1.0",on._jsonSchema={type:ri("string",on._jsonSchemaVersion),seconds:ri("number"),nanoseconds:ri("number")};class ft{static fromTimestamp(e){return new ft(e)}static min(){return new ft(new on(0,0))}static max(){return new ft(new on(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const lu=-1;function lS(a,e){const n=a.toTimestamp().seconds,o=a.toTimestamp().nanoseconds+1,h=ft.fromTimestamp(o===1e9?new on(n+1,0):new on(n,o));return new ho(h,Je.empty(),e)}function cS(a){return new ho(a.readTime,a.key,lu)}class ho{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new ho(ft.min(),Je.empty(),lu)}static max(){return new ho(ft.max(),Je.empty(),lu)}}function uS(a,e){let n=a.readTime.compareTo(e.readTime);return n!==0?n:(n=Je.comparator(a.documentKey,e.documentKey),n!==0?n:kt(a.largestBatchId,e.largestBatchId))}const hS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function oc(a){if(a.code!==Te.FAILED_PRECONDITION||a.message!==hS)throw a;ze("LocalStore","Unexpectedly lost primary lease")}class Se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ct(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Se(((o,h)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(o,h)},this.catchCallback=m=>{this.wrapFailure(n,m).next(o,h)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Se?n:Se.resolve(n)}catch(n){return Se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Se.reject(n)}static resolve(e){return new Se(((n,o)=>{n(e)}))}static reject(e){return new Se(((n,o)=>{o(e)}))}static waitFor(e){return new Se(((n,o)=>{let h=0,m=0,_=!1;e.forEach((v=>{++h,v.next((()=>{++m,_&&m===h&&n()}),(T=>o(T)))})),_=!0,m===h&&n()}))}static or(e){let n=Se.resolve(!1);for(const o of e)n=n.next((h=>h?Se.resolve(h):o()));return n}static forEach(e,n){const o=[];return e.forEach(((h,m)=>{o.push(n.call(this,h,m))})),this.waitFor(o)}static mapArray(e,n){return new Se(((o,h)=>{const m=e.length,_=new Array(m);let v=0;for(let T=0;T<m;T++){const A=T;n(e[A]).next((b=>{_[A]=b,++v,v===m&&o(_)}),(b=>h(b)))}}))}static doWhile(e,n){return new Se(((o,h)=>{const m=()=>{e()===!0?n().next((()=>{m()}),h):o()};m()}))}}function dS(a){const e=a.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function lc(a){return a.name==="IndexedDbTransactionError"}class Df{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>n.writeSequenceNumber(o))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Df.ce=-1;const Q0=-1;function Mf(a){return a==null}function lf(a){return a===0&&1/a==-1/0}function gS(a){return typeof a=="number"&&Number.isInteger(a)&&!lf(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}const F_="";function mS(a){let e="";for(let n=0;n<a.length;n++)e.length>0&&(e=Oy(e)),e=pS(a.get(n),e);return Oy(e)}function pS(a,e){let n=e;const o=a.length;for(let h=0;h<o;h++){const m=a.charAt(h);switch(m){case"\0":n+="";break;case F_:n+="";break;default:n+=m}}return n}function Oy(a){return a+F_+""}function Dy(a){let e=0;for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&e++;return e}function xo(a,e){for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&e(n,a[n])}function z_(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}class kn{constructor(e,n){this.comparator=e,this.root=n||Oi.EMPTY}insert(e,n){return new kn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Oi.BLACK,null,null))}remove(e){return new kn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Oi.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(o===0)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const h=this.comparator(e,o.key);if(h===0)return n+o.left.size;h<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,o)=>(e(n,o),!1)))}toString(){const e=[];return this.inorderTraversal(((n,o)=>(e.push(`${n}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vh(this.root,e,this.comparator,!0)}}class Vh{constructor(e,n,o,h){this.isReverse=h,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=n?o(e.key,n):1,n&&h&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(m===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Oi{constructor(e,n,o,h,m){this.key=e,this.value=n,this.color=o??Oi.RED,this.left=h??Oi.EMPTY,this.right=m??Oi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,h,m){return new Oi(e??this.key,n??this.value,o??this.color,h??this.left,m??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let h=this;const m=o(e,h.key);return h=m<0?h.copy(null,null,null,h.left.insert(e,n,o),null):m===0?h.copy(null,n,null,null,null):h.copy(null,null,null,null,h.right.insert(e,n,o)),h.fixUp()}removeMin(){if(this.left.isEmpty())return Oi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,h=this;if(n(e,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(e,n),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),n(e,h.key)===0){if(h.right.isEmpty())return Oi.EMPTY;o=h.right.min(),h=h.copy(o.key,o.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(e,n))}return h.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Oi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Oi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ct(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ct(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ct(27949);return e+(this.isRed()?0:1)}}Oi.EMPTY=null,Oi.RED=!0,Oi.BLACK=!1;Oi.EMPTY=new class{constructor(){this.size=0}get key(){throw ct(57766)}get value(){throw ct(16141)}get color(){throw ct(16727)}get left(){throw ct(29726)}get right(){throw ct(36894)}copy(e,n,o,h,m){return this}insert(e,n,o){return new Oi(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ci{constructor(e){this.comparator=e,this.data=new kn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,o)=>(e(n),!1)))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const h=o.getNext();if(this.comparator(h.key,e[1])>=0)return;n(h.key)}}forEachWhile(e,n){let o;for(o=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new My(this.data.getIterator())}getIteratorFrom(e){return new My(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((o=>{n=n.add(o)})),n}isEqual(e){if(!(e instanceof ci)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const h=n.getNext().key,m=o.getNext().key;if(this.comparator(h,m)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new ci(this.comparator);return n.data=e,n}}class My{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Pr{constructor(e){this.fields=e,e.sort(Di.comparator)}static empty(){return new Pr([])}unionWith(e){let n=new ci(Di.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new Pr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Jl(this.fields,e.fields,((n,o)=>n.isEqual(o)))}}class j_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Mi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(h){try{return atob(h)}catch(m){throw typeof DOMException<"u"&&m instanceof DOMException?new j_("Invalid base64 string: "+m):m}})(e);return new Mi(n)}static fromUint8Array(e){const n=(function(h){let m="";for(let _=0;_<h.length;++_)m+=String.fromCharCode(h[_]);return m})(e);return new Mi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const o=new Uint8Array(n.length);for(let h=0;h<n.length;h++)o[h]=n.charCodeAt(h);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mi.EMPTY_BYTE_STRING=new Mi("");const yS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fo(a){if(rn(!!a,39018),typeof a=="string"){let e=0;const n=yS.exec(a);if(rn(!!n,46558,{timestamp:a}),n[1]){let h=n[1];h=(h+"000000000").substr(0,9),e=Number(h)}const o=new Date(a);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Kn(a.seconds),nanos:Kn(a.nanos)}}function Kn(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function go(a){return typeof a=="string"?Mi.fromBase64String(a):Mi.fromUint8Array(a)}const H_="server_timestamp",G_="__type__",q_="__previous_value__",X_="__local_write_time__";function Z0(a){return(a?.mapValue?.fields||{})[G_]?.stringValue===H_}function Lf(a){const e=a.mapValue.fields[q_];return Z0(e)?Lf(e):e}function cu(a){const e=fo(a.mapValue.fields[X_].timestampValue);return new on(e.seconds,e.nanos)}class ES{constructor(e,n,o,h,m,_,v,T,A,b){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=h,this.ssl=m,this.forceLongPolling=_,this.autoDetectLongPolling=v,this.longPollingOptions=T,this.useFetchStreams=A,this.isUsingEmulator=b}}const cf="(default)";class uu{constructor(e,n){this.projectId=e,this.database=n||cf}static empty(){return new uu("","")}get isDefaultDatabase(){return this.database===cf}isEqual(e){return e instanceof uu&&e.projectId===this.projectId&&e.database===this.database}}const Y_="__type__",_S="__max__",Uh={mapValue:{}},W_="__vector__",uf="value";function mo(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?Z0(a)?4:AS(a)?9007199254740991:xS(a)?10:11:ct(28295,{value:a})}function Ms(a,e){if(a===e)return!0;const n=mo(a);if(n!==mo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return cu(a).isEqual(cu(e));case 3:return(function(h,m){if(typeof h.timestampValue=="string"&&typeof m.timestampValue=="string"&&h.timestampValue.length===m.timestampValue.length)return h.timestampValue===m.timestampValue;const _=fo(h.timestampValue),v=fo(m.timestampValue);return _.seconds===v.seconds&&_.nanos===v.nanos})(a,e);case 5:return a.stringValue===e.stringValue;case 6:return(function(h,m){return go(h.bytesValue).isEqual(go(m.bytesValue))})(a,e);case 7:return a.referenceValue===e.referenceValue;case 8:return(function(h,m){return Kn(h.geoPointValue.latitude)===Kn(m.geoPointValue.latitude)&&Kn(h.geoPointValue.longitude)===Kn(m.geoPointValue.longitude)})(a,e);case 2:return(function(h,m){if("integerValue"in h&&"integerValue"in m)return Kn(h.integerValue)===Kn(m.integerValue);if("doubleValue"in h&&"doubleValue"in m){const _=Kn(h.doubleValue),v=Kn(m.doubleValue);return _===v?lf(_)===lf(v):isNaN(_)&&isNaN(v)}return!1})(a,e);case 9:return Jl(a.arrayValue.values||[],e.arrayValue.values||[],Ms);case 10:case 11:return(function(h,m){const _=h.mapValue.fields||{},v=m.mapValue.fields||{};if(Dy(_)!==Dy(v))return!1;for(const T in _)if(_.hasOwnProperty(T)&&(v[T]===void 0||!Ms(_[T],v[T])))return!1;return!0})(a,e);default:return ct(52216,{left:a})}}function hu(a,e){return(a.values||[]).find((n=>Ms(n,e)))!==void 0}function $l(a,e){if(a===e)return 0;const n=mo(a),o=mo(e);if(n!==o)return kt(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return kt(a.booleanValue,e.booleanValue);case 2:return(function(m,_){const v=Kn(m.integerValue||m.doubleValue),T=Kn(_.integerValue||_.doubleValue);return v<T?-1:v>T?1:v===T?0:isNaN(v)?isNaN(T)?0:-1:1})(a,e);case 3:return Ly(a.timestampValue,e.timestampValue);case 4:return Ly(cu(a),cu(e));case 5:return d0(a.stringValue,e.stringValue);case 6:return(function(m,_){const v=go(m),T=go(_);return v.compareTo(T)})(a.bytesValue,e.bytesValue);case 7:return(function(m,_){const v=m.split("/"),T=_.split("/");for(let A=0;A<v.length&&A<T.length;A++){const b=kt(v[A],T[A]);if(b!==0)return b}return kt(v.length,T.length)})(a.referenceValue,e.referenceValue);case 8:return(function(m,_){const v=kt(Kn(m.latitude),Kn(_.latitude));return v!==0?v:kt(Kn(m.longitude),Kn(_.longitude))})(a.geoPointValue,e.geoPointValue);case 9:return Py(a.arrayValue,e.arrayValue);case 10:return(function(m,_){const v=m.fields||{},T=_.fields||{},A=v[uf]?.arrayValue,b=T[uf]?.arrayValue,O=kt(A?.values?.length||0,b?.values?.length||0);return O!==0?O:Py(A,b)})(a.mapValue,e.mapValue);case 11:return(function(m,_){if(m===Uh.mapValue&&_===Uh.mapValue)return 0;if(m===Uh.mapValue)return 1;if(_===Uh.mapValue)return-1;const v=m.fields||{},T=Object.keys(v),A=_.fields||{},b=Object.keys(A);T.sort(),b.sort();for(let O=0;O<T.length&&O<b.length;++O){const V=d0(T[O],b[O]);if(V!==0)return V;const G=$l(v[T[O]],A[b[O]]);if(G!==0)return G}return kt(T.length,b.length)})(a.mapValue,e.mapValue);default:throw ct(23264,{he:n})}}function Ly(a,e){if(typeof a=="string"&&typeof e=="string"&&a.length===e.length)return kt(a,e);const n=fo(a),o=fo(e),h=kt(n.seconds,o.seconds);return h!==0?h:kt(n.nanos,o.nanos)}function Py(a,e){const n=a.values||[],o=e.values||[];for(let h=0;h<n.length&&h<o.length;++h){const m=$l(n[h],o[h]);if(m)return m}return kt(n.length,o.length)}function ec(a){return g0(a)}function g0(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?(function(n){const o=fo(n);return`time(${o.seconds},${o.nanos})`})(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?(function(n){return go(n).toBase64()})(a.bytesValue):"referenceValue"in a?(function(n){return Je.fromName(n).toString()})(a.referenceValue):"geoPointValue"in a?(function(n){return`geo(${n.latitude},${n.longitude})`})(a.geoPointValue):"arrayValue"in a?(function(n){let o="[",h=!0;for(const m of n.values||[])h?h=!1:o+=",",o+=g0(m);return o+"]"})(a.arrayValue):"mapValue"in a?(function(n){const o=Object.keys(n.fields||{}).sort();let h="{",m=!0;for(const _ of o)m?m=!1:h+=",",h+=`${_}:${g0(n.fields[_])}`;return h+"}"})(a.mapValue):ct(61005,{value:a})}function Wh(a){switch(mo(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Lf(a);return e?16+Wh(e):16;case 5:return 2*a.stringValue.length;case 6:return go(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((h,m)=>h+Wh(m)),0)})(a.arrayValue);case 10:case 11:return(function(o){let h=0;return xo(o.fields,((m,_)=>{h+=m.length+Wh(_)})),h})(a.mapValue);default:throw ct(13486,{value:a})}}function By(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function m0(a){return!!a&&"integerValue"in a}function J0(a){return!!a&&"arrayValue"in a}function ky(a){return!!a&&"nullValue"in a}function Vy(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function Kh(a){return!!a&&"mapValue"in a}function xS(a){return(a?.mapValue?.fields||{})[Y_]?.stringValue===W_}function tu(a){if(a.geoPointValue)return{geoPointValue:{...a.geoPointValue}};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:{...a.timestampValue}};if(a.mapValue){const e={mapValue:{fields:{}}};return xo(a.mapValue.fields,((n,o)=>e.mapValue.fields[n]=tu(o))),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(a.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=tu(a.arrayValue.values[n]);return e}return{...a}}function AS(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue===_S}class mr{constructor(e){this.value=e}static empty(){return new mr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!Kh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=tu(n)}setAll(e){let n=Di.emptyPath(),o={},h=[];e.forEach(((_,v)=>{if(!n.isImmediateParentOf(v)){const T=this.getFieldsMap(n);this.applyChanges(T,o,h),o={},h=[],n=v.popLast()}_?o[v.lastSegment()]=tu(_):h.push(v.lastSegment())}));const m=this.getFieldsMap(n);this.applyChanges(m,o,h)}delete(e){const n=this.field(e.popLast());Kh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ms(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let h=n.mapValue.fields[e.get(o)];Kh(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=h),n=h}return n.mapValue.fields}applyChanges(e,n,o){xo(n,((h,m)=>e[h]=m));for(const h of o)delete e[h]}clone(){return new mr(tu(this.value))}}function K_(a){const e=[];return xo(a.fields,((n,o)=>{const h=new Di([n]);if(Kh(o)){const m=K_(o.mapValue).fields;if(m.length===0)e.push(h);else for(const _ of m)e.push(h.child(_))}else e.push(h)})),new Pr(e)}class qi{constructor(e,n,o,h,m,_,v){this.key=e,this.documentType=n,this.version=o,this.readTime=h,this.createTime=m,this.data=_,this.documentState=v}static newInvalidDocument(e){return new qi(e,0,ft.min(),ft.min(),ft.min(),mr.empty(),0)}static newFoundDocument(e,n,o,h){return new qi(e,1,n,ft.min(),o,h,0)}static newNoDocument(e,n){return new qi(e,2,n,ft.min(),ft.min(),mr.empty(),0)}static newUnknownDocument(e,n){return new qi(e,3,n,ft.min(),ft.min(),mr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ft.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ft.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class hf{constructor(e,n){this.position=e,this.inclusive=n}}function Uy(a,e,n){let o=0;for(let h=0;h<a.position.length;h++){const m=e[h],_=a.position[h];if(m.field.isKeyField()?o=Je.comparator(Je.fromName(_.referenceValue),n.key):o=$l(_,n.data.field(m.field)),m.dir==="desc"&&(o*=-1),o!==0)break}return o}function Fy(a,e){if(a===null)return e===null;if(e===null||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let n=0;n<a.position.length;n++)if(!Ms(a.position[n],e.position[n]))return!1;return!0}class ff{constructor(e,n="asc"){this.field=e,this.dir=n}}function wS(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}class Q_{}class ii extends Q_{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,o):new CS(e,n,o):n==="array-contains"?new bS(e,o):n==="in"?new IS(e,o):n==="not-in"?new RS(e,o):n==="array-contains-any"?new NS(e,o):new ii(e,n,o)}static createKeyFieldInFilter(e,n,o){return n==="in"?new vS(e,o):new SS(e,o)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison($l(n,this.value)):n!==null&&mo(this.value)===mo(n)&&this.matchesComparison($l(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ct(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gs extends Q_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new gs(e,n)}matches(e){return Z_(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Z_(a){return a.op==="and"}function J_(a){return TS(a)&&Z_(a)}function TS(a){for(const e of a.filters)if(e instanceof gs)return!1;return!0}function p0(a){if(a instanceof ii)return a.field.canonicalString()+a.op.toString()+ec(a.value);if(J_(a))return a.filters.map((e=>p0(e))).join(",");{const e=a.filters.map((n=>p0(n))).join(",");return`${a.op}(${e})`}}function $_(a,e){return a instanceof ii?(function(o,h){return h instanceof ii&&o.op===h.op&&o.field.isEqual(h.field)&&Ms(o.value,h.value)})(a,e):a instanceof gs?(function(o,h){return h instanceof gs&&o.op===h.op&&o.filters.length===h.filters.length?o.filters.reduce(((m,_,v)=>m&&$_(_,h.filters[v])),!0):!1})(a,e):void ct(19439)}function ex(a){return a instanceof ii?(function(n){return`${n.field.canonicalString()} ${n.op} ${ec(n.value)}`})(a):a instanceof gs?(function(n){return n.op.toString()+" {"+n.getFilters().map(ex).join(" ,")+"}"})(a):"Filter"}class CS extends ii{constructor(e,n,o){super(e,n,o),this.key=Je.fromName(o.referenceValue)}matches(e){const n=Je.comparator(e.key,this.key);return this.matchesComparison(n)}}class vS extends ii{constructor(e,n){super(e,"in",n),this.keys=tx("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class SS extends ii{constructor(e,n){super(e,"not-in",n),this.keys=tx("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function tx(a,e){return(e.arrayValue?.values||[]).map((n=>Je.fromName(n.referenceValue)))}class bS extends ii{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return J0(n)&&hu(n.arrayValue,this.value)}}class IS extends ii{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&hu(this.value.arrayValue,n)}}class RS extends ii{constructor(e,n){super(e,"not-in",n)}matches(e){if(hu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!hu(this.value.arrayValue,n)}}class NS extends ii{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!J0(n)||!n.arrayValue.values)&&n.arrayValue.values.some((o=>hu(this.value.arrayValue,o)))}}class OS{constructor(e,n=null,o=[],h=[],m=null,_=null,v=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=h,this.limit=m,this.startAt=_,this.endAt=v,this.Te=null}}function zy(a,e=null,n=[],o=[],h=null,m=null,_=null){return new OS(a,e,n,o,h,m,_)}function $0(a){const e=mt(a);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((o=>p0(o))).join(","),n+="|ob:",n+=e.orderBy.map((o=>(function(m){return m.field.canonicalString()+m.dir})(o))).join(","),Mf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((o=>ec(o))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((o=>ec(o))).join(",")),e.Te=n}return e.Te}function eg(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<a.orderBy.length;n++)if(!wS(a.orderBy[n],e.orderBy[n]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let n=0;n<a.filters.length;n++)if(!$_(a.filters[n],e.filters[n]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!Fy(a.startAt,e.startAt)&&Fy(a.endAt,e.endAt)}function y0(a){return Je.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}class Au{constructor(e,n=null,o=[],h=[],m=null,_="F",v=null,T=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=h,this.limit=m,this.limitType=_,this.startAt=v,this.endAt=T,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function DS(a,e,n,o,h,m,_,v){return new Au(a,e,n,o,h,m,_,v)}function Pf(a){return new Au(a)}function jy(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function nx(a){return a.collectionGroup!==null}function nu(a){const e=mt(a);if(e.Ie===null){e.Ie=[];const n=new Set;for(const m of e.explicitOrderBy)e.Ie.push(m),n.add(m.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(_){let v=new ci(Di.comparator);return _.filters.forEach((T=>{T.getFlattenedFilters().forEach((A=>{A.isInequality()&&(v=v.add(A.field))}))})),v})(e).forEach((m=>{n.has(m.canonicalString())||m.isKeyField()||e.Ie.push(new ff(m,o))})),n.has(Di.keyField().canonicalString())||e.Ie.push(new ff(Di.keyField(),o))}return e.Ie}function Rs(a){const e=mt(a);return e.Ee||(e.Ee=MS(e,nu(a))),e.Ee}function MS(a,e){if(a.limitType==="F")return zy(a.path,a.collectionGroup,e,a.filters,a.limit,a.startAt,a.endAt);{e=e.map((h=>{const m=h.dir==="desc"?"asc":"desc";return new ff(h.field,m)}));const n=a.endAt?new hf(a.endAt.position,a.endAt.inclusive):null,o=a.startAt?new hf(a.startAt.position,a.startAt.inclusive):null;return zy(a.path,a.collectionGroup,e,a.filters,a.limit,n,o)}}function E0(a,e){const n=a.filters.concat([e]);return new Au(a.path,a.collectionGroup,a.explicitOrderBy.slice(),n,a.limit,a.limitType,a.startAt,a.endAt)}function _0(a,e,n){return new Au(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,n,a.startAt,a.endAt)}function Bf(a,e){return eg(Rs(a),Rs(e))&&a.limitType===e.limitType}function ix(a){return`${$0(Rs(a))}|lt:${a.limitType}`}function Fl(a){return`Query(target=${(function(n){let o=n.path.canonicalString();return n.collectionGroup!==null&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map((h=>ex(h))).join(", ")}]`),Mf(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map((h=>(function(_){return`${_.field.canonicalString()} (${_.dir})`})(h))).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map((h=>ec(h))).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map((h=>ec(h))).join(",")),`Target(${o})`})(Rs(a))}; limitType=${a.limitType})`}function kf(a,e){return e.isFoundDocument()&&(function(o,h){const m=h.key.path;return o.collectionGroup!==null?h.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(m):Je.isDocumentKey(o.path)?o.path.isEqual(m):o.path.isImmediateParentOf(m)})(a,e)&&(function(o,h){for(const m of nu(o))if(!m.field.isKeyField()&&h.data.field(m.field)===null)return!1;return!0})(a,e)&&(function(o,h){for(const m of o.filters)if(!m.matches(h))return!1;return!0})(a,e)&&(function(o,h){return!(o.startAt&&!(function(_,v,T){const A=Uy(_,v,T);return _.inclusive?A<=0:A<0})(o.startAt,nu(o),h)||o.endAt&&!(function(_,v,T){const A=Uy(_,v,T);return _.inclusive?A>=0:A>0})(o.endAt,nu(o),h))})(a,e)}function LS(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function rx(a){return(e,n)=>{let o=!1;for(const h of nu(a)){const m=PS(h,e,n);if(m!==0)return m;o=o||h.field.isKeyField()}return 0}}function PS(a,e,n){const o=a.field.isKeyField()?Je.comparator(e.key,n.key):(function(m,_,v){const T=_.data.field(m),A=v.data.field(m);return T!==null&&A!==null?$l(T,A):ct(42886)})(a.field,e,n);switch(a.dir){case"asc":return o;case"desc":return-1*o;default:return ct(19790,{direction:a.dir})}}class sl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o!==void 0){for(const[h,m]of o)if(this.equalsFn(h,e))return m}}has(e){return this.get(e)!==void 0}set(e,n){const o=this.mapKeyFn(e),h=this.inner[o];if(h===void 0)return this.inner[o]=[[e,n]],void this.innerSize++;for(let m=0;m<h.length;m++)if(this.equalsFn(h[m][0],e))return void(h[m]=[e,n]);h.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o===void 0)return!1;for(let h=0;h<o.length;h++)if(this.equalsFn(o[h][0],e))return o.length===1?delete this.inner[n]:o.splice(h,1),this.innerSize--,!0;return!1}forEach(e){xo(this.inner,((n,o)=>{for(const[h,m]of o)e(h,m)}))}isEmpty(){return z_(this.inner)}size(){return this.innerSize}}const BS=new kn(Je.comparator);function Ea(){return BS}const sx=new kn(Je.comparator);function Kc(...a){let e=sx;for(const n of a)e=e.insert(n.key,n);return e}function ax(a){let e=sx;return a.forEach(((n,o)=>e=e.insert(n,o.overlayedDocument))),e}function Wo(){return iu()}function ox(){return iu()}function iu(){return new sl((a=>a.toString()),((a,e)=>a.isEqual(e)))}const kS=new kn(Je.comparator),VS=new ci(Je.comparator);function Vt(...a){let e=VS;for(const n of a)e=e.add(n);return e}const US=new ci(kt);function FS(){return US}function tg(a,e){if(a.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lf(e)?"-0":e}}function lx(a){return{integerValue:""+a}}function zS(a,e){return gS(e)?lx(e):tg(a,e)}class Vf{constructor(){this._=void 0}}function jS(a,e,n){return a instanceof df?(function(h,m){const _={fields:{[G_]:{stringValue:H_},[X_]:{timestampValue:{seconds:h.seconds,nanos:h.nanoseconds}}}};return m&&Z0(m)&&(m=Lf(m)),m&&(_.fields[q_]=m),{mapValue:_}})(n,e):a instanceof fu?ux(a,e):a instanceof du?hx(a,e):(function(h,m){const _=cx(h,m),v=Hy(_)+Hy(h.Ae);return m0(_)&&m0(h.Ae)?lx(v):tg(h.serializer,v)})(a,e)}function HS(a,e,n){return a instanceof fu?ux(a,e):a instanceof du?hx(a,e):n}function cx(a,e){return a instanceof gf?(function(o){return m0(o)||(function(m){return!!m&&"doubleValue"in m})(o)})(e)?e:{integerValue:0}:null}class df extends Vf{}class fu extends Vf{constructor(e){super(),this.elements=e}}function ux(a,e){const n=fx(e);for(const o of a.elements)n.some((h=>Ms(h,o)))||n.push(o);return{arrayValue:{values:n}}}class du extends Vf{constructor(e){super(),this.elements=e}}function hx(a,e){let n=fx(e);for(const o of a.elements)n=n.filter((h=>!Ms(h,o)));return{arrayValue:{values:n}}}class gf extends Vf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Hy(a){return Kn(a.integerValue||a.doubleValue)}function fx(a){return J0(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}function GS(a,e){return a.field.isEqual(e.field)&&(function(o,h){return o instanceof fu&&h instanceof fu||o instanceof du&&h instanceof du?Jl(o.elements,h.elements,Ms):o instanceof gf&&h instanceof gf?Ms(o.Ae,h.Ae):o instanceof df&&h instanceof df})(a.transform,e.transform)}class qS{constructor(e,n){this.version=e,this.transformResults=n}}class nr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new nr}static exists(e){return new nr(void 0,e)}static updateTime(e){return new nr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qh(a,e){return a.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(a.updateTime):a.exists===void 0||a.exists===e.isFoundDocument()}class Uf{}function dx(a,e){if(!a.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return a.isNoDocument()?new Ff(a.key,nr.none()):new wu(a.key,a.data,nr.none());{const n=a.data,o=mr.empty();let h=new ci(Di.comparator);for(let m of e.fields)if(!h.has(m)){let _=n.field(m);_===null&&m.length>1&&(m=m.popLast(),_=n.field(m)),_===null?o.delete(m):o.set(m,_),h=h.add(m)}return new Ao(a.key,o,new Pr(h.toArray()),nr.none())}}function XS(a,e,n){a instanceof wu?(function(h,m,_){const v=h.value.clone(),T=qy(h.fieldTransforms,m,_.transformResults);v.setAll(T),m.convertToFoundDocument(_.version,v).setHasCommittedMutations()})(a,e,n):a instanceof Ao?(function(h,m,_){if(!Qh(h.precondition,m))return void m.convertToUnknownDocument(_.version);const v=qy(h.fieldTransforms,m,_.transformResults),T=m.data;T.setAll(gx(h)),T.setAll(v),m.convertToFoundDocument(_.version,T).setHasCommittedMutations()})(a,e,n):(function(h,m,_){m.convertToNoDocument(_.version).setHasCommittedMutations()})(0,e,n)}function ru(a,e,n,o){return a instanceof wu?(function(m,_,v,T){if(!Qh(m.precondition,_))return v;const A=m.value.clone(),b=Xy(m.fieldTransforms,T,_);return A.setAll(b),_.convertToFoundDocument(_.version,A).setHasLocalMutations(),null})(a,e,n,o):a instanceof Ao?(function(m,_,v,T){if(!Qh(m.precondition,_))return v;const A=Xy(m.fieldTransforms,T,_),b=_.data;return b.setAll(gx(m)),b.setAll(A),_.convertToFoundDocument(_.version,b).setHasLocalMutations(),v===null?null:v.unionWith(m.fieldMask.fields).unionWith(m.fieldTransforms.map((O=>O.field)))})(a,e,n,o):(function(m,_,v){return Qh(m.precondition,_)?(_.convertToNoDocument(_.version).setHasLocalMutations(),null):v})(a,e,n)}function YS(a,e){let n=null;for(const o of a.fieldTransforms){const h=e.data.field(o.field),m=cx(o.transform,h||null);m!=null&&(n===null&&(n=mr.empty()),n.set(o.field,m))}return n||null}function Gy(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&!!(function(o,h){return o===void 0&&h===void 0||!(!o||!h)&&Jl(o,h,((m,_)=>GS(m,_)))})(a.fieldTransforms,e.fieldTransforms)&&(a.type===0?a.value.isEqual(e.value):a.type!==1||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask))}class wu extends Uf{constructor(e,n,o,h=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=h,this.type=0}getFieldMask(){return null}}class Ao extends Uf{constructor(e,n,o,h,m=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=h,this.fieldTransforms=m,this.type=1}getFieldMask(){return this.fieldMask}}function gx(a){const e=new Map;return a.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const o=a.data.field(n);e.set(n,o)}})),e}function qy(a,e,n){const o=new Map;rn(a.length===n.length,32656,{Re:n.length,Ve:a.length});for(let h=0;h<n.length;h++){const m=a[h],_=m.transform,v=e.data.field(m.field);o.set(m.field,HS(_,v,n[h]))}return o}function Xy(a,e,n){const o=new Map;for(const h of a){const m=h.transform,_=n.data.field(h.field);o.set(h.field,jS(m,_,e))}return o}class Ff extends Uf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WS extends Uf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class KS{constructor(e,n,o,h){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=h}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let h=0;h<this.mutations.length;h++){const m=this.mutations[h];m.key.isEqual(e.key)&&XS(m,e,o[h])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=ru(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=ru(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=ox();return this.mutations.forEach((h=>{const m=e.get(h.key),_=m.overlayedDocument;let v=this.applyToLocalView(_,m.mutatedFields);v=n.has(h.key)?null:v;const T=dx(_,v);T!==null&&o.set(h.key,T),_.isValidDocument()||_.convertToNoDocument(ft.min())})),o}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Vt())}isEqual(e){return this.batchId===e.batchId&&Jl(this.mutations,e.mutations,((n,o)=>Gy(n,o)))&&Jl(this.baseMutations,e.baseMutations,((n,o)=>Gy(n,o)))}}class ng{constructor(e,n,o,h){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=h}static from(e,n,o){rn(e.mutations.length===o.length,58842,{me:e.mutations.length,fe:o.length});let h=(function(){return kS})();const m=e.mutations;for(let _=0;_<m.length;_++)h=h.insert(m[_].key,o[_].version);return new ng(e,n,o,h)}}class QS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class ZS{constructor(e,n){this.count=e,this.unchangedNames=n}}var ti,jt;function JS(a){switch(a){case Te.OK:return ct(64938);case Te.CANCELLED:case Te.UNKNOWN:case Te.DEADLINE_EXCEEDED:case Te.RESOURCE_EXHAUSTED:case Te.INTERNAL:case Te.UNAVAILABLE:case Te.UNAUTHENTICATED:return!1;case Te.INVALID_ARGUMENT:case Te.NOT_FOUND:case Te.ALREADY_EXISTS:case Te.PERMISSION_DENIED:case Te.FAILED_PRECONDITION:case Te.ABORTED:case Te.OUT_OF_RANGE:case Te.UNIMPLEMENTED:case Te.DATA_LOSS:return!0;default:return ct(15467,{code:a})}}function mx(a){if(a===void 0)return ya("GRPC error has no .code"),Te.UNKNOWN;switch(a){case ti.OK:return Te.OK;case ti.CANCELLED:return Te.CANCELLED;case ti.UNKNOWN:return Te.UNKNOWN;case ti.DEADLINE_EXCEEDED:return Te.DEADLINE_EXCEEDED;case ti.RESOURCE_EXHAUSTED:return Te.RESOURCE_EXHAUSTED;case ti.INTERNAL:return Te.INTERNAL;case ti.UNAVAILABLE:return Te.UNAVAILABLE;case ti.UNAUTHENTICATED:return Te.UNAUTHENTICATED;case ti.INVALID_ARGUMENT:return Te.INVALID_ARGUMENT;case ti.NOT_FOUND:return Te.NOT_FOUND;case ti.ALREADY_EXISTS:return Te.ALREADY_EXISTS;case ti.PERMISSION_DENIED:return Te.PERMISSION_DENIED;case ti.FAILED_PRECONDITION:return Te.FAILED_PRECONDITION;case ti.ABORTED:return Te.ABORTED;case ti.OUT_OF_RANGE:return Te.OUT_OF_RANGE;case ti.UNIMPLEMENTED:return Te.UNIMPLEMENTED;case ti.DATA_LOSS:return Te.DATA_LOSS;default:return ct(39323,{code:a})}}(jt=ti||(ti={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";function $S(){return new TextEncoder}const eb=new co([4294967295,4294967295],0);function Yy(a){const e=$S().encode(a),n=new N_;return n.update(e),new Uint8Array(n.digest())}function Wy(a){const e=new DataView(a.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),h=e.getUint32(8,!0),m=e.getUint32(12,!0);return[new co([n,o],0),new co([h,m],0)]}class ig{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new Qc(`Invalid padding: ${n}`);if(o<0)throw new Qc(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new Qc(`Invalid hash count: ${o}`);if(e.length===0&&n!==0)throw new Qc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=co.fromNumber(this.ge)}ye(e,n,o){let h=e.add(n.multiply(co.fromNumber(o)));return h.compare(eb)===1&&(h=new co([h.getBits(0),h.getBits(1)],0)),h.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Yy(e),[o,h]=Wy(n);for(let m=0;m<this.hashCount;m++){const _=this.ye(o,h,m);if(!this.we(_))return!1}return!0}static create(e,n,o){const h=e%8==0?0:8-e%8,m=new Uint8Array(Math.ceil(e/8)),_=new ig(m,h,n);return o.forEach((v=>_.insert(v))),_}insert(e){if(this.ge===0)return;const n=Yy(e),[o,h]=Wy(n);for(let m=0;m<this.hashCount;m++){const _=this.ye(o,h,m);this.Se(_)}}Se(e){const n=Math.floor(e/8),o=e%8;this.bitmap[n]|=1<<o}}class Qc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class zf{constructor(e,n,o,h,m){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=h,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const h=new Map;return h.set(e,Tu.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new zf(ft.min(),h,new kn(kt),Ea(),Vt())}}class Tu{constructor(e,n,o,h,m){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=h,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new Tu(o,n,Vt(),Vt(),Vt())}}class Zh{constructor(e,n,o,h){this.be=e,this.removedTargetIds=n,this.key=o,this.De=h}}class px{constructor(e,n){this.targetId=e,this.Ce=n}}class yx{constructor(e,n,o=Mi.EMPTY_BYTE_STRING,h=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=h}}class Ky{constructor(){this.ve=0,this.Fe=Qy(),this.Me=Mi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Vt(),n=Vt(),o=Vt();return this.Fe.forEach(((h,m)=>{switch(m){case 0:e=e.add(h);break;case 2:n=n.add(h);break;case 1:o=o.add(h);break;default:ct(38017,{changeType:m})}})),new Tu(this.Me,this.xe,e,n,o)}qe(){this.Oe=!1,this.Fe=Qy()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,rn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class tb{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ea(),this.Je=Fh(),this.He=Fh(),this.Ye=new kn(kt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const o=this.nt(n);switch(e.state){case 0:this.rt(n)&&o.Le(e.resumeToken);break;case 1:o.Ke(),o.Ne||o.qe(),o.Le(e.resumeToken);break;case 2:o.Ke(),o.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(o.We(),o.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),o.Le(e.resumeToken));break;default:ct(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((o,h)=>{this.rt(h)&&n(h)}))}st(e){const n=e.targetId,o=e.Ce.count,h=this.ot(n);if(h){const m=h.target;if(y0(m))if(o===0){const _=new Je(m.path);this.et(n,_,qi.newNoDocument(_,ft.min()))}else rn(o===1,20013,{expectedCount:o});else{const _=this._t(n);if(_!==o){const v=this.ut(e),T=v?this.ct(v,e,_):1;if(T!==0){this.it(n);const A=T===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,A)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:h=0},hashCount:m=0}=n;let _,v;try{_=go(o).toUint8Array()}catch(T){if(T instanceof j_)return Zl("Decoding the base64 bloom filter in existence filter failed ("+T.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw T}try{v=new ig(_,h,m)}catch(T){return Zl(T instanceof Qc?"BloomFilter error: ":"Applying bloom filter failed: ",T),null}return v.ge===0?null:v}ct(e,n,o){return n.Ce.count===o-this.Pt(e,n.targetId)?0:2}Pt(e,n){const o=this.Ge.getRemoteKeysForTarget(n);let h=0;return o.forEach((m=>{const _=this.Ge.ht(),v=`projects/${_.projectId}/databases/${_.database}/documents/${m.path.canonicalString()}`;e.mightContain(v)||(this.et(n,m,null),h++)})),h}Tt(e){const n=new Map;this.ze.forEach(((m,_)=>{const v=this.ot(_);if(v){if(m.current&&y0(v.target)){const T=new Je(v.target.path);this.It(T).has(_)||this.Et(_,T)||this.et(_,T,qi.newNoDocument(T,e))}m.Be&&(n.set(_,m.ke()),m.qe())}}));let o=Vt();this.He.forEach(((m,_)=>{let v=!0;_.forEachWhile((T=>{const A=this.ot(T);return!A||A.purpose==="TargetPurposeLimboResolution"||(v=!1,!1)})),v&&(o=o.add(m))})),this.je.forEach(((m,_)=>_.setReadTime(e)));const h=new zf(e,n,this.Ye,this.je,o);return this.je=Ea(),this.Je=Fh(),this.He=Fh(),this.Ye=new kn(kt),h}Xe(e,n){if(!this.rt(e))return;const o=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,o),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,o){if(!this.rt(e))return;const h=this.nt(e);this.Et(e,n)?h.Qe(n,1):h.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),o&&(this.je=this.je.insert(n,o))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Ky,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ci(kt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ci(kt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ze("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ky),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Fh(){return new kn(Je.comparator)}function Qy(){return new kn(Je.comparator)}const nb={asc:"ASCENDING",desc:"DESCENDING"},ib={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rb={and:"AND",or:"OR"};class sb{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function x0(a,e){return a.useProto3Json||Mf(e)?e:{value:e}}function mf(a,e){return a.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ex(a,e){return a.useProto3Json?e.toBase64():e.toUint8Array()}function ab(a,e){return mf(a,e.toTimestamp())}function Ns(a){return rn(!!a,49232),ft.fromTimestamp((function(n){const o=fo(n);return new on(o.seconds,o.nanos)})(a))}function rg(a,e){return A0(a,e).canonicalString()}function A0(a,e){const n=(function(h){return new yn(["projects",h.projectId,"databases",h.database])})(a).child("documents");return e===void 0?n:n.child(e)}function _x(a){const e=yn.fromString(a);return rn(Cx(e),10190,{key:e.toString()}),e}function w0(a,e){return rg(a.databaseId,e.path)}function K1(a,e){const n=_x(e);if(n.get(1)!==a.databaseId.projectId)throw new Ue(Te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+a.databaseId.projectId);if(n.get(3)!==a.databaseId.database)throw new Ue(Te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+a.databaseId.database);return new Je(Ax(n))}function xx(a,e){return rg(a.databaseId,e)}function ob(a){const e=_x(a);return e.length===4?yn.emptyPath():Ax(e)}function T0(a){return new yn(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function Ax(a){return rn(a.length>4&&a.get(4)==="documents",29091,{key:a.toString()}),a.popFirst(5)}function Zy(a,e,n){return{name:w0(a,e),fields:n.value.mapValue.fields}}function lb(a,e){let n;if("targetChange"in e){e.targetChange;const o=(function(A){return A==="NO_CHANGE"?0:A==="ADD"?1:A==="REMOVE"?2:A==="CURRENT"?3:A==="RESET"?4:ct(39313,{state:A})})(e.targetChange.targetChangeType||"NO_CHANGE"),h=e.targetChange.targetIds||[],m=(function(A,b){return A.useProto3Json?(rn(b===void 0||typeof b=="string",58123),Mi.fromBase64String(b||"")):(rn(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Mi.fromUint8Array(b||new Uint8Array))})(a,e.targetChange.resumeToken),_=e.targetChange.cause,v=_&&(function(A){const b=A.code===void 0?Te.UNKNOWN:mx(A.code);return new Ue(b,A.message||"")})(_);n=new yx(o,h,m,v||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const h=K1(a,o.document.name),m=Ns(o.document.updateTime),_=o.document.createTime?Ns(o.document.createTime):ft.min(),v=new mr({mapValue:{fields:o.document.fields}}),T=qi.newFoundDocument(h,m,_,v),A=o.targetIds||[],b=o.removedTargetIds||[];n=new Zh(A,b,T.key,T)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const h=K1(a,o.document),m=o.readTime?Ns(o.readTime):ft.min(),_=qi.newNoDocument(h,m),v=o.removedTargetIds||[];n=new Zh([],v,_.key,_)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const h=K1(a,o.document),m=o.removedTargetIds||[];n=new Zh([],m,h,null)}else{if(!("filter"in e))return ct(11601,{Rt:e});{e.filter;const o=e.filter;o.targetId;const{count:h=0,unchangedNames:m}=o,_=new ZS(h,m),v=o.targetId;n=new px(v,_)}}return n}function cb(a,e){let n;if(e instanceof wu)n={update:Zy(a,e.key,e.value)};else if(e instanceof Ff)n={delete:w0(a,e.key)};else if(e instanceof Ao)n={update:Zy(a,e.key,e.data),updateMask:Eb(e.fieldMask)};else{if(!(e instanceof WS))return ct(16599,{Vt:e.type});n={verify:w0(a,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((o=>(function(m,_){const v=_.transform;if(v instanceof df)return{fieldPath:_.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof fu)return{fieldPath:_.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof du)return{fieldPath:_.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof gf)return{fieldPath:_.field.canonicalString(),increment:v.Ae};throw ct(20930,{transform:_.transform})})(0,o)))),e.precondition.isNone||(n.currentDocument=(function(h,m){return m.updateTime!==void 0?{updateTime:ab(h,m.updateTime)}:m.exists!==void 0?{exists:m.exists}:ct(27497)})(a,e.precondition)),n}function ub(a,e){return a&&a.length>0?(rn(e!==void 0,14353),a.map((n=>(function(h,m){let _=h.updateTime?Ns(h.updateTime):Ns(m);return _.isEqual(ft.min())&&(_=Ns(m)),new qS(_,h.transformResults||[])})(n,e)))):[]}function hb(a,e){return{documents:[xx(a,e.path)]}}function fb(a,e){const n={structuredQuery:{}},o=e.path;let h;e.collectionGroup!==null?(h=o,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(h=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=xx(a,h);const m=(function(A){if(A.length!==0)return Tx(gs.create(A,"and"))})(e.filters);m&&(n.structuredQuery.where=m);const _=(function(A){if(A.length!==0)return A.map((b=>(function(V){return{field:zl(V.field),direction:mb(V.dir)}})(b)))})(e.orderBy);_&&(n.structuredQuery.orderBy=_);const v=x0(a,e.limit);return v!==null&&(n.structuredQuery.limit=v),e.startAt&&(n.structuredQuery.startAt=(function(A){return{before:A.inclusive,values:A.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(A){return{before:!A.inclusive,values:A.position}})(e.endAt)),{ft:n,parent:h}}function db(a){let e=ob(a.parent);const n=a.structuredQuery,o=n.from?n.from.length:0;let h=null;if(o>0){rn(o===1,65062);const b=n.from[0];b.allDescendants?h=b.collectionId:e=e.child(b.collectionId)}let m=[];n.where&&(m=(function(O){const V=wx(O);return V instanceof gs&&J_(V)?V.getFilters():[V]})(n.where));let _=[];n.orderBy&&(_=(function(O){return O.map((V=>(function(ee){return new ff(jl(ee.field),(function(he){switch(he){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(ee.direction))})(V)))})(n.orderBy));let v=null;n.limit&&(v=(function(O){let V;return V=typeof O=="object"?O.value:O,Mf(V)?null:V})(n.limit));let T=null;n.startAt&&(T=(function(O){const V=!!O.before,G=O.values||[];return new hf(G,V)})(n.startAt));let A=null;return n.endAt&&(A=(function(O){const V=!O.before,G=O.values||[];return new hf(G,V)})(n.endAt)),DS(e,h,_,m,v,"F",T,A)}function gb(a,e){const n=(function(h){switch(h){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ct(28987,{purpose:h})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wx(a){return a.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=jl(n.unaryFilter.field);return ii.create(o,"==",{doubleValue:NaN});case"IS_NULL":const h=jl(n.unaryFilter.field);return ii.create(h,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const m=jl(n.unaryFilter.field);return ii.create(m,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const _=jl(n.unaryFilter.field);return ii.create(_,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ct(61313);default:return ct(60726)}})(a):a.fieldFilter!==void 0?(function(n){return ii.create(jl(n.fieldFilter.field),(function(h){switch(h){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ct(58110);default:return ct(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(a):a.compositeFilter!==void 0?(function(n){return gs.create(n.compositeFilter.filters.map((o=>wx(o))),(function(h){switch(h){case"AND":return"and";case"OR":return"or";default:return ct(1026)}})(n.compositeFilter.op))})(a):ct(30097,{filter:a})}function mb(a){return nb[a]}function pb(a){return ib[a]}function yb(a){return rb[a]}function zl(a){return{fieldPath:a.canonicalString()}}function jl(a){return Di.fromServerFormat(a.fieldPath)}function Tx(a){return a instanceof ii?(function(n){if(n.op==="=="){if(Vy(n.value))return{unaryFilter:{field:zl(n.field),op:"IS_NAN"}};if(ky(n.value))return{unaryFilter:{field:zl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Vy(n.value))return{unaryFilter:{field:zl(n.field),op:"IS_NOT_NAN"}};if(ky(n.value))return{unaryFilter:{field:zl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zl(n.field),op:pb(n.op),value:n.value}}})(a):a instanceof gs?(function(n){const o=n.getFilters().map((h=>Tx(h)));return o.length===1?o[0]:{compositeFilter:{op:yb(n.op),filters:o}}})(a):ct(54877,{filter:a})}function Eb(a){const e=[];return a.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Cx(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}class ro{constructor(e,n,o,h,m=ft.min(),_=ft.min(),v=Mi.EMPTY_BYTE_STRING,T=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=h,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=_,this.resumeToken=v,this.expectedCount=T}withSequenceNumber(e){return new ro(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class _b{constructor(e){this.yt=e}}function xb(a){const e=db({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?_0(e,e.limit,"L"):e}class Ab{constructor(){this.Cn=new wb}addToCollectionParentIndex(e,n){return this.Cn.add(n),Se.resolve()}getCollectionParents(e,n){return Se.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Se.resolve()}deleteFieldIndex(e,n){return Se.resolve()}deleteAllFieldIndexes(e){return Se.resolve()}createTargetIndexes(e,n){return Se.resolve()}getDocumentsMatchingTarget(e,n){return Se.resolve(null)}getIndexType(e,n){return Se.resolve(0)}getFieldIndexes(e,n){return Se.resolve([])}getNextCollectionGroupToUpdate(e){return Se.resolve(null)}getMinOffset(e,n){return Se.resolve(ho.min())}getMinOffsetFromCollectionGroup(e,n){return Se.resolve(ho.min())}updateCollectionGroup(e,n,o){return Se.resolve()}updateIndexEntries(e,n){return Se.resolve()}}class wb{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),h=this.index[n]||new ci(yn.comparator),m=!h.has(o);return this.index[n]=h.add(o),m}has(e){const n=e.lastSegment(),o=e.popLast(),h=this.index[n];return h&&h.has(o)}getEntries(e){return(this.index[e]||new ci(yn.comparator)).toArray()}}const Jy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vx=41943040;class gr{static withCacheSize(e){return new gr(e,gr.DEFAULT_COLLECTION_PERCENTILE,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}}gr.DEFAULT_COLLECTION_PERCENTILE=10,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gr.DEFAULT=new gr(vx,gr.DEFAULT_COLLECTION_PERCENTILE,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gr.DISABLED=new gr(-1,0,0);class tc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new tc(0)}static cr(){return new tc(-1)}}const $y="LruGarbageCollector",Tb=1048576;function eE([a,e],[n,o]){const h=kt(a,n);return h===0?kt(e,o):h}class Cb{constructor(e){this.Ir=e,this.buffer=new ci(eE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();eE(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class vb{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ze($y,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){lc(n)?ze($y,"Ignoring IndexedDB error during garbage collection: ",n):await oc(n)}await this.Vr(3e5)}))}}class Sb{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((o=>Math.floor(n/100*o)))}nthSequenceNumber(e,n){if(n===0)return Se.resolve(Df.ce);const o=new Cb(n);return this.mr.forEachTarget(e,(h=>o.Ar(h.sequenceNumber))).next((()=>this.mr.pr(e,(h=>o.Ar(h))))).next((()=>o.maxValue))}removeTargets(e,n,o){return this.mr.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),Se.resolve(Jy)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Jy):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let o,h,m,_,v,T,A;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((O=>(O>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),h=this.params.maximumSequenceNumbersToCollect):h=O,_=Date.now(),this.nthSequenceNumber(e,h)))).next((O=>(o=O,v=Date.now(),this.removeTargets(e,o,n)))).next((O=>(m=O,T=Date.now(),this.removeOrphanedDocuments(e,o)))).next((O=>(A=Date.now(),Ul()<=Bt.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${_-b}ms
	Determined least recently used ${h} in `+(v-_)+`ms
	Removed ${m} targets in `+(T-v)+`ms
	Removed ${O} documents in `+(A-T)+`ms
Total Duration: ${A-b}ms`),Se.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:m,documentsRemoved:O}))))}}function bb(a,e){return new Sb(a,e)}class Ib{constructor(){this.changes=new sl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return o!==void 0?Se.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Rb{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class Nb{constructor(e,n,o,h){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=h}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next((h=>(o=h,this.remoteDocumentCache.getEntry(e,n)))).next((h=>(o!==null&&ru(o.mutation,h,Pr.empty(),on.now()),h)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.getLocalViewOfDocuments(e,o,Vt()).next((()=>o))))}getLocalViewOfDocuments(e,n,o=Vt()){const h=Wo();return this.populateOverlays(e,h,n).next((()=>this.computeViews(e,n,h,o).next((m=>{let _=Kc();return m.forEach(((v,T)=>{_=_.insert(v,T.overlayedDocument)})),_}))))}getOverlayedDocuments(e,n){const o=Wo();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,Vt())))}populateOverlays(e,n,o){const h=[];return o.forEach((m=>{n.has(m)||h.push(m)})),this.documentOverlayCache.getOverlays(e,h).next((m=>{m.forEach(((_,v)=>{n.set(_,v)}))}))}computeViews(e,n,o,h){let m=Ea();const _=iu(),v=(function(){return iu()})();return n.forEach(((T,A)=>{const b=o.get(A.key);h.has(A.key)&&(b===void 0||b.mutation instanceof Ao)?m=m.insert(A.key,A):b!==void 0?(_.set(A.key,b.mutation.getFieldMask()),ru(b.mutation,A,b.mutation.getFieldMask(),on.now())):_.set(A.key,Pr.empty())})),this.recalculateAndSaveOverlays(e,m).next((T=>(T.forEach(((A,b)=>_.set(A,b))),n.forEach(((A,b)=>v.set(A,new Rb(b,_.get(A)??null)))),v)))}recalculateAndSaveOverlays(e,n){const o=iu();let h=new kn(((_,v)=>_-v)),m=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((_=>{for(const v of _)v.keys().forEach((T=>{const A=n.get(T);if(A===null)return;let b=o.get(T)||Pr.empty();b=v.applyToLocalView(A,b),o.set(T,b);const O=(h.get(v.batchId)||Vt()).add(T);h=h.insert(v.batchId,O)}))})).next((()=>{const _=[],v=h.getReverseIterator();for(;v.hasNext();){const T=v.getNext(),A=T.key,b=T.value,O=ox();b.forEach((V=>{if(!m.has(V)){const G=dx(n.get(V),o.get(V));G!==null&&O.set(V,G),m=m.add(V)}})),_.push(this.documentOverlayCache.saveOverlays(e,A,O))}return Se.waitFor(_)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,n,o,h){return(function(_){return Je.isDocumentKey(_.path)&&_.collectionGroup===null&&_.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):nx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,h):this.getDocumentsMatchingCollectionQuery(e,n,o,h)}getNextDocuments(e,n,o,h){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,h).next((m=>{const _=h-m.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,h-m.size):Se.resolve(Wo());let v=lu,T=m;return _.next((A=>Se.forEach(A,((b,O)=>(v<O.largestBatchId&&(v=O.largestBatchId),m.get(b)?Se.resolve():this.remoteDocumentCache.getEntry(e,b).next((V=>{T=T.insert(b,V)}))))).next((()=>this.populateOverlays(e,A,m))).next((()=>this.computeViews(e,T,A,Vt()))).next((b=>({batchId:v,changes:ax(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Je(n)).next((o=>{let h=Kc();return o.isFoundDocument()&&(h=h.insert(o.key,o)),h}))}getDocumentsMatchingCollectionGroupQuery(e,n,o,h){const m=n.collectionGroup;let _=Kc();return this.indexManager.getCollectionParents(e,m).next((v=>Se.forEach(v,(T=>{const A=(function(O,V){return new Au(V,null,O.explicitOrderBy.slice(),O.filters.slice(),O.limit,O.limitType,O.startAt,O.endAt)})(n,T.child(m));return this.getDocumentsMatchingCollectionQuery(e,A,o,h).next((b=>{b.forEach(((O,V)=>{_=_.insert(O,V)}))}))})).next((()=>_))))}getDocumentsMatchingCollectionQuery(e,n,o,h){let m;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next((_=>(m=_,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,m,h)))).next((_=>{m.forEach(((T,A)=>{const b=A.getKey();_.get(b)===null&&(_=_.insert(b,qi.newInvalidDocument(b)))}));let v=Kc();return _.forEach(((T,A)=>{const b=m.get(T);b!==void 0&&ru(b.mutation,A,Pr.empty(),on.now()),kf(n,A)&&(v=v.insert(T,A))})),v}))}}class Ob{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Se.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(h){return{id:h.id,version:h.version,createTime:Ns(h.createTime)}})(n)),Se.resolve()}getNamedQuery(e,n){return Se.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(h){return{name:h.name,query:xb(h.bundledQuery),readTime:Ns(h.readTime)}})(n)),Se.resolve()}}class Db{constructor(){this.overlays=new kn(Je.comparator),this.qr=new Map}getOverlay(e,n){return Se.resolve(this.overlays.get(n))}getOverlays(e,n){const o=Wo();return Se.forEach(n,(h=>this.getOverlay(e,h).next((m=>{m!==null&&o.set(h,m)})))).next((()=>o))}saveOverlays(e,n,o){return o.forEach(((h,m)=>{this.St(e,n,m)})),Se.resolve()}removeOverlaysForBatchId(e,n,o){const h=this.qr.get(o);return h!==void 0&&(h.forEach((m=>this.overlays=this.overlays.remove(m))),this.qr.delete(o)),Se.resolve()}getOverlaysForCollection(e,n,o){const h=Wo(),m=n.length+1,_=new Je(n.child("")),v=this.overlays.getIteratorFrom(_);for(;v.hasNext();){const T=v.getNext().value,A=T.getKey();if(!n.isPrefixOf(A.path))break;A.path.length===m&&T.largestBatchId>o&&h.set(T.getKey(),T)}return Se.resolve(h)}getOverlaysForCollectionGroup(e,n,o,h){let m=new kn(((A,b)=>A-b));const _=this.overlays.getIterator();for(;_.hasNext();){const A=_.getNext().value;if(A.getKey().getCollectionGroup()===n&&A.largestBatchId>o){let b=m.get(A.largestBatchId);b===null&&(b=Wo(),m=m.insert(A.largestBatchId,b)),b.set(A.getKey(),A)}}const v=Wo(),T=m.getIterator();for(;T.hasNext()&&(T.getNext().value.forEach(((A,b)=>v.set(A,b))),!(v.size()>=h)););return Se.resolve(v)}St(e,n,o){const h=this.overlays.get(o.key);if(h!==null){const _=this.qr.get(h.largestBatchId).delete(o.key);this.qr.set(h.largestBatchId,_)}this.overlays=this.overlays.insert(o.key,new QS(n,o));let m=this.qr.get(n);m===void 0&&(m=Vt(),this.qr.set(n,m)),this.qr.set(n,m.add(o.key))}}class Mb{constructor(){this.sessionToken=Mi.EMPTY_BYTE_STRING}getSessionToken(e){return Se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Se.resolve()}}class sg{constructor(){this.Qr=new ci(gi.$r),this.Ur=new ci(gi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const o=new gi(e,n);this.Qr=this.Qr.add(o),this.Ur=this.Ur.add(o)}Wr(e,n){e.forEach((o=>this.addReference(o,n)))}removeReference(e,n){this.Gr(new gi(e,n))}zr(e,n){e.forEach((o=>this.removeReference(o,n)))}jr(e){const n=new Je(new yn([])),o=new gi(n,e),h=new gi(n,e+1),m=[];return this.Ur.forEachInRange([o,h],(_=>{this.Gr(_),m.push(_.key)})),m}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Je(new yn([])),o=new gi(n,e),h=new gi(n,e+1);let m=Vt();return this.Ur.forEachInRange([o,h],(_=>{m=m.add(_.key)})),m}containsKey(e){const n=new gi(e,0),o=this.Qr.firstAfterOrEqual(n);return o!==null&&e.isEqual(o.key)}}class gi{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Je.comparator(e.key,n.key)||kt(e.Yr,n.Yr)}static Kr(e,n){return kt(e.Yr,n.Yr)||Je.comparator(e.key,n.key)}}class Lb{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ci(gi.$r)}checkEmpty(e){return Se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,o,h){const m=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const _=new KS(m,n,o,h);this.mutationQueue.push(_);for(const v of h)this.Zr=this.Zr.add(new gi(v.key,m)),this.indexManager.addToCollectionParentIndex(e,v.key.path.popLast());return Se.resolve(_)}lookupMutationBatch(e,n){return Se.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const o=n+1,h=this.ei(o),m=h<0?0:h;return Se.resolve(this.mutationQueue.length>m?this.mutationQueue[m]:null)}getHighestUnacknowledgedBatchId(){return Se.resolve(this.mutationQueue.length===0?Q0:this.tr-1)}getAllMutationBatches(e){return Se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new gi(n,0),h=new gi(n,Number.POSITIVE_INFINITY),m=[];return this.Zr.forEachInRange([o,h],(_=>{const v=this.Xr(_.Yr);m.push(v)})),Se.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new ci(kt);return n.forEach((h=>{const m=new gi(h,0),_=new gi(h,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([m,_],(v=>{o=o.add(v.Yr)}))})),Se.resolve(this.ti(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,h=o.length+1;let m=o;Je.isDocumentKey(m)||(m=m.child(""));const _=new gi(new Je(m),0);let v=new ci(kt);return this.Zr.forEachWhile((T=>{const A=T.key.path;return!!o.isPrefixOf(A)&&(A.length===h&&(v=v.add(T.Yr)),!0)}),_),Se.resolve(this.ti(v))}ti(e){const n=[];return e.forEach((o=>{const h=this.Xr(o);h!==null&&n.push(h)})),n}removeMutationBatch(e,n){rn(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Zr;return Se.forEach(n.mutations,(h=>{const m=new gi(h.key,n.batchId);return o=o.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,h.key)})).next((()=>{this.Zr=o}))}ir(e){}containsKey(e,n){const o=new gi(n,0),h=this.Zr.firstAfterOrEqual(o);return Se.resolve(n.isEqual(h&&h.key))}performConsistencyCheck(e){return this.mutationQueue.length,Se.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Pb{constructor(e){this.ri=e,this.docs=(function(){return new kn(Je.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,h=this.docs.get(o),m=h?h.size:0,_=this.ri(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:_}),this.size+=_-m,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return Se.resolve(o?o.document.mutableCopy():qi.newInvalidDocument(n))}getEntries(e,n){let o=Ea();return n.forEach((h=>{const m=this.docs.get(h);o=o.insert(h,m?m.document.mutableCopy():qi.newInvalidDocument(h))})),Se.resolve(o)}getDocumentsMatchingQuery(e,n,o,h){let m=Ea();const _=n.path,v=new Je(_.child("__id-9223372036854775808__")),T=this.docs.getIteratorFrom(v);for(;T.hasNext();){const{key:A,value:{document:b}}=T.getNext();if(!_.isPrefixOf(A.path))break;A.path.length>_.length+1||uS(cS(b),o)<=0||(h.has(b.key)||kf(n,b))&&(m=m.insert(b.key,b.mutableCopy()))}return Se.resolve(m)}getAllFromCollectionGroup(e,n,o,h){ct(9500)}ii(e,n){return Se.forEach(this.docs,(o=>n(o)))}newChangeBuffer(e){return new Bb(this)}getSize(e){return Se.resolve(this.size)}}class Bb extends Ib{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((o,h)=>{h.isValidDocument()?n.push(this.Nr.addEntry(e,h)):this.Nr.removeEntry(o)})),Se.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class kb{constructor(e){this.persistence=e,this.si=new sl((n=>$0(n)),eg),this.lastRemoteSnapshotVersion=ft.min(),this.highestTargetId=0,this.oi=0,this._i=new sg,this.targetCount=0,this.ai=tc.ur()}forEachTarget(e,n){return this.si.forEach(((o,h)=>n(h))),Se.resolve()}getLastRemoteSnapshotVersion(e){return Se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.oi&&(this.oi=n),Se.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new tc(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Se.resolve()}updateTargetData(e,n){return this.Pr(n),Se.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Se.resolve()}removeTargets(e,n,o){let h=0;const m=[];return this.si.forEach(((_,v)=>{v.sequenceNumber<=n&&o.get(v.targetId)===null&&(this.si.delete(_),m.push(this.removeMatchingKeysForTargetId(e,v.targetId)),h++)})),Se.waitFor(m).next((()=>h))}getTargetCount(e){return Se.resolve(this.targetCount)}getTargetData(e,n){const o=this.si.get(n)||null;return Se.resolve(o)}addMatchingKeys(e,n,o){return this._i.Wr(n,o),Se.resolve()}removeMatchingKeys(e,n,o){this._i.zr(n,o);const h=this.persistence.referenceDelegate,m=[];return h&&n.forEach((_=>{m.push(h.markPotentiallyOrphaned(e,_))})),Se.waitFor(m)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Se.resolve()}getMatchingKeysForTargetId(e,n){const o=this._i.Hr(n);return Se.resolve(o)}containsKey(e,n){return Se.resolve(this._i.containsKey(n))}}class Sx{constructor(e,n){this.ui={},this.overlays={},this.ci=new Df(0),this.li=!1,this.li=!0,this.hi=new Mb,this.referenceDelegate=e(this),this.Pi=new kb(this),this.indexManager=new Ab,this.remoteDocumentCache=(function(h){return new Pb(h)})((o=>this.referenceDelegate.Ti(o))),this.serializer=new _b(n),this.Ii=new Ob(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Db,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.ui[e.toKey()];return o||(o=new Lb(n,this.referenceDelegate),this.ui[e.toKey()]=o),o}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,o){ze("MemoryPersistence","Starting transaction:",e);const h=new Vb(this.ci.next());return this.referenceDelegate.Ei(),o(h).next((m=>this.referenceDelegate.di(h).next((()=>m)))).toPromise().then((m=>(h.raiseOnCommittedEvent(),m)))}Ai(e,n){return Se.or(Object.values(this.ui).map((o=>()=>o.containsKey(e,n))))}}class Vb extends fS{constructor(e){super(),this.currentSequenceNumber=e}}class ag{constructor(e){this.persistence=e,this.Ri=new sg,this.Vi=null}static mi(e){return new ag(e)}get fi(){if(this.Vi)return this.Vi;throw ct(60996)}addReference(e,n,o){return this.Ri.addReference(o,n),this.fi.delete(o.toString()),Se.resolve()}removeReference(e,n,o){return this.Ri.removeReference(o,n),this.fi.add(o.toString()),Se.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Se.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((h=>this.fi.add(h.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next((h=>{h.forEach((m=>this.fi.add(m.toString())))})).next((()=>o.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Se.forEach(this.fi,(o=>{const h=Je.fromPath(o);return this.gi(e,h).next((m=>{m||n.removeEntry(h,ft.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((o=>{o?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Se.or([()=>Se.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class pf{constructor(e,n){this.persistence=e,this.pi=new sl((o=>mS(o.path)),((o,h)=>o.isEqual(h))),this.garbageCollector=bb(this,n)}static mi(e,n){return new pf(e,n)}Ei(){}di(e){return Se.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>n.next((h=>o+h))))}wr(e){let n=0;return this.pr(e,(o=>{n++})).next((()=>n))}pr(e,n){return Se.forEach(this.pi,((o,h)=>this.br(e,o,h).next((m=>m?Se.resolve():n(h)))))}removeTargets(e,n,o){return this.persistence.getTargetCache().removeTargets(e,n,o)}removeOrphanedDocuments(e,n){let o=0;const h=this.persistence.getRemoteDocumentCache(),m=h.newChangeBuffer();return h.ii(e,(_=>this.br(e,_,n).next((v=>{v||(o++,m.removeEntry(_,ft.min()))})))).next((()=>m.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Se.resolve()}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,n,o){return this.pi.set(o,e.currentSequenceNumber),Se.resolve()}removeReference(e,n,o){return this.pi.set(o,e.currentSequenceNumber),Se.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Se.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Wh(e.data.value)),n}br(e,n,o){return Se.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const h=this.pi.get(n);return Se.resolve(h!==void 0&&h>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class og{constructor(e,n,o,h){this.targetId=e,this.fromCache=n,this.Es=o,this.ds=h}static As(e,n){let o=Vt(),h=Vt();for(const m of n.docChanges)switch(m.type){case 0:o=o.add(m.doc.key);break;case 1:h=h.add(m.doc.key)}return new og(e,n.fromCache,o,h)}}class Ub{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Fb{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return pT()?8:dS(Xi())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,o,h){const m={result:null};return this.ys(e,n).next((_=>{m.result=_})).next((()=>{if(!m.result)return this.ws(e,n,h,o).next((_=>{m.result=_}))})).next((()=>{if(m.result)return;const _=new Ub;return this.Ss(e,n,_).next((v=>{if(m.result=v,this.Vs)return this.bs(e,n,_,v.size)}))})).next((()=>m.result))}bs(e,n,o,h){return o.documentReadCount<this.fs?(Ul()<=Bt.DEBUG&&ze("QueryEngine","SDK will not create cache indexes for query:",Fl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Se.resolve()):(Ul()<=Bt.DEBUG&&ze("QueryEngine","Query:",Fl(n),"scans",o.documentReadCount,"local documents and returns",h,"documents as results."),o.documentReadCount>this.gs*h?(Ul()<=Bt.DEBUG&&ze("QueryEngine","The SDK decides to create cache indexes for query:",Fl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rs(n))):Se.resolve())}ys(e,n){if(jy(n))return Se.resolve(null);let o=Rs(n);return this.indexManager.getIndexType(e,o).next((h=>h===0?null:(n.limit!==null&&h===1&&(n=_0(n,null,"F"),o=Rs(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next((m=>{const _=Vt(...m);return this.ps.getDocuments(e,_).next((v=>this.indexManager.getMinOffset(e,o).next((T=>{const A=this.Ds(n,v);return this.Cs(n,A,_,T.readTime)?this.ys(e,_0(n,null,"F")):this.vs(e,A,n,T)}))))})))))}ws(e,n,o,h){return jy(n)||h.isEqual(ft.min())?Se.resolve(null):this.ps.getDocuments(e,o).next((m=>{const _=this.Ds(n,m);return this.Cs(n,_,o,h)?Se.resolve(null):(Ul()<=Bt.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",h.toString(),Fl(n)),this.vs(e,_,n,lS(h,lu)).next((v=>v)))}))}Ds(e,n){let o=new ci(rx(e));return n.forEach(((h,m)=>{kf(e,m)&&(o=o.add(m))})),o}Cs(e,n,o,h){if(e.limit===null)return!1;if(o.size!==n.size)return!0;const m=e.limitType==="F"?n.last():n.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(h)>0)}Ss(e,n,o){return Ul()<=Bt.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",Fl(n)),this.ps.getDocumentsMatchingQuery(e,n,ho.min(),o)}vs(e,n,o,h){return this.ps.getDocumentsMatchingQuery(e,o,h).next((m=>(n.forEach((_=>{m=m.insert(_.key,_)})),m)))}}const lg="LocalStore",zb=3e8;class jb{constructor(e,n,o,h){this.persistence=e,this.Fs=n,this.serializer=h,this.Ms=new kn(kt),this.xs=new sl((m=>$0(m)),eg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(o)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Nb(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Hb(a,e,n,o){return new jb(a,e,n,o)}async function bx(a,e){const n=mt(a);return await n.persistence.runTransaction("Handle user change","readonly",(o=>{let h;return n.mutationQueue.getAllMutationBatches(o).next((m=>(h=m,n.Bs(e),n.mutationQueue.getAllMutationBatches(o)))).next((m=>{const _=[],v=[];let T=Vt();for(const A of h){_.push(A.batchId);for(const b of A.mutations)T=T.add(b.key)}for(const A of m){v.push(A.batchId);for(const b of A.mutations)T=T.add(b.key)}return n.localDocuments.getDocuments(o,T).next((A=>({Ls:A,removedBatchIds:_,addedBatchIds:v})))}))}))}function Gb(a,e){const n=mt(a);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const h=e.batch.keys(),m=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(v,T,A,b){const O=A.batch,V=O.keys();let G=Se.resolve();return V.forEach((ee=>{G=G.next((()=>b.getEntry(T,ee))).next((ie=>{const he=A.docVersions.get(ee);rn(he!==null,48541),ie.version.compareTo(he)<0&&(O.applyToRemoteDocument(ie,A),ie.isValidDocument()&&(ie.setReadTime(A.commitVersion),b.addEntry(ie)))}))})),G.next((()=>v.mutationQueue.removeMutationBatch(T,O)))})(n,o,e,m).next((()=>m.apply(o))).next((()=>n.mutationQueue.performConsistencyCheck(o))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(o,h,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(v){let T=Vt();for(let A=0;A<v.mutationResults.length;++A)v.mutationResults[A].transformResults.length>0&&(T=T.add(v.batch.mutations[A].key));return T})(e)))).next((()=>n.localDocuments.getDocuments(o,h)))}))}function Ix(a){const e=mt(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function qb(a,e){const n=mt(a),o=e.snapshotVersion;let h=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(m=>{const _=n.Ns.newChangeBuffer({trackRemovals:!0});h=n.Ms;const v=[];e.targetChanges.forEach(((b,O)=>{const V=h.get(O);if(!V)return;v.push(n.Pi.removeMatchingKeys(m,b.removedDocuments,O).next((()=>n.Pi.addMatchingKeys(m,b.addedDocuments,O))));let G=V.withSequenceNumber(m.currentSequenceNumber);e.targetMismatches.get(O)!==null?G=G.withResumeToken(Mi.EMPTY_BYTE_STRING,ft.min()).withLastLimboFreeSnapshotVersion(ft.min()):b.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(b.resumeToken,o)),h=h.insert(O,G),(function(ie,he,Le){return ie.resumeToken.approximateByteSize()===0||he.snapshotVersion.toMicroseconds()-ie.snapshotVersion.toMicroseconds()>=zb?!0:Le.addedDocuments.size+Le.modifiedDocuments.size+Le.removedDocuments.size>0})(V,G,b)&&v.push(n.Pi.updateTargetData(m,G))}));let T=Ea(),A=Vt();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&v.push(n.persistence.referenceDelegate.updateLimboDocument(m,b))})),v.push(Xb(m,_,e.documentUpdates).next((b=>{T=b.ks,A=b.qs}))),!o.isEqual(ft.min())){const b=n.Pi.getLastRemoteSnapshotVersion(m).next((O=>n.Pi.setTargetsMetadata(m,m.currentSequenceNumber,o)));v.push(b)}return Se.waitFor(v).next((()=>_.apply(m))).next((()=>n.localDocuments.getLocalViewOfDocuments(m,T,A))).next((()=>T))})).then((m=>(n.Ms=h,m)))}function Xb(a,e,n){let o=Vt(),h=Vt();return n.forEach((m=>o=o.add(m))),e.getEntries(a,o).next((m=>{let _=Ea();return n.forEach(((v,T)=>{const A=m.get(v);T.isFoundDocument()!==A.isFoundDocument()&&(h=h.add(v)),T.isNoDocument()&&T.version.isEqual(ft.min())?(e.removeEntry(v,T.readTime),_=_.insert(v,T)):!A.isValidDocument()||T.version.compareTo(A.version)>0||T.version.compareTo(A.version)===0&&A.hasPendingWrites?(e.addEntry(T),_=_.insert(v,T)):ze(lg,"Ignoring outdated watch update for ",v,". Current version:",A.version," Watch version:",T.version)})),{ks:_,qs:h}}))}function Yb(a,e){const n=mt(a);return n.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=Q0),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function Wb(a,e){const n=mt(a);return n.persistence.runTransaction("Allocate target","readwrite",(o=>{let h;return n.Pi.getTargetData(o,e).next((m=>m?(h=m,Se.resolve(h)):n.Pi.allocateTargetId(o).next((_=>(h=new ro(e,_,"TargetPurposeListen",o.currentSequenceNumber),n.Pi.addTargetData(o,h).next((()=>h)))))))})).then((o=>{const h=n.Ms.get(o.targetId);return(h===null||o.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(o.targetId,o),n.xs.set(e,o.targetId)),o}))}async function C0(a,e,n){const o=mt(a),h=o.Ms.get(e),m=n?"readwrite":"readwrite-primary";try{n||await o.persistence.runTransaction("Release target",m,(_=>o.persistence.referenceDelegate.removeTarget(_,h)))}catch(_){if(!lc(_))throw _;ze(lg,`Failed to update sequence numbers for target ${e}: ${_}`)}o.Ms=o.Ms.remove(e),o.xs.delete(h.target)}function tE(a,e,n){const o=mt(a);let h=ft.min(),m=Vt();return o.persistence.runTransaction("Execute query","readwrite",(_=>(function(T,A,b){const O=mt(T),V=O.xs.get(b);return V!==void 0?Se.resolve(O.Ms.get(V)):O.Pi.getTargetData(A,b)})(o,_,Rs(e)).next((v=>{if(v)return h=v.lastLimboFreeSnapshotVersion,o.Pi.getMatchingKeysForTargetId(_,v.targetId).next((T=>{m=T}))})).next((()=>o.Fs.getDocumentsMatchingQuery(_,e,n?h:ft.min(),n?m:Vt()))).next((v=>(Kb(o,LS(e),v),{documents:v,Qs:m})))))}function Kb(a,e,n){let o=a.Os.get(e)||ft.min();n.forEach(((h,m)=>{m.readTime.compareTo(o)>0&&(o=m.readTime)})),a.Os.set(e,o)}class nE{constructor(){this.activeTargetIds=FS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Qb{constructor(){this.Mo=new nE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,o){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new nE,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Zb{Oo(e){}shutdown(){}}const iE="ConnectivityMonitor";class rE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ze(iE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ze(iE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let zh=null;function v0(){return zh===null?zh=(function(){return 268435456+Math.round(2147483648*Math.random())})():zh++,"0x"+zh.toString(16)}const Q1="RestConnection",Jb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $b{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),h=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${o}/databases/${h}`,this.Wo=this.databaseId.database===cf?`project_id=${o}`:`project_id=${o}&database_id=${h}`}Go(e,n,o,h,m){const _=v0(),v=this.zo(e,n.toUriEncodedString());ze(Q1,`Sending RPC '${e}' ${_}:`,v,o);const T={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(T,h,m);const{host:A}=new URL(v),b=ic(A);return this.Jo(e,v,T,o,b).then((O=>(ze(Q1,`Received RPC '${e}' ${_}: `,O),O)),(O=>{throw Zl(Q1,`RPC '${e}' ${_} failed with error: `,O,"url: ",v,"request:",o),O}))}Ho(e,n,o,h,m,_){return this.Go(e,n,o,h,m)}jo(e,n,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ac})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((h,m)=>e[m]=h)),o&&o.headers.forEach(((h,m)=>e[m]=h))}zo(e,n){const o=Jb[e];return`${this.Uo}/v1/${n}:${o}`}terminate(){}}class eI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const ji="WebChannelConnection";class tI extends $b{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,o,h,m){const _=v0();return new Promise(((v,T)=>{const A=new O_;A.setWithCredentials(!0),A.listenOnce(D_.COMPLETE,(()=>{try{switch(A.getLastErrorCode()){case Yh.NO_ERROR:const O=A.getResponseJson();ze(ji,`XHR for RPC '${e}' ${_} received:`,JSON.stringify(O)),v(O);break;case Yh.TIMEOUT:ze(ji,`RPC '${e}' ${_} timed out`),T(new Ue(Te.DEADLINE_EXCEEDED,"Request time out"));break;case Yh.HTTP_ERROR:const V=A.getStatus();if(ze(ji,`RPC '${e}' ${_} failed with status:`,V,"response text:",A.getResponseText()),V>0){let G=A.getResponseJson();Array.isArray(G)&&(G=G[0]);const ee=G?.error;if(ee&&ee.status&&ee.message){const ie=(function(Le){const be=Le.toLowerCase().replace(/_/g,"-");return Object.values(Te).indexOf(be)>=0?be:Te.UNKNOWN})(ee.status);T(new Ue(ie,ee.message))}else T(new Ue(Te.UNKNOWN,"Server responded with status "+A.getStatus()))}else T(new Ue(Te.UNAVAILABLE,"Connection failed."));break;default:ct(9055,{l_:e,streamId:_,h_:A.getLastErrorCode(),P_:A.getLastError()})}}finally{ze(ji,`RPC '${e}' ${_} completed.`)}}));const b=JSON.stringify(h);ze(ji,`RPC '${e}' ${_} sending request:`,h),A.send(n,"POST",b,o,15)}))}T_(e,n,o){const h=v0(),m=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],_=P_(),v=L_(),T={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},A=this.longPollingOptions.timeoutSeconds;A!==void 0&&(T.longPollingTimeout=Math.round(1e3*A)),this.useFetchStreams&&(T.useFetchStreams=!0),this.jo(T.initMessageHeaders,n,o),T.encodeInitMessageHeaders=!0;const b=m.join("");ze(ji,`Creating RPC '${e}' stream ${h}: ${b}`,T);const O=_.createWebChannel(b,T);this.I_(O);let V=!1,G=!1;const ee=new eI({Yo:he=>{G?ze(ji,`Not sending because RPC '${e}' stream ${h} is closed:`,he):(V||(ze(ji,`Opening RPC '${e}' stream ${h} transport.`),O.open(),V=!0),ze(ji,`RPC '${e}' stream ${h} sending:`,he),O.send(he))},Zo:()=>O.close()}),ie=(he,Le,be)=>{he.listen(Le,(me=>{try{be(me)}catch(Be){setTimeout((()=>{throw Be}),0)}}))};return ie(O,Wc.EventType.OPEN,(()=>{G||(ze(ji,`RPC '${e}' stream ${h} transport opened.`),ee.o_())})),ie(O,Wc.EventType.CLOSE,(()=>{G||(G=!0,ze(ji,`RPC '${e}' stream ${h} transport closed`),ee.a_(),this.E_(O))})),ie(O,Wc.EventType.ERROR,(he=>{G||(G=!0,Zl(ji,`RPC '${e}' stream ${h} transport errored. Name:`,he.name,"Message:",he.message),ee.a_(new Ue(Te.UNAVAILABLE,"The operation could not be completed")))})),ie(O,Wc.EventType.MESSAGE,(he=>{if(!G){const Le=he.data[0];rn(!!Le,16349);const be=Le,me=be?.error||be[0]?.error;if(me){ze(ji,`RPC '${e}' stream ${h} received error:`,me);const Be=me.status;let $e=(function(F){const L=ti[F];if(L!==void 0)return mx(L)})(Be),xe=me.message;$e===void 0&&($e=Te.INTERNAL,xe="Unknown error status: "+Be+" with message "+me.message),G=!0,ee.a_(new Ue($e,xe)),O.close()}else ze(ji,`RPC '${e}' stream ${h} received:`,Le),ee.u_(Le)}})),ie(v,M_.STAT_EVENT,(he=>{he.stat===f0.PROXY?ze(ji,`RPC '${e}' stream ${h} detected buffering proxy`):he.stat===f0.NOPROXY&&ze(ji,`RPC '${e}' stream ${h} detected no buffering proxy`)})),setTimeout((()=>{ee.__()}),0),ee}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Z1(){return typeof document<"u"?document:null}function jf(a){return new sb(a,!0)}class Rx{constructor(e,n,o=1e3,h=1.5,m=6e4){this.Mi=e,this.timerId=n,this.d_=o,this.A_=h,this.R_=m,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),o=Math.max(0,Date.now()-this.f_),h=Math.max(0,n-o);h>0&&ze("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,h,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const sE="PersistentStream";class Nx{constructor(e,n,o,h,m,_,v,T){this.Mi=e,this.S_=o,this.b_=h,this.connection=m,this.authCredentialsProvider=_,this.appCheckCredentialsProvider=v,this.listener=T,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Rx(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Te.RESOURCE_EXHAUSTED?(ya(n.toString()),ya("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,h])=>{this.D_===n&&this.G_(o,h)}),(o=>{e((()=>{const h=new Ue(Te.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(h)}))}))}G_(e,n){const o=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{o((()=>this.listener.Xo()))})),this.stream.t_((()=>{o((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((h=>{o((()=>this.z_(h)))})),this.stream.onMessage((h=>{o((()=>++this.F_==1?this.J_(h):this.onNext(h)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ze(sE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ze(sE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class nI extends Nx{constructor(e,n,o,h,m,_){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,h,_),this.serializer=m}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=lb(this.serializer,e),o=(function(m){if(!("targetChange"in m))return ft.min();const _=m.targetChange;return _.targetIds&&_.targetIds.length?ft.min():_.readTime?Ns(_.readTime):ft.min()})(e);return this.listener.H_(n,o)}Y_(e){const n={};n.database=T0(this.serializer),n.addTarget=(function(m,_){let v;const T=_.target;if(v=y0(T)?{documents:hb(m,T)}:{query:fb(m,T).ft},v.targetId=_.targetId,_.resumeToken.approximateByteSize()>0){v.resumeToken=Ex(m,_.resumeToken);const A=x0(m,_.expectedCount);A!==null&&(v.expectedCount=A)}else if(_.snapshotVersion.compareTo(ft.min())>0){v.readTime=mf(m,_.snapshotVersion.toTimestamp());const A=x0(m,_.expectedCount);A!==null&&(v.expectedCount=A)}return v})(this.serializer,e);const o=gb(this.serializer,e);o&&(n.labels=o),this.q_(n)}Z_(e){const n={};n.database=T0(this.serializer),n.removeTarget=e,this.q_(n)}}class iI extends Nx{constructor(e,n,o,h,m,_){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,h,_),this.serializer=m}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return rn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,rn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){rn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=ub(e.writeResults,e.commitTime),o=Ns(e.commitTime);return this.listener.na(o,n)}ra(){const e={};e.database=T0(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((o=>cb(this.serializer,o)))};this.q_(n)}}class rI{}class sI extends rI{constructor(e,n,o,h){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=h,this.ia=!1}sa(){if(this.ia)throw new Ue(Te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,o,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([m,_])=>this.connection.Go(e,A0(n,o),h,m,_))).catch((m=>{throw m.name==="FirebaseError"?(m.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new Ue(Te.UNKNOWN,m.toString())}))}Ho(e,n,o,h,m){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([_,v])=>this.connection.Ho(e,A0(n,o),h,_,v,m))).catch((_=>{throw _.name==="FirebaseError"?(_.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),_):new Ue(Te.UNKNOWN,_.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class aI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ya(n),this.aa=!1):ze("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const nl="RemoteStore";class oI{constructor(e,n,o,h,m){this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=m,this.Aa.Oo((_=>{o.enqueueAndForget((async()=>{al(this)&&(ze(nl,"Restarting streams for network reachability change."),await(async function(T){const A=mt(T);A.Ea.add(4),await Cu(A),A.Ra.set("Unknown"),A.Ea.delete(4),await Hf(A)})(this))}))})),this.Ra=new aI(o,h)}}async function Hf(a){if(al(a))for(const e of a.da)await e(!0)}async function Cu(a){for(const e of a.da)await e(!1)}function Ox(a,e){const n=mt(a);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),fg(n)?hg(n):cc(n).O_()&&ug(n,e))}function cg(a,e){const n=mt(a),o=cc(n);n.Ia.delete(e),o.O_()&&Dx(n,e),n.Ia.size===0&&(o.O_()?o.L_():al(n)&&n.Ra.set("Unknown"))}function ug(a,e){if(a.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ft.min())>0){const n=a.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}cc(a).Y_(e)}function Dx(a,e){a.Va.Ue(e),cc(a).Z_(e)}function hg(a){a.Va=new tb({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),At:e=>a.Ia.get(e)||null,ht:()=>a.datastore.serializer.databaseId}),cc(a).start(),a.Ra.ua()}function fg(a){return al(a)&&!cc(a).x_()&&a.Ia.size>0}function al(a){return mt(a).Ea.size===0}function Mx(a){a.Va=void 0}async function lI(a){a.Ra.set("Online")}async function cI(a){a.Ia.forEach(((e,n)=>{ug(a,e)}))}async function uI(a,e){Mx(a),fg(a)?(a.Ra.ha(e),hg(a)):a.Ra.set("Unknown")}async function hI(a,e,n){if(a.Ra.set("Online"),e instanceof yx&&e.state===2&&e.cause)try{await(async function(h,m){const _=m.cause;for(const v of m.targetIds)h.Ia.has(v)&&(await h.remoteSyncer.rejectListen(v,_),h.Ia.delete(v),h.Va.removeTarget(v))})(a,e)}catch(o){ze(nl,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await yf(a,o)}else if(e instanceof Zh?a.Va.Ze(e):e instanceof px?a.Va.st(e):a.Va.tt(e),!n.isEqual(ft.min()))try{const o=await Ix(a.localStore);n.compareTo(o)>=0&&await(function(m,_){const v=m.Va.Tt(_);return v.targetChanges.forEach(((T,A)=>{if(T.resumeToken.approximateByteSize()>0){const b=m.Ia.get(A);b&&m.Ia.set(A,b.withResumeToken(T.resumeToken,_))}})),v.targetMismatches.forEach(((T,A)=>{const b=m.Ia.get(T);if(!b)return;m.Ia.set(T,b.withResumeToken(Mi.EMPTY_BYTE_STRING,b.snapshotVersion)),Dx(m,T);const O=new ro(b.target,T,A,b.sequenceNumber);ug(m,O)})),m.remoteSyncer.applyRemoteEvent(v)})(a,n)}catch(o){ze(nl,"Failed to raise snapshot:",o),await yf(a,o)}}async function yf(a,e,n){if(!lc(e))throw e;a.Ea.add(1),await Cu(a),a.Ra.set("Offline"),n||(n=()=>Ix(a.localStore)),a.asyncQueue.enqueueRetryable((async()=>{ze(nl,"Retrying IndexedDB access"),await n(),a.Ea.delete(1),await Hf(a)}))}function Lx(a,e){return e().catch((n=>yf(a,n,e)))}async function Gf(a){const e=mt(a),n=po(e);let o=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Q0;for(;fI(e);)try{const h=await Yb(e.localStore,o);if(h===null){e.Ta.length===0&&n.L_();break}o=h.batchId,dI(e,h)}catch(h){await yf(e,h)}Px(e)&&Bx(e)}function fI(a){return al(a)&&a.Ta.length<10}function dI(a,e){a.Ta.push(e);const n=po(a);n.O_()&&n.X_&&n.ea(e.mutations)}function Px(a){return al(a)&&!po(a).x_()&&a.Ta.length>0}function Bx(a){po(a).start()}async function gI(a){po(a).ra()}async function mI(a){const e=po(a);for(const n of a.Ta)e.ea(n.mutations)}async function pI(a,e,n){const o=a.Ta.shift(),h=ng.from(o,e,n);await Lx(a,(()=>a.remoteSyncer.applySuccessfulWrite(h))),await Gf(a)}async function yI(a,e){e&&po(a).X_&&await(async function(o,h){if((function(_){return JS(_)&&_!==Te.ABORTED})(h.code)){const m=o.Ta.shift();po(o).B_(),await Lx(o,(()=>o.remoteSyncer.rejectFailedWrite(m.batchId,h))),await Gf(o)}})(a,e),Px(a)&&Bx(a)}async function aE(a,e){const n=mt(a);n.asyncQueue.verifyOperationInProgress(),ze(nl,"RemoteStore received new credentials");const o=al(n);n.Ea.add(3),await Cu(n),o&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Hf(n)}async function EI(a,e){const n=mt(a);e?(n.Ea.delete(2),await Hf(n)):e||(n.Ea.add(2),await Cu(n),n.Ra.set("Unknown"))}function cc(a){return a.ma||(a.ma=(function(n,o,h){const m=mt(n);return m.sa(),new nI(o,m.connection,m.authCredentials,m.appCheckCredentials,m.serializer,h)})(a.datastore,a.asyncQueue,{Xo:lI.bind(null,a),t_:cI.bind(null,a),r_:uI.bind(null,a),H_:hI.bind(null,a)}),a.da.push((async e=>{e?(a.ma.B_(),fg(a)?hg(a):a.Ra.set("Unknown")):(await a.ma.stop(),Mx(a))}))),a.ma}function po(a){return a.fa||(a.fa=(function(n,o,h){const m=mt(n);return m.sa(),new iI(o,m.connection,m.authCredentials,m.appCheckCredentials,m.serializer,h)})(a.datastore,a.asyncQueue,{Xo:()=>Promise.resolve(),t_:gI.bind(null,a),r_:yI.bind(null,a),ta:mI.bind(null,a),na:pI.bind(null,a)}),a.da.push((async e=>{e?(a.fa.B_(),await Gf(a)):(await a.fa.stop(),a.Ta.length>0&&(ze(nl,`Stopping write stream with ${a.Ta.length} pending writes`),a.Ta=[]))}))),a.fa}class dg{constructor(e,n,o,h,m){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=h,this.removalCallback=m,this.deferred=new ga,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((_=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,h,m){const _=Date.now()+o,v=new dg(e,n,_,h,m);return v.start(o),v}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ue(Te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gg(a,e){if(ya("AsyncQueue",`${e}: ${a}`),lc(a))return new Ue(Te.UNAVAILABLE,`${e}: ${a}`);throw a}class Kl{static emptySet(e){return new Kl(e.comparator)}constructor(e){this.comparator=e?(n,o)=>e(n,o)||Je.comparator(n.key,o.key):(n,o)=>Je.comparator(n.key,o.key),this.keyedMap=Kc(),this.sortedSet=new kn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,o)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Kl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const h=n.getNext().key,m=o.getNext().key;if(!h.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const o=new Kl;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class oE{constructor(){this.ga=new kn(Je.comparator)}track(e){const n=e.doc.key,o=this.ga.get(n);o?e.type!==0&&o.type===3?this.ga=this.ga.insert(n,e):e.type===3&&o.type!==1?this.ga=this.ga.insert(n,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.ga=this.ga.remove(n):e.type===1&&o.type===2?this.ga=this.ga.insert(n,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ct(63341,{Rt:e,pa:o}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,o)=>{e.push(o)})),e}}class nc{constructor(e,n,o,h,m,_,v,T,A){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=h,this.mutatedKeys=m,this.fromCache=_,this.syncStateChanged=v,this.excludesMetadataChanges=T,this.hasCachedResults=A}static fromInitialDocuments(e,n,o,h,m){const _=[];return n.forEach((v=>{_.push({type:0,doc:v})})),new nc(e,n,Kl.emptySet(n),_,o,h,!0,!1,m)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let h=0;h<n.length;h++)if(n[h].type!==o[h].type||!n[h].doc.isEqual(o[h].doc))return!1;return!0}}class _I{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class xI{constructor(){this.queries=lE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,o){const h=mt(n),m=h.queries;h.queries=lE(),m.forEach(((_,v)=>{for(const T of v.Sa)T.onError(o)}))})(this,new Ue(Te.ABORTED,"Firestore shutting down"))}}function lE(){return new sl((a=>ix(a)),Bf)}async function mg(a,e){const n=mt(a);let o=3;const h=e.query;let m=n.queries.get(h);m?!m.ba()&&e.Da()&&(o=2):(m=new _I,o=e.Da()?0:1);try{switch(o){case 0:m.wa=await n.onListen(h,!0);break;case 1:m.wa=await n.onListen(h,!1);break;case 2:await n.onFirstRemoteStoreListen(h)}}catch(_){const v=gg(_,`Initialization of query '${Fl(e.query)}' failed`);return void e.onError(v)}n.queries.set(h,m),m.Sa.push(e),e.va(n.onlineState),m.wa&&e.Fa(m.wa)&&yg(n)}async function pg(a,e){const n=mt(a),o=e.query;let h=3;const m=n.queries.get(o);if(m){const _=m.Sa.indexOf(e);_>=0&&(m.Sa.splice(_,1),m.Sa.length===0?h=e.Da()?0:1:!m.ba()&&e.Da()&&(h=2))}switch(h){case 0:return n.queries.delete(o),n.onUnlisten(o,!0);case 1:return n.queries.delete(o),n.onUnlisten(o,!1);case 2:return n.onLastRemoteStoreUnlisten(o);default:return}}function AI(a,e){const n=mt(a);let o=!1;for(const h of e){const m=h.query,_=n.queries.get(m);if(_){for(const v of _.Sa)v.Fa(h)&&(o=!0);_.wa=h}}o&&yg(n)}function wI(a,e,n){const o=mt(a),h=o.queries.get(e);if(h)for(const m of h.Sa)m.onError(n);o.queries.delete(e)}function yg(a){a.Ca.forEach((e=>{e.next()}))}var S0,cE;(cE=S0||(S0={})).Ma="default",cE.Cache="cache";class Eg{constructor(e,n,o){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(e){if(!this.options.includeMetadataChanges){const o=[];for(const h of e.docChanges)h.type!==3&&o.push(h);e=new nc(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const o=n!=="Offline";return(!this.options.qa||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=nc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==S0.Cache}}class kx{constructor(e){this.key=e}}class Vx{constructor(e){this.key=e}}class TI{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Vt(),this.mutatedKeys=Vt(),this.eu=rx(e),this.tu=new Kl(this.eu)}get nu(){return this.Ya}ru(e,n){const o=n?n.iu:new oE,h=n?n.tu:this.tu;let m=n?n.mutatedKeys:this.mutatedKeys,_=h,v=!1;const T=this.query.limitType==="F"&&h.size===this.query.limit?h.last():null,A=this.query.limitType==="L"&&h.size===this.query.limit?h.first():null;if(e.inorderTraversal(((b,O)=>{const V=h.get(b),G=kf(this.query,O)?O:null,ee=!!V&&this.mutatedKeys.has(V.key),ie=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let he=!1;V&&G?V.data.isEqual(G.data)?ee!==ie&&(o.track({type:3,doc:G}),he=!0):this.su(V,G)||(o.track({type:2,doc:G}),he=!0,(T&&this.eu(G,T)>0||A&&this.eu(G,A)<0)&&(v=!0)):!V&&G?(o.track({type:0,doc:G}),he=!0):V&&!G&&(o.track({type:1,doc:V}),he=!0,(T||A)&&(v=!0)),he&&(G?(_=_.add(G),m=ie?m.add(b):m.delete(b)):(_=_.delete(b),m=m.delete(b)))})),this.query.limit!==null)for(;_.size>this.query.limit;){const b=this.query.limitType==="F"?_.last():_.first();_=_.delete(b.key),m=m.delete(b.key),o.track({type:1,doc:b})}return{tu:_,iu:o,Cs:v,mutatedKeys:m}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o,h){const m=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const _=e.iu.ya();_.sort(((b,O)=>(function(G,ee){const ie=he=>{switch(he){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ct(20277,{Rt:he})}};return ie(G)-ie(ee)})(b.type,O.type)||this.eu(b.doc,O.doc))),this.ou(o),h=h??!1;const v=n&&!h?this._u():[],T=this.Xa.size===0&&this.current&&!h?1:0,A=T!==this.Za;return this.Za=T,_.length!==0||A?{snapshot:new nc(this.query,e.tu,m,_,e.mutatedKeys,T===0,A,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:v}:{au:v}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new oE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Vt(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Xa=this.Xa.add(o.key))}));const n=[];return e.forEach((o=>{this.Xa.has(o)||n.push(new Vx(o))})),this.Xa.forEach((o=>{e.has(o)||n.push(new kx(o))})),n}cu(e){this.Ya=e.Qs,this.Xa=Vt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return nc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const _g="SyncEngine";class CI{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class vI{constructor(e){this.key=e,this.hu=!1}}class SI{constructor(e,n,o,h,m,_){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=h,this.currentUser=m,this.maxConcurrentLimboResolutions=_,this.Pu={},this.Tu=new sl((v=>ix(v)),Bf),this.Iu=new Map,this.Eu=new Set,this.du=new kn(Je.comparator),this.Au=new Map,this.Ru=new sg,this.Vu={},this.mu=new Map,this.fu=tc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function bI(a,e,n=!0){const o=Gx(a);let h;const m=o.Tu.get(e);return m?(o.sharedClientState.addLocalQueryTarget(m.targetId),h=m.view.lu()):h=await Ux(o,e,n,!0),h}async function II(a,e){const n=Gx(a);await Ux(n,e,!0,!1)}async function Ux(a,e,n,o){const h=await Wb(a.localStore,Rs(e)),m=h.targetId,_=a.sharedClientState.addLocalQueryTarget(m,n);let v;return o&&(v=await RI(a,e,m,_==="current",h.resumeToken)),a.isPrimaryClient&&n&&Ox(a.remoteStore,h),v}async function RI(a,e,n,o,h){a.pu=(O,V,G)=>(async function(ie,he,Le,be){let me=he.view.ru(Le);me.Cs&&(me=await tE(ie.localStore,he.query,!1).then((({documents:k})=>he.view.ru(k,me))));const Be=be&&be.targetChanges.get(he.targetId),$e=be&&be.targetMismatches.get(he.targetId)!=null,xe=he.view.applyChanges(me,ie.isPrimaryClient,Be,$e);return hE(ie,he.targetId,xe.au),xe.snapshot})(a,O,V,G);const m=await tE(a.localStore,e,!0),_=new TI(e,m.Qs),v=_.ru(m.documents),T=Tu.createSynthesizedTargetChangeForCurrentChange(n,o&&a.onlineState!=="Offline",h),A=_.applyChanges(v,a.isPrimaryClient,T);hE(a,n,A.au);const b=new CI(e,n,_);return a.Tu.set(e,b),a.Iu.has(n)?a.Iu.get(n).push(e):a.Iu.set(n,[e]),A.snapshot}async function NI(a,e,n){const o=mt(a),h=o.Tu.get(e),m=o.Iu.get(h.targetId);if(m.length>1)return o.Iu.set(h.targetId,m.filter((_=>!Bf(_,e)))),void o.Tu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(h.targetId),o.sharedClientState.isActiveQueryTarget(h.targetId)||await C0(o.localStore,h.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(h.targetId),n&&cg(o.remoteStore,h.targetId),b0(o,h.targetId)})).catch(oc)):(b0(o,h.targetId),await C0(o.localStore,h.targetId,!0))}async function OI(a,e){const n=mt(a),o=n.Tu.get(e),h=n.Iu.get(o.targetId);n.isPrimaryClient&&h.length===1&&(n.sharedClientState.removeLocalQueryTarget(o.targetId),cg(n.remoteStore,o.targetId))}async function DI(a,e,n){const o=UI(a);try{const h=await(function(_,v){const T=mt(_),A=on.now(),b=v.reduce(((G,ee)=>G.add(ee.key)),Vt());let O,V;return T.persistence.runTransaction("Locally write mutations","readwrite",(G=>{let ee=Ea(),ie=Vt();return T.Ns.getEntries(G,b).next((he=>{ee=he,ee.forEach(((Le,be)=>{be.isValidDocument()||(ie=ie.add(Le))}))})).next((()=>T.localDocuments.getOverlayedDocuments(G,ee))).next((he=>{O=he;const Le=[];for(const be of v){const me=YS(be,O.get(be.key).overlayedDocument);me!=null&&Le.push(new Ao(be.key,me,K_(me.value.mapValue),nr.exists(!0)))}return T.mutationQueue.addMutationBatch(G,A,Le,v)})).next((he=>{V=he;const Le=he.applyToLocalDocumentSet(O,ie);return T.documentOverlayCache.saveOverlays(G,he.batchId,Le)}))})).then((()=>({batchId:V.batchId,changes:ax(O)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(h.batchId),(function(_,v,T){let A=_.Vu[_.currentUser.toKey()];A||(A=new kn(kt)),A=A.insert(v,T),_.Vu[_.currentUser.toKey()]=A})(o,h.batchId,n),await vu(o,h.changes),await Gf(o.remoteStore)}catch(h){const m=gg(h,"Failed to persist write");n.reject(m)}}async function Fx(a,e){const n=mt(a);try{const o=await qb(n.localStore,e);e.targetChanges.forEach(((h,m)=>{const _=n.Au.get(m);_&&(rn(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1,22616),h.addedDocuments.size>0?_.hu=!0:h.modifiedDocuments.size>0?rn(_.hu,14607):h.removedDocuments.size>0&&(rn(_.hu,42227),_.hu=!1))})),await vu(n,o,e)}catch(o){await oc(o)}}function uE(a,e,n){const o=mt(a);if(o.isPrimaryClient&&n===0||!o.isPrimaryClient&&n===1){const h=[];o.Tu.forEach(((m,_)=>{const v=_.view.va(e);v.snapshot&&h.push(v.snapshot)})),(function(_,v){const T=mt(_);T.onlineState=v;let A=!1;T.queries.forEach(((b,O)=>{for(const V of O.Sa)V.va(v)&&(A=!0)})),A&&yg(T)})(o.eventManager,e),h.length&&o.Pu.H_(h),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function MI(a,e,n){const o=mt(a);o.sharedClientState.updateQueryState(e,"rejected",n);const h=o.Au.get(e),m=h&&h.key;if(m){let _=new kn(Je.comparator);_=_.insert(m,qi.newNoDocument(m,ft.min()));const v=Vt().add(m),T=new zf(ft.min(),new Map,new kn(kt),_,v);await Fx(o,T),o.du=o.du.remove(m),o.Au.delete(e),xg(o)}else await C0(o.localStore,e,!1).then((()=>b0(o,e,n))).catch(oc)}async function LI(a,e){const n=mt(a),o=e.batch.batchId;try{const h=await Gb(n.localStore,e);jx(n,o,null),zx(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),await vu(n,h)}catch(h){await oc(h)}}async function PI(a,e,n){const o=mt(a);try{const h=await(function(_,v){const T=mt(_);return T.persistence.runTransaction("Reject batch","readwrite-primary",(A=>{let b;return T.mutationQueue.lookupMutationBatch(A,v).next((O=>(rn(O!==null,37113),b=O.keys(),T.mutationQueue.removeMutationBatch(A,O)))).next((()=>T.mutationQueue.performConsistencyCheck(A))).next((()=>T.documentOverlayCache.removeOverlaysForBatchId(A,b,v))).next((()=>T.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(A,b))).next((()=>T.localDocuments.getDocuments(A,b)))}))})(o.localStore,e);jx(o,e,n),zx(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),await vu(o,h)}catch(h){await oc(h)}}function zx(a,e){(a.mu.get(e)||[]).forEach((n=>{n.resolve()})),a.mu.delete(e)}function jx(a,e,n){const o=mt(a);let h=o.Vu[o.currentUser.toKey()];if(h){const m=h.get(e);m&&(n?m.reject(n):m.resolve(),h=h.remove(e)),o.Vu[o.currentUser.toKey()]=h}}function b0(a,e,n=null){a.sharedClientState.removeLocalQueryTarget(e);for(const o of a.Iu.get(e))a.Tu.delete(o),n&&a.Pu.yu(o,n);a.Iu.delete(e),a.isPrimaryClient&&a.Ru.jr(e).forEach((o=>{a.Ru.containsKey(o)||Hx(a,o)}))}function Hx(a,e){a.Eu.delete(e.path.canonicalString());const n=a.du.get(e);n!==null&&(cg(a.remoteStore,n),a.du=a.du.remove(e),a.Au.delete(n),xg(a))}function hE(a,e,n){for(const o of n)o instanceof kx?(a.Ru.addReference(o.key,e),BI(a,o)):o instanceof Vx?(ze(_g,"Document no longer in limbo: "+o.key),a.Ru.removeReference(o.key,e),a.Ru.containsKey(o.key)||Hx(a,o.key)):ct(19791,{wu:o})}function BI(a,e){const n=e.key,o=n.path.canonicalString();a.du.get(n)||a.Eu.has(o)||(ze(_g,"New document in limbo: "+n),a.Eu.add(o),xg(a))}function xg(a){for(;a.Eu.size>0&&a.du.size<a.maxConcurrentLimboResolutions;){const e=a.Eu.values().next().value;a.Eu.delete(e);const n=new Je(yn.fromString(e)),o=a.fu.next();a.Au.set(o,new vI(n)),a.du=a.du.insert(n,o),Ox(a.remoteStore,new ro(Rs(Pf(n.path)),o,"TargetPurposeLimboResolution",Df.ce))}}async function vu(a,e,n){const o=mt(a),h=[],m=[],_=[];o.Tu.isEmpty()||(o.Tu.forEach(((v,T)=>{_.push(o.pu(T,e,n).then((A=>{if((A||n)&&o.isPrimaryClient){const b=A?!A.fromCache:n?.targetChanges.get(T.targetId)?.current;o.sharedClientState.updateQueryState(T.targetId,b?"current":"not-current")}if(A){h.push(A);const b=og.As(T.targetId,A);m.push(b)}})))})),await Promise.all(_),o.Pu.H_(h),await(async function(T,A){const b=mt(T);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(O=>Se.forEach(A,(V=>Se.forEach(V.Es,(G=>b.persistence.referenceDelegate.addReference(O,V.targetId,G))).next((()=>Se.forEach(V.ds,(G=>b.persistence.referenceDelegate.removeReference(O,V.targetId,G)))))))))}catch(O){if(!lc(O))throw O;ze(lg,"Failed to update sequence numbers: "+O)}for(const O of A){const V=O.targetId;if(!O.fromCache){const G=b.Ms.get(V),ee=G.snapshotVersion,ie=G.withLastLimboFreeSnapshotVersion(ee);b.Ms=b.Ms.insert(V,ie)}}})(o.localStore,m))}async function kI(a,e){const n=mt(a);if(!n.currentUser.isEqual(e)){ze(_g,"User change. New user:",e.toKey());const o=await bx(n.localStore,e);n.currentUser=e,(function(m,_){m.mu.forEach((v=>{v.forEach((T=>{T.reject(new Ue(Te.CANCELLED,_))}))})),m.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await vu(n,o.Ls)}}function VI(a,e){const n=mt(a),o=n.Au.get(e);if(o&&o.hu)return Vt().add(o.key);{let h=Vt();const m=n.Iu.get(e);if(!m)return h;for(const _ of m){const v=n.Tu.get(_);h=h.unionWith(v.view.nu)}return h}}function Gx(a){const e=mt(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=Fx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MI.bind(null,e),e.Pu.H_=AI.bind(null,e.eventManager),e.Pu.yu=wI.bind(null,e.eventManager),e}function UI(a){const e=mt(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=LI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PI.bind(null,e),e}class Ef{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Hb(this.persistence,new Fb,e.initialUser,this.serializer)}Cu(e){return new Sx(ag.mi,this.serializer)}Du(e){return new Qb}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ef.provider={build:()=>new Ef};class FI extends Ef{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){rn(this.persistence.referenceDelegate instanceof pf,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new vb(o,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?gr.withCacheSize(this.cacheSizeBytes):gr.DEFAULT;return new Sx((o=>pf.mi(o,n)),this.serializer)}}class I0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>uE(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=kI.bind(null,this.syncEngine),await EI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new xI})()}createDatastore(e){const n=jf(e.databaseInfo.databaseId),o=(function(m){return new tI(m)})(e.databaseInfo);return(function(m,_,v,T){return new sI(m,_,v,T)})(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return(function(o,h,m,_,v){return new oI(o,h,m,_,v)})(this.localStore,this.datastore,e.asyncQueue,(n=>uE(this.syncEngine,n,0)),(function(){return rE.v()?new rE:new Zb})())}createSyncEngine(e,n){return(function(h,m,_,v,T,A,b){const O=new SI(h,m,_,v,T,A);return b&&(O.gu=!0),O})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const o=mt(n);ze(nl,"RemoteStore shutting down."),o.Ea.add(5),await Cu(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}I0.provider={build:()=>new I0};class Ag{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ya("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const yo="FirestoreClient";class zI{constructor(e,n,o,h,m){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=h,this.user=Hi.UNAUTHENTICATED,this.clientId=K0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=m,this.authCredentials.start(o,(async _=>{ze(yo,"Received user=",_.uid),await this.authCredentialListener(_),this.user=_})),this.appCheckCredentials.start(o,(_=>(ze(yo,"Received new app check token=",_),this.appCheckCredentialListener(_,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ga;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const o=gg(n,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function J1(a,e){a.asyncQueue.verifyOperationInProgress(),ze(yo,"Initializing OfflineComponentProvider");const n=a.configuration;await e.initialize(n);let o=n.initialUser;a.setCredentialChangeListener((async h=>{o.isEqual(h)||(await bx(e.localStore,h),o=h)})),e.persistence.setDatabaseDeletedListener((()=>a.terminate())),a._offlineComponents=e}async function fE(a,e){a.asyncQueue.verifyOperationInProgress();const n=await jI(a);ze(yo,"Initializing OnlineComponentProvider"),await e.initialize(n,a.configuration),a.setCredentialChangeListener((o=>aE(e.remoteStore,o))),a.setAppCheckTokenChangeListener(((o,h)=>aE(e.remoteStore,h))),a._onlineComponents=e}async function jI(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){ze(yo,"Using user provided OfflineComponentProvider");try{await J1(a,a._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(h){return h.name==="FirebaseError"?h.code===Te.FAILED_PRECONDITION||h.code===Te.UNIMPLEMENTED:!(typeof DOMException<"u"&&h instanceof DOMException)||h.code===22||h.code===20||h.code===11})(n))throw n;Zl("Error using user provided cache. Falling back to memory cache: "+n),await J1(a,new Ef)}}else ze(yo,"Using default OfflineComponentProvider"),await J1(a,new FI(void 0));return a._offlineComponents}async function qx(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(ze(yo,"Using user provided OnlineComponentProvider"),await fE(a,a._uninitializedComponentsProvider._online)):(ze(yo,"Using default OnlineComponentProvider"),await fE(a,new I0))),a._onlineComponents}function HI(a){return qx(a).then((e=>e.syncEngine))}async function _f(a){const e=await qx(a),n=e.eventManager;return n.onListen=bI.bind(null,e.syncEngine),n.onUnlisten=NI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=II.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=OI.bind(null,e.syncEngine),n}function GI(a,e,n={}){const o=new ga;return a.asyncQueue.enqueueAndForget((async()=>(function(m,_,v,T,A){const b=new Ag({next:V=>{b.Nu(),_.enqueueAndForget((()=>pg(m,O)));const G=V.docs.has(v);!G&&V.fromCache?A.reject(new Ue(Te.UNAVAILABLE,"Failed to get document because the client is offline.")):G&&V.fromCache&&T&&T.source==="server"?A.reject(new Ue(Te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):A.resolve(V)},error:V=>A.reject(V)}),O=new Eg(Pf(v.path),b,{includeMetadataChanges:!0,qa:!0});return mg(m,O)})(await _f(a),a.asyncQueue,e,n,o))),o.promise}function qI(a,e,n={}){const o=new ga;return a.asyncQueue.enqueueAndForget((async()=>(function(m,_,v,T,A){const b=new Ag({next:V=>{b.Nu(),_.enqueueAndForget((()=>pg(m,O))),V.fromCache&&T.source==="server"?A.reject(new Ue(Te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):A.resolve(V)},error:V=>A.reject(V)}),O=new Eg(v,b,{includeMetadataChanges:!0,qa:!0});return mg(m,O)})(await _f(a),a.asyncQueue,e,n,o))),o.promise}function Xx(a){const e={};return a.timeoutSeconds!==void 0&&(e.timeoutSeconds=a.timeoutSeconds),e}const dE=new Map;const Yx="firestore.googleapis.com",gE=!0;class mE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ue(Te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Yx,this.ssl=gE}else this.host=e.host,this.ssl=e.ssl??gE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=vx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Tb)throw new Ue(Te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xx(e.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Ue(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Ue(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Ue(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,h){return o.timeoutSeconds===h.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qf{constructor(e,n,o,h){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=h,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ue(Te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ue(Te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new Zv;switch(o.type){case"firstParty":return new tS(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new Ue(Te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const o=dE.get(n);o&&(ze("ComponentProvider","Removing Datastore"),dE.delete(n),o.terminate())})(this),Promise.resolve()}}function XI(a,e,n,o={}){a=tr(a,qf);const h=ic(e),m=a._getSettings(),_={...m,emulatorOptions:a._getEmulatorOptions()},v=`${e}:${n}`;h&&(jE(`https://${v}`),HE("Firestore",!0)),m.host!==Yx&&m.host!==v&&Zl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const T={...m,host:v,ssl:h,emulatorOptions:o};if(!Zo(T,_)&&(a._setSettings(T),o.mockUserToken)){let A,b;if(typeof o.mockUserToken=="string")A=o.mockUserToken,b=Hi.MOCK_USER;else{A=oT(o.mockUserToken,a._app?.options.projectId);const O=o.mockUserToken.sub||o.mockUserToken.user_id;if(!O)throw new Ue(Te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new Hi(O)}a._authCredentials=new Jv(new k_(A,b))}}class ol{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new ol(this.firestore,e,this._query)}}class Gn{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gn(this.firestore,e,this._key)}toJSON(){return{type:Gn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,o){if(xu(n,Gn._jsonSchema))return new Gn(e,o||null,new Je(yn.fromString(n.referencePath)))}}Gn._jsonSchemaVersion="firestore/documentReference/1.0",Gn._jsonSchema={type:ri("string",Gn._jsonSchemaVersion),referencePath:ri("string")};class uo extends ol{constructor(e,n,o){super(e,n,Pf(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gn(this.firestore,null,new Je(e))}withConverter(e){return new uo(this.firestore,e,this._path)}}function Gi(a,e,...n){if(a=Qn(a),V_("collection","path",e),a instanceof qf){const o=yn.fromString(e,...n);return Iy(o),new uo(a,null,o)}{if(!(a instanceof Gn||a instanceof uo))throw new Ue(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=a._path.child(yn.fromString(e,...n));return Iy(o),new uo(a.firestore,null,o)}}function Lr(a,e,...n){if(a=Qn(a),arguments.length===1&&(e=K0.newId()),V_("doc","path",e),a instanceof qf){const o=yn.fromString(e,...n);return by(o),new Gn(a,null,new Je(o))}{if(!(a instanceof Gn||a instanceof uo))throw new Ue(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=a._path.child(yn.fromString(e,...n));return by(o),new Gn(a.firestore,a instanceof uo?a.converter:null,new Je(o))}}const pE="AsyncQueue";class yE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Rx(this,"async_queue_retry"),this._c=()=>{const o=Z1();o&&ze(pE,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=e;const n=Z1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Z1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ga;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!lc(e))throw e;ze(pE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((o=>{throw this.nc=o,this.rc=!1,ya("INTERNAL UNHANDLED ERROR: ",EE(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=n,n}enqueueAfterDelay(e,n,o){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const h=dg.createAndSchedule(this,e,n,o,(m=>this.hc(m)));return this.tc.push(h),h}uc(){this.nc&&ct(47125,{Pc:EE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,o)=>n.targetTimeMs-o.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function EE(a){let e=a.message||"";return a.stack&&(e=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),e}function _E(a){return(function(n,o){if(typeof n!="object"||n===null)return!1;const h=n;for(const m of o)if(m in h&&typeof h[m]=="function")return!0;return!1})(a,["next","error","complete"])}class Ls extends qf{constructor(e,n,o,h){super(e,n,o,h),this.type="firestore",this._queue=new yE,this._persistenceKey=h?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yE(e),this._firestoreClient=void 0,await e}}}function YI(a,e){const n=typeof a=="object"?a:YE(),o=typeof a=="string"?a:cf,h=U0(n,"firestore").getImmediate({identifier:o});if(!h._initialized){const m=sT("firestore");m&&XI(h,...m)}return h}function Su(a){if(a._terminated)throw new Ue(Te.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||WI(a),a._firestoreClient}function WI(a){const e=a._freezeSettings(),n=(function(h,m,_,v){return new ES(h,m,_,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,Xx(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(a._databaseId,a._app?.options.appId||"",a._persistenceKey,e);a._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(a._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),a._firestoreClient=new zI(a._authCredentials,a._appCheckCredentials,a._queue,n,a._componentsProvider&&(function(h){const m=h?._online.build();return{_offline:h?._offline.build(m),_online:m}})(a._componentsProvider))}class ts{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ts(Mi.fromBase64String(e))}catch(n){throw new Ue(Te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ts(Mi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ts._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(xu(e,ts._jsonSchema))return ts.fromBase64String(e.bytes)}}ts._jsonSchemaVersion="firestore/bytes/1.0",ts._jsonSchema={type:ri("string",ts._jsonSchemaVersion),bytes:ri("string")};class bu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ue(Te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Di(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class wg{constructor(e){this._methodName=e}}class Os{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ue(Te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ue(Te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return kt(this._lat,e._lat)||kt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Os._jsonSchemaVersion}}static fromJSON(e){if(xu(e,Os._jsonSchema))return new Os(e.latitude,e.longitude)}}Os._jsonSchemaVersion="firestore/geoPoint/1.0",Os._jsonSchema={type:ri("string",Os._jsonSchemaVersion),latitude:ri("number"),longitude:ri("number")};class Ds{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,h){if(o.length!==h.length)return!1;for(let m=0;m<o.length;++m)if(o[m]!==h[m])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ds._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(xu(e,Ds._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ds(e.vectorValues);throw new Ue(Te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ds._jsonSchemaVersion="firestore/vectorValue/1.0",Ds._jsonSchema={type:ri("string",Ds._jsonSchemaVersion),vectorValues:ri("object")};const KI=/^__.*__$/;class QI{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return this.fieldMask!==null?new Ao(e,this.data,this.fieldMask,n,this.fieldTransforms):new wu(e,this.data,n,this.fieldTransforms)}}class Wx{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new Ao(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Kx(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ct(40011,{Ac:a})}}class Tg{constructor(e,n,o,h,m,_){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=h,m===void 0&&this.Rc(),this.fieldTransforms=m||[],this.fieldMask=_||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Tg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),o=this.Vc({path:n,fc:!1});return o.gc(e),o}yc(e){const n=this.path?.child(e),o=this.Vc({path:n,fc:!1});return o.Rc(),o}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return xf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Kx(this.Ac)&&KI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ZI{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||jf(e)}Cc(e,n,o,h=!1){return new Tg({Ac:e,methodName:n,Dc:o,path:Di.emptyPath(),fc:!1,bc:h},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Iu(a){const e=a._freezeSettings(),n=jf(a._databaseId);return new ZI(a._databaseId,!!e.ignoreUndefinedProperties,n)}function Cg(a,e,n,o,h,m={}){const _=a.Cc(m.merge||m.mergeFields?2:0,e,n,h);vg("Data must be an object, but it was:",_,o);const v=Jx(o,_);let T,A;if(m.merge)T=new Pr(_.fieldMask),A=_.fieldTransforms;else if(m.mergeFields){const b=[];for(const O of m.mergeFields){const V=R0(e,O,n);if(!_.contains(V))throw new Ue(Te.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);eA(b,V)||b.push(V)}T=new Pr(b),A=_.fieldTransforms.filter((O=>T.covers(O.field)))}else T=null,A=_.fieldTransforms;return new QI(new mr(v),T,A)}class Xf extends wg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xf}}function Qx(a,e,n,o){const h=a.Cc(1,e,n);vg("Data must be an object, but it was:",h,o);const m=[],_=mr.empty();xo(o,((T,A)=>{const b=Sg(e,T,n);A=Qn(A);const O=h.yc(b);if(A instanceof Xf)m.push(b);else{const V=Ru(A,O);V!=null&&(m.push(b),_.set(b,V))}}));const v=new Pr(m);return new Wx(_,v,h.fieldTransforms)}function Zx(a,e,n,o,h,m){const _=a.Cc(1,e,n),v=[R0(e,o,n)],T=[h];if(m.length%2!=0)throw new Ue(Te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<m.length;V+=2)v.push(R0(e,m[V])),T.push(m[V+1]);const A=[],b=mr.empty();for(let V=v.length-1;V>=0;--V)if(!eA(A,v[V])){const G=v[V];let ee=T[V];ee=Qn(ee);const ie=_.yc(G);if(ee instanceof Xf)A.push(G);else{const he=Ru(ee,ie);he!=null&&(A.push(G),b.set(G,he))}}const O=new Pr(A);return new Wx(b,O,_.fieldTransforms)}function JI(a,e,n,o=!1){return Ru(n,a.Cc(o?4:3,e))}function Ru(a,e){if($x(a=Qn(a)))return vg("Unsupported field value:",e,a),Jx(a,e);if(a instanceof wg)return(function(o,h){if(!Kx(h.Ac))throw h.Sc(`${o._methodName}() can only be used with update() and set()`);if(!h.path)throw h.Sc(`${o._methodName}() is not currently supported inside arrays`);const m=o._toFieldTransform(h);m&&h.fieldTransforms.push(m)})(a,e),null;if(a===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(o,h){const m=[];let _=0;for(const v of o){let T=Ru(v,h.wc(_));T==null&&(T={nullValue:"NULL_VALUE"}),m.push(T),_++}return{arrayValue:{values:m}}})(a,e)}return(function(o,h){if((o=Qn(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return zS(h.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const m=on.fromDate(o);return{timestampValue:mf(h.serializer,m)}}if(o instanceof on){const m=new on(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:mf(h.serializer,m)}}if(o instanceof Os)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof ts)return{bytesValue:Ex(h.serializer,o._byteString)};if(o instanceof Gn){const m=h.databaseId,_=o.firestore._databaseId;if(!_.isEqual(m))throw h.Sc(`Document reference is for database ${_.projectId}/${_.database} but should be for database ${m.projectId}/${m.database}`);return{referenceValue:rg(o.firestore._databaseId||h.databaseId,o._key.path)}}if(o instanceof Ds)return(function(_,v){return{mapValue:{fields:{[Y_]:{stringValue:W_},[uf]:{arrayValue:{values:_.toArray().map((A=>{if(typeof A!="number")throw v.Sc("VectorValues must only contain numeric values.");return tg(v.serializer,A)}))}}}}}})(o,h);throw h.Sc(`Unsupported field value: ${Of(o)}`)})(a,e)}function Jx(a,e){const n={};return z_(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xo(a,((o,h)=>{const m=Ru(h,e.mc(o));m!=null&&(n[o]=m)})),{mapValue:{fields:n}}}function $x(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof on||a instanceof Os||a instanceof ts||a instanceof Gn||a instanceof wg||a instanceof Ds)}function vg(a,e,n){if(!$x(n)||!U_(n)){const o=Of(n);throw o==="an object"?e.Sc(a+" a custom object"):e.Sc(a+" "+o)}}function R0(a,e,n){if((e=Qn(e))instanceof bu)return e._internalPath;if(typeof e=="string")return Sg(a,e);throw xf("Field path arguments must be of type string or ",a,!1,void 0,n)}const $I=new RegExp("[~\\*/\\[\\]]");function Sg(a,e,n){if(e.search($I)>=0)throw xf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,n);try{return new bu(...e.split("."))._internalPath}catch{throw xf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,n)}}function xf(a,e,n,o,h){const m=o&&!o.isEmpty(),_=h!==void 0;let v=`Function ${e}() called with invalid data`;n&&(v+=" (via `toFirestore()`)"),v+=". ";let T="";return(m||_)&&(T+=" (found",m&&(T+=` in field ${o}`),_&&(T+=` in document ${h}`),T+=")"),new Ue(Te.INVALID_ARGUMENT,v+a+T)}function eA(a,e){return a.some((n=>n.isEqual(e)))}class tA{constructor(e,n,o,h,m){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=h,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new Gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new e4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(bg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class e4 extends tA{data(){return super.data()}}function bg(a,e){return typeof e=="string"?Sg(a,e):e instanceof bu?e._internalPath:e._delegate._internalPath}function nA(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new Ue(Te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ig{}class t4 extends Ig{}function so(a,e,...n){let o=[];e instanceof Ig&&o.push(e),o=o.concat(n),(function(m){const _=m.filter((T=>T instanceof Rg)).length,v=m.filter((T=>T instanceof Yf)).length;if(_>1||_>0&&v>0)throw new Ue(Te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const h of o)a=h._apply(a);return a}class Yf extends t4{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new Yf(e,n,o)}_apply(e){const n=this._parse(e);return iA(e._query,n),new ol(e.firestore,e.converter,E0(e._query,n))}_parse(e){const n=Iu(e.firestore);return(function(m,_,v,T,A,b,O){let V;if(A.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new Ue(Te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){AE(O,b);const ee=[];for(const ie of O)ee.push(xE(T,m,ie));V={arrayValue:{values:ee}}}else V=xE(T,m,O)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||AE(O,b),V=JI(v,_,O,b==="in"||b==="not-in");return ii.create(A,b,V)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ss(a,e,n){const o=e,h=bg("where",a);return Yf._create(h,o,n)}class Rg extends Ig{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Rg(e,n)}_parse(e){const n=this._queryConstraints.map((o=>o._parse(e))).filter((o=>o.getFilters().length>0));return n.length===1?n[0]:gs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(h,m){let _=h;const v=m.getFlattenedFilters();for(const T of v)iA(_,T),_=E0(_,T)})(e._query,n),new ol(e.firestore,e.converter,E0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function xE(a,e,n){if(typeof(n=Qn(n))=="string"){if(n==="")throw new Ue(Te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nx(e)&&n.indexOf("/")!==-1)throw new Ue(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(yn.fromString(n));if(!Je.isDocumentKey(o))throw new Ue(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return By(a,new Je(o))}if(n instanceof Gn)return By(a,n._key);throw new Ue(Te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Of(n)}.`)}function AE(a,e){if(!Array.isArray(a)||a.length===0)throw new Ue(Te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iA(a,e){const n=(function(h,m){for(const _ of h)for(const v of _.getFlattenedFilters())if(m.indexOf(v.op)>=0)return v.op;return null})(a.filters,(function(h){switch(h){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ue(Te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ue(Te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class n4{convertValue(e,n="none"){switch(mo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(go(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ct(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return xo(e,((h,m)=>{o[h]=this.convertValue(m,n)})),o}convertVectorValue(e){const n=e.fields?.[uf].arrayValue?.values?.map((o=>Kn(o.doubleValue)));return new Ds(n)}convertGeoPoint(e){return new Os(Kn(e.latitude),Kn(e.longitude))}convertArray(e,n){return(e.values||[]).map((o=>this.convertValue(o,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const o=Lf(e);return o==null?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(cu(e));default:return null}}convertTimestamp(e){const n=fo(e);return new on(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=yn.fromString(e);rn(Cx(o),9688,{name:e});const h=new uu(o.get(1),o.get(3)),m=new Je(o.popFirst(5));return h.isEqual(n)||ya(`Document ${m} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),m}}function Ng(a,e,n){let o;return o=a?n&&(n.merge||n.mergeFields)?a.toFirestore(e,n):a.toFirestore(e):e,o}class Zc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ko extends tA{constructor(e,n,o,h,m,_){super(e,n,o,h,_),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Jh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(bg("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ue(Te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ko._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ko._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ko._jsonSchema={type:ri("string",Ko._jsonSchemaVersion),bundleSource:ri("string","DocumentSnapshot"),bundleName:ri("string"),bundle:ri("string")};class Jh extends Ko{data(e={}){return super.data(e)}}class Qo{constructor(e,n,o,h){this._firestore=e,this._userDataWriter=n,this._snapshot=h,this.metadata=new Zc(h.hasPendingWrites,h.fromCache),this.query=o}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((o=>{e.call(n,new Jh(this._firestore,this._userDataWriter,o.key,o,new Zc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ue(Te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(h,m){if(h._snapshot.oldDocs.isEmpty()){let _=0;return h._snapshot.docChanges.map((v=>{const T=new Jh(h._firestore,h._userDataWriter,v.doc.key,v.doc,new Zc(h._snapshot.mutatedKeys.has(v.doc.key),h._snapshot.fromCache),h.query.converter);return v.doc,{type:"added",doc:T,oldIndex:-1,newIndex:_++}}))}{let _=h._snapshot.oldDocs;return h._snapshot.docChanges.filter((v=>m||v.type!==3)).map((v=>{const T=new Jh(h._firestore,h._userDataWriter,v.doc.key,v.doc,new Zc(h._snapshot.mutatedKeys.has(v.doc.key),h._snapshot.fromCache),h.query.converter);let A=-1,b=-1;return v.type!==0&&(A=_.indexOf(v.doc.key),_=_.delete(v.doc.key)),v.type!==1&&(_=_.add(v.doc),b=_.indexOf(v.doc.key)),{type:i4(v.type),doc:T,oldIndex:A,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ue(Te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Qo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=K0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],o=[],h=[];return this.docs.forEach((m=>{m._document!==null&&(n.push(m._document),o.push(this._userDataWriter.convertObjectMap(m._document.data.value.mapValue.fields,"previous")),h.push(m.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function i4(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ct(61501,{type:a})}}function Af(a){a=tr(a,Gn);const e=tr(a.firestore,Ls);return GI(Su(e),a._key).then((n=>rA(e,a,n)))}Qo._jsonSchemaVersion="firestore/querySnapshot/1.0",Qo._jsonSchema={type:ri("string",Qo._jsonSchemaVersion),bundleSource:ri("string","QuerySnapshot"),bundleName:ri("string"),bundle:ri("string")};class Og extends n4{constructor(e){super(),this.firestore=e}convertBytes(e){return new ts(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,n)}}function ns(a){a=tr(a,ol);const e=tr(a.firestore,Ls),n=Su(e),o=new Og(e);return nA(a._query),qI(n,a._query).then((h=>new Qo(e,o,a,h)))}function Dg(a,e,n){a=tr(a,Gn);const o=tr(a.firestore,Ls),h=Ng(a.converter,e,n);return Nu(o,[Cg(Iu(o),"setDoc",a._key,h,a.converter!==null,n).toMutation(a._key,nr.none())])}function wf(a,e,n,...o){a=tr(a,Gn);const h=tr(a.firestore,Ls),m=Iu(h);let _;return _=typeof(e=Qn(e))=="string"||e instanceof bu?Zx(m,"updateDoc",a._key,e,n,o):Qx(m,"updateDoc",a._key,e),Nu(h,[_.toMutation(a._key,nr.exists(!0))])}function wE(a){return Nu(tr(a.firestore,Ls),[new Ff(a._key,nr.none())])}function N0(a,e){const n=tr(a.firestore,Ls),o=Lr(a),h=Ng(a.converter,e);return Nu(n,[Cg(Iu(a.firestore),"addDoc",o._key,h,a.converter!==null,{}).toMutation(o._key,nr.exists(!1))]).then((()=>o))}function r4(a,...e){a=Qn(a);let n={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||_E(e[o])||(n=e[o++]);const h={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(_E(e[o])){const T=e[o];e[o]=T.next?.bind(T),e[o+1]=T.error?.bind(T),e[o+2]=T.complete?.bind(T)}let m,_,v;if(a instanceof Gn)_=tr(a.firestore,Ls),v=Pf(a._key.path),m={next:T=>{e[o]&&e[o](rA(_,a,T))},error:e[o+1],complete:e[o+2]};else{const T=tr(a,ol);_=tr(T.firestore,Ls),v=T._query;const A=new Og(_);m={next:b=>{e[o]&&e[o](new Qo(_,A,T,b))},error:e[o+1],complete:e[o+2]},nA(a._query)}return(function(A,b,O,V){const G=new Ag(V),ee=new Eg(b,G,O);return A.asyncQueue.enqueueAndForget((async()=>mg(await _f(A),ee))),()=>{G.Nu(),A.asyncQueue.enqueueAndForget((async()=>pg(await _f(A),ee)))}})(Su(_),v,h,m)}function Nu(a,e){return(function(o,h){const m=new ga;return o.asyncQueue.enqueueAndForget((async()=>DI(await HI(o),h,m))),m.promise})(Su(a),e)}function rA(a,e,n){const o=n.docs.get(e._key),h=new Og(a);return new Ko(a,h,e._key,o,new Zc(n.hasPendingWrites,n.fromCache),e.converter)}class s4{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Iu(e)}set(e,n,o){this._verifyNotCommitted();const h=$1(e,this._firestore),m=Ng(h.converter,n,o),_=Cg(this._dataReader,"WriteBatch.set",h._key,m,h.converter!==null,o);return this._mutations.push(_.toMutation(h._key,nr.none())),this}update(e,n,o,...h){this._verifyNotCommitted();const m=$1(e,this._firestore);let _;return _=typeof(n=Qn(n))=="string"||n instanceof bu?Zx(this._dataReader,"WriteBatch.update",m._key,n,o,h):Qx(this._dataReader,"WriteBatch.update",m._key,n),this._mutations.push(_.toMutation(m._key,nr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=$1(e,this._firestore);return this._mutations=this._mutations.concat(new Ff(n._key,nr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ue(Te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $1(a,e){if((a=Qn(a)).firestore!==e)throw new Ue(Te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}function TE(a){return Su(a=tr(a,Ls)),new s4(a,(e=>Nu(a,e)))}(function(e,n=!0){(function(h){ac=h})(rc),Ql(new Jo("firestore",((o,{instanceIdentifier:h,options:m})=>{const _=o.getProvider("app").getImmediate(),v=new Ls(new $v(o.getProvider("auth-internal")),new nS(_,o.getProvider("app-check-internal")),(function(A,b){if(!Object.prototype.hasOwnProperty.apply(A.options,["projectId"]))throw new Ue(Te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uu(A.options.projectId,b)})(_,h),_);return m={useFetchStreams:n,...m},v._setSettings(m),v}),"PUBLIC").setMultipleInstances(!0)),lo(Ty,Cy,e),lo(Ty,Cy,"esm2020")})();const a4={apiKey:"AIzaSyARwb6K0M4l-hWKi8FrOLEVqRqeHRf8JR4",authDomain:"oppmoteboka.firebaseapp.com",projectId:"oppmoteboka",storageBucket:"oppmoteboka.firebasestorage.app",messagingSenderId:"732911922070",appId:"1:732911922070:web:b16d9de65062395c018bb7"},sA=XE(a4),jh=Kv(sA),nn=YI(sA);function o4(){const[a,e]=nt.useState(null),[n,o]=nt.useState(!0);return nt.useEffect(()=>{const v=kC(jh,async T=>{if(!T){e(null),o(!1);return}const A=Lr(nn,"users",T.uid),b=await Af(A);if(b.exists()){const O=b.data(),V={uid:T.uid,email:T.email,displayName:O.displayName??"Ingen navn",role:O.role??"student",term:O.term??null,semesterStatus:O.semesterStatus??"aktiv"};e(V)}else{const O={uid:T.uid,email:T.email,displayName:T.email,role:"student",term:null,semesterStatus:"aktiv"};await Dg(A,O),e(O)}o(!1)});return()=>v()},[]),{user:a,loading:n,login:async(v,T)=>{await LC(jh,v,T)},register:async(v,T)=>{await MC(jh,v,T)},logout:async()=>{await VC(jh)}}}var je;(function(a){a[a.QR_CODE=0]="QR_CODE",a[a.AZTEC=1]="AZTEC",a[a.CODABAR=2]="CODABAR",a[a.CODE_39=3]="CODE_39",a[a.CODE_93=4]="CODE_93",a[a.CODE_128=5]="CODE_128",a[a.DATA_MATRIX=6]="DATA_MATRIX",a[a.MAXICODE=7]="MAXICODE",a[a.ITF=8]="ITF",a[a.EAN_13=9]="EAN_13",a[a.EAN_8=10]="EAN_8",a[a.PDF_417=11]="PDF_417",a[a.RSS_14=12]="RSS_14",a[a.RSS_EXPANDED=13]="RSS_EXPANDED",a[a.UPC_A=14]="UPC_A",a[a.UPC_E=15]="UPC_E",a[a.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(je||(je={}));var CE=new Map([[je.QR_CODE,"QR_CODE"],[je.AZTEC,"AZTEC"],[je.CODABAR,"CODABAR"],[je.CODE_39,"CODE_39"],[je.CODE_93,"CODE_93"],[je.CODE_128,"CODE_128"],[je.DATA_MATRIX,"DATA_MATRIX"],[je.MAXICODE,"MAXICODE"],[je.ITF,"ITF"],[je.EAN_13,"EAN_13"],[je.EAN_8,"EAN_8"],[je.PDF_417,"PDF_417"],[je.RSS_14,"RSS_14"],[je.RSS_EXPANDED,"RSS_EXPANDED"],[je.UPC_A,"UPC_A"],[je.UPC_E,"UPC_E"],[je.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),vE;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.URL=1]="URL"})(vE||(vE={}));function l4(a){return Object.values(je).includes(a)}var Tf;(function(a){a[a.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",a[a.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Tf||(Tf={}));var c4=(function(){function a(){}return a.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",a.SCAN_DEFAULT_FPS=2,a.DEFAULT_DISABLE_FLIP=!1,a.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,a.DEFAULT_SUPPORTED_SCAN_TYPE=[Tf.SCAN_TYPE_CAMERA,Tf.SCAN_TYPE_FILE],a})(),aA=(function(){function a(e,n){this.format=e,this.formatName=n}return a.prototype.toString=function(){return this.formatName},a.create=function(e){if(!CE.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new a(e,CE.get(e))},a})(),SE=(function(){function a(){}return a.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},a.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},a})(),O0;(function(a){a[a.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",a[a.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",a[a.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(O0||(O0={}));var u4=(function(){function a(){}return a.createFrom=function(e){return{errorMessage:e,type:O0.UNKWOWN_ERROR}},a})(),h4=(function(){function a(e){this.verbose=e}return a.prototype.log=function(e){this.verbose&&console.log(e)},a.prototype.warn=function(e){this.verbose&&console.warn(e)},a.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},a.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},a})();function ua(a){return typeof a>"u"||a===null}var Gl=(function(){function a(){}return a.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},a.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},a.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},a.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},a.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},a.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},a.scannerPaused=function(){return"Scanner paused"},a})(),oA=(function(){function a(){}return a.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var o=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(o,"."),!0),!1}for(var h=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],m=new Set(h),_=Object.keys(e),v=0,T=_;v<T.length;v++){var A=T[v];if(m.has(A))return n.logError("".concat(A," is not supported videoConstaints."),!0),!1}return!0},a})(),Jc={exports:{}},f4=Jc.exports,bE;function d4(){return bE||(bE=1,(function(a,e){(function(n,o){o(e)})(f4,(function(n){function o(D){return D==null}var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,i){D.__proto__=i}||function(D,i){for(var s in i)i.hasOwnProperty(s)&&(D[s]=i[s])};function m(D,i){h(D,i);function s(){this.constructor=D}D.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}function _(D,i){var s=Object.setPrototypeOf;s?s(D,i):D.__proto__=i}function v(D,i){i===void 0&&(i=D.constructor);var s=Error.captureStackTrace;s&&s(D,i)}var T=(function(D){m(i,D);function i(s){var l=this.constructor,u=D.call(this,s)||this;return Object.defineProperty(u,"name",{value:l.name,enumerable:!1}),_(u,l.prototype),v(u),u}return i})(Error);class A extends T{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}A.kind="Exception";class b extends A{}b.kind="ArgumentException";class O extends A{}O.kind="IllegalArgumentException";class V{constructor(i){if(this.binarizer=i,i===null)throw new O("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,s){return this.binarizer.getBlackRow(i,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,s,l,u){const f=this.binarizer.getLuminanceSource().crop(i,s,l,u);return new V(this.binarizer.createBinarizer(f))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new V(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new V(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class G extends A{static getChecksumInstance(){return new G}}G.kind="ChecksumException";class ee{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class ie{static arraycopy(i,s,l,u,f){for(;f--;)l[u++]=i[s++]}static currentTimeMillis(){return Date.now()}}class he extends A{}he.kind="IndexOutOfBoundsException";class Le extends he{constructor(i=void 0,s=void 0){super(s),this.index=i,this.message=s}}Le.kind="ArrayIndexOutOfBoundsException";class be{static fill(i,s){for(let l=0,u=i.length;l<u;l++)i[l]=s}static fillWithin(i,s,l,u){be.rangeCheck(i.length,s,l);for(let f=s;f<l;f++)i[f]=u}static rangeCheck(i,s,l){if(s>l)throw new O("fromIndex("+s+") > toIndex("+l+")");if(s<0)throw new Le(s);if(l>i)throw new Le(l)}static asList(...i){return i}static create(i,s,l){return Array.from({length:i}).map(f=>Array.from({length:s}).fill(l))}static createInt32Array(i,s,l){return Array.from({length:i}).map(f=>Int32Array.from({length:s}).fill(l))}static equals(i,s){if(!i||!s||!i.length||!s.length||i.length!==s.length)return!1;for(let l=0,u=i.length;l<u;l++)if(i[l]!==s[l])return!1;return!0}static hashCode(i){if(i===null)return 0;let s=1;for(const l of i)s=31*s+l;return s}static fillUint8Array(i,s){for(let l=0;l!==i.length;l++)i[l]=s}static copyOf(i,s){return i.slice(0,s)}static copyOfUint8Array(i,s){if(i.length<=s){const l=new Uint8Array(s);return l.set(i),l}return i.slice(0,s)}static copyOfRange(i,s,l){const u=l-s,f=new Int32Array(u);return ie.arraycopy(i,s,f,0,u),f}static binarySearch(i,s,l){l===void 0&&(l=be.numberComparator);let u=0,f=i.length-1;for(;u<=f;){const g=f+u>>1,y=l(s,i[g]);if(y>0)u=g+1;else if(y<0)f=g-1;else return g}return-u-1}static numberComparator(i,s){return i-s}}class me{static numberOfTrailingZeros(i){let s;if(i===0)return 32;let l=31;return s=i<<16,s!==0&&(l-=16,i=s),s=i<<8,s!==0&&(l-=8,i=s),s=i<<4,s!==0&&(l-=4,i=s),s=i<<2,s!==0&&(l-=2,i=s),l-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let s=1;return i>>>16||(s+=16,i<<=16),i>>>24||(s+=8,i<<=8),i>>>28||(s+=4,i<<=4),i>>>30||(s+=2,i<<=2),s-=i>>>31,s}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,s){return Math.trunc(i/s)}static parseInt(i,s=void 0){return parseInt(i,s)}}me.MIN_VALUE_32_BITS=-2147483648,me.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Be{constructor(i,s){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,s==null?this.bits=Be.makeArray(i):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const s=Be.makeArray(i);ie.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const s=this.size;if(i>=s)return s;const l=this.bits;let u=Math.floor(i/32),f=l[u];f&=~((1<<(i&31))-1);const g=l.length;for(;f===0;){if(++u===g)return s;f=l[u]}const y=u*32+me.numberOfTrailingZeros(f);return y>s?s:y}getNextUnset(i){const s=this.size;if(i>=s)return s;const l=this.bits;let u=Math.floor(i/32),f=~l[u];f&=~((1<<(i&31))-1);const g=l.length;for(;f===0;){if(++u===g)return s;f=~l[u]}const y=u*32+me.numberOfTrailingZeros(f);return y>s?s:y}setBulk(i,s){this.bits[Math.floor(i/32)]=s}setRange(i,s){if(s<i||i<0||s>this.size)throw new O;if(s===i)return;s--;const l=Math.floor(i/32),u=Math.floor(s/32),f=this.bits;for(let g=l;g<=u;g++){const y=g>l?0:i&31,C=(2<<(g<u?31:s&31))-(1<<y);f[g]|=C}}clear(){const i=this.bits.length,s=this.bits;for(let l=0;l<i;l++)s[l]=0}isRange(i,s,l){if(s<i||i<0||s>this.size)throw new O;if(s===i)return!0;s--;const u=Math.floor(i/32),f=Math.floor(s/32),g=this.bits;for(let y=u;y<=f;y++){const x=y>u?0:i&31,I=(2<<(y<f?31:s&31))-(1<<x)&4294967295;if((g[y]&I)!==(l?I:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,s){if(s<0||s>32)throw new O("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let l=s;l>0;l--)this.appendBit((i>>l-1&1)===1)}appendBitArray(i){const s=i.size;this.ensureCapacity(this.size+s);for(let l=0;l<s;l++)this.appendBit(i.get(l))}xor(i){if(this.size!==i.size)throw new O("Sizes don't match");const s=this.bits;for(let l=0,u=s.length;l<u;l++)s[l]^=i.bits[l]}toBytes(i,s,l,u){for(let f=0;f<u;f++){let g=0;for(let y=0;y<8;y++)this.get(i)&&(g|=1<<7-y),i++;s[l+f]=g}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),l=s+1,u=this.bits;for(let f=0;f<l;f++){let g=u[f];g=g>>1&1431655765|(g&1431655765)<<1,g=g>>2&858993459|(g&858993459)<<2,g=g>>4&252645135|(g&252645135)<<4,g=g>>8&16711935|(g&16711935)<<8,g=g>>16&65535|(g&65535)<<16,i[s-f]=g}if(this.size!==l*32){const f=l*32-this.size;let g=i[0]>>>f;for(let y=1;y<l;y++){const x=i[y];g|=x<<32-f,i[y-1]=g,g=x>>>f}i[l-1]=g}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof Be))return!1;const s=i;return this.size===s.size&&be.equals(this.bits,s.bits)}hashCode(){return 31*this.size+be.hashCode(this.bits)}toString(){let i="";for(let s=0,l=this.size;s<l;s++)(s&7)===0&&(i+=" "),i+=this.get(s)?"X":".";return i}clone(){return new Be(this.size,this.bits.slice())}}var $e;(function(D){D[D.OTHER=0]="OTHER",D[D.PURE_BARCODE=1]="PURE_BARCODE",D[D.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",D[D.TRY_HARDER=3]="TRY_HARDER",D[D.CHARACTER_SET=4]="CHARACTER_SET",D[D.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",D[D.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",D[D.ASSUME_GS1=7]="ASSUME_GS1",D[D.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",D[D.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",D[D.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})($e||($e={}));var xe=$e;class k extends A{static getFormatInstance(){return new k}}k.kind="FormatException";var F;(function(D){D[D.Cp437=0]="Cp437",D[D.ISO8859_1=1]="ISO8859_1",D[D.ISO8859_2=2]="ISO8859_2",D[D.ISO8859_3=3]="ISO8859_3",D[D.ISO8859_4=4]="ISO8859_4",D[D.ISO8859_5=5]="ISO8859_5",D[D.ISO8859_6=6]="ISO8859_6",D[D.ISO8859_7=7]="ISO8859_7",D[D.ISO8859_8=8]="ISO8859_8",D[D.ISO8859_9=9]="ISO8859_9",D[D.ISO8859_10=10]="ISO8859_10",D[D.ISO8859_11=11]="ISO8859_11",D[D.ISO8859_13=12]="ISO8859_13",D[D.ISO8859_14=13]="ISO8859_14",D[D.ISO8859_15=14]="ISO8859_15",D[D.ISO8859_16=15]="ISO8859_16",D[D.SJIS=16]="SJIS",D[D.Cp1250=17]="Cp1250",D[D.Cp1251=18]="Cp1251",D[D.Cp1252=19]="Cp1252",D[D.Cp1256=20]="Cp1256",D[D.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",D[D.UTF8=22]="UTF8",D[D.ASCII=23]="ASCII",D[D.Big5=24]="Big5",D[D.GB18030=25]="GB18030",D[D.EUC_KR=26]="EUC_KR"})(F||(F={}));class L{constructor(i,s,l,...u){this.valueIdentifier=i,this.name=l,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=u,L.VALUE_IDENTIFIER_TO_ECI.set(i,this),L.NAME_TO_ECI.set(l,this);const f=this.values;for(let g=0,y=f.length;g!==y;g++){const x=f[g];L.VALUES_TO_ECI.set(x,this)}for(const g of u)L.NAME_TO_ECI.set(g,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new k("incorect value");const s=L.VALUES_TO_ECI.get(i);if(s===void 0)throw new k("incorect value");return s}static getCharacterSetECIByName(i){const s=L.NAME_TO_ECI.get(i);if(s===void 0)throw new k("incorect value");return s}equals(i){if(!(i instanceof L))return!1;const s=i;return this.getName()===s.getName()}}L.VALUE_IDENTIFIER_TO_ECI=new Map,L.VALUES_TO_ECI=new Map,L.NAME_TO_ECI=new Map,L.Cp437=new L(F.Cp437,Int32Array.from([0,2]),"Cp437"),L.ISO8859_1=new L(F.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),L.ISO8859_2=new L(F.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),L.ISO8859_3=new L(F.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),L.ISO8859_4=new L(F.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),L.ISO8859_5=new L(F.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),L.ISO8859_6=new L(F.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),L.ISO8859_7=new L(F.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),L.ISO8859_8=new L(F.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),L.ISO8859_9=new L(F.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),L.ISO8859_10=new L(F.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),L.ISO8859_11=new L(F.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),L.ISO8859_13=new L(F.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),L.ISO8859_14=new L(F.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),L.ISO8859_15=new L(F.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),L.ISO8859_16=new L(F.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),L.SJIS=new L(F.SJIS,20,"SJIS","Shift_JIS"),L.Cp1250=new L(F.Cp1250,21,"Cp1250","windows-1250"),L.Cp1251=new L(F.Cp1251,22,"Cp1251","windows-1251"),L.Cp1252=new L(F.Cp1252,23,"Cp1252","windows-1252"),L.Cp1256=new L(F.Cp1256,24,"Cp1256","windows-1256"),L.UnicodeBigUnmarked=new L(F.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),L.UTF8=new L(F.UTF8,26,"UTF8","UTF-8"),L.ASCII=new L(F.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),L.Big5=new L(F.Big5,28,"Big5"),L.GB18030=new L(F.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),L.EUC_KR=new L(F.EUC_KR,30,"EUC_KR","EUC-KR");class W extends A{}W.kind="UnsupportedOperationException";class X{static decode(i,s){const l=this.encodingName(s);return this.customDecoder?this.customDecoder(i,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(i,l):new TextDecoder(l).decode(i)}static shouldDecodeOnFallback(i){return!X.isBrowser()&&i==="ISO-8859-1"}static encode(i,s){const l=this.encodingName(s);return this.customEncoder?this.customEncoder(i,l):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof L?i:L.getCharacterSetECIByName(i)}static decodeFallback(i,s){const l=this.encodingCharacterSet(s);if(X.isDecodeFallbackSupported(l)){let u="";for(let f=0,g=i.length;f<g;f++){let y=i[f].toString(16);y.length<2&&(y="0"+y),u+="%"+y}return decodeURIComponent(u)}if(l.equals(L.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new W(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(L.UTF8)||i.equals(L.ISO8859_1)||i.equals(L.ASCII)}static encodeFallback(i){const l=btoa(unescape(encodeURIComponent(i))).split(""),u=[];for(let f=0;f<l.length;f++)u.push(l[f].charCodeAt(0));return new Uint8Array(u)}}class Y{static castAsNonUtf8Char(i,s=null){const l=s?s.getName():this.ISO88591;return X.decode(new Uint8Array([i]),l)}static guessEncoding(i,s){if(s!=null&&s.get(xe.CHARACTER_SET)!==void 0)return s.get(xe.CHARACTER_SET).toString();const l=i.length;let u=!0,f=!0,g=!0,y=0,x=0,C=0,I=0,M=0,P=0,j=0,Q=0,$=0,ae=0,ge=0;const De=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let Ne=0;Ne<l&&(u||f||g);Ne++){const Ie=i[Ne]&255;g&&(y>0?(Ie&128)===0?g=!1:y--:(Ie&128)!==0&&((Ie&64)===0?g=!1:(y++,(Ie&32)===0?x++:(y++,(Ie&16)===0?C++:(y++,(Ie&8)===0?I++:g=!1))))),u&&(Ie>127&&Ie<160?u=!1:Ie>159&&(Ie<192||Ie===215||Ie===247)&&ge++),f&&(M>0?Ie<64||Ie===127||Ie>252?f=!1:M--:Ie===128||Ie===160||Ie>239?f=!1:Ie>160&&Ie<224?(P++,Q=0,j++,j>$&&($=j)):Ie>127?(M++,j=0,Q++,Q>ae&&(ae=Q)):(j=0,Q=0))}return g&&y>0&&(g=!1),f&&M>0&&(f=!1),g&&(De||x+C+I>0)?Y.UTF8:f&&(Y.ASSUME_SHIFT_JIS||$>=3||ae>=3)?Y.SHIFT_JIS:u&&f?$===2&&P===2||ge*10>=l?Y.SHIFT_JIS:Y.ISO88591:u?Y.ISO88591:f?Y.SHIFT_JIS:g?Y.UTF8:Y.PLATFORM_DEFAULT_ENCODING}static format(i,...s){let l=-1;function u(g,y,x,C,I,M){if(g==="%%")return"%";if(s[++l]===void 0)return;g=C?parseInt(C.substr(1)):void 0;let P=I?parseInt(I.substr(1)):void 0,j;switch(M){case"s":j=s[l];break;case"c":j=s[l][0];break;case"f":j=parseFloat(s[l]).toFixed(g);break;case"p":j=parseFloat(s[l]).toPrecision(g);break;case"e":j=parseFloat(s[l]).toExponential(g);break;case"x":j=parseInt(s[l]).toString(P||16);break;case"d":j=parseFloat(parseInt(s[l],P||10).toPrecision(g)).toFixed(0);break}j=typeof j=="object"?JSON.stringify(j):(+j).toString(P);let Q=parseInt(x),$=x&&x[0]+""=="0"?"0":" ";for(;j.length<Q;)j=y!==void 0?j+$:$+j;return j}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(f,u)}static getBytes(i,s){return X.encode(i,s)}static getCharCode(i,s=0){return i.charCodeAt(s)}static getCharAt(i){return String.fromCharCode(i)}}Y.SHIFT_JIS=L.SJIS.getName(),Y.GB2312="GB2312",Y.ISO88591=L.ISO8859_1.getName(),Y.EUC_JP="EUC_JP",Y.UTF8=L.UTF8.getName(),Y.PLATFORM_DEFAULT_ENCODING=Y.UTF8,Y.ASSUME_SHIFT_JIS=!1;class H{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=Y.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,s,l){for(let u=s;s<s+l;u++)this.append(i[u]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,s){this.value=this.value.substr(0,i)+s+this.value.substr(i+1)}substring(i,s){return this.value.substring(i,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,s){this.value=this.value.substr(0,i)+s+this.value.substr(i+s.length)}}class qe{constructor(i,s,l,u){if(this.width=i,this.height=s,this.rowSize=l,this.bits=u,s==null&&(s=i),this.height=s,i<1||s<1)throw new O("Both dimensions must be greater than 0");l==null&&(l=Math.floor((i+31)/32)),this.rowSize=l,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const s=i.length,l=i[0].length,u=new qe(l,s);for(let f=0;f<s;f++){const g=i[f];for(let y=0;y<l;y++)g[y]&&u.set(y,f)}return u}static parseFromString(i,s,l){if(i===null)throw new O("stringRepresentation cannot be null");const u=new Array(i.length);let f=0,g=0,y=-1,x=0,C=0;for(;C<i.length;)if(i.charAt(C)===`
`||i.charAt(C)==="\r"){if(f>g){if(y===-1)y=f-g;else if(f-g!==y)throw new O("row lengths do not match");g=f,x++}C++}else if(i.substring(C,C+s.length)===s)C+=s.length,u[f]=!0,f++;else if(i.substring(C,C+l.length)===l)C+=l.length,u[f]=!1,f++;else throw new O("illegal character encountered: "+i.substring(C));if(f>g){if(y===-1)y=f-g;else if(f-g!==y)throw new O("row lengths do not match");x++}const I=new qe(y,x);for(let M=0;M<f;M++)u[M]&&I.set(Math.floor(M%y),Math.floor(M/y));return I}get(i,s){const l=s*this.rowSize+Math.floor(i/32);return(this.bits[l]>>>(i&31)&1)!==0}set(i,s){const l=s*this.rowSize+Math.floor(i/32);this.bits[l]|=1<<(i&31)&4294967295}unset(i,s){const l=s*this.rowSize+Math.floor(i/32);this.bits[l]&=~(1<<(i&31)&4294967295)}flip(i,s){const l=s*this.rowSize+Math.floor(i/32);this.bits[l]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new O("input matrix dimensions do not match");const s=new Be(Math.floor(this.width/32)+1),l=this.rowSize,u=this.bits;for(let f=0,g=this.height;f<g;f++){const y=f*l,x=i.getRow(f,s).getBitArray();for(let C=0;C<l;C++)u[y+C]^=x[C]}}clear(){const i=this.bits,s=i.length;for(let l=0;l<s;l++)i[l]=0}setRegion(i,s,l,u){if(s<0||i<0)throw new O("Left and top must be nonnegative");if(u<1||l<1)throw new O("Height and width must be at least 1");const f=i+l,g=s+u;if(g>this.height||f>this.width)throw new O("The region must fit inside the matrix");const y=this.rowSize,x=this.bits;for(let C=s;C<g;C++){const I=C*y;for(let M=i;M<f;M++)x[I+Math.floor(M/32)]|=1<<(M&31)&4294967295}}getRow(i,s){s==null||s.getSize()<this.width?s=new Be(this.width):s.clear();const l=this.rowSize,u=this.bits,f=i*l;for(let g=0;g<l;g++)s.setBulk(g*32,u[f+g]);return s}setRow(i,s){ie.arraycopy(s.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),s=this.getHeight();let l=new Be(i),u=new Be(i);for(let f=0,g=Math.floor((s+1)/2);f<g;f++)l=this.getRow(f,l),u=this.getRow(s-1-f,u),l.reverse(),u.reverse(),this.setRow(f,u),this.setRow(s-1-f,l)}getEnclosingRectangle(){const i=this.width,s=this.height,l=this.rowSize,u=this.bits;let f=i,g=s,y=-1,x=-1;for(let C=0;C<s;C++)for(let I=0;I<l;I++){const M=u[C*l+I];if(M!==0){if(C<g&&(g=C),C>x&&(x=C),I*32<f){let P=0;for(;(M<<31-P&4294967295)===0;)P++;I*32+P<f&&(f=I*32+P)}if(I*32+31>y){let P=31;for(;!(M>>>P);)P--;I*32+P>y&&(y=I*32+P)}}}return y<f||x<g?null:Int32Array.from([f,g,y-f+1,x-g+1])}getTopLeftOnBit(){const i=this.rowSize,s=this.bits;let l=0;for(;l<s.length&&s[l]===0;)l++;if(l===s.length)return null;const u=l/i;let f=l%i*32;const g=s[l];let y=0;for(;(g<<31-y&4294967295)===0;)y++;return f+=y,Int32Array.from([f,u])}getBottomRightOnBit(){const i=this.rowSize,s=this.bits;let l=s.length-1;for(;l>=0&&s[l]===0;)l--;if(l<0)return null;const u=Math.floor(l/i);let f=Math.floor(l%i)*32;const g=s[l];let y=31;for(;!(g>>>y);)y--;return f+=y,Int32Array.from([f,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof qe))return!1;const s=i;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&be.equals(this.bits,s.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+be.hashCode(this.bits),i}toString(i="X ",s="  ",l=`
`){return this.buildToString(i,s,l)}buildToString(i,s,l){let u=new H;for(let f=0,g=this.height;f<g;f++){for(let y=0,x=this.width;y<x;y++)u.append(this.get(y,f)?i:s);u.append(l)}return u.toString()}clone(){return new qe(this.width,this.height,this.rowSize,this.bits.slice())}}class le extends A{static getNotFoundInstance(){return new le}}le.kind="NotFoundException";class J extends ee{constructor(i){super(i),this.luminances=J.EMPTY,this.buckets=new Int32Array(J.LUMINANCE_BUCKETS)}getBlackRow(i,s){const l=this.getLuminanceSource(),u=l.getWidth();s==null||s.getSize()<u?s=new Be(u):s.clear(),this.initArrays(u);const f=l.getRow(i,this.luminances),g=this.buckets;for(let x=0;x<u;x++)g[(f[x]&255)>>J.LUMINANCE_SHIFT]++;const y=J.estimateBlackPoint(g);if(u<3)for(let x=0;x<u;x++)(f[x]&255)<y&&s.set(x);else{let x=f[0]&255,C=f[1]&255;for(let I=1;I<u-1;I++){const M=f[I+1]&255;(C*4-x-M)/2<y&&s.set(I),x=C,C=M}}return s}getBlackMatrix(){const i=this.getLuminanceSource(),s=i.getWidth(),l=i.getHeight(),u=new qe(s,l);this.initArrays(s);const f=this.buckets;for(let x=1;x<5;x++){const C=Math.floor(l*x/5),I=i.getRow(C,this.luminances),M=Math.floor(s*4/5);for(let P=Math.floor(s/5);P<M;P++){const j=I[P]&255;f[j>>J.LUMINANCE_SHIFT]++}}const g=J.estimateBlackPoint(f),y=i.getMatrix();for(let x=0;x<l;x++){const C=x*s;for(let I=0;I<s;I++)(y[C+I]&255)<g&&u.set(I,x)}return u}createBinarizer(i){return new J(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const s=this.buckets;for(let l=0;l<J.LUMINANCE_BUCKETS;l++)s[l]=0}static estimateBlackPoint(i){const s=i.length;let l=0,u=0,f=0;for(let I=0;I<s;I++)i[I]>f&&(u=I,f=i[I]),i[I]>l&&(l=i[I]);let g=0,y=0;for(let I=0;I<s;I++){const M=I-u,P=i[I]*M*M;P>y&&(g=I,y=P)}if(u>g){const I=u;u=g,g=I}if(g-u<=s/16)throw new le;let x=g-1,C=-1;for(let I=g-1;I>u;I--){const M=I-u,P=M*M*(g-I)*(l-i[I]);P>C&&(x=I,C=P)}return x<<J.LUMINANCE_SHIFT}}J.LUMINANCE_BITS=5,J.LUMINANCE_SHIFT=8-J.LUMINANCE_BITS,J.LUMINANCE_BUCKETS=1<<J.LUMINANCE_BITS,J.EMPTY=Uint8ClampedArray.from([0]);class re extends J{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),s=i.getWidth(),l=i.getHeight();if(s>=re.MINIMUM_DIMENSION&&l>=re.MINIMUM_DIMENSION){const u=i.getMatrix();let f=s>>re.BLOCK_SIZE_POWER;(s&re.BLOCK_SIZE_MASK)!==0&&f++;let g=l>>re.BLOCK_SIZE_POWER;(l&re.BLOCK_SIZE_MASK)!==0&&g++;const y=re.calculateBlackPoints(u,f,g,s,l),x=new qe(s,l);re.calculateThresholdForBlock(u,f,g,s,l,y,x),this.matrix=x}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new re(i)}static calculateThresholdForBlock(i,s,l,u,f,g,y){const x=f-re.BLOCK_SIZE,C=u-re.BLOCK_SIZE;for(let I=0;I<l;I++){let M=I<<re.BLOCK_SIZE_POWER;M>x&&(M=x);const P=re.cap(I,2,l-3);for(let j=0;j<s;j++){let Q=j<<re.BLOCK_SIZE_POWER;Q>C&&(Q=C);const $=re.cap(j,2,s-3);let ae=0;for(let De=-2;De<=2;De++){const Ne=g[P+De];ae+=Ne[$-2]+Ne[$-1]+Ne[$]+Ne[$+1]+Ne[$+2]}const ge=ae/25;re.thresholdBlock(i,Q,M,ge,u,y)}}}static cap(i,s,l){return i<s?s:i>l?l:i}static thresholdBlock(i,s,l,u,f,g){for(let y=0,x=l*f+s;y<re.BLOCK_SIZE;y++,x+=f)for(let C=0;C<re.BLOCK_SIZE;C++)(i[x+C]&255)<=u&&g.set(s+C,l+y)}static calculateBlackPoints(i,s,l,u,f){const g=f-re.BLOCK_SIZE,y=u-re.BLOCK_SIZE,x=new Array(l);for(let C=0;C<l;C++){x[C]=new Int32Array(s);let I=C<<re.BLOCK_SIZE_POWER;I>g&&(I=g);for(let M=0;M<s;M++){let P=M<<re.BLOCK_SIZE_POWER;P>y&&(P=y);let j=0,Q=255,$=0;for(let ge=0,De=I*u+P;ge<re.BLOCK_SIZE;ge++,De+=u){for(let Ne=0;Ne<re.BLOCK_SIZE;Ne++){const Ie=i[De+Ne]&255;j+=Ie,Ie<Q&&(Q=Ie),Ie>$&&($=Ie)}if($-Q>re.MIN_DYNAMIC_RANGE)for(ge++,De+=u;ge<re.BLOCK_SIZE;ge++,De+=u)for(let Ne=0;Ne<re.BLOCK_SIZE;Ne++)j+=i[De+Ne]&255}let ae=j>>re.BLOCK_SIZE_POWER*2;if($-Q<=re.MIN_DYNAMIC_RANGE&&(ae=Q/2,C>0&&M>0)){const ge=(x[C-1][M]+2*x[C][M-1]+x[C-1][M-1])/4;Q<ge&&(ae=ge)}x[C][M]=ae}}return x}}re.BLOCK_SIZE_POWER=3,re.BLOCK_SIZE=1<<re.BLOCK_SIZE_POWER,re.BLOCK_SIZE_MASK=re.BLOCK_SIZE-1,re.MINIMUM_DIMENSION=re.BLOCK_SIZE*5,re.MIN_DYNAMIC_RANGE=24;class ke{constructor(i,s){this.width=i,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,s,l,u){throw new W("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new W("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new W("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let s=new H;for(let l=0;l<this.height;l++){const u=this.getRow(l,i);for(let f=0;f<this.width;f++){const g=u[f]&255;let y;g<64?y="#":g<128?y="+":g<192?y=".":y=" ",s.append(y)}s.append(`
`)}return s.toString()}}class We extends ke{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,s){const l=this.delegate.getRow(i,s),u=this.getWidth();for(let f=0;f<u;f++)l[f]=255-(l[f]&255);return l}getMatrix(){const i=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(s);for(let u=0;u<s;u++)l[u]=255-(i[u]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(i,s,l,u){return new We(this.delegate.crop(i,s,l,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new We(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new We(this.delegate.rotateCounterClockwise45())}}class Qe extends ke{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=Qe.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const s=i.getContext("2d").getImageData(0,0,i.width,i.height);return Qe.toGrayscaleBuffer(s.data,i.width,i.height)}static toGrayscaleBuffer(i,s,l){const u=new Uint8ClampedArray(s*l);for(let f=0,g=0,y=i.length;f<y;f+=4,g++){let x;if(i[f+3]===0)x=255;else{const I=i[f],M=i[f+1],P=i[f+2];x=306*I+601*M+117*P+512>>10}u[g]=x}return u}getRow(i,s){if(i<0||i>=this.getHeight())throw new O("Requested row is outside the image: "+i);const l=this.getWidth(),u=i*l;return s===null?s=this.buffer.slice(u,u+l):(s.length<l&&(s=new Uint8ClampedArray(l)),s.set(this.buffer.slice(u,u+l))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,s,l,u){return super.crop(i,s,l,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const s=this.getTempCanvasElement(),l=s.getContext("2d"),u=i*Qe.DEGREE_TO_RADIANS,f=this.canvas.width,g=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(u))*f+Math.abs(Math.sin(u))*g),x=Math.ceil(Math.abs(Math.sin(u))*f+Math.abs(Math.cos(u))*g);return s.width=y,s.height=x,l.translate(y/2,x/2),l.rotate(u),l.drawImage(this.canvas,f/-2,g/-2),this.buffer=Qe.makeBufferFromCanvasImageData(s),this}invert(){return new We(this)}}Qe.DEGREE_TO_RADIANS=Math.PI/180;class Z{constructor(i,s,l){this.deviceId=i,this.label=s,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var pe=(globalThis||Ph||self||window||void 0)&&(globalThis||Ph||self||window||void 0).__awaiter||function(D,i,s,l){function u(f){return f instanceof s?f:new s(function(g){g(f)})}return new(s||(s=Promise))(function(f,g){function y(I){try{C(l.next(I))}catch(M){g(M)}}function x(I){try{C(l.throw(I))}catch(M){g(M)}}function C(I){I.done?f(I.value):u(I.value).then(y,x)}C((l=l.apply(D,i||[])).next())})};class Oe{constructor(i,s=500,l){this.reader=i,this.timeBetweenScansMillis=s,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return pe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const l of i){const u=l.kind==="video"?"videoinput":l.kind;if(u!=="videoinput")continue;const f=l.deviceId||l.id,g=l.label||`Video device ${s.length+1}`,y=l.groupId,x={deviceId:f,label:g,kind:u,groupId:y};s.push(x)}return s})}getVideoInputDevices(){return pe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new Z(s.deviceId,s.label))})}findDeviceById(i){return pe(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(l=>l.deviceId===i):null})}decodeFromInputVideoDevice(i,s){return pe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,s)})}decodeOnceFromVideoDevice(i,s){return pe(this,void 0,void 0,function*(){this.reset();let l;i?l={deviceId:{exact:i}}:l={facingMode:"environment"};const u={video:l};return yield this.decodeOnceFromConstraints(u,s)})}decodeOnceFromConstraints(i,s){return pe(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(l,s)})}decodeOnceFromStream(i,s){return pe(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(i,s);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(i,s,l){return pe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,s,l)})}decodeFromVideoDevice(i,s,l){return pe(this,void 0,void 0,function*(){let u;i?u={deviceId:{exact:i}}:u={facingMode:"environment"};const f={video:u};return yield this.decodeFromConstraints(f,s,l)})}decodeFromConstraints(i,s,l){return pe(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(u,s,l)})}decodeFromStream(i,s,l){return pe(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(i,s);return yield this.decodeContinuously(u,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,s){return pe(this,void 0,void 0,function*(){const l=this.prepareVideoElement(s);return this.addVideoSource(l,i),this.videoElement=l,this.stream=i,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(i){return new Promise((s,l)=>this.playVideoOnLoad(i,()=>s()))}playVideoOnLoad(i,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",s),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return pe(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,s){const l=document.getElementById(i);if(!l)throw new b(`element with id '${i}' not found`);if(l.nodeName.toLowerCase()!==s.toLowerCase())throw new b(`element with id '${i}' must be an ${s} element`);return l}decodeFromImage(i,s){if(!i&&!s)throw new b("either imageElement with a src set or an url must be provided");return s&&!i?this.decodeFromImageUrl(s):this.decodeFromImageElement(i)}decodeFromVideo(i,s){if(!i&&!s)throw new b("Either an element with a src set or an URL must be provided");return s&&!i?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,s,l){if(i===void 0&&s===void 0)throw new b("Either an element with a src set or an URL must be provided");return s&&!i?this.decodeFromVideoUrlContinuously(s,l):this.decodeFromVideoElementContinuously(i,l)}decodeFromImageElement(i){if(!i)throw new b("An image element must be provided.");this.reset();const s=this.prepareImageElement(i);this.imageElement=s;let l;return this.isImageLoaded(s)?l=this.decodeOnce(s,!1,!0):l=this._decodeOnLoadImage(s),l}decodeFromVideoElement(i){const s=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(i,s){const l=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(l,s)}_decodeFromVideoElementSetup(i){if(!i)throw new b("A video element must be provided.");this.reset();const s=this.prepareVideoElement(i);return this.videoElement=s,s}decodeFromImageUrl(i){if(!i)throw new b("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const l=this._decodeOnLoadImage(s);return s.src=i,l}decodeFromVideoUrl(i){if(!i)throw new b("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),l=this.decodeFromVideoElement(s);return s.src=i,l}decodeFromVideoUrlContinuously(i,s){if(!i)throw new b("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(l,s);return l.src=i,u}_decodeOnLoadImage(i){return new Promise((s,l)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(s,l),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return pe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,s){return pe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,s)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let s;return typeof i>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof i=="string"&&(s=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(s=i),s}prepareVideoElement(i){let s;return!i&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof i=="string"&&(s=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(s=i),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(i,s=!0,l=!0){this._stopAsyncDecode=!1;const u=(f,g)=>{if(this._stopAsyncDecode){g(new le("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const y=this.decode(i);f(y)}catch(y){const x=s&&y instanceof le,I=(y instanceof G||y instanceof k)&&l;if(x||I)return setTimeout(u,this._timeBetweenDecodingAttempts,f,g);g(y)}};return new Promise((f,g)=>u(f,g))}decodeContinuously(i,s){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(i);s(u,null),setTimeout(l,this.timeBetweenScansMillis)}catch(u){s(null,u);const f=u instanceof G||u instanceof k,g=u instanceof le;(f||g)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(i){const s=this.createBinaryBitmap(i);return this.decodeBitmap(s)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,s,l){s||(s={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(i,s,l=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const s=this.getCaptureCanvas(i),l=new Qe(s),u=new re(l);return new V(u)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const s=this.createCaptureCanvas(i);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let l,u;return typeof i<"u"&&(i instanceof HTMLVideoElement?(l=i.videoWidth,u=i.videoHeight):i instanceof HTMLImageElement&&(l=i.naturalWidth||i.width,u=i.naturalHeight||i.height)),s.style.width=l+"px",s.style.height=u+"px",s.width=l,s.height=u,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,s){try{i.srcObject=s}catch{i.src=URL.createObjectURL(s)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class Pe{constructor(i,s,l=s==null?0:8*s.length,u,f,g=ie.currentTimeMillis()){this.text=i,this.rawBytes=s,this.numBits=l,this.resultPoints=u,this.format=f,this.timestamp=g,this.text=i,this.rawBytes=s,l==null?this.numBits=s==null?0:8*s.length:this.numBits=l,this.resultPoints=u,this.format=f,this.resultMetadata=null,g==null?this.timestamp=ie.currentTimeMillis():this.timestamp=g}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,s)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const s=this.resultPoints;if(s===null)this.resultPoints=i;else if(i!==null&&i.length>0){const l=new Array(s.length+i.length);ie.arraycopy(s,0,l,0,s.length),ie.arraycopy(i,0,l,s.length,i.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var et;(function(D){D[D.AZTEC=0]="AZTEC",D[D.CODABAR=1]="CODABAR",D[D.CODE_39=2]="CODE_39",D[D.CODE_93=3]="CODE_93",D[D.CODE_128=4]="CODE_128",D[D.DATA_MATRIX=5]="DATA_MATRIX",D[D.EAN_8=6]="EAN_8",D[D.EAN_13=7]="EAN_13",D[D.ITF=8]="ITF",D[D.MAXICODE=9]="MAXICODE",D[D.PDF_417=10]="PDF_417",D[D.QR_CODE=11]="QR_CODE",D[D.RSS_14=12]="RSS_14",D[D.RSS_EXPANDED=13]="RSS_EXPANDED",D[D.UPC_A=14]="UPC_A",D[D.UPC_E=15]="UPC_E",D[D.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(et||(et={}));var Ae=et,rt;(function(D){D[D.OTHER=0]="OTHER",D[D.ORIENTATION=1]="ORIENTATION",D[D.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",D[D.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",D[D.ISSUE_NUMBER=4]="ISSUE_NUMBER",D[D.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",D[D.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",D[D.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",D[D.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",D[D.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",D[D.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(rt||(rt={}));var yt=rt;class qt{constructor(i,s,l,u,f=-1,g=-1){this.rawBytes=i,this.text=s,this.byteSegments=l,this.ecLevel=u,this.structuredAppendSequenceNumber=f,this.structuredAppendParity=g,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Yi{exp(i){return this.expTable[i]}log(i){if(i===0)throw new O;return this.logTable[i]}static addOrSubtract(i,s){return i^s}}class On{constructor(i,s){if(s.length===0)throw new O;this.field=i;const l=s.length;if(l>1&&s[0]===0){let u=1;for(;u<l&&s[u]===0;)u++;u===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-u),ie.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const s=this.coefficients;let l;if(i===1){l=0;for(let g=0,y=s.length;g!==y;g++){const x=s[g];l=Yi.addOrSubtract(l,x)}return l}l=s[0];const u=s.length,f=this.field;for(let g=1;g<u;g++)l=Yi.addOrSubtract(f.multiply(i,l),s[g]);return l}addOrSubtract(i){if(!this.field.equals(i.field))throw new O("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let s=this.coefficients,l=i.coefficients;if(s.length>l.length){const g=s;s=l,l=g}let u=new Int32Array(l.length);const f=l.length-s.length;ie.arraycopy(l,0,u,0,f);for(let g=f;g<l.length;g++)u[g]=Yi.addOrSubtract(s[g-f],l[g]);return new On(this.field,u)}multiply(i){if(!this.field.equals(i.field))throw new O("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const s=this.coefficients,l=s.length,u=i.coefficients,f=u.length,g=new Int32Array(l+f-1),y=this.field;for(let x=0;x<l;x++){const C=s[x];for(let I=0;I<f;I++)g[x+I]=Yi.addOrSubtract(g[x+I],y.multiply(C,u[I]))}return new On(y,g)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const s=this.coefficients.length,l=this.field,u=new Int32Array(s),f=this.coefficients;for(let g=0;g<s;g++)u[g]=l.multiply(f[g],i);return new On(l,u)}multiplyByMonomial(i,s){if(i<0)throw new O;if(s===0)return this.field.getZero();const l=this.coefficients,u=l.length,f=new Int32Array(u+i),g=this.field;for(let y=0;y<u;y++)f[y]=g.multiply(l[y],s);return new On(g,f)}divide(i){if(!this.field.equals(i.field))throw new O("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new O("Divide by 0");const s=this.field;let l=s.getZero(),u=this;const f=i.getCoefficient(i.getDegree()),g=s.inverse(f);for(;u.getDegree()>=i.getDegree()&&!u.isZero();){const y=u.getDegree()-i.getDegree(),x=s.multiply(u.getCoefficient(u.getDegree()),g),C=i.multiplyByMonomial(y,x),I=s.buildMonomial(y,x);l=l.addOrSubtract(I),u=u.addOrSubtract(C)}return[l,u]}toString(){let i="";for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);if(l!==0){if(l<0?(i+=" - ",l=-l):i.length>0&&(i+=" + "),s===0||l!==1){const u=this.field.log(l);u===0?i+="1":u===1?i+="a":(i+="a^",i+=u)}s!==0&&(s===1?i+="x":(i+="x^",i+=s))}}return i}}class is extends A{}is.kind="ArithmeticException";class Tt extends Yi{constructor(i,s,l){super(),this.primitive=i,this.size=s,this.generatorBase=l;const u=new Int32Array(s);let f=1;for(let y=0;y<s;y++)u[y]=f,f*=2,f>=s&&(f^=i,f&=s-1);this.expTable=u;const g=new Int32Array(s);for(let y=0;y<s-1;y++)g[u[y]]=y;this.logTable=g,this.zero=new On(this,Int32Array.from([0])),this.one=new On(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,s){if(i<0)throw new O;if(s===0)return this.zero;const l=new Int32Array(i+1);return l[0]=s,new On(this,l)}inverse(i){if(i===0)throw new is;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,s){return i===0||s===0?0:this.expTable[(this.logTable[i]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+me.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}Tt.AZTEC_DATA_12=new Tt(4201,4096,1),Tt.AZTEC_DATA_10=new Tt(1033,1024,1),Tt.AZTEC_DATA_6=new Tt(67,64,1),Tt.AZTEC_PARAM=new Tt(19,16,1),Tt.QR_CODE_FIELD_256=new Tt(285,256,0),Tt.DATA_MATRIX_FIELD_256=new Tt(301,256,1),Tt.AZTEC_DATA_8=Tt.DATA_MATRIX_FIELD_256,Tt.MAXICODE_FIELD_64=Tt.AZTEC_DATA_6;class mi extends A{}mi.kind="ReedSolomonException";class Li extends A{}Li.kind="IllegalStateException";class pr{constructor(i){this.field=i}decode(i,s){const l=this.field,u=new On(l,i),f=new Int32Array(s);let g=!0;for(let j=0;j<s;j++){const Q=u.evaluateAt(l.exp(j+l.getGeneratorBase()));f[f.length-1-j]=Q,Q!==0&&(g=!1)}if(g)return;const y=new On(l,f),x=this.runEuclideanAlgorithm(l.buildMonomial(s,1),y,s),C=x[0],I=x[1],M=this.findErrorLocations(C),P=this.findErrorMagnitudes(I,M);for(let j=0;j<M.length;j++){const Q=i.length-1-l.log(M[j]);if(Q<0)throw new mi("Bad error location");i[Q]=Tt.addOrSubtract(i[Q],P[j])}}runEuclideanAlgorithm(i,s,l){if(i.getDegree()<s.getDegree()){const j=i;i=s,s=j}const u=this.field;let f=i,g=s,y=u.getZero(),x=u.getOne();for(;g.getDegree()>=(l/2|0);){let j=f,Q=y;if(f=g,y=x,f.isZero())throw new mi("r_{i-1} was zero");g=j;let $=u.getZero();const ae=f.getCoefficient(f.getDegree()),ge=u.inverse(ae);for(;g.getDegree()>=f.getDegree()&&!g.isZero();){const De=g.getDegree()-f.getDegree(),Ne=u.multiply(g.getCoefficient(g.getDegree()),ge);$=$.addOrSubtract(u.buildMonomial(De,Ne)),g=g.addOrSubtract(f.multiplyByMonomial(De,Ne))}if(x=$.multiply(y).addOrSubtract(Q),g.getDegree()>=f.getDegree())throw new Li("Division algorithm failed to reduce polynomial?")}const C=x.getCoefficient(0);if(C===0)throw new mi("sigmaTilde(0) was zero");const I=u.inverse(C),M=x.multiplyScalar(I),P=g.multiplyScalar(I);return[M,P]}findErrorLocations(i){const s=i.getDegree();if(s===1)return Int32Array.from([i.getCoefficient(1)]);const l=new Int32Array(s);let u=0;const f=this.field;for(let g=1;g<f.getSize()&&u<s;g++)i.evaluateAt(g)===0&&(l[u]=f.inverse(g),u++);if(u!==s)throw new mi("Error locator degree does not match number of roots");return l}findErrorMagnitudes(i,s){const l=s.length,u=new Int32Array(l),f=this.field;for(let g=0;g<l;g++){const y=f.inverse(s[g]);let x=1;for(let C=0;C<l;C++)if(g!==C){const I=f.multiply(s[C],y),M=(I&1)===0?I|1:I&-2;x=f.multiply(x,M)}u[g]=f.multiply(i.evaluateAt(y),f.inverse(x)),f.getGeneratorBase()!==0&&(u[g]=f.multiply(u[g],y))}return u}}var Dn;(function(D){D[D.UPPER=0]="UPPER",D[D.LOWER=1]="LOWER",D[D.MIXED=2]="MIXED",D[D.DIGIT=3]="DIGIT",D[D.PUNCT=4]="PUNCT",D[D.BINARY=5]="BINARY"})(Dn||(Dn={}));class Xt{decode(i){this.ddata=i;let s=i.getBits(),l=this.extractBits(s),u=this.correctBits(l),f=Xt.convertBoolArrayToByteArray(u),g=Xt.getEncodedData(u),y=new qt(f,g,null,null);return y.setNumBits(u.length),y}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let s=i.length,l=Dn.UPPER,u=Dn.UPPER,f="",g=0;for(;g<s;)if(u===Dn.BINARY){if(s-g<5)break;let y=Xt.readCode(i,g,5);if(g+=5,y===0){if(s-g<11)break;y=Xt.readCode(i,g,11)+31,g+=11}for(let x=0;x<y;x++){if(s-g<8){g=s;break}const C=Xt.readCode(i,g,8);f+=Y.castAsNonUtf8Char(C),g+=8}u=l}else{let y=u===Dn.DIGIT?4:5;if(s-g<y)break;let x=Xt.readCode(i,g,y);g+=y;let C=Xt.getCharacter(u,x);C.startsWith("CTRL_")?(l=u,u=Xt.getTable(C.charAt(5)),C.charAt(6)==="L"&&(l=u)):(f+=C,u=l)}return f}static getTable(i){switch(i){case"L":return Dn.LOWER;case"P":return Dn.PUNCT;case"M":return Dn.MIXED;case"D":return Dn.DIGIT;case"B":return Dn.BINARY;case"U":default:return Dn.UPPER}}static getCharacter(i,s){switch(i){case Dn.UPPER:return Xt.UPPER_TABLE[s];case Dn.LOWER:return Xt.LOWER_TABLE[s];case Dn.MIXED:return Xt.MIXED_TABLE[s];case Dn.PUNCT:return Xt.PUNCT_TABLE[s];case Dn.DIGIT:return Xt.DIGIT_TABLE[s];default:throw new Li("Bad table")}}correctBits(i){let s,l;this.ddata.getNbLayers()<=2?(l=6,s=Tt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,s=Tt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,s=Tt.AZTEC_DATA_10):(l=12,s=Tt.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),f=i.length/l;if(f<u)throw new k;let g=i.length%l,y=new Int32Array(f);for(let P=0;P<f;P++,g+=l)y[P]=Xt.readCode(i,g,l);try{new pr(s).decode(y,f-u)}catch(P){throw new k(P)}let x=(1<<l)-1,C=0;for(let P=0;P<u;P++){let j=y[P];if(j===0||j===x)throw new k;(j===1||j===x-1)&&C++}let I=new Array(u*l-C),M=0;for(let P=0;P<u;P++){let j=y[P];if(j===1||j===x-1)I.fill(j>1,M,M+l-1),M+=l-1;else for(let Q=l-1;Q>=0;--Q)I[M++]=(j&1<<Q)!==0}return I}extractBits(i){let s=this.ddata.isCompact(),l=this.ddata.getNbLayers(),u=(s?11:14)+l*4,f=new Int32Array(u),g=new Array(this.totalBitsInLayer(l,s));if(s)for(let y=0;y<f.length;y++)f[y]=y;else{let y=u+1+2*me.truncDivision(me.truncDivision(u,2)-1,15),x=u/2,C=me.truncDivision(y,2);for(let I=0;I<x;I++){let M=I+me.truncDivision(I,15);f[x-I-1]=C-M-1,f[x+I]=C+M+1}}for(let y=0,x=0;y<l;y++){let C=(l-y)*4+(s?9:12),I=y*2,M=u-1-I;for(let P=0;P<C;P++){let j=P*2;for(let Q=0;Q<2;Q++)g[x+j+Q]=i.get(f[I+Q],f[I+P]),g[x+2*C+j+Q]=i.get(f[I+P],f[M-Q]),g[x+4*C+j+Q]=i.get(f[M-Q],f[M-P]),g[x+6*C+j+Q]=i.get(f[M-P],f[I+Q])}x+=C*8}return g}static readCode(i,s,l){let u=0;for(let f=s;f<s+l;f++)u<<=1,i[f]&&(u|=1);return u}static readByte(i,s){let l=i.length-s;return l>=8?Xt.readCode(i,s,8):Xt.readCode(i,s,l)<<8-l}static convertBoolArrayToByteArray(i){let s=new Uint8Array((i.length+7)/8);for(let l=0;l<s.length;l++)s[l]=Xt.readByte(i,8*l);return s}totalBitsInLayer(i,s){return((s?88:112)+16*i)*i}}Xt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Xt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Xt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Xt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Xt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class tt{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,s,l,u){const f=i-l,g=s-u;return Math.sqrt(f*f+g*g)}static sum(i){let s=0;for(let l=0,u=i.length;l!==u;l++){const f=i[l];s+=f}return s}}class Tn{static floatToIntBits(i){return i}}Tn.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Fe{constructor(i,s){this.x=i,this.y=s}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof Fe){const s=i;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*Tn.floatToIntBits(this.x)+Tn.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const s=this.distance(i[0],i[1]),l=this.distance(i[1],i[2]),u=this.distance(i[0],i[2]);let f,g,y;if(l>=s&&l>=u?(g=i[0],f=i[1],y=i[2]):u>=l&&u>=s?(g=i[1],f=i[0],y=i[2]):(g=i[2],f=i[0],y=i[1]),this.crossProductZ(f,g,y)<0){const x=f;f=y,y=x}i[0]=f,i[1]=g,i[2]=y}static distance(i,s){return tt.distance(i.x,i.y,s.x,s.y)}static crossProductZ(i,s,l){const u=s.x,f=s.y;return(l.x-u)*(i.y-f)-(l.y-f)*(i.x-u)}}class xa{constructor(i,s){this.bits=i,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class wo extends xa{constructor(i,s,l,u,f){super(i,s),this.compact=l,this.nbDatablocks=u,this.nbLayers=f}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class En{constructor(i,s,l,u){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),s==null&&(s=En.INIT_SIZE),l==null&&(l=i.getWidth()/2|0),u==null&&(u=i.getHeight()/2|0);const f=s/2|0;if(this.leftInit=l-f,this.rightInit=l+f,this.upInit=u-f,this.downInit=u+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new le}detect(){let i=this.leftInit,s=this.rightInit,l=this.upInit,u=this.downInit,f=!1,g=!0,y=!1,x=!1,C=!1,I=!1,M=!1;const P=this.width,j=this.height;for(;g;){g=!1;let Q=!0;for(;(Q||!x)&&s<P;)Q=this.containsBlackPoint(l,u,s,!1),Q?(s++,g=!0,x=!0):x||s++;if(s>=P){f=!0;break}let $=!0;for(;($||!C)&&u<j;)$=this.containsBlackPoint(i,s,u,!0),$?(u++,g=!0,C=!0):C||u++;if(u>=j){f=!0;break}let ae=!0;for(;(ae||!I)&&i>=0;)ae=this.containsBlackPoint(l,u,i,!1),ae?(i--,g=!0,I=!0):I||i--;if(i<0){f=!0;break}let ge=!0;for(;(ge||!M)&&l>=0;)ge=this.containsBlackPoint(i,s,l,!0),ge?(l--,g=!0,M=!0):M||l--;if(l<0){f=!0;break}g&&(y=!0)}if(!f&&y){const Q=s-i;let $=null;for(let Ne=1;$===null&&Ne<Q;Ne++)$=this.getBlackPointOnSegment(i,u-Ne,i+Ne,u);if($==null)throw new le;let ae=null;for(let Ne=1;ae===null&&Ne<Q;Ne++)ae=this.getBlackPointOnSegment(i,l+Ne,i+Ne,l);if(ae==null)throw new le;let ge=null;for(let Ne=1;ge===null&&Ne<Q;Ne++)ge=this.getBlackPointOnSegment(s,l+Ne,s-Ne,l);if(ge==null)throw new le;let De=null;for(let Ne=1;De===null&&Ne<Q;Ne++)De=this.getBlackPointOnSegment(s,u-Ne,s-Ne,u);if(De==null)throw new le;return this.centerEdges(De,$,ge,ae)}else throw new le}getBlackPointOnSegment(i,s,l,u){const f=tt.round(tt.distance(i,s,l,u)),g=(l-i)/f,y=(u-s)/f,x=this.image;for(let C=0;C<f;C++){const I=tt.round(i+C*g),M=tt.round(s+C*y);if(x.get(I,M))return new Fe(I,M)}return null}centerEdges(i,s,l,u){const f=i.getX(),g=i.getY(),y=s.getX(),x=s.getY(),C=l.getX(),I=l.getY(),M=u.getX(),P=u.getY(),j=En.CORR;return f<this.width/2?[new Fe(M-j,P+j),new Fe(y+j,x+j),new Fe(C-j,I-j),new Fe(f+j,g-j)]:[new Fe(M+j,P+j),new Fe(y+j,x-j),new Fe(C-j,I+j),new Fe(f-j,g-j)]}containsBlackPoint(i,s,l,u){const f=this.image;if(u){for(let g=i;g<=s;g++)if(f.get(g,l))return!0}else for(let g=i;g<=s;g++)if(f.get(l,g))return!0;return!1}}En.INIT_SIZE=10,En.CORR=1;class rs{static checkAndNudgePoints(i,s){const l=i.getWidth(),u=i.getHeight();let f=!0;for(let g=0;g<s.length&&f;g+=2){const y=Math.floor(s[g]),x=Math.floor(s[g+1]);if(y<-1||y>l||x<-1||x>u)throw new le;f=!1,y===-1?(s[g]=0,f=!0):y===l&&(s[g]=l-1,f=!0),x===-1?(s[g+1]=0,f=!0):x===u&&(s[g+1]=u-1,f=!0)}f=!0;for(let g=s.length-2;g>=0&&f;g-=2){const y=Math.floor(s[g]),x=Math.floor(s[g+1]);if(y<-1||y>l||x<-1||x>u)throw new le;f=!1,y===-1?(s[g]=0,f=!0):y===l&&(s[g]=l-1,f=!0),x===-1?(s[g+1]=0,f=!0):x===u&&(s[g+1]=u-1,f=!0)}}}class pi{constructor(i,s,l,u,f,g,y,x,C){this.a11=i,this.a21=s,this.a31=l,this.a12=u,this.a22=f,this.a32=g,this.a13=y,this.a23=x,this.a33=C}static quadrilateralToQuadrilateral(i,s,l,u,f,g,y,x,C,I,M,P,j,Q,$,ae){const ge=pi.quadrilateralToSquare(i,s,l,u,f,g,y,x);return pi.squareToQuadrilateral(C,I,M,P,j,Q,$,ae).times(ge)}transformPoints(i){const s=i.length,l=this.a11,u=this.a12,f=this.a13,g=this.a21,y=this.a22,x=this.a23,C=this.a31,I=this.a32,M=this.a33;for(let P=0;P<s;P+=2){const j=i[P],Q=i[P+1],$=f*j+x*Q+M;i[P]=(l*j+g*Q+C)/$,i[P+1]=(u*j+y*Q+I)/$}}transformPointsWithValues(i,s){const l=this.a11,u=this.a12,f=this.a13,g=this.a21,y=this.a22,x=this.a23,C=this.a31,I=this.a32,M=this.a33,P=i.length;for(let j=0;j<P;j++){const Q=i[j],$=s[j],ae=f*Q+x*$+M;i[j]=(l*Q+g*$+C)/ae,s[j]=(u*Q+y*$+I)/ae}}static squareToQuadrilateral(i,s,l,u,f,g,y,x){const C=i-l+f-y,I=s-u+g-x;if(C===0&&I===0)return new pi(l-i,f-l,i,u-s,g-u,s,0,0,1);{const M=l-f,P=y-f,j=u-g,Q=x-g,$=M*Q-P*j,ae=(C*Q-P*I)/$,ge=(M*I-C*j)/$;return new pi(l-i+ae*l,y-i+ge*y,i,u-s+ae*u,x-s+ge*x,s,ae,ge,1)}}static quadrilateralToSquare(i,s,l,u,f,g,y,x){return pi.squareToQuadrilateral(i,s,l,u,f,g,y,x).buildAdjoint()}buildAdjoint(){return new pi(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new pi(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class Aa extends rs{sampleGrid(i,s,l,u,f,g,y,x,C,I,M,P,j,Q,$,ae,ge,De,Ne){const Ie=pi.quadrilateralToQuadrilateral(u,f,g,y,x,C,I,M,P,j,Q,$,ae,ge,De,Ne);return this.sampleGridWithTransform(i,s,l,Ie)}sampleGridWithTransform(i,s,l,u){if(s<=0||l<=0)throw new le;const f=new qe(s,l),g=new Float32Array(2*s);for(let y=0;y<l;y++){const x=g.length,C=y+.5;for(let I=0;I<x;I+=2)g[I]=I/2+.5,g[I+1]=C;u.transformPoints(g),rs.checkAndNudgePoints(i,g);try{for(let I=0;I<x;I+=2)i.get(Math.floor(g[I]),Math.floor(g[I+1]))&&f.set(I/2,y)}catch{throw new le}}return f}}class yi{static setGridSampler(i){yi.gridSampler=i}static getInstance(){return yi.gridSampler}}yi.gridSampler=new Aa;class si{constructor(i,s){this.x=i,this.y=s}toResultPoint(){return new Fe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class To{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let s=this.getMatrixCenter(),l=this.getBullsEyeCorners(s);if(i){let g=l[0];l[0]=l[2],l[2]=g}this.extractParameters(l);let u=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),f=this.getMatrixCornerPoints(l);return new wo(u,f,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new le;let s=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(i[0],i[1],s),this.sampleLine(i[1],i[2],s),this.sampleLine(i[2],i[3],s),this.sampleLine(i[3],i[0],s)]);this.shift=this.getRotation(l,s);let u=0;for(let g=0;g<4;g++){let y=l[(this.shift+g)%4];this.compact?(u<<=7,u+=y>>1&127):(u<<=10,u+=(y>>2&992)+(y>>1&31))}let f=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(f>>6)+1,this.nbDataBlocks=(f&63)+1):(this.nbLayers=(f>>11)+1,this.nbDataBlocks=(f&2047)+1)}getRotation(i,s){let l=0;i.forEach((u,f,g)=>{let y=(u>>s-2<<1)+(u&1);l=(l<<3)+y}),l=((l&1)<<11)+(l>>1);for(let u=0;u<4;u++)if(me.bitCount(l^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new le}getCorrectedParameterData(i,s){let l,u;s?(l=7,u=2):(l=10,u=4);let f=l-u,g=new Int32Array(l);for(let x=l-1;x>=0;--x)g[x]=i&15,i>>=4;try{new pr(Tt.AZTEC_PARAM).decode(g,f)}catch{throw new le}let y=0;for(let x=0;x<u;x++)y=(y<<4)+g[x];return y}getBullsEyeCorners(i){let s=i,l=i,u=i,f=i,g=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let M=this.getFirstDifferent(s,g,1,-1),P=this.getFirstDifferent(l,g,1,1),j=this.getFirstDifferent(u,g,-1,1),Q=this.getFirstDifferent(f,g,-1,-1);if(this.nbCenterLayers>2){let $=this.distancePoint(Q,M)*this.nbCenterLayers/(this.distancePoint(f,s)*(this.nbCenterLayers+2));if($<.75||$>1.25||!this.isWhiteOrBlackRectangle(M,P,j,Q))break}s=M,l=P,u=j,f=Q,g=!g}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new le;this.compact=this.nbCenterLayers===5;let y=new Fe(s.getX()+.5,s.getY()-.5),x=new Fe(l.getX()+.5,l.getY()+.5),C=new Fe(u.getX()-.5,u.getY()+.5),I=new Fe(f.getX()-.5,f.getY()-.5);return this.expandSquare([y,x,C,I],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,s,l,u;try{let y=new En(this.image).detect();i=y[0],s=y[1],l=y[2],u=y[3]}catch{let x=this.image.getWidth()/2,C=this.image.getHeight()/2;i=this.getFirstDifferent(new si(x+7,C-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new si(x+7,C+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new si(x-7,C+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new si(x-7,C-7),!1,-1,-1).toResultPoint()}let f=tt.round((i.getX()+u.getX()+s.getX()+l.getX())/4),g=tt.round((i.getY()+u.getY()+s.getY()+l.getY())/4);try{let y=new En(this.image,15,f,g).detect();i=y[0],s=y[1],l=y[2],u=y[3]}catch{i=this.getFirstDifferent(new si(f+7,g-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new si(f+7,g+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new si(f-7,g+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new si(f-7,g-7),!1,-1,-1).toResultPoint()}return f=tt.round((i.getX()+u.getX()+s.getX()+l.getX())/4),g=tt.round((i.getY()+u.getY()+s.getY()+l.getY())/4),new si(f,g)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,s,l,u,f){let g=yi.getInstance(),y=this.getDimension(),x=y/2-this.nbCenterLayers,C=y/2+this.nbCenterLayers;return g.sampleGrid(i,y,y,x,x,C,x,C,C,x,C,s.getX(),s.getY(),l.getX(),l.getY(),u.getX(),u.getY(),f.getX(),f.getY())}sampleLine(i,s,l){let u=0,f=this.distanceResultPoint(i,s),g=f/l,y=i.getX(),x=i.getY(),C=g*(s.getX()-i.getX())/f,I=g*(s.getY()-i.getY())/f;for(let M=0;M<l;M++)this.image.get(tt.round(y+M*C),tt.round(x+M*I))&&(u|=1<<l-M-1);return u}isWhiteOrBlackRectangle(i,s,l,u){let f=3;i=new si(i.getX()-f,i.getY()+f),s=new si(s.getX()-f,s.getY()-f),l=new si(l.getX()+f,l.getY()-f),u=new si(u.getX()+f,u.getY()+f);let g=this.getColor(u,i);if(g===0)return!1;let y=this.getColor(i,s);return y!==g||(y=this.getColor(s,l),y!==g)?!1:(y=this.getColor(l,u),y===g)}getColor(i,s){let l=this.distancePoint(i,s),u=(s.getX()-i.getX())/l,f=(s.getY()-i.getY())/l,g=0,y=i.getX(),x=i.getY(),C=this.image.get(i.getX(),i.getY()),I=Math.ceil(l);for(let P=0;P<I;P++)y+=u,x+=f,this.image.get(tt.round(y),tt.round(x))!==C&&g++;let M=g/l;return M>.1&&M<.9?0:M<=.1===C?1:-1}getFirstDifferent(i,s,l,u){let f=i.getX()+l,g=i.getY()+u;for(;this.isValid(f,g)&&this.image.get(f,g)===s;)f+=l,g+=u;for(f-=l,g-=u;this.isValid(f,g)&&this.image.get(f,g)===s;)f+=l;for(f-=l;this.isValid(f,g)&&this.image.get(f,g)===s;)g+=u;return g-=u,new si(f,g)}expandSquare(i,s,l){let u=l/(2*s),f=i[0].getX()-i[2].getX(),g=i[0].getY()-i[2].getY(),y=(i[0].getX()+i[2].getX())/2,x=(i[0].getY()+i[2].getY())/2,C=new Fe(y+u*f,x+u*g),I=new Fe(y-u*f,x-u*g);f=i[1].getX()-i[3].getX(),g=i[1].getY()-i[3].getY(),y=(i[1].getX()+i[3].getX())/2,x=(i[1].getY()+i[3].getY())/2;let M=new Fe(y+u*f,x+u*g),P=new Fe(y-u*f,x-u*g);return[C,M,I,P]}isValid(i,s){return i>=0&&i<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(i){let s=tt.round(i.getX()),l=tt.round(i.getY());return this.isValid(s,l)}distancePoint(i,s){return tt.distance(i.getX(),i.getY(),s.getX(),s.getY())}distanceResultPoint(i,s){return tt.distance(i.getX(),i.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(me.truncDivision(this.nbLayers-4,8)+1)+15}}class Ps{decode(i,s=null){let l=null,u=new To(i.getBlackMatrix()),f=null,g=null;try{let I=u.detectMirror(!1);f=I.getPoints(),this.reportFoundResultPoints(s,f),g=new Xt().decode(I)}catch(I){l=I}if(g==null)try{let I=u.detectMirror(!0);f=I.getPoints(),this.reportFoundResultPoints(s,f),g=new Xt().decode(I)}catch(I){throw l??I}let y=new Pe(g.getText(),g.getRawBytes(),g.getNumBits(),f,Ae.AZTEC,ie.currentTimeMillis()),x=g.getByteSegments();x!=null&&y.putMetadata(yt.BYTE_SEGMENTS,x);let C=g.getECLevel();return C!=null&&y.putMetadata(yt.ERROR_CORRECTION_LEVEL,C),y}reportFoundResultPoints(i,s){if(i!=null){let l=i.get(xe.NEED_RESULT_POINT_CALLBACK);l!=null&&s.forEach((u,f,g)=>{l.foundPossibleResultPoint(u)})}}reset(){}}class ll extends Oe{constructor(i=500){super(new Ps,i)}}class Yt{decode(i,s){try{return this.doDecode(i,s)}catch{if(s&&s.get(xe.TRY_HARDER)===!0&&i.isRotateSupported()){const f=i.rotateCounterClockwise(),g=this.doDecode(f,s),y=g.getResultMetadata();let x=270;y!==null&&y.get(yt.ORIENTATION)===!0&&(x=x+y.get(yt.ORIENTATION)%360),g.putMetadata(yt.ORIENTATION,x);const C=g.getResultPoints();if(C!==null){const I=f.getHeight();for(let M=0;M<C.length;M++)C[M]=new Fe(I-C[M].getY()-1,C[M].getX())}return g}else throw new le}}reset(){}doDecode(i,s){const l=i.getWidth(),u=i.getHeight();let f=new Be(l);const g=s&&s.get(xe.TRY_HARDER)===!0,y=Math.max(1,u>>(g?8:5));let x;g?x=u:x=15;const C=Math.trunc(u/2);for(let I=0;I<x;I++){const M=Math.trunc((I+1)/2),P=(I&1)===0,j=C+y*(P?M:-M);if(j<0||j>=u)break;try{f=i.getBlackRow(j,f)}catch{continue}for(let Q=0;Q<2;Q++){if(Q===1&&(f.reverse(),s&&s.get(xe.NEED_RESULT_POINT_CALLBACK)===!0)){const $=new Map;s.forEach((ae,ge)=>$.set(ge,ae)),$.delete(xe.NEED_RESULT_POINT_CALLBACK),s=$}try{const $=this.decodeRow(j,f,s);if(Q===1){$.putMetadata(yt.ORIENTATION,180);const ae=$.getResultPoints();ae!==null&&(ae[0]=new Fe(l-ae[0].getX()-1,ae[0].getY()),ae[1]=new Fe(l-ae[1].getX()-1,ae[1].getY()))}return $}catch{}}}throw new le}static recordPattern(i,s,l){const u=l.length;for(let C=0;C<u;C++)l[C]=0;const f=i.getSize();if(s>=f)throw new le;let g=!i.get(s),y=0,x=s;for(;x<f;){if(i.get(x)!==g)l[y]++;else{if(++y===u)break;l[y]=1,g=!g}x++}if(!(y===u||y===u-1&&x===f))throw new le}static recordPatternInReverse(i,s,l){let u=l.length,f=i.get(s);for(;s>0&&u>=0;)i.get(--s)!==f&&(u--,f=!f);if(u>=0)throw new le;Yt.recordPattern(i,s+1,l)}static patternMatchVariance(i,s,l){const u=i.length;let f=0,g=0;for(let C=0;C<u;C++)f+=i[C],g+=s[C];if(f<g)return Number.POSITIVE_INFINITY;const y=f/g;l*=y;let x=0;for(let C=0;C<u;C++){const I=i[C],M=s[C]*y,P=I>M?I-M:M-I;if(P>l)return Number.POSITIVE_INFINITY;x+=P}return x/f}}class Re extends Yt{static findStartPattern(i){const s=i.getSize(),l=i.getNextSet(0);let u=0,f=Int32Array.from([0,0,0,0,0,0]),g=l,y=!1;const x=6;for(let C=l;C<s;C++)if(i.get(C)!==y)f[u]++;else{if(u===x-1){let I=Re.MAX_AVG_VARIANCE,M=-1;for(let P=Re.CODE_START_A;P<=Re.CODE_START_C;P++){const j=Yt.patternMatchVariance(f,Re.CODE_PATTERNS[P],Re.MAX_INDIVIDUAL_VARIANCE);j<I&&(I=j,M=P)}if(M>=0&&i.isRange(Math.max(0,g-(C-g)/2),g,!1))return Int32Array.from([g,C,M]);g+=f[0]+f[1],f=f.slice(2,f.length-1),f[u-1]=0,f[u]=0,u--}else u++;f[u]=1,y=!y}throw new le}static decodeCode(i,s,l){Yt.recordPattern(i,l,s);let u=Re.MAX_AVG_VARIANCE,f=-1;for(let g=0;g<Re.CODE_PATTERNS.length;g++){const y=Re.CODE_PATTERNS[g],x=this.patternMatchVariance(s,y,Re.MAX_INDIVIDUAL_VARIANCE);x<u&&(u=x,f=g)}if(f>=0)return f;throw new le}decodeRow(i,s,l){const u=l&&l.get(xe.ASSUME_GS1)===!0,f=Re.findStartPattern(s),g=f[2];let y=0;const x=new Uint8Array(20);x[y++]=g;let C;switch(g){case Re.CODE_START_A:C=Re.CODE_CODE_A;break;case Re.CODE_START_B:C=Re.CODE_CODE_B;break;case Re.CODE_START_C:C=Re.CODE_CODE_C;break;default:throw new k}let I=!1,M=!1,P="",j=f[0],Q=f[1];const $=Int32Array.from([0,0,0,0,0,0]);let ae=0,ge=0,De=g,Ne=0,Ie=!0,At=!1,ht=!1;for(;!I;){const Ws=M;switch(M=!1,ae=ge,ge=Re.decodeCode(s,$,Q),x[y++]=ge,ge!==Re.CODE_STOP&&(Ie=!0),ge!==Re.CODE_STOP&&(Ne++,De+=Ne*ge),j=Q,Q+=$.reduce((Du,hc)=>Du+hc,0),ge){case Re.CODE_START_A:case Re.CODE_START_B:case Re.CODE_START_C:throw new k}switch(C){case Re.CODE_CODE_A:if(ge<64)ht===At?P+=String.fromCharCode(32+ge):P+=String.fromCharCode(32+ge+128),ht=!1;else if(ge<96)ht===At?P+=String.fromCharCode(ge-64):P+=String.fromCharCode(ge+64),ht=!1;else switch(ge!==Re.CODE_STOP&&(Ie=!1),ge){case Re.CODE_FNC_1:u&&(P.length===0?P+="]C1":P+="");break;case Re.CODE_FNC_2:case Re.CODE_FNC_3:break;case Re.CODE_FNC_4_A:!At&&ht?(At=!0,ht=!1):At&&ht?(At=!1,ht=!1):ht=!0;break;case Re.CODE_SHIFT:M=!0,C=Re.CODE_CODE_B;break;case Re.CODE_CODE_B:C=Re.CODE_CODE_B;break;case Re.CODE_CODE_C:C=Re.CODE_CODE_C;break;case Re.CODE_STOP:I=!0;break}break;case Re.CODE_CODE_B:if(ge<96)ht===At?P+=String.fromCharCode(32+ge):P+=String.fromCharCode(32+ge+128),ht=!1;else switch(ge!==Re.CODE_STOP&&(Ie=!1),ge){case Re.CODE_FNC_1:u&&(P.length===0?P+="]C1":P+="");break;case Re.CODE_FNC_2:case Re.CODE_FNC_3:break;case Re.CODE_FNC_4_B:!At&&ht?(At=!0,ht=!1):At&&ht?(At=!1,ht=!1):ht=!0;break;case Re.CODE_SHIFT:M=!0,C=Re.CODE_CODE_A;break;case Re.CODE_CODE_A:C=Re.CODE_CODE_A;break;case Re.CODE_CODE_C:C=Re.CODE_CODE_C;break;case Re.CODE_STOP:I=!0;break}break;case Re.CODE_CODE_C:if(ge<100)ge<10&&(P+="0"),P+=ge;else switch(ge!==Re.CODE_STOP&&(Ie=!1),ge){case Re.CODE_FNC_1:u&&(P.length===0?P+="]C1":P+="");break;case Re.CODE_CODE_A:C=Re.CODE_CODE_A;break;case Re.CODE_CODE_B:C=Re.CODE_CODE_B;break;case Re.CODE_STOP:I=!0;break}break}Ws&&(C=C===Re.CODE_CODE_A?Re.CODE_CODE_B:Re.CODE_CODE_A)}const Un=Q-j;if(Q=s.getNextUnset(Q),!s.isRange(Q,Math.min(s.getSize(),Q+(Q-j)/2),!1))throw new le;if(De-=Ne*ae,De%103!==ae)throw new G;const lr=P.length;if(lr===0)throw new le;lr>0&&Ie&&(C===Re.CODE_CODE_C?P=P.substring(0,lr-2):P=P.substring(0,lr-1));const Si=(f[1]+f[0])/2,tn=j+Un/2,oi=x.length,$i=new Uint8Array(oi);for(let Ws=0;Ws<oi;Ws++)$i[Ws]=x[Ws];const Na=[new Fe(Si,i),new Fe(tn,i)];return new Pe(P,$i,0,Na,Ae.CODE_128,new Date().getTime())}}Re.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Re.MAX_AVG_VARIANCE=.25,Re.MAX_INDIVIDUAL_VARIANCE=.7,Re.CODE_SHIFT=98,Re.CODE_CODE_C=99,Re.CODE_CODE_B=100,Re.CODE_CODE_A=101,Re.CODE_FNC_1=102,Re.CODE_FNC_2=97,Re.CODE_FNC_3=96,Re.CODE_FNC_4_A=101,Re.CODE_FNC_4_B=100,Re.CODE_START_A=103,Re.CODE_START_B=104,Re.CODE_START_C=105,Re.CODE_STOP=106;class Wt extends Yt{constructor(i=!1,s=!1){super(),this.usingCheckDigit=i,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,s,l){let u=this.counters;u.fill(0),this.decodeRowResult="";let f=Wt.findAsteriskPattern(s,u),g=s.getNextSet(f[1]),y=s.getSize(),x,C;do{Wt.recordPattern(s,g,u);let $=Wt.toNarrowWidePattern(u);if($<0)throw new le;x=Wt.patternToChar($),this.decodeRowResult+=x,C=g;for(let ae of u)g+=ae;g=s.getNextSet(g)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let I=0;for(let $ of u)I+=$;let M=g-C-I;if(g!==y&&M*2<I)throw new le;if(this.usingCheckDigit){let $=this.decodeRowResult.length-1,ae=0;for(let ge=0;ge<$;ge++)ae+=Wt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ge));if(this.decodeRowResult.charAt($)!==Wt.ALPHABET_STRING.charAt(ae%43))throw new G;this.decodeRowResult=this.decodeRowResult.substring(0,$)}if(this.decodeRowResult.length===0)throw new le;let P;this.extendedMode?P=Wt.decodeExtended(this.decodeRowResult):P=this.decodeRowResult;let j=(f[1]+f[0])/2,Q=C+I/2;return new Pe(P,null,0,[new Fe(j,i),new Fe(Q,i)],Ae.CODE_39,new Date().getTime())}static findAsteriskPattern(i,s){let l=i.getSize(),u=i.getNextSet(0),f=0,g=u,y=!1,x=s.length;for(let C=u;C<l;C++)if(i.get(C)!==y)s[f]++;else{if(f===x-1){if(this.toNarrowWidePattern(s)===Wt.ASTERISK_ENCODING&&i.isRange(Math.max(0,g-Math.floor((C-g)/2)),g,!1))return[g,C];g+=s[0]+s[1],s.copyWithin(0,2,2+f-1),s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,y=!y}throw new le}static toNarrowWidePattern(i){let s=i.length,l=0,u;do{let f=2147483647;for(let x of i)x<f&&x>l&&(f=x);l=f,u=0;let g=0,y=0;for(let x=0;x<s;x++){let C=i[x];C>l&&(y|=1<<s-1-x,u++,g+=C)}if(u===3){for(let x=0;x<s&&u>0;x++){let C=i[x];if(C>l&&(u--,C*2>=g))return-1}return y}}while(u>3);return-1}static patternToChar(i){for(let s=0;s<Wt.CHARACTER_ENCODINGS.length;s++)if(Wt.CHARACTER_ENCODINGS[s]===i)return Wt.ALPHABET_STRING.charAt(s);if(i===Wt.ASTERISK_ENCODING)return"*";throw new le}static decodeExtended(i){let s=i.length,l="";for(let u=0;u<s;u++){let f=i.charAt(u);if(f==="+"||f==="$"||f==="%"||f==="/"){let g=i.charAt(u+1),y="\0";switch(f){case"+":if(g>="A"&&g<="Z")y=String.fromCharCode(g.charCodeAt(0)+32);else throw new k;break;case"$":if(g>="A"&&g<="Z")y=String.fromCharCode(g.charCodeAt(0)-64);else throw new k;break;case"%":if(g>="A"&&g<="E")y=String.fromCharCode(g.charCodeAt(0)-38);else if(g>="F"&&g<="J")y=String.fromCharCode(g.charCodeAt(0)-11);else if(g>="K"&&g<="O")y=String.fromCharCode(g.charCodeAt(0)+16);else if(g>="P"&&g<="T")y=String.fromCharCode(g.charCodeAt(0)+43);else if(g==="U")y="\0";else if(g==="V")y="@";else if(g==="W")y="`";else if(g==="X"||g==="Y"||g==="Z")y="";else throw new k;break;case"/":if(g>="A"&&g<="O")y=String.fromCharCode(g.charCodeAt(0)-32);else if(g==="Z")y=":";else throw new k;break}l+=y,u++}else l+=f}return l}}Wt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Wt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Wt.ASTERISK_ENCODING=148;class ot extends Yt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,s,l){let u=this.decodeStart(s),f=this.decodeEnd(s),g=new H;ot.decodeMiddle(s,u[1],f[0],g);let y=g.toString(),x=null;l!=null&&(x=l.get(xe.ALLOWED_LENGTHS)),x==null&&(x=ot.DEFAULT_ALLOWED_LENGTHS);let C=y.length,I=!1,M=0;for(let Q of x){if(C===Q){I=!0;break}Q>M&&(M=Q)}if(!I&&C>M&&(I=!0),!I)throw new k;const P=[new Fe(u[1],i),new Fe(f[0],i)];return new Pe(y,null,0,P,Ae.ITF,new Date().getTime())}static decodeMiddle(i,s,l,u){let f=new Int32Array(10),g=new Int32Array(5),y=new Int32Array(5);for(f.fill(0),g.fill(0),y.fill(0);s<l;){Yt.recordPattern(i,s,f);for(let C=0;C<5;C++){let I=2*C;g[C]=f[I],y[C]=f[I+1]}let x=ot.decodeDigit(g);u.append(x.toString()),x=this.decodeDigit(y),u.append(x.toString()),f.forEach(function(C){s+=C})}}decodeStart(i){let s=ot.skipWhiteSpace(i),l=ot.findGuardPattern(i,s,ot.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(i,l[0]),l}validateQuietZone(i,s){let l=this.narrowLineWidth*10;l=l<s?l:s;for(let u=s-1;l>0&&u>=0&&!i.get(u);u--)l--;if(l!==0)throw new le}static skipWhiteSpace(i){const s=i.getSize(),l=i.getNextSet(0);if(l===s)throw new le;return l}decodeEnd(i){i.reverse();try{let s=ot.skipWhiteSpace(i),l;try{l=ot.findGuardPattern(i,s,ot.END_PATTERN_REVERSED[0])}catch(f){f instanceof le&&(l=ot.findGuardPattern(i,s,ot.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,l[0]);let u=l[0];return l[0]=i.getSize()-l[1],l[1]=i.getSize()-u,l}finally{i.reverse()}}static findGuardPattern(i,s,l){let u=l.length,f=new Int32Array(u),g=i.getSize(),y=!1,x=0,C=s;f.fill(0);for(let I=s;I<g;I++)if(i.get(I)!==y)f[x]++;else{if(x===u-1){if(Yt.patternMatchVariance(f,l,ot.MAX_INDIVIDUAL_VARIANCE)<ot.MAX_AVG_VARIANCE)return[C,I];C+=f[0]+f[1],ie.arraycopy(f,2,f,0,x-1),f[x-1]=0,f[x]=0,x--}else x++;f[x]=1,y=!y}throw new le}static decodeDigit(i){let s=ot.MAX_AVG_VARIANCE,l=-1,u=ot.PATTERNS.length;for(let f=0;f<u;f++){let g=ot.PATTERNS[f],y=Yt.patternMatchVariance(i,g,ot.MAX_INDIVIDUAL_VARIANCE);y<s?(s=y,l=f):y===s&&(l=-1)}if(l>=0)return l%10;throw new le}}ot.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ot.MAX_AVG_VARIANCE=.38,ot.MAX_INDIVIDUAL_VARIANCE=.5,ot.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ot.START_PATTERN=Int32Array.from([1,1,1,1]),ot.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class fn extends Yt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let s=!1,l,u=0,f=Int32Array.from([0,0,0]);for(;!s;){f=Int32Array.from([0,0,0]),l=fn.findGuardPattern(i,u,!1,this.START_END_PATTERN,f);let g=l[0];u=l[1];let y=g-(u-g);y>=0&&(s=i.isRange(y,g,!1))}return l}static checkChecksum(i){return fn.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let s=i.length;if(s===0)return!1;let l=parseInt(i.charAt(s-1),10);return fn.getStandardUPCEANChecksum(i.substring(0,s-1))===l}static getStandardUPCEANChecksum(i){let s=i.length,l=0;for(let u=s-1;u>=0;u-=2){let f=i.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new k;l+=f}l*=3;for(let u=s-2;u>=0;u-=2){let f=i.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new k;l+=f}return(1e3-l)%10}static decodeEnd(i,s){return fn.findGuardPattern(i,s,!1,fn.START_END_PATTERN,new Int32Array(fn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,s,l,u){return this.findGuardPattern(i,s,l,u,new Int32Array(u.length))}static findGuardPattern(i,s,l,u,f){let g=i.getSize();s=l?i.getNextUnset(s):i.getNextSet(s);let y=0,x=s,C=u.length,I=l;for(let M=s;M<g;M++)if(i.get(M)!==I)f[y]++;else{if(y===C-1){if(Yt.patternMatchVariance(f,u,fn.MAX_INDIVIDUAL_VARIANCE)<fn.MAX_AVG_VARIANCE)return Int32Array.from([x,M]);x+=f[0]+f[1];let P=f.slice(2,f.length-1);for(let j=0;j<y-1;j++)f[j]=P[j];f[y-1]=0,f[y]=0,y--}else y++;f[y]=1,I=!I}throw new le}static decodeDigit(i,s,l,u){this.recordPattern(i,l,s);let f=this.MAX_AVG_VARIANCE,g=-1,y=u.length;for(let x=0;x<y;x++){let C=u[x],I=Yt.patternMatchVariance(s,C,fn.MAX_INDIVIDUAL_VARIANCE);I<f&&(f=I,g=x)}if(g>=0)return g;throw new le}}fn.MAX_AVG_VARIANCE=.48,fn.MAX_INDIVIDUAL_VARIANCE=.7,fn.START_END_PATTERN=Int32Array.from([1,1,1]),fn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),fn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),fn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Br{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,s,l){let u=this.decodeRowStringBuffer,f=this.decodeMiddle(s,l,u),g=u.toString(),y=Br.parseExtensionString(g),x=[new Fe((l[0]+l[1])/2,i),new Fe(f,i)],C=new Pe(g,null,0,x,Ae.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&C.putAllMetadata(y),C}decodeMiddle(i,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=i.getSize(),g=s[1],y=0;for(let C=0;C<5&&g<f;C++){let I=fn.decodeDigit(i,u,g,fn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+I%10);for(let M of u)g+=M;I>=10&&(y|=1<<4-C),C!==4&&(g=i.getNextSet(g),g=i.getNextUnset(g))}if(l.length!==5)throw new le;let x=this.determineCheckDigit(y);if(Br.extensionChecksum(l.toString())!==x)throw new le;return g}static extensionChecksum(i){let s=i.length,l=0;for(let u=s-2;u>=0;u-=2)l+=i.charAt(u).charCodeAt(0)-48;l*=3;for(let u=s-1;u>=0;u-=2)l+=i.charAt(u).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(i){for(let s=0;s<10;s++)if(i===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new le}static parseExtensionString(i){if(i.length!==5)return null;let s=Br.parseExtension5String(i);return s==null?null:new Map([[yt.SUGGESTED_PRICE,s]])}static parseExtension5String(i){let s;switch(i.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let l=parseInt(i.substring(1)),u=(l/100).toString(),f=l%100,g=f<10?"0"+f:f.toString();return s+u+"."+g}}class wa{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,s,l){let u=this.decodeRowStringBuffer,f=this.decodeMiddle(s,l,u),g=u.toString(),y=wa.parseExtensionString(g),x=[new Fe((l[0]+l[1])/2,i),new Fe(f,i)],C=new Pe(g,null,0,x,Ae.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&C.putAllMetadata(y),C}decodeMiddle(i,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=i.getSize(),g=s[1],y=0;for(let x=0;x<2&&g<f;x++){let C=fn.decodeDigit(i,u,g,fn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+C%10);for(let I of u)g+=I;C>=10&&(y|=1<<1-x),x!==1&&(g=i.getNextSet(g),g=i.getNextUnset(g))}if(l.length!==2)throw new le;if(parseInt(l.toString())%4!==y)throw new le;return g}static parseExtensionString(i){return i.length!==2?null:new Map([[yt.ISSUE_NUMBER,parseInt(i)]])}}class yr{static decodeRow(i,s,l){let u=fn.findGuardPattern(s,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Br().decodeRow(i,s,u)}catch{return new wa().decodeRow(i,s,u)}}}yr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class wt extends fn{constructor(){super(),this.decodeRowStringBuffer="",wt.L_AND_G_PATTERNS=wt.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let s=wt.L_PATTERNS[i-10],l=new Int32Array(s.length);for(let u=0;u<s.length;u++)l[u]=s[s.length-u-1];wt.L_AND_G_PATTERNS[i]=l}}decodeRow(i,s,l){let u=wt.findStartGuardPattern(s),f=l==null?null:l.get(xe.NEED_RESULT_POINT_CALLBACK);if(f!=null){const Ie=new Fe((u[0]+u[1])/2,i);f.foundPossibleResultPoint(Ie)}let g=this.decodeMiddle(s,u,this.decodeRowStringBuffer),y=g.rowOffset,x=g.resultString;if(f!=null){const Ie=new Fe(y,i);f.foundPossibleResultPoint(Ie)}let C=this.decodeEnd(s,y);if(f!=null){const Ie=new Fe((C[0]+C[1])/2,i);f.foundPossibleResultPoint(Ie)}let I=C[1],M=I+(I-C[0]);if(M>=s.getSize()||!s.isRange(I,M,!1))throw new le;let P=x.toString();if(P.length<8)throw new k;if(!wt.checkChecksum(P))throw new G;let j=(u[1]+u[0])/2,Q=(C[1]+C[0])/2,$=this.getBarcodeFormat(),ae=[new Fe(j,i),new Fe(Q,i)],ge=new Pe(P,null,0,ae,$,new Date().getTime()),De=0;try{let Ie=yr.decodeRow(i,s,C[1]);ge.putMetadata(yt.UPC_EAN_EXTENSION,Ie.getText()),ge.putAllMetadata(Ie.getResultMetadata()),ge.addResultPoints(Ie.getResultPoints()),De=Ie.getText().length}catch{}let Ne=l==null?null:l.get(xe.ALLOWED_EAN_EXTENSIONS);if(Ne!=null){let Ie=!1;for(let At in Ne)if(De.toString()===At){Ie=!0;break}if(!Ie)throw new le}return ge}decodeEnd(i,s){return wt.findGuardPattern(i,s,!1,wt.START_END_PATTERN,new Int32Array(wt.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return wt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let s=i.length;if(s===0)return!1;let l=parseInt(i.charAt(s-1),10);return wt.getStandardUPCEANChecksum(i.substring(0,s-1))===l}static getStandardUPCEANChecksum(i){let s=i.length,l=0;for(let u=s-1;u>=0;u-=2){let f=i.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new k;l+=f}l*=3;for(let u=s-2;u>=0;u-=2){let f=i.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new k;l+=f}return(1e3-l)%10}}class ln extends wt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=i.getSize(),g=s[1],y=0;for(let C=0;C<6&&g<f;C++){let I=wt.decodeDigit(i,u,g,wt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+I%10);for(let M of u)g+=M;I>=10&&(y|=1<<5-C)}l=ln.determineFirstDigit(l,y),g=wt.findGuardPattern(i,g,!0,wt.MIDDLE_PATTERN,new Int32Array(wt.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<6&&g<f;C++){let I=wt.decodeDigit(i,u,g,wt.L_PATTERNS);l+=String.fromCharCode(48+I);for(let M of u)g+=M}return{rowOffset:g,resultString:l}}getBarcodeFormat(){return Ae.EAN_13}static determineFirstDigit(i,s){for(let l=0;l<10;l++)if(s===this.FIRST_DIGIT_ENCODINGS[l])return i=String.fromCharCode(48+l)+i,i;throw new le}}ln.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Er extends wt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,s,l){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=i.getSize(),g=s[1];for(let x=0;x<4&&g<f;x++){let C=wt.decodeDigit(i,u,g,wt.L_PATTERNS);l+=String.fromCharCode(48+C);for(let I of u)g+=I}g=wt.findGuardPattern(i,g,!0,wt.MIDDLE_PATTERN,new Int32Array(wt.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<4&&g<f;x++){let C=wt.decodeDigit(i,u,g,wt.L_PATTERNS);l+=String.fromCharCode(48+C);for(let I of u)g+=I}return{rowOffset:g,resultString:l}}getBarcodeFormat(){return Ae.EAN_8}}class _r extends wt{constructor(){super(...arguments),this.ean13Reader=new ln}getBarcodeFormat(){return Ae.UPC_A}decode(i,s){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,s,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,s,l))}decodeMiddle(i,s,l){return this.ean13Reader.decodeMiddle(i,s,l)}maybeReturnResult(i){let s=i.getText();if(s.charAt(0)==="0"){let l=new Pe(s.substring(1),null,null,i.getResultPoints(),Ae.UPC_A);return i.getResultMetadata()!=null&&l.putAllMetadata(i.getResultMetadata()),l}else throw new le}reset(){this.ean13Reader.reset()}}class Mn extends wt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,s,l){const u=this.decodeMiddleCounters.map(C=>C);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const f=i.getSize();let g=s[1],y=0;for(let C=0;C<6&&g<f;C++){const I=Mn.decodeDigit(i,u,g,Mn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+I%10);for(let M of u)g+=M;I>=10&&(y|=1<<5-C)}let x=Mn.determineNumSysAndCheckDigit(l,y);return{rowOffset:g,resultString:x}}decodeEnd(i,s){return Mn.findGuardPatternWithoutCounters(i,s,!0,Mn.MIDDLE_END_PATTERN)}checkChecksum(i){return wt.checkChecksum(Mn.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,s){for(let l=0;l<=1;l++)for(let u=0;u<10;u++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][u]){let f=String.fromCharCode(48+l),g=String.fromCharCode(48+u);return f+i+g}throw le.getNotFoundInstance()}getBarcodeFormat(){return Ae.UPC_E}static convertUPCEtoUPCA(i){const s=i.slice(1,7).split("").map(f=>f.charCodeAt(0)),l=new H;l.append(i.charAt(0));let u=s[5];switch(u){case 0:case 1:case 2:l.appendChars(s,0,2),l.append(u),l.append("0000"),l.appendChars(s,2,3);break;case 3:l.appendChars(s,0,3),l.append("00000"),l.appendChars(s,3,2);break;case 4:l.appendChars(s,0,4),l.append("00000"),l.append(s[4]);break;default:l.appendChars(s,0,5),l.append("0000"),l.append(u);break}return i.length>=8&&l.append(i.charAt(7)),l.toString()}}Mn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Mn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Co extends Yt{constructor(i){super();let s=i==null?null:i.get(xe.POSSIBLE_FORMATS),l=[];o(s)?(l.push(new ln),l.push(new _r),l.push(new Er),l.push(new Mn)):(s.indexOf(Ae.EAN_13)>-1&&l.push(new ln),s.indexOf(Ae.UPC_A)>-1&&l.push(new _r),s.indexOf(Ae.EAN_8)>-1&&l.push(new Er),s.indexOf(Ae.UPC_E)>-1&&l.push(new Mn)),this.readers=l}decodeRow(i,s,l){for(let u of this.readers)try{const f=u.decodeRow(i,s,l),g=f.getBarcodeFormat()===Ae.EAN_13&&f.getText().charAt(0)==="0",y=l==null?null:l.get(xe.POSSIBLE_FORMATS),x=y==null||y.includes(Ae.UPC_A);if(g&&x){const C=f.getRawBytes(),I=new Pe(f.getText().substring(1),C,C?C.length:null,f.getResultPoints(),Ae.UPC_A);return I.putAllMetadata(f.getResultMetadata()),I}return f}catch{}throw new le}reset(){for(let i of this.readers)i.reset()}}class qn extends Yt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,s){for(let l=0;l<s.length;l++)if(Yt.patternMatchVariance(i,s[l],qn.MAX_INDIVIDUAL_VARIANCE)<qn.MAX_AVG_VARIANCE)return l;throw new le}static count(i){return tt.sum(new Int32Array(i))}static increment(i,s){let l=0,u=s[0];for(let f=1;f<i.length;f++)s[f]>u&&(u=s[f],l=f);i[l]++}static decrement(i,s){let l=0,u=s[0];for(let f=1;f<i.length;f++)s[f]<u&&(u=s[f],l=f);i[l]--}static isFinderPattern(i){let s=i[0]+i[1],l=s+i[2]+i[3],u=s/l;if(u>=qn.MIN_FINDER_PATTERN_RATIO&&u<=qn.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;for(let y of i)y>g&&(g=y),y<f&&(f=y);return g<10*f}return!1}}qn.MAX_AVG_VARIANCE=.2,qn.MAX_INDIVIDUAL_VARIANCE=.45,qn.MIN_FINDER_PATTERN_RATIO=9.5/12,qn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ei{constructor(i,s){this.value=i,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof Ei))return!1;const s=i;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class kr{constructor(i,s,l,u,f){this.value=i,this.startEnd=s,this.value=i,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new Fe(l,f)),this.resultPoints.push(new Fe(u,f))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof kr))return!1;const s=i;return this.value===s.value}hashCode(){return this.value}}class ir{constructor(){}static getRSSvalue(i,s,l){let u=0;for(let x of i)u+=x;let f=0,g=0,y=i.length;for(let x=0;x<y-1;x++){let C;for(C=1,g|=1<<x;C<i[x];C++,g&=~(1<<x)){let I=ir.combins(u-C-1,y-x-2);if(l&&g===0&&u-C-(y-x-1)>=y-x-1&&(I-=ir.combins(u-C-(y-x),y-x-2)),y-x-1>1){let M=0;for(let P=u-C-(y-x-2);P>s;P--)M+=ir.combins(u-C-P-1,y-x-3);I-=M*(y-1-x)}else u-C>s&&I--;f+=I}u-=C}return f}static combins(i,s){let l,u;i-s>s?(u=s,l=i-s):(u=i-s,l=s);let f=1,g=1;for(let y=i;y>l;y--)f*=y,g<=u&&(f/=g,g++);for(;g<=u;)f/=g,g++;return f}}class Bs{static buildBitArray(i){let s=i.length*2-1;i[i.length-1].getRightChar()==null&&(s-=1);let l=12*s,u=new Be(l),f=0,y=i[0].getRightChar().getValue();for(let x=11;x>=0;--x)(y&1<<x)!=0&&u.set(f),f++;for(let x=1;x<i.length;++x){let C=i[x],I=C.getLeftChar().getValue();for(let M=11;M>=0;--M)(I&1<<M)!=0&&u.set(f),f++;if(C.getRightChar()!=null){let M=C.getRightChar().getValue();for(let P=11;P>=0;--P)(M&1<<P)!=0&&u.set(f),f++}}return u}}class xr{constructor(i,s){s?this.decodedInformation=null:(this.finished=i,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ks{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class Vn extends ks{constructor(i,s){super(i),this.value=s}getValue(){return this.value}isFNC1(){return this.value===Vn.FNC1}}Vn.FNC1="$";class _i extends ks{constructor(i,s,l){super(i),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class xi extends ks{constructor(i,s,l){if(super(i),s<0||s>10||l<0||l>10)throw new k;this.firstDigit=s,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===xi.FNC1}isSecondDigitFNC1(){return this.secondDigit===xi.FNC1}isAnyFNC1(){return this.firstDigit===xi.FNC1||this.secondDigit===xi.FNC1}}xi.FNC1=10;class Ve{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new le;let s=i.substring(0,2);for(let f of Ve.TWO_DIGIT_DATA_LENGTH)if(f[0]===s)return f[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(2,f[2],i):Ve.processFixedAI(2,f[1],i);if(i.length<3)throw new le;let l=i.substring(0,3);for(let f of Ve.THREE_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(3,f[2],i):Ve.processFixedAI(3,f[1],i);for(let f of Ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(4,f[2],i):Ve.processFixedAI(4,f[1],i);if(i.length<4)throw new le;let u=i.substring(0,4);for(let f of Ve.FOUR_DIGIT_DATA_LENGTH)if(f[0]===u)return f[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(4,f[2],i):Ve.processFixedAI(4,f[1],i);throw new le}static processFixedAI(i,s,l){if(l.length<i)throw new le;let u=l.substring(0,i);if(l.length<i+s)throw new le;let f=l.substring(i,i+s),g=l.substring(i+s),y="("+u+")"+f,x=Ve.parseFieldsInGeneralPurpose(g);return x==null?y:y+x}static processVariableAI(i,s,l){let u=l.substring(0,i),f;l.length<i+s?f=l.length:f=i+s;let g=l.substring(i,f),y=l.substring(f),x="("+u+")"+g,C=Ve.parseFieldsInGeneralPurpose(y);return C==null?x:x+C}}Ve.VARIABLE_LENGTH=[],Ve.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ve.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ve.VARIABLE_LENGTH,20],["22",Ve.VARIABLE_LENGTH,29],["30",Ve.VARIABLE_LENGTH,8],["37",Ve.VARIABLE_LENGTH,8],["90",Ve.VARIABLE_LENGTH,30],["91",Ve.VARIABLE_LENGTH,30],["92",Ve.VARIABLE_LENGTH,30],["93",Ve.VARIABLE_LENGTH,30],["94",Ve.VARIABLE_LENGTH,30],["95",Ve.VARIABLE_LENGTH,30],["96",Ve.VARIABLE_LENGTH,30],["97",Ve.VARIABLE_LENGTH,3],["98",Ve.VARIABLE_LENGTH,30],["99",Ve.VARIABLE_LENGTH,30]],Ve.THREE_DIGIT_DATA_LENGTH=[["240",Ve.VARIABLE_LENGTH,30],["241",Ve.VARIABLE_LENGTH,30],["242",Ve.VARIABLE_LENGTH,6],["250",Ve.VARIABLE_LENGTH,30],["251",Ve.VARIABLE_LENGTH,30],["253",Ve.VARIABLE_LENGTH,17],["254",Ve.VARIABLE_LENGTH,20],["400",Ve.VARIABLE_LENGTH,30],["401",Ve.VARIABLE_LENGTH,30],["402",17],["403",Ve.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ve.VARIABLE_LENGTH,20],["421",Ve.VARIABLE_LENGTH,15],["422",3],["423",Ve.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ve.VARIABLE_LENGTH,15],["391",Ve.VARIABLE_LENGTH,18],["392",Ve.VARIABLE_LENGTH,15],["393",Ve.VARIABLE_LENGTH,18],["703",Ve.VARIABLE_LENGTH,30]],Ve.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ve.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ve.VARIABLE_LENGTH,20],["8003",Ve.VARIABLE_LENGTH,30],["8004",Ve.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ve.VARIABLE_LENGTH,30],["8008",Ve.VARIABLE_LENGTH,12],["8018",18],["8020",Ve.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ve.VARIABLE_LENGTH,70],["8200",Ve.VARIABLE_LENGTH,70]];class ui{constructor(i){this.buffer=new H,this.information=i}decodeAllCodes(i,s){let l=s,u=null;do{let f=this.decodeGeneralPurposeField(l,u),g=Ve.parseFieldsInGeneralPurpose(f.getNewString());if(g!=null&&i.append(g),f.isRemaining()?u=""+f.getRemainingValue():u=null,l===f.getNewPosition())break;l=f.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let s=i;s<i+3;++s)if(this.information.get(s))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let f=this.extractNumericValueFromBitArray(i,4);return f===0?new xi(this.information.getSize(),xi.FNC1,xi.FNC1):new xi(this.information.getSize(),f-1,xi.FNC1)}let s=this.extractNumericValueFromBitArray(i,7),l=(s-8)/11,u=(s-8)%11;return new xi(i+7,l,u)}extractNumericValueFromBitArray(i,s){return ui.extractNumericValueFromBitArray(this.information,i,s)}static extractNumericValueFromBitArray(i,s,l){let u=0;for(let f=0;f<l;++f)i.get(s+f)&&(u|=1<<l-f-1);return u}decodeGeneralPurposeField(i,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(i);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new _i(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new _i(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,s;do{let l=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),i=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),i=s.isFinished()):(s=this.parseNumericBlock(),i=s.isFinished()),!(l!==this.current.getPosition())&&!i)break}while(!i);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let s;return i.isSecondDigitFNC1()?s=new _i(this.current.getPosition(),this.buffer.toString()):s=new _i(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new xr(!0,s)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let s=new _i(this.current.getPosition(),this.buffer.toString());return new xr(!0,s)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new xr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let s=new _i(this.current.getPosition(),this.buffer.toString());return new xr(!0,s)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new xr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let s=new _i(this.current.getPosition(),this.buffer.toString());return new xr(!0,s)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new xr(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(i,5);if(s>=5&&s<16)return!0;if(i+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<116)return!0;if(i+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(i,8);return u>=232&&u<253}decodeIsoIec646(i){let s=this.extractNumericValueFromBitArray(i,5);if(s===15)return new Vn(i+5,Vn.FNC1);if(s>=5&&s<15)return new Vn(i+5,"0"+(s-5));let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<90)return new Vn(i+7,""+(l+1));if(l>=90&&l<116)return new Vn(i+7,""+(l+7));let u=this.extractNumericValueFromBitArray(i,8),f;switch(u){case 232:f="!";break;case 233:f='"';break;case 234:f="%";break;case 235:f="&";break;case 236:f="'";break;case 237:f="(";break;case 238:f=")";break;case 239:f="*";break;case 240:f="+";break;case 241:f=",";break;case 242:f="-";break;case 243:f=".";break;case 244:f="/";break;case 245:f=":";break;case 246:f=";";break;case 247:f="<";break;case 248:f="=";break;case 249:f=">";break;case 250:f="?";break;case 251:f="_";break;case 252:f=" ";break;default:throw new k}return new Vn(i+8,f)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(i,5);if(s>=5&&s<16)return!0;if(i+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,6);return l>=16&&l<63}decodeAlphanumeric(i){let s=this.extractNumericValueFromBitArray(i,5);if(s===15)return new Vn(i+5,Vn.FNC1);if(s>=5&&s<15)return new Vn(i+5,"0"+(s-5));let l=this.extractNumericValueFromBitArray(i,6);if(l>=32&&l<58)return new Vn(i+6,""+(l+33));let u;switch(l){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new Li("Decoding invalid alphanumeric value: "+l)}return new Vn(i+6,u)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let s=0;s<5&&s+i<this.information.getSize();++s)if(s===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+s))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let s=i;s<i+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let s=0;s<4&&s+i<this.information.getSize();++s)if(this.information.get(i+s))return!1;return!0}}class Cn{constructor(i){this.information=i,this.generalDecoder=new ui(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ht extends Cn{constructor(i){super(i)}encodeCompressedGtin(i,s){i.append("(01)");let l=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,s,l)}encodeCompressedGtinWithoutAI(i,s,l){for(let u=0;u<4;++u){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*u,10);f/100===0&&i.append("0"),f/10===0&&i.append("0"),i.append(f)}Ht.appendCheckDigit(i,l)}static appendCheckDigit(i,s){let l=0;for(let u=0;u<13;u++){let f=i.charAt(u+s).charCodeAt(0)-48;l+=(u&1)===0?3*f:f}l=10-l%10,l===10&&(l=0),i.append(l)}}Ht.GTIN_SIZE=40;class Ai extends Ht{constructor(i){super(i)}parseInformation(){let i=new H;i.append("(01)");let s=i.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(Ai.HEADER_SIZE,4);return i.append(l),this.encodeCompressedGtinWithoutAI(i,Ai.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(i,Ai.HEADER_SIZE+44)}}Ai.HEADER_SIZE=4;class ss extends Cn{constructor(i){super(i)}parseInformation(){let i=new H;return this.getGeneralDecoder().decodeAllCodes(i,ss.HEADER_SIZE)}}ss.HEADER_SIZE=5;class Ta extends Ht{constructor(i){super(i)}encodeCompressedWeight(i,s,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s,l);this.addWeightCode(i,u);let f=this.checkWeight(u),g=1e5;for(let y=0;y<5;++y)f/g===0&&i.append("0"),g/=10;i.append(f)}}class Wi extends Ta{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=Wi.HEADER_SIZE+Ta.GTIN_SIZE+Wi.WEIGHT_SIZE)throw new le;let i=new H;return this.encodeCompressedGtin(i,Wi.HEADER_SIZE),this.encodeCompressedWeight(i,Wi.HEADER_SIZE+Ta.GTIN_SIZE,Wi.WEIGHT_SIZE),i.toString()}}Wi.HEADER_SIZE=5,Wi.WEIGHT_SIZE=15;class cl extends Wi{constructor(i){super(i)}addWeightCode(i,s){i.append("(3103)")}checkWeight(i){return i}}class Vr extends Wi{constructor(i){super(i)}addWeightCode(i,s){s<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class wi extends Ht{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<wi.HEADER_SIZE+Ht.GTIN_SIZE)throw new le;let i=new H;this.encodeCompressedGtin(i,wi.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(wi.HEADER_SIZE+Ht.GTIN_SIZE,wi.LAST_DIGIT_SIZE);i.append("(392"),i.append(s),i.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(wi.HEADER_SIZE+Ht.GTIN_SIZE+wi.LAST_DIGIT_SIZE,null);return i.append(l.getNewString()),i.toString()}}wi.HEADER_SIZE=8,wi.LAST_DIGIT_SIZE=2;class pn extends Ht{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<pn.HEADER_SIZE+Ht.GTIN_SIZE)throw new le;let i=new H;this.encodeCompressedGtin(i,pn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(pn.HEADER_SIZE+Ht.GTIN_SIZE,pn.LAST_DIGIT_SIZE);i.append("(393"),i.append(s),i.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(pn.HEADER_SIZE+Ht.GTIN_SIZE+pn.LAST_DIGIT_SIZE,pn.FIRST_THREE_DIGITS_SIZE);l/100==0&&i.append("0"),l/10==0&&i.append("0"),i.append(l);let u=this.getGeneralDecoder().decodeGeneralPurposeField(pn.HEADER_SIZE+Ht.GTIN_SIZE+pn.LAST_DIGIT_SIZE+pn.FIRST_THREE_DIGITS_SIZE,null);return i.append(u.getNewString()),i.toString()}}pn.HEADER_SIZE=8,pn.LAST_DIGIT_SIZE=2,pn.FIRST_THREE_DIGITS_SIZE=10;class St extends Ta{constructor(i,s,l){super(i),this.dateCode=l,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=St.HEADER_SIZE+St.GTIN_SIZE+St.WEIGHT_SIZE+St.DATE_SIZE)throw new le;let i=new H;return this.encodeCompressedGtin(i,St.HEADER_SIZE),this.encodeCompressedWeight(i,St.HEADER_SIZE+St.GTIN_SIZE,St.WEIGHT_SIZE),this.encodeCompressedDate(i,St.HEADER_SIZE+St.GTIN_SIZE+St.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,s){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(s,St.DATE_SIZE);if(l==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let u=l%32;l/=32;let f=l%12+1;l/=12;let g=l;g/10==0&&i.append("0"),i.append(g),f/10==0&&i.append("0"),i.append(f),u/10==0&&i.append("0"),i.append(u)}addWeightCode(i,s){i.append("("),i.append(this.firstAIdigits),i.append(s/1e5),i.append(")")}checkWeight(i){return i%1e5}}St.HEADER_SIZE=8,St.WEIGHT_SIZE=20,St.DATE_SIZE=16;function Pi(D){try{if(D.get(1))return new Ai(D);if(!D.get(2))return new ss(D);switch(ui.extractNumericValueFromBitArray(D,1,4)){case 4:return new cl(D);case 5:return new Vr(D)}switch(ui.extractNumericValueFromBitArray(D,1,5)){case 12:return new wi(D);case 13:return new pn(D)}switch(ui.extractNumericValueFromBitArray(D,1,7)){case 56:return new St(D,"310","11");case 57:return new St(D,"320","11");case 58:return new St(D,"310","13");case 59:return new St(D,"320","13");case 60:return new St(D,"310","15");case 61:return new St(D,"320","15");case 62:return new St(D,"310","17");case 63:return new St(D,"320","17")}}catch(i){throw console.log(i),new Li("unknown decoder: "+D)}}class ai{constructor(i,s,l,u){this.leftchar=i,this.rightchar=s,this.finderpattern=l,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,s){return i instanceof ai?ai.equalsOrNull(i.leftchar,s.leftchar)&&ai.equalsOrNull(i.rightchar,s.rightchar)&&ai.equalsOrNull(i.finderpattern,s.finderpattern):!1}static equalsOrNull(i,s){return i===null?s===null:ai.equals(i,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class vn{constructor(i,s,l){this.pairs=i,this.rowNumber=s,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,s){return i instanceof vn?this.checkEqualitity(i,s)&&i.wasReversed===s.wasReversed:!1}checkEqualitity(i,s){if(!i||!s)return;let l;return i.forEach((u,f)=>{s.forEach(g=>{u.getLeftChar().getValue()===g.getLeftChar().getValue()&&u.getRightChar().getValue()===g.getRightChar().getValue()&&u.getFinderPatter().getValue()===g.getFinderPatter().getValue()&&(l=!0)})}),l}}class ve extends qn{constructor(i){super(...arguments),this.pairs=new Array(ve.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,s,l){this.pairs.length=0,this.startFromEven=!1;try{return ve.constructResult(this.decodeRow2pairs(i,s))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,ve.constructResult(this.decodeRow2pairs(i,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,s){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,i))}catch(f){if(f instanceof le){if(!this.pairs.length)throw new le;l=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(i,!1),u){let f=this.checkRowsBoolean(!1);if(f!=null||(f=this.checkRowsBoolean(!0),f!=null))return f}throw new le}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return i&&(this.rows=this.rows.reverse()),s}checkRows(i,s){for(let l=s;l<this.rows.length;l++){let u=this.rows[l];this.pairs.length=0;for(let g of i)this.pairs.push(g.getPairs());if(this.pairs.push(u.getPairs()),!ve.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let f=new Array(i);f.push(u);try{return this.checkRows(f,l+1)}catch(g){this.verbose&&console.log(g)}}throw new le}static isValidSequence(i){for(let s of ve.FINDER_PATTERN_SEQUENCES){if(i.length>s.length)continue;let l=!0;for(let u=0;u<i.length;u++)if(i[u].getFinderPattern().getValue()!=s[u]){l=!1;break}if(l)return!0}return!1}storeRow(i,s){let l=0,u=!1,f=!1;for(;l<this.rows.length;){let g=this.rows[l];if(g.getRowNumber()>i){f=g.isEquivalent(this.pairs);break}u=g.isEquivalent(this.pairs),l++}f||u||ve.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new vn(this.pairs,i,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,s){for(let l of s)if(l.getPairs().length!==i.length){for(let u of l.getPairs())for(let f of i)if(ai.equals(u,f))break}}static isPartialRow(i,s){for(let l of s){let u=!0;for(let f of i){let g=!1;for(let y of l.getPairs())if(f.equals(y)){g=!0;break}if(!g){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(i){let s=Bs.buildBitArray(i),u=Pi(s).parseInformation(),f=i[0].getFinderPattern().getResultPoints(),g=i[i.length-1].getFinderPattern().getResultPoints(),y=[f[0],f[1],g[0],g[1]];return new Pe(u,null,null,y,Ae.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),s=i.getLeftChar(),l=i.getRightChar();if(l==null)return!1;let u=l.getChecksumPortion(),f=2;for(let y=1;y<this.pairs.size();++y){let x=this.pairs.get(y);u+=x.getLeftChar().getChecksumPortion(),f++;let C=x.getRightChar();C!=null&&(u+=C.getChecksumPortion(),f++)}return u%=211,211*(f-4)+u==s.getValue()}static getNextSecondBar(i,s){let l;return i.get(s)?(l=i.getNextUnset(s),l=i.getNextSet(l)):(l=i.getNextSet(s),l=i.getNextUnset(l)),l}retrieveNextPair(i,s,l){let u=s.length%2==0;this.startFromEven&&(u=!u);let f,g=!0,y=-1;do this.findNextPair(i,s,y),f=this.parseFoundFinderPattern(i,l,u),f==null?y=ve.getNextSecondBar(i,this.startEnd[0]):g=!1;while(g);let x=this.decodeDataCharacter(i,f,u,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new le;let C;try{C=this.decodeDataCharacter(i,f,u,!1)}catch(I){C=null,this.verbose&&console.log(I)}return new ai(x,C,f,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,s,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=i.getSize(),g;l>=0?g=l:this.isEmptyPair(s)?g=0:g=s[s.length-1].getFinderPattern().getStartEnd()[1];let y=s.length%2!=0;this.startFromEven&&(y=!y);let x=!1;for(;g<f&&(x=!i.get(g),!!x);)g++;let C=0,I=g;for(let M=g;M<f;M++)if(i.get(M)!=x)u[C]++;else{if(C==3){if(y&&ve.reverseCounters(u),ve.isFinderPattern(u)){this.startEnd[0]=I,this.startEnd[1]=M;return}y&&ve.reverseCounters(u),I+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,C--}else C++;u[C]=1,x=!x}throw new le}static reverseCounters(i){let s=i.length;for(let l=0;l<s/2;++l){let u=i[l];i[l]=i[s-l-1],i[s-l-1]=u}}parseFoundFinderPattern(i,s,l){let u,f,g;if(l){let C=this.startEnd[0]-1;for(;C>=0&&!i.get(C);)C--;C++,u=this.startEnd[0]-C,f=C,g=this.startEnd[1]}else f=this.startEnd[0],g=i.getNextUnset(this.startEnd[1]+1),u=g-this.startEnd[1];let y=this.getDecodeFinderCounters();ie.arraycopy(y,0,y,1,y.length-1),y[0]=u;let x;try{x=this.parseFinderValue(y,ve.FINDER_PATTERNS)}catch{return null}return new kr(x,[f,g],f,g,s)}decodeDataCharacter(i,s,l,u){let f=this.getDataCharacterCounters();for(let tn=0;tn<f.length;tn++)f[tn]=0;if(u)ve.recordPatternInReverse(i,s.getStartEnd()[0],f);else{ve.recordPattern(i,s.getStartEnd()[1],f);for(let tn=0,oi=f.length-1;tn<oi;tn++,oi--){let $i=f[tn];f[tn]=f[oi],f[oi]=$i}}let g=17,y=tt.sum(new Int32Array(f))/g,x=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(y-x)/x>.3)throw new le;let C=this.getOddCounts(),I=this.getEvenCounts(),M=this.getOddRoundingErrors(),P=this.getEvenRoundingErrors();for(let tn=0;tn<f.length;tn++){let oi=1*f[tn]/y,$i=oi+.5;if($i<1){if(oi<.3)throw new le;$i=1}else if($i>8){if(oi>8.7)throw new le;$i=8}let Na=tn/2;(tn&1)==0?(C[Na]=$i,M[Na]=oi-$i):(I[Na]=$i,P[Na]=oi-$i)}this.adjustOddEvenCounts(g);let j=4*s.getValue()+(l?0:2)+(u?0:1)-1,Q=0,$=0;for(let tn=C.length-1;tn>=0;tn--){if(ve.isNotA1left(s,l,u)){let oi=ve.WEIGHTS[j][2*tn];$+=C[tn]*oi}Q+=C[tn]}let ae=0;for(let tn=I.length-1;tn>=0;tn--)if(ve.isNotA1left(s,l,u)){let oi=ve.WEIGHTS[j][2*tn+1];ae+=I[tn]*oi}let ge=$+ae;if((Q&1)!=0||Q>13||Q<4)throw new le;let De=(13-Q)/2,Ne=ve.SYMBOL_WIDEST[De],Ie=9-Ne,At=ir.getRSSvalue(C,Ne,!0),ht=ir.getRSSvalue(I,Ie,!1),Un=ve.EVEN_TOTAL_SUBSET[De],lr=ve.GSUM[De],Si=At*Un+ht+lr;return new Ei(Si,ge)}static isNotA1left(i,s,l){return!(i.getValue()==0&&s&&l)}adjustOddEvenCounts(i){let s=tt.sum(new Int32Array(this.getOddCounts())),l=tt.sum(new Int32Array(this.getEvenCounts())),u=!1,f=!1;s>13?f=!0:s<4&&(u=!0);let g=!1,y=!1;l>13?y=!0:l<4&&(g=!0);let x=s+l-i,C=(s&1)==1,I=(l&1)==0;if(x==1)if(C){if(I)throw new le;f=!0}else{if(!I)throw new le;y=!0}else if(x==-1)if(C){if(I)throw new le;u=!0}else{if(!I)throw new le;g=!0}else if(x==0){if(C){if(!I)throw new le;s<l?(u=!0,y=!0):(f=!0,g=!0)}else if(I)throw new le}else throw new le;if(u){if(f)throw new le;ve.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&ve.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(y)throw new le;ve.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&ve.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ve.SYMBOL_WIDEST=[7,5,4,3,1],ve.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ve.GSUM=[0,348,1388,2948,3988],ve.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ve.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ve.FINDER_PAT_A=0,ve.FINDER_PAT_B=1,ve.FINDER_PAT_C=2,ve.FINDER_PAT_D=3,ve.FINDER_PAT_E=4,ve.FINDER_PAT_F=5,ve.FINDER_PATTERN_SEQUENCES=[[ve.FINDER_PAT_A,ve.FINDER_PAT_A],[ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B],[ve.FINDER_PAT_A,ve.FINDER_PAT_C,ve.FINDER_PAT_B,ve.FINDER_PAT_D],[ve.FINDER_PAT_A,ve.FINDER_PAT_E,ve.FINDER_PAT_B,ve.FINDER_PAT_D,ve.FINDER_PAT_C],[ve.FINDER_PAT_A,ve.FINDER_PAT_E,ve.FINDER_PAT_B,ve.FINDER_PAT_D,ve.FINDER_PAT_D,ve.FINDER_PAT_F],[ve.FINDER_PAT_A,ve.FINDER_PAT_E,ve.FINDER_PAT_B,ve.FINDER_PAT_D,ve.FINDER_PAT_E,ve.FINDER_PAT_F,ve.FINDER_PAT_F],[ve.FINDER_PAT_A,ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B,ve.FINDER_PAT_C,ve.FINDER_PAT_C,ve.FINDER_PAT_D,ve.FINDER_PAT_D],[ve.FINDER_PAT_A,ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B,ve.FINDER_PAT_C,ve.FINDER_PAT_C,ve.FINDER_PAT_D,ve.FINDER_PAT_E,ve.FINDER_PAT_E],[ve.FINDER_PAT_A,ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B,ve.FINDER_PAT_C,ve.FINDER_PAT_C,ve.FINDER_PAT_D,ve.FINDER_PAT_E,ve.FINDER_PAT_F,ve.FINDER_PAT_F],[ve.FINDER_PAT_A,ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B,ve.FINDER_PAT_C,ve.FINDER_PAT_D,ve.FINDER_PAT_D,ve.FINDER_PAT_E,ve.FINDER_PAT_E,ve.FINDER_PAT_F,ve.FINDER_PAT_F]],ve.MAX_PAIRS=11;class vo extends Ei{constructor(i,s,l){super(i,s),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Gt extends qn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,s,l){const u=this.decodePair(s,!1,i,l);Gt.addOrTally(this.possibleLeftPairs,u),s.reverse();let f=this.decodePair(s,!0,i,l);Gt.addOrTally(this.possibleRightPairs,f),s.reverse();for(let g of this.possibleLeftPairs)if(g.getCount()>1){for(let y of this.possibleRightPairs)if(y.getCount()>1&&Gt.checkChecksum(g,y))return Gt.constructResult(g,y)}throw new le}static addOrTally(i,s){if(s==null)return;let l=!1;for(let u of i)if(u.getValue()===s.getValue()){u.incrementCount(),l=!0;break}l||i.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,s){let l=4537077*i.getValue()+s.getValue(),u=new String(l).toString(),f=new H;for(let C=13-u.length;C>0;C--)f.append("0");f.append(u);let g=0;for(let C=0;C<13;C++){let I=f.charAt(C).charCodeAt(0)-48;g+=(C&1)===0?3*I:I}g=10-g%10,g===10&&(g=0),f.append(g.toString());let y=i.getFinderPattern().getResultPoints(),x=s.getFinderPattern().getResultPoints();return new Pe(f.toString(),null,0,[y[0],y[1],x[0],x[1]],Ae.RSS_14,new Date().getTime())}static checkChecksum(i,s){let l=(i.getChecksumPortion()+16*s.getChecksumPortion())%79,u=9*i.getFinderPattern().getValue()+s.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,l===u}decodePair(i,s,l,u){try{let f=this.findFinderPattern(i,s),g=this.parseFoundFinderPattern(i,l,s,f),y=u==null?null:u.get(xe.NEED_RESULT_POINT_CALLBACK);if(y!=null){let I=(f[0]+f[1])/2;s&&(I=i.getSize()-1-I),y.foundPossibleResultPoint(new Fe(I,l))}let x=this.decodeDataCharacter(i,g,!0),C=this.decodeDataCharacter(i,g,!1);return new vo(1597*x.getValue()+C.getValue(),x.getChecksumPortion()+4*C.getChecksumPortion(),g)}catch{return null}}decodeDataCharacter(i,s,l){let u=this.getDataCharacterCounters();for(let ae=0;ae<u.length;ae++)u[ae]=0;if(l)Yt.recordPatternInReverse(i,s.getStartEnd()[0],u);else{Yt.recordPattern(i,s.getStartEnd()[1]+1,u);for(let ae=0,ge=u.length-1;ae<ge;ae++,ge--){let De=u[ae];u[ae]=u[ge],u[ge]=De}}let f=l?16:15,g=tt.sum(new Int32Array(u))/f,y=this.getOddCounts(),x=this.getEvenCounts(),C=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let ae=0;ae<u.length;ae++){let ge=u[ae]/g,De=Math.floor(ge+.5);De<1?De=1:De>8&&(De=8);let Ne=Math.floor(ae/2);(ae&1)===0?(y[Ne]=De,C[Ne]=ge-De):(x[Ne]=De,I[Ne]=ge-De)}this.adjustOddEvenCounts(l,f);let M=0,P=0;for(let ae=y.length-1;ae>=0;ae--)P*=9,P+=y[ae],M+=y[ae];let j=0,Q=0;for(let ae=x.length-1;ae>=0;ae--)j*=9,j+=x[ae],Q+=x[ae];let $=P+3*j;if(l){if((M&1)!==0||M>12||M<4)throw new le;let ae=(12-M)/2,ge=Gt.OUTSIDE_ODD_WIDEST[ae],De=9-ge,Ne=ir.getRSSvalue(y,ge,!1),Ie=ir.getRSSvalue(x,De,!0),At=Gt.OUTSIDE_EVEN_TOTAL_SUBSET[ae],ht=Gt.OUTSIDE_GSUM[ae];return new Ei(Ne*At+Ie+ht,$)}else{if((Q&1)!==0||Q>10||Q<4)throw new le;let ae=(10-Q)/2,ge=Gt.INSIDE_ODD_WIDEST[ae],De=9-ge,Ne=ir.getRSSvalue(y,ge,!0),Ie=ir.getRSSvalue(x,De,!1),At=Gt.INSIDE_ODD_TOTAL_SUBSET[ae],ht=Gt.INSIDE_GSUM[ae];return new Ei(Ie*At+Ne+ht,$)}}findFinderPattern(i,s){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=i.getSize(),f=!1,g=0;for(;g<u&&(f=!i.get(g),s!==f);)g++;let y=0,x=g;for(let C=g;C<u;C++)if(i.get(C)!==f)l[y]++;else{if(y===3){if(qn.isFinderPattern(l))return[x,C];x+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,y--}else y++;l[y]=1,f=!f}throw new le}parseFoundFinderPattern(i,s,l,u){let f=i.get(u[0]),g=u[0]-1;for(;g>=0&&f!==i.get(g);)g--;g++;const y=u[0]-g,x=this.getDecodeFinderCounters(),C=new Int32Array(x.length);ie.arraycopy(x,0,C,1,x.length-1),C[0]=y;const I=this.parseFinderValue(C,Gt.FINDER_PATTERNS);let M=g,P=u[1];return l&&(M=i.getSize()-1-M,P=i.getSize()-1-P),new kr(I,[g,u[1]],M,P,s)}adjustOddEvenCounts(i,s){let l=tt.sum(new Int32Array(this.getOddCounts())),u=tt.sum(new Int32Array(this.getEvenCounts())),f=!1,g=!1,y=!1,x=!1;i?(l>12?g=!0:l<4&&(f=!0),u>12?x=!0:u<4&&(y=!0)):(l>11?g=!0:l<5&&(f=!0),u>10?x=!0:u<4&&(y=!0));let C=l+u-s,I=(l&1)===(i?1:0),M=(u&1)===1;if(C===1)if(I){if(M)throw new le;g=!0}else{if(!M)throw new le;x=!0}else if(C===-1)if(I){if(M)throw new le;f=!0}else{if(!M)throw new le;y=!0}else if(C===0){if(I){if(!M)throw new le;l<u?(f=!0,x=!0):(g=!0,y=!0)}else if(M)throw new le}else throw new le;if(f){if(g)throw new le;qn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&qn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(x)throw new le;qn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&qn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Gt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Gt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Gt.OUTSIDE_GSUM=[0,161,961,2015,2715],Gt.INSIDE_GSUM=[0,336,1036,1516],Gt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Gt.INSIDE_ODD_WIDEST=[2,4,6,8],Gt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ti extends Yt{constructor(i,s){super(),this.readers=[],this.verbose=s===!0;const l=i?i.get(xe.POSSIBLE_FORMATS):null,u=i&&i.get(xe.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Ae.EAN_13)||l.includes(Ae.UPC_A)||l.includes(Ae.EAN_8)||l.includes(Ae.UPC_E))&&this.readers.push(new Co(i)),l.includes(Ae.CODE_39)&&this.readers.push(new Wt(u)),l.includes(Ae.CODE_128)&&this.readers.push(new Re),l.includes(Ae.ITF)&&this.readers.push(new ot),l.includes(Ae.RSS_14)&&this.readers.push(new Gt),l.includes(Ae.RSS_EXPANDED)&&this.readers.push(new ve(this.verbose))):(this.readers.push(new Co(i)),this.readers.push(new Wt),this.readers.push(new Co(i)),this.readers.push(new Re),this.readers.push(new ot),this.readers.push(new Gt),this.readers.push(new ve(this.verbose)))}decodeRow(i,s,l){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(i,s,l)}catch{}throw new le}reset(){this.readers.forEach(i=>i.reset())}}class So extends Oe{constructor(i=500,s){super(new Ti(s),i,s)}}class Dt{constructor(i,s,l){this.ecCodewords=i,this.ecBlocks=[s],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class bt{constructor(i,s){this.count=i,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class xt{constructor(i,s,l,u,f,g){this.versionNumber=i,this.symbolSizeRows=s,this.symbolSizeColumns=l,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=f,this.ecBlocks=g;let y=0;const x=g.getECCodewords(),C=g.getECBlocks();for(let I of C)y+=I.getCount()*(I.getDataCodewords()+x);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,s){if((i&1)!==0||(s&1)!==0)throw new k;for(let l of xt.VERSIONS)if(l.symbolSizeRows===i&&l.symbolSizeColumns===s)return l;throw new k}toString(){return""+this.versionNumber}static buildVersions(){return[new xt(1,10,10,8,8,new Dt(5,new bt(1,3))),new xt(2,12,12,10,10,new Dt(7,new bt(1,5))),new xt(3,14,14,12,12,new Dt(10,new bt(1,8))),new xt(4,16,16,14,14,new Dt(12,new bt(1,12))),new xt(5,18,18,16,16,new Dt(14,new bt(1,18))),new xt(6,20,20,18,18,new Dt(18,new bt(1,22))),new xt(7,22,22,20,20,new Dt(20,new bt(1,30))),new xt(8,24,24,22,22,new Dt(24,new bt(1,36))),new xt(9,26,26,24,24,new Dt(28,new bt(1,44))),new xt(10,32,32,14,14,new Dt(36,new bt(1,62))),new xt(11,36,36,16,16,new Dt(42,new bt(1,86))),new xt(12,40,40,18,18,new Dt(48,new bt(1,114))),new xt(13,44,44,20,20,new Dt(56,new bt(1,144))),new xt(14,48,48,22,22,new Dt(68,new bt(1,174))),new xt(15,52,52,24,24,new Dt(42,new bt(2,102))),new xt(16,64,64,14,14,new Dt(56,new bt(2,140))),new xt(17,72,72,16,16,new Dt(36,new bt(4,92))),new xt(18,80,80,18,18,new Dt(48,new bt(4,114))),new xt(19,88,88,20,20,new Dt(56,new bt(4,144))),new xt(20,96,96,22,22,new Dt(68,new bt(4,174))),new xt(21,104,104,24,24,new Dt(56,new bt(6,136))),new xt(22,120,120,18,18,new Dt(68,new bt(6,175))),new xt(23,132,132,20,20,new Dt(62,new bt(8,163))),new xt(24,144,144,22,22,new Dt(62,new bt(8,156),new bt(2,155))),new xt(25,8,18,6,16,new Dt(7,new bt(1,5))),new xt(26,8,32,6,14,new Dt(11,new bt(1,10))),new xt(27,12,26,10,24,new Dt(14,new bt(1,16))),new xt(28,12,36,10,16,new Dt(18,new bt(1,22))),new xt(29,16,36,14,16,new Dt(24,new bt(1,32))),new xt(30,16,48,14,22,new Dt(28,new bt(1,49)))]}}xt.VERSIONS=xt.buildVersions();class ms{constructor(i){const s=i.getHeight();if(s<8||s>144||(s&1)!==0)throw new k;this.version=ms.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new qe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const s=i.getHeight(),l=i.getWidth();return xt.getVersionForDimensions(s,l)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let s=0,l=4,u=0;const f=this.mappingBitMatrix.getHeight(),g=this.mappingBitMatrix.getWidth();let y=!1,x=!1,C=!1,I=!1;do if(l===f&&u===0&&!y)i[s++]=this.readCorner1(f,g)&255,l-=2,u+=2,y=!0;else if(l===f-2&&u===0&&(g&3)!==0&&!x)i[s++]=this.readCorner2(f,g)&255,l-=2,u+=2,x=!0;else if(l===f+4&&u===2&&(g&7)===0&&!C)i[s++]=this.readCorner3(f,g)&255,l-=2,u+=2,C=!0;else if(l===f-2&&u===0&&(g&7)===4&&!I)i[s++]=this.readCorner4(f,g)&255,l-=2,u+=2,I=!0;else{do l<f&&u>=0&&!this.readMappingMatrix.get(u,l)&&(i[s++]=this.readUtah(l,u,f,g)&255),l-=2,u+=2;while(l>=0&&u<g);l+=1,u+=3;do l>=0&&u<g&&!this.readMappingMatrix.get(u,l)&&(i[s++]=this.readUtah(l,u,f,g)&255),l+=2,u-=2;while(l<f&&u>=0);l+=3,u+=1}while(l<f||u<g);if(s!==this.version.getTotalCodewords())throw new k;return i}readModule(i,s,l,u){return i<0&&(i+=l,s+=4-(l+4&7)),s<0&&(s+=u,i+=4-(u+4&7)),this.readMappingMatrix.set(s,i),this.mappingBitMatrix.get(s,i)}readUtah(i,s,l,u){let f=0;return this.readModule(i-2,s-2,l,u)&&(f|=1),f<<=1,this.readModule(i-2,s-1,l,u)&&(f|=1),f<<=1,this.readModule(i-1,s-2,l,u)&&(f|=1),f<<=1,this.readModule(i-1,s-1,l,u)&&(f|=1),f<<=1,this.readModule(i-1,s,l,u)&&(f|=1),f<<=1,this.readModule(i,s-2,l,u)&&(f|=1),f<<=1,this.readModule(i,s-1,l,u)&&(f|=1),f<<=1,this.readModule(i,s,l,u)&&(f|=1),f}readCorner1(i,s){let l=0;return this.readModule(i-1,0,i,s)&&(l|=1),l<<=1,this.readModule(i-1,1,i,s)&&(l|=1),l<<=1,this.readModule(i-1,2,i,s)&&(l|=1),l<<=1,this.readModule(0,s-2,i,s)&&(l|=1),l<<=1,this.readModule(0,s-1,i,s)&&(l|=1),l<<=1,this.readModule(1,s-1,i,s)&&(l|=1),l<<=1,this.readModule(2,s-1,i,s)&&(l|=1),l<<=1,this.readModule(3,s-1,i,s)&&(l|=1),l}readCorner2(i,s){let l=0;return this.readModule(i-3,0,i,s)&&(l|=1),l<<=1,this.readModule(i-2,0,i,s)&&(l|=1),l<<=1,this.readModule(i-1,0,i,s)&&(l|=1),l<<=1,this.readModule(0,s-4,i,s)&&(l|=1),l<<=1,this.readModule(0,s-3,i,s)&&(l|=1),l<<=1,this.readModule(0,s-2,i,s)&&(l|=1),l<<=1,this.readModule(0,s-1,i,s)&&(l|=1),l<<=1,this.readModule(1,s-1,i,s)&&(l|=1),l}readCorner3(i,s){let l=0;return this.readModule(i-1,0,i,s)&&(l|=1),l<<=1,this.readModule(i-1,s-1,i,s)&&(l|=1),l<<=1,this.readModule(0,s-3,i,s)&&(l|=1),l<<=1,this.readModule(0,s-2,i,s)&&(l|=1),l<<=1,this.readModule(0,s-1,i,s)&&(l|=1),l<<=1,this.readModule(1,s-3,i,s)&&(l|=1),l<<=1,this.readModule(1,s-2,i,s)&&(l|=1),l<<=1,this.readModule(1,s-1,i,s)&&(l|=1),l}readCorner4(i,s){let l=0;return this.readModule(i-3,0,i,s)&&(l|=1),l<<=1,this.readModule(i-2,0,i,s)&&(l|=1),l<<=1,this.readModule(i-1,0,i,s)&&(l|=1),l<<=1,this.readModule(0,s-2,i,s)&&(l|=1),l<<=1,this.readModule(0,s-1,i,s)&&(l|=1),l<<=1,this.readModule(1,s-1,i,s)&&(l|=1),l<<=1,this.readModule(2,s-1,i,s)&&(l|=1),l<<=1,this.readModule(3,s-1,i,s)&&(l|=1),l}extractDataRegion(i){const s=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(i.getHeight()!==s)throw new O("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),f=this.version.getDataRegionSizeColumns(),g=s/u|0,y=l/f|0,x=g*u,C=y*f,I=new qe(C,x);for(let M=0;M<g;++M){const P=M*u;for(let j=0;j<y;++j){const Q=j*f;for(let $=0;$<u;++$){const ae=M*(u+2)+1+$,ge=P+$;for(let De=0;De<f;++De){const Ne=j*(f+2)+1+De;if(i.get(Ne,ae)){const Ie=Q+De;I.set(Ie,ge)}}}}}return I}}class Ci{constructor(i,s){this.numDataCodewords=i,this.codewords=s}static getDataBlocks(i,s){const l=s.getECBlocks();let u=0;const f=l.getECBlocks();for(let $ of f)u+=$.getCount();const g=new Array(u);let y=0;for(let $ of f)for(let ae=0;ae<$.getCount();ae++){const ge=$.getDataCodewords(),De=l.getECCodewords()+ge;g[y++]=new Ci(ge,new Uint8Array(De))}const C=g[0].codewords.length-l.getECCodewords(),I=C-1;let M=0;for(let $=0;$<I;$++)for(let ae=0;ae<y;ae++)g[ae].codewords[$]=i[M++];const P=s.getVersionNumber()===24,j=P?8:y;for(let $=0;$<j;$++)g[$].codewords[C-1]=i[M++];const Q=g[0].codewords.length;for(let $=C;$<Q;$++)for(let ae=0;ae<y;ae++){const ge=P?(ae+8)%y:ae,De=P&&ge>7?$-1:$;g[ge].codewords[De]=i[M++]}if(M!==i.length)throw new O;return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Sn{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new O(""+i);let s=0,l=this.bitOffset,u=this.byteOffset;const f=this.bytes;if(l>0){const g=8-l,y=i<g?i:g,x=g-y,C=255>>8-y<<x;s=(f[u]&C)>>x,i-=y,l+=y,l===8&&(l=0,u++)}if(i>0){for(;i>=8;)s=s<<8|f[u]&255,u++,i-=8;if(i>0){const g=8-i,y=255>>g<<g;s=s<<i|(f[u]&y)>>g,l+=i}}return this.bitOffset=l,this.byteOffset=u,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Ct;(function(D){D[D.PAD_ENCODE=0]="PAD_ENCODE",D[D.ASCII_ENCODE=1]="ASCII_ENCODE",D[D.C40_ENCODE=2]="C40_ENCODE",D[D.TEXT_ENCODE=3]="TEXT_ENCODE",D[D.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",D[D.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",D[D.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ct||(Ct={}));class vi{static decode(i){const s=new Sn(i),l=new H,u=new H,f=new Array;let g=Ct.ASCII_ENCODE;do if(g===Ct.ASCII_ENCODE)g=this.decodeAsciiSegment(s,l,u);else{switch(g){case Ct.C40_ENCODE:this.decodeC40Segment(s,l);break;case Ct.TEXT_ENCODE:this.decodeTextSegment(s,l);break;case Ct.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,l);break;case Ct.EDIFACT_ENCODE:this.decodeEdifactSegment(s,l);break;case Ct.BASE256_ENCODE:this.decodeBase256Segment(s,l,f);break;default:throw new k}g=Ct.ASCII_ENCODE}while(g!==Ct.PAD_ENCODE&&s.available()>0);return u.length()>0&&l.append(u.toString()),new qt(i,l.toString(),f.length===0?null:f,null)}static decodeAsciiSegment(i,s,l){let u=!1;do{let f=i.readBits(8);if(f===0)throw new k;if(f<=128)return u&&(f+=128),s.append(String.fromCharCode(f-1)),Ct.ASCII_ENCODE;if(f===129)return Ct.PAD_ENCODE;if(f<=229){const g=f-130;g<10&&s.append("0"),s.append(""+g)}else switch(f){case 230:return Ct.C40_ENCODE;case 231:return Ct.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:s.append("[)>05"),l.insert(0,"");break;case 237:s.append("[)>06"),l.insert(0,"");break;case 238:return Ct.ANSIX12_ENCODE;case 239:return Ct.TEXT_ENCODE;case 240:return Ct.EDIFACT_ENCODE;case 241:break;default:if(f!==254||i.available()!==0)throw new k;break}}while(i.available()>0);return Ct.ASCII_ENCODE}static decodeC40Segment(i,s){let l=!1;const u=[];let f=0;do{if(i.available()===8)return;const g=i.readBits(8);if(g===254)return;this.parseTwoBytes(g,i.readBits(8),u);for(let y=0;y<3;y++){const x=u[y];switch(f){case 0:if(x<3)f=x+1;else if(x<this.C40_BASIC_SET_CHARS.length){const C=this.C40_BASIC_SET_CHARS[x];l?(s.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):s.append(C)}else throw new k;break;case 1:l?(s.append(String.fromCharCode(x+128)),l=!1):s.append(String.fromCharCode(x)),f=0;break;case 2:if(x<this.C40_SHIFT2_SET_CHARS.length){const C=this.C40_SHIFT2_SET_CHARS[x];l?(s.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):s.append(C)}else switch(x){case 27:s.append("");break;case 30:l=!0;break;default:throw new k}f=0;break;case 3:l?(s.append(String.fromCharCode(x+224)),l=!1):s.append(String.fromCharCode(x+96)),f=0;break;default:throw new k}}}while(i.available()>0)}static decodeTextSegment(i,s){let l=!1,u=[],f=0;do{if(i.available()===8)return;const g=i.readBits(8);if(g===254)return;this.parseTwoBytes(g,i.readBits(8),u);for(let y=0;y<3;y++){const x=u[y];switch(f){case 0:if(x<3)f=x+1;else if(x<this.TEXT_BASIC_SET_CHARS.length){const C=this.TEXT_BASIC_SET_CHARS[x];l?(s.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):s.append(C)}else throw new k;break;case 1:l?(s.append(String.fromCharCode(x+128)),l=!1):s.append(String.fromCharCode(x)),f=0;break;case 2:if(x<this.TEXT_SHIFT2_SET_CHARS.length){const C=this.TEXT_SHIFT2_SET_CHARS[x];l?(s.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):s.append(C)}else switch(x){case 27:s.append("");break;case 30:l=!0;break;default:throw new k}f=0;break;case 3:if(x<this.TEXT_SHIFT3_SET_CHARS.length){const C=this.TEXT_SHIFT3_SET_CHARS[x];l?(s.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):s.append(C),f=0}else throw new k;break;default:throw new k}}}while(i.available()>0)}static decodeAnsiX12Segment(i,s){const l=[];do{if(i.available()===8)return;const u=i.readBits(8);if(u===254)return;this.parseTwoBytes(u,i.readBits(8),l);for(let f=0;f<3;f++){const g=l[f];switch(g){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(g<14)s.append(String.fromCharCode(g+44));else if(g<40)s.append(String.fromCharCode(g+51));else throw new k;break}}}while(i.available()>0)}static parseTwoBytes(i,s,l){let u=(i<<8)+s-1,f=Math.floor(u/1600);l[0]=f,u-=f*1600,f=Math.floor(u/40),l[1]=f,l[2]=u-f*40}static decodeEdifactSegment(i,s){do{if(i.available()<=16)return;for(let l=0;l<4;l++){let u=i.readBits(6);if(u===31){const f=8-i.getBitOffset();f!==8&&i.readBits(f);return}(u&32)===0&&(u|=64),s.append(String.fromCharCode(u))}}while(i.available()>0)}static decodeBase256Segment(i,s,l){let u=1+i.getByteOffset();const f=this.unrandomize255State(i.readBits(8),u++);let g;if(f===0?g=i.available()/8|0:f<250?g=f:g=250*(f-249)+this.unrandomize255State(i.readBits(8),u++),g<0)throw new k;const y=new Uint8Array(g);for(let x=0;x<g;x++){if(i.available()<8)throw new k;y[x]=this.unrandomize255State(i.readBits(8),u++)}l.push(y);try{s.append(X.decode(y,Y.ISO88591))}catch(x){throw new Li("Platform does not support required encoding: "+x.message)}}static unrandomize255State(i,s){const l=149*s%255+1,u=i-l;return u>=0?u:u+256}}vi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],vi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],vi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],vi.TEXT_SHIFT2_SET_CHARS=vi.C40_SHIFT2_SET_CHARS,vi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class bo{constructor(){this.rsDecoder=new pr(Tt.DATA_MATRIX_FIELD_256)}decode(i){const s=new ms(i),l=s.getVersion(),u=s.readCodewords(),f=Ci.getDataBlocks(u,l);let g=0;for(let C of f)g+=C.getNumDataCodewords();const y=new Uint8Array(g),x=f.length;for(let C=0;C<x;C++){const I=f[C],M=I.getCodewords(),P=I.getNumDataCodewords();this.correctErrors(M,P);for(let j=0;j<P;j++)y[j*x+C]=M[j]}return vi.decode(y)}correctErrors(i,s){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-s)}catch{throw new G}for(let u=0;u<s;u++)i[u]=l[u]}}class st{constructor(i){this.image=i,this.rectangleDetector=new En(this.image)}detect(){const i=this.rectangleDetector.detect();let s=this.detectSolid1(i);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new le;s=this.shiftToModuleCenter(s);const l=s[0],u=s[1],f=s[2],g=s[3];let y=this.transitionsBetween(l,g)+1,x=this.transitionsBetween(f,g)+1;(y&1)===1&&(y+=1),(x&1)===1&&(x+=1),4*y<7*x&&4*x<7*y&&(y=x=Math.max(y,x));let C=st.sampleGrid(this.image,l,u,f,g,y,x);return new xa(C,[l,u,f,g])}static shiftPoint(i,s,l){let u=(s.getX()-i.getX())/(l+1),f=(s.getY()-i.getY())/(l+1);return new Fe(i.getX()+u,i.getY()+f)}static moveAway(i,s,l){let u=i.getX(),f=i.getY();return u<s?u-=1:u+=1,f<l?f-=1:f+=1,new Fe(u,f)}detectSolid1(i){let s=i[0],l=i[1],u=i[3],f=i[2],g=this.transitionsBetween(s,l),y=this.transitionsBetween(l,u),x=this.transitionsBetween(u,f),C=this.transitionsBetween(f,s),I=g,M=[f,s,l,u];return I>y&&(I=y,M[0]=s,M[1]=l,M[2]=u,M[3]=f),I>x&&(I=x,M[0]=l,M[1]=u,M[2]=f,M[3]=s),I>C&&(M[0]=u,M[1]=f,M[2]=s,M[3]=l),M}detectSolid2(i){let s=i[0],l=i[1],u=i[2],f=i[3],g=this.transitionsBetween(s,f),y=st.shiftPoint(l,u,(g+1)*4),x=st.shiftPoint(u,l,(g+1)*4),C=this.transitionsBetween(y,s),I=this.transitionsBetween(x,f);return C<I?(i[0]=s,i[1]=l,i[2]=u,i[3]=f):(i[0]=l,i[1]=u,i[2]=f,i[3]=s),i}correctTopRight(i){let s=i[0],l=i[1],u=i[2],f=i[3],g=this.transitionsBetween(s,f),y=this.transitionsBetween(l,f),x=st.shiftPoint(s,l,(y+1)*4),C=st.shiftPoint(u,l,(g+1)*4);g=this.transitionsBetween(x,f),y=this.transitionsBetween(C,f);let I=new Fe(f.getX()+(u.getX()-l.getX())/(g+1),f.getY()+(u.getY()-l.getY())/(g+1)),M=new Fe(f.getX()+(s.getX()-l.getX())/(y+1),f.getY()+(s.getY()-l.getY())/(y+1));if(!this.isValid(I))return this.isValid(M)?M:null;if(!this.isValid(M))return I;let P=this.transitionsBetween(x,I)+this.transitionsBetween(C,I),j=this.transitionsBetween(x,M)+this.transitionsBetween(C,M);return P>j?I:M}shiftToModuleCenter(i){let s=i[0],l=i[1],u=i[2],f=i[3],g=this.transitionsBetween(s,f)+1,y=this.transitionsBetween(u,f)+1,x=st.shiftPoint(s,l,y*4),C=st.shiftPoint(u,l,g*4);g=this.transitionsBetween(x,f)+1,y=this.transitionsBetween(C,f)+1,(g&1)===1&&(g+=1),(y&1)===1&&(y+=1);let I=(s.getX()+l.getX()+u.getX()+f.getX())/4,M=(s.getY()+l.getY()+u.getY()+f.getY())/4;s=st.moveAway(s,I,M),l=st.moveAway(l,I,M),u=st.moveAway(u,I,M),f=st.moveAway(f,I,M);let P,j;return x=st.shiftPoint(s,l,y*4),x=st.shiftPoint(x,f,g*4),P=st.shiftPoint(l,s,y*4),P=st.shiftPoint(P,u,g*4),C=st.shiftPoint(u,f,y*4),C=st.shiftPoint(C,l,g*4),j=st.shiftPoint(f,u,y*4),j=st.shiftPoint(j,s,g*4),[x,P,C,j]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,s,l,u,f,g,y){return yi.getInstance().sampleGrid(i,g,y,.5,.5,g-.5,.5,g-.5,y-.5,.5,y-.5,s.getX(),s.getY(),f.getX(),f.getY(),u.getX(),u.getY(),l.getX(),l.getY())}transitionsBetween(i,s){let l=Math.trunc(i.getX()),u=Math.trunc(i.getY()),f=Math.trunc(s.getX()),g=Math.trunc(s.getY()),y=Math.abs(g-u)>Math.abs(f-l);if(y){let $=l;l=u,u=$,$=f,f=g,g=$}let x=Math.abs(f-l),C=Math.abs(g-u),I=-x/2,M=u<g?1:-1,P=l<f?1:-1,j=0,Q=this.image.get(y?u:l,y?l:u);for(let $=l,ae=u;$!==f;$+=P){let ge=this.image.get(y?ae:$,y?$:ae);if(ge!==Q&&(j++,Q=ge),I+=C,I>0){if(ae===g)break;ae+=M,I-=x}}return j}}class Bi{constructor(){this.decoder=new bo}decode(i,s=null){let l,u;if(s!=null&&s.has(xe.PURE_BARCODE)){const C=Bi.extractPureBits(i.getBlackMatrix());l=this.decoder.decode(C),u=Bi.NO_POINTS}else{const C=new st(i.getBlackMatrix()).detect();l=this.decoder.decode(C.getBits()),u=C.getPoints()}const f=l.getRawBytes(),g=new Pe(l.getText(),f,8*f.length,u,Ae.DATA_MATRIX,ie.currentTimeMillis()),y=l.getByteSegments();y!=null&&g.putMetadata(yt.BYTE_SEGMENTS,y);const x=l.getECLevel();return x!=null&&g.putMetadata(yt.ERROR_CORRECTION_LEVEL,x),g}reset(){}static extractPureBits(i){const s=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(s==null||l==null)throw new le;const u=this.moduleSize(s,i);let f=s[1];const g=l[1];let y=s[0];const C=(l[0]-y+1)/u,I=(g-f+1)/u;if(C<=0||I<=0)throw new le;const M=u/2;f+=M,y+=M;const P=new qe(C,I);for(let j=0;j<I;j++){const Q=f+j*u;for(let $=0;$<C;$++)i.get(y+$*u,Q)&&P.set($,j)}return P}static moduleSize(i,s){const l=s.getWidth();let u=i[0];const f=i[1];for(;u<l&&s.get(u,f);)u++;if(u===l)throw new le;const g=u-i[0];if(g===0)throw new le;return g}}Bi.NO_POINTS=[];class Ur extends Oe{constructor(i=500){super(new Bi,i)}}var rr;(function(D){D[D.L=0]="L",D[D.M=1]="M",D[D.Q=2]="Q",D[D.H=3]="H"})(rr||(rr={}));class Et{constructor(i,s,l){this.value=i,this.stringValue=s,this.bits=l,Et.FOR_BITS.set(l,this),Et.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return Et.L;case"M":return Et.M;case"Q":return Et.Q;case"H":return Et.H;default:throw new b(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof Et))return!1;const s=i;return this.value===s.value}static forBits(i){if(i<0||i>=Et.FOR_BITS.size)throw new O;return Et.FOR_BITS.get(i)}}Et.FOR_BITS=new Map,Et.FOR_VALUE=new Map,Et.L=new Et(rr.L,"L",1),Et.M=new Et(rr.M,"M",0),Et.Q=new Et(rr.Q,"Q",3),Et.H=new Et(rr.H,"H",2);class Ln{constructor(i){this.errorCorrectionLevel=Et.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,s){return me.bitCount(i^s)}static decodeFormatInformation(i,s){const l=Ln.doDecodeFormatInformation(i,s);return l!==null?l:Ln.doDecodeFormatInformation(i^Ln.FORMAT_INFO_MASK_QR,s^Ln.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,s){let l=Number.MAX_SAFE_INTEGER,u=0;for(const f of Ln.FORMAT_INFO_DECODE_LOOKUP){const g=f[0];if(g===i||g===s)return new Ln(f[1]);let y=Ln.numBitsDiffering(i,g);y<l&&(u=f[1],l=y),i!==s&&(y=Ln.numBitsDiffering(s,g),y<l&&(u=f[1],l=y))}return l<=3?new Ln(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof Ln))return!1;const s=i;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}Ln.FORMAT_INFO_MASK_QR=21522,Ln.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class oe{constructor(i,...s){this.ecCodewordsPerBlock=i,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const s=this.ecBlocks;for(const l of s)i+=l.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class z{constructor(i,s){this.count=i,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class He{constructor(i,s,...l){this.versionNumber=i,this.alignmentPatternCenters=s,this.ecBlocks=l;let u=0;const f=l[0].getECCodewordsPerBlock(),g=l[0].getECBlocks();for(const y of g)u+=y.getCount()*(y.getDataCodewords()+f);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new k;try{return this.getVersionForNumber((i-17)/4)}catch{throw new k}}static getVersionForNumber(i){if(i<1||i>40)throw new O;return He.VERSIONS[i-1]}static decodeVersionInformation(i){let s=Number.MAX_SAFE_INTEGER,l=0;for(let u=0;u<He.VERSION_DECODE_INFO.length;u++){const f=He.VERSION_DECODE_INFO[u];if(f===i)return He.getVersionForNumber(u+7);const g=Ln.numBitsDiffering(i,f);g<s&&(l=u+7,s=g)}return s<=3?He.getVersionForNumber(l):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),s=new qe(i);s.setRegion(0,0,9,9),s.setRegion(i-8,0,8,9),s.setRegion(0,i-8,9,8);const l=this.alignmentPatternCenters.length;for(let u=0;u<l;u++){const f=this.alignmentPatternCenters[u]-2;for(let g=0;g<l;g++)u===0&&(g===0||g===l-1)||u===l-1&&g===0||s.setRegion(this.alignmentPatternCenters[g]-2,f,5,5)}return s.setRegion(6,9,1,i-17),s.setRegion(9,6,i-17,1),this.versionNumber>6&&(s.setRegion(i-11,0,3,6),s.setRegion(0,i-11,6,3)),s}toString(){return""+this.versionNumber}}He.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),He.VERSIONS=[new He(1,new Int32Array(0),new oe(7,new z(1,19)),new oe(10,new z(1,16)),new oe(13,new z(1,13)),new oe(17,new z(1,9))),new He(2,Int32Array.from([6,18]),new oe(10,new z(1,34)),new oe(16,new z(1,28)),new oe(22,new z(1,22)),new oe(28,new z(1,16))),new He(3,Int32Array.from([6,22]),new oe(15,new z(1,55)),new oe(26,new z(1,44)),new oe(18,new z(2,17)),new oe(22,new z(2,13))),new He(4,Int32Array.from([6,26]),new oe(20,new z(1,80)),new oe(18,new z(2,32)),new oe(26,new z(2,24)),new oe(16,new z(4,9))),new He(5,Int32Array.from([6,30]),new oe(26,new z(1,108)),new oe(24,new z(2,43)),new oe(18,new z(2,15),new z(2,16)),new oe(22,new z(2,11),new z(2,12))),new He(6,Int32Array.from([6,34]),new oe(18,new z(2,68)),new oe(16,new z(4,27)),new oe(24,new z(4,19)),new oe(28,new z(4,15))),new He(7,Int32Array.from([6,22,38]),new oe(20,new z(2,78)),new oe(18,new z(4,31)),new oe(18,new z(2,14),new z(4,15)),new oe(26,new z(4,13),new z(1,14))),new He(8,Int32Array.from([6,24,42]),new oe(24,new z(2,97)),new oe(22,new z(2,38),new z(2,39)),new oe(22,new z(4,18),new z(2,19)),new oe(26,new z(4,14),new z(2,15))),new He(9,Int32Array.from([6,26,46]),new oe(30,new z(2,116)),new oe(22,new z(3,36),new z(2,37)),new oe(20,new z(4,16),new z(4,17)),new oe(24,new z(4,12),new z(4,13))),new He(10,Int32Array.from([6,28,50]),new oe(18,new z(2,68),new z(2,69)),new oe(26,new z(4,43),new z(1,44)),new oe(24,new z(6,19),new z(2,20)),new oe(28,new z(6,15),new z(2,16))),new He(11,Int32Array.from([6,30,54]),new oe(20,new z(4,81)),new oe(30,new z(1,50),new z(4,51)),new oe(28,new z(4,22),new z(4,23)),new oe(24,new z(3,12),new z(8,13))),new He(12,Int32Array.from([6,32,58]),new oe(24,new z(2,92),new z(2,93)),new oe(22,new z(6,36),new z(2,37)),new oe(26,new z(4,20),new z(6,21)),new oe(28,new z(7,14),new z(4,15))),new He(13,Int32Array.from([6,34,62]),new oe(26,new z(4,107)),new oe(22,new z(8,37),new z(1,38)),new oe(24,new z(8,20),new z(4,21)),new oe(22,new z(12,11),new z(4,12))),new He(14,Int32Array.from([6,26,46,66]),new oe(30,new z(3,115),new z(1,116)),new oe(24,new z(4,40),new z(5,41)),new oe(20,new z(11,16),new z(5,17)),new oe(24,new z(11,12),new z(5,13))),new He(15,Int32Array.from([6,26,48,70]),new oe(22,new z(5,87),new z(1,88)),new oe(24,new z(5,41),new z(5,42)),new oe(30,new z(5,24),new z(7,25)),new oe(24,new z(11,12),new z(7,13))),new He(16,Int32Array.from([6,26,50,74]),new oe(24,new z(5,98),new z(1,99)),new oe(28,new z(7,45),new z(3,46)),new oe(24,new z(15,19),new z(2,20)),new oe(30,new z(3,15),new z(13,16))),new He(17,Int32Array.from([6,30,54,78]),new oe(28,new z(1,107),new z(5,108)),new oe(28,new z(10,46),new z(1,47)),new oe(28,new z(1,22),new z(15,23)),new oe(28,new z(2,14),new z(17,15))),new He(18,Int32Array.from([6,30,56,82]),new oe(30,new z(5,120),new z(1,121)),new oe(26,new z(9,43),new z(4,44)),new oe(28,new z(17,22),new z(1,23)),new oe(28,new z(2,14),new z(19,15))),new He(19,Int32Array.from([6,30,58,86]),new oe(28,new z(3,113),new z(4,114)),new oe(26,new z(3,44),new z(11,45)),new oe(26,new z(17,21),new z(4,22)),new oe(26,new z(9,13),new z(16,14))),new He(20,Int32Array.from([6,34,62,90]),new oe(28,new z(3,107),new z(5,108)),new oe(26,new z(3,41),new z(13,42)),new oe(30,new z(15,24),new z(5,25)),new oe(28,new z(15,15),new z(10,16))),new He(21,Int32Array.from([6,28,50,72,94]),new oe(28,new z(4,116),new z(4,117)),new oe(26,new z(17,42)),new oe(28,new z(17,22),new z(6,23)),new oe(30,new z(19,16),new z(6,17))),new He(22,Int32Array.from([6,26,50,74,98]),new oe(28,new z(2,111),new z(7,112)),new oe(28,new z(17,46)),new oe(30,new z(7,24),new z(16,25)),new oe(24,new z(34,13))),new He(23,Int32Array.from([6,30,54,78,102]),new oe(30,new z(4,121),new z(5,122)),new oe(28,new z(4,47),new z(14,48)),new oe(30,new z(11,24),new z(14,25)),new oe(30,new z(16,15),new z(14,16))),new He(24,Int32Array.from([6,28,54,80,106]),new oe(30,new z(6,117),new z(4,118)),new oe(28,new z(6,45),new z(14,46)),new oe(30,new z(11,24),new z(16,25)),new oe(30,new z(30,16),new z(2,17))),new He(25,Int32Array.from([6,32,58,84,110]),new oe(26,new z(8,106),new z(4,107)),new oe(28,new z(8,47),new z(13,48)),new oe(30,new z(7,24),new z(22,25)),new oe(30,new z(22,15),new z(13,16))),new He(26,Int32Array.from([6,30,58,86,114]),new oe(28,new z(10,114),new z(2,115)),new oe(28,new z(19,46),new z(4,47)),new oe(28,new z(28,22),new z(6,23)),new oe(30,new z(33,16),new z(4,17))),new He(27,Int32Array.from([6,34,62,90,118]),new oe(30,new z(8,122),new z(4,123)),new oe(28,new z(22,45),new z(3,46)),new oe(30,new z(8,23),new z(26,24)),new oe(30,new z(12,15),new z(28,16))),new He(28,Int32Array.from([6,26,50,74,98,122]),new oe(30,new z(3,117),new z(10,118)),new oe(28,new z(3,45),new z(23,46)),new oe(30,new z(4,24),new z(31,25)),new oe(30,new z(11,15),new z(31,16))),new He(29,Int32Array.from([6,30,54,78,102,126]),new oe(30,new z(7,116),new z(7,117)),new oe(28,new z(21,45),new z(7,46)),new oe(30,new z(1,23),new z(37,24)),new oe(30,new z(19,15),new z(26,16))),new He(30,Int32Array.from([6,26,52,78,104,130]),new oe(30,new z(5,115),new z(10,116)),new oe(28,new z(19,47),new z(10,48)),new oe(30,new z(15,24),new z(25,25)),new oe(30,new z(23,15),new z(25,16))),new He(31,Int32Array.from([6,30,56,82,108,134]),new oe(30,new z(13,115),new z(3,116)),new oe(28,new z(2,46),new z(29,47)),new oe(30,new z(42,24),new z(1,25)),new oe(30,new z(23,15),new z(28,16))),new He(32,Int32Array.from([6,34,60,86,112,138]),new oe(30,new z(17,115)),new oe(28,new z(10,46),new z(23,47)),new oe(30,new z(10,24),new z(35,25)),new oe(30,new z(19,15),new z(35,16))),new He(33,Int32Array.from([6,30,58,86,114,142]),new oe(30,new z(17,115),new z(1,116)),new oe(28,new z(14,46),new z(21,47)),new oe(30,new z(29,24),new z(19,25)),new oe(30,new z(11,15),new z(46,16))),new He(34,Int32Array.from([6,34,62,90,118,146]),new oe(30,new z(13,115),new z(6,116)),new oe(28,new z(14,46),new z(23,47)),new oe(30,new z(44,24),new z(7,25)),new oe(30,new z(59,16),new z(1,17))),new He(35,Int32Array.from([6,30,54,78,102,126,150]),new oe(30,new z(12,121),new z(7,122)),new oe(28,new z(12,47),new z(26,48)),new oe(30,new z(39,24),new z(14,25)),new oe(30,new z(22,15),new z(41,16))),new He(36,Int32Array.from([6,24,50,76,102,128,154]),new oe(30,new z(6,121),new z(14,122)),new oe(28,new z(6,47),new z(34,48)),new oe(30,new z(46,24),new z(10,25)),new oe(30,new z(2,15),new z(64,16))),new He(37,Int32Array.from([6,28,54,80,106,132,158]),new oe(30,new z(17,122),new z(4,123)),new oe(28,new z(29,46),new z(14,47)),new oe(30,new z(49,24),new z(10,25)),new oe(30,new z(24,15),new z(46,16))),new He(38,Int32Array.from([6,32,58,84,110,136,162]),new oe(30,new z(4,122),new z(18,123)),new oe(28,new z(13,46),new z(32,47)),new oe(30,new z(48,24),new z(14,25)),new oe(30,new z(42,15),new z(32,16))),new He(39,Int32Array.from([6,26,54,82,110,138,166]),new oe(30,new z(20,117),new z(4,118)),new oe(28,new z(40,47),new z(7,48)),new oe(30,new z(43,24),new z(22,25)),new oe(30,new z(10,15),new z(67,16))),new He(40,Int32Array.from([6,30,58,86,114,142,170]),new oe(30,new z(19,118),new z(6,119)),new oe(28,new z(18,47),new z(31,48)),new oe(30,new z(34,24),new z(34,25)),new oe(30,new z(20,15),new z(61,16)))];var Pn;(function(D){D[D.DATA_MASK_000=0]="DATA_MASK_000",D[D.DATA_MASK_001=1]="DATA_MASK_001",D[D.DATA_MASK_010=2]="DATA_MASK_010",D[D.DATA_MASK_011=3]="DATA_MASK_011",D[D.DATA_MASK_100=4]="DATA_MASK_100",D[D.DATA_MASK_101=5]="DATA_MASK_101",D[D.DATA_MASK_110=6]="DATA_MASK_110",D[D.DATA_MASK_111=7]="DATA_MASK_111"})(Pn||(Pn={}));class Xn{constructor(i,s){this.value=i,this.isMasked=s}unmaskBitMatrix(i,s){for(let l=0;l<s;l++)for(let u=0;u<s;u++)this.isMasked(l,u)&&i.flip(u,l)}}Xn.values=new Map([[Pn.DATA_MASK_000,new Xn(Pn.DATA_MASK_000,(D,i)=>(D+i&1)===0)],[Pn.DATA_MASK_001,new Xn(Pn.DATA_MASK_001,(D,i)=>(D&1)===0)],[Pn.DATA_MASK_010,new Xn(Pn.DATA_MASK_010,(D,i)=>i%3===0)],[Pn.DATA_MASK_011,new Xn(Pn.DATA_MASK_011,(D,i)=>(D+i)%3===0)],[Pn.DATA_MASK_100,new Xn(Pn.DATA_MASK_100,(D,i)=>(Math.floor(D/2)+Math.floor(i/3)&1)===0)],[Pn.DATA_MASK_101,new Xn(Pn.DATA_MASK_101,(D,i)=>D*i%6===0)],[Pn.DATA_MASK_110,new Xn(Pn.DATA_MASK_110,(D,i)=>D*i%6<3)],[Pn.DATA_MASK_111,new Xn(Pn.DATA_MASK_111,(D,i)=>(D+i+D*i%3&1)===0)]]);class ki{constructor(i){const s=i.getHeight();if(s<21||(s&3)!==1)throw new k;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let f=0;f<6;f++)i=this.copyBit(f,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let f=5;f>=0;f--)i=this.copyBit(8,f,i);const s=this.bitMatrix.getHeight();let l=0;const u=s-7;for(let f=s-1;f>=u;f--)l=this.copyBit(8,f,l);for(let f=s-8;f<s;f++)l=this.copyBit(f,8,l);if(this.parsedFormatInfo=Ln.decodeFormatInformation(i,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new k}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),s=Math.floor((i-17)/4);if(s<=6)return He.getVersionForNumber(s);let l=0;const u=i-11;for(let g=5;g>=0;g--)for(let y=i-9;y>=u;y--)l=this.copyBit(y,g,l);let f=He.decodeVersionInformation(l);if(f!==null&&f.getDimensionForVersion()===i)return this.parsedVersion=f,f;l=0;for(let g=5;g>=0;g--)for(let y=i-9;y>=u;y--)l=this.copyBit(g,y,l);if(f=He.decodeVersionInformation(l),f!==null&&f.getDimensionForVersion()===i)return this.parsedVersion=f,f;throw new k}copyBit(i,s,l){return(this.isMirror?this.bitMatrix.get(s,i):this.bitMatrix.get(i,s))?l<<1|1:l<<1}readCodewords(){const i=this.readFormatInformation(),s=this.readVersion(),l=Xn.values.get(i.getDataMask()),u=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,u);const f=s.buildFunctionPattern();let g=!0;const y=new Uint8Array(s.getTotalCodewords());let x=0,C=0,I=0;for(let M=u-1;M>0;M-=2){M===6&&M--;for(let P=0;P<u;P++){const j=g?u-1-P:P;for(let Q=0;Q<2;Q++)f.get(M-Q,j)||(I++,C<<=1,this.bitMatrix.get(M-Q,j)&&(C|=1),I===8&&(y[x++]=C,I=0,C=0))}g=!g}if(x!==s.getTotalCodewords())throw new k;return y}remask(){if(this.parsedFormatInfo===null)return;const i=Xn.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,s)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let s=0,l=i.getWidth();s<l;s++)for(let u=s+1,f=i.getHeight();u<f;u++)i.get(s,u)!==i.get(u,s)&&(i.flip(u,s),i.flip(s,u))}}class Ca{constructor(i,s){this.numDataCodewords=i,this.codewords=s}static getDataBlocks(i,s,l){if(i.length!==s.getTotalCodewords())throw new O;const u=s.getECBlocksForLevel(l);let f=0;const g=u.getECBlocks();for(const Q of g)f+=Q.getCount();const y=new Array(f);let x=0;for(const Q of g)for(let $=0;$<Q.getCount();$++){const ae=Q.getDataCodewords(),ge=u.getECCodewordsPerBlock()+ae;y[x++]=new Ca(ae,new Uint8Array(ge))}const C=y[0].codewords.length;let I=y.length-1;for(;I>=0&&y[I].codewords.length!==C;)I--;I++;const M=C-u.getECCodewordsPerBlock();let P=0;for(let Q=0;Q<M;Q++)for(let $=0;$<x;$++)y[$].codewords[Q]=i[P++];for(let Q=I;Q<x;Q++)y[Q].codewords[M]=i[P++];const j=y[0].codewords.length;for(let Q=M;Q<j;Q++)for(let $=0;$<x;$++){const ae=$<I?Q:Q+1;y[$].codewords[ae]=i[P++]}return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var hi;(function(D){D[D.TERMINATOR=0]="TERMINATOR",D[D.NUMERIC=1]="NUMERIC",D[D.ALPHANUMERIC=2]="ALPHANUMERIC",D[D.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",D[D.BYTE=4]="BYTE",D[D.ECI=5]="ECI",D[D.KANJI=6]="KANJI",D[D.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",D[D.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",D[D.HANZI=9]="HANZI"})(hi||(hi={}));class Ye{constructor(i,s,l,u){this.value=i,this.stringValue=s,this.characterCountBitsForVersions=l,this.bits=u,Ye.FOR_BITS.set(u,this),Ye.FOR_VALUE.set(i,this)}static forBits(i){const s=Ye.FOR_BITS.get(i);if(s===void 0)throw new O;return s}getCharacterCountBits(i){const s=i.getVersionNumber();let l;return s<=9?l=0:s<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof Ye))return!1;const s=i;return this.value===s.value}toString(){return this.stringValue}}Ye.FOR_BITS=new Map,Ye.FOR_VALUE=new Map,Ye.TERMINATOR=new Ye(hi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ye.NUMERIC=new Ye(hi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ye.ALPHANUMERIC=new Ye(hi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ye.STRUCTURED_APPEND=new Ye(hi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ye.BYTE=new Ye(hi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ye.ECI=new Ye(hi.ECI,"ECI",Int32Array.from([0,0,0]),7),Ye.KANJI=new Ye(hi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ye.FNC1_FIRST_POSITION=new Ye(hi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ye.FNC1_SECOND_POSITION=new Ye(hi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ye.HANZI=new Ye(hi.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class $t{static decode(i,s,l,u){const f=new Sn(i);let g=new H;const y=new Array;let x=-1,C=-1;try{let I=null,M=!1,P;do{if(f.available()<4)P=Ye.TERMINATOR;else{const j=f.readBits(4);P=Ye.forBits(j)}switch(P){case Ye.TERMINATOR:break;case Ye.FNC1_FIRST_POSITION:case Ye.FNC1_SECOND_POSITION:M=!0;break;case Ye.STRUCTURED_APPEND:if(f.available()<16)throw new k;x=f.readBits(8),C=f.readBits(8);break;case Ye.ECI:const j=$t.parseECIValue(f);if(I=L.getCharacterSetECIByValue(j),I===null)throw new k;break;case Ye.HANZI:const Q=f.readBits(4),$=f.readBits(P.getCharacterCountBits(s));Q===$t.GB2312_SUBSET&&$t.decodeHanziSegment(f,g,$);break;default:const ae=f.readBits(P.getCharacterCountBits(s));switch(P){case Ye.NUMERIC:$t.decodeNumericSegment(f,g,ae);break;case Ye.ALPHANUMERIC:$t.decodeAlphanumericSegment(f,g,ae,M);break;case Ye.BYTE:$t.decodeByteSegment(f,g,ae,I,y,u);break;case Ye.KANJI:$t.decodeKanjiSegment(f,g,ae);break;default:throw new k}break}}while(P!==Ye.TERMINATOR)}catch{throw new k}return new qt(i,g.toString(),y.length===0?null:y,l===null?null:l.toString(),x,C)}static decodeHanziSegment(i,s,l){if(l*13>i.available())throw new k;const u=new Uint8Array(2*l);let f=0;for(;l>0;){const g=i.readBits(13);let y=g/96<<8&4294967295|g%96;y<959?y+=41377:y+=42657,u[f]=y>>8&255,u[f+1]=y&255,f+=2,l--}try{s.append(X.decode(u,Y.GB2312))}catch(g){throw new k(g)}}static decodeKanjiSegment(i,s,l){if(l*13>i.available())throw new k;const u=new Uint8Array(2*l);let f=0;for(;l>0;){const g=i.readBits(13);let y=g/192<<8&4294967295|g%192;y<7936?y+=33088:y+=49472,u[f]=y>>8,u[f+1]=y,f+=2,l--}try{s.append(X.decode(u,Y.SHIFT_JIS))}catch(g){throw new k(g)}}static decodeByteSegment(i,s,l,u,f,g){if(8*l>i.available())throw new k;const y=new Uint8Array(l);for(let C=0;C<l;C++)y[C]=i.readBits(8);let x;u===null?x=Y.guessEncoding(y,g):x=u.getName();try{s.append(X.decode(y,x))}catch(C){throw new k(C)}f.push(y)}static toAlphaNumericChar(i){if(i>=$t.ALPHANUMERIC_CHARS.length)throw new k;return $t.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,s,l,u){const f=s.length();for(;l>1;){if(i.available()<11)throw new k;const g=i.readBits(11);s.append($t.toAlphaNumericChar(Math.floor(g/45))),s.append($t.toAlphaNumericChar(g%45)),l-=2}if(l===1){if(i.available()<6)throw new k;s.append($t.toAlphaNumericChar(i.readBits(6)))}if(u)for(let g=f;g<s.length();g++)s.charAt(g)==="%"&&(g<s.length()-1&&s.charAt(g+1)==="%"?s.deleteCharAt(g+1):s.setCharAt(g,""))}static decodeNumericSegment(i,s,l){for(;l>=3;){if(i.available()<10)throw new k;const u=i.readBits(10);if(u>=1e3)throw new k;s.append($t.toAlphaNumericChar(Math.floor(u/100))),s.append($t.toAlphaNumericChar(Math.floor(u/10)%10)),s.append($t.toAlphaNumericChar(u%10)),l-=3}if(l===2){if(i.available()<7)throw new k;const u=i.readBits(7);if(u>=100)throw new k;s.append($t.toAlphaNumericChar(Math.floor(u/10))),s.append($t.toAlphaNumericChar(u%10))}else if(l===1){if(i.available()<4)throw new k;const u=i.readBits(4);if(u>=10)throw new k;s.append($t.toAlphaNumericChar(u))}}static parseECIValue(i){const s=i.readBits(8);if((s&128)===0)return s&127;if((s&192)===128){const l=i.readBits(8);return(s&63)<<8&4294967295|l}if((s&224)===192){const l=i.readBits(16);return(s&31)<<16&4294967295|l}throw new k}}$t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",$t.GB2312_SUBSET=1;class Io{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const s=i[0];i[0]=i[2],i[2]=s}}class ps{constructor(){this.rsDecoder=new pr(Tt.QR_CODE_FIELD_256)}decodeBooleanArray(i,s){return this.decodeBitMatrix(qe.parseFromBooleanArray(i),s)}decodeBitMatrix(i,s){const l=new ki(i);let u=null;try{return this.decodeBitMatrixParser(l,s)}catch(f){u=f}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const f=this.decodeBitMatrixParser(l,s);return f.setOther(new Io(!0)),f}catch(f){throw u!==null?u:f}}decodeBitMatrixParser(i,s){const l=i.readVersion(),u=i.readFormatInformation().getErrorCorrectionLevel(),f=i.readCodewords(),g=Ca.getDataBlocks(f,l,u);let y=0;for(const I of g)y+=I.getNumDataCodewords();const x=new Uint8Array(y);let C=0;for(const I of g){const M=I.getCodewords(),P=I.getNumDataCodewords();this.correctErrors(M,P);for(let j=0;j<P;j++)x[C++]=M[j]}return $t.decode(x,l,u,s)}correctErrors(i,s){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-s)}catch{throw new G}for(let u=0;u<s;u++)i[u]=l[u]}}class ys extends Fe{constructor(i,s,l){super(i,s),this.estimatedModuleSize=l}aboutEquals(i,s,l){if(Math.abs(s-this.getY())<=i&&Math.abs(l-this.getX())<=i){const u=Math.abs(i-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(i,s,l){const u=(this.getX()+s)/2,f=(this.getY()+i)/2,g=(this.estimatedModuleSize+l)/2;return new ys(u,f,g)}}class Vi{constructor(i,s,l,u,f,g,y){this.image=i,this.startX=s,this.startY=l,this.width=u,this.height=f,this.moduleSize=g,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,s=this.height,l=this.width,u=i+l,f=this.startY+s/2,g=new Int32Array(3),y=this.image;for(let x=0;x<s;x++){const C=f+((x&1)===0?Math.floor((x+1)/2):-Math.floor((x+1)/2));g[0]=0,g[1]=0,g[2]=0;let I=i;for(;I<u&&!y.get(I,C);)I++;let M=0;for(;I<u;){if(y.get(I,C))if(M===1)g[1]++;else if(M===2){if(this.foundPatternCross(g)){const P=this.handlePossibleCenter(g,C,I);if(P!==null)return P}g[0]=g[2],g[1]=1,g[2]=0,M=1}else g[++M]++;else M===1&&M++,g[M]++;I++}if(this.foundPatternCross(g)){const P=this.handlePossibleCenter(g,C,u);if(P!==null)return P}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new le}static centerFromEnd(i,s){return s-i[2]-i[1]/2}foundPatternCross(i){const s=this.moduleSize,l=s/2;for(let u=0;u<3;u++)if(Math.abs(s-i[u])>=l)return!1;return!0}crossCheckVertical(i,s,l,u){const f=this.image,g=f.getHeight(),y=this.crossCheckStateCount;y[0]=0,y[1]=0,y[2]=0;let x=i;for(;x>=0&&f.get(s,x)&&y[1]<=l;)y[1]++,x--;if(x<0||y[1]>l)return NaN;for(;x>=0&&!f.get(s,x)&&y[0]<=l;)y[0]++,x--;if(y[0]>l)return NaN;for(x=i+1;x<g&&f.get(s,x)&&y[1]<=l;)y[1]++,x++;if(x===g||y[1]>l)return NaN;for(;x<g&&!f.get(s,x)&&y[2]<=l;)y[2]++,x++;if(y[2]>l)return NaN;const C=y[0]+y[1]+y[2];return 5*Math.abs(C-u)>=2*u?NaN:this.foundPatternCross(y)?Vi.centerFromEnd(y,x):NaN}handlePossibleCenter(i,s,l){const u=i[0]+i[1]+i[2],f=Vi.centerFromEnd(i,l),g=this.crossCheckVertical(s,f,2*i[1],u);if(!isNaN(g)){const y=(i[0]+i[1]+i[2])/3;for(const C of this.possibleCenters)if(C.aboutEquals(y,g,f))return C.combineEstimate(g,f,y);const x=new ys(f,g,y);this.possibleCenters.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return null}}class Vs extends Fe{constructor(i,s,l,u){super(i,s),this.estimatedModuleSize=l,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,s,l){if(Math.abs(s-this.getY())<=i&&Math.abs(l-this.getX())<=i){const u=Math.abs(i-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(i,s,l){const u=this.count+1,f=(this.count*this.getX()+s)/u,g=(this.count*this.getY()+i)/u,y=(this.count*this.estimatedModuleSize+l)/u;return new Vs(f,g,y,u)}}class sr{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class dn{constructor(i,s){this.image=i,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const s=i!=null&&i.get(xe.TRY_HARDER)!==void 0,l=i!=null&&i.get(xe.PURE_BARCODE)!==void 0,u=this.image,f=u.getHeight(),g=u.getWidth();let y=Math.floor(3*f/(4*dn.MAX_MODULES));(y<dn.MIN_SKIP||s)&&(y=dn.MIN_SKIP);let x=!1;const C=new Int32Array(5);for(let M=y-1;M<f&&!x;M+=y){C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0;let P=0;for(let j=0;j<g;j++)if(u.get(j,M))(P&1)===1&&P++,C[P]++;else if((P&1)===0)if(P===4)if(dn.foundPatternCross(C)){if(this.handlePossibleCenter(C,M,j,l)===!0)if(y=2,this.hasSkipped===!0)x=this.haveMultiplyConfirmedCenters();else{const $=this.findRowSkip();$>C[2]&&(M+=$-C[2]-y,j=g-1)}else{C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,P=3;continue}P=0,C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0}else C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,P=3;else C[++P]++;else C[P]++;dn.foundPatternCross(C)&&this.handlePossibleCenter(C,M,g,l)===!0&&(y=C[0],this.hasSkipped&&(x=this.haveMultiplyConfirmedCenters()))}const I=this.selectBestPatterns();return Fe.orderBestPatterns(I),new sr(I)}static centerFromEnd(i,s){return s-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let s=0;for(let f=0;f<5;f++){const g=i[f];if(g===0)return!1;s+=g}if(s<7)return!1;const l=s/7,u=l/2;return Math.abs(l-i[0])<u&&Math.abs(l-i[1])<u&&Math.abs(3*l-i[2])<3*u&&Math.abs(l-i[3])<u&&Math.abs(l-i[4])<u}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,s,l,u){const f=this.getCrossCheckStateCount();let g=0;const y=this.image;for(;i>=g&&s>=g&&y.get(s-g,i-g);)f[2]++,g++;if(i<g||s<g)return!1;for(;i>=g&&s>=g&&!y.get(s-g,i-g)&&f[1]<=l;)f[1]++,g++;if(i<g||s<g||f[1]>l)return!1;for(;i>=g&&s>=g&&y.get(s-g,i-g)&&f[0]<=l;)f[0]++,g++;if(f[0]>l)return!1;const x=y.getHeight(),C=y.getWidth();for(g=1;i+g<x&&s+g<C&&y.get(s+g,i+g);)f[2]++,g++;if(i+g>=x||s+g>=C)return!1;for(;i+g<x&&s+g<C&&!y.get(s+g,i+g)&&f[3]<l;)f[3]++,g++;if(i+g>=x||s+g>=C||f[3]>=l)return!1;for(;i+g<x&&s+g<C&&y.get(s+g,i+g)&&f[4]<l;)f[4]++,g++;if(f[4]>=l)return!1;const I=f[0]+f[1]+f[2]+f[3]+f[4];return Math.abs(I-u)<2*u&&dn.foundPatternCross(f)}crossCheckVertical(i,s,l,u){const f=this.image,g=f.getHeight(),y=this.getCrossCheckStateCount();let x=i;for(;x>=0&&f.get(s,x);)y[2]++,x--;if(x<0)return NaN;for(;x>=0&&!f.get(s,x)&&y[1]<=l;)y[1]++,x--;if(x<0||y[1]>l)return NaN;for(;x>=0&&f.get(s,x)&&y[0]<=l;)y[0]++,x--;if(y[0]>l)return NaN;for(x=i+1;x<g&&f.get(s,x);)y[2]++,x++;if(x===g)return NaN;for(;x<g&&!f.get(s,x)&&y[3]<l;)y[3]++,x++;if(x===g||y[3]>=l)return NaN;for(;x<g&&f.get(s,x)&&y[4]<l;)y[4]++,x++;if(y[4]>=l)return NaN;const C=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(C-u)>=2*u?NaN:dn.foundPatternCross(y)?dn.centerFromEnd(y,x):NaN}crossCheckHorizontal(i,s,l,u){const f=this.image,g=f.getWidth(),y=this.getCrossCheckStateCount();let x=i;for(;x>=0&&f.get(x,s);)y[2]++,x--;if(x<0)return NaN;for(;x>=0&&!f.get(x,s)&&y[1]<=l;)y[1]++,x--;if(x<0||y[1]>l)return NaN;for(;x>=0&&f.get(x,s)&&y[0]<=l;)y[0]++,x--;if(y[0]>l)return NaN;for(x=i+1;x<g&&f.get(x,s);)y[2]++,x++;if(x===g)return NaN;for(;x<g&&!f.get(x,s)&&y[3]<l;)y[3]++,x++;if(x===g||y[3]>=l)return NaN;for(;x<g&&f.get(x,s)&&y[4]<l;)y[4]++,x++;if(y[4]>=l)return NaN;const C=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(C-u)>=u?NaN:dn.foundPatternCross(y)?dn.centerFromEnd(y,x):NaN}handlePossibleCenter(i,s,l,u){const f=i[0]+i[1]+i[2]+i[3]+i[4];let g=dn.centerFromEnd(i,l),y=this.crossCheckVertical(s,Math.floor(g),i[2],f);if(!isNaN(y)&&(g=this.crossCheckHorizontal(Math.floor(g),Math.floor(y),i[2],f),!isNaN(g)&&(!u||this.crossCheckDiagonal(Math.floor(y),Math.floor(g),i[2],f)))){const x=f/7;let C=!1;const I=this.possibleCenters;for(let M=0,P=I.length;M<P;M++){const j=I[M];if(j.aboutEquals(x,y,g)){I[M]=j.combineEstimate(y,g,x),C=!0;break}}if(!C){const M=new Vs(g,y,x);I.push(M),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(M)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const l of this.possibleCenters)if(l.getCount()>=dn.CENTER_QUORUM)if(s==null)s=l;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-l.getX())-Math.abs(s.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,s=0;const l=this.possibleCenters.length;for(const g of this.possibleCenters)g.getCount()>=dn.CENTER_QUORUM&&(i++,s+=g.getEstimatedModuleSize());if(i<3)return!1;const u=s/l;let f=0;for(const g of this.possibleCenters)f+=Math.abs(g.getEstimatedModuleSize()-u);return f<=.05*s}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new le;const s=this.possibleCenters;let l;if(i>3){let u=0,f=0;for(const x of this.possibleCenters){const C=x.getEstimatedModuleSize();u+=C,f+=C*C}l=u/i;let g=Math.sqrt(f/i-l*l);s.sort((x,C)=>{const I=Math.abs(C.getEstimatedModuleSize()-l),M=Math.abs(x.getEstimatedModuleSize()-l);return I<M?-1:I>M?1:0});const y=Math.max(.2*l,g);for(let x=0;x<s.length&&s.length>3;x++){const C=s[x];Math.abs(C.getEstimatedModuleSize()-l)>y&&(s.splice(x,1),x--)}}if(s.length>3){let u=0;for(const f of s)u+=f.getEstimatedModuleSize();l=u/s.length,s.sort((f,g)=>{if(g.getCount()===f.getCount()){const y=Math.abs(g.getEstimatedModuleSize()-l),x=Math.abs(f.getEstimatedModuleSize()-l);return y<x?1:y>x?-1:0}else return g.getCount()-f.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}dn.CENTER_QUORUM=2,dn.MIN_SKIP=3,dn.MAX_MODULES=57;class Ui{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(xe.NEED_RESULT_POINT_CALLBACK);const l=new dn(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(l)}processFinderPatternInfo(i){const s=i.getTopLeft(),l=i.getTopRight(),u=i.getBottomLeft(),f=this.calculateModuleSize(s,l,u);if(f<1)throw new le("No pattern found in proccess finder.");const g=Ui.computeDimension(s,l,u,f),y=He.getProvisionalVersionForDimension(g),x=y.getDimensionForVersion()-7;let C=null;if(y.getAlignmentPatternCenters().length>0){const j=l.getX()-s.getX()+u.getX(),Q=l.getY()-s.getY()+u.getY(),$=1-3/x,ae=Math.floor(s.getX()+$*(j-s.getX())),ge=Math.floor(s.getY()+$*(Q-s.getY()));for(let De=4;De<=16;De<<=1)try{C=this.findAlignmentInRegion(f,ae,ge,De);break}catch(Ne){if(!(Ne instanceof le))throw Ne}}const I=Ui.createTransform(s,l,u,C,g),M=Ui.sampleGrid(this.image,I,g);let P;return C===null?P=[u,s,l]:P=[u,s,l,C],new xa(M,P)}static createTransform(i,s,l,u,f){const g=f-3.5;let y,x,C,I;return u!==null?(y=u.getX(),x=u.getY(),C=g-3,I=C):(y=s.getX()-i.getX()+l.getX(),x=s.getY()-i.getY()+l.getY(),C=g,I=g),pi.quadrilateralToQuadrilateral(3.5,3.5,g,3.5,C,I,3.5,g,i.getX(),i.getY(),s.getX(),s.getY(),y,x,l.getX(),l.getY())}static sampleGrid(i,s,l){return yi.getInstance().sampleGridWithTransform(i,l,l,s)}static computeDimension(i,s,l,u){const f=tt.round(Fe.distance(i,s)/u),g=tt.round(Fe.distance(i,l)/u);let y=Math.floor((f+g)/2)+7;switch(y&3){case 0:y++;break;case 2:y--;break;case 3:throw new le("Dimensions could be not found.")}return y}calculateModuleSize(i,s,l){return(this.calculateModuleSizeOneWay(i,s)+this.calculateModuleSizeOneWay(i,l))/2}calculateModuleSizeOneWay(i,s){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(s.getX()),Math.floor(s.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(l)?u/7:isNaN(u)?l/7:(l+u)/14}sizeOfBlackWhiteBlackRunBothWays(i,s,l,u){let f=this.sizeOfBlackWhiteBlackRun(i,s,l,u),g=1,y=i-(l-i);y<0?(g=i/(i-y),y=0):y>=this.image.getWidth()&&(g=(this.image.getWidth()-1-i)/(y-i),y=this.image.getWidth()-1);let x=Math.floor(s-(u-s)*g);return g=1,x<0?(g=s/(s-x),x=0):x>=this.image.getHeight()&&(g=(this.image.getHeight()-1-s)/(x-s),x=this.image.getHeight()-1),y=Math.floor(i+(y-i)*g),f+=this.sizeOfBlackWhiteBlackRun(i,s,y,x),f-1}sizeOfBlackWhiteBlackRun(i,s,l,u){const f=Math.abs(u-s)>Math.abs(l-i);if(f){let j=i;i=s,s=j,j=l,l=u,u=j}const g=Math.abs(l-i),y=Math.abs(u-s);let x=-g/2;const C=i<l?1:-1,I=s<u?1:-1;let M=0;const P=l+C;for(let j=i,Q=s;j!==P;j+=C){const $=f?Q:j,ae=f?j:Q;if(M===1===this.image.get($,ae)){if(M===2)return tt.distance(j,Q,i,s);M++}if(x+=y,x>0){if(Q===u)break;Q+=I,x-=g}}return M===2?tt.distance(l+C,u,i,s):NaN}findAlignmentInRegion(i,s,l,u){const f=Math.floor(u*i),g=Math.max(0,s-f),y=Math.min(this.image.getWidth()-1,s+f);if(y-g<i*3)throw new le("Alignment top exceeds estimated module size.");const x=Math.max(0,l-f),C=Math.min(this.image.getHeight()-1,l+f);if(C-x<i*3)throw new le("Alignment bottom exceeds estimated module size.");return new Vi(this.image,g,x,y-g,C-x,i,this.resultPointCallback).find()}}class Fi{constructor(){this.decoder=new ps}getDecoder(){return this.decoder}decode(i,s){let l,u;if(s!=null&&s.get(xe.PURE_BARCODE)!==void 0){const x=Fi.extractPureBits(i.getBlackMatrix());l=this.decoder.decodeBitMatrix(x,s),u=Fi.NO_POINTS}else{const x=new Ui(i.getBlackMatrix()).detect(s);l=this.decoder.decodeBitMatrix(x.getBits(),s),u=x.getPoints()}l.getOther()instanceof Io&&l.getOther().applyMirroredCorrection(u);const f=new Pe(l.getText(),l.getRawBytes(),void 0,u,Ae.QR_CODE,void 0),g=l.getByteSegments();g!==null&&f.putMetadata(yt.BYTE_SEGMENTS,g);const y=l.getECLevel();return y!==null&&f.putMetadata(yt.ERROR_CORRECTION_LEVEL,y),l.hasStructuredAppend()&&(f.putMetadata(yt.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),f.putMetadata(yt.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),f}reset(){}static extractPureBits(i){const s=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(s===null||l===null)throw new le;const u=this.moduleSize(s,i);let f=s[1],g=l[1],y=s[0],x=l[0];if(y>=x||f>=g)throw new le;if(g-f!==x-y&&(x=y+(g-f),x>=i.getWidth()))throw new le;const C=Math.round((x-y+1)/u),I=Math.round((g-f+1)/u);if(C<=0||I<=0)throw new le;if(I!==C)throw new le;const M=Math.floor(u/2);f+=M,y+=M;const P=y+Math.floor((C-1)*u)-x;if(P>0){if(P>M)throw new le;y-=P}const j=f+Math.floor((I-1)*u)-g;if(j>0){if(j>M)throw new le;f-=j}const Q=new qe(C,I);for(let $=0;$<I;$++){const ae=f+Math.floor($*u);for(let ge=0;ge<C;ge++)i.get(y+Math.floor(ge*u),ae)&&Q.set(ge,$)}return Q}static moduleSize(i,s){const l=s.getHeight(),u=s.getWidth();let f=i[0],g=i[1],y=!0,x=0;for(;f<u&&g<l;){if(y!==s.get(f,g)){if(++x===5)break;y=!y}f++,g++}if(f===u||g===l)throw new le;return(f-i[0])/7}}Fi.NO_POINTS=new Array;class Ke{PDF417Common(){}static getBitCountSum(i){return tt.sum(i)}static toIntArray(i){if(i==null||!i.length)return Ke.EMPTY_INT_ARRAY;const s=new Int32Array(i.length);let l=0;for(const u of i)s[l++]=u;return s}static getCodeword(i){const s=be.binarySearch(Ke.SYMBOL_TABLE,i&262143);return s<0?-1:(Ke.CODEWORD_TABLE[s]-1)%Ke.NUMBER_OF_CODEWORDS}}Ke.NUMBER_OF_CODEWORDS=929,Ke.MAX_CODEWORDS_IN_BARCODE=Ke.NUMBER_OF_CODEWORDS-1,Ke.MIN_ROWS_IN_BARCODE=3,Ke.MAX_ROWS_IN_BARCODE=90,Ke.MODULES_IN_CODEWORD=17,Ke.MODULES_IN_STOP_PATTERN=18,Ke.BARS_IN_MODULE=8,Ke.EMPTY_INT_ARRAY=new Int32Array([]),Ke.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ke.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Es{constructor(i,s){this.bits=i,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class it{static detectMultiple(i,s,l){let u=i.getBlackMatrix(),f=it.detect(l,u);return f.length||(u=u.clone(),u.rotate180(),f=it.detect(l,u)),new Es(u,f)}static detect(i,s){const l=new Array;let u=0,f=0,g=!1;for(;u<s.getHeight();){const y=it.findVertices(s,u,f);if(y[0]==null&&y[3]==null){if(!g)break;g=!1,f=0;for(const x of l)x[1]!=null&&(u=Math.trunc(Math.max(u,x[1].getY()))),x[3]!=null&&(u=Math.max(u,Math.trunc(x[3].getY())));u+=it.ROW_STEP;continue}if(g=!0,l.push(y),!i)break;y[2]!=null?(f=Math.trunc(y[2].getX()),u=Math.trunc(y[2].getY())):(f=Math.trunc(y[4].getX()),u=Math.trunc(y[4].getY()))}return l}static findVertices(i,s,l){const u=i.getHeight(),f=i.getWidth(),g=new Array(8);return it.copyToResult(g,it.findRowsWithPattern(i,u,f,s,l,it.START_PATTERN),it.INDEXES_START_PATTERN),g[4]!=null&&(l=Math.trunc(g[4].getX()),s=Math.trunc(g[4].getY())),it.copyToResult(g,it.findRowsWithPattern(i,u,f,s,l,it.STOP_PATTERN),it.INDEXES_STOP_PATTERN),g}static copyToResult(i,s,l){for(let u=0;u<l.length;u++)i[l[u]]=s[u]}static findRowsWithPattern(i,s,l,u,f,g){const y=new Array(4);let x=!1;const C=new Int32Array(g.length);for(;u<s;u+=it.ROW_STEP){let M=it.findGuardPattern(i,f,u,l,!1,g,C);if(M!=null){for(;u>0;){const P=it.findGuardPattern(i,f,--u,l,!1,g,C);if(P!=null)M=P;else{u++;break}}y[0]=new Fe(M[0],u),y[1]=new Fe(M[1],u),x=!0;break}}let I=u+1;if(x){let M=0,P=Int32Array.from([Math.trunc(y[0].getX()),Math.trunc(y[1].getX())]);for(;I<s;I++){const j=it.findGuardPattern(i,P[0],I,l,!1,g,C);if(j!=null&&Math.abs(P[0]-j[0])<it.MAX_PATTERN_DRIFT&&Math.abs(P[1]-j[1])<it.MAX_PATTERN_DRIFT)P=j,M=0;else{if(M>it.SKIPPED_ROW_COUNT_MAX)break;M++}}I-=M+1,y[2]=new Fe(P[0],I),y[3]=new Fe(P[1],I)}return I-u<it.BARCODE_MIN_HEIGHT&&be.fill(y,null),y}static findGuardPattern(i,s,l,u,f,g,y){be.fillWithin(y,0,y.length,0);let x=s,C=0;for(;i.get(x,l)&&x>0&&C++<it.MAX_PIXEL_DRIFT;)x--;let I=x,M=0,P=g.length;for(let j=f;I<u;I++)if(i.get(I,l)!==j)y[M]++;else{if(M===P-1){if(it.patternMatchVariance(y,g,it.MAX_INDIVIDUAL_VARIANCE)<it.MAX_AVG_VARIANCE)return new Int32Array([x,I]);x+=y[0]+y[1],ie.arraycopy(y,2,y,0,M-1),y[M-1]=0,y[M]=0,M--}else M++;y[M]=1,j=!j}return M===P-1&&it.patternMatchVariance(y,g,it.MAX_INDIVIDUAL_VARIANCE)<it.MAX_AVG_VARIANCE?new Int32Array([x,I-1]):null}static patternMatchVariance(i,s,l){let u=i.length,f=0,g=0;for(let C=0;C<u;C++)f+=i[C],g+=s[C];if(f<g)return 1/0;let y=f/g;l*=y;let x=0;for(let C=0;C<u;C++){let I=i[C],M=s[C]*y,P=I>M?I-M:M-I;if(P>l)return 1/0;x+=P}return x/f}}it.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),it.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),it.MAX_AVG_VARIANCE=.42,it.MAX_INDIVIDUAL_VARIANCE=.8,it.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),it.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),it.MAX_PIXEL_DRIFT=3,it.MAX_PATTERN_DRIFT=5,it.SKIPPED_ROW_COUNT_MAX=25,it.ROW_STEP=5,it.BARCODE_MIN_HEIGHT=10;class en{constructor(i,s){if(s.length===0)throw new O;this.field=i;let l=s.length;if(l>1&&s[0]===0){let u=1;for(;u<l&&s[u]===0;)u++;u===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-u),ie.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let u=0;for(let f of this.coefficients)u=this.field.add(u,f);return u}let s=this.coefficients[0],l=this.coefficients.length;for(let u=1;u<l;u++)s=this.field.add(this.field.multiply(i,s),this.coefficients[u]);return s}add(i){if(!this.field.equals(i.field))throw new O("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let s=this.coefficients,l=i.coefficients;if(s.length>l.length){let g=s;s=l,l=g}let u=new Int32Array(l.length),f=l.length-s.length;ie.arraycopy(l,0,u,0,f);for(let g=f;g<l.length;g++)u[g]=this.field.add(s[g-f],l[g]);return new en(this.field,u)}subtract(i){if(!this.field.equals(i.field))throw new O("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof en?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new O("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new en(this.field,new Int32Array([0]));let s=this.coefficients,l=s.length,u=i.coefficients,f=u.length,g=new Int32Array(l+f-1);for(let y=0;y<l;y++){let x=s[y];for(let C=0;C<f;C++)g[y+C]=this.field.add(g[y+C],this.field.multiply(x,u[C]))}return new en(this.field,g)}negative(){let i=this.coefficients.length,s=new Int32Array(i);for(let l=0;l<i;l++)s[l]=this.field.subtract(0,this.coefficients[l]);return new en(this.field,s)}multiplyScalar(i){if(i===0)return new en(this.field,new Int32Array([0]));if(i===1)return this;let s=this.coefficients.length,l=new Int32Array(s);for(let u=0;u<s;u++)l[u]=this.field.multiply(this.coefficients[u],i);return new en(this.field,l)}multiplyByMonomial(i,s){if(i<0)throw new O;if(s===0)return new en(this.field,new Int32Array([0]));let l=this.coefficients.length,u=new Int32Array(l+i);for(let f=0;f<l;f++)u[f]=this.field.multiply(this.coefficients[f],s);return new en(this.field,u)}toString(){let i=new H;for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);l!==0&&(l<0?(i.append(" - "),l=-l):i.length()>0&&i.append(" + "),(s===0||l!==1)&&i.append(l),s!==0&&(s===1?i.append("x"):(i.append("x^"),i.append(s))))}return i.toString()}}class Us{add(i,s){return(i+s)%this.modulus}subtract(i,s){return(this.modulus+i-s)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new O;return this.logTable[i]}inverse(i){if(i===0)throw new is;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,s){return i===0||s===0?0:this.expTable[(this.logTable[i]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class Kt extends Us{constructor(i,s){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let l=1;for(let u=0;u<i;u++)this.expTable[u]=l,l=l*s%i;for(let u=0;u<i-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new en(this,new Int32Array([0])),this.one=new en(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,s){if(i<0)throw new O;if(s===0)return this.zero;let l=new Int32Array(i+1);return l[0]=s,new en(this,l)}}Kt.PDF417_GF=new Kt(Ke.NUMBER_OF_CODEWORDS,3);class Ar{constructor(){this.field=Kt.PDF417_GF}decode(i,s,l){let u=new en(this.field,i),f=new Int32Array(s),g=!1;for(let Q=s;Q>0;Q--){let $=u.evaluateAt(this.field.exp(Q));f[s-Q]=$,$!==0&&(g=!0)}if(!g)return 0;let y=this.field.getOne();if(l!=null)for(const Q of l){let $=this.field.exp(i.length-1-Q),ae=new en(this.field,new Int32Array([this.field.subtract(0,$),1]));y=y.multiply(ae)}let x=new en(this.field,f),C=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),x,s),I=C[0],M=C[1],P=this.findErrorLocations(I),j=this.findErrorMagnitudes(M,I,P);for(let Q=0;Q<P.length;Q++){let $=i.length-1-this.field.log(P[Q]);if($<0)throw G.getChecksumInstance();i[$]=this.field.subtract(i[$],j[Q])}return P.length}runEuclideanAlgorithm(i,s,l){if(i.getDegree()<s.getDegree()){let P=i;i=s,s=P}let u=i,f=s,g=this.field.getZero(),y=this.field.getOne();for(;f.getDegree()>=Math.round(l/2);){let P=u,j=g;if(u=f,g=y,u.isZero())throw G.getChecksumInstance();f=P;let Q=this.field.getZero(),$=u.getCoefficient(u.getDegree()),ae=this.field.inverse($);for(;f.getDegree()>=u.getDegree()&&!f.isZero();){let ge=f.getDegree()-u.getDegree(),De=this.field.multiply(f.getCoefficient(f.getDegree()),ae);Q=Q.add(this.field.buildMonomial(ge,De)),f=f.subtract(u.multiplyByMonomial(ge,De))}y=Q.multiply(g).subtract(j).negative()}let x=y.getCoefficient(0);if(x===0)throw G.getChecksumInstance();let C=this.field.inverse(x),I=y.multiply(C),M=f.multiply(C);return[I,M]}findErrorLocations(i){let s=i.getDegree(),l=new Int32Array(s),u=0;for(let f=1;f<this.field.getSize()&&u<s;f++)i.evaluateAt(f)===0&&(l[u]=this.field.inverse(f),u++);if(u!==s)throw G.getChecksumInstance();return l}findErrorMagnitudes(i,s,l){let u=s.getDegree(),f=new Int32Array(u);for(let C=1;C<=u;C++)f[u-C]=this.field.multiply(C,s.getCoefficient(C));let g=new en(this.field,f),y=l.length,x=new Int32Array(y);for(let C=0;C<y;C++){let I=this.field.inverse(l[C]),M=this.field.subtract(0,i.evaluateAt(I)),P=this.field.inverse(g.evaluateAt(I));x[C]=this.field.multiply(M,P)}return x}}class wr{constructor(i,s,l,u,f){i instanceof wr?this.constructor_2(i):this.constructor_1(i,s,l,u,f)}constructor_1(i,s,l,u,f){const g=s==null||l==null,y=u==null||f==null;if(g&&y)throw new le;g?(s=new Fe(0,u.getY()),l=new Fe(0,f.getY())):y&&(u=new Fe(i.getWidth()-1,s.getY()),f=new Fe(i.getWidth()-1,l.getY())),this.image=i,this.topLeft=s,this.bottomLeft=l,this.topRight=u,this.bottomRight=f,this.minX=Math.trunc(Math.min(s.getX(),l.getX())),this.maxX=Math.trunc(Math.max(u.getX(),f.getX())),this.minY=Math.trunc(Math.min(s.getY(),u.getY())),this.maxY=Math.trunc(Math.max(l.getY(),f.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,s){return i==null?s:s==null?i:new wr(i.image,i.topLeft,i.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(i,s,l){let u=this.topLeft,f=this.bottomLeft,g=this.topRight,y=this.bottomRight;if(i>0){let x=l?this.topLeft:this.topRight,C=Math.trunc(x.getY()-i);C<0&&(C=0);let I=new Fe(x.getX(),C);l?u=I:g=I}if(s>0){let x=l?this.bottomLeft:this.bottomRight,C=Math.trunc(x.getY()+s);C>=this.image.getHeight()&&(C=this.image.getHeight()-1);let I=new Fe(x.getX(),C);l?f=I:y=I}return new wr(this.image,u,f,g,y)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Fs{constructor(i,s,l,u){this.columnCount=i,this.errorCorrectionLevel=u,this.rowCountUpperPart=s,this.rowCountLowerPart=l,this.rowCount=s+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class as{constructor(){this.buffer=""}static form(i,s){let l=-1;function u(g,y,x,C,I,M){if(g==="%%")return"%";if(s[++l]===void 0)return;g=C?parseInt(C.substr(1)):void 0;let P=I?parseInt(I.substr(1)):void 0,j;switch(M){case"s":j=s[l];break;case"c":j=s[l][0];break;case"f":j=parseFloat(s[l]).toFixed(g);break;case"p":j=parseFloat(s[l]).toPrecision(g);break;case"e":j=parseFloat(s[l]).toExponential(g);break;case"x":j=parseInt(s[l]).toString(P||16);break;case"d":j=parseFloat(parseInt(s[l],P||10).toPrecision(g)).toFixed(0);break}j=typeof j=="object"?JSON.stringify(j):(+j).toString(P);let Q=parseInt(x),$=x&&x[0]+""=="0"?"0":" ";for(;j.length<Q;)j=y!==void 0?j+$:$+j;return j}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(f,u)}format(i,...s){this.buffer+=as.form(i,s)}toString(){return this.buffer}}class Tr{constructor(i){this.boundingBox=new wr(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let s=this.getCodeword(i);if(s!=null)return s;for(let l=1;l<Tr.MAX_NEARBY_DISTANCE;l++){let u=this.imageRowToCodewordIndex(i)-l;if(u>=0&&(s=this.codewords[u],s!=null)||(u=this.imageRowToCodewordIndex(i)+l,u<this.codewords.length&&(s=this.codewords[u],s!=null)))return s}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,s){this.codewords[this.imageRowToCodewordIndex(i)]=s}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new as;let s=0;for(const l of this.codewords){if(l==null){i.format("%3d:    |   %n",s++);continue}i.format("%3d: %3d|%3d%n",s++,l.getRowNumber(),l.getValue())}return i.toString()}}Tr.MAX_NEARBY_DISTANCE=5;class Ki{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let s=this.values.get(i);s==null&&(s=0),s++,this.values.set(i,s)}getValue(){let i=-1,s=new Array;for(const[l,u]of this.values.entries()){const f={getKey:()=>l,getValue:()=>u};f.getValue()>i?(i=f.getValue(),s=[],s.push(f.getKey())):f.getValue()===i&&s.push(f.getKey())}return Ke.toIntArray(s)}getConfidence(i){return this.values.get(i)}}class ar extends Tr{constructor(i,s){super(i),this._isLeft=s}setRowNumbers(){for(let i of this.getCodewords())i?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,i);let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),f=this._isLeft?l.getBottomLeft():l.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=this.imageRowToCodewordIndex(Math.trunc(f.getY())),x=-1,C=1,I=0;for(let M=g;M<y;M++){if(s[M]==null)continue;let P=s[M],j=P.getRowNumber()-x;if(j===0)I++;else if(j===1)C=Math.max(C,I),I=1,x=P.getRowNumber();else if(j<0||P.getRowNumber()>=i.getRowCount()||j>M)s[M]=null;else{let Q;C>2?Q=(C-2)*j:Q=j;let $=Q>=M;for(let ae=1;ae<=Q&&!$;ae++)$=s[M-ae]!=null;$?s[M]=null:(x=P.getRowNumber(),I=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let s=new Int32Array(i.getRowCount());for(let l of this.getCodewords())if(l!=null){let u=l.getRowNumber();if(u>=s.length)continue;s[u]++}return s}adjustIncompleteIndicatorColumnRowNumbers(i){let s=this.getBoundingBox(),l=this._isLeft?s.getTopLeft():s.getTopRight(),u=this._isLeft?s.getBottomLeft():s.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(l.getY())),g=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=this.getCodewords(),x=-1;for(let C=f;C<g;C++){if(y[C]==null)continue;let I=y[C];I.setRowNumberAsRowIndicatorColumn();let M=I.getRowNumber()-x;M===0||(M===1?x=I.getRowNumber():I.getRowNumber()>=i.getRowCount()?y[C]=null:x=I.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),s=new Ki,l=new Ki,u=new Ki,f=new Ki;for(let y of i){if(y==null)continue;y.setRowNumberAsRowIndicatorColumn();let x=y.getValue()%30,C=y.getRowNumber();switch(this._isLeft||(C+=2),C%3){case 0:l.setValue(x*3+1);break;case 1:f.setValue(x/3),u.setValue(x%3);break;case 2:s.setValue(x+1);break}}if(s.getValue().length===0||l.getValue().length===0||u.getValue().length===0||f.getValue().length===0||s.getValue()[0]<1||l.getValue()[0]+u.getValue()[0]<Ke.MIN_ROWS_IN_BARCODE||l.getValue()[0]+u.getValue()[0]>Ke.MAX_ROWS_IN_BARCODE)return null;let g=new Fs(s.getValue()[0],l.getValue()[0],u.getValue()[0],f.getValue()[0]);return this.removeIncorrectCodewords(i,g),g}removeIncorrectCodewords(i,s){for(let l=0;l<i.length;l++){let u=i[l];if(i[l]==null)continue;let f=u.getValue()%30,g=u.getRowNumber();if(g>s.getRowCount()){i[l]=null;continue}switch(this._isLeft||(g+=2),g%3){case 0:f*3+1!==s.getRowCountUpperPart()&&(i[l]=null);break;case 1:(Math.trunc(f/3)!==s.getErrorCorrectionLevel()||f%3!==s.getRowCountLowerPart())&&(i[l]=null);break;case 2:f+1!==s.getColumnCount()&&(i[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Bn{constructor(i,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=Ke.MAX_CODEWORDS_IN_BARCODE,s;do s=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let l=this.detectionResultColumns[s].getCodewords();for(let u=0;u<l.length;u++)l[u]!=null&&(l[u].hasValidRowNumber()||this.adjustRowNumbers(s,u,l))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<i.length;l++)if(i[l]!=null&&s[l]!=null&&i[l].getRowNumber()===s[l].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let f=this.detectionResultColumns[u].getCodewords()[l];f!=null&&(f.setRowNumber(i[l].getRowNumber()),f.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<s.length;l++){if(s[l]==null)continue;let u=s[l].getRowNumber(),f=0;for(let g=this.barcodeColumnCount+1;g>0&&f<this.ADJUST_ROW_NUMBER_SKIP;g--){let y=this.detectionResultColumns[g].getCodewords()[l];y!=null&&(f=Bn.adjustRowNumberIfValid(u,f,y),y.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,s=this.detectionResultColumns[0].getCodewords();for(let l=0;l<s.length;l++){if(s[l]==null)continue;let u=s[l].getRowNumber(),f=0;for(let g=1;g<this.barcodeColumnCount+1&&f<this.ADJUST_ROW_NUMBER_SKIP;g++){let y=this.detectionResultColumns[g].getCodewords()[l];y!=null&&(f=Bn.adjustRowNumberIfValid(u,f,y),y.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,s,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(i)?(l.setRowNumber(i),s=0):++s),s}adjustRowNumbers(i,s,l){if(!this.detectionResultColumns[i-1])return;let u=l[s],f=this.detectionResultColumns[i-1].getCodewords(),g=f;this.detectionResultColumns[i+1]!=null&&(g=this.detectionResultColumns[i+1].getCodewords());let y=new Array(14);y[2]=f[s],y[3]=g[s],s>0&&(y[0]=l[s-1],y[4]=f[s-1],y[5]=g[s-1]),s>1&&(y[8]=l[s-2],y[10]=f[s-2],y[11]=g[s-2]),s<l.length-1&&(y[1]=l[s+1],y[6]=f[s+1],y[7]=g[s+1]),s<l.length-2&&(y[9]=l[s+2],y[12]=f[s+2],y[13]=g[s+2]);for(let x of y)if(Bn.adjustRowNumber(u,x))return}static adjustRowNumber(i,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===i.getBucket()?(i.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,s){this.detectionResultColumns[i]=s}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new as;for(let l=0;l<i.getCodewords().length;l++){s.format("CW %3d:",l);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){s.format("    |   ");continue}let f=this.detectionResultColumns[u].getCodewords()[l];if(f==null){s.format("    |   ");continue}s.format(" %3d|%3d",f.getRowNumber(),f.getValue())}s.format("%n")}return s.toString()}}class Qi{constructor(i,s,l,u){this.rowNumber=Qi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(s),this.bucket=Math.trunc(l),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==Qi.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}Qi.BARCODE_ROW_UNKNOWN=-1;class _n{static initialize(){for(let i=0;i<Ke.SYMBOL_TABLE.length;i++){let s=Ke.SYMBOL_TABLE[i],l=s&1;for(let u=0;u<Ke.BARS_IN_MODULE;u++){let f=0;for(;(s&1)===l;)f+=1,s>>=1;l=s&1,_n.RATIOS_TABLE[i]||(_n.RATIOS_TABLE[i]=new Array(Ke.BARS_IN_MODULE)),_n.RATIOS_TABLE[i][Ke.BARS_IN_MODULE-u-1]=Math.fround(f/Ke.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let s=_n.getDecodedCodewordValue(_n.sampleBitCounts(i));return s!==-1?s:_n.getClosestDecodedValue(i)}static sampleBitCounts(i){let s=tt.sum(i),l=new Int32Array(Ke.BARS_IN_MODULE),u=0,f=0;for(let g=0;g<Ke.MODULES_IN_CODEWORD;g++){let y=s/(2*Ke.MODULES_IN_CODEWORD)+g*s/Ke.MODULES_IN_CODEWORD;f+i[u]<=y&&(f+=i[u],u++),l[u]++}return l}static getDecodedCodewordValue(i){let s=_n.getBitValue(i);return Ke.getCodeword(s)===-1?-1:s}static getBitValue(i){let s=0;for(let l=0;l<i.length;l++)for(let u=0;u<i[l];u++)s=s<<1|(l%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(i){let s=tt.sum(i),l=new Array(Ke.BARS_IN_MODULE);if(s>1)for(let g=0;g<l.length;g++)l[g]=Math.fround(i[g]/s);let u=Tn.MAX_VALUE,f=-1;this.bSymbolTableReady||_n.initialize();for(let g=0;g<_n.RATIOS_TABLE.length;g++){let y=0,x=_n.RATIOS_TABLE[g];for(let C=0;C<Ke.BARS_IN_MODULE;C++){let I=Math.fround(x[C]-l[C]);if(y+=Math.fround(I*I),y>=u)break}y<u&&(u=y,f=Ke.SYMBOL_TABLE[g])}return f}}_n.bSymbolTableReady=!1,_n.RATIOS_TABLE=new Array(Ke.SYMBOL_TABLE.length).map(D=>new Array(Ke.BARS_IN_MODULE));class os{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class va{static parseLong(i,s=void 0){return parseInt(i,s)}}class ls extends A{}ls.kind="NullPointerException";class Sa{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,s,l){if(i==null)throw new ls;if(s<0||s>i.length||l<0||s+l>i.length||s+l<0)throw new he;if(l===0)return;for(let u=0;u<l;u++)this.write(i[s+u])}flush(){}close(){}}class Fr extends A{}class ba extends Sa{constructor(i=32){if(super(),this.count=0,i<0)throw new O("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let l=this.buf.length<<1;if(l-i<0&&(l=i),l<0){if(i<0)throw new Fr;l=me.MAX_VALUE}this.buf=be.copyOfUint8Array(this.buf,l)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,s,l){if(s<0||s>i.length||l<0||s+l-i.length>0)throw new he;this.ensureCapacity(this.count+l),ie.arraycopy(i,s,this.buf,this.count,l),this.count+=l}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return be.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var zt;(function(D){D[D.ALPHA=0]="ALPHA",D[D.LOWER=1]="LOWER",D[D.MIXED=2]="MIXED",D[D.PUNCT=3]="PUNCT",D[D.ALPHA_SHIFT=4]="ALPHA_SHIFT",D[D.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(zt||(zt={}));function _s(){if(typeof window<"u")return window.BigInt||null;if(typeof Ph<"u")return Ph.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let zs;function Cr(D){if(typeof zs>"u"&&(zs=_s()),zs===null)throw new Error("BigInt is not supported!");return zs(D)}function js(){let D=[];D[0]=Cr(1);let i=Cr(900);D[1]=i;for(let s=2;s<16;s++)D[s]=D[s-1]*i;return D}class de{static decode(i,s){let l=new H(""),u=L.ISO8859_1;l.enableDecoding(u);let f=1,g=i[f++],y=new os;for(;f<i[0];){switch(g){case de.TEXT_COMPACTION_MODE_LATCH:f=de.textCompaction(i,f,l);break;case de.BYTE_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:f=de.byteCompaction(g,i,u,f,l);break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(i[f++]);break;case de.NUMERIC_COMPACTION_MODE_LATCH:f=de.numericCompaction(i,f,l);break;case de.ECI_CHARSET:L.getCharacterSetECIByValue(i[f++]);break;case de.ECI_GENERAL_PURPOSE:f+=2;break;case de.ECI_USER_DEFINED:f++;break;case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:f=de.decodeMacroBlock(i,f,y);break;case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:throw new k;default:f--,f=de.textCompaction(i,f,l);break}if(f<i.length)g=i[f++];else throw k.getFormatInstance()}if(l.length()===0)throw k.getFormatInstance();let x=new qt(null,l.toString(),null,s);return x.setOther(y),x}static decodeMacroBlock(i,s,l){if(s+de.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw k.getFormatInstance();let u=new Int32Array(de.NUMBER_OF_SEQUENCE_CODEWORDS);for(let y=0;y<de.NUMBER_OF_SEQUENCE_CODEWORDS;y++,s++)u[y]=i[s];l.setSegmentIndex(me.parseInt(de.decodeBase900toBase10(u,de.NUMBER_OF_SEQUENCE_CODEWORDS)));let f=new H;s=de.textCompaction(i,s,f),l.setFileId(f.toString());let g=-1;for(i[s]===de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(g=s+1);s<i[0];)switch(i[s]){case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,i[s]){case de.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let y=new H;s=de.textCompaction(i,s+1,y),l.setFileName(y.toString());break;case de.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let x=new H;s=de.textCompaction(i,s+1,x),l.setSender(x.toString());break;case de.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let C=new H;s=de.textCompaction(i,s+1,C),l.setAddressee(C.toString());break;case de.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let I=new H;s=de.numericCompaction(i,s+1,I),l.setSegmentCount(me.parseInt(I.toString()));break;case de.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let M=new H;s=de.numericCompaction(i,s+1,M),l.setTimestamp(va.parseLong(M.toString()));break;case de.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let P=new H;s=de.numericCompaction(i,s+1,P),l.setChecksum(me.parseInt(P.toString()));break;case de.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let j=new H;s=de.numericCompaction(i,s+1,j),l.setFileSize(va.parseLong(j.toString()));break;default:throw k.getFormatInstance()}break;case de.MACRO_PDF417_TERMINATOR:s++,l.setLastSegment(!0);break;default:throw k.getFormatInstance()}if(g!==-1){let y=s-g;l.isLastSegment()&&y--,l.setOptionalData(be.copyOfRange(i,g,g+y))}return s}static textCompaction(i,s,l){let u=new Int32Array((i[0]-s)*2),f=new Int32Array((i[0]-s)*2),g=0,y=!1;for(;s<i[0]&&!y;){let x=i[s++];if(x<de.TEXT_COMPACTION_MODE_LATCH)u[g]=x/30,u[g+1]=x%30,g+=2;else switch(x){case de.TEXT_COMPACTION_MODE_LATCH:u[g++]=de.TEXT_COMPACTION_MODE_LATCH;break;case de.BYTE_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:case de.NUMERIC_COMPACTION_MODE_LATCH:case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:s--,y=!0;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[g]=de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,x=i[s++],f[g]=x,g++;break}}return de.decodeTextCompaction(u,f,g,l),s}static decodeTextCompaction(i,s,l,u){let f=zt.ALPHA,g=zt.ALPHA,y=0;for(;y<l;){let x=i[y],C="";switch(f){case zt.ALPHA:if(x<26)C=String.fromCharCode(65+x);else switch(x){case 26:C=" ";break;case de.LL:f=zt.LOWER;break;case de.ML:f=zt.MIXED;break;case de.PS:g=f,f=zt.PUNCT_SHIFT;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case de.TEXT_COMPACTION_MODE_LATCH:f=zt.ALPHA;break}break;case zt.LOWER:if(x<26)C=String.fromCharCode(97+x);else switch(x){case 26:C=" ";break;case de.AS:g=f,f=zt.ALPHA_SHIFT;break;case de.ML:f=zt.MIXED;break;case de.PS:g=f,f=zt.PUNCT_SHIFT;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case de.TEXT_COMPACTION_MODE_LATCH:f=zt.ALPHA;break}break;case zt.MIXED:if(x<de.PL)C=de.MIXED_CHARS[x];else switch(x){case de.PL:f=zt.PUNCT;break;case 26:C=" ";break;case de.LL:f=zt.LOWER;break;case de.AL:f=zt.ALPHA;break;case de.PS:g=f,f=zt.PUNCT_SHIFT;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case de.TEXT_COMPACTION_MODE_LATCH:f=zt.ALPHA;break}break;case zt.PUNCT:if(x<de.PAL)C=de.PUNCT_CHARS[x];else switch(x){case de.PAL:f=zt.ALPHA;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case de.TEXT_COMPACTION_MODE_LATCH:f=zt.ALPHA;break}break;case zt.ALPHA_SHIFT:if(f=g,x<26)C=String.fromCharCode(65+x);else switch(x){case 26:C=" ";break;case de.TEXT_COMPACTION_MODE_LATCH:f=zt.ALPHA;break}break;case zt.PUNCT_SHIFT:if(f=g,x<de.PAL)C=de.PUNCT_CHARS[x];else switch(x){case de.PAL:f=zt.ALPHA;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case de.TEXT_COMPACTION_MODE_LATCH:f=zt.ALPHA;break}break}C!==""&&u.append(C),y++}}static byteCompaction(i,s,l,u,f){let g=new ba,y=0,x=0,C=!1;switch(i){case de.BYTE_COMPACTION_MODE_LATCH:let I=new Int32Array(6),M=s[u++];for(;u<s[0]&&!C;)switch(I[y++]=M,x=900*x+M,M=s[u++],M){case de.TEXT_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH:case de.NUMERIC_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:u--,C=!0;break;default:if(y%5===0&&y>0){for(let P=0;P<6;++P)g.write(Number(Cr(x)>>Cr(8*(5-P))));x=0,y=0}break}u===s[0]&&M<de.TEXT_COMPACTION_MODE_LATCH&&(I[y++]=M);for(let P=0;P<y;P++)g.write(I[P]);break;case de.BYTE_COMPACTION_MODE_LATCH_6:for(;u<s[0]&&!C;){let P=s[u++];if(P<de.TEXT_COMPACTION_MODE_LATCH)y++,x=900*x+P;else switch(P){case de.TEXT_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH:case de.NUMERIC_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:u--,C=!0;break}if(y%5===0&&y>0){for(let j=0;j<6;++j)g.write(Number(Cr(x)>>Cr(8*(5-j))));x=0,y=0}}break}return f.append(X.decode(g.toByteArray(),l)),u}static numericCompaction(i,s,l){let u=0,f=!1,g=new Int32Array(de.MAX_NUMERIC_CODEWORDS);for(;s<i[0]&&!f;){let y=i[s++];if(s===i[0]&&(f=!0),y<de.TEXT_COMPACTION_MODE_LATCH)g[u]=y,u++;else switch(y){case de.TEXT_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:s--,f=!0;break}(u%de.MAX_NUMERIC_CODEWORDS===0||y===de.NUMERIC_COMPACTION_MODE_LATCH||f)&&u>0&&(l.append(de.decodeBase900toBase10(g,u)),u=0)}return s}static decodeBase900toBase10(i,s){let l=Cr(0);for(let f=0;f<s;f++)l+=de.EXP900[s-f-1]*Cr(i[f]);let u=l.toString();if(u.charAt(0)!=="1")throw new k;return u.substring(1)}}de.TEXT_COMPACTION_MODE_LATCH=900,de.BYTE_COMPACTION_MODE_LATCH=901,de.NUMERIC_COMPACTION_MODE_LATCH=902,de.BYTE_COMPACTION_MODE_LATCH_6=924,de.ECI_USER_DEFINED=925,de.ECI_GENERAL_PURPOSE=926,de.ECI_CHARSET=927,de.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,de.MACRO_PDF417_TERMINATOR=922,de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,de.MAX_NUMERIC_CODEWORDS=15,de.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,de.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,de.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,de.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,de.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,de.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,de.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,de.PL=25,de.LL=27,de.AS=27,de.ML=28,de.AL=28,de.PS=29,de.PAL=29,de.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,de.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",de.EXP900=_s()?js():[],de.NUMBER_OF_SEQUENCE_CODEWORDS=2;class dt{constructor(){}static decode(i,s,l,u,f,g,y){let x=new wr(i,s,l,u,f),C=null,I=null,M;for(let Q=!0;;Q=!1){if(s!=null&&(C=dt.getRowIndicatorColumn(i,x,s,!0,g,y)),u!=null&&(I=dt.getRowIndicatorColumn(i,x,u,!1,g,y)),M=dt.merge(C,I),M==null)throw le.getNotFoundInstance();let $=M.getBoundingBox();if(Q&&$!=null&&($.getMinY()<x.getMinY()||$.getMaxY()>x.getMaxY()))x=$;else break}M.setBoundingBox(x);let P=M.getBarcodeColumnCount()+1;M.setDetectionResultColumn(0,C),M.setDetectionResultColumn(P,I);let j=C!=null;for(let Q=1;Q<=P;Q++){let $=j?Q:P-Q;if(M.getDetectionResultColumn($)!==void 0)continue;let ae;$===0||$===P?ae=new ar(x,$===0):ae=new Tr(x),M.setDetectionResultColumn($,ae);let ge=-1,De=ge;for(let Ne=x.getMinY();Ne<=x.getMaxY();Ne++){if(ge=dt.getStartColumn(M,$,Ne,j),ge<0||ge>x.getMaxX()){if(De===-1)continue;ge=De}let Ie=dt.detectCodeword(i,x.getMinX(),x.getMaxX(),j,ge,Ne,g,y);Ie!=null&&(ae.setCodeword(Ne,Ie),De=ge,g=Math.min(g,Ie.getWidth()),y=Math.max(y,Ie.getWidth()))}}return dt.createDecoderResult(M)}static merge(i,s){if(i==null&&s==null)return null;let l=dt.getBarcodeMetadata(i,s);if(l==null)return null;let u=wr.merge(dt.adjustBoundingBox(i),dt.adjustBoundingBox(s));return new Bn(l,u)}static adjustBoundingBox(i){if(i==null)return null;let s=i.getRowHeights();if(s==null)return null;let l=dt.getMax(s),u=0;for(let y of s)if(u+=l-y,y>0)break;let f=i.getCodewords();for(let y=0;u>0&&f[y]==null;y++)u--;let g=0;for(let y=s.length-1;y>=0&&(g+=l-s[y],!(s[y]>0));y--);for(let y=f.length-1;g>0&&f[y]==null;y--)g--;return i.getBoundingBox().addMissingRows(u,g,i.isLeft())}static getMax(i){let s=-1;for(let l of i)s=Math.max(s,l);return s}static getBarcodeMetadata(i,s){let l;if(i==null||(l=i.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let u;return s==null||(u=s.getBarcodeMetadata())==null?l:l.getColumnCount()!==u.getColumnCount()&&l.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&l.getRowCount()!==u.getRowCount()?null:l}static getRowIndicatorColumn(i,s,l,u,f,g){let y=new ar(s,u);for(let x=0;x<2;x++){let C=x===0?1:-1,I=Math.trunc(Math.trunc(l.getX()));for(let M=Math.trunc(Math.trunc(l.getY()));M<=s.getMaxY()&&M>=s.getMinY();M+=C){let P=dt.detectCodeword(i,0,i.getWidth(),u,I,M,f,g);P!=null&&(y.setCodeword(M,P),u?I=P.getStartX():I=P.getEndX())}}return y}static adjustCodewordCount(i,s){let l=s[0][1],u=l.getValue(),f=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-dt.getNumberOfECCodeWords(i.getBarcodeECLevel());if(u.length===0){if(f<1||f>Ke.MAX_CODEWORDS_IN_BARCODE)throw le.getNotFoundInstance();l.setValue(f)}else u[0]!==f&&l.setValue(f)}static createDecoderResult(i){let s=dt.createBarcodeMatrix(i);dt.adjustCodewordCount(i,s);let l=new Array,u=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),f=[],g=new Array;for(let x=0;x<i.getBarcodeRowCount();x++)for(let C=0;C<i.getBarcodeColumnCount();C++){let I=s[x][C+1].getValue(),M=x*i.getBarcodeColumnCount()+C;I.length===0?l.push(M):I.length===1?u[M]=I[0]:(g.push(M),f.push(I))}let y=new Array(f.length);for(let x=0;x<y.length;x++)y[x]=f[x];return dt.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),u,Ke.toIntArray(l),Ke.toIntArray(g),y)}static createDecoderResultFromAmbiguousValues(i,s,l,u,f){let g=new Int32Array(u.length),y=100;for(;y-- >0;){for(let x=0;x<g.length;x++)s[u[x]]=f[x][g[x]];try{return dt.decodeCodewords(s,i,l)}catch(x){if(!(x instanceof G))throw x}if(g.length===0)throw G.getChecksumInstance();for(let x=0;x<g.length;x++)if(g[x]<f[x].length-1){g[x]++;break}else if(g[x]=0,x===g.length-1)throw G.getChecksumInstance()}throw G.getChecksumInstance()}static createBarcodeMatrix(i){let s=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let u=0;u<s.length;u++)for(let f=0;f<s[u].length;f++)s[u][f]=new Ki;let l=0;for(let u of i.getDetectionResultColumns()){if(u!=null){for(let f of u.getCodewords())if(f!=null){let g=f.getRowNumber();if(g>=0){if(g>=s.length)continue;s[g][l].setValue(f.getValue())}}}l++}return s}static isValidBarcodeColumn(i,s){return s>=0&&s<=i.getBarcodeColumnCount()+1}static getStartColumn(i,s,l,u){let f=u?1:-1,g=null;if(dt.isValidBarcodeColumn(i,s-f)&&(g=i.getDetectionResultColumn(s-f).getCodeword(l)),g!=null)return u?g.getEndX():g.getStartX();if(g=i.getDetectionResultColumn(s).getCodewordNearby(l),g!=null)return u?g.getStartX():g.getEndX();if(dt.isValidBarcodeColumn(i,s-f)&&(g=i.getDetectionResultColumn(s-f).getCodewordNearby(l)),g!=null)return u?g.getEndX():g.getStartX();let y=0;for(;dt.isValidBarcodeColumn(i,s-f);){s-=f;for(let x of i.getDetectionResultColumn(s).getCodewords())if(x!=null)return(u?x.getEndX():x.getStartX())+f*y*(x.getEndX()-x.getStartX());y++}return u?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,s,l,u,f,g,y,x){f=dt.adjustCodewordStartColumn(i,s,l,u,f,g);let C=dt.getModuleBitCount(i,s,l,u,f,g);if(C==null)return null;let I,M=tt.sum(C);if(u)I=f+M;else{for(let Q=0;Q<C.length/2;Q++){let $=C[Q];C[Q]=C[C.length-1-Q],C[C.length-1-Q]=$}I=f,f=I-M}if(!dt.checkCodewordSkew(M,y,x))return null;let P=_n.getDecodedValue(C),j=Ke.getCodeword(P);return j===-1?null:new Qi(f,I,dt.getCodewordBucketNumber(P),j)}static getModuleBitCount(i,s,l,u,f,g){let y=f,x=new Int32Array(8),C=0,I=u?1:-1,M=u;for(;(u?y<l:y>=s)&&C<x.length;)i.get(y,g)===M?(x[C]++,y+=I):(C++,M=!M);return C===x.length||y===(u?l:s)&&C===x.length-1?x:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,s,l,u,f,g){let y=f,x=u?-1:1;for(let C=0;C<2;C++){for(;(u?y>=s:y<l)&&u===i.get(y,g);){if(Math.abs(f-y)>dt.CODEWORD_SKEW_SIZE)return f;y+=x}x=-x,u=!u}return y}static checkCodewordSkew(i,s,l){return s-dt.CODEWORD_SKEW_SIZE<=i&&i<=l+dt.CODEWORD_SKEW_SIZE}static decodeCodewords(i,s,l){if(i.length===0)throw k.getFormatInstance();let u=1<<s+1,f=dt.correctErrors(i,l,u);dt.verifyCodewordCount(i,u);let g=de.decode(i,""+s);return g.setErrorsCorrected(f),g.setErasures(l.length),g}static correctErrors(i,s,l){if(s!=null&&s.length>l/2+dt.MAX_ERRORS||l<0||l>dt.MAX_EC_CODEWORDS)throw G.getChecksumInstance();return dt.errorCorrection.decode(i,l,s)}static verifyCodewordCount(i,s){if(i.length<4)throw k.getFormatInstance();let l=i[0];if(l>i.length)throw k.getFormatInstance();if(l===0)if(s<i.length)i[0]=i.length-s;else throw k.getFormatInstance()}static getBitCountForCodeword(i){let s=new Int32Array(8),l=0,u=s.length-1;for(;!((i&1)!==l&&(l=i&1,u--,u<0));)s[u]++,i>>=1;return s}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return dt.getCodewordBucketNumber(dt.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let s=new as;for(let l=0;l<i.length;l++){s.format("Row %2d: ",l);for(let u=0;u<i[l].length;u++){let f=i[l][u];f.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",f.getValue()[0],f.getConfidence(f.getValue()[0]))}s.format("%n")}return s.toString()}}dt.CODEWORD_SKEW_SIZE=2,dt.MAX_ERRORS=3,dt.MAX_EC_CODEWORDS=512,dt.errorCorrection=new Ar;class bn{decode(i,s=null){let l=bn.decode(i,s,!1);if(l==null||l.length===0||l[0]==null)throw le.getNotFoundInstance();return l[0]}decodeMultiple(i,s=null){try{return bn.decode(i,s,!0)}catch(l){throw l instanceof k||l instanceof G?le.getNotFoundInstance():l}}static decode(i,s,l){const u=new Array,f=it.detectMultiple(i,s,l);for(const g of f.getPoints()){const y=dt.decode(f.getBits(),g[4],g[5],g[6],g[7],bn.getMinCodewordWidth(g),bn.getMaxCodewordWidth(g)),x=new Pe(y.getText(),y.getRawBytes(),void 0,g,Ae.PDF_417);x.putMetadata(yt.ERROR_CORRECTION_LEVEL,y.getECLevel());const C=y.getOther();C!=null&&x.putMetadata(yt.PDF417_EXTRA_METADATA,C),u.push(x)}return u.map(g=>g)}static getMaxWidth(i,s){return i==null||s==null?0:Math.trunc(Math.abs(i.getX()-s.getX()))}static getMinWidth(i,s){return i==null||s==null?me.MAX_VALUE:Math.trunc(Math.abs(i.getX()-s.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(bn.getMaxWidth(i[0],i[4]),bn.getMaxWidth(i[6],i[2])*Ke.MODULES_IN_CODEWORD/Ke.MODULES_IN_STOP_PATTERN),Math.max(bn.getMaxWidth(i[1],i[5]),bn.getMaxWidth(i[7],i[3])*Ke.MODULES_IN_CODEWORD/Ke.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(bn.getMinWidth(i[0],i[4]),bn.getMinWidth(i[6],i[2])*Ke.MODULES_IN_CODEWORD/Ke.MODULES_IN_STOP_PATTERN),Math.min(bn.getMinWidth(i[1],i[5]),bn.getMinWidth(i[7],i[3])*Ke.MODULES_IN_CODEWORD/Ke.MODULES_IN_STOP_PATTERN)))}reset(){}}class Hs extends A{}Hs.kind="ReaderException";class Ro{constructor(i,s){this.verbose=i===!0,s&&this.setHints(s)}decode(i,s){return s&&this.setHints(s),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const s=!o(i)&&i.get(xe.TRY_HARDER)===!0,l=o(i)?null:i.get(xe.POSSIBLE_FORMATS),u=new Array;if(!o(l)){const f=l.some(g=>g===Ae.UPC_A||g===Ae.UPC_E||g===Ae.EAN_13||g===Ae.EAN_8||g===Ae.CODABAR||g===Ae.CODE_39||g===Ae.CODE_93||g===Ae.CODE_128||g===Ae.ITF||g===Ae.RSS_14||g===Ae.RSS_EXPANDED);f&&!s&&u.push(new Ti(i,this.verbose)),l.includes(Ae.QR_CODE)&&u.push(new Fi),l.includes(Ae.DATA_MATRIX)&&u.push(new Bi),l.includes(Ae.AZTEC)&&u.push(new Ps),l.includes(Ae.PDF_417)&&u.push(new bn),f&&s&&u.push(new Ti(i,this.verbose))}u.length===0&&(s||u.push(new Ti(i,this.verbose)),u.push(new Fi),u.push(new Bi),u.push(new Ps),u.push(new bn),s&&u.push(new Ti(i,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new Hs("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(i,this.hints)}catch(l){if(l instanceof Hs)continue}throw new le("No MultiFormat Readers were able to detect the code.")}}class zr extends Oe{constructor(i=null,s=500){const l=new Ro;l.setHints(i),super(l,s)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class ul extends Oe{constructor(i=500){super(new bn,i)}}class hl extends Oe{constructor(i=500){super(new Fi,i)}}var Ia;(function(D){D[D.ERROR_CORRECTION=0]="ERROR_CORRECTION",D[D.CHARACTER_SET=1]="CHARACTER_SET",D[D.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",D[D.MIN_SIZE=3]="MIN_SIZE",D[D.MAX_SIZE=4]="MAX_SIZE",D[D.MARGIN=5]="MARGIN",D[D.PDF417_COMPACT=6]="PDF417_COMPACT",D[D.PDF417_COMPACTION=7]="PDF417_COMPACTION",D[D.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",D[D.AZTEC_LAYERS=9]="AZTEC_LAYERS",D[D.QR_VERSION=10]="QR_VERSION"})(Ia||(Ia={}));var In=Ia;class jr{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new On(i,Int32Array.from([1])))}buildGenerator(i){const s=this.cachedGenerators;if(i>=s.length){let l=s[s.length-1];const u=this.field;for(let f=s.length;f<=i;f++){const g=l.multiply(new On(u,Int32Array.from([1,u.exp(f-1+u.getGeneratorBase())])));s.push(g),l=g}}return s[i]}encode(i,s){if(s===0)throw new O("No error correction bytes");const l=i.length-s;if(l<=0)throw new O("No data bytes provided");const u=this.buildGenerator(s),f=new Int32Array(l);ie.arraycopy(i,0,f,0,l);let g=new On(this.field,f);g=g.multiplyByMonomial(s,1);const x=g.divide(u)[1].getCoefficients(),C=s-x.length;for(let I=0;I<C;I++)i[l+I]=0;ie.arraycopy(x,0,i,l+C,x.length)}}class vt{constructor(){}static applyMaskPenaltyRule1(i){return vt.applyMaskPenaltyRule1Internal(i,!0)+vt.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let s=0;const l=i.getArray(),u=i.getWidth(),f=i.getHeight();for(let g=0;g<f-1;g++){const y=l[g];for(let x=0;x<u-1;x++){const C=y[x];C===y[x+1]&&C===l[g+1][x]&&C===l[g+1][x+1]&&s++}}return vt.N2*s}static applyMaskPenaltyRule3(i){let s=0;const l=i.getArray(),u=i.getWidth(),f=i.getHeight();for(let g=0;g<f;g++)for(let y=0;y<u;y++){const x=l[g];y+6<u&&x[y]===1&&x[y+1]===0&&x[y+2]===1&&x[y+3]===1&&x[y+4]===1&&x[y+5]===0&&x[y+6]===1&&(vt.isWhiteHorizontal(x,y-4,y)||vt.isWhiteHorizontal(x,y+7,y+11))&&s++,g+6<f&&l[g][y]===1&&l[g+1][y]===0&&l[g+2][y]===1&&l[g+3][y]===1&&l[g+4][y]===1&&l[g+5][y]===0&&l[g+6][y]===1&&(vt.isWhiteVertical(l,y,g-4,g)||vt.isWhiteVertical(l,y,g+7,g+11))&&s++}return s*vt.N3}static isWhiteHorizontal(i,s,l){s=Math.max(s,0),l=Math.min(l,i.length);for(let u=s;u<l;u++)if(i[u]===1)return!1;return!0}static isWhiteVertical(i,s,l,u){l=Math.max(l,0),u=Math.min(u,i.length);for(let f=l;f<u;f++)if(i[f][s]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let s=0;const l=i.getArray(),u=i.getWidth(),f=i.getHeight();for(let x=0;x<f;x++){const C=l[x];for(let I=0;I<u;I++)C[I]===1&&s++}const g=i.getHeight()*i.getWidth();return Math.floor(Math.abs(s*2-g)*10/g)*vt.N4}static getDataMaskBit(i,s,l){let u,f;switch(i){case 0:u=l+s&1;break;case 1:u=l&1;break;case 2:u=s%3;break;case 3:u=(l+s)%3;break;case 4:u=Math.floor(l/2)+Math.floor(s/3)&1;break;case 5:f=l*s,u=(f&1)+f%3;break;case 6:f=l*s,u=(f&1)+f%3&1;break;case 7:f=l*s,u=f%3+(l+s&1)&1;break;default:throw new O("Invalid mask pattern: "+i)}return u===0}static applyMaskPenaltyRule1Internal(i,s){let l=0;const u=s?i.getHeight():i.getWidth(),f=s?i.getWidth():i.getHeight(),g=i.getArray();for(let y=0;y<u;y++){let x=0,C=-1;for(let I=0;I<f;I++){const M=s?g[y][I]:g[I][y];M===C?x++:(x>=5&&(l+=vt.N1+(x-5)),x=1,C=M)}x>=5&&(l+=vt.N1+(x-5))}return l}}vt.N1=3,vt.N2=3,vt.N3=40,vt.N4=10;class Gs{constructor(i,s){this.width=i,this.height=s;const l=new Array(s);for(let u=0;u!==s;u++)l[u]=new Uint8Array(i);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(i,s){return this.bytes[s][i]}getArray(){return this.bytes}setNumber(i,s,l){this.bytes[s][i]=l}setBoolean(i,s,l){this.bytes[s][i]=l?1:0}clear(i){for(const s of this.bytes)be.fill(s,i)}equals(i){if(!(i instanceof Gs))return!1;const s=i;if(this.width!==s.width||this.height!==s.height)return!1;for(let l=0,u=this.height;l<u;++l){const f=this.bytes[l],g=s.bytes[l];for(let y=0,x=this.width;y<x;++y)if(f[y]!==g[y])return!1}return!0}toString(){const i=new H;for(let s=0,l=this.height;s<l;++s){const u=this.bytes[s];for(let f=0,g=this.width;f<g;++f)switch(u[f]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class Hr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new H;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<Hr.NUM_MASK_PATTERNS}}Hr.NUM_MASK_PATTERNS=8;class It extends A{}It.kind="WriterException";class p{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,s,l,u,f){p.clearMatrix(f),p.embedBasicPatterns(l,f),p.embedTypeInfo(s,u,f),p.maybeEmbedVersionInfo(l,f),p.embedDataBits(i,u,f)}static embedBasicPatterns(i,s){p.embedPositionDetectionPatternsAndSeparators(s),p.embedDarkDotAtLeftBottomCorner(s),p.maybeEmbedPositionAdjustmentPatterns(i,s),p.embedTimingPatterns(s)}static embedTypeInfo(i,s,l){const u=new Be;p.makeTypeInfoBits(i,s,u);for(let f=0,g=u.getSize();f<g;++f){const y=u.get(u.getSize()-1-f),x=p.TYPE_INFO_COORDINATES[f],C=x[0],I=x[1];if(l.setBoolean(C,I,y),f<8){const M=l.getWidth()-f-1;l.setBoolean(M,8,y)}else{const P=l.getHeight()-7+(f-8);l.setBoolean(8,P,y)}}}static maybeEmbedVersionInfo(i,s){if(i.getVersionNumber()<7)return;const l=new Be;p.makeVersionInfoBits(i,l);let u=17;for(let f=0;f<6;++f)for(let g=0;g<3;++g){const y=l.get(u);u--,s.setBoolean(f,s.getHeight()-11+g,y),s.setBoolean(s.getHeight()-11+g,f,y)}}static embedDataBits(i,s,l){let u=0,f=-1,g=l.getWidth()-1,y=l.getHeight()-1;for(;g>0;){for(g===6&&(g-=1);y>=0&&y<l.getHeight();){for(let x=0;x<2;++x){const C=g-x;if(!p.isEmpty(l.get(C,y)))continue;let I;u<i.getSize()?(I=i.get(u),++u):I=!1,s!==255&&vt.getDataMaskBit(s,C,y)&&(I=!I),l.setBoolean(C,y,I)}y+=f}f=-f,y+=f,g-=2}if(u!==i.getSize())throw new It("Not all bits consumed: "+u+"/"+i.getSize())}static findMSBSet(i){return 32-me.numberOfLeadingZeros(i)}static calculateBCHCode(i,s){if(s===0)throw new O("0 polynomial");const l=p.findMSBSet(s);for(i<<=l-1;p.findMSBSet(i)>=l;)i^=s<<p.findMSBSet(i)-l;return i}static makeTypeInfoBits(i,s,l){if(!Hr.isValidMaskPattern(s))throw new It("Invalid mask pattern");const u=i.getBits()<<3|s;l.appendBits(u,5);const f=p.calculateBCHCode(u,p.TYPE_INFO_POLY);l.appendBits(f,10);const g=new Be;if(g.appendBits(p.TYPE_INFO_MASK_PATTERN,15),l.xor(g),l.getSize()!==15)throw new It("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(i,s){s.appendBits(i.getVersionNumber(),6);const l=p.calculateBCHCode(i.getVersionNumber(),p.VERSION_INFO_POLY);if(s.appendBits(l,12),s.getSize()!==18)throw new It("should not happen but we got: "+s.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let s=8;s<i.getWidth()-8;++s){const l=(s+1)%2;p.isEmpty(i.get(s,6))&&i.setNumber(s,6,l),p.isEmpty(i.get(6,s))&&i.setNumber(6,s,l)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new It;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,s,l){for(let u=0;u<8;++u){if(!p.isEmpty(l.get(i+u,s)))throw new It;l.setNumber(i+u,s,0)}}static embedVerticalSeparationPattern(i,s,l){for(let u=0;u<7;++u){if(!p.isEmpty(l.get(i,s+u)))throw new It;l.setNumber(i,s+u,0)}}static embedPositionAdjustmentPattern(i,s,l){for(let u=0;u<5;++u){const f=p.POSITION_ADJUSTMENT_PATTERN[u];for(let g=0;g<5;++g)l.setNumber(i+g,s+u,f[g])}}static embedPositionDetectionPattern(i,s,l){for(let u=0;u<7;++u){const f=p.POSITION_DETECTION_PATTERN[u];for(let g=0;g<7;++g)l.setNumber(i+g,s+u,f[g])}}static embedPositionDetectionPatternsAndSeparators(i){const s=p.POSITION_DETECTION_PATTERN[0].length;p.embedPositionDetectionPattern(0,0,i),p.embedPositionDetectionPattern(i.getWidth()-s,0,i),p.embedPositionDetectionPattern(0,i.getWidth()-s,i);const l=8;p.embedHorizontalSeparationPattern(0,l-1,i),p.embedHorizontalSeparationPattern(i.getWidth()-l,l-1,i),p.embedHorizontalSeparationPattern(0,i.getWidth()-l,i);const u=7;p.embedVerticalSeparationPattern(u,0,i),p.embedVerticalSeparationPattern(i.getHeight()-u-1,0,i),p.embedVerticalSeparationPattern(u,i.getHeight()-u,i)}static maybeEmbedPositionAdjustmentPatterns(i,s){if(i.getVersionNumber()<2)return;const l=i.getVersionNumber()-1,u=p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let f=0,g=u.length;f!==g;f++){const y=u[f];if(y>=0)for(let x=0;x!==g;x++){const C=u[x];C>=0&&p.isEmpty(s.get(C,y))&&p.embedPositionAdjustmentPattern(C-2,y-2,s)}}}}p.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),p.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),p.VERSION_INFO_POLY=7973,p.TYPE_INFO_POLY=1335,p.TYPE_INFO_MASK_PATTERN=21522;class S{constructor(i,s){this.dataBytes=i,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class N{constructor(){}static calculateMaskPenalty(i){return vt.applyMaskPenaltyRule1(i)+vt.applyMaskPenaltyRule2(i)+vt.applyMaskPenaltyRule3(i)+vt.applyMaskPenaltyRule4(i)}static encode(i,s,l=null){let u=N.DEFAULT_BYTE_MODE_ENCODING;const f=l!==null&&l.get(In.CHARACTER_SET)!==void 0;f&&(u=l.get(In.CHARACTER_SET).toString());const g=this.chooseMode(i,u),y=new Be;if(g===Ye.BYTE&&(f||N.DEFAULT_BYTE_MODE_ENCODING!==u)){const Ne=L.getCharacterSetECIByName(u);Ne!==void 0&&this.appendECI(Ne,y)}this.appendModeInfo(g,y);const x=new Be;this.appendBytes(i,g,x,u);let C;if(l!==null&&l.get(In.QR_VERSION)!==void 0){const Ne=Number.parseInt(l.get(In.QR_VERSION).toString(),10);C=He.getVersionForNumber(Ne);const Ie=this.calculateBitsNeeded(g,y,x,C);if(!this.willFit(Ie,C,s))throw new It("Data too big for requested version")}else C=this.recommendVersion(s,g,y,x);const I=new Be;I.appendBitArray(y);const M=g===Ye.BYTE?x.getSizeInBytes():i.length;this.appendLengthInfo(M,C,g,I),I.appendBitArray(x);const P=C.getECBlocksForLevel(s),j=C.getTotalCodewords()-P.getTotalECCodewords();this.terminateBits(j,I);const Q=this.interleaveWithECBytes(I,C.getTotalCodewords(),j,P.getNumBlocks()),$=new Hr;$.setECLevel(s),$.setMode(g),$.setVersion(C);const ae=C.getDimensionForVersion(),ge=new Gs(ae,ae),De=this.chooseMaskPattern(Q,s,C,ge);return $.setMaskPattern(De),p.buildMatrix(Q,s,C,De,ge),$.setMatrix(ge),$}static recommendVersion(i,s,l,u){const f=this.calculateBitsNeeded(s,l,u,He.getVersionForNumber(1)),g=this.chooseVersion(f,i),y=this.calculateBitsNeeded(s,l,u,g);return this.chooseVersion(y,i)}static calculateBitsNeeded(i,s,l,u){return s.getSize()+i.getCharacterCountBits(u)+l.getSize()}static getAlphanumericCode(i){return i<N.ALPHANUMERIC_TABLE.length?N.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,s=null){if(L.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(i))return Ye.KANJI;let l=!1,u=!1;for(let f=0,g=i.length;f<g;++f){const y=i.charAt(f);if(N.isDigit(y))l=!0;else if(this.getAlphanumericCode(y.charCodeAt(0))!==-1)u=!0;else return Ye.BYTE}return u?Ye.ALPHANUMERIC:l?Ye.NUMERIC:Ye.BYTE}static isOnlyDoubleByteKanji(i){let s;try{s=X.encode(i,L.SJIS)}catch{return!1}const l=s.length;if(l%2!==0)return!1;for(let u=0;u<l;u+=2){const f=s[u]&255;if((f<129||f>159)&&(f<224||f>235))return!1}return!0}static chooseMaskPattern(i,s,l,u){let f=Number.MAX_SAFE_INTEGER,g=-1;for(let y=0;y<Hr.NUM_MASK_PATTERNS;y++){p.buildMatrix(i,s,l,y,u);let x=this.calculateMaskPenalty(u);x<f&&(f=x,g=y)}return g}static chooseVersion(i,s){for(let l=1;l<=40;l++){const u=He.getVersionForNumber(l);if(N.willFit(i,u,s))return u}throw new It("Data too big")}static willFit(i,s,l){const u=s.getTotalCodewords(),g=s.getECBlocksForLevel(l).getTotalECCodewords(),y=u-g,x=(i+7)/8;return y>=x}static terminateBits(i,s){const l=i*8;if(s.getSize()>l)throw new It("data bits cannot fit in the QR Code"+s.getSize()+" > "+l);for(let g=0;g<4&&s.getSize()<l;++g)s.appendBit(!1);const u=s.getSize()&7;if(u>0)for(let g=u;g<8;g++)s.appendBit(!1);const f=i-s.getSizeInBytes();for(let g=0;g<f;++g)s.appendBits((g&1)===0?236:17,8);if(s.getSize()!==l)throw new It("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,s,l,u,f,g){if(u>=l)throw new It("Block ID too large");const y=i%l,x=l-y,C=Math.floor(i/l),I=C+1,M=Math.floor(s/l),P=M+1,j=C-M,Q=I-P;if(j!==Q)throw new It("EC bytes mismatch");if(l!==x+y)throw new It("RS blocks mismatch");if(i!==(M+j)*x+(P+Q)*y)throw new It("Total bytes mismatch");u<x?(f[0]=M,g[0]=j):(f[0]=P,g[0]=Q)}static interleaveWithECBytes(i,s,l,u){if(i.getSizeInBytes()!==l)throw new It("Number of bits and data bytes does not match");let f=0,g=0,y=0;const x=new Array;for(let I=0;I<u;++I){const M=new Int32Array(1),P=new Int32Array(1);N.getNumDataBytesAndNumECBytesForBlockID(s,l,u,I,M,P);const j=M[0],Q=new Uint8Array(j);i.toBytes(8*f,Q,0,j);const $=N.generateECBytes(Q,P[0]);x.push(new S(Q,$)),g=Math.max(g,j),y=Math.max(y,$.length),f+=M[0]}if(l!==f)throw new It("Data bytes does not match offset");const C=new Be;for(let I=0;I<g;++I)for(const M of x){const P=M.getDataBytes();I<P.length&&C.appendBits(P[I],8)}for(let I=0;I<y;++I)for(const M of x){const P=M.getErrorCorrectionBytes();I<P.length&&C.appendBits(P[I],8)}if(s!==C.getSizeInBytes())throw new It("Interleaving error: "+s+" and "+C.getSizeInBytes()+" differ.");return C}static generateECBytes(i,s){const l=i.length,u=new Int32Array(l+s);for(let g=0;g<l;g++)u[g]=i[g]&255;new jr(Tt.QR_CODE_FIELD_256).encode(u,s);const f=new Uint8Array(s);for(let g=0;g<s;g++)f[g]=u[l+g];return f}static appendModeInfo(i,s){s.appendBits(i.getBits(),4)}static appendLengthInfo(i,s,l,u){const f=l.getCharacterCountBits(s);if(i>=1<<f)throw new It(i+" is bigger than "+((1<<f)-1));u.appendBits(i,f)}static appendBytes(i,s,l,u){switch(s){case Ye.NUMERIC:N.appendNumericBytes(i,l);break;case Ye.ALPHANUMERIC:N.appendAlphanumericBytes(i,l);break;case Ye.BYTE:N.append8BitBytes(i,l,u);break;case Ye.KANJI:N.appendKanjiBytes(i,l);break;default:throw new It("Invalid mode: "+s)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const s=N.getDigit(i);return s>=0&&s<=9}static appendNumericBytes(i,s){const l=i.length;let u=0;for(;u<l;){const f=N.getDigit(i.charAt(u));if(u+2<l){const g=N.getDigit(i.charAt(u+1)),y=N.getDigit(i.charAt(u+2));s.appendBits(f*100+g*10+y,10),u+=3}else if(u+1<l){const g=N.getDigit(i.charAt(u+1));s.appendBits(f*10+g,7),u+=2}else s.appendBits(f,4),u++}}static appendAlphanumericBytes(i,s){const l=i.length;let u=0;for(;u<l;){const f=N.getAlphanumericCode(i.charCodeAt(u));if(f===-1)throw new It;if(u+1<l){const g=N.getAlphanumericCode(i.charCodeAt(u+1));if(g===-1)throw new It;s.appendBits(f*45+g,11),u+=2}else s.appendBits(f,6),u++}}static append8BitBytes(i,s,l){let u;try{u=X.encode(i,l)}catch(f){throw new It(f)}for(let f=0,g=u.length;f!==g;f++){const y=u[f];s.appendBits(y,8)}}static appendKanjiBytes(i,s){let l;try{l=X.encode(i,L.SJIS)}catch(f){throw new It(f)}const u=l.length;for(let f=0;f<u;f+=2){const g=l[f]&255,y=l[f+1]&255,x=g<<8&4294967295|y;let C=-1;if(x>=33088&&x<=40956?C=x-33088:x>=57408&&x<=60351&&(C=x-49472),C===-1)throw new It("Invalid byte sequence");const I=(C>>8)*192+(C&255);s.appendBits(I,13)}}static appendECI(i,s){s.appendBits(Ye.ECI.getBits(),4),s.appendBits(i.getValue(),8)}}N.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),N.DEFAULT_BYTE_MODE_ENCODING=L.UTF8.getName();class U{write(i,s,l,u=null){if(i.length===0)throw new O("Found empty contents");if(s<0||l<0)throw new O("Requested dimensions are too small: "+s+"x"+l);let f=Et.L,g=U.QUIET_ZONE_SIZE;u!==null&&(u.get(In.ERROR_CORRECTION)!==void 0&&(f=Et.fromString(u.get(In.ERROR_CORRECTION).toString())),u.get(In.MARGIN)!==void 0&&(g=Number.parseInt(u.get(In.MARGIN).toString(),10)));const y=N.encode(i,f,u);return this.renderResult(y,s,l,g)}writeToDom(i,s,l,u,f=null){typeof i=="string"&&(i=document.querySelector(i));const g=this.write(s,l,u,f);i&&i.appendChild(g)}renderResult(i,s,l,u){const f=i.getMatrix();if(f===null)throw new Li;const g=f.getWidth(),y=f.getHeight(),x=g+u*2,C=y+u*2,I=Math.max(s,x),M=Math.max(l,C),P=Math.min(Math.floor(I/x),Math.floor(M/C)),j=Math.floor((I-g*P)/2),Q=Math.floor((M-y*P)/2),$=this.createSVGElement(I,M);for(let ae=0,ge=Q;ae<y;ae++,ge+=P)for(let De=0,Ne=j;De<g;De++,Ne+=P)if(f.get(De,ae)===1){const Ie=this.createSvgRectElement(Ne,ge,P,P);$.appendChild(Ie)}return $}createSVGElement(i,s){const l=document.createElementNS(U.SVG_NS,"svg");return l.setAttributeNS(null,"height",i.toString()),l.setAttributeNS(null,"width",s.toString()),l}createSvgRectElement(i,s,l,u){const f=document.createElementNS(U.SVG_NS,"rect");return f.setAttributeNS(null,"x",i.toString()),f.setAttributeNS(null,"y",s.toString()),f.setAttributeNS(null,"height",l.toString()),f.setAttributeNS(null,"width",u.toString()),f.setAttributeNS(null,"fill","#000000"),f}}U.QUIET_ZONE_SIZE=4,U.SVG_NS="http://www.w3.org/2000/svg";class se{encode(i,s,l,u,f){if(i.length===0)throw new O("Found empty contents");if(s!==Ae.QR_CODE)throw new O("Can only encode QR_CODE, but got "+s);if(l<0||u<0)throw new O(`Requested dimensions are too small: ${l}x${u}`);let g=Et.L,y=se.QUIET_ZONE_SIZE;f!==null&&(f.get(In.ERROR_CORRECTION)!==void 0&&(g=Et.fromString(f.get(In.ERROR_CORRECTION).toString())),f.get(In.MARGIN)!==void 0&&(y=Number.parseInt(f.get(In.MARGIN).toString(),10)));const x=N.encode(i,g,f);return se.renderResult(x,l,u,y)}static renderResult(i,s,l,u){const f=i.getMatrix();if(f===null)throw new Li;const g=f.getWidth(),y=f.getHeight(),x=g+u*2,C=y+u*2,I=Math.max(s,x),M=Math.max(l,C),P=Math.min(Math.floor(I/x),Math.floor(M/C)),j=Math.floor((I-g*P)/2),Q=Math.floor((M-y*P)/2),$=new qe(I,M);for(let ae=0,ge=Q;ae<y;ae++,ge+=P)for(let De=0,Ne=j;De<g;De++,Ne+=P)f.get(De,ae)===1&&$.setRegion(Ne,ge,P,P);return $}}se.QUIET_ZONE_SIZE=4;class ye{encode(i,s,l,u,f){let g;switch(s){case Ae.QR_CODE:g=new se;break;default:throw new O("No encoder available for format "+s)}return g.encode(i,s,l,u,f)}}class Me extends ke{constructor(i,s,l,u,f,g,y,x){if(super(g,y),this.yuvData=i,this.dataWidth=s,this.dataHeight=l,this.left=u,this.top=f,u+g>s||f+y>l)throw new O("Crop rectangle does not fit within image data.");x&&this.reverseHorizontal(g,y)}getRow(i,s){if(i<0||i>=this.getHeight())throw new O("Requested row is outside the image: "+i);const l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));const u=(i+this.top)*this.dataWidth+this.left;return ie.arraycopy(this.yuvData,u,s,0,l),s}getMatrix(){const i=this.getWidth(),s=this.getHeight();if(i===this.dataWidth&&s===this.dataHeight)return this.yuvData;const l=i*s,u=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return ie.arraycopy(this.yuvData,f,u,0,l),u;for(let g=0;g<s;g++){const y=g*i;ie.arraycopy(this.yuvData,f,u,y,i),f+=this.dataWidth}return u}isCropSupported(){return!0}crop(i,s,l,u){return new Me(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+s,l,u,!1)}renderThumbnail(){const i=this.getWidth()/Me.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/Me.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(i*s),u=this.yuvData;let f=this.top*this.dataWidth+this.left;for(let g=0;g<s;g++){const y=g*i;for(let x=0;x<i;x++){const C=u[f+x*Me.THUMBNAIL_SCALE_FACTOR]&255;l[y+x]=4278190080|C*65793}f+=this.dataWidth*Me.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Me.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Me.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,s){const l=this.yuvData;for(let u=0,f=this.top*this.dataWidth+this.left;u<s;u++,f+=this.dataWidth){const g=f+i/2;for(let y=f,x=f+i-1;y<g;y++,x--){const C=l[y];l[y]=l[x],l[x]=C}}}invert(){return new We(this)}}Me.THUMBNAIL_SCALE_FACTOR=2;class ut extends ke{constructor(i,s,l,u,f,g,y){if(super(s,l),this.dataWidth=u,this.dataHeight=f,this.left=g,this.top=y,i.BYTES_PER_ELEMENT===4){const x=s*l,C=new Uint8ClampedArray(x);for(let I=0;I<x;I++){const M=i[I],P=M>>16&255,j=M>>7&510,Q=M&255;C[I]=(P+j+Q)/4&255}this.luminances=C}else this.luminances=i;if(u===void 0&&(this.dataWidth=s),f===void 0&&(this.dataHeight=l),g===void 0&&(this.left=0),y===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+l>this.dataHeight)throw new O("Crop rectangle does not fit within image data.")}getRow(i,s){if(i<0||i>=this.getHeight())throw new O("Requested row is outside the image: "+i);const l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));const u=(i+this.top)*this.dataWidth+this.left;return ie.arraycopy(this.luminances,u,s,0,l),s}getMatrix(){const i=this.getWidth(),s=this.getHeight();if(i===this.dataWidth&&s===this.dataHeight)return this.luminances;const l=i*s,u=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return ie.arraycopy(this.luminances,f,u,0,l),u;for(let g=0;g<s;g++){const y=g*i;ie.arraycopy(this.luminances,f,u,y,i),f+=this.dataWidth}return u}isCropSupported(){return!0}crop(i,s,l,u){return new ut(this.luminances,l,u,this.dataWidth,this.dataHeight,this.left+i,this.top+s)}invert(){return new We(this)}}class Rn extends L{static forName(i){return this.getCharacterSetECIByName(i)}}class Ut{}Ut.ISO_8859_1=L.ISO8859_1;class gn{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class Zi{static singletonList(i){return[i]}static min(i,s){return i.sort(s)[0]}}class Gr{constructor(i){this.previous=i}getPrevious(){return this.previous}}class fi extends Gr{constructor(i,s,l){super(i),this.value=s,this.bitCount=l}appendTo(i,s){i.appendBits(this.value,this.bitCount)}add(i,s){return new fi(this,i,s)}addBinaryShift(i,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new fi(this,i,s)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+me.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class Ji extends fi{constructor(i,s,l){super(i,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=l}appendTo(i,s){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):l===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(s[this.binaryShiftStart+l],8)}addBinaryShift(i,s){return new Ji(this,i,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function qs(D,i,s){return new Ji(D,i,s)}function qr(D,i,s){return new fi(D,i,s)}const Ra=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],xs=0,fl=1,or=2,uc=3,vr=4,No=new fi(null,0,0),Xs=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Wf(D){for(let i of D)be.fill(i,-1);return D[xs][vr]=0,D[fl][vr]=0,D[fl][xs]=28,D[uc][vr]=0,D[or][vr]=0,D[or][xs]=15,D}const Oo=Wf(be.createInt32Array(6,6));class Sr{constructor(i,s,l,u){this.token=i,this.mode=s,this.binaryShiftByteCount=l,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,s){let l=this.bitCount,u=this.token;if(i!==this.mode){let g=Xs[this.mode][i];u=qr(u,g&65535,g>>16),l+=g>>16}let f=i===or?4:5;return u=qr(u,s,f),new Sr(u,i,0,l+f)}shiftAndAppend(i,s){let l=this.token,u=this.mode===or?4:5;return l=qr(l,Oo[this.mode][i],u),l=qr(l,s,5),new Sr(l,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(i){let s=this.token,l=this.mode,u=this.bitCount;if(this.mode===vr||this.mode===or){let y=Xs[l][xs];s=qr(s,y&65535,y>>16),u+=y>>16,l=xs}let f=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,g=new Sr(s,l,this.binaryShiftByteCount+1,u+f);return g.binaryShiftByteCount===2078&&(g=g.endBinaryShift(i+1)),g}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=qs(s,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new Sr(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let s=this.bitCount+(Xs[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?s+=Sr.calculateBinaryShiftCost(i)-Sr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(s+=10),s<=i.bitCount}toBitArray(i){let s=[];for(let u=this.endBinaryShift(i.length).token;u!==null;u=u.getPrevious())s.unshift(u);let l=new Be;for(const u of s)u.appendTo(l,i);return l}toString(){return Y.format("%s bits=%d bytes=%d",Ra[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}Sr.INITIAL_STATE=new Sr(No,xs,0,0);function Ou(D){const i=Y.getCharCode(" "),s=Y.getCharCode("."),l=Y.getCharCode(",");D[xs][i]=1;const u=Y.getCharCode("Z"),f=Y.getCharCode("A");for(let P=f;P<=u;P++)D[xs][P]=P-f+2;D[fl][i]=1;const g=Y.getCharCode("z"),y=Y.getCharCode("a");for(let P=y;P<=g;P++)D[fl][P]=P-y+2;D[or][i]=1;const x=Y.getCharCode("9"),C=Y.getCharCode("0");for(let P=C;P<=x;P++)D[or][P]=P-C+2;D[or][l]=12,D[or][s]=13;const I=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let P=0;P<I.length;P++)D[uc][Y.getCharCode(I[P])]=P;const M=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let P=0;P<M.length;P++)Y.getCharCode(M[P])>0&&(D[vr][Y.getCharCode(M[P])]=P);return D}const Do=Ou(be.createInt32Array(5,256));class Ys{constructor(i){this.text=i}encode(){const i=Y.getCharCode(" "),s=Y.getCharCode(`
`);let l=Zi.singletonList(Sr.INITIAL_STATE);for(let f=0;f<this.text.length;f++){let g,y=f+1<this.text.length?this.text[f+1]:0;switch(this.text[f]){case Y.getCharCode("\r"):g=y===s?2:0;break;case Y.getCharCode("."):g=y===i?3:0;break;case Y.getCharCode(","):g=y===i?4:0;break;case Y.getCharCode(":"):g=y===i?5:0;break;default:g=0}g>0?(l=Ys.updateStateListForPair(l,f,g),f++):l=this.updateStateListForChar(l,f)}return Zi.min(l,(f,g)=>f.getBitCount()-g.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,s){const l=[];for(let u of i)this.updateStateForChar(u,s,l);return Ys.simplifyStates(l)}updateStateForChar(i,s,l){let u=this.text[s]&255,f=Do[i.getMode()][u]>0,g=null;for(let y=0;y<=vr;y++){let x=Do[y][u];if(x>0){if(g==null&&(g=i.endBinaryShift(s)),!f||y===i.getMode()||y===or){const C=g.latchAndAppend(y,x);l.push(C)}if(!f&&Oo[i.getMode()][y]>=0){const C=g.shiftAndAppend(y,x);l.push(C)}}}if(i.getBinaryShiftByteCount()>0||Do[i.getMode()][u]===0){let y=i.addBinaryShiftChar(s);l.push(y)}}static updateStateListForPair(i,s,l){const u=[];for(let f of i)this.updateStateForPair(f,s,l,u);return this.simplifyStates(u)}static updateStateForPair(i,s,l,u){let f=i.endBinaryShift(s);if(u.push(f.latchAndAppend(vr,l)),i.getMode()!==vr&&u.push(f.shiftAndAppend(vr,l)),l===3||l===4){let g=f.latchAndAppend(or,16-l).latchAndAppend(or,1);u.push(g)}if(i.getBinaryShiftByteCount()>0){let g=i.addBinaryShiftChar(s).addBinaryShiftChar(s+1);u.push(g)}}static simplifyStates(i){let s=[];for(const l of i){let u=!0;for(const f of s){if(f.isBetterThanOrEqualTo(l)){u=!1;break}l.isBetterThanOrEqualTo(f)&&(s=s.filter(g=>g!==f))}u&&s.push(l)}return s}}class Mt{constructor(){}static encodeBytes(i){return Mt.encode(i,Mt.DEFAULT_EC_PERCENT,Mt.DEFAULT_AZTEC_LAYERS)}static encode(i,s,l){let u=new Ys(i).encode(),f=me.truncDivision(u.getSize()*s,100)+11,g=u.getSize()+f,y,x,C,I,M;if(l!==Mt.DEFAULT_AZTEC_LAYERS){if(y=l<0,x=Math.abs(l),x>(y?Mt.MAX_NB_BITS_COMPACT:Mt.MAX_NB_BITS))throw new O(Y.format("Illegal value %s for layers",l));C=Mt.totalBitsInLayer(x,y),I=Mt.WORD_SIZE[x];let Ie=C-C%I;if(M=Mt.stuffBits(u,I),M.getSize()+f>Ie)throw new O("Data to large for user specified layer");if(y&&M.getSize()>I*64)throw new O("Data to large for user specified layer")}else{I=0,M=null;for(let Ie=0;;Ie++){if(Ie>Mt.MAX_NB_BITS)throw new O("Data too large for an Aztec code");if(y=Ie<=3,x=y?Ie+1:Ie,C=Mt.totalBitsInLayer(x,y),g>C)continue;(M==null||I!==Mt.WORD_SIZE[x])&&(I=Mt.WORD_SIZE[x],M=Mt.stuffBits(u,I));let At=C-C%I;if(!(y&&M.getSize()>I*64)&&M.getSize()+f<=At)break}}let P=Mt.generateCheckWords(M,C,I),j=M.getSize()/I,Q=Mt.generateModeMessage(y,x,j),$=(y?11:14)+x*4,ae=new Int32Array($),ge;if(y){ge=$;for(let Ie=0;Ie<ae.length;Ie++)ae[Ie]=Ie}else{ge=$+1+2*me.truncDivision(me.truncDivision($,2)-1,15);let Ie=me.truncDivision($,2),At=me.truncDivision(ge,2);for(let ht=0;ht<Ie;ht++){let Un=ht+me.truncDivision(ht,15);ae[Ie-ht-1]=At-Un-1,ae[Ie+ht]=At+Un+1}}let De=new qe(ge);for(let Ie=0,At=0;Ie<x;Ie++){let ht=(x-Ie)*4+(y?9:12);for(let Un=0;Un<ht;Un++){let lr=Un*2;for(let Si=0;Si<2;Si++)P.get(At+lr+Si)&&De.set(ae[Ie*2+Si],ae[Ie*2+Un]),P.get(At+ht*2+lr+Si)&&De.set(ae[Ie*2+Un],ae[$-1-Ie*2-Si]),P.get(At+ht*4+lr+Si)&&De.set(ae[$-1-Ie*2-Si],ae[$-1-Ie*2-Un]),P.get(At+ht*6+lr+Si)&&De.set(ae[$-1-Ie*2-Un],ae[Ie*2+Si])}At+=ht*8}if(Mt.drawModeMessage(De,y,ge,Q),y)Mt.drawBullsEye(De,me.truncDivision(ge,2),5);else{Mt.drawBullsEye(De,me.truncDivision(ge,2),7);for(let Ie=0,At=0;Ie<me.truncDivision($,2)-1;Ie+=15,At+=16)for(let ht=me.truncDivision(ge,2)&1;ht<ge;ht+=2)De.set(me.truncDivision(ge,2)-At,ht),De.set(me.truncDivision(ge,2)+At,ht),De.set(ht,me.truncDivision(ge,2)-At),De.set(ht,me.truncDivision(ge,2)+At)}let Ne=new gn;return Ne.setCompact(y),Ne.setSize(ge),Ne.setLayers(x),Ne.setCodeWords(j),Ne.setMatrix(De),Ne}static drawBullsEye(i,s,l){for(let u=0;u<l;u+=2)for(let f=s-u;f<=s+u;f++)i.set(f,s-u),i.set(f,s+u),i.set(s-u,f),i.set(s+u,f);i.set(s-l,s-l),i.set(s-l+1,s-l),i.set(s-l,s-l+1),i.set(s+l,s-l),i.set(s+l,s-l+1),i.set(s+l,s+l-1)}static generateModeMessage(i,s,l){let u=new Be;return i?(u.appendBits(s-1,2),u.appendBits(l-1,6),u=Mt.generateCheckWords(u,28,4)):(u.appendBits(s-1,5),u.appendBits(l-1,11),u=Mt.generateCheckWords(u,40,4)),u}static drawModeMessage(i,s,l,u){let f=me.truncDivision(l,2);if(s)for(let g=0;g<7;g++){let y=f-3+g;u.get(g)&&i.set(y,f-5),u.get(g+7)&&i.set(f+5,y),u.get(20-g)&&i.set(y,f+5),u.get(27-g)&&i.set(f-5,y)}else for(let g=0;g<10;g++){let y=f-5+g+me.truncDivision(g,5);u.get(g)&&i.set(y,f-7),u.get(g+10)&&i.set(f+7,y),u.get(29-g)&&i.set(y,f+7),u.get(39-g)&&i.set(f-7,y)}}static generateCheckWords(i,s,l){let u=i.getSize()/l,f=new jr(Mt.getGF(l)),g=me.truncDivision(s,l),y=Mt.bitsToWords(i,l,g);f.encode(y,g-u);let x=s%l,C=new Be;C.appendBits(0,x);for(const I of Array.from(y))C.appendBits(I,l);return C}static bitsToWords(i,s,l){let u=new Int32Array(l),f,g;for(f=0,g=i.getSize()/s;f<g;f++){let y=0;for(let x=0;x<s;x++)y|=i.get(f*s+x)?1<<s-x-1:0;u[f]=y}return u}static getGF(i){switch(i){case 4:return Tt.AZTEC_PARAM;case 6:return Tt.AZTEC_DATA_6;case 8:return Tt.AZTEC_DATA_8;case 10:return Tt.AZTEC_DATA_10;case 12:return Tt.AZTEC_DATA_12;default:throw new O("Unsupported word size "+i)}}static stuffBits(i,s){let l=new Be,u=i.getSize(),f=(1<<s)-2;for(let g=0;g<u;g+=s){let y=0;for(let x=0;x<s;x++)(g+x>=u||i.get(g+x))&&(y|=1<<s-1-x);(y&f)===f?(l.appendBits(y&f,s),g--):(y&f)===0?(l.appendBits(y|1,s),g--):l.appendBits(y,s)}return l}static totalBitsInLayer(i,s){return((s?88:112)+16*i)*i}}Mt.DEFAULT_EC_PERCENT=33,Mt.DEFAULT_AZTEC_LAYERS=0,Mt.MAX_NB_BITS=32,Mt.MAX_NB_BITS_COMPACT=4,Mt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Mo{encode(i,s,l,u){return this.encodeWithHints(i,s,l,u,null)}encodeWithHints(i,s,l,u,f){let g=Ut.ISO_8859_1,y=Mt.DEFAULT_EC_PERCENT,x=Mt.DEFAULT_AZTEC_LAYERS;return f!=null&&(f.has(In.CHARACTER_SET)&&(g=Rn.forName(f.get(In.CHARACTER_SET).toString())),f.has(In.ERROR_CORRECTION)&&(y=me.parseInt(f.get(In.ERROR_CORRECTION).toString())),f.has(In.AZTEC_LAYERS)&&(x=me.parseInt(f.get(In.AZTEC_LAYERS).toString()))),Mo.encodeLayers(i,s,l,u,g,y,x)}static encodeLayers(i,s,l,u,f,g,y){if(s!==Ae.AZTEC)throw new O("Can only encode AZTEC, but got "+s);let x=Mt.encode(Y.getBytes(i,f),g,y);return Mo.renderResult(x,l,u)}static renderResult(i,s,l){let u=i.getMatrix();if(u==null)throw new Li;let f=u.getWidth(),g=u.getHeight(),y=Math.max(s,f),x=Math.max(l,g),C=Math.min(y/f,x/g),I=(y-f*C)/2,M=(x-g*C)/2,P=new qe(y,x);for(let j=0,Q=M;j<g;j++,Q+=C)for(let $=0,ae=I;$<f;$++,ae+=C)u.get($,j)&&P.setRegion(ae,Q,C,C);return P}}n.AbstractExpandedDecoder=Cn,n.ArgumentException=b,n.ArithmeticException=is,n.AztecCode=gn,n.AztecCodeReader=Ps,n.AztecCodeWriter=Mo,n.AztecDecoder=Xt,n.AztecDetector=To,n.AztecDetectorResult=wo,n.AztecEncoder=Mt,n.AztecHighLevelEncoder=Ys,n.AztecPoint=si,n.BarcodeFormat=Ae,n.Binarizer=ee,n.BinaryBitmap=V,n.BitArray=Be,n.BitMatrix=qe,n.BitSource=Sn,n.BrowserAztecCodeReader=ll,n.BrowserBarcodeReader=So,n.BrowserCodeReader=Oe,n.BrowserDatamatrixCodeReader=Ur,n.BrowserMultiFormatReader=zr,n.BrowserPDF417Reader=ul,n.BrowserQRCodeReader=hl,n.BrowserQRCodeSvgWriter=U,n.CharacterSetECI=L,n.ChecksumException=G,n.Code128Reader=Re,n.Code39Reader=Wt,n.DataMatrixDecodedBitStreamParser=vi,n.DataMatrixReader=Bi,n.DecodeHintType=xe,n.DecoderResult=qt,n.DefaultGridSampler=Aa,n.DetectorResult=xa,n.EAN13Reader=ln,n.EncodeHintType=In,n.Exception=A,n.FormatException=k,n.GenericGF=Tt,n.GenericGFPoly=On,n.GlobalHistogramBinarizer=J,n.GridSampler=rs,n.GridSamplerInstance=yi,n.HTMLCanvasElementLuminanceSource=Qe,n.HybridBinarizer=re,n.ITFReader=ot,n.IllegalArgumentException=O,n.IllegalStateException=Li,n.InvertedLuminanceSource=We,n.LuminanceSource=ke,n.MathUtils=tt,n.MultiFormatOneDReader=Ti,n.MultiFormatReader=Ro,n.MultiFormatWriter=ye,n.NotFoundException=le,n.OneDReader=Yt,n.PDF417DecodedBitStreamParser=de,n.PDF417DecoderErrorCorrection=Ar,n.PDF417Reader=bn,n.PDF417ResultMetadata=os,n.PerspectiveTransform=pi,n.PlanarYUVLuminanceSource=Me,n.QRCodeByteMatrix=Gs,n.QRCodeDataMask=Xn,n.QRCodeDecodedBitStreamParser=$t,n.QRCodeDecoderErrorCorrectionLevel=Et,n.QRCodeDecoderFormatInformation=Ln,n.QRCodeEncoder=N,n.QRCodeEncoderQRCode=Hr,n.QRCodeMaskUtil=vt,n.QRCodeMatrixUtil=p,n.QRCodeMode=Ye,n.QRCodeReader=Fi,n.QRCodeVersion=He,n.QRCodeWriter=se,n.RGBLuminanceSource=ut,n.RSS14Reader=Gt,n.RSSExpandedReader=ve,n.ReaderException=Hs,n.ReedSolomonDecoder=pr,n.ReedSolomonEncoder=jr,n.ReedSolomonException=mi,n.Result=Pe,n.ResultMetadataType=yt,n.ResultPoint=Fe,n.StringUtils=Y,n.UnsupportedOperationException=W,n.VideoInputDevice=Z,n.WhiteRectangleDetector=En,n.WriterException=It,n.ZXingArrays=be,n.ZXingCharset=Rn,n.ZXingInteger=me,n.ZXingStandardCharsets=Ut,n.ZXingStringBuilder=H,n.ZXingStringEncoding=X,n.ZXingSystem=ie,n.createAbstractExpandedDecoder=Pi,Object.defineProperty(n,"__esModule",{value:!0})}))})(Jc,Jc.exports)),Jc.exports}var wn=d4();const g4=L0(wn),m4=Uw({__proto__:null,default:g4},[wn]);var IE=(function(){function a(e,n,o){if(this.formatMap=new Map([[je.QR_CODE,wn.BarcodeFormat.QR_CODE],[je.AZTEC,wn.BarcodeFormat.AZTEC],[je.CODABAR,wn.BarcodeFormat.CODABAR],[je.CODE_39,wn.BarcodeFormat.CODE_39],[je.CODE_93,wn.BarcodeFormat.CODE_93],[je.CODE_128,wn.BarcodeFormat.CODE_128],[je.DATA_MATRIX,wn.BarcodeFormat.DATA_MATRIX],[je.MAXICODE,wn.BarcodeFormat.MAXICODE],[je.ITF,wn.BarcodeFormat.ITF],[je.EAN_13,wn.BarcodeFormat.EAN_13],[je.EAN_8,wn.BarcodeFormat.EAN_8],[je.PDF_417,wn.BarcodeFormat.PDF_417],[je.RSS_14,wn.BarcodeFormat.RSS_14],[je.RSS_EXPANDED,wn.BarcodeFormat.RSS_EXPANDED],[je.UPC_A,wn.BarcodeFormat.UPC_A],[je.UPC_E,wn.BarcodeFormat.UPC_E],[je.UPC_EAN_EXTENSION,wn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!m4)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=o;var h=this.createZXingFormats(e),m=new Map;m.set(wn.DecodeHintType.POSSIBLE_FORMATS,h),m.set(wn.DecodeHintType.TRY_HARDER,!1),this.hints=m}return a.prototype.decodeAsync=function(e){var n=this;return new Promise(function(o,h){try{o(n.decode(e))}catch(m){h(m)}})},a.prototype.decode=function(e){var n=new wn.MultiFormatReader(this.verbose,this.hints),o=new wn.HTMLCanvasElementLuminanceSource(e),h=new wn.BinaryBitmap(new wn.HybridBinarizer(o)),m=n.decode(h);return{text:m.text,format:aA.create(this.toHtml5QrcodeSupportedFormats(m.format)),debugData:this.createDebugData()}},a.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,h){e.set(n,o)}),e},a.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},a.prototype.createZXingFormats=function(e){for(var n=[],o=0,h=e;o<h.length;o++){var m=h[o];this.formatMap.has(m)?n.push(this.formatMap.get(m)):this.logger.logError("".concat(m," is not supported by")+"ZXingHtml5QrcodeShim")}return n},a.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},a})(),p4=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(_){_(m)})}return new(n||(n=Promise))(function(m,_){function v(b){try{A(o.next(b))}catch(O){_(O)}}function T(b){try{A(o.throw(b))}catch(O){_(O)}}function A(b){b.done?m(b.value):h(b.value).then(v,T)}A((o=o.apply(a,e||[])).next())})},y4=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,_;return _={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function v(A){return function(b){return T([A,b])}}function T(A){if(o)throw new TypeError("Generator is already executing.");for(;_&&(_=0,A[0]&&(n=0)),n;)try{if(o=1,h&&(m=A[0]&2?h.return:A[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,A[1])).done)return m;switch(h=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,h=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){n.label=A[1];break}if(A[0]===6&&n.label<m[1]){n.label=m[1],m=A;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(A);break}m[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(a,n)}catch(b){A=[6,b],h=0}finally{o=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},RE=(function(){function a(e,n,o){if(this.formatMap=new Map([[je.QR_CODE,"qr_code"],[je.AZTEC,"aztec"],[je.CODABAR,"codabar"],[je.CODE_39,"code_39"],[je.CODE_93,"code_93"],[je.CODE_128,"code_128"],[je.DATA_MATRIX,"data_matrix"],[je.ITF,"itf"],[je.EAN_13,"ean_13"],[je.EAN_8,"ean_8"],[je.PDF_417,"pdf417"],[je.UPC_A,"upc_a"],[je.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!a.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=o;var h=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(h),!this.detector)throw"BarcodeDetector detector not supported"}return a.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},a.prototype.decodeAsync=function(e){return p4(this,void 0,void 0,function(){var n,o;return y4(this,function(h){switch(h.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=h.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return o=this.selectLargestBarcode(n),[2,{text:o.rawValue,format:aA.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}]}})})},a.prototype.selectLargestBarcode=function(e){for(var n=null,o=0,h=0,m=e;h<m.length;h++){var _=m[h],v=_.boundingBox.width*_.boundingBox.height;v>o&&(o=v,n=_)}if(!n)throw"No largest barcode found";return n},a.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],o=0,h=e;o<h.length;o++){var m=h[o];this.formatMap.has(m)?n.push(this.formatMap.get(m)):this.logger.warn("".concat(m," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},a.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},a.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,h){e.set(n,o)}),e},a.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},a})(),NE=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(_){_(m)})}return new(n||(n=Promise))(function(m,_){function v(b){try{A(o.next(b))}catch(O){_(O)}}function T(b){try{A(o.throw(b))}catch(O){_(O)}}function A(b){b.done?m(b.value):h(b.value).then(v,T)}A((o=o.apply(a,e||[])).next())})},OE=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,_;return _={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function v(A){return function(b){return T([A,b])}}function T(A){if(o)throw new TypeError("Generator is already executing.");for(;_&&(_=0,A[0]&&(n=0)),n;)try{if(o=1,h&&(m=A[0]&2?h.return:A[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,A[1])).done)return m;switch(h=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,h=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){n.label=A[1];break}if(A[0]===6&&n.label<m[1]){n.label=m[1],m=A;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(A);break}m[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(a,n)}catch(b){A=[6,b],h=0}finally{o=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},E4=(function(){function a(e,n,o,h){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=o,n&&RE.isSupported()?(this.primaryDecoder=new RE(e,o,h),this.secondaryDecoder=new IE(e,o,h)):this.primaryDecoder=new IE(e,o,h)}return a.prototype.decodeAsync=function(e){return NE(this,void 0,void 0,function(){var n;return OE(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,o.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},a.prototype.decodeRobustlyAsync=function(e){return NE(this,void 0,void 0,function(){var n,o;return OE(this,function(h){switch(h.label){case 0:n=performance.now(),h.label=1;case 1:return h.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,h.sent()];case 3:if(o=h.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw o;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},a.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},a.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},a.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,o=this.executionResults;n<o.length;n++){var h=o[n];e+=h}var m=e/this.executionResults.length;console.log("".concat(m," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},a})(),Mg=(function(){var a=function(e,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(o[m]=h[m])},a(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");a(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Cf=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(_){_(m)})}return new(n||(n=Promise))(function(m,_){function v(b){try{A(o.next(b))}catch(O){_(O)}}function T(b){try{A(o.throw(b))}catch(O){_(O)}}function A(b){b.done?m(b.value):h(b.value).then(v,T)}A((o=o.apply(a,e||[])).next())})},vf=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,_;return _={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function v(A){return function(b){return T([A,b])}}function T(A){if(o)throw new TypeError("Generator is already executing.");for(;_&&(_=0,A[0]&&(n=0)),n;)try{if(o=1,h&&(m=A[0]&2?h.return:A[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,A[1])).done)return m;switch(h=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,h=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){n.label=A[1];break}if(A[0]===6&&n.label<m[1]){n.label=m[1],m=A;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(A);break}m[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(a,n)}catch(b){A=[6,b],h=0}finally{o=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},lA=(function(){function a(e,n){this.name=e,this.track=n}return a.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},a.prototype.apply=function(e){var n={};n[this.name]=e;var o={advanced:[n]};return this.track.applyConstraints(o)},a.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},a})(),_4=(function(a){Mg(e,a);function e(n,o){return a.call(this,n,o)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var o={};o[this.name]=n;var h={advanced:[o]};return this.track.applyConstraints(h)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),o=n[this.name];return{min:o.min,max:o.max,step:o.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(lA),x4=(function(a){Mg(e,a);function e(n){return a.call(this,"zoom",n)||this}return e})(_4),A4=(function(a){Mg(e,a);function e(n){return a.call(this,"torch",n)||this}return e})(lA),w4=(function(){function a(e){this.track=e}return a.prototype.zoomFeature=function(){return new x4(this.track)},a.prototype.torchFeature=function(){return new A4(this.track)},a})(),T4=(function(){function a(e,n,o){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=o,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return a.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},a.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var o=e.surface.clientWidth,h=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(o,h),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},a.create=function(e,n,o,h){return Cf(this,void 0,void 0,function(){var m,_;return vf(this,function(v){switch(v.label){case 0:return m=new a(e,n,h),o.aspectRatio?(_={aspectRatio:o.aspectRatio},[4,m.getFirstTrackOrFail().applyConstraints(_)]):[3,2];case 1:v.sent(),v.label=2;case 2:return m.setupSurface(),[2,m]}})})},a.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},a.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},a.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},a.prototype.resume=function(e){this.failIfClosed();var n=this,o=function(){setTimeout(e,200),n.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.play()},a.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},a.prototype.getSurface=function(){return this.failIfClosed(),this.surface},a.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},a.prototype.applyVideoConstraints=function(e){return Cf(this,void 0,void 0,function(){return vf(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},a.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,o){var h=e.mediaStream.getVideoTracks(),m=h.length,_=0;e.mediaStream.getVideoTracks().forEach(function(v){e.mediaStream.removeTrack(v),v.stop(),++_,_>=m&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},a.prototype.getCapabilities=function(){return new w4(this.getFirstTrackOrFail())},a})(),C4=(function(){function a(e){this.mediaStream=e}return a.prototype.render=function(e,n,o){return Cf(this,void 0,void 0,function(){return vf(this,function(h){return[2,T4.create(e,this.mediaStream,n,o)]})})},a.create=function(e){return Cf(this,void 0,void 0,function(){var n,o;return vf(this,function(h){switch(h.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return o=h.sent(),[2,new a(o)]}})})},a})(),DE=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(_){_(m)})}return new(n||(n=Promise))(function(m,_){function v(b){try{A(o.next(b))}catch(O){_(O)}}function T(b){try{A(o.throw(b))}catch(O){_(O)}}function A(b){b.done?m(b.value):h(b.value).then(v,T)}A((o=o.apply(a,e||[])).next())})},ME=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,_;return _={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function v(A){return function(b){return T([A,b])}}function T(A){if(o)throw new TypeError("Generator is already executing.");for(;_&&(_=0,A[0]&&(n=0)),n;)try{if(o=1,h&&(m=A[0]&2?h.return:A[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,A[1])).done)return m;switch(h=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,h=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){n.label=A[1];break}if(A[0]===6&&n.label<m[1]){n.label=m[1],m=A;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(A);break}m[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(a,n)}catch(b){A=[6,b],h=0}finally{o=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},v4=(function(){function a(){}return a.failIfNotSupported=function(){return DE(this,void 0,void 0,function(){return ME(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new a]})})},a.prototype.create=function(e){return DE(this,void 0,void 0,function(){return ME(this,function(n){return[2,C4.create(e)]})})},a})(),S4=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(_){_(m)})}return new(n||(n=Promise))(function(m,_){function v(b){try{A(o.next(b))}catch(O){_(O)}}function T(b){try{A(o.throw(b))}catch(O){_(O)}}function A(b){b.done?m(b.value):h(b.value).then(v,T)}A((o=o.apply(a,e||[])).next())})},b4=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,_;return _={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function v(A){return function(b){return T([A,b])}}function T(A){if(o)throw new TypeError("Generator is already executing.");for(;_&&(_=0,A[0]&&(n=0)),n;)try{if(o=1,h&&(m=A[0]&2?h.return:A[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,A[1])).done)return m;switch(h=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,h=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){n.label=A[1];break}if(A[0]===6&&n.label<m[1]){n.label=m[1],m=A;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(A);break}m[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(a,n)}catch(b){A=[6,b],h=0}finally{o=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},I4=(function(){function a(){}return a.retrieve=function(){if(navigator.mediaDevices)return a.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?a.getCamerasFromMediaStreamTrack():a.rejectWithError()},a.rejectWithError=function(){var e=Gl.unableToQuerySupportedDevices();return a.isHttpsOrLocalhost()||(e=Gl.insecureContextCameraQueryError()),Promise.reject(e)},a.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},a.getCamerasFromMediaDevices=function(){return S4(this,void 0,void 0,function(){var e,n,o,h,m,_,v;return b4(this,function(T){switch(T.label){case 0:return e=function(A){for(var b=A.getVideoTracks(),O=0,V=b;O<V.length;O++){var G=V[O];G.enabled=!1,G.stop(),A.removeTrack(G)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=T.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(o=T.sent(),h=[],m=0,_=o;m<_.length;m++)v=_[m],v.kind==="videoinput"&&h.push({id:v.deviceId,label:v.label});return e(n),[2,h]}})})},a.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var o=function(m){for(var _=[],v=0,T=m;v<T.length;v++){var A=T[v];A.kind==="video"&&_.push({id:A.id,label:A.label})}e(_)},h=MediaStreamTrack;h.getSources(o)})},a})(),Hn;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.NOT_STARTED=1]="NOT_STARTED",a[a.SCANNING=2]="SCANNING",a[a.PAUSED=3]="PAUSED"})(Hn||(Hn={}));var R4=(function(){function a(){this.state=Hn.NOT_STARTED,this.onGoingTransactionNewState=Hn.UNKNOWN}return a.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},a.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},a.prototype.execute=function(){if(this.onGoingTransactionNewState===Hn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Hn.UNKNOWN,this.directTransition(e)},a.prototype.cancel=function(){if(this.onGoingTransactionNewState===Hn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Hn.UNKNOWN},a.prototype.getState=function(){return this.state},a.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Hn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},a.prototype.validateTransition=function(e){switch(this.state){case Hn.UNKNOWN:throw"Transition from unknown is not allowed";case Hn.NOT_STARTED:this.failIfNewStateIs(e,[Hn.PAUSED]);break;case Hn.SCANNING:break;case Hn.PAUSED:break}},a.prototype.failIfNewStateIs=function(e,n){for(var o=0,h=n;o<h.length;o++){var m=h[o];if(e===m)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},a})(),N4=(function(){function a(e){this.stateManager=e}return a.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},a.prototype.directTransition=function(e){this.stateManager.directTransition(e)},a.prototype.getState=function(){return this.stateManager.getState()},a.prototype.canScanFile=function(){return this.stateManager.getState()===Hn.NOT_STARTED},a.prototype.isScanning=function(){return this.stateManager.getState()!==Hn.NOT_STARTED},a.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Hn.SCANNING},a.prototype.isPaused=function(){return this.stateManager.getState()===Hn.PAUSED},a})(),O4=(function(){function a(){}return a.create=function(){return new N4(new R4)},a})(),D4=(function(){var a=function(e,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(o[m]=h[m])},a(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");a(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Mr=(function(a){D4(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(c4),M4=(function(){function a(e,n){this.logger=n,this.fps=Mr.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Mr.DEFAULT_DISABLE_FLIP}return a.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?oA.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},a.prototype.isShadedBoxEnabled=function(){return!ua(this.qrbox)},a.create=function(e,n){return new a(e,n)},a})(),L4=(function(){function a(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var o;typeof n=="boolean"?this.verbose=n===!0:n&&(o=n,this.verbose=o.verbose===!0,o.experimentalFeatures),this.logger=new h4(this.verbose),this.qrcode=new E4(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(o),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=O4.create()}return a.prototype.start=function(e,n,o,h){var m=this;if(!e)throw"cameraIdOrConfig is required";if(!o||typeof o!="function")throw"qrCodeSuccessCallback is required and should be a function.";var _;h?_=h:_=this.verbose?this.logger.log:function(){};var v=M4.create(n,this.logger);this.clearElement();var T=!1;v.videoConstraints&&(v.isMediaStreamConstraintsValid()?T=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var A=T,b=document.getElementById(this.elementId);b.clientWidth?b.clientWidth:Mr.DEFAULT_WIDTH,b.style.position="relative",this.shouldScan=!0,this.element=b;var O=this,V=this.stateManagerProxy.startTransition(Hn.SCANNING);return new Promise(function(G,ee){var ie=A?v.videoConstraints:O.createVideoConstraints(e);if(!ie){V.cancel(),ee("videoConstraints should be defined");return}var he={};(!A||v.aspectRatio)&&(he.aspectRatio=v.aspectRatio);var Le={onRenderSurfaceReady:function(be,me){O.setupUi(be,me,v),O.isScanning=!0,O.foreverScan(v,o,_)}};v4.failIfNotSupported().then(function(be){be.create(ie).then(function(me){return me.render(m.element,he,Le).then(function(Be){O.renderedCamera=Be,V.execute(),G(null)}).catch(function(Be){V.cancel(),ee(Be)})}).catch(function(me){V.cancel(),ee(Gl.errorGettingUserMedia(me))})}).catch(function(be){V.cancel(),ee(Gl.cameraStreamingNotSupported())})})},a.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Hn.PAUSED),this.showPausedState(),(ua(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},a.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(Hn.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},a.prototype.getState=function(){return this.stateManagerProxy.getState()},a.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Hn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var o=function(){if(e.element){var m=document.getElementById(Mr.SHADED_REGION_ELEMENT_ID);m&&e.element.removeChild(m)}},h=this;return this.renderedCamera.close().then(function(){return h.renderedCamera=null,h.element&&(h.element.removeChild(h.canvasElement),h.canvasElement=null),o(),h.qrRegion&&(h.qrRegion=null),h.context&&(h.context=null),n.execute(),h.hidePausedState(),h.isScanning=!1,Promise.resolve()})},a.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(o){return o.decodedText})},a.prototype.scanFileV2=function(e,n){var o=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ua(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(h,m){o.possiblyCloseLastScanImageFile(),o.clearElement(),o.lastScanImageFile=URL.createObjectURL(e);var _=new Image;_.onload=function(){var v=_.width,T=_.height,A=document.getElementById(o.elementId),b=A.clientWidth?A.clientWidth:Mr.DEFAULT_WIDTH,O=Math.max(A.clientHeight?A.clientHeight:T,Mr.FILE_SCAN_MIN_HEIGHT),V=o.computeCanvasDrawConfig(v,T,b,O);if(n){var G=o.createCanvasElement(b,O,"qr-canvas-visible");G.style.display="inline-block",A.appendChild(G);var ee=G.getContext("2d");if(!ee)throw"Unable to get 2d context from canvas";ee.canvas.width=b,ee.canvas.height=O,ee.drawImage(_,0,0,v,T,V.x,V.y,V.width,V.height)}var ie=Mr.FILE_SCAN_HIDDEN_CANVAS_PADDING,he=Math.max(_.width,V.width),Le=Math.max(_.height,V.height),be=he+2*ie,me=Le+2*ie,Be=o.createCanvasElement(be,me);A.appendChild(Be);var $e=Be.getContext("2d");if(!$e)throw"Unable to get 2d context from canvas";$e.canvas.width=be,$e.canvas.height=me,$e.drawImage(_,0,0,v,T,ie,ie,he,Le);try{o.qrcode.decodeRobustlyAsync(Be).then(function(xe){h(SE.createFromQrcodeResult(xe))}).catch(m)}catch(xe){m("QR code parse error, error = ".concat(xe))}},_.onerror=m,_.onabort=m,_.onstalled=m,_.onsuspend=m,_.src=URL.createObjectURL(e)})},a.prototype.clear=function(){this.clearElement()},a.getCameras=function(){return I4.retrieve()},a.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},a.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},a.prototype.applyVideoConstraints=function(e){if(e){if(!oA.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},a.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},a.prototype.getSupportedFormats=function(e){var n=[je.QR_CODE,je.AZTEC,je.CODABAR,je.CODE_39,je.CODE_93,je.CODE_128,je.DATA_MATRIX,je.MAXICODE,je.ITF,je.EAN_13,je.EAN_8,je.PDF_417,je.RSS_14,je.RSS_EXPANDED,je.UPC_A,je.UPC_E,je.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var o=[],h=0,m=e.formatsToSupport;h<m.length;h++){var _=m[h];l4(_)?o.push(_):this.logger.warn("Invalid format: ".concat(_," passed in config, ignoring."))}if(o.length===0)throw"None of formatsToSupport match supported values.";return o},a.prototype.getUseBarCodeDetectorIfSupported=function(e){if(ua(e))return!0;if(!ua(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(ua(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return ua(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},a.prototype.validateQrboxSize=function(e,n,o){var h=this,m=o.qrbox;this.validateQrboxConfig(m);var _=this.toQrdimensions(e,n,m),v=function(A){if(A<Mr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Mr.MIN_QR_BOX_SIZE,"px.")},T=function(A){return A>e&&(h.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),A=e),A};v(_.width),v(_.height),_.width=T(_.width)},a.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},a.prototype.toQrdimensions=function(e,n,o){if(typeof o=="number")return{width:o,height:o};if(typeof o=="function")try{return o(e,n)}catch(h){throw new Error("qrbox config was passed as a function but it failed with unknown error"+h)}return o},a.prototype.setupUi=function(e,n,o){o.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,o);var h=ua(o.qrbox)?{width:e,height:n}:o.qrbox;this.validateQrboxConfig(h);var m=this.toQrdimensions(e,n,h);m.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var _=o.isShadedBoxEnabled()&&m.height<=n,v={x:0,y:0,width:e,height:n},T=_?this.getShadedRegionBounds(e,n,m):v,A=this.createCanvasElement(T.width,T.height),b={willReadFrequently:!0},O=A.getContext("2d",b);O.canvas.width=T.width,O.canvas.height=T.height,this.element.append(A),_&&this.possiblyInsertShadingElement(this.element,e,n,m),this.createScannerPausedUiElement(this.element),this.qrRegion=T,this.context=O,this.canvasElement=A},a.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Gl.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},a.prototype.scanContext=function(e,n){var o=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(h){return e(h.text,SE.createFromQrcodeResult(h)),o.possiblyUpdateShaders(!0),!0}).catch(function(h){o.possiblyUpdateShaders(!1);var m=Gl.codeParseError(h);return n(m,u4.createFrom(m)),!1})},a.prototype.foreverScan=function(e,n,o){var h=this;if(this.shouldScan&&this.renderedCamera){var m=this.renderedCamera.getSurface(),_=m.videoWidth/m.clientWidth,v=m.videoHeight/m.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var T=this.qrRegion.width*_,A=this.qrRegion.height*v,b=this.qrRegion.x*_,O=this.qrRegion.y*v;this.context.drawImage(m,b,O,T,A,0,0,this.qrRegion.width,this.qrRegion.height);var V=function(){h.foreverScanTimeout=setTimeout(function(){h.foreverScan(e,n,o)},h.getTimeoutFps(e.fps))};this.scanContext(n,o).then(function(G){!G&&e.disableFlip!==!0?(h.context.translate(h.context.canvas.width,0),h.context.scale(-1,1),h.scanContext(n,o).finally(function(){V()})):V()}).catch(function(G){h.logger.logError("Error happend while scanning context",G),V()})}},a.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",o="deviceId",h={user:!0,environment:!0},m="exact",_=function(ee){if(ee in h)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(ee,"'")},v=Object.keys(e);if(v.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(v.length," keys");var T=Object.keys(e)[0];if(T!==n&&T!==o)throw"Only '".concat(n,"' and '").concat(o,"' ")+" are supported for 'cameraIdOrConfig'";if(T===n){var A=e.facingMode;if(typeof A=="string"){if(_(A))return{facingMode:A}}else if(typeof A=="object")if(m in A){if(_(A["".concat(m)]))return{facingMode:{exact:A["".concat(m)]}}}else throw"'facingMode' should be string or object with"+" ".concat(m," as key.");else{var b=typeof A;throw"Invalid type of 'facingMode' = ".concat(b)}}else{var O=e.deviceId;if(typeof O=="string")return{deviceId:O};if(typeof O=="object"){if(m in O)return{deviceId:{exact:O["".concat(m)]}};throw"'deviceId' should be string or object with"+" ".concat(m," as key.")}else{var V=typeof O;throw"Invalid type of 'deviceId' = ".concat(V)}}}var G=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(G)},a.prototype.computeCanvasDrawConfig=function(e,n,o,h){if(e<=o&&n<=h){var m=(o-e)/2,_=(h-n)/2;return{x:m,y:_,width:e,height:n}}else{var v=e,T=n;return e>o&&(n=o/e*n,e=o),n>h&&(e=h/n*e,n=h),this.logger.log("Image downsampled from "+"".concat(v,"X").concat(T)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,o,h)}},a.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},a.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Mr.BORDER_SHADER_MATCH_COLOR:Mr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},a.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},a.prototype.createCanvasElement=function(e,n,o){var h=e,m=n,_=document.createElement("canvas");return _.style.width="".concat(h,"px"),_.style.height="".concat(m,"px"),_.style.display="none",_.id=ua(o)?"qr-canvas":o,_},a.prototype.getShadedRegionBounds=function(e,n,o){if(o.width>e||o.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-o.width)/2,y:(n-o.height)/2,width:o.width,height:o.height}},a.prototype.possiblyInsertShadingElement=function(e,n,o,h){if(!(n-h.width<1||o-h.height<1)){var m=document.createElement("div");m.style.position="absolute";var _=(n-h.width)/2,v=(o-h.height)/2;if(m.style.borderLeft="".concat(_,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderRight="".concat(_,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderTop="".concat(v,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderBottom="".concat(v,"px solid rgba(0, 0, 0, 0.48)"),m.style.boxSizing="border-box",m.style.top="0px",m.style.bottom="0px",m.style.left="0px",m.style.right="0px",m.id="".concat(Mr.SHADED_REGION_ELEMENT_ID),n-h.width<11||o-h.height<11)this.hasBorderShaders=!1;else{var T=5,A=40;this.insertShaderBorders(m,A,T,-T,null,0,!0),this.insertShaderBorders(m,A,T,-T,null,0,!1),this.insertShaderBorders(m,A,T,null,-T,0,!0),this.insertShaderBorders(m,A,T,null,-T,0,!1),this.insertShaderBorders(m,T,A+T,-T,null,-T,!0),this.insertShaderBorders(m,T,A+T,null,-T,-T,!0),this.insertShaderBorders(m,T,A+T,-T,null,-T,!1),this.insertShaderBorders(m,T,A+T,null,-T,-T,!1),this.hasBorderShaders=!0}e.append(m)}},a.prototype.insertShaderBorders=function(e,n,o,h,m,_,v){var T=document.createElement("div");T.style.position="absolute",T.style.backgroundColor=Mr.BORDER_SHADER_DEFAULT_COLOR,T.style.width="".concat(n,"px"),T.style.height="".concat(o,"px"),h!==null&&(T.style.top="".concat(h,"px")),m!==null&&(T.style.bottom="".concat(m,"px")),v?T.style.left="".concat(_,"px"):T.style.right="".concat(_,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(T),e.appendChild(T)},a.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},a.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},a.prototype.getTimeoutFps=function(e){return 1e3/e},a})(),LE;(function(a){a[a.STATUS_DEFAULT=0]="STATUS_DEFAULT",a[a.STATUS_SUCCESS=1]="STATUS_SUCCESS",a[a.STATUS_WARNING=2]="STATUS_WARNING",a[a.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(LE||(LE={}));const P4=({onCode:a})=>(nt.useEffect(()=>{const e="qr-reader",n=new L4(e);return n.start({facingMode:"environment"},{fps:10,qrbox:250},o=>{a(o)},()=>{}).catch(o=>{console.error("Kunne ikke starte QR-leser:",o)}),()=>{n.stop().then(()=>n.clear()).catch(()=>{})}},[a]),q.jsx("div",{id:"qr-reader",style:{width:"100%"}}));function B4({user:a}){const[e,n]=nt.useState(""),[o,h]=nt.useState(!1),m=a.term??11,[_,v]=nt.useState([]),[T,A]=nt.useState(!1),[b,O]=nt.useState(0),[V,G]=nt.useState(!1),[ee,ie]=nt.useState("idle"),[he,Le]=nt.useState(null),[be,me]=nt.useState(null),Be=a.semesterStatus&&a.semesterStatus!=="aktiv",$e=()=>{ie("idle"),Le(null),me(null),n(""),G(!1)},xe=async L=>{if(!(!L||L.length<6)){h(!0),ie("idle"),Le(null);try{const W=Gi(nn,"sessions"),X=so(W,Ss("code","==",L)),Y=await ns(X);if(Y.empty){ie("error"),Le("Fant ingen kt med denne koden."),n(""),G(!1),h(!1);return}const H=Y.docs[0],qe=H.data(),le=Lr(nn,"sessions",H.id,"attendance",a.uid);if((await Af(le)).exists()){ie("error"),Le("Du er allerede registrert p denne kten."),n(""),G(!1),h(!1);return}await Dg(le,{userId:a.uid,studentName:a.displayName,studentEmail:a.email,createdAt:on.now(),status:"present"});const re=qe.name||"kten";me(re),ie("success"),Le(null),G(!1),n(""),O(ke=>ke+1)}catch(W){console.error(W),ie("error"),Le("Noe gikk galt ved registrering av oppmte."),n(""),G(!1)}finally{h(!1)}}},k=L=>{if(!L||o)return;const W=L.replace(/\D/g,"").slice(0,6);W.length===6&&(n(W),xe(W))};nt.useEffect(()=>{(async()=>{A(!0);try{const W=Gi(nn,"requirements"),X=so(W,Ss("term","==",m)),H=(await ns(X)).docs.map(Ae=>{const rt=Ae.data();return{category:rt.category,requiredCount:rt.requiredCount}}),qe=Gi(nn,"sessions"),le=so(qe,Ss("term","==",m)),re=(await ns(le)).docs.map(Ae=>{const rt=Ae.data();return{id:Ae.id,category:rt.category}}),ke=Gi(nn,"times"),We=so(ke,Ss("term","==",m)),Z=(await ns(We)).docs.map(Ae=>({category:Ae.data().category})),pe=new Map;for(const Ae of Z)Ae.category&&pe.set(Ae.category,(pe.get(Ae.category)??0)+1);const Oe=new Map;for(const Ae of re){if(!Ae.category)continue;const rt=Lr(nn,"sessions",Ae.id,"attendance",a.uid);(await Af(rt)).exists()&&Oe.set(Ae.category,(Oe.get(Ae.category)??0)+1)}const Pe=new Set;for(const Ae of H)Pe.add(Ae.category);for(const Ae of re)Ae.category&&Pe.add(Ae.category);for(const Ae of Z)Ae.category&&Pe.add(Ae.category);const et=[];Pe.forEach(Ae=>{const rt=H.find(On=>On.category===Ae),yt=rt?rt.requiredCount:null,qt=pe.get(Ae)??0,Yi=Oe.get(Ae)??0;et.push({category:Ae,attendedCount:Yi,totalSessions:qt,requiredCount:yt})}),et.sort((Ae,rt)=>Ae.category.localeCompare(rt.category,"nb-NO",{sensitivity:"base"})),v(et)}catch(W){console.error(W),v([])}finally{A(!1)}})()},[m,a.uid,b]);const F=L=>{const X=L.target.value.replace(/\D/g,"").slice(0,6);n(X),X.length===6&&!o&&xe(X)};return nt.useEffect(()=>{if(ee==="idle")return;const W=setTimeout(()=>{$e()},ee==="success"?3e3:2e3);return()=>clearTimeout(W)},[ee]),q.jsxs("div",{className:"page-card",children:[q.jsx("h2",{style:{textAlign:"center",marginBottom:"1rem"},children:"Student  registrer oppmte"}),Be&&q.jsxs("p",{style:{color:"red",textAlign:"center"},children:['Du er markert som "',a.semesterStatus,'" dette semesteret. Ingen oppmtekrav, men du kan fortsatt registrere oppmte.']}),q.jsx("div",{style:{marginTop:"1rem",textAlign:"center"},children:ee==="success"?q.jsxs(q.Fragment,{children:[q.jsx("div",{style:{fontSize:"4rem",color:"#16a34a",marginBottom:"0.5rem"},children:""}),q.jsx("h3",{style:{margin:0,marginBottom:"0.3rem"},children:"Oppmte registrert"}),be&&q.jsx("p",{style:{margin:0,marginBottom:"1rem",fontSize:"1rem",color:"#374151"},children:be}),q.jsx("button",{type:"button",onClick:$e,style:{marginTop:"0.5rem",padding:"0.5rem 1.2rem",borderRadius:"999px",border:"none",background:"#2563eb",color:"white",fontWeight:500,cursor:"pointer",fontSize:"0.95rem"},children:"Registrer en kode til"})]}):ee==="error"?q.jsxs(q.Fragment,{children:[q.jsx("div",{style:{fontSize:"4rem",color:"#dc2626",marginBottom:"0.5rem"},children:""}),q.jsx("h3",{style:{margin:0,marginBottom:"0.3rem"},children:"Kunne ikke registrere oppmte"}),he&&q.jsx("p",{style:{margin:0,marginBottom:"1rem",fontSize:"0.95rem",color:"#374151"},children:he}),q.jsx("button",{type:"button",onClick:$e,style:{marginTop:"0.5rem",padding:"0.5rem 1.2rem",borderRadius:"999px",border:"none",background:"#6b7280",color:"white",fontWeight:500,cursor:"pointer",fontSize:"0.95rem"},children:"Prv en kode til"})]}):q.jsxs(q.Fragment,{children:[q.jsx("label",{style:{display:"block",marginBottom:"0.3rem"},children:"6-sifret kode fra lrer"}),q.jsx("input",{value:e,onChange:F,maxLength:6,placeholder:"482931",style:{padding:"0.5rem 0.8rem",fontSize:"1.2rem",letterSpacing:"0.3em",textAlign:"center",borderRadius:"0.5rem",border:"1px solid #d1d5db",minWidth:"10rem"}}),q.jsx("p",{style:{fontSize:"0.8rem",color:"#6b7280",marginTop:"0.4rem"},children:"Koden registreres automatisk nr du har skrevet inn 6 siffer."}),q.jsx("button",{type:"button",onClick:()=>G(L=>!L),style:{marginTop:"0.5rem",padding:"0.4rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:V?"#e5e7eb":"#f9fafb",cursor:"pointer",fontSize:"0.9rem"},children:V?"Stopp skanning":"Skann QR-kode"}),V&&q.jsx("div",{style:{marginTop:"0.8rem",display:"flex",justifyContent:"center"},children:q.jsx("div",{style:{width:"260px",maxWidth:"100%",borderRadius:"0.75rem",overflow:"hidden",border:"1px solid #d1d5db"},children:q.jsx(P4,{onCode:k})})})]})}),q.jsx("hr",{style:{marginTop:"2rem",marginBottom:"1rem"}}),q.jsxs("section",{children:[q.jsxs("h3",{children:["Oppmteoversikt termin ",m]}),T?q.jsx("p",{style:{textAlign:"center"},children:" "}):_.length===0?q.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"Ingen registrerte timer for denne terminen enn."}):q.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[q.jsx("thead",{children:q.jsxs("tr",{children:[q.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"Gruppe"}),q.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"Registrerte oppmter"}),q.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"Krav"})]})}),q.jsx("tbody",{children:_.map(L=>{const X={padding:"0.3rem",borderBottom:"1px solid #f3f4f6",background:L.requiredCount!=null&&L.attendedCount>=L.requiredCount?"#dcfce7":"transparent"};return q.jsxs("tr",{children:[q.jsx("td",{style:X,children:L.category}),q.jsx("td",{style:X,children:L.totalSessions>0?`${L.attendedCount}/${L.totalSessions}`:L.attendedCount}),q.jsx("td",{style:X,children:L.requiredCount??"-"})]},L.category)})})]})]})]})}var k4=Object.defineProperty,Sf=Object.getOwnPropertySymbols,cA=Object.prototype.hasOwnProperty,uA=Object.prototype.propertyIsEnumerable,PE=(a,e,n)=>e in a?k4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,D0=(a,e)=>{for(var n in e||(e={}))cA.call(e,n)&&PE(a,n,e[n]);if(Sf)for(var n of Sf(e))uA.call(e,n)&&PE(a,n,e[n]);return a},M0=(a,e)=>{var n={};for(var o in a)cA.call(a,o)&&e.indexOf(o)<0&&(n[o]=a[o]);if(a!=null&&Sf)for(var o of Sf(a))e.indexOf(o)<0&&uA.call(a,o)&&(n[o]=a[o]);return n};var il;(a=>{const e=class Ot{constructor(T,A,b,O){if(this.version=T,this.errorCorrectionLevel=A,this.modules=[],this.isFunction=[],T<Ot.MIN_VERSION||T>Ot.MAX_VERSION)throw new RangeError("Version value out of range");if(O<-1||O>7)throw new RangeError("Mask value out of range");this.size=T*4+17;let V=[];for(let ee=0;ee<this.size;ee++)V.push(!1);for(let ee=0;ee<this.size;ee++)this.modules.push(V.slice()),this.isFunction.push(V.slice());this.drawFunctionPatterns();const G=this.addEccAndInterleave(b);if(this.drawCodewords(G),O==-1){let ee=1e9;for(let ie=0;ie<8;ie++){this.applyMask(ie),this.drawFormatBits(ie);const he=this.getPenaltyScore();he<ee&&(O=ie,ee=he),this.applyMask(ie)}}h(0<=O&&O<=7),this.mask=O,this.applyMask(O),this.drawFormatBits(O),this.isFunction=[]}static encodeText(T,A){const b=a.QrSegment.makeSegments(T);return Ot.encodeSegments(b,A)}static encodeBinary(T,A){const b=a.QrSegment.makeBytes(T);return Ot.encodeSegments([b],A)}static encodeSegments(T,A,b=1,O=40,V=-1,G=!0){if(!(Ot.MIN_VERSION<=b&&b<=O&&O<=Ot.MAX_VERSION)||V<-1||V>7)throw new RangeError("Invalid value");let ee,ie;for(ee=b;;ee++){const me=Ot.getNumDataCodewords(ee,A)*8,Be=_.getTotalBits(T,ee);if(Be<=me){ie=Be;break}if(ee>=O)throw new RangeError("Data too long")}for(const me of[Ot.Ecc.MEDIUM,Ot.Ecc.QUARTILE,Ot.Ecc.HIGH])G&&ie<=Ot.getNumDataCodewords(ee,me)*8&&(A=me);let he=[];for(const me of T){n(me.mode.modeBits,4,he),n(me.numChars,me.mode.numCharCountBits(ee),he);for(const Be of me.getData())he.push(Be)}h(he.length==ie);const Le=Ot.getNumDataCodewords(ee,A)*8;h(he.length<=Le),n(0,Math.min(4,Le-he.length),he),n(0,(8-he.length%8)%8,he),h(he.length%8==0);for(let me=236;he.length<Le;me^=253)n(me,8,he);let be=[];for(;be.length*8<he.length;)be.push(0);return he.forEach((me,Be)=>be[Be>>>3]|=me<<7-(Be&7)),new Ot(ee,A,be,V)}getModule(T,A){return 0<=T&&T<this.size&&0<=A&&A<this.size&&this.modules[A][T]}getModules(){return this.modules}drawFunctionPatterns(){for(let b=0;b<this.size;b++)this.setFunctionModule(6,b,b%2==0),this.setFunctionModule(b,6,b%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const T=this.getAlignmentPatternPositions(),A=T.length;for(let b=0;b<A;b++)for(let O=0;O<A;O++)b==0&&O==0||b==0&&O==A-1||b==A-1&&O==0||this.drawAlignmentPattern(T[b],T[O]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(T){const A=this.errorCorrectionLevel.formatBits<<3|T;let b=A;for(let V=0;V<10;V++)b=b<<1^(b>>>9)*1335;const O=(A<<10|b)^21522;h(O>>>15==0);for(let V=0;V<=5;V++)this.setFunctionModule(8,V,o(O,V));this.setFunctionModule(8,7,o(O,6)),this.setFunctionModule(8,8,o(O,7)),this.setFunctionModule(7,8,o(O,8));for(let V=9;V<15;V++)this.setFunctionModule(14-V,8,o(O,V));for(let V=0;V<8;V++)this.setFunctionModule(this.size-1-V,8,o(O,V));for(let V=8;V<15;V++)this.setFunctionModule(8,this.size-15+V,o(O,V));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let T=this.version;for(let b=0;b<12;b++)T=T<<1^(T>>>11)*7973;const A=this.version<<12|T;h(A>>>18==0);for(let b=0;b<18;b++){const O=o(A,b),V=this.size-11+b%3,G=Math.floor(b/3);this.setFunctionModule(V,G,O),this.setFunctionModule(G,V,O)}}drawFinderPattern(T,A){for(let b=-4;b<=4;b++)for(let O=-4;O<=4;O++){const V=Math.max(Math.abs(O),Math.abs(b)),G=T+O,ee=A+b;0<=G&&G<this.size&&0<=ee&&ee<this.size&&this.setFunctionModule(G,ee,V!=2&&V!=4)}}drawAlignmentPattern(T,A){for(let b=-2;b<=2;b++)for(let O=-2;O<=2;O++)this.setFunctionModule(T+O,A+b,Math.max(Math.abs(O),Math.abs(b))!=1)}setFunctionModule(T,A,b){this.modules[A][T]=b,this.isFunction[A][T]=!0}addEccAndInterleave(T){const A=this.version,b=this.errorCorrectionLevel;if(T.length!=Ot.getNumDataCodewords(A,b))throw new RangeError("Invalid argument");const O=Ot.NUM_ERROR_CORRECTION_BLOCKS[b.ordinal][A],V=Ot.ECC_CODEWORDS_PER_BLOCK[b.ordinal][A],G=Math.floor(Ot.getNumRawDataModules(A)/8),ee=O-G%O,ie=Math.floor(G/O);let he=[];const Le=Ot.reedSolomonComputeDivisor(V);for(let me=0,Be=0;me<O;me++){let $e=T.slice(Be,Be+ie-V+(me<ee?0:1));Be+=$e.length;const xe=Ot.reedSolomonComputeRemainder($e,Le);me<ee&&$e.push(0),he.push($e.concat(xe))}let be=[];for(let me=0;me<he[0].length;me++)he.forEach((Be,$e)=>{(me!=ie-V||$e>=ee)&&be.push(Be[me])});return h(be.length==G),be}drawCodewords(T){if(T.length!=Math.floor(Ot.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let A=0;for(let b=this.size-1;b>=1;b-=2){b==6&&(b=5);for(let O=0;O<this.size;O++)for(let V=0;V<2;V++){const G=b-V,ie=(b+1&2)==0?this.size-1-O:O;!this.isFunction[ie][G]&&A<T.length*8&&(this.modules[ie][G]=o(T[A>>>3],7-(A&7)),A++)}}h(A==T.length*8)}applyMask(T){if(T<0||T>7)throw new RangeError("Mask value out of range");for(let A=0;A<this.size;A++)for(let b=0;b<this.size;b++){let O;switch(T){case 0:O=(b+A)%2==0;break;case 1:O=A%2==0;break;case 2:O=b%3==0;break;case 3:O=(b+A)%3==0;break;case 4:O=(Math.floor(b/3)+Math.floor(A/2))%2==0;break;case 5:O=b*A%2+b*A%3==0;break;case 6:O=(b*A%2+b*A%3)%2==0;break;case 7:O=((b+A)%2+b*A%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[A][b]&&O&&(this.modules[A][b]=!this.modules[A][b])}}getPenaltyScore(){let T=0;for(let V=0;V<this.size;V++){let G=!1,ee=0,ie=[0,0,0,0,0,0,0];for(let he=0;he<this.size;he++)this.modules[V][he]==G?(ee++,ee==5?T+=Ot.PENALTY_N1:ee>5&&T++):(this.finderPenaltyAddHistory(ee,ie),G||(T+=this.finderPenaltyCountPatterns(ie)*Ot.PENALTY_N3),G=this.modules[V][he],ee=1);T+=this.finderPenaltyTerminateAndCount(G,ee,ie)*Ot.PENALTY_N3}for(let V=0;V<this.size;V++){let G=!1,ee=0,ie=[0,0,0,0,0,0,0];for(let he=0;he<this.size;he++)this.modules[he][V]==G?(ee++,ee==5?T+=Ot.PENALTY_N1:ee>5&&T++):(this.finderPenaltyAddHistory(ee,ie),G||(T+=this.finderPenaltyCountPatterns(ie)*Ot.PENALTY_N3),G=this.modules[he][V],ee=1);T+=this.finderPenaltyTerminateAndCount(G,ee,ie)*Ot.PENALTY_N3}for(let V=0;V<this.size-1;V++)for(let G=0;G<this.size-1;G++){const ee=this.modules[V][G];ee==this.modules[V][G+1]&&ee==this.modules[V+1][G]&&ee==this.modules[V+1][G+1]&&(T+=Ot.PENALTY_N2)}let A=0;for(const V of this.modules)A=V.reduce((G,ee)=>G+(ee?1:0),A);const b=this.size*this.size,O=Math.ceil(Math.abs(A*20-b*10)/b)-1;return h(0<=O&&O<=9),T+=O*Ot.PENALTY_N4,h(0<=T&&T<=2568888),T}getAlignmentPatternPositions(){if(this.version==1)return[];{const T=Math.floor(this.version/7)+2,A=this.version==32?26:Math.ceil((this.version*4+4)/(T*2-2))*2;let b=[6];for(let O=this.size-7;b.length<T;O-=A)b.splice(1,0,O);return b}}static getNumRawDataModules(T){if(T<Ot.MIN_VERSION||T>Ot.MAX_VERSION)throw new RangeError("Version number out of range");let A=(16*T+128)*T+64;if(T>=2){const b=Math.floor(T/7)+2;A-=(25*b-10)*b-55,T>=7&&(A-=36)}return h(208<=A&&A<=29648),A}static getNumDataCodewords(T,A){return Math.floor(Ot.getNumRawDataModules(T)/8)-Ot.ECC_CODEWORDS_PER_BLOCK[A.ordinal][T]*Ot.NUM_ERROR_CORRECTION_BLOCKS[A.ordinal][T]}static reedSolomonComputeDivisor(T){if(T<1||T>255)throw new RangeError("Degree out of range");let A=[];for(let O=0;O<T-1;O++)A.push(0);A.push(1);let b=1;for(let O=0;O<T;O++){for(let V=0;V<A.length;V++)A[V]=Ot.reedSolomonMultiply(A[V],b),V+1<A.length&&(A[V]^=A[V+1]);b=Ot.reedSolomonMultiply(b,2)}return A}static reedSolomonComputeRemainder(T,A){let b=A.map(O=>0);for(const O of T){const V=O^b.shift();b.push(0),A.forEach((G,ee)=>b[ee]^=Ot.reedSolomonMultiply(G,V))}return b}static reedSolomonMultiply(T,A){if(T>>>8||A>>>8)throw new RangeError("Byte out of range");let b=0;for(let O=7;O>=0;O--)b=b<<1^(b>>>7)*285,b^=(A>>>O&1)*T;return h(b>>>8==0),b}finderPenaltyCountPatterns(T){const A=T[1];h(A<=this.size*3);const b=A>0&&T[2]==A&&T[3]==A*3&&T[4]==A&&T[5]==A;return(b&&T[0]>=A*4&&T[6]>=A?1:0)+(b&&T[6]>=A*4&&T[0]>=A?1:0)}finderPenaltyTerminateAndCount(T,A,b){return T&&(this.finderPenaltyAddHistory(A,b),A=0),A+=this.size,this.finderPenaltyAddHistory(A,b),this.finderPenaltyCountPatterns(b)}finderPenaltyAddHistory(T,A){A[0]==0&&(T+=this.size),A.pop(),A.unshift(T)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],a.QrCode=e;function n(v,T,A){if(T<0||T>31||v>>>T)throw new RangeError("Value out of range");for(let b=T-1;b>=0;b--)A.push(v>>>b&1)}function o(v,T){return(v>>>T&1)!=0}function h(v){if(!v)throw new Error("Assertion error")}const m=class jn{constructor(T,A,b){if(this.mode=T,this.numChars=A,this.bitData=b,A<0)throw new RangeError("Invalid argument");this.bitData=b.slice()}static makeBytes(T){let A=[];for(const b of T)n(b,8,A);return new jn(jn.Mode.BYTE,T.length,A)}static makeNumeric(T){if(!jn.isNumeric(T))throw new RangeError("String contains non-numeric characters");let A=[];for(let b=0;b<T.length;){const O=Math.min(T.length-b,3);n(parseInt(T.substring(b,b+O),10),O*3+1,A),b+=O}return new jn(jn.Mode.NUMERIC,T.length,A)}static makeAlphanumeric(T){if(!jn.isAlphanumeric(T))throw new RangeError("String contains unencodable characters in alphanumeric mode");let A=[],b;for(b=0;b+2<=T.length;b+=2){let O=jn.ALPHANUMERIC_CHARSET.indexOf(T.charAt(b))*45;O+=jn.ALPHANUMERIC_CHARSET.indexOf(T.charAt(b+1)),n(O,11,A)}return b<T.length&&n(jn.ALPHANUMERIC_CHARSET.indexOf(T.charAt(b)),6,A),new jn(jn.Mode.ALPHANUMERIC,T.length,A)}static makeSegments(T){return T==""?[]:jn.isNumeric(T)?[jn.makeNumeric(T)]:jn.isAlphanumeric(T)?[jn.makeAlphanumeric(T)]:[jn.makeBytes(jn.toUtf8ByteArray(T))]}static makeEci(T){let A=[];if(T<0)throw new RangeError("ECI assignment value out of range");if(T<128)n(T,8,A);else if(T<16384)n(2,2,A),n(T,14,A);else if(T<1e6)n(6,3,A),n(T,21,A);else throw new RangeError("ECI assignment value out of range");return new jn(jn.Mode.ECI,0,A)}static isNumeric(T){return jn.NUMERIC_REGEX.test(T)}static isAlphanumeric(T){return jn.ALPHANUMERIC_REGEX.test(T)}getData(){return this.bitData.slice()}static getTotalBits(T,A){let b=0;for(const O of T){const V=O.mode.numCharCountBits(A);if(O.numChars>=1<<V)return 1/0;b+=4+V+O.bitData.length}return b}static toUtf8ByteArray(T){T=encodeURI(T);let A=[];for(let b=0;b<T.length;b++)T.charAt(b)!="%"?A.push(T.charCodeAt(b)):(A.push(parseInt(T.substring(b+1,b+3),16)),b+=2);return A}};m.NUMERIC_REGEX=/^[0-9]*$/,m.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,m.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let _=m;a.QrSegment=m})(il||(il={}));(a=>{(e=>{const n=class{constructor(h,m){this.ordinal=h,this.formatBits=m}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(a.QrCode||(a.QrCode={}))})(il||(il={}));(a=>{(e=>{const n=class{constructor(h,m){this.modeBits=h,this.numBitsCharCount=m}numCharCountBits(h){return this.numBitsCharCount[Math.floor((h+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(a.QrSegment||(a.QrSegment={}))})(il||(il={}));var ql=il;var V4={L:ql.QrCode.Ecc.LOW,M:ql.QrCode.Ecc.MEDIUM,Q:ql.QrCode.Ecc.QUARTILE,H:ql.QrCode.Ecc.HIGH},hA=128,fA="L",dA="#FFFFFF",gA="#000000",mA=!1,pA=1,U4=4,F4=0,z4=.1;function yA(a,e=0){const n=[];return a.forEach(function(o,h){let m=null;o.forEach(function(_,v){if(!_&&m!==null){n.push(`M${m+e} ${h+e}h${v-m}v1H${m+e}z`),m=null;return}if(v===o.length-1){if(!_)return;m===null?n.push(`M${v+e},${h+e} h1v1H${v+e}z`):n.push(`M${m+e},${h+e} h${v+1-m}v1H${m+e}z`);return}_&&m===null&&(m=v)})}),n.join("")}function EA(a,e){return a.slice().map((n,o)=>o<e.y||o>=e.y+e.h?n:n.map((h,m)=>m<e.x||m>=e.x+e.w?h:!1))}function j4(a,e,n,o){if(o==null)return null;const h=a.length+n*2,m=Math.floor(e*z4),_=h/e,v=(o.width||m)*_,T=(o.height||m)*_,A=o.x==null?a.length/2-v/2:o.x*_,b=o.y==null?a.length/2-T/2:o.y*_,O=o.opacity==null?1:o.opacity;let V=null;if(o.excavate){let ee=Math.floor(A),ie=Math.floor(b),he=Math.ceil(v+A-ee),Le=Math.ceil(T+b-ie);V={x:ee,y:ie,w:he,h:Le}}const G=o.crossOrigin;return{x:A,y:b,h:T,w:v,excavation:V,opacity:O,crossOrigin:G}}function H4(a,e){return e!=null?Math.max(Math.floor(e),0):a?U4:F4}function _A({value:a,level:e,minVersion:n,includeMargin:o,marginSize:h,imageSettings:m,size:_,boostLevel:v}){let T=ni.useMemo(()=>{const ee=(Array.isArray(a)?a:[a]).reduce((ie,he)=>(ie.push(...ql.QrSegment.makeSegments(he)),ie),[]);return ql.QrCode.encodeSegments(ee,V4[e],n,void 0,void 0,v)},[a,e,n,v]);const{cells:A,margin:b,numCells:O,calculatedImageSettings:V}=ni.useMemo(()=>{let G=T.getModules();const ee=H4(o,h),ie=G.length+ee*2,he=j4(G,_,ee,m);return{cells:G,margin:ee,numCells:ie,calculatedImageSettings:he}},[T,_,m,o,h]);return{qrcode:T,margin:b,cells:A,numCells:O,calculatedImageSettings:V}}var G4=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),xA=ni.forwardRef(function(e,n){const o=e,{value:h,size:m=hA,level:_=fA,bgColor:v=dA,fgColor:T=gA,includeMargin:A=mA,minVersion:b=pA,boostLevel:O,marginSize:V,imageSettings:G}=o,ie=M0(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:he}=ie,Le=M0(ie,["style"]),be=G?.src,me=ni.useRef(null),Be=ni.useRef(null),$e=ni.useCallback(qe=>{me.current=qe,typeof n=="function"?n(qe):n&&(n.current=qe)},[n]),[xe,k]=ni.useState(!1),{margin:F,cells:L,numCells:W,calculatedImageSettings:X}=_A({value:h,level:_,minVersion:b,boostLevel:O,includeMargin:A,marginSize:V,imageSettings:G,size:m});ni.useEffect(()=>{if(me.current!=null){const qe=me.current,le=qe.getContext("2d");if(!le)return;let J=L;const re=Be.current,ke=X!=null&&re!==null&&re.complete&&re.naturalHeight!==0&&re.naturalWidth!==0;ke&&X.excavation!=null&&(J=EA(L,X.excavation));const We=window.devicePixelRatio||1;qe.height=qe.width=m*We;const Qe=m/W*We;le.scale(Qe,Qe),le.fillStyle=v,le.fillRect(0,0,W,W),le.fillStyle=T,G4?le.fill(new Path2D(yA(J,F))):L.forEach(function(Z,pe){Z.forEach(function(Oe,Pe){Oe&&le.fillRect(Pe+F,pe+F,1,1)})}),X&&(le.globalAlpha=X.opacity),ke&&le.drawImage(re,X.x+F,X.y+F,X.w,X.h)}}),ni.useEffect(()=>{k(!1)},[be]);const Y=D0({height:m,width:m},he);let H=null;return be!=null&&(H=ni.createElement("img",{src:be,key:be,style:{display:"none"},onLoad:()=>{k(!0)},ref:Be,crossOrigin:X?.crossOrigin})),ni.createElement(ni.Fragment,null,ni.createElement("canvas",D0({style:Y,height:m,width:m,ref:$e,role:"img"},Le)),H)});xA.displayName="QRCodeCanvas";var q4=ni.forwardRef(function(e,n){const o=e,{value:h,size:m=hA,level:_=fA,bgColor:v=dA,fgColor:T=gA,includeMargin:A=mA,minVersion:b=pA,boostLevel:O,title:V,marginSize:G,imageSettings:ee}=o,ie=M0(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:he,cells:Le,numCells:be,calculatedImageSettings:me}=_A({value:h,level:_,minVersion:b,boostLevel:O,includeMargin:A,marginSize:G,imageSettings:ee,size:m});let Be=Le,$e=null;ee!=null&&me!=null&&(me.excavation!=null&&(Be=EA(Le,me.excavation)),$e=ni.createElement("image",{href:ee.src,height:me.h,width:me.w,x:me.x+he,y:me.y+he,preserveAspectRatio:"none",opacity:me.opacity,crossOrigin:me.crossOrigin}));const xe=yA(Be,he);return ni.createElement("svg",D0({height:m,width:m,viewBox:`0 0 ${be} ${be}`,ref:n,role:"img"},ie),!!V&&ni.createElement("title",null,V),ni.createElement("path",{fill:v,d:`M0,0 h${be}v${be}H0z`,shapeRendering:"crispEdges"}),ni.createElement("path",{fill:T,d:xe,shapeRendering:"crispEdges"}),$e)});q4.displayName="QRCodeSVG";function AA({user:a}){const[e,n]=nt.useState([]),[o,h]=nt.useState(a.term??11),[m,_]=nt.useState(""),[v,T]=nt.useState(null),[A,b]=nt.useState([]),[O,V]=nt.useState(!0),[G,ee]=nt.useState(!1),[ie,he]=nt.useState([]),[Le,be]=nt.useState(!0),[me,Be]=nt.useState(""),[$e,xe]=nt.useState(!1),k=nt.useRef(null),F=nt.useRef(null);nt.useEffect(()=>{(async()=>{V(!0);const ke=(await ns(Gi(nn,"times"))).docs.map(We=>{const Qe=We.data();return{id:We.id,name:Qe.name,category:Qe.category,term:Qe.term}});n(ke),V(!1)})()},[]),nt.useEffect(()=>{(async()=>{be(!0);const re=Gi(nn,"users"),ke=so(re,Ss("role","==","student")),Qe=(await ns(ke)).docs.map(Z=>{const pe=Z.data();return{id:Z.id,name:pe.name??pe.displayName??null,email:pe.email,term:pe.term??null}});he(Qe),be(!1)})()},[]),nt.useEffect(()=>{if(!v){b([]);return}const J=Gi(nn,"sessions",v.id,"attendance"),re=r4(J,ke=>{const We=ke.docs.map(Qe=>{const Z=Qe.data();return{id:Qe.id,studentName:Z.studentName??null,studentEmail:Z.studentEmail??null,createdAt:Z.createdAt}}).sort((Qe,Z)=>{const pe=Qe.createdAt?.toMillis?.()??0,Oe=Z.createdAt?.toMillis?.()??0;return pe-Oe});b(We)});return()=>re()},[v?.id]),nt.useEffect(()=>{v&&k.current&&k.current.scrollIntoView({behavior:"smooth",block:"start"})},[v]);const L=nt.useMemo(()=>e.filter(J=>J.term===o),[e,o]),W=nt.useMemo(()=>{const J=m.trim().toLowerCase();return J?L.filter(re=>re.name.toLowerCase().includes(J)||re.category.toLowerCase().includes(J)).sort((re,ke)=>re.name.localeCompare(ke.name,"nb-NO",{sensitivity:"base"})):[]},[L,m]),X=nt.useMemo(()=>{const J=me.trim().toLowerCase();return!J||!v?[]:ie.filter(re=>{if(re.term&&re.term!==v.term)return!1;const ke=(re.name??"").toLowerCase(),We=re.email.toLowerCase();return ke.includes(J)||We.includes(J)}).slice(0,10)},[ie,me,v]),Y=async J=>{const re=e.find(Oe=>Oe.id===J);if(!re)return;if(v){const Oe=Lr(nn,"sessions",v.id);await wf(Oe,{isOpen:!1}),T(null)}const ke=Math.floor(1e5+Math.random()*9e5),We=String(ke),Qe=Gi(nn,"sessions"),pe={id:(await N0(Qe,{timeId:re.id,name:re.name,category:re.category,term:re.term,code:We,teacherId:a.uid,teacherName:a.displayName,teacherEmail:a.email,createdAt:on.now(),isOpen:!0})).id,timeId:re.id,name:re.name,category:re.category,term:re.term,code:We,teacherId:a.uid,createdAt:on.now()};T(pe)},H=async J=>{_(J.name),ee(!1),await Y(J.id),F.current&&F.current.blur()},qe=async()=>{if(!v)return;const J=Lr(nn,"sessions",v.id);await wf(J,{isOpen:!1}),T(null),b([])},le=async J=>{if(v)try{const re=Lr(nn,"sessions",v.id,"attendance",J.id);if((await Af(re)).exists()){alert("Studenten er allerede registrert p denne kten.");return}await Dg(re,{userId:J.id,studentName:J.name??null,studentEmail:J.email,createdAt:on.now(),status:"present",addedManually:!0,addedBy:a.uid}),Be(""),xe(!1)}catch(re){console.error(re),alert("Kunne ikke legge til student manuelt.")}};return O?q.jsx("div",{className:"page-card",children:"Laster lrerdata..."}):q.jsxs("div",{className:"page-card",children:[q.jsx("h2",{style:{textAlign:"center",marginBottom:"1rem"},children:"Lrer  oppmte"}),q.jsxs("section",{style:{marginTop:"1rem"},children:[q.jsxs("div",{style:{marginBottom:"0.75rem"},children:[q.jsx("label",{children:"Termin"}),q.jsx("br",{}),q.jsx("select",{value:o,onChange:J=>{const re=parseInt(J.target.value,10);h(re),_(""),ee(!1),T(null),b([])},style:{width:"100%",padding:"0.4rem",fontSize:"16px"},children:[1,2,3,4,5,6,7,8,9,10,11,12].map(J=>q.jsxs("option",{value:J,children:["Termin ",J]},J))})]}),q.jsxs("div",{style:{position:"relative",marginBottom:"0.75rem"},children:[q.jsx("label",{children:'Time (sk f.eks. "ort")'}),q.jsx("br",{}),q.jsx("input",{ref:F,value:m,onChange:J=>{_(J.target.value),ee(!0)},onFocus:()=>{m.trim().length>0&&ee(!0)},placeholder:"Start  skrive navnet p timen...",style:{width:"100%",padding:"0.4rem",fontSize:"16px"}}),G&&W.length>0&&q.jsx("ul",{style:{position:"absolute",top:"100%",left:0,right:0,zIndex:10,background:"white",border:"1px solid #e5e7eb",borderRadius:"0.5rem",marginTop:"0.2rem",listStyle:"none",padding:0,maxHeight:"220px",overflowY:"auto",boxShadow:"0 10px 20px rgba(0,0,0,0.08)"},children:W.map(J=>q.jsxs("li",{onClick:()=>H(J),style:{padding:"0.4rem 0.6rem",cursor:"pointer",borderBottom:"1px solid #f3f4f6"},onMouseDown:re=>re.preventDefault(),children:[q.jsx("div",{children:J.name}),q.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[J.category,"  termin ",J.term]})]},J.id))})]})]}),v&&q.jsxs("section",{ref:k,style:{marginTop:"2rem",padding:"1rem",border:"1px solid #e5e7eb",borderRadius:"0.75rem",background:"#f9fafb"},children:[q.jsxs("div",{style:{textAlign:"center"},children:[q.jsxs("h3",{style:{marginTop:0,marginBottom:"0.25rem"},children:["Termin ",v.term]}),q.jsxs("p",{style:{margin:0},children:[q.jsx("strong",{children:"Time:"})," ",v.name]}),q.jsxs("p",{style:{marginTop:"0.2rem"},children:[q.jsx("strong",{children:"Gruppe:"})," ",v.category]})]}),q.jsxs("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},children:[q.jsx(xA,{value:v.code,size:160,includeMargin:!0}),q.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",letterSpacing:"0.3em"},children:v.code})]}),q.jsxs("div",{style:{marginTop:"1.5rem"},children:[q.jsx("h4",{style:{textAlign:"center",marginBottom:"0.3rem"},children:"Legg til student manuelt"}),q.jsx("p",{style:{fontSize:"0.8rem",color:"#6b7280",textAlign:"center",marginTop:0,marginBottom:"0.5rem"},children:"Brukes dersom en student ikke kan skanne eller skrive inn kode."}),q.jsxs("div",{style:{position:"relative",maxWidth:"360px",margin:"0 auto"},children:[q.jsx("input",{value:me,onChange:J=>{Be(J.target.value),xe(!0)},onFocus:()=>{me.trim().length>0&&xe(!0)},placeholder:Le?"Laster studenter...":"Sk p navn eller e-post",disabled:Le,style:{width:"100%",padding:"0.4rem",fontSize:"14px",borderRadius:"0.5rem",border:"1px solid #d1d5db"}}),$e&&X.length>0&&q.jsx("ul",{style:{position:"absolute",top:"100%",left:0,right:0,zIndex:20,background:"white",border:"1px solid #e5e7eb",borderRadius:"0.5rem",marginTop:"0.2rem",listStyle:"none",padding:0,maxHeight:"220px",overflowY:"auto",boxShadow:"0 10px 20px rgba(0,0,0,0.08)"},children:X.map(J=>q.jsxs("li",{onClick:()=>le(J),style:{padding:"0.4rem 0.6rem",cursor:"pointer",borderBottom:"1px solid #f3f4f6"},onMouseDown:re=>re.preventDefault(),children:[q.jsx("div",{children:J.name||"(Uten navn)"}),q.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[J.email,J.term&&`  termin ${J.term}`]})]},J.id))})]})]}),q.jsx("div",{style:{marginTop:"1.2rem",display:"flex",justifyContent:"center"},children:q.jsx("button",{onClick:qe,style:{padding:"0.5rem 1.2rem",borderRadius:"999px",border:"none",background:"#dc2626",color:"white",fontWeight:500,cursor:"pointer"},children:"Lukk kt"})}),q.jsx("hr",{style:{margin:"1rem 0"}}),q.jsx("h4",{children:"Registrerte studenter"}),A.length===0?q.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"Ingen har registrert seg enn."}):q.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[q.jsx("thead",{children:q.jsxs("tr",{children:[q.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"Navn"}),q.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"E-post"}),q.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"Tidspunkt"})]})}),q.jsx("tbody",{children:A.map(J=>q.jsxs("tr",{children:[q.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:J.studentName||"-"}),q.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:J.studentEmail||"-"}),q.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6",fontSize:"0.8rem",color:"#6b7280"},children:J.createdAt?new Date(J.createdAt.toMillis()).toLocaleTimeString("no-NO",{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-"})]},J.id))})]})]})]})}function X4({user:a}){const[e,n]=nt.useState("termSetup");return q.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto"},children:[q.jsx("h2",{style:{textAlign:"center",marginBottom:"1rem"},children:"Admin-panel"}),q.jsxs("nav",{style:{display:"flex",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem",flexWrap:"wrap"},children:[q.jsx(e0,{active:e==="termSetup",onClick:()=>n("termSetup"),children:"Oppsett per termin"}),q.jsx(e0,{active:e==="users",onClick:()=>n("users"),children:"Brukere"}),q.jsx(e0,{active:e==="teacher",onClick:()=>n("teacher"),children:"Lrer-visning"})]}),e==="termSetup"&&q.jsx(Y4,{}),e==="users"&&q.jsx(W4,{}),e==="teacher"&&q.jsx(AA,{user:a})]})}function e0({active:a,onClick:e,children:n}){return q.jsx("button",{onClick:e,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:a?"2px solid #2563eb":"1px solid #ccc",background:a?"#eff6ff":"#f9fafb",cursor:"pointer"},children:n})}function Y4(){const[a,e]=nt.useState(11),[n,o]=nt.useState([]),[h,m]=nt.useState([]),[_,v]=nt.useState(!0),[T,A]=nt.useState(""),[b,O]=nt.useState({}),V=[1,2,3,4,5,6,7,8,9,10,11,12];nt.useEffect(()=>{(async()=>{v(!0);const[k,F]=await Promise.all([ns(Gi(nn,"times")),ns(Gi(nn,"requirements"))]),L=k.docs.map(X=>{const Y=X.data();return{id:X.id,name:Y.name,category:Y.category,term:Y.term}}),W=F.docs.map(X=>{const Y=X.data();return{id:X.id,term:Y.term,category:Y.category,requiredCount:Y.requiredCount}});o(L),m(W),v(!1)})()},[]);const G=h.filter(xe=>xe.term===a),ee=n.filter(xe=>xe.term===a),ie=async(xe,k)=>{if(Number.isNaN(k)||k<0)return;const F=Lr(nn,"requirements",xe);await wf(F,{requiredCount:k}),m(L=>L.map(W=>W.id===xe?{...W,requiredCount:k}:W))},he=async xe=>{await wE(Lr(nn,"requirements",xe)),m(k=>k.filter(F=>F.id!==xe))},Le=async xe=>{xe.preventDefault();const k=T.trim();if(!k)return;if(G.find(Y=>Y.category.toLowerCase()===k.toLowerCase())){alert("Denne gruppen finnes allerede for valgt termin."),A("");return}const L=Gi(nn,"requirements"),X={id:(await N0(L,{term:a,category:k,requiredCount:0})).id,term:a,category:k,requiredCount:0};m(Y=>[...Y,X]),A("")},be=async xe=>{await wE(Lr(nn,"times",xe)),o(k=>k.filter(F=>F.id!==xe))},me=async(xe,k)=>{xe.preventDefault();const L=(b[k]??"").trim();if(!L)return;const W=Gi(nn,"times"),Y={id:(await N0(W,{name:L,category:k,term:a})).id,name:L,category:k,term:a};o(H=>[...H,Y]),O(H=>({...H,[k]:""}))},Be=async xe=>{const k=xe.category,F=window.prompt("Nytt navn p gruppe:",k)?.trim();if(!F||F===k)return;if(G.find(J=>J.id!==xe.id&&J.category.toLowerCase()===F.toLowerCase())){alert("Det finnes allerede en gruppe med dette navnet i valgt termin.");return}const W=TE(nn),X=Lr(nn,"requirements",xe.id);W.update(X,{category:F});const Y=so(Gi(nn,"times"),Ss("term","==",xe.term),Ss("category","==",k));(await ns(Y)).forEach(J=>{W.update(J.ref,{category:F})});const qe=so(Gi(nn,"sessions"),Ss("term","==",xe.term),Ss("category","==",k));(await ns(qe)).forEach(J=>{W.update(J.ref,{category:F})}),await W.commit(),m(J=>J.map(re=>re.id===xe.id?{...re,category:F}:re)),o(J=>J.map(re=>re.term===xe.term&&re.category===k?{...re,category:F}:re))},$e=async xe=>{const k=xe.name,F=window.prompt("Nytt navn p time:",k)?.trim();if(!F||F===k)return;const L=TE(nn),W=Lr(nn,"times",xe.id);L.update(W,{name:F});const X=so(Gi(nn,"sessions"),Ss("timeId","==",xe.id));(await ns(X)).forEach(H=>{L.update(H.ref,{name:F})}),await L.commit(),o(H=>H.map(qe=>qe.id===xe.id?{...qe,name:F}:qe))};return _?q.jsx(B0,{}):q.jsxs("div",{children:[q.jsx("h3",{children:"Times og krav per termin"}),q.jsx("p",{children:"Velg termin. Legg til kategorier (f.eks. Kirurgi, Indremedisin), sett krav, og administrer timene (Ortopedi 1 osv.) under hver kategori."}),q.jsxs("div",{style:{marginBottom:"1rem"},children:[q.jsx("label",{children:"Termin"}),q.jsx("br",{}),q.jsx("select",{value:a,onChange:xe=>e(parseInt(xe.target.value,10)),children:V.map(xe=>q.jsxs("option",{value:xe,children:["Termin ",xe]},xe))})]}),q.jsxs("section",{style:{marginBottom:"2rem"},children:[q.jsxs("h4",{children:["Kategorier og timer  termin ",a]}),G.length===0?q.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"Ingen kategorier/krav satt for denne terminen enn."}):q.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:G.map(xe=>{const k=ee.filter(L=>L.category===xe.category).sort((L,W)=>L.name.localeCompare(W.name,"nb-NO",{sensitivity:"base"})),F=b[xe.category]??"";return q.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.75rem",padding:"0.75rem",background:"#f9fafb"},children:[q.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem",alignItems:"center",marginBottom:"0.5rem"},children:[q.jsxs("div",{children:[q.jsx("div",{style:{fontWeight:600},children:xe.category}),q.jsxs("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:["Krav for termin ",a]})]}),q.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[q.jsx("span",{style:{fontSize:"0.85rem"},children:"Krav:"}),q.jsx("input",{type:"number",min:0,value:xe.requiredCount,onChange:L=>ie(xe.id,parseInt(L.target.value,10)||0),style:{width:"4rem"}}),q.jsx("button",{onClick:()=>Be(xe),children:"Endre navn"}),q.jsx("button",{onClick:()=>he(xe.id),children:"Slett kategori"})]})]}),q.jsxs("div",{children:[q.jsx("div",{style:{fontSize:"0.85rem",marginBottom:"0.25rem",fontWeight:500},children:"Timer i denne kategorien"}),k.length===0?q.jsx("p",{style:{fontSize:"0.8rem",color:"#6b7280",margin:0},children:"Ingen timer registrert i denne kategorien enn."}):q.jsx("ul",{style:{listStyle:"none",padding:0,margin:0,display:"flex",flexDirection:"column",gap:"0.25rem"},children:k.map(L=>q.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"white",borderRadius:"0.5rem",padding:"0.3rem 0.5rem",border:"1px solid #e5e7eb"},children:[q.jsx("span",{children:L.name}),q.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[q.jsx("button",{onClick:()=>$e(L),style:{fontSize:"0.8rem"},children:"Endre navn"}),q.jsx("button",{onClick:()=>be(L.id),style:{fontSize:"0.8rem"},children:"Slett time"})]})]},L.id))}),q.jsxs("form",{onSubmit:L=>me(L,xe.category),style:{marginTop:"0.4rem",display:"flex",gap:"0.5rem",alignItems:"center"},children:[q.jsx("input",{value:F,onChange:L=>O(W=>({...W,[xe.category]:L.target.value})),placeholder:"Ny time, f.eks. Ortopedi 1",style:{flex:1,padding:"0.3rem 0.4rem",borderRadius:"0.4rem",border:"1px solid #d1d5db",fontSize:"0.85rem"}}),q.jsx("button",{type:"submit",style:{fontSize:"0.85rem"},children:"Legg til time"})]})]})]},xe.id)})}),q.jsxs("form",{onSubmit:Le,style:{marginTop:"0.75rem"},children:[q.jsxs("label",{style:{fontSize:"0.8rem"},children:["Legg til kategori for termin ",a]}),q.jsx("br",{}),q.jsx("input",{value:T,onChange:xe=>A(xe.target.value),placeholder:"Kirurgi, Indremedisin, Anestesi ...",style:{marginRight:"0.5rem",width:"60%"}}),q.jsx("button",{type:"submit",children:"Legg til kategori"})]})]})]})}function W4(){const[a,e]=nt.useState([]),[n,o]=nt.useState(!0),[h,m]=nt.useState(""),_=async()=>{o(!0);const ee=(await ns(Gi(nn,"users"))).docs.map(ie=>({...ie.data(),docId:ie.id}));e(ee),o(!1)};nt.useEffect(()=>{_()},[]);const v=async(G,ee,ie)=>{const he=Lr(nn,"users",G);await wf(he,{[ee]:ie}),e(Le=>Le.map(be=>be.docId===G?{...be,[ee]:ie}:be))},T=G=>{if(!h.trim())return!0;const ee=h.trim().toLowerCase(),ie=(G.displayName||"").toLowerCase(),he=(G.email||"").toLowerCase();return ie.includes(ee)||he.includes(ee)},A=G=>G.slice(0,10),b=A(a.filter(G=>G.role==="teacher"&&T(G))),O=A(a.filter(G=>G.role==="student"&&T(G))),V=A(a.filter(G=>G.role==="admin"&&T(G)));return n?q.jsx(B0,{}):q.jsxs("div",{children:[q.jsx("h3",{children:"Brukere"}),q.jsxs("p",{children:["Sett roller (",q.jsx("code",{children:"student"}),", ",q.jsx("code",{children:"teacher"}),","," ",q.jsx("code",{children:"admin"}),"). Bare studenter har termin og status for semester."]}),q.jsxs("div",{style:{marginBottom:"1rem"},children:[q.jsx("label",{children:"Sk p navn eller e-post"}),q.jsx("br",{}),q.jsx("input",{value:h,onChange:G=>m(G.target.value),placeholder:"Sk...",style:{maxWidth:"300px"}}),q.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Viser maks 10 treff per seksjon."})]}),q.jsxs("section",{style:{marginBottom:"1.5rem"},children:[q.jsx("h4",{children:"Studenter"}),O.length===0?q.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280"},children:"Ingen studenter (eller ingen som matcher sket)."}):q.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[q.jsx("thead",{children:q.jsxs("tr",{children:[q.jsx("th",{style:{borderBottom:"1px solid #ddd",textAlign:"left",padding:"0.3rem"},children:"Navn / e-post"}),q.jsx("th",{style:{borderBottom:"1px solid #ddd",textAlign:"left",padding:"0.3rem"},children:"Rolle"}),q.jsx("th",{style:{borderBottom:"1px solid #ddd",textAlign:"left",padding:"0.3rem"},children:"Termin"}),q.jsx("th",{style:{borderBottom:"1px solid #ddd",textAlign:"left",padding:"0.3rem"},children:"Status semester"})]})}),q.jsx("tbody",{children:O.map(G=>q.jsxs("tr",{children:[q.jsxs("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:[q.jsx("div",{children:G.displayName||G.email}),q.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:G.email})]}),q.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:q.jsxs("select",{value:G.role,onChange:ee=>v(G.docId,"role",ee.target.value),children:[q.jsx("option",{value:"student",children:"student"}),q.jsx("option",{value:"teacher",children:"teacher"}),q.jsx("option",{value:"admin",children:"admin"})]})}),q.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:q.jsxs("select",{value:G.term??"",onChange:ee=>{const ie=ee.target.value;v(G.docId,"term",ie?parseInt(ie,10):null)},children:[q.jsx("option",{value:"",children:"-"}),[1,2,3,4,5,6,7,8,9,10,11,12].map(ee=>q.jsx("option",{value:ee,children:ee},ee))]})}),q.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:q.jsxs("select",{value:G.semesterStatus||"aktiv",onChange:ee=>v(G.docId,"semesterStatus",ee.target.value),children:[q.jsx("option",{value:"aktiv",children:"aktiv"}),q.jsx("option",{value:"frir",children:"frir"}),q.jsx("option",{value:"permisjon",children:"permisjon"}),q.jsx("option",{value:"forskning",children:"forskningslinje"}),q.jsx("option",{value:"ikke_aktuell",children:"ikke aktuell"})]})})]},G.docId))})]})]}),q.jsxs("section",{style:{marginBottom:"1.5rem"},children:[q.jsx("h4",{children:"Lrere"}),b.length===0?q.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280"},children:"Ingen lrere (eller ingen som matcher sket)."}):q.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[q.jsx("thead",{children:q.jsxs("tr",{children:[q.jsx("th",{style:{borderBottom:"1px solid #ddd",textAlign:"left",padding:"0.3rem"},children:"Navn / e-post"}),q.jsx("th",{style:{borderBottom:"1px solid #ddd",textAlign:"left",padding:"0.3rem"},children:"Rolle"})]})}),q.jsx("tbody",{children:b.map(G=>q.jsxs("tr",{children:[q.jsxs("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:[q.jsx("div",{children:G.displayName||G.email}),q.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:G.email})]}),q.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:q.jsxs("select",{value:G.role,onChange:ee=>v(G.docId,"role",ee.target.value),children:[q.jsx("option",{value:"teacher",children:"teacher"}),q.jsx("option",{value:"student",children:"student"}),q.jsx("option",{value:"admin",children:"admin"})]})})]},G.docId))})]})]}),q.jsxs("section",{style:{marginBottom:"1.5rem"},children:[q.jsx("h4",{children:"Administratorer"}),V.length===0?q.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280"},children:"Ingen administratorer (eller ingen som matcher sket)."}):q.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[q.jsx("thead",{children:q.jsxs("tr",{children:[q.jsx("th",{style:{borderBottom:"1px solid #ddd",textAlign:"left",padding:"0.3rem"},children:"Navn / e-post"}),q.jsx("th",{style:{borderBottom:"1px solid #ddd",textAlign:"left",padding:"0.3rem"},children:"Rolle"})]})}),q.jsx("tbody",{children:V.map(G=>q.jsxs("tr",{children:[q.jsxs("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:[q.jsx("div",{children:G.displayName||G.email}),q.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:G.email})]}),q.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:q.jsxs("select",{value:G.role,onChange:ee=>v(G.docId,"role",ee.target.value),children:[q.jsx("option",{value:"admin",children:"admin"}),q.jsx("option",{value:"teacher",children:"teacher"}),q.jsx("option",{value:"student",children:"student"})]})})]},G.docId))})]})]})]})}const t0={minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#f3f4f6",fontFamily:"system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif"},n0={background:"white",borderRadius:"0.75rem",padding:"1.5rem",boxShadow:"0 10px 25px rgba(0,0,0,0.08)",width:"100%",maxWidth:"960px"};function K4(){const{user:a,loading:e,login:n,register:o,logout:h}=o4(),[m,_]=nt.useState(""),[v,T]=nt.useState(""),[A,b]=nt.useState(!1),[O,V]=nt.useState(null),[G,ee]=nt.useState(!1),ie=async he=>{if(he.preventDefault(),V(null),!m||!v){V("Fyll inn bde e-post og passord.");return}ee(!0);try{A?await o(m.trim(),v):await n(m.trim(),v)}catch(Le){console.error(Le);let be="Kunne ikke logge inn.";Le?.code==="auth/user-not-found"?be="Bruker finnes ikke. Prv  registrere deg frst.":Le?.code==="auth/wrong-password"?be="Feil passord.":Le?.code==="auth/email-already-in-use"?be="E-postadressen er allerede registrert.":Le?.code==="auth/weak-password"&&(be="Passordet er for svakt (min. 6 tegn)."),V(be)}finally{ee(!1)}};return e?q.jsx("div",{style:t0,children:q.jsx("div",{style:n0,children:q.jsx(B0,{})})}):a?q.jsx("div",{style:t0,children:q.jsxs("div",{style:n0,children:[q.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[q.jsxs("div",{children:[q.jsx("div",{children:a.displayName||a.email}),q.jsxs("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:["Rolle: ",a.role]})]}),q.jsx("button",{onClick:h,style:{padding:"0.3rem 0.8rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#f9fafb",cursor:"pointer",fontSize:"0.85rem"},children:"Logg ut"})]}),q.jsx("main",{children:a.role==="admin"?q.jsx(X4,{user:a}):a.role==="teacher"?q.jsx(AA,{user:a}):q.jsx(B4,{user:a})})]})}):q.jsx("div",{style:t0,children:q.jsxs("div",{style:{...n0,maxWidth:"420px"},children:[q.jsx("h1",{style:{marginBottom:"0.5rem",textAlign:"center"},children:"Oppmteregistrering"}),q.jsxs("form",{onSubmit:ie,children:[q.jsxs("div",{style:{marginBottom:"0.75rem"},children:[q.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.2rem"},children:"E-post"}),q.jsx("input",{type:"email",value:m,onChange:he=>_(he.target.value),placeholder:"fornavn.etternavn@uio.no",style:{width:"100%",padding:"0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db"}})]}),q.jsxs("div",{style:{marginBottom:"0.75rem"},children:[q.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.2rem"},children:"Passord"}),q.jsx("input",{type:"password",value:v,onChange:he=>T(he.target.value),placeholder:"Minst 6 tegn",style:{width:"100%",padding:"0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db"}})]}),O&&q.jsx("p",{style:{color:"red",fontSize:"0.85rem",marginBottom:"0.75rem"},children:O}),q.jsx("button",{type:"submit",disabled:G,style:{width:"100%",padding:"0.6rem 1rem",borderRadius:"999px",border:"none",background:"#2563eb",color:"white",fontWeight:500,cursor:"pointer",marginBottom:"0.5rem"},children:G?A?"Registrerer...":"Logger inn...":A?"Registrer bruker":"Logg inn"})]}),q.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.85rem",textAlign:"center"},children:A?q.jsxs(q.Fragment,{children:["Har du allerede en bruker?"," ",q.jsx("button",{type:"button",onClick:()=>{b(!1),V(null)},style:{border:"none",background:"transparent",color:"#2563eb",cursor:"pointer",textDecoration:"underline",padding:0},children:"Logg inn"})]}):q.jsxs(q.Fragment,{children:["Ny bruker?"," ",q.jsx("button",{type:"button",onClick:()=>{b(!0),V(null)},style:{border:"none",background:"transparent",color:"#2563eb",cursor:"pointer",textDecoration:"underline",padding:0},children:"Registrer deg"})]})})]})})}Qw.createRoot(document.getElementById("root")).render(q.jsx(ni.StrictMode,{children:q.jsx(K4,{})}));
