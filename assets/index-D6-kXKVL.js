function Sb(s,e){for(var n=0;n<e.length;n++){const o=e[n];if(typeof o!="string"&&!Array.isArray(o)){for(const h in o)if(h!=="default"&&!(h in s)){const g=Object.getOwnPropertyDescriptor(o,h);g&&Object.defineProperty(s,h,g.get?g:{enumerable:!0,get:()=>o[h]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))o(h);new MutationObserver(h=>{for(const g of h)if(g.type==="childList")for(const x of g.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&o(x)}).observe(document,{childList:!0,subtree:!0});function n(h){const g={};return h.integrity&&(g.integrity=h.integrity),h.referrerPolicy&&(g.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?g.credentials="include":h.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function o(h){if(h.ep)return;h.ep=!0;const g=n(h);fetch(h.href,g)}})();var Jh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qf(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var s1={exports:{}},ru={};var f2;function Ib(){if(f2)return ru;f2=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(o,h,g){var x=null;if(g!==void 0&&(x=""+g),h.key!==void 0&&(x=""+h.key),"key"in h){g={};for(var T in h)T!=="key"&&(g[T]=h[T])}else g=h;return h=g.ref,{$$typeof:s,type:o,key:x,ref:h!==void 0?h:null,props:g}}return ru.Fragment=e,ru.jsx=n,ru.jsxs=n,ru}var d2;function Rb(){return d2||(d2=1,s1.exports=Ib()),s1.exports}var O=Rb(),a1={exports:{}},Kt={};var g2;function Nb(){if(g2)return Kt;g2=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),g=Symbol.for("react.consumer"),x=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),P=Symbol.iterator;function B(K){return K===null||typeof K!="object"?null:(K=P&&K[P]||K["@@iterator"],typeof K=="function"?K:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ne=Object.assign,se={};function Qe(K,oe,ve){this.props=K,this.context=oe,this.refs=se,this.updater=ve||$}Qe.prototype.isReactComponent={},Qe.prototype.setState=function(K,oe){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,oe,"setState")},Qe.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function Le(){}Le.prototype=Qe.prototype;function he(K,oe,ve){this.props=K,this.context=oe,this.refs=se,this.updater=ve||$}var Ue=he.prototype=new Le;Ue.constructor=he,ne(Ue,Qe.prototype),Ue.isPureReactComponent=!0;var pt=Array.isArray;function je(){}var F={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function U(K,oe,ve){var Te=ve.ref;return{$$typeof:s,type:K,key:oe,ref:Te!==void 0?Te:null,props:ve}}function Q(K,oe){return U(K.type,oe,K.props)}function X(K){return typeof K=="object"&&K!==null&&K.$$typeof===s}function Y(K){var oe={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(ve){return oe[ve]})}var G=/\/+/g;function lt(K,oe){return typeof K=="object"&&K!==null&&K.key!=null?Y(""+K.key):oe.toString(36)}function ae(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(je,je):(K.status="pending",K.then(function(oe){K.status==="pending"&&(K.status="fulfilled",K.value=oe)},function(oe){K.status==="pending"&&(K.status="rejected",K.reason=oe)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function re(K,oe,ve,Te,Se){var _e=typeof K;(_e==="undefined"||_e==="boolean")&&(K=null);var Je=!1;if(K===null)Je=!0;else switch(_e){case"bigint":case"string":case"number":Je=!0;break;case"object":switch(K.$$typeof){case s:case e:Je=!0;break;case C:return Je=K._init,re(Je(K._payload),oe,ve,Te,Se)}}if(Je)return Se=Se(K),Je=Te===""?"."+lt(K,0):Te,pt(Se)?(ve="",Je!=null&&(ve=Je.replace(G,"$&/")+"/"),re(Se,oe,ve,"",function(An){return An})):Se!=null&&(X(Se)&&(Se=Q(Se,ve+(Se.key==null||K&&K.key===Se.key?"":(""+Se.key).replace(G,"$&/")+"/")+Je)),oe.push(Se)),1;Je=0;var _t=Te===""?".":Te+":";if(pt(K))for(var It=0;It<K.length;It++)Te=K[It],_e=_t+lt(Te,It),Je+=re(Te,oe,ve,_e,Se);else if(It=B(K),typeof It=="function")for(K=It.call(K),It=0;!(Te=K.next()).done;)Te=Te.value,_e=_t+lt(Te,It++),Je+=re(Te,oe,ve,_e,Se);else if(_e==="object"){if(typeof K.then=="function")return re(ae(K),oe,ve,Te,Se);throw oe=String(K),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return Je}function fe(K,oe,ve){if(K==null)return K;var Te=[],Se=0;return re(K,Te,"","",function(_e){return oe.call(ve,_e,Se++)}),Te}function tt(K){if(K._status===-1){var oe=K._result;oe=oe(),oe.then(function(ve){(K._status===0||K._status===-1)&&(K._status=1,K._result=ve)},function(ve){(K._status===0||K._status===-1)&&(K._status=2,K._result=ve)}),K._status===-1&&(K._status=0,K._result=oe)}if(K._status===1)return K._result.default;throw K._result}var qe=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)},ut={map:fe,forEach:function(K,oe,ve){fe(K,function(){oe.apply(this,arguments)},ve)},count:function(K){var oe=0;return fe(K,function(){oe++}),oe},toArray:function(K){return fe(K,function(oe){return oe})||[]},only:function(K){if(!X(K))throw Error("React.Children.only expected to receive a single React element child.");return K}};return Kt.Activity=R,Kt.Children=ut,Kt.Component=Qe,Kt.Fragment=n,Kt.Profiler=h,Kt.PureComponent=he,Kt.StrictMode=o,Kt.Suspense=b,Kt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,Kt.__COMPILER_RUNTIME={__proto__:null,c:function(K){return F.H.useMemoCache(K)}},Kt.cache=function(K){return function(){return K.apply(null,arguments)}},Kt.cacheSignal=function(){return null},Kt.cloneElement=function(K,oe,ve){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var Te=ne({},K.props),Se=K.key;if(oe!=null)for(_e in oe.key!==void 0&&(Se=""+oe.key),oe)!z.call(oe,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&oe.ref===void 0||(Te[_e]=oe[_e]);var _e=arguments.length-2;if(_e===1)Te.children=ve;else if(1<_e){for(var Je=Array(_e),_t=0;_t<_e;_t++)Je[_t]=arguments[_t+2];Te.children=Je}return U(K.type,Se,Te)},Kt.createContext=function(K){return K={$$typeof:x,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:g,_context:K},K},Kt.createElement=function(K,oe,ve){var Te,Se={},_e=null;if(oe!=null)for(Te in oe.key!==void 0&&(_e=""+oe.key),oe)z.call(oe,Te)&&Te!=="key"&&Te!=="__self"&&Te!=="__source"&&(Se[Te]=oe[Te]);var Je=arguments.length-2;if(Je===1)Se.children=ve;else if(1<Je){for(var _t=Array(Je),It=0;It<Je;It++)_t[It]=arguments[It+2];Se.children=_t}if(K&&K.defaultProps)for(Te in Je=K.defaultProps,Je)Se[Te]===void 0&&(Se[Te]=Je[Te]);return U(K,_e,Se)},Kt.createRef=function(){return{current:null}},Kt.forwardRef=function(K){return{$$typeof:T,render:K}},Kt.isValidElement=X,Kt.lazy=function(K){return{$$typeof:C,_payload:{_status:-1,_result:K},_init:tt}},Kt.memo=function(K,oe){return{$$typeof:w,type:K,compare:oe===void 0?null:oe}},Kt.startTransition=function(K){var oe=F.T,ve={};F.T=ve;try{var Te=K(),Se=F.S;Se!==null&&Se(ve,Te),typeof Te=="object"&&Te!==null&&typeof Te.then=="function"&&Te.then(je,qe)}catch(_e){qe(_e)}finally{oe!==null&&ve.types!==null&&(oe.types=ve.types),F.T=oe}},Kt.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},Kt.use=function(K){return F.H.use(K)},Kt.useActionState=function(K,oe,ve){return F.H.useActionState(K,oe,ve)},Kt.useCallback=function(K,oe){return F.H.useCallback(K,oe)},Kt.useContext=function(K){return F.H.useContext(K)},Kt.useDebugValue=function(){},Kt.useDeferredValue=function(K,oe){return F.H.useDeferredValue(K,oe)},Kt.useEffect=function(K,oe){return F.H.useEffect(K,oe)},Kt.useEffectEvent=function(K){return F.H.useEffectEvent(K)},Kt.useId=function(){return F.H.useId()},Kt.useImperativeHandle=function(K,oe,ve){return F.H.useImperativeHandle(K,oe,ve)},Kt.useInsertionEffect=function(K,oe){return F.H.useInsertionEffect(K,oe)},Kt.useLayoutEffect=function(K,oe){return F.H.useLayoutEffect(K,oe)},Kt.useMemo=function(K,oe){return F.H.useMemo(K,oe)},Kt.useOptimistic=function(K,oe){return F.H.useOptimistic(K,oe)},Kt.useReducer=function(K,oe,ve){return F.H.useReducer(K,oe,ve)},Kt.useRef=function(K){return F.H.useRef(K)},Kt.useState=function(K){return F.H.useState(K)},Kt.useSyncExternalStore=function(K,oe,ve){return F.H.useSyncExternalStore(K,oe,ve)},Kt.useTransition=function(){return F.H.useTransition()},Kt.version="19.2.0",Kt}var m2;function ag(){return m2||(m2=1,a1.exports=Nb()),a1.exports}var ye=ag();const Ge=qf(ye);var o1={exports:{}},iu={},l1={exports:{}},c1={};var p2;function Ob(){return p2||(p2=1,(function(s){function e(re,fe){var tt=re.length;re.push(fe);e:for(;0<tt;){var qe=tt-1>>>1,ut=re[qe];if(0<h(ut,fe))re[qe]=fe,re[tt]=ut,tt=qe;else break e}}function n(re){return re.length===0?null:re[0]}function o(re){if(re.length===0)return null;var fe=re[0],tt=re.pop();if(tt!==fe){re[0]=tt;e:for(var qe=0,ut=re.length,K=ut>>>1;qe<K;){var oe=2*(qe+1)-1,ve=re[oe],Te=oe+1,Se=re[Te];if(0>h(ve,tt))Te<ut&&0>h(Se,ve)?(re[qe]=Se,re[Te]=tt,qe=Te):(re[qe]=ve,re[oe]=tt,qe=oe);else if(Te<ut&&0>h(Se,tt))re[qe]=Se,re[Te]=tt,qe=Te;else break e}}return fe}function h(re,fe){var tt=re.sortIndex-fe.sortIndex;return tt!==0?tt:re.id-fe.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var g=performance;s.unstable_now=function(){return g.now()}}else{var x=Date,T=x.now();s.unstable_now=function(){return x.now()-T}}var b=[],w=[],C=1,R=null,P=3,B=!1,$=!1,ne=!1,se=!1,Qe=typeof setTimeout=="function"?setTimeout:null,Le=typeof clearTimeout=="function"?clearTimeout:null,he=typeof setImmediate<"u"?setImmediate:null;function Ue(re){for(var fe=n(w);fe!==null;){if(fe.callback===null)o(w);else if(fe.startTime<=re)o(w),fe.sortIndex=fe.expirationTime,e(b,fe);else break;fe=n(w)}}function pt(re){if(ne=!1,Ue(re),!$)if(n(b)!==null)$=!0,je||(je=!0,Y());else{var fe=n(w);fe!==null&&ae(pt,fe.startTime-re)}}var je=!1,F=-1,z=5,U=-1;function Q(){return se?!0:!(s.unstable_now()-U<z)}function X(){if(se=!1,je){var re=s.unstable_now();U=re;var fe=!0;try{e:{$=!1,ne&&(ne=!1,Le(F),F=-1),B=!0;var tt=P;try{t:{for(Ue(re),R=n(b);R!==null&&!(R.expirationTime>re&&Q());){var qe=R.callback;if(typeof qe=="function"){R.callback=null,P=R.priorityLevel;var ut=qe(R.expirationTime<=re);if(re=s.unstable_now(),typeof ut=="function"){R.callback=ut,Ue(re),fe=!0;break t}R===n(b)&&o(b),Ue(re)}else o(b);R=n(b)}if(R!==null)fe=!0;else{var K=n(w);K!==null&&ae(pt,K.startTime-re),fe=!1}}break e}finally{R=null,P=tt,B=!1}fe=void 0}}finally{fe?Y():je=!1}}}var Y;if(typeof he=="function")Y=function(){he(X)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,lt=G.port2;G.port1.onmessage=X,Y=function(){lt.postMessage(null)}}else Y=function(){Qe(X,0)};function ae(re,fe){F=Qe(function(){re(s.unstable_now())},fe)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(re){re.callback=null},s.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<re?Math.floor(1e3/re):5},s.unstable_getCurrentPriorityLevel=function(){return P},s.unstable_next=function(re){switch(P){case 1:case 2:case 3:var fe=3;break;default:fe=P}var tt=P;P=fe;try{return re()}finally{P=tt}},s.unstable_requestPaint=function(){se=!0},s.unstable_runWithPriority=function(re,fe){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var tt=P;P=re;try{return fe()}finally{P=tt}},s.unstable_scheduleCallback=function(re,fe,tt){var qe=s.unstable_now();switch(typeof tt=="object"&&tt!==null?(tt=tt.delay,tt=typeof tt=="number"&&0<tt?qe+tt:qe):tt=qe,re){case 1:var ut=-1;break;case 2:ut=250;break;case 5:ut=1073741823;break;case 4:ut=1e4;break;default:ut=5e3}return ut=tt+ut,re={id:C++,callback:fe,priorityLevel:re,startTime:tt,expirationTime:ut,sortIndex:-1},tt>qe?(re.sortIndex=tt,e(w,re),n(b)===null&&re===n(w)&&(ne?(Le(F),F=-1):ne=!0,ae(pt,tt-qe))):(re.sortIndex=ut,e(b,re),$||B||($=!0,je||(je=!0,Y()))),re},s.unstable_shouldYield=Q,s.unstable_wrapCallback=function(re){var fe=P;return function(){var tt=P;P=fe;try{return re.apply(this,arguments)}finally{P=tt}}}})(c1)),c1}var y2;function Db(){return y2||(y2=1,l1.exports=Ob()),l1.exports}var u1={exports:{}},xi={};var x2;function Mb(){if(x2)return xi;x2=1;var s=ag();function e(b){var w="https://react.dev/errors/"+b;if(1<arguments.length){w+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)w+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+b+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},h=Symbol.for("react.portal");function g(b,w,C){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:R==null?null:""+R,children:b,containerInfo:w,implementation:C}}var x=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function T(b,w){if(b==="font")return"";if(typeof w=="string")return w==="use-credentials"?w:""}return xi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,xi.createPortal=function(b,w){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!w||w.nodeType!==1&&w.nodeType!==9&&w.nodeType!==11)throw Error(e(299));return g(b,w,null,C)},xi.flushSync=function(b){var w=x.T,C=o.p;try{if(x.T=null,o.p=2,b)return b()}finally{x.T=w,o.p=C,o.d.f()}},xi.preconnect=function(b,w){typeof b=="string"&&(w?(w=w.crossOrigin,w=typeof w=="string"?w==="use-credentials"?w:"":void 0):w=null,o.d.C(b,w))},xi.prefetchDNS=function(b){typeof b=="string"&&o.d.D(b)},xi.preinit=function(b,w){if(typeof b=="string"&&w&&typeof w.as=="string"){var C=w.as,R=T(C,w.crossOrigin),P=typeof w.integrity=="string"?w.integrity:void 0,B=typeof w.fetchPriority=="string"?w.fetchPriority:void 0;C==="style"?o.d.S(b,typeof w.precedence=="string"?w.precedence:void 0,{crossOrigin:R,integrity:P,fetchPriority:B}):C==="script"&&o.d.X(b,{crossOrigin:R,integrity:P,fetchPriority:B,nonce:typeof w.nonce=="string"?w.nonce:void 0})}},xi.preinitModule=function(b,w){if(typeof b=="string")if(typeof w=="object"&&w!==null){if(w.as==null||w.as==="script"){var C=T(w.as,w.crossOrigin);o.d.M(b,{crossOrigin:C,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0})}}else w==null&&o.d.M(b)},xi.preload=function(b,w){if(typeof b=="string"&&typeof w=="object"&&w!==null&&typeof w.as=="string"){var C=w.as,R=T(C,w.crossOrigin);o.d.L(b,C,{crossOrigin:R,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0,type:typeof w.type=="string"?w.type:void 0,fetchPriority:typeof w.fetchPriority=="string"?w.fetchPriority:void 0,referrerPolicy:typeof w.referrerPolicy=="string"?w.referrerPolicy:void 0,imageSrcSet:typeof w.imageSrcSet=="string"?w.imageSrcSet:void 0,imageSizes:typeof w.imageSizes=="string"?w.imageSizes:void 0,media:typeof w.media=="string"?w.media:void 0})}},xi.preloadModule=function(b,w){if(typeof b=="string")if(w){var C=T(w.as,w.crossOrigin);o.d.m(b,{as:typeof w.as=="string"&&w.as!=="script"?w.as:void 0,crossOrigin:C,integrity:typeof w.integrity=="string"?w.integrity:void 0})}else o.d.m(b)},xi.requestFormReset=function(b){o.d.r(b)},xi.unstable_batchedUpdates=function(b,w){return b(w)},xi.useFormState=function(b,w,C){return x.H.useFormState(b,w,C)},xi.useFormStatus=function(){return x.H.useHostTransitionStatus()},xi.version="19.2.0",xi}var E2;function EE(){if(E2)return u1.exports;E2=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),u1.exports=Mb(),u1.exports}var w2;function kb(){if(w2)return iu;w2=1;var s=Db(),e=ag(),n=EE();function o(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function g(t){var i=t,c=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(c=i.return),t=i.return;while(t)}return i.tag===3?c:null}function x(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function T(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function b(t){if(g(t)!==t)throw Error(o(188))}function w(t){var i=t.alternate;if(!i){if(i=g(t),i===null)throw Error(o(188));return i!==t?null:t}for(var c=t,d=i;;){var E=c.return;if(E===null)break;var A=E.alternate;if(A===null){if(d=E.return,d!==null){c=d;continue}break}if(E.child===A.child){for(A=E.child;A;){if(A===c)return b(E),t;if(A===d)return b(E),i;A=A.sibling}throw Error(o(188))}if(c.return!==d.return)c=E,d=A;else{for(var N=!1,V=E.child;V;){if(V===c){N=!0,c=E,d=A;break}if(V===d){N=!0,d=E,c=A;break}V=V.sibling}if(!N){for(V=A.child;V;){if(V===c){N=!0,c=A,d=E;break}if(V===d){N=!0,d=A,c=E;break}V=V.sibling}if(!N)throw Error(o(189))}}if(c.alternate!==d)throw Error(o(190))}if(c.tag!==3)throw Error(o(188));return c.stateNode.current===c?t:i}function C(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=C(t),i!==null)return i;t=t.sibling}return null}var R=Object.assign,P=Symbol.for("react.element"),B=Symbol.for("react.transitional.element"),$=Symbol.for("react.portal"),ne=Symbol.for("react.fragment"),se=Symbol.for("react.strict_mode"),Qe=Symbol.for("react.profiler"),Le=Symbol.for("react.consumer"),he=Symbol.for("react.context"),Ue=Symbol.for("react.forward_ref"),pt=Symbol.for("react.suspense"),je=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function Y(t){return t===null||typeof t!="object"?null:(t=X&&t[X]||t["@@iterator"],typeof t=="function"?t:null)}var G=Symbol.for("react.client.reference");function lt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===G?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ne:return"Fragment";case Qe:return"Profiler";case se:return"StrictMode";case pt:return"Suspense";case je:return"SuspenseList";case U:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case $:return"Portal";case he:return t.displayName||"Context";case Le:return(t._context.displayName||"Context")+".Consumer";case Ue:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case F:return i=t.displayName||null,i!==null?i:lt(t.type)||"Memo";case z:i=t._payload,t=t._init;try{return lt(t(i))}catch{}}return null}var ae=Array.isArray,re=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt={pending:!1,data:null,method:null,action:null},qe=[],ut=-1;function K(t){return{current:t}}function oe(t){0>ut||(t.current=qe[ut],qe[ut]=null,ut--)}function ve(t,i){ut++,qe[ut]=t.current,t.current=i}var Te=K(null),Se=K(null),_e=K(null),Je=K(null);function _t(t,i){switch(ve(_e,i),ve(Se,t),ve(Te,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?Ly(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=Ly(i),t=Py(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}oe(Te),ve(Te,t)}function It(){oe(Te),oe(Se),oe(_e)}function An(t){t.memoizedState!==null&&ve(Je,t);var i=Te.current,c=Py(i,t.type);i!==c&&(ve(Se,t),ve(Te,c))}function jt(t){Se.current===t&&(oe(Te),oe(Se)),Je.current===t&&(oe(Je),$c._currentValue=tt)}var Be,Ve;function at(t){if(Be===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);Be=i&&i[1]||"",Ve=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Be+t+Ve}var De=!1;function $e(t,i){if(!t||De)return"";De=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(i){var Ne=function(){throw Error()};if(Object.defineProperty(Ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ne,[])}catch(Ae){var pe=Ae}Reflect.construct(t,[],Ne)}else{try{Ne.call()}catch(Ae){pe=Ae}t.call(Ne.prototype)}}else{try{throw Error()}catch(Ae){pe=Ae}(Ne=t())&&typeof Ne.catch=="function"&&Ne.catch(function(){})}}catch(Ae){if(Ae&&pe&&typeof Ae.stack=="string")return[Ae.stack,pe.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=d.DetermineComponentFrameRoot(),N=A[0],V=A[1];if(N&&V){var W=N.split(`
`),me=V.split(`
`);for(E=d=0;d<W.length&&!W[d].includes("DetermineComponentFrameRoot");)d++;for(;E<me.length&&!me[E].includes("DetermineComponentFrameRoot");)E++;if(d===W.length||E===me.length)for(d=W.length-1,E=me.length-1;1<=d&&0<=E&&W[d]!==me[E];)E--;for(;1<=d&&0<=E;d--,E--)if(W[d]!==me[E]){if(d!==1||E!==1)do if(d--,E--,0>E||W[d]!==me[E]){var Ce=`
`+W[d].replace(" at new "," at ");return t.displayName&&Ce.includes("<anonymous>")&&(Ce=Ce.replace("<anonymous>",t.displayName)),Ce}while(1<=d&&0<=E);break}}}finally{De=!1,Error.prepareStackTrace=c}return(c=t?t.displayName||t.name:"")?at(c):""}function nt(t,i){switch(t.tag){case 26:case 27:case 5:return at(t.type);case 16:return at("Lazy");case 13:return t.child!==i&&i!==null?at("Suspense Fallback"):at("Suspense");case 19:return at("SuspenseList");case 0:case 15:return $e(t.type,!1);case 11:return $e(t.type.render,!1);case 1:return $e(t.type,!0);case 31:return at("Activity");default:return""}}function ot(t){try{var i="",c=null;do i+=nt(t,c),c=t,t=t.return;while(t);return i}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var et=Object.prototype.hasOwnProperty,Vt=s.unstable_scheduleCallback,We=s.unstable_cancelCallback,Qn=s.unstable_shouldYield,At=s.unstable_requestPaint,Rt=s.unstable_now,Sr=s.unstable_getCurrentPriorityLevel,Gt=s.unstable_ImmediatePriority,Hn=s.unstable_UserBlockingPriority,Rn=s.unstable_NormalPriority,Pn=s.unstable_LowPriority,Lr=s.unstable_IdlePriority,ti=s.log,Pr=s.unstable_setDisableYieldValue,Zt=null,Me=null;function zt(t){if(typeof ti=="function"&&Pr(t),Me&&typeof Me.setStrictMode=="function")try{Me.setStrictMode(Zt,t)}catch{}}var xt=Math.clz32?Math.clz32:Rr,bn=Math.log,Ir=Math.LN2;function Rr(t){return t>>>=0,t===0?32:31-(bn(t)/Ir|0)|0}var de=256,be=262144,Oe=4194304;function rt(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ft(t,i,c){var d=t.pendingLanes;if(d===0)return 0;var E=0,A=t.suspendedLanes,N=t.pingedLanes;t=t.warmLanes;var V=d&134217727;return V!==0?(d=V&~A,d!==0?E=rt(d):(N&=V,N!==0?E=rt(N):c||(c=V&~t,c!==0&&(E=rt(c))))):(V=d&~A,V!==0?E=rt(V):N!==0?E=rt(N):c||(c=d&~t,c!==0&&(E=rt(c)))),E===0?0:i!==0&&i!==E&&(i&A)===0&&(A=E&-E,c=i&-i,A>=c||A===32&&(c&4194048)!==0)?i:E}function Ke(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function He(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function st(){var t=Oe;return Oe<<=1,(Oe&62914560)===0&&(Oe=4194304),t}function ht(t){for(var i=[],c=0;31>c;c++)i.push(t);return i}function St(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function bt(t,i,c,d,E,A){var N=t.pendingLanes;t.pendingLanes=c,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=c,t.entangledLanes&=c,t.errorRecoveryDisabledLanes&=c,t.shellSuspendCounter=0;var V=t.entanglements,W=t.expirationTimes,me=t.hiddenUpdates;for(c=N&~c;0<c;){var Ce=31-xt(c),Ne=1<<Ce;V[Ce]=0,W[Ce]=-1;var pe=me[Ce];if(pe!==null)for(me[Ce]=null,Ce=0;Ce<pe.length;Ce++){var Ae=pe[Ce];Ae!==null&&(Ae.lane&=-536870913)}c&=~Ne}d!==0&&dn(t,d,0),A!==0&&E===0&&t.tag!==0&&(t.suspendedLanes|=A&~(N&~i))}function dn(t,i,c){t.pendingLanes|=i,t.suspendedLanes&=~i;var d=31-xt(i);t.entangledLanes|=i,t.entanglements[d]=t.entanglements[d]|1073741824|c&261930}function sn(t,i){var c=t.entangledLanes|=i;for(t=t.entanglements;c;){var d=31-xt(c),E=1<<d;E&i|t[d]&i&&(t[d]|=i),c&=~E}}function Gn(t,i){var c=i&-i;return c=(c&42)!==0?1:ur(c),(c&(t.suspendedLanes|i))!==0?0:c}function ur(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function qr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Xr(){var t=fe.p;return t!==0?t:(t=window.event,t===void 0?32:s2(t.type))}function it(t,i){var c=fe.p;try{return fe.p=t,i()}finally{fe.p=c}}var Br=Math.random().toString(36).slice(2),tr="__reactFiber$"+Br,vn="__reactProps$"+Br,ee="__reactContainer$"+Br,Ze="__reactEvents$"+Br,dt="__reactListeners$"+Br,gt="__reactHandles$"+Br,kt="__reactResources$"+Br,$t="__reactMarker$"+Br;function kn(t){delete t[tr],delete t[vn],delete t[Ze],delete t[dt],delete t[gt]}function gn(t){var i=t[tr];if(i)return i;for(var c=t.parentNode;c;){if(i=c[ee]||c[tr]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(t=Hy(t);t!==null;){if(c=t[tr])return c;t=Hy(t)}return i}t=c,c=t.parentNode}return null}function qt(t){if(t=t[tr]||t[ee]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function pr(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(o(33))}function ir(t){var i=t[kt];return i||(i=t[kt]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function nr(t){t[$t]=!0}var ke=new Set,Po={};function Nn(t,i){ni(t,i),ni(t+"Capture",i)}function ni(t,i){for(Po[t]=i,t=0;t<i.length;t++)ke.add(i[t])}var Bo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),mn={},ln={};function nn(t){return et.call(ln,t)?!0:et.call(mn,t)?!1:Bo.test(t)?ln[t]=!0:(mn[t]=!0,!1)}function ks(t,i,c){if(nn(i))if(c===null)t.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var d=i.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+c)}}function ri(t,i,c){if(c===null)t.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+c)}}function hr(t,i,c,d){if(d===null)t.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(c);return}t.setAttributeNS(i,c,""+d)}}function an(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ii(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Vo(t,i,c){var d=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var E=d.get,A=d.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return E.call(this)},set:function(N){c=""+N,A.call(this,N)}}),Object.defineProperty(t,i,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(N){c=""+N},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Pt(t){if(!t._valueTracker){var i=ii(t)?"checked":"value";t._valueTracker=Vo(t,i,""+t[i])}}function di(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var c=i.getValue(),d="";return t&&(d=ii(t)?t.checked?"true":"false":t.value),t=d,t!==c?(i.setValue(t),!0):!1}function os(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Oi=/[\n"\\]/g;function en(t){return t.replace(Oi,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function yr(t,i,c,d,E,A,N,V){t.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?t.type=N:t.removeAttribute("type"),i!=null?N==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+an(i)):t.value!==""+an(i)&&(t.value=""+an(i)):N!=="submit"&&N!=="reset"||t.removeAttribute("value"),i!=null?H(t,N,an(i)):c!=null?H(t,N,an(c)):d!=null&&t.removeAttribute("value"),E==null&&A!=null&&(t.defaultChecked=!!A),E!=null&&(t.checked=E&&typeof E!="function"&&typeof E!="symbol"),V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?t.name=""+an(V):t.removeAttribute("name")}function ue(t,i,c,d,E,A,N,V){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(t.type=A),i!=null||c!=null){if(!(A!=="submit"&&A!=="reset"||i!=null)){Pt(t);return}c=c!=null?""+an(c):"",i=i!=null?""+an(i):c,V||i===t.value||(t.value=i),t.defaultValue=i}d=d??E,d=typeof d!="function"&&typeof d!="symbol"&&!!d,t.checked=V?t.checked:!!d,t.defaultChecked=!!d,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(t.name=N),Pt(t)}function H(t,i,c){i==="number"&&os(t.ownerDocument)===t||t.defaultValue===""+c||(t.defaultValue=""+c)}function Et(t,i,c,d){if(t=t.options,i){i={};for(var E=0;E<c.length;E++)i["$"+c[E]]=!0;for(c=0;c<t.length;c++)E=i.hasOwnProperty("$"+t[c].value),t[c].selected!==E&&(t[c].selected=E),E&&d&&(t[c].defaultSelected=!0)}else{for(c=""+an(c),i=null,E=0;E<t.length;E++){if(t[E].value===c){t[E].selected=!0,d&&(t[E].defaultSelected=!0);return}i!==null||t[E].disabled||(i=t[E])}i!==null&&(i.selected=!0)}}function xr(t,i,c){if(i!=null&&(i=""+an(i),i!==t.value&&(t.value=i),c==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=c!=null?""+an(c):""}function Nr(t,i,c,d){if(i==null){if(d!=null){if(c!=null)throw Error(o(92));if(ae(d)){if(1<d.length)throw Error(o(93));d=d[0]}c=d}c==null&&(c=""),i=c}c=an(i),t.defaultValue=c,d=t.textContent,d===c&&d!==""&&d!==null&&(t.value=d),Pt(t)}function gi(t,i){if(i){var c=t.firstChild;if(c&&c===t.lastChild&&c.nodeType===3){c.nodeValue=i;return}}t.textContent=i}var Ua=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qr(t,i,c){var d=i.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":d?t.setProperty(i,c):typeof c!="number"||c===0||Ua.has(i)?i==="float"?t.cssFloat=c:t[i]=(""+c).trim():t[i]=c+"px"}function Tt(t,i,c){if(i!=null&&typeof i!="object")throw Error(o(62));if(t=t.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||i!=null&&i.hasOwnProperty(d)||(d.indexOf("--")===0?t.setProperty(d,""):d==="float"?t.cssFloat="":t[d]="");for(var E in i)d=i[E],i.hasOwnProperty(E)&&c[E]!==d&&Qr(t,E,d)}else for(var A in i)i.hasOwnProperty(A)&&Qr(t,A,i[A])}function Bn(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ls=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ps(t){return Ls.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function mi(){}var na=null;function Di(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zn=null,pi=null;function yi(t){var i=qt(t);if(i&&(t=i.stateNode)){var c=t[vn]||null;e:switch(t=i.stateNode,i.type){case"input":if(yr(t,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),i=c.name,c.type==="radio"&&i!=null){for(c=t;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+en(""+i)+'"][type="radio"]'),i=0;i<c.length;i++){var d=c[i];if(d!==t&&d.form===t.form){var E=d[vn]||null;if(!E)throw Error(o(90));yr(d,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(i=0;i<c.length;i++)d=c[i],d.form===t.form&&di(d)}break e;case"textarea":xr(t,c.value,c.defaultValue);break e;case"select":i=c.value,i!=null&&Et(t,!!c.multiple,i,!1)}}}var Nt=!1;function Bs(t,i,c){if(Nt)return t(i,c);Nt=!0;try{var d=t(i);return d}finally{if(Nt=!1,(Zn!==null||pi!==null)&&(Nh(),Zn&&(i=Zn,t=pi,pi=Zn=null,yi(i),t)))for(i=0;i<t.length;i++)yi(t[i])}}function Lt(t,i){var c=t.stateNode;if(c===null)return null;var d=c[vn]||null;if(d===null)return null;c=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(t=t.type,d=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!d;break e;default:t=!1}if(t)return null;if(c&&typeof c!="function")throw Error(o(231,i,typeof c));return c}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ra=!1;if(Vn)try{var On={};Object.defineProperty(On,"passive",{get:function(){ra=!0}}),window.addEventListener("test",On,On),window.removeEventListener("test",On,On)}catch{ra=!1}var qi=null,Xi=null,ia=null;function vs(){if(ia)return ia;var t,i=Xi,c=i.length,d,E="value"in qi?qi.value:qi.textContent,A=E.length;for(t=0;t<c&&i[t]===E[t];t++);var N=c-t;for(d=1;d<=N&&i[c-d]===E[A-d];d++);return ia=E.slice(t,1<d?1-d:void 0)}function Yi(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function bi(){return!0}function Mi(){return!1}function Er(t){function i(c,d,E,A,N){this._reactName=c,this._targetInst=E,this.type=d,this.nativeEvent=A,this.target=N,this.currentTarget=null;for(var V in t)t.hasOwnProperty(V)&&(c=t[V],this[V]=c?c(A):A[V]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?bi:Mi,this.isPropagationStopped=Mi,this}return R(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=bi)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=bi)},persist:function(){},isPersistent:bi}),i}var vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sr=Er(vi),Ts=R({},vi,{view:0,detail:0}),Fa=Er(Ts),Cs,ja,ls,za=R({},Ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:us,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ls&&(ls&&t.type==="mousemove"?(Cs=t.screenX-ls.screenX,ja=t.screenY-ls.screenY):ja=Cs=0,ls=t),Cs)},movementY:function(t){return"movementY"in t?t.movementY:ja}}),Sn=Er(za),Vs=R({},za,{dataTransfer:0}),sa=Er(Vs),Wi=R({},Ts,{relatedTarget:0}),aa=Er(Wi),xe=R({},vi,{animationName:0,elapsedTime:0,pseudoElement:0}),Wt=Er(xe),fr=R({},vi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),oa=Er(fr),Fo=R({},vi,{data:0}),cs=Er(Fo),bl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ha={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dr(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Ha[t])?!!i[t]:!1}function us(){return dr}var on=R({},Ts,{key:function(t){if(t.key){var i=bl[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Yi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?vl[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:us,charCode:function(t){return t.type==="keypress"?Yi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),la=Er(on),hs=R({},za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cn=Er(hs),p=R({},Ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:us}),S=Er(p),D=R({},vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),j=Er(D),le=R({},za,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),we=Er(le),Ye=R({},vi,{newState:0,oldState:0}),Ht=Er(Ye),gr=[9,13,27,32],Tn=Vn&&"CompositionEvent"in window,Jn=null;Vn&&"documentMode"in document&&(Jn=document.documentMode);var Ti=Vn&&"TextEvent"in window&&!Jn,fs=Vn&&(!Tn||Jn&&8<Jn&&11>=Jn),Zr=" ",Ci=!1;function ca(t,i){switch(t){case"keyup":return gr.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ds(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ga=!1;function Us(t,i){switch(t){case"compositionend":return ds(i);case"keypress":return i.which!==32?null:(Ci=!0,Zr);case"textInput":return t=i.data,t===Zr&&Ci?null:t;default:return null}}function Tl(t,i){if(Ga)return t==="compositionend"||!Tn&&ca(t,i)?(t=vs(),ia=Xi=qi=null,Ga=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return fs&&i.locale!=="ko"?null:i.data;default:return null}}var ki={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bc(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!ki[t.type]:i==="textarea"}function Ki(t,i,c,d){Zn?pi?pi.push(d):pi=[d]:Zn=d,i=Bh(i,"onChange"),0<i.length&&(c=new sr("onChange","change",null,c,d),t.push({event:c,listeners:i}))}var jo=null,ua=null;function xd(t){Ry(t,0)}function zo(t){var i=pr(t);if(di(i))return t}function Qi(t,i){if(t==="change")return i}var Wu=!1;if(Vn){var Ho;if(Vn){var ha="oninput"in document;if(!ha){var pn=document.createElement("div");pn.setAttribute("oninput","return;"),ha=typeof pn.oninput=="function"}Ho=ha}else Ho=!1;Wu=Ho&&(!document.documentMode||9<document.documentMode)}function Go(){jo&&(jo.detachEvent("onpropertychange",M),ua=jo=null)}function M(t){if(t.propertyName==="value"&&zo(ua)){var i=[];Ki(i,ua,t,Di(t)),Bs(xd,i)}}function r(t,i,c){t==="focusin"?(Go(),jo=i,ua=c,jo.attachEvent("onpropertychange",M)):t==="focusout"&&Go()}function a(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zo(ua)}function l(t,i){if(t==="click")return zo(i)}function u(t,i){if(t==="input"||t==="change")return zo(i)}function f(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var m=typeof Object.is=="function"?Object.is:f;function y(t,i){if(m(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var c=Object.keys(t),d=Object.keys(i);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var E=c[d];if(!et.call(i,E)||!m(t[E],i[E]))return!1}return!0}function _(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function v(t,i){var c=_(t);t=0;for(var d;c;){if(c.nodeType===3){if(d=t+c.textContent.length,t<=i&&d>=i)return{node:c,offset:i-t};t=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=_(c)}}function I(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?I(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function k(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=os(t.document);i instanceof t.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)t=i.contentWindow;else break;i=os(t.document)}return i}function L(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var q=Vn&&"documentMode"in document&&11>=document.documentMode,Z=null,J=null,ce=null,Ee=!1;function Xe(t,i,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Ee||Z==null||Z!==os(d)||(d=Z,"selectionStart"in d&&L(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ce&&y(ce,d)||(ce=d,d=Bh(J,"onSelect"),0<d.length&&(i=new sr("onSelect","select",null,i,c),t.push({event:i,listeners:d}),i.target=Z)))}function ze(t,i){var c={};return c[t.toLowerCase()]=i.toLowerCase(),c["Webkit"+t]="webkit"+i,c["Moz"+t]="moz"+i,c}var Fe={animationend:ze("Animation","AnimationEnd"),animationiteration:ze("Animation","AnimationIteration"),animationstart:ze("Animation","AnimationStart"),transitionrun:ze("Transition","TransitionRun"),transitionstart:ze("Transition","TransitionStart"),transitioncancel:ze("Transition","TransitionCancel"),transitionend:ze("Transition","TransitionEnd")},rn={},Xt={};Vn&&(Xt=document.createElement("div").style,"AnimationEvent"in window||(delete Fe.animationend.animation,delete Fe.animationiteration.animation,delete Fe.animationstart.animation),"TransitionEvent"in window||delete Fe.transitionend.transition);function _r(t){if(rn[t])return rn[t];if(!Fe[t])return t;var i=Fe[t],c;for(c in i)if(i.hasOwnProperty(c)&&c in Xt)return rn[t]=i[c];return t}var Li=_r("animationend"),si=_r("animationiteration"),Un=_r("animationstart"),Yr=_r("transitionrun"),Si=_r("transitionstart"),qa=_r("transitioncancel"),fa=_r("transitionend"),Ku=new Map,vc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vc.push("scrollEnd");function Ss(t,i){Ku.set(t,i),Nn(i,[t])}var Qu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},gs=[],Cl=0,Ed=0;function Zu(){for(var t=Cl,i=Ed=Cl=0;i<t;){var c=gs[i];gs[i++]=null;var d=gs[i];gs[i++]=null;var E=gs[i];gs[i++]=null;var A=gs[i];if(gs[i++]=null,d!==null&&E!==null){var N=d.pending;N===null?E.next=E:(E.next=N.next,N.next=E),d.pending=E}A!==0&&um(c,E,A)}}function Ju(t,i,c,d){gs[Cl++]=t,gs[Cl++]=i,gs[Cl++]=c,gs[Cl++]=d,Ed|=d,t.lanes|=d,t=t.alternate,t!==null&&(t.lanes|=d)}function wd(t,i,c,d){return Ju(t,i,c,d),$u(t)}function qo(t,i){return Ju(t,null,null,i),$u(t)}function um(t,i,c){t.lanes|=c;var d=t.alternate;d!==null&&(d.lanes|=c);for(var E=!1,A=t.return;A!==null;)A.childLanes|=c,d=A.alternate,d!==null&&(d.childLanes|=c),A.tag===22&&(t=A.stateNode,t===null||t._visibility&1||(E=!0)),t=A,A=A.return;return t.tag===3?(A=t.stateNode,E&&i!==null&&(E=31-xt(c),t=A.hiddenUpdates,d=t[E],d===null?t[E]=[i]:d.push(i),i.lane=c|536870912),A):null}function $u(t){if(50<Xc)throw Xc=0,R0=null,Error(o(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Sl={};function uA(t,i,c,d){this.tag=t,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zi(t,i,c,d){return new uA(t,i,c,d)}function _d(t){return t=t.prototype,!(!t||!t.isReactComponent)}function da(t,i){var c=t.alternate;return c===null?(c=Zi(t.tag,i,t.key,t.mode),c.elementType=t.elementType,c.type=t.type,c.stateNode=t.stateNode,c.alternate=t,t.alternate=c):(c.pendingProps=i,c.type=t.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=t.flags&65011712,c.childLanes=t.childLanes,c.lanes=t.lanes,c.child=t.child,c.memoizedProps=t.memoizedProps,c.memoizedState=t.memoizedState,c.updateQueue=t.updateQueue,i=t.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=t.sibling,c.index=t.index,c.ref=t.ref,c.refCleanup=t.refCleanup,c}function hm(t,i){t.flags&=65011714;var c=t.alternate;return c===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=c.childLanes,t.lanes=c.lanes,t.child=c.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=c.memoizedProps,t.memoizedState=c.memoizedState,t.updateQueue=c.updateQueue,t.type=c.type,i=c.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function eh(t,i,c,d,E,A){var N=0;if(d=t,typeof t=="function")_d(t)&&(N=1);else if(typeof t=="string")N=mb(t,c,Te.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case U:return t=Zi(31,c,i,E),t.elementType=U,t.lanes=A,t;case ne:return Xo(c.children,E,A,i);case se:N=8,E|=24;break;case Qe:return t=Zi(12,c,i,E|2),t.elementType=Qe,t.lanes=A,t;case pt:return t=Zi(13,c,i,E),t.elementType=pt,t.lanes=A,t;case je:return t=Zi(19,c,i,E),t.elementType=je,t.lanes=A,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case he:N=10;break e;case Le:N=9;break e;case Ue:N=11;break e;case F:N=14;break e;case z:N=16,d=null;break e}N=29,c=Error(o(130,t===null?"null":typeof t,"")),d=null}return i=Zi(N,c,i,E),i.elementType=t,i.type=d,i.lanes=A,i}function Xo(t,i,c,d){return t=Zi(7,t,d,i),t.lanes=c,t}function Ad(t,i,c){return t=Zi(6,t,null,i),t.lanes=c,t}function fm(t){var i=Zi(18,null,null,0);return i.stateNode=t,i}function bd(t,i,c){return i=Zi(4,t.children!==null?t.children:[],t.key,i),i.lanes=c,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var dm=new WeakMap;function ms(t,i){if(typeof t=="object"&&t!==null){var c=dm.get(t);return c!==void 0?c:(i={value:t,source:i,stack:ot(i)},dm.set(t,i),i)}return{value:t,source:i,stack:ot(i)}}var Il=[],Rl=0,th=null,Tc=0,ps=[],ys=0,Xa=null,Fs=1,js="";function ga(t,i){Il[Rl++]=Tc,Il[Rl++]=th,th=t,Tc=i}function gm(t,i,c){ps[ys++]=Fs,ps[ys++]=js,ps[ys++]=Xa,Xa=t;var d=Fs;t=js;var E=32-xt(d)-1;d&=~(1<<E),c+=1;var A=32-xt(i)+E;if(30<A){var N=E-E%5;A=(d&(1<<N)-1).toString(32),d>>=N,E-=N,Fs=1<<32-xt(i)+E|c<<E|d,js=A+t}else Fs=1<<A|c<<E|d,js=t}function vd(t){t.return!==null&&(ga(t,1),gm(t,1,0))}function Td(t){for(;t===th;)th=Il[--Rl],Il[Rl]=null,Tc=Il[--Rl],Il[Rl]=null;for(;t===Xa;)Xa=ps[--ys],ps[ys]=null,js=ps[--ys],ps[ys]=null,Fs=ps[--ys],ps[ys]=null}function mm(t,i){ps[ys++]=Fs,ps[ys++]=js,ps[ys++]=Xa,Fs=i.id,js=i.overflow,Xa=t}var ai=null,ar=null,Cn=!1,Ya=null,xs=!1,Cd=Error(o(519));function Wa(t){var i=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Cc(ms(i,t)),Cd}function pm(t){var i=t.stateNode,c=t.type,d=t.memoizedProps;switch(i[tr]=t,i[vn]=d,c){case"dialog":hn("cancel",i),hn("close",i);break;case"iframe":case"object":case"embed":hn("load",i);break;case"video":case"audio":for(c=0;c<Wc.length;c++)hn(Wc[c],i);break;case"source":hn("error",i);break;case"img":case"image":case"link":hn("error",i),hn("load",i);break;case"details":hn("toggle",i);break;case"input":hn("invalid",i),ue(i,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":hn("invalid",i);break;case"textarea":hn("invalid",i),Nr(i,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||i.textContent===""+c||d.suppressHydrationWarning===!0||My(i.textContent,c)?(d.popover!=null&&(hn("beforetoggle",i),hn("toggle",i)),d.onScroll!=null&&hn("scroll",i),d.onScrollEnd!=null&&hn("scrollend",i),d.onClick!=null&&(i.onclick=mi),i=!0):i=!1,i||Wa(t,!0)}function ym(t){for(ai=t.return;ai;)switch(ai.tag){case 5:case 31:case 13:xs=!1;return;case 27:case 3:xs=!0;return;default:ai=ai.return}}function Nl(t){if(t!==ai)return!1;if(!Cn)return ym(t),Cn=!0,!1;var i=t.tag,c;if((c=i!==3&&i!==27)&&((c=i===5)&&(c=t.type,c=!(c!=="form"&&c!=="button")||G0(t.type,t.memoizedProps)),c=!c),c&&ar&&Wa(t),ym(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));ar=zy(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));ar=zy(t)}else i===27?(i=ar,lo(t.type)?(t=K0,K0=null,ar=t):ar=i):ar=ai?ws(t.stateNode.nextSibling):null;return!0}function Yo(){ar=ai=null,Cn=!1}function Sd(){var t=Ya;return t!==null&&(Ui===null?Ui=t:Ui.push.apply(Ui,t),Ya=null),t}function Cc(t){Ya===null?Ya=[t]:Ya.push(t)}var Id=K(null),Wo=null,ma=null;function Ka(t,i,c){ve(Id,i._currentValue),i._currentValue=c}function pa(t){t._currentValue=Id.current,oe(Id)}function Rd(t,i,c){for(;t!==null;){var d=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),t===c)break;t=t.return}}function Nd(t,i,c,d){var E=t.child;for(E!==null&&(E.return=t);E!==null;){var A=E.dependencies;if(A!==null){var N=E.child;A=A.firstContext;e:for(;A!==null;){var V=A;A=E;for(var W=0;W<i.length;W++)if(V.context===i[W]){A.lanes|=c,V=A.alternate,V!==null&&(V.lanes|=c),Rd(A.return,c,t),d||(N=null);break e}A=V.next}}else if(E.tag===18){if(N=E.return,N===null)throw Error(o(341));N.lanes|=c,A=N.alternate,A!==null&&(A.lanes|=c),Rd(N,c,t),N=null}else N=E.child;if(N!==null)N.return=E;else for(N=E;N!==null;){if(N===t){N=null;break}if(E=N.sibling,E!==null){E.return=N.return,N=E;break}N=N.return}E=N}}function Ol(t,i,c,d){t=null;for(var E=i,A=!1;E!==null;){if(!A){if((E.flags&524288)!==0)A=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var N=E.alternate;if(N===null)throw Error(o(387));if(N=N.memoizedProps,N!==null){var V=E.type;m(E.pendingProps.value,N.value)||(t!==null?t.push(V):t=[V])}}else if(E===Je.current){if(N=E.alternate,N===null)throw Error(o(387));N.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(t!==null?t.push($c):t=[$c])}E=E.return}t!==null&&Nd(i,t,c,d),i.flags|=262144}function nh(t){for(t=t.firstContext;t!==null;){if(!m(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ko(t){Wo=t,ma=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function oi(t){return xm(Wo,t)}function rh(t,i){return Wo===null&&Ko(t),xm(t,i)}function xm(t,i){var c=i._currentValue;if(i={context:i,memoizedValue:c,next:null},ma===null){if(t===null)throw Error(o(308));ma=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else ma=ma.next=i;return c}var hA=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(c,d){t.push(d)}};this.abort=function(){i.aborted=!0,t.forEach(function(c){return c()})}},fA=s.unstable_scheduleCallback,dA=s.unstable_NormalPriority,Vr={$$typeof:he,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Od(){return{controller:new hA,data:new Map,refCount:0}}function Sc(t){t.refCount--,t.refCount===0&&fA(dA,function(){t.controller.abort()})}var Ic=null,Dd=0,Dl=0,Ml=null;function gA(t,i){if(Ic===null){var c=Ic=[];Dd=0,Dl=L0(),Ml={status:"pending",value:void 0,then:function(d){c.push(d)}}}return Dd++,i.then(Em,Em),i}function Em(){if(--Dd===0&&Ic!==null){Ml!==null&&(Ml.status="fulfilled");var t=Ic;Ic=null,Dl=0,Ml=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function mA(t,i){var c=[],d={status:"pending",value:null,reason:null,then:function(E){c.push(E)}};return t.then(function(){d.status="fulfilled",d.value=i;for(var E=0;E<c.length;E++)(0,c[E])(i)},function(E){for(d.status="rejected",d.reason=E,E=0;E<c.length;E++)(0,c[E])(void 0)}),d}var wm=re.S;re.S=function(t,i){ry=Rt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&gA(t,i),wm!==null&&wm(t,i)};var Qo=K(null);function Md(){var t=Qo.current;return t!==null?t:$n.pooledCache}function ih(t,i){i===null?ve(Qo,Qo.current):ve(Qo,i.pool)}function _m(){var t=Md();return t===null?null:{parent:Vr._currentValue,pool:t}}var kl=Error(o(460)),kd=Error(o(474)),sh=Error(o(542)),ah={then:function(){}};function Am(t){return t=t.status,t==="fulfilled"||t==="rejected"}function bm(t,i,c){switch(c=t[c],c===void 0?t.push(i):c!==i&&(i.then(mi,mi),i=c),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Tm(t),t;default:if(typeof i.status=="string")i.then(mi,mi);else{if(t=$n,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=i,t.status="pending",t.then(function(d){if(i.status==="pending"){var E=i;E.status="fulfilled",E.value=d}},function(d){if(i.status==="pending"){var E=i;E.status="rejected",E.reason=d}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Tm(t),t}throw Jo=i,kl}}function Zo(t){try{var i=t._init;return i(t._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Jo=c,kl):c}}var Jo=null;function vm(){if(Jo===null)throw Error(o(459));var t=Jo;return Jo=null,t}function Tm(t){if(t===kl||t===sh)throw Error(o(483))}var Ll=null,Rc=0;function oh(t){var i=Rc;return Rc+=1,Ll===null&&(Ll=[]),bm(Ll,t,i)}function Nc(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function lh(t,i){throw i.$$typeof===P?Error(o(525)):(t=Object.prototype.toString.call(i),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Cm(t){function i(ie,te){if(t){var ge=ie.deletions;ge===null?(ie.deletions=[te],ie.flags|=16):ge.push(te)}}function c(ie,te){if(!t)return null;for(;te!==null;)i(ie,te),te=te.sibling;return null}function d(ie){for(var te=new Map;ie!==null;)ie.key!==null?te.set(ie.key,ie):te.set(ie.index,ie),ie=ie.sibling;return te}function E(ie,te){return ie=da(ie,te),ie.index=0,ie.sibling=null,ie}function A(ie,te,ge){return ie.index=ge,t?(ge=ie.alternate,ge!==null?(ge=ge.index,ge<te?(ie.flags|=67108866,te):ge):(ie.flags|=67108866,te)):(ie.flags|=1048576,te)}function N(ie){return t&&ie.alternate===null&&(ie.flags|=67108866),ie}function V(ie,te,ge,Ie){return te===null||te.tag!==6?(te=Ad(ge,ie.mode,Ie),te.return=ie,te):(te=E(te,ge),te.return=ie,te)}function W(ie,te,ge,Ie){var Ot=ge.type;return Ot===ne?Ce(ie,te,ge.props.children,Ie,ge.key):te!==null&&(te.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===z&&Zo(Ot)===te.type)?(te=E(te,ge.props),Nc(te,ge),te.return=ie,te):(te=eh(ge.type,ge.key,ge.props,null,ie.mode,Ie),Nc(te,ge),te.return=ie,te)}function me(ie,te,ge,Ie){return te===null||te.tag!==4||te.stateNode.containerInfo!==ge.containerInfo||te.stateNode.implementation!==ge.implementation?(te=bd(ge,ie.mode,Ie),te.return=ie,te):(te=E(te,ge.children||[]),te.return=ie,te)}function Ce(ie,te,ge,Ie,Ot){return te===null||te.tag!==7?(te=Xo(ge,ie.mode,Ie,Ot),te.return=ie,te):(te=E(te,ge),te.return=ie,te)}function Ne(ie,te,ge){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return te=Ad(""+te,ie.mode,ge),te.return=ie,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case B:return ge=eh(te.type,te.key,te.props,null,ie.mode,ge),Nc(ge,te),ge.return=ie,ge;case $:return te=bd(te,ie.mode,ge),te.return=ie,te;case z:return te=Zo(te),Ne(ie,te,ge)}if(ae(te)||Y(te))return te=Xo(te,ie.mode,ge,null),te.return=ie,te;if(typeof te.then=="function")return Ne(ie,oh(te),ge);if(te.$$typeof===he)return Ne(ie,rh(ie,te),ge);lh(ie,te)}return null}function pe(ie,te,ge,Ie){var Ot=te!==null?te.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return Ot!==null?null:V(ie,te,""+ge,Ie);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case B:return ge.key===Ot?W(ie,te,ge,Ie):null;case $:return ge.key===Ot?me(ie,te,ge,Ie):null;case z:return ge=Zo(ge),pe(ie,te,ge,Ie)}if(ae(ge)||Y(ge))return Ot!==null?null:Ce(ie,te,ge,Ie,null);if(typeof ge.then=="function")return pe(ie,te,oh(ge),Ie);if(ge.$$typeof===he)return pe(ie,te,rh(ie,ge),Ie);lh(ie,ge)}return null}function Ae(ie,te,ge,Ie,Ot){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return ie=ie.get(ge)||null,V(te,ie,""+Ie,Ot);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case B:return ie=ie.get(Ie.key===null?ge:Ie.key)||null,W(te,ie,Ie,Ot);case $:return ie=ie.get(Ie.key===null?ge:Ie.key)||null,me(te,ie,Ie,Ot);case z:return Ie=Zo(Ie),Ae(ie,te,ge,Ie,Ot)}if(ae(Ie)||Y(Ie))return ie=ie.get(ge)||null,Ce(te,ie,Ie,Ot,null);if(typeof Ie.then=="function")return Ae(ie,te,ge,oh(Ie),Ot);if(Ie.$$typeof===he)return Ae(ie,te,ge,rh(te,Ie),Ot);lh(te,Ie)}return null}function wt(ie,te,ge,Ie){for(var Ot=null,Dn=null,vt=te,tn=te=0,xn=null;vt!==null&&tn<ge.length;tn++){vt.index>tn?(xn=vt,vt=null):xn=vt.sibling;var Mn=pe(ie,vt,ge[tn],Ie);if(Mn===null){vt===null&&(vt=xn);break}t&&vt&&Mn.alternate===null&&i(ie,vt),te=A(Mn,te,tn),Dn===null?Ot=Mn:Dn.sibling=Mn,Dn=Mn,vt=xn}if(tn===ge.length)return c(ie,vt),Cn&&ga(ie,tn),Ot;if(vt===null){for(;tn<ge.length;tn++)vt=Ne(ie,ge[tn],Ie),vt!==null&&(te=A(vt,te,tn),Dn===null?Ot=vt:Dn.sibling=vt,Dn=vt);return Cn&&ga(ie,tn),Ot}for(vt=d(vt);tn<ge.length;tn++)xn=Ae(vt,ie,tn,ge[tn],Ie),xn!==null&&(t&&xn.alternate!==null&&vt.delete(xn.key===null?tn:xn.key),te=A(xn,te,tn),Dn===null?Ot=xn:Dn.sibling=xn,Dn=xn);return t&&vt.forEach(function(go){return i(ie,go)}),Cn&&ga(ie,tn),Ot}function Bt(ie,te,ge,Ie){if(ge==null)throw Error(o(151));for(var Ot=null,Dn=null,vt=te,tn=te=0,xn=null,Mn=ge.next();vt!==null&&!Mn.done;tn++,Mn=ge.next()){vt.index>tn?(xn=vt,vt=null):xn=vt.sibling;var go=pe(ie,vt,Mn.value,Ie);if(go===null){vt===null&&(vt=xn);break}t&&vt&&go.alternate===null&&i(ie,vt),te=A(go,te,tn),Dn===null?Ot=go:Dn.sibling=go,Dn=go,vt=xn}if(Mn.done)return c(ie,vt),Cn&&ga(ie,tn),Ot;if(vt===null){for(;!Mn.done;tn++,Mn=ge.next())Mn=Ne(ie,Mn.value,Ie),Mn!==null&&(te=A(Mn,te,tn),Dn===null?Ot=Mn:Dn.sibling=Mn,Dn=Mn);return Cn&&ga(ie,tn),Ot}for(vt=d(vt);!Mn.done;tn++,Mn=ge.next())Mn=Ae(vt,ie,tn,Mn.value,Ie),Mn!==null&&(t&&Mn.alternate!==null&&vt.delete(Mn.key===null?tn:Mn.key),te=A(Mn,te,tn),Dn===null?Ot=Mn:Dn.sibling=Mn,Dn=Mn);return t&&vt.forEach(function(Cb){return i(ie,Cb)}),Cn&&ga(ie,tn),Ot}function Kn(ie,te,ge,Ie){if(typeof ge=="object"&&ge!==null&&ge.type===ne&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case B:e:{for(var Ot=ge.key;te!==null;){if(te.key===Ot){if(Ot=ge.type,Ot===ne){if(te.tag===7){c(ie,te.sibling),Ie=E(te,ge.props.children),Ie.return=ie,ie=Ie;break e}}else if(te.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===z&&Zo(Ot)===te.type){c(ie,te.sibling),Ie=E(te,ge.props),Nc(Ie,ge),Ie.return=ie,ie=Ie;break e}c(ie,te);break}else i(ie,te);te=te.sibling}ge.type===ne?(Ie=Xo(ge.props.children,ie.mode,Ie,ge.key),Ie.return=ie,ie=Ie):(Ie=eh(ge.type,ge.key,ge.props,null,ie.mode,Ie),Nc(Ie,ge),Ie.return=ie,ie=Ie)}return N(ie);case $:e:{for(Ot=ge.key;te!==null;){if(te.key===Ot)if(te.tag===4&&te.stateNode.containerInfo===ge.containerInfo&&te.stateNode.implementation===ge.implementation){c(ie,te.sibling),Ie=E(te,ge.children||[]),Ie.return=ie,ie=Ie;break e}else{c(ie,te);break}else i(ie,te);te=te.sibling}Ie=bd(ge,ie.mode,Ie),Ie.return=ie,ie=Ie}return N(ie);case z:return ge=Zo(ge),Kn(ie,te,ge,Ie)}if(ae(ge))return wt(ie,te,ge,Ie);if(Y(ge)){if(Ot=Y(ge),typeof Ot!="function")throw Error(o(150));return ge=Ot.call(ge),Bt(ie,te,ge,Ie)}if(typeof ge.then=="function")return Kn(ie,te,oh(ge),Ie);if(ge.$$typeof===he)return Kn(ie,te,rh(ie,ge),Ie);lh(ie,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint"?(ge=""+ge,te!==null&&te.tag===6?(c(ie,te.sibling),Ie=E(te,ge),Ie.return=ie,ie=Ie):(c(ie,te),Ie=Ad(ge,ie.mode,Ie),Ie.return=ie,ie=Ie),N(ie)):c(ie,te)}return function(ie,te,ge,Ie){try{Rc=0;var Ot=Kn(ie,te,ge,Ie);return Ll=null,Ot}catch(vt){if(vt===kl||vt===sh)throw vt;var Dn=Zi(29,vt,null,ie.mode);return Dn.lanes=Ie,Dn.return=ie,Dn}finally{}}}var $o=Cm(!0),Sm=Cm(!1),Qa=!1;function Ld(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pd(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Za(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ja(t,i,c){var d=t.updateQueue;if(d===null)return null;if(d=d.shared,(Ln&2)!==0){var E=d.pending;return E===null?i.next=i:(i.next=E.next,E.next=i),d.pending=i,i=$u(t),um(t,null,c),i}return Ju(t,d,i,c),$u(t)}function Oc(t,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194048)!==0)){var d=i.lanes;d&=t.pendingLanes,c|=d,i.lanes=c,sn(t,c)}}function Bd(t,i){var c=t.updateQueue,d=t.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var E=null,A=null;if(c=c.firstBaseUpdate,c!==null){do{var N={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};A===null?E=A=N:A=A.next=N,c=c.next}while(c!==null);A===null?E=A=i:A=A.next=i}else E=A=i;c={baseState:d.baseState,firstBaseUpdate:E,lastBaseUpdate:A,shared:d.shared,callbacks:d.callbacks},t.updateQueue=c;return}t=c.lastBaseUpdate,t===null?c.firstBaseUpdate=i:t.next=i,c.lastBaseUpdate=i}var Vd=!1;function Dc(){if(Vd){var t=Ml;if(t!==null)throw t}}function Mc(t,i,c,d){Vd=!1;var E=t.updateQueue;Qa=!1;var A=E.firstBaseUpdate,N=E.lastBaseUpdate,V=E.shared.pending;if(V!==null){E.shared.pending=null;var W=V,me=W.next;W.next=null,N===null?A=me:N.next=me,N=W;var Ce=t.alternate;Ce!==null&&(Ce=Ce.updateQueue,V=Ce.lastBaseUpdate,V!==N&&(V===null?Ce.firstBaseUpdate=me:V.next=me,Ce.lastBaseUpdate=W))}if(A!==null){var Ne=E.baseState;N=0,Ce=me=W=null,V=A;do{var pe=V.lane&-536870913,Ae=pe!==V.lane;if(Ae?(yn&pe)===pe:(d&pe)===pe){pe!==0&&pe===Dl&&(Vd=!0),Ce!==null&&(Ce=Ce.next={lane:0,tag:V.tag,payload:V.payload,callback:null,next:null});e:{var wt=t,Bt=V;pe=i;var Kn=c;switch(Bt.tag){case 1:if(wt=Bt.payload,typeof wt=="function"){Ne=wt.call(Kn,Ne,pe);break e}Ne=wt;break e;case 3:wt.flags=wt.flags&-65537|128;case 0:if(wt=Bt.payload,pe=typeof wt=="function"?wt.call(Kn,Ne,pe):wt,pe==null)break e;Ne=R({},Ne,pe);break e;case 2:Qa=!0}}pe=V.callback,pe!==null&&(t.flags|=64,Ae&&(t.flags|=8192),Ae=E.callbacks,Ae===null?E.callbacks=[pe]:Ae.push(pe))}else Ae={lane:pe,tag:V.tag,payload:V.payload,callback:V.callback,next:null},Ce===null?(me=Ce=Ae,W=Ne):Ce=Ce.next=Ae,N|=pe;if(V=V.next,V===null){if(V=E.shared.pending,V===null)break;Ae=V,V=Ae.next,Ae.next=null,E.lastBaseUpdate=Ae,E.shared.pending=null}}while(!0);Ce===null&&(W=Ne),E.baseState=W,E.firstBaseUpdate=me,E.lastBaseUpdate=Ce,A===null&&(E.shared.lanes=0),ro|=N,t.lanes=N,t.memoizedState=Ne}}function Im(t,i){if(typeof t!="function")throw Error(o(191,t));t.call(i)}function Rm(t,i){var c=t.callbacks;if(c!==null)for(t.callbacks=null,t=0;t<c.length;t++)Im(c[t],i)}var Pl=K(null),ch=K(0);function Nm(t,i){t=Ta,ve(ch,t),ve(Pl,i),Ta=t|i.baseLanes}function Ud(){ve(ch,Ta),ve(Pl,Pl.current)}function Fd(){Ta=ch.current,oe(Pl),oe(ch)}var Ji=K(null),Es=null;function $a(t){var i=t.alternate;ve(Or,Or.current&1),ve(Ji,t),Es===null&&(i===null||Pl.current!==null||i.memoizedState!==null)&&(Es=t)}function jd(t){ve(Or,Or.current),ve(Ji,t),Es===null&&(Es=t)}function Om(t){t.tag===22?(ve(Or,Or.current),ve(Ji,t),Es===null&&(Es=t)):eo()}function eo(){ve(Or,Or.current),ve(Ji,Ji.current)}function $i(t){oe(Ji),Es===t&&(Es=null),oe(Or)}var Or=K(0);function uh(t){for(var i=t;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Y0(c)||W0(c)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ya=0,Jt=null,Yn=null,Ur=null,hh=!1,Bl=!1,el=!1,fh=0,kc=0,Vl=null,pA=0;function Ar(){throw Error(o(321))}function zd(t,i){if(i===null)return!1;for(var c=0;c<i.length&&c<t.length;c++)if(!m(t[c],i[c]))return!1;return!0}function Hd(t,i,c,d,E,A){return ya=A,Jt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,re.H=t===null||t.memoizedState===null?gp:i0,el=!1,A=c(d,E),el=!1,Bl&&(A=Mm(i,c,d,E)),Dm(t),A}function Dm(t){re.H=Bc;var i=Yn!==null&&Yn.next!==null;if(ya=0,Ur=Yn=Jt=null,hh=!1,kc=0,Vl=null,i)throw Error(o(300));t===null||Fr||(t=t.dependencies,t!==null&&nh(t)&&(Fr=!0))}function Mm(t,i,c,d){Jt=t;var E=0;do{if(Bl&&(Vl=null),kc=0,Bl=!1,25<=E)throw Error(o(301));if(E+=1,Ur=Yn=null,t.updateQueue!=null){var A=t.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}re.H=mp,A=i(c,d)}while(Bl);return A}function yA(){var t=re.H,i=t.useState()[0];return i=typeof i.then=="function"?Lc(i):i,t=t.useState()[0],(Yn!==null?Yn.memoizedState:null)!==t&&(Jt.flags|=1024),i}function Gd(){var t=fh!==0;return fh=0,t}function qd(t,i,c){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~c}function Xd(t){if(hh){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}hh=!1}ya=0,Ur=Yn=Jt=null,Bl=!1,kc=fh=0,Vl=null}function Ii(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ur===null?Jt.memoizedState=Ur=t:Ur=Ur.next=t,Ur}function Dr(){if(Yn===null){var t=Jt.alternate;t=t!==null?t.memoizedState:null}else t=Yn.next;var i=Ur===null?Jt.memoizedState:Ur.next;if(i!==null)Ur=i,Yn=t;else{if(t===null)throw Jt.alternate===null?Error(o(467)):Error(o(310));Yn=t,t={memoizedState:Yn.memoizedState,baseState:Yn.baseState,baseQueue:Yn.baseQueue,queue:Yn.queue,next:null},Ur===null?Jt.memoizedState=Ur=t:Ur=Ur.next=t}return Ur}function dh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Lc(t){var i=kc;return kc+=1,Vl===null&&(Vl=[]),t=bm(Vl,t,i),i=Jt,(Ur===null?i.memoizedState:Ur.next)===null&&(i=i.alternate,re.H=i===null||i.memoizedState===null?gp:i0),t}function gh(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Lc(t);if(t.$$typeof===he)return oi(t)}throw Error(o(438,String(t)))}function Yd(t){var i=null,c=Jt.updateQueue;if(c!==null&&(i=c.memoCache),i==null){var d=Jt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(i={data:d.data.map(function(E){return E.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),c===null&&(c=dh(),Jt.updateQueue=c),c.memoCache=i,c=i.data[i.index],c===void 0)for(c=i.data[i.index]=Array(t),d=0;d<t;d++)c[d]=Q;return i.index++,c}function xa(t,i){return typeof i=="function"?i(t):i}function mh(t){var i=Dr();return Wd(i,Yn,t)}function Wd(t,i,c){var d=t.queue;if(d===null)throw Error(o(311));d.lastRenderedReducer=c;var E=t.baseQueue,A=d.pending;if(A!==null){if(E!==null){var N=E.next;E.next=A.next,A.next=N}i.baseQueue=E=A,d.pending=null}if(A=t.baseState,E===null)t.memoizedState=A;else{i=E.next;var V=N=null,W=null,me=i,Ce=!1;do{var Ne=me.lane&-536870913;if(Ne!==me.lane?(yn&Ne)===Ne:(ya&Ne)===Ne){var pe=me.revertLane;if(pe===0)W!==null&&(W=W.next={lane:0,revertLane:0,gesture:null,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),Ne===Dl&&(Ce=!0);else if((ya&pe)===pe){me=me.next,pe===Dl&&(Ce=!0);continue}else Ne={lane:0,revertLane:me.revertLane,gesture:null,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},W===null?(V=W=Ne,N=A):W=W.next=Ne,Jt.lanes|=pe,ro|=pe;Ne=me.action,el&&c(A,Ne),A=me.hasEagerState?me.eagerState:c(A,Ne)}else pe={lane:Ne,revertLane:me.revertLane,gesture:me.gesture,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},W===null?(V=W=pe,N=A):W=W.next=pe,Jt.lanes|=Ne,ro|=Ne;me=me.next}while(me!==null&&me!==i);if(W===null?N=A:W.next=V,!m(A,t.memoizedState)&&(Fr=!0,Ce&&(c=Ml,c!==null)))throw c;t.memoizedState=A,t.baseState=N,t.baseQueue=W,d.lastRenderedState=A}return E===null&&(d.lanes=0),[t.memoizedState,d.dispatch]}function Kd(t){var i=Dr(),c=i.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=t;var d=c.dispatch,E=c.pending,A=i.memoizedState;if(E!==null){c.pending=null;var N=E=E.next;do A=t(A,N.action),N=N.next;while(N!==E);m(A,i.memoizedState)||(Fr=!0),i.memoizedState=A,i.baseQueue===null&&(i.baseState=A),c.lastRenderedState=A}return[A,d]}function km(t,i,c){var d=Jt,E=Dr(),A=Cn;if(A){if(c===void 0)throw Error(o(407));c=c()}else c=i();var N=!m((Yn||E).memoizedState,c);if(N&&(E.memoizedState=c,Fr=!0),E=E.queue,Jd(Bm.bind(null,d,E,t),[t]),E.getSnapshot!==i||N||Ur!==null&&Ur.memoizedState.tag&1){if(d.flags|=2048,Ul(9,{destroy:void 0},Pm.bind(null,d,E,c,i),null),$n===null)throw Error(o(349));A||(ya&127)!==0||Lm(d,i,c)}return c}function Lm(t,i,c){t.flags|=16384,t={getSnapshot:i,value:c},i=Jt.updateQueue,i===null?(i=dh(),Jt.updateQueue=i,i.stores=[t]):(c=i.stores,c===null?i.stores=[t]:c.push(t))}function Pm(t,i,c,d){i.value=c,i.getSnapshot=d,Vm(i)&&Um(t)}function Bm(t,i,c){return c(function(){Vm(i)&&Um(t)})}function Vm(t){var i=t.getSnapshot;t=t.value;try{var c=i();return!m(t,c)}catch{return!0}}function Um(t){var i=qo(t,2);i!==null&&Fi(i,t,2)}function Qd(t){var i=Ii();if(typeof t=="function"){var c=t;if(t=c(),el){zt(!0);try{c()}finally{zt(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:t},i}function Fm(t,i,c,d){return t.baseState=c,Wd(t,Yn,typeof d=="function"?d:xa)}function xA(t,i,c,d,E){if(xh(t))throw Error(o(485));if(t=i.action,t!==null){var A={payload:E,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){A.listeners.push(N)}};re.T!==null?c(!0):A.isTransition=!1,d(A),c=i.pending,c===null?(A.next=i.pending=A,jm(i,A)):(A.next=c.next,i.pending=c.next=A)}}function jm(t,i){var c=i.action,d=i.payload,E=t.state;if(i.isTransition){var A=re.T,N={};re.T=N;try{var V=c(E,d),W=re.S;W!==null&&W(N,V),zm(t,i,V)}catch(me){Zd(t,i,me)}finally{A!==null&&N.types!==null&&(A.types=N.types),re.T=A}}else try{A=c(E,d),zm(t,i,A)}catch(me){Zd(t,i,me)}}function zm(t,i,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){Hm(t,i,d)},function(d){return Zd(t,i,d)}):Hm(t,i,c)}function Hm(t,i,c){i.status="fulfilled",i.value=c,Gm(i),t.state=c,i=t.pending,i!==null&&(c=i.next,c===i?t.pending=null:(c=c.next,i.next=c,jm(t,c)))}function Zd(t,i,c){var d=t.pending;if(t.pending=null,d!==null){d=d.next;do i.status="rejected",i.reason=c,Gm(i),i=i.next;while(i!==d)}t.action=null}function Gm(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function qm(t,i){return i}function Xm(t,i){if(Cn){var c=$n.formState;if(c!==null){e:{var d=Jt;if(Cn){if(ar){t:{for(var E=ar,A=xs;E.nodeType!==8;){if(!A){E=null;break t}if(E=ws(E.nextSibling),E===null){E=null;break t}}A=E.data,E=A==="F!"||A==="F"?E:null}if(E){ar=ws(E.nextSibling),d=E.data==="F!";break e}}Wa(d)}d=!1}d&&(i=c[0])}}return c=Ii(),c.memoizedState=c.baseState=i,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qm,lastRenderedState:i},c.queue=d,c=hp.bind(null,Jt,d),d.dispatch=c,d=Qd(!1),A=r0.bind(null,Jt,!1,d.queue),d=Ii(),E={state:i,dispatch:null,action:t,pending:null},d.queue=E,c=xA.bind(null,Jt,E,A,c),E.dispatch=c,d.memoizedState=t,[i,c,!1]}function Ym(t){var i=Dr();return Wm(i,Yn,t)}function Wm(t,i,c){if(i=Wd(t,i,qm)[0],t=mh(xa)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var d=Lc(i)}catch(N){throw N===kl?sh:N}else d=i;i=Dr();var E=i.queue,A=E.dispatch;return c!==i.memoizedState&&(Jt.flags|=2048,Ul(9,{destroy:void 0},EA.bind(null,E,c),null)),[d,A,t]}function EA(t,i){t.action=i}function Km(t){var i=Dr(),c=Yn;if(c!==null)return Wm(i,c,t);Dr(),i=i.memoizedState,c=Dr();var d=c.queue.dispatch;return c.memoizedState=t,[i,d,!1]}function Ul(t,i,c,d){return t={tag:t,create:c,deps:d,inst:i,next:null},i=Jt.updateQueue,i===null&&(i=dh(),Jt.updateQueue=i),c=i.lastEffect,c===null?i.lastEffect=t.next=t:(d=c.next,c.next=t,t.next=d,i.lastEffect=t),t}function Qm(){return Dr().memoizedState}function ph(t,i,c,d){var E=Ii();Jt.flags|=t,E.memoizedState=Ul(1|i,{destroy:void 0},c,d===void 0?null:d)}function yh(t,i,c,d){var E=Dr();d=d===void 0?null:d;var A=E.memoizedState.inst;Yn!==null&&d!==null&&zd(d,Yn.memoizedState.deps)?E.memoizedState=Ul(i,A,c,d):(Jt.flags|=t,E.memoizedState=Ul(1|i,A,c,d))}function Zm(t,i){ph(8390656,8,t,i)}function Jd(t,i){yh(2048,8,t,i)}function wA(t){Jt.flags|=4;var i=Jt.updateQueue;if(i===null)i=dh(),Jt.updateQueue=i,i.events=[t];else{var c=i.events;c===null?i.events=[t]:c.push(t)}}function Jm(t){var i=Dr().memoizedState;return wA({ref:i,nextImpl:t}),function(){if((Ln&2)!==0)throw Error(o(440));return i.impl.apply(void 0,arguments)}}function $m(t,i){return yh(4,2,t,i)}function ep(t,i){return yh(4,4,t,i)}function tp(t,i){if(typeof i=="function"){t=t();var c=i(t);return function(){typeof c=="function"?c():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function np(t,i,c){c=c!=null?c.concat([t]):null,yh(4,4,tp.bind(null,i,t),c)}function $d(){}function rp(t,i){var c=Dr();i=i===void 0?null:i;var d=c.memoizedState;return i!==null&&zd(i,d[1])?d[0]:(c.memoizedState=[t,i],t)}function ip(t,i){var c=Dr();i=i===void 0?null:i;var d=c.memoizedState;if(i!==null&&zd(i,d[1]))return d[0];if(d=t(),el){zt(!0);try{t()}finally{zt(!1)}}return c.memoizedState=[d,i],d}function e0(t,i,c){return c===void 0||(ya&1073741824)!==0&&(yn&261930)===0?t.memoizedState=i:(t.memoizedState=c,t=sy(),Jt.lanes|=t,ro|=t,c)}function sp(t,i,c,d){return m(c,i)?c:Pl.current!==null?(t=e0(t,c,d),m(t,i)||(Fr=!0),t):(ya&42)===0||(ya&1073741824)!==0&&(yn&261930)===0?(Fr=!0,t.memoizedState=c):(t=sy(),Jt.lanes|=t,ro|=t,i)}function ap(t,i,c,d,E){var A=fe.p;fe.p=A!==0&&8>A?A:8;var N=re.T,V={};re.T=V,r0(t,!1,i,c);try{var W=E(),me=re.S;if(me!==null&&me(V,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var Ce=mA(W,d);Pc(t,i,Ce,ns(t))}else Pc(t,i,d,ns(t))}catch(Ne){Pc(t,i,{then:function(){},status:"rejected",reason:Ne},ns())}finally{fe.p=A,N!==null&&V.types!==null&&(N.types=V.types),re.T=N}}function _A(){}function t0(t,i,c,d){if(t.tag!==5)throw Error(o(476));var E=op(t).queue;ap(t,E,i,tt,c===null?_A:function(){return lp(t),c(d)})}function op(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:tt,baseState:tt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:tt},next:null};var c={};return i.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:c},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function lp(t){var i=op(t);i.next===null&&(i=t.alternate.memoizedState),Pc(t,i.next.queue,{},ns())}function n0(){return oi($c)}function cp(){return Dr().memoizedState}function up(){return Dr().memoizedState}function AA(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var c=ns();t=Za(c);var d=Ja(i,t,c);d!==null&&(Fi(d,i,c),Oc(d,i,c)),i={cache:Od()},t.payload=i;return}i=i.return}}function bA(t,i,c){var d=ns();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},xh(t)?fp(i,c):(c=wd(t,i,c,d),c!==null&&(Fi(c,t,d),dp(c,i,d)))}function hp(t,i,c){var d=ns();Pc(t,i,c,d)}function Pc(t,i,c,d){var E={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(xh(t))fp(i,E);else{var A=t.alternate;if(t.lanes===0&&(A===null||A.lanes===0)&&(A=i.lastRenderedReducer,A!==null))try{var N=i.lastRenderedState,V=A(N,c);if(E.hasEagerState=!0,E.eagerState=V,m(V,N))return Ju(t,i,E,0),$n===null&&Zu(),!1}catch{}finally{}if(c=wd(t,i,E,d),c!==null)return Fi(c,t,d),dp(c,i,d),!0}return!1}function r0(t,i,c,d){if(d={lane:2,revertLane:L0(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},xh(t)){if(i)throw Error(o(479))}else i=wd(t,c,d,2),i!==null&&Fi(i,t,2)}function xh(t){var i=t.alternate;return t===Jt||i!==null&&i===Jt}function fp(t,i){Bl=hh=!0;var c=t.pending;c===null?i.next=i:(i.next=c.next,c.next=i),t.pending=i}function dp(t,i,c){if((c&4194048)!==0){var d=i.lanes;d&=t.pendingLanes,c|=d,i.lanes=c,sn(t,c)}}var Bc={readContext:oi,use:gh,useCallback:Ar,useContext:Ar,useEffect:Ar,useImperativeHandle:Ar,useLayoutEffect:Ar,useInsertionEffect:Ar,useMemo:Ar,useReducer:Ar,useRef:Ar,useState:Ar,useDebugValue:Ar,useDeferredValue:Ar,useTransition:Ar,useSyncExternalStore:Ar,useId:Ar,useHostTransitionStatus:Ar,useFormState:Ar,useActionState:Ar,useOptimistic:Ar,useMemoCache:Ar,useCacheRefresh:Ar};Bc.useEffectEvent=Ar;var gp={readContext:oi,use:gh,useCallback:function(t,i){return Ii().memoizedState=[t,i===void 0?null:i],t},useContext:oi,useEffect:Zm,useImperativeHandle:function(t,i,c){c=c!=null?c.concat([t]):null,ph(4194308,4,tp.bind(null,i,t),c)},useLayoutEffect:function(t,i){return ph(4194308,4,t,i)},useInsertionEffect:function(t,i){ph(4,2,t,i)},useMemo:function(t,i){var c=Ii();i=i===void 0?null:i;var d=t();if(el){zt(!0);try{t()}finally{zt(!1)}}return c.memoizedState=[d,i],d},useReducer:function(t,i,c){var d=Ii();if(c!==void 0){var E=c(i);if(el){zt(!0);try{c(i)}finally{zt(!1)}}}else E=i;return d.memoizedState=d.baseState=E,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:E},d.queue=t,t=t.dispatch=bA.bind(null,Jt,t),[d.memoizedState,t]},useRef:function(t){var i=Ii();return t={current:t},i.memoizedState=t},useState:function(t){t=Qd(t);var i=t.queue,c=hp.bind(null,Jt,i);return i.dispatch=c,[t.memoizedState,c]},useDebugValue:$d,useDeferredValue:function(t,i){var c=Ii();return e0(c,t,i)},useTransition:function(){var t=Qd(!1);return t=ap.bind(null,Jt,t.queue,!0,!1),Ii().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,c){var d=Jt,E=Ii();if(Cn){if(c===void 0)throw Error(o(407));c=c()}else{if(c=i(),$n===null)throw Error(o(349));(yn&127)!==0||Lm(d,i,c)}E.memoizedState=c;var A={value:c,getSnapshot:i};return E.queue=A,Zm(Bm.bind(null,d,A,t),[t]),d.flags|=2048,Ul(9,{destroy:void 0},Pm.bind(null,d,A,c,i),null),c},useId:function(){var t=Ii(),i=$n.identifierPrefix;if(Cn){var c=js,d=Fs;c=(d&~(1<<32-xt(d)-1)).toString(32)+c,i="_"+i+"R_"+c,c=fh++,0<c&&(i+="H"+c.toString(32)),i+="_"}else c=pA++,i="_"+i+"r_"+c.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:n0,useFormState:Xm,useActionState:Xm,useOptimistic:function(t){var i=Ii();i.memoizedState=i.baseState=t;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=c,i=r0.bind(null,Jt,!0,c),c.dispatch=i,[t,i]},useMemoCache:Yd,useCacheRefresh:function(){return Ii().memoizedState=AA.bind(null,Jt)},useEffectEvent:function(t){var i=Ii(),c={impl:t};return i.memoizedState=c,function(){if((Ln&2)!==0)throw Error(o(440));return c.impl.apply(void 0,arguments)}}},i0={readContext:oi,use:gh,useCallback:rp,useContext:oi,useEffect:Jd,useImperativeHandle:np,useInsertionEffect:$m,useLayoutEffect:ep,useMemo:ip,useReducer:mh,useRef:Qm,useState:function(){return mh(xa)},useDebugValue:$d,useDeferredValue:function(t,i){var c=Dr();return sp(c,Yn.memoizedState,t,i)},useTransition:function(){var t=mh(xa)[0],i=Dr().memoizedState;return[typeof t=="boolean"?t:Lc(t),i]},useSyncExternalStore:km,useId:cp,useHostTransitionStatus:n0,useFormState:Ym,useActionState:Ym,useOptimistic:function(t,i){var c=Dr();return Fm(c,Yn,t,i)},useMemoCache:Yd,useCacheRefresh:up};i0.useEffectEvent=Jm;var mp={readContext:oi,use:gh,useCallback:rp,useContext:oi,useEffect:Jd,useImperativeHandle:np,useInsertionEffect:$m,useLayoutEffect:ep,useMemo:ip,useReducer:Kd,useRef:Qm,useState:function(){return Kd(xa)},useDebugValue:$d,useDeferredValue:function(t,i){var c=Dr();return Yn===null?e0(c,t,i):sp(c,Yn.memoizedState,t,i)},useTransition:function(){var t=Kd(xa)[0],i=Dr().memoizedState;return[typeof t=="boolean"?t:Lc(t),i]},useSyncExternalStore:km,useId:cp,useHostTransitionStatus:n0,useFormState:Km,useActionState:Km,useOptimistic:function(t,i){var c=Dr();return Yn!==null?Fm(c,Yn,t,i):(c.baseState=t,[t,c.queue.dispatch])},useMemoCache:Yd,useCacheRefresh:up};mp.useEffectEvent=Jm;function s0(t,i,c,d){i=t.memoizedState,c=c(d,i),c=c==null?i:R({},i,c),t.memoizedState=c,t.lanes===0&&(t.updateQueue.baseState=c)}var a0={enqueueSetState:function(t,i,c){t=t._reactInternals;var d=ns(),E=Za(d);E.payload=i,c!=null&&(E.callback=c),i=Ja(t,E,d),i!==null&&(Fi(i,t,d),Oc(i,t,d))},enqueueReplaceState:function(t,i,c){t=t._reactInternals;var d=ns(),E=Za(d);E.tag=1,E.payload=i,c!=null&&(E.callback=c),i=Ja(t,E,d),i!==null&&(Fi(i,t,d),Oc(i,t,d))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var c=ns(),d=Za(c);d.tag=2,i!=null&&(d.callback=i),i=Ja(t,d,c),i!==null&&(Fi(i,t,c),Oc(i,t,c))}};function pp(t,i,c,d,E,A,N){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(d,A,N):i.prototype&&i.prototype.isPureReactComponent?!y(c,d)||!y(E,A):!0}function yp(t,i,c,d){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,d),i.state!==t&&a0.enqueueReplaceState(i,i.state,null)}function tl(t,i){var c=i;if("ref"in i){c={};for(var d in i)d!=="ref"&&(c[d]=i[d])}if(t=t.defaultProps){c===i&&(c=R({},c));for(var E in t)c[E]===void 0&&(c[E]=t[E])}return c}function xp(t){Qu(t)}function Ep(t){console.error(t)}function wp(t){Qu(t)}function Eh(t,i){try{var c=t.onUncaughtError;c(i.value,{componentStack:i.stack})}catch(d){setTimeout(function(){throw d})}}function _p(t,i,c){try{var d=t.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function o0(t,i,c){return c=Za(c),c.tag=3,c.payload={element:null},c.callback=function(){Eh(t,i)},c}function Ap(t){return t=Za(t),t.tag=3,t}function bp(t,i,c,d){var E=c.type.getDerivedStateFromError;if(typeof E=="function"){var A=d.value;t.payload=function(){return E(A)},t.callback=function(){_p(i,c,d)}}var N=c.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(t.callback=function(){_p(i,c,d),typeof E!="function"&&(io===null?io=new Set([this]):io.add(this));var V=d.stack;this.componentDidCatch(d.value,{componentStack:V!==null?V:""})})}function vA(t,i,c,d,E){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(i=c.alternate,i!==null&&Ol(i,c,E,!0),c=Ji.current,c!==null){switch(c.tag){case 31:case 13:return Es===null?Oh():c.alternate===null&&br===0&&(br=3),c.flags&=-257,c.flags|=65536,c.lanes=E,d===ah?c.flags|=16384:(i=c.updateQueue,i===null?c.updateQueue=new Set([d]):i.add(d),D0(t,d,E)),!1;case 22:return c.flags|=65536,d===ah?c.flags|=16384:(i=c.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=i):(c=i.retryQueue,c===null?i.retryQueue=new Set([d]):c.add(d)),D0(t,d,E)),!1}throw Error(o(435,c.tag))}return D0(t,d,E),Oh(),!1}if(Cn)return i=Ji.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=E,d!==Cd&&(t=Error(o(422),{cause:d}),Cc(ms(t,c)))):(d!==Cd&&(i=Error(o(423),{cause:d}),Cc(ms(i,c))),t=t.current.alternate,t.flags|=65536,E&=-E,t.lanes|=E,d=ms(d,c),E=o0(t.stateNode,d,E),Bd(t,E),br!==4&&(br=2)),!1;var A=Error(o(520),{cause:d});if(A=ms(A,c),qc===null?qc=[A]:qc.push(A),br!==4&&(br=2),i===null)return!0;d=ms(d,c),c=i;do{switch(c.tag){case 3:return c.flags|=65536,t=E&-E,c.lanes|=t,t=o0(c.stateNode,d,t),Bd(c,t),!1;case 1:if(i=c.type,A=c.stateNode,(c.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(io===null||!io.has(A))))return c.flags|=65536,E&=-E,c.lanes|=E,E=Ap(E),bp(E,t,c,d),Bd(c,E),!1}c=c.return}while(c!==null);return!1}var l0=Error(o(461)),Fr=!1;function li(t,i,c,d){i.child=t===null?Sm(i,null,c,d):$o(i,t.child,c,d)}function vp(t,i,c,d,E){c=c.render;var A=i.ref;if("ref"in d){var N={};for(var V in d)V!=="ref"&&(N[V]=d[V])}else N=d;return Ko(i),d=Hd(t,i,c,N,A,E),V=Gd(),t!==null&&!Fr?(qd(t,i,E),Ea(t,i,E)):(Cn&&V&&vd(i),i.flags|=1,li(t,i,d,E),i.child)}function Tp(t,i,c,d,E){if(t===null){var A=c.type;return typeof A=="function"&&!_d(A)&&A.defaultProps===void 0&&c.compare===null?(i.tag=15,i.type=A,Cp(t,i,A,d,E)):(t=eh(c.type,null,d,i,i.mode,E),t.ref=i.ref,t.return=i,i.child=t)}if(A=t.child,!p0(t,E)){var N=A.memoizedProps;if(c=c.compare,c=c!==null?c:y,c(N,d)&&t.ref===i.ref)return Ea(t,i,E)}return i.flags|=1,t=da(A,d),t.ref=i.ref,t.return=i,i.child=t}function Cp(t,i,c,d,E){if(t!==null){var A=t.memoizedProps;if(y(A,d)&&t.ref===i.ref)if(Fr=!1,i.pendingProps=d=A,p0(t,E))(t.flags&131072)!==0&&(Fr=!0);else return i.lanes=t.lanes,Ea(t,i,E)}return c0(t,i,c,d,E)}function Sp(t,i,c,d){var E=d.children,A=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((i.flags&128)!==0){if(A=A!==null?A.baseLanes|c:c,t!==null){for(d=i.child=t.child,E=0;d!==null;)E=E|d.lanes|d.childLanes,d=d.sibling;d=E&~A}else d=0,i.child=null;return Ip(t,i,A,c,d)}if((c&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&ih(i,A!==null?A.cachePool:null),A!==null?Nm(i,A):Ud(),Om(i);else return d=i.lanes=536870912,Ip(t,i,A!==null?A.baseLanes|c:c,c,d)}else A!==null?(ih(i,A.cachePool),Nm(i,A),eo(),i.memoizedState=null):(t!==null&&ih(i,null),Ud(),eo());return li(t,i,E,c),i.child}function Vc(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Ip(t,i,c,d,E){var A=Md();return A=A===null?null:{parent:Vr._currentValue,pool:A},i.memoizedState={baseLanes:c,cachePool:A},t!==null&&ih(i,null),Ud(),Om(i),t!==null&&Ol(t,i,d,!0),i.childLanes=E,null}function wh(t,i){return i=Ah({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function Rp(t,i,c){return $o(i,t.child,null,c),t=wh(i,i.pendingProps),t.flags|=2,$i(i),i.memoizedState=null,t}function TA(t,i,c){var d=i.pendingProps,E=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Cn){if(d.mode==="hidden")return t=wh(i,d),i.lanes=536870912,Vc(null,t);if(jd(i),(t=ar)?(t=jy(t,xs),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Xa!==null?{id:Fs,overflow:js}:null,retryLane:536870912,hydrationErrors:null},c=fm(t),c.return=i,i.child=c,ai=i,ar=null)):t=null,t===null)throw Wa(i);return i.lanes=536870912,null}return wh(i,d)}var A=t.memoizedState;if(A!==null){var N=A.dehydrated;if(jd(i),E)if(i.flags&256)i.flags&=-257,i=Rp(t,i,c);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(o(558));else if(Fr||Ol(t,i,c,!1),E=(c&t.childLanes)!==0,Fr||E){if(d=$n,d!==null&&(N=Gn(d,c),N!==0&&N!==A.retryLane))throw A.retryLane=N,qo(t,N),Fi(d,t,N),l0;Oh(),i=Rp(t,i,c)}else t=A.treeContext,ar=ws(N.nextSibling),ai=i,Cn=!0,Ya=null,xs=!1,t!==null&&mm(i,t),i=wh(i,d),i.flags|=4096;return i}return t=da(t.child,{mode:d.mode,children:d.children}),t.ref=i.ref,i.child=t,t.return=i,t}function _h(t,i){var c=i.ref;if(c===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(o(284));(t===null||t.ref!==c)&&(i.flags|=4194816)}}function c0(t,i,c,d,E){return Ko(i),c=Hd(t,i,c,d,void 0,E),d=Gd(),t!==null&&!Fr?(qd(t,i,E),Ea(t,i,E)):(Cn&&d&&vd(i),i.flags|=1,li(t,i,c,E),i.child)}function Np(t,i,c,d,E,A){return Ko(i),i.updateQueue=null,c=Mm(i,d,c,E),Dm(t),d=Gd(),t!==null&&!Fr?(qd(t,i,A),Ea(t,i,A)):(Cn&&d&&vd(i),i.flags|=1,li(t,i,c,A),i.child)}function Op(t,i,c,d,E){if(Ko(i),i.stateNode===null){var A=Sl,N=c.contextType;typeof N=="object"&&N!==null&&(A=oi(N)),A=new c(d,A),i.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=a0,i.stateNode=A,A._reactInternals=i,A=i.stateNode,A.props=d,A.state=i.memoizedState,A.refs={},Ld(i),N=c.contextType,A.context=typeof N=="object"&&N!==null?oi(N):Sl,A.state=i.memoizedState,N=c.getDerivedStateFromProps,typeof N=="function"&&(s0(i,c,N,d),A.state=i.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(N=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),N!==A.state&&a0.enqueueReplaceState(A,A.state,null),Mc(i,d,A,E),Dc(),A.state=i.memoizedState),typeof A.componentDidMount=="function"&&(i.flags|=4194308),d=!0}else if(t===null){A=i.stateNode;var V=i.memoizedProps,W=tl(c,V);A.props=W;var me=A.context,Ce=c.contextType;N=Sl,typeof Ce=="object"&&Ce!==null&&(N=oi(Ce));var Ne=c.getDerivedStateFromProps;Ce=typeof Ne=="function"||typeof A.getSnapshotBeforeUpdate=="function",V=i.pendingProps!==V,Ce||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(V||me!==N)&&yp(i,A,d,N),Qa=!1;var pe=i.memoizedState;A.state=pe,Mc(i,d,A,E),Dc(),me=i.memoizedState,V||pe!==me||Qa?(typeof Ne=="function"&&(s0(i,c,Ne,d),me=i.memoizedState),(W=Qa||pp(i,c,W,d,pe,me,N))?(Ce||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(i.flags|=4194308)):(typeof A.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=me),A.props=d,A.state=me,A.context=N,d=W):(typeof A.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{A=i.stateNode,Pd(t,i),N=i.memoizedProps,Ce=tl(c,N),A.props=Ce,Ne=i.pendingProps,pe=A.context,me=c.contextType,W=Sl,typeof me=="object"&&me!==null&&(W=oi(me)),V=c.getDerivedStateFromProps,(me=typeof V=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(N!==Ne||pe!==W)&&yp(i,A,d,W),Qa=!1,pe=i.memoizedState,A.state=pe,Mc(i,d,A,E),Dc();var Ae=i.memoizedState;N!==Ne||pe!==Ae||Qa||t!==null&&t.dependencies!==null&&nh(t.dependencies)?(typeof V=="function"&&(s0(i,c,V,d),Ae=i.memoizedState),(Ce=Qa||pp(i,c,Ce,d,pe,Ae,W)||t!==null&&t.dependencies!==null&&nh(t.dependencies))?(me||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(d,Ae,W),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(d,Ae,W)),typeof A.componentDidUpdate=="function"&&(i.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof A.componentDidUpdate!="function"||N===t.memoizedProps&&pe===t.memoizedState||(i.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||N===t.memoizedProps&&pe===t.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=Ae),A.props=d,A.state=Ae,A.context=W,d=Ce):(typeof A.componentDidUpdate!="function"||N===t.memoizedProps&&pe===t.memoizedState||(i.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||N===t.memoizedProps&&pe===t.memoizedState||(i.flags|=1024),d=!1)}return A=d,_h(t,i),d=(i.flags&128)!==0,A||d?(A=i.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:A.render(),i.flags|=1,t!==null&&d?(i.child=$o(i,t.child,null,E),i.child=$o(i,null,c,E)):li(t,i,c,E),i.memoizedState=A.state,t=i.child):t=Ea(t,i,E),t}function Dp(t,i,c,d){return Yo(),i.flags|=256,li(t,i,c,d),i.child}var u0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function h0(t){return{baseLanes:t,cachePool:_m()}}function f0(t,i,c){return t=t!==null?t.childLanes&~c:0,i&&(t|=ts),t}function Mp(t,i,c){var d=i.pendingProps,E=!1,A=(i.flags&128)!==0,N;if((N=A)||(N=t!==null&&t.memoizedState===null?!1:(Or.current&2)!==0),N&&(E=!0,i.flags&=-129),N=(i.flags&32)!==0,i.flags&=-33,t===null){if(Cn){if(E?$a(i):eo(),(t=ar)?(t=jy(t,xs),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Xa!==null?{id:Fs,overflow:js}:null,retryLane:536870912,hydrationErrors:null},c=fm(t),c.return=i,i.child=c,ai=i,ar=null)):t=null,t===null)throw Wa(i);return W0(t)?i.lanes=32:i.lanes=536870912,null}var V=d.children;return d=d.fallback,E?(eo(),E=i.mode,V=Ah({mode:"hidden",children:V},E),d=Xo(d,E,c,null),V.return=i,d.return=i,V.sibling=d,i.child=V,d=i.child,d.memoizedState=h0(c),d.childLanes=f0(t,N,c),i.memoizedState=u0,Vc(null,d)):($a(i),d0(i,V))}var W=t.memoizedState;if(W!==null&&(V=W.dehydrated,V!==null)){if(A)i.flags&256?($a(i),i.flags&=-257,i=g0(t,i,c)):i.memoizedState!==null?(eo(),i.child=t.child,i.flags|=128,i=null):(eo(),V=d.fallback,E=i.mode,d=Ah({mode:"visible",children:d.children},E),V=Xo(V,E,c,null),V.flags|=2,d.return=i,V.return=i,d.sibling=V,i.child=d,$o(i,t.child,null,c),d=i.child,d.memoizedState=h0(c),d.childLanes=f0(t,N,c),i.memoizedState=u0,i=Vc(null,d));else if($a(i),W0(V)){if(N=V.nextSibling&&V.nextSibling.dataset,N)var me=N.dgst;N=me,d=Error(o(419)),d.stack="",d.digest=N,Cc({value:d,source:null,stack:null}),i=g0(t,i,c)}else if(Fr||Ol(t,i,c,!1),N=(c&t.childLanes)!==0,Fr||N){if(N=$n,N!==null&&(d=Gn(N,c),d!==0&&d!==W.retryLane))throw W.retryLane=d,qo(t,d),Fi(N,t,d),l0;Y0(V)||Oh(),i=g0(t,i,c)}else Y0(V)?(i.flags|=192,i.child=t.child,i=null):(t=W.treeContext,ar=ws(V.nextSibling),ai=i,Cn=!0,Ya=null,xs=!1,t!==null&&mm(i,t),i=d0(i,d.children),i.flags|=4096);return i}return E?(eo(),V=d.fallback,E=i.mode,W=t.child,me=W.sibling,d=da(W,{mode:"hidden",children:d.children}),d.subtreeFlags=W.subtreeFlags&65011712,me!==null?V=da(me,V):(V=Xo(V,E,c,null),V.flags|=2),V.return=i,d.return=i,d.sibling=V,i.child=d,Vc(null,d),d=i.child,V=t.child.memoizedState,V===null?V=h0(c):(E=V.cachePool,E!==null?(W=Vr._currentValue,E=E.parent!==W?{parent:W,pool:W}:E):E=_m(),V={baseLanes:V.baseLanes|c,cachePool:E}),d.memoizedState=V,d.childLanes=f0(t,N,c),i.memoizedState=u0,Vc(t.child,d)):($a(i),c=t.child,t=c.sibling,c=da(c,{mode:"visible",children:d.children}),c.return=i,c.sibling=null,t!==null&&(N=i.deletions,N===null?(i.deletions=[t],i.flags|=16):N.push(t)),i.child=c,i.memoizedState=null,c)}function d0(t,i){return i=Ah({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Ah(t,i){return t=Zi(22,t,null,i),t.lanes=0,t}function g0(t,i,c){return $o(i,t.child,null,c),t=d0(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function kp(t,i,c){t.lanes|=i;var d=t.alternate;d!==null&&(d.lanes|=i),Rd(t.return,i,c)}function m0(t,i,c,d,E,A){var N=t.memoizedState;N===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:E,treeForkCount:A}:(N.isBackwards=i,N.rendering=null,N.renderingStartTime=0,N.last=d,N.tail=c,N.tailMode=E,N.treeForkCount=A)}function Lp(t,i,c){var d=i.pendingProps,E=d.revealOrder,A=d.tail;d=d.children;var N=Or.current,V=(N&2)!==0;if(V?(N=N&1|2,i.flags|=128):N&=1,ve(Or,N),li(t,i,d,c),d=Cn?Tc:0,!V&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&kp(t,c,i);else if(t.tag===19)kp(t,c,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(E){case"forwards":for(c=i.child,E=null;c!==null;)t=c.alternate,t!==null&&uh(t)===null&&(E=c),c=c.sibling;c=E,c===null?(E=i.child,i.child=null):(E=c.sibling,c.sibling=null),m0(i,!1,E,c,A,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,E=i.child,i.child=null;E!==null;){if(t=E.alternate,t!==null&&uh(t)===null){i.child=E;break}t=E.sibling,E.sibling=c,c=E,E=t}m0(i,!0,c,null,A,d);break;case"together":m0(i,!1,null,null,void 0,d);break;default:i.memoizedState=null}return i.child}function Ea(t,i,c){if(t!==null&&(i.dependencies=t.dependencies),ro|=i.lanes,(c&i.childLanes)===0)if(t!==null){if(Ol(t,i,c,!1),(c&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(o(153));if(i.child!==null){for(t=i.child,c=da(t,t.pendingProps),i.child=c,c.return=i;t.sibling!==null;)t=t.sibling,c=c.sibling=da(t,t.pendingProps),c.return=i;c.sibling=null}return i.child}function p0(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&nh(t)))}function CA(t,i,c){switch(i.tag){case 3:_t(i,i.stateNode.containerInfo),Ka(i,Vr,t.memoizedState.cache),Yo();break;case 27:case 5:An(i);break;case 4:_t(i,i.stateNode.containerInfo);break;case 10:Ka(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,jd(i),null;break;case 13:var d=i.memoizedState;if(d!==null)return d.dehydrated!==null?($a(i),i.flags|=128,null):(c&i.child.childLanes)!==0?Mp(t,i,c):($a(i),t=Ea(t,i,c),t!==null?t.sibling:null);$a(i);break;case 19:var E=(t.flags&128)!==0;if(d=(c&i.childLanes)!==0,d||(Ol(t,i,c,!1),d=(c&i.childLanes)!==0),E){if(d)return Lp(t,i,c);i.flags|=128}if(E=i.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),ve(Or,Or.current),d)break;return null;case 22:return i.lanes=0,Sp(t,i,c,i.pendingProps);case 24:Ka(i,Vr,t.memoizedState.cache)}return Ea(t,i,c)}function Pp(t,i,c){if(t!==null)if(t.memoizedProps!==i.pendingProps)Fr=!0;else{if(!p0(t,c)&&(i.flags&128)===0)return Fr=!1,CA(t,i,c);Fr=(t.flags&131072)!==0}else Fr=!1,Cn&&(i.flags&1048576)!==0&&gm(i,Tc,i.index);switch(i.lanes=0,i.tag){case 16:e:{var d=i.pendingProps;if(t=Zo(i.elementType),i.type=t,typeof t=="function")_d(t)?(d=tl(t,d),i.tag=1,i=Op(null,i,t,d,c)):(i.tag=0,i=c0(null,i,t,d,c));else{if(t!=null){var E=t.$$typeof;if(E===Ue){i.tag=11,i=vp(null,i,t,d,c);break e}else if(E===F){i.tag=14,i=Tp(null,i,t,d,c);break e}}throw i=lt(t)||t,Error(o(306,i,""))}}return i;case 0:return c0(t,i,i.type,i.pendingProps,c);case 1:return d=i.type,E=tl(d,i.pendingProps),Op(t,i,d,E,c);case 3:e:{if(_t(i,i.stateNode.containerInfo),t===null)throw Error(o(387));d=i.pendingProps;var A=i.memoizedState;E=A.element,Pd(t,i),Mc(i,d,null,c);var N=i.memoizedState;if(d=N.cache,Ka(i,Vr,d),d!==A.cache&&Nd(i,[Vr],c,!0),Dc(),d=N.element,A.isDehydrated)if(A={element:d,isDehydrated:!1,cache:N.cache},i.updateQueue.baseState=A,i.memoizedState=A,i.flags&256){i=Dp(t,i,d,c);break e}else if(d!==E){E=ms(Error(o(424)),i),Cc(E),i=Dp(t,i,d,c);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ar=ws(t.firstChild),ai=i,Cn=!0,Ya=null,xs=!0,c=Sm(i,null,d,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Yo(),d===E){i=Ea(t,i,c);break e}li(t,i,d,c)}i=i.child}return i;case 26:return _h(t,i),t===null?(c=Yy(i.type,null,i.pendingProps,null))?i.memoizedState=c:Cn||(c=i.type,t=i.pendingProps,d=Vh(_e.current).createElement(c),d[tr]=i,d[vn]=t,ci(d,c,t),nr(d),i.stateNode=d):i.memoizedState=Yy(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return An(i),t===null&&Cn&&(d=i.stateNode=Gy(i.type,i.pendingProps,_e.current),ai=i,xs=!0,E=ar,lo(i.type)?(K0=E,ar=ws(d.firstChild)):ar=E),li(t,i,i.pendingProps.children,c),_h(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Cn&&((E=d=ar)&&(d=nb(d,i.type,i.pendingProps,xs),d!==null?(i.stateNode=d,ai=i,ar=ws(d.firstChild),xs=!1,E=!0):E=!1),E||Wa(i)),An(i),E=i.type,A=i.pendingProps,N=t!==null?t.memoizedProps:null,d=A.children,G0(E,A)?d=null:N!==null&&G0(E,N)&&(i.flags|=32),i.memoizedState!==null&&(E=Hd(t,i,yA,null,null,c),$c._currentValue=E),_h(t,i),li(t,i,d,c),i.child;case 6:return t===null&&Cn&&((t=c=ar)&&(c=rb(c,i.pendingProps,xs),c!==null?(i.stateNode=c,ai=i,ar=null,t=!0):t=!1),t||Wa(i)),null;case 13:return Mp(t,i,c);case 4:return _t(i,i.stateNode.containerInfo),d=i.pendingProps,t===null?i.child=$o(i,null,d,c):li(t,i,d,c),i.child;case 11:return vp(t,i,i.type,i.pendingProps,c);case 7:return li(t,i,i.pendingProps,c),i.child;case 8:return li(t,i,i.pendingProps.children,c),i.child;case 12:return li(t,i,i.pendingProps.children,c),i.child;case 10:return d=i.pendingProps,Ka(i,i.type,d.value),li(t,i,d.children,c),i.child;case 9:return E=i.type._context,d=i.pendingProps.children,Ko(i),E=oi(E),d=d(E),i.flags|=1,li(t,i,d,c),i.child;case 14:return Tp(t,i,i.type,i.pendingProps,c);case 15:return Cp(t,i,i.type,i.pendingProps,c);case 19:return Lp(t,i,c);case 31:return TA(t,i,c);case 22:return Sp(t,i,c,i.pendingProps);case 24:return Ko(i),d=oi(Vr),t===null?(E=Md(),E===null&&(E=$n,A=Od(),E.pooledCache=A,A.refCount++,A!==null&&(E.pooledCacheLanes|=c),E=A),i.memoizedState={parent:d,cache:E},Ld(i),Ka(i,Vr,E)):((t.lanes&c)!==0&&(Pd(t,i),Mc(i,null,null,c),Dc()),E=t.memoizedState,A=i.memoizedState,E.parent!==d?(E={parent:d,cache:d},i.memoizedState=E,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=E),Ka(i,Vr,d)):(d=A.cache,Ka(i,Vr,d),d!==E.cache&&Nd(i,[Vr],c,!0))),li(t,i,i.pendingProps.children,c),i.child;case 29:throw i.pendingProps}throw Error(o(156,i.tag))}function wa(t){t.flags|=4}function y0(t,i,c,d,E){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(E&335544128)===E)if(t.stateNode.complete)t.flags|=8192;else if(cy())t.flags|=8192;else throw Jo=ah,kd}else t.flags&=-16777217}function Bp(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Jy(i))if(cy())t.flags|=8192;else throw Jo=ah,kd}function bh(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?st():536870912,t.lanes|=i,Hl|=i)}function Uc(t,i){if(!Cn)switch(t.tailMode){case"hidden":i=t.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?t.tail=null:c.sibling=null;break;case"collapsed":c=t.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:d.sibling=null}}function or(t){var i=t.alternate!==null&&t.alternate.child===t.child,c=0,d=0;if(i)for(var E=t.child;E!==null;)c|=E.lanes|E.childLanes,d|=E.subtreeFlags&65011712,d|=E.flags&65011712,E.return=t,E=E.sibling;else for(E=t.child;E!==null;)c|=E.lanes|E.childLanes,d|=E.subtreeFlags,d|=E.flags,E.return=t,E=E.sibling;return t.subtreeFlags|=d,t.childLanes=c,i}function SA(t,i,c){var d=i.pendingProps;switch(Td(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return or(i),null;case 1:return or(i),null;case 3:return c=i.stateNode,d=null,t!==null&&(d=t.memoizedState.cache),i.memoizedState.cache!==d&&(i.flags|=2048),pa(Vr),It(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(Nl(i)?wa(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Sd())),or(i),null;case 26:var E=i.type,A=i.memoizedState;return t===null?(wa(i),A!==null?(or(i),Bp(i,A)):(or(i),y0(i,E,null,d,c))):A?A!==t.memoizedState?(wa(i),or(i),Bp(i,A)):(or(i),i.flags&=-16777217):(t=t.memoizedProps,t!==d&&wa(i),or(i),y0(i,E,t,d,c)),null;case 27:if(jt(i),c=_e.current,E=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==d&&wa(i);else{if(!d){if(i.stateNode===null)throw Error(o(166));return or(i),null}t=Te.current,Nl(i)?pm(i):(t=Gy(E,d,c),i.stateNode=t,wa(i))}return or(i),null;case 5:if(jt(i),E=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==d&&wa(i);else{if(!d){if(i.stateNode===null)throw Error(o(166));return or(i),null}if(A=Te.current,Nl(i))pm(i);else{var N=Vh(_e.current);switch(A){case 1:A=N.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:A=N.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":A=N.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":A=N.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":A=N.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof d.is=="string"?N.createElement("select",{is:d.is}):N.createElement("select"),d.multiple?A.multiple=!0:d.size&&(A.size=d.size);break;default:A=typeof d.is=="string"?N.createElement(E,{is:d.is}):N.createElement(E)}}A[tr]=i,A[vn]=d;e:for(N=i.child;N!==null;){if(N.tag===5||N.tag===6)A.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===i)break e;for(;N.sibling===null;){if(N.return===null||N.return===i)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}i.stateNode=A;e:switch(ci(A,E,d),E){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&wa(i)}}return or(i),y0(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,c),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==d&&wa(i);else{if(typeof d!="string"&&i.stateNode===null)throw Error(o(166));if(t=_e.current,Nl(i)){if(t=i.stateNode,c=i.memoizedProps,d=null,E=ai,E!==null)switch(E.tag){case 27:case 5:d=E.memoizedProps}t[tr]=i,t=!!(t.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||My(t.nodeValue,c)),t||Wa(i,!0)}else t=Vh(t).createTextNode(d),t[tr]=i,i.stateNode=t}return or(i),null;case 31:if(c=i.memoizedState,t===null||t.memoizedState!==null){if(d=Nl(i),c!==null){if(t===null){if(!d)throw Error(o(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[tr]=i}else Yo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;or(i),t=!1}else c=Sd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),t=!0;if(!t)return i.flags&256?($i(i),i):($i(i),null);if((i.flags&128)!==0)throw Error(o(558))}return or(i),null;case 13:if(d=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(E=Nl(i),d!==null&&d.dehydrated!==null){if(t===null){if(!E)throw Error(o(318));if(E=i.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(o(317));E[tr]=i}else Yo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;or(i),E=!1}else E=Sd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=E),E=!0;if(!E)return i.flags&256?($i(i),i):($i(i),null)}return $i(i),(i.flags&128)!==0?(i.lanes=c,i):(c=d!==null,t=t!==null&&t.memoizedState!==null,c&&(d=i.child,E=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(E=d.alternate.memoizedState.cachePool.pool),A=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(A=d.memoizedState.cachePool.pool),A!==E&&(d.flags|=2048)),c!==t&&c&&(i.child.flags|=8192),bh(i,i.updateQueue),or(i),null);case 4:return It(),t===null&&U0(i.stateNode.containerInfo),or(i),null;case 10:return pa(i.type),or(i),null;case 19:if(oe(Or),d=i.memoizedState,d===null)return or(i),null;if(E=(i.flags&128)!==0,A=d.rendering,A===null)if(E)Uc(d,!1);else{if(br!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(A=uh(t),A!==null){for(i.flags|=128,Uc(d,!1),t=A.updateQueue,i.updateQueue=t,bh(i,t),i.subtreeFlags=0,t=c,c=i.child;c!==null;)hm(c,t),c=c.sibling;return ve(Or,Or.current&1|2),Cn&&ga(i,d.treeForkCount),i.child}t=t.sibling}d.tail!==null&&Rt()>Ih&&(i.flags|=128,E=!0,Uc(d,!1),i.lanes=4194304)}else{if(!E)if(t=uh(A),t!==null){if(i.flags|=128,E=!0,t=t.updateQueue,i.updateQueue=t,bh(i,t),Uc(d,!0),d.tail===null&&d.tailMode==="hidden"&&!A.alternate&&!Cn)return or(i),null}else 2*Rt()-d.renderingStartTime>Ih&&c!==536870912&&(i.flags|=128,E=!0,Uc(d,!1),i.lanes=4194304);d.isBackwards?(A.sibling=i.child,i.child=A):(t=d.last,t!==null?t.sibling=A:i.child=A,d.last=A)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=Rt(),t.sibling=null,c=Or.current,ve(Or,E?c&1|2:c&1),Cn&&ga(i,d.treeForkCount),t):(or(i),null);case 22:case 23:return $i(i),Fd(),d=i.memoizedState!==null,t!==null?t.memoizedState!==null!==d&&(i.flags|=8192):d&&(i.flags|=8192),d?(c&536870912)!==0&&(i.flags&128)===0&&(or(i),i.subtreeFlags&6&&(i.flags|=8192)):or(i),c=i.updateQueue,c!==null&&bh(i,c.retryQueue),c=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),d=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),d!==c&&(i.flags|=2048),t!==null&&oe(Qo),null;case 24:return c=null,t!==null&&(c=t.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),pa(Vr),or(i),null;case 25:return null;case 30:return null}throw Error(o(156,i.tag))}function IA(t,i){switch(Td(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return pa(Vr),It(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return jt(i),null;case 31:if(i.memoizedState!==null){if($i(i),i.alternate===null)throw Error(o(340));Yo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if($i(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(o(340));Yo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return oe(Or),null;case 4:return It(),null;case 10:return pa(i.type),null;case 22:case 23:return $i(i),Fd(),t!==null&&oe(Qo),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return pa(Vr),null;case 25:return null;default:return null}}function Vp(t,i){switch(Td(i),i.tag){case 3:pa(Vr),It();break;case 26:case 27:case 5:jt(i);break;case 4:It();break;case 31:i.memoizedState!==null&&$i(i);break;case 13:$i(i);break;case 19:oe(Or);break;case 10:pa(i.type);break;case 22:case 23:$i(i),Fd(),t!==null&&oe(Qo);break;case 24:pa(Vr)}}function Fc(t,i){try{var c=i.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var E=d.next;c=E;do{if((c.tag&t)===t){d=void 0;var A=c.create,N=c.inst;d=A(),N.destroy=d}c=c.next}while(c!==E)}}catch(V){Xn(i,i.return,V)}}function to(t,i,c){try{var d=i.updateQueue,E=d!==null?d.lastEffect:null;if(E!==null){var A=E.next;d=A;do{if((d.tag&t)===t){var N=d.inst,V=N.destroy;if(V!==void 0){N.destroy=void 0,E=i;var W=c,me=V;try{me()}catch(Ce){Xn(E,W,Ce)}}}d=d.next}while(d!==A)}}catch(Ce){Xn(i,i.return,Ce)}}function Up(t){var i=t.updateQueue;if(i!==null){var c=t.stateNode;try{Rm(i,c)}catch(d){Xn(t,t.return,d)}}}function Fp(t,i,c){c.props=tl(t.type,t.memoizedProps),c.state=t.memoizedState;try{c.componentWillUnmount()}catch(d){Xn(t,i,d)}}function jc(t,i){try{var c=t.ref;if(c!==null){switch(t.tag){case 26:case 27:case 5:var d=t.stateNode;break;case 30:d=t.stateNode;break;default:d=t.stateNode}typeof c=="function"?t.refCleanup=c(d):c.current=d}}catch(E){Xn(t,i,E)}}function zs(t,i){var c=t.ref,d=t.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(E){Xn(t,i,E)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(E){Xn(t,i,E)}else c.current=null}function jp(t){var i=t.type,c=t.memoizedProps,d=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(E){Xn(t,t.return,E)}}function x0(t,i,c){try{var d=t.stateNode;QA(d,t.type,c,i),d[vn]=i}catch(E){Xn(t,t.return,E)}}function zp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&lo(t.type)||t.tag===4}function E0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&lo(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function w0(t,i,c){var d=t.tag;if(d===5||d===6)t=t.stateNode,i?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(t,i):(i=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,i.appendChild(t),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=mi));else if(d!==4&&(d===27&&lo(t.type)&&(c=t.stateNode,i=null),t=t.child,t!==null))for(w0(t,i,c),t=t.sibling;t!==null;)w0(t,i,c),t=t.sibling}function vh(t,i,c){var d=t.tag;if(d===5||d===6)t=t.stateNode,i?c.insertBefore(t,i):c.appendChild(t);else if(d!==4&&(d===27&&lo(t.type)&&(c=t.stateNode),t=t.child,t!==null))for(vh(t,i,c),t=t.sibling;t!==null;)vh(t,i,c),t=t.sibling}function Hp(t){var i=t.stateNode,c=t.memoizedProps;try{for(var d=t.type,E=i.attributes;E.length;)i.removeAttributeNode(E[0]);ci(i,d,c),i[tr]=t,i[vn]=c}catch(A){Xn(t,t.return,A)}}var _a=!1,jr=!1,_0=!1,Gp=typeof WeakSet=="function"?WeakSet:Set,Jr=null;function RA(t,i){if(t=t.containerInfo,z0=qh,t=k(t),L(t)){if("selectionStart"in t)var c={start:t.selectionStart,end:t.selectionEnd};else e:{c=(c=t.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var E=d.anchorOffset,A=d.focusNode;d=d.focusOffset;try{c.nodeType,A.nodeType}catch{c=null;break e}var N=0,V=-1,W=-1,me=0,Ce=0,Ne=t,pe=null;t:for(;;){for(var Ae;Ne!==c||E!==0&&Ne.nodeType!==3||(V=N+E),Ne!==A||d!==0&&Ne.nodeType!==3||(W=N+d),Ne.nodeType===3&&(N+=Ne.nodeValue.length),(Ae=Ne.firstChild)!==null;)pe=Ne,Ne=Ae;for(;;){if(Ne===t)break t;if(pe===c&&++me===E&&(V=N),pe===A&&++Ce===d&&(W=N),(Ae=Ne.nextSibling)!==null)break;Ne=pe,pe=Ne.parentNode}Ne=Ae}c=V===-1||W===-1?null:{start:V,end:W}}else c=null}c=c||{start:0,end:0}}else c=null;for(H0={focusedElem:t,selectionRange:c},qh=!1,Jr=i;Jr!==null;)if(i=Jr,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Jr=t;else for(;Jr!==null;){switch(i=Jr,A=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(c=0;c<t.length;c++)E=t[c],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&A!==null){t=void 0,c=i,E=A.memoizedProps,A=A.memoizedState,d=c.stateNode;try{var wt=tl(c.type,E);t=d.getSnapshotBeforeUpdate(wt,A),d.__reactInternalSnapshotBeforeUpdate=t}catch(Bt){Xn(c,c.return,Bt)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,c=t.nodeType,c===9)X0(t);else if(c===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":X0(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=i.sibling,t!==null){t.return=i.return,Jr=t;break}Jr=i.return}}function qp(t,i,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:ba(t,c),d&4&&Fc(5,c);break;case 1:if(ba(t,c),d&4)if(t=c.stateNode,i===null)try{t.componentDidMount()}catch(N){Xn(c,c.return,N)}else{var E=tl(c.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(E,i,t.__reactInternalSnapshotBeforeUpdate)}catch(N){Xn(c,c.return,N)}}d&64&&Up(c),d&512&&jc(c,c.return);break;case 3:if(ba(t,c),d&64&&(t=c.updateQueue,t!==null)){if(i=null,c.child!==null)switch(c.child.tag){case 27:case 5:i=c.child.stateNode;break;case 1:i=c.child.stateNode}try{Rm(t,i)}catch(N){Xn(c,c.return,N)}}break;case 27:i===null&&d&4&&Hp(c);case 26:case 5:ba(t,c),i===null&&d&4&&jp(c),d&512&&jc(c,c.return);break;case 12:ba(t,c);break;case 31:ba(t,c),d&4&&Wp(t,c);break;case 13:ba(t,c),d&4&&Kp(t,c),d&64&&(t=c.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(c=VA.bind(null,c),ib(t,c))));break;case 22:if(d=c.memoizedState!==null||_a,!d){i=i!==null&&i.memoizedState!==null||jr,E=_a;var A=jr;_a=d,(jr=i)&&!A?va(t,c,(c.subtreeFlags&8772)!==0):ba(t,c),_a=E,jr=A}break;case 30:break;default:ba(t,c)}}function Xp(t){var i=t.alternate;i!==null&&(t.alternate=null,Xp(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&kn(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var mr=null,Pi=!1;function Aa(t,i,c){for(c=c.child;c!==null;)Yp(t,i,c),c=c.sibling}function Yp(t,i,c){if(Me&&typeof Me.onCommitFiberUnmount=="function")try{Me.onCommitFiberUnmount(Zt,c)}catch{}switch(c.tag){case 26:jr||zs(c,i),Aa(t,i,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:jr||zs(c,i);var d=mr,E=Pi;lo(c.type)&&(mr=c.stateNode,Pi=!1),Aa(t,i,c),Qc(c.stateNode),mr=d,Pi=E;break;case 5:jr||zs(c,i);case 6:if(d=mr,E=Pi,mr=null,Aa(t,i,c),mr=d,Pi=E,mr!==null)if(Pi)try{(mr.nodeType===9?mr.body:mr.nodeName==="HTML"?mr.ownerDocument.body:mr).removeChild(c.stateNode)}catch(A){Xn(c,i,A)}else try{mr.removeChild(c.stateNode)}catch(A){Xn(c,i,A)}break;case 18:mr!==null&&(Pi?(t=mr,Uy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,c.stateNode),Zl(t)):Uy(mr,c.stateNode));break;case 4:d=mr,E=Pi,mr=c.stateNode.containerInfo,Pi=!0,Aa(t,i,c),mr=d,Pi=E;break;case 0:case 11:case 14:case 15:to(2,c,i),jr||to(4,c,i),Aa(t,i,c);break;case 1:jr||(zs(c,i),d=c.stateNode,typeof d.componentWillUnmount=="function"&&Fp(c,i,d)),Aa(t,i,c);break;case 21:Aa(t,i,c);break;case 22:jr=(d=jr)||c.memoizedState!==null,Aa(t,i,c),jr=d;break;default:Aa(t,i,c)}}function Wp(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Zl(t)}catch(c){Xn(i,i.return,c)}}}function Kp(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Zl(t)}catch(c){Xn(i,i.return,c)}}function NA(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Gp),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Gp),i;default:throw Error(o(435,t.tag))}}function Th(t,i){var c=NA(t);i.forEach(function(d){if(!c.has(d)){c.add(d);var E=UA.bind(null,t,d);d.then(E,E)}})}function Bi(t,i){var c=i.deletions;if(c!==null)for(var d=0;d<c.length;d++){var E=c[d],A=t,N=i,V=N;e:for(;V!==null;){switch(V.tag){case 27:if(lo(V.type)){mr=V.stateNode,Pi=!1;break e}break;case 5:mr=V.stateNode,Pi=!1;break e;case 3:case 4:mr=V.stateNode.containerInfo,Pi=!0;break e}V=V.return}if(mr===null)throw Error(o(160));Yp(A,N,E),mr=null,Pi=!1,A=E.alternate,A!==null&&(A.return=null),E.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Qp(i,t),i=i.sibling}var Is=null;function Qp(t,i){var c=t.alternate,d=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Bi(i,t),Vi(t),d&4&&(to(3,t,t.return),Fc(3,t),to(5,t,t.return));break;case 1:Bi(i,t),Vi(t),d&512&&(jr||c===null||zs(c,c.return)),d&64&&_a&&(t=t.updateQueue,t!==null&&(d=t.callbacks,d!==null&&(c=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var E=Is;if(Bi(i,t),Vi(t),d&512&&(jr||c===null||zs(c,c.return)),d&4){var A=c!==null?c.memoizedState:null;if(d=t.memoizedState,c===null)if(d===null)if(t.stateNode===null){e:{d=t.type,c=t.memoizedProps,E=E.ownerDocument||E;t:switch(d){case"title":A=E.getElementsByTagName("title")[0],(!A||A[$t]||A[tr]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=E.createElement(d),E.head.insertBefore(A,E.querySelector("head > title"))),ci(A,d,c),A[tr]=t,nr(A),d=A;break e;case"link":var N=Qy("link","href",E).get(d+(c.href||""));if(N){for(var V=0;V<N.length;V++)if(A=N[V],A.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&A.getAttribute("rel")===(c.rel==null?null:c.rel)&&A.getAttribute("title")===(c.title==null?null:c.title)&&A.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){N.splice(V,1);break t}}A=E.createElement(d),ci(A,d,c),E.head.appendChild(A);break;case"meta":if(N=Qy("meta","content",E).get(d+(c.content||""))){for(V=0;V<N.length;V++)if(A=N[V],A.getAttribute("content")===(c.content==null?null:""+c.content)&&A.getAttribute("name")===(c.name==null?null:c.name)&&A.getAttribute("property")===(c.property==null?null:c.property)&&A.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&A.getAttribute("charset")===(c.charSet==null?null:c.charSet)){N.splice(V,1);break t}}A=E.createElement(d),ci(A,d,c),E.head.appendChild(A);break;default:throw Error(o(468,d))}A[tr]=t,nr(A),d=A}t.stateNode=d}else Zy(E,t.type,t.stateNode);else t.stateNode=Ky(E,d,t.memoizedProps);else A!==d?(A===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):A.count--,d===null?Zy(E,t.type,t.stateNode):Ky(E,d,t.memoizedProps)):d===null&&t.stateNode!==null&&x0(t,t.memoizedProps,c.memoizedProps)}break;case 27:Bi(i,t),Vi(t),d&512&&(jr||c===null||zs(c,c.return)),c!==null&&d&4&&x0(t,t.memoizedProps,c.memoizedProps);break;case 5:if(Bi(i,t),Vi(t),d&512&&(jr||c===null||zs(c,c.return)),t.flags&32){E=t.stateNode;try{gi(E,"")}catch(wt){Xn(t,t.return,wt)}}d&4&&t.stateNode!=null&&(E=t.memoizedProps,x0(t,E,c!==null?c.memoizedProps:E)),d&1024&&(_0=!0);break;case 6:if(Bi(i,t),Vi(t),d&4){if(t.stateNode===null)throw Error(o(162));d=t.memoizedProps,c=t.stateNode;try{c.nodeValue=d}catch(wt){Xn(t,t.return,wt)}}break;case 3:if(jh=null,E=Is,Is=Uh(i.containerInfo),Bi(i,t),Is=E,Vi(t),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Zl(i.containerInfo)}catch(wt){Xn(t,t.return,wt)}_0&&(_0=!1,Zp(t));break;case 4:d=Is,Is=Uh(t.stateNode.containerInfo),Bi(i,t),Vi(t),Is=d;break;case 12:Bi(i,t),Vi(t);break;case 31:Bi(i,t),Vi(t),d&4&&(d=t.updateQueue,d!==null&&(t.updateQueue=null,Th(t,d)));break;case 13:Bi(i,t),Vi(t),t.child.flags&8192&&t.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Sh=Rt()),d&4&&(d=t.updateQueue,d!==null&&(t.updateQueue=null,Th(t,d)));break;case 22:E=t.memoizedState!==null;var W=c!==null&&c.memoizedState!==null,me=_a,Ce=jr;if(_a=me||E,jr=Ce||W,Bi(i,t),jr=Ce,_a=me,Vi(t),d&8192)e:for(i=t.stateNode,i._visibility=E?i._visibility&-2:i._visibility|1,E&&(c===null||W||_a||jr||nl(t)),c=null,i=t;;){if(i.tag===5||i.tag===26){if(c===null){W=c=i;try{if(A=W.stateNode,E)N=A.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{V=W.stateNode;var Ne=W.memoizedProps.style,pe=Ne!=null&&Ne.hasOwnProperty("display")?Ne.display:null;V.style.display=pe==null||typeof pe=="boolean"?"":(""+pe).trim()}}catch(wt){Xn(W,W.return,wt)}}}else if(i.tag===6){if(c===null){W=i;try{W.stateNode.nodeValue=E?"":W.memoizedProps}catch(wt){Xn(W,W.return,wt)}}}else if(i.tag===18){if(c===null){W=i;try{var Ae=W.stateNode;E?Fy(Ae,!0):Fy(W.stateNode,!1)}catch(wt){Xn(W,W.return,wt)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;c===i&&(c=null),i=i.return}c===i&&(c=null),i.sibling.return=i.return,i=i.sibling}d&4&&(d=t.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,Th(t,c))));break;case 19:Bi(i,t),Vi(t),d&4&&(d=t.updateQueue,d!==null&&(t.updateQueue=null,Th(t,d)));break;case 30:break;case 21:break;default:Bi(i,t),Vi(t)}}function Vi(t){var i=t.flags;if(i&2){try{for(var c,d=t.return;d!==null;){if(zp(d)){c=d;break}d=d.return}if(c==null)throw Error(o(160));switch(c.tag){case 27:var E=c.stateNode,A=E0(t);vh(t,A,E);break;case 5:var N=c.stateNode;c.flags&32&&(gi(N,""),c.flags&=-33);var V=E0(t);vh(t,V,N);break;case 3:case 4:var W=c.stateNode.containerInfo,me=E0(t);w0(t,me,W);break;default:throw Error(o(161))}}catch(Ce){Xn(t,t.return,Ce)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Zp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Zp(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function ba(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)qp(t,i.alternate,i),i=i.sibling}function nl(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:to(4,i,i.return),nl(i);break;case 1:zs(i,i.return);var c=i.stateNode;typeof c.componentWillUnmount=="function"&&Fp(i,i.return,c),nl(i);break;case 27:Qc(i.stateNode);case 26:case 5:zs(i,i.return),nl(i);break;case 22:i.memoizedState===null&&nl(i);break;case 30:nl(i);break;default:nl(i)}t=t.sibling}}function va(t,i,c){for(c=c&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var d=i.alternate,E=t,A=i,N=A.flags;switch(A.tag){case 0:case 11:case 15:va(E,A,c),Fc(4,A);break;case 1:if(va(E,A,c),d=A,E=d.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(me){Xn(d,d.return,me)}if(d=A,E=d.updateQueue,E!==null){var V=d.stateNode;try{var W=E.shared.hiddenCallbacks;if(W!==null)for(E.shared.hiddenCallbacks=null,E=0;E<W.length;E++)Im(W[E],V)}catch(me){Xn(d,d.return,me)}}c&&N&64&&Up(A),jc(A,A.return);break;case 27:Hp(A);case 26:case 5:va(E,A,c),c&&d===null&&N&4&&jp(A),jc(A,A.return);break;case 12:va(E,A,c);break;case 31:va(E,A,c),c&&N&4&&Wp(E,A);break;case 13:va(E,A,c),c&&N&4&&Kp(E,A);break;case 22:A.memoizedState===null&&va(E,A,c),jc(A,A.return);break;case 30:break;default:va(E,A,c)}i=i.sibling}}function A0(t,i){var c=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==c&&(t!=null&&t.refCount++,c!=null&&Sc(c))}function b0(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Sc(t))}function Rs(t,i,c,d){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Jp(t,i,c,d),i=i.sibling}function Jp(t,i,c,d){var E=i.flags;switch(i.tag){case 0:case 11:case 15:Rs(t,i,c,d),E&2048&&Fc(9,i);break;case 1:Rs(t,i,c,d);break;case 3:Rs(t,i,c,d),E&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Sc(t)));break;case 12:if(E&2048){Rs(t,i,c,d),t=i.stateNode;try{var A=i.memoizedProps,N=A.id,V=A.onPostCommit;typeof V=="function"&&V(N,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(W){Xn(i,i.return,W)}}else Rs(t,i,c,d);break;case 31:Rs(t,i,c,d);break;case 13:Rs(t,i,c,d);break;case 23:break;case 22:A=i.stateNode,N=i.alternate,i.memoizedState!==null?A._visibility&2?Rs(t,i,c,d):zc(t,i):A._visibility&2?Rs(t,i,c,d):(A._visibility|=2,Fl(t,i,c,d,(i.subtreeFlags&10256)!==0||!1)),E&2048&&A0(N,i);break;case 24:Rs(t,i,c,d),E&2048&&b0(i.alternate,i);break;default:Rs(t,i,c,d)}}function Fl(t,i,c,d,E){for(E=E&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var A=t,N=i,V=c,W=d,me=N.flags;switch(N.tag){case 0:case 11:case 15:Fl(A,N,V,W,E),Fc(8,N);break;case 23:break;case 22:var Ce=N.stateNode;N.memoizedState!==null?Ce._visibility&2?Fl(A,N,V,W,E):zc(A,N):(Ce._visibility|=2,Fl(A,N,V,W,E)),E&&me&2048&&A0(N.alternate,N);break;case 24:Fl(A,N,V,W,E),E&&me&2048&&b0(N.alternate,N);break;default:Fl(A,N,V,W,E)}i=i.sibling}}function zc(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var c=t,d=i,E=d.flags;switch(d.tag){case 22:zc(c,d),E&2048&&A0(d.alternate,d);break;case 24:zc(c,d),E&2048&&b0(d.alternate,d);break;default:zc(c,d)}i=i.sibling}}var Hc=8192;function jl(t,i,c){if(t.subtreeFlags&Hc)for(t=t.child;t!==null;)$p(t,i,c),t=t.sibling}function $p(t,i,c){switch(t.tag){case 26:jl(t,i,c),t.flags&Hc&&t.memoizedState!==null&&pb(c,Is,t.memoizedState,t.memoizedProps);break;case 5:jl(t,i,c);break;case 3:case 4:var d=Is;Is=Uh(t.stateNode.containerInfo),jl(t,i,c),Is=d;break;case 22:t.memoizedState===null&&(d=t.alternate,d!==null&&d.memoizedState!==null?(d=Hc,Hc=16777216,jl(t,i,c),Hc=d):jl(t,i,c));break;default:jl(t,i,c)}}function ey(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Gc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var d=i[c];Jr=d,ny(d,t)}ey(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ty(t),t=t.sibling}function ty(t){switch(t.tag){case 0:case 11:case 15:Gc(t),t.flags&2048&&to(9,t,t.return);break;case 3:Gc(t);break;case 12:Gc(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Ch(t)):Gc(t);break;default:Gc(t)}}function Ch(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var d=i[c];Jr=d,ny(d,t)}ey(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:to(8,i,i.return),Ch(i);break;case 22:c=i.stateNode,c._visibility&2&&(c._visibility&=-3,Ch(i));break;default:Ch(i)}t=t.sibling}}function ny(t,i){for(;Jr!==null;){var c=Jr;switch(c.tag){case 0:case 11:case 15:to(8,c,i);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Sc(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,Jr=d;else e:for(c=t;Jr!==null;){d=Jr;var E=d.sibling,A=d.return;if(Xp(d),d===c){Jr=null;break e}if(E!==null){E.return=A,Jr=E;break e}Jr=A}}}var OA={getCacheForType:function(t){var i=oi(Vr),c=i.data.get(t);return c===void 0&&(c=t(),i.data.set(t,c)),c},cacheSignal:function(){return oi(Vr).controller.signal}},DA=typeof WeakMap=="function"?WeakMap:Map,Ln=0,$n=null,un=null,yn=0,qn=0,es=null,no=!1,zl=!1,v0=!1,Ta=0,br=0,ro=0,rl=0,T0=0,ts=0,Hl=0,qc=null,Ui=null,C0=!1,Sh=0,ry=0,Ih=1/0,Rh=null,io=null,Wr=0,so=null,Gl=null,Ca=0,S0=0,I0=null,iy=null,Xc=0,R0=null;function ns(){return(Ln&2)!==0&&yn!==0?yn&-yn:re.T!==null?L0():Xr()}function sy(){if(ts===0)if((yn&536870912)===0||Cn){var t=be;be<<=1,(be&3932160)===0&&(be=262144),ts=t}else ts=536870912;return t=Ji.current,t!==null&&(t.flags|=32),ts}function Fi(t,i,c){(t===$n&&(qn===2||qn===9)||t.cancelPendingCommit!==null)&&(ql(t,0),ao(t,yn,ts,!1)),St(t,c),((Ln&2)===0||t!==$n)&&(t===$n&&((Ln&2)===0&&(rl|=c),br===4&&ao(t,yn,ts,!1)),Hs(t))}function ay(t,i,c){if((Ln&6)!==0)throw Error(o(327));var d=!c&&(i&127)===0&&(i&t.expiredLanes)===0||Ke(t,i),E=d?LA(t,i):O0(t,i,!0),A=d;do{if(E===0){zl&&!d&&ao(t,i,0,!1);break}else{if(c=t.current.alternate,A&&!MA(c)){E=O0(t,i,!1),A=!1;continue}if(E===2){if(A=i,t.errorRecoveryDisabledLanes&A)var N=0;else N=t.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){i=N;e:{var V=t;E=qc;var W=V.current.memoizedState.isDehydrated;if(W&&(ql(V,N).flags|=256),N=O0(V,N,!1),N!==2){if(v0&&!W){V.errorRecoveryDisabledLanes|=A,rl|=A,E=4;break e}A=Ui,Ui=E,A!==null&&(Ui===null?Ui=A:Ui.push.apply(Ui,A))}E=N}if(A=!1,E!==2)continue}}if(E===1){ql(t,0),ao(t,i,0,!0);break}e:{switch(d=t,A=E,A){case 0:case 1:throw Error(o(345));case 4:if((i&4194048)!==i)break;case 6:ao(d,i,ts,!no);break e;case 2:Ui=null;break;case 3:case 5:break;default:throw Error(o(329))}if((i&62914560)===i&&(E=Sh+300-Rt(),10<E)){if(ao(d,i,ts,!no),ft(d,0,!0)!==0)break e;Ca=i,d.timeoutHandle=By(oy.bind(null,d,c,Ui,Rh,C0,i,ts,rl,Hl,no,A,"Throttled",-0,0),E);break e}oy(d,c,Ui,Rh,C0,i,ts,rl,Hl,no,A,null,-0,0)}}break}while(!0);Hs(t)}function oy(t,i,c,d,E,A,N,V,W,me,Ce,Ne,pe,Ae){if(t.timeoutHandle=-1,Ne=i.subtreeFlags,Ne&8192||(Ne&16785408)===16785408){Ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:mi},$p(i,A,Ne);var wt=(A&62914560)===A?Sh-Rt():(A&4194048)===A?ry-Rt():0;if(wt=yb(Ne,wt),wt!==null){Ca=A,t.cancelPendingCommit=wt(my.bind(null,t,i,A,c,d,E,N,V,W,Ce,Ne,null,pe,Ae)),ao(t,A,N,!me);return}}my(t,i,A,c,d,E,N,V,W)}function MA(t){for(var i=t;;){var c=i.tag;if((c===0||c===11||c===15)&&i.flags&16384&&(c=i.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var E=c[d],A=E.getSnapshot;E=E.value;try{if(!m(A(),E))return!1}catch{return!1}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ao(t,i,c,d){i&=~T0,i&=~rl,t.suspendedLanes|=i,t.pingedLanes&=~i,d&&(t.warmLanes|=i),d=t.expirationTimes;for(var E=i;0<E;){var A=31-xt(E),N=1<<A;d[A]=-1,E&=~N}c!==0&&dn(t,c,i)}function Nh(){return(Ln&6)===0?(Yc(0),!1):!0}function N0(){if(un!==null){if(qn===0)var t=un.return;else t=un,ma=Wo=null,Xd(t),Ll=null,Rc=0,t=un;for(;t!==null;)Vp(t.alternate,t),t=t.return;un=null}}function ql(t,i){var c=t.timeoutHandle;c!==-1&&(t.timeoutHandle=-1,$A(c)),c=t.cancelPendingCommit,c!==null&&(t.cancelPendingCommit=null,c()),Ca=0,N0(),$n=t,un=c=da(t.current,null),yn=i,qn=0,es=null,no=!1,zl=Ke(t,i),v0=!1,Hl=ts=T0=rl=ro=br=0,Ui=qc=null,C0=!1,(i&8)!==0&&(i|=i&32);var d=t.entangledLanes;if(d!==0)for(t=t.entanglements,d&=i;0<d;){var E=31-xt(d),A=1<<E;i|=t[E],d&=~A}return Ta=i,Zu(),c}function ly(t,i){Jt=null,re.H=Bc,i===kl||i===sh?(i=vm(),qn=3):i===kd?(i=vm(),qn=4):qn=i===l0?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,es=i,un===null&&(br=1,Eh(t,ms(i,t.current)))}function cy(){var t=Ji.current;return t===null?!0:(yn&4194048)===yn?Es===null:(yn&62914560)===yn||(yn&536870912)!==0?t===Es:!1}function uy(){var t=re.H;return re.H=Bc,t===null?Bc:t}function hy(){var t=re.A;return re.A=OA,t}function Oh(){br=4,no||(yn&4194048)!==yn&&Ji.current!==null||(zl=!0),(ro&134217727)===0&&(rl&134217727)===0||$n===null||ao($n,yn,ts,!1)}function O0(t,i,c){var d=Ln;Ln|=2;var E=uy(),A=hy();($n!==t||yn!==i)&&(Rh=null,ql(t,i)),i=!1;var N=br;e:do try{if(qn!==0&&un!==null){var V=un,W=es;switch(qn){case 8:N0(),N=6;break e;case 3:case 2:case 9:case 6:Ji.current===null&&(i=!0);var me=qn;if(qn=0,es=null,Xl(t,V,W,me),c&&zl){N=0;break e}break;default:me=qn,qn=0,es=null,Xl(t,V,W,me)}}kA(),N=br;break}catch(Ce){ly(t,Ce)}while(!0);return i&&t.shellSuspendCounter++,ma=Wo=null,Ln=d,re.H=E,re.A=A,un===null&&($n=null,yn=0,Zu()),N}function kA(){for(;un!==null;)fy(un)}function LA(t,i){var c=Ln;Ln|=2;var d=uy(),E=hy();$n!==t||yn!==i?(Rh=null,Ih=Rt()+500,ql(t,i)):zl=Ke(t,i);e:do try{if(qn!==0&&un!==null){i=un;var A=es;t:switch(qn){case 1:qn=0,es=null,Xl(t,i,A,1);break;case 2:case 9:if(Am(A)){qn=0,es=null,dy(i);break}i=function(){qn!==2&&qn!==9||$n!==t||(qn=7),Hs(t)},A.then(i,i);break e;case 3:qn=7;break e;case 4:qn=5;break e;case 7:Am(A)?(qn=0,es=null,dy(i)):(qn=0,es=null,Xl(t,i,A,7));break;case 5:var N=null;switch(un.tag){case 26:N=un.memoizedState;case 5:case 27:var V=un;if(N?Jy(N):V.stateNode.complete){qn=0,es=null;var W=V.sibling;if(W!==null)un=W;else{var me=V.return;me!==null?(un=me,Dh(me)):un=null}break t}}qn=0,es=null,Xl(t,i,A,5);break;case 6:qn=0,es=null,Xl(t,i,A,6);break;case 8:N0(),br=6;break e;default:throw Error(o(462))}}PA();break}catch(Ce){ly(t,Ce)}while(!0);return ma=Wo=null,re.H=d,re.A=E,Ln=c,un!==null?0:($n=null,yn=0,Zu(),br)}function PA(){for(;un!==null&&!Qn();)fy(un)}function fy(t){var i=Pp(t.alternate,t,Ta);t.memoizedProps=t.pendingProps,i===null?Dh(t):un=i}function dy(t){var i=t,c=i.alternate;switch(i.tag){case 15:case 0:i=Np(c,i,i.pendingProps,i.type,void 0,yn);break;case 11:i=Np(c,i,i.pendingProps,i.type.render,i.ref,yn);break;case 5:Xd(i);default:Vp(c,i),i=un=hm(i,Ta),i=Pp(c,i,Ta)}t.memoizedProps=t.pendingProps,i===null?Dh(t):un=i}function Xl(t,i,c,d){ma=Wo=null,Xd(i),Ll=null,Rc=0;var E=i.return;try{if(vA(t,E,i,c,yn)){br=1,Eh(t,ms(c,t.current)),un=null;return}}catch(A){if(E!==null)throw un=E,A;br=1,Eh(t,ms(c,t.current)),un=null;return}i.flags&32768?(Cn||d===1?t=!0:zl||(yn&536870912)!==0?t=!1:(no=t=!0,(d===2||d===9||d===3||d===6)&&(d=Ji.current,d!==null&&d.tag===13&&(d.flags|=16384))),gy(i,t)):Dh(i)}function Dh(t){var i=t;do{if((i.flags&32768)!==0){gy(i,no);return}t=i.return;var c=SA(i.alternate,i,Ta);if(c!==null){un=c;return}if(i=i.sibling,i!==null){un=i;return}un=i=t}while(i!==null);br===0&&(br=5)}function gy(t,i){do{var c=IA(t.alternate,t);if(c!==null){c.flags&=32767,un=c;return}if(c=t.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!i&&(t=t.sibling,t!==null)){un=t;return}un=t=c}while(t!==null);br=6,un=null}function my(t,i,c,d,E,A,N,V,W){t.cancelPendingCommit=null;do Mh();while(Wr!==0);if((Ln&6)!==0)throw Error(o(327));if(i!==null){if(i===t.current)throw Error(o(177));if(A=i.lanes|i.childLanes,A|=Ed,bt(t,c,A,N,V,W),t===$n&&(un=$n=null,yn=0),Gl=i,so=t,Ca=c,S0=A,I0=E,iy=d,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,FA(Rn,function(){return wy(),null})):(t.callbackNode=null,t.callbackPriority=0),d=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||d){d=re.T,re.T=null,E=fe.p,fe.p=2,N=Ln,Ln|=4;try{RA(t,i,c)}finally{Ln=N,fe.p=E,re.T=d}}Wr=1,py(),yy(),xy()}}function py(){if(Wr===1){Wr=0;var t=so,i=Gl,c=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||c){c=re.T,re.T=null;var d=fe.p;fe.p=2;var E=Ln;Ln|=4;try{Qp(i,t);var A=H0,N=k(t.containerInfo),V=A.focusedElem,W=A.selectionRange;if(N!==V&&V&&V.ownerDocument&&I(V.ownerDocument.documentElement,V)){if(W!==null&&L(V)){var me=W.start,Ce=W.end;if(Ce===void 0&&(Ce=me),"selectionStart"in V)V.selectionStart=me,V.selectionEnd=Math.min(Ce,V.value.length);else{var Ne=V.ownerDocument||document,pe=Ne&&Ne.defaultView||window;if(pe.getSelection){var Ae=pe.getSelection(),wt=V.textContent.length,Bt=Math.min(W.start,wt),Kn=W.end===void 0?Bt:Math.min(W.end,wt);!Ae.extend&&Bt>Kn&&(N=Kn,Kn=Bt,Bt=N);var ie=v(V,Bt),te=v(V,Kn);if(ie&&te&&(Ae.rangeCount!==1||Ae.anchorNode!==ie.node||Ae.anchorOffset!==ie.offset||Ae.focusNode!==te.node||Ae.focusOffset!==te.offset)){var ge=Ne.createRange();ge.setStart(ie.node,ie.offset),Ae.removeAllRanges(),Bt>Kn?(Ae.addRange(ge),Ae.extend(te.node,te.offset)):(ge.setEnd(te.node,te.offset),Ae.addRange(ge))}}}}for(Ne=[],Ae=V;Ae=Ae.parentNode;)Ae.nodeType===1&&Ne.push({element:Ae,left:Ae.scrollLeft,top:Ae.scrollTop});for(typeof V.focus=="function"&&V.focus(),V=0;V<Ne.length;V++){var Ie=Ne[V];Ie.element.scrollLeft=Ie.left,Ie.element.scrollTop=Ie.top}}qh=!!z0,H0=z0=null}finally{Ln=E,fe.p=d,re.T=c}}t.current=i,Wr=2}}function yy(){if(Wr===2){Wr=0;var t=so,i=Gl,c=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||c){c=re.T,re.T=null;var d=fe.p;fe.p=2;var E=Ln;Ln|=4;try{qp(t,i.alternate,i)}finally{Ln=E,fe.p=d,re.T=c}}Wr=3}}function xy(){if(Wr===4||Wr===3){Wr=0,At();var t=so,i=Gl,c=Ca,d=iy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Wr=5:(Wr=0,Gl=so=null,Ey(t,t.pendingLanes));var E=t.pendingLanes;if(E===0&&(io=null),qr(c),i=i.stateNode,Me&&typeof Me.onCommitFiberRoot=="function")try{Me.onCommitFiberRoot(Zt,i,void 0,(i.current.flags&128)===128)}catch{}if(d!==null){i=re.T,E=fe.p,fe.p=2,re.T=null;try{for(var A=t.onRecoverableError,N=0;N<d.length;N++){var V=d[N];A(V.value,{componentStack:V.stack})}}finally{re.T=i,fe.p=E}}(Ca&3)!==0&&Mh(),Hs(t),E=t.pendingLanes,(c&261930)!==0&&(E&42)!==0?t===R0?Xc++:(Xc=0,R0=t):Xc=0,Yc(0)}}function Ey(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Sc(i)))}function Mh(){return py(),yy(),xy(),wy()}function wy(){if(Wr!==5)return!1;var t=so,i=S0;S0=0;var c=qr(Ca),d=re.T,E=fe.p;try{fe.p=32>c?32:c,re.T=null,c=I0,I0=null;var A=so,N=Ca;if(Wr=0,Gl=so=null,Ca=0,(Ln&6)!==0)throw Error(o(331));var V=Ln;if(Ln|=4,ty(A.current),Jp(A,A.current,N,c),Ln=V,Yc(0,!1),Me&&typeof Me.onPostCommitFiberRoot=="function")try{Me.onPostCommitFiberRoot(Zt,A)}catch{}return!0}finally{fe.p=E,re.T=d,Ey(t,i)}}function _y(t,i,c){i=ms(c,i),i=o0(t.stateNode,i,2),t=Ja(t,i,2),t!==null&&(St(t,2),Hs(t))}function Xn(t,i,c){if(t.tag===3)_y(t,t,c);else for(;i!==null;){if(i.tag===3){_y(i,t,c);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(io===null||!io.has(d))){t=ms(c,t),c=Ap(2),d=Ja(i,c,2),d!==null&&(bp(c,d,i,t),St(d,2),Hs(d));break}}i=i.return}}function D0(t,i,c){var d=t.pingCache;if(d===null){d=t.pingCache=new DA;var E=new Set;d.set(i,E)}else E=d.get(i),E===void 0&&(E=new Set,d.set(i,E));E.has(c)||(v0=!0,E.add(c),t=BA.bind(null,t,i,c),i.then(t,t))}function BA(t,i,c){var d=t.pingCache;d!==null&&d.delete(i),t.pingedLanes|=t.suspendedLanes&c,t.warmLanes&=~c,$n===t&&(yn&c)===c&&(br===4||br===3&&(yn&62914560)===yn&&300>Rt()-Sh?(Ln&2)===0&&ql(t,0):T0|=c,Hl===yn&&(Hl=0)),Hs(t)}function Ay(t,i){i===0&&(i=st()),t=qo(t,i),t!==null&&(St(t,i),Hs(t))}function VA(t){var i=t.memoizedState,c=0;i!==null&&(c=i.retryLane),Ay(t,c)}function UA(t,i){var c=0;switch(t.tag){case 31:case 13:var d=t.stateNode,E=t.memoizedState;E!==null&&(c=E.retryLane);break;case 19:d=t.stateNode;break;case 22:d=t.stateNode._retryCache;break;default:throw Error(o(314))}d!==null&&d.delete(i),Ay(t,c)}function FA(t,i){return Vt(t,i)}var kh=null,Yl=null,M0=!1,Lh=!1,k0=!1,oo=0;function Hs(t){t!==Yl&&t.next===null&&(Yl===null?kh=Yl=t:Yl=Yl.next=t),Lh=!0,M0||(M0=!0,zA())}function Yc(t,i){if(!k0&&Lh){k0=!0;do for(var c=!1,d=kh;d!==null;){if(t!==0){var E=d.pendingLanes;if(E===0)var A=0;else{var N=d.suspendedLanes,V=d.pingedLanes;A=(1<<31-xt(42|t)+1)-1,A&=E&~(N&~V),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(c=!0,Cy(d,A))}else A=yn,A=ft(d,d===$n?A:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(A&3)===0||Ke(d,A)||(c=!0,Cy(d,A));d=d.next}while(c);k0=!1}}function jA(){by()}function by(){Lh=M0=!1;var t=0;oo!==0&&JA()&&(t=oo);for(var i=Rt(),c=null,d=kh;d!==null;){var E=d.next,A=vy(d,i);A===0?(d.next=null,c===null?kh=E:c.next=E,E===null&&(Yl=c)):(c=d,(t!==0||(A&3)!==0)&&(Lh=!0)),d=E}Wr!==0&&Wr!==5||Yc(t),oo!==0&&(oo=0)}function vy(t,i){for(var c=t.suspendedLanes,d=t.pingedLanes,E=t.expirationTimes,A=t.pendingLanes&-62914561;0<A;){var N=31-xt(A),V=1<<N,W=E[N];W===-1?((V&c)===0||(V&d)!==0)&&(E[N]=He(V,i)):W<=i&&(t.expiredLanes|=V),A&=~V}if(i=$n,c=yn,c=ft(t,t===i?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),d=t.callbackNode,c===0||t===i&&(qn===2||qn===9)||t.cancelPendingCommit!==null)return d!==null&&d!==null&&We(d),t.callbackNode=null,t.callbackPriority=0;if((c&3)===0||Ke(t,c)){if(i=c&-c,i===t.callbackPriority)return i;switch(d!==null&&We(d),qr(c)){case 2:case 8:c=Hn;break;case 32:c=Rn;break;case 268435456:c=Lr;break;default:c=Rn}return d=Ty.bind(null,t),c=Vt(c,d),t.callbackPriority=i,t.callbackNode=c,i}return d!==null&&d!==null&&We(d),t.callbackPriority=2,t.callbackNode=null,2}function Ty(t,i){if(Wr!==0&&Wr!==5)return t.callbackNode=null,t.callbackPriority=0,null;var c=t.callbackNode;if(Mh()&&t.callbackNode!==c)return null;var d=yn;return d=ft(t,t===$n?d:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),d===0?null:(ay(t,d,i),vy(t,Rt()),t.callbackNode!=null&&t.callbackNode===c?Ty.bind(null,t):null)}function Cy(t,i){if(Mh())return null;ay(t,i,!0)}function zA(){eb(function(){(Ln&6)!==0?Vt(Gt,jA):by()})}function L0(){if(oo===0){var t=Dl;t===0&&(t=de,de<<=1,(de&261888)===0&&(de=256)),oo=t}return oo}function Sy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ps(""+t)}function Iy(t,i){var c=i.ownerDocument.createElement("input");return c.name=i.name,c.value=i.value,t.id&&c.setAttribute("form",t.id),i.parentNode.insertBefore(c,i),t=new FormData(t),c.parentNode.removeChild(c),t}function HA(t,i,c,d,E){if(i==="submit"&&c&&c.stateNode===E){var A=Sy((E[vn]||null).action),N=d.submitter;N&&(i=(i=N[vn]||null)?Sy(i.formAction):N.getAttribute("formAction"),i!==null&&(A=i,N=null));var V=new sr("action","action",null,d,E);t.push({event:V,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(oo!==0){var W=N?Iy(E,N):new FormData(E);t0(c,{pending:!0,data:W,method:E.method,action:A},null,W)}}else typeof A=="function"&&(V.preventDefault(),W=N?Iy(E,N):new FormData(E),t0(c,{pending:!0,data:W,method:E.method,action:A},A,W))},currentTarget:E}]})}}for(var P0=0;P0<vc.length;P0++){var B0=vc[P0],GA=B0.toLowerCase(),qA=B0[0].toUpperCase()+B0.slice(1);Ss(GA,"on"+qA)}Ss(Li,"onAnimationEnd"),Ss(si,"onAnimationIteration"),Ss(Un,"onAnimationStart"),Ss("dblclick","onDoubleClick"),Ss("focusin","onFocus"),Ss("focusout","onBlur"),Ss(Yr,"onTransitionRun"),Ss(Si,"onTransitionStart"),Ss(qa,"onTransitionCancel"),Ss(fa,"onTransitionEnd"),ni("onMouseEnter",["mouseout","mouseover"]),ni("onMouseLeave",["mouseout","mouseover"]),ni("onPointerEnter",["pointerout","pointerover"]),ni("onPointerLeave",["pointerout","pointerover"]),Nn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Nn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Nn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Nn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Nn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Nn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wc));function Ry(t,i){i=(i&4)!==0;for(var c=0;c<t.length;c++){var d=t[c],E=d.event;d=d.listeners;e:{var A=void 0;if(i)for(var N=d.length-1;0<=N;N--){var V=d[N],W=V.instance,me=V.currentTarget;if(V=V.listener,W!==A&&E.isPropagationStopped())break e;A=V,E.currentTarget=me;try{A(E)}catch(Ce){Qu(Ce)}E.currentTarget=null,A=W}else for(N=0;N<d.length;N++){if(V=d[N],W=V.instance,me=V.currentTarget,V=V.listener,W!==A&&E.isPropagationStopped())break e;A=V,E.currentTarget=me;try{A(E)}catch(Ce){Qu(Ce)}E.currentTarget=null,A=W}}}}function hn(t,i){var c=i[Ze];c===void 0&&(c=i[Ze]=new Set);var d=t+"__bubble";c.has(d)||(Ny(i,t,2,!1),c.add(d))}function V0(t,i,c){var d=0;i&&(d|=4),Ny(c,t,d,i)}var Ph="_reactListening"+Math.random().toString(36).slice(2);function U0(t){if(!t[Ph]){t[Ph]=!0,ke.forEach(function(c){c!=="selectionchange"&&(XA.has(c)||V0(c,!1,t),V0(c,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Ph]||(i[Ph]=!0,V0("selectionchange",!1,i))}}function Ny(t,i,c,d){switch(s2(i)){case 2:var E=wb;break;case 8:E=_b;break;default:E=e1}c=E.bind(null,i,c,t),E=void 0,!ra||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(E=!0),d?E!==void 0?t.addEventListener(i,c,{capture:!0,passive:E}):t.addEventListener(i,c,!0):E!==void 0?t.addEventListener(i,c,{passive:E}):t.addEventListener(i,c,!1)}function F0(t,i,c,d,E){var A=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var N=d.tag;if(N===3||N===4){var V=d.stateNode.containerInfo;if(V===E)break;if(N===4)for(N=d.return;N!==null;){var W=N.tag;if((W===3||W===4)&&N.stateNode.containerInfo===E)return;N=N.return}for(;V!==null;){if(N=gn(V),N===null)return;if(W=N.tag,W===5||W===6||W===26||W===27){d=A=N;continue e}V=V.parentNode}}d=d.return}Bs(function(){var me=A,Ce=Di(c),Ne=[];e:{var pe=Ku.get(t);if(pe!==void 0){var Ae=sr,wt=t;switch(t){case"keypress":if(Yi(c)===0)break e;case"keydown":case"keyup":Ae=la;break;case"focusin":wt="focus",Ae=aa;break;case"focusout":wt="blur",Ae=aa;break;case"beforeblur":case"afterblur":Ae=aa;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ae=Sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ae=sa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ae=S;break;case Li:case si:case Un:Ae=Wt;break;case fa:Ae=j;break;case"scroll":case"scrollend":Ae=Fa;break;case"wheel":Ae=we;break;case"copy":case"cut":case"paste":Ae=oa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ae=cn;break;case"toggle":case"beforetoggle":Ae=Ht}var Bt=(i&4)!==0,Kn=!Bt&&(t==="scroll"||t==="scrollend"),ie=Bt?pe!==null?pe+"Capture":null:pe;Bt=[];for(var te=me,ge;te!==null;){var Ie=te;if(ge=Ie.stateNode,Ie=Ie.tag,Ie!==5&&Ie!==26&&Ie!==27||ge===null||ie===null||(Ie=Lt(te,ie),Ie!=null&&Bt.push(Kc(te,Ie,ge))),Kn)break;te=te.return}0<Bt.length&&(pe=new Ae(pe,wt,null,c,Ce),Ne.push({event:pe,listeners:Bt}))}}if((i&7)===0){e:{if(pe=t==="mouseover"||t==="pointerover",Ae=t==="mouseout"||t==="pointerout",pe&&c!==na&&(wt=c.relatedTarget||c.fromElement)&&(gn(wt)||wt[ee]))break e;if((Ae||pe)&&(pe=Ce.window===Ce?Ce:(pe=Ce.ownerDocument)?pe.defaultView||pe.parentWindow:window,Ae?(wt=c.relatedTarget||c.toElement,Ae=me,wt=wt?gn(wt):null,wt!==null&&(Kn=g(wt),Bt=wt.tag,wt!==Kn||Bt!==5&&Bt!==27&&Bt!==6)&&(wt=null)):(Ae=null,wt=me),Ae!==wt)){if(Bt=Sn,Ie="onMouseLeave",ie="onMouseEnter",te="mouse",(t==="pointerout"||t==="pointerover")&&(Bt=cn,Ie="onPointerLeave",ie="onPointerEnter",te="pointer"),Kn=Ae==null?pe:pr(Ae),ge=wt==null?pe:pr(wt),pe=new Bt(Ie,te+"leave",Ae,c,Ce),pe.target=Kn,pe.relatedTarget=ge,Ie=null,gn(Ce)===me&&(Bt=new Bt(ie,te+"enter",wt,c,Ce),Bt.target=ge,Bt.relatedTarget=Kn,Ie=Bt),Kn=Ie,Ae&&wt)t:{for(Bt=YA,ie=Ae,te=wt,ge=0,Ie=ie;Ie;Ie=Bt(Ie))ge++;Ie=0;for(var Ot=te;Ot;Ot=Bt(Ot))Ie++;for(;0<ge-Ie;)ie=Bt(ie),ge--;for(;0<Ie-ge;)te=Bt(te),Ie--;for(;ge--;){if(ie===te||te!==null&&ie===te.alternate){Bt=ie;break t}ie=Bt(ie),te=Bt(te)}Bt=null}else Bt=null;Ae!==null&&Oy(Ne,pe,Ae,Bt,!1),wt!==null&&Kn!==null&&Oy(Ne,Kn,wt,Bt,!0)}}e:{if(pe=me?pr(me):window,Ae=pe.nodeName&&pe.nodeName.toLowerCase(),Ae==="select"||Ae==="input"&&pe.type==="file")var Dn=Qi;else if(bc(pe))if(Wu)Dn=u;else{Dn=a;var vt=r}else Ae=pe.nodeName,!Ae||Ae.toLowerCase()!=="input"||pe.type!=="checkbox"&&pe.type!=="radio"?me&&Bn(me.elementType)&&(Dn=Qi):Dn=l;if(Dn&&(Dn=Dn(t,me))){Ki(Ne,Dn,c,Ce);break e}vt&&vt(t,pe,me),t==="focusout"&&me&&pe.type==="number"&&me.memoizedProps.value!=null&&H(pe,"number",pe.value)}switch(vt=me?pr(me):window,t){case"focusin":(bc(vt)||vt.contentEditable==="true")&&(Z=vt,J=me,ce=null);break;case"focusout":ce=J=Z=null;break;case"mousedown":Ee=!0;break;case"contextmenu":case"mouseup":case"dragend":Ee=!1,Xe(Ne,c,Ce);break;case"selectionchange":if(q)break;case"keydown":case"keyup":Xe(Ne,c,Ce)}var tn;if(Tn)e:{switch(t){case"compositionstart":var xn="onCompositionStart";break e;case"compositionend":xn="onCompositionEnd";break e;case"compositionupdate":xn="onCompositionUpdate";break e}xn=void 0}else Ga?ca(t,c)&&(xn="onCompositionEnd"):t==="keydown"&&c.keyCode===229&&(xn="onCompositionStart");xn&&(fs&&c.locale!=="ko"&&(Ga||xn!=="onCompositionStart"?xn==="onCompositionEnd"&&Ga&&(tn=vs()):(qi=Ce,Xi="value"in qi?qi.value:qi.textContent,Ga=!0)),vt=Bh(me,xn),0<vt.length&&(xn=new cs(xn,t,null,c,Ce),Ne.push({event:xn,listeners:vt}),tn?xn.data=tn:(tn=ds(c),tn!==null&&(xn.data=tn)))),(tn=Ti?Us(t,c):Tl(t,c))&&(xn=Bh(me,"onBeforeInput"),0<xn.length&&(vt=new cs("onBeforeInput","beforeinput",null,c,Ce),Ne.push({event:vt,listeners:xn}),vt.data=tn)),HA(Ne,t,me,c,Ce)}Ry(Ne,i)})}function Kc(t,i,c){return{instance:t,listener:i,currentTarget:c}}function Bh(t,i){for(var c=i+"Capture",d=[];t!==null;){var E=t,A=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||A===null||(E=Lt(t,c),E!=null&&d.unshift(Kc(t,E,A)),E=Lt(t,i),E!=null&&d.push(Kc(t,E,A))),t.tag===3)return d;t=t.return}return[]}function YA(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Oy(t,i,c,d,E){for(var A=i._reactName,N=[];c!==null&&c!==d;){var V=c,W=V.alternate,me=V.stateNode;if(V=V.tag,W!==null&&W===d)break;V!==5&&V!==26&&V!==27||me===null||(W=me,E?(me=Lt(c,A),me!=null&&N.unshift(Kc(c,me,W))):E||(me=Lt(c,A),me!=null&&N.push(Kc(c,me,W)))),c=c.return}N.length!==0&&t.push({event:i,listeners:N})}var WA=/\r\n?/g,KA=/\u0000|\uFFFD/g;function Dy(t){return(typeof t=="string"?t:""+t).replace(WA,`
`).replace(KA,"")}function My(t,i){return i=Dy(i),Dy(t)===i}function Wn(t,i,c,d,E,A){switch(c){case"children":typeof d=="string"?i==="body"||i==="textarea"&&d===""||gi(t,d):(typeof d=="number"||typeof d=="bigint")&&i!=="body"&&gi(t,""+d);break;case"className":ri(t,"class",d);break;case"tabIndex":ri(t,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":ri(t,c,d);break;case"style":Tt(t,d,A);break;case"data":if(i!=="object"){ri(t,"data",d);break}case"src":case"href":if(d===""&&(i!=="a"||c!=="href")){t.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){t.removeAttribute(c);break}d=Ps(""+d),t.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){t.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(c==="formAction"?(i!=="input"&&Wn(t,i,"name",E.name,E,null),Wn(t,i,"formEncType",E.formEncType,E,null),Wn(t,i,"formMethod",E.formMethod,E,null),Wn(t,i,"formTarget",E.formTarget,E,null)):(Wn(t,i,"encType",E.encType,E,null),Wn(t,i,"method",E.method,E,null),Wn(t,i,"target",E.target,E,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){t.removeAttribute(c);break}d=Ps(""+d),t.setAttribute(c,d);break;case"onClick":d!=null&&(t.onclick=mi);break;case"onScroll":d!=null&&hn("scroll",t);break;case"onScrollEnd":d!=null&&hn("scrollend",t);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(o(61));if(c=d.__html,c!=null){if(E.children!=null)throw Error(o(60));t.innerHTML=c}}break;case"multiple":t.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":t.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){t.removeAttribute("xlink:href");break}c=Ps(""+d),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?t.setAttribute(c,""+d):t.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?t.setAttribute(c,""):t.removeAttribute(c);break;case"capture":case"download":d===!0?t.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?t.setAttribute(c,d):t.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?t.setAttribute(c,d):t.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?t.removeAttribute(c):t.setAttribute(c,d);break;case"popover":hn("beforetoggle",t),hn("toggle",t),ks(t,"popover",d);break;case"xlinkActuate":hr(t,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":hr(t,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":hr(t,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":hr(t,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":hr(t,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":hr(t,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":hr(t,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":hr(t,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":hr(t,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":ks(t,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Uo.get(c)||c,ks(t,c,d))}}function j0(t,i,c,d,E,A){switch(c){case"style":Tt(t,d,A);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(o(61));if(c=d.__html,c!=null){if(E.children!=null)throw Error(o(60));t.innerHTML=c}}break;case"children":typeof d=="string"?gi(t,d):(typeof d=="number"||typeof d=="bigint")&&gi(t,""+d);break;case"onScroll":d!=null&&hn("scroll",t);break;case"onScrollEnd":d!=null&&hn("scrollend",t);break;case"onClick":d!=null&&(t.onclick=mi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Po.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(E=c.endsWith("Capture"),i=c.slice(2,E?c.length-7:void 0),A=t[vn]||null,A=A!=null?A[c]:null,typeof A=="function"&&t.removeEventListener(i,A,E),typeof d=="function")){typeof A!="function"&&A!==null&&(c in t?t[c]=null:t.hasAttribute(c)&&t.removeAttribute(c)),t.addEventListener(i,d,E);break e}c in t?t[c]=d:d===!0?t.setAttribute(c,""):ks(t,c,d)}}}function ci(t,i,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":hn("error",t),hn("load",t);var d=!1,E=!1,A;for(A in c)if(c.hasOwnProperty(A)){var N=c[A];if(N!=null)switch(A){case"src":d=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,i));default:Wn(t,i,A,N,c,null)}}E&&Wn(t,i,"srcSet",c.srcSet,c,null),d&&Wn(t,i,"src",c.src,c,null);return;case"input":hn("invalid",t);var V=A=N=E=null,W=null,me=null;for(d in c)if(c.hasOwnProperty(d)){var Ce=c[d];if(Ce!=null)switch(d){case"name":E=Ce;break;case"type":N=Ce;break;case"checked":W=Ce;break;case"defaultChecked":me=Ce;break;case"value":A=Ce;break;case"defaultValue":V=Ce;break;case"children":case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(o(137,i));break;default:Wn(t,i,d,Ce,c,null)}}ue(t,A,V,W,me,N,E,!1);return;case"select":hn("invalid",t),d=N=A=null;for(E in c)if(c.hasOwnProperty(E)&&(V=c[E],V!=null))switch(E){case"value":A=V;break;case"defaultValue":N=V;break;case"multiple":d=V;default:Wn(t,i,E,V,c,null)}i=A,c=N,t.multiple=!!d,i!=null?Et(t,!!d,i,!1):c!=null&&Et(t,!!d,c,!0);return;case"textarea":hn("invalid",t),A=E=d=null;for(N in c)if(c.hasOwnProperty(N)&&(V=c[N],V!=null))switch(N){case"value":d=V;break;case"defaultValue":E=V;break;case"children":A=V;break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(o(91));break;default:Wn(t,i,N,V,c,null)}Nr(t,d,E,A);return;case"option":for(W in c)if(c.hasOwnProperty(W)&&(d=c[W],d!=null))switch(W){case"selected":t.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Wn(t,i,W,d,c,null)}return;case"dialog":hn("beforetoggle",t),hn("toggle",t),hn("cancel",t),hn("close",t);break;case"iframe":case"object":hn("load",t);break;case"video":case"audio":for(d=0;d<Wc.length;d++)hn(Wc[d],t);break;case"image":hn("error",t),hn("load",t);break;case"details":hn("toggle",t);break;case"embed":case"source":case"link":hn("error",t),hn("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(me in c)if(c.hasOwnProperty(me)&&(d=c[me],d!=null))switch(me){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,i));default:Wn(t,i,me,d,c,null)}return;default:if(Bn(i)){for(Ce in c)c.hasOwnProperty(Ce)&&(d=c[Ce],d!==void 0&&j0(t,i,Ce,d,c,void 0));return}}for(V in c)c.hasOwnProperty(V)&&(d=c[V],d!=null&&Wn(t,i,V,d,c,null))}function QA(t,i,c,d){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,A=null,N=null,V=null,W=null,me=null,Ce=null;for(Ae in c){var Ne=c[Ae];if(c.hasOwnProperty(Ae)&&Ne!=null)switch(Ae){case"checked":break;case"value":break;case"defaultValue":W=Ne;default:d.hasOwnProperty(Ae)||Wn(t,i,Ae,null,d,Ne)}}for(var pe in d){var Ae=d[pe];if(Ne=c[pe],d.hasOwnProperty(pe)&&(Ae!=null||Ne!=null))switch(pe){case"type":A=Ae;break;case"name":E=Ae;break;case"checked":me=Ae;break;case"defaultChecked":Ce=Ae;break;case"value":N=Ae;break;case"defaultValue":V=Ae;break;case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(o(137,i));break;default:Ae!==Ne&&Wn(t,i,pe,Ae,d,Ne)}}yr(t,N,V,W,me,Ce,A,E);return;case"select":Ae=N=V=pe=null;for(A in c)if(W=c[A],c.hasOwnProperty(A)&&W!=null)switch(A){case"value":break;case"multiple":Ae=W;default:d.hasOwnProperty(A)||Wn(t,i,A,null,d,W)}for(E in d)if(A=d[E],W=c[E],d.hasOwnProperty(E)&&(A!=null||W!=null))switch(E){case"value":pe=A;break;case"defaultValue":V=A;break;case"multiple":N=A;default:A!==W&&Wn(t,i,E,A,d,W)}i=V,c=N,d=Ae,pe!=null?Et(t,!!c,pe,!1):!!d!=!!c&&(i!=null?Et(t,!!c,i,!0):Et(t,!!c,c?[]:"",!1));return;case"textarea":Ae=pe=null;for(V in c)if(E=c[V],c.hasOwnProperty(V)&&E!=null&&!d.hasOwnProperty(V))switch(V){case"value":break;case"children":break;default:Wn(t,i,V,null,d,E)}for(N in d)if(E=d[N],A=c[N],d.hasOwnProperty(N)&&(E!=null||A!=null))switch(N){case"value":pe=E;break;case"defaultValue":Ae=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(o(91));break;default:E!==A&&Wn(t,i,N,E,d,A)}xr(t,pe,Ae);return;case"option":for(var wt in c)if(pe=c[wt],c.hasOwnProperty(wt)&&pe!=null&&!d.hasOwnProperty(wt))switch(wt){case"selected":t.selected=!1;break;default:Wn(t,i,wt,null,d,pe)}for(W in d)if(pe=d[W],Ae=c[W],d.hasOwnProperty(W)&&pe!==Ae&&(pe!=null||Ae!=null))switch(W){case"selected":t.selected=pe&&typeof pe!="function"&&typeof pe!="symbol";break;default:Wn(t,i,W,pe,d,Ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Bt in c)pe=c[Bt],c.hasOwnProperty(Bt)&&pe!=null&&!d.hasOwnProperty(Bt)&&Wn(t,i,Bt,null,d,pe);for(me in d)if(pe=d[me],Ae=c[me],d.hasOwnProperty(me)&&pe!==Ae&&(pe!=null||Ae!=null))switch(me){case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(o(137,i));break;default:Wn(t,i,me,pe,d,Ae)}return;default:if(Bn(i)){for(var Kn in c)pe=c[Kn],c.hasOwnProperty(Kn)&&pe!==void 0&&!d.hasOwnProperty(Kn)&&j0(t,i,Kn,void 0,d,pe);for(Ce in d)pe=d[Ce],Ae=c[Ce],!d.hasOwnProperty(Ce)||pe===Ae||pe===void 0&&Ae===void 0||j0(t,i,Ce,pe,d,Ae);return}}for(var ie in c)pe=c[ie],c.hasOwnProperty(ie)&&pe!=null&&!d.hasOwnProperty(ie)&&Wn(t,i,ie,null,d,pe);for(Ne in d)pe=d[Ne],Ae=c[Ne],!d.hasOwnProperty(Ne)||pe===Ae||pe==null&&Ae==null||Wn(t,i,Ne,pe,d,Ae)}function ky(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ZA(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var E=c[d],A=E.transferSize,N=E.initiatorType,V=E.duration;if(A&&V&&ky(N)){for(N=0,V=E.responseEnd,d+=1;d<c.length;d++){var W=c[d],me=W.startTime;if(me>V)break;var Ce=W.transferSize,Ne=W.initiatorType;Ce&&ky(Ne)&&(W=W.responseEnd,N+=Ce*(W<V?1:(V-me)/(W-me)))}if(--d,i+=8*(A+N)/(E.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var z0=null,H0=null;function Vh(t){return t.nodeType===9?t:t.ownerDocument}function Ly(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Py(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function G0(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var q0=null;function JA(){var t=window.event;return t&&t.type==="popstate"?t===q0?!1:(q0=t,!0):(q0=null,!1)}var By=typeof setTimeout=="function"?setTimeout:void 0,$A=typeof clearTimeout=="function"?clearTimeout:void 0,Vy=typeof Promise=="function"?Promise:void 0,eb=typeof queueMicrotask=="function"?queueMicrotask:typeof Vy<"u"?function(t){return Vy.resolve(null).then(t).catch(tb)}:By;function tb(t){setTimeout(function(){throw t})}function lo(t){return t==="head"}function Uy(t,i){var c=i,d=0;do{var E=c.nextSibling;if(t.removeChild(c),E&&E.nodeType===8)if(c=E.data,c==="/$"||c==="/&"){if(d===0){t.removeChild(E),Zl(i);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")Qc(t.ownerDocument.documentElement);else if(c==="head"){c=t.ownerDocument.head,Qc(c);for(var A=c.firstChild;A;){var N=A.nextSibling,V=A.nodeName;A[$t]||V==="SCRIPT"||V==="STYLE"||V==="LINK"&&A.rel.toLowerCase()==="stylesheet"||c.removeChild(A),A=N}}else c==="body"&&Qc(t.ownerDocument.body);c=E}while(c);Zl(i)}function Fy(t,i){var c=t;t=0;do{var d=c.nextSibling;if(c.nodeType===1?i?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(i?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(t===0)break;t--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||t++;c=d}while(c)}function X0(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var c=i;switch(i=i.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":X0(c),kn(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}t.removeChild(c)}}function nb(t,i,c,d){for(;t.nodeType===1;){var E=c;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!d&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(d){if(!t[$t])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(A=t.getAttribute("rel"),A==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(A!==E.rel||t.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||t.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||t.getAttribute("title")!==(E.title==null?null:E.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(A=t.getAttribute("src"),(A!==(E.src==null?null:E.src)||t.getAttribute("type")!==(E.type==null?null:E.type)||t.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&A&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var A=E.name==null?null:""+E.name;if(E.type==="hidden"&&t.getAttribute("name")===A)return t}else return t;if(t=ws(t.nextSibling),t===null)break}return null}function rb(t,i,c){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!c||(t=ws(t.nextSibling),t===null))return null;return t}function jy(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=ws(t.nextSibling),t===null))return null;return t}function Y0(t){return t.data==="$?"||t.data==="$~"}function W0(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function ib(t,i){var c=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||c.readyState!=="loading")i();else{var d=function(){i(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),t._reactRetry=d}}function ws(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var K0=null;function zy(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var c=t.data;if(c==="/$"||c==="/&"){if(i===0)return ws(t.nextSibling);i--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||i++}t=t.nextSibling}return null}function Hy(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var c=t.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(i===0)return t;i--}else c!=="/$"&&c!=="/&"||i++}t=t.previousSibling}return null}function Gy(t,i,c){switch(i=Vh(c),t){case"html":if(t=i.documentElement,!t)throw Error(o(452));return t;case"head":if(t=i.head,!t)throw Error(o(453));return t;case"body":if(t=i.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function Qc(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);kn(t)}var _s=new Map,qy=new Set;function Uh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Sa=fe.d;fe.d={f:sb,r:ab,D:ob,C:lb,L:cb,m:ub,X:fb,S:hb,M:db};function sb(){var t=Sa.f(),i=Nh();return t||i}function ab(t){var i=qt(t);i!==null&&i.tag===5&&i.type==="form"?lp(i):Sa.r(t)}var Wl=typeof document>"u"?null:document;function Xy(t,i,c){var d=Wl;if(d&&typeof i=="string"&&i){var E=en(i);E='link[rel="'+t+'"][href="'+E+'"]',typeof c=="string"&&(E+='[crossorigin="'+c+'"]'),qy.has(E)||(qy.add(E),t={rel:t,crossOrigin:c,href:i},d.querySelector(E)===null&&(i=d.createElement("link"),ci(i,"link",t),nr(i),d.head.appendChild(i)))}}function ob(t){Sa.D(t),Xy("dns-prefetch",t,null)}function lb(t,i){Sa.C(t,i),Xy("preconnect",t,i)}function cb(t,i,c){Sa.L(t,i,c);var d=Wl;if(d&&t&&i){var E='link[rel="preload"][as="'+en(i)+'"]';i==="image"&&c&&c.imageSrcSet?(E+='[imagesrcset="'+en(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(E+='[imagesizes="'+en(c.imageSizes)+'"]')):E+='[href="'+en(t)+'"]';var A=E;switch(i){case"style":A=Kl(t);break;case"script":A=Ql(t)}_s.has(A)||(t=R({rel:"preload",href:i==="image"&&c&&c.imageSrcSet?void 0:t,as:i},c),_s.set(A,t),d.querySelector(E)!==null||i==="style"&&d.querySelector(Zc(A))||i==="script"&&d.querySelector(Jc(A))||(i=d.createElement("link"),ci(i,"link",t),nr(i),d.head.appendChild(i)))}}function ub(t,i){Sa.m(t,i);var c=Wl;if(c&&t){var d=i&&typeof i.as=="string"?i.as:"script",E='link[rel="modulepreload"][as="'+en(d)+'"][href="'+en(t)+'"]',A=E;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=Ql(t)}if(!_s.has(A)&&(t=R({rel:"modulepreload",href:t},i),_s.set(A,t),c.querySelector(E)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Jc(A)))return}d=c.createElement("link"),ci(d,"link",t),nr(d),c.head.appendChild(d)}}}function hb(t,i,c){Sa.S(t,i,c);var d=Wl;if(d&&t){var E=ir(d).hoistableStyles,A=Kl(t);i=i||"default";var N=E.get(A);if(!N){var V={loading:0,preload:null};if(N=d.querySelector(Zc(A)))V.loading=5;else{t=R({rel:"stylesheet",href:t,"data-precedence":i},c),(c=_s.get(A))&&Q0(t,c);var W=N=d.createElement("link");nr(W),ci(W,"link",t),W._p=new Promise(function(me,Ce){W.onload=me,W.onerror=Ce}),W.addEventListener("load",function(){V.loading|=1}),W.addEventListener("error",function(){V.loading|=2}),V.loading|=4,Fh(N,i,d)}N={type:"stylesheet",instance:N,count:1,state:V},E.set(A,N)}}}function fb(t,i){Sa.X(t,i);var c=Wl;if(c&&t){var d=ir(c).hoistableScripts,E=Ql(t),A=d.get(E);A||(A=c.querySelector(Jc(E)),A||(t=R({src:t,async:!0},i),(i=_s.get(E))&&Z0(t,i),A=c.createElement("script"),nr(A),ci(A,"link",t),c.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},d.set(E,A))}}function db(t,i){Sa.M(t,i);var c=Wl;if(c&&t){var d=ir(c).hoistableScripts,E=Ql(t),A=d.get(E);A||(A=c.querySelector(Jc(E)),A||(t=R({src:t,async:!0,type:"module"},i),(i=_s.get(E))&&Z0(t,i),A=c.createElement("script"),nr(A),ci(A,"link",t),c.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},d.set(E,A))}}function Yy(t,i,c,d){var E=(E=_e.current)?Uh(E):null;if(!E)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(i=Kl(c.href),c=ir(E).hoistableStyles,d=c.get(i),d||(d={type:"style",instance:null,count:0,state:null},c.set(i,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){t=Kl(c.href);var A=ir(E).hoistableStyles,N=A.get(t);if(N||(E=E.ownerDocument||E,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(t,N),(A=E.querySelector(Zc(t)))&&!A._p&&(N.instance=A,N.state.loading=5),_s.has(t)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},_s.set(t,c),A||gb(E,t,c,N.state))),i&&d===null)throw Error(o(528,""));return N}if(i&&d!==null)throw Error(o(529,""));return null;case"script":return i=c.async,c=c.src,typeof c=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ql(c),c=ir(E).hoistableScripts,d=c.get(i),d||(d={type:"script",instance:null,count:0,state:null},c.set(i,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Kl(t){return'href="'+en(t)+'"'}function Zc(t){return'link[rel="stylesheet"]['+t+"]"}function Wy(t){return R({},t,{"data-precedence":t.precedence,precedence:null})}function gb(t,i,c,d){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?d.loading=1:(i=t.createElement("link"),d.preload=i,i.addEventListener("load",function(){return d.loading|=1}),i.addEventListener("error",function(){return d.loading|=2}),ci(i,"link",c),nr(i),t.head.appendChild(i))}function Ql(t){return'[src="'+en(t)+'"]'}function Jc(t){return"script[async]"+t}function Ky(t,i,c){if(i.count++,i.instance===null)switch(i.type){case"style":var d=t.querySelector('style[data-href~="'+en(c.href)+'"]');if(d)return i.instance=d,nr(d),d;var E=R({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(t.ownerDocument||t).createElement("style"),nr(d),ci(d,"style",E),Fh(d,c.precedence,t),i.instance=d;case"stylesheet":E=Kl(c.href);var A=t.querySelector(Zc(E));if(A)return i.state.loading|=4,i.instance=A,nr(A),A;d=Wy(c),(E=_s.get(E))&&Q0(d,E),A=(t.ownerDocument||t).createElement("link"),nr(A);var N=A;return N._p=new Promise(function(V,W){N.onload=V,N.onerror=W}),ci(A,"link",d),i.state.loading|=4,Fh(A,c.precedence,t),i.instance=A;case"script":return A=Ql(c.src),(E=t.querySelector(Jc(A)))?(i.instance=E,nr(E),E):(d=c,(E=_s.get(A))&&(d=R({},c),Z0(d,E)),t=t.ownerDocument||t,E=t.createElement("script"),nr(E),ci(E,"link",d),t.head.appendChild(E),i.instance=E);case"void":return null;default:throw Error(o(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(d=i.instance,i.state.loading|=4,Fh(d,c.precedence,t));return i.instance}function Fh(t,i,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=d.length?d[d.length-1]:null,A=E,N=0;N<d.length;N++){var V=d[N];if(V.dataset.precedence===i)A=V;else if(A!==E)break}A?A.parentNode.insertBefore(t,A.nextSibling):(i=c.nodeType===9?c.head:c,i.insertBefore(t,i.firstChild))}function Q0(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Z0(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var jh=null;function Qy(t,i,c){if(jh===null){var d=new Map,E=jh=new Map;E.set(c,d)}else E=jh,d=E.get(c),d||(d=new Map,E.set(c,d));if(d.has(t))return d;for(d.set(t,null),c=c.getElementsByTagName(t),E=0;E<c.length;E++){var A=c[E];if(!(A[$t]||A[tr]||t==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var N=A.getAttribute(i)||"";N=t+N;var V=d.get(N);V?V.push(A):d.set(N,[A])}}return d}function Zy(t,i,c){t=t.ownerDocument||t,t.head.insertBefore(c,i==="title"?t.querySelector("head > title"):null)}function mb(t,i,c){if(c===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Jy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function pb(t,i,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var E=Kl(d.href),A=i.querySelector(Zc(E));if(A){i=A._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=zh.bind(t),i.then(t,t)),c.state.loading|=4,c.instance=A,nr(A);return}A=i.ownerDocument||i,d=Wy(d),(E=_s.get(E))&&Q0(d,E),A=A.createElement("link"),nr(A);var N=A;N._p=new Promise(function(V,W){N.onload=V,N.onerror=W}),ci(A,"link",d),c.instance=A}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(c,i),(i=c.state.preload)&&(c.state.loading&3)===0&&(t.count++,c=zh.bind(t),i.addEventListener("load",c),i.addEventListener("error",c))}}var J0=0;function yb(t,i){return t.stylesheets&&t.count===0&&Gh(t,t.stylesheets),0<t.count||0<t.imgCount?function(c){var d=setTimeout(function(){if(t.stylesheets&&Gh(t,t.stylesheets),t.unsuspend){var A=t.unsuspend;t.unsuspend=null,A()}},6e4+i);0<t.imgBytes&&J0===0&&(J0=62500*ZA());var E=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Gh(t,t.stylesheets),t.unsuspend)){var A=t.unsuspend;t.unsuspend=null,A()}},(t.imgBytes>J0?50:800)+i);return t.unsuspend=c,function(){t.unsuspend=null,clearTimeout(d),clearTimeout(E)}}:null}function zh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Gh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Hh=null;function Gh(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Hh=new Map,i.forEach(xb,t),Hh=null,zh.call(t))}function xb(t,i){if(!(i.state.loading&4)){var c=Hh.get(t);if(c)var d=c.get(null);else{c=new Map,Hh.set(t,c);for(var E=t.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<E.length;A++){var N=E[A];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(c.set(N.dataset.precedence,N),d=N)}d&&c.set(null,d)}E=i.instance,N=E.getAttribute("data-precedence"),A=c.get(N)||d,A===d&&c.set(null,E),c.set(N,E),this.count++,d=zh.bind(this),E.addEventListener("load",d),E.addEventListener("error",d),A?A.parentNode.insertBefore(E,A.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(E,t.firstChild)),i.state.loading|=4}}var $c={$$typeof:he,Provider:null,Consumer:null,_currentValue:tt,_currentValue2:tt,_threadCount:0};function Eb(t,i,c,d,E,A,N,V,W){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ht(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ht(0),this.hiddenUpdates=ht(null),this.identifierPrefix=d,this.onUncaughtError=E,this.onCaughtError=A,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=W,this.incompleteTransitions=new Map}function $y(t,i,c,d,E,A,N,V,W,me,Ce,Ne){return t=new Eb(t,i,c,N,W,me,Ce,Ne,V),i=1,A===!0&&(i|=24),A=Zi(3,null,null,i),t.current=A,A.stateNode=t,i=Od(),i.refCount++,t.pooledCache=i,i.refCount++,A.memoizedState={element:d,isDehydrated:c,cache:i},Ld(A),t}function e2(t){return t?(t=Sl,t):Sl}function t2(t,i,c,d,E,A){E=e2(E),d.context===null?d.context=E:d.pendingContext=E,d=Za(i),d.payload={element:c},A=A===void 0?null:A,A!==null&&(d.callback=A),c=Ja(t,d,i),c!==null&&(Fi(c,t,i),Oc(c,t,i))}function n2(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var c=t.retryLane;t.retryLane=c!==0&&c<i?c:i}}function $0(t,i){n2(t,i),(t=t.alternate)&&n2(t,i)}function r2(t){if(t.tag===13||t.tag===31){var i=qo(t,67108864);i!==null&&Fi(i,t,67108864),$0(t,67108864)}}function i2(t){if(t.tag===13||t.tag===31){var i=ns();i=ur(i);var c=qo(t,i);c!==null&&Fi(c,t,i),$0(t,i)}}var qh=!0;function wb(t,i,c,d){var E=re.T;re.T=null;var A=fe.p;try{fe.p=2,e1(t,i,c,d)}finally{fe.p=A,re.T=E}}function _b(t,i,c,d){var E=re.T;re.T=null;var A=fe.p;try{fe.p=8,e1(t,i,c,d)}finally{fe.p=A,re.T=E}}function e1(t,i,c,d){if(qh){var E=t1(d);if(E===null)F0(t,i,d,Xh,c),a2(t,d);else if(bb(E,t,i,c,d))d.stopPropagation();else if(a2(t,d),i&4&&-1<Ab.indexOf(t)){for(;E!==null;){var A=qt(E);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var N=rt(A.pendingLanes);if(N!==0){var V=A;for(V.pendingLanes|=2,V.entangledLanes|=2;N;){var W=1<<31-xt(N);V.entanglements[1]|=W,N&=~W}Hs(A),(Ln&6)===0&&(Ih=Rt()+500,Yc(0))}}break;case 31:case 13:V=qo(A,2),V!==null&&Fi(V,A,2),Nh(),$0(A,2)}if(A=t1(d),A===null&&F0(t,i,d,Xh,c),A===E)break;E=A}E!==null&&d.stopPropagation()}else F0(t,i,d,null,c)}}function t1(t){return t=Di(t),n1(t)}var Xh=null;function n1(t){if(Xh=null,t=gn(t),t!==null){var i=g(t);if(i===null)t=null;else{var c=i.tag;if(c===13){if(t=x(i),t!==null)return t;t=null}else if(c===31){if(t=T(i),t!==null)return t;t=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Xh=t,null}function s2(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Sr()){case Gt:return 2;case Hn:return 8;case Rn:case Pn:return 32;case Lr:return 268435456;default:return 32}default:return 32}}var r1=!1,co=null,uo=null,ho=null,eu=new Map,tu=new Map,fo=[],Ab="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function a2(t,i){switch(t){case"focusin":case"focusout":co=null;break;case"dragenter":case"dragleave":uo=null;break;case"mouseover":case"mouseout":ho=null;break;case"pointerover":case"pointerout":eu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":tu.delete(i.pointerId)}}function nu(t,i,c,d,E,A){return t===null||t.nativeEvent!==A?(t={blockedOn:i,domEventName:c,eventSystemFlags:d,nativeEvent:A,targetContainers:[E]},i!==null&&(i=qt(i),i!==null&&r2(i)),t):(t.eventSystemFlags|=d,i=t.targetContainers,E!==null&&i.indexOf(E)===-1&&i.push(E),t)}function bb(t,i,c,d,E){switch(i){case"focusin":return co=nu(co,t,i,c,d,E),!0;case"dragenter":return uo=nu(uo,t,i,c,d,E),!0;case"mouseover":return ho=nu(ho,t,i,c,d,E),!0;case"pointerover":var A=E.pointerId;return eu.set(A,nu(eu.get(A)||null,t,i,c,d,E)),!0;case"gotpointercapture":return A=E.pointerId,tu.set(A,nu(tu.get(A)||null,t,i,c,d,E)),!0}return!1}function o2(t){var i=gn(t.target);if(i!==null){var c=g(i);if(c!==null){if(i=c.tag,i===13){if(i=x(c),i!==null){t.blockedOn=i,it(t.priority,function(){i2(c)});return}}else if(i===31){if(i=T(c),i!==null){t.blockedOn=i,it(t.priority,function(){i2(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){t.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yh(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var c=t1(t.nativeEvent);if(c===null){c=t.nativeEvent;var d=new c.constructor(c.type,c);na=d,c.target.dispatchEvent(d),na=null}else return i=qt(c),i!==null&&r2(i),t.blockedOn=c,!1;i.shift()}return!0}function l2(t,i,c){Yh(t)&&c.delete(i)}function vb(){r1=!1,co!==null&&Yh(co)&&(co=null),uo!==null&&Yh(uo)&&(uo=null),ho!==null&&Yh(ho)&&(ho=null),eu.forEach(l2),tu.forEach(l2)}function Wh(t,i){t.blockedOn===i&&(t.blockedOn=null,r1||(r1=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,vb)))}var Kh=null;function c2(t){Kh!==t&&(Kh=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Kh===t&&(Kh=null);for(var i=0;i<t.length;i+=3){var c=t[i],d=t[i+1],E=t[i+2];if(typeof d!="function"){if(n1(d||c)===null)continue;break}var A=qt(c);A!==null&&(t.splice(i,3),i-=3,t0(A,{pending:!0,data:E,method:c.method,action:d},d,E))}}))}function Zl(t){function i(W){return Wh(W,t)}co!==null&&Wh(co,t),uo!==null&&Wh(uo,t),ho!==null&&Wh(ho,t),eu.forEach(i),tu.forEach(i);for(var c=0;c<fo.length;c++){var d=fo[c];d.blockedOn===t&&(d.blockedOn=null)}for(;0<fo.length&&(c=fo[0],c.blockedOn===null);)o2(c),c.blockedOn===null&&fo.shift();if(c=(t.ownerDocument||t).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var E=c[d],A=c[d+1],N=E[vn]||null;if(typeof A=="function")N||c2(c);else if(N){var V=null;if(A&&A.hasAttribute("formAction")){if(E=A,N=A[vn]||null)V=N.formAction;else if(n1(E)!==null)continue}else V=N.action;typeof V=="function"?c[d+1]=V:(c.splice(d,3),d-=3),c2(c)}}}function u2(){function t(A){A.canIntercept&&A.info==="react-transition"&&A.intercept({handler:function(){return new Promise(function(N){return E=N})},focusReset:"manual",scroll:"manual"})}function i(){E!==null&&(E(),E=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var A=navigation.currentEntry;A&&A.url!=null&&navigation.navigate(A.url,{state:A.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,E=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),E!==null&&(E(),E=null)}}}function i1(t){this._internalRoot=t}Qh.prototype.render=i1.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(o(409));var c=i.current,d=ns();t2(c,d,t,i,null,null)},Qh.prototype.unmount=i1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;t2(t.current,2,null,t,null,null),Nh(),i[ee]=null}};function Qh(t){this._internalRoot=t}Qh.prototype.unstable_scheduleHydration=function(t){if(t){var i=Xr();t={blockedOn:null,target:t,priority:i};for(var c=0;c<fo.length&&i!==0&&i<fo[c].priority;c++);fo.splice(c,0,t),c===0&&o2(t)}};var h2=e.version;if(h2!=="19.2.0")throw Error(o(527,h2,"19.2.0"));fe.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=w(i),t=t!==null?C(t):null,t=t===null?null:t.stateNode,t};var Tb={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:re,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zh.isDisabled&&Zh.supportsFiber)try{Zt=Zh.inject(Tb),Me=Zh}catch{}}return iu.createRoot=function(t,i){if(!h(t))throw Error(o(299));var c=!1,d="",E=xp,A=Ep,N=wp;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(E=i.onUncaughtError),i.onCaughtError!==void 0&&(A=i.onCaughtError),i.onRecoverableError!==void 0&&(N=i.onRecoverableError)),i=$y(t,1,!1,null,null,c,d,null,E,A,N,u2),t[ee]=i.current,U0(t),new i1(i)},iu.hydrateRoot=function(t,i,c){if(!h(t))throw Error(o(299));var d=!1,E="",A=xp,N=Ep,V=wp,W=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(E=c.identifierPrefix),c.onUncaughtError!==void 0&&(A=c.onUncaughtError),c.onCaughtError!==void 0&&(N=c.onCaughtError),c.onRecoverableError!==void 0&&(V=c.onRecoverableError),c.formState!==void 0&&(W=c.formState)),i=$y(t,1,!0,i,c??null,d,E,W,A,N,V,u2),i.context=e2(null),c=i.current,d=ns(),d=ur(d),E=Za(d),E.callback=null,Ja(c,E,d),c=d,i.current.lanes=c,St(i,c),Hs(i),t[ee]=i.current,U0(t),new Qh(i)},iu.version="19.2.0",iu}var _2;function Lb(){if(_2)return o1.exports;_2=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),o1.exports=kb(),o1.exports}var Pb=Lb();const Bb=qf(Pb),To=()=>O.jsxs("div",{style:{padding:"1.5rem 0",display:"flex",justifyContent:"center",alignItems:"center"},children:[O.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",border:"3px solid #e5e7eb",borderTopColor:"#2EC483",animation:"spin 1s linear infinite"}}),O.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `})]}),Vb=()=>{};var A2={};const wE=function(s){const e=[];let n=0;for(let o=0;o<s.length;o++){let h=s.charCodeAt(o);h<128?e[n++]=h:h<2048?(e[n++]=h>>6|192,e[n++]=h&63|128):(h&64512)===55296&&o+1<s.length&&(s.charCodeAt(o+1)&64512)===56320?(h=65536+((h&1023)<<10)+(s.charCodeAt(++o)&1023),e[n++]=h>>18|240,e[n++]=h>>12&63|128,e[n++]=h>>6&63|128,e[n++]=h&63|128):(e[n++]=h>>12|224,e[n++]=h>>6&63|128,e[n++]=h&63|128)}return e},Ub=function(s){const e=[];let n=0,o=0;for(;n<s.length;){const h=s[n++];if(h<128)e[o++]=String.fromCharCode(h);else if(h>191&&h<224){const g=s[n++];e[o++]=String.fromCharCode((h&31)<<6|g&63)}else if(h>239&&h<365){const g=s[n++],x=s[n++],T=s[n++],b=((h&7)<<18|(g&63)<<12|(x&63)<<6|T&63)-65536;e[o++]=String.fromCharCode(55296+(b>>10)),e[o++]=String.fromCharCode(56320+(b&1023))}else{const g=s[n++],x=s[n++];e[o++]=String.fromCharCode((h&15)<<12|(g&63)<<6|x&63)}}return e.join("")},_E={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let h=0;h<s.length;h+=3){const g=s[h],x=h+1<s.length,T=x?s[h+1]:0,b=h+2<s.length,w=b?s[h+2]:0,C=g>>2,R=(g&3)<<4|T>>4;let P=(T&15)<<2|w>>6,B=w&63;b||(B=64,x||(P=64)),o.push(n[C],n[R],n[P],n[B])}return o.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(wE(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):Ub(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let h=0;h<s.length;){const g=n[s.charAt(h++)],T=h<s.length?n[s.charAt(h)]:0;++h;const w=h<s.length?n[s.charAt(h)]:64;++h;const R=h<s.length?n[s.charAt(h)]:64;if(++h,g==null||T==null||w==null||R==null)throw new Fb;const P=g<<2|T>>4;if(o.push(P),w!==64){const B=T<<4&240|w>>2;if(o.push(B),R!==64){const $=w<<6&192|R;o.push($)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class Fb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jb=function(s){const e=wE(s);return _E.encodeByteArray(e,!0)},wf=function(s){return jb(s).replace(/\./g,"")},AE=function(s){try{return _E.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function zb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Hb=()=>zb().__FIREBASE_DEFAULTS__,Gb=()=>{if(typeof process>"u"||typeof A2>"u")return;const s=A2.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},qb=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&AE(s[1]);return e&&JSON.parse(e)},Xf=()=>{try{return Vb()||Hb()||Gb()||qb()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},bE=s=>Xf()?.emulatorHosts?.[s],vE=s=>{const e=bE(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),o]:[e.substring(0,n),o]},TE=()=>Xf()?.config,CE=s=>Xf()?.[`_${s}`];class Xb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,o)=>{n?this.reject(n):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,o))}}}function Mo(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function og(s){return(await fetch(s,{credentials:"include"})).ok}function Yb(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},o=e||"demo-project",h=s.iat||0,g=s.sub||s.user_id;if(!g)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const x={iss:`https://securetoken.google.com/${o}`,aud:o,iat:h,exp:h+3600,auth_time:h,sub:g,user_id:g,firebase:{sign_in_provider:"custom",identities:{}},...s};return[wf(JSON.stringify(n)),wf(JSON.stringify(x)),""].join(".")}const mu={};function Wb(){const s={prod:[],emulator:[]};for(const e of Object.keys(mu))mu[e]?s.emulator.push(e):s.prod.push(e);return s}function Kb(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let b2=!1;function lg(s,e){if(typeof window>"u"||typeof document>"u"||!Mo(window.location.host)||mu[s]===e||mu[s]||b2)return;mu[s]=e;function n(P){return`__firebase__banner__${P}`}const o="__firebase__banner",g=Wb().prod.length>0;function x(){const P=document.getElementById(o);P&&P.remove()}function T(P){P.style.display="flex",P.style.background="#7faaf0",P.style.position="fixed",P.style.bottom="5px",P.style.left="5px",P.style.padding=".5em",P.style.borderRadius="5px",P.style.alignItems="center"}function b(P,B){P.setAttribute("width","24"),P.setAttribute("id",B),P.setAttribute("height","24"),P.setAttribute("viewBox","0 0 24 24"),P.setAttribute("fill","none"),P.style.marginLeft="-6px"}function w(){const P=document.createElement("span");return P.style.cursor="pointer",P.style.marginLeft="16px",P.style.fontSize="24px",P.innerHTML=" &times;",P.onclick=()=>{b2=!0,x()},P}function C(P,B){P.setAttribute("id",B),P.innerText="Learn more",P.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",P.setAttribute("target","__blank"),P.style.paddingLeft="5px",P.style.textDecoration="underline"}function R(){const P=Kb(o),B=n("text"),$=document.getElementById(B)||document.createElement("span"),ne=n("learnmore"),se=document.getElementById(ne)||document.createElement("a"),Qe=n("preprendIcon"),Le=document.getElementById(Qe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(P.created){const he=P.element;T(he),C(se,ne);const Ue=w();b(Le,Qe),he.append(Le,$,se,Ue),document.body.appendChild(he)}g?($.innerText="Preview backend disconnected.",Le.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Le.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",R):R()}function Ai(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Qb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ai())}function Zb(){const s=Xf()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Jb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $b(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function ev(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tv(){const s=Ai();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function nv(){return!Zb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rv(){try{return typeof indexedDB=="object"}catch{return!1}}function iv(){return new Promise((s,e)=>{try{let n=!0;const o="validate-browser-context-for-indexeddb-analytics-module",h=self.indexedDB.open(o);h.onsuccess=()=>{h.result.close(),n||self.indexedDB.deleteDatabase(o),s(!0)},h.onupgradeneeded=()=>{n=!1},h.onerror=()=>{e(h.error?.message||"")}}catch(n){e(n)}})}const sv="FirebaseError";class ea extends Error{constructor(e,n,o){super(n),this.code=e,this.customData=o,this.name=sv,Object.setPrototypeOf(this,ea.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Du.prototype.create)}}class Du{constructor(e,n,o){this.service=e,this.serviceName=n,this.errors=o}create(e,...n){const o=n[0]||{},h=`${this.service}/${e}`,g=this.errors[e],x=g?av(g,o):"Error",T=`${this.serviceName}: ${x} (${h}).`;return new ea(h,T,o)}}function av(s,e){return s.replace(ov,(n,o)=>{const h=e[o];return h!=null?String(h):`<${o}?>`})}const ov=/\{\$([^}]+)}/g;function lv(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function ul(s,e){if(s===e)return!0;const n=Object.keys(s),o=Object.keys(e);for(const h of n){if(!o.includes(h))return!1;const g=s[h],x=e[h];if(v2(g)&&v2(x)){if(!ul(g,x))return!1}else if(g!==x)return!1}for(const h of o)if(!n.includes(h))return!1;return!0}function v2(s){return s!==null&&typeof s=="object"}function Mu(s){const e=[];for(const[n,o]of Object.entries(s))Array.isArray(o)?o.forEach(h=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(h))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(o));return e.length?"&"+e.join("&"):""}function lu(s){const e={};return s.replace(/^\?/,"").split("&").forEach(o=>{if(o){const[h,g]=o.split("=");e[decodeURIComponent(h)]=decodeURIComponent(g)}}),e}function cu(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function cv(s,e){const n=new uv(s,e);return n.subscribe.bind(n)}class uv{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(o=>{this.error(o)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,o){let h;if(e===void 0&&n===void 0&&o===void 0)throw new Error("Missing Observer.");hv(e,["next","error","complete"])?h=e:h={next:e,error:n,complete:o},h.next===void 0&&(h.next=h1),h.error===void 0&&(h.error=h1),h.complete===void 0&&(h.complete=h1);const g=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?h.error(this.finalError):h.complete()}catch{}}),this.observers.push(h),g}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(o){typeof console<"u"&&console.error&&console.error(o)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hv(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function h1(){}function er(s){return s&&s._delegate?s._delegate:s}class Co{constructor(e,n,o){this.name=e,this.instanceFactory=n,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const il="[DEFAULT]";class fv{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const o=new Xb;if(this.instancesDeferred.set(n,o),this.isInitialized(n)||this.shouldAutoInitialize())try{const h=this.getOrInitializeService({instanceIdentifier:n});h&&o.resolve(h)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),o=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(h){if(o)return null;throw h}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gv(e))try{this.getOrInitializeService({instanceIdentifier:il})}catch{}for(const[n,o]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(n);try{const g=this.getOrInitializeService({instanceIdentifier:h});o.resolve(g)}catch{}}}}clearInstance(e=il){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=il){return this.instances.has(e)}getOptions(e=il){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const h=this.getOrInitializeService({instanceIdentifier:o,options:n});for(const[g,x]of this.instancesDeferred.entries()){const T=this.normalizeInstanceIdentifier(g);o===T&&x.resolve(h)}return h}onInit(e,n){const o=this.normalizeInstanceIdentifier(n),h=this.onInitCallbacks.get(o)??new Set;h.add(e),this.onInitCallbacks.set(o,h);const g=this.instances.get(o);return g&&e(g,o),()=>{h.delete(e)}}invokeOnInitCallbacks(e,n){const o=this.onInitCallbacks.get(n);if(o)for(const h of o)try{h(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:dv(e),options:n}),this.instances.set(e,o),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=il){return this.component?this.component.multipleInstances?e:il:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dv(s){return s===il?void 0:s}function gv(s){return s.instantiationMode==="EAGER"}class mv{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new fv(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var En;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(En||(En={}));const pv={debug:En.DEBUG,verbose:En.VERBOSE,info:En.INFO,warn:En.WARN,error:En.ERROR,silent:En.SILENT},yv=En.INFO,xv={[En.DEBUG]:"log",[En.VERBOSE]:"log",[En.INFO]:"info",[En.WARN]:"warn",[En.ERROR]:"error"},Ev=(s,e,...n)=>{if(e<s.logLevel)return;const o=new Date().toISOString(),h=xv[e];if(h)console[h](`[${o}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cg{constructor(e){this.name=e,this._logLevel=yv,this._logHandler=Ev,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in En))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,En.DEBUG,...e),this._logHandler(this,En.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,En.VERBOSE,...e),this._logHandler(this,En.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,En.INFO,...e),this._logHandler(this,En.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,En.WARN,...e),this._logHandler(this,En.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,En.ERROR,...e),this._logHandler(this,En.ERROR,...e)}}const wv=(s,e)=>e.some(n=>s instanceof n);let T2,C2;function _v(){return T2||(T2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Av(){return C2||(C2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SE=new WeakMap,R1=new WeakMap,IE=new WeakMap,f1=new WeakMap,ug=new WeakMap;function bv(s){const e=new Promise((n,o)=>{const h=()=>{s.removeEventListener("success",g),s.removeEventListener("error",x)},g=()=>{n(_o(s.result)),h()},x=()=>{o(s.error),h()};s.addEventListener("success",g),s.addEventListener("error",x)});return e.then(n=>{n instanceof IDBCursor&&SE.set(n,s)}).catch(()=>{}),ug.set(e,s),e}function vv(s){if(R1.has(s))return;const e=new Promise((n,o)=>{const h=()=>{s.removeEventListener("complete",g),s.removeEventListener("error",x),s.removeEventListener("abort",x)},g=()=>{n(),h()},x=()=>{o(s.error||new DOMException("AbortError","AbortError")),h()};s.addEventListener("complete",g),s.addEventListener("error",x),s.addEventListener("abort",x)});R1.set(s,e)}let N1={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return R1.get(s);if(e==="objectStoreNames")return s.objectStoreNames||IE.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _o(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function Tv(s){N1=s(N1)}function Cv(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const o=s.call(d1(this),e,...n);return IE.set(o,e.sort?e.sort():[e]),_o(o)}:Av().includes(s)?function(...e){return s.apply(d1(this),e),_o(SE.get(this))}:function(...e){return _o(s.apply(d1(this),e))}}function Sv(s){return typeof s=="function"?Cv(s):(s instanceof IDBTransaction&&vv(s),wv(s,_v())?new Proxy(s,N1):s)}function _o(s){if(s instanceof IDBRequest)return bv(s);if(f1.has(s))return f1.get(s);const e=Sv(s);return e!==s&&(f1.set(s,e),ug.set(e,s)),e}const d1=s=>ug.get(s);function Iv(s,e,{blocked:n,upgrade:o,blocking:h,terminated:g}={}){const x=indexedDB.open(s,e),T=_o(x);return o&&x.addEventListener("upgradeneeded",b=>{o(_o(x.result),b.oldVersion,b.newVersion,_o(x.transaction),b)}),n&&x.addEventListener("blocked",b=>n(b.oldVersion,b.newVersion,b)),T.then(b=>{g&&b.addEventListener("close",()=>g()),h&&b.addEventListener("versionchange",w=>h(w.oldVersion,w.newVersion,w))}).catch(()=>{}),T}const Rv=["get","getKey","getAll","getAllKeys","count"],Nv=["put","add","delete","clear"],g1=new Map;function S2(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(g1.get(e))return g1.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,h=Nv.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(h||Rv.includes(n)))return;const g=async function(x,...T){const b=this.transaction(x,h?"readwrite":"readonly");let w=b.store;return o&&(w=w.index(T.shift())),(await Promise.all([w[n](...T),h&&b.done]))[0]};return g1.set(e,g),g}Tv(s=>({...s,get:(e,n,o)=>S2(e,n)||s.get(e,n,o),has:(e,n)=>!!S2(e,n)||s.has(e,n)}));class Ov{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Dv(n)){const o=n.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(n=>n).join(" ")}}function Dv(s){return s.getComponent()?.type==="VERSION"}const O1="@firebase/app",I2="0.14.6";const Ma=new cg("@firebase/app"),Mv="@firebase/app-compat",kv="@firebase/analytics-compat",Lv="@firebase/analytics",Pv="@firebase/app-check-compat",Bv="@firebase/app-check",Vv="@firebase/auth",Uv="@firebase/auth-compat",Fv="@firebase/database",jv="@firebase/data-connect",zv="@firebase/database-compat",Hv="@firebase/functions",Gv="@firebase/functions-compat",qv="@firebase/installations",Xv="@firebase/installations-compat",Yv="@firebase/messaging",Wv="@firebase/messaging-compat",Kv="@firebase/performance",Qv="@firebase/performance-compat",Zv="@firebase/remote-config",Jv="@firebase/remote-config-compat",$v="@firebase/storage",eT="@firebase/storage-compat",tT="@firebase/firestore",nT="@firebase/ai",rT="@firebase/firestore-compat",iT="firebase",sT="12.6.0";const D1="[DEFAULT]",aT={[O1]:"fire-core",[Mv]:"fire-core-compat",[Lv]:"fire-analytics",[kv]:"fire-analytics-compat",[Bv]:"fire-app-check",[Pv]:"fire-app-check-compat",[Vv]:"fire-auth",[Uv]:"fire-auth-compat",[Fv]:"fire-rtdb",[jv]:"fire-data-connect",[zv]:"fire-rtdb-compat",[Hv]:"fire-fn",[Gv]:"fire-fn-compat",[qv]:"fire-iid",[Xv]:"fire-iid-compat",[Yv]:"fire-fcm",[Wv]:"fire-fcm-compat",[Kv]:"fire-perf",[Qv]:"fire-perf-compat",[Zv]:"fire-rc",[Jv]:"fire-rc-compat",[$v]:"fire-gcs",[eT]:"fire-gcs-compat",[tT]:"fire-fst",[rT]:"fire-fst-compat",[nT]:"fire-vertex","fire-js":"fire-js",[iT]:"fire-js-all"};const _u=new Map,oT=new Map,M1=new Map;function R2(s,e){try{s.container.addComponent(e)}catch(n){Ma.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function hl(s){const e=s.name;if(M1.has(e))return Ma.debug(`There were multiple attempts to register component ${e}.`),!1;M1.set(e,s);for(const n of _u.values())R2(n,s);for(const n of oT.values())R2(n,s);return!0}function Yf(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function ss(s){return s==null?!1:s.settings!==void 0}const lT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ao=new Du("app","Firebase",lT);class cT{constructor(e,n,o){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new Co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ao.create("app-deleted",{appName:this._name})}}const yc=sT;function hg(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const o={name:D1,automaticDataCollectionEnabled:!0,...e},h=o.name;if(typeof h!="string"||!h)throw Ao.create("bad-app-name",{appName:String(h)});if(n||(n=TE()),!n)throw Ao.create("no-options");const g=_u.get(h);if(g){if(ul(n,g.options)&&ul(o,g.config))return g;throw Ao.create("duplicate-app",{appName:h})}const x=new mv(h);for(const b of M1.values())x.addComponent(b);const T=new cT(n,o,x);return _u.set(h,T),T}function Wf(s=D1){const e=_u.get(s);if(!e&&s===D1&&TE())return hg();if(!e)throw Ao.create("no-app",{appName:s});return e}function RE(){return Array.from(_u.values())}function qs(s,e,n){let o=aT[s]??s;n&&(o+=`-${n}`);const h=o.match(/\s|\//),g=e.match(/\s|\//);if(h||g){const x=[`Unable to register library "${o}" with version "${e}":`];h&&x.push(`library name "${o}" contains illegal characters (whitespace or "/")`),h&&g&&x.push("and"),g&&x.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ma.warn(x.join(" "));return}hl(new Co(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}const uT="firebase-heartbeat-database",hT=1,Au="firebase-heartbeat-store";let m1=null;function NE(){return m1||(m1=Iv(uT,hT,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Au)}catch(n){console.warn(n)}}}}).catch(s=>{throw Ao.create("idb-open",{originalErrorMessage:s.message})})),m1}async function fT(s){try{const n=(await NE()).transaction(Au),o=await n.objectStore(Au).get(OE(s));return await n.done,o}catch(e){if(e instanceof ea)Ma.warn(e.message);else{const n=Ao.create("idb-get",{originalErrorMessage:e?.message});Ma.warn(n.message)}}}async function N2(s,e){try{const o=(await NE()).transaction(Au,"readwrite");await o.objectStore(Au).put(e,OE(s)),await o.done}catch(n){if(n instanceof ea)Ma.warn(n.message);else{const o=Ao.create("idb-set",{originalErrorMessage:n?.message});Ma.warn(o.message)}}}function OE(s){return`${s.name}!${s.options.appId}`}const dT=1024,gT=30;class mT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new yT(n),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=O2();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(h=>h.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:n}),this._heartbeatsCache.heartbeats.length>gT){const h=xT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ma.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=O2(),{heartbeatsToSend:n,unsentEntries:o}=pT(this._heartbeatsCache.heartbeats),h=wf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),h}catch(e){return Ma.warn(e),""}}}function O2(){return new Date().toISOString().substring(0,10)}function pT(s,e=dT){const n=[];let o=s.slice();for(const h of s){const g=n.find(x=>x.agent===h.agent);if(g){if(g.dates.push(h.date),D2(n)>e){g.dates.pop();break}}else if(n.push({agent:h.agent,dates:[h.date]}),D2(n)>e){n.pop();break}o=o.slice(1)}return{heartbeatsToSend:n,unsentEntries:o}}class yT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rv()?iv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fT(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return N2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return N2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function D2(s){return wf(JSON.stringify({version:2,heartbeats:s})).length}function xT(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let o=1;o<s.length;o++)s[o].date<n&&(n=s[o].date,e=o);return e}function ET(s){hl(new Co("platform-logger",e=>new Ov(e),"PRIVATE")),hl(new Co("heartbeat",e=>new mT(e),"PRIVATE")),qs(O1,I2,s),qs(O1,I2,"esm2020"),qs("fire-js","")}ET("");var wT="firebase",_T="12.6.0";qs(wT,_T,"app");function DE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AT=DE,ME=new Du("auth","Firebase",DE());const _f=new cg("@firebase/auth");function bT(s,...e){_f.logLevel<=En.WARN&&_f.warn(`Auth (${yc}): ${s}`,...e)}function of(s,...e){_f.logLevel<=En.ERROR&&_f.error(`Auth (${yc}): ${s}`,...e)}function Ds(s,...e){throw fg(s,...e)}function Xs(s,...e){return fg(s,...e)}function kE(s,e,n){const o={...AT(),[e]:n};return new Du("auth","Firebase",o).create(e,{appName:s.name})}function Oa(s){return kE(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fg(s,...e){if(typeof s!="string"){const n=e[0],o=[...e.slice(1)];return o[0]&&(o[0].appName=s.name),s._errorFactory.create(n,...o)}return ME.create(s,...e)}function Ut(s,e,...n){if(!s)throw fg(e,...n)}function Ra(s){const e="INTERNAL ASSERTION FAILED: "+s;throw of(e),new Error(e)}function ka(s,e){s||Ra(e)}function k1(){return typeof self<"u"&&self.location?.href||""}function vT(){return M2()==="http:"||M2()==="https:"}function M2(){return typeof self<"u"&&self.location?.protocol||null}function TT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vT()||$b()||"connection"in navigator)?navigator.onLine:!0}function CT(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class ku{constructor(e,n){this.shortDelay=e,this.longDelay=n,ka(n>e,"Short delay should be less than long delay!"),this.isMobile=Qb()||ev()}get(){return TT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function dg(s,e){ka(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class LE{static initialize(e,n,o){this.fetchImpl=e,n&&(this.headersImpl=n),o&&(this.responseImpl=o)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ra("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ra("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ra("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ST={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const IT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],RT=new ku(3e4,6e4);function Ba(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function ta(s,e,n,o,h={}){return PE(s,h,async()=>{let g={},x={};o&&(e==="GET"?x=o:g={body:JSON.stringify(o)});const T=Mu({key:s.config.apiKey,...x}).slice(1),b=await s._getAdditionalHeaders();b["Content-Type"]="application/json",s.languageCode&&(b["X-Firebase-Locale"]=s.languageCode);const w={method:e,headers:b,...g};return Jb()||(w.referrerPolicy="no-referrer"),s.emulatorConfig&&Mo(s.emulatorConfig.host)&&(w.credentials="include"),LE.fetch()(await BE(s,s.config.apiHost,n,T),w)})}async function PE(s,e,n){s._canInitEmulator=!1;const o={...ST,...e};try{const h=new OT(s),g=await Promise.race([n(),h.promise]);h.clearNetworkTimeout();const x=await g.json();if("needConfirmation"in x)throw $h(s,"account-exists-with-different-credential",x);if(g.ok&&!("errorMessage"in x))return x;{const T=g.ok?x.errorMessage:x.error.message,[b,w]=T.split(" : ");if(b==="FEDERATED_USER_ID_ALREADY_LINKED")throw $h(s,"credential-already-in-use",x);if(b==="EMAIL_EXISTS")throw $h(s,"email-already-in-use",x);if(b==="USER_DISABLED")throw $h(s,"user-disabled",x);const C=o[b]||b.toLowerCase().replace(/[_\s]+/g,"-");if(w)throw kE(s,C,w);Ds(s,C)}}catch(h){if(h instanceof ea)throw h;Ds(s,"network-request-failed",{message:String(h)})}}async function Lu(s,e,n,o,h={}){const g=await ta(s,e,n,o,h);return"mfaPendingCredential"in g&&Ds(s,"multi-factor-auth-required",{_serverResponse:g}),g}async function BE(s,e,n,o){const h=`${e}${n}?${o}`,g=s,x=g.config.emulator?dg(s.config,h):`${s.config.apiScheme}://${h}`;return IT.includes(n)&&(await g._persistenceManagerAvailable,g._getPersistenceType()==="COOKIE")?g._getPersistence()._getFinalTarget(x).toString():x}function NT(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class OT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,o)=>{this.timer=setTimeout(()=>o(Xs(this.auth,"network-request-failed")),RT.get())})}}function $h(s,e,n){const o={appName:s.name};n.email&&(o.email=n.email),n.phoneNumber&&(o.phoneNumber=n.phoneNumber);const h=Xs(s,e,o);return h.customData._tokenResponse=n,h}function k2(s){return s!==void 0&&s.enterprise!==void 0}class DT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return NT(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function MT(s,e){return ta(s,"GET","/v2/recaptchaConfig",Ba(s,e))}async function kT(s,e){return ta(s,"POST","/v1/accounts:delete",e)}async function Af(s,e){return ta(s,"POST","/v1/accounts:lookup",e)}function pu(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LT(s,e=!1){const n=er(s),o=await n.getIdToken(e),h=gg(o);Ut(h&&h.exp&&h.auth_time&&h.iat,n.auth,"internal-error");const g=typeof h.firebase=="object"?h.firebase:void 0,x=g?.sign_in_provider;return{claims:h,token:o,authTime:pu(p1(h.auth_time)),issuedAtTime:pu(p1(h.iat)),expirationTime:pu(p1(h.exp)),signInProvider:x||null,signInSecondFactor:g?.sign_in_second_factor||null}}function p1(s){return Number(s)*1e3}function gg(s){const[e,n,o]=s.split(".");if(e===void 0||n===void 0||o===void 0)return of("JWT malformed, contained fewer than 3 sections"),null;try{const h=AE(n);return h?JSON.parse(h):(of("Failed to decode base64 JWT payload"),null)}catch(h){return of("Caught error parsing JWT payload as JSON",h?.toString()),null}}function L2(s){const e=gg(s);return Ut(e,"internal-error"),Ut(typeof e.exp<"u","internal-error"),Ut(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function cc(s,e,n=!1){if(n)return e;try{return await e}catch(o){throw o instanceof ea&&PT(o)&&s.auth.currentUser===s&&await s.auth.signOut(),o}}function PT({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class BT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const o=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class L1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=pu(this.lastLoginAt),this.creationTime=pu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function bf(s){const e=s.auth,n=await s.getIdToken(),o=await cc(s,Af(e,{idToken:n}));Ut(o?.users.length,e,"internal-error");const h=o.users[0];s._notifyReloadListener(h);const g=h.providerUserInfo?.length?VE(h.providerUserInfo):[],x=UT(s.providerData,g),T=s.isAnonymous,b=!(s.email&&h.passwordHash)&&!x?.length,w=T?b:!1,C={uid:h.localId,displayName:h.displayName||null,photoURL:h.photoUrl||null,email:h.email||null,emailVerified:h.emailVerified||!1,phoneNumber:h.phoneNumber||null,tenantId:h.tenantId||null,providerData:x,metadata:new L1(h.createdAt,h.lastLoginAt),isAnonymous:w};Object.assign(s,C)}async function VT(s){const e=er(s);await bf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function UT(s,e){return[...s.filter(o=>!e.some(h=>h.providerId===o.providerId)),...e]}function VE(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function FT(s,e){const n=await PE(s,{},async()=>{const o=Mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:h,apiKey:g}=s.config,x=await BE(s,h,"/v1/token",`key=${g}`),T=await s._getAdditionalHeaders();T["Content-Type"]="application/x-www-form-urlencoded";const b={method:"POST",headers:T,body:o};return s.emulatorConfig&&Mo(s.emulatorConfig.host)&&(b.credentials="include"),LE.fetch()(x,b)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function jT(s,e){return ta(s,"POST","/v2/accounts:revokeToken",Ba(s,e))}class sc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ut(e.idToken,"internal-error"),Ut(typeof e.idToken<"u","internal-error"),Ut(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):L2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ut(e.length!==0,"internal-error");const n=L2(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ut(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:o,refreshToken:h,expiresIn:g}=await FT(e,n);this.updateTokensAndExpiration(o,h,Number(g))}updateTokensAndExpiration(e,n,o){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+o*1e3}static fromJSON(e,n){const{refreshToken:o,accessToken:h,expirationTime:g}=n,x=new sc;return o&&(Ut(typeof o=="string","internal-error",{appName:e}),x.refreshToken=o),h&&(Ut(typeof h=="string","internal-error",{appName:e}),x.accessToken=h),g&&(Ut(typeof g=="number","internal-error",{appName:e}),x.expirationTime=g),x}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new sc,this.toJSON())}_performRefresh(){return Ra("not implemented")}}function mo(s,e){Ut(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Os{constructor({uid:e,auth:n,stsTokenManager:o,...h}){this.providerId="firebase",this.proactiveRefresh=new BT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=h.displayName||null,this.email=h.email||null,this.emailVerified=h.emailVerified||!1,this.phoneNumber=h.phoneNumber||null,this.photoURL=h.photoURL||null,this.isAnonymous=h.isAnonymous||!1,this.tenantId=h.tenantId||null,this.providerData=h.providerData?[...h.providerData]:[],this.metadata=new L1(h.createdAt||void 0,h.lastLoginAt||void 0)}async getIdToken(e){const n=await cc(this,this.stsTokenManager.getToken(this.auth,e));return Ut(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return LT(this,e)}reload(){return VT(this)}_assign(e){this!==e&&(Ut(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Os({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ut(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let o=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),o=!0),n&&await bf(this),await this.auth._persistUserIfCurrent(this),o&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ss(this.auth.app))return Promise.reject(Oa(this.auth));const e=await this.getIdToken();return await cc(this,kT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const o=n.displayName??void 0,h=n.email??void 0,g=n.phoneNumber??void 0,x=n.photoURL??void 0,T=n.tenantId??void 0,b=n._redirectEventId??void 0,w=n.createdAt??void 0,C=n.lastLoginAt??void 0,{uid:R,emailVerified:P,isAnonymous:B,providerData:$,stsTokenManager:ne}=n;Ut(R&&ne,e,"internal-error");const se=sc.fromJSON(this.name,ne);Ut(typeof R=="string",e,"internal-error"),mo(o,e.name),mo(h,e.name),Ut(typeof P=="boolean",e,"internal-error"),Ut(typeof B=="boolean",e,"internal-error"),mo(g,e.name),mo(x,e.name),mo(T,e.name),mo(b,e.name),mo(w,e.name),mo(C,e.name);const Qe=new Os({uid:R,auth:e,email:h,emailVerified:P,displayName:o,isAnonymous:B,photoURL:x,phoneNumber:g,tenantId:T,stsTokenManager:se,createdAt:w,lastLoginAt:C});return $&&Array.isArray($)&&(Qe.providerData=$.map(Le=>({...Le}))),b&&(Qe._redirectEventId=b),Qe}static async _fromIdTokenResponse(e,n,o=!1){const h=new sc;h.updateFromServerResponse(n);const g=new Os({uid:n.localId,auth:e,stsTokenManager:h,isAnonymous:o});return await bf(g),g}static async _fromGetAccountInfoResponse(e,n,o){const h=n.users[0];Ut(h.localId!==void 0,"internal-error");const g=h.providerUserInfo!==void 0?VE(h.providerUserInfo):[],x=!(h.email&&h.passwordHash)&&!g?.length,T=new sc;T.updateFromIdToken(o);const b=new Os({uid:h.localId,auth:e,stsTokenManager:T,isAnonymous:x}),w={uid:h.localId,displayName:h.displayName||null,photoURL:h.photoUrl||null,email:h.email||null,emailVerified:h.emailVerified||!1,phoneNumber:h.phoneNumber||null,tenantId:h.tenantId||null,providerData:g,metadata:new L1(h.createdAt,h.lastLoginAt),isAnonymous:!(h.email&&h.passwordHash)&&!g?.length};return Object.assign(b,w),b}}const P2=new Map;function Na(s){ka(s instanceof Function,"Expected a class definition");let e=P2.get(s);return e?(ka(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,P2.set(s,e),e)}class UE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}UE.type="NONE";const B2=UE;function lf(s,e,n){return`firebase:${s}:${e}:${n}`}class ac{constructor(e,n,o){this.persistence=e,this.auth=n,this.userKey=o;const{config:h,name:g}=this.auth;this.fullUserKey=lf(this.userKey,h.apiKey,g),this.fullPersistenceKey=lf("persistence",h.apiKey,g),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Af(this.auth,{idToken:e}).catch(()=>{});return n?Os._fromGetAccountInfoResponse(this.auth,n,e):null}return Os._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,o="authUser"){if(!n.length)return new ac(Na(B2),e,o);const h=(await Promise.all(n.map(async w=>{if(await w._isAvailable())return w}))).filter(w=>w);let g=h[0]||Na(B2);const x=lf(o,e.config.apiKey,e.name);let T=null;for(const w of n)try{const C=await w._get(x);if(C){let R;if(typeof C=="string"){const P=await Af(e,{idToken:C}).catch(()=>{});if(!P)break;R=await Os._fromGetAccountInfoResponse(e,P,C)}else R=Os._fromJSON(e,C);w!==g&&(T=R),g=w;break}}catch{}const b=h.filter(w=>w._shouldAllowMigration);return!g._shouldAllowMigration||!b.length?new ac(g,e,o):(g=b[0],T&&await g._set(x,T.toJSON()),await Promise.all(n.map(async w=>{if(w!==g)try{await w._remove(x)}catch{}})),new ac(g,e,o))}}function V2(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qE(e))return"Blackberry";if(XE(e))return"Webos";if(jE(e))return"Safari";if((e.includes("chrome/")||zE(e))&&!e.includes("edge/"))return"Chrome";if(GE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,o=s.match(n);if(o?.length===2)return o[1]}return"Other"}function FE(s=Ai()){return/firefox\//i.test(s)}function jE(s=Ai()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zE(s=Ai()){return/crios\//i.test(s)}function HE(s=Ai()){return/iemobile/i.test(s)}function GE(s=Ai()){return/android/i.test(s)}function qE(s=Ai()){return/blackberry/i.test(s)}function XE(s=Ai()){return/webos/i.test(s)}function mg(s=Ai()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function zT(s=Ai()){return mg(s)&&!!window.navigator?.standalone}function HT(){return tv()&&document.documentMode===10}function YE(s=Ai()){return mg(s)||GE(s)||XE(s)||qE(s)||/windows phone/i.test(s)||HE(s)}function WE(s,e=[]){let n;switch(s){case"Browser":n=V2(Ai());break;case"Worker":n=`${V2(Ai())}-${s}`;break;default:n=s}const o=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${yc}/${o}`}class GT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const o=g=>new Promise((x,T)=>{try{const b=e(g);x(b)}catch(b){T(b)}});o.onAbort=n,this.queue.push(o);const h=this.queue.length-1;return()=>{this.queue[h]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const o of this.queue)await o(e),o.onAbort&&n.push(o.onAbort)}catch(o){n.reverse();for(const h of n)try{h()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:o?.message})}}}async function qT(s,e={}){return ta(s,"GET","/v2/passwordPolicy",Ba(s,e))}const XT=6;class YT{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??XT,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const o=this.customStrengthOptions.minPasswordLength,h=this.customStrengthOptions.maxPasswordLength;o&&(n.meetsMinPasswordLength=e.length>=o),h&&(n.meetsMaxPasswordLength=e.length<=h)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let o;for(let h=0;h<e.length;h++)o=e.charAt(h),this.updatePasswordCharacterOptionsStatuses(n,o>="a"&&o<="z",o>="A"&&o<="Z",o>="0"&&o<="9",this.allowedNonAlphanumericCharacters.includes(o))}updatePasswordCharacterOptionsStatuses(e,n,o,h,g){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=o)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=h)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=g))}}class WT{constructor(e,n,o,h){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=o,this.config=h,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new U2(this),this.idTokenSubscription=new U2(this),this.beforeStateQueue=new GT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ME,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=h.sdkClientVersion,this._persistenceManagerAvailable=new Promise(g=>this._resolvePersistenceManagerAvailable=g)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Na(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ac.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Af(this,{idToken:e}),o=await Os._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(o)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ss(this.app)){const g=this.app.settings.authIdToken;return g?new Promise(x=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(g).then(x,x))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let o=n,h=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const g=this.redirectUser?._redirectEventId,x=o?._redirectEventId,T=await this.tryRedirectSignIn(e);(!g||g===x)&&T?.user&&(o=T.user,h=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(h)try{await this.beforeStateQueue.runMiddleware(o)}catch(g){o=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(g))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ut(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await bf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=CT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ss(this.app))return Promise.reject(Oa(this));const n=e?er(e):null;return n&&Ut(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ut(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ss(this.app)?Promise.reject(Oa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ss(this.app)?Promise.reject(Oa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Na(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qT(this),n=new YT(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Du("auth","Firebase",e())}onAuthStateChanged(e,n,o){return this.registerStateListener(this.authStateSubscription,e,n,o)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,o){return this.registerStateListener(this.idTokenSubscription,e,n,o)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const o=this.onAuthStateChanged(()=>{o(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),o={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(o.tenantId=this.tenantId),await jT(this,o)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const o=await this.getOrInitRedirectPersistenceManager(n);return e===null?o.removeCurrentUser():o.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Na(e)||this._popupRedirectResolver;Ut(n,this,"argument-error"),this.redirectPersistenceManager=await ac.create(this,[Na(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,o,h){if(this._deleted)return()=>{};const g=typeof n=="function"?n:n.next.bind(n);let x=!1;const T=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ut(T,this,"internal-error"),T.then(()=>{x||g(this.currentUser)}),typeof n=="function"){const b=e.addObserver(n,o,h);return()=>{x=!0,b()}}else{const b=e.addObserver(n);return()=>{x=!0,b()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ut(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const o=await this._getAppCheckToken();return o&&(e["X-Firebase-AppCheck"]=o),e}async _getAppCheckToken(){if(ss(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&bT(`Error while retrieving App Check token: ${e.error}`),e?.token}}function El(s){return er(s)}class U2{constructor(e){this.auth=e,this.observer=null,this.addObserver=cv(n=>this.observer=n)}get next(){return Ut(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Kf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KT(s){Kf=s}function KE(s){return Kf.loadJS(s)}function QT(){return Kf.recaptchaEnterpriseScript}function ZT(){return Kf.gapiScript}function JT(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class $T{constructor(){this.enterprise=new eC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class eC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const tC="recaptcha-enterprise",QE="NO_RECAPTCHA";class nC{constructor(e){this.type=tC,this.auth=El(e)}async verify(e="verify",n=!1){async function o(g){if(!n){if(g.tenantId==null&&g._agentRecaptchaConfig!=null)return g._agentRecaptchaConfig.siteKey;if(g.tenantId!=null&&g._tenantRecaptchaConfigs[g.tenantId]!==void 0)return g._tenantRecaptchaConfigs[g.tenantId].siteKey}return new Promise(async(x,T)=>{MT(g,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(b=>{if(b.recaptchaKey===void 0)T(new Error("recaptcha Enterprise site key undefined"));else{const w=new DT(b);return g.tenantId==null?g._agentRecaptchaConfig=w:g._tenantRecaptchaConfigs[g.tenantId]=w,x(w.siteKey)}}).catch(b=>{T(b)})})}function h(g,x,T){const b=window.grecaptcha;k2(b)?b.enterprise.ready(()=>{b.enterprise.execute(g,{action:e}).then(w=>{x(w)}).catch(()=>{x(QE)})}):T(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new $T().execute("siteKey",{action:"verify"}):new Promise((g,x)=>{o(this.auth).then(T=>{if(!n&&k2(window.grecaptcha))h(T,g,x);else{if(typeof window>"u"){x(new Error("RecaptchaVerifier is only supported in browser"));return}let b=QT();b.length!==0&&(b+=T),KE(b).then(()=>{h(T,g,x)}).catch(w=>{x(w)})}}).catch(T=>{x(T)})})}}async function F2(s,e,n,o=!1,h=!1){const g=new nC(s);let x;if(h)x=QE;else try{x=await g.verify(n)}catch{x=await g.verify(n,!0)}const T={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in T){const b=T.phoneEnrollmentInfo.phoneNumber,w=T.phoneEnrollmentInfo.recaptchaToken;Object.assign(T,{phoneEnrollmentInfo:{phoneNumber:b,recaptchaToken:w,captchaResponse:x,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in T){const b=T.phoneSignInInfo.recaptchaToken;Object.assign(T,{phoneSignInInfo:{recaptchaToken:b,captchaResponse:x,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return T}return o?Object.assign(T,{captchaResp:x}):Object.assign(T,{captchaResponse:x}),Object.assign(T,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(T,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),T}async function P1(s,e,n,o,h){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const g=await F2(s,e,n,n==="getOobCode");return o(s,g)}else return o(s,e).catch(async g=>{if(g.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const x=await F2(s,e,n,n==="getOobCode");return o(s,x)}else return Promise.reject(g)})}function rC(s,e){const n=Yf(s,"auth");if(n.isInitialized()){const h=n.getImmediate(),g=n.getOptions();if(ul(g,e??{}))return h;Ds(h,"already-initialized")}return n.initialize({options:e})}function iC(s,e){const n=e?.persistence||[],o=(Array.isArray(n)?n:[n]).map(Na);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(o,e?.popupRedirectResolver)}function sC(s,e,n){const o=El(s);Ut(/^https?:\/\//.test(e),o,"invalid-emulator-scheme");const h=!1,g=ZE(e),{host:x,port:T}=aC(e),b=T===null?"":`:${T}`,w={url:`${g}//${x}${b}/`},C=Object.freeze({host:x,port:T,protocol:g.replace(":",""),options:Object.freeze({disableWarnings:h})});if(!o._canInitEmulator){Ut(o.config.emulator&&o.emulatorConfig,o,"emulator-config-failed"),Ut(ul(w,o.config.emulator)&&ul(C,o.emulatorConfig),o,"emulator-config-failed");return}o.config.emulator=w,o.emulatorConfig=C,o.settings.appVerificationDisabledForTesting=!0,Mo(x)?(og(`${g}//${x}${b}`),lg("Auth",!0)):oC()}function ZE(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function aC(s){const e=ZE(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const o=n[2].split("@").pop()||"",h=/^(\[[^\]]+\])(:|$)/.exec(o);if(h){const g=h[1];return{host:g,port:j2(o.substr(g.length+1))}}else{const[g,x]=o.split(":");return{host:g,port:j2(x)}}}function j2(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function oC(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class pg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ra("not implemented")}_getIdTokenResponse(e){return Ra("not implemented")}_linkToIdToken(e,n){return Ra("not implemented")}_getReauthenticationResolver(e){return Ra("not implemented")}}async function lC(s,e){return ta(s,"POST","/v1/accounts:update",e)}async function cC(s,e){return ta(s,"POST","/v1/accounts:signUp",e)}async function uC(s,e){return Lu(s,"POST","/v1/accounts:signInWithPassword",Ba(s,e))}async function hC(s,e){return ta(s,"POST","/v1/accounts:sendOobCode",Ba(s,e))}async function fC(s,e){return hC(s,e)}async function dC(s,e){return Lu(s,"POST","/v1/accounts:signInWithEmailLink",Ba(s,e))}async function gC(s,e){return Lu(s,"POST","/v1/accounts:signInWithEmailLink",Ba(s,e))}class bu extends pg{constructor(e,n,o,h=null){super("password",o),this._email=e,this._password=n,this._tenantId=h}static _fromEmailAndPassword(e,n){return new bu(e,n,"password")}static _fromEmailAndCode(e,n,o=null){return new bu(e,n,"emailLink",o)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return P1(e,n,"signInWithPassword",uC);case"emailLink":return dC(e,{email:this._email,oobCode:this._password});default:Ds(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const o={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return P1(e,o,"signUpPassword",cC);case"emailLink":return gC(e,{idToken:n,email:this._email,oobCode:this._password});default:Ds(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function oc(s,e){return Lu(s,"POST","/v1/accounts:signInWithIdp",Ba(s,e))}const mC="http://localhost";class fl extends pg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ds("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:o,signInMethod:h,...g}=n;if(!o||!h)return null;const x=new fl(o,h);return x.idToken=g.idToken||void 0,x.accessToken=g.accessToken||void 0,x.secret=g.secret,x.nonce=g.nonce,x.pendingToken=g.pendingToken||null,x}_getIdTokenResponse(e){const n=this.buildRequest();return oc(e,n)}_linkToIdToken(e,n){const o=this.buildRequest();return o.idToken=n,oc(e,o)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,oc(e,n)}buildRequest(){const e={requestUri:mC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Mu(n)}return e}}function pC(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function yC(s){const e=lu(cu(s)).link,n=e?lu(cu(e)).deep_link_id:null,o=lu(cu(s)).deep_link_id;return(o?lu(cu(o)).link:null)||o||n||e||s}class yg{constructor(e){const n=lu(cu(e)),o=n.apiKey??null,h=n.oobCode??null,g=pC(n.mode??null);Ut(o&&h&&g,"argument-error"),this.apiKey=o,this.operation=g,this.code=h,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=yC(e);try{return new yg(n)}catch{return null}}}class wl{constructor(){this.providerId=wl.PROVIDER_ID}static credential(e,n){return bu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const o=yg.parseLink(n);return Ut(o,"argument-error"),bu._fromEmailAndCode(e,o.code,o.tenantId)}}wl.PROVIDER_ID="password";wl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class JE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Pu extends JE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class po extends Pu{constructor(){super("facebook.com")}static credential(e){return fl._fromParams({providerId:po.PROVIDER_ID,signInMethod:po.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return po.credentialFromTaggedObject(e)}static credentialFromError(e){return po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return po.credential(e.oauthAccessToken)}catch{return null}}}po.FACEBOOK_SIGN_IN_METHOD="facebook.com";po.PROVIDER_ID="facebook.com";class yo extends Pu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fl._fromParams({providerId:yo.PROVIDER_ID,signInMethod:yo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return yo.credentialFromTaggedObject(e)}static credentialFromError(e){return yo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:o}=e;if(!n&&!o)return null;try{return yo.credential(n,o)}catch{return null}}}yo.GOOGLE_SIGN_IN_METHOD="google.com";yo.PROVIDER_ID="google.com";class xo extends Pu{constructor(){super("github.com")}static credential(e){return fl._fromParams({providerId:xo.PROVIDER_ID,signInMethod:xo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xo.credentialFromTaggedObject(e)}static credentialFromError(e){return xo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xo.credential(e.oauthAccessToken)}catch{return null}}}xo.GITHUB_SIGN_IN_METHOD="github.com";xo.PROVIDER_ID="github.com";class Eo extends Pu{constructor(){super("twitter.com")}static credential(e,n){return fl._fromParams({providerId:Eo.PROVIDER_ID,signInMethod:Eo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Eo.credentialFromTaggedObject(e)}static credentialFromError(e){return Eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:o}=e;if(!n||!o)return null;try{return Eo.credential(n,o)}catch{return null}}}Eo.TWITTER_SIGN_IN_METHOD="twitter.com";Eo.PROVIDER_ID="twitter.com";async function xC(s,e){return Lu(s,"POST","/v1/accounts:signUp",Ba(s,e))}class dl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,o,h=!1){const g=await Os._fromIdTokenResponse(e,o,h),x=z2(o);return new dl({user:g,providerId:x,_tokenResponse:o,operationType:n})}static async _forOperation(e,n,o){await e._updateTokensIfNecessary(o,!0);const h=z2(o);return new dl({user:e,providerId:h,_tokenResponse:o,operationType:n})}}function z2(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class vf extends ea{constructor(e,n,o,h){super(n.code,n.message),this.operationType=o,this.user=h,Object.setPrototypeOf(this,vf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:o}}static _fromErrorAndOperation(e,n,o,h){return new vf(e,n,o,h)}}function $E(s,e,n,o){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(g=>{throw g.code==="auth/multi-factor-auth-required"?vf._fromErrorAndOperation(s,g,e,o):g})}async function EC(s,e,n=!1){const o=await cc(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return dl._forOperation(s,"link",o)}async function ew(s,e,n=!1){const{auth:o}=s;if(ss(o.app))return Promise.reject(Oa(o));const h="reauthenticate";try{const g=await cc(s,$E(o,h,e,s),n);Ut(g.idToken,o,"internal-error");const x=gg(g.idToken);Ut(x,o,"internal-error");const{sub:T}=x;return Ut(s.uid===T,o,"user-mismatch"),dl._forOperation(s,h,g)}catch(g){throw g?.code==="auth/user-not-found"&&Ds(o,"user-mismatch"),g}}async function tw(s,e,n=!1){if(ss(s.app))return Promise.reject(Oa(s));const o="signIn",h=await $E(s,o,e),g=await dl._fromIdTokenResponse(s,o,h);return n||await s._updateCurrentUser(g.user),g}async function wC(s,e){return tw(El(s),e)}async function _C(s,e){return ew(er(s),e)}async function nw(s){const e=El(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function cf(s,e,n){if(ss(s.app))return Promise.reject(Oa(s));const o=El(s),x=await P1(o,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xC).catch(b=>{throw b.code==="auth/password-does-not-meet-requirements"&&nw(s),b}),T=await dl._fromIdTokenResponse(o,"signIn",x);return await o._updateCurrentUser(T.user),T}function AC(s,e,n){return ss(s.app)?Promise.reject(Oa(s)):wC(er(s),wl.credential(e,n)).catch(async o=>{throw o.code==="auth/password-does-not-meet-requirements"&&nw(s),o})}async function H2(s,e,n){const o=er(s),g={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await s.getIdToken(),newEmail:e},{email:x}=await fC(o.auth,g);x!==s.email&&await s.reload()}function bC(s,e){return vC(er(s),null,e)}async function vC(s,e,n){const{auth:o}=s,g={idToken:await s.getIdToken(),returnSecureToken:!0};n&&(g.password=n);const x=await cc(s,lC(o,g));await s._updateTokensIfNecessary(x,!0)}function TC(s,e,n,o){return er(s).onIdTokenChanged(e,n,o)}function CC(s,e,n){return er(s).beforeAuthStateChanged(e,n)}function SC(s,e,n,o){return er(s).onAuthStateChanged(e,n,o)}function IC(s){return er(s).signOut()}const Tf="__sak";class rw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Tf,"1"),this.storage.removeItem(Tf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const RC=1e3,NC=10;class iw extends rw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const o=this.storage.getItem(n),h=this.localCache[n];o!==h&&e(n,h,o)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((x,T,b)=>{this.notifyListeners(x,b)});return}const o=e.key;n?this.detachListener():this.stopPolling();const h=()=>{const x=this.storage.getItem(o);!n&&this.localCache[o]===x||this.notifyListeners(o,x)},g=this.storage.getItem(o);HT()&&g!==e.newValue&&e.newValue!==e.oldValue?setTimeout(h,NC):h()}notifyListeners(e,n){this.localCache[e]=n;const o=this.listeners[e];if(o)for(const h of Array.from(o))h(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,o)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:o}),!0)})},RC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}iw.type="LOCAL";const OC=iw;class sw extends rw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}sw.type="SESSION";const aw=sw;function DC(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Qf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(h=>h.isListeningto(e));if(n)return n;const o=new Qf(e);return this.receivers.push(o),o}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:o,eventType:h,data:g}=n.data,x=this.handlersMap[h];if(!x?.size)return;n.ports[0].postMessage({status:"ack",eventId:o,eventType:h});const T=Array.from(x).map(async w=>w(n.origin,g)),b=await DC(T);n.ports[0].postMessage({status:"done",eventId:o,eventType:h,response:b})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qf.receivers=[];function xg(s="",e=10){let n="";for(let o=0;o<e;o++)n+=Math.floor(Math.random()*10);return s+n}class MC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,o=50){const h=typeof MessageChannel<"u"?new MessageChannel:null;if(!h)throw new Error("connection_unavailable");let g,x;return new Promise((T,b)=>{const w=xg("",20);h.port1.start();const C=setTimeout(()=>{b(new Error("unsupported_event"))},o);x={messageChannel:h,onMessage(R){const P=R;if(P.data.eventId===w)switch(P.data.status){case"ack":clearTimeout(C),g=setTimeout(()=>{b(new Error("timeout"))},3e3);break;case"done":clearTimeout(g),T(P.data.response);break;default:clearTimeout(C),clearTimeout(g),b(new Error("invalid_response"));break}}},this.handlers.add(x),h.port1.addEventListener("message",x.onMessage),this.target.postMessage({eventType:e,eventId:w,data:n},[h.port2])}).finally(()=>{x&&this.removeMessageHandler(x)})}}function Ys(){return window}function kC(s){Ys().location.href=s}function ow(){return typeof Ys().WorkerGlobalScope<"u"&&typeof Ys().importScripts=="function"}async function LC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function PC(){return navigator?.serviceWorker?.controller||null}function BC(){return ow()?self:null}const lw="firebaseLocalStorageDb",VC=1,Cf="firebaseLocalStorage",cw="fbase_key";class Bu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Zf(s,e){return s.transaction([Cf],e?"readwrite":"readonly").objectStore(Cf)}function UC(){const s=indexedDB.deleteDatabase(lw);return new Bu(s).toPromise()}function B1(){const s=indexedDB.open(lw,VC);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const o=s.result;try{o.createObjectStore(Cf,{keyPath:cw})}catch(h){n(h)}}),s.addEventListener("success",async()=>{const o=s.result;o.objectStoreNames.contains(Cf)?e(o):(o.close(),await UC(),e(await B1()))})})}async function G2(s,e,n){const o=Zf(s,!0).put({[cw]:e,value:n});return new Bu(o).toPromise()}async function FC(s,e){const n=Zf(s,!1).get(e),o=await new Bu(n).toPromise();return o===void 0?null:o.value}function q2(s,e){const n=Zf(s,!0).delete(e);return new Bu(n).toPromise()}const jC=800,zC=3;class uw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await B1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const o=await this._openDb();return await e(o)}catch(o){if(n++>zC)throw o;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ow()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qf._getInstance(BC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await LC(),!this.activeServiceWorker)return;this.sender=new MC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||PC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await B1();return await G2(e,Tf,"1"),await q2(e,Tf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(o=>G2(o,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(o=>FC(o,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>q2(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(h=>{const g=Zf(h,!1).getAll();return new Bu(g).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],o=new Set;if(e.length!==0)for(const{fbase_key:h,value:g}of e)o.add(h),JSON.stringify(this.localCache[h])!==JSON.stringify(g)&&(this.notifyListeners(h,g),n.push(h));for(const h of Object.keys(this.localCache))this.localCache[h]&&!o.has(h)&&(this.notifyListeners(h,null),n.push(h));return n}notifyListeners(e,n){this.localCache[e]=n;const o=this.listeners[e];if(o)for(const h of Array.from(o))h(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uw.type="LOCAL";const HC=uw;new ku(3e4,6e4);function GC(s,e){return e?Na(e):(Ut(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Eg extends pg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return oc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return oc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return oc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function qC(s){return tw(s.auth,new Eg(s),s.bypassAuthState)}function XC(s){const{auth:e,user:n}=s;return Ut(n,e,"internal-error"),ew(n,new Eg(s),s.bypassAuthState)}async function YC(s){const{auth:e,user:n}=s;return Ut(n,e,"internal-error"),EC(n,new Eg(s),s.bypassAuthState)}class hw{constructor(e,n,o,h,g=!1){this.auth=e,this.resolver=o,this.user=h,this.bypassAuthState=g,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(o){this.reject(o)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:o,postBody:h,tenantId:g,error:x,type:T}=e;if(x){this.reject(x);return}const b={auth:this.auth,requestUri:n,sessionId:o,tenantId:g||void 0,postBody:h||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(T)(b))}catch(w){this.reject(w)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qC;case"linkViaPopup":case"linkViaRedirect":return YC;case"reauthViaPopup":case"reauthViaRedirect":return XC;default:Ds(this.auth,"internal-error")}}resolve(e){ka(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ka(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const WC=new ku(2e3,1e4);class nc extends hw{constructor(e,n,o,h,g){super(e,n,h,g),this.provider=o,this.authWindow=null,this.pollId=null,nc.currentPopupAction&&nc.currentPopupAction.cancel(),nc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ut(e,this.auth,"internal-error"),e}async onExecution(){ka(this.filter.length===1,"Popup operations only handle one event");const e=xg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Xs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Xs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,nc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WC.get())};e()}}nc.currentPopupAction=null;const KC="pendingRedirect",uf=new Map;class QC extends hw{constructor(e,n,o=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,o),this.eventId=null}async execute(){let e=uf.get(this.auth._key());if(!e){try{const o=await ZC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(o)}catch(n){e=()=>Promise.reject(n)}uf.set(this.auth._key(),e)}return this.bypassAuthState||uf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZC(s,e){const n=e3(e),o=$C(s);if(!await o._isAvailable())return!1;const h=await o._get(n)==="true";return await o._remove(n),h}function JC(s,e){uf.set(s._key(),e)}function $C(s){return Na(s._redirectPersistence)}function e3(s){return lf(KC,s.config.apiKey,s.name)}async function t3(s,e,n=!1){if(ss(s.app))return Promise.reject(Oa(s));const o=El(s),h=GC(o,e),x=await new QC(o,h,n).execute();return x&&!n&&(delete x.user._redirectEventId,await o._persistUserIfCurrent(x.user),await o._setRedirectUser(null,e)),x}const n3=600*1e3;class r3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(o=>{this.isEventForConsumer(e,o)&&(n=!0,this.sendToConsumer(e,o),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!i3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!fw(e)){const o=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Xs(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const o=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&o}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=n3&&this.cachedEventUids.clear(),this.cachedEventUids.has(X2(e))}saveEventToCache(e){this.cachedEventUids.add(X2(e)),this.lastProcessedEventTime=Date.now()}}function X2(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function fw({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function i3(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fw(s);default:return!1}}async function s3(s,e={}){return ta(s,"GET","/v1/projects",e)}const a3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o3=/^https?/;async function l3(s){if(s.config.emulator)return;const{authorizedDomains:e}=await s3(s);for(const n of e)try{if(c3(n))return}catch{}Ds(s,"unauthorized-domain")}function c3(s){const e=k1(),{protocol:n,hostname:o}=new URL(e);if(s.startsWith("chrome-extension://")){const x=new URL(s);return x.hostname===""&&o===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&x.hostname===o}if(!o3.test(n))return!1;if(a3.test(s))return o===s;const h=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+h+"|"+h+")$","i").test(o)}const u3=new ku(3e4,6e4);function Y2(){const s=Ys().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function h3(s){return new Promise((e,n)=>{function o(){Y2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Y2(),n(Xs(s,"network-request-failed"))},timeout:u3.get()})}if(Ys().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ys().gapi?.load)o();else{const h=JT("iframefcb");return Ys()[h]=()=>{gapi.load?o():n(Xs(s,"network-request-failed"))},KE(`${ZT()}?onload=${h}`).catch(g=>n(g))}}).catch(e=>{throw hf=null,e})}let hf=null;function f3(s){return hf=hf||h3(s),hf}const d3=new ku(5e3,15e3),g3="__/auth/iframe",m3="emulator/auth/iframe",p3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},y3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function x3(s){const e=s.config;Ut(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?dg(e,m3):`https://${s.config.authDomain}/${g3}`,o={apiKey:e.apiKey,appName:s.name,v:yc},h=y3.get(s.config.apiHost);h&&(o.eid=h);const g=s._getFrameworks();return g.length&&(o.fw=g.join(",")),`${n}?${Mu(o).slice(1)}`}async function E3(s){const e=await f3(s),n=Ys().gapi;return Ut(n,s,"internal-error"),e.open({where:document.body,url:x3(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:p3,dontclear:!0},o=>new Promise(async(h,g)=>{await o.restyle({setHideOnLeave:!1});const x=Xs(s,"network-request-failed"),T=Ys().setTimeout(()=>{g(x)},d3.get());function b(){Ys().clearTimeout(T),h(o)}o.ping(b).then(b,()=>{g(x)})}))}const w3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_3=500,A3=600,b3="_blank",v3="http://localhost";class W2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function T3(s,e,n,o=_3,h=A3){const g=Math.max((window.screen.availHeight-h)/2,0).toString(),x=Math.max((window.screen.availWidth-o)/2,0).toString();let T="";const b={...w3,width:o.toString(),height:h.toString(),top:g,left:x},w=Ai().toLowerCase();n&&(T=zE(w)?b3:n),FE(w)&&(e=e||v3,b.scrollbars="yes");const C=Object.entries(b).reduce((P,[B,$])=>`${P}${B}=${$},`,"");if(zT(w)&&T!=="_self")return C3(e||"",T),new W2(null);const R=window.open(e||"",T,C);Ut(R,s,"popup-blocked");try{R.focus()}catch{}return new W2(R)}function C3(s,e){const n=document.createElement("a");n.href=s,n.target=e;const o=document.createEvent("MouseEvent");o.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(o)}const S3="__/auth/handler",I3="emulator/auth/handler",R3=encodeURIComponent("fac");async function K2(s,e,n,o,h,g){Ut(s.config.authDomain,s,"auth-domain-config-required"),Ut(s.config.apiKey,s,"invalid-api-key");const x={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:o,v:yc,eventId:h};if(e instanceof JE){e.setDefaultLanguage(s.languageCode),x.providerId=e.providerId||"",lv(e.getCustomParameters())||(x.customParameters=JSON.stringify(e.getCustomParameters()));for(const[C,R]of Object.entries({}))x[C]=R}if(e instanceof Pu){const C=e.getScopes().filter(R=>R!=="");C.length>0&&(x.scopes=C.join(","))}s.tenantId&&(x.tid=s.tenantId);const T=x;for(const C of Object.keys(T))T[C]===void 0&&delete T[C];const b=await s._getAppCheckToken(),w=b?`#${R3}=${encodeURIComponent(b)}`:"";return`${N3(s)}?${Mu(T).slice(1)}${w}`}function N3({config:s}){return s.emulator?dg(s,I3):`https://${s.authDomain}/${S3}`}const y1="webStorageSupport";class O3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aw,this._completeRedirectFn=t3,this._overrideRedirectResult=JC}async _openPopup(e,n,o,h){ka(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const g=await K2(e,n,o,k1(),h);return T3(e,g,xg())}async _openRedirect(e,n,o,h){await this._originValidation(e);const g=await K2(e,n,o,k1(),h);return kC(g),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:h,promise:g}=this.eventManagers[n];return h?Promise.resolve(h):(ka(g,"If manager is not set, promise should be"),g)}const o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch(()=>{delete this.eventManagers[n]}),o}async initAndGetManager(e){const n=await E3(e),o=new r3(e);return n.register("authEvent",h=>(Ut(h?.authEvent,e,"invalid-auth-event"),{status:o.onEvent(h.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:o},this.iframes[e._key()]=n,o}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(y1,{type:y1},h=>{const g=h?.[0]?.[y1];g!==void 0&&n(!!g),Ds(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=l3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return YE()||jE()||mg()}}const D3=O3;var Q2="@firebase/auth",Z2="1.11.1";class M3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(o=>{e(o?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ut(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function k3(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function L3(s){hl(new Co("auth",(e,{options:n})=>{const o=e.getProvider("app").getImmediate(),h=e.getProvider("heartbeat"),g=e.getProvider("app-check-internal"),{apiKey:x,authDomain:T}=o.options;Ut(x&&!x.includes(":"),"invalid-api-key",{appName:o.name});const b={apiKey:x,authDomain:T,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WE(s)},w=new WT(o,h,g,b);return iC(w,n),w},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,o)=>{e.getProvider("auth-internal").initialize()})),hl(new Co("auth-internal",e=>{const n=El(e.getProvider("auth").getImmediate());return(o=>new M3(o))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qs(Q2,Z2,k3(s)),qs(Q2,Z2,"esm2020")}const P3=300,B3=CE("authIdTokenMaxAge")||P3;let J2=null;const V3=s=>async e=>{const n=e&&await e.getIdTokenResult(),o=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(o&&o>B3)return;const h=n?.token;J2!==h&&(J2=h,await fetch(s,{method:h?"POST":"DELETE",headers:h?{Authorization:`Bearer ${h}`}:{}}))};function dw(s=Wf()){const e=Yf(s,"auth");if(e.isInitialized())return e.getImmediate();const n=rC(s,{popupRedirectResolver:D3,persistence:[HC,OC,aw]}),o=CE("authTokenSyncURL");if(o&&typeof isSecureContext=="boolean"&&isSecureContext){const g=new URL(o,location.origin);if(location.origin===g.origin){const x=V3(g.toString());CC(n,x,()=>x(n.currentUser)),TC(n,T=>x(T))}}const h=bE("auth");return h&&sC(n,`http://${h}`),n}function U3(){return document.getElementsByTagName("head")?.[0]??document}KT({loadJS(s){return new Promise((e,n)=>{const o=document.createElement("script");o.setAttribute("src",s),o.onload=e,o.onerror=h=>{const g=Xs("internal-error");g.customData=h,n(g)},o.type="text/javascript",o.charset="UTF-8",U3().appendChild(o)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});L3("Browser");var $2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var bo,gw;(function(){var s;function e(F,z){function U(){}U.prototype=z.prototype,F.F=z.prototype,F.prototype=new U,F.prototype.constructor=F,F.D=function(Q,X,Y){for(var G=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)G[lt-2]=arguments[lt];return z.prototype[X].apply(Q,G)}}function n(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(o,n),o.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function h(F,z,U){U||(U=0);const Q=Array(16);if(typeof z=="string")for(var X=0;X<16;++X)Q[X]=z.charCodeAt(U++)|z.charCodeAt(U++)<<8|z.charCodeAt(U++)<<16|z.charCodeAt(U++)<<24;else for(X=0;X<16;++X)Q[X]=z[U++]|z[U++]<<8|z[U++]<<16|z[U++]<<24;z=F.g[0],U=F.g[1],X=F.g[2];let Y=F.g[3],G;G=z+(Y^U&(X^Y))+Q[0]+3614090360&4294967295,z=U+(G<<7&4294967295|G>>>25),G=Y+(X^z&(U^X))+Q[1]+3905402710&4294967295,Y=z+(G<<12&4294967295|G>>>20),G=X+(U^Y&(z^U))+Q[2]+606105819&4294967295,X=Y+(G<<17&4294967295|G>>>15),G=U+(z^X&(Y^z))+Q[3]+3250441966&4294967295,U=X+(G<<22&4294967295|G>>>10),G=z+(Y^U&(X^Y))+Q[4]+4118548399&4294967295,z=U+(G<<7&4294967295|G>>>25),G=Y+(X^z&(U^X))+Q[5]+1200080426&4294967295,Y=z+(G<<12&4294967295|G>>>20),G=X+(U^Y&(z^U))+Q[6]+2821735955&4294967295,X=Y+(G<<17&4294967295|G>>>15),G=U+(z^X&(Y^z))+Q[7]+4249261313&4294967295,U=X+(G<<22&4294967295|G>>>10),G=z+(Y^U&(X^Y))+Q[8]+1770035416&4294967295,z=U+(G<<7&4294967295|G>>>25),G=Y+(X^z&(U^X))+Q[9]+2336552879&4294967295,Y=z+(G<<12&4294967295|G>>>20),G=X+(U^Y&(z^U))+Q[10]+4294925233&4294967295,X=Y+(G<<17&4294967295|G>>>15),G=U+(z^X&(Y^z))+Q[11]+2304563134&4294967295,U=X+(G<<22&4294967295|G>>>10),G=z+(Y^U&(X^Y))+Q[12]+1804603682&4294967295,z=U+(G<<7&4294967295|G>>>25),G=Y+(X^z&(U^X))+Q[13]+4254626195&4294967295,Y=z+(G<<12&4294967295|G>>>20),G=X+(U^Y&(z^U))+Q[14]+2792965006&4294967295,X=Y+(G<<17&4294967295|G>>>15),G=U+(z^X&(Y^z))+Q[15]+1236535329&4294967295,U=X+(G<<22&4294967295|G>>>10),G=z+(X^Y&(U^X))+Q[1]+4129170786&4294967295,z=U+(G<<5&4294967295|G>>>27),G=Y+(U^X&(z^U))+Q[6]+3225465664&4294967295,Y=z+(G<<9&4294967295|G>>>23),G=X+(z^U&(Y^z))+Q[11]+643717713&4294967295,X=Y+(G<<14&4294967295|G>>>18),G=U+(Y^z&(X^Y))+Q[0]+3921069994&4294967295,U=X+(G<<20&4294967295|G>>>12),G=z+(X^Y&(U^X))+Q[5]+3593408605&4294967295,z=U+(G<<5&4294967295|G>>>27),G=Y+(U^X&(z^U))+Q[10]+38016083&4294967295,Y=z+(G<<9&4294967295|G>>>23),G=X+(z^U&(Y^z))+Q[15]+3634488961&4294967295,X=Y+(G<<14&4294967295|G>>>18),G=U+(Y^z&(X^Y))+Q[4]+3889429448&4294967295,U=X+(G<<20&4294967295|G>>>12),G=z+(X^Y&(U^X))+Q[9]+568446438&4294967295,z=U+(G<<5&4294967295|G>>>27),G=Y+(U^X&(z^U))+Q[14]+3275163606&4294967295,Y=z+(G<<9&4294967295|G>>>23),G=X+(z^U&(Y^z))+Q[3]+4107603335&4294967295,X=Y+(G<<14&4294967295|G>>>18),G=U+(Y^z&(X^Y))+Q[8]+1163531501&4294967295,U=X+(G<<20&4294967295|G>>>12),G=z+(X^Y&(U^X))+Q[13]+2850285829&4294967295,z=U+(G<<5&4294967295|G>>>27),G=Y+(U^X&(z^U))+Q[2]+4243563512&4294967295,Y=z+(G<<9&4294967295|G>>>23),G=X+(z^U&(Y^z))+Q[7]+1735328473&4294967295,X=Y+(G<<14&4294967295|G>>>18),G=U+(Y^z&(X^Y))+Q[12]+2368359562&4294967295,U=X+(G<<20&4294967295|G>>>12),G=z+(U^X^Y)+Q[5]+4294588738&4294967295,z=U+(G<<4&4294967295|G>>>28),G=Y+(z^U^X)+Q[8]+2272392833&4294967295,Y=z+(G<<11&4294967295|G>>>21),G=X+(Y^z^U)+Q[11]+1839030562&4294967295,X=Y+(G<<16&4294967295|G>>>16),G=U+(X^Y^z)+Q[14]+4259657740&4294967295,U=X+(G<<23&4294967295|G>>>9),G=z+(U^X^Y)+Q[1]+2763975236&4294967295,z=U+(G<<4&4294967295|G>>>28),G=Y+(z^U^X)+Q[4]+1272893353&4294967295,Y=z+(G<<11&4294967295|G>>>21),G=X+(Y^z^U)+Q[7]+4139469664&4294967295,X=Y+(G<<16&4294967295|G>>>16),G=U+(X^Y^z)+Q[10]+3200236656&4294967295,U=X+(G<<23&4294967295|G>>>9),G=z+(U^X^Y)+Q[13]+681279174&4294967295,z=U+(G<<4&4294967295|G>>>28),G=Y+(z^U^X)+Q[0]+3936430074&4294967295,Y=z+(G<<11&4294967295|G>>>21),G=X+(Y^z^U)+Q[3]+3572445317&4294967295,X=Y+(G<<16&4294967295|G>>>16),G=U+(X^Y^z)+Q[6]+76029189&4294967295,U=X+(G<<23&4294967295|G>>>9),G=z+(U^X^Y)+Q[9]+3654602809&4294967295,z=U+(G<<4&4294967295|G>>>28),G=Y+(z^U^X)+Q[12]+3873151461&4294967295,Y=z+(G<<11&4294967295|G>>>21),G=X+(Y^z^U)+Q[15]+530742520&4294967295,X=Y+(G<<16&4294967295|G>>>16),G=U+(X^Y^z)+Q[2]+3299628645&4294967295,U=X+(G<<23&4294967295|G>>>9),G=z+(X^(U|~Y))+Q[0]+4096336452&4294967295,z=U+(G<<6&4294967295|G>>>26),G=Y+(U^(z|~X))+Q[7]+1126891415&4294967295,Y=z+(G<<10&4294967295|G>>>22),G=X+(z^(Y|~U))+Q[14]+2878612391&4294967295,X=Y+(G<<15&4294967295|G>>>17),G=U+(Y^(X|~z))+Q[5]+4237533241&4294967295,U=X+(G<<21&4294967295|G>>>11),G=z+(X^(U|~Y))+Q[12]+1700485571&4294967295,z=U+(G<<6&4294967295|G>>>26),G=Y+(U^(z|~X))+Q[3]+2399980690&4294967295,Y=z+(G<<10&4294967295|G>>>22),G=X+(z^(Y|~U))+Q[10]+4293915773&4294967295,X=Y+(G<<15&4294967295|G>>>17),G=U+(Y^(X|~z))+Q[1]+2240044497&4294967295,U=X+(G<<21&4294967295|G>>>11),G=z+(X^(U|~Y))+Q[8]+1873313359&4294967295,z=U+(G<<6&4294967295|G>>>26),G=Y+(U^(z|~X))+Q[15]+4264355552&4294967295,Y=z+(G<<10&4294967295|G>>>22),G=X+(z^(Y|~U))+Q[6]+2734768916&4294967295,X=Y+(G<<15&4294967295|G>>>17),G=U+(Y^(X|~z))+Q[13]+1309151649&4294967295,U=X+(G<<21&4294967295|G>>>11),G=z+(X^(U|~Y))+Q[4]+4149444226&4294967295,z=U+(G<<6&4294967295|G>>>26),G=Y+(U^(z|~X))+Q[11]+3174756917&4294967295,Y=z+(G<<10&4294967295|G>>>22),G=X+(z^(Y|~U))+Q[2]+718787259&4294967295,X=Y+(G<<15&4294967295|G>>>17),G=U+(Y^(X|~z))+Q[9]+3951481745&4294967295,F.g[0]=F.g[0]+z&4294967295,F.g[1]=F.g[1]+(X+(G<<21&4294967295|G>>>11))&4294967295,F.g[2]=F.g[2]+X&4294967295,F.g[3]=F.g[3]+Y&4294967295}o.prototype.v=function(F,z){z===void 0&&(z=F.length);const U=z-this.blockSize,Q=this.C;let X=this.h,Y=0;for(;Y<z;){if(X==0)for(;Y<=U;)h(this,F,Y),Y+=this.blockSize;if(typeof F=="string"){for(;Y<z;)if(Q[X++]=F.charCodeAt(Y++),X==this.blockSize){h(this,Q),X=0;break}}else for(;Y<z;)if(Q[X++]=F[Y++],X==this.blockSize){h(this,Q),X=0;break}}this.h=X,this.o+=z},o.prototype.A=function(){var F=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);F[0]=128;for(var z=1;z<F.length-8;++z)F[z]=0;z=this.o*8;for(var U=F.length-8;U<F.length;++U)F[U]=z&255,z/=256;for(this.v(F),F=Array(16),z=0,U=0;U<4;++U)for(let Q=0;Q<32;Q+=8)F[z++]=this.g[U]>>>Q&255;return F};function g(F,z){var U=T;return Object.prototype.hasOwnProperty.call(U,F)?U[F]:U[F]=z(F)}function x(F,z){this.h=z;const U=[];let Q=!0;for(let X=F.length-1;X>=0;X--){const Y=F[X]|0;Q&&Y==z||(U[X]=Y,Q=!1)}this.g=U}var T={};function b(F){return-128<=F&&F<128?g(F,function(z){return new x([z|0],z<0?-1:0)}):new x([F|0],F<0?-1:0)}function w(F){if(isNaN(F)||!isFinite(F))return R;if(F<0)return se(w(-F));const z=[];let U=1;for(let Q=0;F>=U;Q++)z[Q]=F/U|0,U*=4294967296;return new x(z,0)}function C(F,z){if(F.length==0)throw Error("number format error: empty string");if(z=z||10,z<2||36<z)throw Error("radix out of range: "+z);if(F.charAt(0)=="-")return se(C(F.substring(1),z));if(F.indexOf("-")>=0)throw Error('number format error: interior "-" character');const U=w(Math.pow(z,8));let Q=R;for(let Y=0;Y<F.length;Y+=8){var X=Math.min(8,F.length-Y);const G=parseInt(F.substring(Y,Y+X),z);X<8?(X=w(Math.pow(z,X)),Q=Q.j(X).add(w(G))):(Q=Q.j(U),Q=Q.add(w(G)))}return Q}var R=b(0),P=b(1),B=b(16777216);s=x.prototype,s.m=function(){if(ne(this))return-se(this).m();let F=0,z=1;for(let U=0;U<this.g.length;U++){const Q=this.i(U);F+=(Q>=0?Q:4294967296+Q)*z,z*=4294967296}return F},s.toString=function(F){if(F=F||10,F<2||36<F)throw Error("radix out of range: "+F);if($(this))return"0";if(ne(this))return"-"+se(this).toString(F);const z=w(Math.pow(F,6));var U=this;let Q="";for(;;){const X=Ue(U,z).g;U=Qe(U,X.j(z));let Y=((U.g.length>0?U.g[0]:U.h)>>>0).toString(F);if(U=X,$(U))return Y+Q;for(;Y.length<6;)Y="0"+Y;Q=Y+Q}},s.i=function(F){return F<0?0:F<this.g.length?this.g[F]:this.h};function $(F){if(F.h!=0)return!1;for(let z=0;z<F.g.length;z++)if(F.g[z]!=0)return!1;return!0}function ne(F){return F.h==-1}s.l=function(F){return F=Qe(this,F),ne(F)?-1:$(F)?0:1};function se(F){const z=F.g.length,U=[];for(let Q=0;Q<z;Q++)U[Q]=~F.g[Q];return new x(U,~F.h).add(P)}s.abs=function(){return ne(this)?se(this):this},s.add=function(F){const z=Math.max(this.g.length,F.g.length),U=[];let Q=0;for(let X=0;X<=z;X++){let Y=Q+(this.i(X)&65535)+(F.i(X)&65535),G=(Y>>>16)+(this.i(X)>>>16)+(F.i(X)>>>16);Q=G>>>16,Y&=65535,G&=65535,U[X]=G<<16|Y}return new x(U,U[U.length-1]&-2147483648?-1:0)};function Qe(F,z){return F.add(se(z))}s.j=function(F){if($(this)||$(F))return R;if(ne(this))return ne(F)?se(this).j(se(F)):se(se(this).j(F));if(ne(F))return se(this.j(se(F)));if(this.l(B)<0&&F.l(B)<0)return w(this.m()*F.m());const z=this.g.length+F.g.length,U=[];for(var Q=0;Q<2*z;Q++)U[Q]=0;for(Q=0;Q<this.g.length;Q++)for(let X=0;X<F.g.length;X++){const Y=this.i(Q)>>>16,G=this.i(Q)&65535,lt=F.i(X)>>>16,ae=F.i(X)&65535;U[2*Q+2*X]+=G*ae,Le(U,2*Q+2*X),U[2*Q+2*X+1]+=Y*ae,Le(U,2*Q+2*X+1),U[2*Q+2*X+1]+=G*lt,Le(U,2*Q+2*X+1),U[2*Q+2*X+2]+=Y*lt,Le(U,2*Q+2*X+2)}for(F=0;F<z;F++)U[F]=U[2*F+1]<<16|U[2*F];for(F=z;F<2*z;F++)U[F]=0;return new x(U,0)};function Le(F,z){for(;(F[z]&65535)!=F[z];)F[z+1]+=F[z]>>>16,F[z]&=65535,z++}function he(F,z){this.g=F,this.h=z}function Ue(F,z){if($(z))throw Error("division by zero");if($(F))return new he(R,R);if(ne(F))return z=Ue(se(F),z),new he(se(z.g),se(z.h));if(ne(z))return z=Ue(F,se(z)),new he(se(z.g),z.h);if(F.g.length>30){if(ne(F)||ne(z))throw Error("slowDivide_ only works with positive integers.");for(var U=P,Q=z;Q.l(F)<=0;)U=pt(U),Q=pt(Q);var X=je(U,1),Y=je(Q,1);for(Q=je(Q,2),U=je(U,2);!$(Q);){var G=Y.add(Q);G.l(F)<=0&&(X=X.add(U),Y=G),Q=je(Q,1),U=je(U,1)}return z=Qe(F,X.j(z)),new he(X,z)}for(X=R;F.l(z)>=0;){for(U=Math.max(1,Math.floor(F.m()/z.m())),Q=Math.ceil(Math.log(U)/Math.LN2),Q=Q<=48?1:Math.pow(2,Q-48),Y=w(U),G=Y.j(z);ne(G)||G.l(F)>0;)U-=Q,Y=w(U),G=Y.j(z);$(Y)&&(Y=P),X=X.add(Y),F=Qe(F,G)}return new he(X,F)}s.B=function(F){return Ue(this,F).h},s.and=function(F){const z=Math.max(this.g.length,F.g.length),U=[];for(let Q=0;Q<z;Q++)U[Q]=this.i(Q)&F.i(Q);return new x(U,this.h&F.h)},s.or=function(F){const z=Math.max(this.g.length,F.g.length),U=[];for(let Q=0;Q<z;Q++)U[Q]=this.i(Q)|F.i(Q);return new x(U,this.h|F.h)},s.xor=function(F){const z=Math.max(this.g.length,F.g.length),U=[];for(let Q=0;Q<z;Q++)U[Q]=this.i(Q)^F.i(Q);return new x(U,this.h^F.h)};function pt(F){const z=F.g.length+1,U=[];for(let Q=0;Q<z;Q++)U[Q]=F.i(Q)<<1|F.i(Q-1)>>>31;return new x(U,F.h)}function je(F,z){const U=z>>5;z%=32;const Q=F.g.length-U,X=[];for(let Y=0;Y<Q;Y++)X[Y]=z>0?F.i(Y+U)>>>z|F.i(Y+U+1)<<32-z:F.i(Y+U);return new x(X,F.h)}o.prototype.digest=o.prototype.A,o.prototype.reset=o.prototype.u,o.prototype.update=o.prototype.v,gw=o,x.prototype.add=x.prototype.add,x.prototype.multiply=x.prototype.j,x.prototype.modulo=x.prototype.B,x.prototype.compare=x.prototype.l,x.prototype.toNumber=x.prototype.m,x.prototype.toString=x.prototype.toString,x.prototype.getBits=x.prototype.i,x.fromNumber=w,x.fromString=C,bo=x}).apply(typeof $2<"u"?$2:typeof self<"u"?self:typeof window<"u"?window:{});var ef=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var mw,uu,pw,ff,V1,yw,xw,Ew;(function(){var s,e=Object.defineProperty;function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof ef=="object"&&ef];for(var S=0;S<p.length;++S){var D=p[S];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var o=n(this);function h(p,S){if(S)e:{var D=o;p=p.split(".");for(var j=0;j<p.length-1;j++){var le=p[j];if(!(le in D))break e;D=D[le]}p=p[p.length-1],j=D[p],S=S(j),S!=j&&S!=null&&e(D,p,{configurable:!0,writable:!0,value:S})}}h("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),h("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),h("Object.entries",function(p){return p||function(S){var D=[],j;for(j in S)Object.prototype.hasOwnProperty.call(S,j)&&D.push([j,S[j]]);return D}});var g=g||{},x=this||self;function T(p){var S=typeof p;return S=="object"&&p!=null||S=="function"}function b(p,S,D){return p.call.apply(p.bind,arguments)}function w(p,S,D){return w=b,w.apply(null,arguments)}function C(p,S){var D=Array.prototype.slice.call(arguments,1);return function(){var j=D.slice();return j.push.apply(j,arguments),p.apply(this,j)}}function R(p,S){function D(){}D.prototype=S.prototype,p.Z=S.prototype,p.prototype=new D,p.prototype.constructor=p,p.Ob=function(j,le,we){for(var Ye=Array(arguments.length-2),Ht=2;Ht<arguments.length;Ht++)Ye[Ht-2]=arguments[Ht];return S.prototype[le].apply(j,Ye)}}var P=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function B(p){const S=p.length;if(S>0){const D=Array(S);for(let j=0;j<S;j++)D[j]=p[j];return D}return[]}function $(p,S){for(let j=1;j<arguments.length;j++){const le=arguments[j];var D=typeof le;if(D=D!="object"?D:le?Array.isArray(le)?"array":D:"null",D=="array"||D=="object"&&typeof le.length=="number"){D=p.length||0;const we=le.length||0;p.length=D+we;for(let Ye=0;Ye<we;Ye++)p[D+Ye]=le[Ye]}else p.push(le)}}class ne{constructor(S,D){this.i=S,this.j=D,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function se(p){x.setTimeout(()=>{throw p},0)}function Qe(){var p=F;let S=null;return p.g&&(S=p.g,p.g=p.g.next,p.g||(p.h=null),S.next=null),S}class Le{constructor(){this.h=this.g=null}add(S,D){const j=he.get();j.set(S,D),this.h?this.h.next=j:this.g=j,this.h=j}}var he=new ne(()=>new Ue,p=>p.reset());class Ue{constructor(){this.next=this.g=this.h=null}set(S,D){this.h=S,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let pt,je=!1,F=new Le,z=()=>{const p=Promise.resolve(void 0);pt=()=>{p.then(U)}};function U(){for(var p;p=Qe();){try{p.h.call(p.g)}catch(D){se(D)}var S=he;S.j(p),S.h<100&&(S.h++,p.next=S.g,S.g=p)}je=!1}function Q(){this.u=this.u,this.C=this.C}Q.prototype.u=!1,Q.prototype.dispose=function(){this.u||(this.u=!0,this.N())},Q.prototype[Symbol.dispose]=function(){this.dispose()},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function X(p,S){this.type=p,this.g=this.target=S,this.defaultPrevented=!1}X.prototype.h=function(){this.defaultPrevented=!0};var Y=(function(){if(!x.addEventListener||!Object.defineProperty)return!1;var p=!1,S=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const D=()=>{};x.addEventListener("test",D,S),x.removeEventListener("test",D,S)}catch{}return p})();function G(p){return/^[\s\xa0]*$/.test(p)}function lt(p,S){X.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,S)}R(lt,X),lt.prototype.init=function(p,S){const D=this.type=p.type,j=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=S,S=p.relatedTarget,S||(D=="mouseover"?S=p.fromElement:D=="mouseout"&&(S=p.toElement)),this.relatedTarget=S,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&lt.Z.h.call(this)},lt.prototype.h=function(){lt.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var ae="closure_listenable_"+(Math.random()*1e6|0),re=0;function fe(p,S,D,j,le){this.listener=p,this.proxy=null,this.src=S,this.type=D,this.capture=!!j,this.ha=le,this.key=++re,this.da=this.fa=!1}function tt(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function qe(p,S,D){for(const j in p)S.call(D,p[j],j,p)}function ut(p,S){for(const D in p)S.call(void 0,p[D],D,p)}function K(p){const S={};for(const D in p)S[D]=p[D];return S}const oe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ve(p,S){let D,j;for(let le=1;le<arguments.length;le++){j=arguments[le];for(D in j)p[D]=j[D];for(let we=0;we<oe.length;we++)D=oe[we],Object.prototype.hasOwnProperty.call(j,D)&&(p[D]=j[D])}}function Te(p){this.src=p,this.g={},this.h=0}Te.prototype.add=function(p,S,D,j,le){const we=p.toString();p=this.g[we],p||(p=this.g[we]=[],this.h++);const Ye=_e(p,S,j,le);return Ye>-1?(S=p[Ye],D||(S.fa=!1)):(S=new fe(S,this.src,we,!!j,le),S.fa=D,p.push(S)),S};function Se(p,S){const D=S.type;if(D in p.g){var j=p.g[D],le=Array.prototype.indexOf.call(j,S,void 0),we;(we=le>=0)&&Array.prototype.splice.call(j,le,1),we&&(tt(S),p.g[D].length==0&&(delete p.g[D],p.h--))}}function _e(p,S,D,j){for(let le=0;le<p.length;++le){const we=p[le];if(!we.da&&we.listener==S&&we.capture==!!D&&we.ha==j)return le}return-1}var Je="closure_lm_"+(Math.random()*1e6|0),_t={};function It(p,S,D,j,le){if(Array.isArray(S)){for(let we=0;we<S.length;we++)It(p,S[we],D,j,le);return null}return D=ot(D),p&&p[ae]?p.J(S,D,T(j)?!!j.capture:!1,le):An(p,S,D,!1,j,le)}function An(p,S,D,j,le,we){if(!S)throw Error("Invalid event type");const Ye=T(le)?!!le.capture:!!le;let Ht=$e(p);if(Ht||(p[Je]=Ht=new Te(p)),D=Ht.add(S,D,j,Ye,we),D.proxy)return D;if(j=jt(),D.proxy=j,j.src=p,j.listener=D,p.addEventListener)Y||(le=Ye),le===void 0&&(le=!1),p.addEventListener(S.toString(),j,le);else if(p.attachEvent)p.attachEvent(at(S.toString()),j);else if(p.addListener&&p.removeListener)p.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return D}function jt(){function p(D){return S.call(p.src,p.listener,D)}const S=De;return p}function Be(p,S,D,j,le){if(Array.isArray(S))for(var we=0;we<S.length;we++)Be(p,S[we],D,j,le);else j=T(j)?!!j.capture:!!j,D=ot(D),p&&p[ae]?(p=p.i,we=String(S).toString(),we in p.g&&(S=p.g[we],D=_e(S,D,j,le),D>-1&&(tt(S[D]),Array.prototype.splice.call(S,D,1),S.length==0&&(delete p.g[we],p.h--)))):p&&(p=$e(p))&&(S=p.g[S.toString()],p=-1,S&&(p=_e(S,D,j,le)),(D=p>-1?S[p]:null)&&Ve(D))}function Ve(p){if(typeof p!="number"&&p&&!p.da){var S=p.src;if(S&&S[ae])Se(S.i,p);else{var D=p.type,j=p.proxy;S.removeEventListener?S.removeEventListener(D,j,p.capture):S.detachEvent?S.detachEvent(at(D),j):S.addListener&&S.removeListener&&S.removeListener(j),(D=$e(S))?(Se(D,p),D.h==0&&(D.src=null,S[Je]=null)):tt(p)}}}function at(p){return p in _t?_t[p]:_t[p]="on"+p}function De(p,S){if(p.da)p=!0;else{S=new lt(S,this);const D=p.listener,j=p.ha||p.src;p.fa&&Ve(p),p=D.call(j,S)}return p}function $e(p){return p=p[Je],p instanceof Te?p:null}var nt="__closure_events_fn_"+(Math.random()*1e9>>>0);function ot(p){return typeof p=="function"?p:(p[nt]||(p[nt]=function(S){return p.handleEvent(S)}),p[nt])}function et(){Q.call(this),this.i=new Te(this),this.M=this,this.G=null}R(et,Q),et.prototype[ae]=!0,et.prototype.removeEventListener=function(p,S,D,j){Be(this,p,S,D,j)};function Vt(p,S){var D,j=p.G;if(j)for(D=[];j;j=j.G)D.push(j);if(p=p.M,j=S.type||S,typeof S=="string")S=new X(S,p);else if(S instanceof X)S.target=S.target||p;else{var le=S;S=new X(j,p),ve(S,le)}le=!0;let we,Ye;if(D)for(Ye=D.length-1;Ye>=0;Ye--)we=S.g=D[Ye],le=We(we,j,!0,S)&&le;if(we=S.g=p,le=We(we,j,!0,S)&&le,le=We(we,j,!1,S)&&le,D)for(Ye=0;Ye<D.length;Ye++)we=S.g=D[Ye],le=We(we,j,!1,S)&&le}et.prototype.N=function(){if(et.Z.N.call(this),this.i){var p=this.i;for(const S in p.g){const D=p.g[S];for(let j=0;j<D.length;j++)tt(D[j]);delete p.g[S],p.h--}}this.G=null},et.prototype.J=function(p,S,D,j){return this.i.add(String(p),S,!1,D,j)},et.prototype.K=function(p,S,D,j){return this.i.add(String(p),S,!0,D,j)};function We(p,S,D,j){if(S=p.i.g[String(S)],!S)return!0;S=S.concat();let le=!0;for(let we=0;we<S.length;++we){const Ye=S[we];if(Ye&&!Ye.da&&Ye.capture==D){const Ht=Ye.listener,gr=Ye.ha||Ye.src;Ye.fa&&Se(p.i,Ye),le=Ht.call(gr,j)!==!1&&le}}return le&&!j.defaultPrevented}function Qn(p,S){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=w(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:x.setTimeout(p,S||0)}function At(p){p.g=Qn(()=>{p.g=null,p.i&&(p.i=!1,At(p))},p.l);const S=p.h;p.h=null,p.m.apply(null,S)}class Rt extends Q{constructor(S,D){super(),this.m=S,this.l=D,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:At(this)}N(){super.N(),this.g&&(x.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sr(p){Q.call(this),this.h=p,this.g={}}R(Sr,Q);var Gt=[];function Hn(p){qe(p.g,function(S,D){this.g.hasOwnProperty(D)&&Ve(S)},p),p.g={}}Sr.prototype.N=function(){Sr.Z.N.call(this),Hn(this)},Sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Rn=x.JSON.stringify,Pn=x.JSON.parse,Lr=class{stringify(p){return x.JSON.stringify(p,void 0)}parse(p){return x.JSON.parse(p,void 0)}};function ti(){}function Pr(){}var Zt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Me(){X.call(this,"d")}R(Me,X);function zt(){X.call(this,"c")}R(zt,X);var xt={},bn=null;function Ir(){return bn=bn||new et}xt.Ia="serverreachability";function Rr(p){X.call(this,xt.Ia,p)}R(Rr,X);function de(p){const S=Ir();Vt(S,new Rr(S))}xt.STAT_EVENT="statevent";function be(p,S){X.call(this,xt.STAT_EVENT,p),this.stat=S}R(be,X);function Oe(p){const S=Ir();Vt(S,new be(S,p))}xt.Ja="timingevent";function rt(p,S){X.call(this,xt.Ja,p),this.size=S}R(rt,X);function ft(p,S){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return x.setTimeout(function(){p()},S)}function Ke(){this.g=!0}Ke.prototype.ua=function(){this.g=!1};function He(p,S,D,j,le,we){p.info(function(){if(p.g)if(we){var Ye="",Ht=we.split("&");for(let Tn=0;Tn<Ht.length;Tn++){var gr=Ht[Tn].split("=");if(gr.length>1){const Jn=gr[0];gr=gr[1];const Ti=Jn.split("_");Ye=Ti.length>=2&&Ti[1]=="type"?Ye+(Jn+"="+gr+"&"):Ye+(Jn+"=redacted&")}}}else Ye=null;else Ye=we;return"XMLHTTP REQ ("+j+") [attempt "+le+"]: "+S+`
`+D+`
`+Ye})}function st(p,S,D,j,le,we,Ye){p.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+le+"]: "+S+`
`+D+`
`+we+" "+Ye})}function ht(p,S,D,j){p.info(function(){return"XMLHTTP TEXT ("+S+"): "+bt(p,D)+(j?" "+j:"")})}function St(p,S){p.info(function(){return"TIMEOUT: "+S})}Ke.prototype.info=function(){};function bt(p,S){if(!p.g)return S;if(!S)return null;try{const we=JSON.parse(S);if(we){for(p=0;p<we.length;p++)if(Array.isArray(we[p])){var D=we[p];if(!(D.length<2)){var j=D[1];if(Array.isArray(j)&&!(j.length<1)){var le=j[0];if(le!="noop"&&le!="stop"&&le!="close")for(let Ye=1;Ye<j.length;Ye++)j[Ye]=""}}}}return Rn(we)}catch{return S}}var dn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},sn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Gn;function ur(){}R(ur,ti),ur.prototype.g=function(){return new XMLHttpRequest},Gn=new ur;function qr(p){return encodeURIComponent(String(p))}function Xr(p){var S=1;p=p.split(":");const D=[];for(;S>0&&p.length;)D.push(p.shift()),S--;return p.length&&D.push(p.join(":")),D}function it(p,S,D,j){this.j=p,this.i=S,this.l=D,this.S=j||1,this.V=new Sr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Br}function Br(){this.i=null,this.g="",this.h=!1}var tr={},vn={};function ee(p,S,D){p.M=1,p.A=di(hr(S)),p.u=D,p.R=!0,Ze(p,null)}function Ze(p,S){p.F=Date.now(),$t(p),p.B=hr(p.A);var D=p.B,j=p.S;Array.isArray(j)||(j=[String(j)]),Bn(D.i,"t",j),p.C=0,D=p.j.L,p.h=new Br,p.g=Ha(p.j,D?S:null,!p.u),p.P>0&&(p.O=new Rt(w(p.Y,p,p.g),p.P)),S=p.V,D=p.g,j=p.ba;var le="readystatechange";Array.isArray(le)||(le&&(Gt[0]=le.toString()),le=Gt);for(let we=0;we<le.length;we++){const Ye=It(D,le[we],j||S.handleEvent,!1,S.h||S);if(!Ye)break;S.g[Ye.key]=Ye}S=p.J?K(p.J):{},p.u?(p.v||(p.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,S)):(p.v="GET",p.g.ea(p.B,p.v,null,S)),de(),He(p.i,p.v,p.B,p.l,p.S,p.u)}it.prototype.ba=function(p){p=p.target;const S=this.O;S&&Mi(p)==3?S.j():this.Y(p)},it.prototype.Y=function(p){try{if(p==this.g)e:{const Ht=Mi(this.g),gr=this.g.ya(),Tn=this.g.ca();if(!(Ht<3)&&(Ht!=3||this.g&&(this.h.h||this.g.la()||Er(this.g)))){this.K||Ht!=4||gr==7||(gr==8||Tn<=0?de(3):de(2)),gn(this);var S=this.g.ca();this.X=S;var D=dt(this);if(this.o=S==200,st(this.i,this.v,this.B,this.l,this.S,Ht,S),this.o){if(this.U&&!this.L){t:{if(this.g){var j,le=this.g;if((j=le.g?le.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(j)){var we=j;break t}}we=null}if(p=we)ht(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ir(this,p);else{this.o=!1,this.m=3,Oe(12),pr(this),qt(this);break e}}if(this.R){p=!0;let Jn;for(;!this.K&&this.C<D.length;)if(Jn=kt(this,D),Jn==vn){Ht==4&&(this.m=4,Oe(14),p=!1),ht(this.i,this.l,null,"[Incomplete Response]");break}else if(Jn==tr){this.m=4,Oe(15),ht(this.i,this.l,D,"[Invalid Chunk]"),p=!1;break}else ht(this.i,this.l,Jn,null),ir(this,Jn);if(gt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||D.length!=0||this.h.h||(this.m=1,Oe(16),p=!1),this.o=this.o&&p,!p)ht(this.i,this.l,D,"[Invalid Chunked Response]"),pr(this),qt(this);else if(D.length>0&&!this.W){this.W=!0;var Ye=this.j;Ye.g==this&&Ye.aa&&!Ye.P&&(Ye.j.info("Great, no buffering proxy detected. Bytes received: "+D.length),xe(Ye),Ye.P=!0,Oe(11))}}else ht(this.i,this.l,D,null),ir(this,D);Ht==4&&pr(this),this.o&&!this.K&&(Ht==4?oa(this.j,this):(this.o=!1,$t(this)))}else vi(this.g),S==400&&D.indexOf("Unknown SID")>0?(this.m=3,Oe(12)):(this.m=0,Oe(13)),pr(this),qt(this)}}}catch{}finally{}};function dt(p){if(!gt(p))return p.g.la();const S=Er(p.g);if(S==="")return"";let D="";const j=S.length,le=Mi(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return pr(p),qt(p),"";p.h.i=new x.TextDecoder}for(let we=0;we<j;we++)p.h.h=!0,D+=p.h.i.decode(S[we],{stream:!(le&&we==j-1)});return S.length=0,p.h.g+=D,p.C=0,p.h.g}function gt(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function kt(p,S){var D=p.C,j=S.indexOf(`
`,D);return j==-1?vn:(D=Number(S.substring(D,j)),isNaN(D)?tr:(j+=1,j+D>S.length?vn:(S=S.slice(j,j+D),p.C=j+D,S)))}it.prototype.cancel=function(){this.K=!0,pr(this)};function $t(p){p.T=Date.now()+p.H,kn(p,p.H)}function kn(p,S){if(p.D!=null)throw Error("WatchDog timer not null");p.D=ft(w(p.aa,p),S)}function gn(p){p.D&&(x.clearTimeout(p.D),p.D=null)}it.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(St(this.i,this.B),this.M!=2&&(de(),Oe(17)),pr(this),this.m=2,qt(this)):kn(this,this.T-p)};function qt(p){p.j.I==0||p.K||oa(p.j,p)}function pr(p){gn(p);var S=p.O;S&&typeof S.dispose=="function"&&S.dispose(),p.O=null,Hn(p.V),p.g&&(S=p.g,p.g=null,S.abort(),S.dispose())}function ir(p,S){try{var D=p.j;if(D.I!=0&&(D.g==p||ni(D.h,p))){if(!p.L&&ni(D.h,p)&&D.I==3){try{var j=D.Ba.g.parse(S)}catch{j=null}if(Array.isArray(j)&&j.length==3){var le=j;if(le[0]==0){e:if(!D.v){if(D.g)if(D.g.F+3e3<p.F)fr(D),Cs(D);else break e;aa(D),Oe(18)}}else D.xa=le[1],0<D.xa-D.K&&le[2]<37500&&D.F&&D.A==0&&!D.C&&(D.C=ft(w(D.Va,D),6e3));Nn(D.h)<=1&&D.ta&&(D.ta=void 0)}else cs(D,11)}else if((p.L||D.g==p)&&fr(D),!G(S))for(le=D.Ba.g.parse(S),S=0;S<le.length;S++){let Tn=le[S];const Jn=Tn[0];if(!(Jn<=D.K))if(D.K=Jn,Tn=Tn[1],D.I==2)if(Tn[0]=="c"){D.M=Tn[1],D.ba=Tn[2];const Ti=Tn[3];Ti!=null&&(D.ka=Ti,D.j.info("VER="+D.ka));const fs=Tn[4];fs!=null&&(D.za=fs,D.j.info("SVER="+D.za));const Zr=Tn[5];Zr!=null&&typeof Zr=="number"&&Zr>0&&(j=1.5*Zr,D.O=j,D.j.info("backChannelRequestTimeoutMs_="+j)),j=D;const Ci=p.g;if(Ci){const ca=Ci.g?Ci.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ca){var we=j.h;we.g||ca.indexOf("spdy")==-1&&ca.indexOf("quic")==-1&&ca.indexOf("h2")==-1||(we.j=we.l,we.g=new Set,we.h&&(Bo(we,we.h),we.h=null))}if(j.G){const ds=Ci.g?Ci.g.getResponseHeader("X-HTTP-Session-Id"):null;ds&&(j.wa=ds,Pt(j.J,j.G,ds))}}D.I=3,D.l&&D.l.ra(),D.aa&&(D.T=Date.now()-p.F,D.j.info("Handshake RTT: "+D.T+"ms")),j=D;var Ye=p;if(j.na=vl(j,j.L?j.ba:null,j.W),Ye.L){mn(j.h,Ye);var Ht=Ye,gr=j.O;gr&&(Ht.H=gr),Ht.D&&(gn(Ht),$t(Ht)),j.g=Ye}else Wi(j);D.i.length>0&&ls(D)}else Tn[0]!="stop"&&Tn[0]!="close"||cs(D,7);else D.I==3&&(Tn[0]=="stop"||Tn[0]=="close"?Tn[0]=="stop"?cs(D,7):Fa(D):Tn[0]!="noop"&&D.l&&D.l.qa(Tn),D.A=0)}}de(4)}catch{}}var nr=class{constructor(p,S){this.g=p,this.map=S}};function ke(p){this.l=p||10,x.PerformanceNavigationTiming?(p=x.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(x.chrome&&x.chrome.loadTimes&&x.chrome.loadTimes()&&x.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Po(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Nn(p){return p.h?1:p.g?p.g.size:0}function ni(p,S){return p.h?p.h==S:p.g?p.g.has(S):!1}function Bo(p,S){p.g?p.g.add(S):p.h=S}function mn(p,S){p.h&&p.h==S?p.h=null:p.g&&p.g.has(S)&&p.g.delete(S)}ke.prototype.cancel=function(){if(this.i=ln(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function ln(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let S=p.i;for(const D of p.g.values())S=S.concat(D.G);return S}return B(p.i)}var nn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ks(p,S){if(p){p=p.split("&");for(let D=0;D<p.length;D++){const j=p[D].indexOf("=");let le,we=null;j>=0?(le=p[D].substring(0,j),we=p[D].substring(j+1)):le=p[D],S(le,we?decodeURIComponent(we.replace(/\+/g," ")):"")}}}function ri(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;p instanceof ri?(this.l=p.l,an(this,p.j),this.o=p.o,this.g=p.g,ii(this,p.u),this.h=p.h,Vo(this,Uo(p.i)),this.m=p.m):p&&(S=String(p).match(nn))?(this.l=!1,an(this,S[1]||"",!0),this.o=os(S[2]||""),this.g=os(S[3]||"",!0),ii(this,S[4]),this.h=os(S[5]||"",!0),Vo(this,S[6]||"",!0),this.m=os(S[7]||"")):(this.l=!1,this.i=new Nr(null,this.l))}ri.prototype.toString=function(){const p=[];var S=this.j;S&&p.push(Oi(S,yr,!0),":");var D=this.g;return(D||S=="file")&&(p.push("//"),(S=this.o)&&p.push(Oi(S,yr,!0),"@"),p.push(qr(D).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.u,D!=null&&p.push(":",String(D))),(D=this.h)&&(this.g&&D.charAt(0)!="/"&&p.push("/"),p.push(Oi(D,D.charAt(0)=="/"?H:ue,!0))),(D=this.i.toString())&&p.push("?",D),(D=this.m)&&p.push("#",Oi(D,xr)),p.join("")},ri.prototype.resolve=function(p){const S=hr(this);let D=!!p.j;D?an(S,p.j):D=!!p.o,D?S.o=p.o:D=!!p.g,D?S.g=p.g:D=p.u!=null;var j=p.h;if(D)ii(S,p.u);else if(D=!!p.h){if(j.charAt(0)!="/")if(this.g&&!this.h)j="/"+j;else{var le=S.h.lastIndexOf("/");le!=-1&&(j=S.h.slice(0,le+1)+j)}if(le=j,le==".."||le==".")j="";else if(le.indexOf("./")!=-1||le.indexOf("/.")!=-1){j=le.lastIndexOf("/",0)==0,le=le.split("/");const we=[];for(let Ye=0;Ye<le.length;){const Ht=le[Ye++];Ht=="."?j&&Ye==le.length&&we.push(""):Ht==".."?((we.length>1||we.length==1&&we[0]!="")&&we.pop(),j&&Ye==le.length&&we.push("")):(we.push(Ht),j=!0)}j=we.join("/")}else j=le}return D?S.h=j:D=p.i.toString()!=="",D?Vo(S,Uo(p.i)):D=!!p.m,D&&(S.m=p.m),S};function hr(p){return new ri(p)}function an(p,S,D){p.j=D?os(S,!0):S,p.j&&(p.j=p.j.replace(/:$/,""))}function ii(p,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);p.u=S}else p.u=null}function Vo(p,S,D){S instanceof Nr?(p.i=S,Ps(p.i,p.l)):(D||(S=Oi(S,Et)),p.i=new Nr(S,p.l))}function Pt(p,S,D){p.i.set(S,D)}function di(p){return Pt(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function os(p,S){return p?S?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Oi(p,S,D){return typeof p=="string"?(p=encodeURI(p).replace(S,en),D&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function en(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var yr=/[#\/\?@]/g,ue=/[#\?:]/g,H=/[#\?]/g,Et=/[#\?@]/g,xr=/#/g;function Nr(p,S){this.h=this.g=null,this.i=p||null,this.j=!!S}function gi(p){p.g||(p.g=new Map,p.h=0,p.i&&ks(p.i,function(S,D){p.add(decodeURIComponent(S.replace(/\+/g," ")),D)}))}s=Nr.prototype,s.add=function(p,S){gi(this),this.i=null,p=Ls(this,p);let D=this.g.get(p);return D||this.g.set(p,D=[]),D.push(S),this.h+=1,this};function Ua(p,S){gi(p),S=Ls(p,S),p.g.has(S)&&(p.i=null,p.h-=p.g.get(S).length,p.g.delete(S))}function Qr(p,S){return gi(p),S=Ls(p,S),p.g.has(S)}s.forEach=function(p,S){gi(this),this.g.forEach(function(D,j){D.forEach(function(le){p.call(S,le,j,this)},this)},this)};function Tt(p,S){gi(p);let D=[];if(typeof S=="string")Qr(p,S)&&(D=D.concat(p.g.get(Ls(p,S))));else for(p=Array.from(p.g.values()),S=0;S<p.length;S++)D=D.concat(p[S]);return D}s.set=function(p,S){return gi(this),this.i=null,p=Ls(this,p),Qr(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[S]),this.h+=1,this},s.get=function(p,S){return p?(p=Tt(this,p),p.length>0?String(p[0]):S):S};function Bn(p,S,D){Ua(p,S),D.length>0&&(p.i=null,p.g.set(Ls(p,S),B(D)),p.h+=D.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],S=Array.from(this.g.keys());for(let j=0;j<S.length;j++){var D=S[j];const le=qr(D);D=Tt(this,D);for(let we=0;we<D.length;we++){let Ye=le;D[we]!==""&&(Ye+="="+qr(D[we])),p.push(Ye)}}return this.i=p.join("&")};function Uo(p){const S=new Nr;return S.i=p.i,p.g&&(S.g=new Map(p.g),S.h=p.h),S}function Ls(p,S){return S=String(S),p.j&&(S=S.toLowerCase()),S}function Ps(p,S){S&&!p.j&&(gi(p),p.i=null,p.g.forEach(function(D,j){const le=j.toLowerCase();j!=le&&(Ua(this,j),Bn(this,le,D))},p)),p.j=S}function mi(p,S){const D=new Ke;if(x.Image){const j=new Image;j.onload=C(Di,D,"TestLoadImage: loaded",!0,S,j),j.onerror=C(Di,D,"TestLoadImage: error",!1,S,j),j.onabort=C(Di,D,"TestLoadImage: abort",!1,S,j),j.ontimeout=C(Di,D,"TestLoadImage: timeout",!1,S,j),x.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=p}else S(!1)}function na(p,S){const D=new Ke,j=new AbortController,le=setTimeout(()=>{j.abort(),Di(D,"TestPingServer: timeout",!1,S)},1e4);fetch(p,{signal:j.signal}).then(we=>{clearTimeout(le),we.ok?Di(D,"TestPingServer: ok",!0,S):Di(D,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(le),Di(D,"TestPingServer: error",!1,S)})}function Di(p,S,D,j,le){try{le&&(le.onload=null,le.onerror=null,le.onabort=null,le.ontimeout=null),j(D)}catch{}}function Zn(){this.g=new Lr}function pi(p){this.i=p.Sb||null,this.h=p.ab||!1}R(pi,ti),pi.prototype.g=function(){return new yi(this.i,this.h)};function yi(p,S){et.call(this),this.H=p,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}R(yi,et),s=yi.prototype,s.open=function(p,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=S,this.readyState=1,Lt(this)},s.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(S.body=p),(this.H||x).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Bs(this)),this.readyState=0},s.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Lt(this)),this.g&&(this.readyState=3,Lt(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof x.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Nt(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function Nt(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}s.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var S=p.value?p.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!p.done}))&&(this.response=this.responseText+=S)}p.done?Bs(this):Lt(this),this.readyState==3&&Nt(this)}},s.Oa=function(p){this.g&&(this.response=this.responseText=p,Bs(this))},s.Na=function(p){this.g&&(this.response=p,Bs(this))},s.ga=function(){this.g&&Bs(this)};function Bs(p){p.readyState=4,p.l=null,p.j=null,p.B=null,Lt(p)}s.setRequestHeader=function(p,S){this.A.append(p,S)},s.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],S=this.h.entries();for(var D=S.next();!D.done;)D=D.value,p.push(D[0]+": "+D[1]),D=S.next();return p.join(`\r
`)};function Lt(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(yi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Vn(p){let S="";return qe(p,function(D,j){S+=j,S+=":",S+=D,S+=`\r
`}),S}function ra(p,S,D){e:{for(j in D){var j=!1;break e}j=!0}j||(D=Vn(D),typeof p=="string"?D!=null&&qr(D):Pt(p,S,D))}function On(p){et.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}R(On,et);var qi=/^https?$/i,Xi=["POST","PUT"];s=On.prototype,s.Fa=function(p){this.H=p},s.ea=function(p,S,D,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);S=S?S.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Gn.g(),this.g.onreadystatechange=P(w(this.Ca,this));try{this.B=!0,this.g.open(S,String(p),!0),this.B=!1}catch(we){ia(this,we);return}if(p=D||"",D=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var le in j)D.set(le,j[le]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const we of j.keys())D.set(we,j.get(we));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(D.keys()).find(we=>we.toLowerCase()=="content-type"),le=x.FormData&&p instanceof x.FormData,!(Array.prototype.indexOf.call(Xi,S,void 0)>=0)||j||le||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[we,Ye]of D)this.g.setRequestHeader(we,Ye);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(we){ia(this,we)}};function ia(p,S){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=S,p.o=5,vs(p),bi(p)}function vs(p){p.A||(p.A=!0,Vt(p,"complete"),Vt(p,"error"))}s.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,Vt(this,"complete"),Vt(this,"abort"),bi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bi(this,!0)),On.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Yi(this):this.Xa())},s.Xa=function(){Yi(this)};function Yi(p){if(p.h&&typeof g<"u"){if(p.v&&Mi(p)==4)setTimeout(p.Ca.bind(p),0);else if(Vt(p,"readystatechange"),Mi(p)==4){p.h=!1;try{const we=p.ca();e:switch(we){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var D;if(!(D=S)){var j;if(j=we===0){let Ye=String(p.D).match(nn)[1]||null;!Ye&&x.self&&x.self.location&&(Ye=x.self.location.protocol.slice(0,-1)),j=!qi.test(Ye?Ye.toLowerCase():"")}D=j}if(D)Vt(p,"complete"),Vt(p,"success");else{p.o=6;try{var le=Mi(p)>2?p.g.statusText:""}catch{le=""}p.l=le+" ["+p.ca()+"]",vs(p)}}finally{bi(p)}}}}function bi(p,S){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const D=p.g;p.g=null,S||Vt(p,"ready");try{D.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Mi(p){return p.g?p.g.readyState:0}s.ca=function(){try{return Mi(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(p){if(this.g){var S=this.g.responseText;return p&&S.indexOf(p)==0&&(S=S.substring(p.length)),Pn(S)}};function Er(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function vi(p){const S={};p=(p.g&&Mi(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<p.length;j++){if(G(p[j]))continue;var D=Xr(p[j]);const le=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const we=S[le]||[];S[le]=we,we.push(D)}ut(S,function(j){return j.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function sr(p,S,D){return D&&D.internalChannelParams&&D.internalChannelParams[p]||S}function Ts(p){this.za=0,this.i=[],this.j=new Ke,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=sr("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=sr("baseRetryDelayMs",5e3,p),this.Za=sr("retryDelaySeedMs",1e4,p),this.Ta=sr("forwardChannelMaxRetries",2,p),this.va=sr("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new ke(p&&p.concurrentRequestLimit),this.Ba=new Zn,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Ts.prototype,s.ka=8,s.I=1,s.connect=function(p,S,D,j){Oe(0),this.W=p,this.H=S||{},D&&j!==void 0&&(this.H.OSID=D,this.H.OAID=j),this.F=this.X,this.J=vl(this,null,this.W),ls(this)};function Fa(p){if(ja(p),p.I==3){var S=p.V++,D=hr(p.J);if(Pt(D,"SID",p.M),Pt(D,"RID",S),Pt(D,"TYPE","terminate"),Vs(p,D),S=new it(p,p.j,S),S.M=2,S.A=di(hr(D)),D=!1,x.navigator&&x.navigator.sendBeacon)try{D=x.navigator.sendBeacon(S.A.toString(),"")}catch{}!D&&x.Image&&(new Image().src=S.A,D=!0),D||(S.g=Ha(S.j,null),S.g.ea(S.A)),S.F=Date.now(),$t(S)}bl(p)}function Cs(p){p.g&&(xe(p),p.g.cancel(),p.g=null)}function ja(p){Cs(p),p.v&&(x.clearTimeout(p.v),p.v=null),fr(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&x.clearTimeout(p.m),p.m=null)}function ls(p){if(!Po(p.h)&&!p.m){p.m=!0;var S=p.Ea;pt||z(),je||(pt(),je=!0),F.add(S,p),p.D=0}}function za(p,S){return Nn(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=S.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=ft(w(p.Ea,p,S),Fo(p,p.D)),p.D++,!0)}s.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const le=new it(this,this.j,p);let we=this.o;if(this.U&&(we?(we=K(we),ve(we,this.U)):we=this.U),this.u!==null||this.R||(le.J=we,we=null),this.S)e:{for(var S=0,D=0;D<this.i.length;D++){t:{var j=this.i[D];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(S+=j,S>4096){S=D;break e}if(S===4096||D===this.i.length-1){S=D+1;break e}}S=1e3}else S=1e3;S=sa(this,le,S),D=hr(this.J),Pt(D,"RID",p),Pt(D,"CVER",22),this.G&&Pt(D,"X-HTTP-Session-Id",this.G),Vs(this,D),we&&(this.R?S="headers="+qr(Vn(we))+"&"+S:this.u&&ra(D,this.u,we)),Bo(this.h,le),this.Ra&&Pt(D,"TYPE","init"),this.S?(Pt(D,"$req",S),Pt(D,"SID","null"),le.U=!0,ee(le,D,null)):ee(le,D,S),this.I=2}}else this.I==3&&(p?Sn(this,p):this.i.length==0||Po(this.h)||Sn(this))};function Sn(p,S){var D;S?D=S.l:D=p.V++;const j=hr(p.J);Pt(j,"SID",p.M),Pt(j,"RID",D),Pt(j,"AID",p.K),Vs(p,j),p.u&&p.o&&ra(j,p.u,p.o),D=new it(p,p.j,D,p.D+1),p.u===null&&(D.J=p.o),S&&(p.i=S.G.concat(p.i)),S=sa(p,D,1e3),D.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),Bo(p.h,D),ee(D,j,S)}function Vs(p,S){p.H&&qe(p.H,function(D,j){Pt(S,j,D)}),p.l&&qe({},function(D,j){Pt(S,j,D)})}function sa(p,S,D){D=Math.min(p.i.length,D);const j=p.l?w(p.l.Ka,p.l,p):null;e:{var le=p.i;let Ht=-1;for(;;){const gr=["count="+D];Ht==-1?D>0?(Ht=le[0].g,gr.push("ofs="+Ht)):Ht=0:gr.push("ofs="+Ht);let Tn=!0;for(let Jn=0;Jn<D;Jn++){var we=le[Jn].g;const Ti=le[Jn].map;if(we-=Ht,we<0)Ht=Math.max(0,le[Jn].g-100),Tn=!1;else try{we="req"+we+"_"||"";try{var Ye=Ti instanceof Map?Ti:Object.entries(Ti);for(const[fs,Zr]of Ye){let Ci=Zr;T(Zr)&&(Ci=Rn(Zr)),gr.push(we+fs+"="+encodeURIComponent(Ci))}}catch(fs){throw gr.push(we+"type="+encodeURIComponent("_badmap")),fs}}catch{j&&j(Ti)}}if(Tn){Ye=gr.join("&");break e}}Ye=void 0}return p=p.i.splice(0,D),S.G=p,Ye}function Wi(p){if(!p.g&&!p.v){p.Y=1;var S=p.Da;pt||z(),je||(pt(),je=!0),F.add(S,p),p.A=0}}function aa(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=ft(w(p.Da,p),Fo(p,p.A)),p.A++,!0)}s.Da=function(){if(this.v=null,Wt(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=ft(w(this.Wa,this),p)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Oe(10),Cs(this),Wt(this))};function xe(p){p.B!=null&&(x.clearTimeout(p.B),p.B=null)}function Wt(p){p.g=new it(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var S=hr(p.na);Pt(S,"RID","rpc"),Pt(S,"SID",p.M),Pt(S,"AID",p.K),Pt(S,"CI",p.F?"0":"1"),!p.F&&p.ia&&Pt(S,"TO",p.ia),Pt(S,"TYPE","xmlhttp"),Vs(p,S),p.u&&p.o&&ra(S,p.u,p.o),p.O&&(p.g.H=p.O);var D=p.g;p=p.ba,D.M=1,D.A=di(hr(S)),D.u=null,D.R=!0,Ze(D,p)}s.Va=function(){this.C!=null&&(this.C=null,Cs(this),aa(this),Oe(19))};function fr(p){p.C!=null&&(x.clearTimeout(p.C),p.C=null)}function oa(p,S){var D=null;if(p.g==S){fr(p),xe(p),p.g=null;var j=2}else if(ni(p.h,S))D=S.G,mn(p.h,S),j=1;else return;if(p.I!=0){if(S.o)if(j==1){D=S.u?S.u.length:0,S=Date.now()-S.F;var le=p.D;j=Ir(),Vt(j,new rt(j,D)),ls(p)}else Wi(p);else if(le=S.m,le==3||le==0&&S.X>0||!(j==1&&za(p,S)||j==2&&aa(p)))switch(D&&D.length>0&&(S=p.h,S.i=S.i.concat(D)),le){case 1:cs(p,5);break;case 4:cs(p,10);break;case 3:cs(p,6);break;default:cs(p,2)}}}function Fo(p,S){let D=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(D*=2),D*S}function cs(p,S){if(p.j.info("Error code "+S),S==2){var D=w(p.bb,p),j=p.Ua;const le=!j;j=new ri(j||"//www.google.com/images/cleardot.gif"),x.location&&x.location.protocol=="http"||an(j,"https"),di(j),le?mi(j.toString(),D):na(j.toString(),D)}else Oe(2);p.I=0,p.l&&p.l.pa(S),bl(p),ja(p)}s.bb=function(p){p?(this.j.info("Successfully pinged google.com"),Oe(2)):(this.j.info("Failed to ping google.com"),Oe(1))};function bl(p){if(p.I=0,p.ja=[],p.l){const S=ln(p.h);(S.length!=0||p.i.length!=0)&&($(p.ja,S),$(p.ja,p.i),p.h.i.length=0,B(p.i),p.i.length=0),p.l.oa()}}function vl(p,S,D){var j=D instanceof ri?hr(D):new ri(D);if(j.g!="")S&&(j.g=S+"."+j.g),ii(j,j.u);else{var le=x.location;j=le.protocol,S=S?S+"."+le.hostname:le.hostname,le=+le.port;const we=new ri(null);j&&an(we,j),S&&(we.g=S),le&&ii(we,le),D&&(we.h=D),j=we}return D=p.G,S=p.wa,D&&S&&Pt(j,D,S),Pt(j,"VER",p.ka),Vs(p,j),j}function Ha(p,S,D){if(S&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=p.Aa&&!p.ma?new On(new pi({ab:D})):new On(p.ma),S.Fa(p.L),S}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function dr(){}s=dr.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function us(){}us.prototype.g=function(p,S){return new on(p,S)};function on(p,S){et.call(this),this.g=new Ts(S),this.l=p,this.h=S&&S.messageUrlParams||null,p=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(p?p["X-WebChannel-Content-Type"]=S.messageContentType:p={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(p?p["X-WebChannel-Client-Profile"]=S.sa:p={"X-WebChannel-Client-Profile":S.sa}),this.g.U=p,(p=S&&S.Qb)&&!G(p)&&(this.g.u=p),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!G(S)&&(this.g.G=S,p=this.h,p!==null&&S in p&&(p=this.h,S in p&&delete p[S])),this.j=new cn(this)}R(on,et),on.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){Fa(this.g)},on.prototype.o=function(p){var S=this.g;if(typeof p=="string"){var D={};D.__data__=p,p=D}else this.v&&(D={},D.__data__=Rn(p),p=D);S.i.push(new nr(S.Ya++,p)),S.I==3&&ls(S)},on.prototype.N=function(){this.g.l=null,delete this.j,Fa(this.g),delete this.g,on.Z.N.call(this)};function la(p){Me.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var S=p.__sm__;if(S){e:{for(const D in S){p=D;break e}p=void 0}(this.i=p)&&(p=this.i,S=S!==null&&p in S?S[p]:void 0),this.data=S}else this.data=p}R(la,Me);function hs(){zt.call(this),this.status=1}R(hs,zt);function cn(p){this.g=p}R(cn,dr),cn.prototype.ra=function(){Vt(this.g,"a")},cn.prototype.qa=function(p){Vt(this.g,new la(p))},cn.prototype.pa=function(p){Vt(this.g,new hs)},cn.prototype.oa=function(){Vt(this.g,"b")},us.prototype.createWebChannel=us.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,Ew=function(){return new us},xw=function(){return Ir()},yw=xt,V1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},dn.NO_ERROR=0,dn.TIMEOUT=8,dn.HTTP_ERROR=6,ff=dn,sn.COMPLETE="complete",pw=sn,Pr.EventType=Zt,Zt.OPEN="a",Zt.CLOSE="b",Zt.ERROR="c",Zt.MESSAGE="d",et.prototype.listen=et.prototype.J,uu=Pr,On.prototype.listenOnce=On.prototype.K,On.prototype.getLastError=On.prototype.Ha,On.prototype.getLastErrorCode=On.prototype.ya,On.prototype.getStatus=On.prototype.ca,On.prototype.getResponseJson=On.prototype.La,On.prototype.getResponseText=On.prototype.la,On.prototype.send=On.prototype.ea,On.prototype.setWithCredentials=On.prototype.Fa,mw=On}).apply(typeof ef<"u"?ef:typeof self<"u"?self:typeof window<"u"?window:{});const ex="@firebase/firestore",tx="4.9.2";class wi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wi.UNAUTHENTICATED=new wi(null),wi.GOOGLE_CREDENTIALS=new wi("google-credentials-uid"),wi.FIRST_PARTY=new wi("first-party-uid"),wi.MOCK_USER=new wi("mock-user");let xc="12.3.0";const gl=new cg("@firebase/firestore");function Jl(){return gl.logLevel}function mt(s,...e){if(gl.logLevel<=En.DEBUG){const n=e.map(wg);gl.debug(`Firestore (${xc}): ${s}`,...n)}}function La(s,...e){if(gl.logLevel<=En.ERROR){const n=e.map(wg);gl.error(`Firestore (${xc}): ${s}`,...n)}}function uc(s,...e){if(gl.logLevel<=En.WARN){const n=e.map(wg);gl.warn(`Firestore (${xc}): ${s}`,...n)}}function wg(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function Ft(s,e,n){let o="Unexpected state";typeof e=="string"?o=e:n=e,ww(s,o,n)}function ww(s,e,n){let o=`FIRESTORE (${xc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{o+=" CONTEXT: "+JSON.stringify(n)}catch{o+=" CONTEXT: "+n}throw La(o),new Error(o)}function zn(s,e,n,o){let h="Unexpected state";typeof n=="string"?h=n:o=n,s||ww(e,h,o)}function Qt(s,e){return s}const Re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ct extends ea{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Da{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class _w{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class F3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(wi.UNAUTHENTICATED)))}shutdown(){}}class j3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class z3{constructor(e){this.t=e,this.currentUser=wi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){zn(this.o===void 0,42304);let o=this.i;const h=b=>this.i!==o?(o=this.i,n(b)):Promise.resolve();let g=new Da;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Da,e.enqueueRetryable((()=>h(this.currentUser)))};const x=()=>{const b=g;e.enqueueRetryable((async()=>{await b.promise,await h(this.currentUser)}))},T=b=>{mt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.o&&(this.auth.addAuthTokenListener(this.o),x())};this.t.onInit((b=>T(b))),setTimeout((()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?T(b):(mt("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Da)}}),0),x()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((o=>this.i!==e?(mt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(zn(typeof o.accessToken=="string",31837,{l:o}),new _w(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return zn(e===null||typeof e=="string",2055,{h:e}),new wi(e)}}class H3{constructor(e,n,o){this.P=e,this.T=n,this.I=o,this.type="FirstParty",this.user=wi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class G3{constructor(e,n,o){this.P=e,this.T=n,this.I=o}getToken(){return Promise.resolve(new H3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(wi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class nx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class q3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ss(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){zn(this.o===void 0,3512);const o=g=>{g.error!=null&&mt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${g.error.message}`);const x=g.token!==this.m;return this.m=g.token,mt("FirebaseAppCheckTokenProvider",`Received ${x?"new":"existing"} token.`),x?n(g.token):Promise.resolve()};this.o=g=>{e.enqueueRetryable((()=>o(g)))};const h=g=>{mt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=g,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((g=>h(g))),setTimeout((()=>{if(!this.appCheck){const g=this.V.getImmediate({optional:!0});g?h(g):mt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new nx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(zn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new nx(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function X3(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let o=0;o<s;o++)n[o]=Math.floor(256*Math.random());return n}class _g{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const h=X3(40);for(let g=0;g<h.length;++g)o.length<20&&h[g]<n&&(o+=e.charAt(h[g]%62))}return o}}function wn(s,e){return s<e?-1:s>e?1:0}function U1(s,e){const n=Math.min(s.length,e.length);for(let o=0;o<n;o++){const h=s.charAt(o),g=e.charAt(o);if(h!==g)return x1(h)===x1(g)?wn(h,g):x1(h)?1:-1}return wn(s.length,e.length)}const Y3=55296,W3=57343;function x1(s){const e=s.charCodeAt(0);return e>=Y3&&e<=W3}function hc(s,e,n){return s.length===e.length&&s.every(((o,h)=>n(o,e[h])))}const rx="__name__";class Gs{constructor(e,n,o){n===void 0?n=0:n>e.length&&Ft(637,{offset:n,range:e.length}),o===void 0?o=e.length-n:o>e.length-n&&Ft(1746,{length:o,range:e.length-n}),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return Gs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gs?e.forEach((o=>{n.push(o)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let h=0;h<o;h++){const g=Gs.compareSegments(e.get(h),n.get(h));if(g!==0)return g}return wn(e.length,n.length)}static compareSegments(e,n){const o=Gs.isNumericId(e),h=Gs.isNumericId(n);return o&&!h?-1:!o&&h?1:o&&h?Gs.extractNumericId(e).compare(Gs.extractNumericId(n)):U1(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bo.fromString(e.substring(4,e.length-2))}}class rr extends Gs{construct(e,n,o){return new rr(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new ct(Re.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter((h=>h.length>0)))}return new rr(n)}static emptyPath(){return new rr([])}}const K3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hi extends Gs{construct(e,n,o){return new hi(e,n,o)}static isValidIdentifier(e){return K3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hi.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rx}static keyField(){return new hi([rx])}static fromServerFormat(e){const n=[];let o="",h=0;const g=()=>{if(o.length===0)throw new ct(Re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let x=!1;for(;h<e.length;){const T=e[h];if(T==="\\"){if(h+1===e.length)throw new ct(Re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const b=e[h+1];if(b!=="\\"&&b!=="."&&b!=="`")throw new ct(Re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=b,h+=2}else T==="`"?(x=!x,h++):T!=="."||x?(o+=T,h++):(g(),h++)}if(g(),x)throw new ct(Re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hi(n)}static emptyPath(){return new hi([])}}class Mt{constructor(e){this.path=e}static fromPath(e){return new Mt(rr.fromString(e))}static fromName(e){return new Mt(rr.fromString(e).popFirst(5))}static empty(){return new Mt(rr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return rr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Mt(new rr(e.slice()))}}function Aw(s,e,n){if(!n)throw new ct(Re.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Q3(s,e,n,o){if(e===!0&&o===!0)throw new ct(Re.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function ix(s){if(!Mt.isDocumentKey(s))throw new ct(Re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function sx(s){if(Mt.isDocumentKey(s))throw new ct(Re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function bw(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Jf(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ft(12329,{type:typeof s})}function Ri(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ct(Re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jf(s);throw new ct(Re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function Gr(s,e){const n={typeString:s};return e&&(n.value=e),n}function Vu(s,e){if(!bw(s))throw new ct(Re.INVALID_ARGUMENT,"JSON must be an object");let n;for(const o in e)if(e[o]){const h=e[o].typeString,g="value"in e[o]?{value:e[o].value}:void 0;if(!(o in s)){n=`JSON missing required field: '${o}'`;break}const x=s[o];if(h&&typeof x!==h){n=`JSON field '${o}' must be a ${h}.`;break}if(g!==void 0&&x!==g.value){n=`Expected '${o}' field to equal '${g.value}'`;break}}if(n)throw new ct(Re.INVALID_ARGUMENT,n);return!0}const ax=-62135596800,ox=1e6;class jn{static now(){return jn.fromMillis(Date.now())}static fromDate(e){return jn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor((e-1e3*n)*ox);return new jn(n,o)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ct(Re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ct(Re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ax)throw new ct(Re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ct(Re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ox}_compareTo(e){return this.seconds===e.seconds?wn(this.nanoseconds,e.nanoseconds):wn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:jn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vu(e,jn._jsonSchema))return new jn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ax;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}jn._jsonSchemaVersion="firestore/timestamp/1.0",jn._jsonSchema={type:Gr("string",jn._jsonSchemaVersion),seconds:Gr("number"),nanoseconds:Gr("number")};class Yt{static fromTimestamp(e){return new Yt(e)}static min(){return new Yt(new jn(0,0))}static max(){return new Yt(new jn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const vu=-1;function Z3(s,e){const n=s.toTimestamp().seconds,o=s.toTimestamp().nanoseconds+1,h=Yt.fromTimestamp(o===1e9?new jn(n+1,0):new jn(n,o));return new So(h,Mt.empty(),e)}function J3(s){return new So(s.readTime,s.key,vu)}class So{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new So(Yt.min(),Mt.empty(),vu)}static max(){return new So(Yt.max(),Mt.empty(),vu)}}function $3(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Mt.comparator(s.documentKey,e.documentKey),n!==0?n:wn(s.largestBatchId,e.largestBatchId))}const eS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ec(s){if(s.code!==Re.FAILED_PRECONDITION||s.message!==eS)throw s;mt("LocalStore","Unexpectedly lost primary lease")}class Pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ft(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Pe(((o,h)=>{this.nextCallback=g=>{this.wrapSuccess(e,g).next(o,h)},this.catchCallback=g=>{this.wrapFailure(n,g).next(o,h)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Pe?n:Pe.resolve(n)}catch(n){return Pe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Pe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Pe.reject(n)}static resolve(e){return new Pe(((n,o)=>{n(e)}))}static reject(e){return new Pe(((n,o)=>{o(e)}))}static waitFor(e){return new Pe(((n,o)=>{let h=0,g=0,x=!1;e.forEach((T=>{++h,T.next((()=>{++g,x&&g===h&&n()}),(b=>o(b)))})),x=!0,g===h&&n()}))}static or(e){let n=Pe.resolve(!1);for(const o of e)n=n.next((h=>h?Pe.resolve(h):o()));return n}static forEach(e,n){const o=[];return e.forEach(((h,g)=>{o.push(n.call(this,h,g))})),this.waitFor(o)}static mapArray(e,n){return new Pe(((o,h)=>{const g=e.length,x=new Array(g);let T=0;for(let b=0;b<g;b++){const w=b;n(e[w]).next((C=>{x[w]=C,++T,T===g&&o(x)}),(C=>h(C)))}}))}static doWhile(e,n){return new Pe(((o,h)=>{const g=()=>{e()===!0?n().next((()=>{g()}),h):o()};g()}))}}function nS(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function wc(s){return s.name==="IndexedDbTransactionError"}class $f{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>n.writeSequenceNumber(o))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}$f.ce=-1;const Ag=-1;function ed(s){return s==null}function Sf(s){return s===0&&1/s==-1/0}function rS(s){return typeof s=="number"&&Number.isInteger(s)&&!Sf(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const vw="";function iS(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=lx(e)),e=sS(s.get(n),e);return lx(e)}function sS(s,e){let n=e;const o=s.length;for(let h=0;h<o;h++){const g=s.charAt(h);switch(g){case"\0":n+="";break;case vw:n+="";break;default:n+=g}}return n}function lx(s){return s+vw+""}function cx(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function ko(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function Tw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class wr{constructor(e,n){this.comparator=e,this.root=n||ui.EMPTY}insert(e,n){return new wr(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ui.BLACK,null,null))}remove(e){return new wr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ui.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(o===0)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const h=this.comparator(e,o.key);if(h===0)return n+o.left.size;h<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,o)=>(e(n,o),!1)))}toString(){const e=[];return this.inorderTraversal(((n,o)=>(e.push(`${n}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tf(this.root,e,this.comparator,!1)}getReverseIterator(){return new tf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tf(this.root,e,this.comparator,!0)}}class tf{constructor(e,n,o,h){this.isReverse=h,this.nodeStack=[];let g=1;for(;!e.isEmpty();)if(g=n?o(e.key,n):1,n&&h&&(g*=-1),g<0)e=this.isReverse?e.left:e.right;else{if(g===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ui{constructor(e,n,o,h,g){this.key=e,this.value=n,this.color=o??ui.RED,this.left=h??ui.EMPTY,this.right=g??ui.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,h,g){return new ui(e??this.key,n??this.value,o??this.color,h??this.left,g??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let h=this;const g=o(e,h.key);return h=g<0?h.copy(null,null,null,h.left.insert(e,n,o),null):g===0?h.copy(null,n,null,null,null):h.copy(null,null,null,null,h.right.insert(e,n,o)),h.fixUp()}removeMin(){if(this.left.isEmpty())return ui.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,h=this;if(n(e,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(e,n),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),n(e,h.key)===0){if(h.right.isEmpty())return ui.EMPTY;o=h.right.min(),h=h.copy(o.key,o.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(e,n))}return h.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ui.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ui.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ft(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ft(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ft(27949);return e+(this.isRed()?0:1)}}ui.EMPTY=null,ui.RED=!0,ui.BLACK=!1;ui.EMPTY=new class{constructor(){this.size=0}get key(){throw Ft(57766)}get value(){throw Ft(16141)}get color(){throw Ft(16727)}get left(){throw Ft(29726)}get right(){throw Ft(36894)}copy(e,n,o,h,g){return this}insert(e,n,o){return new ui(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Kr{constructor(e){this.comparator=e,this.data=new wr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,o)=>(e(n),!1)))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const h=o.getNext();if(this.comparator(h.key,e[1])>=0)return;n(h.key)}}forEachWhile(e,n){let o;for(o=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ux(this.data.getIterator())}getIteratorFrom(e){return new ux(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((o=>{n=n.add(o)})),n}isEqual(e){if(!(e instanceof Kr)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const h=n.getNext().key,g=o.getNext().key;if(this.comparator(h,g)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Kr(this.comparator);return n.data=e,n}}class ux{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class as{constructor(e){this.fields=e,e.sort(hi.comparator)}static empty(){return new as([])}unionWith(e){let n=new Kr(hi.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new as(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return hc(this.fields,e.fields,((n,o)=>n.isEqual(o)))}}class Cw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class fi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(h){try{return atob(h)}catch(g){throw typeof DOMException<"u"&&g instanceof DOMException?new Cw("Invalid base64 string: "+g):g}})(e);return new fi(n)}static fromUint8Array(e){const n=(function(h){let g="";for(let x=0;x<h.length;++x)g+=String.fromCharCode(h[x]);return g})(e);return new fi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const o=new Uint8Array(n.length);for(let h=0;h<n.length;h++)o[h]=n.charCodeAt(h);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return wn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fi.EMPTY_BYTE_STRING=new fi("");const aS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Io(s){if(zn(!!s,39018),typeof s=="string"){let e=0;const n=aS.exec(s);if(zn(!!n,46558,{timestamp:s}),n[1]){let h=n[1];h=(h+"000000000").substr(0,9),e=Number(h)}const o=new Date(s);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:kr(s.seconds),nanos:kr(s.nanos)}}function kr(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ro(s){return typeof s=="string"?fi.fromBase64String(s):fi.fromUint8Array(s)}const Sw="server_timestamp",Iw="__type__",Rw="__previous_value__",Nw="__local_write_time__";function bg(s){return(s?.mapValue?.fields||{})[Iw]?.stringValue===Sw}function td(s){const e=s.mapValue.fields[Rw];return bg(e)?td(e):e}function Tu(s){const e=Io(s.mapValue.fields[Nw].timestampValue);return new jn(e.seconds,e.nanos)}class oS{constructor(e,n,o,h,g,x,T,b,w,C){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=h,this.ssl=g,this.forceLongPolling=x,this.autoDetectLongPolling=T,this.longPollingOptions=b,this.useFetchStreams=w,this.isUsingEmulator=C}}const If="(default)";class Cu{constructor(e,n){this.projectId=e,this.database=n||If}static empty(){return new Cu("","")}get isDefaultDatabase(){return this.database===If}isEqual(e){return e instanceof Cu&&e.projectId===this.projectId&&e.database===this.database}}const Ow="__type__",lS="__max__",nf={mapValue:{}},Dw="__vector__",Rf="value";function No(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?bg(s)?4:uS(s)?9007199254740991:cS(s)?10:11:Ft(28295,{value:s})}function Js(s,e){if(s===e)return!0;const n=No(s);if(n!==No(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Tu(s).isEqual(Tu(e));case 3:return(function(h,g){if(typeof h.timestampValue=="string"&&typeof g.timestampValue=="string"&&h.timestampValue.length===g.timestampValue.length)return h.timestampValue===g.timestampValue;const x=Io(h.timestampValue),T=Io(g.timestampValue);return x.seconds===T.seconds&&x.nanos===T.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(h,g){return Ro(h.bytesValue).isEqual(Ro(g.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(h,g){return kr(h.geoPointValue.latitude)===kr(g.geoPointValue.latitude)&&kr(h.geoPointValue.longitude)===kr(g.geoPointValue.longitude)})(s,e);case 2:return(function(h,g){if("integerValue"in h&&"integerValue"in g)return kr(h.integerValue)===kr(g.integerValue);if("doubleValue"in h&&"doubleValue"in g){const x=kr(h.doubleValue),T=kr(g.doubleValue);return x===T?Sf(x)===Sf(T):isNaN(x)&&isNaN(T)}return!1})(s,e);case 9:return hc(s.arrayValue.values||[],e.arrayValue.values||[],Js);case 10:case 11:return(function(h,g){const x=h.mapValue.fields||{},T=g.mapValue.fields||{};if(cx(x)!==cx(T))return!1;for(const b in x)if(x.hasOwnProperty(b)&&(T[b]===void 0||!Js(x[b],T[b])))return!1;return!0})(s,e);default:return Ft(52216,{left:s})}}function Su(s,e){return(s.values||[]).find((n=>Js(n,e)))!==void 0}function fc(s,e){if(s===e)return 0;const n=No(s),o=No(e);if(n!==o)return wn(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return wn(s.booleanValue,e.booleanValue);case 2:return(function(g,x){const T=kr(g.integerValue||g.doubleValue),b=kr(x.integerValue||x.doubleValue);return T<b?-1:T>b?1:T===b?0:isNaN(T)?isNaN(b)?0:-1:1})(s,e);case 3:return hx(s.timestampValue,e.timestampValue);case 4:return hx(Tu(s),Tu(e));case 5:return U1(s.stringValue,e.stringValue);case 6:return(function(g,x){const T=Ro(g),b=Ro(x);return T.compareTo(b)})(s.bytesValue,e.bytesValue);case 7:return(function(g,x){const T=g.split("/"),b=x.split("/");for(let w=0;w<T.length&&w<b.length;w++){const C=wn(T[w],b[w]);if(C!==0)return C}return wn(T.length,b.length)})(s.referenceValue,e.referenceValue);case 8:return(function(g,x){const T=wn(kr(g.latitude),kr(x.latitude));return T!==0?T:wn(kr(g.longitude),kr(x.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return fx(s.arrayValue,e.arrayValue);case 10:return(function(g,x){const T=g.fields||{},b=x.fields||{},w=T[Rf]?.arrayValue,C=b[Rf]?.arrayValue,R=wn(w?.values?.length||0,C?.values?.length||0);return R!==0?R:fx(w,C)})(s.mapValue,e.mapValue);case 11:return(function(g,x){if(g===nf.mapValue&&x===nf.mapValue)return 0;if(g===nf.mapValue)return 1;if(x===nf.mapValue)return-1;const T=g.fields||{},b=Object.keys(T),w=x.fields||{},C=Object.keys(w);b.sort(),C.sort();for(let R=0;R<b.length&&R<C.length;++R){const P=U1(b[R],C[R]);if(P!==0)return P;const B=fc(T[b[R]],w[C[R]]);if(B!==0)return B}return wn(b.length,C.length)})(s.mapValue,e.mapValue);default:throw Ft(23264,{he:n})}}function hx(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return wn(s,e);const n=Io(s),o=Io(e),h=wn(n.seconds,o.seconds);return h!==0?h:wn(n.nanos,o.nanos)}function fx(s,e){const n=s.values||[],o=e.values||[];for(let h=0;h<n.length&&h<o.length;++h){const g=fc(n[h],o[h]);if(g)return g}return wn(n.length,o.length)}function dc(s){return F1(s)}function F1(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const o=Io(n);return`time(${o.seconds},${o.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Ro(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return Mt.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let o="[",h=!0;for(const g of n.values||[])h?h=!1:o+=",",o+=F1(g);return o+"]"})(s.arrayValue):"mapValue"in s?(function(n){const o=Object.keys(n.fields||{}).sort();let h="{",g=!0;for(const x of o)g?g=!1:h+=",",h+=`${x}:${F1(n.fields[x])}`;return h+"}"})(s.mapValue):Ft(61005,{value:s})}function df(s){switch(No(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=td(s);return e?16+df(e):16;case 5:return 2*s.stringValue.length;case 6:return Ro(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((h,g)=>h+df(g)),0)})(s.arrayValue);case 10:case 11:return(function(o){let h=0;return ko(o.fields,((g,x)=>{h+=g.length+df(x)})),h})(s.mapValue);default:throw Ft(13486,{value:s})}}function dx(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function j1(s){return!!s&&"integerValue"in s}function vg(s){return!!s&&"arrayValue"in s}function gx(s){return!!s&&"nullValue"in s}function mx(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function gf(s){return!!s&&"mapValue"in s}function cS(s){return(s?.mapValue?.fields||{})[Ow]?.stringValue===Dw}function yu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return ko(s.mapValue.fields,((n,o)=>e.mapValue.fields[n]=yu(o))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yu(s.arrayValue.values[n]);return e}return{...s}}function uS(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===lS}class Hi{constructor(e){this.value=e}static empty(){return new Hi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!gf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yu(n)}setAll(e){let n=hi.emptyPath(),o={},h=[];e.forEach(((x,T)=>{if(!n.isImmediateParentOf(T)){const b=this.getFieldsMap(n);this.applyChanges(b,o,h),o={},h=[],n=T.popLast()}x?o[T.lastSegment()]=yu(x):h.push(T.lastSegment())}));const g=this.getFieldsMap(n);this.applyChanges(g,o,h)}delete(e){const n=this.field(e.popLast());gf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Js(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let h=n.mapValue.fields[e.get(o)];gf(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=h),n=h}return n.mapValue.fields}applyChanges(e,n,o){ko(n,((h,g)=>e[h]=g));for(const h of o)delete e[h]}clone(){return new Hi(yu(this.value))}}function Mw(s){const e=[];return ko(s.fields,((n,o)=>{const h=new hi([n]);if(gf(o)){const g=Mw(o.mapValue).fields;if(g.length===0)e.push(h);else for(const x of g)e.push(h.child(x))}else e.push(h)})),new as(e)}class _i{constructor(e,n,o,h,g,x,T){this.key=e,this.documentType=n,this.version=o,this.readTime=h,this.createTime=g,this.data=x,this.documentState=T}static newInvalidDocument(e){return new _i(e,0,Yt.min(),Yt.min(),Yt.min(),Hi.empty(),0)}static newFoundDocument(e,n,o,h){return new _i(e,1,n,Yt.min(),o,h,0)}static newNoDocument(e,n){return new _i(e,2,n,Yt.min(),Yt.min(),Hi.empty(),0)}static newUnknownDocument(e,n){return new _i(e,3,n,Yt.min(),Yt.min(),Hi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Yt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Yt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _i&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _i(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Nf{constructor(e,n){this.position=e,this.inclusive=n}}function px(s,e,n){let o=0;for(let h=0;h<s.position.length;h++){const g=e[h],x=s.position[h];if(g.field.isKeyField()?o=Mt.comparator(Mt.fromName(x.referenceValue),n.key):o=fc(x,n.data.field(g.field)),g.dir==="desc"&&(o*=-1),o!==0)break}return o}function yx(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Js(s.position[n],e.position[n]))return!1;return!0}class Iu{constructor(e,n="asc"){this.field=e,this.dir=n}}function hS(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class kw{}class Hr extends kw{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,o):new dS(e,n,o):n==="array-contains"?new pS(e,o):n==="in"?new yS(e,o):n==="not-in"?new xS(e,o):n==="array-contains-any"?new ES(e,o):new Hr(e,n,o)}static createKeyFieldInFilter(e,n,o){return n==="in"?new gS(e,o):new mS(e,o)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(fc(n,this.value)):n!==null&&No(this.value)===No(n)&&this.matchesComparison(fc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ft(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ms extends kw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ms(e,n)}matches(e){return Lw(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Lw(s){return s.op==="and"}function Pw(s){return fS(s)&&Lw(s)}function fS(s){for(const e of s.filters)if(e instanceof Ms)return!1;return!0}function z1(s){if(s instanceof Hr)return s.field.canonicalString()+s.op.toString()+dc(s.value);if(Pw(s))return s.filters.map((e=>z1(e))).join(",");{const e=s.filters.map((n=>z1(n))).join(",");return`${s.op}(${e})`}}function Bw(s,e){return s instanceof Hr?(function(o,h){return h instanceof Hr&&o.op===h.op&&o.field.isEqual(h.field)&&Js(o.value,h.value)})(s,e):s instanceof Ms?(function(o,h){return h instanceof Ms&&o.op===h.op&&o.filters.length===h.filters.length?o.filters.reduce(((g,x,T)=>g&&Bw(x,h.filters[T])),!0):!1})(s,e):void Ft(19439)}function Vw(s){return s instanceof Hr?(function(n){return`${n.field.canonicalString()} ${n.op} ${dc(n.value)}`})(s):s instanceof Ms?(function(n){return n.op.toString()+" {"+n.getFilters().map(Vw).join(" ,")+"}"})(s):"Filter"}class dS extends Hr{constructor(e,n,o){super(e,n,o),this.key=Mt.fromName(o.referenceValue)}matches(e){const n=Mt.comparator(e.key,this.key);return this.matchesComparison(n)}}class gS extends Hr{constructor(e,n){super(e,"in",n),this.keys=Uw("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class mS extends Hr{constructor(e,n){super(e,"not-in",n),this.keys=Uw("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Uw(s,e){return(e.arrayValue?.values||[]).map((n=>Mt.fromName(n.referenceValue)))}class pS extends Hr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return vg(n)&&Su(n.arrayValue,this.value)}}class yS extends Hr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Su(this.value.arrayValue,n)}}class xS extends Hr{constructor(e,n){super(e,"not-in",n)}matches(e){if(Su(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Su(this.value.arrayValue,n)}}class ES extends Hr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!vg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((o=>Su(this.value.arrayValue,o)))}}class wS{constructor(e,n=null,o=[],h=[],g=null,x=null,T=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=h,this.limit=g,this.startAt=x,this.endAt=T,this.Te=null}}function xx(s,e=null,n=[],o=[],h=null,g=null,x=null){return new wS(s,e,n,o,h,g,x)}function Tg(s){const e=Qt(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((o=>z1(o))).join(","),n+="|ob:",n+=e.orderBy.map((o=>(function(g){return g.field.canonicalString()+g.dir})(o))).join(","),ed(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((o=>dc(o))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((o=>dc(o))).join(",")),e.Te=n}return e.Te}function Cg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!hS(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!Bw(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!yx(s.startAt,e.startAt)&&yx(s.endAt,e.endAt)}function H1(s){return Mt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class _c{constructor(e,n=null,o=[],h=[],g=null,x="F",T=null,b=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=h,this.limit=g,this.limitType=x,this.startAt=T,this.endAt=b,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function _S(s,e,n,o,h,g,x,T){return new _c(s,e,n,o,h,g,x,T)}function nd(s){return new _c(s)}function Ex(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Fw(s){return s.collectionGroup!==null}function xu(s){const e=Qt(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const g of e.explicitOrderBy)e.Ie.push(g),n.add(g.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(x){let T=new Kr(hi.comparator);return x.filters.forEach((b=>{b.getFlattenedFilters().forEach((w=>{w.isInequality()&&(T=T.add(w.field))}))})),T})(e).forEach((g=>{n.has(g.canonicalString())||g.isKeyField()||e.Ie.push(new Iu(g,o))})),n.has(hi.keyField().canonicalString())||e.Ie.push(new Iu(hi.keyField(),o))}return e.Ie}function Ws(s){const e=Qt(s);return e.Ee||(e.Ee=AS(e,xu(s))),e.Ee}function AS(s,e){if(s.limitType==="F")return xx(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((h=>{const g=h.dir==="desc"?"asc":"desc";return new Iu(h.field,g)}));const n=s.endAt?new Nf(s.endAt.position,s.endAt.inclusive):null,o=s.startAt?new Nf(s.startAt.position,s.startAt.inclusive):null;return xx(s.path,s.collectionGroup,e,s.filters,s.limit,n,o)}}function G1(s,e){const n=s.filters.concat([e]);return new _c(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Of(s,e,n){return new _c(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function rd(s,e){return Cg(Ws(s),Ws(e))&&s.limitType===e.limitType}function jw(s){return`${Tg(Ws(s))}|lt:${s.limitType}`}function $l(s){return`Query(target=${(function(n){let o=n.path.canonicalString();return n.collectionGroup!==null&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map((h=>Vw(h))).join(", ")}]`),ed(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map((h=>(function(x){return`${x.field.canonicalString()} (${x.dir})`})(h))).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map((h=>dc(h))).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map((h=>dc(h))).join(",")),`Target(${o})`})(Ws(s))}; limitType=${s.limitType})`}function id(s,e){return e.isFoundDocument()&&(function(o,h){const g=h.key.path;return o.collectionGroup!==null?h.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(g):Mt.isDocumentKey(o.path)?o.path.isEqual(g):o.path.isImmediateParentOf(g)})(s,e)&&(function(o,h){for(const g of xu(o))if(!g.field.isKeyField()&&h.data.field(g.field)===null)return!1;return!0})(s,e)&&(function(o,h){for(const g of o.filters)if(!g.matches(h))return!1;return!0})(s,e)&&(function(o,h){return!(o.startAt&&!(function(x,T,b){const w=px(x,T,b);return x.inclusive?w<=0:w<0})(o.startAt,xu(o),h)||o.endAt&&!(function(x,T,b){const w=px(x,T,b);return x.inclusive?w>=0:w>0})(o.endAt,xu(o),h))})(s,e)}function bS(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function zw(s){return(e,n)=>{let o=!1;for(const h of xu(s)){const g=vS(h,e,n);if(g!==0)return g;o=o||h.field.isKeyField()}return 0}}function vS(s,e,n){const o=s.field.isKeyField()?Mt.comparator(e.key,n.key):(function(g,x,T){const b=x.data.field(g),w=T.data.field(g);return b!==null&&w!==null?fc(b,w):Ft(42886)})(s.field,e,n);switch(s.dir){case"asc":return o;case"desc":return-1*o;default:return Ft(19790,{direction:s.dir})}}class _l{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o!==void 0){for(const[h,g]of o)if(this.equalsFn(h,e))return g}}has(e){return this.get(e)!==void 0}set(e,n){const o=this.mapKeyFn(e),h=this.inner[o];if(h===void 0)return this.inner[o]=[[e,n]],void this.innerSize++;for(let g=0;g<h.length;g++)if(this.equalsFn(h[g][0],e))return void(h[g]=[e,n]);h.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o===void 0)return!1;for(let h=0;h<o.length;h++)if(this.equalsFn(o[h][0],e))return o.length===1?delete this.inner[n]:o.splice(h,1),this.innerSize--,!0;return!1}forEach(e){ko(this.inner,((n,o)=>{for(const[h,g]of o)e(h,g)}))}isEmpty(){return Tw(this.inner)}size(){return this.innerSize}}const TS=new wr(Mt.comparator);function Pa(){return TS}const Hw=new wr(Mt.comparator);function hu(...s){let e=Hw;for(const n of s)e=e.insert(n.key,n);return e}function Gw(s){let e=Hw;return s.forEach(((n,o)=>e=e.insert(n,o.overlayedDocument))),e}function sl(){return Eu()}function qw(){return Eu()}function Eu(){return new _l((s=>s.toString()),((s,e)=>s.isEqual(e)))}const CS=new wr(Mt.comparator),SS=new Kr(Mt.comparator);function _n(...s){let e=SS;for(const n of s)e=e.add(n);return e}const IS=new Kr(wn);function RS(){return IS}function Sg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sf(e)?"-0":e}}function Xw(s){return{integerValue:""+s}}function NS(s,e){return rS(e)?Xw(e):Sg(s,e)}class sd{constructor(){this._=void 0}}function OS(s,e,n){return s instanceof Ru?(function(h,g){const x={fields:{[Iw]:{stringValue:Sw},[Nw]:{timestampValue:{seconds:h.seconds,nanos:h.nanoseconds}}}};return g&&bg(g)&&(g=td(g)),g&&(x.fields[Rw]=g),{mapValue:x}})(n,e):s instanceof Nu?Ww(s,e):s instanceof Ou?Kw(s,e):(function(h,g){const x=Yw(h,g),T=wx(x)+wx(h.Ae);return j1(x)&&j1(h.Ae)?Xw(T):Sg(h.serializer,T)})(s,e)}function DS(s,e,n){return s instanceof Nu?Ww(s,e):s instanceof Ou?Kw(s,e):n}function Yw(s,e){return s instanceof Df?(function(o){return j1(o)||(function(g){return!!g&&"doubleValue"in g})(o)})(e)?e:{integerValue:0}:null}class Ru extends sd{}class Nu extends sd{constructor(e){super(),this.elements=e}}function Ww(s,e){const n=Qw(e);for(const o of s.elements)n.some((h=>Js(h,o)))||n.push(o);return{arrayValue:{values:n}}}class Ou extends sd{constructor(e){super(),this.elements=e}}function Kw(s,e){let n=Qw(e);for(const o of s.elements)n=n.filter((h=>!Js(h,o)));return{arrayValue:{values:n}}}class Df extends sd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function wx(s){return kr(s.integerValue||s.doubleValue)}function Qw(s){return vg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class MS{constructor(e,n){this.field=e,this.transform=n}}function kS(s,e){return s.field.isEqual(e.field)&&(function(o,h){return o instanceof Nu&&h instanceof Nu||o instanceof Ou&&h instanceof Ou?hc(o.elements,h.elements,Js):o instanceof Df&&h instanceof Df?Js(o.Ae,h.Ae):o instanceof Ru&&h instanceof Ru})(s.transform,e.transform)}class LS{constructor(e,n){this.version=e,this.transformResults=n}}class Ni{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ni}static exists(e){return new Ni(void 0,e)}static updateTime(e){return new Ni(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mf(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class ad{}function Zw(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new od(s.key,Ni.none()):new Uu(s.key,s.data,Ni.none());{const n=s.data,o=Hi.empty();let h=new Kr(hi.comparator);for(let g of e.fields)if(!h.has(g)){let x=n.field(g);x===null&&g.length>1&&(g=g.popLast(),x=n.field(g)),x===null?o.delete(g):o.set(g,x),h=h.add(g)}return new Lo(s.key,o,new as(h.toArray()),Ni.none())}}function PS(s,e,n){s instanceof Uu?(function(h,g,x){const T=h.value.clone(),b=Ax(h.fieldTransforms,g,x.transformResults);T.setAll(b),g.convertToFoundDocument(x.version,T).setHasCommittedMutations()})(s,e,n):s instanceof Lo?(function(h,g,x){if(!mf(h.precondition,g))return void g.convertToUnknownDocument(x.version);const T=Ax(h.fieldTransforms,g,x.transformResults),b=g.data;b.setAll(Jw(h)),b.setAll(T),g.convertToFoundDocument(x.version,b).setHasCommittedMutations()})(s,e,n):(function(h,g,x){g.convertToNoDocument(x.version).setHasCommittedMutations()})(0,e,n)}function wu(s,e,n,o){return s instanceof Uu?(function(g,x,T,b){if(!mf(g.precondition,x))return T;const w=g.value.clone(),C=bx(g.fieldTransforms,b,x);return w.setAll(C),x.convertToFoundDocument(x.version,w).setHasLocalMutations(),null})(s,e,n,o):s instanceof Lo?(function(g,x,T,b){if(!mf(g.precondition,x))return T;const w=bx(g.fieldTransforms,b,x),C=x.data;return C.setAll(Jw(g)),C.setAll(w),x.convertToFoundDocument(x.version,C).setHasLocalMutations(),T===null?null:T.unionWith(g.fieldMask.fields).unionWith(g.fieldTransforms.map((R=>R.field)))})(s,e,n,o):(function(g,x,T){return mf(g.precondition,x)?(x.convertToNoDocument(x.version).setHasLocalMutations(),null):T})(s,e,n)}function BS(s,e){let n=null;for(const o of s.fieldTransforms){const h=e.data.field(o.field),g=Yw(o.transform,h||null);g!=null&&(n===null&&(n=Hi.empty()),n.set(o.field,g))}return n||null}function _x(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(o,h){return o===void 0&&h===void 0||!(!o||!h)&&hc(o,h,((g,x)=>kS(g,x)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Uu extends ad{constructor(e,n,o,h=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=h,this.type=0}getFieldMask(){return null}}class Lo extends ad{constructor(e,n,o,h,g=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=h,this.fieldTransforms=g,this.type=1}getFieldMask(){return this.fieldMask}}function Jw(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const o=s.data.field(n);e.set(n,o)}})),e}function Ax(s,e,n){const o=new Map;zn(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let h=0;h<n.length;h++){const g=s[h],x=g.transform,T=e.data.field(g.field);o.set(g.field,DS(x,T,n[h]))}return o}function bx(s,e,n){const o=new Map;for(const h of s){const g=h.transform,x=n.data.field(h.field);o.set(h.field,OS(g,x,e))}return o}class od extends ad{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VS extends ad{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class US{constructor(e,n,o,h){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=h}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let h=0;h<this.mutations.length;h++){const g=this.mutations[h];g.key.isEqual(e.key)&&PS(g,e,o[h])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=wu(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=wu(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=qw();return this.mutations.forEach((h=>{const g=e.get(h.key),x=g.overlayedDocument;let T=this.applyToLocalView(x,g.mutatedFields);T=n.has(h.key)?null:T;const b=Zw(x,T);b!==null&&o.set(h.key,b),x.isValidDocument()||x.convertToNoDocument(Yt.min())})),o}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),_n())}isEqual(e){return this.batchId===e.batchId&&hc(this.mutations,e.mutations,((n,o)=>_x(n,o)))&&hc(this.baseMutations,e.baseMutations,((n,o)=>_x(n,o)))}}class Ig{constructor(e,n,o,h){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=h}static from(e,n,o){zn(e.mutations.length===o.length,58842,{me:e.mutations.length,fe:o.length});let h=(function(){return CS})();const g=e.mutations;for(let x=0;x<g.length;x++)h=h.insert(g[x].key,o[x].version);return new Ig(e,n,o,h)}}class FS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class jS{constructor(e,n){this.count=e,this.unchangedNames=n}}var zr,In;function zS(s){switch(s){case Re.OK:return Ft(64938);case Re.CANCELLED:case Re.UNKNOWN:case Re.DEADLINE_EXCEEDED:case Re.RESOURCE_EXHAUSTED:case Re.INTERNAL:case Re.UNAVAILABLE:case Re.UNAUTHENTICATED:return!1;case Re.INVALID_ARGUMENT:case Re.NOT_FOUND:case Re.ALREADY_EXISTS:case Re.PERMISSION_DENIED:case Re.FAILED_PRECONDITION:case Re.ABORTED:case Re.OUT_OF_RANGE:case Re.UNIMPLEMENTED:case Re.DATA_LOSS:return!0;default:return Ft(15467,{code:s})}}function $w(s){if(s===void 0)return La("GRPC error has no .code"),Re.UNKNOWN;switch(s){case zr.OK:return Re.OK;case zr.CANCELLED:return Re.CANCELLED;case zr.UNKNOWN:return Re.UNKNOWN;case zr.DEADLINE_EXCEEDED:return Re.DEADLINE_EXCEEDED;case zr.RESOURCE_EXHAUSTED:return Re.RESOURCE_EXHAUSTED;case zr.INTERNAL:return Re.INTERNAL;case zr.UNAVAILABLE:return Re.UNAVAILABLE;case zr.UNAUTHENTICATED:return Re.UNAUTHENTICATED;case zr.INVALID_ARGUMENT:return Re.INVALID_ARGUMENT;case zr.NOT_FOUND:return Re.NOT_FOUND;case zr.ALREADY_EXISTS:return Re.ALREADY_EXISTS;case zr.PERMISSION_DENIED:return Re.PERMISSION_DENIED;case zr.FAILED_PRECONDITION:return Re.FAILED_PRECONDITION;case zr.ABORTED:return Re.ABORTED;case zr.OUT_OF_RANGE:return Re.OUT_OF_RANGE;case zr.UNIMPLEMENTED:return Re.UNIMPLEMENTED;case zr.DATA_LOSS:return Re.DATA_LOSS;default:return Ft(39323,{code:s})}}(In=zr||(zr={}))[In.OK=0]="OK",In[In.CANCELLED=1]="CANCELLED",In[In.UNKNOWN=2]="UNKNOWN",In[In.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",In[In.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",In[In.NOT_FOUND=5]="NOT_FOUND",In[In.ALREADY_EXISTS=6]="ALREADY_EXISTS",In[In.PERMISSION_DENIED=7]="PERMISSION_DENIED",In[In.UNAUTHENTICATED=16]="UNAUTHENTICATED",In[In.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",In[In.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",In[In.ABORTED=10]="ABORTED",In[In.OUT_OF_RANGE=11]="OUT_OF_RANGE",In[In.UNIMPLEMENTED=12]="UNIMPLEMENTED",In[In.INTERNAL=13]="INTERNAL",In[In.UNAVAILABLE=14]="UNAVAILABLE",In[In.DATA_LOSS=15]="DATA_LOSS";function HS(){return new TextEncoder}const GS=new bo([4294967295,4294967295],0);function vx(s){const e=HS().encode(s),n=new gw;return n.update(e),new Uint8Array(n.digest())}function Tx(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),h=e.getUint32(8,!0),g=e.getUint32(12,!0);return[new bo([n,o],0),new bo([h,g],0)]}class Rg{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new fu(`Invalid padding: ${n}`);if(o<0)throw new fu(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new fu(`Invalid hash count: ${o}`);if(e.length===0&&n!==0)throw new fu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=bo.fromNumber(this.ge)}ye(e,n,o){let h=e.add(n.multiply(bo.fromNumber(o)));return h.compare(GS)===1&&(h=new bo([h.getBits(0),h.getBits(1)],0)),h.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=vx(e),[o,h]=Tx(n);for(let g=0;g<this.hashCount;g++){const x=this.ye(o,h,g);if(!this.we(x))return!1}return!0}static create(e,n,o){const h=e%8==0?0:8-e%8,g=new Uint8Array(Math.ceil(e/8)),x=new Rg(g,h,n);return o.forEach((T=>x.insert(T))),x}insert(e){if(this.ge===0)return;const n=vx(e),[o,h]=Tx(n);for(let g=0;g<this.hashCount;g++){const x=this.ye(o,h,g);this.Se(x)}}Se(e){const n=Math.floor(e/8),o=e%8;this.bitmap[n]|=1<<o}}class fu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ld{constructor(e,n,o,h,g){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=h,this.resolvedLimboDocuments=g}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const h=new Map;return h.set(e,Fu.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new ld(Yt.min(),h,new wr(wn),Pa(),_n())}}class Fu{constructor(e,n,o,h,g){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=h,this.removedDocuments=g}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new Fu(o,n,_n(),_n(),_n())}}class pf{constructor(e,n,o,h){this.be=e,this.removedTargetIds=n,this.key=o,this.De=h}}class e_{constructor(e,n){this.targetId=e,this.Ce=n}}class t_{constructor(e,n,o=fi.EMPTY_BYTE_STRING,h=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=h}}class Cx{constructor(){this.ve=0,this.Fe=Sx(),this.Me=fi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=_n(),n=_n(),o=_n();return this.Fe.forEach(((h,g)=>{switch(g){case 0:e=e.add(h);break;case 2:n=n.add(h);break;case 1:o=o.add(h);break;default:Ft(38017,{changeType:g})}})),new Fu(this.Me,this.xe,e,n,o)}qe(){this.Oe=!1,this.Fe=Sx()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,zn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class qS{constructor(e){this.Ge=e,this.ze=new Map,this.je=Pa(),this.Je=rf(),this.He=rf(),this.Ye=new wr(wn)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const o=this.nt(n);switch(e.state){case 0:this.rt(n)&&o.Le(e.resumeToken);break;case 1:o.Ke(),o.Ne||o.qe(),o.Le(e.resumeToken);break;case 2:o.Ke(),o.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(o.We(),o.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),o.Le(e.resumeToken));break;default:Ft(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((o,h)=>{this.rt(h)&&n(h)}))}st(e){const n=e.targetId,o=e.Ce.count,h=this.ot(n);if(h){const g=h.target;if(H1(g))if(o===0){const x=new Mt(g.path);this.et(n,x,_i.newNoDocument(x,Yt.min()))}else zn(o===1,20013,{expectedCount:o});else{const x=this._t(n);if(x!==o){const T=this.ut(e),b=T?this.ct(T,e,x):1;if(b!==0){this.it(n);const w=b===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,w)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:h=0},hashCount:g=0}=n;let x,T;try{x=Ro(o).toUint8Array()}catch(b){if(b instanceof Cw)return uc("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw b}try{T=new Rg(x,h,g)}catch(b){return uc(b instanceof fu?"BloomFilter error: ":"Applying bloom filter failed: ",b),null}return T.ge===0?null:T}ct(e,n,o){return n.Ce.count===o-this.Pt(e,n.targetId)?0:2}Pt(e,n){const o=this.Ge.getRemoteKeysForTarget(n);let h=0;return o.forEach((g=>{const x=this.Ge.ht(),T=`projects/${x.projectId}/databases/${x.database}/documents/${g.path.canonicalString()}`;e.mightContain(T)||(this.et(n,g,null),h++)})),h}Tt(e){const n=new Map;this.ze.forEach(((g,x)=>{const T=this.ot(x);if(T){if(g.current&&H1(T.target)){const b=new Mt(T.target.path);this.It(b).has(x)||this.Et(x,b)||this.et(x,b,_i.newNoDocument(b,e))}g.Be&&(n.set(x,g.ke()),g.qe())}}));let o=_n();this.He.forEach(((g,x)=>{let T=!0;x.forEachWhile((b=>{const w=this.ot(b);return!w||w.purpose==="TargetPurposeLimboResolution"||(T=!1,!1)})),T&&(o=o.add(g))})),this.je.forEach(((g,x)=>x.setReadTime(e)));const h=new ld(e,n,this.Ye,this.je,o);return this.je=Pa(),this.Je=rf(),this.He=rf(),this.Ye=new wr(wn),h}Xe(e,n){if(!this.rt(e))return;const o=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,o),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,o){if(!this.rt(e))return;const h=this.nt(e);this.Et(e,n)?h.Qe(n,1):h.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),o&&(this.je=this.je.insert(n,o))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Cx,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Kr(wn),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Kr(wn),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||mt("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Cx),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function rf(){return new wr(Mt.comparator)}function Sx(){return new wr(Mt.comparator)}const XS={asc:"ASCENDING",desc:"DESCENDING"},YS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WS={and:"AND",or:"OR"};class KS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function q1(s,e){return s.useProto3Json||ed(e)?e:{value:e}}function Mf(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function n_(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function QS(s,e){return Mf(s,e.toTimestamp())}function Ks(s){return zn(!!s,49232),Yt.fromTimestamp((function(n){const o=Io(n);return new jn(o.seconds,o.nanos)})(s))}function Ng(s,e){return X1(s,e).canonicalString()}function X1(s,e){const n=(function(h){return new rr(["projects",h.projectId,"databases",h.database])})(s).child("documents");return e===void 0?n:n.child(e)}function r_(s){const e=rr.fromString(s);return zn(l_(e),10190,{key:e.toString()}),e}function Y1(s,e){return Ng(s.databaseId,e.path)}function E1(s,e){const n=r_(e);if(n.get(1)!==s.databaseId.projectId)throw new ct(Re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new ct(Re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Mt(s_(n))}function i_(s,e){return Ng(s.databaseId,e)}function ZS(s){const e=r_(s);return e.length===4?rr.emptyPath():s_(e)}function W1(s){return new rr(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function s_(s){return zn(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Ix(s,e,n){return{name:Y1(s,e),fields:n.value.mapValue.fields}}function JS(s,e){let n;if("targetChange"in e){e.targetChange;const o=(function(w){return w==="NO_CHANGE"?0:w==="ADD"?1:w==="REMOVE"?2:w==="CURRENT"?3:w==="RESET"?4:Ft(39313,{state:w})})(e.targetChange.targetChangeType||"NO_CHANGE"),h=e.targetChange.targetIds||[],g=(function(w,C){return w.useProto3Json?(zn(C===void 0||typeof C=="string",58123),fi.fromBase64String(C||"")):(zn(C===void 0||C instanceof Buffer||C instanceof Uint8Array,16193),fi.fromUint8Array(C||new Uint8Array))})(s,e.targetChange.resumeToken),x=e.targetChange.cause,T=x&&(function(w){const C=w.code===void 0?Re.UNKNOWN:$w(w.code);return new ct(C,w.message||"")})(x);n=new t_(o,h,g,T||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const h=E1(s,o.document.name),g=Ks(o.document.updateTime),x=o.document.createTime?Ks(o.document.createTime):Yt.min(),T=new Hi({mapValue:{fields:o.document.fields}}),b=_i.newFoundDocument(h,g,x,T),w=o.targetIds||[],C=o.removedTargetIds||[];n=new pf(w,C,b.key,b)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const h=E1(s,o.document),g=o.readTime?Ks(o.readTime):Yt.min(),x=_i.newNoDocument(h,g),T=o.removedTargetIds||[];n=new pf([],T,x.key,x)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const h=E1(s,o.document),g=o.removedTargetIds||[];n=new pf([],g,h,null)}else{if(!("filter"in e))return Ft(11601,{Rt:e});{e.filter;const o=e.filter;o.targetId;const{count:h=0,unchangedNames:g}=o,x=new jS(h,g),T=o.targetId;n=new e_(T,x)}}return n}function $S(s,e){let n;if(e instanceof Uu)n={update:Ix(s,e.key,e.value)};else if(e instanceof od)n={delete:Y1(s,e.key)};else if(e instanceof Lo)n={update:Ix(s,e.key,e.data),updateMask:lI(e.fieldMask)};else{if(!(e instanceof VS))return Ft(16599,{Vt:e.type});n={verify:Y1(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((o=>(function(g,x){const T=x.transform;if(T instanceof Ru)return{fieldPath:x.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(T instanceof Nu)return{fieldPath:x.field.canonicalString(),appendMissingElements:{values:T.elements}};if(T instanceof Ou)return{fieldPath:x.field.canonicalString(),removeAllFromArray:{values:T.elements}};if(T instanceof Df)return{fieldPath:x.field.canonicalString(),increment:T.Ae};throw Ft(20930,{transform:x.transform})})(0,o)))),e.precondition.isNone||(n.currentDocument=(function(h,g){return g.updateTime!==void 0?{updateTime:QS(h,g.updateTime)}:g.exists!==void 0?{exists:g.exists}:Ft(27497)})(s,e.precondition)),n}function eI(s,e){return s&&s.length>0?(zn(e!==void 0,14353),s.map((n=>(function(h,g){let x=h.updateTime?Ks(h.updateTime):Ks(g);return x.isEqual(Yt.min())&&(x=Ks(g)),new LS(x,h.transformResults||[])})(n,e)))):[]}function tI(s,e){return{documents:[i_(s,e.path)]}}function nI(s,e){const n={structuredQuery:{}},o=e.path;let h;e.collectionGroup!==null?(h=o,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(h=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=i_(s,h);const g=(function(w){if(w.length!==0)return o_(Ms.create(w,"and"))})(e.filters);g&&(n.structuredQuery.where=g);const x=(function(w){if(w.length!==0)return w.map((C=>(function(P){return{field:ec(P.field),direction:sI(P.dir)}})(C)))})(e.orderBy);x&&(n.structuredQuery.orderBy=x);const T=q1(s,e.limit);return T!==null&&(n.structuredQuery.limit=T),e.startAt&&(n.structuredQuery.startAt=(function(w){return{before:w.inclusive,values:w.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(w){return{before:!w.inclusive,values:w.position}})(e.endAt)),{ft:n,parent:h}}function rI(s){let e=ZS(s.parent);const n=s.structuredQuery,o=n.from?n.from.length:0;let h=null;if(o>0){zn(o===1,65062);const C=n.from[0];C.allDescendants?h=C.collectionId:e=e.child(C.collectionId)}let g=[];n.where&&(g=(function(R){const P=a_(R);return P instanceof Ms&&Pw(P)?P.getFilters():[P]})(n.where));let x=[];n.orderBy&&(x=(function(R){return R.map((P=>(function($){return new Iu(tc($.field),(function(se){switch(se){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})($.direction))})(P)))})(n.orderBy));let T=null;n.limit&&(T=(function(R){let P;return P=typeof R=="object"?R.value:R,ed(P)?null:P})(n.limit));let b=null;n.startAt&&(b=(function(R){const P=!!R.before,B=R.values||[];return new Nf(B,P)})(n.startAt));let w=null;return n.endAt&&(w=(function(R){const P=!R.before,B=R.values||[];return new Nf(B,P)})(n.endAt)),_S(e,h,x,g,T,"F",b,w)}function iI(s,e){const n=(function(h){switch(h){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ft(28987,{purpose:h})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function a_(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=tc(n.unaryFilter.field);return Hr.create(o,"==",{doubleValue:NaN});case"IS_NULL":const h=tc(n.unaryFilter.field);return Hr.create(h,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const g=tc(n.unaryFilter.field);return Hr.create(g,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const x=tc(n.unaryFilter.field);return Hr.create(x,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ft(61313);default:return Ft(60726)}})(s):s.fieldFilter!==void 0?(function(n){return Hr.create(tc(n.fieldFilter.field),(function(h){switch(h){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ft(58110);default:return Ft(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Ms.create(n.compositeFilter.filters.map((o=>a_(o))),(function(h){switch(h){case"AND":return"and";case"OR":return"or";default:return Ft(1026)}})(n.compositeFilter.op))})(s):Ft(30097,{filter:s})}function sI(s){return XS[s]}function aI(s){return YS[s]}function oI(s){return WS[s]}function ec(s){return{fieldPath:s.canonicalString()}}function tc(s){return hi.fromServerFormat(s.fieldPath)}function o_(s){return s instanceof Hr?(function(n){if(n.op==="=="){if(mx(n.value))return{unaryFilter:{field:ec(n.field),op:"IS_NAN"}};if(gx(n.value))return{unaryFilter:{field:ec(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mx(n.value))return{unaryFilter:{field:ec(n.field),op:"IS_NOT_NAN"}};if(gx(n.value))return{unaryFilter:{field:ec(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ec(n.field),op:aI(n.op),value:n.value}}})(s):s instanceof Ms?(function(n){const o=n.getFilters().map((h=>o_(h)));return o.length===1?o[0]:{compositeFilter:{op:oI(n.op),filters:o}}})(s):Ft(54877,{filter:s})}function lI(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function l_(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class wo{constructor(e,n,o,h,g=Yt.min(),x=Yt.min(),T=fi.EMPTY_BYTE_STRING,b=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=h,this.snapshotVersion=g,this.lastLimboFreeSnapshotVersion=x,this.resumeToken=T,this.expectedCount=b}withSequenceNumber(e){return new wo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class cI{constructor(e){this.yt=e}}function uI(s){const e=rI({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Of(e,e.limit,"L"):e}class hI{constructor(){this.Cn=new fI}addToCollectionParentIndex(e,n){return this.Cn.add(n),Pe.resolve()}getCollectionParents(e,n){return Pe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Pe.resolve()}deleteFieldIndex(e,n){return Pe.resolve()}deleteAllFieldIndexes(e){return Pe.resolve()}createTargetIndexes(e,n){return Pe.resolve()}getDocumentsMatchingTarget(e,n){return Pe.resolve(null)}getIndexType(e,n){return Pe.resolve(0)}getFieldIndexes(e,n){return Pe.resolve([])}getNextCollectionGroupToUpdate(e){return Pe.resolve(null)}getMinOffset(e,n){return Pe.resolve(So.min())}getMinOffsetFromCollectionGroup(e,n){return Pe.resolve(So.min())}updateCollectionGroup(e,n,o){return Pe.resolve()}updateIndexEntries(e,n){return Pe.resolve()}}class fI{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),h=this.index[n]||new Kr(rr.comparator),g=!h.has(o);return this.index[n]=h.add(o),g}has(e){const n=e.lastSegment(),o=e.popLast(),h=this.index[n];return h&&h.has(o)}getEntries(e){return(this.index[e]||new Kr(rr.comparator)).toArray()}}const Rx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},c_=41943040;class zi{static withCacheSize(e){return new zi(e,zi.DEFAULT_COLLECTION_PERCENTILE,zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}}zi.DEFAULT_COLLECTION_PERCENTILE=10,zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zi.DEFAULT=new zi(c_,zi.DEFAULT_COLLECTION_PERCENTILE,zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zi.DISABLED=new zi(-1,0,0);class gc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new gc(0)}static cr(){return new gc(-1)}}const Nx="LruGarbageCollector",dI=1048576;function Ox([s,e],[n,o]){const h=wn(s,n);return h===0?wn(e,o):h}class gI{constructor(e){this.Ir=e,this.buffer=new Kr(Ox),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();Ox(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class mI{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){mt(Nx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){wc(n)?mt(Nx,"Ignoring IndexedDB error during garbage collection: ",n):await Ec(n)}await this.Vr(3e5)}))}}class pI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((o=>Math.floor(n/100*o)))}nthSequenceNumber(e,n){if(n===0)return Pe.resolve($f.ce);const o=new gI(n);return this.mr.forEachTarget(e,(h=>o.Ar(h.sequenceNumber))).next((()=>this.mr.pr(e,(h=>o.Ar(h))))).next((()=>o.maxValue))}removeTargets(e,n,o){return this.mr.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(mt("LruGarbageCollector","Garbage collection skipped; disabled"),Pe.resolve(Rx)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(mt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rx):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let o,h,g,x,T,b,w;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((R=>(R>this.params.maximumSequenceNumbersToCollect?(mt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),h=this.params.maximumSequenceNumbersToCollect):h=R,x=Date.now(),this.nthSequenceNumber(e,h)))).next((R=>(o=R,T=Date.now(),this.removeTargets(e,o,n)))).next((R=>(g=R,b=Date.now(),this.removeOrphanedDocuments(e,o)))).next((R=>(w=Date.now(),Jl()<=En.DEBUG&&mt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${x-C}ms
	Determined least recently used ${h} in `+(T-x)+`ms
	Removed ${g} targets in `+(b-T)+`ms
	Removed ${R} documents in `+(w-b)+`ms
Total Duration: ${w-C}ms`),Pe.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:g,documentsRemoved:R}))))}}function yI(s,e){return new pI(s,e)}class xI{constructor(){this.changes=new _l((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_i.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return o!==void 0?Pe.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class EI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class wI{constructor(e,n,o,h){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=h}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next((h=>(o=h,this.remoteDocumentCache.getEntry(e,n)))).next((h=>(o!==null&&wu(o.mutation,h,as.empty(),jn.now()),h)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.getLocalViewOfDocuments(e,o,_n()).next((()=>o))))}getLocalViewOfDocuments(e,n,o=_n()){const h=sl();return this.populateOverlays(e,h,n).next((()=>this.computeViews(e,n,h,o).next((g=>{let x=hu();return g.forEach(((T,b)=>{x=x.insert(T,b.overlayedDocument)})),x}))))}getOverlayedDocuments(e,n){const o=sl();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,_n())))}populateOverlays(e,n,o){const h=[];return o.forEach((g=>{n.has(g)||h.push(g)})),this.documentOverlayCache.getOverlays(e,h).next((g=>{g.forEach(((x,T)=>{n.set(x,T)}))}))}computeViews(e,n,o,h){let g=Pa();const x=Eu(),T=(function(){return Eu()})();return n.forEach(((b,w)=>{const C=o.get(w.key);h.has(w.key)&&(C===void 0||C.mutation instanceof Lo)?g=g.insert(w.key,w):C!==void 0?(x.set(w.key,C.mutation.getFieldMask()),wu(C.mutation,w,C.mutation.getFieldMask(),jn.now())):x.set(w.key,as.empty())})),this.recalculateAndSaveOverlays(e,g).next((b=>(b.forEach(((w,C)=>x.set(w,C))),n.forEach(((w,C)=>T.set(w,new EI(C,x.get(w)??null)))),T)))}recalculateAndSaveOverlays(e,n){const o=Eu();let h=new wr(((x,T)=>x-T)),g=_n();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((x=>{for(const T of x)T.keys().forEach((b=>{const w=n.get(b);if(w===null)return;let C=o.get(b)||as.empty();C=T.applyToLocalView(w,C),o.set(b,C);const R=(h.get(T.batchId)||_n()).add(b);h=h.insert(T.batchId,R)}))})).next((()=>{const x=[],T=h.getReverseIterator();for(;T.hasNext();){const b=T.getNext(),w=b.key,C=b.value,R=qw();C.forEach((P=>{if(!g.has(P)){const B=Zw(n.get(P),o.get(P));B!==null&&R.set(P,B),g=g.add(P)}})),x.push(this.documentOverlayCache.saveOverlays(e,w,R))}return Pe.waitFor(x)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,n,o,h){return(function(x){return Mt.isDocumentKey(x.path)&&x.collectionGroup===null&&x.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Fw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,h):this.getDocumentsMatchingCollectionQuery(e,n,o,h)}getNextDocuments(e,n,o,h){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,h).next((g=>{const x=h-g.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,h-g.size):Pe.resolve(sl());let T=vu,b=g;return x.next((w=>Pe.forEach(w,((C,R)=>(T<R.largestBatchId&&(T=R.largestBatchId),g.get(C)?Pe.resolve():this.remoteDocumentCache.getEntry(e,C).next((P=>{b=b.insert(C,P)}))))).next((()=>this.populateOverlays(e,w,g))).next((()=>this.computeViews(e,b,w,_n()))).next((C=>({batchId:T,changes:Gw(C)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Mt(n)).next((o=>{let h=hu();return o.isFoundDocument()&&(h=h.insert(o.key,o)),h}))}getDocumentsMatchingCollectionGroupQuery(e,n,o,h){const g=n.collectionGroup;let x=hu();return this.indexManager.getCollectionParents(e,g).next((T=>Pe.forEach(T,(b=>{const w=(function(R,P){return new _c(P,null,R.explicitOrderBy.slice(),R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt)})(n,b.child(g));return this.getDocumentsMatchingCollectionQuery(e,w,o,h).next((C=>{C.forEach(((R,P)=>{x=x.insert(R,P)}))}))})).next((()=>x))))}getDocumentsMatchingCollectionQuery(e,n,o,h){let g;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next((x=>(g=x,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,g,h)))).next((x=>{g.forEach(((b,w)=>{const C=w.getKey();x.get(C)===null&&(x=x.insert(C,_i.newInvalidDocument(C)))}));let T=hu();return x.forEach(((b,w)=>{const C=g.get(b);C!==void 0&&wu(C.mutation,w,as.empty(),jn.now()),id(n,w)&&(T=T.insert(b,w))})),T}))}}class _I{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Pe.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(h){return{id:h.id,version:h.version,createTime:Ks(h.createTime)}})(n)),Pe.resolve()}getNamedQuery(e,n){return Pe.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(h){return{name:h.name,query:uI(h.bundledQuery),readTime:Ks(h.readTime)}})(n)),Pe.resolve()}}class AI{constructor(){this.overlays=new wr(Mt.comparator),this.qr=new Map}getOverlay(e,n){return Pe.resolve(this.overlays.get(n))}getOverlays(e,n){const o=sl();return Pe.forEach(n,(h=>this.getOverlay(e,h).next((g=>{g!==null&&o.set(h,g)})))).next((()=>o))}saveOverlays(e,n,o){return o.forEach(((h,g)=>{this.St(e,n,g)})),Pe.resolve()}removeOverlaysForBatchId(e,n,o){const h=this.qr.get(o);return h!==void 0&&(h.forEach((g=>this.overlays=this.overlays.remove(g))),this.qr.delete(o)),Pe.resolve()}getOverlaysForCollection(e,n,o){const h=sl(),g=n.length+1,x=new Mt(n.child("")),T=this.overlays.getIteratorFrom(x);for(;T.hasNext();){const b=T.getNext().value,w=b.getKey();if(!n.isPrefixOf(w.path))break;w.path.length===g&&b.largestBatchId>o&&h.set(b.getKey(),b)}return Pe.resolve(h)}getOverlaysForCollectionGroup(e,n,o,h){let g=new wr(((w,C)=>w-C));const x=this.overlays.getIterator();for(;x.hasNext();){const w=x.getNext().value;if(w.getKey().getCollectionGroup()===n&&w.largestBatchId>o){let C=g.get(w.largestBatchId);C===null&&(C=sl(),g=g.insert(w.largestBatchId,C)),C.set(w.getKey(),w)}}const T=sl(),b=g.getIterator();for(;b.hasNext()&&(b.getNext().value.forEach(((w,C)=>T.set(w,C))),!(T.size()>=h)););return Pe.resolve(T)}St(e,n,o){const h=this.overlays.get(o.key);if(h!==null){const x=this.qr.get(h.largestBatchId).delete(o.key);this.qr.set(h.largestBatchId,x)}this.overlays=this.overlays.insert(o.key,new FS(n,o));let g=this.qr.get(n);g===void 0&&(g=_n(),this.qr.set(n,g)),this.qr.set(n,g.add(o.key))}}class bI{constructor(){this.sessionToken=fi.EMPTY_BYTE_STRING}getSessionToken(e){return Pe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Pe.resolve()}}class Og{constructor(){this.Qr=new Kr($r.$r),this.Ur=new Kr($r.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const o=new $r(e,n);this.Qr=this.Qr.add(o),this.Ur=this.Ur.add(o)}Wr(e,n){e.forEach((o=>this.addReference(o,n)))}removeReference(e,n){this.Gr(new $r(e,n))}zr(e,n){e.forEach((o=>this.removeReference(o,n)))}jr(e){const n=new Mt(new rr([])),o=new $r(n,e),h=new $r(n,e+1),g=[];return this.Ur.forEachInRange([o,h],(x=>{this.Gr(x),g.push(x.key)})),g}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Mt(new rr([])),o=new $r(n,e),h=new $r(n,e+1);let g=_n();return this.Ur.forEachInRange([o,h],(x=>{g=g.add(x.key)})),g}containsKey(e){const n=new $r(e,0),o=this.Qr.firstAfterOrEqual(n);return o!==null&&e.isEqual(o.key)}}class $r{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Mt.comparator(e.key,n.key)||wn(e.Yr,n.Yr)}static Kr(e,n){return wn(e.Yr,n.Yr)||Mt.comparator(e.key,n.key)}}class vI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Kr($r.$r)}checkEmpty(e){return Pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,o,h){const g=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const x=new US(g,n,o,h);this.mutationQueue.push(x);for(const T of h)this.Zr=this.Zr.add(new $r(T.key,g)),this.indexManager.addToCollectionParentIndex(e,T.key.path.popLast());return Pe.resolve(x)}lookupMutationBatch(e,n){return Pe.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const o=n+1,h=this.ei(o),g=h<0?0:h;return Pe.resolve(this.mutationQueue.length>g?this.mutationQueue[g]:null)}getHighestUnacknowledgedBatchId(){return Pe.resolve(this.mutationQueue.length===0?Ag:this.tr-1)}getAllMutationBatches(e){return Pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new $r(n,0),h=new $r(n,Number.POSITIVE_INFINITY),g=[];return this.Zr.forEachInRange([o,h],(x=>{const T=this.Xr(x.Yr);g.push(T)})),Pe.resolve(g)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new Kr(wn);return n.forEach((h=>{const g=new $r(h,0),x=new $r(h,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([g,x],(T=>{o=o.add(T.Yr)}))})),Pe.resolve(this.ti(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,h=o.length+1;let g=o;Mt.isDocumentKey(g)||(g=g.child(""));const x=new $r(new Mt(g),0);let T=new Kr(wn);return this.Zr.forEachWhile((b=>{const w=b.key.path;return!!o.isPrefixOf(w)&&(w.length===h&&(T=T.add(b.Yr)),!0)}),x),Pe.resolve(this.ti(T))}ti(e){const n=[];return e.forEach((o=>{const h=this.Xr(o);h!==null&&n.push(h)})),n}removeMutationBatch(e,n){zn(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Zr;return Pe.forEach(n.mutations,(h=>{const g=new $r(h.key,n.batchId);return o=o.delete(g),this.referenceDelegate.markPotentiallyOrphaned(e,h.key)})).next((()=>{this.Zr=o}))}ir(e){}containsKey(e,n){const o=new $r(n,0),h=this.Zr.firstAfterOrEqual(o);return Pe.resolve(n.isEqual(h&&h.key))}performConsistencyCheck(e){return this.mutationQueue.length,Pe.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class TI{constructor(e){this.ri=e,this.docs=(function(){return new wr(Mt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,h=this.docs.get(o),g=h?h.size:0,x=this.ri(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:x}),this.size+=x-g,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return Pe.resolve(o?o.document.mutableCopy():_i.newInvalidDocument(n))}getEntries(e,n){let o=Pa();return n.forEach((h=>{const g=this.docs.get(h);o=o.insert(h,g?g.document.mutableCopy():_i.newInvalidDocument(h))})),Pe.resolve(o)}getDocumentsMatchingQuery(e,n,o,h){let g=Pa();const x=n.path,T=new Mt(x.child("__id-9223372036854775808__")),b=this.docs.getIteratorFrom(T);for(;b.hasNext();){const{key:w,value:{document:C}}=b.getNext();if(!x.isPrefixOf(w.path))break;w.path.length>x.length+1||$3(J3(C),o)<=0||(h.has(C.key)||id(n,C))&&(g=g.insert(C.key,C.mutableCopy()))}return Pe.resolve(g)}getAllFromCollectionGroup(e,n,o,h){Ft(9500)}ii(e,n){return Pe.forEach(this.docs,(o=>n(o)))}newChangeBuffer(e){return new CI(this)}getSize(e){return Pe.resolve(this.size)}}class CI extends xI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((o,h)=>{h.isValidDocument()?n.push(this.Nr.addEntry(e,h)):this.Nr.removeEntry(o)})),Pe.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class SI{constructor(e){this.persistence=e,this.si=new _l((n=>Tg(n)),Cg),this.lastRemoteSnapshotVersion=Yt.min(),this.highestTargetId=0,this.oi=0,this._i=new Og,this.targetCount=0,this.ai=gc.ur()}forEachTarget(e,n){return this.si.forEach(((o,h)=>n(h))),Pe.resolve()}getLastRemoteSnapshotVersion(e){return Pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Pe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Pe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.oi&&(this.oi=n),Pe.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new gc(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Pe.resolve()}updateTargetData(e,n){return this.Pr(n),Pe.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Pe.resolve()}removeTargets(e,n,o){let h=0;const g=[];return this.si.forEach(((x,T)=>{T.sequenceNumber<=n&&o.get(T.targetId)===null&&(this.si.delete(x),g.push(this.removeMatchingKeysForTargetId(e,T.targetId)),h++)})),Pe.waitFor(g).next((()=>h))}getTargetCount(e){return Pe.resolve(this.targetCount)}getTargetData(e,n){const o=this.si.get(n)||null;return Pe.resolve(o)}addMatchingKeys(e,n,o){return this._i.Wr(n,o),Pe.resolve()}removeMatchingKeys(e,n,o){this._i.zr(n,o);const h=this.persistence.referenceDelegate,g=[];return h&&n.forEach((x=>{g.push(h.markPotentiallyOrphaned(e,x))})),Pe.waitFor(g)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Pe.resolve()}getMatchingKeysForTargetId(e,n){const o=this._i.Hr(n);return Pe.resolve(o)}containsKey(e,n){return Pe.resolve(this._i.containsKey(n))}}class u_{constructor(e,n){this.ui={},this.overlays={},this.ci=new $f(0),this.li=!1,this.li=!0,this.hi=new bI,this.referenceDelegate=e(this),this.Pi=new SI(this),this.indexManager=new hI,this.remoteDocumentCache=(function(h){return new TI(h)})((o=>this.referenceDelegate.Ti(o))),this.serializer=new cI(n),this.Ii=new _I(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new AI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.ui[e.toKey()];return o||(o=new vI(n,this.referenceDelegate),this.ui[e.toKey()]=o),o}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,o){mt("MemoryPersistence","Starting transaction:",e);const h=new II(this.ci.next());return this.referenceDelegate.Ei(),o(h).next((g=>this.referenceDelegate.di(h).next((()=>g)))).toPromise().then((g=>(h.raiseOnCommittedEvent(),g)))}Ai(e,n){return Pe.or(Object.values(this.ui).map((o=>()=>o.containsKey(e,n))))}}class II extends tS{constructor(e){super(),this.currentSequenceNumber=e}}class Dg{constructor(e){this.persistence=e,this.Ri=new Og,this.Vi=null}static mi(e){return new Dg(e)}get fi(){if(this.Vi)return this.Vi;throw Ft(60996)}addReference(e,n,o){return this.Ri.addReference(o,n),this.fi.delete(o.toString()),Pe.resolve()}removeReference(e,n,o){return this.Ri.removeReference(o,n),this.fi.add(o.toString()),Pe.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Pe.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((h=>this.fi.add(h.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next((h=>{h.forEach((g=>this.fi.add(g.toString())))})).next((()=>o.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Pe.forEach(this.fi,(o=>{const h=Mt.fromPath(o);return this.gi(e,h).next((g=>{g||n.removeEntry(h,Yt.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((o=>{o?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Pe.or([()=>Pe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class kf{constructor(e,n){this.persistence=e,this.pi=new _l((o=>iS(o.path)),((o,h)=>o.isEqual(h))),this.garbageCollector=yI(this,n)}static mi(e,n){return new kf(e,n)}Ei(){}di(e){return Pe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>n.next((h=>o+h))))}wr(e){let n=0;return this.pr(e,(o=>{n++})).next((()=>n))}pr(e,n){return Pe.forEach(this.pi,((o,h)=>this.br(e,o,h).next((g=>g?Pe.resolve():n(h)))))}removeTargets(e,n,o){return this.persistence.getTargetCache().removeTargets(e,n,o)}removeOrphanedDocuments(e,n){let o=0;const h=this.persistence.getRemoteDocumentCache(),g=h.newChangeBuffer();return h.ii(e,(x=>this.br(e,x,n).next((T=>{T||(o++,g.removeEntry(x,Yt.min()))})))).next((()=>g.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Pe.resolve()}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,n,o){return this.pi.set(o,e.currentSequenceNumber),Pe.resolve()}removeReference(e,n,o){return this.pi.set(o,e.currentSequenceNumber),Pe.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Pe.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=df(e.data.value)),n}br(e,n,o){return Pe.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const h=this.pi.get(n);return Pe.resolve(h!==void 0&&h>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Mg{constructor(e,n,o,h){this.targetId=e,this.fromCache=n,this.Es=o,this.ds=h}static As(e,n){let o=_n(),h=_n();for(const g of n.docChanges)switch(g.type){case 0:o=o.add(g.doc.key);break;case 1:h=h.add(g.doc.key)}return new Mg(e,n.fromCache,o,h)}}class RI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class NI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return nv()?8:nS(Ai())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,o,h){const g={result:null};return this.ys(e,n).next((x=>{g.result=x})).next((()=>{if(!g.result)return this.ws(e,n,h,o).next((x=>{g.result=x}))})).next((()=>{if(g.result)return;const x=new RI;return this.Ss(e,n,x).next((T=>{if(g.result=T,this.Vs)return this.bs(e,n,x,T.size)}))})).next((()=>g.result))}bs(e,n,o,h){return o.documentReadCount<this.fs?(Jl()<=En.DEBUG&&mt("QueryEngine","SDK will not create cache indexes for query:",$l(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Pe.resolve()):(Jl()<=En.DEBUG&&mt("QueryEngine","Query:",$l(n),"scans",o.documentReadCount,"local documents and returns",h,"documents as results."),o.documentReadCount>this.gs*h?(Jl()<=En.DEBUG&&mt("QueryEngine","The SDK decides to create cache indexes for query:",$l(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ws(n))):Pe.resolve())}ys(e,n){if(Ex(n))return Pe.resolve(null);let o=Ws(n);return this.indexManager.getIndexType(e,o).next((h=>h===0?null:(n.limit!==null&&h===1&&(n=Of(n,null,"F"),o=Ws(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next((g=>{const x=_n(...g);return this.ps.getDocuments(e,x).next((T=>this.indexManager.getMinOffset(e,o).next((b=>{const w=this.Ds(n,T);return this.Cs(n,w,x,b.readTime)?this.ys(e,Of(n,null,"F")):this.vs(e,w,n,b)}))))})))))}ws(e,n,o,h){return Ex(n)||h.isEqual(Yt.min())?Pe.resolve(null):this.ps.getDocuments(e,o).next((g=>{const x=this.Ds(n,g);return this.Cs(n,x,o,h)?Pe.resolve(null):(Jl()<=En.DEBUG&&mt("QueryEngine","Re-using previous result from %s to execute query: %s",h.toString(),$l(n)),this.vs(e,x,n,Z3(h,vu)).next((T=>T)))}))}Ds(e,n){let o=new Kr(zw(e));return n.forEach(((h,g)=>{id(e,g)&&(o=o.add(g))})),o}Cs(e,n,o,h){if(e.limit===null)return!1;if(o.size!==n.size)return!0;const g=e.limitType==="F"?n.last():n.first();return!!g&&(g.hasPendingWrites||g.version.compareTo(h)>0)}Ss(e,n,o){return Jl()<=En.DEBUG&&mt("QueryEngine","Using full collection scan to execute query:",$l(n)),this.ps.getDocumentsMatchingQuery(e,n,So.min(),o)}vs(e,n,o,h){return this.ps.getDocumentsMatchingQuery(e,o,h).next((g=>(n.forEach((x=>{g=g.insert(x.key,x)})),g)))}}const kg="LocalStore",OI=3e8;class DI{constructor(e,n,o,h){this.persistence=e,this.Fs=n,this.serializer=h,this.Ms=new wr(wn),this.xs=new _l((g=>Tg(g)),Cg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(o)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function MI(s,e,n,o){return new DI(s,e,n,o)}async function h_(s,e){const n=Qt(s);return await n.persistence.runTransaction("Handle user change","readonly",(o=>{let h;return n.mutationQueue.getAllMutationBatches(o).next((g=>(h=g,n.Bs(e),n.mutationQueue.getAllMutationBatches(o)))).next((g=>{const x=[],T=[];let b=_n();for(const w of h){x.push(w.batchId);for(const C of w.mutations)b=b.add(C.key)}for(const w of g){T.push(w.batchId);for(const C of w.mutations)b=b.add(C.key)}return n.localDocuments.getDocuments(o,b).next((w=>({Ls:w,removedBatchIds:x,addedBatchIds:T})))}))}))}function kI(s,e){const n=Qt(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const h=e.batch.keys(),g=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(T,b,w,C){const R=w.batch,P=R.keys();let B=Pe.resolve();return P.forEach(($=>{B=B.next((()=>C.getEntry(b,$))).next((ne=>{const se=w.docVersions.get($);zn(se!==null,48541),ne.version.compareTo(se)<0&&(R.applyToRemoteDocument(ne,w),ne.isValidDocument()&&(ne.setReadTime(w.commitVersion),C.addEntry(ne)))}))})),B.next((()=>T.mutationQueue.removeMutationBatch(b,R)))})(n,o,e,g).next((()=>g.apply(o))).next((()=>n.mutationQueue.performConsistencyCheck(o))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(o,h,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(T){let b=_n();for(let w=0;w<T.mutationResults.length;++w)T.mutationResults[w].transformResults.length>0&&(b=b.add(T.batch.mutations[w].key));return b})(e)))).next((()=>n.localDocuments.getDocuments(o,h)))}))}function f_(s){const e=Qt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function LI(s,e){const n=Qt(s),o=e.snapshotVersion;let h=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(g=>{const x=n.Ns.newChangeBuffer({trackRemovals:!0});h=n.Ms;const T=[];e.targetChanges.forEach(((C,R)=>{const P=h.get(R);if(!P)return;T.push(n.Pi.removeMatchingKeys(g,C.removedDocuments,R).next((()=>n.Pi.addMatchingKeys(g,C.addedDocuments,R))));let B=P.withSequenceNumber(g.currentSequenceNumber);e.targetMismatches.get(R)!==null?B=B.withResumeToken(fi.EMPTY_BYTE_STRING,Yt.min()).withLastLimboFreeSnapshotVersion(Yt.min()):C.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(C.resumeToken,o)),h=h.insert(R,B),(function(ne,se,Qe){return ne.resumeToken.approximateByteSize()===0||se.snapshotVersion.toMicroseconds()-ne.snapshotVersion.toMicroseconds()>=OI?!0:Qe.addedDocuments.size+Qe.modifiedDocuments.size+Qe.removedDocuments.size>0})(P,B,C)&&T.push(n.Pi.updateTargetData(g,B))}));let b=Pa(),w=_n();if(e.documentUpdates.forEach((C=>{e.resolvedLimboDocuments.has(C)&&T.push(n.persistence.referenceDelegate.updateLimboDocument(g,C))})),T.push(PI(g,x,e.documentUpdates).next((C=>{b=C.ks,w=C.qs}))),!o.isEqual(Yt.min())){const C=n.Pi.getLastRemoteSnapshotVersion(g).next((R=>n.Pi.setTargetsMetadata(g,g.currentSequenceNumber,o)));T.push(C)}return Pe.waitFor(T).next((()=>x.apply(g))).next((()=>n.localDocuments.getLocalViewOfDocuments(g,b,w))).next((()=>b))})).then((g=>(n.Ms=h,g)))}function PI(s,e,n){let o=_n(),h=_n();return n.forEach((g=>o=o.add(g))),e.getEntries(s,o).next((g=>{let x=Pa();return n.forEach(((T,b)=>{const w=g.get(T);b.isFoundDocument()!==w.isFoundDocument()&&(h=h.add(T)),b.isNoDocument()&&b.version.isEqual(Yt.min())?(e.removeEntry(T,b.readTime),x=x.insert(T,b)):!w.isValidDocument()||b.version.compareTo(w.version)>0||b.version.compareTo(w.version)===0&&w.hasPendingWrites?(e.addEntry(b),x=x.insert(T,b)):mt(kg,"Ignoring outdated watch update for ",T,". Current version:",w.version," Watch version:",b.version)})),{ks:x,qs:h}}))}function BI(s,e){const n=Qt(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=Ag),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function VI(s,e){const n=Qt(s);return n.persistence.runTransaction("Allocate target","readwrite",(o=>{let h;return n.Pi.getTargetData(o,e).next((g=>g?(h=g,Pe.resolve(h)):n.Pi.allocateTargetId(o).next((x=>(h=new wo(e,x,"TargetPurposeListen",o.currentSequenceNumber),n.Pi.addTargetData(o,h).next((()=>h)))))))})).then((o=>{const h=n.Ms.get(o.targetId);return(h===null||o.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(o.targetId,o),n.xs.set(e,o.targetId)),o}))}async function K1(s,e,n){const o=Qt(s),h=o.Ms.get(e),g=n?"readwrite":"readwrite-primary";try{n||await o.persistence.runTransaction("Release target",g,(x=>o.persistence.referenceDelegate.removeTarget(x,h)))}catch(x){if(!wc(x))throw x;mt(kg,`Failed to update sequence numbers for target ${e}: ${x}`)}o.Ms=o.Ms.remove(e),o.xs.delete(h.target)}function Dx(s,e,n){const o=Qt(s);let h=Yt.min(),g=_n();return o.persistence.runTransaction("Execute query","readwrite",(x=>(function(b,w,C){const R=Qt(b),P=R.xs.get(C);return P!==void 0?Pe.resolve(R.Ms.get(P)):R.Pi.getTargetData(w,C)})(o,x,Ws(e)).next((T=>{if(T)return h=T.lastLimboFreeSnapshotVersion,o.Pi.getMatchingKeysForTargetId(x,T.targetId).next((b=>{g=b}))})).next((()=>o.Fs.getDocumentsMatchingQuery(x,e,n?h:Yt.min(),n?g:_n()))).next((T=>(UI(o,bS(e),T),{documents:T,Qs:g})))))}function UI(s,e,n){let o=s.Os.get(e)||Yt.min();n.forEach(((h,g)=>{g.readTime.compareTo(o)>0&&(o=g.readTime)})),s.Os.set(e,o)}class Mx{constructor(){this.activeTargetIds=RS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FI{constructor(){this.Mo=new Mx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,o){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Mx,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class jI{Oo(e){}shutdown(){}}const kx="ConnectivityMonitor";class Lx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){mt(kx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){mt(kx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let sf=null;function Q1(){return sf===null?sf=(function(){return 268435456+Math.round(2147483648*Math.random())})():sf++,"0x"+sf.toString(16)}const w1="RestConnection",zI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class HI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),h=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${o}/databases/${h}`,this.Wo=this.databaseId.database===If?`project_id=${o}`:`project_id=${o}&database_id=${h}`}Go(e,n,o,h,g){const x=Q1(),T=this.zo(e,n.toUriEncodedString());mt(w1,`Sending RPC '${e}' ${x}:`,T,o);const b={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(b,h,g);const{host:w}=new URL(T),C=Mo(w);return this.Jo(e,T,b,o,C).then((R=>(mt(w1,`Received RPC '${e}' ${x}: `,R),R)),(R=>{throw uc(w1,`RPC '${e}' ${x} failed with error: `,R,"url: ",T,"request:",o),R}))}Ho(e,n,o,h,g,x){return this.Go(e,n,o,h,g)}jo(e,n,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+xc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((h,g)=>e[g]=h)),o&&o.headers.forEach(((h,g)=>e[g]=h))}zo(e,n){const o=zI[e];return`${this.Uo}/v1/${n}:${o}`}terminate(){}}class GI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Ei="WebChannelConnection";class qI extends HI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,o,h,g){const x=Q1();return new Promise(((T,b)=>{const w=new mw;w.setWithCredentials(!0),w.listenOnce(pw.COMPLETE,(()=>{try{switch(w.getLastErrorCode()){case ff.NO_ERROR:const R=w.getResponseJson();mt(Ei,`XHR for RPC '${e}' ${x} received:`,JSON.stringify(R)),T(R);break;case ff.TIMEOUT:mt(Ei,`RPC '${e}' ${x} timed out`),b(new ct(Re.DEADLINE_EXCEEDED,"Request time out"));break;case ff.HTTP_ERROR:const P=w.getStatus();if(mt(Ei,`RPC '${e}' ${x} failed with status:`,P,"response text:",w.getResponseText()),P>0){let B=w.getResponseJson();Array.isArray(B)&&(B=B[0]);const $=B?.error;if($&&$.status&&$.message){const ne=(function(Qe){const Le=Qe.toLowerCase().replace(/_/g,"-");return Object.values(Re).indexOf(Le)>=0?Le:Re.UNKNOWN})($.status);b(new ct(ne,$.message))}else b(new ct(Re.UNKNOWN,"Server responded with status "+w.getStatus()))}else b(new ct(Re.UNAVAILABLE,"Connection failed."));break;default:Ft(9055,{l_:e,streamId:x,h_:w.getLastErrorCode(),P_:w.getLastError()})}}finally{mt(Ei,`RPC '${e}' ${x} completed.`)}}));const C=JSON.stringify(h);mt(Ei,`RPC '${e}' ${x} sending request:`,h),w.send(n,"POST",C,o,15)}))}T_(e,n,o){const h=Q1(),g=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],x=Ew(),T=xw(),b={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;w!==void 0&&(b.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(b.useFetchStreams=!0),this.jo(b.initMessageHeaders,n,o),b.encodeInitMessageHeaders=!0;const C=g.join("");mt(Ei,`Creating RPC '${e}' stream ${h}: ${C}`,b);const R=x.createWebChannel(C,b);this.I_(R);let P=!1,B=!1;const $=new GI({Yo:se=>{B?mt(Ei,`Not sending because RPC '${e}' stream ${h} is closed:`,se):(P||(mt(Ei,`Opening RPC '${e}' stream ${h} transport.`),R.open(),P=!0),mt(Ei,`RPC '${e}' stream ${h} sending:`,se),R.send(se))},Zo:()=>R.close()}),ne=(se,Qe,Le)=>{se.listen(Qe,(he=>{try{Le(he)}catch(Ue){setTimeout((()=>{throw Ue}),0)}}))};return ne(R,uu.EventType.OPEN,(()=>{B||(mt(Ei,`RPC '${e}' stream ${h} transport opened.`),$.o_())})),ne(R,uu.EventType.CLOSE,(()=>{B||(B=!0,mt(Ei,`RPC '${e}' stream ${h} transport closed`),$.a_(),this.E_(R))})),ne(R,uu.EventType.ERROR,(se=>{B||(B=!0,uc(Ei,`RPC '${e}' stream ${h} transport errored. Name:`,se.name,"Message:",se.message),$.a_(new ct(Re.UNAVAILABLE,"The operation could not be completed")))})),ne(R,uu.EventType.MESSAGE,(se=>{if(!B){const Qe=se.data[0];zn(!!Qe,16349);const Le=Qe,he=Le?.error||Le[0]?.error;if(he){mt(Ei,`RPC '${e}' stream ${h} received error:`,he);const Ue=he.status;let pt=(function(z){const U=zr[z];if(U!==void 0)return $w(U)})(Ue),je=he.message;pt===void 0&&(pt=Re.INTERNAL,je="Unknown error status: "+Ue+" with message "+he.message),B=!0,$.a_(new ct(pt,je)),R.close()}else mt(Ei,`RPC '${e}' stream ${h} received:`,Qe),$.u_(Qe)}})),ne(T,yw.STAT_EVENT,(se=>{se.stat===V1.PROXY?mt(Ei,`RPC '${e}' stream ${h} detected buffering proxy`):se.stat===V1.NOPROXY&&mt(Ei,`RPC '${e}' stream ${h} detected no buffering proxy`)})),setTimeout((()=>{$.__()}),0),$}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function _1(){return typeof document<"u"?document:null}function cd(s){return new KS(s,!0)}class d_{constructor(e,n,o=1e3,h=1.5,g=6e4){this.Mi=e,this.timerId=n,this.d_=o,this.A_=h,this.R_=g,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),o=Math.max(0,Date.now()-this.f_),h=Math.max(0,n-o);h>0&&mt("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,h,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Px="PersistentStream";class g_{constructor(e,n,o,h,g,x,T,b){this.Mi=e,this.S_=o,this.b_=h,this.connection=g,this.authCredentialsProvider=x,this.appCheckCredentialsProvider=T,this.listener=b,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new d_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Re.RESOURCE_EXHAUSTED?(La(n.toString()),La("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,h])=>{this.D_===n&&this.G_(o,h)}),(o=>{e((()=>{const h=new ct(Re.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(h)}))}))}G_(e,n){const o=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{o((()=>this.listener.Xo()))})),this.stream.t_((()=>{o((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((h=>{o((()=>this.z_(h)))})),this.stream.onMessage((h=>{o((()=>++this.F_==1?this.J_(h):this.onNext(h)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return mt(Px,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(mt(Px,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class XI extends g_{constructor(e,n,o,h,g,x){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,h,x),this.serializer=g}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=JS(this.serializer,e),o=(function(g){if(!("targetChange"in g))return Yt.min();const x=g.targetChange;return x.targetIds&&x.targetIds.length?Yt.min():x.readTime?Ks(x.readTime):Yt.min()})(e);return this.listener.H_(n,o)}Y_(e){const n={};n.database=W1(this.serializer),n.addTarget=(function(g,x){let T;const b=x.target;if(T=H1(b)?{documents:tI(g,b)}:{query:nI(g,b).ft},T.targetId=x.targetId,x.resumeToken.approximateByteSize()>0){T.resumeToken=n_(g,x.resumeToken);const w=q1(g,x.expectedCount);w!==null&&(T.expectedCount=w)}else if(x.snapshotVersion.compareTo(Yt.min())>0){T.readTime=Mf(g,x.snapshotVersion.toTimestamp());const w=q1(g,x.expectedCount);w!==null&&(T.expectedCount=w)}return T})(this.serializer,e);const o=iI(this.serializer,e);o&&(n.labels=o),this.q_(n)}Z_(e){const n={};n.database=W1(this.serializer),n.removeTarget=e,this.q_(n)}}class YI extends g_{constructor(e,n,o,h,g,x){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,h,x),this.serializer=g}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return zn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,zn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){zn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=eI(e.writeResults,e.commitTime),o=Ks(e.commitTime);return this.listener.na(o,n)}ra(){const e={};e.database=W1(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((o=>$S(this.serializer,o)))};this.q_(n)}}class WI{}class KI extends WI{constructor(e,n,o,h){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=h,this.ia=!1}sa(){if(this.ia)throw new ct(Re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,o,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([g,x])=>this.connection.Go(e,X1(n,o),h,g,x))).catch((g=>{throw g.name==="FirebaseError"?(g.code===Re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g):new ct(Re.UNKNOWN,g.toString())}))}Ho(e,n,o,h,g){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([x,T])=>this.connection.Ho(e,X1(n,o),h,x,T,g))).catch((x=>{throw x.name==="FirebaseError"?(x.code===Re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),x):new ct(Re.UNKNOWN,x.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class QI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(La(n),this.aa=!1):mt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ml="RemoteStore";class ZI{constructor(e,n,o,h,g){this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=g,this.Aa.Oo((x=>{o.enqueueAndForget((async()=>{Al(this)&&(mt(ml,"Restarting streams for network reachability change."),await(async function(b){const w=Qt(b);w.Ea.add(4),await ju(w),w.Ra.set("Unknown"),w.Ea.delete(4),await ud(w)})(this))}))})),this.Ra=new QI(o,h)}}async function ud(s){if(Al(s))for(const e of s.da)await e(!0)}async function ju(s){for(const e of s.da)await e(!1)}function m_(s,e){const n=Qt(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Vg(n)?Bg(n):Ac(n).O_()&&Pg(n,e))}function Lg(s,e){const n=Qt(s),o=Ac(n);n.Ia.delete(e),o.O_()&&p_(n,e),n.Ia.size===0&&(o.O_()?o.L_():Al(n)&&n.Ra.set("Unknown"))}function Pg(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Yt.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ac(s).Y_(e)}function p_(s,e){s.Va.Ue(e),Ac(s).Z_(e)}function Bg(s){s.Va=new qS({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Ac(s).start(),s.Ra.ua()}function Vg(s){return Al(s)&&!Ac(s).x_()&&s.Ia.size>0}function Al(s){return Qt(s).Ea.size===0}function y_(s){s.Va=void 0}async function JI(s){s.Ra.set("Online")}async function $I(s){s.Ia.forEach(((e,n)=>{Pg(s,e)}))}async function e4(s,e){y_(s),Vg(s)?(s.Ra.ha(e),Bg(s)):s.Ra.set("Unknown")}async function t4(s,e,n){if(s.Ra.set("Online"),e instanceof t_&&e.state===2&&e.cause)try{await(async function(h,g){const x=g.cause;for(const T of g.targetIds)h.Ia.has(T)&&(await h.remoteSyncer.rejectListen(T,x),h.Ia.delete(T),h.Va.removeTarget(T))})(s,e)}catch(o){mt(ml,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await Lf(s,o)}else if(e instanceof pf?s.Va.Ze(e):e instanceof e_?s.Va.st(e):s.Va.tt(e),!n.isEqual(Yt.min()))try{const o=await f_(s.localStore);n.compareTo(o)>=0&&await(function(g,x){const T=g.Va.Tt(x);return T.targetChanges.forEach(((b,w)=>{if(b.resumeToken.approximateByteSize()>0){const C=g.Ia.get(w);C&&g.Ia.set(w,C.withResumeToken(b.resumeToken,x))}})),T.targetMismatches.forEach(((b,w)=>{const C=g.Ia.get(b);if(!C)return;g.Ia.set(b,C.withResumeToken(fi.EMPTY_BYTE_STRING,C.snapshotVersion)),p_(g,b);const R=new wo(C.target,b,w,C.sequenceNumber);Pg(g,R)})),g.remoteSyncer.applyRemoteEvent(T)})(s,n)}catch(o){mt(ml,"Failed to raise snapshot:",o),await Lf(s,o)}}async function Lf(s,e,n){if(!wc(e))throw e;s.Ea.add(1),await ju(s),s.Ra.set("Offline"),n||(n=()=>f_(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{mt(ml,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await ud(s)}))}function x_(s,e){return e().catch((n=>Lf(s,n,e)))}async function hd(s){const e=Qt(s),n=Oo(e);let o=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ag;for(;n4(e);)try{const h=await BI(e.localStore,o);if(h===null){e.Ta.length===0&&n.L_();break}o=h.batchId,r4(e,h)}catch(h){await Lf(e,h)}E_(e)&&w_(e)}function n4(s){return Al(s)&&s.Ta.length<10}function r4(s,e){s.Ta.push(e);const n=Oo(s);n.O_()&&n.X_&&n.ea(e.mutations)}function E_(s){return Al(s)&&!Oo(s).x_()&&s.Ta.length>0}function w_(s){Oo(s).start()}async function i4(s){Oo(s).ra()}async function s4(s){const e=Oo(s);for(const n of s.Ta)e.ea(n.mutations)}async function a4(s,e,n){const o=s.Ta.shift(),h=Ig.from(o,e,n);await x_(s,(()=>s.remoteSyncer.applySuccessfulWrite(h))),await hd(s)}async function o4(s,e){e&&Oo(s).X_&&await(async function(o,h){if((function(x){return zS(x)&&x!==Re.ABORTED})(h.code)){const g=o.Ta.shift();Oo(o).B_(),await x_(o,(()=>o.remoteSyncer.rejectFailedWrite(g.batchId,h))),await hd(o)}})(s,e),E_(s)&&w_(s)}async function Bx(s,e){const n=Qt(s);n.asyncQueue.verifyOperationInProgress(),mt(ml,"RemoteStore received new credentials");const o=Al(n);n.Ea.add(3),await ju(n),o&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ud(n)}async function l4(s,e){const n=Qt(s);e?(n.Ea.delete(2),await ud(n)):e||(n.Ea.add(2),await ju(n),n.Ra.set("Unknown"))}function Ac(s){return s.ma||(s.ma=(function(n,o,h){const g=Qt(n);return g.sa(),new XI(o,g.connection,g.authCredentials,g.appCheckCredentials,g.serializer,h)})(s.datastore,s.asyncQueue,{Xo:JI.bind(null,s),t_:$I.bind(null,s),r_:e4.bind(null,s),H_:t4.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Vg(s)?Bg(s):s.Ra.set("Unknown")):(await s.ma.stop(),y_(s))}))),s.ma}function Oo(s){return s.fa||(s.fa=(function(n,o,h){const g=Qt(n);return g.sa(),new YI(o,g.connection,g.authCredentials,g.appCheckCredentials,g.serializer,h)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:i4.bind(null,s),r_:o4.bind(null,s),ta:s4.bind(null,s),na:a4.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await hd(s)):(await s.fa.stop(),s.Ta.length>0&&(mt(ml,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class Ug{constructor(e,n,o,h,g){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=h,this.removalCallback=g,this.deferred=new Da,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((x=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,h,g){const x=Date.now()+o,T=new Ug(e,n,x,h,g);return T.start(o),T}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ct(Re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fg(s,e){if(La("AsyncQueue",`${e}: ${s}`),wc(s))return new ct(Re.UNAVAILABLE,`${e}: ${s}`);throw s}class lc{static emptySet(e){return new lc(e.comparator)}constructor(e){this.comparator=e?(n,o)=>e(n,o)||Mt.comparator(n.key,o.key):(n,o)=>Mt.comparator(n.key,o.key),this.keyedMap=hu(),this.sortedSet=new wr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,o)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof lc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const h=n.getNext().key,g=o.getNext().key;if(!h.isEqual(g))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const o=new lc;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class Vx{constructor(){this.ga=new wr(Mt.comparator)}track(e){const n=e.doc.key,o=this.ga.get(n);o?e.type!==0&&o.type===3?this.ga=this.ga.insert(n,e):e.type===3&&o.type!==1?this.ga=this.ga.insert(n,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.ga=this.ga.remove(n):e.type===1&&o.type===2?this.ga=this.ga.insert(n,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ft(63341,{Rt:e,pa:o}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,o)=>{e.push(o)})),e}}class mc{constructor(e,n,o,h,g,x,T,b,w){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=h,this.mutatedKeys=g,this.fromCache=x,this.syncStateChanged=T,this.excludesMetadataChanges=b,this.hasCachedResults=w}static fromInitialDocuments(e,n,o,h,g){const x=[];return n.forEach((T=>{x.push({type:0,doc:T})})),new mc(e,n,lc.emptySet(n),x,o,h,!0,!1,g)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let h=0;h<n.length;h++)if(n[h].type!==o[h].type||!n[h].doc.isEqual(o[h].doc))return!1;return!0}}class c4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class u4{constructor(){this.queries=Ux(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,o){const h=Qt(n),g=h.queries;h.queries=Ux(),g.forEach(((x,T)=>{for(const b of T.Sa)b.onError(o)}))})(this,new ct(Re.ABORTED,"Firestore shutting down"))}}function Ux(){return new _l((s=>jw(s)),rd)}async function jg(s,e){const n=Qt(s);let o=3;const h=e.query;let g=n.queries.get(h);g?!g.ba()&&e.Da()&&(o=2):(g=new c4,o=e.Da()?0:1);try{switch(o){case 0:g.wa=await n.onListen(h,!0);break;case 1:g.wa=await n.onListen(h,!1);break;case 2:await n.onFirstRemoteStoreListen(h)}}catch(x){const T=Fg(x,`Initialization of query '${$l(e.query)}' failed`);return void e.onError(T)}n.queries.set(h,g),g.Sa.push(e),e.va(n.onlineState),g.wa&&e.Fa(g.wa)&&Hg(n)}async function zg(s,e){const n=Qt(s),o=e.query;let h=3;const g=n.queries.get(o);if(g){const x=g.Sa.indexOf(e);x>=0&&(g.Sa.splice(x,1),g.Sa.length===0?h=e.Da()?0:1:!g.ba()&&e.Da()&&(h=2))}switch(h){case 0:return n.queries.delete(o),n.onUnlisten(o,!0);case 1:return n.queries.delete(o),n.onUnlisten(o,!1);case 2:return n.onLastRemoteStoreUnlisten(o);default:return}}function h4(s,e){const n=Qt(s);let o=!1;for(const h of e){const g=h.query,x=n.queries.get(g);if(x){for(const T of x.Sa)T.Fa(h)&&(o=!0);x.wa=h}}o&&Hg(n)}function f4(s,e,n){const o=Qt(s),h=o.queries.get(e);if(h)for(const g of h.Sa)g.onError(n);o.queries.delete(e)}function Hg(s){s.Ca.forEach((e=>{e.next()}))}var Z1,Fx;(Fx=Z1||(Z1={})).Ma="default",Fx.Cache="cache";class Gg{constructor(e,n,o){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(e){if(!this.options.includeMetadataChanges){const o=[];for(const h of e.docChanges)h.type!==3&&o.push(h);e=new mc(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const o=n!=="Offline";return(!this.options.qa||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=mc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Z1.Cache}}class __{constructor(e){this.key=e}}class A_{constructor(e){this.key=e}}class d4{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=_n(),this.mutatedKeys=_n(),this.eu=zw(e),this.tu=new lc(this.eu)}get nu(){return this.Ya}ru(e,n){const o=n?n.iu:new Vx,h=n?n.tu:this.tu;let g=n?n.mutatedKeys:this.mutatedKeys,x=h,T=!1;const b=this.query.limitType==="F"&&h.size===this.query.limit?h.last():null,w=this.query.limitType==="L"&&h.size===this.query.limit?h.first():null;if(e.inorderTraversal(((C,R)=>{const P=h.get(C),B=id(this.query,R)?R:null,$=!!P&&this.mutatedKeys.has(P.key),ne=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let se=!1;P&&B?P.data.isEqual(B.data)?$!==ne&&(o.track({type:3,doc:B}),se=!0):this.su(P,B)||(o.track({type:2,doc:B}),se=!0,(b&&this.eu(B,b)>0||w&&this.eu(B,w)<0)&&(T=!0)):!P&&B?(o.track({type:0,doc:B}),se=!0):P&&!B&&(o.track({type:1,doc:P}),se=!0,(b||w)&&(T=!0)),se&&(B?(x=x.add(B),g=ne?g.add(C):g.delete(C)):(x=x.delete(C),g=g.delete(C)))})),this.query.limit!==null)for(;x.size>this.query.limit;){const C=this.query.limitType==="F"?x.last():x.first();x=x.delete(C.key),g=g.delete(C.key),o.track({type:1,doc:C})}return{tu:x,iu:o,Cs:T,mutatedKeys:g}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o,h){const g=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const x=e.iu.ya();x.sort(((C,R)=>(function(B,$){const ne=se=>{switch(se){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ft(20277,{Rt:se})}};return ne(B)-ne($)})(C.type,R.type)||this.eu(C.doc,R.doc))),this.ou(o),h=h??!1;const T=n&&!h?this._u():[],b=this.Xa.size===0&&this.current&&!h?1:0,w=b!==this.Za;return this.Za=b,x.length!==0||w?{snapshot:new mc(this.query,e.tu,g,x,e.mutatedKeys,b===0,w,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:T}:{au:T}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Vx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=_n(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Xa=this.Xa.add(o.key))}));const n=[];return e.forEach((o=>{this.Xa.has(o)||n.push(new A_(o))})),this.Xa.forEach((o=>{e.has(o)||n.push(new __(o))})),n}cu(e){this.Ya=e.Qs,this.Xa=_n();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return mc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const qg="SyncEngine";class g4{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class m4{constructor(e){this.key=e,this.hu=!1}}class p4{constructor(e,n,o,h,g,x){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=h,this.currentUser=g,this.maxConcurrentLimboResolutions=x,this.Pu={},this.Tu=new _l((T=>jw(T)),rd),this.Iu=new Map,this.Eu=new Set,this.du=new wr(Mt.comparator),this.Au=new Map,this.Ru=new Og,this.Vu={},this.mu=new Map,this.fu=gc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function y4(s,e,n=!0){const o=I_(s);let h;const g=o.Tu.get(e);return g?(o.sharedClientState.addLocalQueryTarget(g.targetId),h=g.view.lu()):h=await b_(o,e,n,!0),h}async function x4(s,e){const n=I_(s);await b_(n,e,!0,!1)}async function b_(s,e,n,o){const h=await VI(s.localStore,Ws(e)),g=h.targetId,x=s.sharedClientState.addLocalQueryTarget(g,n);let T;return o&&(T=await E4(s,e,g,x==="current",h.resumeToken)),s.isPrimaryClient&&n&&m_(s.remoteStore,h),T}async function E4(s,e,n,o,h){s.pu=(R,P,B)=>(async function(ne,se,Qe,Le){let he=se.view.ru(Qe);he.Cs&&(he=await Dx(ne.localStore,se.query,!1).then((({documents:F})=>se.view.ru(F,he))));const Ue=Le&&Le.targetChanges.get(se.targetId),pt=Le&&Le.targetMismatches.get(se.targetId)!=null,je=se.view.applyChanges(he,ne.isPrimaryClient,Ue,pt);return zx(ne,se.targetId,je.au),je.snapshot})(s,R,P,B);const g=await Dx(s.localStore,e,!0),x=new d4(e,g.Qs),T=x.ru(g.documents),b=Fu.createSynthesizedTargetChangeForCurrentChange(n,o&&s.onlineState!=="Offline",h),w=x.applyChanges(T,s.isPrimaryClient,b);zx(s,n,w.au);const C=new g4(e,n,x);return s.Tu.set(e,C),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),w.snapshot}async function w4(s,e,n){const o=Qt(s),h=o.Tu.get(e),g=o.Iu.get(h.targetId);if(g.length>1)return o.Iu.set(h.targetId,g.filter((x=>!rd(x,e)))),void o.Tu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(h.targetId),o.sharedClientState.isActiveQueryTarget(h.targetId)||await K1(o.localStore,h.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(h.targetId),n&&Lg(o.remoteStore,h.targetId),J1(o,h.targetId)})).catch(Ec)):(J1(o,h.targetId),await K1(o.localStore,h.targetId,!0))}async function _4(s,e){const n=Qt(s),o=n.Tu.get(e),h=n.Iu.get(o.targetId);n.isPrimaryClient&&h.length===1&&(n.sharedClientState.removeLocalQueryTarget(o.targetId),Lg(n.remoteStore,o.targetId))}async function A4(s,e,n){const o=R4(s);try{const h=await(function(x,T){const b=Qt(x),w=jn.now(),C=T.reduce(((B,$)=>B.add($.key)),_n());let R,P;return b.persistence.runTransaction("Locally write mutations","readwrite",(B=>{let $=Pa(),ne=_n();return b.Ns.getEntries(B,C).next((se=>{$=se,$.forEach(((Qe,Le)=>{Le.isValidDocument()||(ne=ne.add(Qe))}))})).next((()=>b.localDocuments.getOverlayedDocuments(B,$))).next((se=>{R=se;const Qe=[];for(const Le of T){const he=BS(Le,R.get(Le.key).overlayedDocument);he!=null&&Qe.push(new Lo(Le.key,he,Mw(he.value.mapValue),Ni.exists(!0)))}return b.mutationQueue.addMutationBatch(B,w,Qe,T)})).next((se=>{P=se;const Qe=se.applyToLocalDocumentSet(R,ne);return b.documentOverlayCache.saveOverlays(B,se.batchId,Qe)}))})).then((()=>({batchId:P.batchId,changes:Gw(R)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(h.batchId),(function(x,T,b){let w=x.Vu[x.currentUser.toKey()];w||(w=new wr(wn)),w=w.insert(T,b),x.Vu[x.currentUser.toKey()]=w})(o,h.batchId,n),await zu(o,h.changes),await hd(o.remoteStore)}catch(h){const g=Fg(h,"Failed to persist write");n.reject(g)}}async function v_(s,e){const n=Qt(s);try{const o=await LI(n.localStore,e);e.targetChanges.forEach(((h,g)=>{const x=n.Au.get(g);x&&(zn(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1,22616),h.addedDocuments.size>0?x.hu=!0:h.modifiedDocuments.size>0?zn(x.hu,14607):h.removedDocuments.size>0&&(zn(x.hu,42227),x.hu=!1))})),await zu(n,o,e)}catch(o){await Ec(o)}}function jx(s,e,n){const o=Qt(s);if(o.isPrimaryClient&&n===0||!o.isPrimaryClient&&n===1){const h=[];o.Tu.forEach(((g,x)=>{const T=x.view.va(e);T.snapshot&&h.push(T.snapshot)})),(function(x,T){const b=Qt(x);b.onlineState=T;let w=!1;b.queries.forEach(((C,R)=>{for(const P of R.Sa)P.va(T)&&(w=!0)})),w&&Hg(b)})(o.eventManager,e),h.length&&o.Pu.H_(h),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function b4(s,e,n){const o=Qt(s);o.sharedClientState.updateQueryState(e,"rejected",n);const h=o.Au.get(e),g=h&&h.key;if(g){let x=new wr(Mt.comparator);x=x.insert(g,_i.newNoDocument(g,Yt.min()));const T=_n().add(g),b=new ld(Yt.min(),new Map,new wr(wn),x,T);await v_(o,b),o.du=o.du.remove(g),o.Au.delete(e),Xg(o)}else await K1(o.localStore,e,!1).then((()=>J1(o,e,n))).catch(Ec)}async function v4(s,e){const n=Qt(s),o=e.batch.batchId;try{const h=await kI(n.localStore,e);C_(n,o,null),T_(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),await zu(n,h)}catch(h){await Ec(h)}}async function T4(s,e,n){const o=Qt(s);try{const h=await(function(x,T){const b=Qt(x);return b.persistence.runTransaction("Reject batch","readwrite-primary",(w=>{let C;return b.mutationQueue.lookupMutationBatch(w,T).next((R=>(zn(R!==null,37113),C=R.keys(),b.mutationQueue.removeMutationBatch(w,R)))).next((()=>b.mutationQueue.performConsistencyCheck(w))).next((()=>b.documentOverlayCache.removeOverlaysForBatchId(w,C,T))).next((()=>b.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,C))).next((()=>b.localDocuments.getDocuments(w,C)))}))})(o.localStore,e);C_(o,e,n),T_(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),await zu(o,h)}catch(h){await Ec(h)}}function T_(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function C_(s,e,n){const o=Qt(s);let h=o.Vu[o.currentUser.toKey()];if(h){const g=h.get(e);g&&(n?g.reject(n):g.resolve(),h=h.remove(e)),o.Vu[o.currentUser.toKey()]=h}}function J1(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const o of s.Iu.get(e))s.Tu.delete(o),n&&s.Pu.yu(o,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((o=>{s.Ru.containsKey(o)||S_(s,o)}))}function S_(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(Lg(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),Xg(s))}function zx(s,e,n){for(const o of n)o instanceof __?(s.Ru.addReference(o.key,e),C4(s,o)):o instanceof A_?(mt(qg,"Document no longer in limbo: "+o.key),s.Ru.removeReference(o.key,e),s.Ru.containsKey(o.key)||S_(s,o.key)):Ft(19791,{wu:o})}function C4(s,e){const n=e.key,o=n.path.canonicalString();s.du.get(n)||s.Eu.has(o)||(mt(qg,"New document in limbo: "+n),s.Eu.add(o),Xg(s))}function Xg(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new Mt(rr.fromString(e)),o=s.fu.next();s.Au.set(o,new m4(n)),s.du=s.du.insert(n,o),m_(s.remoteStore,new wo(Ws(nd(n.path)),o,"TargetPurposeLimboResolution",$f.ce))}}async function zu(s,e,n){const o=Qt(s),h=[],g=[],x=[];o.Tu.isEmpty()||(o.Tu.forEach(((T,b)=>{x.push(o.pu(b,e,n).then((w=>{if((w||n)&&o.isPrimaryClient){const C=w?!w.fromCache:n?.targetChanges.get(b.targetId)?.current;o.sharedClientState.updateQueryState(b.targetId,C?"current":"not-current")}if(w){h.push(w);const C=Mg.As(b.targetId,w);g.push(C)}})))})),await Promise.all(x),o.Pu.H_(h),await(async function(b,w){const C=Qt(b);try{await C.persistence.runTransaction("notifyLocalViewChanges","readwrite",(R=>Pe.forEach(w,(P=>Pe.forEach(P.Es,(B=>C.persistence.referenceDelegate.addReference(R,P.targetId,B))).next((()=>Pe.forEach(P.ds,(B=>C.persistence.referenceDelegate.removeReference(R,P.targetId,B)))))))))}catch(R){if(!wc(R))throw R;mt(kg,"Failed to update sequence numbers: "+R)}for(const R of w){const P=R.targetId;if(!R.fromCache){const B=C.Ms.get(P),$=B.snapshotVersion,ne=B.withLastLimboFreeSnapshotVersion($);C.Ms=C.Ms.insert(P,ne)}}})(o.localStore,g))}async function S4(s,e){const n=Qt(s);if(!n.currentUser.isEqual(e)){mt(qg,"User change. New user:",e.toKey());const o=await h_(n.localStore,e);n.currentUser=e,(function(g,x){g.mu.forEach((T=>{T.forEach((b=>{b.reject(new ct(Re.CANCELLED,x))}))})),g.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await zu(n,o.Ls)}}function I4(s,e){const n=Qt(s),o=n.Au.get(e);if(o&&o.hu)return _n().add(o.key);{let h=_n();const g=n.Iu.get(e);if(!g)return h;for(const x of g){const T=n.Tu.get(x);h=h.unionWith(T.view.nu)}return h}}function I_(s){const e=Qt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=v_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=I4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=b4.bind(null,e),e.Pu.H_=h4.bind(null,e.eventManager),e.Pu.yu=f4.bind(null,e.eventManager),e}function R4(s){const e=Qt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=v4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=T4.bind(null,e),e}class Pf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return MI(this.persistence,new NI,e.initialUser,this.serializer)}Cu(e){return new u_(Dg.mi,this.serializer)}Du(e){return new FI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pf.provider={build:()=>new Pf};class N4 extends Pf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){zn(this.persistence.referenceDelegate instanceof kf,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new mI(o,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?zi.withCacheSize(this.cacheSizeBytes):zi.DEFAULT;return new u_((o=>kf.mi(o,n)),this.serializer)}}class $1{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>jx(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=S4.bind(null,this.syncEngine),await l4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new u4})()}createDatastore(e){const n=cd(e.databaseInfo.databaseId),o=(function(g){return new qI(g)})(e.databaseInfo);return(function(g,x,T,b){return new KI(g,x,T,b)})(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return(function(o,h,g,x,T){return new ZI(o,h,g,x,T)})(this.localStore,this.datastore,e.asyncQueue,(n=>jx(this.syncEngine,n,0)),(function(){return Lx.v()?new Lx:new jI})())}createSyncEngine(e,n){return(function(h,g,x,T,b,w,C){const R=new p4(h,g,x,T,b,w);return C&&(R.gu=!0),R})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const o=Qt(n);mt(ml,"RemoteStore shutting down."),o.Ea.add(5),await ju(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}$1.provider={build:()=>new $1};class Yg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):La("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Do="FirestoreClient";class O4{constructor(e,n,o,h,g){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=h,this.user=wi.UNAUTHENTICATED,this.clientId=_g.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=g,this.authCredentials.start(o,(async x=>{mt(Do,"Received user=",x.uid),await this.authCredentialListener(x),this.user=x})),this.appCheckCredentials.start(o,(x=>(mt(Do,"Received new app check token=",x),this.appCheckCredentialListener(x,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Da;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const o=Fg(n,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function A1(s,e){s.asyncQueue.verifyOperationInProgress(),mt(Do,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let o=n.initialUser;s.setCredentialChangeListener((async h=>{o.isEqual(h)||(await h_(e.localStore,h),o=h)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function Hx(s,e){s.asyncQueue.verifyOperationInProgress();const n=await D4(s);mt(Do,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((o=>Bx(e.remoteStore,o))),s.setAppCheckTokenChangeListener(((o,h)=>Bx(e.remoteStore,h))),s._onlineComponents=e}async function D4(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){mt(Do,"Using user provided OfflineComponentProvider");try{await A1(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(h){return h.name==="FirebaseError"?h.code===Re.FAILED_PRECONDITION||h.code===Re.UNIMPLEMENTED:!(typeof DOMException<"u"&&h instanceof DOMException)||h.code===22||h.code===20||h.code===11})(n))throw n;uc("Error using user provided cache. Falling back to memory cache: "+n),await A1(s,new Pf)}}else mt(Do,"Using default OfflineComponentProvider"),await A1(s,new N4(void 0));return s._offlineComponents}async function R_(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(mt(Do,"Using user provided OnlineComponentProvider"),await Hx(s,s._uninitializedComponentsProvider._online)):(mt(Do,"Using default OnlineComponentProvider"),await Hx(s,new $1))),s._onlineComponents}function M4(s){return R_(s).then((e=>e.syncEngine))}async function Bf(s){const e=await R_(s),n=e.eventManager;return n.onListen=y4.bind(null,e.syncEngine),n.onUnlisten=w4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=x4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=_4.bind(null,e.syncEngine),n}function k4(s,e,n={}){const o=new Da;return s.asyncQueue.enqueueAndForget((async()=>(function(g,x,T,b,w){const C=new Yg({next:P=>{C.Nu(),x.enqueueAndForget((()=>zg(g,R)));const B=P.docs.has(T);!B&&P.fromCache?w.reject(new ct(Re.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&P.fromCache&&b&&b.source==="server"?w.reject(new ct(Re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(P)},error:P=>w.reject(P)}),R=new Gg(nd(T.path),C,{includeMetadataChanges:!0,qa:!0});return jg(g,R)})(await Bf(s),s.asyncQueue,e,n,o))),o.promise}function L4(s,e,n={}){const o=new Da;return s.asyncQueue.enqueueAndForget((async()=>(function(g,x,T,b,w){const C=new Yg({next:P=>{C.Nu(),x.enqueueAndForget((()=>zg(g,R))),P.fromCache&&b.source==="server"?w.reject(new ct(Re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(P)},error:P=>w.reject(P)}),R=new Gg(T,C,{includeMetadataChanges:!0,qa:!0});return jg(g,R)})(await Bf(s),s.asyncQueue,e,n,o))),o.promise}function N_(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const Gx=new Map;const O_="firestore.googleapis.com",qx=!0;class Xx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ct(Re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=O_,this.ssl=qx}else this.host=e.host,this.ssl=e.ssl??qx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=c_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<dI)throw new ct(Re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Q3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=N_(e.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ct(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ct(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ct(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,h){return o.timeoutSeconds===h.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fd{constructor(e,n,o,h){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=h,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ct(Re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ct(Re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new F3;switch(o.type){case"firstParty":return new G3(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new ct(Re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const o=Gx.get(n);o&&(mt("ComponentProvider","Removing Datastore"),Gx.delete(n),o.terminate())})(this),Promise.resolve()}}function P4(s,e,n,o={}){s=Ri(s,fd);const h=Mo(e),g=s._getSettings(),x={...g,emulatorOptions:s._getEmulatorOptions()},T=`${e}:${n}`;h&&(og(`https://${T}`),lg("Firestore",!0)),g.host!==O_&&g.host!==T&&uc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const b={...g,host:T,ssl:h,emulatorOptions:o};if(!ul(b,x)&&(s._setSettings(b),o.mockUserToken)){let w,C;if(typeof o.mockUserToken=="string")w=o.mockUserToken,C=wi.MOCK_USER;else{w=Yb(o.mockUserToken,s._app?.options.projectId);const R=o.mockUserToken.sub||o.mockUserToken.user_id;if(!R)throw new ct(Re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");C=new wi(R)}s._authCredentials=new j3(new _w(w,C))}}class Va{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Va(this.firestore,e,this._query)}}class Cr{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Cr(this.firestore,e,this._key)}toJSON(){return{type:Cr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,o){if(Vu(n,Cr._jsonSchema))return new Cr(e,o||null,new Mt(rr.fromString(n.referencePath)))}}Cr._jsonSchemaVersion="firestore/documentReference/1.0",Cr._jsonSchema={type:Gr("string",Cr._jsonSchemaVersion),referencePath:Gr("string")};class vo extends Va{constructor(e,n,o){super(e,n,nd(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Cr(this.firestore,null,new Mt(e))}withConverter(e){return new vo(this.firestore,e,this._path)}}function cr(s,e,...n){if(s=er(s),Aw("collection","path",e),s instanceof fd){const o=rr.fromString(e,...n);return sx(o),new vo(s,null,o)}{if(!(s instanceof Cr||s instanceof vo))throw new ct(Re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=s._path.child(rr.fromString(e,...n));return sx(o),new vo(s.firestore,null,o)}}function Fn(s,e,...n){if(s=er(s),arguments.length===1&&(e=_g.newId()),Aw("doc","path",e),s instanceof fd){const o=rr.fromString(e,...n);return ix(o),new Cr(s,null,new Mt(o))}{if(!(s instanceof Cr||s instanceof vo))throw new ct(Re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=s._path.child(rr.fromString(e,...n));return ix(o),new Cr(s.firestore,s instanceof vo?s.converter:null,new Mt(o))}}const Yx="AsyncQueue";class Wx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new d_(this,"async_queue_retry"),this._c=()=>{const o=_1();o&&mt(Yx,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=e;const n=_1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=_1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Da;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!wc(e))throw e;mt(Yx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((o=>{throw this.nc=o,this.rc=!1,La("INTERNAL UNHANDLED ERROR: ",Kx(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=n,n}enqueueAfterDelay(e,n,o){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const h=Ug.createAndSchedule(this,e,n,o,(g=>this.hc(g)));return this.tc.push(h),h}uc(){this.nc&&Ft(47125,{Pc:Kx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,o)=>n.targetTimeMs-o.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Kx(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}function Qx(s){return(function(n,o){if(typeof n!="object"||n===null)return!1;const h=n;for(const g of o)if(g in h&&typeof h[g]=="function")return!0;return!1})(s,["next","error","complete"])}class $s extends fd{constructor(e,n,o,h){super(e,n,o,h),this.type="firestore",this._queue=new Wx,this._persistenceKey=h?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wx(e),this._firestoreClient=void 0,await e}}}function B4(s,e){const n=typeof s=="object"?s:Wf(),o=typeof s=="string"?s:If,h=Yf(n,"firestore").getImmediate({identifier:o});if(!h._initialized){const g=vE("firestore");g&&P4(h,...g)}return h}function Hu(s){if(s._terminated)throw new ct(Re.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||V4(s),s._firestoreClient}function V4(s){const e=s._freezeSettings(),n=(function(h,g,x,T){return new oS(h,g,x,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,N_(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new O4(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(h){const g=h?._online.build();return{_offline:h?._offline.build(g),_online:g}})(s._componentsProvider))}class As{constructor(e){this._byteString=e}static fromBase64String(e){try{return new As(fi.fromBase64String(e))}catch(n){throw new ct(Re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new As(fi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:As._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vu(e,As._jsonSchema))return As.fromBase64String(e.bytes)}}As._jsonSchemaVersion="firestore/bytes/1.0",As._jsonSchema={type:Gr("string",As._jsonSchemaVersion),bytes:Gr("string")};class Gu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ct(Re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class dd{constructor(e){this._methodName=e}}class Qs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ct(Re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ct(Re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return wn(this._lat,e._lat)||wn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qs._jsonSchemaVersion}}static fromJSON(e){if(Vu(e,Qs._jsonSchema))return new Qs(e.latitude,e.longitude)}}Qs._jsonSchemaVersion="firestore/geoPoint/1.0",Qs._jsonSchema={type:Gr("string",Qs._jsonSchemaVersion),latitude:Gr("number"),longitude:Gr("number")};class Zs{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,h){if(o.length!==h.length)return!1;for(let g=0;g<o.length;++g)if(o[g]!==h[g])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Zs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vu(e,Zs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Zs(e.vectorValues);throw new ct(Re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zs._jsonSchemaVersion="firestore/vectorValue/1.0",Zs._jsonSchema={type:Gr("string",Zs._jsonSchemaVersion),vectorValues:Gr("object")};const U4=/^__.*__$/;class F4{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return this.fieldMask!==null?new Lo(e,this.data,this.fieldMask,n,this.fieldTransforms):new Uu(e,this.data,n,this.fieldTransforms)}}class D_{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new Lo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function M_(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ft(40011,{Ac:s})}}class Wg{constructor(e,n,o,h,g,x){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=h,g===void 0&&this.Rc(),this.fieldTransforms=g||[],this.fieldMask=x||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Wg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),o=this.Vc({path:n,fc:!1});return o.gc(e),o}yc(e){const n=this.path?.child(e),o=this.Vc({path:n,fc:!1});return o.Rc(),o}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Vf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(M_(this.Ac)&&U4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class j4{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||cd(e)}Cc(e,n,o,h=!1){return new Wg({Ac:e,methodName:n,Dc:o,path:hi.emptyPath(),fc:!1,bc:h},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qu(s){const e=s._freezeSettings(),n=cd(s._databaseId);return new j4(s._databaseId,!!e.ignoreUndefinedProperties,n)}function Kg(s,e,n,o,h,g={}){const x=s.Cc(g.merge||g.mergeFields?2:0,e,n,h);Zg("Data must be an object, but it was:",x,o);const T=P_(o,x);let b,w;if(g.merge)b=new as(x.fieldMask),w=x.fieldTransforms;else if(g.mergeFields){const C=[];for(const R of g.mergeFields){const P=eg(e,R,n);if(!x.contains(P))throw new ct(Re.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);V_(C,P)||C.push(P)}b=new as(C),w=x.fieldTransforms.filter((R=>b.covers(R.field)))}else b=null,w=x.fieldTransforms;return new F4(new Hi(T),b,w)}class gd extends dd{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gd}}class Qg extends dd{_toFieldTransform(e){return new MS(e.path,new Ru)}isEqual(e){return e instanceof Qg}}function k_(s,e,n,o){const h=s.Cc(1,e,n);Zg("Data must be an object, but it was:",h,o);const g=[],x=Hi.empty();ko(o,((b,w)=>{const C=Jg(e,b,n);w=er(w);const R=h.yc(C);if(w instanceof gd)g.push(C);else{const P=Xu(w,R);P!=null&&(g.push(C),x.set(C,P))}}));const T=new as(g);return new D_(x,T,h.fieldTransforms)}function L_(s,e,n,o,h,g){const x=s.Cc(1,e,n),T=[eg(e,o,n)],b=[h];if(g.length%2!=0)throw new ct(Re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<g.length;P+=2)T.push(eg(e,g[P])),b.push(g[P+1]);const w=[],C=Hi.empty();for(let P=T.length-1;P>=0;--P)if(!V_(w,T[P])){const B=T[P];let $=b[P];$=er($);const ne=x.yc(B);if($ instanceof gd)w.push(B);else{const se=Xu($,ne);se!=null&&(w.push(B),C.set(B,se))}}const R=new as(w);return new D_(C,R,x.fieldTransforms)}function z4(s,e,n,o=!1){return Xu(n,s.Cc(o?4:3,e))}function Xu(s,e){if(B_(s=er(s)))return Zg("Unsupported field value:",e,s),P_(s,e);if(s instanceof dd)return(function(o,h){if(!M_(h.Ac))throw h.Sc(`${o._methodName}() can only be used with update() and set()`);if(!h.path)throw h.Sc(`${o._methodName}() is not currently supported inside arrays`);const g=o._toFieldTransform(h);g&&h.fieldTransforms.push(g)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(o,h){const g=[];let x=0;for(const T of o){let b=Xu(T,h.wc(x));b==null&&(b={nullValue:"NULL_VALUE"}),g.push(b),x++}return{arrayValue:{values:g}}})(s,e)}return(function(o,h){if((o=er(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return NS(h.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const g=jn.fromDate(o);return{timestampValue:Mf(h.serializer,g)}}if(o instanceof jn){const g=new jn(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Mf(h.serializer,g)}}if(o instanceof Qs)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof As)return{bytesValue:n_(h.serializer,o._byteString)};if(o instanceof Cr){const g=h.databaseId,x=o.firestore._databaseId;if(!x.isEqual(g))throw h.Sc(`Document reference is for database ${x.projectId}/${x.database} but should be for database ${g.projectId}/${g.database}`);return{referenceValue:Ng(o.firestore._databaseId||h.databaseId,o._key.path)}}if(o instanceof Zs)return(function(x,T){return{mapValue:{fields:{[Ow]:{stringValue:Dw},[Rf]:{arrayValue:{values:x.toArray().map((w=>{if(typeof w!="number")throw T.Sc("VectorValues must only contain numeric values.");return Sg(T.serializer,w)}))}}}}}})(o,h);throw h.Sc(`Unsupported field value: ${Jf(o)}`)})(s,e)}function P_(s,e){const n={};return Tw(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ko(s,((o,h)=>{const g=Xu(h,e.mc(o));g!=null&&(n[o]=g)})),{mapValue:{fields:n}}}function B_(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof jn||s instanceof Qs||s instanceof As||s instanceof Cr||s instanceof dd||s instanceof Zs)}function Zg(s,e,n){if(!B_(n)||!bw(n)){const o=Jf(n);throw o==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+o)}}function eg(s,e,n){if((e=er(e))instanceof Gu)return e._internalPath;if(typeof e=="string")return Jg(s,e);throw Vf("Field path arguments must be of type string or ",s,!1,void 0,n)}const H4=new RegExp("[~\\*/\\[\\]]");function Jg(s,e,n){if(e.search(H4)>=0)throw Vf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Gu(...e.split("."))._internalPath}catch{throw Vf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Vf(s,e,n,o,h){const g=o&&!o.isEmpty(),x=h!==void 0;let T=`Function ${e}() called with invalid data`;n&&(T+=" (via `toFirestore()`)"),T+=". ";let b="";return(g||x)&&(b+=" (found",g&&(b+=` in field ${o}`),x&&(b+=` in document ${h}`),b+=")"),new ct(Re.INVALID_ARGUMENT,T+s+b)}function V_(s,e){return s.some((n=>n.isEqual(e)))}class U_{constructor(e,n,o,h,g){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=h,this._converter=g}get id(){return this._key.path.lastSegment()}get ref(){return new Cr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new G4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(md("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class G4 extends U_{data(){return super.data()}}function md(s,e){return typeof e=="string"?Jg(s,e):e instanceof Gu?e._internalPath:e._delegate._internalPath}function F_(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ct(Re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $g{}class em extends $g{}function is(s,e,...n){let o=[];e instanceof $g&&o.push(e),o=o.concat(n),(function(g){const x=g.filter((b=>b instanceof tm)).length,T=g.filter((b=>b instanceof pd)).length;if(x>1||x>0&&T>0)throw new ct(Re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const h of o)s=h._apply(s);return s}class pd extends em{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new pd(e,n,o)}_apply(e){const n=this._parse(e);return j_(e._query,n),new Va(e.firestore,e.converter,G1(e._query,n))}_parse(e){const n=qu(e.firestore);return(function(g,x,T,b,w,C,R){let P;if(w.isKeyField()){if(C==="array-contains"||C==="array-contains-any")throw new ct(Re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if(C==="in"||C==="not-in"){Jx(R,C);const $=[];for(const ne of R)$.push(Zx(b,g,ne));P={arrayValue:{values:$}}}else P=Zx(b,g,R)}else C!=="in"&&C!=="not-in"&&C!=="array-contains-any"||Jx(R,C),P=z4(T,x,R,C==="in"||C==="not-in");return Hr.create(w,C,P)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ei(s,e,n){const o=e,h=md("where",s);return pd._create(h,o,n)}class tm extends $g{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new tm(e,n)}_parse(e){const n=this._queryConstraints.map((o=>o._parse(e))).filter((o=>o.getFilters().length>0));return n.length===1?n[0]:Ms.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(h,g){let x=h;const T=g.getFlattenedFilters();for(const b of T)j_(x,b),x=G1(x,b)})(e._query,n),new Va(e.firestore,e.converter,G1(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class nm extends em{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new nm(e,n)}_apply(e){const n=(function(h,g,x){if(h.startAt!==null)throw new ct(Re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(h.endAt!==null)throw new ct(Re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Iu(g,x)})(e._query,this._field,this._direction);return new Va(e.firestore,e.converter,(function(h,g){const x=h.explicitOrderBy.concat([g]);return new _c(h.path,h.collectionGroup,x,h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(e._query,n))}}function q4(s,e="asc"){const n=e,o=md("orderBy",s);return nm._create(o,n)}class rm extends em{constructor(e,n,o){super(),this.type=e,this._limit=n,this._limitType=o}static _create(e,n,o){return new rm(e,n,o)}_apply(e){return new Va(e.firestore,e.converter,Of(e._query,this._limit,this._limitType))}}function X4(s){return rm._create("limit",s,"F")}function Zx(s,e,n){if(typeof(n=er(n))=="string"){if(n==="")throw new ct(Re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fw(e)&&n.indexOf("/")!==-1)throw new ct(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(rr.fromString(n));if(!Mt.isDocumentKey(o))throw new ct(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return dx(s,new Mt(o))}if(n instanceof Cr)return dx(s,n._key);throw new ct(Re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jf(n)}.`)}function Jx(s,e){if(!Array.isArray(s)||s.length===0)throw new ct(Re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function j_(s,e){const n=(function(h,g){for(const x of h)for(const T of x.getFlattenedFilters())if(g.indexOf(T.op)>=0)return T.op;return null})(s.filters,(function(h){switch(h){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ct(Re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ct(Re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Y4{convertValue(e,n="none"){switch(No(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ro(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ft(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return ko(e,((h,g)=>{o[h]=this.convertValue(g,n)})),o}convertVectorValue(e){const n=e.fields?.[Rf].arrayValue?.values?.map((o=>kr(o.doubleValue)));return new Zs(n)}convertGeoPoint(e){return new Qs(kr(e.latitude),kr(e.longitude))}convertArray(e,n){return(e.values||[]).map((o=>this.convertValue(o,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const o=td(e);return o==null?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(Tu(e));default:return null}}convertTimestamp(e){const n=Io(e);return new jn(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=rr.fromString(e);zn(l_(o),9688,{name:e});const h=new Cu(o.get(1),o.get(3)),g=new Mt(o.popFirst(5));return h.isEqual(n)||La(`Document ${g} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),g}}function im(s,e,n){let o;return o=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,o}class du{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ol extends U_{constructor(e,n,o,h,g,x){super(e,n,o,h,x),this._firestore=e,this._firestoreImpl=e,this.metadata=g}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(md("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ct(Re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ol._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ol._jsonSchemaVersion="firestore/documentSnapshot/1.0",ol._jsonSchema={type:Gr("string",ol._jsonSchemaVersion),bundleSource:Gr("string","DocumentSnapshot"),bundleName:Gr("string"),bundle:Gr("string")};class yf extends ol{data(e={}){return super.data(e)}}class ll{constructor(e,n,o,h){this._firestore=e,this._userDataWriter=n,this._snapshot=h,this.metadata=new du(h.hasPendingWrites,h.fromCache),this.query=o}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((o=>{e.call(n,new yf(this._firestore,this._userDataWriter,o.key,o,new du(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ct(Re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(h,g){if(h._snapshot.oldDocs.isEmpty()){let x=0;return h._snapshot.docChanges.map((T=>{const b=new yf(h._firestore,h._userDataWriter,T.doc.key,T.doc,new du(h._snapshot.mutatedKeys.has(T.doc.key),h._snapshot.fromCache),h.query.converter);return T.doc,{type:"added",doc:b,oldIndex:-1,newIndex:x++}}))}{let x=h._snapshot.oldDocs;return h._snapshot.docChanges.filter((T=>g||T.type!==3)).map((T=>{const b=new yf(h._firestore,h._userDataWriter,T.doc.key,T.doc,new du(h._snapshot.mutatedKeys.has(T.doc.key),h._snapshot.fromCache),h.query.converter);let w=-1,C=-1;return T.type!==0&&(w=x.indexOf(T.doc.key),x=x.delete(T.doc.key)),T.type!==1&&(x=x.add(T.doc),C=x.indexOf(T.doc.key)),{type:W4(T.type),doc:b,oldIndex:w,newIndex:C}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ct(Re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ll._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_g.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],o=[],h=[];return this.docs.forEach((g=>{g._document!==null&&(n.push(g._document),o.push(this._userDataWriter.convertObjectMap(g._document.data.value.mapValue.fields,"previous")),h.push(g.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function W4(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ft(61501,{type:s})}}function pl(s){s=Ri(s,Cr);const e=Ri(s.firestore,$s);return k4(Hu(e),s._key).then((n=>H_(e,s,n)))}ll._jsonSchemaVersion="firestore/querySnapshot/1.0",ll._jsonSchema={type:Gr("string",ll._jsonSchemaVersion),bundleSource:Gr("string","QuerySnapshot"),bundleName:Gr("string"),bundle:Gr("string")};class sm extends Y4{constructor(e){super(),this.firestore=e}convertBytes(e){return new As(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Cr(this.firestore,null,n)}}function Mr(s){s=Ri(s,Va);const e=Ri(s.firestore,$s),n=Hu(e),o=new sm(e);return F_(s._query),L4(n,s._query).then((h=>new ll(e,o,s,h)))}function cl(s,e,n){s=Ri(s,Cr);const o=Ri(s.firestore,$s),h=im(s.converter,e,n);return Yu(o,[Kg(qu(o),"setDoc",s._key,h,s.converter!==null,n).toMutation(s._key,Ni.none())])}function bs(s,e,n,...o){s=Ri(s,Cr);const h=Ri(s.firestore,$s),g=qu(h);let x;return x=typeof(e=er(e))=="string"||e instanceof Gu?L_(g,"updateDoc",s._key,e,n,o):k_(g,"updateDoc",s._key,e),Yu(h,[x.toMutation(s._key,Ni.exists(!0))])}function z_(s){return Yu(Ri(s.firestore,$s),[new od(s._key,Ni.none())])}function xf(s,e){const n=Ri(s.firestore,$s),o=Fn(s),h=im(s.converter,e);return Yu(n,[Kg(qu(s.firestore),"addDoc",o._key,h,s.converter!==null,{}).toMutation(o._key,Ni.exists(!1))]).then((()=>o))}function $x(s,...e){s=er(s);let n={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Qx(e[o])||(n=e[o++]);const h={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Qx(e[o])){const b=e[o];e[o]=b.next?.bind(b),e[o+1]=b.error?.bind(b),e[o+2]=b.complete?.bind(b)}let g,x,T;if(s instanceof Cr)x=Ri(s.firestore,$s),T=nd(s._key.path),g={next:b=>{e[o]&&e[o](H_(x,s,b))},error:e[o+1],complete:e[o+2]};else{const b=Ri(s,Va);x=Ri(b.firestore,$s),T=b._query;const w=new sm(x);g={next:C=>{e[o]&&e[o](new ll(x,w,b,C))},error:e[o+1],complete:e[o+2]},F_(s._query)}return(function(w,C,R,P){const B=new Yg(P),$=new Gg(C,B,R);return w.asyncQueue.enqueueAndForget((async()=>jg(await Bf(w),$))),()=>{B.Nu(),w.asyncQueue.enqueueAndForget((async()=>zg(await Bf(w),$)))}})(Hu(x),T,h,g)}function Yu(s,e){return(function(o,h){const g=new Da;return o.asyncQueue.enqueueAndForget((async()=>A4(await M4(o),h,g))),g.promise})(Hu(s),e)}function H_(s,e,n){const o=n.docs.get(e._key),h=new sm(s);return new ol(s,h,e._key,o,new du(n.hasPendingWrites,n.fromCache),e.converter)}class K4{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=qu(e)}set(e,n,o){this._verifyNotCommitted();const h=b1(e,this._firestore),g=im(h.converter,n,o),x=Kg(this._dataReader,"WriteBatch.set",h._key,g,h.converter!==null,o);return this._mutations.push(x.toMutation(h._key,Ni.none())),this}update(e,n,o,...h){this._verifyNotCommitted();const g=b1(e,this._firestore);let x;return x=typeof(n=er(n))=="string"||n instanceof Gu?L_(this._dataReader,"WriteBatch.update",g._key,n,o,h):k_(this._dataReader,"WriteBatch.update",g._key,n),this._mutations.push(x.toMutation(g._key,Ni.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=b1(e,this._firestore);return this._mutations=this._mutations.concat(new od(n._key,Ni.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ct(Re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function b1(s,e){if((s=er(s)).firestore!==e)throw new ct(Re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}function Ef(){return new Qg("serverTimestamp")}function su(s){return Hu(s=Ri(s,$s)),new K4(s,(e=>Yu(s,e)))}(function(e,n=!0){(function(h){xc=h})(yc),hl(new Co("firestore",((o,{instanceIdentifier:h,options:g})=>{const x=o.getProvider("app").getImmediate(),T=new $s(new z3(o.getProvider("auth-internal")),new q3(x,o.getProvider("app-check-internal")),(function(w,C){if(!Object.prototype.hasOwnProperty.apply(w.options,["projectId"]))throw new ct(Re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cu(w.options.projectId,C)})(x,h),x);return g={useFetchStreams:n,...g},T._setSettings(g),T}),"PUBLIC").setMultipleInstances(!0)),qs(ex,tx,e),qs(ex,tx,"esm2020")})();const G_={apiKey:"AIzaSyARwb6K0M4l-hWKi8FrOLEVqRqeHRf8JR4",authDomain:"oppmoteboka.firebaseapp.com",projectId:"oppmoteboka",storageBucket:"oppmoteboka.firebasestorage.app",messagingSenderId:"732911922070",appId:"1:732911922070:web:b16d9de65062395c018bb7"},q_=RE().length?Wf():hg(G_),al=dw(q_),Ct=B4(q_),Q4=RE().find(s=>s.name==="secondary")??hg(G_,"secondary"),v1=dw(Q4);function yd(){const[s,e]=ye.useState(null),[n,o]=ye.useState(!0);return ye.useEffect(()=>{const T=SC(al,async b=>{if(!b){e(null),o(!1);return}try{const w=Fn(Ct,"users",b.uid);let C=await pl(w);if(!C.exists()){const $={uid:b.uid,email:b.email??"",displayName:b.displayName??b.email??"",role:"student",term:null,termLabel:null,semesterStatus:"aktiv"};await cl(w,{...$,createdAt:Ef()}),e($),o(!1);return}const R=C.data();let P=R?.email??b.email??"";if(b.email&&R?.email!==b.email)try{await bs(w,{email:b.email}),P=b.email}catch($){console.warn("Kunne ikke synkronisere epost til Firestore:",$)}const B={uid:b.uid,email:P,role:R?.role??"student",term:R?.term??null,termLabel:R?.termLabel??null,semesterStatus:R?.semesterStatus??null,displayName:R?.name??R?.displayName??b.displayName??b.email??""};e(B)}catch(w){console.error("Feil ved henting/oppretting av bruker:",w),e(null)}finally{o(!1)}});return()=>T()},[]),{user:s,loading:n,login:async(T,b)=>{await AC(al,T,b)},register:async(T,b)=>{await cf(al,T,b)},logout:async()=>{await IC(al)}}}var yt;(function(s){s[s.QR_CODE=0]="QR_CODE",s[s.AZTEC=1]="AZTEC",s[s.CODABAR=2]="CODABAR",s[s.CODE_39=3]="CODE_39",s[s.CODE_93=4]="CODE_93",s[s.CODE_128=5]="CODE_128",s[s.DATA_MATRIX=6]="DATA_MATRIX",s[s.MAXICODE=7]="MAXICODE",s[s.ITF=8]="ITF",s[s.EAN_13=9]="EAN_13",s[s.EAN_8=10]="EAN_8",s[s.PDF_417=11]="PDF_417",s[s.RSS_14=12]="RSS_14",s[s.RSS_EXPANDED=13]="RSS_EXPANDED",s[s.UPC_A=14]="UPC_A",s[s.UPC_E=15]="UPC_E",s[s.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(yt||(yt={}));var eE=new Map([[yt.QR_CODE,"QR_CODE"],[yt.AZTEC,"AZTEC"],[yt.CODABAR,"CODABAR"],[yt.CODE_39,"CODE_39"],[yt.CODE_93,"CODE_93"],[yt.CODE_128,"CODE_128"],[yt.DATA_MATRIX,"DATA_MATRIX"],[yt.MAXICODE,"MAXICODE"],[yt.ITF,"ITF"],[yt.EAN_13,"EAN_13"],[yt.EAN_8,"EAN_8"],[yt.PDF_417,"PDF_417"],[yt.RSS_14,"RSS_14"],[yt.RSS_EXPANDED,"RSS_EXPANDED"],[yt.UPC_A,"UPC_A"],[yt.UPC_E,"UPC_E"],[yt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),tE;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.URL=1]="URL"})(tE||(tE={}));function Z4(s){return Object.values(yt).includes(s)}var Uf;(function(s){s[s.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",s[s.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Uf||(Uf={}));var J4=(function(){function s(){}return s.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",s.SCAN_DEFAULT_FPS=2,s.DEFAULT_DISABLE_FLIP=!1,s.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,s.DEFAULT_SUPPORTED_SCAN_TYPE=[Uf.SCAN_TYPE_CAMERA,Uf.SCAN_TYPE_FILE],s})(),X_=(function(){function s(e,n){this.format=e,this.formatName=n}return s.prototype.toString=function(){return this.formatName},s.create=function(e){if(!eE.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new s(e,eE.get(e))},s})(),nE=(function(){function s(){}return s.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},s.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},s})(),tg;(function(s){s[s.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",s[s.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",s[s.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(tg||(tg={}));var $4=(function(){function s(){}return s.createFrom=function(e){return{errorMessage:e,type:tg.UNKWOWN_ERROR}},s})(),e8=(function(){function s(e){this.verbose=e}return s.prototype.log=function(e){this.verbose&&console.log(e)},s.prototype.warn=function(e){this.verbose&&console.warn(e)},s.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},s.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},s})();function Ia(s){return typeof s>"u"||s===null}var rc=(function(){function s(){}return s.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},s.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},s.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},s.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},s.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},s.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},s.scannerPaused=function(){return"Scanner paused"},s})(),Y_=(function(){function s(){}return s.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var o=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(o,"."),!0),!1}for(var h=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],g=new Set(h),x=Object.keys(e),T=0,b=x;T<b.length;T++){var w=b[T];if(g.has(w))return n.logError("".concat(w," is not supported videoConstaints."),!0),!1}return!0},s})(),gu={exports:{}},t8=gu.exports,rE;function n8(){return rE||(rE=1,(function(s,e){(function(n,o){o(e)})(t8,(function(n){function o(M){return M==null}var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,r){M.__proto__=r}||function(M,r){for(var a in r)r.hasOwnProperty(a)&&(M[a]=r[a])};function g(M,r){h(M,r);function a(){this.constructor=M}M.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}function x(M,r){var a=Object.setPrototypeOf;a?a(M,r):M.__proto__=r}function T(M,r){r===void 0&&(r=M.constructor);var a=Error.captureStackTrace;a&&a(M,r)}var b=(function(M){g(r,M);function r(a){var l=this.constructor,u=M.call(this,a)||this;return Object.defineProperty(u,"name",{value:l.name,enumerable:!1}),x(u,l.prototype),T(u),u}return r})(Error);class w extends b{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}w.kind="Exception";class C extends w{}C.kind="ArgumentException";class R extends w{}R.kind="IllegalArgumentException";class P{constructor(r){if(this.binarizer=r,r===null)throw new R("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,a){return this.binarizer.getBlackRow(r,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,a,l,u){const f=this.binarizer.getLuminanceSource().crop(r,a,l,u);return new P(this.binarizer.createBinarizer(f))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new P(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new P(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class B extends w{static getChecksumInstance(){return new B}}B.kind="ChecksumException";class ${constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class ne{static arraycopy(r,a,l,u,f){for(;f--;)l[u++]=r[a++]}static currentTimeMillis(){return Date.now()}}class se extends w{}se.kind="IndexOutOfBoundsException";class Qe extends se{constructor(r=void 0,a=void 0){super(a),this.index=r,this.message=a}}Qe.kind="ArrayIndexOutOfBoundsException";class Le{static fill(r,a){for(let l=0,u=r.length;l<u;l++)r[l]=a}static fillWithin(r,a,l,u){Le.rangeCheck(r.length,a,l);for(let f=a;f<l;f++)r[f]=u}static rangeCheck(r,a,l){if(a>l)throw new R("fromIndex("+a+") > toIndex("+l+")");if(a<0)throw new Qe(a);if(l>r)throw new Qe(l)}static asList(...r){return r}static create(r,a,l){return Array.from({length:r}).map(f=>Array.from({length:a}).fill(l))}static createInt32Array(r,a,l){return Array.from({length:r}).map(f=>Int32Array.from({length:a}).fill(l))}static equals(r,a){if(!r||!a||!r.length||!a.length||r.length!==a.length)return!1;for(let l=0,u=r.length;l<u;l++)if(r[l]!==a[l])return!1;return!0}static hashCode(r){if(r===null)return 0;let a=1;for(const l of r)a=31*a+l;return a}static fillUint8Array(r,a){for(let l=0;l!==r.length;l++)r[l]=a}static copyOf(r,a){return r.slice(0,a)}static copyOfUint8Array(r,a){if(r.length<=a){const l=new Uint8Array(a);return l.set(r),l}return r.slice(0,a)}static copyOfRange(r,a,l){const u=l-a,f=new Int32Array(u);return ne.arraycopy(r,a,f,0,u),f}static binarySearch(r,a,l){l===void 0&&(l=Le.numberComparator);let u=0,f=r.length-1;for(;u<=f;){const m=f+u>>1,y=l(a,r[m]);if(y>0)u=m+1;else if(y<0)f=m-1;else return m}return-u-1}static numberComparator(r,a){return r-a}}class he{static numberOfTrailingZeros(r){let a;if(r===0)return 32;let l=31;return a=r<<16,a!==0&&(l-=16,r=a),a=r<<8,a!==0&&(l-=8,r=a),a=r<<4,a!==0&&(l-=4,r=a),a=r<<2,a!==0&&(l-=2,r=a),l-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let a=1;return r>>>16||(a+=16,r<<=16),r>>>24||(a+=8,r<<=8),r>>>28||(a+=4,r<<=4),r>>>30||(a+=2,r<<=2),a-=r>>>31,a}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,a){return Math.trunc(r/a)}static parseInt(r,a=void 0){return parseInt(r,a)}}he.MIN_VALUE_32_BITS=-2147483648,he.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ue{constructor(r,a){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,a==null?this.bits=Ue.makeArray(r):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const a=Ue.makeArray(r);ne.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const a=this.size;if(r>=a)return a;const l=this.bits;let u=Math.floor(r/32),f=l[u];f&=~((1<<(r&31))-1);const m=l.length;for(;f===0;){if(++u===m)return a;f=l[u]}const y=u*32+he.numberOfTrailingZeros(f);return y>a?a:y}getNextUnset(r){const a=this.size;if(r>=a)return a;const l=this.bits;let u=Math.floor(r/32),f=~l[u];f&=~((1<<(r&31))-1);const m=l.length;for(;f===0;){if(++u===m)return a;f=~l[u]}const y=u*32+he.numberOfTrailingZeros(f);return y>a?a:y}setBulk(r,a){this.bits[Math.floor(r/32)]=a}setRange(r,a){if(a<r||r<0||a>this.size)throw new R;if(a===r)return;a--;const l=Math.floor(r/32),u=Math.floor(a/32),f=this.bits;for(let m=l;m<=u;m++){const y=m>l?0:r&31,v=(2<<(m<u?31:a&31))-(1<<y);f[m]|=v}}clear(){const r=this.bits.length,a=this.bits;for(let l=0;l<r;l++)a[l]=0}isRange(r,a,l){if(a<r||r<0||a>this.size)throw new R;if(a===r)return!0;a--;const u=Math.floor(r/32),f=Math.floor(a/32),m=this.bits;for(let y=u;y<=f;y++){const _=y>u?0:r&31,I=(2<<(y<f?31:a&31))-(1<<_)&4294967295;if((m[y]&I)!==(l?I:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,a){if(a<0||a>32)throw new R("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let l=a;l>0;l--)this.appendBit((r>>l-1&1)===1)}appendBitArray(r){const a=r.size;this.ensureCapacity(this.size+a);for(let l=0;l<a;l++)this.appendBit(r.get(l))}xor(r){if(this.size!==r.size)throw new R("Sizes don't match");const a=this.bits;for(let l=0,u=a.length;l<u;l++)a[l]^=r.bits[l]}toBytes(r,a,l,u){for(let f=0;f<u;f++){let m=0;for(let y=0;y<8;y++)this.get(r)&&(m|=1<<7-y),r++;a[l+f]=m}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),l=a+1,u=this.bits;for(let f=0;f<l;f++){let m=u[f];m=m>>1&1431655765|(m&1431655765)<<1,m=m>>2&858993459|(m&858993459)<<2,m=m>>4&252645135|(m&252645135)<<4,m=m>>8&16711935|(m&16711935)<<8,m=m>>16&65535|(m&65535)<<16,r[a-f]=m}if(this.size!==l*32){const f=l*32-this.size;let m=r[0]>>>f;for(let y=1;y<l;y++){const _=r[y];m|=_<<32-f,r[y-1]=m,m=_>>>f}r[l-1]=m}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof Ue))return!1;const a=r;return this.size===a.size&&Le.equals(this.bits,a.bits)}hashCode(){return 31*this.size+Le.hashCode(this.bits)}toString(){let r="";for(let a=0,l=this.size;a<l;a++)(a&7)===0&&(r+=" "),r+=this.get(a)?"X":".";return r}clone(){return new Ue(this.size,this.bits.slice())}}var pt;(function(M){M[M.OTHER=0]="OTHER",M[M.PURE_BARCODE=1]="PURE_BARCODE",M[M.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",M[M.TRY_HARDER=3]="TRY_HARDER",M[M.CHARACTER_SET=4]="CHARACTER_SET",M[M.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",M[M.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",M[M.ASSUME_GS1=7]="ASSUME_GS1",M[M.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",M[M.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",M[M.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(pt||(pt={}));var je=pt;class F extends w{static getFormatInstance(){return new F}}F.kind="FormatException";var z;(function(M){M[M.Cp437=0]="Cp437",M[M.ISO8859_1=1]="ISO8859_1",M[M.ISO8859_2=2]="ISO8859_2",M[M.ISO8859_3=3]="ISO8859_3",M[M.ISO8859_4=4]="ISO8859_4",M[M.ISO8859_5=5]="ISO8859_5",M[M.ISO8859_6=6]="ISO8859_6",M[M.ISO8859_7=7]="ISO8859_7",M[M.ISO8859_8=8]="ISO8859_8",M[M.ISO8859_9=9]="ISO8859_9",M[M.ISO8859_10=10]="ISO8859_10",M[M.ISO8859_11=11]="ISO8859_11",M[M.ISO8859_13=12]="ISO8859_13",M[M.ISO8859_14=13]="ISO8859_14",M[M.ISO8859_15=14]="ISO8859_15",M[M.ISO8859_16=15]="ISO8859_16",M[M.SJIS=16]="SJIS",M[M.Cp1250=17]="Cp1250",M[M.Cp1251=18]="Cp1251",M[M.Cp1252=19]="Cp1252",M[M.Cp1256=20]="Cp1256",M[M.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",M[M.UTF8=22]="UTF8",M[M.ASCII=23]="ASCII",M[M.Big5=24]="Big5",M[M.GB18030=25]="GB18030",M[M.EUC_KR=26]="EUC_KR"})(z||(z={}));class U{constructor(r,a,l,...u){this.valueIdentifier=r,this.name=l,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=u,U.VALUE_IDENTIFIER_TO_ECI.set(r,this),U.NAME_TO_ECI.set(l,this);const f=this.values;for(let m=0,y=f.length;m!==y;m++){const _=f[m];U.VALUES_TO_ECI.set(_,this)}for(const m of u)U.NAME_TO_ECI.set(m,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new F("incorect value");const a=U.VALUES_TO_ECI.get(r);if(a===void 0)throw new F("incorect value");return a}static getCharacterSetECIByName(r){const a=U.NAME_TO_ECI.get(r);if(a===void 0)throw new F("incorect value");return a}equals(r){if(!(r instanceof U))return!1;const a=r;return this.getName()===a.getName()}}U.VALUE_IDENTIFIER_TO_ECI=new Map,U.VALUES_TO_ECI=new Map,U.NAME_TO_ECI=new Map,U.Cp437=new U(z.Cp437,Int32Array.from([0,2]),"Cp437"),U.ISO8859_1=new U(z.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),U.ISO8859_2=new U(z.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),U.ISO8859_3=new U(z.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),U.ISO8859_4=new U(z.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),U.ISO8859_5=new U(z.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),U.ISO8859_6=new U(z.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),U.ISO8859_7=new U(z.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),U.ISO8859_8=new U(z.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),U.ISO8859_9=new U(z.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),U.ISO8859_10=new U(z.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),U.ISO8859_11=new U(z.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),U.ISO8859_13=new U(z.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),U.ISO8859_14=new U(z.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),U.ISO8859_15=new U(z.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),U.ISO8859_16=new U(z.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),U.SJIS=new U(z.SJIS,20,"SJIS","Shift_JIS"),U.Cp1250=new U(z.Cp1250,21,"Cp1250","windows-1250"),U.Cp1251=new U(z.Cp1251,22,"Cp1251","windows-1251"),U.Cp1252=new U(z.Cp1252,23,"Cp1252","windows-1252"),U.Cp1256=new U(z.Cp1256,24,"Cp1256","windows-1256"),U.UnicodeBigUnmarked=new U(z.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),U.UTF8=new U(z.UTF8,26,"UTF8","UTF-8"),U.ASCII=new U(z.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),U.Big5=new U(z.Big5,28,"Big5"),U.GB18030=new U(z.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),U.EUC_KR=new U(z.EUC_KR,30,"EUC_KR","EUC-KR");class Q extends w{}Q.kind="UnsupportedOperationException";class X{static decode(r,a){const l=this.encodingName(a);return this.customDecoder?this.customDecoder(r,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(r,l):new TextDecoder(l).decode(r)}static shouldDecodeOnFallback(r){return!X.isBrowser()&&r==="ISO-8859-1"}static encode(r,a){const l=this.encodingName(a);return this.customEncoder?this.customEncoder(r,l):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof U?r:U.getCharacterSetECIByName(r)}static decodeFallback(r,a){const l=this.encodingCharacterSet(a);if(X.isDecodeFallbackSupported(l)){let u="";for(let f=0,m=r.length;f<m;f++){let y=r[f].toString(16);y.length<2&&(y="0"+y),u+="%"+y}return decodeURIComponent(u)}if(l.equals(U.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new Q(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(U.UTF8)||r.equals(U.ISO8859_1)||r.equals(U.ASCII)}static encodeFallback(r){const l=btoa(unescape(encodeURIComponent(r))).split(""),u=[];for(let f=0;f<l.length;f++)u.push(l[f].charCodeAt(0));return new Uint8Array(u)}}class Y{static castAsNonUtf8Char(r,a=null){const l=a?a.getName():this.ISO88591;return X.decode(new Uint8Array([r]),l)}static guessEncoding(r,a){if(a!=null&&a.get(je.CHARACTER_SET)!==void 0)return a.get(je.CHARACTER_SET).toString();const l=r.length;let u=!0,f=!0,m=!0,y=0,_=0,v=0,I=0,k=0,L=0,q=0,Z=0,J=0,ce=0,Ee=0;const Xe=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let ze=0;ze<l&&(u||f||m);ze++){const Fe=r[ze]&255;m&&(y>0?(Fe&128)===0?m=!1:y--:(Fe&128)!==0&&((Fe&64)===0?m=!1:(y++,(Fe&32)===0?_++:(y++,(Fe&16)===0?v++:(y++,(Fe&8)===0?I++:m=!1))))),u&&(Fe>127&&Fe<160?u=!1:Fe>159&&(Fe<192||Fe===215||Fe===247)&&Ee++),f&&(k>0?Fe<64||Fe===127||Fe>252?f=!1:k--:Fe===128||Fe===160||Fe>239?f=!1:Fe>160&&Fe<224?(L++,Z=0,q++,q>J&&(J=q)):Fe>127?(k++,q=0,Z++,Z>ce&&(ce=Z)):(q=0,Z=0))}return m&&y>0&&(m=!1),f&&k>0&&(f=!1),m&&(Xe||_+v+I>0)?Y.UTF8:f&&(Y.ASSUME_SHIFT_JIS||J>=3||ce>=3)?Y.SHIFT_JIS:u&&f?J===2&&L===2||Ee*10>=l?Y.SHIFT_JIS:Y.ISO88591:u?Y.ISO88591:f?Y.SHIFT_JIS:m?Y.UTF8:Y.PLATFORM_DEFAULT_ENCODING}static format(r,...a){let l=-1;function u(m,y,_,v,I,k){if(m==="%%")return"%";if(a[++l]===void 0)return;m=v?parseInt(v.substr(1)):void 0;let L=I?parseInt(I.substr(1)):void 0,q;switch(k){case"s":q=a[l];break;case"c":q=a[l][0];break;case"f":q=parseFloat(a[l]).toFixed(m);break;case"p":q=parseFloat(a[l]).toPrecision(m);break;case"e":q=parseFloat(a[l]).toExponential(m);break;case"x":q=parseInt(a[l]).toString(L||16);break;case"d":q=parseFloat(parseInt(a[l],L||10).toPrecision(m)).toFixed(0);break}q=typeof q=="object"?JSON.stringify(q):(+q).toString(L);let Z=parseInt(_),J=_&&_[0]+""=="0"?"0":" ";for(;q.length<Z;)q=y!==void 0?q+J:J+q;return q}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(f,u)}static getBytes(r,a){return X.encode(r,a)}static getCharCode(r,a=0){return r.charCodeAt(a)}static getCharAt(r){return String.fromCharCode(r)}}Y.SHIFT_JIS=U.SJIS.getName(),Y.GB2312="GB2312",Y.ISO88591=U.ISO8859_1.getName(),Y.EUC_JP="EUC_JP",Y.UTF8=U.UTF8.getName(),Y.PLATFORM_DEFAULT_ENCODING=Y.UTF8,Y.ASSUME_SHIFT_JIS=!1;class G{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=Y.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,a,l){for(let u=a;a<a+l;u++)this.append(r[u]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,a){this.value=this.value.substr(0,r)+a+this.value.substr(r+1)}substring(r,a){return this.value.substring(r,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,a){this.value=this.value.substr(0,r)+a+this.value.substr(r+a.length)}}class lt{constructor(r,a,l,u){if(this.width=r,this.height=a,this.rowSize=l,this.bits=u,a==null&&(a=r),this.height=a,r<1||a<1)throw new R("Both dimensions must be greater than 0");l==null&&(l=Math.floor((r+31)/32)),this.rowSize=l,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const a=r.length,l=r[0].length,u=new lt(l,a);for(let f=0;f<a;f++){const m=r[f];for(let y=0;y<l;y++)m[y]&&u.set(y,f)}return u}static parseFromString(r,a,l){if(r===null)throw new R("stringRepresentation cannot be null");const u=new Array(r.length);let f=0,m=0,y=-1,_=0,v=0;for(;v<r.length;)if(r.charAt(v)===`
`||r.charAt(v)==="\r"){if(f>m){if(y===-1)y=f-m;else if(f-m!==y)throw new R("row lengths do not match");m=f,_++}v++}else if(r.substring(v,v+a.length)===a)v+=a.length,u[f]=!0,f++;else if(r.substring(v,v+l.length)===l)v+=l.length,u[f]=!1,f++;else throw new R("illegal character encountered: "+r.substring(v));if(f>m){if(y===-1)y=f-m;else if(f-m!==y)throw new R("row lengths do not match");_++}const I=new lt(y,_);for(let k=0;k<f;k++)u[k]&&I.set(Math.floor(k%y),Math.floor(k/y));return I}get(r,a){const l=a*this.rowSize+Math.floor(r/32);return(this.bits[l]>>>(r&31)&1)!==0}set(r,a){const l=a*this.rowSize+Math.floor(r/32);this.bits[l]|=1<<(r&31)&4294967295}unset(r,a){const l=a*this.rowSize+Math.floor(r/32);this.bits[l]&=~(1<<(r&31)&4294967295)}flip(r,a){const l=a*this.rowSize+Math.floor(r/32);this.bits[l]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new R("input matrix dimensions do not match");const a=new Ue(Math.floor(this.width/32)+1),l=this.rowSize,u=this.bits;for(let f=0,m=this.height;f<m;f++){const y=f*l,_=r.getRow(f,a).getBitArray();for(let v=0;v<l;v++)u[y+v]^=_[v]}}clear(){const r=this.bits,a=r.length;for(let l=0;l<a;l++)r[l]=0}setRegion(r,a,l,u){if(a<0||r<0)throw new R("Left and top must be nonnegative");if(u<1||l<1)throw new R("Height and width must be at least 1");const f=r+l,m=a+u;if(m>this.height||f>this.width)throw new R("The region must fit inside the matrix");const y=this.rowSize,_=this.bits;for(let v=a;v<m;v++){const I=v*y;for(let k=r;k<f;k++)_[I+Math.floor(k/32)]|=1<<(k&31)&4294967295}}getRow(r,a){a==null||a.getSize()<this.width?a=new Ue(this.width):a.clear();const l=this.rowSize,u=this.bits,f=r*l;for(let m=0;m<l;m++)a.setBulk(m*32,u[f+m]);return a}setRow(r,a){ne.arraycopy(a.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),a=this.getHeight();let l=new Ue(r),u=new Ue(r);for(let f=0,m=Math.floor((a+1)/2);f<m;f++)l=this.getRow(f,l),u=this.getRow(a-1-f,u),l.reverse(),u.reverse(),this.setRow(f,u),this.setRow(a-1-f,l)}getEnclosingRectangle(){const r=this.width,a=this.height,l=this.rowSize,u=this.bits;let f=r,m=a,y=-1,_=-1;for(let v=0;v<a;v++)for(let I=0;I<l;I++){const k=u[v*l+I];if(k!==0){if(v<m&&(m=v),v>_&&(_=v),I*32<f){let L=0;for(;(k<<31-L&4294967295)===0;)L++;I*32+L<f&&(f=I*32+L)}if(I*32+31>y){let L=31;for(;!(k>>>L);)L--;I*32+L>y&&(y=I*32+L)}}}return y<f||_<m?null:Int32Array.from([f,m,y-f+1,_-m+1])}getTopLeftOnBit(){const r=this.rowSize,a=this.bits;let l=0;for(;l<a.length&&a[l]===0;)l++;if(l===a.length)return null;const u=l/r;let f=l%r*32;const m=a[l];let y=0;for(;(m<<31-y&4294967295)===0;)y++;return f+=y,Int32Array.from([f,u])}getBottomRightOnBit(){const r=this.rowSize,a=this.bits;let l=a.length-1;for(;l>=0&&a[l]===0;)l--;if(l<0)return null;const u=Math.floor(l/r);let f=Math.floor(l%r)*32;const m=a[l];let y=31;for(;!(m>>>y);)y--;return f+=y,Int32Array.from([f,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof lt))return!1;const a=r;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&Le.equals(this.bits,a.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+Le.hashCode(this.bits),r}toString(r="X ",a="  ",l=`
`){return this.buildToString(r,a,l)}buildToString(r,a,l){let u=new G;for(let f=0,m=this.height;f<m;f++){for(let y=0,_=this.width;y<_;y++)u.append(this.get(y,f)?r:a);u.append(l)}return u.toString()}clone(){return new lt(this.width,this.height,this.rowSize,this.bits.slice())}}class ae extends w{static getNotFoundInstance(){return new ae}}ae.kind="NotFoundException";class re extends ${constructor(r){super(r),this.luminances=re.EMPTY,this.buckets=new Int32Array(re.LUMINANCE_BUCKETS)}getBlackRow(r,a){const l=this.getLuminanceSource(),u=l.getWidth();a==null||a.getSize()<u?a=new Ue(u):a.clear(),this.initArrays(u);const f=l.getRow(r,this.luminances),m=this.buckets;for(let _=0;_<u;_++)m[(f[_]&255)>>re.LUMINANCE_SHIFT]++;const y=re.estimateBlackPoint(m);if(u<3)for(let _=0;_<u;_++)(f[_]&255)<y&&a.set(_);else{let _=f[0]&255,v=f[1]&255;for(let I=1;I<u-1;I++){const k=f[I+1]&255;(v*4-_-k)/2<y&&a.set(I),_=v,v=k}}return a}getBlackMatrix(){const r=this.getLuminanceSource(),a=r.getWidth(),l=r.getHeight(),u=new lt(a,l);this.initArrays(a);const f=this.buckets;for(let _=1;_<5;_++){const v=Math.floor(l*_/5),I=r.getRow(v,this.luminances),k=Math.floor(a*4/5);for(let L=Math.floor(a/5);L<k;L++){const q=I[L]&255;f[q>>re.LUMINANCE_SHIFT]++}}const m=re.estimateBlackPoint(f),y=r.getMatrix();for(let _=0;_<l;_++){const v=_*a;for(let I=0;I<a;I++)(y[v+I]&255)<m&&u.set(I,_)}return u}createBinarizer(r){return new re(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const a=this.buckets;for(let l=0;l<re.LUMINANCE_BUCKETS;l++)a[l]=0}static estimateBlackPoint(r){const a=r.length;let l=0,u=0,f=0;for(let I=0;I<a;I++)r[I]>f&&(u=I,f=r[I]),r[I]>l&&(l=r[I]);let m=0,y=0;for(let I=0;I<a;I++){const k=I-u,L=r[I]*k*k;L>y&&(m=I,y=L)}if(u>m){const I=u;u=m,m=I}if(m-u<=a/16)throw new ae;let _=m-1,v=-1;for(let I=m-1;I>u;I--){const k=I-u,L=k*k*(m-I)*(l-r[I]);L>v&&(_=I,v=L)}return _<<re.LUMINANCE_SHIFT}}re.LUMINANCE_BITS=5,re.LUMINANCE_SHIFT=8-re.LUMINANCE_BITS,re.LUMINANCE_BUCKETS=1<<re.LUMINANCE_BITS,re.EMPTY=Uint8ClampedArray.from([0]);class fe extends re{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),a=r.getWidth(),l=r.getHeight();if(a>=fe.MINIMUM_DIMENSION&&l>=fe.MINIMUM_DIMENSION){const u=r.getMatrix();let f=a>>fe.BLOCK_SIZE_POWER;(a&fe.BLOCK_SIZE_MASK)!==0&&f++;let m=l>>fe.BLOCK_SIZE_POWER;(l&fe.BLOCK_SIZE_MASK)!==0&&m++;const y=fe.calculateBlackPoints(u,f,m,a,l),_=new lt(a,l);fe.calculateThresholdForBlock(u,f,m,a,l,y,_),this.matrix=_}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new fe(r)}static calculateThresholdForBlock(r,a,l,u,f,m,y){const _=f-fe.BLOCK_SIZE,v=u-fe.BLOCK_SIZE;for(let I=0;I<l;I++){let k=I<<fe.BLOCK_SIZE_POWER;k>_&&(k=_);const L=fe.cap(I,2,l-3);for(let q=0;q<a;q++){let Z=q<<fe.BLOCK_SIZE_POWER;Z>v&&(Z=v);const J=fe.cap(q,2,a-3);let ce=0;for(let Xe=-2;Xe<=2;Xe++){const ze=m[L+Xe];ce+=ze[J-2]+ze[J-1]+ze[J]+ze[J+1]+ze[J+2]}const Ee=ce/25;fe.thresholdBlock(r,Z,k,Ee,u,y)}}}static cap(r,a,l){return r<a?a:r>l?l:r}static thresholdBlock(r,a,l,u,f,m){for(let y=0,_=l*f+a;y<fe.BLOCK_SIZE;y++,_+=f)for(let v=0;v<fe.BLOCK_SIZE;v++)(r[_+v]&255)<=u&&m.set(a+v,l+y)}static calculateBlackPoints(r,a,l,u,f){const m=f-fe.BLOCK_SIZE,y=u-fe.BLOCK_SIZE,_=new Array(l);for(let v=0;v<l;v++){_[v]=new Int32Array(a);let I=v<<fe.BLOCK_SIZE_POWER;I>m&&(I=m);for(let k=0;k<a;k++){let L=k<<fe.BLOCK_SIZE_POWER;L>y&&(L=y);let q=0,Z=255,J=0;for(let Ee=0,Xe=I*u+L;Ee<fe.BLOCK_SIZE;Ee++,Xe+=u){for(let ze=0;ze<fe.BLOCK_SIZE;ze++){const Fe=r[Xe+ze]&255;q+=Fe,Fe<Z&&(Z=Fe),Fe>J&&(J=Fe)}if(J-Z>fe.MIN_DYNAMIC_RANGE)for(Ee++,Xe+=u;Ee<fe.BLOCK_SIZE;Ee++,Xe+=u)for(let ze=0;ze<fe.BLOCK_SIZE;ze++)q+=r[Xe+ze]&255}let ce=q>>fe.BLOCK_SIZE_POWER*2;if(J-Z<=fe.MIN_DYNAMIC_RANGE&&(ce=Z/2,v>0&&k>0)){const Ee=(_[v-1][k]+2*_[v][k-1]+_[v-1][k-1])/4;Z<Ee&&(ce=Ee)}_[v][k]=ce}}return _}}fe.BLOCK_SIZE_POWER=3,fe.BLOCK_SIZE=1<<fe.BLOCK_SIZE_POWER,fe.BLOCK_SIZE_MASK=fe.BLOCK_SIZE-1,fe.MINIMUM_DIMENSION=fe.BLOCK_SIZE*5,fe.MIN_DYNAMIC_RANGE=24;class tt{constructor(r,a){this.width=r,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,a,l,u){throw new Q("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Q("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Q("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let a=new G;for(let l=0;l<this.height;l++){const u=this.getRow(l,r);for(let f=0;f<this.width;f++){const m=u[f]&255;let y;m<64?y="#":m<128?y="+":m<192?y=".":y=" ",a.append(y)}a.append(`
`)}return a.toString()}}class qe extends tt{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,a){const l=this.delegate.getRow(r,a),u=this.getWidth();for(let f=0;f<u;f++)l[f]=255-(l[f]&255);return l}getMatrix(){const r=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(a);for(let u=0;u<a;u++)l[u]=255-(r[u]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(r,a,l,u){return new qe(this.delegate.crop(r,a,l,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new qe(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new qe(this.delegate.rotateCounterClockwise45())}}class ut extends tt{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=ut.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const a=r.getContext("2d").getImageData(0,0,r.width,r.height);return ut.toGrayscaleBuffer(a.data,r.width,r.height)}static toGrayscaleBuffer(r,a,l){const u=new Uint8ClampedArray(a*l);for(let f=0,m=0,y=r.length;f<y;f+=4,m++){let _;if(r[f+3]===0)_=255;else{const I=r[f],k=r[f+1],L=r[f+2];_=306*I+601*k+117*L+512>>10}u[m]=_}return u}getRow(r,a){if(r<0||r>=this.getHeight())throw new R("Requested row is outside the image: "+r);const l=this.getWidth(),u=r*l;return a===null?a=this.buffer.slice(u,u+l):(a.length<l&&(a=new Uint8ClampedArray(l)),a.set(this.buffer.slice(u,u+l))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,a,l,u){return super.crop(r,a,l,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const a=this.getTempCanvasElement(),l=a.getContext("2d"),u=r*ut.DEGREE_TO_RADIANS,f=this.canvas.width,m=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(u))*f+Math.abs(Math.sin(u))*m),_=Math.ceil(Math.abs(Math.sin(u))*f+Math.abs(Math.cos(u))*m);return a.width=y,a.height=_,l.translate(y/2,_/2),l.rotate(u),l.drawImage(this.canvas,f/-2,m/-2),this.buffer=ut.makeBufferFromCanvasImageData(a),this}invert(){return new qe(this)}}ut.DEGREE_TO_RADIANS=Math.PI/180;class K{constructor(r,a,l){this.deviceId=r,this.label=a,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var oe=(globalThis||Jh||self||window||void 0)&&(globalThis||Jh||self||window||void 0).__awaiter||function(M,r,a,l){function u(f){return f instanceof a?f:new a(function(m){m(f)})}return new(a||(a=Promise))(function(f,m){function y(I){try{v(l.next(I))}catch(k){m(k)}}function _(I){try{v(l.throw(I))}catch(k){m(k)}}function v(I){I.done?f(I.value):u(I.value).then(y,_)}v((l=l.apply(M,r||[])).next())})};class ve{constructor(r,a=500,l){this.reader=r,this.timeBetweenScansMillis=a,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return oe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),a=[];for(const l of r){const u=l.kind==="video"?"videoinput":l.kind;if(u!=="videoinput")continue;const f=l.deviceId||l.id,m=l.label||`Video device ${a.length+1}`,y=l.groupId,_={deviceId:f,label:m,kind:u,groupId:y};a.push(_)}return a})}getVideoInputDevices(){return oe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new K(a.deviceId,a.label))})}findDeviceById(r){return oe(this,void 0,void 0,function*(){const a=yield this.listVideoInputDevices();return a?a.find(l=>l.deviceId===r):null})}decodeFromInputVideoDevice(r,a){return oe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,a)})}decodeOnceFromVideoDevice(r,a){return oe(this,void 0,void 0,function*(){this.reset();let l;r?l={deviceId:{exact:r}}:l={facingMode:"environment"};const u={video:l};return yield this.decodeOnceFromConstraints(u,a)})}decodeOnceFromConstraints(r,a){return oe(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(l,a)})}decodeOnceFromStream(r,a){return oe(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(r,a);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(r,a,l){return oe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,a,l)})}decodeFromVideoDevice(r,a,l){return oe(this,void 0,void 0,function*(){let u;r?u={deviceId:{exact:r}}:u={facingMode:"environment"};const f={video:u};return yield this.decodeFromConstraints(f,a,l)})}decodeFromConstraints(r,a,l){return oe(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(u,a,l)})}decodeFromStream(r,a,l){return oe(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(r,a);return yield this.decodeContinuously(u,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,a){return oe(this,void 0,void 0,function*(){const l=this.prepareVideoElement(a);return this.addVideoSource(l,r),this.videoElement=l,this.stream=r,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(r){return new Promise((a,l)=>this.playVideoOnLoad(r,()=>a()))}playVideoOnLoad(r,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",a),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return oe(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,a){const l=document.getElementById(r);if(!l)throw new C(`element with id '${r}' not found`);if(l.nodeName.toLowerCase()!==a.toLowerCase())throw new C(`element with id '${r}' must be an ${a} element`);return l}decodeFromImage(r,a){if(!r&&!a)throw new C("either imageElement with a src set or an url must be provided");return a&&!r?this.decodeFromImageUrl(a):this.decodeFromImageElement(r)}decodeFromVideo(r,a){if(!r&&!a)throw new C("Either an element with a src set or an URL must be provided");return a&&!r?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,a,l){if(r===void 0&&a===void 0)throw new C("Either an element with a src set or an URL must be provided");return a&&!r?this.decodeFromVideoUrlContinuously(a,l):this.decodeFromVideoElementContinuously(r,l)}decodeFromImageElement(r){if(!r)throw new C("An image element must be provided.");this.reset();const a=this.prepareImageElement(r);this.imageElement=a;let l;return this.isImageLoaded(a)?l=this.decodeOnce(a,!1,!0):l=this._decodeOnLoadImage(a),l}decodeFromVideoElement(r){const a=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(r,a){const l=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(l,a)}_decodeFromVideoElementSetup(r){if(!r)throw new C("A video element must be provided.");this.reset();const a=this.prepareVideoElement(r);return this.videoElement=a,a}decodeFromImageUrl(r){if(!r)throw new C("An URL must be provided.");this.reset();const a=this.prepareImageElement();this.imageElement=a;const l=this._decodeOnLoadImage(a);return a.src=r,l}decodeFromVideoUrl(r){if(!r)throw new C("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),l=this.decodeFromVideoElement(a);return a.src=r,l}decodeFromVideoUrlContinuously(r,a){if(!r)throw new C("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(l,a);return l.src=r,u}_decodeOnLoadImage(r){return new Promise((a,l)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(a,l),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return oe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,a){return oe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,a)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let a;return typeof r>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof r=="string"&&(a=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(a=r),a}prepareVideoElement(r){let a;return!r&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof r=="string"&&(a=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(a=r),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(r,a=!0,l=!0){this._stopAsyncDecode=!1;const u=(f,m)=>{if(this._stopAsyncDecode){m(new ae("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const y=this.decode(r);f(y)}catch(y){const _=a&&y instanceof ae,I=(y instanceof B||y instanceof F)&&l;if(_||I)return setTimeout(u,this._timeBetweenDecodingAttempts,f,m);m(y)}};return new Promise((f,m)=>u(f,m))}decodeContinuously(r,a){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(r);a(u,null),setTimeout(l,this.timeBetweenScansMillis)}catch(u){a(null,u);const f=u instanceof B||u instanceof F,m=u instanceof ae;(f||m)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(r){const a=this.createBinaryBitmap(r);return this.decodeBitmap(a)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,a,l){a||(a={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(r,a,l=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const a=this.getCaptureCanvas(r),l=new ut(a),u=new fe(l);return new P(u)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const a=this.createCaptureCanvas(r);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const a=document.createElement("canvas");let l,u;return typeof r<"u"&&(r instanceof HTMLVideoElement?(l=r.videoWidth,u=r.videoHeight):r instanceof HTMLImageElement&&(l=r.naturalWidth||r.width,u=r.naturalHeight||r.height)),a.style.width=l+"px",a.style.height=u+"px",a.width=l,a.height=u,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,a){try{r.srcObject=a}catch{r.src=URL.createObjectURL(a)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class Te{constructor(r,a,l=a==null?0:8*a.length,u,f,m=ne.currentTimeMillis()){this.text=r,this.rawBytes=a,this.numBits=l,this.resultPoints=u,this.format=f,this.timestamp=m,this.text=r,this.rawBytes=a,l==null?this.numBits=a==null?0:8*a.length:this.numBits=l,this.resultPoints=u,this.format=f,this.resultMetadata=null,m==null?this.timestamp=ne.currentTimeMillis():this.timestamp=m}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,a)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const a=this.resultPoints;if(a===null)this.resultPoints=r;else if(r!==null&&r.length>0){const l=new Array(a.length+r.length);ne.arraycopy(a,0,l,0,a.length),ne.arraycopy(r,0,l,a.length,r.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Se;(function(M){M[M.AZTEC=0]="AZTEC",M[M.CODABAR=1]="CODABAR",M[M.CODE_39=2]="CODE_39",M[M.CODE_93=3]="CODE_93",M[M.CODE_128=4]="CODE_128",M[M.DATA_MATRIX=5]="DATA_MATRIX",M[M.EAN_8=6]="EAN_8",M[M.EAN_13=7]="EAN_13",M[M.ITF=8]="ITF",M[M.MAXICODE=9]="MAXICODE",M[M.PDF_417=10]="PDF_417",M[M.QR_CODE=11]="QR_CODE",M[M.RSS_14=12]="RSS_14",M[M.RSS_EXPANDED=13]="RSS_EXPANDED",M[M.UPC_A=14]="UPC_A",M[M.UPC_E=15]="UPC_E",M[M.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Se||(Se={}));var _e=Se,Je;(function(M){M[M.OTHER=0]="OTHER",M[M.ORIENTATION=1]="ORIENTATION",M[M.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",M[M.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",M[M.ISSUE_NUMBER=4]="ISSUE_NUMBER",M[M.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",M[M.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",M[M.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",M[M.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",M[M.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",M[M.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Je||(Je={}));var _t=Je;class It{constructor(r,a,l,u,f=-1,m=-1){this.rawBytes=r,this.text=a,this.byteSegments=l,this.ecLevel=u,this.structuredAppendSequenceNumber=f,this.structuredAppendParity=m,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class An{exp(r){return this.expTable[r]}log(r){if(r===0)throw new R;return this.logTable[r]}static addOrSubtract(r,a){return r^a}}class jt{constructor(r,a){if(a.length===0)throw new R;this.field=r;const l=a.length;if(l>1&&a[0]===0){let u=1;for(;u<l&&a[u]===0;)u++;u===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-u),ne.arraycopy(a,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const a=this.coefficients;let l;if(r===1){l=0;for(let m=0,y=a.length;m!==y;m++){const _=a[m];l=An.addOrSubtract(l,_)}return l}l=a[0];const u=a.length,f=this.field;for(let m=1;m<u;m++)l=An.addOrSubtract(f.multiply(r,l),a[m]);return l}addOrSubtract(r){if(!this.field.equals(r.field))throw new R("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let a=this.coefficients,l=r.coefficients;if(a.length>l.length){const m=a;a=l,l=m}let u=new Int32Array(l.length);const f=l.length-a.length;ne.arraycopy(l,0,u,0,f);for(let m=f;m<l.length;m++)u[m]=An.addOrSubtract(a[m-f],l[m]);return new jt(this.field,u)}multiply(r){if(!this.field.equals(r.field))throw new R("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const a=this.coefficients,l=a.length,u=r.coefficients,f=u.length,m=new Int32Array(l+f-1),y=this.field;for(let _=0;_<l;_++){const v=a[_];for(let I=0;I<f;I++)m[_+I]=An.addOrSubtract(m[_+I],y.multiply(v,u[I]))}return new jt(y,m)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const a=this.coefficients.length,l=this.field,u=new Int32Array(a),f=this.coefficients;for(let m=0;m<a;m++)u[m]=l.multiply(f[m],r);return new jt(l,u)}multiplyByMonomial(r,a){if(r<0)throw new R;if(a===0)return this.field.getZero();const l=this.coefficients,u=l.length,f=new Int32Array(u+r),m=this.field;for(let y=0;y<u;y++)f[y]=m.multiply(l[y],a);return new jt(m,f)}divide(r){if(!this.field.equals(r.field))throw new R("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new R("Divide by 0");const a=this.field;let l=a.getZero(),u=this;const f=r.getCoefficient(r.getDegree()),m=a.inverse(f);for(;u.getDegree()>=r.getDegree()&&!u.isZero();){const y=u.getDegree()-r.getDegree(),_=a.multiply(u.getCoefficient(u.getDegree()),m),v=r.multiplyByMonomial(y,_),I=a.buildMonomial(y,_);l=l.addOrSubtract(I),u=u.addOrSubtract(v)}return[l,u]}toString(){let r="";for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);if(l!==0){if(l<0?(r+=" - ",l=-l):r.length>0&&(r+=" + "),a===0||l!==1){const u=this.field.log(l);u===0?r+="1":u===1?r+="a":(r+="a^",r+=u)}a!==0&&(a===1?r+="x":(r+="x^",r+=a))}}return r}}class Be extends w{}Be.kind="ArithmeticException";class Ve extends An{constructor(r,a,l){super(),this.primitive=r,this.size=a,this.generatorBase=l;const u=new Int32Array(a);let f=1;for(let y=0;y<a;y++)u[y]=f,f*=2,f>=a&&(f^=r,f&=a-1);this.expTable=u;const m=new Int32Array(a);for(let y=0;y<a-1;y++)m[u[y]]=y;this.logTable=m,this.zero=new jt(this,Int32Array.from([0])),this.one=new jt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,a){if(r<0)throw new R;if(a===0)return this.zero;const l=new Int32Array(r+1);return l[0]=a,new jt(this,l)}inverse(r){if(r===0)throw new Be;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,a){return r===0||a===0?0:this.expTable[(this.logTable[r]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+he.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}Ve.AZTEC_DATA_12=new Ve(4201,4096,1),Ve.AZTEC_DATA_10=new Ve(1033,1024,1),Ve.AZTEC_DATA_6=new Ve(67,64,1),Ve.AZTEC_PARAM=new Ve(19,16,1),Ve.QR_CODE_FIELD_256=new Ve(285,256,0),Ve.DATA_MATRIX_FIELD_256=new Ve(301,256,1),Ve.AZTEC_DATA_8=Ve.DATA_MATRIX_FIELD_256,Ve.MAXICODE_FIELD_64=Ve.AZTEC_DATA_6;class at extends w{}at.kind="ReedSolomonException";class De extends w{}De.kind="IllegalStateException";class $e{constructor(r){this.field=r}decode(r,a){const l=this.field,u=new jt(l,r),f=new Int32Array(a);let m=!0;for(let q=0;q<a;q++){const Z=u.evaluateAt(l.exp(q+l.getGeneratorBase()));f[f.length-1-q]=Z,Z!==0&&(m=!1)}if(m)return;const y=new jt(l,f),_=this.runEuclideanAlgorithm(l.buildMonomial(a,1),y,a),v=_[0],I=_[1],k=this.findErrorLocations(v),L=this.findErrorMagnitudes(I,k);for(let q=0;q<k.length;q++){const Z=r.length-1-l.log(k[q]);if(Z<0)throw new at("Bad error location");r[Z]=Ve.addOrSubtract(r[Z],L[q])}}runEuclideanAlgorithm(r,a,l){if(r.getDegree()<a.getDegree()){const q=r;r=a,a=q}const u=this.field;let f=r,m=a,y=u.getZero(),_=u.getOne();for(;m.getDegree()>=(l/2|0);){let q=f,Z=y;if(f=m,y=_,f.isZero())throw new at("r_{i-1} was zero");m=q;let J=u.getZero();const ce=f.getCoefficient(f.getDegree()),Ee=u.inverse(ce);for(;m.getDegree()>=f.getDegree()&&!m.isZero();){const Xe=m.getDegree()-f.getDegree(),ze=u.multiply(m.getCoefficient(m.getDegree()),Ee);J=J.addOrSubtract(u.buildMonomial(Xe,ze)),m=m.addOrSubtract(f.multiplyByMonomial(Xe,ze))}if(_=J.multiply(y).addOrSubtract(Z),m.getDegree()>=f.getDegree())throw new De("Division algorithm failed to reduce polynomial?")}const v=_.getCoefficient(0);if(v===0)throw new at("sigmaTilde(0) was zero");const I=u.inverse(v),k=_.multiplyScalar(I),L=m.multiplyScalar(I);return[k,L]}findErrorLocations(r){const a=r.getDegree();if(a===1)return Int32Array.from([r.getCoefficient(1)]);const l=new Int32Array(a);let u=0;const f=this.field;for(let m=1;m<f.getSize()&&u<a;m++)r.evaluateAt(m)===0&&(l[u]=f.inverse(m),u++);if(u!==a)throw new at("Error locator degree does not match number of roots");return l}findErrorMagnitudes(r,a){const l=a.length,u=new Int32Array(l),f=this.field;for(let m=0;m<l;m++){const y=f.inverse(a[m]);let _=1;for(let v=0;v<l;v++)if(m!==v){const I=f.multiply(a[v],y),k=(I&1)===0?I|1:I&-2;_=f.multiply(_,k)}u[m]=f.multiply(r.evaluateAt(y),f.inverse(_)),f.getGeneratorBase()!==0&&(u[m]=f.multiply(u[m],y))}return u}}var nt;(function(M){M[M.UPPER=0]="UPPER",M[M.LOWER=1]="LOWER",M[M.MIXED=2]="MIXED",M[M.DIGIT=3]="DIGIT",M[M.PUNCT=4]="PUNCT",M[M.BINARY=5]="BINARY"})(nt||(nt={}));class ot{decode(r){this.ddata=r;let a=r.getBits(),l=this.extractBits(a),u=this.correctBits(l),f=ot.convertBoolArrayToByteArray(u),m=ot.getEncodedData(u),y=new It(f,m,null,null);return y.setNumBits(u.length),y}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let a=r.length,l=nt.UPPER,u=nt.UPPER,f="",m=0;for(;m<a;)if(u===nt.BINARY){if(a-m<5)break;let y=ot.readCode(r,m,5);if(m+=5,y===0){if(a-m<11)break;y=ot.readCode(r,m,11)+31,m+=11}for(let _=0;_<y;_++){if(a-m<8){m=a;break}const v=ot.readCode(r,m,8);f+=Y.castAsNonUtf8Char(v),m+=8}u=l}else{let y=u===nt.DIGIT?4:5;if(a-m<y)break;let _=ot.readCode(r,m,y);m+=y;let v=ot.getCharacter(u,_);v.startsWith("CTRL_")?(l=u,u=ot.getTable(v.charAt(5)),v.charAt(6)==="L"&&(l=u)):(f+=v,u=l)}return f}static getTable(r){switch(r){case"L":return nt.LOWER;case"P":return nt.PUNCT;case"M":return nt.MIXED;case"D":return nt.DIGIT;case"B":return nt.BINARY;case"U":default:return nt.UPPER}}static getCharacter(r,a){switch(r){case nt.UPPER:return ot.UPPER_TABLE[a];case nt.LOWER:return ot.LOWER_TABLE[a];case nt.MIXED:return ot.MIXED_TABLE[a];case nt.PUNCT:return ot.PUNCT_TABLE[a];case nt.DIGIT:return ot.DIGIT_TABLE[a];default:throw new De("Bad table")}}correctBits(r){let a,l;this.ddata.getNbLayers()<=2?(l=6,a=Ve.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,a=Ve.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,a=Ve.AZTEC_DATA_10):(l=12,a=Ve.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),f=r.length/l;if(f<u)throw new F;let m=r.length%l,y=new Int32Array(f);for(let L=0;L<f;L++,m+=l)y[L]=ot.readCode(r,m,l);try{new $e(a).decode(y,f-u)}catch(L){throw new F(L)}let _=(1<<l)-1,v=0;for(let L=0;L<u;L++){let q=y[L];if(q===0||q===_)throw new F;(q===1||q===_-1)&&v++}let I=new Array(u*l-v),k=0;for(let L=0;L<u;L++){let q=y[L];if(q===1||q===_-1)I.fill(q>1,k,k+l-1),k+=l-1;else for(let Z=l-1;Z>=0;--Z)I[k++]=(q&1<<Z)!==0}return I}extractBits(r){let a=this.ddata.isCompact(),l=this.ddata.getNbLayers(),u=(a?11:14)+l*4,f=new Int32Array(u),m=new Array(this.totalBitsInLayer(l,a));if(a)for(let y=0;y<f.length;y++)f[y]=y;else{let y=u+1+2*he.truncDivision(he.truncDivision(u,2)-1,15),_=u/2,v=he.truncDivision(y,2);for(let I=0;I<_;I++){let k=I+he.truncDivision(I,15);f[_-I-1]=v-k-1,f[_+I]=v+k+1}}for(let y=0,_=0;y<l;y++){let v=(l-y)*4+(a?9:12),I=y*2,k=u-1-I;for(let L=0;L<v;L++){let q=L*2;for(let Z=0;Z<2;Z++)m[_+q+Z]=r.get(f[I+Z],f[I+L]),m[_+2*v+q+Z]=r.get(f[I+L],f[k-Z]),m[_+4*v+q+Z]=r.get(f[k-Z],f[k-L]),m[_+6*v+q+Z]=r.get(f[k-L],f[I+Z])}_+=v*8}return m}static readCode(r,a,l){let u=0;for(let f=a;f<a+l;f++)u<<=1,r[f]&&(u|=1);return u}static readByte(r,a){let l=r.length-a;return l>=8?ot.readCode(r,a,8):ot.readCode(r,a,l)<<8-l}static convertBoolArrayToByteArray(r){let a=new Uint8Array((r.length+7)/8);for(let l=0;l<a.length;l++)a[l]=ot.readByte(r,8*l);return a}totalBitsInLayer(r,a){return((a?88:112)+16*r)*r}}ot.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ot.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ot.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ot.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ot.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class et{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,a,l,u){const f=r-l,m=a-u;return Math.sqrt(f*f+m*m)}static sum(r){let a=0;for(let l=0,u=r.length;l!==u;l++){const f=r[l];a+=f}return a}}class Vt{static floatToIntBits(r){return r}}Vt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class We{constructor(r,a){this.x=r,this.y=a}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof We){const a=r;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*Vt.floatToIntBits(this.x)+Vt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const a=this.distance(r[0],r[1]),l=this.distance(r[1],r[2]),u=this.distance(r[0],r[2]);let f,m,y;if(l>=a&&l>=u?(m=r[0],f=r[1],y=r[2]):u>=l&&u>=a?(m=r[1],f=r[0],y=r[2]):(m=r[2],f=r[0],y=r[1]),this.crossProductZ(f,m,y)<0){const _=f;f=y,y=_}r[0]=f,r[1]=m,r[2]=y}static distance(r,a){return et.distance(r.x,r.y,a.x,a.y)}static crossProductZ(r,a,l){const u=a.x,f=a.y;return(l.x-u)*(r.y-f)-(l.y-f)*(r.x-u)}}class Qn{constructor(r,a){this.bits=r,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class At extends Qn{constructor(r,a,l,u,f){super(r,a),this.compact=l,this.nbDatablocks=u,this.nbLayers=f}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Rt{constructor(r,a,l,u){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),a==null&&(a=Rt.INIT_SIZE),l==null&&(l=r.getWidth()/2|0),u==null&&(u=r.getHeight()/2|0);const f=a/2|0;if(this.leftInit=l-f,this.rightInit=l+f,this.upInit=u-f,this.downInit=u+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ae}detect(){let r=this.leftInit,a=this.rightInit,l=this.upInit,u=this.downInit,f=!1,m=!0,y=!1,_=!1,v=!1,I=!1,k=!1;const L=this.width,q=this.height;for(;m;){m=!1;let Z=!0;for(;(Z||!_)&&a<L;)Z=this.containsBlackPoint(l,u,a,!1),Z?(a++,m=!0,_=!0):_||a++;if(a>=L){f=!0;break}let J=!0;for(;(J||!v)&&u<q;)J=this.containsBlackPoint(r,a,u,!0),J?(u++,m=!0,v=!0):v||u++;if(u>=q){f=!0;break}let ce=!0;for(;(ce||!I)&&r>=0;)ce=this.containsBlackPoint(l,u,r,!1),ce?(r--,m=!0,I=!0):I||r--;if(r<0){f=!0;break}let Ee=!0;for(;(Ee||!k)&&l>=0;)Ee=this.containsBlackPoint(r,a,l,!0),Ee?(l--,m=!0,k=!0):k||l--;if(l<0){f=!0;break}m&&(y=!0)}if(!f&&y){const Z=a-r;let J=null;for(let ze=1;J===null&&ze<Z;ze++)J=this.getBlackPointOnSegment(r,u-ze,r+ze,u);if(J==null)throw new ae;let ce=null;for(let ze=1;ce===null&&ze<Z;ze++)ce=this.getBlackPointOnSegment(r,l+ze,r+ze,l);if(ce==null)throw new ae;let Ee=null;for(let ze=1;Ee===null&&ze<Z;ze++)Ee=this.getBlackPointOnSegment(a,l+ze,a-ze,l);if(Ee==null)throw new ae;let Xe=null;for(let ze=1;Xe===null&&ze<Z;ze++)Xe=this.getBlackPointOnSegment(a,u-ze,a-ze,u);if(Xe==null)throw new ae;return this.centerEdges(Xe,J,Ee,ce)}else throw new ae}getBlackPointOnSegment(r,a,l,u){const f=et.round(et.distance(r,a,l,u)),m=(l-r)/f,y=(u-a)/f,_=this.image;for(let v=0;v<f;v++){const I=et.round(r+v*m),k=et.round(a+v*y);if(_.get(I,k))return new We(I,k)}return null}centerEdges(r,a,l,u){const f=r.getX(),m=r.getY(),y=a.getX(),_=a.getY(),v=l.getX(),I=l.getY(),k=u.getX(),L=u.getY(),q=Rt.CORR;return f<this.width/2?[new We(k-q,L+q),new We(y+q,_+q),new We(v-q,I-q),new We(f+q,m-q)]:[new We(k+q,L+q),new We(y+q,_-q),new We(v-q,I+q),new We(f-q,m-q)]}containsBlackPoint(r,a,l,u){const f=this.image;if(u){for(let m=r;m<=a;m++)if(f.get(m,l))return!0}else for(let m=r;m<=a;m++)if(f.get(l,m))return!0;return!1}}Rt.INIT_SIZE=10,Rt.CORR=1;class Sr{static checkAndNudgePoints(r,a){const l=r.getWidth(),u=r.getHeight();let f=!0;for(let m=0;m<a.length&&f;m+=2){const y=Math.floor(a[m]),_=Math.floor(a[m+1]);if(y<-1||y>l||_<-1||_>u)throw new ae;f=!1,y===-1?(a[m]=0,f=!0):y===l&&(a[m]=l-1,f=!0),_===-1?(a[m+1]=0,f=!0):_===u&&(a[m+1]=u-1,f=!0)}f=!0;for(let m=a.length-2;m>=0&&f;m-=2){const y=Math.floor(a[m]),_=Math.floor(a[m+1]);if(y<-1||y>l||_<-1||_>u)throw new ae;f=!1,y===-1?(a[m]=0,f=!0):y===l&&(a[m]=l-1,f=!0),_===-1?(a[m+1]=0,f=!0):_===u&&(a[m+1]=u-1,f=!0)}}}class Gt{constructor(r,a,l,u,f,m,y,_,v){this.a11=r,this.a21=a,this.a31=l,this.a12=u,this.a22=f,this.a32=m,this.a13=y,this.a23=_,this.a33=v}static quadrilateralToQuadrilateral(r,a,l,u,f,m,y,_,v,I,k,L,q,Z,J,ce){const Ee=Gt.quadrilateralToSquare(r,a,l,u,f,m,y,_);return Gt.squareToQuadrilateral(v,I,k,L,q,Z,J,ce).times(Ee)}transformPoints(r){const a=r.length,l=this.a11,u=this.a12,f=this.a13,m=this.a21,y=this.a22,_=this.a23,v=this.a31,I=this.a32,k=this.a33;for(let L=0;L<a;L+=2){const q=r[L],Z=r[L+1],J=f*q+_*Z+k;r[L]=(l*q+m*Z+v)/J,r[L+1]=(u*q+y*Z+I)/J}}transformPointsWithValues(r,a){const l=this.a11,u=this.a12,f=this.a13,m=this.a21,y=this.a22,_=this.a23,v=this.a31,I=this.a32,k=this.a33,L=r.length;for(let q=0;q<L;q++){const Z=r[q],J=a[q],ce=f*Z+_*J+k;r[q]=(l*Z+m*J+v)/ce,a[q]=(u*Z+y*J+I)/ce}}static squareToQuadrilateral(r,a,l,u,f,m,y,_){const v=r-l+f-y,I=a-u+m-_;if(v===0&&I===0)return new Gt(l-r,f-l,r,u-a,m-u,a,0,0,1);{const k=l-f,L=y-f,q=u-m,Z=_-m,J=k*Z-L*q,ce=(v*Z-L*I)/J,Ee=(k*I-v*q)/J;return new Gt(l-r+ce*l,y-r+Ee*y,r,u-a+ce*u,_-a+Ee*_,a,ce,Ee,1)}}static quadrilateralToSquare(r,a,l,u,f,m,y,_){return Gt.squareToQuadrilateral(r,a,l,u,f,m,y,_).buildAdjoint()}buildAdjoint(){return new Gt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new Gt(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class Hn extends Sr{sampleGrid(r,a,l,u,f,m,y,_,v,I,k,L,q,Z,J,ce,Ee,Xe,ze){const Fe=Gt.quadrilateralToQuadrilateral(u,f,m,y,_,v,I,k,L,q,Z,J,ce,Ee,Xe,ze);return this.sampleGridWithTransform(r,a,l,Fe)}sampleGridWithTransform(r,a,l,u){if(a<=0||l<=0)throw new ae;const f=new lt(a,l),m=new Float32Array(2*a);for(let y=0;y<l;y++){const _=m.length,v=y+.5;for(let I=0;I<_;I+=2)m[I]=I/2+.5,m[I+1]=v;u.transformPoints(m),Sr.checkAndNudgePoints(r,m);try{for(let I=0;I<_;I+=2)r.get(Math.floor(m[I]),Math.floor(m[I+1]))&&f.set(I/2,y)}catch{throw new ae}}return f}}class Rn{static setGridSampler(r){Rn.gridSampler=r}static getInstance(){return Rn.gridSampler}}Rn.gridSampler=new Hn;class Pn{constructor(r,a){this.x=r,this.y=a}toResultPoint(){return new We(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Lr{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let a=this.getMatrixCenter(),l=this.getBullsEyeCorners(a);if(r){let m=l[0];l[0]=l[2],l[2]=m}this.extractParameters(l);let u=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),f=this.getMatrixCornerPoints(l);return new At(u,f,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new ae;let a=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(r[0],r[1],a),this.sampleLine(r[1],r[2],a),this.sampleLine(r[2],r[3],a),this.sampleLine(r[3],r[0],a)]);this.shift=this.getRotation(l,a);let u=0;for(let m=0;m<4;m++){let y=l[(this.shift+m)%4];this.compact?(u<<=7,u+=y>>1&127):(u<<=10,u+=(y>>2&992)+(y>>1&31))}let f=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(f>>6)+1,this.nbDataBlocks=(f&63)+1):(this.nbLayers=(f>>11)+1,this.nbDataBlocks=(f&2047)+1)}getRotation(r,a){let l=0;r.forEach((u,f,m)=>{let y=(u>>a-2<<1)+(u&1);l=(l<<3)+y}),l=((l&1)<<11)+(l>>1);for(let u=0;u<4;u++)if(he.bitCount(l^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new ae}getCorrectedParameterData(r,a){let l,u;a?(l=7,u=2):(l=10,u=4);let f=l-u,m=new Int32Array(l);for(let _=l-1;_>=0;--_)m[_]=r&15,r>>=4;try{new $e(Ve.AZTEC_PARAM).decode(m,f)}catch{throw new ae}let y=0;for(let _=0;_<u;_++)y=(y<<4)+m[_];return y}getBullsEyeCorners(r){let a=r,l=r,u=r,f=r,m=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let k=this.getFirstDifferent(a,m,1,-1),L=this.getFirstDifferent(l,m,1,1),q=this.getFirstDifferent(u,m,-1,1),Z=this.getFirstDifferent(f,m,-1,-1);if(this.nbCenterLayers>2){let J=this.distancePoint(Z,k)*this.nbCenterLayers/(this.distancePoint(f,a)*(this.nbCenterLayers+2));if(J<.75||J>1.25||!this.isWhiteOrBlackRectangle(k,L,q,Z))break}a=k,l=L,u=q,f=Z,m=!m}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ae;this.compact=this.nbCenterLayers===5;let y=new We(a.getX()+.5,a.getY()-.5),_=new We(l.getX()+.5,l.getY()+.5),v=new We(u.getX()-.5,u.getY()+.5),I=new We(f.getX()-.5,f.getY()-.5);return this.expandSquare([y,_,v,I],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,a,l,u;try{let y=new Rt(this.image).detect();r=y[0],a=y[1],l=y[2],u=y[3]}catch{let _=this.image.getWidth()/2,v=this.image.getHeight()/2;r=this.getFirstDifferent(new Pn(_+7,v-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Pn(_+7,v+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Pn(_-7,v+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Pn(_-7,v-7),!1,-1,-1).toResultPoint()}let f=et.round((r.getX()+u.getX()+a.getX()+l.getX())/4),m=et.round((r.getY()+u.getY()+a.getY()+l.getY())/4);try{let y=new Rt(this.image,15,f,m).detect();r=y[0],a=y[1],l=y[2],u=y[3]}catch{r=this.getFirstDifferent(new Pn(f+7,m-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Pn(f+7,m+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Pn(f-7,m+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Pn(f-7,m-7),!1,-1,-1).toResultPoint()}return f=et.round((r.getX()+u.getX()+a.getX()+l.getX())/4),m=et.round((r.getY()+u.getY()+a.getY()+l.getY())/4),new Pn(f,m)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,a,l,u,f){let m=Rn.getInstance(),y=this.getDimension(),_=y/2-this.nbCenterLayers,v=y/2+this.nbCenterLayers;return m.sampleGrid(r,y,y,_,_,v,_,v,v,_,v,a.getX(),a.getY(),l.getX(),l.getY(),u.getX(),u.getY(),f.getX(),f.getY())}sampleLine(r,a,l){let u=0,f=this.distanceResultPoint(r,a),m=f/l,y=r.getX(),_=r.getY(),v=m*(a.getX()-r.getX())/f,I=m*(a.getY()-r.getY())/f;for(let k=0;k<l;k++)this.image.get(et.round(y+k*v),et.round(_+k*I))&&(u|=1<<l-k-1);return u}isWhiteOrBlackRectangle(r,a,l,u){let f=3;r=new Pn(r.getX()-f,r.getY()+f),a=new Pn(a.getX()-f,a.getY()-f),l=new Pn(l.getX()+f,l.getY()-f),u=new Pn(u.getX()+f,u.getY()+f);let m=this.getColor(u,r);if(m===0)return!1;let y=this.getColor(r,a);return y!==m||(y=this.getColor(a,l),y!==m)?!1:(y=this.getColor(l,u),y===m)}getColor(r,a){let l=this.distancePoint(r,a),u=(a.getX()-r.getX())/l,f=(a.getY()-r.getY())/l,m=0,y=r.getX(),_=r.getY(),v=this.image.get(r.getX(),r.getY()),I=Math.ceil(l);for(let L=0;L<I;L++)y+=u,_+=f,this.image.get(et.round(y),et.round(_))!==v&&m++;let k=m/l;return k>.1&&k<.9?0:k<=.1===v?1:-1}getFirstDifferent(r,a,l,u){let f=r.getX()+l,m=r.getY()+u;for(;this.isValid(f,m)&&this.image.get(f,m)===a;)f+=l,m+=u;for(f-=l,m-=u;this.isValid(f,m)&&this.image.get(f,m)===a;)f+=l;for(f-=l;this.isValid(f,m)&&this.image.get(f,m)===a;)m+=u;return m-=u,new Pn(f,m)}expandSquare(r,a,l){let u=l/(2*a),f=r[0].getX()-r[2].getX(),m=r[0].getY()-r[2].getY(),y=(r[0].getX()+r[2].getX())/2,_=(r[0].getY()+r[2].getY())/2,v=new We(y+u*f,_+u*m),I=new We(y-u*f,_-u*m);f=r[1].getX()-r[3].getX(),m=r[1].getY()-r[3].getY(),y=(r[1].getX()+r[3].getX())/2,_=(r[1].getY()+r[3].getY())/2;let k=new We(y+u*f,_+u*m),L=new We(y-u*f,_-u*m);return[v,k,I,L]}isValid(r,a){return r>=0&&r<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(r){let a=et.round(r.getX()),l=et.round(r.getY());return this.isValid(a,l)}distancePoint(r,a){return et.distance(r.getX(),r.getY(),a.getX(),a.getY())}distanceResultPoint(r,a){return et.distance(r.getX(),r.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(he.truncDivision(this.nbLayers-4,8)+1)+15}}class ti{decode(r,a=null){let l=null,u=new Lr(r.getBlackMatrix()),f=null,m=null;try{let I=u.detectMirror(!1);f=I.getPoints(),this.reportFoundResultPoints(a,f),m=new ot().decode(I)}catch(I){l=I}if(m==null)try{let I=u.detectMirror(!0);f=I.getPoints(),this.reportFoundResultPoints(a,f),m=new ot().decode(I)}catch(I){throw l??I}let y=new Te(m.getText(),m.getRawBytes(),m.getNumBits(),f,_e.AZTEC,ne.currentTimeMillis()),_=m.getByteSegments();_!=null&&y.putMetadata(_t.BYTE_SEGMENTS,_);let v=m.getECLevel();return v!=null&&y.putMetadata(_t.ERROR_CORRECTION_LEVEL,v),y}reportFoundResultPoints(r,a){if(r!=null){let l=r.get(je.NEED_RESULT_POINT_CALLBACK);l!=null&&a.forEach((u,f,m)=>{l.foundPossibleResultPoint(u)})}}reset(){}}class Pr extends ve{constructor(r=500){super(new ti,r)}}class Zt{decode(r,a){try{return this.doDecode(r,a)}catch{if(a&&a.get(je.TRY_HARDER)===!0&&r.isRotateSupported()){const f=r.rotateCounterClockwise(),m=this.doDecode(f,a),y=m.getResultMetadata();let _=270;y!==null&&y.get(_t.ORIENTATION)===!0&&(_=_+y.get(_t.ORIENTATION)%360),m.putMetadata(_t.ORIENTATION,_);const v=m.getResultPoints();if(v!==null){const I=f.getHeight();for(let k=0;k<v.length;k++)v[k]=new We(I-v[k].getY()-1,v[k].getX())}return m}else throw new ae}}reset(){}doDecode(r,a){const l=r.getWidth(),u=r.getHeight();let f=new Ue(l);const m=a&&a.get(je.TRY_HARDER)===!0,y=Math.max(1,u>>(m?8:5));let _;m?_=u:_=15;const v=Math.trunc(u/2);for(let I=0;I<_;I++){const k=Math.trunc((I+1)/2),L=(I&1)===0,q=v+y*(L?k:-k);if(q<0||q>=u)break;try{f=r.getBlackRow(q,f)}catch{continue}for(let Z=0;Z<2;Z++){if(Z===1&&(f.reverse(),a&&a.get(je.NEED_RESULT_POINT_CALLBACK)===!0)){const J=new Map;a.forEach((ce,Ee)=>J.set(Ee,ce)),J.delete(je.NEED_RESULT_POINT_CALLBACK),a=J}try{const J=this.decodeRow(q,f,a);if(Z===1){J.putMetadata(_t.ORIENTATION,180);const ce=J.getResultPoints();ce!==null&&(ce[0]=new We(l-ce[0].getX()-1,ce[0].getY()),ce[1]=new We(l-ce[1].getX()-1,ce[1].getY()))}return J}catch{}}}throw new ae}static recordPattern(r,a,l){const u=l.length;for(let v=0;v<u;v++)l[v]=0;const f=r.getSize();if(a>=f)throw new ae;let m=!r.get(a),y=0,_=a;for(;_<f;){if(r.get(_)!==m)l[y]++;else{if(++y===u)break;l[y]=1,m=!m}_++}if(!(y===u||y===u-1&&_===f))throw new ae}static recordPatternInReverse(r,a,l){let u=l.length,f=r.get(a);for(;a>0&&u>=0;)r.get(--a)!==f&&(u--,f=!f);if(u>=0)throw new ae;Zt.recordPattern(r,a+1,l)}static patternMatchVariance(r,a,l){const u=r.length;let f=0,m=0;for(let v=0;v<u;v++)f+=r[v],m+=a[v];if(f<m)return Number.POSITIVE_INFINITY;const y=f/m;l*=y;let _=0;for(let v=0;v<u;v++){const I=r[v],k=a[v]*y,L=I>k?I-k:k-I;if(L>l)return Number.POSITIVE_INFINITY;_+=L}return _/f}}class Me extends Zt{static findStartPattern(r){const a=r.getSize(),l=r.getNextSet(0);let u=0,f=Int32Array.from([0,0,0,0,0,0]),m=l,y=!1;const _=6;for(let v=l;v<a;v++)if(r.get(v)!==y)f[u]++;else{if(u===_-1){let I=Me.MAX_AVG_VARIANCE,k=-1;for(let L=Me.CODE_START_A;L<=Me.CODE_START_C;L++){const q=Zt.patternMatchVariance(f,Me.CODE_PATTERNS[L],Me.MAX_INDIVIDUAL_VARIANCE);q<I&&(I=q,k=L)}if(k>=0&&r.isRange(Math.max(0,m-(v-m)/2),m,!1))return Int32Array.from([m,v,k]);m+=f[0]+f[1],f=f.slice(2,f.length-1),f[u-1]=0,f[u]=0,u--}else u++;f[u]=1,y=!y}throw new ae}static decodeCode(r,a,l){Zt.recordPattern(r,l,a);let u=Me.MAX_AVG_VARIANCE,f=-1;for(let m=0;m<Me.CODE_PATTERNS.length;m++){const y=Me.CODE_PATTERNS[m],_=this.patternMatchVariance(a,y,Me.MAX_INDIVIDUAL_VARIANCE);_<u&&(u=_,f=m)}if(f>=0)return f;throw new ae}decodeRow(r,a,l){const u=l&&l.get(je.ASSUME_GS1)===!0,f=Me.findStartPattern(a),m=f[2];let y=0;const _=new Uint8Array(20);_[y++]=m;let v;switch(m){case Me.CODE_START_A:v=Me.CODE_CODE_A;break;case Me.CODE_START_B:v=Me.CODE_CODE_B;break;case Me.CODE_START_C:v=Me.CODE_CODE_C;break;default:throw new F}let I=!1,k=!1,L="",q=f[0],Z=f[1];const J=Int32Array.from([0,0,0,0,0,0]);let ce=0,Ee=0,Xe=m,ze=0,Fe=!0,rn=!1,Xt=!1;for(;!I;){const fa=k;switch(k=!1,ce=Ee,Ee=Me.decodeCode(a,J,Z),_[y++]=Ee,Ee!==Me.CODE_STOP&&(Fe=!0),Ee!==Me.CODE_STOP&&(ze++,Xe+=ze*Ee),q=Z,Z+=J.reduce((Ku,vc)=>Ku+vc,0),Ee){case Me.CODE_START_A:case Me.CODE_START_B:case Me.CODE_START_C:throw new F}switch(v){case Me.CODE_CODE_A:if(Ee<64)Xt===rn?L+=String.fromCharCode(32+Ee):L+=String.fromCharCode(32+Ee+128),Xt=!1;else if(Ee<96)Xt===rn?L+=String.fromCharCode(Ee-64):L+=String.fromCharCode(Ee+64),Xt=!1;else switch(Ee!==Me.CODE_STOP&&(Fe=!1),Ee){case Me.CODE_FNC_1:u&&(L.length===0?L+="]C1":L+="");break;case Me.CODE_FNC_2:case Me.CODE_FNC_3:break;case Me.CODE_FNC_4_A:!rn&&Xt?(rn=!0,Xt=!1):rn&&Xt?(rn=!1,Xt=!1):Xt=!0;break;case Me.CODE_SHIFT:k=!0,v=Me.CODE_CODE_B;break;case Me.CODE_CODE_B:v=Me.CODE_CODE_B;break;case Me.CODE_CODE_C:v=Me.CODE_CODE_C;break;case Me.CODE_STOP:I=!0;break}break;case Me.CODE_CODE_B:if(Ee<96)Xt===rn?L+=String.fromCharCode(32+Ee):L+=String.fromCharCode(32+Ee+128),Xt=!1;else switch(Ee!==Me.CODE_STOP&&(Fe=!1),Ee){case Me.CODE_FNC_1:u&&(L.length===0?L+="]C1":L+="");break;case Me.CODE_FNC_2:case Me.CODE_FNC_3:break;case Me.CODE_FNC_4_B:!rn&&Xt?(rn=!0,Xt=!1):rn&&Xt?(rn=!1,Xt=!1):Xt=!0;break;case Me.CODE_SHIFT:k=!0,v=Me.CODE_CODE_A;break;case Me.CODE_CODE_A:v=Me.CODE_CODE_A;break;case Me.CODE_CODE_C:v=Me.CODE_CODE_C;break;case Me.CODE_STOP:I=!0;break}break;case Me.CODE_CODE_C:if(Ee<100)Ee<10&&(L+="0"),L+=Ee;else switch(Ee!==Me.CODE_STOP&&(Fe=!1),Ee){case Me.CODE_FNC_1:u&&(L.length===0?L+="]C1":L+="");break;case Me.CODE_CODE_A:v=Me.CODE_CODE_A;break;case Me.CODE_CODE_B:v=Me.CODE_CODE_B;break;case Me.CODE_STOP:I=!0;break}break}fa&&(v=v===Me.CODE_CODE_A?Me.CODE_CODE_B:Me.CODE_CODE_A)}const _r=Z-q;if(Z=a.getNextUnset(Z),!a.isRange(Z,Math.min(a.getSize(),Z+(Z-q)/2),!1))throw new ae;if(Xe-=ze*ce,Xe%103!==ce)throw new B;const Li=L.length;if(Li===0)throw new ae;Li>0&&Fe&&(v===Me.CODE_CODE_C?L=L.substring(0,Li-2):L=L.substring(0,Li-1));const si=(f[1]+f[0])/2,Un=q+_r/2,Yr=_.length,Si=new Uint8Array(Yr);for(let fa=0;fa<Yr;fa++)Si[fa]=_[fa];const qa=[new We(si,r),new We(Un,r)];return new Te(L,Si,0,qa,_e.CODE_128,new Date().getTime())}}Me.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Me.MAX_AVG_VARIANCE=.25,Me.MAX_INDIVIDUAL_VARIANCE=.7,Me.CODE_SHIFT=98,Me.CODE_CODE_C=99,Me.CODE_CODE_B=100,Me.CODE_CODE_A=101,Me.CODE_FNC_1=102,Me.CODE_FNC_2=97,Me.CODE_FNC_3=96,Me.CODE_FNC_4_A=101,Me.CODE_FNC_4_B=100,Me.CODE_START_A=103,Me.CODE_START_B=104,Me.CODE_START_C=105,Me.CODE_STOP=106;class zt extends Zt{constructor(r=!1,a=!1){super(),this.usingCheckDigit=r,this.extendedMode=a,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,a,l){let u=this.counters;u.fill(0),this.decodeRowResult="";let f=zt.findAsteriskPattern(a,u),m=a.getNextSet(f[1]),y=a.getSize(),_,v;do{zt.recordPattern(a,m,u);let J=zt.toNarrowWidePattern(u);if(J<0)throw new ae;_=zt.patternToChar(J),this.decodeRowResult+=_,v=m;for(let ce of u)m+=ce;m=a.getNextSet(m)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let I=0;for(let J of u)I+=J;let k=m-v-I;if(m!==y&&k*2<I)throw new ae;if(this.usingCheckDigit){let J=this.decodeRowResult.length-1,ce=0;for(let Ee=0;Ee<J;Ee++)ce+=zt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Ee));if(this.decodeRowResult.charAt(J)!==zt.ALPHABET_STRING.charAt(ce%43))throw new B;this.decodeRowResult=this.decodeRowResult.substring(0,J)}if(this.decodeRowResult.length===0)throw new ae;let L;this.extendedMode?L=zt.decodeExtended(this.decodeRowResult):L=this.decodeRowResult;let q=(f[1]+f[0])/2,Z=v+I/2;return new Te(L,null,0,[new We(q,r),new We(Z,r)],_e.CODE_39,new Date().getTime())}static findAsteriskPattern(r,a){let l=r.getSize(),u=r.getNextSet(0),f=0,m=u,y=!1,_=a.length;for(let v=u;v<l;v++)if(r.get(v)!==y)a[f]++;else{if(f===_-1){if(this.toNarrowWidePattern(a)===zt.ASTERISK_ENCODING&&r.isRange(Math.max(0,m-Math.floor((v-m)/2)),m,!1))return[m,v];m+=a[0]+a[1],a.copyWithin(0,2,2+f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,y=!y}throw new ae}static toNarrowWidePattern(r){let a=r.length,l=0,u;do{let f=2147483647;for(let _ of r)_<f&&_>l&&(f=_);l=f,u=0;let m=0,y=0;for(let _=0;_<a;_++){let v=r[_];v>l&&(y|=1<<a-1-_,u++,m+=v)}if(u===3){for(let _=0;_<a&&u>0;_++){let v=r[_];if(v>l&&(u--,v*2>=m))return-1}return y}}while(u>3);return-1}static patternToChar(r){for(let a=0;a<zt.CHARACTER_ENCODINGS.length;a++)if(zt.CHARACTER_ENCODINGS[a]===r)return zt.ALPHABET_STRING.charAt(a);if(r===zt.ASTERISK_ENCODING)return"*";throw new ae}static decodeExtended(r){let a=r.length,l="";for(let u=0;u<a;u++){let f=r.charAt(u);if(f==="+"||f==="$"||f==="%"||f==="/"){let m=r.charAt(u+1),y="\0";switch(f){case"+":if(m>="A"&&m<="Z")y=String.fromCharCode(m.charCodeAt(0)+32);else throw new F;break;case"$":if(m>="A"&&m<="Z")y=String.fromCharCode(m.charCodeAt(0)-64);else throw new F;break;case"%":if(m>="A"&&m<="E")y=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")y=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")y=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")y=String.fromCharCode(m.charCodeAt(0)+43);else if(m==="U")y="\0";else if(m==="V")y="@";else if(m==="W")y="`";else if(m==="X"||m==="Y"||m==="Z")y="";else throw new F;break;case"/":if(m>="A"&&m<="O")y=String.fromCharCode(m.charCodeAt(0)-32);else if(m==="Z")y=":";else throw new F;break}l+=y,u++}else l+=f}return l}}zt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",zt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],zt.ASTERISK_ENCODING=148;class xt extends Zt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,a,l){let u=this.decodeStart(a),f=this.decodeEnd(a),m=new G;xt.decodeMiddle(a,u[1],f[0],m);let y=m.toString(),_=null;l!=null&&(_=l.get(je.ALLOWED_LENGTHS)),_==null&&(_=xt.DEFAULT_ALLOWED_LENGTHS);let v=y.length,I=!1,k=0;for(let Z of _){if(v===Z){I=!0;break}Z>k&&(k=Z)}if(!I&&v>k&&(I=!0),!I)throw new F;const L=[new We(u[1],r),new We(f[0],r)];return new Te(y,null,0,L,_e.ITF,new Date().getTime())}static decodeMiddle(r,a,l,u){let f=new Int32Array(10),m=new Int32Array(5),y=new Int32Array(5);for(f.fill(0),m.fill(0),y.fill(0);a<l;){Zt.recordPattern(r,a,f);for(let v=0;v<5;v++){let I=2*v;m[v]=f[I],y[v]=f[I+1]}let _=xt.decodeDigit(m);u.append(_.toString()),_=this.decodeDigit(y),u.append(_.toString()),f.forEach(function(v){a+=v})}}decodeStart(r){let a=xt.skipWhiteSpace(r),l=xt.findGuardPattern(r,a,xt.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(r,l[0]),l}validateQuietZone(r,a){let l=this.narrowLineWidth*10;l=l<a?l:a;for(let u=a-1;l>0&&u>=0&&!r.get(u);u--)l--;if(l!==0)throw new ae}static skipWhiteSpace(r){const a=r.getSize(),l=r.getNextSet(0);if(l===a)throw new ae;return l}decodeEnd(r){r.reverse();try{let a=xt.skipWhiteSpace(r),l;try{l=xt.findGuardPattern(r,a,xt.END_PATTERN_REVERSED[0])}catch(f){f instanceof ae&&(l=xt.findGuardPattern(r,a,xt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,l[0]);let u=l[0];return l[0]=r.getSize()-l[1],l[1]=r.getSize()-u,l}finally{r.reverse()}}static findGuardPattern(r,a,l){let u=l.length,f=new Int32Array(u),m=r.getSize(),y=!1,_=0,v=a;f.fill(0);for(let I=a;I<m;I++)if(r.get(I)!==y)f[_]++;else{if(_===u-1){if(Zt.patternMatchVariance(f,l,xt.MAX_INDIVIDUAL_VARIANCE)<xt.MAX_AVG_VARIANCE)return[v,I];v+=f[0]+f[1],ne.arraycopy(f,2,f,0,_-1),f[_-1]=0,f[_]=0,_--}else _++;f[_]=1,y=!y}throw new ae}static decodeDigit(r){let a=xt.MAX_AVG_VARIANCE,l=-1,u=xt.PATTERNS.length;for(let f=0;f<u;f++){let m=xt.PATTERNS[f],y=Zt.patternMatchVariance(r,m,xt.MAX_INDIVIDUAL_VARIANCE);y<a?(a=y,l=f):y===a&&(l=-1)}if(l>=0)return l%10;throw new ae}}xt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],xt.MAX_AVG_VARIANCE=.38,xt.MAX_INDIVIDUAL_VARIANCE=.5,xt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],xt.START_PATTERN=Int32Array.from([1,1,1,1]),xt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class bn extends Zt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let a=!1,l,u=0,f=Int32Array.from([0,0,0]);for(;!a;){f=Int32Array.from([0,0,0]),l=bn.findGuardPattern(r,u,!1,this.START_END_PATTERN,f);let m=l[0];u=l[1];let y=m-(u-m);y>=0&&(a=r.isRange(y,m,!1))}return l}static checkChecksum(r){return bn.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let a=r.length;if(a===0)return!1;let l=parseInt(r.charAt(a-1),10);return bn.getStandardUPCEANChecksum(r.substring(0,a-1))===l}static getStandardUPCEANChecksum(r){let a=r.length,l=0;for(let u=a-1;u>=0;u-=2){let f=r.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new F;l+=f}l*=3;for(let u=a-2;u>=0;u-=2){let f=r.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new F;l+=f}return(1e3-l)%10}static decodeEnd(r,a){return bn.findGuardPattern(r,a,!1,bn.START_END_PATTERN,new Int32Array(bn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,a,l,u){return this.findGuardPattern(r,a,l,u,new Int32Array(u.length))}static findGuardPattern(r,a,l,u,f){let m=r.getSize();a=l?r.getNextUnset(a):r.getNextSet(a);let y=0,_=a,v=u.length,I=l;for(let k=a;k<m;k++)if(r.get(k)!==I)f[y]++;else{if(y===v-1){if(Zt.patternMatchVariance(f,u,bn.MAX_INDIVIDUAL_VARIANCE)<bn.MAX_AVG_VARIANCE)return Int32Array.from([_,k]);_+=f[0]+f[1];let L=f.slice(2,f.length-1);for(let q=0;q<y-1;q++)f[q]=L[q];f[y-1]=0,f[y]=0,y--}else y++;f[y]=1,I=!I}throw new ae}static decodeDigit(r,a,l,u){this.recordPattern(r,l,a);let f=this.MAX_AVG_VARIANCE,m=-1,y=u.length;for(let _=0;_<y;_++){let v=u[_],I=Zt.patternMatchVariance(a,v,bn.MAX_INDIVIDUAL_VARIANCE);I<f&&(f=I,m=_)}if(m>=0)return m;throw new ae}}bn.MAX_AVG_VARIANCE=.48,bn.MAX_INDIVIDUAL_VARIANCE=.7,bn.START_END_PATTERN=Int32Array.from([1,1,1]),bn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),bn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),bn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ir{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,a,l){let u=this.decodeRowStringBuffer,f=this.decodeMiddle(a,l,u),m=u.toString(),y=Ir.parseExtensionString(m),_=[new We((l[0]+l[1])/2,r),new We(f,r)],v=new Te(m,null,0,_,_e.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&v.putAllMetadata(y),v}decodeMiddle(r,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=r.getSize(),m=a[1],y=0;for(let v=0;v<5&&m<f;v++){let I=bn.decodeDigit(r,u,m,bn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+I%10);for(let k of u)m+=k;I>=10&&(y|=1<<4-v),v!==4&&(m=r.getNextSet(m),m=r.getNextUnset(m))}if(l.length!==5)throw new ae;let _=this.determineCheckDigit(y);if(Ir.extensionChecksum(l.toString())!==_)throw new ae;return m}static extensionChecksum(r){let a=r.length,l=0;for(let u=a-2;u>=0;u-=2)l+=r.charAt(u).charCodeAt(0)-48;l*=3;for(let u=a-1;u>=0;u-=2)l+=r.charAt(u).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(r){for(let a=0;a<10;a++)if(r===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new ae}static parseExtensionString(r){if(r.length!==5)return null;let a=Ir.parseExtension5String(r);return a==null?null:new Map([[_t.SUGGESTED_PRICE,a]])}static parseExtension5String(r){let a;switch(r.charAt(0)){case"0":a="";break;case"5":a="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let l=parseInt(r.substring(1)),u=(l/100).toString(),f=l%100,m=f<10?"0"+f:f.toString();return a+u+"."+m}}class Rr{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,a,l){let u=this.decodeRowStringBuffer,f=this.decodeMiddle(a,l,u),m=u.toString(),y=Rr.parseExtensionString(m),_=[new We((l[0]+l[1])/2,r),new We(f,r)],v=new Te(m,null,0,_,_e.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&v.putAllMetadata(y),v}decodeMiddle(r,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=r.getSize(),m=a[1],y=0;for(let _=0;_<2&&m<f;_++){let v=bn.decodeDigit(r,u,m,bn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+v%10);for(let I of u)m+=I;v>=10&&(y|=1<<1-_),_!==1&&(m=r.getNextSet(m),m=r.getNextUnset(m))}if(l.length!==2)throw new ae;if(parseInt(l.toString())%4!==y)throw new ae;return m}static parseExtensionString(r){return r.length!==2?null:new Map([[_t.ISSUE_NUMBER,parseInt(r)]])}}class de{static decodeRow(r,a,l){let u=bn.findGuardPattern(a,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Ir().decodeRow(r,a,u)}catch{return new Rr().decodeRow(r,a,u)}}}de.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class be extends bn{constructor(){super(),this.decodeRowStringBuffer="",be.L_AND_G_PATTERNS=be.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let a=be.L_PATTERNS[r-10],l=new Int32Array(a.length);for(let u=0;u<a.length;u++)l[u]=a[a.length-u-1];be.L_AND_G_PATTERNS[r]=l}}decodeRow(r,a,l){let u=be.findStartGuardPattern(a),f=l==null?null:l.get(je.NEED_RESULT_POINT_CALLBACK);if(f!=null){const Fe=new We((u[0]+u[1])/2,r);f.foundPossibleResultPoint(Fe)}let m=this.decodeMiddle(a,u,this.decodeRowStringBuffer),y=m.rowOffset,_=m.resultString;if(f!=null){const Fe=new We(y,r);f.foundPossibleResultPoint(Fe)}let v=this.decodeEnd(a,y);if(f!=null){const Fe=new We((v[0]+v[1])/2,r);f.foundPossibleResultPoint(Fe)}let I=v[1],k=I+(I-v[0]);if(k>=a.getSize()||!a.isRange(I,k,!1))throw new ae;let L=_.toString();if(L.length<8)throw new F;if(!be.checkChecksum(L))throw new B;let q=(u[1]+u[0])/2,Z=(v[1]+v[0])/2,J=this.getBarcodeFormat(),ce=[new We(q,r),new We(Z,r)],Ee=new Te(L,null,0,ce,J,new Date().getTime()),Xe=0;try{let Fe=de.decodeRow(r,a,v[1]);Ee.putMetadata(_t.UPC_EAN_EXTENSION,Fe.getText()),Ee.putAllMetadata(Fe.getResultMetadata()),Ee.addResultPoints(Fe.getResultPoints()),Xe=Fe.getText().length}catch{}let ze=l==null?null:l.get(je.ALLOWED_EAN_EXTENSIONS);if(ze!=null){let Fe=!1;for(let rn in ze)if(Xe.toString()===rn){Fe=!0;break}if(!Fe)throw new ae}return Ee}decodeEnd(r,a){return be.findGuardPattern(r,a,!1,be.START_END_PATTERN,new Int32Array(be.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return be.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let a=r.length;if(a===0)return!1;let l=parseInt(r.charAt(a-1),10);return be.getStandardUPCEANChecksum(r.substring(0,a-1))===l}static getStandardUPCEANChecksum(r){let a=r.length,l=0;for(let u=a-1;u>=0;u-=2){let f=r.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new F;l+=f}l*=3;for(let u=a-2;u>=0;u-=2){let f=r.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new F;l+=f}return(1e3-l)%10}}class Oe extends be{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=r.getSize(),m=a[1],y=0;for(let v=0;v<6&&m<f;v++){let I=be.decodeDigit(r,u,m,be.L_AND_G_PATTERNS);l+=String.fromCharCode(48+I%10);for(let k of u)m+=k;I>=10&&(y|=1<<5-v)}l=Oe.determineFirstDigit(l,y),m=be.findGuardPattern(r,m,!0,be.MIDDLE_PATTERN,new Int32Array(be.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<6&&m<f;v++){let I=be.decodeDigit(r,u,m,be.L_PATTERNS);l+=String.fromCharCode(48+I);for(let k of u)m+=k}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return _e.EAN_13}static determineFirstDigit(r,a){for(let l=0;l<10;l++)if(a===this.FIRST_DIGIT_ENCODINGS[l])return r=String.fromCharCode(48+l)+r,r;throw new ae}}Oe.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class rt extends be{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,a,l){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=r.getSize(),m=a[1];for(let _=0;_<4&&m<f;_++){let v=be.decodeDigit(r,u,m,be.L_PATTERNS);l+=String.fromCharCode(48+v);for(let I of u)m+=I}m=be.findGuardPattern(r,m,!0,be.MIDDLE_PATTERN,new Int32Array(be.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<4&&m<f;_++){let v=be.decodeDigit(r,u,m,be.L_PATTERNS);l+=String.fromCharCode(48+v);for(let I of u)m+=I}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return _e.EAN_8}}class ft extends be{constructor(){super(...arguments),this.ean13Reader=new Oe}getBarcodeFormat(){return _e.UPC_A}decode(r,a){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,a,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,a,l))}decodeMiddle(r,a,l){return this.ean13Reader.decodeMiddle(r,a,l)}maybeReturnResult(r){let a=r.getText();if(a.charAt(0)==="0"){let l=new Te(a.substring(1),null,null,r.getResultPoints(),_e.UPC_A);return r.getResultMetadata()!=null&&l.putAllMetadata(r.getResultMetadata()),l}else throw new ae}reset(){this.ean13Reader.reset()}}class Ke extends be{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,a,l){const u=this.decodeMiddleCounters.map(v=>v);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const f=r.getSize();let m=a[1],y=0;for(let v=0;v<6&&m<f;v++){const I=Ke.decodeDigit(r,u,m,Ke.L_AND_G_PATTERNS);l+=String.fromCharCode(48+I%10);for(let k of u)m+=k;I>=10&&(y|=1<<5-v)}let _=Ke.determineNumSysAndCheckDigit(l,y);return{rowOffset:m,resultString:_}}decodeEnd(r,a){return Ke.findGuardPatternWithoutCounters(r,a,!0,Ke.MIDDLE_END_PATTERN)}checkChecksum(r){return be.checkChecksum(Ke.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,a){for(let l=0;l<=1;l++)for(let u=0;u<10;u++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][u]){let f=String.fromCharCode(48+l),m=String.fromCharCode(48+u);return f+r+m}throw ae.getNotFoundInstance()}getBarcodeFormat(){return _e.UPC_E}static convertUPCEtoUPCA(r){const a=r.slice(1,7).split("").map(f=>f.charCodeAt(0)),l=new G;l.append(r.charAt(0));let u=a[5];switch(u){case 0:case 1:case 2:l.appendChars(a,0,2),l.append(u),l.append("0000"),l.appendChars(a,2,3);break;case 3:l.appendChars(a,0,3),l.append("00000"),l.appendChars(a,3,2);break;case 4:l.appendChars(a,0,4),l.append("00000"),l.append(a[4]);break;default:l.appendChars(a,0,5),l.append("0000"),l.append(u);break}return r.length>=8&&l.append(r.charAt(7)),l.toString()}}Ke.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ke.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class He extends Zt{constructor(r){super();let a=r==null?null:r.get(je.POSSIBLE_FORMATS),l=[];o(a)?(l.push(new Oe),l.push(new ft),l.push(new rt),l.push(new Ke)):(a.indexOf(_e.EAN_13)>-1&&l.push(new Oe),a.indexOf(_e.UPC_A)>-1&&l.push(new ft),a.indexOf(_e.EAN_8)>-1&&l.push(new rt),a.indexOf(_e.UPC_E)>-1&&l.push(new Ke)),this.readers=l}decodeRow(r,a,l){for(let u of this.readers)try{const f=u.decodeRow(r,a,l),m=f.getBarcodeFormat()===_e.EAN_13&&f.getText().charAt(0)==="0",y=l==null?null:l.get(je.POSSIBLE_FORMATS),_=y==null||y.includes(_e.UPC_A);if(m&&_){const v=f.getRawBytes(),I=new Te(f.getText().substring(1),v,v?v.length:null,f.getResultPoints(),_e.UPC_A);return I.putAllMetadata(f.getResultMetadata()),I}return f}catch{}throw new ae}reset(){for(let r of this.readers)r.reset()}}class st extends Zt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,a){for(let l=0;l<a.length;l++)if(Zt.patternMatchVariance(r,a[l],st.MAX_INDIVIDUAL_VARIANCE)<st.MAX_AVG_VARIANCE)return l;throw new ae}static count(r){return et.sum(new Int32Array(r))}static increment(r,a){let l=0,u=a[0];for(let f=1;f<r.length;f++)a[f]>u&&(u=a[f],l=f);r[l]++}static decrement(r,a){let l=0,u=a[0];for(let f=1;f<r.length;f++)a[f]<u&&(u=a[f],l=f);r[l]--}static isFinderPattern(r){let a=r[0]+r[1],l=a+r[2]+r[3],u=a/l;if(u>=st.MIN_FINDER_PATTERN_RATIO&&u<=st.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;for(let y of r)y>m&&(m=y),y<f&&(f=y);return m<10*f}return!1}}st.MAX_AVG_VARIANCE=.2,st.MAX_INDIVIDUAL_VARIANCE=.45,st.MIN_FINDER_PATTERN_RATIO=9.5/12,st.MAX_FINDER_PATTERN_RATIO=12.5/14;class ht{constructor(r,a){this.value=r,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof ht))return!1;const a=r;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class St{constructor(r,a,l,u,f){this.value=r,this.startEnd=a,this.value=r,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new We(l,f)),this.resultPoints.push(new We(u,f))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof St))return!1;const a=r;return this.value===a.value}hashCode(){return this.value}}class bt{constructor(){}static getRSSvalue(r,a,l){let u=0;for(let _ of r)u+=_;let f=0,m=0,y=r.length;for(let _=0;_<y-1;_++){let v;for(v=1,m|=1<<_;v<r[_];v++,m&=~(1<<_)){let I=bt.combins(u-v-1,y-_-2);if(l&&m===0&&u-v-(y-_-1)>=y-_-1&&(I-=bt.combins(u-v-(y-_),y-_-2)),y-_-1>1){let k=0;for(let L=u-v-(y-_-2);L>a;L--)k+=bt.combins(u-v-L-1,y-_-3);I-=k*(y-1-_)}else u-v>a&&I--;f+=I}u-=v}return f}static combins(r,a){let l,u;r-a>a?(u=a,l=r-a):(u=r-a,l=a);let f=1,m=1;for(let y=r;y>l;y--)f*=y,m<=u&&(f/=m,m++);for(;m<=u;)f/=m,m++;return f}}class dn{static buildBitArray(r){let a=r.length*2-1;r[r.length-1].getRightChar()==null&&(a-=1);let l=12*a,u=new Ue(l),f=0,y=r[0].getRightChar().getValue();for(let _=11;_>=0;--_)(y&1<<_)!=0&&u.set(f),f++;for(let _=1;_<r.length;++_){let v=r[_],I=v.getLeftChar().getValue();for(let k=11;k>=0;--k)(I&1<<k)!=0&&u.set(f),f++;if(v.getRightChar()!=null){let k=v.getRightChar().getValue();for(let L=11;L>=0;--L)(k&1<<L)!=0&&u.set(f),f++}}return u}}class sn{constructor(r,a){a?this.decodedInformation=null:(this.finished=r,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Gn{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class ur extends Gn{constructor(r,a){super(r),this.value=a}getValue(){return this.value}isFNC1(){return this.value===ur.FNC1}}ur.FNC1="$";class qr extends Gn{constructor(r,a,l){super(r),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Xr extends Gn{constructor(r,a,l){if(super(r),a<0||a>10||l<0||l>10)throw new F;this.firstDigit=a,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Xr.FNC1}isSecondDigitFNC1(){return this.secondDigit===Xr.FNC1}isAnyFNC1(){return this.firstDigit===Xr.FNC1||this.secondDigit===Xr.FNC1}}Xr.FNC1=10;class it{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new ae;let a=r.substring(0,2);for(let f of it.TWO_DIGIT_DATA_LENGTH)if(f[0]===a)return f[1]===it.VARIABLE_LENGTH?it.processVariableAI(2,f[2],r):it.processFixedAI(2,f[1],r);if(r.length<3)throw new ae;let l=r.substring(0,3);for(let f of it.THREE_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===it.VARIABLE_LENGTH?it.processVariableAI(3,f[2],r):it.processFixedAI(3,f[1],r);for(let f of it.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===it.VARIABLE_LENGTH?it.processVariableAI(4,f[2],r):it.processFixedAI(4,f[1],r);if(r.length<4)throw new ae;let u=r.substring(0,4);for(let f of it.FOUR_DIGIT_DATA_LENGTH)if(f[0]===u)return f[1]===it.VARIABLE_LENGTH?it.processVariableAI(4,f[2],r):it.processFixedAI(4,f[1],r);throw new ae}static processFixedAI(r,a,l){if(l.length<r)throw new ae;let u=l.substring(0,r);if(l.length<r+a)throw new ae;let f=l.substring(r,r+a),m=l.substring(r+a),y="("+u+")"+f,_=it.parseFieldsInGeneralPurpose(m);return _==null?y:y+_}static processVariableAI(r,a,l){let u=l.substring(0,r),f;l.length<r+a?f=l.length:f=r+a;let m=l.substring(r,f),y=l.substring(f),_="("+u+")"+m,v=it.parseFieldsInGeneralPurpose(y);return v==null?_:_+v}}it.VARIABLE_LENGTH=[],it.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",it.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",it.VARIABLE_LENGTH,20],["22",it.VARIABLE_LENGTH,29],["30",it.VARIABLE_LENGTH,8],["37",it.VARIABLE_LENGTH,8],["90",it.VARIABLE_LENGTH,30],["91",it.VARIABLE_LENGTH,30],["92",it.VARIABLE_LENGTH,30],["93",it.VARIABLE_LENGTH,30],["94",it.VARIABLE_LENGTH,30],["95",it.VARIABLE_LENGTH,30],["96",it.VARIABLE_LENGTH,30],["97",it.VARIABLE_LENGTH,3],["98",it.VARIABLE_LENGTH,30],["99",it.VARIABLE_LENGTH,30]],it.THREE_DIGIT_DATA_LENGTH=[["240",it.VARIABLE_LENGTH,30],["241",it.VARIABLE_LENGTH,30],["242",it.VARIABLE_LENGTH,6],["250",it.VARIABLE_LENGTH,30],["251",it.VARIABLE_LENGTH,30],["253",it.VARIABLE_LENGTH,17],["254",it.VARIABLE_LENGTH,20],["400",it.VARIABLE_LENGTH,30],["401",it.VARIABLE_LENGTH,30],["402",17],["403",it.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",it.VARIABLE_LENGTH,20],["421",it.VARIABLE_LENGTH,15],["422",3],["423",it.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],it.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",it.VARIABLE_LENGTH,15],["391",it.VARIABLE_LENGTH,18],["392",it.VARIABLE_LENGTH,15],["393",it.VARIABLE_LENGTH,18],["703",it.VARIABLE_LENGTH,30]],it.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",it.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",it.VARIABLE_LENGTH,20],["8003",it.VARIABLE_LENGTH,30],["8004",it.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",it.VARIABLE_LENGTH,30],["8008",it.VARIABLE_LENGTH,12],["8018",18],["8020",it.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",it.VARIABLE_LENGTH,70],["8200",it.VARIABLE_LENGTH,70]];class Br{constructor(r){this.buffer=new G,this.information=r}decodeAllCodes(r,a){let l=a,u=null;do{let f=this.decodeGeneralPurposeField(l,u),m=it.parseFieldsInGeneralPurpose(f.getNewString());if(m!=null&&r.append(m),f.isRemaining()?u=""+f.getRemainingValue():u=null,l===f.getNewPosition())break;l=f.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let a=r;a<r+3;++a)if(this.information.get(a))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let f=this.extractNumericValueFromBitArray(r,4);return f===0?new Xr(this.information.getSize(),Xr.FNC1,Xr.FNC1):new Xr(this.information.getSize(),f-1,Xr.FNC1)}let a=this.extractNumericValueFromBitArray(r,7),l=(a-8)/11,u=(a-8)%11;return new Xr(r+7,l,u)}extractNumericValueFromBitArray(r,a){return Br.extractNumericValueFromBitArray(this.information,r,a)}static extractNumericValueFromBitArray(r,a,l){let u=0;for(let f=0;f<l;++f)r.get(a+f)&&(u|=1<<l-f-1);return u}decodeGeneralPurposeField(r,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(r);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new qr(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new qr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,a;do{let l=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),r=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),r=a.isFinished()):(a=this.parseNumericBlock(),r=a.isFinished()),!(l!==this.current.getPosition())&&!r)break}while(!r);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let a;return r.isSecondDigitFNC1()?a=new qr(this.current.getPosition(),this.buffer.toString()):a=new qr(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new sn(!0,a)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let a=new qr(this.current.getPosition(),this.buffer.toString());return new sn(!0,a)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new sn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let a=new qr(this.current.getPosition(),this.buffer.toString());return new sn(!0,a)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new sn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let a=new qr(this.current.getPosition(),this.buffer.toString());return new sn(!0,a)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new sn(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,5);if(a>=5&&a<16)return!0;if(r+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<116)return!0;if(r+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(r,8);return u>=232&&u<253}decodeIsoIec646(r){let a=this.extractNumericValueFromBitArray(r,5);if(a===15)return new ur(r+5,ur.FNC1);if(a>=5&&a<15)return new ur(r+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<90)return new ur(r+7,""+(l+1));if(l>=90&&l<116)return new ur(r+7,""+(l+7));let u=this.extractNumericValueFromBitArray(r,8),f;switch(u){case 232:f="!";break;case 233:f='"';break;case 234:f="%";break;case 235:f="&";break;case 236:f="'";break;case 237:f="(";break;case 238:f=")";break;case 239:f="*";break;case 240:f="+";break;case 241:f=",";break;case 242:f="-";break;case 243:f=".";break;case 244:f="/";break;case 245:f=":";break;case 246:f=";";break;case 247:f="<";break;case 248:f="=";break;case 249:f=">";break;case 250:f="?";break;case 251:f="_";break;case 252:f=" ";break;default:throw new F}return new ur(r+8,f)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,5);if(a>=5&&a<16)return!0;if(r+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,6);return l>=16&&l<63}decodeAlphanumeric(r){let a=this.extractNumericValueFromBitArray(r,5);if(a===15)return new ur(r+5,ur.FNC1);if(a>=5&&a<15)return new ur(r+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(r,6);if(l>=32&&l<58)return new ur(r+6,""+(l+33));let u;switch(l){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new De("Decoding invalid alphanumeric value: "+l)}return new ur(r+6,u)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let a=0;a<5&&a+r<this.information.getSize();++a)if(a===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+a))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let a=r;a<r+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let a=0;a<4&&a+r<this.information.getSize();++a)if(this.information.get(r+a))return!1;return!0}}class tr{constructor(r){this.information=r,this.generalDecoder=new Br(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class vn extends tr{constructor(r){super(r)}encodeCompressedGtin(r,a){r.append("(01)");let l=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,a,l)}encodeCompressedGtinWithoutAI(r,a,l){for(let u=0;u<4;++u){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(a+10*u,10);f/100===0&&r.append("0"),f/10===0&&r.append("0"),r.append(f)}vn.appendCheckDigit(r,l)}static appendCheckDigit(r,a){let l=0;for(let u=0;u<13;u++){let f=r.charAt(u+a).charCodeAt(0)-48;l+=(u&1)===0?3*f:f}l=10-l%10,l===10&&(l=0),r.append(l)}}vn.GTIN_SIZE=40;class ee extends vn{constructor(r){super(r)}parseInformation(){let r=new G;r.append("(01)");let a=r.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(ee.HEADER_SIZE,4);return r.append(l),this.encodeCompressedGtinWithoutAI(r,ee.HEADER_SIZE+4,a),this.getGeneralDecoder().decodeAllCodes(r,ee.HEADER_SIZE+44)}}ee.HEADER_SIZE=4;class Ze extends tr{constructor(r){super(r)}parseInformation(){let r=new G;return this.getGeneralDecoder().decodeAllCodes(r,Ze.HEADER_SIZE)}}Ze.HEADER_SIZE=5;class dt extends vn{constructor(r){super(r)}encodeCompressedWeight(r,a,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(a,l);this.addWeightCode(r,u);let f=this.checkWeight(u),m=1e5;for(let y=0;y<5;++y)f/m===0&&r.append("0"),m/=10;r.append(f)}}class gt extends dt{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=gt.HEADER_SIZE+dt.GTIN_SIZE+gt.WEIGHT_SIZE)throw new ae;let r=new G;return this.encodeCompressedGtin(r,gt.HEADER_SIZE),this.encodeCompressedWeight(r,gt.HEADER_SIZE+dt.GTIN_SIZE,gt.WEIGHT_SIZE),r.toString()}}gt.HEADER_SIZE=5,gt.WEIGHT_SIZE=15;class kt extends gt{constructor(r){super(r)}addWeightCode(r,a){r.append("(3103)")}checkWeight(r){return r}}class $t extends gt{constructor(r){super(r)}addWeightCode(r,a){a<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class kn extends vn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<kn.HEADER_SIZE+vn.GTIN_SIZE)throw new ae;let r=new G;this.encodeCompressedGtin(r,kn.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(kn.HEADER_SIZE+vn.GTIN_SIZE,kn.LAST_DIGIT_SIZE);r.append("(392"),r.append(a),r.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(kn.HEADER_SIZE+vn.GTIN_SIZE+kn.LAST_DIGIT_SIZE,null);return r.append(l.getNewString()),r.toString()}}kn.HEADER_SIZE=8,kn.LAST_DIGIT_SIZE=2;class gn extends vn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<gn.HEADER_SIZE+vn.GTIN_SIZE)throw new ae;let r=new G;this.encodeCompressedGtin(r,gn.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(gn.HEADER_SIZE+vn.GTIN_SIZE,gn.LAST_DIGIT_SIZE);r.append("(393"),r.append(a),r.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(gn.HEADER_SIZE+vn.GTIN_SIZE+gn.LAST_DIGIT_SIZE,gn.FIRST_THREE_DIGITS_SIZE);l/100==0&&r.append("0"),l/10==0&&r.append("0"),r.append(l);let u=this.getGeneralDecoder().decodeGeneralPurposeField(gn.HEADER_SIZE+vn.GTIN_SIZE+gn.LAST_DIGIT_SIZE+gn.FIRST_THREE_DIGITS_SIZE,null);return r.append(u.getNewString()),r.toString()}}gn.HEADER_SIZE=8,gn.LAST_DIGIT_SIZE=2,gn.FIRST_THREE_DIGITS_SIZE=10;class qt extends dt{constructor(r,a,l){super(r),this.dateCode=l,this.firstAIdigits=a}parseInformation(){if(this.getInformation().getSize()!=qt.HEADER_SIZE+qt.GTIN_SIZE+qt.WEIGHT_SIZE+qt.DATE_SIZE)throw new ae;let r=new G;return this.encodeCompressedGtin(r,qt.HEADER_SIZE),this.encodeCompressedWeight(r,qt.HEADER_SIZE+qt.GTIN_SIZE,qt.WEIGHT_SIZE),this.encodeCompressedDate(r,qt.HEADER_SIZE+qt.GTIN_SIZE+qt.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,a){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(a,qt.DATE_SIZE);if(l==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let u=l%32;l/=32;let f=l%12+1;l/=12;let m=l;m/10==0&&r.append("0"),r.append(m),f/10==0&&r.append("0"),r.append(f),u/10==0&&r.append("0"),r.append(u)}addWeightCode(r,a){r.append("("),r.append(this.firstAIdigits),r.append(a/1e5),r.append(")")}checkWeight(r){return r%1e5}}qt.HEADER_SIZE=8,qt.WEIGHT_SIZE=20,qt.DATE_SIZE=16;function pr(M){try{if(M.get(1))return new ee(M);if(!M.get(2))return new Ze(M);switch(Br.extractNumericValueFromBitArray(M,1,4)){case 4:return new kt(M);case 5:return new $t(M)}switch(Br.extractNumericValueFromBitArray(M,1,5)){case 12:return new kn(M);case 13:return new gn(M)}switch(Br.extractNumericValueFromBitArray(M,1,7)){case 56:return new qt(M,"310","11");case 57:return new qt(M,"320","11");case 58:return new qt(M,"310","13");case 59:return new qt(M,"320","13");case 60:return new qt(M,"310","15");case 61:return new qt(M,"320","15");case 62:return new qt(M,"310","17");case 63:return new qt(M,"320","17")}}catch(r){throw console.log(r),new De("unknown decoder: "+M)}}class ir{constructor(r,a,l,u){this.leftchar=r,this.rightchar=a,this.finderpattern=l,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,a){return r instanceof ir?ir.equalsOrNull(r.leftchar,a.leftchar)&&ir.equalsOrNull(r.rightchar,a.rightchar)&&ir.equalsOrNull(r.finderpattern,a.finderpattern):!1}static equalsOrNull(r,a){return r===null?a===null:ir.equals(r,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class nr{constructor(r,a,l){this.pairs=r,this.rowNumber=a,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,a){return r instanceof nr?this.checkEqualitity(r,a)&&r.wasReversed===a.wasReversed:!1}checkEqualitity(r,a){if(!r||!a)return;let l;return r.forEach((u,f)=>{a.forEach(m=>{u.getLeftChar().getValue()===m.getLeftChar().getValue()&&u.getRightChar().getValue()===m.getRightChar().getValue()&&u.getFinderPatter().getValue()===m.getFinderPatter().getValue()&&(l=!0)})}),l}}class ke extends st{constructor(r){super(...arguments),this.pairs=new Array(ke.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,a,l){this.pairs.length=0,this.startFromEven=!1;try{return ke.constructResult(this.decodeRow2pairs(r,a))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,ke.constructResult(this.decodeRow2pairs(r,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,a){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,r))}catch(f){if(f instanceof ae){if(!this.pairs.length)throw new ae;l=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(r,!1),u){let f=this.checkRowsBoolean(!1);if(f!=null||(f=this.checkRowsBoolean(!0),f!=null))return f}throw new ae}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return r&&(this.rows=this.rows.reverse()),a}checkRows(r,a){for(let l=a;l<this.rows.length;l++){let u=this.rows[l];this.pairs.length=0;for(let m of r)this.pairs.push(m.getPairs());if(this.pairs.push(u.getPairs()),!ke.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let f=new Array(r);f.push(u);try{return this.checkRows(f,l+1)}catch(m){this.verbose&&console.log(m)}}throw new ae}static isValidSequence(r){for(let a of ke.FINDER_PATTERN_SEQUENCES){if(r.length>a.length)continue;let l=!0;for(let u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!=a[u]){l=!1;break}if(l)return!0}return!1}storeRow(r,a){let l=0,u=!1,f=!1;for(;l<this.rows.length;){let m=this.rows[l];if(m.getRowNumber()>r){f=m.isEquivalent(this.pairs);break}u=m.isEquivalent(this.pairs),l++}f||u||ke.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new nr(this.pairs,r,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,a){for(let l of a)if(l.getPairs().length!==r.length){for(let u of l.getPairs())for(let f of r)if(ir.equals(u,f))break}}static isPartialRow(r,a){for(let l of a){let u=!0;for(let f of r){let m=!1;for(let y of l.getPairs())if(f.equals(y)){m=!0;break}if(!m){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(r){let a=dn.buildBitArray(r),u=pr(a).parseInformation(),f=r[0].getFinderPattern().getResultPoints(),m=r[r.length-1].getFinderPattern().getResultPoints(),y=[f[0],f[1],m[0],m[1]];return new Te(u,null,null,y,_e.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),a=r.getLeftChar(),l=r.getRightChar();if(l==null)return!1;let u=l.getChecksumPortion(),f=2;for(let y=1;y<this.pairs.size();++y){let _=this.pairs.get(y);u+=_.getLeftChar().getChecksumPortion(),f++;let v=_.getRightChar();v!=null&&(u+=v.getChecksumPortion(),f++)}return u%=211,211*(f-4)+u==a.getValue()}static getNextSecondBar(r,a){let l;return r.get(a)?(l=r.getNextUnset(a),l=r.getNextSet(l)):(l=r.getNextSet(a),l=r.getNextUnset(l)),l}retrieveNextPair(r,a,l){let u=a.length%2==0;this.startFromEven&&(u=!u);let f,m=!0,y=-1;do this.findNextPair(r,a,y),f=this.parseFoundFinderPattern(r,l,u),f==null?y=ke.getNextSecondBar(r,this.startEnd[0]):m=!1;while(m);let _=this.decodeDataCharacter(r,f,u,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new ae;let v;try{v=this.decodeDataCharacter(r,f,u,!1)}catch(I){v=null,this.verbose&&console.log(I)}return new ir(_,v,f,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,a,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=r.getSize(),m;l>=0?m=l:this.isEmptyPair(a)?m=0:m=a[a.length-1].getFinderPattern().getStartEnd()[1];let y=a.length%2!=0;this.startFromEven&&(y=!y);let _=!1;for(;m<f&&(_=!r.get(m),!!_);)m++;let v=0,I=m;for(let k=m;k<f;k++)if(r.get(k)!=_)u[v]++;else{if(v==3){if(y&&ke.reverseCounters(u),ke.isFinderPattern(u)){this.startEnd[0]=I,this.startEnd[1]=k;return}y&&ke.reverseCounters(u),I+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,v--}else v++;u[v]=1,_=!_}throw new ae}static reverseCounters(r){let a=r.length;for(let l=0;l<a/2;++l){let u=r[l];r[l]=r[a-l-1],r[a-l-1]=u}}parseFoundFinderPattern(r,a,l){let u,f,m;if(l){let v=this.startEnd[0]-1;for(;v>=0&&!r.get(v);)v--;v++,u=this.startEnd[0]-v,f=v,m=this.startEnd[1]}else f=this.startEnd[0],m=r.getNextUnset(this.startEnd[1]+1),u=m-this.startEnd[1];let y=this.getDecodeFinderCounters();ne.arraycopy(y,0,y,1,y.length-1),y[0]=u;let _;try{_=this.parseFinderValue(y,ke.FINDER_PATTERNS)}catch{return null}return new St(_,[f,m],f,m,a)}decodeDataCharacter(r,a,l,u){let f=this.getDataCharacterCounters();for(let Un=0;Un<f.length;Un++)f[Un]=0;if(u)ke.recordPatternInReverse(r,a.getStartEnd()[0],f);else{ke.recordPattern(r,a.getStartEnd()[1],f);for(let Un=0,Yr=f.length-1;Un<Yr;Un++,Yr--){let Si=f[Un];f[Un]=f[Yr],f[Yr]=Si}}let m=17,y=et.sum(new Int32Array(f))/m,_=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(y-_)/_>.3)throw new ae;let v=this.getOddCounts(),I=this.getEvenCounts(),k=this.getOddRoundingErrors(),L=this.getEvenRoundingErrors();for(let Un=0;Un<f.length;Un++){let Yr=1*f[Un]/y,Si=Yr+.5;if(Si<1){if(Yr<.3)throw new ae;Si=1}else if(Si>8){if(Yr>8.7)throw new ae;Si=8}let qa=Un/2;(Un&1)==0?(v[qa]=Si,k[qa]=Yr-Si):(I[qa]=Si,L[qa]=Yr-Si)}this.adjustOddEvenCounts(m);let q=4*a.getValue()+(l?0:2)+(u?0:1)-1,Z=0,J=0;for(let Un=v.length-1;Un>=0;Un--){if(ke.isNotA1left(a,l,u)){let Yr=ke.WEIGHTS[q][2*Un];J+=v[Un]*Yr}Z+=v[Un]}let ce=0;for(let Un=I.length-1;Un>=0;Un--)if(ke.isNotA1left(a,l,u)){let Yr=ke.WEIGHTS[q][2*Un+1];ce+=I[Un]*Yr}let Ee=J+ce;if((Z&1)!=0||Z>13||Z<4)throw new ae;let Xe=(13-Z)/2,ze=ke.SYMBOL_WIDEST[Xe],Fe=9-ze,rn=bt.getRSSvalue(v,ze,!0),Xt=bt.getRSSvalue(I,Fe,!1),_r=ke.EVEN_TOTAL_SUBSET[Xe],Li=ke.GSUM[Xe],si=rn*_r+Xt+Li;return new ht(si,Ee)}static isNotA1left(r,a,l){return!(r.getValue()==0&&a&&l)}adjustOddEvenCounts(r){let a=et.sum(new Int32Array(this.getOddCounts())),l=et.sum(new Int32Array(this.getEvenCounts())),u=!1,f=!1;a>13?f=!0:a<4&&(u=!0);let m=!1,y=!1;l>13?y=!0:l<4&&(m=!0);let _=a+l-r,v=(a&1)==1,I=(l&1)==0;if(_==1)if(v){if(I)throw new ae;f=!0}else{if(!I)throw new ae;y=!0}else if(_==-1)if(v){if(I)throw new ae;u=!0}else{if(!I)throw new ae;m=!0}else if(_==0){if(v){if(!I)throw new ae;a<l?(u=!0,y=!0):(f=!0,m=!0)}else if(I)throw new ae}else throw new ae;if(u){if(f)throw new ae;ke.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&ke.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(y)throw new ae;ke.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&ke.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ke.SYMBOL_WIDEST=[7,5,4,3,1],ke.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ke.GSUM=[0,348,1388,2948,3988],ke.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ke.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ke.FINDER_PAT_A=0,ke.FINDER_PAT_B=1,ke.FINDER_PAT_C=2,ke.FINDER_PAT_D=3,ke.FINDER_PAT_E=4,ke.FINDER_PAT_F=5,ke.FINDER_PATTERN_SEQUENCES=[[ke.FINDER_PAT_A,ke.FINDER_PAT_A],[ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B],[ke.FINDER_PAT_A,ke.FINDER_PAT_C,ke.FINDER_PAT_B,ke.FINDER_PAT_D],[ke.FINDER_PAT_A,ke.FINDER_PAT_E,ke.FINDER_PAT_B,ke.FINDER_PAT_D,ke.FINDER_PAT_C],[ke.FINDER_PAT_A,ke.FINDER_PAT_E,ke.FINDER_PAT_B,ke.FINDER_PAT_D,ke.FINDER_PAT_D,ke.FINDER_PAT_F],[ke.FINDER_PAT_A,ke.FINDER_PAT_E,ke.FINDER_PAT_B,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_F,ke.FINDER_PAT_F],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_D],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_E],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_F,ke.FINDER_PAT_F],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_E,ke.FINDER_PAT_F,ke.FINDER_PAT_F]],ke.MAX_PAIRS=11;class Po extends ht{constructor(r,a,l){super(r,a),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Nn extends st{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,a,l){const u=this.decodePair(a,!1,r,l);Nn.addOrTally(this.possibleLeftPairs,u),a.reverse();let f=this.decodePair(a,!0,r,l);Nn.addOrTally(this.possibleRightPairs,f),a.reverse();for(let m of this.possibleLeftPairs)if(m.getCount()>1){for(let y of this.possibleRightPairs)if(y.getCount()>1&&Nn.checkChecksum(m,y))return Nn.constructResult(m,y)}throw new ae}static addOrTally(r,a){if(a==null)return;let l=!1;for(let u of r)if(u.getValue()===a.getValue()){u.incrementCount(),l=!0;break}l||r.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,a){let l=4537077*r.getValue()+a.getValue(),u=new String(l).toString(),f=new G;for(let v=13-u.length;v>0;v--)f.append("0");f.append(u);let m=0;for(let v=0;v<13;v++){let I=f.charAt(v).charCodeAt(0)-48;m+=(v&1)===0?3*I:I}m=10-m%10,m===10&&(m=0),f.append(m.toString());let y=r.getFinderPattern().getResultPoints(),_=a.getFinderPattern().getResultPoints();return new Te(f.toString(),null,0,[y[0],y[1],_[0],_[1]],_e.RSS_14,new Date().getTime())}static checkChecksum(r,a){let l=(r.getChecksumPortion()+16*a.getChecksumPortion())%79,u=9*r.getFinderPattern().getValue()+a.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,l===u}decodePair(r,a,l,u){try{let f=this.findFinderPattern(r,a),m=this.parseFoundFinderPattern(r,l,a,f),y=u==null?null:u.get(je.NEED_RESULT_POINT_CALLBACK);if(y!=null){let I=(f[0]+f[1])/2;a&&(I=r.getSize()-1-I),y.foundPossibleResultPoint(new We(I,l))}let _=this.decodeDataCharacter(r,m,!0),v=this.decodeDataCharacter(r,m,!1);return new Po(1597*_.getValue()+v.getValue(),_.getChecksumPortion()+4*v.getChecksumPortion(),m)}catch{return null}}decodeDataCharacter(r,a,l){let u=this.getDataCharacterCounters();for(let ce=0;ce<u.length;ce++)u[ce]=0;if(l)Zt.recordPatternInReverse(r,a.getStartEnd()[0],u);else{Zt.recordPattern(r,a.getStartEnd()[1]+1,u);for(let ce=0,Ee=u.length-1;ce<Ee;ce++,Ee--){let Xe=u[ce];u[ce]=u[Ee],u[Ee]=Xe}}let f=l?16:15,m=et.sum(new Int32Array(u))/f,y=this.getOddCounts(),_=this.getEvenCounts(),v=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let ce=0;ce<u.length;ce++){let Ee=u[ce]/m,Xe=Math.floor(Ee+.5);Xe<1?Xe=1:Xe>8&&(Xe=8);let ze=Math.floor(ce/2);(ce&1)===0?(y[ze]=Xe,v[ze]=Ee-Xe):(_[ze]=Xe,I[ze]=Ee-Xe)}this.adjustOddEvenCounts(l,f);let k=0,L=0;for(let ce=y.length-1;ce>=0;ce--)L*=9,L+=y[ce],k+=y[ce];let q=0,Z=0;for(let ce=_.length-1;ce>=0;ce--)q*=9,q+=_[ce],Z+=_[ce];let J=L+3*q;if(l){if((k&1)!==0||k>12||k<4)throw new ae;let ce=(12-k)/2,Ee=Nn.OUTSIDE_ODD_WIDEST[ce],Xe=9-Ee,ze=bt.getRSSvalue(y,Ee,!1),Fe=bt.getRSSvalue(_,Xe,!0),rn=Nn.OUTSIDE_EVEN_TOTAL_SUBSET[ce],Xt=Nn.OUTSIDE_GSUM[ce];return new ht(ze*rn+Fe+Xt,J)}else{if((Z&1)!==0||Z>10||Z<4)throw new ae;let ce=(10-Z)/2,Ee=Nn.INSIDE_ODD_WIDEST[ce],Xe=9-Ee,ze=bt.getRSSvalue(y,Ee,!0),Fe=bt.getRSSvalue(_,Xe,!1),rn=Nn.INSIDE_ODD_TOTAL_SUBSET[ce],Xt=Nn.INSIDE_GSUM[ce];return new ht(Fe*rn+ze+Xt,J)}}findFinderPattern(r,a){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=r.getSize(),f=!1,m=0;for(;m<u&&(f=!r.get(m),a!==f);)m++;let y=0,_=m;for(let v=m;v<u;v++)if(r.get(v)!==f)l[y]++;else{if(y===3){if(st.isFinderPattern(l))return[_,v];_+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,y--}else y++;l[y]=1,f=!f}throw new ae}parseFoundFinderPattern(r,a,l,u){let f=r.get(u[0]),m=u[0]-1;for(;m>=0&&f!==r.get(m);)m--;m++;const y=u[0]-m,_=this.getDecodeFinderCounters(),v=new Int32Array(_.length);ne.arraycopy(_,0,v,1,_.length-1),v[0]=y;const I=this.parseFinderValue(v,Nn.FINDER_PATTERNS);let k=m,L=u[1];return l&&(k=r.getSize()-1-k,L=r.getSize()-1-L),new St(I,[m,u[1]],k,L,a)}adjustOddEvenCounts(r,a){let l=et.sum(new Int32Array(this.getOddCounts())),u=et.sum(new Int32Array(this.getEvenCounts())),f=!1,m=!1,y=!1,_=!1;r?(l>12?m=!0:l<4&&(f=!0),u>12?_=!0:u<4&&(y=!0)):(l>11?m=!0:l<5&&(f=!0),u>10?_=!0:u<4&&(y=!0));let v=l+u-a,I=(l&1)===(r?1:0),k=(u&1)===1;if(v===1)if(I){if(k)throw new ae;m=!0}else{if(!k)throw new ae;_=!0}else if(v===-1)if(I){if(k)throw new ae;f=!0}else{if(!k)throw new ae;y=!0}else if(v===0){if(I){if(!k)throw new ae;l<u?(f=!0,_=!0):(m=!0,y=!0)}else if(k)throw new ae}else throw new ae;if(f){if(m)throw new ae;st.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&st.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(_)throw new ae;st.increment(this.getEvenCounts(),this.getOddRoundingErrors())}_&&st.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Nn.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Nn.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Nn.OUTSIDE_GSUM=[0,161,961,2015,2715],Nn.INSIDE_GSUM=[0,336,1036,1516],Nn.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Nn.INSIDE_ODD_WIDEST=[2,4,6,8],Nn.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ni extends Zt{constructor(r,a){super(),this.readers=[],this.verbose=a===!0;const l=r?r.get(je.POSSIBLE_FORMATS):null,u=r&&r.get(je.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(_e.EAN_13)||l.includes(_e.UPC_A)||l.includes(_e.EAN_8)||l.includes(_e.UPC_E))&&this.readers.push(new He(r)),l.includes(_e.CODE_39)&&this.readers.push(new zt(u)),l.includes(_e.CODE_128)&&this.readers.push(new Me),l.includes(_e.ITF)&&this.readers.push(new xt),l.includes(_e.RSS_14)&&this.readers.push(new Nn),l.includes(_e.RSS_EXPANDED)&&this.readers.push(new ke(this.verbose))):(this.readers.push(new He(r)),this.readers.push(new zt),this.readers.push(new He(r)),this.readers.push(new Me),this.readers.push(new xt),this.readers.push(new Nn),this.readers.push(new ke(this.verbose)))}decodeRow(r,a,l){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(r,a,l)}catch{}throw new ae}reset(){this.readers.forEach(r=>r.reset())}}class Bo extends ve{constructor(r=500,a){super(new ni(a),r,a)}}class mn{constructor(r,a,l){this.ecCodewords=r,this.ecBlocks=[a],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ln{constructor(r,a){this.count=r,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class nn{constructor(r,a,l,u,f,m){this.versionNumber=r,this.symbolSizeRows=a,this.symbolSizeColumns=l,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=f,this.ecBlocks=m;let y=0;const _=m.getECCodewords(),v=m.getECBlocks();for(let I of v)y+=I.getCount()*(I.getDataCodewords()+_);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,a){if((r&1)!==0||(a&1)!==0)throw new F;for(let l of nn.VERSIONS)if(l.symbolSizeRows===r&&l.symbolSizeColumns===a)return l;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new nn(1,10,10,8,8,new mn(5,new ln(1,3))),new nn(2,12,12,10,10,new mn(7,new ln(1,5))),new nn(3,14,14,12,12,new mn(10,new ln(1,8))),new nn(4,16,16,14,14,new mn(12,new ln(1,12))),new nn(5,18,18,16,16,new mn(14,new ln(1,18))),new nn(6,20,20,18,18,new mn(18,new ln(1,22))),new nn(7,22,22,20,20,new mn(20,new ln(1,30))),new nn(8,24,24,22,22,new mn(24,new ln(1,36))),new nn(9,26,26,24,24,new mn(28,new ln(1,44))),new nn(10,32,32,14,14,new mn(36,new ln(1,62))),new nn(11,36,36,16,16,new mn(42,new ln(1,86))),new nn(12,40,40,18,18,new mn(48,new ln(1,114))),new nn(13,44,44,20,20,new mn(56,new ln(1,144))),new nn(14,48,48,22,22,new mn(68,new ln(1,174))),new nn(15,52,52,24,24,new mn(42,new ln(2,102))),new nn(16,64,64,14,14,new mn(56,new ln(2,140))),new nn(17,72,72,16,16,new mn(36,new ln(4,92))),new nn(18,80,80,18,18,new mn(48,new ln(4,114))),new nn(19,88,88,20,20,new mn(56,new ln(4,144))),new nn(20,96,96,22,22,new mn(68,new ln(4,174))),new nn(21,104,104,24,24,new mn(56,new ln(6,136))),new nn(22,120,120,18,18,new mn(68,new ln(6,175))),new nn(23,132,132,20,20,new mn(62,new ln(8,163))),new nn(24,144,144,22,22,new mn(62,new ln(8,156),new ln(2,155))),new nn(25,8,18,6,16,new mn(7,new ln(1,5))),new nn(26,8,32,6,14,new mn(11,new ln(1,10))),new nn(27,12,26,10,24,new mn(14,new ln(1,16))),new nn(28,12,36,10,16,new mn(18,new ln(1,22))),new nn(29,16,36,14,16,new mn(24,new ln(1,32))),new nn(30,16,48,14,22,new mn(28,new ln(1,49)))]}}nn.VERSIONS=nn.buildVersions();class ks{constructor(r){const a=r.getHeight();if(a<8||a>144||(a&1)!==0)throw new F;this.version=ks.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new lt(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const a=r.getHeight(),l=r.getWidth();return nn.getVersionForDimensions(a,l)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let a=0,l=4,u=0;const f=this.mappingBitMatrix.getHeight(),m=this.mappingBitMatrix.getWidth();let y=!1,_=!1,v=!1,I=!1;do if(l===f&&u===0&&!y)r[a++]=this.readCorner1(f,m)&255,l-=2,u+=2,y=!0;else if(l===f-2&&u===0&&(m&3)!==0&&!_)r[a++]=this.readCorner2(f,m)&255,l-=2,u+=2,_=!0;else if(l===f+4&&u===2&&(m&7)===0&&!v)r[a++]=this.readCorner3(f,m)&255,l-=2,u+=2,v=!0;else if(l===f-2&&u===0&&(m&7)===4&&!I)r[a++]=this.readCorner4(f,m)&255,l-=2,u+=2,I=!0;else{do l<f&&u>=0&&!this.readMappingMatrix.get(u,l)&&(r[a++]=this.readUtah(l,u,f,m)&255),l-=2,u+=2;while(l>=0&&u<m);l+=1,u+=3;do l>=0&&u<m&&!this.readMappingMatrix.get(u,l)&&(r[a++]=this.readUtah(l,u,f,m)&255),l+=2,u-=2;while(l<f&&u>=0);l+=3,u+=1}while(l<f||u<m);if(a!==this.version.getTotalCodewords())throw new F;return r}readModule(r,a,l,u){return r<0&&(r+=l,a+=4-(l+4&7)),a<0&&(a+=u,r+=4-(u+4&7)),this.readMappingMatrix.set(a,r),this.mappingBitMatrix.get(a,r)}readUtah(r,a,l,u){let f=0;return this.readModule(r-2,a-2,l,u)&&(f|=1),f<<=1,this.readModule(r-2,a-1,l,u)&&(f|=1),f<<=1,this.readModule(r-1,a-2,l,u)&&(f|=1),f<<=1,this.readModule(r-1,a-1,l,u)&&(f|=1),f<<=1,this.readModule(r-1,a,l,u)&&(f|=1),f<<=1,this.readModule(r,a-2,l,u)&&(f|=1),f<<=1,this.readModule(r,a-1,l,u)&&(f|=1),f<<=1,this.readModule(r,a,l,u)&&(f|=1),f}readCorner1(r,a){let l=0;return this.readModule(r-1,0,r,a)&&(l|=1),l<<=1,this.readModule(r-1,1,r,a)&&(l|=1),l<<=1,this.readModule(r-1,2,r,a)&&(l|=1),l<<=1,this.readModule(0,a-2,r,a)&&(l|=1),l<<=1,this.readModule(0,a-1,r,a)&&(l|=1),l<<=1,this.readModule(1,a-1,r,a)&&(l|=1),l<<=1,this.readModule(2,a-1,r,a)&&(l|=1),l<<=1,this.readModule(3,a-1,r,a)&&(l|=1),l}readCorner2(r,a){let l=0;return this.readModule(r-3,0,r,a)&&(l|=1),l<<=1,this.readModule(r-2,0,r,a)&&(l|=1),l<<=1,this.readModule(r-1,0,r,a)&&(l|=1),l<<=1,this.readModule(0,a-4,r,a)&&(l|=1),l<<=1,this.readModule(0,a-3,r,a)&&(l|=1),l<<=1,this.readModule(0,a-2,r,a)&&(l|=1),l<<=1,this.readModule(0,a-1,r,a)&&(l|=1),l<<=1,this.readModule(1,a-1,r,a)&&(l|=1),l}readCorner3(r,a){let l=0;return this.readModule(r-1,0,r,a)&&(l|=1),l<<=1,this.readModule(r-1,a-1,r,a)&&(l|=1),l<<=1,this.readModule(0,a-3,r,a)&&(l|=1),l<<=1,this.readModule(0,a-2,r,a)&&(l|=1),l<<=1,this.readModule(0,a-1,r,a)&&(l|=1),l<<=1,this.readModule(1,a-3,r,a)&&(l|=1),l<<=1,this.readModule(1,a-2,r,a)&&(l|=1),l<<=1,this.readModule(1,a-1,r,a)&&(l|=1),l}readCorner4(r,a){let l=0;return this.readModule(r-3,0,r,a)&&(l|=1),l<<=1,this.readModule(r-2,0,r,a)&&(l|=1),l<<=1,this.readModule(r-1,0,r,a)&&(l|=1),l<<=1,this.readModule(0,a-2,r,a)&&(l|=1),l<<=1,this.readModule(0,a-1,r,a)&&(l|=1),l<<=1,this.readModule(1,a-1,r,a)&&(l|=1),l<<=1,this.readModule(2,a-1,r,a)&&(l|=1),l<<=1,this.readModule(3,a-1,r,a)&&(l|=1),l}extractDataRegion(r){const a=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(r.getHeight()!==a)throw new R("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),f=this.version.getDataRegionSizeColumns(),m=a/u|0,y=l/f|0,_=m*u,v=y*f,I=new lt(v,_);for(let k=0;k<m;++k){const L=k*u;for(let q=0;q<y;++q){const Z=q*f;for(let J=0;J<u;++J){const ce=k*(u+2)+1+J,Ee=L+J;for(let Xe=0;Xe<f;++Xe){const ze=q*(f+2)+1+Xe;if(r.get(ze,ce)){const Fe=Z+Xe;I.set(Fe,Ee)}}}}}return I}}class ri{constructor(r,a){this.numDataCodewords=r,this.codewords=a}static getDataBlocks(r,a){const l=a.getECBlocks();let u=0;const f=l.getECBlocks();for(let J of f)u+=J.getCount();const m=new Array(u);let y=0;for(let J of f)for(let ce=0;ce<J.getCount();ce++){const Ee=J.getDataCodewords(),Xe=l.getECCodewords()+Ee;m[y++]=new ri(Ee,new Uint8Array(Xe))}const v=m[0].codewords.length-l.getECCodewords(),I=v-1;let k=0;for(let J=0;J<I;J++)for(let ce=0;ce<y;ce++)m[ce].codewords[J]=r[k++];const L=a.getVersionNumber()===24,q=L?8:y;for(let J=0;J<q;J++)m[J].codewords[v-1]=r[k++];const Z=m[0].codewords.length;for(let J=v;J<Z;J++)for(let ce=0;ce<y;ce++){const Ee=L?(ce+8)%y:ce,Xe=L&&Ee>7?J-1:J;m[Ee].codewords[Xe]=r[k++]}if(k!==r.length)throw new R;return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class hr{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new R(""+r);let a=0,l=this.bitOffset,u=this.byteOffset;const f=this.bytes;if(l>0){const m=8-l,y=r<m?r:m,_=m-y,v=255>>8-y<<_;a=(f[u]&v)>>_,r-=y,l+=y,l===8&&(l=0,u++)}if(r>0){for(;r>=8;)a=a<<8|f[u]&255,u++,r-=8;if(r>0){const m=8-r,y=255>>m<<m;a=a<<r|(f[u]&y)>>m,l+=r}}return this.bitOffset=l,this.byteOffset=u,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var an;(function(M){M[M.PAD_ENCODE=0]="PAD_ENCODE",M[M.ASCII_ENCODE=1]="ASCII_ENCODE",M[M.C40_ENCODE=2]="C40_ENCODE",M[M.TEXT_ENCODE=3]="TEXT_ENCODE",M[M.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",M[M.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",M[M.BASE256_ENCODE=6]="BASE256_ENCODE"})(an||(an={}));class ii{static decode(r){const a=new hr(r),l=new G,u=new G,f=new Array;let m=an.ASCII_ENCODE;do if(m===an.ASCII_ENCODE)m=this.decodeAsciiSegment(a,l,u);else{switch(m){case an.C40_ENCODE:this.decodeC40Segment(a,l);break;case an.TEXT_ENCODE:this.decodeTextSegment(a,l);break;case an.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,l);break;case an.EDIFACT_ENCODE:this.decodeEdifactSegment(a,l);break;case an.BASE256_ENCODE:this.decodeBase256Segment(a,l,f);break;default:throw new F}m=an.ASCII_ENCODE}while(m!==an.PAD_ENCODE&&a.available()>0);return u.length()>0&&l.append(u.toString()),new It(r,l.toString(),f.length===0?null:f,null)}static decodeAsciiSegment(r,a,l){let u=!1;do{let f=r.readBits(8);if(f===0)throw new F;if(f<=128)return u&&(f+=128),a.append(String.fromCharCode(f-1)),an.ASCII_ENCODE;if(f===129)return an.PAD_ENCODE;if(f<=229){const m=f-130;m<10&&a.append("0"),a.append(""+m)}else switch(f){case 230:return an.C40_ENCODE;case 231:return an.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:a.append("[)>05"),l.insert(0,"");break;case 237:a.append("[)>06"),l.insert(0,"");break;case 238:return an.ANSIX12_ENCODE;case 239:return an.TEXT_ENCODE;case 240:return an.EDIFACT_ENCODE;case 241:break;default:if(f!==254||r.available()!==0)throw new F;break}}while(r.available()>0);return an.ASCII_ENCODE}static decodeC40Segment(r,a){let l=!1;const u=[];let f=0;do{if(r.available()===8)return;const m=r.readBits(8);if(m===254)return;this.parseTwoBytes(m,r.readBits(8),u);for(let y=0;y<3;y++){const _=u[y];switch(f){case 0:if(_<3)f=_+1;else if(_<this.C40_BASIC_SET_CHARS.length){const v=this.C40_BASIC_SET_CHARS[_];l?(a.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):a.append(v)}else throw new F;break;case 1:l?(a.append(String.fromCharCode(_+128)),l=!1):a.append(String.fromCharCode(_)),f=0;break;case 2:if(_<this.C40_SHIFT2_SET_CHARS.length){const v=this.C40_SHIFT2_SET_CHARS[_];l?(a.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):a.append(v)}else switch(_){case 27:a.append("");break;case 30:l=!0;break;default:throw new F}f=0;break;case 3:l?(a.append(String.fromCharCode(_+224)),l=!1):a.append(String.fromCharCode(_+96)),f=0;break;default:throw new F}}}while(r.available()>0)}static decodeTextSegment(r,a){let l=!1,u=[],f=0;do{if(r.available()===8)return;const m=r.readBits(8);if(m===254)return;this.parseTwoBytes(m,r.readBits(8),u);for(let y=0;y<3;y++){const _=u[y];switch(f){case 0:if(_<3)f=_+1;else if(_<this.TEXT_BASIC_SET_CHARS.length){const v=this.TEXT_BASIC_SET_CHARS[_];l?(a.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):a.append(v)}else throw new F;break;case 1:l?(a.append(String.fromCharCode(_+128)),l=!1):a.append(String.fromCharCode(_)),f=0;break;case 2:if(_<this.TEXT_SHIFT2_SET_CHARS.length){const v=this.TEXT_SHIFT2_SET_CHARS[_];l?(a.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):a.append(v)}else switch(_){case 27:a.append("");break;case 30:l=!0;break;default:throw new F}f=0;break;case 3:if(_<this.TEXT_SHIFT3_SET_CHARS.length){const v=this.TEXT_SHIFT3_SET_CHARS[_];l?(a.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):a.append(v),f=0}else throw new F;break;default:throw new F}}}while(r.available()>0)}static decodeAnsiX12Segment(r,a){const l=[];do{if(r.available()===8)return;const u=r.readBits(8);if(u===254)return;this.parseTwoBytes(u,r.readBits(8),l);for(let f=0;f<3;f++){const m=l[f];switch(m){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(m<14)a.append(String.fromCharCode(m+44));else if(m<40)a.append(String.fromCharCode(m+51));else throw new F;break}}}while(r.available()>0)}static parseTwoBytes(r,a,l){let u=(r<<8)+a-1,f=Math.floor(u/1600);l[0]=f,u-=f*1600,f=Math.floor(u/40),l[1]=f,l[2]=u-f*40}static decodeEdifactSegment(r,a){do{if(r.available()<=16)return;for(let l=0;l<4;l++){let u=r.readBits(6);if(u===31){const f=8-r.getBitOffset();f!==8&&r.readBits(f);return}(u&32)===0&&(u|=64),a.append(String.fromCharCode(u))}}while(r.available()>0)}static decodeBase256Segment(r,a,l){let u=1+r.getByteOffset();const f=this.unrandomize255State(r.readBits(8),u++);let m;if(f===0?m=r.available()/8|0:f<250?m=f:m=250*(f-249)+this.unrandomize255State(r.readBits(8),u++),m<0)throw new F;const y=new Uint8Array(m);for(let _=0;_<m;_++){if(r.available()<8)throw new F;y[_]=this.unrandomize255State(r.readBits(8),u++)}l.push(y);try{a.append(X.decode(y,Y.ISO88591))}catch(_){throw new De("Platform does not support required encoding: "+_.message)}}static unrandomize255State(r,a){const l=149*a%255+1,u=r-l;return u>=0?u:u+256}}ii.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ii.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ii.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ii.TEXT_SHIFT2_SET_CHARS=ii.C40_SHIFT2_SET_CHARS,ii.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Vo{constructor(){this.rsDecoder=new $e(Ve.DATA_MATRIX_FIELD_256)}decode(r){const a=new ks(r),l=a.getVersion(),u=a.readCodewords(),f=ri.getDataBlocks(u,l);let m=0;for(let v of f)m+=v.getNumDataCodewords();const y=new Uint8Array(m),_=f.length;for(let v=0;v<_;v++){const I=f[v],k=I.getCodewords(),L=I.getNumDataCodewords();this.correctErrors(k,L);for(let q=0;q<L;q++)y[q*_+v]=k[q]}return ii.decode(y)}correctErrors(r,a){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-a)}catch{throw new B}for(let u=0;u<a;u++)r[u]=l[u]}}class Pt{constructor(r){this.image=r,this.rectangleDetector=new Rt(this.image)}detect(){const r=this.rectangleDetector.detect();let a=this.detectSolid1(r);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new ae;a=this.shiftToModuleCenter(a);const l=a[0],u=a[1],f=a[2],m=a[3];let y=this.transitionsBetween(l,m)+1,_=this.transitionsBetween(f,m)+1;(y&1)===1&&(y+=1),(_&1)===1&&(_+=1),4*y<7*_&&4*_<7*y&&(y=_=Math.max(y,_));let v=Pt.sampleGrid(this.image,l,u,f,m,y,_);return new Qn(v,[l,u,f,m])}static shiftPoint(r,a,l){let u=(a.getX()-r.getX())/(l+1),f=(a.getY()-r.getY())/(l+1);return new We(r.getX()+u,r.getY()+f)}static moveAway(r,a,l){let u=r.getX(),f=r.getY();return u<a?u-=1:u+=1,f<l?f-=1:f+=1,new We(u,f)}detectSolid1(r){let a=r[0],l=r[1],u=r[3],f=r[2],m=this.transitionsBetween(a,l),y=this.transitionsBetween(l,u),_=this.transitionsBetween(u,f),v=this.transitionsBetween(f,a),I=m,k=[f,a,l,u];return I>y&&(I=y,k[0]=a,k[1]=l,k[2]=u,k[3]=f),I>_&&(I=_,k[0]=l,k[1]=u,k[2]=f,k[3]=a),I>v&&(k[0]=u,k[1]=f,k[2]=a,k[3]=l),k}detectSolid2(r){let a=r[0],l=r[1],u=r[2],f=r[3],m=this.transitionsBetween(a,f),y=Pt.shiftPoint(l,u,(m+1)*4),_=Pt.shiftPoint(u,l,(m+1)*4),v=this.transitionsBetween(y,a),I=this.transitionsBetween(_,f);return v<I?(r[0]=a,r[1]=l,r[2]=u,r[3]=f):(r[0]=l,r[1]=u,r[2]=f,r[3]=a),r}correctTopRight(r){let a=r[0],l=r[1],u=r[2],f=r[3],m=this.transitionsBetween(a,f),y=this.transitionsBetween(l,f),_=Pt.shiftPoint(a,l,(y+1)*4),v=Pt.shiftPoint(u,l,(m+1)*4);m=this.transitionsBetween(_,f),y=this.transitionsBetween(v,f);let I=new We(f.getX()+(u.getX()-l.getX())/(m+1),f.getY()+(u.getY()-l.getY())/(m+1)),k=new We(f.getX()+(a.getX()-l.getX())/(y+1),f.getY()+(a.getY()-l.getY())/(y+1));if(!this.isValid(I))return this.isValid(k)?k:null;if(!this.isValid(k))return I;let L=this.transitionsBetween(_,I)+this.transitionsBetween(v,I),q=this.transitionsBetween(_,k)+this.transitionsBetween(v,k);return L>q?I:k}shiftToModuleCenter(r){let a=r[0],l=r[1],u=r[2],f=r[3],m=this.transitionsBetween(a,f)+1,y=this.transitionsBetween(u,f)+1,_=Pt.shiftPoint(a,l,y*4),v=Pt.shiftPoint(u,l,m*4);m=this.transitionsBetween(_,f)+1,y=this.transitionsBetween(v,f)+1,(m&1)===1&&(m+=1),(y&1)===1&&(y+=1);let I=(a.getX()+l.getX()+u.getX()+f.getX())/4,k=(a.getY()+l.getY()+u.getY()+f.getY())/4;a=Pt.moveAway(a,I,k),l=Pt.moveAway(l,I,k),u=Pt.moveAway(u,I,k),f=Pt.moveAway(f,I,k);let L,q;return _=Pt.shiftPoint(a,l,y*4),_=Pt.shiftPoint(_,f,m*4),L=Pt.shiftPoint(l,a,y*4),L=Pt.shiftPoint(L,u,m*4),v=Pt.shiftPoint(u,f,y*4),v=Pt.shiftPoint(v,l,m*4),q=Pt.shiftPoint(f,u,y*4),q=Pt.shiftPoint(q,a,m*4),[_,L,v,q]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,a,l,u,f,m,y){return Rn.getInstance().sampleGrid(r,m,y,.5,.5,m-.5,.5,m-.5,y-.5,.5,y-.5,a.getX(),a.getY(),f.getX(),f.getY(),u.getX(),u.getY(),l.getX(),l.getY())}transitionsBetween(r,a){let l=Math.trunc(r.getX()),u=Math.trunc(r.getY()),f=Math.trunc(a.getX()),m=Math.trunc(a.getY()),y=Math.abs(m-u)>Math.abs(f-l);if(y){let J=l;l=u,u=J,J=f,f=m,m=J}let _=Math.abs(f-l),v=Math.abs(m-u),I=-_/2,k=u<m?1:-1,L=l<f?1:-1,q=0,Z=this.image.get(y?u:l,y?l:u);for(let J=l,ce=u;J!==f;J+=L){let Ee=this.image.get(y?ce:J,y?J:ce);if(Ee!==Z&&(q++,Z=Ee),I+=v,I>0){if(ce===m)break;ce+=k,I-=_}}return q}}class di{constructor(){this.decoder=new Vo}decode(r,a=null){let l,u;if(a!=null&&a.has(je.PURE_BARCODE)){const v=di.extractPureBits(r.getBlackMatrix());l=this.decoder.decode(v),u=di.NO_POINTS}else{const v=new Pt(r.getBlackMatrix()).detect();l=this.decoder.decode(v.getBits()),u=v.getPoints()}const f=l.getRawBytes(),m=new Te(l.getText(),f,8*f.length,u,_e.DATA_MATRIX,ne.currentTimeMillis()),y=l.getByteSegments();y!=null&&m.putMetadata(_t.BYTE_SEGMENTS,y);const _=l.getECLevel();return _!=null&&m.putMetadata(_t.ERROR_CORRECTION_LEVEL,_),m}reset(){}static extractPureBits(r){const a=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(a==null||l==null)throw new ae;const u=this.moduleSize(a,r);let f=a[1];const m=l[1];let y=a[0];const v=(l[0]-y+1)/u,I=(m-f+1)/u;if(v<=0||I<=0)throw new ae;const k=u/2;f+=k,y+=k;const L=new lt(v,I);for(let q=0;q<I;q++){const Z=f+q*u;for(let J=0;J<v;J++)r.get(y+J*u,Z)&&L.set(J,q)}return L}static moduleSize(r,a){const l=a.getWidth();let u=r[0];const f=r[1];for(;u<l&&a.get(u,f);)u++;if(u===l)throw new ae;const m=u-r[0];if(m===0)throw new ae;return m}}di.NO_POINTS=[];class os extends ve{constructor(r=500){super(new di,r)}}var Oi;(function(M){M[M.L=0]="L",M[M.M=1]="M",M[M.Q=2]="Q",M[M.H=3]="H"})(Oi||(Oi={}));class en{constructor(r,a,l){this.value=r,this.stringValue=a,this.bits=l,en.FOR_BITS.set(l,this),en.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return en.L;case"M":return en.M;case"Q":return en.Q;case"H":return en.H;default:throw new C(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof en))return!1;const a=r;return this.value===a.value}static forBits(r){if(r<0||r>=en.FOR_BITS.size)throw new R;return en.FOR_BITS.get(r)}}en.FOR_BITS=new Map,en.FOR_VALUE=new Map,en.L=new en(Oi.L,"L",1),en.M=new en(Oi.M,"M",0),en.Q=new en(Oi.Q,"Q",3),en.H=new en(Oi.H,"H",2);class yr{constructor(r){this.errorCorrectionLevel=en.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,a){return he.bitCount(r^a)}static decodeFormatInformation(r,a){const l=yr.doDecodeFormatInformation(r,a);return l!==null?l:yr.doDecodeFormatInformation(r^yr.FORMAT_INFO_MASK_QR,a^yr.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,a){let l=Number.MAX_SAFE_INTEGER,u=0;for(const f of yr.FORMAT_INFO_DECODE_LOOKUP){const m=f[0];if(m===r||m===a)return new yr(f[1]);let y=yr.numBitsDiffering(r,m);y<l&&(u=f[1],l=y),r!==a&&(y=yr.numBitsDiffering(a,m),y<l&&(u=f[1],l=y))}return l<=3?new yr(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof yr))return!1;const a=r;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}yr.FORMAT_INFO_MASK_QR=21522,yr.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ue{constructor(r,...a){this.ecCodewordsPerBlock=r,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const a=this.ecBlocks;for(const l of a)r+=l.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class H{constructor(r,a){this.count=r,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Et{constructor(r,a,...l){this.versionNumber=r,this.alignmentPatternCenters=a,this.ecBlocks=l;let u=0;const f=l[0].getECCodewordsPerBlock(),m=l[0].getECBlocks();for(const y of m)u+=y.getCount()*(y.getDataCodewords()+f);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new F;try{return this.getVersionForNumber((r-17)/4)}catch{throw new F}}static getVersionForNumber(r){if(r<1||r>40)throw new R;return Et.VERSIONS[r-1]}static decodeVersionInformation(r){let a=Number.MAX_SAFE_INTEGER,l=0;for(let u=0;u<Et.VERSION_DECODE_INFO.length;u++){const f=Et.VERSION_DECODE_INFO[u];if(f===r)return Et.getVersionForNumber(u+7);const m=yr.numBitsDiffering(r,f);m<a&&(l=u+7,a=m)}return a<=3?Et.getVersionForNumber(l):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),a=new lt(r);a.setRegion(0,0,9,9),a.setRegion(r-8,0,8,9),a.setRegion(0,r-8,9,8);const l=this.alignmentPatternCenters.length;for(let u=0;u<l;u++){const f=this.alignmentPatternCenters[u]-2;for(let m=0;m<l;m++)u===0&&(m===0||m===l-1)||u===l-1&&m===0||a.setRegion(this.alignmentPatternCenters[m]-2,f,5,5)}return a.setRegion(6,9,1,r-17),a.setRegion(9,6,r-17,1),this.versionNumber>6&&(a.setRegion(r-11,0,3,6),a.setRegion(0,r-11,6,3)),a}toString(){return""+this.versionNumber}}Et.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Et.VERSIONS=[new Et(1,new Int32Array(0),new ue(7,new H(1,19)),new ue(10,new H(1,16)),new ue(13,new H(1,13)),new ue(17,new H(1,9))),new Et(2,Int32Array.from([6,18]),new ue(10,new H(1,34)),new ue(16,new H(1,28)),new ue(22,new H(1,22)),new ue(28,new H(1,16))),new Et(3,Int32Array.from([6,22]),new ue(15,new H(1,55)),new ue(26,new H(1,44)),new ue(18,new H(2,17)),new ue(22,new H(2,13))),new Et(4,Int32Array.from([6,26]),new ue(20,new H(1,80)),new ue(18,new H(2,32)),new ue(26,new H(2,24)),new ue(16,new H(4,9))),new Et(5,Int32Array.from([6,30]),new ue(26,new H(1,108)),new ue(24,new H(2,43)),new ue(18,new H(2,15),new H(2,16)),new ue(22,new H(2,11),new H(2,12))),new Et(6,Int32Array.from([6,34]),new ue(18,new H(2,68)),new ue(16,new H(4,27)),new ue(24,new H(4,19)),new ue(28,new H(4,15))),new Et(7,Int32Array.from([6,22,38]),new ue(20,new H(2,78)),new ue(18,new H(4,31)),new ue(18,new H(2,14),new H(4,15)),new ue(26,new H(4,13),new H(1,14))),new Et(8,Int32Array.from([6,24,42]),new ue(24,new H(2,97)),new ue(22,new H(2,38),new H(2,39)),new ue(22,new H(4,18),new H(2,19)),new ue(26,new H(4,14),new H(2,15))),new Et(9,Int32Array.from([6,26,46]),new ue(30,new H(2,116)),new ue(22,new H(3,36),new H(2,37)),new ue(20,new H(4,16),new H(4,17)),new ue(24,new H(4,12),new H(4,13))),new Et(10,Int32Array.from([6,28,50]),new ue(18,new H(2,68),new H(2,69)),new ue(26,new H(4,43),new H(1,44)),new ue(24,new H(6,19),new H(2,20)),new ue(28,new H(6,15),new H(2,16))),new Et(11,Int32Array.from([6,30,54]),new ue(20,new H(4,81)),new ue(30,new H(1,50),new H(4,51)),new ue(28,new H(4,22),new H(4,23)),new ue(24,new H(3,12),new H(8,13))),new Et(12,Int32Array.from([6,32,58]),new ue(24,new H(2,92),new H(2,93)),new ue(22,new H(6,36),new H(2,37)),new ue(26,new H(4,20),new H(6,21)),new ue(28,new H(7,14),new H(4,15))),new Et(13,Int32Array.from([6,34,62]),new ue(26,new H(4,107)),new ue(22,new H(8,37),new H(1,38)),new ue(24,new H(8,20),new H(4,21)),new ue(22,new H(12,11),new H(4,12))),new Et(14,Int32Array.from([6,26,46,66]),new ue(30,new H(3,115),new H(1,116)),new ue(24,new H(4,40),new H(5,41)),new ue(20,new H(11,16),new H(5,17)),new ue(24,new H(11,12),new H(5,13))),new Et(15,Int32Array.from([6,26,48,70]),new ue(22,new H(5,87),new H(1,88)),new ue(24,new H(5,41),new H(5,42)),new ue(30,new H(5,24),new H(7,25)),new ue(24,new H(11,12),new H(7,13))),new Et(16,Int32Array.from([6,26,50,74]),new ue(24,new H(5,98),new H(1,99)),new ue(28,new H(7,45),new H(3,46)),new ue(24,new H(15,19),new H(2,20)),new ue(30,new H(3,15),new H(13,16))),new Et(17,Int32Array.from([6,30,54,78]),new ue(28,new H(1,107),new H(5,108)),new ue(28,new H(10,46),new H(1,47)),new ue(28,new H(1,22),new H(15,23)),new ue(28,new H(2,14),new H(17,15))),new Et(18,Int32Array.from([6,30,56,82]),new ue(30,new H(5,120),new H(1,121)),new ue(26,new H(9,43),new H(4,44)),new ue(28,new H(17,22),new H(1,23)),new ue(28,new H(2,14),new H(19,15))),new Et(19,Int32Array.from([6,30,58,86]),new ue(28,new H(3,113),new H(4,114)),new ue(26,new H(3,44),new H(11,45)),new ue(26,new H(17,21),new H(4,22)),new ue(26,new H(9,13),new H(16,14))),new Et(20,Int32Array.from([6,34,62,90]),new ue(28,new H(3,107),new H(5,108)),new ue(26,new H(3,41),new H(13,42)),new ue(30,new H(15,24),new H(5,25)),new ue(28,new H(15,15),new H(10,16))),new Et(21,Int32Array.from([6,28,50,72,94]),new ue(28,new H(4,116),new H(4,117)),new ue(26,new H(17,42)),new ue(28,new H(17,22),new H(6,23)),new ue(30,new H(19,16),new H(6,17))),new Et(22,Int32Array.from([6,26,50,74,98]),new ue(28,new H(2,111),new H(7,112)),new ue(28,new H(17,46)),new ue(30,new H(7,24),new H(16,25)),new ue(24,new H(34,13))),new Et(23,Int32Array.from([6,30,54,78,102]),new ue(30,new H(4,121),new H(5,122)),new ue(28,new H(4,47),new H(14,48)),new ue(30,new H(11,24),new H(14,25)),new ue(30,new H(16,15),new H(14,16))),new Et(24,Int32Array.from([6,28,54,80,106]),new ue(30,new H(6,117),new H(4,118)),new ue(28,new H(6,45),new H(14,46)),new ue(30,new H(11,24),new H(16,25)),new ue(30,new H(30,16),new H(2,17))),new Et(25,Int32Array.from([6,32,58,84,110]),new ue(26,new H(8,106),new H(4,107)),new ue(28,new H(8,47),new H(13,48)),new ue(30,new H(7,24),new H(22,25)),new ue(30,new H(22,15),new H(13,16))),new Et(26,Int32Array.from([6,30,58,86,114]),new ue(28,new H(10,114),new H(2,115)),new ue(28,new H(19,46),new H(4,47)),new ue(28,new H(28,22),new H(6,23)),new ue(30,new H(33,16),new H(4,17))),new Et(27,Int32Array.from([6,34,62,90,118]),new ue(30,new H(8,122),new H(4,123)),new ue(28,new H(22,45),new H(3,46)),new ue(30,new H(8,23),new H(26,24)),new ue(30,new H(12,15),new H(28,16))),new Et(28,Int32Array.from([6,26,50,74,98,122]),new ue(30,new H(3,117),new H(10,118)),new ue(28,new H(3,45),new H(23,46)),new ue(30,new H(4,24),new H(31,25)),new ue(30,new H(11,15),new H(31,16))),new Et(29,Int32Array.from([6,30,54,78,102,126]),new ue(30,new H(7,116),new H(7,117)),new ue(28,new H(21,45),new H(7,46)),new ue(30,new H(1,23),new H(37,24)),new ue(30,new H(19,15),new H(26,16))),new Et(30,Int32Array.from([6,26,52,78,104,130]),new ue(30,new H(5,115),new H(10,116)),new ue(28,new H(19,47),new H(10,48)),new ue(30,new H(15,24),new H(25,25)),new ue(30,new H(23,15),new H(25,16))),new Et(31,Int32Array.from([6,30,56,82,108,134]),new ue(30,new H(13,115),new H(3,116)),new ue(28,new H(2,46),new H(29,47)),new ue(30,new H(42,24),new H(1,25)),new ue(30,new H(23,15),new H(28,16))),new Et(32,Int32Array.from([6,34,60,86,112,138]),new ue(30,new H(17,115)),new ue(28,new H(10,46),new H(23,47)),new ue(30,new H(10,24),new H(35,25)),new ue(30,new H(19,15),new H(35,16))),new Et(33,Int32Array.from([6,30,58,86,114,142]),new ue(30,new H(17,115),new H(1,116)),new ue(28,new H(14,46),new H(21,47)),new ue(30,new H(29,24),new H(19,25)),new ue(30,new H(11,15),new H(46,16))),new Et(34,Int32Array.from([6,34,62,90,118,146]),new ue(30,new H(13,115),new H(6,116)),new ue(28,new H(14,46),new H(23,47)),new ue(30,new H(44,24),new H(7,25)),new ue(30,new H(59,16),new H(1,17))),new Et(35,Int32Array.from([6,30,54,78,102,126,150]),new ue(30,new H(12,121),new H(7,122)),new ue(28,new H(12,47),new H(26,48)),new ue(30,new H(39,24),new H(14,25)),new ue(30,new H(22,15),new H(41,16))),new Et(36,Int32Array.from([6,24,50,76,102,128,154]),new ue(30,new H(6,121),new H(14,122)),new ue(28,new H(6,47),new H(34,48)),new ue(30,new H(46,24),new H(10,25)),new ue(30,new H(2,15),new H(64,16))),new Et(37,Int32Array.from([6,28,54,80,106,132,158]),new ue(30,new H(17,122),new H(4,123)),new ue(28,new H(29,46),new H(14,47)),new ue(30,new H(49,24),new H(10,25)),new ue(30,new H(24,15),new H(46,16))),new Et(38,Int32Array.from([6,32,58,84,110,136,162]),new ue(30,new H(4,122),new H(18,123)),new ue(28,new H(13,46),new H(32,47)),new ue(30,new H(48,24),new H(14,25)),new ue(30,new H(42,15),new H(32,16))),new Et(39,Int32Array.from([6,26,54,82,110,138,166]),new ue(30,new H(20,117),new H(4,118)),new ue(28,new H(40,47),new H(7,48)),new ue(30,new H(43,24),new H(22,25)),new ue(30,new H(10,15),new H(67,16))),new Et(40,Int32Array.from([6,30,58,86,114,142,170]),new ue(30,new H(19,118),new H(6,119)),new ue(28,new H(18,47),new H(31,48)),new ue(30,new H(34,24),new H(34,25)),new ue(30,new H(20,15),new H(61,16)))];var xr;(function(M){M[M.DATA_MASK_000=0]="DATA_MASK_000",M[M.DATA_MASK_001=1]="DATA_MASK_001",M[M.DATA_MASK_010=2]="DATA_MASK_010",M[M.DATA_MASK_011=3]="DATA_MASK_011",M[M.DATA_MASK_100=4]="DATA_MASK_100",M[M.DATA_MASK_101=5]="DATA_MASK_101",M[M.DATA_MASK_110=6]="DATA_MASK_110",M[M.DATA_MASK_111=7]="DATA_MASK_111"})(xr||(xr={}));class Nr{constructor(r,a){this.value=r,this.isMasked=a}unmaskBitMatrix(r,a){for(let l=0;l<a;l++)for(let u=0;u<a;u++)this.isMasked(l,u)&&r.flip(u,l)}}Nr.values=new Map([[xr.DATA_MASK_000,new Nr(xr.DATA_MASK_000,(M,r)=>(M+r&1)===0)],[xr.DATA_MASK_001,new Nr(xr.DATA_MASK_001,(M,r)=>(M&1)===0)],[xr.DATA_MASK_010,new Nr(xr.DATA_MASK_010,(M,r)=>r%3===0)],[xr.DATA_MASK_011,new Nr(xr.DATA_MASK_011,(M,r)=>(M+r)%3===0)],[xr.DATA_MASK_100,new Nr(xr.DATA_MASK_100,(M,r)=>(Math.floor(M/2)+Math.floor(r/3)&1)===0)],[xr.DATA_MASK_101,new Nr(xr.DATA_MASK_101,(M,r)=>M*r%6===0)],[xr.DATA_MASK_110,new Nr(xr.DATA_MASK_110,(M,r)=>M*r%6<3)],[xr.DATA_MASK_111,new Nr(xr.DATA_MASK_111,(M,r)=>(M+r+M*r%3&1)===0)]]);class gi{constructor(r){const a=r.getHeight();if(a<21||(a&3)!==1)throw new F;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let f=0;f<6;f++)r=this.copyBit(f,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let f=5;f>=0;f--)r=this.copyBit(8,f,r);const a=this.bitMatrix.getHeight();let l=0;const u=a-7;for(let f=a-1;f>=u;f--)l=this.copyBit(8,f,l);for(let f=a-8;f<a;f++)l=this.copyBit(f,8,l);if(this.parsedFormatInfo=yr.decodeFormatInformation(r,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new F}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),a=Math.floor((r-17)/4);if(a<=6)return Et.getVersionForNumber(a);let l=0;const u=r-11;for(let m=5;m>=0;m--)for(let y=r-9;y>=u;y--)l=this.copyBit(y,m,l);let f=Et.decodeVersionInformation(l);if(f!==null&&f.getDimensionForVersion()===r)return this.parsedVersion=f,f;l=0;for(let m=5;m>=0;m--)for(let y=r-9;y>=u;y--)l=this.copyBit(m,y,l);if(f=Et.decodeVersionInformation(l),f!==null&&f.getDimensionForVersion()===r)return this.parsedVersion=f,f;throw new F}copyBit(r,a,l){return(this.isMirror?this.bitMatrix.get(a,r):this.bitMatrix.get(r,a))?l<<1|1:l<<1}readCodewords(){const r=this.readFormatInformation(),a=this.readVersion(),l=Nr.values.get(r.getDataMask()),u=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,u);const f=a.buildFunctionPattern();let m=!0;const y=new Uint8Array(a.getTotalCodewords());let _=0,v=0,I=0;for(let k=u-1;k>0;k-=2){k===6&&k--;for(let L=0;L<u;L++){const q=m?u-1-L:L;for(let Z=0;Z<2;Z++)f.get(k-Z,q)||(I++,v<<=1,this.bitMatrix.get(k-Z,q)&&(v|=1),I===8&&(y[_++]=v,I=0,v=0))}m=!m}if(_!==a.getTotalCodewords())throw new F;return y}remask(){if(this.parsedFormatInfo===null)return;const r=Nr.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,a)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let a=0,l=r.getWidth();a<l;a++)for(let u=a+1,f=r.getHeight();u<f;u++)r.get(a,u)!==r.get(u,a)&&(r.flip(u,a),r.flip(a,u))}}class Ua{constructor(r,a){this.numDataCodewords=r,this.codewords=a}static getDataBlocks(r,a,l){if(r.length!==a.getTotalCodewords())throw new R;const u=a.getECBlocksForLevel(l);let f=0;const m=u.getECBlocks();for(const Z of m)f+=Z.getCount();const y=new Array(f);let _=0;for(const Z of m)for(let J=0;J<Z.getCount();J++){const ce=Z.getDataCodewords(),Ee=u.getECCodewordsPerBlock()+ce;y[_++]=new Ua(ce,new Uint8Array(Ee))}const v=y[0].codewords.length;let I=y.length-1;for(;I>=0&&y[I].codewords.length!==v;)I--;I++;const k=v-u.getECCodewordsPerBlock();let L=0;for(let Z=0;Z<k;Z++)for(let J=0;J<_;J++)y[J].codewords[Z]=r[L++];for(let Z=I;Z<_;Z++)y[Z].codewords[k]=r[L++];const q=y[0].codewords.length;for(let Z=k;Z<q;Z++)for(let J=0;J<_;J++){const ce=J<I?Z:Z+1;y[J].codewords[ce]=r[L++]}return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Qr;(function(M){M[M.TERMINATOR=0]="TERMINATOR",M[M.NUMERIC=1]="NUMERIC",M[M.ALPHANUMERIC=2]="ALPHANUMERIC",M[M.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",M[M.BYTE=4]="BYTE",M[M.ECI=5]="ECI",M[M.KANJI=6]="KANJI",M[M.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",M[M.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",M[M.HANZI=9]="HANZI"})(Qr||(Qr={}));class Tt{constructor(r,a,l,u){this.value=r,this.stringValue=a,this.characterCountBitsForVersions=l,this.bits=u,Tt.FOR_BITS.set(u,this),Tt.FOR_VALUE.set(r,this)}static forBits(r){const a=Tt.FOR_BITS.get(r);if(a===void 0)throw new R;return a}getCharacterCountBits(r){const a=r.getVersionNumber();let l;return a<=9?l=0:a<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof Tt))return!1;const a=r;return this.value===a.value}toString(){return this.stringValue}}Tt.FOR_BITS=new Map,Tt.FOR_VALUE=new Map,Tt.TERMINATOR=new Tt(Qr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Tt.NUMERIC=new Tt(Qr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Tt.ALPHANUMERIC=new Tt(Qr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Tt.STRUCTURED_APPEND=new Tt(Qr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Tt.BYTE=new Tt(Qr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Tt.ECI=new Tt(Qr.ECI,"ECI",Int32Array.from([0,0,0]),7),Tt.KANJI=new Tt(Qr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Tt.FNC1_FIRST_POSITION=new Tt(Qr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Tt.FNC1_SECOND_POSITION=new Tt(Qr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Tt.HANZI=new Tt(Qr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Bn{static decode(r,a,l,u){const f=new hr(r);let m=new G;const y=new Array;let _=-1,v=-1;try{let I=null,k=!1,L;do{if(f.available()<4)L=Tt.TERMINATOR;else{const q=f.readBits(4);L=Tt.forBits(q)}switch(L){case Tt.TERMINATOR:break;case Tt.FNC1_FIRST_POSITION:case Tt.FNC1_SECOND_POSITION:k=!0;break;case Tt.STRUCTURED_APPEND:if(f.available()<16)throw new F;_=f.readBits(8),v=f.readBits(8);break;case Tt.ECI:const q=Bn.parseECIValue(f);if(I=U.getCharacterSetECIByValue(q),I===null)throw new F;break;case Tt.HANZI:const Z=f.readBits(4),J=f.readBits(L.getCharacterCountBits(a));Z===Bn.GB2312_SUBSET&&Bn.decodeHanziSegment(f,m,J);break;default:const ce=f.readBits(L.getCharacterCountBits(a));switch(L){case Tt.NUMERIC:Bn.decodeNumericSegment(f,m,ce);break;case Tt.ALPHANUMERIC:Bn.decodeAlphanumericSegment(f,m,ce,k);break;case Tt.BYTE:Bn.decodeByteSegment(f,m,ce,I,y,u);break;case Tt.KANJI:Bn.decodeKanjiSegment(f,m,ce);break;default:throw new F}break}}while(L!==Tt.TERMINATOR)}catch{throw new F}return new It(r,m.toString(),y.length===0?null:y,l===null?null:l.toString(),_,v)}static decodeHanziSegment(r,a,l){if(l*13>r.available())throw new F;const u=new Uint8Array(2*l);let f=0;for(;l>0;){const m=r.readBits(13);let y=m/96<<8&4294967295|m%96;y<959?y+=41377:y+=42657,u[f]=y>>8&255,u[f+1]=y&255,f+=2,l--}try{a.append(X.decode(u,Y.GB2312))}catch(m){throw new F(m)}}static decodeKanjiSegment(r,a,l){if(l*13>r.available())throw new F;const u=new Uint8Array(2*l);let f=0;for(;l>0;){const m=r.readBits(13);let y=m/192<<8&4294967295|m%192;y<7936?y+=33088:y+=49472,u[f]=y>>8,u[f+1]=y,f+=2,l--}try{a.append(X.decode(u,Y.SHIFT_JIS))}catch(m){throw new F(m)}}static decodeByteSegment(r,a,l,u,f,m){if(8*l>r.available())throw new F;const y=new Uint8Array(l);for(let v=0;v<l;v++)y[v]=r.readBits(8);let _;u===null?_=Y.guessEncoding(y,m):_=u.getName();try{a.append(X.decode(y,_))}catch(v){throw new F(v)}f.push(y)}static toAlphaNumericChar(r){if(r>=Bn.ALPHANUMERIC_CHARS.length)throw new F;return Bn.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,a,l,u){const f=a.length();for(;l>1;){if(r.available()<11)throw new F;const m=r.readBits(11);a.append(Bn.toAlphaNumericChar(Math.floor(m/45))),a.append(Bn.toAlphaNumericChar(m%45)),l-=2}if(l===1){if(r.available()<6)throw new F;a.append(Bn.toAlphaNumericChar(r.readBits(6)))}if(u)for(let m=f;m<a.length();m++)a.charAt(m)==="%"&&(m<a.length()-1&&a.charAt(m+1)==="%"?a.deleteCharAt(m+1):a.setCharAt(m,""))}static decodeNumericSegment(r,a,l){for(;l>=3;){if(r.available()<10)throw new F;const u=r.readBits(10);if(u>=1e3)throw new F;a.append(Bn.toAlphaNumericChar(Math.floor(u/100))),a.append(Bn.toAlphaNumericChar(Math.floor(u/10)%10)),a.append(Bn.toAlphaNumericChar(u%10)),l-=3}if(l===2){if(r.available()<7)throw new F;const u=r.readBits(7);if(u>=100)throw new F;a.append(Bn.toAlphaNumericChar(Math.floor(u/10))),a.append(Bn.toAlphaNumericChar(u%10))}else if(l===1){if(r.available()<4)throw new F;const u=r.readBits(4);if(u>=10)throw new F;a.append(Bn.toAlphaNumericChar(u))}}static parseECIValue(r){const a=r.readBits(8);if((a&128)===0)return a&127;if((a&192)===128){const l=r.readBits(8);return(a&63)<<8&4294967295|l}if((a&224)===192){const l=r.readBits(16);return(a&31)<<16&4294967295|l}throw new F}}Bn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Bn.GB2312_SUBSET=1;class Uo{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const a=r[0];r[0]=r[2],r[2]=a}}class Ls{constructor(){this.rsDecoder=new $e(Ve.QR_CODE_FIELD_256)}decodeBooleanArray(r,a){return this.decodeBitMatrix(lt.parseFromBooleanArray(r),a)}decodeBitMatrix(r,a){const l=new gi(r);let u=null;try{return this.decodeBitMatrixParser(l,a)}catch(f){u=f}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const f=this.decodeBitMatrixParser(l,a);return f.setOther(new Uo(!0)),f}catch(f){throw u!==null?u:f}}decodeBitMatrixParser(r,a){const l=r.readVersion(),u=r.readFormatInformation().getErrorCorrectionLevel(),f=r.readCodewords(),m=Ua.getDataBlocks(f,l,u);let y=0;for(const I of m)y+=I.getNumDataCodewords();const _=new Uint8Array(y);let v=0;for(const I of m){const k=I.getCodewords(),L=I.getNumDataCodewords();this.correctErrors(k,L);for(let q=0;q<L;q++)_[v++]=k[q]}return Bn.decode(_,l,u,a)}correctErrors(r,a){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-a)}catch{throw new B}for(let u=0;u<a;u++)r[u]=l[u]}}class Ps extends We{constructor(r,a,l){super(r,a),this.estimatedModuleSize=l}aboutEquals(r,a,l){if(Math.abs(a-this.getY())<=r&&Math.abs(l-this.getX())<=r){const u=Math.abs(r-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(r,a,l){const u=(this.getX()+a)/2,f=(this.getY()+r)/2,m=(this.estimatedModuleSize+l)/2;return new Ps(u,f,m)}}class mi{constructor(r,a,l,u,f,m,y){this.image=r,this.startX=a,this.startY=l,this.width=u,this.height=f,this.moduleSize=m,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,a=this.height,l=this.width,u=r+l,f=this.startY+a/2,m=new Int32Array(3),y=this.image;for(let _=0;_<a;_++){const v=f+((_&1)===0?Math.floor((_+1)/2):-Math.floor((_+1)/2));m[0]=0,m[1]=0,m[2]=0;let I=r;for(;I<u&&!y.get(I,v);)I++;let k=0;for(;I<u;){if(y.get(I,v))if(k===1)m[1]++;else if(k===2){if(this.foundPatternCross(m)){const L=this.handlePossibleCenter(m,v,I);if(L!==null)return L}m[0]=m[2],m[1]=1,m[2]=0,k=1}else m[++k]++;else k===1&&k++,m[k]++;I++}if(this.foundPatternCross(m)){const L=this.handlePossibleCenter(m,v,u);if(L!==null)return L}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ae}static centerFromEnd(r,a){return a-r[2]-r[1]/2}foundPatternCross(r){const a=this.moduleSize,l=a/2;for(let u=0;u<3;u++)if(Math.abs(a-r[u])>=l)return!1;return!0}crossCheckVertical(r,a,l,u){const f=this.image,m=f.getHeight(),y=this.crossCheckStateCount;y[0]=0,y[1]=0,y[2]=0;let _=r;for(;_>=0&&f.get(a,_)&&y[1]<=l;)y[1]++,_--;if(_<0||y[1]>l)return NaN;for(;_>=0&&!f.get(a,_)&&y[0]<=l;)y[0]++,_--;if(y[0]>l)return NaN;for(_=r+1;_<m&&f.get(a,_)&&y[1]<=l;)y[1]++,_++;if(_===m||y[1]>l)return NaN;for(;_<m&&!f.get(a,_)&&y[2]<=l;)y[2]++,_++;if(y[2]>l)return NaN;const v=y[0]+y[1]+y[2];return 5*Math.abs(v-u)>=2*u?NaN:this.foundPatternCross(y)?mi.centerFromEnd(y,_):NaN}handlePossibleCenter(r,a,l){const u=r[0]+r[1]+r[2],f=mi.centerFromEnd(r,l),m=this.crossCheckVertical(a,f,2*r[1],u);if(!isNaN(m)){const y=(r[0]+r[1]+r[2])/3;for(const v of this.possibleCenters)if(v.aboutEquals(y,m,f))return v.combineEstimate(m,f,y);const _=new Ps(f,m,y);this.possibleCenters.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return null}}class na extends We{constructor(r,a,l,u){super(r,a),this.estimatedModuleSize=l,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,a,l){if(Math.abs(a-this.getY())<=r&&Math.abs(l-this.getX())<=r){const u=Math.abs(r-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(r,a,l){const u=this.count+1,f=(this.count*this.getX()+a)/u,m=(this.count*this.getY()+r)/u,y=(this.count*this.estimatedModuleSize+l)/u;return new na(f,m,y,u)}}class Di{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Zn{constructor(r,a){this.image=r,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=a}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const a=r!=null&&r.get(je.TRY_HARDER)!==void 0,l=r!=null&&r.get(je.PURE_BARCODE)!==void 0,u=this.image,f=u.getHeight(),m=u.getWidth();let y=Math.floor(3*f/(4*Zn.MAX_MODULES));(y<Zn.MIN_SKIP||a)&&(y=Zn.MIN_SKIP);let _=!1;const v=new Int32Array(5);for(let k=y-1;k<f&&!_;k+=y){v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0;let L=0;for(let q=0;q<m;q++)if(u.get(q,k))(L&1)===1&&L++,v[L]++;else if((L&1)===0)if(L===4)if(Zn.foundPatternCross(v)){if(this.handlePossibleCenter(v,k,q,l)===!0)if(y=2,this.hasSkipped===!0)_=this.haveMultiplyConfirmedCenters();else{const J=this.findRowSkip();J>v[2]&&(k+=J-v[2]-y,q=m-1)}else{v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,L=3;continue}L=0,v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0}else v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,L=3;else v[++L]++;else v[L]++;Zn.foundPatternCross(v)&&this.handlePossibleCenter(v,k,m,l)===!0&&(y=v[0],this.hasSkipped&&(_=this.haveMultiplyConfirmedCenters()))}const I=this.selectBestPatterns();return We.orderBestPatterns(I),new Di(I)}static centerFromEnd(r,a){return a-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let a=0;for(let f=0;f<5;f++){const m=r[f];if(m===0)return!1;a+=m}if(a<7)return!1;const l=a/7,u=l/2;return Math.abs(l-r[0])<u&&Math.abs(l-r[1])<u&&Math.abs(3*l-r[2])<3*u&&Math.abs(l-r[3])<u&&Math.abs(l-r[4])<u}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,a,l,u){const f=this.getCrossCheckStateCount();let m=0;const y=this.image;for(;r>=m&&a>=m&&y.get(a-m,r-m);)f[2]++,m++;if(r<m||a<m)return!1;for(;r>=m&&a>=m&&!y.get(a-m,r-m)&&f[1]<=l;)f[1]++,m++;if(r<m||a<m||f[1]>l)return!1;for(;r>=m&&a>=m&&y.get(a-m,r-m)&&f[0]<=l;)f[0]++,m++;if(f[0]>l)return!1;const _=y.getHeight(),v=y.getWidth();for(m=1;r+m<_&&a+m<v&&y.get(a+m,r+m);)f[2]++,m++;if(r+m>=_||a+m>=v)return!1;for(;r+m<_&&a+m<v&&!y.get(a+m,r+m)&&f[3]<l;)f[3]++,m++;if(r+m>=_||a+m>=v||f[3]>=l)return!1;for(;r+m<_&&a+m<v&&y.get(a+m,r+m)&&f[4]<l;)f[4]++,m++;if(f[4]>=l)return!1;const I=f[0]+f[1]+f[2]+f[3]+f[4];return Math.abs(I-u)<2*u&&Zn.foundPatternCross(f)}crossCheckVertical(r,a,l,u){const f=this.image,m=f.getHeight(),y=this.getCrossCheckStateCount();let _=r;for(;_>=0&&f.get(a,_);)y[2]++,_--;if(_<0)return NaN;for(;_>=0&&!f.get(a,_)&&y[1]<=l;)y[1]++,_--;if(_<0||y[1]>l)return NaN;for(;_>=0&&f.get(a,_)&&y[0]<=l;)y[0]++,_--;if(y[0]>l)return NaN;for(_=r+1;_<m&&f.get(a,_);)y[2]++,_++;if(_===m)return NaN;for(;_<m&&!f.get(a,_)&&y[3]<l;)y[3]++,_++;if(_===m||y[3]>=l)return NaN;for(;_<m&&f.get(a,_)&&y[4]<l;)y[4]++,_++;if(y[4]>=l)return NaN;const v=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(v-u)>=2*u?NaN:Zn.foundPatternCross(y)?Zn.centerFromEnd(y,_):NaN}crossCheckHorizontal(r,a,l,u){const f=this.image,m=f.getWidth(),y=this.getCrossCheckStateCount();let _=r;for(;_>=0&&f.get(_,a);)y[2]++,_--;if(_<0)return NaN;for(;_>=0&&!f.get(_,a)&&y[1]<=l;)y[1]++,_--;if(_<0||y[1]>l)return NaN;for(;_>=0&&f.get(_,a)&&y[0]<=l;)y[0]++,_--;if(y[0]>l)return NaN;for(_=r+1;_<m&&f.get(_,a);)y[2]++,_++;if(_===m)return NaN;for(;_<m&&!f.get(_,a)&&y[3]<l;)y[3]++,_++;if(_===m||y[3]>=l)return NaN;for(;_<m&&f.get(_,a)&&y[4]<l;)y[4]++,_++;if(y[4]>=l)return NaN;const v=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(v-u)>=u?NaN:Zn.foundPatternCross(y)?Zn.centerFromEnd(y,_):NaN}handlePossibleCenter(r,a,l,u){const f=r[0]+r[1]+r[2]+r[3]+r[4];let m=Zn.centerFromEnd(r,l),y=this.crossCheckVertical(a,Math.floor(m),r[2],f);if(!isNaN(y)&&(m=this.crossCheckHorizontal(Math.floor(m),Math.floor(y),r[2],f),!isNaN(m)&&(!u||this.crossCheckDiagonal(Math.floor(y),Math.floor(m),r[2],f)))){const _=f/7;let v=!1;const I=this.possibleCenters;for(let k=0,L=I.length;k<L;k++){const q=I[k];if(q.aboutEquals(_,y,m)){I[k]=q.combineEstimate(y,m,_),v=!0;break}}if(!v){const k=new na(m,y,_);I.push(k),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(k)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let a=null;for(const l of this.possibleCenters)if(l.getCount()>=Zn.CENTER_QUORUM)if(a==null)a=l;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-l.getX())-Math.abs(a.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,a=0;const l=this.possibleCenters.length;for(const m of this.possibleCenters)m.getCount()>=Zn.CENTER_QUORUM&&(r++,a+=m.getEstimatedModuleSize());if(r<3)return!1;const u=a/l;let f=0;for(const m of this.possibleCenters)f+=Math.abs(m.getEstimatedModuleSize()-u);return f<=.05*a}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new ae;const a=this.possibleCenters;let l;if(r>3){let u=0,f=0;for(const _ of this.possibleCenters){const v=_.getEstimatedModuleSize();u+=v,f+=v*v}l=u/r;let m=Math.sqrt(f/r-l*l);a.sort((_,v)=>{const I=Math.abs(v.getEstimatedModuleSize()-l),k=Math.abs(_.getEstimatedModuleSize()-l);return I<k?-1:I>k?1:0});const y=Math.max(.2*l,m);for(let _=0;_<a.length&&a.length>3;_++){const v=a[_];Math.abs(v.getEstimatedModuleSize()-l)>y&&(a.splice(_,1),_--)}}if(a.length>3){let u=0;for(const f of a)u+=f.getEstimatedModuleSize();l=u/a.length,a.sort((f,m)=>{if(m.getCount()===f.getCount()){const y=Math.abs(m.getEstimatedModuleSize()-l),_=Math.abs(f.getEstimatedModuleSize()-l);return y<_?1:y>_?-1:0}else return m.getCount()-f.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]}}Zn.CENTER_QUORUM=2,Zn.MIN_SKIP=3,Zn.MAX_MODULES=57;class pi{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(je.NEED_RESULT_POINT_CALLBACK);const l=new Zn(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(l)}processFinderPatternInfo(r){const a=r.getTopLeft(),l=r.getTopRight(),u=r.getBottomLeft(),f=this.calculateModuleSize(a,l,u);if(f<1)throw new ae("No pattern found in proccess finder.");const m=pi.computeDimension(a,l,u,f),y=Et.getProvisionalVersionForDimension(m),_=y.getDimensionForVersion()-7;let v=null;if(y.getAlignmentPatternCenters().length>0){const q=l.getX()-a.getX()+u.getX(),Z=l.getY()-a.getY()+u.getY(),J=1-3/_,ce=Math.floor(a.getX()+J*(q-a.getX())),Ee=Math.floor(a.getY()+J*(Z-a.getY()));for(let Xe=4;Xe<=16;Xe<<=1)try{v=this.findAlignmentInRegion(f,ce,Ee,Xe);break}catch(ze){if(!(ze instanceof ae))throw ze}}const I=pi.createTransform(a,l,u,v,m),k=pi.sampleGrid(this.image,I,m);let L;return v===null?L=[u,a,l]:L=[u,a,l,v],new Qn(k,L)}static createTransform(r,a,l,u,f){const m=f-3.5;let y,_,v,I;return u!==null?(y=u.getX(),_=u.getY(),v=m-3,I=v):(y=a.getX()-r.getX()+l.getX(),_=a.getY()-r.getY()+l.getY(),v=m,I=m),Gt.quadrilateralToQuadrilateral(3.5,3.5,m,3.5,v,I,3.5,m,r.getX(),r.getY(),a.getX(),a.getY(),y,_,l.getX(),l.getY())}static sampleGrid(r,a,l){return Rn.getInstance().sampleGridWithTransform(r,l,l,a)}static computeDimension(r,a,l,u){const f=et.round(We.distance(r,a)/u),m=et.round(We.distance(r,l)/u);let y=Math.floor((f+m)/2)+7;switch(y&3){case 0:y++;break;case 2:y--;break;case 3:throw new ae("Dimensions could be not found.")}return y}calculateModuleSize(r,a,l){return(this.calculateModuleSizeOneWay(r,a)+this.calculateModuleSizeOneWay(r,l))/2}calculateModuleSizeOneWay(r,a){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(a.getX()),Math.floor(a.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(l)?u/7:isNaN(u)?l/7:(l+u)/14}sizeOfBlackWhiteBlackRunBothWays(r,a,l,u){let f=this.sizeOfBlackWhiteBlackRun(r,a,l,u),m=1,y=r-(l-r);y<0?(m=r/(r-y),y=0):y>=this.image.getWidth()&&(m=(this.image.getWidth()-1-r)/(y-r),y=this.image.getWidth()-1);let _=Math.floor(a-(u-a)*m);return m=1,_<0?(m=a/(a-_),_=0):_>=this.image.getHeight()&&(m=(this.image.getHeight()-1-a)/(_-a),_=this.image.getHeight()-1),y=Math.floor(r+(y-r)*m),f+=this.sizeOfBlackWhiteBlackRun(r,a,y,_),f-1}sizeOfBlackWhiteBlackRun(r,a,l,u){const f=Math.abs(u-a)>Math.abs(l-r);if(f){let q=r;r=a,a=q,q=l,l=u,u=q}const m=Math.abs(l-r),y=Math.abs(u-a);let _=-m/2;const v=r<l?1:-1,I=a<u?1:-1;let k=0;const L=l+v;for(let q=r,Z=a;q!==L;q+=v){const J=f?Z:q,ce=f?q:Z;if(k===1===this.image.get(J,ce)){if(k===2)return et.distance(q,Z,r,a);k++}if(_+=y,_>0){if(Z===u)break;Z+=I,_-=m}}return k===2?et.distance(l+v,u,r,a):NaN}findAlignmentInRegion(r,a,l,u){const f=Math.floor(u*r),m=Math.max(0,a-f),y=Math.min(this.image.getWidth()-1,a+f);if(y-m<r*3)throw new ae("Alignment top exceeds estimated module size.");const _=Math.max(0,l-f),v=Math.min(this.image.getHeight()-1,l+f);if(v-_<r*3)throw new ae("Alignment bottom exceeds estimated module size.");return new mi(this.image,m,_,y-m,v-_,r,this.resultPointCallback).find()}}class yi{constructor(){this.decoder=new Ls}getDecoder(){return this.decoder}decode(r,a){let l,u;if(a!=null&&a.get(je.PURE_BARCODE)!==void 0){const _=yi.extractPureBits(r.getBlackMatrix());l=this.decoder.decodeBitMatrix(_,a),u=yi.NO_POINTS}else{const _=new pi(r.getBlackMatrix()).detect(a);l=this.decoder.decodeBitMatrix(_.getBits(),a),u=_.getPoints()}l.getOther()instanceof Uo&&l.getOther().applyMirroredCorrection(u);const f=new Te(l.getText(),l.getRawBytes(),void 0,u,_e.QR_CODE,void 0),m=l.getByteSegments();m!==null&&f.putMetadata(_t.BYTE_SEGMENTS,m);const y=l.getECLevel();return y!==null&&f.putMetadata(_t.ERROR_CORRECTION_LEVEL,y),l.hasStructuredAppend()&&(f.putMetadata(_t.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),f.putMetadata(_t.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),f}reset(){}static extractPureBits(r){const a=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(a===null||l===null)throw new ae;const u=this.moduleSize(a,r);let f=a[1],m=l[1],y=a[0],_=l[0];if(y>=_||f>=m)throw new ae;if(m-f!==_-y&&(_=y+(m-f),_>=r.getWidth()))throw new ae;const v=Math.round((_-y+1)/u),I=Math.round((m-f+1)/u);if(v<=0||I<=0)throw new ae;if(I!==v)throw new ae;const k=Math.floor(u/2);f+=k,y+=k;const L=y+Math.floor((v-1)*u)-_;if(L>0){if(L>k)throw new ae;y-=L}const q=f+Math.floor((I-1)*u)-m;if(q>0){if(q>k)throw new ae;f-=q}const Z=new lt(v,I);for(let J=0;J<I;J++){const ce=f+Math.floor(J*u);for(let Ee=0;Ee<v;Ee++)r.get(y+Math.floor(Ee*u),ce)&&Z.set(Ee,J)}return Z}static moduleSize(r,a){const l=a.getHeight(),u=a.getWidth();let f=r[0],m=r[1],y=!0,_=0;for(;f<u&&m<l;){if(y!==a.get(f,m)){if(++_===5)break;y=!y}f++,m++}if(f===u||m===l)throw new ae;return(f-r[0])/7}}yi.NO_POINTS=new Array;class Nt{PDF417Common(){}static getBitCountSum(r){return et.sum(r)}static toIntArray(r){if(r==null||!r.length)return Nt.EMPTY_INT_ARRAY;const a=new Int32Array(r.length);let l=0;for(const u of r)a[l++]=u;return a}static getCodeword(r){const a=Le.binarySearch(Nt.SYMBOL_TABLE,r&262143);return a<0?-1:(Nt.CODEWORD_TABLE[a]-1)%Nt.NUMBER_OF_CODEWORDS}}Nt.NUMBER_OF_CODEWORDS=929,Nt.MAX_CODEWORDS_IN_BARCODE=Nt.NUMBER_OF_CODEWORDS-1,Nt.MIN_ROWS_IN_BARCODE=3,Nt.MAX_ROWS_IN_BARCODE=90,Nt.MODULES_IN_CODEWORD=17,Nt.MODULES_IN_STOP_PATTERN=18,Nt.BARS_IN_MODULE=8,Nt.EMPTY_INT_ARRAY=new Int32Array([]),Nt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Nt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Bs{constructor(r,a){this.bits=r,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class Lt{static detectMultiple(r,a,l){let u=r.getBlackMatrix(),f=Lt.detect(l,u);return f.length||(u=u.clone(),u.rotate180(),f=Lt.detect(l,u)),new Bs(u,f)}static detect(r,a){const l=new Array;let u=0,f=0,m=!1;for(;u<a.getHeight();){const y=Lt.findVertices(a,u,f);if(y[0]==null&&y[3]==null){if(!m)break;m=!1,f=0;for(const _ of l)_[1]!=null&&(u=Math.trunc(Math.max(u,_[1].getY()))),_[3]!=null&&(u=Math.max(u,Math.trunc(_[3].getY())));u+=Lt.ROW_STEP;continue}if(m=!0,l.push(y),!r)break;y[2]!=null?(f=Math.trunc(y[2].getX()),u=Math.trunc(y[2].getY())):(f=Math.trunc(y[4].getX()),u=Math.trunc(y[4].getY()))}return l}static findVertices(r,a,l){const u=r.getHeight(),f=r.getWidth(),m=new Array(8);return Lt.copyToResult(m,Lt.findRowsWithPattern(r,u,f,a,l,Lt.START_PATTERN),Lt.INDEXES_START_PATTERN),m[4]!=null&&(l=Math.trunc(m[4].getX()),a=Math.trunc(m[4].getY())),Lt.copyToResult(m,Lt.findRowsWithPattern(r,u,f,a,l,Lt.STOP_PATTERN),Lt.INDEXES_STOP_PATTERN),m}static copyToResult(r,a,l){for(let u=0;u<l.length;u++)r[l[u]]=a[u]}static findRowsWithPattern(r,a,l,u,f,m){const y=new Array(4);let _=!1;const v=new Int32Array(m.length);for(;u<a;u+=Lt.ROW_STEP){let k=Lt.findGuardPattern(r,f,u,l,!1,m,v);if(k!=null){for(;u>0;){const L=Lt.findGuardPattern(r,f,--u,l,!1,m,v);if(L!=null)k=L;else{u++;break}}y[0]=new We(k[0],u),y[1]=new We(k[1],u),_=!0;break}}let I=u+1;if(_){let k=0,L=Int32Array.from([Math.trunc(y[0].getX()),Math.trunc(y[1].getX())]);for(;I<a;I++){const q=Lt.findGuardPattern(r,L[0],I,l,!1,m,v);if(q!=null&&Math.abs(L[0]-q[0])<Lt.MAX_PATTERN_DRIFT&&Math.abs(L[1]-q[1])<Lt.MAX_PATTERN_DRIFT)L=q,k=0;else{if(k>Lt.SKIPPED_ROW_COUNT_MAX)break;k++}}I-=k+1,y[2]=new We(L[0],I),y[3]=new We(L[1],I)}return I-u<Lt.BARCODE_MIN_HEIGHT&&Le.fill(y,null),y}static findGuardPattern(r,a,l,u,f,m,y){Le.fillWithin(y,0,y.length,0);let _=a,v=0;for(;r.get(_,l)&&_>0&&v++<Lt.MAX_PIXEL_DRIFT;)_--;let I=_,k=0,L=m.length;for(let q=f;I<u;I++)if(r.get(I,l)!==q)y[k]++;else{if(k===L-1){if(Lt.patternMatchVariance(y,m,Lt.MAX_INDIVIDUAL_VARIANCE)<Lt.MAX_AVG_VARIANCE)return new Int32Array([_,I]);_+=y[0]+y[1],ne.arraycopy(y,2,y,0,k-1),y[k-1]=0,y[k]=0,k--}else k++;y[k]=1,q=!q}return k===L-1&&Lt.patternMatchVariance(y,m,Lt.MAX_INDIVIDUAL_VARIANCE)<Lt.MAX_AVG_VARIANCE?new Int32Array([_,I-1]):null}static patternMatchVariance(r,a,l){let u=r.length,f=0,m=0;for(let v=0;v<u;v++)f+=r[v],m+=a[v];if(f<m)return 1/0;let y=f/m;l*=y;let _=0;for(let v=0;v<u;v++){let I=r[v],k=a[v]*y,L=I>k?I-k:k-I;if(L>l)return 1/0;_+=L}return _/f}}Lt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Lt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Lt.MAX_AVG_VARIANCE=.42,Lt.MAX_INDIVIDUAL_VARIANCE=.8,Lt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Lt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Lt.MAX_PIXEL_DRIFT=3,Lt.MAX_PATTERN_DRIFT=5,Lt.SKIPPED_ROW_COUNT_MAX=25,Lt.ROW_STEP=5,Lt.BARCODE_MIN_HEIGHT=10;class Vn{constructor(r,a){if(a.length===0)throw new R;this.field=r;let l=a.length;if(l>1&&a[0]===0){let u=1;for(;u<l&&a[u]===0;)u++;u===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-u),ne.arraycopy(a,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let u=0;for(let f of this.coefficients)u=this.field.add(u,f);return u}let a=this.coefficients[0],l=this.coefficients.length;for(let u=1;u<l;u++)a=this.field.add(this.field.multiply(r,a),this.coefficients[u]);return a}add(r){if(!this.field.equals(r.field))throw new R("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let a=this.coefficients,l=r.coefficients;if(a.length>l.length){let m=a;a=l,l=m}let u=new Int32Array(l.length),f=l.length-a.length;ne.arraycopy(l,0,u,0,f);for(let m=f;m<l.length;m++)u[m]=this.field.add(a[m-f],l[m]);return new Vn(this.field,u)}subtract(r){if(!this.field.equals(r.field))throw new R("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof Vn?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new R("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new Vn(this.field,new Int32Array([0]));let a=this.coefficients,l=a.length,u=r.coefficients,f=u.length,m=new Int32Array(l+f-1);for(let y=0;y<l;y++){let _=a[y];for(let v=0;v<f;v++)m[y+v]=this.field.add(m[y+v],this.field.multiply(_,u[v]))}return new Vn(this.field,m)}negative(){let r=this.coefficients.length,a=new Int32Array(r);for(let l=0;l<r;l++)a[l]=this.field.subtract(0,this.coefficients[l]);return new Vn(this.field,a)}multiplyScalar(r){if(r===0)return new Vn(this.field,new Int32Array([0]));if(r===1)return this;let a=this.coefficients.length,l=new Int32Array(a);for(let u=0;u<a;u++)l[u]=this.field.multiply(this.coefficients[u],r);return new Vn(this.field,l)}multiplyByMonomial(r,a){if(r<0)throw new R;if(a===0)return new Vn(this.field,new Int32Array([0]));let l=this.coefficients.length,u=new Int32Array(l+r);for(let f=0;f<l;f++)u[f]=this.field.multiply(this.coefficients[f],a);return new Vn(this.field,u)}toString(){let r=new G;for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);l!==0&&(l<0?(r.append(" - "),l=-l):r.length()>0&&r.append(" + "),(a===0||l!==1)&&r.append(l),a!==0&&(a===1?r.append("x"):(r.append("x^"),r.append(a))))}return r.toString()}}class ra{add(r,a){return(r+a)%this.modulus}subtract(r,a){return(this.modulus+r-a)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new R;return this.logTable[r]}inverse(r){if(r===0)throw new Be;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,a){return r===0||a===0?0:this.expTable[(this.logTable[r]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class On extends ra{constructor(r,a){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let l=1;for(let u=0;u<r;u++)this.expTable[u]=l,l=l*a%r;for(let u=0;u<r-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new Vn(this,new Int32Array([0])),this.one=new Vn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,a){if(r<0)throw new R;if(a===0)return this.zero;let l=new Int32Array(r+1);return l[0]=a,new Vn(this,l)}}On.PDF417_GF=new On(Nt.NUMBER_OF_CODEWORDS,3);class qi{constructor(){this.field=On.PDF417_GF}decode(r,a,l){let u=new Vn(this.field,r),f=new Int32Array(a),m=!1;for(let Z=a;Z>0;Z--){let J=u.evaluateAt(this.field.exp(Z));f[a-Z]=J,J!==0&&(m=!0)}if(!m)return 0;let y=this.field.getOne();if(l!=null)for(const Z of l){let J=this.field.exp(r.length-1-Z),ce=new Vn(this.field,new Int32Array([this.field.subtract(0,J),1]));y=y.multiply(ce)}let _=new Vn(this.field,f),v=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),_,a),I=v[0],k=v[1],L=this.findErrorLocations(I),q=this.findErrorMagnitudes(k,I,L);for(let Z=0;Z<L.length;Z++){let J=r.length-1-this.field.log(L[Z]);if(J<0)throw B.getChecksumInstance();r[J]=this.field.subtract(r[J],q[Z])}return L.length}runEuclideanAlgorithm(r,a,l){if(r.getDegree()<a.getDegree()){let L=r;r=a,a=L}let u=r,f=a,m=this.field.getZero(),y=this.field.getOne();for(;f.getDegree()>=Math.round(l/2);){let L=u,q=m;if(u=f,m=y,u.isZero())throw B.getChecksumInstance();f=L;let Z=this.field.getZero(),J=u.getCoefficient(u.getDegree()),ce=this.field.inverse(J);for(;f.getDegree()>=u.getDegree()&&!f.isZero();){let Ee=f.getDegree()-u.getDegree(),Xe=this.field.multiply(f.getCoefficient(f.getDegree()),ce);Z=Z.add(this.field.buildMonomial(Ee,Xe)),f=f.subtract(u.multiplyByMonomial(Ee,Xe))}y=Z.multiply(m).subtract(q).negative()}let _=y.getCoefficient(0);if(_===0)throw B.getChecksumInstance();let v=this.field.inverse(_),I=y.multiply(v),k=f.multiply(v);return[I,k]}findErrorLocations(r){let a=r.getDegree(),l=new Int32Array(a),u=0;for(let f=1;f<this.field.getSize()&&u<a;f++)r.evaluateAt(f)===0&&(l[u]=this.field.inverse(f),u++);if(u!==a)throw B.getChecksumInstance();return l}findErrorMagnitudes(r,a,l){let u=a.getDegree(),f=new Int32Array(u);for(let v=1;v<=u;v++)f[u-v]=this.field.multiply(v,a.getCoefficient(v));let m=new Vn(this.field,f),y=l.length,_=new Int32Array(y);for(let v=0;v<y;v++){let I=this.field.inverse(l[v]),k=this.field.subtract(0,r.evaluateAt(I)),L=this.field.inverse(m.evaluateAt(I));_[v]=this.field.multiply(k,L)}return _}}class Xi{constructor(r,a,l,u,f){r instanceof Xi?this.constructor_2(r):this.constructor_1(r,a,l,u,f)}constructor_1(r,a,l,u,f){const m=a==null||l==null,y=u==null||f==null;if(m&&y)throw new ae;m?(a=new We(0,u.getY()),l=new We(0,f.getY())):y&&(u=new We(r.getWidth()-1,a.getY()),f=new We(r.getWidth()-1,l.getY())),this.image=r,this.topLeft=a,this.bottomLeft=l,this.topRight=u,this.bottomRight=f,this.minX=Math.trunc(Math.min(a.getX(),l.getX())),this.maxX=Math.trunc(Math.max(u.getX(),f.getX())),this.minY=Math.trunc(Math.min(a.getY(),u.getY())),this.maxY=Math.trunc(Math.max(l.getY(),f.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,a){return r==null?a:a==null?r:new Xi(r.image,r.topLeft,r.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(r,a,l){let u=this.topLeft,f=this.bottomLeft,m=this.topRight,y=this.bottomRight;if(r>0){let _=l?this.topLeft:this.topRight,v=Math.trunc(_.getY()-r);v<0&&(v=0);let I=new We(_.getX(),v);l?u=I:m=I}if(a>0){let _=l?this.bottomLeft:this.bottomRight,v=Math.trunc(_.getY()+a);v>=this.image.getHeight()&&(v=this.image.getHeight()-1);let I=new We(_.getX(),v);l?f=I:y=I}return new Xi(this.image,u,f,m,y)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ia{constructor(r,a,l,u){this.columnCount=r,this.errorCorrectionLevel=u,this.rowCountUpperPart=a,this.rowCountLowerPart=l,this.rowCount=a+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class vs{constructor(){this.buffer=""}static form(r,a){let l=-1;function u(m,y,_,v,I,k){if(m==="%%")return"%";if(a[++l]===void 0)return;m=v?parseInt(v.substr(1)):void 0;let L=I?parseInt(I.substr(1)):void 0,q;switch(k){case"s":q=a[l];break;case"c":q=a[l][0];break;case"f":q=parseFloat(a[l]).toFixed(m);break;case"p":q=parseFloat(a[l]).toPrecision(m);break;case"e":q=parseFloat(a[l]).toExponential(m);break;case"x":q=parseInt(a[l]).toString(L||16);break;case"d":q=parseFloat(parseInt(a[l],L||10).toPrecision(m)).toFixed(0);break}q=typeof q=="object"?JSON.stringify(q):(+q).toString(L);let Z=parseInt(_),J=_&&_[0]+""=="0"?"0":" ";for(;q.length<Z;)q=y!==void 0?q+J:J+q;return q}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(f,u)}format(r,...a){this.buffer+=vs.form(r,a)}toString(){return this.buffer}}class Yi{constructor(r){this.boundingBox=new Xi(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let a=this.getCodeword(r);if(a!=null)return a;for(let l=1;l<Yi.MAX_NEARBY_DISTANCE;l++){let u=this.imageRowToCodewordIndex(r)-l;if(u>=0&&(a=this.codewords[u],a!=null)||(u=this.imageRowToCodewordIndex(r)+l,u<this.codewords.length&&(a=this.codewords[u],a!=null)))return a}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,a){this.codewords[this.imageRowToCodewordIndex(r)]=a}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new vs;let a=0;for(const l of this.codewords){if(l==null){r.format("%3d:    |   %n",a++);continue}r.format("%3d: %3d|%3d%n",a++,l.getRowNumber(),l.getValue())}return r.toString()}}Yi.MAX_NEARBY_DISTANCE=5;class bi{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let a=this.values.get(r);a==null&&(a=0),a++,this.values.set(r,a)}getValue(){let r=-1,a=new Array;for(const[l,u]of this.values.entries()){const f={getKey:()=>l,getValue:()=>u};f.getValue()>r?(r=f.getValue(),a=[],a.push(f.getKey())):f.getValue()===r&&a.push(f.getKey())}return Nt.toIntArray(a)}getConfidence(r){return this.values.get(r)}}class Mi extends Yi{constructor(r,a){super(r),this._isLeft=a}setRowNumbers(){for(let r of this.getCodewords())r?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,r);let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),f=this._isLeft?l.getBottomLeft():l.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=this.imageRowToCodewordIndex(Math.trunc(f.getY())),_=-1,v=1,I=0;for(let k=m;k<y;k++){if(a[k]==null)continue;let L=a[k],q=L.getRowNumber()-_;if(q===0)I++;else if(q===1)v=Math.max(v,I),I=1,_=L.getRowNumber();else if(q<0||L.getRowNumber()>=r.getRowCount()||q>k)a[k]=null;else{let Z;v>2?Z=(v-2)*q:Z=q;let J=Z>=k;for(let ce=1;ce<=Z&&!J;ce++)J=a[k-ce]!=null;J?a[k]=null:(_=L.getRowNumber(),I=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let a=new Int32Array(r.getRowCount());for(let l of this.getCodewords())if(l!=null){let u=l.getRowNumber();if(u>=a.length)continue;a[u]++}return a}adjustIncompleteIndicatorColumnRowNumbers(r){let a=this.getBoundingBox(),l=this._isLeft?a.getTopLeft():a.getTopRight(),u=this._isLeft?a.getBottomLeft():a.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=this.getCodewords(),_=-1;for(let v=f;v<m;v++){if(y[v]==null)continue;let I=y[v];I.setRowNumberAsRowIndicatorColumn();let k=I.getRowNumber()-_;k===0||(k===1?_=I.getRowNumber():I.getRowNumber()>=r.getRowCount()?y[v]=null:_=I.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),a=new bi,l=new bi,u=new bi,f=new bi;for(let y of r){if(y==null)continue;y.setRowNumberAsRowIndicatorColumn();let _=y.getValue()%30,v=y.getRowNumber();switch(this._isLeft||(v+=2),v%3){case 0:l.setValue(_*3+1);break;case 1:f.setValue(_/3),u.setValue(_%3);break;case 2:a.setValue(_+1);break}}if(a.getValue().length===0||l.getValue().length===0||u.getValue().length===0||f.getValue().length===0||a.getValue()[0]<1||l.getValue()[0]+u.getValue()[0]<Nt.MIN_ROWS_IN_BARCODE||l.getValue()[0]+u.getValue()[0]>Nt.MAX_ROWS_IN_BARCODE)return null;let m=new ia(a.getValue()[0],l.getValue()[0],u.getValue()[0],f.getValue()[0]);return this.removeIncorrectCodewords(r,m),m}removeIncorrectCodewords(r,a){for(let l=0;l<r.length;l++){let u=r[l];if(r[l]==null)continue;let f=u.getValue()%30,m=u.getRowNumber();if(m>a.getRowCount()){r[l]=null;continue}switch(this._isLeft||(m+=2),m%3){case 0:f*3+1!==a.getRowCountUpperPart()&&(r[l]=null);break;case 1:(Math.trunc(f/3)!==a.getErrorCorrectionLevel()||f%3!==a.getRowCountLowerPart())&&(r[l]=null);break;case 2:f+1!==a.getColumnCount()&&(r[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Er{constructor(r,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=Nt.MAX_CODEWORDS_IN_BARCODE,a;do a=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let l=this.detectionResultColumns[a].getCodewords();for(let u=0;u<l.length;u++)l[u]!=null&&(l[u].hasValidRowNumber()||this.adjustRowNumbers(a,u,l))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<r.length;l++)if(r[l]!=null&&a[l]!=null&&r[l].getRowNumber()===a[l].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let f=this.detectionResultColumns[u].getCodewords()[l];f!=null&&(f.setRowNumber(r[l].getRowNumber()),f.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let u=a[l].getRowNumber(),f=0;for(let m=this.barcodeColumnCount+1;m>0&&f<this.ADJUST_ROW_NUMBER_SKIP;m--){let y=this.detectionResultColumns[m].getCodewords()[l];y!=null&&(f=Er.adjustRowNumberIfValid(u,f,y),y.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,a=this.detectionResultColumns[0].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let u=a[l].getRowNumber(),f=0;for(let m=1;m<this.barcodeColumnCount+1&&f<this.ADJUST_ROW_NUMBER_SKIP;m++){let y=this.detectionResultColumns[m].getCodewords()[l];y!=null&&(f=Er.adjustRowNumberIfValid(u,f,y),y.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,a,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(r)?(l.setRowNumber(r),a=0):++a),a}adjustRowNumbers(r,a,l){if(!this.detectionResultColumns[r-1])return;let u=l[a],f=this.detectionResultColumns[r-1].getCodewords(),m=f;this.detectionResultColumns[r+1]!=null&&(m=this.detectionResultColumns[r+1].getCodewords());let y=new Array(14);y[2]=f[a],y[3]=m[a],a>0&&(y[0]=l[a-1],y[4]=f[a-1],y[5]=m[a-1]),a>1&&(y[8]=l[a-2],y[10]=f[a-2],y[11]=m[a-2]),a<l.length-1&&(y[1]=l[a+1],y[6]=f[a+1],y[7]=m[a+1]),a<l.length-2&&(y[9]=l[a+2],y[12]=f[a+2],y[13]=m[a+2]);for(let _ of y)if(Er.adjustRowNumber(u,_))return}static adjustRowNumber(r,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===r.getBucket()?(r.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,a){this.detectionResultColumns[r]=a}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new vs;for(let l=0;l<r.getCodewords().length;l++){a.format("CW %3d:",l);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){a.format("    |   ");continue}let f=this.detectionResultColumns[u].getCodewords()[l];if(f==null){a.format("    |   ");continue}a.format(" %3d|%3d",f.getRowNumber(),f.getValue())}a.format("%n")}return a.toString()}}class vi{constructor(r,a,l,u){this.rowNumber=vi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(a),this.bucket=Math.trunc(l),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==vi.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}vi.BARCODE_ROW_UNKNOWN=-1;class sr{static initialize(){for(let r=0;r<Nt.SYMBOL_TABLE.length;r++){let a=Nt.SYMBOL_TABLE[r],l=a&1;for(let u=0;u<Nt.BARS_IN_MODULE;u++){let f=0;for(;(a&1)===l;)f+=1,a>>=1;l=a&1,sr.RATIOS_TABLE[r]||(sr.RATIOS_TABLE[r]=new Array(Nt.BARS_IN_MODULE)),sr.RATIOS_TABLE[r][Nt.BARS_IN_MODULE-u-1]=Math.fround(f/Nt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let a=sr.getDecodedCodewordValue(sr.sampleBitCounts(r));return a!==-1?a:sr.getClosestDecodedValue(r)}static sampleBitCounts(r){let a=et.sum(r),l=new Int32Array(Nt.BARS_IN_MODULE),u=0,f=0;for(let m=0;m<Nt.MODULES_IN_CODEWORD;m++){let y=a/(2*Nt.MODULES_IN_CODEWORD)+m*a/Nt.MODULES_IN_CODEWORD;f+r[u]<=y&&(f+=r[u],u++),l[u]++}return l}static getDecodedCodewordValue(r){let a=sr.getBitValue(r);return Nt.getCodeword(a)===-1?-1:a}static getBitValue(r){let a=0;for(let l=0;l<r.length;l++)for(let u=0;u<r[l];u++)a=a<<1|(l%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(r){let a=et.sum(r),l=new Array(Nt.BARS_IN_MODULE);if(a>1)for(let m=0;m<l.length;m++)l[m]=Math.fround(r[m]/a);let u=Vt.MAX_VALUE,f=-1;this.bSymbolTableReady||sr.initialize();for(let m=0;m<sr.RATIOS_TABLE.length;m++){let y=0,_=sr.RATIOS_TABLE[m];for(let v=0;v<Nt.BARS_IN_MODULE;v++){let I=Math.fround(_[v]-l[v]);if(y+=Math.fround(I*I),y>=u)break}y<u&&(u=y,f=Nt.SYMBOL_TABLE[m])}return f}}sr.bSymbolTableReady=!1,sr.RATIOS_TABLE=new Array(Nt.SYMBOL_TABLE.length).map(M=>new Array(Nt.BARS_IN_MODULE));class Ts{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class Fa{static parseLong(r,a=void 0){return parseInt(r,a)}}class Cs extends w{}Cs.kind="NullPointerException";class ja{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,a,l){if(r==null)throw new Cs;if(a<0||a>r.length||l<0||a+l>r.length||a+l<0)throw new se;if(l===0)return;for(let u=0;u<l;u++)this.write(r[a+u])}flush(){}close(){}}class ls extends w{}class za extends ja{constructor(r=32){if(super(),this.count=0,r<0)throw new R("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let l=this.buf.length<<1;if(l-r<0&&(l=r),l<0){if(r<0)throw new ls;l=he.MAX_VALUE}this.buf=Le.copyOfUint8Array(this.buf,l)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,a,l){if(a<0||a>r.length||l<0||a+l-r.length>0)throw new se;this.ensureCapacity(this.count+l),ne.arraycopy(r,a,this.buf,this.count,l),this.count+=l}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return Le.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var Sn;(function(M){M[M.ALPHA=0]="ALPHA",M[M.LOWER=1]="LOWER",M[M.MIXED=2]="MIXED",M[M.PUNCT=3]="PUNCT",M[M.ALPHA_SHIFT=4]="ALPHA_SHIFT",M[M.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Sn||(Sn={}));function Vs(){if(typeof window<"u")return window.BigInt||null;if(typeof Jh<"u")return Jh.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let sa;function Wi(M){if(typeof sa>"u"&&(sa=Vs()),sa===null)throw new Error("BigInt is not supported!");return sa(M)}function aa(){let M=[];M[0]=Wi(1);let r=Wi(900);M[1]=r;for(let a=2;a<16;a++)M[a]=M[a-1]*r;return M}class xe{static decode(r,a){let l=new G(""),u=U.ISO8859_1;l.enableDecoding(u);let f=1,m=r[f++],y=new Ts;for(;f<r[0];){switch(m){case xe.TEXT_COMPACTION_MODE_LATCH:f=xe.textCompaction(r,f,l);break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:f=xe.byteCompaction(m,r,u,f,l);break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[f++]);break;case xe.NUMERIC_COMPACTION_MODE_LATCH:f=xe.numericCompaction(r,f,l);break;case xe.ECI_CHARSET:U.getCharacterSetECIByValue(r[f++]);break;case xe.ECI_GENERAL_PURPOSE:f+=2;break;case xe.ECI_USER_DEFINED:f++;break;case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:f=xe.decodeMacroBlock(r,f,y);break;case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:throw new F;default:f--,f=xe.textCompaction(r,f,l);break}if(f<r.length)m=r[f++];else throw F.getFormatInstance()}if(l.length()===0)throw F.getFormatInstance();let _=new It(null,l.toString(),null,a);return _.setOther(y),_}static decodeMacroBlock(r,a,l){if(a+xe.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw F.getFormatInstance();let u=new Int32Array(xe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let y=0;y<xe.NUMBER_OF_SEQUENCE_CODEWORDS;y++,a++)u[y]=r[a];l.setSegmentIndex(he.parseInt(xe.decodeBase900toBase10(u,xe.NUMBER_OF_SEQUENCE_CODEWORDS)));let f=new G;a=xe.textCompaction(r,a,f),l.setFileId(f.toString());let m=-1;for(r[a]===xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(m=a+1);a<r[0];)switch(r[a]){case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,r[a]){case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let y=new G;a=xe.textCompaction(r,a+1,y),l.setFileName(y.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let _=new G;a=xe.textCompaction(r,a+1,_),l.setSender(_.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let v=new G;a=xe.textCompaction(r,a+1,v),l.setAddressee(v.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let I=new G;a=xe.numericCompaction(r,a+1,I),l.setSegmentCount(he.parseInt(I.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let k=new G;a=xe.numericCompaction(r,a+1,k),l.setTimestamp(Fa.parseLong(k.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let L=new G;a=xe.numericCompaction(r,a+1,L),l.setChecksum(he.parseInt(L.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let q=new G;a=xe.numericCompaction(r,a+1,q),l.setFileSize(Fa.parseLong(q.toString()));break;default:throw F.getFormatInstance()}break;case xe.MACRO_PDF417_TERMINATOR:a++,l.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(m!==-1){let y=a-m;l.isLastSegment()&&y--,l.setOptionalData(Le.copyOfRange(r,m,m+y))}return a}static textCompaction(r,a,l){let u=new Int32Array((r[0]-a)*2),f=new Int32Array((r[0]-a)*2),m=0,y=!1;for(;a<r[0]&&!y;){let _=r[a++];if(_<xe.TEXT_COMPACTION_MODE_LATCH)u[m]=_/30,u[m+1]=_%30,m+=2;else switch(_){case xe.TEXT_COMPACTION_MODE_LATCH:u[m++]=xe.TEXT_COMPACTION_MODE_LATCH;break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:a--,y=!0;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[m]=xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,_=r[a++],f[m]=_,m++;break}}return xe.decodeTextCompaction(u,f,m,l),a}static decodeTextCompaction(r,a,l,u){let f=Sn.ALPHA,m=Sn.ALPHA,y=0;for(;y<l;){let _=r[y],v="";switch(f){case Sn.ALPHA:if(_<26)v=String.fromCharCode(65+_);else switch(_){case 26:v=" ";break;case xe.LL:f=Sn.LOWER;break;case xe.ML:f=Sn.MIXED;break;case xe.PS:m=f,f=Sn.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:f=Sn.ALPHA;break}break;case Sn.LOWER:if(_<26)v=String.fromCharCode(97+_);else switch(_){case 26:v=" ";break;case xe.AS:m=f,f=Sn.ALPHA_SHIFT;break;case xe.ML:f=Sn.MIXED;break;case xe.PS:m=f,f=Sn.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:f=Sn.ALPHA;break}break;case Sn.MIXED:if(_<xe.PL)v=xe.MIXED_CHARS[_];else switch(_){case xe.PL:f=Sn.PUNCT;break;case 26:v=" ";break;case xe.LL:f=Sn.LOWER;break;case xe.AL:f=Sn.ALPHA;break;case xe.PS:m=f,f=Sn.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:f=Sn.ALPHA;break}break;case Sn.PUNCT:if(_<xe.PAL)v=xe.PUNCT_CHARS[_];else switch(_){case xe.PAL:f=Sn.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:f=Sn.ALPHA;break}break;case Sn.ALPHA_SHIFT:if(f=m,_<26)v=String.fromCharCode(65+_);else switch(_){case 26:v=" ";break;case xe.TEXT_COMPACTION_MODE_LATCH:f=Sn.ALPHA;break}break;case Sn.PUNCT_SHIFT:if(f=m,_<xe.PAL)v=xe.PUNCT_CHARS[_];else switch(_){case xe.PAL:f=Sn.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:f=Sn.ALPHA;break}break}v!==""&&u.append(v),y++}}static byteCompaction(r,a,l,u,f){let m=new za,y=0,_=0,v=!1;switch(r){case xe.BYTE_COMPACTION_MODE_LATCH:let I=new Int32Array(6),k=a[u++];for(;u<a[0]&&!v;)switch(I[y++]=k,_=900*_+k,k=a[u++],k){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:u--,v=!0;break;default:if(y%5===0&&y>0){for(let L=0;L<6;++L)m.write(Number(Wi(_)>>Wi(8*(5-L))));_=0,y=0}break}u===a[0]&&k<xe.TEXT_COMPACTION_MODE_LATCH&&(I[y++]=k);for(let L=0;L<y;L++)m.write(I[L]);break;case xe.BYTE_COMPACTION_MODE_LATCH_6:for(;u<a[0]&&!v;){let L=a[u++];if(L<xe.TEXT_COMPACTION_MODE_LATCH)y++,_=900*_+L;else switch(L){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:u--,v=!0;break}if(y%5===0&&y>0){for(let q=0;q<6;++q)m.write(Number(Wi(_)>>Wi(8*(5-q))));_=0,y=0}}break}return f.append(X.decode(m.toByteArray(),l)),u}static numericCompaction(r,a,l){let u=0,f=!1,m=new Int32Array(xe.MAX_NUMERIC_CODEWORDS);for(;a<r[0]&&!f;){let y=r[a++];if(a===r[0]&&(f=!0),y<xe.TEXT_COMPACTION_MODE_LATCH)m[u]=y,u++;else switch(y){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:a--,f=!0;break}(u%xe.MAX_NUMERIC_CODEWORDS===0||y===xe.NUMERIC_COMPACTION_MODE_LATCH||f)&&u>0&&(l.append(xe.decodeBase900toBase10(m,u)),u=0)}return a}static decodeBase900toBase10(r,a){let l=Wi(0);for(let f=0;f<a;f++)l+=xe.EXP900[a-f-1]*Wi(r[f]);let u=l.toString();if(u.charAt(0)!=="1")throw new F;return u.substring(1)}}xe.TEXT_COMPACTION_MODE_LATCH=900,xe.BYTE_COMPACTION_MODE_LATCH=901,xe.NUMERIC_COMPACTION_MODE_LATCH=902,xe.BYTE_COMPACTION_MODE_LATCH_6=924,xe.ECI_USER_DEFINED=925,xe.ECI_GENERAL_PURPOSE=926,xe.ECI_CHARSET=927,xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,xe.MACRO_PDF417_TERMINATOR=922,xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,xe.MAX_NUMERIC_CODEWORDS=15,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,xe.PL=25,xe.LL=27,xe.AS=27,xe.ML=28,xe.AL=28,xe.PS=29,xe.PAL=29,xe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,xe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",xe.EXP900=Vs()?aa():[],xe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Wt{constructor(){}static decode(r,a,l,u,f,m,y){let _=new Xi(r,a,l,u,f),v=null,I=null,k;for(let Z=!0;;Z=!1){if(a!=null&&(v=Wt.getRowIndicatorColumn(r,_,a,!0,m,y)),u!=null&&(I=Wt.getRowIndicatorColumn(r,_,u,!1,m,y)),k=Wt.merge(v,I),k==null)throw ae.getNotFoundInstance();let J=k.getBoundingBox();if(Z&&J!=null&&(J.getMinY()<_.getMinY()||J.getMaxY()>_.getMaxY()))_=J;else break}k.setBoundingBox(_);let L=k.getBarcodeColumnCount()+1;k.setDetectionResultColumn(0,v),k.setDetectionResultColumn(L,I);let q=v!=null;for(let Z=1;Z<=L;Z++){let J=q?Z:L-Z;if(k.getDetectionResultColumn(J)!==void 0)continue;let ce;J===0||J===L?ce=new Mi(_,J===0):ce=new Yi(_),k.setDetectionResultColumn(J,ce);let Ee=-1,Xe=Ee;for(let ze=_.getMinY();ze<=_.getMaxY();ze++){if(Ee=Wt.getStartColumn(k,J,ze,q),Ee<0||Ee>_.getMaxX()){if(Xe===-1)continue;Ee=Xe}let Fe=Wt.detectCodeword(r,_.getMinX(),_.getMaxX(),q,Ee,ze,m,y);Fe!=null&&(ce.setCodeword(ze,Fe),Xe=Ee,m=Math.min(m,Fe.getWidth()),y=Math.max(y,Fe.getWidth()))}}return Wt.createDecoderResult(k)}static merge(r,a){if(r==null&&a==null)return null;let l=Wt.getBarcodeMetadata(r,a);if(l==null)return null;let u=Xi.merge(Wt.adjustBoundingBox(r),Wt.adjustBoundingBox(a));return new Er(l,u)}static adjustBoundingBox(r){if(r==null)return null;let a=r.getRowHeights();if(a==null)return null;let l=Wt.getMax(a),u=0;for(let y of a)if(u+=l-y,y>0)break;let f=r.getCodewords();for(let y=0;u>0&&f[y]==null;y++)u--;let m=0;for(let y=a.length-1;y>=0&&(m+=l-a[y],!(a[y]>0));y--);for(let y=f.length-1;m>0&&f[y]==null;y--)m--;return r.getBoundingBox().addMissingRows(u,m,r.isLeft())}static getMax(r){let a=-1;for(let l of r)a=Math.max(a,l);return a}static getBarcodeMetadata(r,a){let l;if(r==null||(l=r.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let u;return a==null||(u=a.getBarcodeMetadata())==null?l:l.getColumnCount()!==u.getColumnCount()&&l.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&l.getRowCount()!==u.getRowCount()?null:l}static getRowIndicatorColumn(r,a,l,u,f,m){let y=new Mi(a,u);for(let _=0;_<2;_++){let v=_===0?1:-1,I=Math.trunc(Math.trunc(l.getX()));for(let k=Math.trunc(Math.trunc(l.getY()));k<=a.getMaxY()&&k>=a.getMinY();k+=v){let L=Wt.detectCodeword(r,0,r.getWidth(),u,I,k,f,m);L!=null&&(y.setCodeword(k,L),u?I=L.getStartX():I=L.getEndX())}}return y}static adjustCodewordCount(r,a){let l=a[0][1],u=l.getValue(),f=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-Wt.getNumberOfECCodeWords(r.getBarcodeECLevel());if(u.length===0){if(f<1||f>Nt.MAX_CODEWORDS_IN_BARCODE)throw ae.getNotFoundInstance();l.setValue(f)}else u[0]!==f&&l.setValue(f)}static createDecoderResult(r){let a=Wt.createBarcodeMatrix(r);Wt.adjustCodewordCount(r,a);let l=new Array,u=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),f=[],m=new Array;for(let _=0;_<r.getBarcodeRowCount();_++)for(let v=0;v<r.getBarcodeColumnCount();v++){let I=a[_][v+1].getValue(),k=_*r.getBarcodeColumnCount()+v;I.length===0?l.push(k):I.length===1?u[k]=I[0]:(m.push(k),f.push(I))}let y=new Array(f.length);for(let _=0;_<y.length;_++)y[_]=f[_];return Wt.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),u,Nt.toIntArray(l),Nt.toIntArray(m),y)}static createDecoderResultFromAmbiguousValues(r,a,l,u,f){let m=new Int32Array(u.length),y=100;for(;y-- >0;){for(let _=0;_<m.length;_++)a[u[_]]=f[_][m[_]];try{return Wt.decodeCodewords(a,r,l)}catch(_){if(!(_ instanceof B))throw _}if(m.length===0)throw B.getChecksumInstance();for(let _=0;_<m.length;_++)if(m[_]<f[_].length-1){m[_]++;break}else if(m[_]=0,_===m.length-1)throw B.getChecksumInstance()}throw B.getChecksumInstance()}static createBarcodeMatrix(r){let a=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let u=0;u<a.length;u++)for(let f=0;f<a[u].length;f++)a[u][f]=new bi;let l=0;for(let u of r.getDetectionResultColumns()){if(u!=null){for(let f of u.getCodewords())if(f!=null){let m=f.getRowNumber();if(m>=0){if(m>=a.length)continue;a[m][l].setValue(f.getValue())}}}l++}return a}static isValidBarcodeColumn(r,a){return a>=0&&a<=r.getBarcodeColumnCount()+1}static getStartColumn(r,a,l,u){let f=u?1:-1,m=null;if(Wt.isValidBarcodeColumn(r,a-f)&&(m=r.getDetectionResultColumn(a-f).getCodeword(l)),m!=null)return u?m.getEndX():m.getStartX();if(m=r.getDetectionResultColumn(a).getCodewordNearby(l),m!=null)return u?m.getStartX():m.getEndX();if(Wt.isValidBarcodeColumn(r,a-f)&&(m=r.getDetectionResultColumn(a-f).getCodewordNearby(l)),m!=null)return u?m.getEndX():m.getStartX();let y=0;for(;Wt.isValidBarcodeColumn(r,a-f);){a-=f;for(let _ of r.getDetectionResultColumn(a).getCodewords())if(_!=null)return(u?_.getEndX():_.getStartX())+f*y*(_.getEndX()-_.getStartX());y++}return u?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,a,l,u,f,m,y,_){f=Wt.adjustCodewordStartColumn(r,a,l,u,f,m);let v=Wt.getModuleBitCount(r,a,l,u,f,m);if(v==null)return null;let I,k=et.sum(v);if(u)I=f+k;else{for(let Z=0;Z<v.length/2;Z++){let J=v[Z];v[Z]=v[v.length-1-Z],v[v.length-1-Z]=J}I=f,f=I-k}if(!Wt.checkCodewordSkew(k,y,_))return null;let L=sr.getDecodedValue(v),q=Nt.getCodeword(L);return q===-1?null:new vi(f,I,Wt.getCodewordBucketNumber(L),q)}static getModuleBitCount(r,a,l,u,f,m){let y=f,_=new Int32Array(8),v=0,I=u?1:-1,k=u;for(;(u?y<l:y>=a)&&v<_.length;)r.get(y,m)===k?(_[v]++,y+=I):(v++,k=!k);return v===_.length||y===(u?l:a)&&v===_.length-1?_:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,a,l,u,f,m){let y=f,_=u?-1:1;for(let v=0;v<2;v++){for(;(u?y>=a:y<l)&&u===r.get(y,m);){if(Math.abs(f-y)>Wt.CODEWORD_SKEW_SIZE)return f;y+=_}_=-_,u=!u}return y}static checkCodewordSkew(r,a,l){return a-Wt.CODEWORD_SKEW_SIZE<=r&&r<=l+Wt.CODEWORD_SKEW_SIZE}static decodeCodewords(r,a,l){if(r.length===0)throw F.getFormatInstance();let u=1<<a+1,f=Wt.correctErrors(r,l,u);Wt.verifyCodewordCount(r,u);let m=xe.decode(r,""+a);return m.setErrorsCorrected(f),m.setErasures(l.length),m}static correctErrors(r,a,l){if(a!=null&&a.length>l/2+Wt.MAX_ERRORS||l<0||l>Wt.MAX_EC_CODEWORDS)throw B.getChecksumInstance();return Wt.errorCorrection.decode(r,l,a)}static verifyCodewordCount(r,a){if(r.length<4)throw F.getFormatInstance();let l=r[0];if(l>r.length)throw F.getFormatInstance();if(l===0)if(a<r.length)r[0]=r.length-a;else throw F.getFormatInstance()}static getBitCountForCodeword(r){let a=new Int32Array(8),l=0,u=a.length-1;for(;!((r&1)!==l&&(l=r&1,u--,u<0));)a[u]++,r>>=1;return a}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return Wt.getCodewordBucketNumber(Wt.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let a=new vs;for(let l=0;l<r.length;l++){a.format("Row %2d: ",l);for(let u=0;u<r[l].length;u++){let f=r[l][u];f.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",f.getValue()[0],f.getConfidence(f.getValue()[0]))}a.format("%n")}return a.toString()}}Wt.CODEWORD_SKEW_SIZE=2,Wt.MAX_ERRORS=3,Wt.MAX_EC_CODEWORDS=512,Wt.errorCorrection=new qi;class fr{decode(r,a=null){let l=fr.decode(r,a,!1);if(l==null||l.length===0||l[0]==null)throw ae.getNotFoundInstance();return l[0]}decodeMultiple(r,a=null){try{return fr.decode(r,a,!0)}catch(l){throw l instanceof F||l instanceof B?ae.getNotFoundInstance():l}}static decode(r,a,l){const u=new Array,f=Lt.detectMultiple(r,a,l);for(const m of f.getPoints()){const y=Wt.decode(f.getBits(),m[4],m[5],m[6],m[7],fr.getMinCodewordWidth(m),fr.getMaxCodewordWidth(m)),_=new Te(y.getText(),y.getRawBytes(),void 0,m,_e.PDF_417);_.putMetadata(_t.ERROR_CORRECTION_LEVEL,y.getECLevel());const v=y.getOther();v!=null&&_.putMetadata(_t.PDF417_EXTRA_METADATA,v),u.push(_)}return u.map(m=>m)}static getMaxWidth(r,a){return r==null||a==null?0:Math.trunc(Math.abs(r.getX()-a.getX()))}static getMinWidth(r,a){return r==null||a==null?he.MAX_VALUE:Math.trunc(Math.abs(r.getX()-a.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(fr.getMaxWidth(r[0],r[4]),fr.getMaxWidth(r[6],r[2])*Nt.MODULES_IN_CODEWORD/Nt.MODULES_IN_STOP_PATTERN),Math.max(fr.getMaxWidth(r[1],r[5]),fr.getMaxWidth(r[7],r[3])*Nt.MODULES_IN_CODEWORD/Nt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(fr.getMinWidth(r[0],r[4]),fr.getMinWidth(r[6],r[2])*Nt.MODULES_IN_CODEWORD/Nt.MODULES_IN_STOP_PATTERN),Math.min(fr.getMinWidth(r[1],r[5]),fr.getMinWidth(r[7],r[3])*Nt.MODULES_IN_CODEWORD/Nt.MODULES_IN_STOP_PATTERN)))}reset(){}}class oa extends w{}oa.kind="ReaderException";class Fo{constructor(r,a){this.verbose=r===!0,a&&this.setHints(a)}decode(r,a){return a&&this.setHints(a),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const a=!o(r)&&r.get(je.TRY_HARDER)===!0,l=o(r)?null:r.get(je.POSSIBLE_FORMATS),u=new Array;if(!o(l)){const f=l.some(m=>m===_e.UPC_A||m===_e.UPC_E||m===_e.EAN_13||m===_e.EAN_8||m===_e.CODABAR||m===_e.CODE_39||m===_e.CODE_93||m===_e.CODE_128||m===_e.ITF||m===_e.RSS_14||m===_e.RSS_EXPANDED);f&&!a&&u.push(new ni(r,this.verbose)),l.includes(_e.QR_CODE)&&u.push(new yi),l.includes(_e.DATA_MATRIX)&&u.push(new di),l.includes(_e.AZTEC)&&u.push(new ti),l.includes(_e.PDF_417)&&u.push(new fr),f&&a&&u.push(new ni(r,this.verbose))}u.length===0&&(a||u.push(new ni(r,this.verbose)),u.push(new yi),u.push(new di),u.push(new ti),u.push(new fr),a&&u.push(new ni(r,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new oa("No readers where selected, nothing can be read.");for(const a of this.readers)try{return a.decode(r,this.hints)}catch(l){if(l instanceof oa)continue}throw new ae("No MultiFormat Readers were able to detect the code.")}}class cs extends ve{constructor(r=null,a=500){const l=new Fo;l.setHints(r),super(l,a)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class bl extends ve{constructor(r=500){super(new fr,r)}}class vl extends ve{constructor(r=500){super(new yi,r)}}var Ha;(function(M){M[M.ERROR_CORRECTION=0]="ERROR_CORRECTION",M[M.CHARACTER_SET=1]="CHARACTER_SET",M[M.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",M[M.MIN_SIZE=3]="MIN_SIZE",M[M.MAX_SIZE=4]="MAX_SIZE",M[M.MARGIN=5]="MARGIN",M[M.PDF417_COMPACT=6]="PDF417_COMPACT",M[M.PDF417_COMPACTION=7]="PDF417_COMPACTION",M[M.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",M[M.AZTEC_LAYERS=9]="AZTEC_LAYERS",M[M.QR_VERSION=10]="QR_VERSION"})(Ha||(Ha={}));var dr=Ha;class us{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new jt(r,Int32Array.from([1])))}buildGenerator(r){const a=this.cachedGenerators;if(r>=a.length){let l=a[a.length-1];const u=this.field;for(let f=a.length;f<=r;f++){const m=l.multiply(new jt(u,Int32Array.from([1,u.exp(f-1+u.getGeneratorBase())])));a.push(m),l=m}}return a[r]}encode(r,a){if(a===0)throw new R("No error correction bytes");const l=r.length-a;if(l<=0)throw new R("No data bytes provided");const u=this.buildGenerator(a),f=new Int32Array(l);ne.arraycopy(r,0,f,0,l);let m=new jt(this.field,f);m=m.multiplyByMonomial(a,1);const _=m.divide(u)[1].getCoefficients(),v=a-_.length;for(let I=0;I<v;I++)r[l+I]=0;ne.arraycopy(_,0,r,l+v,_.length)}}class on{constructor(){}static applyMaskPenaltyRule1(r){return on.applyMaskPenaltyRule1Internal(r,!0)+on.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let a=0;const l=r.getArray(),u=r.getWidth(),f=r.getHeight();for(let m=0;m<f-1;m++){const y=l[m];for(let _=0;_<u-1;_++){const v=y[_];v===y[_+1]&&v===l[m+1][_]&&v===l[m+1][_+1]&&a++}}return on.N2*a}static applyMaskPenaltyRule3(r){let a=0;const l=r.getArray(),u=r.getWidth(),f=r.getHeight();for(let m=0;m<f;m++)for(let y=0;y<u;y++){const _=l[m];y+6<u&&_[y]===1&&_[y+1]===0&&_[y+2]===1&&_[y+3]===1&&_[y+4]===1&&_[y+5]===0&&_[y+6]===1&&(on.isWhiteHorizontal(_,y-4,y)||on.isWhiteHorizontal(_,y+7,y+11))&&a++,m+6<f&&l[m][y]===1&&l[m+1][y]===0&&l[m+2][y]===1&&l[m+3][y]===1&&l[m+4][y]===1&&l[m+5][y]===0&&l[m+6][y]===1&&(on.isWhiteVertical(l,y,m-4,m)||on.isWhiteVertical(l,y,m+7,m+11))&&a++}return a*on.N3}static isWhiteHorizontal(r,a,l){a=Math.max(a,0),l=Math.min(l,r.length);for(let u=a;u<l;u++)if(r[u]===1)return!1;return!0}static isWhiteVertical(r,a,l,u){l=Math.max(l,0),u=Math.min(u,r.length);for(let f=l;f<u;f++)if(r[f][a]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let a=0;const l=r.getArray(),u=r.getWidth(),f=r.getHeight();for(let _=0;_<f;_++){const v=l[_];for(let I=0;I<u;I++)v[I]===1&&a++}const m=r.getHeight()*r.getWidth();return Math.floor(Math.abs(a*2-m)*10/m)*on.N4}static getDataMaskBit(r,a,l){let u,f;switch(r){case 0:u=l+a&1;break;case 1:u=l&1;break;case 2:u=a%3;break;case 3:u=(l+a)%3;break;case 4:u=Math.floor(l/2)+Math.floor(a/3)&1;break;case 5:f=l*a,u=(f&1)+f%3;break;case 6:f=l*a,u=(f&1)+f%3&1;break;case 7:f=l*a,u=f%3+(l+a&1)&1;break;default:throw new R("Invalid mask pattern: "+r)}return u===0}static applyMaskPenaltyRule1Internal(r,a){let l=0;const u=a?r.getHeight():r.getWidth(),f=a?r.getWidth():r.getHeight(),m=r.getArray();for(let y=0;y<u;y++){let _=0,v=-1;for(let I=0;I<f;I++){const k=a?m[y][I]:m[I][y];k===v?_++:(_>=5&&(l+=on.N1+(_-5)),_=1,v=k)}_>=5&&(l+=on.N1+(_-5))}return l}}on.N1=3,on.N2=3,on.N3=40,on.N4=10;class la{constructor(r,a){this.width=r,this.height=a;const l=new Array(a);for(let u=0;u!==a;u++)l[u]=new Uint8Array(r);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(r,a){return this.bytes[a][r]}getArray(){return this.bytes}setNumber(r,a,l){this.bytes[a][r]=l}setBoolean(r,a,l){this.bytes[a][r]=l?1:0}clear(r){for(const a of this.bytes)Le.fill(a,r)}equals(r){if(!(r instanceof la))return!1;const a=r;if(this.width!==a.width||this.height!==a.height)return!1;for(let l=0,u=this.height;l<u;++l){const f=this.bytes[l],m=a.bytes[l];for(let y=0,_=this.width;y<_;++y)if(f[y]!==m[y])return!1}return!0}toString(){const r=new G;for(let a=0,l=this.height;a<l;++a){const u=this.bytes[a];for(let f=0,m=this.width;f<m;++f)switch(u[f]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class hs{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new G;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<hs.NUM_MASK_PATTERNS}}hs.NUM_MASK_PATTERNS=8;class cn extends w{}cn.kind="WriterException";class p{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,a,l,u,f){p.clearMatrix(f),p.embedBasicPatterns(l,f),p.embedTypeInfo(a,u,f),p.maybeEmbedVersionInfo(l,f),p.embedDataBits(r,u,f)}static embedBasicPatterns(r,a){p.embedPositionDetectionPatternsAndSeparators(a),p.embedDarkDotAtLeftBottomCorner(a),p.maybeEmbedPositionAdjustmentPatterns(r,a),p.embedTimingPatterns(a)}static embedTypeInfo(r,a,l){const u=new Ue;p.makeTypeInfoBits(r,a,u);for(let f=0,m=u.getSize();f<m;++f){const y=u.get(u.getSize()-1-f),_=p.TYPE_INFO_COORDINATES[f],v=_[0],I=_[1];if(l.setBoolean(v,I,y),f<8){const k=l.getWidth()-f-1;l.setBoolean(k,8,y)}else{const L=l.getHeight()-7+(f-8);l.setBoolean(8,L,y)}}}static maybeEmbedVersionInfo(r,a){if(r.getVersionNumber()<7)return;const l=new Ue;p.makeVersionInfoBits(r,l);let u=17;for(let f=0;f<6;++f)for(let m=0;m<3;++m){const y=l.get(u);u--,a.setBoolean(f,a.getHeight()-11+m,y),a.setBoolean(a.getHeight()-11+m,f,y)}}static embedDataBits(r,a,l){let u=0,f=-1,m=l.getWidth()-1,y=l.getHeight()-1;for(;m>0;){for(m===6&&(m-=1);y>=0&&y<l.getHeight();){for(let _=0;_<2;++_){const v=m-_;if(!p.isEmpty(l.get(v,y)))continue;let I;u<r.getSize()?(I=r.get(u),++u):I=!1,a!==255&&on.getDataMaskBit(a,v,y)&&(I=!I),l.setBoolean(v,y,I)}y+=f}f=-f,y+=f,m-=2}if(u!==r.getSize())throw new cn("Not all bits consumed: "+u+"/"+r.getSize())}static findMSBSet(r){return 32-he.numberOfLeadingZeros(r)}static calculateBCHCode(r,a){if(a===0)throw new R("0 polynomial");const l=p.findMSBSet(a);for(r<<=l-1;p.findMSBSet(r)>=l;)r^=a<<p.findMSBSet(r)-l;return r}static makeTypeInfoBits(r,a,l){if(!hs.isValidMaskPattern(a))throw new cn("Invalid mask pattern");const u=r.getBits()<<3|a;l.appendBits(u,5);const f=p.calculateBCHCode(u,p.TYPE_INFO_POLY);l.appendBits(f,10);const m=new Ue;if(m.appendBits(p.TYPE_INFO_MASK_PATTERN,15),l.xor(m),l.getSize()!==15)throw new cn("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(r,a){a.appendBits(r.getVersionNumber(),6);const l=p.calculateBCHCode(r.getVersionNumber(),p.VERSION_INFO_POLY);if(a.appendBits(l,12),a.getSize()!==18)throw new cn("should not happen but we got: "+a.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let a=8;a<r.getWidth()-8;++a){const l=(a+1)%2;p.isEmpty(r.get(a,6))&&r.setNumber(a,6,l),p.isEmpty(r.get(6,a))&&r.setNumber(6,a,l)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new cn;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,a,l){for(let u=0;u<8;++u){if(!p.isEmpty(l.get(r+u,a)))throw new cn;l.setNumber(r+u,a,0)}}static embedVerticalSeparationPattern(r,a,l){for(let u=0;u<7;++u){if(!p.isEmpty(l.get(r,a+u)))throw new cn;l.setNumber(r,a+u,0)}}static embedPositionAdjustmentPattern(r,a,l){for(let u=0;u<5;++u){const f=p.POSITION_ADJUSTMENT_PATTERN[u];for(let m=0;m<5;++m)l.setNumber(r+m,a+u,f[m])}}static embedPositionDetectionPattern(r,a,l){for(let u=0;u<7;++u){const f=p.POSITION_DETECTION_PATTERN[u];for(let m=0;m<7;++m)l.setNumber(r+m,a+u,f[m])}}static embedPositionDetectionPatternsAndSeparators(r){const a=p.POSITION_DETECTION_PATTERN[0].length;p.embedPositionDetectionPattern(0,0,r),p.embedPositionDetectionPattern(r.getWidth()-a,0,r),p.embedPositionDetectionPattern(0,r.getWidth()-a,r);const l=8;p.embedHorizontalSeparationPattern(0,l-1,r),p.embedHorizontalSeparationPattern(r.getWidth()-l,l-1,r),p.embedHorizontalSeparationPattern(0,r.getWidth()-l,r);const u=7;p.embedVerticalSeparationPattern(u,0,r),p.embedVerticalSeparationPattern(r.getHeight()-u-1,0,r),p.embedVerticalSeparationPattern(u,r.getHeight()-u,r)}static maybeEmbedPositionAdjustmentPatterns(r,a){if(r.getVersionNumber()<2)return;const l=r.getVersionNumber()-1,u=p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let f=0,m=u.length;f!==m;f++){const y=u[f];if(y>=0)for(let _=0;_!==m;_++){const v=u[_];v>=0&&p.isEmpty(a.get(v,y))&&p.embedPositionAdjustmentPattern(v-2,y-2,a)}}}}p.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),p.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),p.VERSION_INFO_POLY=7973,p.TYPE_INFO_POLY=1335,p.TYPE_INFO_MASK_PATTERN=21522;class S{constructor(r,a){this.dataBytes=r,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class D{constructor(){}static calculateMaskPenalty(r){return on.applyMaskPenaltyRule1(r)+on.applyMaskPenaltyRule2(r)+on.applyMaskPenaltyRule3(r)+on.applyMaskPenaltyRule4(r)}static encode(r,a,l=null){let u=D.DEFAULT_BYTE_MODE_ENCODING;const f=l!==null&&l.get(dr.CHARACTER_SET)!==void 0;f&&(u=l.get(dr.CHARACTER_SET).toString());const m=this.chooseMode(r,u),y=new Ue;if(m===Tt.BYTE&&(f||D.DEFAULT_BYTE_MODE_ENCODING!==u)){const ze=U.getCharacterSetECIByName(u);ze!==void 0&&this.appendECI(ze,y)}this.appendModeInfo(m,y);const _=new Ue;this.appendBytes(r,m,_,u);let v;if(l!==null&&l.get(dr.QR_VERSION)!==void 0){const ze=Number.parseInt(l.get(dr.QR_VERSION).toString(),10);v=Et.getVersionForNumber(ze);const Fe=this.calculateBitsNeeded(m,y,_,v);if(!this.willFit(Fe,v,a))throw new cn("Data too big for requested version")}else v=this.recommendVersion(a,m,y,_);const I=new Ue;I.appendBitArray(y);const k=m===Tt.BYTE?_.getSizeInBytes():r.length;this.appendLengthInfo(k,v,m,I),I.appendBitArray(_);const L=v.getECBlocksForLevel(a),q=v.getTotalCodewords()-L.getTotalECCodewords();this.terminateBits(q,I);const Z=this.interleaveWithECBytes(I,v.getTotalCodewords(),q,L.getNumBlocks()),J=new hs;J.setECLevel(a),J.setMode(m),J.setVersion(v);const ce=v.getDimensionForVersion(),Ee=new la(ce,ce),Xe=this.chooseMaskPattern(Z,a,v,Ee);return J.setMaskPattern(Xe),p.buildMatrix(Z,a,v,Xe,Ee),J.setMatrix(Ee),J}static recommendVersion(r,a,l,u){const f=this.calculateBitsNeeded(a,l,u,Et.getVersionForNumber(1)),m=this.chooseVersion(f,r),y=this.calculateBitsNeeded(a,l,u,m);return this.chooseVersion(y,r)}static calculateBitsNeeded(r,a,l,u){return a.getSize()+r.getCharacterCountBits(u)+l.getSize()}static getAlphanumericCode(r){return r<D.ALPHANUMERIC_TABLE.length?D.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,a=null){if(U.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(r))return Tt.KANJI;let l=!1,u=!1;for(let f=0,m=r.length;f<m;++f){const y=r.charAt(f);if(D.isDigit(y))l=!0;else if(this.getAlphanumericCode(y.charCodeAt(0))!==-1)u=!0;else return Tt.BYTE}return u?Tt.ALPHANUMERIC:l?Tt.NUMERIC:Tt.BYTE}static isOnlyDoubleByteKanji(r){let a;try{a=X.encode(r,U.SJIS)}catch{return!1}const l=a.length;if(l%2!==0)return!1;for(let u=0;u<l;u+=2){const f=a[u]&255;if((f<129||f>159)&&(f<224||f>235))return!1}return!0}static chooseMaskPattern(r,a,l,u){let f=Number.MAX_SAFE_INTEGER,m=-1;for(let y=0;y<hs.NUM_MASK_PATTERNS;y++){p.buildMatrix(r,a,l,y,u);let _=this.calculateMaskPenalty(u);_<f&&(f=_,m=y)}return m}static chooseVersion(r,a){for(let l=1;l<=40;l++){const u=Et.getVersionForNumber(l);if(D.willFit(r,u,a))return u}throw new cn("Data too big")}static willFit(r,a,l){const u=a.getTotalCodewords(),m=a.getECBlocksForLevel(l).getTotalECCodewords(),y=u-m,_=(r+7)/8;return y>=_}static terminateBits(r,a){const l=r*8;if(a.getSize()>l)throw new cn("data bits cannot fit in the QR Code"+a.getSize()+" > "+l);for(let m=0;m<4&&a.getSize()<l;++m)a.appendBit(!1);const u=a.getSize()&7;if(u>0)for(let m=u;m<8;m++)a.appendBit(!1);const f=r-a.getSizeInBytes();for(let m=0;m<f;++m)a.appendBits((m&1)===0?236:17,8);if(a.getSize()!==l)throw new cn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,a,l,u,f,m){if(u>=l)throw new cn("Block ID too large");const y=r%l,_=l-y,v=Math.floor(r/l),I=v+1,k=Math.floor(a/l),L=k+1,q=v-k,Z=I-L;if(q!==Z)throw new cn("EC bytes mismatch");if(l!==_+y)throw new cn("RS blocks mismatch");if(r!==(k+q)*_+(L+Z)*y)throw new cn("Total bytes mismatch");u<_?(f[0]=k,m[0]=q):(f[0]=L,m[0]=Z)}static interleaveWithECBytes(r,a,l,u){if(r.getSizeInBytes()!==l)throw new cn("Number of bits and data bytes does not match");let f=0,m=0,y=0;const _=new Array;for(let I=0;I<u;++I){const k=new Int32Array(1),L=new Int32Array(1);D.getNumDataBytesAndNumECBytesForBlockID(a,l,u,I,k,L);const q=k[0],Z=new Uint8Array(q);r.toBytes(8*f,Z,0,q);const J=D.generateECBytes(Z,L[0]);_.push(new S(Z,J)),m=Math.max(m,q),y=Math.max(y,J.length),f+=k[0]}if(l!==f)throw new cn("Data bytes does not match offset");const v=new Ue;for(let I=0;I<m;++I)for(const k of _){const L=k.getDataBytes();I<L.length&&v.appendBits(L[I],8)}for(let I=0;I<y;++I)for(const k of _){const L=k.getErrorCorrectionBytes();I<L.length&&v.appendBits(L[I],8)}if(a!==v.getSizeInBytes())throw new cn("Interleaving error: "+a+" and "+v.getSizeInBytes()+" differ.");return v}static generateECBytes(r,a){const l=r.length,u=new Int32Array(l+a);for(let m=0;m<l;m++)u[m]=r[m]&255;new us(Ve.QR_CODE_FIELD_256).encode(u,a);const f=new Uint8Array(a);for(let m=0;m<a;m++)f[m]=u[l+m];return f}static appendModeInfo(r,a){a.appendBits(r.getBits(),4)}static appendLengthInfo(r,a,l,u){const f=l.getCharacterCountBits(a);if(r>=1<<f)throw new cn(r+" is bigger than "+((1<<f)-1));u.appendBits(r,f)}static appendBytes(r,a,l,u){switch(a){case Tt.NUMERIC:D.appendNumericBytes(r,l);break;case Tt.ALPHANUMERIC:D.appendAlphanumericBytes(r,l);break;case Tt.BYTE:D.append8BitBytes(r,l,u);break;case Tt.KANJI:D.appendKanjiBytes(r,l);break;default:throw new cn("Invalid mode: "+a)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const a=D.getDigit(r);return a>=0&&a<=9}static appendNumericBytes(r,a){const l=r.length;let u=0;for(;u<l;){const f=D.getDigit(r.charAt(u));if(u+2<l){const m=D.getDigit(r.charAt(u+1)),y=D.getDigit(r.charAt(u+2));a.appendBits(f*100+m*10+y,10),u+=3}else if(u+1<l){const m=D.getDigit(r.charAt(u+1));a.appendBits(f*10+m,7),u+=2}else a.appendBits(f,4),u++}}static appendAlphanumericBytes(r,a){const l=r.length;let u=0;for(;u<l;){const f=D.getAlphanumericCode(r.charCodeAt(u));if(f===-1)throw new cn;if(u+1<l){const m=D.getAlphanumericCode(r.charCodeAt(u+1));if(m===-1)throw new cn;a.appendBits(f*45+m,11),u+=2}else a.appendBits(f,6),u++}}static append8BitBytes(r,a,l){let u;try{u=X.encode(r,l)}catch(f){throw new cn(f)}for(let f=0,m=u.length;f!==m;f++){const y=u[f];a.appendBits(y,8)}}static appendKanjiBytes(r,a){let l;try{l=X.encode(r,U.SJIS)}catch(f){throw new cn(f)}const u=l.length;for(let f=0;f<u;f+=2){const m=l[f]&255,y=l[f+1]&255,_=m<<8&4294967295|y;let v=-1;if(_>=33088&&_<=40956?v=_-33088:_>=57408&&_<=60351&&(v=_-49472),v===-1)throw new cn("Invalid byte sequence");const I=(v>>8)*192+(v&255);a.appendBits(I,13)}}static appendECI(r,a){a.appendBits(Tt.ECI.getBits(),4),a.appendBits(r.getValue(),8)}}D.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),D.DEFAULT_BYTE_MODE_ENCODING=U.UTF8.getName();class j{write(r,a,l,u=null){if(r.length===0)throw new R("Found empty contents");if(a<0||l<0)throw new R("Requested dimensions are too small: "+a+"x"+l);let f=en.L,m=j.QUIET_ZONE_SIZE;u!==null&&(u.get(dr.ERROR_CORRECTION)!==void 0&&(f=en.fromString(u.get(dr.ERROR_CORRECTION).toString())),u.get(dr.MARGIN)!==void 0&&(m=Number.parseInt(u.get(dr.MARGIN).toString(),10)));const y=D.encode(r,f,u);return this.renderResult(y,a,l,m)}writeToDom(r,a,l,u,f=null){typeof r=="string"&&(r=document.querySelector(r));const m=this.write(a,l,u,f);r&&r.appendChild(m)}renderResult(r,a,l,u){const f=r.getMatrix();if(f===null)throw new De;const m=f.getWidth(),y=f.getHeight(),_=m+u*2,v=y+u*2,I=Math.max(a,_),k=Math.max(l,v),L=Math.min(Math.floor(I/_),Math.floor(k/v)),q=Math.floor((I-m*L)/2),Z=Math.floor((k-y*L)/2),J=this.createSVGElement(I,k);for(let ce=0,Ee=Z;ce<y;ce++,Ee+=L)for(let Xe=0,ze=q;Xe<m;Xe++,ze+=L)if(f.get(Xe,ce)===1){const Fe=this.createSvgRectElement(ze,Ee,L,L);J.appendChild(Fe)}return J}createSVGElement(r,a){const l=document.createElementNS(j.SVG_NS,"svg");return l.setAttributeNS(null,"height",r.toString()),l.setAttributeNS(null,"width",a.toString()),l}createSvgRectElement(r,a,l,u){const f=document.createElementNS(j.SVG_NS,"rect");return f.setAttributeNS(null,"x",r.toString()),f.setAttributeNS(null,"y",a.toString()),f.setAttributeNS(null,"height",l.toString()),f.setAttributeNS(null,"width",u.toString()),f.setAttributeNS(null,"fill","#000000"),f}}j.QUIET_ZONE_SIZE=4,j.SVG_NS="http://www.w3.org/2000/svg";class le{encode(r,a,l,u,f){if(r.length===0)throw new R("Found empty contents");if(a!==_e.QR_CODE)throw new R("Can only encode QR_CODE, but got "+a);if(l<0||u<0)throw new R(`Requested dimensions are too small: ${l}x${u}`);let m=en.L,y=le.QUIET_ZONE_SIZE;f!==null&&(f.get(dr.ERROR_CORRECTION)!==void 0&&(m=en.fromString(f.get(dr.ERROR_CORRECTION).toString())),f.get(dr.MARGIN)!==void 0&&(y=Number.parseInt(f.get(dr.MARGIN).toString(),10)));const _=D.encode(r,m,f);return le.renderResult(_,l,u,y)}static renderResult(r,a,l,u){const f=r.getMatrix();if(f===null)throw new De;const m=f.getWidth(),y=f.getHeight(),_=m+u*2,v=y+u*2,I=Math.max(a,_),k=Math.max(l,v),L=Math.min(Math.floor(I/_),Math.floor(k/v)),q=Math.floor((I-m*L)/2),Z=Math.floor((k-y*L)/2),J=new lt(I,k);for(let ce=0,Ee=Z;ce<y;ce++,Ee+=L)for(let Xe=0,ze=q;Xe<m;Xe++,ze+=L)f.get(Xe,ce)===1&&J.setRegion(ze,Ee,L,L);return J}}le.QUIET_ZONE_SIZE=4;class we{encode(r,a,l,u,f){let m;switch(a){case _e.QR_CODE:m=new le;break;default:throw new R("No encoder available for format "+a)}return m.encode(r,a,l,u,f)}}class Ye extends tt{constructor(r,a,l,u,f,m,y,_){if(super(m,y),this.yuvData=r,this.dataWidth=a,this.dataHeight=l,this.left=u,this.top=f,u+m>a||f+y>l)throw new R("Crop rectangle does not fit within image data.");_&&this.reverseHorizontal(m,y)}getRow(r,a){if(r<0||r>=this.getHeight())throw new R("Requested row is outside the image: "+r);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const u=(r+this.top)*this.dataWidth+this.left;return ne.arraycopy(this.yuvData,u,a,0,l),a}getMatrix(){const r=this.getWidth(),a=this.getHeight();if(r===this.dataWidth&&a===this.dataHeight)return this.yuvData;const l=r*a,u=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return ne.arraycopy(this.yuvData,f,u,0,l),u;for(let m=0;m<a;m++){const y=m*r;ne.arraycopy(this.yuvData,f,u,y,r),f+=this.dataWidth}return u}isCropSupported(){return!0}crop(r,a,l,u){return new Ye(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+a,l,u,!1)}renderThumbnail(){const r=this.getWidth()/Ye.THUMBNAIL_SCALE_FACTOR,a=this.getHeight()/Ye.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(r*a),u=this.yuvData;let f=this.top*this.dataWidth+this.left;for(let m=0;m<a;m++){const y=m*r;for(let _=0;_<r;_++){const v=u[f+_*Ye.THUMBNAIL_SCALE_FACTOR]&255;l[y+_]=4278190080|v*65793}f+=this.dataWidth*Ye.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Ye.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Ye.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,a){const l=this.yuvData;for(let u=0,f=this.top*this.dataWidth+this.left;u<a;u++,f+=this.dataWidth){const m=f+r/2;for(let y=f,_=f+r-1;y<m;y++,_--){const v=l[y];l[y]=l[_],l[_]=v}}}invert(){return new qe(this)}}Ye.THUMBNAIL_SCALE_FACTOR=2;class Ht extends tt{constructor(r,a,l,u,f,m,y){if(super(a,l),this.dataWidth=u,this.dataHeight=f,this.left=m,this.top=y,r.BYTES_PER_ELEMENT===4){const _=a*l,v=new Uint8ClampedArray(_);for(let I=0;I<_;I++){const k=r[I],L=k>>16&255,q=k>>7&510,Z=k&255;v[I]=(L+q+Z)/4&255}this.luminances=v}else this.luminances=r;if(u===void 0&&(this.dataWidth=a),f===void 0&&(this.dataHeight=l),m===void 0&&(this.left=0),y===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+l>this.dataHeight)throw new R("Crop rectangle does not fit within image data.")}getRow(r,a){if(r<0||r>=this.getHeight())throw new R("Requested row is outside the image: "+r);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const u=(r+this.top)*this.dataWidth+this.left;return ne.arraycopy(this.luminances,u,a,0,l),a}getMatrix(){const r=this.getWidth(),a=this.getHeight();if(r===this.dataWidth&&a===this.dataHeight)return this.luminances;const l=r*a,u=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return ne.arraycopy(this.luminances,f,u,0,l),u;for(let m=0;m<a;m++){const y=m*r;ne.arraycopy(this.luminances,f,u,y,r),f+=this.dataWidth}return u}isCropSupported(){return!0}crop(r,a,l,u){return new Ht(this.luminances,l,u,this.dataWidth,this.dataHeight,this.left+r,this.top+a)}invert(){return new qe(this)}}class gr extends U{static forName(r){return this.getCharacterSetECIByName(r)}}class Tn{}Tn.ISO_8859_1=U.ISO8859_1;class Jn{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class Ti{static singletonList(r){return[r]}static min(r,a){return r.sort(a)[0]}}class fs{constructor(r){this.previous=r}getPrevious(){return this.previous}}class Zr extends fs{constructor(r,a,l){super(r),this.value=a,this.bitCount=l}appendTo(r,a){r.appendBits(this.value,this.bitCount)}add(r,a){return new Zr(this,r,a)}addBinaryShift(r,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Zr(this,r,a)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+he.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class Ci extends Zr{constructor(r,a,l){super(r,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=l}appendTo(r,a){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):l===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(a[this.binaryShiftStart+l],8)}addBinaryShift(r,a){return new Ci(this,r,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function ca(M,r,a){return new Ci(M,r,a)}function ds(M,r,a){return new Zr(M,r,a)}const Ga=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Us=0,Tl=1,ki=2,bc=3,Ki=4,jo=new Zr(null,0,0),ua=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function xd(M){for(let r of M)Le.fill(r,-1);return M[Us][Ki]=0,M[Tl][Ki]=0,M[Tl][Us]=28,M[bc][Ki]=0,M[ki][Ki]=0,M[ki][Us]=15,M}const zo=xd(Le.createInt32Array(6,6));class Qi{constructor(r,a,l,u){this.token=r,this.mode=a,this.binaryShiftByteCount=l,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,a){let l=this.bitCount,u=this.token;if(r!==this.mode){let m=ua[this.mode][r];u=ds(u,m&65535,m>>16),l+=m>>16}let f=r===ki?4:5;return u=ds(u,a,f),new Qi(u,r,0,l+f)}shiftAndAppend(r,a){let l=this.token,u=this.mode===ki?4:5;return l=ds(l,zo[this.mode][r],u),l=ds(l,a,5),new Qi(l,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(r){let a=this.token,l=this.mode,u=this.bitCount;if(this.mode===Ki||this.mode===ki){let y=ua[l][Us];a=ds(a,y&65535,y>>16),u+=y>>16,l=Us}let f=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,m=new Qi(a,l,this.binaryShiftByteCount+1,u+f);return m.binaryShiftByteCount===2078&&(m=m.endBinaryShift(r+1)),m}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=ca(a,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new Qi(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let a=this.bitCount+(ua[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?a+=Qi.calculateBinaryShiftCost(r)-Qi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(a+=10),a<=r.bitCount}toBitArray(r){let a=[];for(let u=this.endBinaryShift(r.length).token;u!==null;u=u.getPrevious())a.unshift(u);let l=new Ue;for(const u of a)u.appendTo(l,r);return l}toString(){return Y.format("%s bits=%d bytes=%d",Ga[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}Qi.INITIAL_STATE=new Qi(jo,Us,0,0);function Wu(M){const r=Y.getCharCode(" "),a=Y.getCharCode("."),l=Y.getCharCode(",");M[Us][r]=1;const u=Y.getCharCode("Z"),f=Y.getCharCode("A");for(let L=f;L<=u;L++)M[Us][L]=L-f+2;M[Tl][r]=1;const m=Y.getCharCode("z"),y=Y.getCharCode("a");for(let L=y;L<=m;L++)M[Tl][L]=L-y+2;M[ki][r]=1;const _=Y.getCharCode("9"),v=Y.getCharCode("0");for(let L=v;L<=_;L++)M[ki][L]=L-v+2;M[ki][l]=12,M[ki][a]=13;const I=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let L=0;L<I.length;L++)M[bc][Y.getCharCode(I[L])]=L;const k=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let L=0;L<k.length;L++)Y.getCharCode(k[L])>0&&(M[Ki][Y.getCharCode(k[L])]=L);return M}const Ho=Wu(Le.createInt32Array(5,256));class ha{constructor(r){this.text=r}encode(){const r=Y.getCharCode(" "),a=Y.getCharCode(`
`);let l=Ti.singletonList(Qi.INITIAL_STATE);for(let f=0;f<this.text.length;f++){let m,y=f+1<this.text.length?this.text[f+1]:0;switch(this.text[f]){case Y.getCharCode("\r"):m=y===a?2:0;break;case Y.getCharCode("."):m=y===r?3:0;break;case Y.getCharCode(","):m=y===r?4:0;break;case Y.getCharCode(":"):m=y===r?5:0;break;default:m=0}m>0?(l=ha.updateStateListForPair(l,f,m),f++):l=this.updateStateListForChar(l,f)}return Ti.min(l,(f,m)=>f.getBitCount()-m.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,a){const l=[];for(let u of r)this.updateStateForChar(u,a,l);return ha.simplifyStates(l)}updateStateForChar(r,a,l){let u=this.text[a]&255,f=Ho[r.getMode()][u]>0,m=null;for(let y=0;y<=Ki;y++){let _=Ho[y][u];if(_>0){if(m==null&&(m=r.endBinaryShift(a)),!f||y===r.getMode()||y===ki){const v=m.latchAndAppend(y,_);l.push(v)}if(!f&&zo[r.getMode()][y]>=0){const v=m.shiftAndAppend(y,_);l.push(v)}}}if(r.getBinaryShiftByteCount()>0||Ho[r.getMode()][u]===0){let y=r.addBinaryShiftChar(a);l.push(y)}}static updateStateListForPair(r,a,l){const u=[];for(let f of r)this.updateStateForPair(f,a,l,u);return this.simplifyStates(u)}static updateStateForPair(r,a,l,u){let f=r.endBinaryShift(a);if(u.push(f.latchAndAppend(Ki,l)),r.getMode()!==Ki&&u.push(f.shiftAndAppend(Ki,l)),l===3||l===4){let m=f.latchAndAppend(ki,16-l).latchAndAppend(ki,1);u.push(m)}if(r.getBinaryShiftByteCount()>0){let m=r.addBinaryShiftChar(a).addBinaryShiftChar(a+1);u.push(m)}}static simplifyStates(r){let a=[];for(const l of r){let u=!0;for(const f of a){if(f.isBetterThanOrEqualTo(l)){u=!1;break}l.isBetterThanOrEqualTo(f)&&(a=a.filter(m=>m!==f))}u&&a.push(l)}return a}}class pn{constructor(){}static encodeBytes(r){return pn.encode(r,pn.DEFAULT_EC_PERCENT,pn.DEFAULT_AZTEC_LAYERS)}static encode(r,a,l){let u=new ha(r).encode(),f=he.truncDivision(u.getSize()*a,100)+11,m=u.getSize()+f,y,_,v,I,k;if(l!==pn.DEFAULT_AZTEC_LAYERS){if(y=l<0,_=Math.abs(l),_>(y?pn.MAX_NB_BITS_COMPACT:pn.MAX_NB_BITS))throw new R(Y.format("Illegal value %s for layers",l));v=pn.totalBitsInLayer(_,y),I=pn.WORD_SIZE[_];let Fe=v-v%I;if(k=pn.stuffBits(u,I),k.getSize()+f>Fe)throw new R("Data to large for user specified layer");if(y&&k.getSize()>I*64)throw new R("Data to large for user specified layer")}else{I=0,k=null;for(let Fe=0;;Fe++){if(Fe>pn.MAX_NB_BITS)throw new R("Data too large for an Aztec code");if(y=Fe<=3,_=y?Fe+1:Fe,v=pn.totalBitsInLayer(_,y),m>v)continue;(k==null||I!==pn.WORD_SIZE[_])&&(I=pn.WORD_SIZE[_],k=pn.stuffBits(u,I));let rn=v-v%I;if(!(y&&k.getSize()>I*64)&&k.getSize()+f<=rn)break}}let L=pn.generateCheckWords(k,v,I),q=k.getSize()/I,Z=pn.generateModeMessage(y,_,q),J=(y?11:14)+_*4,ce=new Int32Array(J),Ee;if(y){Ee=J;for(let Fe=0;Fe<ce.length;Fe++)ce[Fe]=Fe}else{Ee=J+1+2*he.truncDivision(he.truncDivision(J,2)-1,15);let Fe=he.truncDivision(J,2),rn=he.truncDivision(Ee,2);for(let Xt=0;Xt<Fe;Xt++){let _r=Xt+he.truncDivision(Xt,15);ce[Fe-Xt-1]=rn-_r-1,ce[Fe+Xt]=rn+_r+1}}let Xe=new lt(Ee);for(let Fe=0,rn=0;Fe<_;Fe++){let Xt=(_-Fe)*4+(y?9:12);for(let _r=0;_r<Xt;_r++){let Li=_r*2;for(let si=0;si<2;si++)L.get(rn+Li+si)&&Xe.set(ce[Fe*2+si],ce[Fe*2+_r]),L.get(rn+Xt*2+Li+si)&&Xe.set(ce[Fe*2+_r],ce[J-1-Fe*2-si]),L.get(rn+Xt*4+Li+si)&&Xe.set(ce[J-1-Fe*2-si],ce[J-1-Fe*2-_r]),L.get(rn+Xt*6+Li+si)&&Xe.set(ce[J-1-Fe*2-_r],ce[Fe*2+si])}rn+=Xt*8}if(pn.drawModeMessage(Xe,y,Ee,Z),y)pn.drawBullsEye(Xe,he.truncDivision(Ee,2),5);else{pn.drawBullsEye(Xe,he.truncDivision(Ee,2),7);for(let Fe=0,rn=0;Fe<he.truncDivision(J,2)-1;Fe+=15,rn+=16)for(let Xt=he.truncDivision(Ee,2)&1;Xt<Ee;Xt+=2)Xe.set(he.truncDivision(Ee,2)-rn,Xt),Xe.set(he.truncDivision(Ee,2)+rn,Xt),Xe.set(Xt,he.truncDivision(Ee,2)-rn),Xe.set(Xt,he.truncDivision(Ee,2)+rn)}let ze=new Jn;return ze.setCompact(y),ze.setSize(Ee),ze.setLayers(_),ze.setCodeWords(q),ze.setMatrix(Xe),ze}static drawBullsEye(r,a,l){for(let u=0;u<l;u+=2)for(let f=a-u;f<=a+u;f++)r.set(f,a-u),r.set(f,a+u),r.set(a-u,f),r.set(a+u,f);r.set(a-l,a-l),r.set(a-l+1,a-l),r.set(a-l,a-l+1),r.set(a+l,a-l),r.set(a+l,a-l+1),r.set(a+l,a+l-1)}static generateModeMessage(r,a,l){let u=new Ue;return r?(u.appendBits(a-1,2),u.appendBits(l-1,6),u=pn.generateCheckWords(u,28,4)):(u.appendBits(a-1,5),u.appendBits(l-1,11),u=pn.generateCheckWords(u,40,4)),u}static drawModeMessage(r,a,l,u){let f=he.truncDivision(l,2);if(a)for(let m=0;m<7;m++){let y=f-3+m;u.get(m)&&r.set(y,f-5),u.get(m+7)&&r.set(f+5,y),u.get(20-m)&&r.set(y,f+5),u.get(27-m)&&r.set(f-5,y)}else for(let m=0;m<10;m++){let y=f-5+m+he.truncDivision(m,5);u.get(m)&&r.set(y,f-7),u.get(m+10)&&r.set(f+7,y),u.get(29-m)&&r.set(y,f+7),u.get(39-m)&&r.set(f-7,y)}}static generateCheckWords(r,a,l){let u=r.getSize()/l,f=new us(pn.getGF(l)),m=he.truncDivision(a,l),y=pn.bitsToWords(r,l,m);f.encode(y,m-u);let _=a%l,v=new Ue;v.appendBits(0,_);for(const I of Array.from(y))v.appendBits(I,l);return v}static bitsToWords(r,a,l){let u=new Int32Array(l),f,m;for(f=0,m=r.getSize()/a;f<m;f++){let y=0;for(let _=0;_<a;_++)y|=r.get(f*a+_)?1<<a-_-1:0;u[f]=y}return u}static getGF(r){switch(r){case 4:return Ve.AZTEC_PARAM;case 6:return Ve.AZTEC_DATA_6;case 8:return Ve.AZTEC_DATA_8;case 10:return Ve.AZTEC_DATA_10;case 12:return Ve.AZTEC_DATA_12;default:throw new R("Unsupported word size "+r)}}static stuffBits(r,a){let l=new Ue,u=r.getSize(),f=(1<<a)-2;for(let m=0;m<u;m+=a){let y=0;for(let _=0;_<a;_++)(m+_>=u||r.get(m+_))&&(y|=1<<a-1-_);(y&f)===f?(l.appendBits(y&f,a),m--):(y&f)===0?(l.appendBits(y|1,a),m--):l.appendBits(y,a)}return l}static totalBitsInLayer(r,a){return((a?88:112)+16*r)*r}}pn.DEFAULT_EC_PERCENT=33,pn.DEFAULT_AZTEC_LAYERS=0,pn.MAX_NB_BITS=32,pn.MAX_NB_BITS_COMPACT=4,pn.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Go{encode(r,a,l,u){return this.encodeWithHints(r,a,l,u,null)}encodeWithHints(r,a,l,u,f){let m=Tn.ISO_8859_1,y=pn.DEFAULT_EC_PERCENT,_=pn.DEFAULT_AZTEC_LAYERS;return f!=null&&(f.has(dr.CHARACTER_SET)&&(m=gr.forName(f.get(dr.CHARACTER_SET).toString())),f.has(dr.ERROR_CORRECTION)&&(y=he.parseInt(f.get(dr.ERROR_CORRECTION).toString())),f.has(dr.AZTEC_LAYERS)&&(_=he.parseInt(f.get(dr.AZTEC_LAYERS).toString()))),Go.encodeLayers(r,a,l,u,m,y,_)}static encodeLayers(r,a,l,u,f,m,y){if(a!==_e.AZTEC)throw new R("Can only encode AZTEC, but got "+a);let _=pn.encode(Y.getBytes(r,f),m,y);return Go.renderResult(_,l,u)}static renderResult(r,a,l){let u=r.getMatrix();if(u==null)throw new De;let f=u.getWidth(),m=u.getHeight(),y=Math.max(a,f),_=Math.max(l,m),v=Math.min(y/f,_/m),I=(y-f*v)/2,k=(_-m*v)/2,L=new lt(y,_);for(let q=0,Z=k;q<m;q++,Z+=v)for(let J=0,ce=I;J<f;J++,ce+=v)u.get(J,q)&&L.setRegion(ce,Z,v,v);return L}}n.AbstractExpandedDecoder=tr,n.ArgumentException=C,n.ArithmeticException=Be,n.AztecCode=Jn,n.AztecCodeReader=ti,n.AztecCodeWriter=Go,n.AztecDecoder=ot,n.AztecDetector=Lr,n.AztecDetectorResult=At,n.AztecEncoder=pn,n.AztecHighLevelEncoder=ha,n.AztecPoint=Pn,n.BarcodeFormat=_e,n.Binarizer=$,n.BinaryBitmap=P,n.BitArray=Ue,n.BitMatrix=lt,n.BitSource=hr,n.BrowserAztecCodeReader=Pr,n.BrowserBarcodeReader=Bo,n.BrowserCodeReader=ve,n.BrowserDatamatrixCodeReader=os,n.BrowserMultiFormatReader=cs,n.BrowserPDF417Reader=bl,n.BrowserQRCodeReader=vl,n.BrowserQRCodeSvgWriter=j,n.CharacterSetECI=U,n.ChecksumException=B,n.Code128Reader=Me,n.Code39Reader=zt,n.DataMatrixDecodedBitStreamParser=ii,n.DataMatrixReader=di,n.DecodeHintType=je,n.DecoderResult=It,n.DefaultGridSampler=Hn,n.DetectorResult=Qn,n.EAN13Reader=Oe,n.EncodeHintType=dr,n.Exception=w,n.FormatException=F,n.GenericGF=Ve,n.GenericGFPoly=jt,n.GlobalHistogramBinarizer=re,n.GridSampler=Sr,n.GridSamplerInstance=Rn,n.HTMLCanvasElementLuminanceSource=ut,n.HybridBinarizer=fe,n.ITFReader=xt,n.IllegalArgumentException=R,n.IllegalStateException=De,n.InvertedLuminanceSource=qe,n.LuminanceSource=tt,n.MathUtils=et,n.MultiFormatOneDReader=ni,n.MultiFormatReader=Fo,n.MultiFormatWriter=we,n.NotFoundException=ae,n.OneDReader=Zt,n.PDF417DecodedBitStreamParser=xe,n.PDF417DecoderErrorCorrection=qi,n.PDF417Reader=fr,n.PDF417ResultMetadata=Ts,n.PerspectiveTransform=Gt,n.PlanarYUVLuminanceSource=Ye,n.QRCodeByteMatrix=la,n.QRCodeDataMask=Nr,n.QRCodeDecodedBitStreamParser=Bn,n.QRCodeDecoderErrorCorrectionLevel=en,n.QRCodeDecoderFormatInformation=yr,n.QRCodeEncoder=D,n.QRCodeEncoderQRCode=hs,n.QRCodeMaskUtil=on,n.QRCodeMatrixUtil=p,n.QRCodeMode=Tt,n.QRCodeReader=yi,n.QRCodeVersion=Et,n.QRCodeWriter=le,n.RGBLuminanceSource=Ht,n.RSS14Reader=Nn,n.RSSExpandedReader=ke,n.ReaderException=oa,n.ReedSolomonDecoder=$e,n.ReedSolomonEncoder=us,n.ReedSolomonException=at,n.Result=Te,n.ResultMetadataType=_t,n.ResultPoint=We,n.StringUtils=Y,n.UnsupportedOperationException=Q,n.VideoInputDevice=K,n.WhiteRectangleDetector=Rt,n.WriterException=cn,n.ZXingArrays=Le,n.ZXingCharset=gr,n.ZXingInteger=he,n.ZXingStandardCharsets=Tn,n.ZXingStringBuilder=G,n.ZXingStringEncoding=X,n.ZXingSystem=ne,n.createAbstractExpandedDecoder=pr,Object.defineProperty(n,"__esModule",{value:!0})}))})(gu,gu.exports)),gu.exports}var lr=n8();const r8=qf(lr),i8=Sb({__proto__:null,default:r8},[lr]);var iE=(function(){function s(e,n,o){if(this.formatMap=new Map([[yt.QR_CODE,lr.BarcodeFormat.QR_CODE],[yt.AZTEC,lr.BarcodeFormat.AZTEC],[yt.CODABAR,lr.BarcodeFormat.CODABAR],[yt.CODE_39,lr.BarcodeFormat.CODE_39],[yt.CODE_93,lr.BarcodeFormat.CODE_93],[yt.CODE_128,lr.BarcodeFormat.CODE_128],[yt.DATA_MATRIX,lr.BarcodeFormat.DATA_MATRIX],[yt.MAXICODE,lr.BarcodeFormat.MAXICODE],[yt.ITF,lr.BarcodeFormat.ITF],[yt.EAN_13,lr.BarcodeFormat.EAN_13],[yt.EAN_8,lr.BarcodeFormat.EAN_8],[yt.PDF_417,lr.BarcodeFormat.PDF_417],[yt.RSS_14,lr.BarcodeFormat.RSS_14],[yt.RSS_EXPANDED,lr.BarcodeFormat.RSS_EXPANDED],[yt.UPC_A,lr.BarcodeFormat.UPC_A],[yt.UPC_E,lr.BarcodeFormat.UPC_E],[yt.UPC_EAN_EXTENSION,lr.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!i8)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=o;var h=this.createZXingFormats(e),g=new Map;g.set(lr.DecodeHintType.POSSIBLE_FORMATS,h),g.set(lr.DecodeHintType.TRY_HARDER,!1),this.hints=g}return s.prototype.decodeAsync=function(e){var n=this;return new Promise(function(o,h){try{o(n.decode(e))}catch(g){h(g)}})},s.prototype.decode=function(e){var n=new lr.MultiFormatReader(this.verbose,this.hints),o=new lr.HTMLCanvasElementLuminanceSource(e),h=new lr.BinaryBitmap(new lr.HybridBinarizer(o)),g=n.decode(h);return{text:g.text,format:X_.create(this.toHtml5QrcodeSupportedFormats(g.format)),debugData:this.createDebugData()}},s.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,h){e.set(n,o)}),e},s.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},s.prototype.createZXingFormats=function(e){for(var n=[],o=0,h=e;o<h.length;o++){var g=h[o];this.formatMap.has(g)?n.push(this.formatMap.get(g)):this.logger.logError("".concat(g," is not supported by")+"ZXingHtml5QrcodeShim")}return n},s.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},s})(),s8=function(s,e,n,o){function h(g){return g instanceof n?g:new n(function(x){x(g)})}return new(n||(n=Promise))(function(g,x){function T(C){try{w(o.next(C))}catch(R){x(R)}}function b(C){try{w(o.throw(C))}catch(R){x(R)}}function w(C){C.done?g(C.value):h(C.value).then(T,b)}w((o=o.apply(s,e||[])).next())})},a8=function(s,e){var n={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},o,h,g,x;return x={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function T(w){return function(C){return b([w,C])}}function b(w){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(n=0)),n;)try{if(o=1,h&&(g=w[0]&2?h.return:w[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,w[1])).done)return g;switch(h=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,h=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(g=n.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){n.label=w[1];break}if(w[0]===6&&n.label<g[1]){n.label=g[1],g=w;break}if(g&&n.label<g[2]){n.label=g[2],n.ops.push(w);break}g[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(s,n)}catch(C){w=[6,C],h=0}finally{o=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},sE=(function(){function s(e,n,o){if(this.formatMap=new Map([[yt.QR_CODE,"qr_code"],[yt.AZTEC,"aztec"],[yt.CODABAR,"codabar"],[yt.CODE_39,"code_39"],[yt.CODE_93,"code_93"],[yt.CODE_128,"code_128"],[yt.DATA_MATRIX,"data_matrix"],[yt.ITF,"itf"],[yt.EAN_13,"ean_13"],[yt.EAN_8,"ean_8"],[yt.PDF_417,"pdf417"],[yt.UPC_A,"upc_a"],[yt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!s.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=o;var h=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(h),!this.detector)throw"BarcodeDetector detector not supported"}return s.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},s.prototype.decodeAsync=function(e){return s8(this,void 0,void 0,function(){var n,o;return a8(this,function(h){switch(h.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=h.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return o=this.selectLargestBarcode(n),[2,{text:o.rawValue,format:X_.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}]}})})},s.prototype.selectLargestBarcode=function(e){for(var n=null,o=0,h=0,g=e;h<g.length;h++){var x=g[h],T=x.boundingBox.width*x.boundingBox.height;T>o&&(o=T,n=x)}if(!n)throw"No largest barcode found";return n},s.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],o=0,h=e;o<h.length;o++){var g=h[o];this.formatMap.has(g)?n.push(this.formatMap.get(g)):this.logger.warn("".concat(g," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},s.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},s.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,h){e.set(n,o)}),e},s.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},s})(),aE=function(s,e,n,o){function h(g){return g instanceof n?g:new n(function(x){x(g)})}return new(n||(n=Promise))(function(g,x){function T(C){try{w(o.next(C))}catch(R){x(R)}}function b(C){try{w(o.throw(C))}catch(R){x(R)}}function w(C){C.done?g(C.value):h(C.value).then(T,b)}w((o=o.apply(s,e||[])).next())})},oE=function(s,e){var n={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},o,h,g,x;return x={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function T(w){return function(C){return b([w,C])}}function b(w){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(n=0)),n;)try{if(o=1,h&&(g=w[0]&2?h.return:w[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,w[1])).done)return g;switch(h=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,h=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(g=n.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){n.label=w[1];break}if(w[0]===6&&n.label<g[1]){n.label=g[1],g=w;break}if(g&&n.label<g[2]){n.label=g[2],n.ops.push(w);break}g[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(s,n)}catch(C){w=[6,C],h=0}finally{o=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},o8=(function(){function s(e,n,o,h){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=o,n&&sE.isSupported()?(this.primaryDecoder=new sE(e,o,h),this.secondaryDecoder=new iE(e,o,h)):this.primaryDecoder=new iE(e,o,h)}return s.prototype.decodeAsync=function(e){return aE(this,void 0,void 0,function(){var n;return oE(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,o.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},s.prototype.decodeRobustlyAsync=function(e){return aE(this,void 0,void 0,function(){var n,o;return oE(this,function(h){switch(h.label){case 0:n=performance.now(),h.label=1;case 1:return h.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,h.sent()];case 3:if(o=h.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw o;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},s.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},s.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},s.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,o=this.executionResults;n<o.length;n++){var h=o[n];e+=h}var g=e/this.executionResults.length;console.log("".concat(g," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},s})(),am=(function(){var s=function(e,n){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(o[g]=h[g])},s(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");s(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Ff=function(s,e,n,o){function h(g){return g instanceof n?g:new n(function(x){x(g)})}return new(n||(n=Promise))(function(g,x){function T(C){try{w(o.next(C))}catch(R){x(R)}}function b(C){try{w(o.throw(C))}catch(R){x(R)}}function w(C){C.done?g(C.value):h(C.value).then(T,b)}w((o=o.apply(s,e||[])).next())})},jf=function(s,e){var n={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},o,h,g,x;return x={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function T(w){return function(C){return b([w,C])}}function b(w){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(n=0)),n;)try{if(o=1,h&&(g=w[0]&2?h.return:w[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,w[1])).done)return g;switch(h=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,h=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(g=n.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){n.label=w[1];break}if(w[0]===6&&n.label<g[1]){n.label=g[1],g=w;break}if(g&&n.label<g[2]){n.label=g[2],n.ops.push(w);break}g[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(s,n)}catch(C){w=[6,C],h=0}finally{o=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},W_=(function(){function s(e,n){this.name=e,this.track=n}return s.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},s.prototype.apply=function(e){var n={};n[this.name]=e;var o={advanced:[n]};return this.track.applyConstraints(o)},s.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},s})(),l8=(function(s){am(e,s);function e(n,o){return s.call(this,n,o)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var o={};o[this.name]=n;var h={advanced:[o]};return this.track.applyConstraints(h)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),o=n[this.name];return{min:o.min,max:o.max,step:o.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(W_),c8=(function(s){am(e,s);function e(n){return s.call(this,"zoom",n)||this}return e})(l8),u8=(function(s){am(e,s);function e(n){return s.call(this,"torch",n)||this}return e})(W_),h8=(function(){function s(e){this.track=e}return s.prototype.zoomFeature=function(){return new c8(this.track)},s.prototype.torchFeature=function(){return new u8(this.track)},s})(),f8=(function(){function s(e,n,o){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=o,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return s.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},s.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var o=e.surface.clientWidth,h=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(o,h),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},s.create=function(e,n,o,h){return Ff(this,void 0,void 0,function(){var g,x;return jf(this,function(T){switch(T.label){case 0:return g=new s(e,n,h),o.aspectRatio?(x={aspectRatio:o.aspectRatio},[4,g.getFirstTrackOrFail().applyConstraints(x)]):[3,2];case 1:T.sent(),T.label=2;case 2:return g.setupSurface(),[2,g]}})})},s.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},s.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},s.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},s.prototype.resume=function(e){this.failIfClosed();var n=this,o=function(){setTimeout(e,200),n.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.play()},s.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},s.prototype.getSurface=function(){return this.failIfClosed(),this.surface},s.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},s.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},s.prototype.applyVideoConstraints=function(e){return Ff(this,void 0,void 0,function(){return jf(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},s.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,o){var h=e.mediaStream.getVideoTracks(),g=h.length,x=0;e.mediaStream.getVideoTracks().forEach(function(T){e.mediaStream.removeTrack(T),T.stop(),++x,x>=g&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},s.prototype.getCapabilities=function(){return new h8(this.getFirstTrackOrFail())},s})(),d8=(function(){function s(e){this.mediaStream=e}return s.prototype.render=function(e,n,o){return Ff(this,void 0,void 0,function(){return jf(this,function(h){return[2,f8.create(e,this.mediaStream,n,o)]})})},s.create=function(e){return Ff(this,void 0,void 0,function(){var n,o;return jf(this,function(h){switch(h.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return o=h.sent(),[2,new s(o)]}})})},s})(),lE=function(s,e,n,o){function h(g){return g instanceof n?g:new n(function(x){x(g)})}return new(n||(n=Promise))(function(g,x){function T(C){try{w(o.next(C))}catch(R){x(R)}}function b(C){try{w(o.throw(C))}catch(R){x(R)}}function w(C){C.done?g(C.value):h(C.value).then(T,b)}w((o=o.apply(s,e||[])).next())})},cE=function(s,e){var n={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},o,h,g,x;return x={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function T(w){return function(C){return b([w,C])}}function b(w){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(n=0)),n;)try{if(o=1,h&&(g=w[0]&2?h.return:w[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,w[1])).done)return g;switch(h=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,h=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(g=n.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){n.label=w[1];break}if(w[0]===6&&n.label<g[1]){n.label=g[1],g=w;break}if(g&&n.label<g[2]){n.label=g[2],n.ops.push(w);break}g[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(s,n)}catch(C){w=[6,C],h=0}finally{o=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},g8=(function(){function s(){}return s.failIfNotSupported=function(){return lE(this,void 0,void 0,function(){return cE(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new s]})})},s.prototype.create=function(e){return lE(this,void 0,void 0,function(){return cE(this,function(n){return[2,d8.create(e)]})})},s})(),m8=function(s,e,n,o){function h(g){return g instanceof n?g:new n(function(x){x(g)})}return new(n||(n=Promise))(function(g,x){function T(C){try{w(o.next(C))}catch(R){x(R)}}function b(C){try{w(o.throw(C))}catch(R){x(R)}}function w(C){C.done?g(C.value):h(C.value).then(T,b)}w((o=o.apply(s,e||[])).next())})},p8=function(s,e){var n={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},o,h,g,x;return x={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function T(w){return function(C){return b([w,C])}}function b(w){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(n=0)),n;)try{if(o=1,h&&(g=w[0]&2?h.return:w[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,w[1])).done)return g;switch(h=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,h=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(g=n.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){n.label=w[1];break}if(w[0]===6&&n.label<g[1]){n.label=g[1],g=w;break}if(g&&n.label<g[2]){n.label=g[2],n.ops.push(w);break}g[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(s,n)}catch(C){w=[6,C],h=0}finally{o=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},y8=(function(){function s(){}return s.retrieve=function(){if(navigator.mediaDevices)return s.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?s.getCamerasFromMediaStreamTrack():s.rejectWithError()},s.rejectWithError=function(){var e=rc.unableToQuerySupportedDevices();return s.isHttpsOrLocalhost()||(e=rc.insecureContextCameraQueryError()),Promise.reject(e)},s.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},s.getCamerasFromMediaDevices=function(){return m8(this,void 0,void 0,function(){var e,n,o,h,g,x,T;return p8(this,function(b){switch(b.label){case 0:return e=function(w){for(var C=w.getVideoTracks(),R=0,P=C;R<P.length;R++){var B=P[R];B.enabled=!1,B.stop(),w.removeTrack(B)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=b.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(o=b.sent(),h=[],g=0,x=o;g<x.length;g++)T=x[g],T.kind==="videoinput"&&h.push({id:T.deviceId,label:T.label});return e(n),[2,h]}})})},s.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var o=function(g){for(var x=[],T=0,b=g;T<b.length;T++){var w=b[T];w.kind==="video"&&x.push({id:w.id,label:w.label})}e(x)},h=MediaStreamTrack;h.getSources(o)})},s})(),Tr;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.NOT_STARTED=1]="NOT_STARTED",s[s.SCANNING=2]="SCANNING",s[s.PAUSED=3]="PAUSED"})(Tr||(Tr={}));var x8=(function(){function s(){this.state=Tr.NOT_STARTED,this.onGoingTransactionNewState=Tr.UNKNOWN}return s.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},s.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},s.prototype.execute=function(){if(this.onGoingTransactionNewState===Tr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Tr.UNKNOWN,this.directTransition(e)},s.prototype.cancel=function(){if(this.onGoingTransactionNewState===Tr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Tr.UNKNOWN},s.prototype.getState=function(){return this.state},s.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Tr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},s.prototype.validateTransition=function(e){switch(this.state){case Tr.UNKNOWN:throw"Transition from unknown is not allowed";case Tr.NOT_STARTED:this.failIfNewStateIs(e,[Tr.PAUSED]);break;case Tr.SCANNING:break;case Tr.PAUSED:break}},s.prototype.failIfNewStateIs=function(e,n){for(var o=0,h=n;o<h.length;o++){var g=h[o];if(e===g)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},s})(),E8=(function(){function s(e){this.stateManager=e}return s.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},s.prototype.directTransition=function(e){this.stateManager.directTransition(e)},s.prototype.getState=function(){return this.stateManager.getState()},s.prototype.canScanFile=function(){return this.stateManager.getState()===Tr.NOT_STARTED},s.prototype.isScanning=function(){return this.stateManager.getState()!==Tr.NOT_STARTED},s.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Tr.SCANNING},s.prototype.isPaused=function(){return this.stateManager.getState()===Tr.PAUSED},s})(),w8=(function(){function s(){}return s.create=function(){return new E8(new x8)},s})(),_8=(function(){var s=function(e,n){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(o[g]=h[g])},s(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");s(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),rs=(function(s){_8(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(J4),A8=(function(){function s(e,n){this.logger=n,this.fps=rs.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=rs.DEFAULT_DISABLE_FLIP}return s.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Y_.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},s.prototype.isShadedBoxEnabled=function(){return!Ia(this.qrbox)},s.create=function(e,n){return new s(e,n)},s})(),b8=(function(){function s(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var o;typeof n=="boolean"?this.verbose=n===!0:n&&(o=n,this.verbose=o.verbose===!0,o.experimentalFeatures),this.logger=new e8(this.verbose),this.qrcode=new o8(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(o),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=w8.create()}return s.prototype.start=function(e,n,o,h){var g=this;if(!e)throw"cameraIdOrConfig is required";if(!o||typeof o!="function")throw"qrCodeSuccessCallback is required and should be a function.";var x;h?x=h:x=this.verbose?this.logger.log:function(){};var T=A8.create(n,this.logger);this.clearElement();var b=!1;T.videoConstraints&&(T.isMediaStreamConstraintsValid()?b=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var w=b,C=document.getElementById(this.elementId);C.clientWidth?C.clientWidth:rs.DEFAULT_WIDTH,C.style.position="relative",this.shouldScan=!0,this.element=C;var R=this,P=this.stateManagerProxy.startTransition(Tr.SCANNING);return new Promise(function(B,$){var ne=w?T.videoConstraints:R.createVideoConstraints(e);if(!ne){P.cancel(),$("videoConstraints should be defined");return}var se={};(!w||T.aspectRatio)&&(se.aspectRatio=T.aspectRatio);var Qe={onRenderSurfaceReady:function(Le,he){R.setupUi(Le,he,T),R.isScanning=!0,R.foreverScan(T,o,x)}};g8.failIfNotSupported().then(function(Le){Le.create(ne).then(function(he){return he.render(g.element,se,Qe).then(function(Ue){R.renderedCamera=Ue,P.execute(),B(null)}).catch(function(Ue){P.cancel(),$(Ue)})}).catch(function(he){P.cancel(),$(rc.errorGettingUserMedia(he))})}).catch(function(Le){P.cancel(),$(rc.cameraStreamingNotSupported())})})},s.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Tr.PAUSED),this.showPausedState(),(Ia(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},s.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(Tr.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},s.prototype.getState=function(){return this.stateManagerProxy.getState()},s.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Tr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var o=function(){if(e.element){var g=document.getElementById(rs.SHADED_REGION_ELEMENT_ID);g&&e.element.removeChild(g)}},h=this;return this.renderedCamera.close().then(function(){return h.renderedCamera=null,h.element&&(h.element.removeChild(h.canvasElement),h.canvasElement=null),o(),h.qrRegion&&(h.qrRegion=null),h.context&&(h.context=null),n.execute(),h.hidePausedState(),h.isScanning=!1,Promise.resolve()})},s.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(o){return o.decodedText})},s.prototype.scanFileV2=function(e,n){var o=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ia(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(h,g){o.possiblyCloseLastScanImageFile(),o.clearElement(),o.lastScanImageFile=URL.createObjectURL(e);var x=new Image;x.onload=function(){var T=x.width,b=x.height,w=document.getElementById(o.elementId),C=w.clientWidth?w.clientWidth:rs.DEFAULT_WIDTH,R=Math.max(w.clientHeight?w.clientHeight:b,rs.FILE_SCAN_MIN_HEIGHT),P=o.computeCanvasDrawConfig(T,b,C,R);if(n){var B=o.createCanvasElement(C,R,"qr-canvas-visible");B.style.display="inline-block",w.appendChild(B);var $=B.getContext("2d");if(!$)throw"Unable to get 2d context from canvas";$.canvas.width=C,$.canvas.height=R,$.drawImage(x,0,0,T,b,P.x,P.y,P.width,P.height)}var ne=rs.FILE_SCAN_HIDDEN_CANVAS_PADDING,se=Math.max(x.width,P.width),Qe=Math.max(x.height,P.height),Le=se+2*ne,he=Qe+2*ne,Ue=o.createCanvasElement(Le,he);w.appendChild(Ue);var pt=Ue.getContext("2d");if(!pt)throw"Unable to get 2d context from canvas";pt.canvas.width=Le,pt.canvas.height=he,pt.drawImage(x,0,0,T,b,ne,ne,se,Qe);try{o.qrcode.decodeRobustlyAsync(Ue).then(function(je){h(nE.createFromQrcodeResult(je))}).catch(g)}catch(je){g("QR code parse error, error = ".concat(je))}},x.onerror=g,x.onabort=g,x.onstalled=g,x.onsuspend=g,x.src=URL.createObjectURL(e)})},s.prototype.clear=function(){this.clearElement()},s.getCameras=function(){return y8.retrieve()},s.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},s.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},s.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},s.prototype.applyVideoConstraints=function(e){if(e){if(!Y_.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},s.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},s.prototype.getSupportedFormats=function(e){var n=[yt.QR_CODE,yt.AZTEC,yt.CODABAR,yt.CODE_39,yt.CODE_93,yt.CODE_128,yt.DATA_MATRIX,yt.MAXICODE,yt.ITF,yt.EAN_13,yt.EAN_8,yt.PDF_417,yt.RSS_14,yt.RSS_EXPANDED,yt.UPC_A,yt.UPC_E,yt.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var o=[],h=0,g=e.formatsToSupport;h<g.length;h++){var x=g[h];Z4(x)?o.push(x):this.logger.warn("Invalid format: ".concat(x," passed in config, ignoring."))}if(o.length===0)throw"None of formatsToSupport match supported values.";return o},s.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Ia(e))return!0;if(!Ia(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Ia(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return Ia(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},s.prototype.validateQrboxSize=function(e,n,o){var h=this,g=o.qrbox;this.validateQrboxConfig(g);var x=this.toQrdimensions(e,n,g),T=function(w){if(w<rs.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(rs.MIN_QR_BOX_SIZE,"px.")},b=function(w){return w>e&&(h.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),w=e),w};T(x.width),T(x.height),x.width=b(x.width)},s.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},s.prototype.toQrdimensions=function(e,n,o){if(typeof o=="number")return{width:o,height:o};if(typeof o=="function")try{return o(e,n)}catch(h){throw new Error("qrbox config was passed as a function but it failed with unknown error"+h)}return o},s.prototype.setupUi=function(e,n,o){o.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,o);var h=Ia(o.qrbox)?{width:e,height:n}:o.qrbox;this.validateQrboxConfig(h);var g=this.toQrdimensions(e,n,h);g.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var x=o.isShadedBoxEnabled()&&g.height<=n,T={x:0,y:0,width:e,height:n},b=x?this.getShadedRegionBounds(e,n,g):T,w=this.createCanvasElement(b.width,b.height),C={willReadFrequently:!0},R=w.getContext("2d",C);R.canvas.width=b.width,R.canvas.height=b.height,this.element.append(w),x&&this.possiblyInsertShadingElement(this.element,e,n,g),this.createScannerPausedUiElement(this.element),this.qrRegion=b,this.context=R,this.canvasElement=w},s.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=rc.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},s.prototype.scanContext=function(e,n){var o=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(h){return e(h.text,nE.createFromQrcodeResult(h)),o.possiblyUpdateShaders(!0),!0}).catch(function(h){o.possiblyUpdateShaders(!1);var g=rc.codeParseError(h);return n(g,$4.createFrom(g)),!1})},s.prototype.foreverScan=function(e,n,o){var h=this;if(this.shouldScan&&this.renderedCamera){var g=this.renderedCamera.getSurface(),x=g.videoWidth/g.clientWidth,T=g.videoHeight/g.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var b=this.qrRegion.width*x,w=this.qrRegion.height*T,C=this.qrRegion.x*x,R=this.qrRegion.y*T;this.context.drawImage(g,C,R,b,w,0,0,this.qrRegion.width,this.qrRegion.height);var P=function(){h.foreverScanTimeout=setTimeout(function(){h.foreverScan(e,n,o)},h.getTimeoutFps(e.fps))};this.scanContext(n,o).then(function(B){!B&&e.disableFlip!==!0?(h.context.translate(h.context.canvas.width,0),h.context.scale(-1,1),h.scanContext(n,o).finally(function(){P()})):P()}).catch(function(B){h.logger.logError("Error happend while scanning context",B),P()})}},s.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",o="deviceId",h={user:!0,environment:!0},g="exact",x=function($){if($ in h)return!0;throw"config has invalid 'facingMode' value = "+"'".concat($,"'")},T=Object.keys(e);if(T.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(T.length," keys");var b=Object.keys(e)[0];if(b!==n&&b!==o)throw"Only '".concat(n,"' and '").concat(o,"' ")+" are supported for 'cameraIdOrConfig'";if(b===n){var w=e.facingMode;if(typeof w=="string"){if(x(w))return{facingMode:w}}else if(typeof w=="object")if(g in w){if(x(w["".concat(g)]))return{facingMode:{exact:w["".concat(g)]}}}else throw"'facingMode' should be string or object with"+" ".concat(g," as key.");else{var C=typeof w;throw"Invalid type of 'facingMode' = ".concat(C)}}else{var R=e.deviceId;if(typeof R=="string")return{deviceId:R};if(typeof R=="object"){if(g in R)return{deviceId:{exact:R["".concat(g)]}};throw"'deviceId' should be string or object with"+" ".concat(g," as key.")}else{var P=typeof R;throw"Invalid type of 'deviceId' = ".concat(P)}}}var B=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(B)},s.prototype.computeCanvasDrawConfig=function(e,n,o,h){if(e<=o&&n<=h){var g=(o-e)/2,x=(h-n)/2;return{x:g,y:x,width:e,height:n}}else{var T=e,b=n;return e>o&&(n=o/e*n,e=o),n>h&&(e=h/n*e,n=h),this.logger.log("Image downsampled from "+"".concat(T,"X").concat(b)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,o,h)}},s.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},s.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?rs.BORDER_SHADER_MATCH_COLOR:rs.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},s.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},s.prototype.createCanvasElement=function(e,n,o){var h=e,g=n,x=document.createElement("canvas");return x.style.width="".concat(h,"px"),x.style.height="".concat(g,"px"),x.style.display="none",x.id=Ia(o)?"qr-canvas":o,x},s.prototype.getShadedRegionBounds=function(e,n,o){if(o.width>e||o.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-o.width)/2,y:(n-o.height)/2,width:o.width,height:o.height}},s.prototype.possiblyInsertShadingElement=function(e,n,o,h){if(!(n-h.width<1||o-h.height<1)){var g=document.createElement("div");g.style.position="absolute";var x=(n-h.width)/2,T=(o-h.height)/2;if(g.style.borderLeft="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderRight="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderTop="".concat(T,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderBottom="".concat(T,"px solid rgba(0, 0, 0, 0.48)"),g.style.boxSizing="border-box",g.style.top="0px",g.style.bottom="0px",g.style.left="0px",g.style.right="0px",g.id="".concat(rs.SHADED_REGION_ELEMENT_ID),n-h.width<11||o-h.height<11)this.hasBorderShaders=!1;else{var b=5,w=40;this.insertShaderBorders(g,w,b,-b,null,0,!0),this.insertShaderBorders(g,w,b,-b,null,0,!1),this.insertShaderBorders(g,w,b,null,-b,0,!0),this.insertShaderBorders(g,w,b,null,-b,0,!1),this.insertShaderBorders(g,b,w+b,-b,null,-b,!0),this.insertShaderBorders(g,b,w+b,null,-b,-b,!0),this.insertShaderBorders(g,b,w+b,-b,null,-b,!1),this.insertShaderBorders(g,b,w+b,null,-b,-b,!1),this.hasBorderShaders=!0}e.append(g)}},s.prototype.insertShaderBorders=function(e,n,o,h,g,x,T){var b=document.createElement("div");b.style.position="absolute",b.style.backgroundColor=rs.BORDER_SHADER_DEFAULT_COLOR,b.style.width="".concat(n,"px"),b.style.height="".concat(o,"px"),h!==null&&(b.style.top="".concat(h,"px")),g!==null&&(b.style.bottom="".concat(g,"px")),T?b.style.left="".concat(x,"px"):b.style.right="".concat(x,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(b),e.appendChild(b)},s.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},s.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},s.prototype.getTimeoutFps=function(e){return 1e3/e},s})(),uE;(function(s){s[s.STATUS_DEFAULT=0]="STATUS_DEFAULT",s[s.STATUS_SUCCESS=1]="STATUS_SUCCESS",s[s.STATUS_WARNING=2]="STATUS_WARNING",s[s.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(uE||(uE={}));const v8=({onCode:s})=>(ye.useEffect(()=>{const e="qr-reader",n=new b8(e);return n.start({facingMode:"environment"},{fps:10,qrbox:250},o=>{s(o)},()=>{}).catch(o=>{console.error("Kunne ikke starte QR-leser:",o)}),()=>{n.stop().then(()=>n.clear()).catch(()=>{})}},[s]),O.jsx("div",{id:"qr-reader",style:{width:"100%"}}));async function T8(){const e=(await Mr(cr(Ct,"terms"))).docs.map(n=>{const o=n.data(),h=typeof o?.value=="number"?o.value:void 0;if(typeof h!="number")return null;const g=typeof o?.label=="string"?o.label:"",x=typeof o?.order=="number"?o.order:void 0;return{value:h,label:g,order:x}}).filter(Boolean);return e.sort((n,o)=>(n.order??n.value)-(o.order??o.value)),e}function om(){const[s,e]=ye.useState([]),[n,o]=ye.useState(!0),[h,g]=ye.useState(null);ye.useEffect(()=>{let T=!0;return(async()=>{try{o(!0);const b=await T8();T&&e(b)}catch(b){T&&g(b)}finally{T&&o(!1)}})(),()=>{T=!1}},[]);const x=ye.useMemo(()=>{const T=new Map;for(const b of s)T.set(b.value,b);return T},[s]);return{options:s,byValue:x,loading:n,error:h}}function yl(s,e){if(e==null)return"Ukjent termin";let n;return Array.isArray(s)?n=s.find(o=>o.value===e):s instanceof Map&&(n=s.get(e)),n&&n.label?n.label:`Termin ${e}`}function C8(s){if(s==="Testmodul 1 - Testtermin 1")return s;const e=/(Modul)\s+(\d+)\s*-\s*(Blokk|Termin)\s+(\d+)/i,n=s.match(e);if(n){const g=n[2],x=n[4];return`M${g} - T${x}`}const o=/(Modul|Termin)\s+(\d+)/i,h=s.match(o);return h?`M${h[2]}`:s}function S8(s,e){if(e==null)return"";const n=yl(s,e);return C8(n)}var I8=EE();const R8=qf(I8);var N8=s=>{switch(s){case"success":return M8;case"info":return L8;case"warning":return k8;case"error":return P8;default:return null}},O8=Array(12).fill(0),D8=({visible:s,className:e})=>Ge.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":s},Ge.createElement("div",{className:"sonner-spinner"},O8.map((n,o)=>Ge.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${o}`})))),M8=Ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ge.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),k8=Ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ge.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),L8=Ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ge.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),P8=Ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ge.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),B8=Ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ge.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ge.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),V8=()=>{let[s,e]=Ge.useState(document.hidden);return Ge.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),s},ng=1,U8=class{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{let e=this.subscribers.indexOf(s);this.subscribers.splice(e,1)}),this.publish=s=>{this.subscribers.forEach(e=>e(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var e;let{message:n,...o}=s,h=typeof s?.id=="number"||((e=s.id)==null?void 0:e.length)>0?s.id:ng++,g=this.toasts.find(T=>T.id===h),x=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(h)&&this.dismissedToasts.delete(h),g?this.toasts=this.toasts.map(T=>T.id===h?(this.publish({...T,...s,id:h,title:n}),{...T,...s,id:h,dismissible:x,title:n}):T):this.addToast({title:n,...o,dismissible:x,id:h}),h},this.dismiss=s=>(this.dismissedToasts.add(s),s||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:s,dismiss:!0})),s),this.message=(s,e)=>this.create({...e,message:s}),this.error=(s,e)=>this.create({...e,message:s,type:"error"}),this.success=(s,e)=>this.create({...e,type:"success",message:s}),this.info=(s,e)=>this.create({...e,type:"info",message:s}),this.warning=(s,e)=>this.create({...e,type:"warning",message:s}),this.loading=(s,e)=>this.create({...e,type:"loading",message:s}),this.promise=(s,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:s,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let o=s instanceof Promise?s:s(),h=n!==void 0,g,x=o.then(async b=>{if(g=["resolve",b],Ge.isValidElement(b))h=!1,this.create({id:n,type:"default",message:b});else if(j8(b)&&!b.ok){h=!1;let w=typeof e.error=="function"?await e.error(`HTTP error! status: ${b.status}`):e.error,C=typeof e.description=="function"?await e.description(`HTTP error! status: ${b.status}`):e.description;this.create({id:n,type:"error",message:w,description:C})}else if(e.success!==void 0){h=!1;let w=typeof e.success=="function"?await e.success(b):e.success,C=typeof e.description=="function"?await e.description(b):e.description;this.create({id:n,type:"success",message:w,description:C})}}).catch(async b=>{if(g=["reject",b],e.error!==void 0){h=!1;let w=typeof e.error=="function"?await e.error(b):e.error,C=typeof e.description=="function"?await e.description(b):e.description;this.create({id:n,type:"error",message:w,description:C})}}).finally(()=>{var b;h&&(this.dismiss(n),n=void 0),(b=e.finally)==null||b.call(e)}),T=()=>new Promise((b,w)=>x.then(()=>g[0]==="reject"?w(g[1]):b(g[1])).catch(w));return typeof n!="string"&&typeof n!="number"?{unwrap:T}:Object.assign(n,{unwrap:T})},this.custom=(s,e)=>{let n=e?.id||ng++;return this.create({jsx:s(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ji=new U8,F8=(s,e)=>{let n=e?.id||ng++;return ji.addToast({title:s,...e,id:n}),n},j8=s=>s&&typeof s=="object"&&"ok"in s&&typeof s.ok=="boolean"&&"status"in s&&typeof s.status=="number",z8=F8,H8=()=>ji.toasts,G8=()=>ji.getActiveToasts(),Dt=Object.assign(z8,{success:ji.success,info:ji.info,warning:ji.warning,error:ji.error,custom:ji.custom,message:ji.message,promise:ji.promise,dismiss:ji.dismiss,loading:ji.loading},{getHistory:H8,getToasts:G8});function q8(s,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",e==="top"&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=s:o.appendChild(document.createTextNode(s))}q8(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function af(s){return s.label!==void 0}var X8=3,Y8="32px",W8="16px",hE=4e3,K8=356,Q8=14,Z8=20,J8=200;function Ns(...s){return s.filter(Boolean).join(" ")}function $8(s){let[e,n]=s.split("-"),o=[];return e&&o.push(e),n&&o.push(n),o}var eR=s=>{var e,n,o,h,g,x,T,b,w,C,R;let{invert:P,toast:B,unstyled:$,interacting:ne,setHeights:se,visibleToasts:Qe,heights:Le,index:he,toasts:Ue,expanded:pt,removeToast:je,defaultRichColors:F,closeButton:z,style:U,cancelButtonStyle:Q,actionButtonStyle:X,className:Y="",descriptionClassName:G="",duration:lt,position:ae,gap:re,loadingIcon:fe,expandByDefault:tt,classNames:qe,icons:ut,closeButtonAriaLabel:K="Close toast",pauseWhenPageIsHidden:oe}=s,[ve,Te]=Ge.useState(null),[Se,_e]=Ge.useState(null),[Je,_t]=Ge.useState(!1),[It,An]=Ge.useState(!1),[jt,Be]=Ge.useState(!1),[Ve,at]=Ge.useState(!1),[De,$e]=Ge.useState(!1),[nt,ot]=Ge.useState(0),[et,Vt]=Ge.useState(0),We=Ge.useRef(B.duration||lt||hE),Qn=Ge.useRef(null),At=Ge.useRef(null),Rt=he===0,Sr=he+1<=Qe,Gt=B.type,Hn=B.dismissible!==!1,Rn=B.className||"",Pn=B.descriptionClassName||"",Lr=Ge.useMemo(()=>Le.findIndex(Ke=>Ke.toastId===B.id)||0,[Le,B.id]),ti=Ge.useMemo(()=>{var Ke;return(Ke=B.closeButton)!=null?Ke:z},[B.closeButton,z]),Pr=Ge.useMemo(()=>B.duration||lt||hE,[B.duration,lt]),Zt=Ge.useRef(0),Me=Ge.useRef(0),zt=Ge.useRef(0),xt=Ge.useRef(null),[bn,Ir]=ae.split("-"),Rr=Ge.useMemo(()=>Le.reduce((Ke,He,st)=>st>=Lr?Ke:Ke+He.height,0),[Le,Lr]),de=V8(),be=B.invert||P,Oe=Gt==="loading";Me.current=Ge.useMemo(()=>Lr*re+Rr,[Lr,Rr]),Ge.useEffect(()=>{We.current=Pr},[Pr]),Ge.useEffect(()=>{_t(!0)},[]),Ge.useEffect(()=>{let Ke=At.current;if(Ke){let He=Ke.getBoundingClientRect().height;return Vt(He),se(st=>[{toastId:B.id,height:He,position:B.position},...st]),()=>se(st=>st.filter(ht=>ht.toastId!==B.id))}},[se,B.id]),Ge.useLayoutEffect(()=>{if(!Je)return;let Ke=At.current,He=Ke.style.height;Ke.style.height="auto";let st=Ke.getBoundingClientRect().height;Ke.style.height=He,Vt(st),se(ht=>ht.find(St=>St.toastId===B.id)?ht.map(St=>St.toastId===B.id?{...St,height:st}:St):[{toastId:B.id,height:st,position:B.position},...ht])},[Je,B.title,B.description,se,B.id]);let rt=Ge.useCallback(()=>{An(!0),ot(Me.current),se(Ke=>Ke.filter(He=>He.toastId!==B.id)),setTimeout(()=>{je(B)},J8)},[B,je,se,Me]);Ge.useEffect(()=>{if(B.promise&&Gt==="loading"||B.duration===1/0||B.type==="loading")return;let Ke;return pt||ne||oe&&de?(()=>{if(zt.current<Zt.current){let He=new Date().getTime()-Zt.current;We.current=We.current-He}zt.current=new Date().getTime()})():We.current!==1/0&&(Zt.current=new Date().getTime(),Ke=setTimeout(()=>{var He;(He=B.onAutoClose)==null||He.call(B,B),rt()},We.current)),()=>clearTimeout(Ke)},[pt,ne,B,Gt,oe,de,rt]),Ge.useEffect(()=>{B.delete&&rt()},[rt,B.delete]);function ft(){var Ke,He,st;return ut!=null&&ut.loading?Ge.createElement("div",{className:Ns(qe?.loader,(Ke=B?.classNames)==null?void 0:Ke.loader,"sonner-loader"),"data-visible":Gt==="loading"},ut.loading):fe?Ge.createElement("div",{className:Ns(qe?.loader,(He=B?.classNames)==null?void 0:He.loader,"sonner-loader"),"data-visible":Gt==="loading"},fe):Ge.createElement(D8,{className:Ns(qe?.loader,(st=B?.classNames)==null?void 0:st.loader),visible:Gt==="loading"})}return Ge.createElement("li",{tabIndex:0,ref:At,className:Ns(Y,Rn,qe?.toast,(e=B?.classNames)==null?void 0:e.toast,qe?.default,qe?.[Gt],(n=B?.classNames)==null?void 0:n[Gt]),"data-sonner-toast":"","data-rich-colors":(o=B.richColors)!=null?o:F,"data-styled":!(B.jsx||B.unstyled||$),"data-mounted":Je,"data-promise":!!B.promise,"data-swiped":De,"data-removed":It,"data-visible":Sr,"data-y-position":bn,"data-x-position":Ir,"data-index":he,"data-front":Rt,"data-swiping":jt,"data-dismissible":Hn,"data-type":Gt,"data-invert":be,"data-swipe-out":Ve,"data-swipe-direction":Se,"data-expanded":!!(pt||tt&&Je),style:{"--index":he,"--toasts-before":he,"--z-index":Ue.length-he,"--offset":`${It?nt:Me.current}px`,"--initial-height":tt?"auto":`${et}px`,...U,...B.style},onDragEnd:()=>{Be(!1),Te(null),xt.current=null},onPointerDown:Ke=>{Oe||!Hn||(Qn.current=new Date,ot(Me.current),Ke.target.setPointerCapture(Ke.pointerId),Ke.target.tagName!=="BUTTON"&&(Be(!0),xt.current={x:Ke.clientX,y:Ke.clientY}))},onPointerUp:()=>{var Ke,He,st,ht;if(Ve||!Hn)return;xt.current=null;let St=Number(((Ke=At.current)==null?void 0:Ke.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),bt=Number(((He=At.current)==null?void 0:He.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),dn=new Date().getTime()-((st=Qn.current)==null?void 0:st.getTime()),sn=ve==="x"?St:bt,Gn=Math.abs(sn)/dn;if(Math.abs(sn)>=Z8||Gn>.11){ot(Me.current),(ht=B.onDismiss)==null||ht.call(B,B),_e(ve==="x"?St>0?"right":"left":bt>0?"down":"up"),rt(),at(!0),$e(!1);return}Be(!1),Te(null)},onPointerMove:Ke=>{var He,st,ht,St;if(!xt.current||!Hn||((He=window.getSelection())==null?void 0:He.toString().length)>0)return;let bt=Ke.clientY-xt.current.y,dn=Ke.clientX-xt.current.x,sn=(st=s.swipeDirections)!=null?st:$8(ae);!ve&&(Math.abs(dn)>1||Math.abs(bt)>1)&&Te(Math.abs(dn)>Math.abs(bt)?"x":"y");let Gn={x:0,y:0};ve==="y"?(sn.includes("top")||sn.includes("bottom"))&&(sn.includes("top")&&bt<0||sn.includes("bottom")&&bt>0)&&(Gn.y=bt):ve==="x"&&(sn.includes("left")||sn.includes("right"))&&(sn.includes("left")&&dn<0||sn.includes("right")&&dn>0)&&(Gn.x=dn),(Math.abs(Gn.x)>0||Math.abs(Gn.y)>0)&&$e(!0),(ht=At.current)==null||ht.style.setProperty("--swipe-amount-x",`${Gn.x}px`),(St=At.current)==null||St.style.setProperty("--swipe-amount-y",`${Gn.y}px`)}},ti&&!B.jsx?Ge.createElement("button",{"aria-label":K,"data-disabled":Oe,"data-close-button":!0,onClick:Oe||!Hn?()=>{}:()=>{var Ke;rt(),(Ke=B.onDismiss)==null||Ke.call(B,B)},className:Ns(qe?.closeButton,(h=B?.classNames)==null?void 0:h.closeButton)},(g=ut?.close)!=null?g:B8):null,B.jsx||ye.isValidElement(B.title)?B.jsx?B.jsx:typeof B.title=="function"?B.title():B.title:Ge.createElement(Ge.Fragment,null,Gt||B.icon||B.promise?Ge.createElement("div",{"data-icon":"",className:Ns(qe?.icon,(x=B?.classNames)==null?void 0:x.icon)},B.promise||B.type==="loading"&&!B.icon?B.icon||ft():null,B.type!=="loading"?B.icon||ut?.[Gt]||N8(Gt):null):null,Ge.createElement("div",{"data-content":"",className:Ns(qe?.content,(T=B?.classNames)==null?void 0:T.content)},Ge.createElement("div",{"data-title":"",className:Ns(qe?.title,(b=B?.classNames)==null?void 0:b.title)},typeof B.title=="function"?B.title():B.title),B.description?Ge.createElement("div",{"data-description":"",className:Ns(G,Pn,qe?.description,(w=B?.classNames)==null?void 0:w.description)},typeof B.description=="function"?B.description():B.description):null),ye.isValidElement(B.cancel)?B.cancel:B.cancel&&af(B.cancel)?Ge.createElement("button",{"data-button":!0,"data-cancel":!0,style:B.cancelButtonStyle||Q,onClick:Ke=>{var He,st;af(B.cancel)&&Hn&&((st=(He=B.cancel).onClick)==null||st.call(He,Ke),rt())},className:Ns(qe?.cancelButton,(C=B?.classNames)==null?void 0:C.cancelButton)},B.cancel.label):null,ye.isValidElement(B.action)?B.action:B.action&&af(B.action)?Ge.createElement("button",{"data-button":!0,"data-action":!0,style:B.actionButtonStyle||X,onClick:Ke=>{var He,st;af(B.action)&&((st=(He=B.action).onClick)==null||st.call(He,Ke),!Ke.defaultPrevented&&rt())},className:Ns(qe?.actionButton,(R=B?.classNames)==null?void 0:R.actionButton)},B.action.label):null))};function fE(){if(typeof window>"u"||typeof document>"u")return"ltr";let s=document.documentElement.getAttribute("dir");return s==="auto"||!s?window.getComputedStyle(document.documentElement).direction:s}function tR(s,e){let n={};return[s,e].forEach((o,h)=>{let g=h===1,x=g?"--mobile-offset":"--offset",T=g?W8:Y8;function b(w){["top","right","bottom","left"].forEach(C=>{n[`${x}-${C}`]=typeof w=="number"?`${w}px`:w})}typeof o=="number"||typeof o=="string"?b(o):typeof o=="object"?["top","right","bottom","left"].forEach(w=>{o[w]===void 0?n[`${x}-${w}`]=T:n[`${x}-${w}`]=typeof o[w]=="number"?`${o[w]}px`:o[w]}):b(T)}),n}var nR=ye.forwardRef(function(s,e){let{invert:n,position:o="bottom-right",hotkey:h=["altKey","KeyT"],expand:g,closeButton:x,className:T,offset:b,mobileOffset:w,theme:C="light",richColors:R,duration:P,style:B,visibleToasts:$=X8,toastOptions:ne,dir:se=fE(),gap:Qe=Q8,loadingIcon:Le,icons:he,containerAriaLabel:Ue="Notifications",pauseWhenPageIsHidden:pt}=s,[je,F]=Ge.useState([]),z=Ge.useMemo(()=>Array.from(new Set([o].concat(je.filter(oe=>oe.position).map(oe=>oe.position)))),[je,o]),[U,Q]=Ge.useState([]),[X,Y]=Ge.useState(!1),[G,lt]=Ge.useState(!1),[ae,re]=Ge.useState(C!=="system"?C:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),fe=Ge.useRef(null),tt=h.join("+").replace(/Key/g,"").replace(/Digit/g,""),qe=Ge.useRef(null),ut=Ge.useRef(!1),K=Ge.useCallback(oe=>{F(ve=>{var Te;return(Te=ve.find(Se=>Se.id===oe.id))!=null&&Te.delete||ji.dismiss(oe.id),ve.filter(({id:Se})=>Se!==oe.id)})},[]);return Ge.useEffect(()=>ji.subscribe(oe=>{if(oe.dismiss){F(ve=>ve.map(Te=>Te.id===oe.id?{...Te,delete:!0}:Te));return}setTimeout(()=>{R8.flushSync(()=>{F(ve=>{let Te=ve.findIndex(Se=>Se.id===oe.id);return Te!==-1?[...ve.slice(0,Te),{...ve[Te],...oe},...ve.slice(Te+1)]:[oe,...ve]})})})}),[]),Ge.useEffect(()=>{if(C!=="system"){re(C);return}if(C==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?re("dark"):re("light")),typeof window>"u")return;let oe=window.matchMedia("(prefers-color-scheme: dark)");try{oe.addEventListener("change",({matches:ve})=>{re(ve?"dark":"light")})}catch{oe.addListener(({matches:Te})=>{try{re(Te?"dark":"light")}catch(Se){console.error(Se)}})}},[C]),Ge.useEffect(()=>{je.length<=1&&Y(!1)},[je]),Ge.useEffect(()=>{let oe=ve=>{var Te,Se;h.every(_e=>ve[_e]||ve.code===_e)&&(Y(!0),(Te=fe.current)==null||Te.focus()),ve.code==="Escape"&&(document.activeElement===fe.current||(Se=fe.current)!=null&&Se.contains(document.activeElement))&&Y(!1)};return document.addEventListener("keydown",oe),()=>document.removeEventListener("keydown",oe)},[h]),Ge.useEffect(()=>{if(fe.current)return()=>{qe.current&&(qe.current.focus({preventScroll:!0}),qe.current=null,ut.current=!1)}},[fe.current]),Ge.createElement("section",{ref:e,"aria-label":`${Ue} ${tt}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},z.map((oe,ve)=>{var Te;let[Se,_e]=oe.split("-");return je.length?Ge.createElement("ol",{key:oe,dir:se==="auto"?fE():se,tabIndex:-1,ref:fe,className:T,"data-sonner-toaster":!0,"data-theme":ae,"data-y-position":Se,"data-lifted":X&&je.length>1&&!g,"data-x-position":_e,style:{"--front-toast-height":`${((Te=U[0])==null?void 0:Te.height)||0}px`,"--width":`${K8}px`,"--gap":`${Qe}px`,...B,...tR(b,w)},onBlur:Je=>{ut.current&&!Je.currentTarget.contains(Je.relatedTarget)&&(ut.current=!1,qe.current&&(qe.current.focus({preventScroll:!0}),qe.current=null))},onFocus:Je=>{Je.target instanceof HTMLElement&&Je.target.dataset.dismissible==="false"||ut.current||(ut.current=!0,qe.current=Je.relatedTarget)},onMouseEnter:()=>Y(!0),onMouseMove:()=>Y(!0),onMouseLeave:()=>{G||Y(!1)},onDragEnd:()=>Y(!1),onPointerDown:Je=>{Je.target instanceof HTMLElement&&Je.target.dataset.dismissible==="false"||lt(!0)},onPointerUp:()=>lt(!1)},je.filter(Je=>!Je.position&&ve===0||Je.position===oe).map((Je,_t)=>{var It,An;return Ge.createElement(eR,{key:Je.id,icons:he,index:_t,toast:Je,defaultRichColors:R,duration:(It=ne?.duration)!=null?It:P,className:ne?.className,descriptionClassName:ne?.descriptionClassName,invert:n,visibleToasts:$,closeButton:(An=ne?.closeButton)!=null?An:x,interacting:G,position:oe,style:ne?.style,unstyled:ne?.unstyled,classNames:ne?.classNames,cancelButtonStyle:ne?.cancelButtonStyle,actionButtonStyle:ne?.actionButtonStyle,removeToast:K,toasts:je.filter(jt=>jt.position==Je.position),heights:U.filter(jt=>jt.position==Je.position),setHeights:Q,expandByDefault:g,gap:Qe,loadingIcon:Le,expanded:X,pauseWhenPageIsHidden:pt,swipeDirections:s.swipeDirections})})):null}))});const rR={width:"100%",maxWidth:460,backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},au={fontSize:"0.8rem",display:"block"},ou={width:"100%",padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.9rem",marginTop:"0.15rem",boxSizing:"border-box"},dE={padding:"0.35rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",color:"#111827",cursor:"pointer",fontSize:"0.9rem"};function lm({uid:s,role:e,onClose:n,displayName:o,email:h}){const{options:g}=om(),[x,T]=ye.useState(!0),[b,w]=ye.useState(!1),[C,R]=ye.useState(null),[P,B]=ye.useState(""),[$,ne]=ye.useState(""),[se,Qe]=ye.useState(h),[Le,he]=ye.useState(null),[Ue,pt]=ye.useState([]),[je,F]=ye.useState(""),z=e==="teacher"||e==="student",[U,Q]=ye.useState(""),[X,Y]=ye.useState(""),[G,lt]=ye.useState(h),[ae,re]=ye.useState({}),[fe,tt]=ye.useState(!1),[qe,ut]=ye.useState(""),[K,oe]=ye.useState(!1),[ve,Te]=ye.useState(null),[Se,_e]=ye.useState(null);ye.useEffect(()=>{let De=!0;return(async()=>{try{T(!0);const $e=Fn(Ct,"users",s),nt=await pl($e),ot=nt.exists()?nt.data():{};if(!De)return;const et=String(ot.phone??""),Vt=String(ot.secondaryEmail??""),We=String(ot?.email??h);B(et),ne(Vt),Qe(We),Q(et),Y(Vt),lt(We),he(typeof ot.term=="number"?ot.term:null);const Qn=Array.isArray(ot.allowedTerms)?ot.allowedTerms.filter(At=>typeof At=="number"):[];pt(Qn)}catch{De&&R("Kunne ikke laste profildata.")}finally{De&&T(!1)}})(),()=>{De=!1}},[s]);const Je=ye.useMemo(()=>Ue.map(De=>yl(g,De)),[Ue,g]),_t=async()=>{R(null),w(!0);try{await bs(Fn(Ct,"users",s),{phone:P.trim()||null}),Q(P),Dt.success("Mobilnummer er oppdatert.")}catch(De){console.error(De),R("Kunne ikke lagre mobilnummer."),Dt.error("Kunne ikke lagre mobilnummer.")}finally{w(!1)}},It=async()=>{R(null),w(!0);try{await bs(Fn(Ct,"users",s),{secondaryEmail:$.trim()||null}),Y($),Dt.success("Sekundr epost er oppdatert.")}catch(De){console.error(De),R("Kunne ikke lagre sekundr epost."),Dt.error("Kunne ikke lagre sekundr epost.")}finally{w(!1)}},An=async()=>{R(null);const De=se.trim();if(!De){R("Epost kan ikke vre tom."),Dt.error("Epost kan ikke vre tom.");return}if(De===G){Dt.info?.("Eposten er uendret.")||Dt("Eposten er uendret.");return}try{const $e=al.currentUser;if(!$e){R("Ingen innlogget bruker."),Dt.error("Ingen innlogget bruker.");return}await H2($e,De),lt(De),Dt.success(`Vi har sendt en bekreftelseslenke til ${De}. Flg lenken for  fullfre endringen av epost.`)}catch($e){console.warn("updateEmail failed",$e),$e?.code==="auth/operation-not-allowed"?(R("Kan ikke oppdatere epost direkte. Du m bekrefte ny epost via lenken vi sender. Prv igjen."),Dt.error("Kan ikke oppdatere epost direkte. Bruk knappen igjen for  f tilsendt bekreftelseslenke.")):$e?.code==="auth/requires-recent-login"?(_e(De),ut(""),Te(null),tt(!0),Dt.info?.("Av sikkerhetshensyn m du bekrefte med passord fr du kan endre epost.")||Dt("Av sikkerhetshensyn m du bekrefte med passord fr du kan endre epost.")):$e?.code==="auth/email-already-in-use"?(R("Epostadressen er allerede i bruk av en annen bruker."),Dt.error("Epostadressen er allerede i bruk av en annen bruker.")):$e?.code==="auth/invalid-email"?(R("Ugyldig epost."),Dt.error("Ugyldig epost.")):(R("Kunne ikke oppdatere epost. Prv igjen senere."),Dt.error("Kunne ikke oppdatere epost. Prv igjen senere."))}},jt=()=>{tt(!1),ut(""),Te(null)},Be=async()=>{Te(null);const De=(Se||se||"").trim();if(!De){Te("Ugyldig ny epost.");return}const $e=al.currentUser;if(!$e){Te("Ingen innlogget bruker.");return}if(!qe){Te("Skriv inn passordet ditt.");return}try{oe(!0);const nt=wl.credential($e.email||h,qe);await _C($e,nt),await H2($e,De),tt(!1),ut(""),_e(null),Dt.success(`Vi har sendt en bekreftelseslenke til ${De}. Flg lenken for  fullfre endringen av epost.`)}catch(nt){console.error("Reauth/update email failed",nt),nt?.code==="auth/wrong-password"?Te("Feil passord."):nt?.code==="auth/too-many-requests"?Te("For mange forsk. Prv igjen senere."):nt?.code==="auth/invalid-email"?Te("Ugyldig epost."):nt?.code==="auth/email-already-in-use"?Te("Epostadressen er allerede i bruk av en annen bruker."):Te("Kunne ikke bekrefte innlogging eller oppdatere epost.")}finally{oe(!1)}},Ve=async()=>{if(R(null),!je||je.length<6){R("Passord m vre minst 6 tegn."),Dt.error("Passord m vre minst 6 tegn.");return}try{const De=al.currentUser;if(!De){R("Ingen innlogget bruker."),Dt.error("Ingen innlogget bruker.");return}await bC(De,je),Dt.success("Passordet er oppdatert."),F("")}catch(De){console.warn("updatePassword failed",De),De?.code==="auth/requires-recent-login"?(R("Du m logge inn p nytt fr du kan endre passord."),Dt.error("Du m logge inn p nytt fr du kan endre passord.")):(R("Kunne ikke endre passord."),Dt.error("Kunne ikke endre passord."))}},at=(De,$e)=>({padding:"0.35rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:De&&$e?"#29B076":"#2EC483",color:"#111827",cursor:De?"pointer":"not-allowed",fontSize:"0.9rem",transition:"background-color 120ms ease-out",width:"120px",flex:"0 0 120px",whiteSpace:"nowrap",textAlign:"center",boxSizing:"border-box"});return O.jsxs(O.Fragment,{children:[O.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:60},"aria-modal":!0,role:"dialog",children:O.jsxs("div",{style:rR,children:[O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[O.jsx("h3",{style:{margin:0},children:o||h}),O.jsx("button",{type:"button",onClick:n,style:dE,children:"Lukk"})]}),x?O.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"1rem 0"},children:"Laster..."}):O.jsxs(O.Fragment,{children:[e==="student"&&O.jsxs("div",{style:{fontSize:"0.9rem",color:"#374151"},children:[O.jsx("div",{style:{fontWeight:600},children:"Din termin"}),O.jsx("div",{children:yl(g,Le)})]}),e==="teacher"&&O.jsxs("div",{style:{fontSize:"0.9rem",color:"#374151"},children:[O.jsx("div",{style:{fontWeight:600},children:"Terminer du kan registrere oppmte p:"}),Ue.length===0?O.jsx("div",{children:"Ingen"}):O.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.4rem",marginTop:"0.25rem"},children:Je.map((De,$e)=>O.jsx("span",{style:{display:"inline-block",padding:"0.15rem 0.5rem",border:"1px solid #e5e7eb",borderRadius:"999px",background:"#f9fafb",fontSize:"0.8rem"},children:De},$e))})]}),O.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginTop:"1rem"},children:[O.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-end"},children:[O.jsx("div",{style:{flex:1,minWidth:0},children:O.jsxs("label",{style:au,children:["Mobilnummer",O.jsx("input",{type:"tel",value:P,onChange:De=>B(De.target.value),placeholder:"Eks: 99999999",style:ou})]})}),O.jsx("button",{type:"button",disabled:b||P===U,onMouseEnter:()=>re(De=>({...De,phone:!0})),onMouseLeave:()=>re(De=>({...De,phone:!1})),onClick:_t,style:at(!(b||P===U),!!ae.phone),children:"Lagre"})]}),O.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-end"},children:[O.jsx("div",{style:{flex:1,minWidth:0},children:O.jsxs("label",{style:au,children:["Epost",O.jsx("input",{type:"email",value:se,onChange:De=>Qe(De.target.value),placeholder:"din@epost.no",style:ou})]})}),O.jsx("button",{type:"button",disabled:b||se.trim()===G.trim(),onMouseEnter:()=>re(De=>({...De,primaryEmail:!0})),onMouseLeave:()=>re(De=>({...De,primaryEmail:!1})),onClick:An,style:at(!(b||se.trim()===G.trim()),!!ae.primaryEmail),children:"Lagre"})]}),z&&O.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-end"},children:[O.jsx("div",{style:{flex:1,minWidth:0},children:O.jsxs("label",{style:au,children:["Sekundr epost",O.jsx("input",{type:"email",value:$,onChange:De=>ne(De.target.value),placeholder:"eksempel@uio.no",style:ou})]})}),O.jsx("button",{type:"button",disabled:b||$===X,onMouseEnter:()=>re(De=>({...De,secondaryEmail:!0})),onMouseLeave:()=>re(De=>({...De,secondaryEmail:!1})),onClick:It,style:at(!(b||$===X),!!ae.secondaryEmail),children:"Lagre"})]}),O.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-end"},children:[O.jsx("div",{style:{flex:1,minWidth:0},children:O.jsxs("label",{style:au,children:["Nytt passord",O.jsx("input",{type:"password",value:je,onChange:De=>F(De.target.value),placeholder:"Minst 6 tegn",style:ou})]})}),O.jsx("button",{type:"button",disabled:b||je.length===0,onMouseEnter:()=>re(De=>({...De,password:!0})),onMouseLeave:()=>re(De=>({...De,password:!1})),onClick:Ve,style:at(!(b||je.length===0),!!ae.password),children:"Lagre"})]})]})]})]})}),fe&&O.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:70},children:O.jsxs("div",{className:"page-card",style:{maxWidth:520,width:"100%",background:"#ffffff"},children:[O.jsx("h3",{style:{marginTop:0},children:"Logg inn p nytt"}),O.jsxs("p",{style:{whiteSpace:"pre-wrap",lineHeight:1.4},children:["Av sikkerhetshensyn m du bekrefte kontoen fr du kan endre epost.",`
`,"Skriv inn passordet for ",h,"."]}),O.jsxs("label",{style:au,children:["Passord",O.jsx("input",{type:"password",value:qe,onChange:De=>ut(De.target.value),placeholder:"Passord",style:ou,autoFocus:!0})]}),ve&&O.jsx("p",{style:{color:"#b91c1c",fontSize:"0.85rem",marginTop:"0.5rem"},children:ve}),O.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",marginTop:"0.75rem"},children:[O.jsx("button",{type:"button",onClick:jt,style:dE,children:"Avbryt"}),O.jsx("button",{type:"button",onClick:Be,style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"none",background:"#6CE1AB",color:"black",cursor:"pointer"},disabled:K,children:K?"Bekrefter...":"Bekreft og send lenke"})]})]})})]})}function iR({user:s}){const{logout:e}=yd(),[n,o]=ye.useState(""),[h,g]=ye.useState(!1),[x,T]=ye.useState(!1),b=s.term??11,[w,C]=ye.useState([]),[R,P]=ye.useState(!1),[B,$]=ye.useState(0),[ne,se]=ye.useState(!1),{options:Qe}=om(),[Le,he]=ye.useState(!1),[Ue,pt]=ye.useState(null),[je,F]=ye.useState([]),[z,U]=ye.useState({}),[Q,X]=ye.useState("idle"),[Y,G]=ye.useState(null),[lt,ae]=ye.useState(null),re=s.semesterStatus&&s.semesterStatus!=="aktiv",fe=()=>{X("idle"),G(null),ae(null),o(""),se(!1)},tt=async Se=>{if(!(!Se||Se.length<6)){g(!0),X("idle"),G(null);try{const _e=cr(Ct,"sessions"),Je=is(_e,ei("code","==",Se)),_t=await Mr(Je);if(_t.empty){X("error"),G("Fant ingen kt med denne koden."),o(""),se(!1),g(!1);return}const It=_t.docs[0],An=It.data(),jt=Fn(Ct,"sessions",It.id,"attendance",s.uid);if((await pl(jt)).exists()){X("error"),G("Du er allerede registrert p denne kten."),o(""),se(!1),g(!1);return}await cl(jt,{userId:s.uid,studentName:s.displayName,studentEmail:s.email,createdAt:jn.now(),status:"present"});const Ve=An.name||"kten";ae(Ve),X("success"),G(null),se(!1),o(""),$(at=>at+1)}catch(_e){console.error(_e),X("error"),G("Noe gikk galt ved registrering av oppmte."),o(""),se(!1)}finally{g(!1)}}},qe=Se=>{if(!Se||h)return;const _e=Se.replace(/\D/g,"").slice(0,6);_e.length===6&&(o(_e),tt(_e))};ye.useEffect(()=>{(async()=>{P(!0);try{const _e=cr(Ct,"requirements"),Je=is(_e,ei("term","==",b)),It=(await Mr(Je)).docs.map(At=>{const Rt=At.data();return{category:Rt.category,requiredCount:Rt.requiredCount}}),An=cr(Ct,"sessions"),jt=is(An,ei("term","==",b)),Ve=(await Mr(jt)).docs.map(At=>{const Rt=At.data();return{id:At.id,timeId:typeof Rt?.timeId=="string"?Rt.timeId:void 0,name:typeof Rt?.name=="string"?Rt.name:void 0,category:typeof Rt?.category=="string"?Rt.category:void 0}}),at=cr(Ct,"times"),De=is(at,ei("term","==",b)),nt=(await Mr(De)).docs.map(At=>{const Rt=At.data();return{id:At.id,name:Rt.name,category:Rt.category,term:Rt.term,order:typeof Rt?.order=="number"?Rt.order:void 0}}),ot=new Map;for(const At of nt)At.category&&ot.set(At.category,(ot.get(At.category)??0)+1);const et=new Map,Vt={};for(const At of Ve){if(!At.category)continue;const Rt=Fn(Ct,"sessions",At.id,"attendance",s.uid);if((await pl(Rt)).exists()){if(et.set(At.category,(et.get(At.category)??0)+1),At.timeId)Vt[At.timeId]=!0;else if(At.name&&At.category){const Gt=nt.find(Hn=>Hn.category===At.category&&Hn.name===At.name);Gt&&(Vt[Gt.id]=!0)}}}const We=new Set;for(const At of It)We.add(At.category);for(const At of Ve)At.category&&We.add(At.category);for(const At of nt)At.category&&We.add(At.category);const Qn=[];We.forEach(At=>{const Rt=It.find(Rn=>Rn.category===At),Sr=Rt?Rt.requiredCount:null,Gt=ot.get(At)??0,Hn=et.get(At)??0;Qn.push({category:At,attendedCount:Hn,totalSessions:Gt,requiredCount:Sr})}),Qn.sort((At,Rt)=>At.category.localeCompare(Rt.category,"nb-NO",{sensitivity:"base"})),C(Qn),F(nt),U(Vt)}catch(_e){console.error(_e),C([]),F([]),U({})}finally{P(!1)}})()},[b,s.uid,B]);const ut=Se=>{const _e=Se.match(/^\s*(\d+)/);return _e?parseInt(_e[1],10):Number.POSITIVE_INFINITY},K=ye.useMemo(()=>{if(!Le||!Ue)return[];const Se=je.filter(_e=>_e.category===Ue).map(_e=>({..._e,attended:!!z[_e.id]}));return Se.sort((_e,Je)=>{const _t=(_e.order??Number.MAX_SAFE_INTEGER)-(Je.order??Number.MAX_SAFE_INTEGER);if(_t!==0)return _t;const It=ut(_e.name),An=ut(Je.name);return It!==An?It-An:_e.name.localeCompare(Je.name,"nb-NO",{sensitivity:"base"})}),Se},[Le,Ue,je,z]),oe=Se=>{pt(Se),he(!0)},ve=()=>{he(!1),pt(null)},Te=Se=>{const Je=Se.target.value.replace(/\D/g,"").slice(0,6);o(Je),Je.length===6&&!h&&tt(Je)};return ye.useEffect(()=>{if(Q==="idle")return;const _e=setTimeout(()=>{fe()},5e3);return()=>clearTimeout(_e)},[Q]),O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"page-card page-card--student",children:[O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[O.jsx("div",{style:{fontWeight:600},children:s.displayName||s.email}),O.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[O.jsx("button",{type:"button",onClick:()=>T(!0),style:{padding:"0.35rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#ffffff",cursor:"pointer",fontSize:"0.85rem"},children:"Min profil"}),O.jsx("button",{onClick:e,type:"button",style:{padding:"0.35rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#ffffff",cursor:"pointer",fontSize:"0.85rem"},children:"Logg ut"})]})]}),O.jsx("h2",{style:{textAlign:"center",marginBottom:"1rem"},children:"Registrer oppmte"}),re&&O.jsxs("p",{style:{color:"red",textAlign:"center"},children:['Du er markert som "',s.semesterStatus,'" dette semesteret. Ingen oppmtekrav, men du kan fortsatt registrere oppmte.']}),O.jsx("div",{style:{marginTop:"1rem",textAlign:"center"},children:Q==="success"?O.jsxs(O.Fragment,{children:[O.jsx("div",{style:{fontSize:"4rem",color:"#16a34a",marginBottom:"0.5rem"},children:""}),O.jsx("h3",{style:{margin:0,marginBottom:"0.3rem"},children:"Oppmte registrert"}),lt&&O.jsx("p",{style:{margin:0,marginBottom:"1rem",fontSize:"1rem",color:"#374151"},children:lt}),O.jsx("button",{type:"button",onClick:fe,style:{marginTop:"0.5rem",padding:"0.5rem 1.2rem",borderRadius:"999px",border:"none",background:"#2563eb",color:"white",fontWeight:500,cursor:"pointer",fontSize:"0.95rem"},children:"Registrer en kode til"})]}):Q==="error"?O.jsxs(O.Fragment,{children:[O.jsx("div",{style:{fontSize:"4rem",color:"#dc2626",marginBottom:"0.5rem"},children:""}),O.jsx("h3",{style:{margin:0,marginBottom:"0.3rem"},children:"Kunne ikke registrere oppmte"}),Y&&O.jsx("p",{style:{margin:0,marginBottom:"1rem",fontSize:"0.95rem",color:"#374151"},children:Y}),O.jsx("button",{type:"button",onClick:fe,style:{marginTop:"0.5rem",padding:"0.5rem 1.2rem",borderRadius:"999px",border:"none",background:"#6b7280",color:"white",fontWeight:500,cursor:"pointer",fontSize:"0.95rem"},children:"Prv en kode til"})]}):O.jsxs(O.Fragment,{children:[O.jsx("label",{style:{display:"block",marginBottom:"0.3rem"},children:"6-sifret kode fra lrer"}),O.jsx("input",{value:n,onChange:Te,maxLength:6,placeholder:"482931",style:{padding:"0.5rem 0.8rem",fontSize:"1.2rem",letterSpacing:"0.3em",textAlign:"center",borderRadius:"0.5rem",border:"1px solid #d1d5db",minWidth:"10rem"}}),h&&O.jsx(To,{}),O.jsx("br",{}),O.jsx("button",{type:"button",onClick:()=>se(Se=>!Se),style:{marginTop:"1rem",padding:"0.4rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:ne?"#e5e7eb":"#f9fafb",cursor:"pointer",fontSize:"0.9rem"},children:ne?"Stopp skanning":"Skann QR-kode"}),ne&&O.jsx("div",{style:{marginTop:"0.8rem",display:"flex",justifyContent:"center"},children:O.jsx("div",{style:{width:"260px",maxWidth:"100%",borderRadius:"0.75rem",overflow:"hidden",border:"1px solid #d1d5db"},children:O.jsx(v8,{onCode:qe})})})]})}),O.jsx("hr",{style:{marginTop:"2rem",marginBottom:"1rem"}}),O.jsxs("section",{children:[O.jsx("h3",{style:{textAlign:"center"},children:yl(Qe,b)}),R?O.jsx(To,{}):w.length===0?O.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"Ingen registrerte timer for denne terminen enn."}):O.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[O.jsx("thead",{children:O.jsxs("tr",{children:[O.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"Gruppe"}),O.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"Registrerte oppmter"}),O.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"Krav"})]})}),O.jsx("tbody",{children:w.map(Se=>{const Je={padding:"0.5rem",borderBottom:"1px solid #f3f4f6",background:Se.requiredCount!=null&&Se.attendedCount>=Se.requiredCount?"#dcfce7":"transparent"};return O.jsxs("tr",{onClick:()=>oe(Se.category),title:"Klikk for  se detaljer",style:{cursor:"pointer"},children:[O.jsx("td",{style:Je,children:Se.category}),O.jsx("td",{style:Je,children:Se.totalSessions>0?`${Se.attendedCount}/${Se.totalSessions}`:Se.attendedCount}),O.jsx("td",{style:Je,children:Se.requiredCount??"-"})]},Se.category)})})]})]}),Le&&O.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},onClick:ve,children:O.jsxs("div",{onClick:Se=>Se.stopPropagation(),style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[O.jsx("h3",{style:{margin:0},children:Ue?`Oppmte i ${Ue}`:"Oppmte"}),O.jsx("button",{type:"button",onClick:ve,style:{border:"none",background:"transparent",fontSize:"1.2rem",cursor:"pointer"},"aria-label":"Lukk",title:"Lukk",children:""})]}),K.length===0?O.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"Ingen timer er definert i denne gruppen enda."}):O.jsx("ul",{style:{listStyle:"none",padding:0,marginTop:"0.75rem"},children:K.map(Se=>O.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.35rem 0",borderBottom:"1px solid #f3f4f6"},children:[O.jsx("span",{children:Se.name}),O.jsx("span",{style:{display:"inline-block",padding:"0.15rem 0.5rem",borderRadius:"999px",backgroundColor:Se.attended?"#dcfce7":"#fee2e2",color:Se.attended?"#166534":"#991b1b",fontSize:"0.8rem"},children:Se.attended?"Registrert":"Mangler"})]},Se.id))}),O.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"0.75rem"},children:O.jsx("button",{type:"button",onClick:ve,style:{padding:"0.35rem 0.8rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#fff",cursor:"pointer"},children:"Lukk"})})]})})]}),x&&O.jsx(lm,{uid:s.uid,role:s.role,email:s.email,displayName:s.displayName,onClose:()=>T(!1)})]})}var sR=Object.defineProperty,zf=Object.getOwnPropertySymbols,K_=Object.prototype.hasOwnProperty,Q_=Object.prototype.propertyIsEnumerable,gE=(s,e,n)=>e in s?sR(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,rg=(s,e)=>{for(var n in e||(e={}))K_.call(e,n)&&gE(s,n,e[n]);if(zf)for(var n of zf(e))Q_.call(e,n)&&gE(s,n,e[n]);return s},ig=(s,e)=>{var n={};for(var o in s)K_.call(s,o)&&e.indexOf(o)<0&&(n[o]=s[o]);if(s!=null&&zf)for(var o of zf(s))e.indexOf(o)<0&&Q_.call(s,o)&&(n[o]=s[o]);return n};var xl;(s=>{const e=class fn{constructor(b,w,C,R){if(this.version=b,this.errorCorrectionLevel=w,this.modules=[],this.isFunction=[],b<fn.MIN_VERSION||b>fn.MAX_VERSION)throw new RangeError("Version value out of range");if(R<-1||R>7)throw new RangeError("Mask value out of range");this.size=b*4+17;let P=[];for(let $=0;$<this.size;$++)P.push(!1);for(let $=0;$<this.size;$++)this.modules.push(P.slice()),this.isFunction.push(P.slice());this.drawFunctionPatterns();const B=this.addEccAndInterleave(C);if(this.drawCodewords(B),R==-1){let $=1e9;for(let ne=0;ne<8;ne++){this.applyMask(ne),this.drawFormatBits(ne);const se=this.getPenaltyScore();se<$&&(R=ne,$=se),this.applyMask(ne)}}h(0<=R&&R<=7),this.mask=R,this.applyMask(R),this.drawFormatBits(R),this.isFunction=[]}static encodeText(b,w){const C=s.QrSegment.makeSegments(b);return fn.encodeSegments(C,w)}static encodeBinary(b,w){const C=s.QrSegment.makeBytes(b);return fn.encodeSegments([C],w)}static encodeSegments(b,w,C=1,R=40,P=-1,B=!0){if(!(fn.MIN_VERSION<=C&&C<=R&&R<=fn.MAX_VERSION)||P<-1||P>7)throw new RangeError("Invalid value");let $,ne;for($=C;;$++){const he=fn.getNumDataCodewords($,w)*8,Ue=x.getTotalBits(b,$);if(Ue<=he){ne=Ue;break}if($>=R)throw new RangeError("Data too long")}for(const he of[fn.Ecc.MEDIUM,fn.Ecc.QUARTILE,fn.Ecc.HIGH])B&&ne<=fn.getNumDataCodewords($,he)*8&&(w=he);let se=[];for(const he of b){n(he.mode.modeBits,4,se),n(he.numChars,he.mode.numCharCountBits($),se);for(const Ue of he.getData())se.push(Ue)}h(se.length==ne);const Qe=fn.getNumDataCodewords($,w)*8;h(se.length<=Qe),n(0,Math.min(4,Qe-se.length),se),n(0,(8-se.length%8)%8,se),h(se.length%8==0);for(let he=236;se.length<Qe;he^=253)n(he,8,se);let Le=[];for(;Le.length*8<se.length;)Le.push(0);return se.forEach((he,Ue)=>Le[Ue>>>3]|=he<<7-(Ue&7)),new fn($,w,Le,P)}getModule(b,w){return 0<=b&&b<this.size&&0<=w&&w<this.size&&this.modules[w][b]}getModules(){return this.modules}drawFunctionPatterns(){for(let C=0;C<this.size;C++)this.setFunctionModule(6,C,C%2==0),this.setFunctionModule(C,6,C%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const b=this.getAlignmentPatternPositions(),w=b.length;for(let C=0;C<w;C++)for(let R=0;R<w;R++)C==0&&R==0||C==0&&R==w-1||C==w-1&&R==0||this.drawAlignmentPattern(b[C],b[R]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(b){const w=this.errorCorrectionLevel.formatBits<<3|b;let C=w;for(let P=0;P<10;P++)C=C<<1^(C>>>9)*1335;const R=(w<<10|C)^21522;h(R>>>15==0);for(let P=0;P<=5;P++)this.setFunctionModule(8,P,o(R,P));this.setFunctionModule(8,7,o(R,6)),this.setFunctionModule(8,8,o(R,7)),this.setFunctionModule(7,8,o(R,8));for(let P=9;P<15;P++)this.setFunctionModule(14-P,8,o(R,P));for(let P=0;P<8;P++)this.setFunctionModule(this.size-1-P,8,o(R,P));for(let P=8;P<15;P++)this.setFunctionModule(8,this.size-15+P,o(R,P));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let b=this.version;for(let C=0;C<12;C++)b=b<<1^(b>>>11)*7973;const w=this.version<<12|b;h(w>>>18==0);for(let C=0;C<18;C++){const R=o(w,C),P=this.size-11+C%3,B=Math.floor(C/3);this.setFunctionModule(P,B,R),this.setFunctionModule(B,P,R)}}drawFinderPattern(b,w){for(let C=-4;C<=4;C++)for(let R=-4;R<=4;R++){const P=Math.max(Math.abs(R),Math.abs(C)),B=b+R,$=w+C;0<=B&&B<this.size&&0<=$&&$<this.size&&this.setFunctionModule(B,$,P!=2&&P!=4)}}drawAlignmentPattern(b,w){for(let C=-2;C<=2;C++)for(let R=-2;R<=2;R++)this.setFunctionModule(b+R,w+C,Math.max(Math.abs(R),Math.abs(C))!=1)}setFunctionModule(b,w,C){this.modules[w][b]=C,this.isFunction[w][b]=!0}addEccAndInterleave(b){const w=this.version,C=this.errorCorrectionLevel;if(b.length!=fn.getNumDataCodewords(w,C))throw new RangeError("Invalid argument");const R=fn.NUM_ERROR_CORRECTION_BLOCKS[C.ordinal][w],P=fn.ECC_CODEWORDS_PER_BLOCK[C.ordinal][w],B=Math.floor(fn.getNumRawDataModules(w)/8),$=R-B%R,ne=Math.floor(B/R);let se=[];const Qe=fn.reedSolomonComputeDivisor(P);for(let he=0,Ue=0;he<R;he++){let pt=b.slice(Ue,Ue+ne-P+(he<$?0:1));Ue+=pt.length;const je=fn.reedSolomonComputeRemainder(pt,Qe);he<$&&pt.push(0),se.push(pt.concat(je))}let Le=[];for(let he=0;he<se[0].length;he++)se.forEach((Ue,pt)=>{(he!=ne-P||pt>=$)&&Le.push(Ue[he])});return h(Le.length==B),Le}drawCodewords(b){if(b.length!=Math.floor(fn.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let w=0;for(let C=this.size-1;C>=1;C-=2){C==6&&(C=5);for(let R=0;R<this.size;R++)for(let P=0;P<2;P++){const B=C-P,ne=(C+1&2)==0?this.size-1-R:R;!this.isFunction[ne][B]&&w<b.length*8&&(this.modules[ne][B]=o(b[w>>>3],7-(w&7)),w++)}}h(w==b.length*8)}applyMask(b){if(b<0||b>7)throw new RangeError("Mask value out of range");for(let w=0;w<this.size;w++)for(let C=0;C<this.size;C++){let R;switch(b){case 0:R=(C+w)%2==0;break;case 1:R=w%2==0;break;case 2:R=C%3==0;break;case 3:R=(C+w)%3==0;break;case 4:R=(Math.floor(C/3)+Math.floor(w/2))%2==0;break;case 5:R=C*w%2+C*w%3==0;break;case 6:R=(C*w%2+C*w%3)%2==0;break;case 7:R=((C+w)%2+C*w%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[w][C]&&R&&(this.modules[w][C]=!this.modules[w][C])}}getPenaltyScore(){let b=0;for(let P=0;P<this.size;P++){let B=!1,$=0,ne=[0,0,0,0,0,0,0];for(let se=0;se<this.size;se++)this.modules[P][se]==B?($++,$==5?b+=fn.PENALTY_N1:$>5&&b++):(this.finderPenaltyAddHistory($,ne),B||(b+=this.finderPenaltyCountPatterns(ne)*fn.PENALTY_N3),B=this.modules[P][se],$=1);b+=this.finderPenaltyTerminateAndCount(B,$,ne)*fn.PENALTY_N3}for(let P=0;P<this.size;P++){let B=!1,$=0,ne=[0,0,0,0,0,0,0];for(let se=0;se<this.size;se++)this.modules[se][P]==B?($++,$==5?b+=fn.PENALTY_N1:$>5&&b++):(this.finderPenaltyAddHistory($,ne),B||(b+=this.finderPenaltyCountPatterns(ne)*fn.PENALTY_N3),B=this.modules[se][P],$=1);b+=this.finderPenaltyTerminateAndCount(B,$,ne)*fn.PENALTY_N3}for(let P=0;P<this.size-1;P++)for(let B=0;B<this.size-1;B++){const $=this.modules[P][B];$==this.modules[P][B+1]&&$==this.modules[P+1][B]&&$==this.modules[P+1][B+1]&&(b+=fn.PENALTY_N2)}let w=0;for(const P of this.modules)w=P.reduce((B,$)=>B+($?1:0),w);const C=this.size*this.size,R=Math.ceil(Math.abs(w*20-C*10)/C)-1;return h(0<=R&&R<=9),b+=R*fn.PENALTY_N4,h(0<=b&&b<=2568888),b}getAlignmentPatternPositions(){if(this.version==1)return[];{const b=Math.floor(this.version/7)+2,w=this.version==32?26:Math.ceil((this.version*4+4)/(b*2-2))*2;let C=[6];for(let R=this.size-7;C.length<b;R-=w)C.splice(1,0,R);return C}}static getNumRawDataModules(b){if(b<fn.MIN_VERSION||b>fn.MAX_VERSION)throw new RangeError("Version number out of range");let w=(16*b+128)*b+64;if(b>=2){const C=Math.floor(b/7)+2;w-=(25*C-10)*C-55,b>=7&&(w-=36)}return h(208<=w&&w<=29648),w}static getNumDataCodewords(b,w){return Math.floor(fn.getNumRawDataModules(b)/8)-fn.ECC_CODEWORDS_PER_BLOCK[w.ordinal][b]*fn.NUM_ERROR_CORRECTION_BLOCKS[w.ordinal][b]}static reedSolomonComputeDivisor(b){if(b<1||b>255)throw new RangeError("Degree out of range");let w=[];for(let R=0;R<b-1;R++)w.push(0);w.push(1);let C=1;for(let R=0;R<b;R++){for(let P=0;P<w.length;P++)w[P]=fn.reedSolomonMultiply(w[P],C),P+1<w.length&&(w[P]^=w[P+1]);C=fn.reedSolomonMultiply(C,2)}return w}static reedSolomonComputeRemainder(b,w){let C=w.map(R=>0);for(const R of b){const P=R^C.shift();C.push(0),w.forEach((B,$)=>C[$]^=fn.reedSolomonMultiply(B,P))}return C}static reedSolomonMultiply(b,w){if(b>>>8||w>>>8)throw new RangeError("Byte out of range");let C=0;for(let R=7;R>=0;R--)C=C<<1^(C>>>7)*285,C^=(w>>>R&1)*b;return h(C>>>8==0),C}finderPenaltyCountPatterns(b){const w=b[1];h(w<=this.size*3);const C=w>0&&b[2]==w&&b[3]==w*3&&b[4]==w&&b[5]==w;return(C&&b[0]>=w*4&&b[6]>=w?1:0)+(C&&b[6]>=w*4&&b[0]>=w?1:0)}finderPenaltyTerminateAndCount(b,w,C){return b&&(this.finderPenaltyAddHistory(w,C),w=0),w+=this.size,this.finderPenaltyAddHistory(w,C),this.finderPenaltyCountPatterns(C)}finderPenaltyAddHistory(b,w){w[0]==0&&(b+=this.size),w.pop(),w.unshift(b)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],s.QrCode=e;function n(T,b,w){if(b<0||b>31||T>>>b)throw new RangeError("Value out of range");for(let C=b-1;C>=0;C--)w.push(T>>>C&1)}function o(T,b){return(T>>>b&1)!=0}function h(T){if(!T)throw new Error("Assertion error")}const g=class vr{constructor(b,w,C){if(this.mode=b,this.numChars=w,this.bitData=C,w<0)throw new RangeError("Invalid argument");this.bitData=C.slice()}static makeBytes(b){let w=[];for(const C of b)n(C,8,w);return new vr(vr.Mode.BYTE,b.length,w)}static makeNumeric(b){if(!vr.isNumeric(b))throw new RangeError("String contains non-numeric characters");let w=[];for(let C=0;C<b.length;){const R=Math.min(b.length-C,3);n(parseInt(b.substring(C,C+R),10),R*3+1,w),C+=R}return new vr(vr.Mode.NUMERIC,b.length,w)}static makeAlphanumeric(b){if(!vr.isAlphanumeric(b))throw new RangeError("String contains unencodable characters in alphanumeric mode");let w=[],C;for(C=0;C+2<=b.length;C+=2){let R=vr.ALPHANUMERIC_CHARSET.indexOf(b.charAt(C))*45;R+=vr.ALPHANUMERIC_CHARSET.indexOf(b.charAt(C+1)),n(R,11,w)}return C<b.length&&n(vr.ALPHANUMERIC_CHARSET.indexOf(b.charAt(C)),6,w),new vr(vr.Mode.ALPHANUMERIC,b.length,w)}static makeSegments(b){return b==""?[]:vr.isNumeric(b)?[vr.makeNumeric(b)]:vr.isAlphanumeric(b)?[vr.makeAlphanumeric(b)]:[vr.makeBytes(vr.toUtf8ByteArray(b))]}static makeEci(b){let w=[];if(b<0)throw new RangeError("ECI assignment value out of range");if(b<128)n(b,8,w);else if(b<16384)n(2,2,w),n(b,14,w);else if(b<1e6)n(6,3,w),n(b,21,w);else throw new RangeError("ECI assignment value out of range");return new vr(vr.Mode.ECI,0,w)}static isNumeric(b){return vr.NUMERIC_REGEX.test(b)}static isAlphanumeric(b){return vr.ALPHANUMERIC_REGEX.test(b)}getData(){return this.bitData.slice()}static getTotalBits(b,w){let C=0;for(const R of b){const P=R.mode.numCharCountBits(w);if(R.numChars>=1<<P)return 1/0;C+=4+P+R.bitData.length}return C}static toUtf8ByteArray(b){b=encodeURI(b);let w=[];for(let C=0;C<b.length;C++)b.charAt(C)!="%"?w.push(b.charCodeAt(C)):(w.push(parseInt(b.substring(C+1,C+3),16)),C+=2);return w}};g.NUMERIC_REGEX=/^[0-9]*$/,g.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,g.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let x=g;s.QrSegment=g})(xl||(xl={}));(s=>{(e=>{const n=class{constructor(h,g){this.ordinal=h,this.formatBits=g}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(s.QrCode||(s.QrCode={}))})(xl||(xl={}));(s=>{(e=>{const n=class{constructor(h,g){this.modeBits=h,this.numBitsCharCount=g}numCharCountBits(h){return this.numBitsCharCount[Math.floor((h+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(s.QrSegment||(s.QrSegment={}))})(xl||(xl={}));var ic=xl;var aR={L:ic.QrCode.Ecc.LOW,M:ic.QrCode.Ecc.MEDIUM,Q:ic.QrCode.Ecc.QUARTILE,H:ic.QrCode.Ecc.HIGH},Z_=128,J_="L",$_="#FFFFFF",eA="#000000",tA=!1,nA=1,oR=4,lR=0,cR=.1;function rA(s,e=0){const n=[];return s.forEach(function(o,h){let g=null;o.forEach(function(x,T){if(!x&&g!==null){n.push(`M${g+e} ${h+e}h${T-g}v1H${g+e}z`),g=null;return}if(T===o.length-1){if(!x)return;g===null?n.push(`M${T+e},${h+e} h1v1H${T+e}z`):n.push(`M${g+e},${h+e} h${T+1-g}v1H${g+e}z`);return}x&&g===null&&(g=T)})}),n.join("")}function iA(s,e){return s.slice().map((n,o)=>o<e.y||o>=e.y+e.h?n:n.map((h,g)=>g<e.x||g>=e.x+e.w?h:!1))}function uR(s,e,n,o){if(o==null)return null;const h=s.length+n*2,g=Math.floor(e*cR),x=h/e,T=(o.width||g)*x,b=(o.height||g)*x,w=o.x==null?s.length/2-T/2:o.x*x,C=o.y==null?s.length/2-b/2:o.y*x,R=o.opacity==null?1:o.opacity;let P=null;if(o.excavate){let $=Math.floor(w),ne=Math.floor(C),se=Math.ceil(T+w-$),Qe=Math.ceil(b+C-ne);P={x:$,y:ne,w:se,h:Qe}}const B=o.crossOrigin;return{x:w,y:C,h:b,w:T,excavation:P,opacity:R,crossOrigin:B}}function hR(s,e){return e!=null?Math.max(Math.floor(e),0):s?oR:lR}function sA({value:s,level:e,minVersion:n,includeMargin:o,marginSize:h,imageSettings:g,size:x,boostLevel:T}){let b=Ge.useMemo(()=>{const $=(Array.isArray(s)?s:[s]).reduce((ne,se)=>(ne.push(...ic.QrSegment.makeSegments(se)),ne),[]);return ic.QrCode.encodeSegments($,aR[e],n,void 0,void 0,T)},[s,e,n,T]);const{cells:w,margin:C,numCells:R,calculatedImageSettings:P}=Ge.useMemo(()=>{let B=b.getModules();const $=hR(o,h),ne=B.length+$*2,se=uR(B,x,$,g);return{cells:B,margin:$,numCells:ne,calculatedImageSettings:se}},[b,x,g,o,h]);return{qrcode:b,margin:C,cells:w,numCells:R,calculatedImageSettings:P}}var fR=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),aA=Ge.forwardRef(function(e,n){const o=e,{value:h,size:g=Z_,level:x=J_,bgColor:T=$_,fgColor:b=eA,includeMargin:w=tA,minVersion:C=nA,boostLevel:R,marginSize:P,imageSettings:B}=o,ne=ig(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:se}=ne,Qe=ig(ne,["style"]),Le=B?.src,he=Ge.useRef(null),Ue=Ge.useRef(null),pt=Ge.useCallback(lt=>{he.current=lt,typeof n=="function"?n(lt):n&&(n.current=lt)},[n]),[je,F]=Ge.useState(!1),{margin:z,cells:U,numCells:Q,calculatedImageSettings:X}=sA({value:h,level:x,minVersion:C,boostLevel:R,includeMargin:w,marginSize:P,imageSettings:B,size:g});Ge.useEffect(()=>{if(he.current!=null){const lt=he.current,ae=lt.getContext("2d");if(!ae)return;let re=U;const fe=Ue.current,tt=X!=null&&fe!==null&&fe.complete&&fe.naturalHeight!==0&&fe.naturalWidth!==0;tt&&X.excavation!=null&&(re=iA(U,X.excavation));const qe=window.devicePixelRatio||1;lt.height=lt.width=g*qe;const ut=g/Q*qe;ae.scale(ut,ut),ae.fillStyle=T,ae.fillRect(0,0,Q,Q),ae.fillStyle=b,fR?ae.fill(new Path2D(rA(re,z))):U.forEach(function(K,oe){K.forEach(function(ve,Te){ve&&ae.fillRect(Te+z,oe+z,1,1)})}),X&&(ae.globalAlpha=X.opacity),tt&&ae.drawImage(fe,X.x+z,X.y+z,X.w,X.h)}}),Ge.useEffect(()=>{F(!1)},[Le]);const Y=rg({height:g,width:g},se);let G=null;return Le!=null&&(G=Ge.createElement("img",{src:Le,key:Le,style:{display:"none"},onLoad:()=>{F(!0)},ref:Ue,crossOrigin:X?.crossOrigin})),Ge.createElement(Ge.Fragment,null,Ge.createElement("canvas",rg({style:Y,height:g,width:g,ref:pt,role:"img"},Qe)),G)});aA.displayName="QRCodeCanvas";var dR=Ge.forwardRef(function(e,n){const o=e,{value:h,size:g=Z_,level:x=J_,bgColor:T=$_,fgColor:b=eA,includeMargin:w=tA,minVersion:C=nA,boostLevel:R,title:P,marginSize:B,imageSettings:$}=o,ne=ig(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:se,cells:Qe,numCells:Le,calculatedImageSettings:he}=sA({value:h,level:x,minVersion:C,boostLevel:R,includeMargin:w,marginSize:B,imageSettings:$,size:g});let Ue=Qe,pt=null;$!=null&&he!=null&&(he.excavation!=null&&(Ue=iA(Qe,he.excavation)),pt=Ge.createElement("image",{href:$.src,height:he.h,width:he.w,x:he.x+se,y:he.y+se,preserveAspectRatio:"none",opacity:he.opacity,crossOrigin:he.crossOrigin}));const je=rA(Ue,se);return Ge.createElement("svg",rg({height:g,width:g,viewBox:`0 0 ${Le} ${Le}`,ref:n,role:"img"},ne),!!P&&Ge.createElement("title",null,P),Ge.createElement("path",{fill:T,d:`M0,0 h${Le}v${Le}H0z`,shapeRendering:"crispEdges"}),Ge.createElement("path",{fill:b,d:je,shapeRendering:"crispEdges"}),pt)});dR.displayName="QRCodeSVG";function gR({user:s}){const[e,n]=ye.useState([]),[o,h]=ye.useState(null),[g,x]=ye.useState(null),[T,b]=ye.useState(""),[w,C]=ye.useState(null),[R,P]=ye.useState([]),[B,$]=ye.useState(!0),[ne,se]=ye.useState(!1),[Qe,Le]=ye.useState([]),[he,Ue]=ye.useState(!0),[pt,je]=ye.useState(""),[F,z]=ye.useState(!1),[U,Q]=ye.useState(120),[X,Y]=ye.useState([]),[G,lt]=ye.useState(!1),ae=ye.useRef(null),re=ye.useRef(null),{options:fe}=om(),{logout:tt}=yd(),[qe,ut]=ye.useState(!1);ye.useEffect(()=>{(async()=>{$(!0);const at=(await Mr(cr(Ct,"times"))).docs.map(De=>{const $e=De.data();return{id:De.id,name:$e.name,category:$e.category,term:$e.term}});n(at),$(!1)})()},[]),ye.useEffect(()=>{(async()=>{try{const Ve=Fn(Ct,"users",s.uid),at=await pl(Ve),De=at.exists()?at.data():null,$e=Array.isArray(De?.allowedTerms)?De.allowedTerms.map(nt=>typeof nt=="number"?nt:parseInt(nt,10)).filter(nt=>!Number.isNaN(nt)):[];x($e)}catch(Ve){console.warn("Kunne ikke hente allowedTerms for lrer:",Ve),x([])}})()},[s.uid]),ye.useMemo(()=>{if(g===null)return fe;const Be=new Set(g??[]);return fe.filter(Ve=>Be.has(Ve.value))},[g,fe]),ye.useEffect(()=>{(async()=>{if(!(g===null||!o)){Ue(!0);try{const Ve=cr(Ct,"users"),at=is(Ve,ei("role","==","student"),ei("term","==",o)),$e=(await Mr(at)).docs.map(nt=>{const ot=nt.data(),et=ot?.name&&String(ot.name)||ot?.displayName&&String(ot.displayName)||null;return{id:nt.id,name:et,email:String(ot?.email??""),phone:ot?.phone?String(ot.phone):null,term:typeof ot?.term=="number"?ot.term:null}});$e.sort((nt,ot)=>{const et=(nt.name??"").toLocaleLowerCase(),Vt=(ot.name??"").toLocaleLowerCase();return et!==Vt?et.localeCompare(Vt,"nb-NO"):nt.email.localeCompare(ot.email,"nb-NO")}),Le($e)}catch(Ve){console.error("Feil ved lasting av studenter:",Ve),Le([])}finally{Ue(!1)}}})()},[g,o]),ye.useEffect(()=>{K()},[s.uid]);const K=async()=>{try{lt(!0);const Be=Date.now()-14400*1e3,Ve=jn.fromMillis(Be),at=cr(Ct,"sessions");let De=[];try{const ot=is(at,ei("teacherId","==",s.uid),ei("createdAt",">=",Ve),q4("createdAt","desc"),X4(50));De=(await Mr(ot)).docs}catch{const et=is(at,ei("teacherId","==",s.uid));De=(await Mr(et)).docs.filter(We=>{const Qn=We.data()?.createdAt;return Qn&&Qn.toMillis()>=Be}).sort((We,Qn)=>{const At=We.data()?.createdAt?.toMillis?.()??0;return(Qn.data()?.createdAt?.toMillis?.()??0)-At}).slice(0,50)}const $e=new Set,nt=[];for(const ot of De){const et=ot.data(),Vt=String(et?.timeId??"");if(!(!Vt||$e.has(Vt))&&($e.add(Vt),nt.push({timeId:Vt,name:String(et?.name??"Ukjent time"),category:String(et?.category??""),term:typeof et?.term=="number"?et.term:Number(et?.term)||0,lastAt:et?.createdAt}),nt.length>=10))break}Y(nt)}catch(Be){console.warn("Kunne ikke hente nylige timer:",Be),Y([])}finally{lt(!1)}};ye.useEffect(()=>{if(!w){P([]);return}const Be=cr(Ct,"sessions",w.id,"attendance"),Ve=$x(Be,at=>{const De=at.docs.map($e=>{const nt=$e.data();return{id:$e.id,studentName:nt.studentName??null,studentEmail:nt.studentEmail??null,createdAt:nt.createdAt}}).sort(($e,nt)=>{const ot=$e.createdAt?.toMillis?.()??0,et=nt.createdAt?.toMillis?.()??0;return ot-et});P(De)});return()=>Ve()},[w?.id]);const oe=ye.useMemo(()=>e.filter(Be=>Be.term===o),[e,o]),ve=ye.useMemo(()=>{const Be=T.trim().toLowerCase();return Be?oe.filter(Ve=>Ve.name.toLowerCase().includes(Be)).sort((Ve,at)=>Ve.name.localeCompare(at.name,"nb-NO",{sensitivity:"base"})):[]},[oe,T]),Te=ye.useMemo(()=>{const Be=pt.trim().toLowerCase();if(!Be||!w)return[];const Ve=Be.includes("@");return Qe.filter(at=>{if(at.term!==w.term)return!1;const De=String(at.name??"").toLowerCase(),$e=String(at.email??"").toLowerCase(),nt=Ve?$e:$e.split("@")[0]??$e,ot=String(at.phone??"").toLowerCase();return De.includes(Be)||nt.includes(Be)||ot.includes(Be)}).slice(0,10)},[Qe,pt,w]),Se=async Be=>{const Ve=e.find(Vt=>Vt.id===Be);if(!Ve)return;if(w){const Vt=Fn(Ct,"sessions",w.id);await bs(Vt,{isOpen:!1}),C(null)}const at=Math.floor(1e5+Math.random()*9e5),De=String(at),$e=cr(Ct,"sessions"),nt=jn.now(),et={id:(await xf($e,{timeId:Ve.id,name:Ve.name,category:Ve.category,term:Ve.term,code:De,teacherId:s.uid,teacherName:s.displayName,teacherEmail:s.email,createdAt:nt,isOpen:!0,openedAt:nt})).id,timeId:Ve.id,name:Ve.name,category:Ve.category,term:Ve.term,code:De,teacherId:s.uid,createdAt:nt,isOpen:!0,openedAt:nt};C(et),K()},_e=async Be=>{b(Be.name),se(!1),await Se(Be.id),re.current&&re.current.blur()},Je=async Be=>{h(Be.term),b(Be.name),se(!1),await Se(Be.timeId)},_t=async()=>{if(!w)return;const Be=Fn(Ct,"sessions",w.id);if(!w.isOpen){const at=jn.now();await bs(Be,{isOpen:!0,openedAt:at}),C({...w,isOpen:!0,openedAt:at}),Q(120)}else await bs(Be,{isOpen:!1}),C({...w,isOpen:!1})};ye.useEffect(()=>{if(!w)return;const Be=Fn(Ct,"sessions",w.id),Ve=$x(Be,at=>{if(!at.exists())return;const De=at.data();C($e=>$e&&$e.id===at.id?{...$e,isOpen:De?.isOpen??$e.isOpen,openedAt:De?.openedAt??$e.openedAt}:$e)});return()=>Ve()},[w?.id]),ye.useEffect(()=>{if(!w||!w.isOpen||!w.openedAt){Q(0);return}const Be=w.openedAt.toMillis(),Ve=async()=>{const De=Date.now(),$e=Math.floor((De-Be)/1e3),nt=Math.max(0,15-$e);if(Q(nt),nt===0&&w.isOpen)try{await bs(Fn(Ct,"sessions",w.id),{isOpen:!1}),C({...w,isOpen:!1})}catch{}};Ve();const at=setInterval(Ve,1e3);return()=>clearInterval(at)},[w?.id,w?.isOpen,w?.openedAt]);const It=Be=>{const Ve=Math.floor(Be/60).toString().padStart(2,"0"),at=Math.floor(Be%60).toString().padStart(2,"0");return`${Ve}:${at}`},An=async Be=>{if(w)try{const Ve=Fn(Ct,"sessions",w.id,"attendance",Be.id);if((await pl(Ve)).exists()){Dt.error("Studenten er allerede registrert p denne kten.");return}await cl(Ve,{userId:Be.id,studentName:Be.name??null,studentEmail:Be.email,createdAt:jn.now(),status:"present",addedManually:!0,addedBy:s.uid}),je(""),z(!1)}catch(Ve){console.error(Ve),Dt.error("Kunne ikke legge til student manuelt.")}},jt=Be=>{if(!w)return;const Ve=Be.studentName||Be.studentEmail||"denne studenten";Dt.warning(`Fjerne ${Ve} fra kten?`,{action:{label:"Bekreft",onClick:async()=>{try{await z_(Fn(Ct,"sessions",w.id,"attendance",Be.id)),Dt.success("Student fjernet fra kten.")}catch(at){console.error(at),Dt.error("Kunne ikke fjerne studenten.")}}},description:"Trykk bekreft for  fjerne"})};return B?O.jsx("div",{className:"page-card page-card--teacher",children:O.jsx(To,{})}):O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"page-card page-card--teacher",children:[O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[O.jsx("div",{style:{fontWeight:600},children:s.displayName||s.email}),O.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[O.jsx("button",{type:"button",onClick:()=>ut(!0),style:{padding:"0.35rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#ffffff",cursor:"pointer",fontSize:"0.85rem"},children:"Min profil"}),O.jsx("button",{onClick:tt,type:"button",style:{padding:"0.35rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#ffffff",cursor:"pointer",fontSize:"0.85rem"},children:"Logg ut"})]})]}),O.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem"},children:"Registrer oppmte"}),O.jsxs("section",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",alignItems:"center"},children:[O.jsx("div",{style:{marginBottom:"1rem",width:"100%",maxWidth:520},children:(()=>{const Be=g!==null?new Set(g??[]):null,Ve=Be?fe.filter(at=>Be.has(at.value)):fe;return Ve.length===0?O.jsx("div",{style:{width:"100%",padding:"0.6rem 0",fontSize:"16px",border:"1px solid #e5e7eb",borderRadius:"0.5rem",background:"#f9fafb",color:"#6b7280",textAlign:"center"},children:"Ingen terminer tilgjengelig"}):O.jsxs("select",{value:o??"",onChange:at=>{const De=at.target.value,$e=De===""?null:parseInt(De,10);h($e),b(""),se(!1),C(null),P([]),$e!=null&&setTimeout(()=>{re.current?.focus()},0)},style:{width:"100%",padding:"0.6rem 0.75rem",fontSize:"16px",textAlign:"center"},children:[O.jsx("option",{value:"",disabled:!0,children:"Velg modul"}),Ve.map(at=>O.jsx("option",{value:at.value,children:at.label},at.value))]})})()}),O.jsxs("div",{style:{position:"relative",marginBottom:"0.75rem",width:"100%",maxWidth:520},children:[O.jsx("input",{ref:re,value:T,onChange:Be=>{b(Be.target.value),se(!0)},onFocus:()=>{o&&T.trim().length>0&&se(!0)},placeholder:o?"Start  skrive navnet p timen...":"Velg modul frst",disabled:!o,style:{width:"100%",padding:"0.6rem 0rem",fontSize:"16px",textAlign:"center",opacity:o?1:.6}}),ne&&ve.length>0&&O.jsx("ul",{style:{position:"absolute",top:"100%",left:0,right:0,zIndex:10,background:"white",border:"1px solid #e5e7eb",borderRadius:"0.5rem",marginTop:"0.2rem",listStyle:"none",padding:0,maxHeight:"220px",overflowY:"auto",boxShadow:"0 10px 20px rgba(0,0,0,0.08)"},children:ve.map(Be=>O.jsxs("li",{onClick:()=>_e(Be),style:{padding:"0.4rem 0.6rem",cursor:"pointer",borderBottom:"1px solid #f3f4f6"},onMouseDown:Ve=>Ve.preventDefault(),children:[O.jsx("div",{children:Be.name}),O.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:Be.category})]},Be.id))})]})]}),!w&&X.length>0&&O.jsx("section",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",alignItems:"center"},children:O.jsxs("div",{style:{width:"100%",maxWidth:520},children:[O.jsx("h4",{style:{textAlign:"center",marginTop:0},children:"Nylig registrerte timer"}),O.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:X.map(Be=>O.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.5rem 0",borderBottom:"1px solid #f3f4f6"},children:[O.jsxs("div",{children:[O.jsx("div",{style:{fontWeight:600},children:Be.name}),O.jsxs("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:[Be.category,"  ",yl(fe,Be.term)]})]}),O.jsx("button",{type:"button",onClick:()=>void Je(Be),style:{padding:"0.35rem 0.9rem",borderRadius:"999px",border:"none",background:"#16a34a",color:"white",cursor:"pointer"},children:"pne"})]},Be.timeId))})]})}),w&&O.jsxs("section",{ref:ae,style:{marginTop:"2rem",padding:"1rem",border:"1px solid #e5e7eb",borderRadius:"0.75rem",background:"#f9fafb"},children:[O.jsxs("div",{style:{textAlign:"center"},children:[O.jsx("h3",{style:{marginTop:0,marginBottom:"0.25rem"},children:yl(fe,w.term)}),O.jsxs("p",{style:{margin:0},children:[O.jsx("strong",{children:"Time:"})," ",w.name]}),O.jsxs("p",{style:{marginTop:"0.2rem"},children:[O.jsx("strong",{children:"Gruppe:"})," ",w.category]})]}),O.jsxs("div",{style:{marginTop:"1rem",position:"relative"},children:[O.jsxs("div",{style:{filter:w.isOpen===!1?"blur(6px)":"none",pointerEvents:"none",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},children:[O.jsx(aA,{value:w.code,size:160,includeMargin:!0}),O.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",letterSpacing:"0.3em"},children:w.code})]}),w.isOpen===!1&&O.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center"},children:O.jsx("div",{style:{background:"rgba(255,255,255,0.85)",padding:"0.5rem 0.75rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb",fontWeight:600,color:"#6b7280"},children:"kten er lukket"})})]}),O.jsxs("div",{style:{marginTop:"1.5rem"},children:[O.jsx("h4",{style:{textAlign:"center",marginBottom:"0.3rem"},children:"Legg til student manuelt"}),O.jsx("p",{style:{fontSize:"0.8rem",color:"#6b7280",textAlign:"center",marginTop:0,marginBottom:"0.5rem"},children:"Brukes dersom en student ikke kan skanne eller skrive inn kode."}),he&&O.jsx("div",{style:{display:"flex",justifyContent:"center"},children:O.jsx(To,{})}),O.jsxs("div",{style:{position:"relative",maxWidth:"360px",margin:"0 auto"},children:[O.jsx("input",{value:pt,onChange:Be=>{je(Be.target.value),z(!0)},onFocus:()=>{pt.trim().length>0&&z(!0)},placeholder:he?"Laster studenter...":"Sk p navn, e-post eller telefon",disabled:he,style:{width:"100%",padding:"0.6rem 0.75rem",fontSize:"16px",borderRadius:"0.5rem",border:"1px solid #d1d5db",textAlign:"center"}}),F&&Te.length>0&&O.jsx("ul",{style:{position:"absolute",top:"100%",left:0,right:0,zIndex:20,background:"white",border:"1px solid #e5e7eb",borderRadius:"0.5rem",marginTop:"0.2rem",listStyle:"none",padding:0,maxHeight:"220px",overflowY:"auto",boxShadow:"0 10px 20px rgba(0,0,0,0.08)"},children:Te.map(Be=>O.jsxs("li",{onClick:()=>An(Be),style:{padding:"0.4rem 0.6rem",cursor:"pointer",borderBottom:"1px solid #f3f4f6"},onMouseDown:Ve=>Ve.preventDefault(),children:[O.jsx("div",{children:Be.name||"(Uten navn)"}),O.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[Be.email,Be.phone?`  ${Be.phone}`:""]})]},Be.id))})]})]}),O.jsxs("div",{style:{marginTop:"1.2rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[O.jsx("div",{style:{fontWeight:600,color:"#111827"},children:It(U)}),O.jsx("button",{onClick:_t,style:{padding:"0.5rem 1.2rem",borderRadius:"999px",border:"none",background:(w.isOpen===!1,"#6CE1AB"),color:"black",fontWeight:500,cursor:"pointer"},children:w.isOpen===!1?"pne kta":"Lukk kt"})]}),O.jsx("hr",{style:{margin:"1rem 0"}}),O.jsx("h4",{children:"Registrerte studenter"}),R.length===0?O.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"Ingen har registrert seg enn."}):O.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[O.jsx("thead",{children:O.jsxs("tr",{children:[O.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"Navn"}),O.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"E-post"}),O.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"Tidspunkt"}),O.jsx("th",{style:{textAlign:"right",borderBottom:"1px solid #e5e7eb",padding:"0.3rem",width:40}})]})}),O.jsx("tbody",{children:R.map(Be=>O.jsxs("tr",{children:[O.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:Be.studentName||"-"}),O.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:Be.studentEmail||"-"}),O.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6",fontSize:"0.8rem",color:"#6b7280"},children:Be.createdAt?new Date(Be.createdAt.toMillis()).toLocaleTimeString("no-NO",{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-"}),O.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6",textAlign:"right"},children:O.jsx("button",{type:"button",onClick:()=>jt(Be),"aria-label":"Fjern student fra kten",title:"Fjern student",style:{background:"transparent",border:"none",cursor:"pointer",color:"#b91c1c",padding:"0.15rem"},children:O.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[O.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),O.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})})]},Be.id))})]})]})]}),qe&&O.jsx(lm,{uid:s.uid,role:s.role,email:s.email,displayName:s.displayName,onClose:()=>ut(!1)})]})}const mR="type.googleapis.com/google.protobuf.Int64Value",pR="type.googleapis.com/google.protobuf.UInt64Value";function oA(s,e){const n={};for(const o in s)s.hasOwnProperty(o)&&(n[o]=e(s[o]));return n}function Hf(s){if(s==null)return null;if(s instanceof Number&&(s=s.valueOf()),typeof s=="number"&&isFinite(s)||s===!0||s===!1||Object.prototype.toString.call(s)==="[object String]")return s;if(s instanceof Date)return s.toISOString();if(Array.isArray(s))return s.map(e=>Hf(e));if(typeof s=="function"||typeof s=="object")return oA(s,e=>Hf(e));throw new Error("Data cannot be encoded in JSON: "+s)}function pc(s){if(s==null)return s;if(s["@type"])switch(s["@type"]){case mR:case pR:{const e=Number(s.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+s);return e}default:throw new Error("Data cannot be decoded from JSON: "+s)}return Array.isArray(s)?s.map(e=>pc(e)):typeof s=="function"||typeof s=="object"?oA(s,e=>pc(e)):s}const cm="functions";const mE={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Gi extends ea{constructor(e,n,o){super(`${cm}/${e}`,n||""),this.details=o,Object.setPrototypeOf(this,Gi.prototype)}}function yR(s){if(s>=200&&s<300)return"ok";switch(s){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Gf(s,e){let n=yR(s),o=n,h;try{const g=e&&e.error;if(g){const x=g.status;if(typeof x=="string"){if(!mE[x])return new Gi("internal","internal");n=mE[x],o=x}const T=g.message;typeof T=="string"&&(o=T),h=g.details,h!==void 0&&(h=pc(h))}}catch{}return n==="ok"?null:new Gi(n,o,h)}class xR{constructor(e,n,o,h){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,ss(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=o.getImmediate({optional:!0}),this.auth||n.get().then(g=>this.auth=g,()=>{}),this.messaging||o.get().then(g=>this.messaging=g,()=>{}),this.appCheck||h?.get().then(g=>this.appCheck=g,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),o=await this.getMessagingToken(),h=await this.getAppCheckToken(e);return{authToken:n,messagingToken:o,appCheckToken:h}}}const sg="us-central1",ER=/^data: (.*?)(?:\n|$)/;function wR(s){let e=null;return{promise:new Promise((n,o)=>{e=setTimeout(()=>{o(new Gi("deadline-exceeded","deadline-exceeded"))},s)}),cancel:()=>{e&&clearTimeout(e)}}}class _R{constructor(e,n,o,h,g=sg,x=(...T)=>fetch(...T)){this.app=e,this.fetchImpl=x,this.emulatorOrigin=null,this.contextProvider=new xR(e,n,o,h),this.cancelAllRequests=new Promise(T=>{this.deleteService=()=>Promise.resolve(T())});try{const T=new URL(g);this.customDomain=T.origin+(T.pathname==="/"?"":T.pathname),this.region=sg}catch{this.customDomain=null,this.region=g}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function AR(s,e,n){const o=Mo(e);s.emulatorOrigin=`http${o?"s":""}://${e}:${n}`,o&&(og(s.emulatorOrigin+"/backends"),lg("Functions",!0))}function bR(s,e,n){const o=h=>TR(s,e,h,{});return o.stream=(h,g)=>SR(s,e,h,g),o}function lA(s){return s.emulatorOrigin&&Mo(s.emulatorOrigin)?"include":void 0}async function vR(s,e,n,o,h){n["Content-Type"]="application/json";let g;try{g=await o(s,{method:"POST",body:JSON.stringify(e),headers:n,credentials:lA(h)})}catch{return{status:0,json:null}}let x=null;try{x=await g.json()}catch{}return{status:g.status,json:x}}async function cA(s,e){const n={},o=await s.contextProvider.getContext(e.limitedUseAppCheckTokens);return o.authToken&&(n.Authorization="Bearer "+o.authToken),o.messagingToken&&(n["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=o.appCheckToken),n}function TR(s,e,n,o){const h=s._url(e);return CR(s,h,n,o)}async function CR(s,e,n,o){n=Hf(n);const h={data:n},g=await cA(s,o),x=o.timeout||7e4,T=wR(x),b=await Promise.race([vR(e,h,g,s.fetchImpl,s),T.promise,s.cancelAllRequests]);if(T.cancel(),!b)throw new Gi("cancelled","Firebase Functions instance was deleted.");const w=Gf(b.status,b.json);if(w)throw w;if(!b.json)throw new Gi("internal","Response is not valid JSON object.");let C=b.json.data;if(typeof C>"u"&&(C=b.json.result),typeof C>"u")throw new Gi("internal","Response is missing data field.");return{data:pc(C)}}function SR(s,e,n,o){const h=s._url(e);return IR(s,h,n,o||{})}async function IR(s,e,n,o){n=Hf(n);const h={data:n},g=await cA(s,o);g["Content-Type"]="application/json",g.Accept="text/event-stream";let x;try{x=await s.fetchImpl(e,{method:"POST",body:JSON.stringify(h),headers:g,signal:o?.signal,credentials:lA(s)})}catch(P){if(P instanceof Error&&P.name==="AbortError"){const $=new Gi("cancelled","Request was cancelled.");return{data:Promise.reject($),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject($)}}}}}}const B=Gf(0,null);return{data:Promise.reject(B),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(B)}}}}}}let T,b;const w=new Promise((P,B)=>{T=P,b=B});o?.signal?.addEventListener("abort",()=>{const P=new Gi("cancelled","Request was cancelled.");b(P)});const C=x.body.getReader(),R=RR(C,T,b,o?.signal);return{stream:{[Symbol.asyncIterator](){const P=R.getReader();return{async next(){const{value:B,done:$}=await P.read();return{value:B,done:$}},async return(){return await P.cancel(),{done:!0,value:void 0}}}}},data:w}}function RR(s,e,n,o){const h=(x,T)=>{const b=x.match(ER);if(!b)return;const w=b[1];try{const C=JSON.parse(w);if("result"in C){e(pc(C.result));return}if("message"in C){T.enqueue(pc(C.message));return}if("error"in C){const R=Gf(0,C);T.error(R),n(R);return}}catch(C){if(C instanceof Gi){T.error(C),n(C);return}}},g=new TextDecoder;return new ReadableStream({start(x){let T="";return b();async function b(){if(o?.aborted){const w=new Gi("cancelled","Request was cancelled");return x.error(w),n(w),Promise.resolve()}try{const{value:w,done:C}=await s.read();if(C){T.trim()&&h(T.trim(),x),x.close();return}if(o?.aborted){const P=new Gi("cancelled","Request was cancelled");x.error(P),n(P),await s.cancel();return}T+=g.decode(w,{stream:!0});const R=T.split(`
`);T=R.pop()||"";for(const P of R)P.trim()&&h(P.trim(),x);return b()}catch(w){const C=w instanceof Gi?w:Gf(0,null);x.error(C),n(C)}}},cancel(){return s.cancel()}})}const pE="@firebase/functions",yE="0.13.1";const NR="auth-internal",OR="app-check-internal",DR="messaging-internal";function MR(s){const e=(n,{instanceIdentifier:o})=>{const h=n.getProvider("app").getImmediate(),g=n.getProvider(NR),x=n.getProvider(DR),T=n.getProvider(OR);return new _R(h,g,x,T,o)};hl(new Co(cm,e,"PUBLIC").setMultipleInstances(!0)),qs(pE,yE,s),qs(pE,yE,"esm2020")}function T1(s=Wf(),e=sg){const o=Yf(er(s),cm).getImmediate({identifier:e}),h=vE("functions");return h&&kR(o,...h),o}function kR(s,e,n){AR(er(s),e,n)}function C1(s,e,n){return bR(er(s),e)}MR();function xE(s){const e=s.match(/^\s*(\d+)/);return e?parseInt(e[1],10):Number.POSITIVE_INFINITY}function S1(){const s="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789!@#$";let e="";for(let n=0;n<12;n++)e+=s[Math.floor(Math.random()*s.length)];return e}const LR=()=>{const[s,e]=ye.useState([]),[n,o]=ye.useState(!0),[h,g]=ye.useState(""),[x,T]=ye.useState("students"),[b,w]=ye.useState("all"),[C,R]=ye.useState("name"),[P,B]=ye.useState("asc"),[$,ne]=ye.useState("all"),[se,Qe]=ye.useState("name"),[Le,he]=ye.useState("asc"),[Ue,pt]=ye.useState("name"),[je,F]=ye.useState("asc"),[z,U]=ye.useState([]),Q=ye.useMemo(()=>z.slice().sort((ee,Ze)=>(ee.order??ee.value)-(Ze.order??Ze.value)).map(ee=>({value:ee.value,label:ee.label||`Termin ${ee.value}`})),[z]);ye.useEffect(()=>{(async()=>{try{const dt=(await Mr(cr(Ct,"terms"))).docs.map(gt=>{const kt=gt.data(),$t=typeof kt?.value=="number"?kt.value:void 0;if(typeof $t!="number")return null;const kn=typeof kt?.label=="string"?kt.label:"",gn=typeof kt?.order=="number"?kt.order:void 0;return{value:$t,label:kn,order:gn}}).filter(Boolean);dt.sort((gt,kt)=>(gt.order??gt.value)-(kt.order??kt.value)),U(dt)}catch(Ze){console.warn("Kunne ikke laste terminer fra Firestore for admin-brukerpanel:",Ze)}})()},[]);const[X,Y]=ye.useState(null),[G,lt]=ye.useState(null),[ae,re]=ye.useState(""),[fe,tt]=ye.useState(""),[qe,ut]=ye.useState(""),[K,oe]=ye.useState("teacher"),[ve,Te]=ye.useState([]),[Se,_e]=ye.useState(null),[Je,_t]=ye.useState(null),[It,An]=ye.useState(""),[jt,Be]=ye.useState(""),[Ve,at]=ye.useState(""),[De,$e]=ye.useState("student"),[nt,ot]=ye.useState(null),[et,Vt]=ye.useState(null),[We,Qn]=ye.useState({}),At=(ee,Ze)=>{if(ee&&Ze!=null)return We[ee]?.[Ze]},Rt=async(ee,Ze)=>{if(!(!ee||Ze==null)&&We[ee]?.[Ze]===void 0)try{const dt=Fn(Ct,"users",ee,"books",String(Ze)),gt=await pl(dt),kt=gt.exists()?{approved:!!gt.data().approved,approvedAt:gt.data().approvedAt??null}:{approved:!1,approvedAt:null};Qn($t=>({...$t,[ee]:{...$t[ee]??{},[Ze]:kt}}))}catch(dt){console.error("Kunne ikke laste godkjenning for bok:",dt)}},Sr=({uid:ee,term:Ze})=>{const dt=At(ee,Ze);if(ye.useEffect(()=>{dt===void 0&&Rt(ee,Ze)},[ee,Ze,dt]),!dt)return O.jsx("span",{style:{color:"#9ca3af"},children:""});if(dt.approved){const gt=dt.approvedAt,kt=gt?new Date(gt.toDate()).toLocaleString("nb-NO"):void 0;return O.jsx("span",{title:kt,style:{color:"#16a34a",fontSize:"1rem"},children:""})}return O.jsx("span",{style:{color:"#9ca3af"},children:""})},[Gt,Hn]=ye.useState(null),[Rn,Pn]=ye.useState(null),[Lr,ti]=ye.useState(""),[Pr,Zt]=ye.useState(""),[Me,zt]=ye.useState(""),[xt,bn]=ye.useState("admin");ye.useEffect(()=>{(async()=>{try{o(!0);const dt=(await Mr(cr(Ct,"users"))).docs.map(gt=>{const kt=gt.data();return{docId:gt.id,email:kt.email??"",displayName:kt.name??kt.displayName??kt.email??"(uten navn)",role:kt.role??"student",term:kt.term??null,phone:kt.phone??null,allowedTerms:kt.allowedTerms??[]}});dt.sort((gt,kt)=>gt.displayName.localeCompare(kt.displayName,"nb-NO",{sensitivity:"base"})),e(dt)}catch(Ze){console.error("Feil ved lasting av brukere:",Ze),e([])}finally{o(!1)}})()},[]);const Ir=ye.useMemo(()=>{const ee=h.trim().toLowerCase();if(!ee)return s;const Ze=ee.includes("@");return s.filter(dt=>{const gt=String(dt.displayName??"").toLowerCase(),kt=String(dt.email??"").toLowerCase(),$t=Ze?kt:kt.split("@")[0]??kt,kn=String(dt.phone??"").toLowerCase();return`${gt} ${$t} ${kn}`.includes(ee)})},[s,h]);let Rr=Ir.filter(ee=>ee.role==="teacher"),de=Ir.filter(ee=>ee.role==="student"),be=Ir.filter(ee=>ee.role==="admin");if(b!=="all"){const ee=b;Rr=Rr.filter(Ze=>(Ze.allowedTerms??[]).includes(ee))}if($!=="all"){const ee=$;de=de.filter(Ze=>Ze.term===ee)}Rr.sort((ee,Ze)=>{const dt=$t=>C==="name"?$t.displayName??"":C==="email"?$t.email??"":$t.phone??"",gt=String(dt(ee)??"").toLowerCase(),kt=String(dt(Ze)??"").toLowerCase();return gt<kt?P==="asc"?-1:1:gt>kt?P==="asc"?1:-1:0}),de.sort((ee,Ze)=>{const dt=$t=>se==="name"?$t.displayName??"":se==="email"?$t.email??"":$t.phone??"",gt=String(dt(ee)??"").toLowerCase(),kt=String(dt(Ze)??"").toLowerCase();return gt<kt?Le==="asc"?-1:1:gt>kt?Le==="asc"?1:-1:0}),be.sort((ee,Ze)=>{const dt=$t=>Ue==="name"?$t.displayName??"":Ue==="email"?$t.email??"":$t.phone??"",gt=String(dt(ee)??"").toLowerCase(),kt=String(dt(Ze)??"").toLowerCase();return gt<kt?je==="asc"?-1:1:gt>kt?je==="asc"?1:-1:0}),Rr=Rr.slice(0,50),de=de.slice(0,50),be=be.slice(0,50);const Oe=ee=>{R(Ze=>Ze===ee?(B(dt=>dt==="asc"?"desc":"asc"),Ze):(B("asc"),ee))},rt=ee=>{Qe(Ze=>Ze===ee?(he(dt=>dt==="asc"?"desc":"asc"),Ze):(he("asc"),ee))},ft=ee=>{pt(Ze=>Ze===ee?(F(dt=>dt==="asc"?"desc":"asc"),Ze):(F("asc"),ee))},Ke=()=>{Y("create"),lt(null),re(""),tt(""),ut(""),oe("teacher"),Te([])},He=async()=>{const ee=fe.trim(),Ze=ae.trim(),dt=qe.trim();if(!ee){Dt.error("E-post m fylles ut for  opprette lrer.");return}if(!ve||ve.length===0){Dt.error("Velg minst n termin lreren kan registrere for.");return}try{const gt=S1(),$t=(await cf(v1,ee,gt)).user.uid,kn={uid:$t,email:ee,displayName:Ze||ee,name:Ze||ee,role:K,term:null,phone:dt||null,allowedTerms:ve};await cl(Fn(Ct,"users",$t),kn,{merge:!0}),e(gn=>{const qt=[{docId:$t,email:ee,displayName:kn.displayName,role:K,term:null,phone:dt||null,allowedTerms:[...ve]},...gn];return qt.sort((pr,ir)=>pr.displayName.localeCompare(ir.displayName,"nb-NO",{sensitivity:"base"})),qt}),Y(null),lt(null),Dt.success("Ny lrer opprettet",{description:`Epost: ${ee}
Midlertidig passord: ${gt}
Gi passordet videre og be om passordbytte etter frste innlogging.`,duration:15e3})}catch(gt){console.error("Feil ved oppretting av lrer:",gt),gt?.code==="auth/email-already-in-use"?Dt.error("E-posten er allerede i bruk i Auth. Bruk en annen eller koble eksisterende bruker."):Dt.error("Kunne ikke opprette lrer. Se console for mer info.")}},st=ee=>{Y("edit"),lt(ee),re(ee.displayName),tt(ee.email),ut(ee.phone??""),oe(ee.role),Te(ee.allowedTerms??[])},ht=async()=>{if(!G)return;const ee=G.docId;try{if(fe.trim()&&fe.trim()!==(G.email||""))try{const dt=T1(void 0,"europe-west1");await C1(dt,"adminUpdateUserEmail")({uid:ee,newEmail:fe.trim()})}catch(dt){console.error("adminUpdateUserEmail failed",dt),Dt.error("Kunne ikke oppdatere lrerens epost i Auth. Endringen er avbrutt. Kontroller at Cloud Function 'adminUpdateUserEmail' er deployet og at du har tilgang.");return}const Ze=Fn(Ct,"users",ee);await bs(Ze,{displayName:ae,email:fe,phone:qe||null,role:K,allowedTerms:ve}),e(dt=>dt.map(gt=>gt.docId===ee?{...gt,displayName:ae,email:fe,phone:qe||null,role:K,allowedTerms:[...ve]}:gt)),Y(null),lt(null)}catch(Ze){console.error("Feil ved lagring av lrer:",Ze),Dt.error("Kunne ikke lagre endringer for lrer.")}},St=()=>{Y(null),lt(null)},bt=ee=>{Te(Ze=>Ze.includes(ee)?Ze.filter(dt=>dt!==ee):[...Ze,ee])},dn=()=>{_e("create"),_t(null),An(""),Be(""),at(""),$e("student"),ot(null)},sn=async()=>{const ee=jt.trim(),Ze=It.trim(),dt=Ve.trim();if(!Ze){Dt.error("Navn m fylles ut for  opprette student.");return}if(!ee){Dt.error("E-post m fylles ut for  opprette student.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ee)){Dt.error("Ugyldig epost.");return}if(nt==null){Dt.error("Velg termin studenten tilhrer.");return}try{const kt=S1(),kn=(await cf(v1,ee,kt)).user.uid,gn={uid:kn,email:ee,displayName:Ze||ee,name:Ze||ee,role:De,term:nt,phone:dt||null,allowedTerms:[]};await cl(Fn(Ct,"users",kn),gn,{merge:!0}),e(qt=>{const pr=[{docId:kn,email:ee,displayName:gn.displayName,role:De,term:nt,phone:dt||null,allowedTerms:[]},...qt];return pr.sort((ir,nr)=>ir.displayName.localeCompare(nr.displayName,"nb-NO",{sensitivity:"base"})),pr}),_e(null),_t(null),Dt.success(`Ny student med epost ${ee} er opprettet.`,{description:"Be studenten trykke Glemt passord p innloggingssiden for  lage sitt eget passord.",duration:12e3})}catch(kt){console.error("Feil ved oppretting av student:",kt),kt?.code==="auth/invalid-email"?Dt.error("Ugyldig epost."):kt?.code==="auth/email-already-in-use"?Dt.error("E-posten er allerede i bruk i Auth. Bruk en annen eller koble eksisterende bruker."):kt?.code==="auth/missing-email"?Dt.error("Epost mangler."):Dt.error("Kunne ikke opprette student. Prv igjen senere.")}},Gn=ee=>{_e("edit"),_t(ee),An(ee.displayName),Be(ee.email),at(ee.phone??""),$e(ee.role),ot(ee.term??null)},ur=async()=>{if(!Je)return;const ee=Je.docId;try{if(jt.trim()&&jt.trim()!==(Je.email||""))try{const dt=T1(void 0,"europe-west1");await C1(dt,"adminUpdateUserEmail")({uid:ee,newEmail:jt.trim()})}catch(dt){console.error("adminUpdateUserEmail failed",dt),Dt.error("Kunne ikke oppdatere studentens epost i Auth. Endringen er avbrutt. Kontroller at Cloud Function 'adminUpdateUserEmail' er deployet og at du har tilgang.");return}const Ze=Fn(Ct,"users",ee);await bs(Ze,{displayName:It,email:jt,phone:Ve||null,role:De,term:nt??null}),e(dt=>dt.map(gt=>gt.docId===ee?{...gt,displayName:It,email:jt,phone:Ve||null,role:De,term:nt??null}:gt)),_e(null),_t(null)}catch(Ze){console.error("Feil ved lagring av student:",Ze),Dt.error("Kunne ikke lagre endringer for student.")}},qr=()=>{_e(null),_t(null)},Xr=()=>{Hn("create"),Pn(null),ti(""),Zt(""),zt(""),bn("admin")},it=async()=>{const ee=Pr.trim(),Ze=Lr.trim(),dt=Me.trim();if(!ee){Dt.error("E-post m fylles ut for  opprette admin.");return}if(!dt){Dt.error("Mobilnummer m fylles ut for  opprette admin.");return}try{const gt=S1(),$t=(await cf(v1,ee,gt)).user.uid,kn={uid:$t,email:ee,displayName:Ze||ee,name:Ze||ee,role:xt,term:null,phone:dt,allowedTerms:[]};await cl(Fn(Ct,"users",$t),kn,{merge:!0}),e(gn=>{const qt=[{docId:$t,email:ee,displayName:kn.displayName,role:xt,term:null,phone:dt,allowedTerms:[]},...gn];return qt.sort((pr,ir)=>pr.displayName.localeCompare(ir.displayName,"nb-NO",{sensitivity:"base"})),qt}),Hn(null),Pn(null),Dt.success("Ny admin opprettet",{description:`Epost: ${ee}
Midlertidig passord: ${gt}
Gi passordet videre og be om passordbytte etter frste innlogging.`,duration:15e3})}catch(gt){console.error("Feil ved oppretting av admin:",gt),gt?.code==="auth/email-already-in-use"?Dt.error("E-posten er allerede i bruk i Auth. Bruk en annen eller koble eksisterende bruker."):Dt.error("Kunne ikke opprette admin. Se console for mer info.")}},Br=ee=>{Hn("edit"),Pn(ee),ti(ee.displayName),Zt(ee.email),zt(ee.phone??""),bn(ee.role)},tr=async()=>{if(!Rn)return;const ee=Rn.docId;try{if(Pr.trim()&&Pr.trim()!==(Rn.email||""))try{const dt=T1(void 0,"europe-west1");await C1(dt,"adminUpdateUserEmail")({uid:ee,newEmail:Pr.trim()})}catch(dt){console.error("adminUpdateUserEmail failed",dt),Dt.error("Kunne ikke oppdatere adminepost i Auth. Endringen er avbrutt. Kontroller at Cloud Function 'adminUpdateUserEmail' er deployet og at du har tilgang.");return}const Ze=Fn(Ct,"users",ee);await bs(Ze,{displayName:Lr,email:Pr,phone:Me||null,role:xt}),e(dt=>dt.map(gt=>gt.docId===ee?{...gt,displayName:Lr,email:Pr,phone:Me||null,role:xt}:gt)),Hn(null),Pn(null)}catch(Ze){console.error("Feil ved lagring av admin:",Ze),Dt.error("Kunne ikke lagre endringer for admin.")}},vn=()=>{Hn(null),Pn(null)};return O.jsxs("div",{style:{marginBottom:"2rem"},children:[O.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem"},children:[O.jsx("button",{type:"button",onClick:()=>T("students"),style:{flex:1,padding:"0.35rem 0.5rem",borderRadius:"999px",border:"1px solid #d1d5db",background:x==="students"?"#6CE1AB":"#ffffff",color:x==="students"?"black":"#111827",fontSize:"0.85rem",cursor:"pointer"},children:"Studenter"}),O.jsx("button",{type:"button",onClick:()=>T("teachers"),style:{flex:1,padding:"0.35rem 0.5rem",borderRadius:"999px",border:"1px solid #d1d5db",background:x==="teachers"?"#6CE1AB":"#ffffff",color:x==="teachers"?"black":"#111827",fontSize:"0.85rem",cursor:"pointer"},children:"Lrere"}),O.jsx("button",{type:"button",onClick:()=>T("admins"),style:{flex:1,padding:"0.35rem 0.5rem",borderRadius:"999px",border:"1px solid #d1d5db",background:x==="admins"?"#6CE1AB":"#ffffff",color:x==="admins"?"black":"#111827",fontSize:"0.85rem",cursor:"pointer"},children:"Admin"})]}),O.jsx("input",{type:"text",placeholder:"Sk p navn, e-post eller mobil...",value:h,onChange:ee=>g(ee.target.value),style:{width:"100%",padding:"0.4rem 0.6rem",marginBottom:"0.75rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.9rem"}}),n?O.jsx(To,{}):O.jsxs(O.Fragment,{children:[x==="teachers"&&O.jsxs("div",{style:{marginBottom:"1.2rem"},children:[O.jsxs("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",gap:"0.5rem",marginBottom:"0.4rem"},children:[O.jsx("div",{style:{fontSize:"0.8rem"},children:O.jsx("label",{children:O.jsxs("select",{value:b==="all"?"":b,onChange:ee=>{const Ze=ee.target.value;w(Ze===""?"all":parseInt(Ze,10))},style:{padding:"0.2rem 0.4rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.8rem"},children:[O.jsx("option",{value:"",children:"Alle terminer"}),Q.map(ee=>O.jsx("option",{value:ee.value,children:ee.label},ee.value))]})})}),O.jsx("button",{type:"button",onClick:Ke,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.8rem",cursor:"pointer"},children:"Legg til"})]}),O.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[O.jsx("thead",{children:O.jsxs("tr",{children:[O.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>Oe("name"),children:["Navn"," ",C==="name"&&(P==="asc"?"":"")]}),O.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>Oe("email"),children:["E-post"," ",C==="email"&&(P==="asc"?"":"")]}),O.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>Oe("phone"),children:["Mobil"," ",C==="phone"&&(P==="asc"?"":"")]})]})}),O.jsx("tbody",{children:Rr.length===0?O.jsx("tr",{children:O.jsx("td",{colSpan:3,style:{padding:"0.4rem",fontSize:"0.85rem",color:"#6b7280"},children:"Ingen lrere funnet."})}):Rr.map(ee=>O.jsxs("tr",{onClick:()=>st(ee),style:{cursor:"pointer"},children:[O.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:ee.displayName}),O.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:ee.email}),O.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:ee.phone??""})]},ee.docId))})]})]}),x==="students"&&O.jsxs("div",{style:{marginBottom:"1.2rem"},children:[O.jsxs("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",gap:"0.5rem",marginBottom:"0.4rem"},children:[O.jsx("div",{style:{fontSize:"0.8rem"},children:O.jsx("label",{children:O.jsxs("select",{value:$==="all"?"":$,onChange:ee=>{const Ze=ee.target.value;ne(Ze===""?"all":parseInt(Ze,10))},style:{padding:"0.2rem 0.4rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.8rem"},children:[O.jsx("option",{value:"",children:"Alle terminer"}),Q.map(ee=>O.jsx("option",{value:ee.value,children:ee.label},ee.value))]})})}),O.jsx("button",{type:"button",onClick:dn,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.8rem",cursor:"pointer"},children:"Legg til"})]}),de.length===0?O.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280"},children:"Ingen studenter funnet."}):O.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[O.jsx("thead",{children:O.jsxs("tr",{children:[O.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>rt("name"),children:["Navn"," ",se==="name"&&(Le==="asc"?"":"")]}),O.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem"},children:"Termin"}),O.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem"},children:"Godkjent?"})]})}),O.jsx("tbody",{children:de.map(ee=>O.jsxs("tr",{onClick:()=>Gn(ee),style:{cursor:"pointer"},children:[O.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:ee.displayName}),O.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:ee.term!=null&&ee.term!==void 0?S8(Q,ee.term):"Ingen"}),O.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},onMouseEnter:Ze=>{Rt(ee.docId,ee.term??null)},children:ee.term==null?"":O.jsx(Sr,{uid:ee.docId,term:ee.term})})]},ee.docId))})]})]}),x==="admins"&&O.jsxs("div",{style:{marginBottom:"1.2rem"},children:[O.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"end",gap:"0.5rem",marginBottom:"0.4rem"},children:O.jsx("button",{type:"button",onClick:Xr,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.8rem",cursor:"pointer"},children:"Legg til"})}),be.length===0?O.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280"},children:"Ingen administratorer funnet."}):O.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[O.jsx("thead",{children:O.jsxs("tr",{children:[O.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>ft("name"),children:["Navn"," ",Ue==="name"&&(je==="asc"?"":"")]}),O.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>ft("email"),children:["E-post"," ",Ue==="email"&&(je==="asc"?"":"")]}),O.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>ft("phone"),children:["Mobil"," ",Ue==="phone"&&(je==="asc"?"":"")]})]})}),O.jsx("tbody",{children:be.map(ee=>O.jsxs("tr",{onClick:()=>Br(ee),style:{cursor:"pointer"},children:[O.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:ee.displayName}),O.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:ee.email}),O.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:ee.phone??""})]},ee.docId))})]})]})]}),X&&O.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:O.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[O.jsx("h3",{style:{marginTop:0,marginBottom:"0.5rem"},children:X==="create"?"Ny lrer":"Rediger lrer"}),O.jsx("p",{style:{marginTop:0,marginBottom:"0.9rem",fontSize:"0.8rem",color:"#6b7280"},children:X==="create"?"Opprett ny lrer, velg hvilke terminer de kan registrere for og lagre.":"Endre navn, e-post, mobil, rolle og hvilke terminer lreren kan undervise p."}),O.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.75rem"},children:[O.jsxs("label",{style:{fontSize:"0.8rem"},children:["Navn",O.jsx("input",{type:"text",value:ae,onChange:ee=>re(ee.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),O.jsxs("label",{style:{fontSize:"0.8rem"},children:["E-post",O.jsx("input",{type:"email",value:fe,onChange:ee=>tt(ee.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),O.jsxs("label",{style:{fontSize:"0.8rem"},children:["Mobil",O.jsx("input",{type:"tel",value:qe,onChange:ee=>ut(ee.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),O.jsxs("label",{style:{fontSize:"0.8rem"},children:["Rolle",O.jsxs("select",{value:K,onChange:ee=>oe(ee.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"},children:[O.jsx("option",{value:"teacher",children:"Lrer"}),O.jsx("option",{value:"student",children:"Student"}),O.jsx("option",{value:"admin",children:"Admin"})]})]}),O.jsxs("div",{style:{fontSize:"0.8rem"},children:[O.jsx("div",{style:{marginBottom:"0.25rem"},children:"Termin(er) lreren kan registrere for:"}),O.jsx("div",{style:{maxHeight:"150px",overflowY:"auto",borderRadius:"0.5rem",border:"1px solid #e5e7eb",padding:"0.35rem 0.45rem"},children:Q.map(ee=>O.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.35rem",fontSize:"0.8rem",padding:"0.15rem 0"},children:[O.jsx("input",{type:"checkbox",checked:ve.includes(ee.value),onChange:()=>bt(ee.value)}),O.jsx("span",{children:ee.label})]},ee.value))})]})]}),O.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"0.5rem"},children:[O.jsx("button",{type:"button",onClick:St,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.85rem",cursor:"pointer"},children:"Avbryt"}),O.jsx("button",{type:"button",onClick:X==="create"?He:ht,style:{padding:"0.3rem 0.9rem",borderRadius:"999px",border:"none",backgroundColor:"#16a34a",color:"#ffffff",fontSize:"0.85rem",cursor:"pointer"},children:X==="create"?"Opprett lrer":"Lagre"})]})]})}),Se&&O.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:O.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[O.jsx("h3",{style:{marginTop:0,marginBottom:"0.5rem"},children:Se==="create"?"Ny student":"Rediger student"}),O.jsx("p",{style:{marginTop:0,marginBottom:"0.9rem",fontSize:"0.8rem",color:"#6b7280"},children:Se==="create"?"Opprett ny student og velg termin.":"Endre navn, e-post, mobil, rolle og termin."}),O.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.75rem"},children:[O.jsxs("label",{style:{fontSize:"0.8rem"},children:["Navn",O.jsx("input",{type:"text",value:It,onChange:ee=>An(ee.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),O.jsxs("label",{style:{fontSize:"0.8rem"},children:["E-post",O.jsx("input",{type:"email",value:jt,onChange:ee=>Be(ee.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),O.jsxs("label",{style:{fontSize:"0.8rem"},children:["Mobil",O.jsx("input",{type:"tel",value:Ve,onChange:ee=>at(ee.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),O.jsxs("label",{style:{fontSize:"0.8rem"},children:["Rolle",O.jsxs("select",{value:De,onChange:ee=>$e(ee.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"},children:[O.jsx("option",{value:"student",children:"Student"}),O.jsx("option",{value:"teacher",children:"Lrer"}),O.jsx("option",{value:"admin",children:"Admin"})]})]}),O.jsxs("label",{style:{fontSize:"0.8rem"},children:["Termin",O.jsxs("select",{value:nt??"",onChange:ee=>{const Ze=ee.target.value;ot(Ze===""?null:parseInt(Ze,10))},style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"},children:[O.jsx("option",{value:"",children:"Ingen"}),Q.map(ee=>O.jsx("option",{value:ee.value,children:ee.label},ee.value))]})]})]}),O.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"0.5rem"},children:[O.jsx("button",{type:"button",onClick:qr,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.85rem",cursor:"pointer"},children:"Avbryt"}),O.jsx("button",{type:"button",onClick:Se==="create"?sn:ur,style:{padding:"0.3rem 0.9rem",borderRadius:"999px",border:"none",backgroundColor:"#16a34a",color:"#ffffff",fontSize:"0.85rem",cursor:"pointer"},children:Se==="create"?"Opprett student":"Lagre"})]})]})}),Gt&&O.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:O.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[O.jsx("h3",{style:{marginTop:0,marginBottom:"0.5rem"},children:Gt==="create"?"Ny admin":"Rediger admin"}),O.jsx("p",{style:{marginTop:0,marginBottom:"0.9rem",fontSize:"0.8rem",color:"#6b7280"},children:Gt==="create"?"Opprett ny admin.":"Endre navn, e-post, mobil og rolle."}),O.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.75rem"},children:[O.jsxs("label",{style:{fontSize:"0.8rem"},children:["Navn",O.jsx("input",{type:"text",value:Lr,onChange:ee=>ti(ee.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),O.jsxs("label",{style:{fontSize:"0.8rem"},children:["E-post",O.jsx("input",{type:"email",value:Pr,onChange:ee=>Zt(ee.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),O.jsxs("label",{style:{fontSize:"0.8rem"},children:["Mobil",O.jsx("input",{type:"tel",value:Me,onChange:ee=>zt(ee.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),O.jsxs("label",{style:{fontSize:"0.8rem"},children:["Rolle",O.jsxs("select",{value:xt,onChange:ee=>bn(ee.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"},children:[O.jsx("option",{value:"admin",children:"Admin"}),O.jsx("option",{value:"teacher",children:"Lrer"}),O.jsx("option",{value:"student",children:"Student"})]})]})]}),O.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"0.5rem"},children:[O.jsx("button",{type:"button",onClick:vn,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.85rem",cursor:"pointer"},children:"Avbryt"}),O.jsx("button",{type:"button",onClick:Gt==="create"?it:tr,style:{padding:"0.3rem 0.9rem",borderRadius:"999px",border:"none",backgroundColor:"#16a34a",color:"#ffffff",fontSize:"0.85rem",cursor:"pointer"},children:Gt==="create"?"Opprett admin":"Lagre"})]})]})})]})},PR=()=>{const[s,e]=ye.useState([]),[n,o]=ye.useState(""),[h,g]=ye.useState([]),[x,T]=ye.useState(!0),[b,w]=ye.useState(""),[C,R]=ye.useState({}),[P,B]=ye.useState(null),[$,ne]=ye.useState(""),[se,Qe]=ye.useState(""),[Le,he]=ye.useState(null),[Ue,pt]=ye.useState(0),[je,F]=ye.useState({}),[z,U]=ye.useState([]),[Q,X]=ye.useState(!1),[Y,G]=ye.useState(""),lt=ye.useRef(null),[ae,re]=ye.useState(!1),[fe,tt]=ye.useState([]),[qe,ut]=ye.useState(!1),[K,oe]=ye.useState([]);ye.useEffect(()=>{(async()=>{try{T(!0);const[be,Oe,rt,ft]=await Promise.all([Mr(cr(Ct,"requirements")),Mr(cr(Ct,"times")),Mr(cr(Ct,"termLabels")).catch(()=>null),Mr(cr(Ct,"terms")).catch(()=>null)]),Ke=be.docs.map(st=>{const ht=st.data();return{id:st.id,term:ht.term,category:ht.category,requiredCount:ht.requiredCount??0,order:typeof ht?.order=="number"?ht.order:void 0}}),He=Oe.docs.map(st=>{const ht=st.data();return{id:st.id,name:ht.name,category:ht.category,term:ht.term}});if(e(Ke),g(He),ft){const st=ft.docs.map(ht=>{const St=ht.data(),bt=typeof St?.value=="number"?St.value:void 0,dn=typeof St?.label=="string"?St.label:"",sn=typeof St?.order=="number"?St.order:void 0;return typeof bt!="number"?null:{docId:ht.id,value:bt,label:dn,order:sn}}).filter(Boolean);st.sort((ht,St)=>{const bt=ht.order??ht.value,dn=St.order??St.value;return bt-dn}),U(st)}if(rt){const st={};rt.docs.forEach(ht=>{const St=ht.data(),bt=parseInt(ht.id,10);!Number.isNaN(bt)&&typeof St?.label=="string"&&St.label.trim()&&(st[bt]=St.label.trim())}),F(st)}}catch(be){console.error("Feil ved lasting av termin-oppsett:",be)}finally{T(!1)}})()},[]);const ve=s.filter(de=>de.term===n).sort((de,be)=>{const Oe=de.order??Number.MAX_SAFE_INTEGER,rt=be.order??Number.MAX_SAFE_INTEGER;return Oe!==rt?Oe-rt:de.category.localeCompare(be.category,"nb-NO",{sensitivity:"base"})}),Te=ye.useMemo(()=>{const de=z.slice().sort((be,Oe)=>(be.order??be.value)-(Oe.order??Oe.value)).map(be=>({value:be.value,label:be.label||`Termin ${be.value}`}));return Object.keys(je).length>0?de.map(be=>({...be,label:je[be.value]??be.label})):de},[z,je]),Se=de=>yl(Te,de??null),_e=()=>{if(n==="")return;const de=Se(n);G(de),X(!0),setTimeout(()=>lt.current?.focus(),0)},Je=()=>{X(!1),G("")},_t=async()=>{if(n==="")return;const de=Se(n),be=Y.trim();if(!be||be===de){X(!1);return}try{const Oe=z.find(rt=>rt.value===Number(n));if(Oe)await bs(Fn(Ct,"terms",Oe.docId),{label:be,updatedAt:Ef()}),U(rt=>rt.map(ft=>ft.docId===Oe.docId?{...ft,label:be}:ft));else{const rt=String(n);await cl(Fn(Ct,"termLabels",rt),{label:be,updatedAt:Ef(),value:Number(n)},{merge:!0}),F(ft=>({...ft,[Number(n)]:be}))}X(!1)}catch(Oe){console.error("Feil ved endring av modulnavn:",Oe),alert("Kunne ikke endre navn p modulen.")}},It=async()=>{try{const de=z.map(ht=>ht.value),be=z.map(ht=>ht.order??ht.value),Oe=de.length>0?Math.max(...de):0,rt=be.length>0?Math.max(...be):0,ft=Oe+1,Ke=rt+1,st={docId:(await xf(cr(Ct,"terms"),{value:ft,label:"",order:Ke,createdAt:Ef()})).id,value:ft,label:"",order:Ke};U(ht=>[...ht,st]),o(ft),G(""),X(!0),setTimeout(()=>lt.current?.focus(),0)}catch(de){console.error("Kunne ikke opprette ny oppmtebok:",de),alert("Kunne ikke opprette ny oppmtebok.")}},An=()=>{if(z.length===0)return;const de=z.slice().sort((be,Oe)=>(be.order??be.value)-(Oe.order??Oe.value));tt(de),re(!0)},jt=(de,be)=>{tt(Oe=>{const rt=Oe.slice(),ft=de+be;if(ft<0||ft>=rt.length)return Oe;const[Ke]=rt.splice(de,1);return rt.splice(ft,0,Ke),rt})},Be=async()=>{try{const de=su(Ct);fe.forEach((be,Oe)=>{de.update(Fn(Ct,"terms",be.docId),{order:Oe+1})}),await de.commit(),U(fe.map((be,Oe)=>({...be,order:Oe+1}))),re(!1)}catch(de){console.error("Kunne ikke lagre sortering av terminer:",de),alert("Kunne ikke lagre sortering av terminer.")}},Ve=()=>{if(n==="")return;const de=s.filter(be=>be.term===n).slice().sort((be,Oe)=>{const rt=be.order??Number.MAX_SAFE_INTEGER,ft=Oe.order??Number.MAX_SAFE_INTEGER;return rt!==ft?rt-ft:be.category.localeCompare(Oe.category,"nb-NO",{sensitivity:"base"})});oe(de),ut(!0)},at=(de,be)=>{oe(Oe=>{const rt=Oe.slice(),ft=de+be;if(ft<0||ft>=rt.length)return Oe;const[Ke]=rt.splice(de,1);return rt.splice(ft,0,Ke),rt})},De=async()=>{try{const de=su(Ct);K.forEach((be,Oe)=>{de.update(Fn(Ct,"requirements",be.id),{order:Oe+1})}),await de.commit(),e(be=>{const Oe={};return K.forEach((rt,ft)=>Oe[rt.id]=ft+1),be.map(rt=>Oe[rt.id]?{...rt,order:Oe[rt.id]}:rt)}),ut(!1)}catch(de){console.error("Kunne ikke lagre sortering av grupper:",de),alert("Kunne ikke lagre sortering av grupper.")}},[$e,nt]=ye.useState({open:!1,termValue:null,termLabel:"",reqCount:0,timeCount:0}),ot=()=>{if(n==="")return;const de=n,be=Se(de),Oe=s.filter(ft=>ft.term===de).length,rt=h.filter(ft=>ft.term===de).length;nt({open:!0,termValue:de,termLabel:be,reqCount:Oe,timeCount:rt})},et=()=>{nt({open:!1,termValue:null,termLabel:"",reqCount:0,timeCount:0})},Vt=async(de,be)=>{try{const Oe=z.find(bt=>bt.value===de);let rt=Oe?Fn(Ct,"terms",Oe.docId):null;const ft=is(cr(Ct,"requirements"),ei("term","==",de)),Ke=is(cr(Ct,"times"),ei("term","==",de)),[He,st]=await Promise.all([Mr(ft),Mr(Ke)]);if(!rt)try{const bt=is(cr(Ct,"terms"),ei("value","==",de));rt=(await Mr(bt)).docs[0]?.ref??null}catch{}const ht=[...He.docs.map(bt=>bt.ref),...st.docs.map(bt=>bt.ref)];rt&&ht.push(rt);const St=450;for(let bt=0;bt<ht.length;bt+=St){const dn=su(Ct);ht.slice(bt,bt+St).forEach(sn=>dn.delete(sn)),await dn.commit()}e(bt=>bt.filter(dn=>dn.term!==de)),g(bt=>bt.filter(dn=>dn.term!==de)),U(bt=>bt.filter(dn=>dn.value!==de)),o(""),X(!1),w(""),he(null),B(null),ne(""),Dt.success("Termin slettet",{description:`${be} er fjernet med alle grupper og timer.`})}catch(Oe){console.error("Kunne ikke slette termin med relaterte data:",Oe),Dt.error("Kunne ikke slette termin. Prv igjen senere.")}finally{et()}},We=async()=>{!$e.open||$e.termValue==null||await Vt($e.termValue,$e.termLabel)},Qn=async de=>{const be=$.trim();if(!be||be===de.name){B(null),ne("");return}try{await bs(Fn(Ct,"times",de.id),{name:be}),g(Oe=>Oe.map(rt=>rt.id===de.id?{...rt,name:be}:rt)),B(null),ne("")}catch(Oe){console.error("Feil ved endring av timenavn:",Oe),alert("Kunne ikke oppdatere navn p timen.")}},At=h.filter(de=>de.term===n),Rt=de=>{he(de.id),Qe(de.category),pt(de.requiredCount??0)},Sr=()=>{he(null)},Gt=async de=>{if(!Le)return;const be=de.category,Oe=(se||"").trim()||be,rt=h.filter(He=>He.term===de.term&&He.category===be).length;let ft=Ue;if((Number.isNaN(ft)||ft<0)&&(ft=0),rt>0&&ft>rt&&(ft=rt),ve.find(He=>He.id!==de.id&&He.category.toLowerCase()===Oe.toLowerCase())){alert("Det finnes allerede en gruppe med dette navnet i valgt termin.");return}try{const He=su(Ct),st=Fn(Ct,"requirements",de.id);He.update(st,{category:Oe,requiredCount:ft});const ht=is(cr(Ct,"times"),ei("term","==",de.term),ei("category","==",be));(await Mr(ht)).forEach(sn=>{He.update(sn.ref,{category:Oe})});const bt=is(cr(Ct,"sessions"),ei("term","==",de.term),ei("category","==",be));(await Mr(bt)).forEach(sn=>{He.update(sn.ref,{category:Oe})}),await He.commit(),e(sn=>sn.map(Gn=>Gn.id===de.id?{...Gn,category:Oe,requiredCount:ft}:Gn)),g(sn=>sn.map(Gn=>Gn.term===de.term&&Gn.category===be?{...Gn,category:Oe}:Gn)),he(null)}catch(He){console.error("Feil ved lagring av gruppe:",He),alert("Kunne ikke lagre endringene for gruppen.")}},Hn=async()=>{const de=b.trim();if(!de)return;if(ve.some(Oe=>Oe.category.toLowerCase()===de.toLowerCase())){alert("Denne gruppen finnes allerede for valgt termin.");return}try{const Oe=s.filter(He=>He.term===n),ft=(Oe.length?Math.max(...Oe.map(He=>typeof He.order=="number"?He.order:0)):0)+1,Ke=await xf(cr(Ct,"requirements"),{term:n,category:de,requiredCount:0,order:ft});e(He=>[...He,{id:Ke.id,term:n,category:de,requiredCount:0,order:ft}]),w("")}catch(Oe){console.error("Feil ved oppretting av kategori:",Oe),alert("Kunne ikke opprette kategori.")}},[Rn,Pn]=ye.useState({open:!1,req:null,timeCount:0}),Lr=async(de,be)=>{const{id:Oe,term:rt,category:ft}=de;try{const Ke=is(cr(Ct,"times"),ei("term","==",rt),ei("category","==",ft)),He=await Mr(Ke),st=[Fn(Ct,"requirements",Oe),...He.docs.map(St=>St.ref)],ht=450;for(let St=0;St<st.length;St+=ht){const bt=su(Ct);st.slice(St,St+ht).forEach(dn=>bt.delete(dn)),await bt.commit()}e(St=>St.filter(bt=>bt.id!==Oe)),g(St=>St.filter(bt=>!(bt.term===rt&&bt.category===ft)))}catch(Ke){console.error("Feil ved sletting av gruppe og tilhrende timer:",Ke),Dt.error("Kunne ikke slette gruppen. Prv igjen senere.")}finally{Pr()}},ti=de=>{const be=h.filter(Oe=>Oe.term===de.term&&Oe.category===de.category).length;if(be===0){Lr(de);return}Pn({open:!0,req:de,timeCount:be})},Pr=()=>{Pn({open:!1,req:null,timeCount:0})},Zt=async()=>{Rn.req&&await Lr(Rn.req,Rn.timeCount)},Me=async de=>{const be=de.id,Oe=(C[be]??"").trim();if(Oe)try{const rt=await xf(cr(Ct,"times"),{term:n,category:de.category,name:Oe});g(ft=>[...ft,{id:rt.id,term:n,category:de.category,name:Oe}]),R(ft=>({...ft,[be]:""}))}catch(rt){console.error("Feil ved oppretting av time:",rt),alert("Kunne ikke opprette time.")}},[zt,xt]=ye.useState({open:!1,time:null}),bn=de=>{xt({open:!0,time:de})},Ir=()=>{xt({open:!1,time:null})},Rr=async()=>{if(!zt.time)return;const de=zt.time;try{await z_(Fn(Ct,"times",de.id)),g(be=>be.filter(Oe=>Oe.id!==de.id))}catch(be){console.error("Feil ved sletting av time:",be),Dt.error("Kunne ikke slette time. Prv igjen senere.")}finally{Ir()}};return x?O.jsx(To,{}):O.jsxs(O.Fragment,{children:[O.jsxs("section",{style:{marginBottom:"2rem"},children:[O.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.75rem"},children:[O.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[Q?O.jsx("input",{ref:lt,type:"text",value:Y,onChange:de=>G(de.target.value),onKeyDown:de=>{de.key==="Enter"?(de.preventDefault(),_t()):de.key==="Escape"&&(de.preventDefault(),Je())},placeholder:"Navn p modul",style:{flex:1,minWidth:0,padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db"}}):O.jsxs("select",{value:n,onChange:de=>{const be=de.target.value;if(be==="__new__"){It();return}o(be===""?"":parseInt(be,10))},style:{flex:1,minWidth:0,padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db"},children:[O.jsx("option",{value:"",disabled:!0,children:"Velg termin"}),Te.map(de=>O.jsx("option",{value:de.value,children:de.label},de.value)),O.jsx("option",{value:"__new__",children:"+ Ny oppmtebok"})]}),O.jsx("button",{type:"button",disabled:n===""&&!Q,onClick:()=>{Q?_t():_e()},style:{width:"160px",padding:"0.45rem 0.9rem",borderRadius:"999px",border:"none",backgroundColor:"#6CE1AB",color:"black",fontSize:"0.9rem",cursor:n===""&&!Q?"not-allowed":"pointer",whiteSpace:"nowrap"},children:Q?"Lagre":"Endre navn"}),O.jsx("button",{type:"button",title:"Sorter oppmtebker",disabled:z.length===0,onClick:An,style:{padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",background:"#ffffff",fontSize:"0.9rem",cursor:z.length===0?"not-allowed":"pointer"},children:""})]}),O.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",alignItems:"center"},children:[O.jsx("input",{type:"text",placeholder:"Ny gruppe...",value:b,onChange:de=>w(de.target.value),onKeyDown:de=>{de.key==="Enter"&&(de.preventDefault(),Hn())},style:{flex:1,minWidth:0,padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db"}}),O.jsx("button",{type:"button",onClick:Hn,style:{width:"160px",padding:"0.45rem 0.9rem",borderRadius:"999px",border:"none",backgroundColor:"#6CE1AB",color:"black",fontSize:"0.9rem",cursor:"pointer",whiteSpace:"nowrap"},children:"Legg til gruppe"}),O.jsx("button",{type:"button",title:"Sorter grupper",disabled:n===""||ve.length===0,onClick:Ve,style:{padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",background:"#ffffff",fontSize:"0.9rem",cursor:n===""||ve.length===0?"not-allowed":"pointer"},children:""})]})]}),ve.length===0?O.jsxs("p",{style:{fontSize:"0.85rem",color:"#6b7280"},children:["Ingen grupper definert enn for ",Se(n),"."]}):O.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:ve.map(de=>{const be=de.id,Oe=At.filter(He=>He.category===de.category).sort((He,st)=>{const ht=xE(He.name),St=xE(st.name);return ht!==St?ht-St:He.name.localeCompare(st.name,"nb-NO",{sensitivity:"base"})}),rt=C[be]??"",ft=At.filter(He=>He.category===de.category).length,Ke=Le===de.id;return O.jsxs("div",{style:{borderRadius:"0.75rem",border:"1px solid #e5e7eb",padding:"0.75rem 0.75rem",backgroundColor:"#f9fafb"},children:[O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem",gap:"0.5rem",flexWrap:"wrap"},children:[O.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:Ke?O.jsxs(O.Fragment,{children:[O.jsx("input",{type:"text",value:se,onChange:He=>Qe(He.target.value),onKeyDown:He=>{He.key==="Enter"?Gt(de):He.key==="Escape"&&Sr()},autoFocus:!0,style:{minWidth:"12rem",padding:"0.2rem 0.35rem",borderRadius:"0.4rem",border:"1px solid #d1d5db",fontSize:"0.9rem"}}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[O.jsx("input",{type:"number",min:0,max:ft,value:Ue,onChange:He=>{const st=parseInt(He.target.value,10);pt(Number.isNaN(st)?0:st)},onKeyDown:He=>{He.key==="Enter"?Gt(de):He.key==="Escape"&&Sr()},style:{width:"4rem",padding:"0.2rem 0.35rem",borderRadius:"0.4rem",border:"1px solid #d1d5db",fontSize:"0.9rem",textAlign:"center"}}),O.jsxs("span",{style:{fontSize:"0.8rem",color:"#6b7280"},children:["/ ",ft]})]})]}):O.jsxs("div",{style:{fontWeight:600,fontSize:"0.95rem"},children:[de.category," (",de.requiredCount,"/",ft,")"]})}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[O.jsx("button",{type:"button",onClick:()=>Ke?void Gt(de):Rt(de),style:{padding:"0.25rem 0.6rem",borderRadius:"999px",border:"none",backgroundColor:"#e5e7eb",color:"#111827",fontSize:"0.75rem",cursor:"pointer"},children:Ke?"Lagre":"Endre gruppe"}),O.jsx("button",{type:"button",onClick:()=>ti({id:de.id,term:de.term,category:de.category}),style:{padding:"0.25rem 0.6rem",borderRadius:"999px",border:"none",backgroundColor:"#fee2e2",color:"#991b1b",fontSize:"0.75rem",cursor:"pointer"},children:"Slett gruppe"})]})]}),Oe.length>0?O.jsx("ul",{style:{listStyle:"none",paddingLeft:0,margin:"0 0 0.5rem 0",fontSize:"0.85rem"},children:Oe.map(He=>{const st=P===He.id;return O.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.15rem 0",borderBottom:"1px dashed #e5e7eb",gap:"0.5rem"},children:[O.jsx("div",{style:{flex:1},children:st?O.jsx("input",{type:"text",value:$,onChange:ht=>ne(ht.target.value),onKeyDown:ht=>{ht.key==="Enter"?Qn(He):ht.key==="Escape"&&(B(null),ne(""))},autoFocus:!0,style:{width:"100%",padding:"0.2rem 0.35rem",borderRadius:"0.4rem",border:"1px solid #d1d5db",fontSize:"0.85rem"}}):O.jsx("span",{children:He.name})}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem"},children:[st?O.jsx("button",{type:"button",onClick:()=>void Qn(He),style:{padding:"0.15rem 0.45rem",borderRadius:"999px",border:"none",backgroundColor:"#e5e7eb",color:"#111827",fontSize:"0.75rem",cursor:"pointer"},children:"Lagre"}):O.jsx("button",{type:"button",onClick:()=>{B(He.id),ne(He.name)},style:{padding:"0.15rem 0.45rem",borderRadius:"999px",border:"none",backgroundColor:"#e5e7eb",color:"#111827",fontSize:"0.75rem",cursor:"pointer"},children:"Endre"}),O.jsx("button",{type:"button",onClick:()=>bn(He),style:{padding:"0.15rem 0.45rem",borderRadius:"999px",border:"none",backgroundColor:"#fee2e2",color:"#b91c1c",fontSize:"0.75rem",cursor:"pointer"},children:"Slett"})]})]},He.id)})}):O.jsx("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.8rem",color:"#9ca3af"},children:"Ingen timer lagt til i denne gruppen."}),O.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.25rem"},children:[O.jsx("input",{type:"text",placeholder:"Ny time...",value:rt,onChange:He=>R(st=>({...st,[be]:He.target.value})),onKeyDown:He=>{He.key==="Enter"&&(He.preventDefault(),Me(de))},style:{flex:1,padding:"0.3rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem"}}),O.jsx("button",{type:"button",onClick:()=>Me(de),style:{padding:"0.35rem 0.8rem",borderRadius:"999px",border:"none",backgroundColor:"#4b5563",color:"#ffffff",fontSize:"0.8rem",cursor:"pointer"},children:"Legg til time"})]})]},de.id)})}),n!==""&&O.jsx("div",{style:{marginTop:"1rem",display:"flex",justifyContent:"center"},children:O.jsx("button",{type:"button",onClick:ot,style:{padding:"0.5rem 0.9rem",borderRadius:"999px",border:"none",backgroundColor:"#ef4444",color:"#ffffff",fontSize:"0.9rem",cursor:"pointer"},children:"Slett termin"})}),$e.open&&$e.termValue!=null&&O.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1e3},children:O.jsxs("div",{className:"page-card",style:{maxWidth:520,width:"100%",background:"#ffffff"},children:[O.jsx("h3",{style:{marginTop:0},children:"Slett termin?"}),O.jsxs("p",{style:{whiteSpace:"pre-wrap",lineHeight:1.4},children:[`Du er i ferd med  slette ${$e.termLabel}.

`,`Dette vil slette selve terminen, alle grupper/krav (${$e.reqCount}) og alle timer (${$e.timeCount}) som tilhrer denne terminen.
`,"Handlingen kan ikke angres."]}),O.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",marginTop:"0.75rem"},children:[O.jsx("button",{type:"button",onClick:et,style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#ffffff",cursor:"pointer"},children:"Avbryt"}),O.jsx("button",{type:"button",onClick:()=>void We(),style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"none",background:"#ef4444",color:"#ffffff",cursor:"pointer"},children:"Slett termin"})]})]})}),Rn.open&&Rn.req&&O.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1e3},children:O.jsxs("div",{className:"page-card",style:{maxWidth:520,width:"100%",background:"#ffffff"},children:[O.jsx("h3",{style:{marginTop:0},children:"Slett gruppe?"}),O.jsxs("p",{style:{whiteSpace:"pre-wrap",lineHeight:1.4},children:[`Du er i ferd med  slette gruppen ${Rn.req.category}.

`,`Dette vil ogs slette alle tilhrende timer i denne gruppen for valgt termin (${Rn.timeCount}).
`,"Handlingen kan ikke angres."]}),O.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",marginTop:"0.75rem"},children:[O.jsx("button",{type:"button",onClick:Pr,style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#ffffff",cursor:"pointer"},children:"Avbryt"}),O.jsx("button",{type:"button",onClick:()=>void Zt(),style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"none",background:"#ef4444",color:"#ffffff",cursor:"pointer"},children:"Slett gruppe"})]})]})}),zt.open&&zt.time&&O.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1e3},children:O.jsxs("div",{className:"page-card",style:{maxWidth:520,width:"100%",background:"#ffffff"},children:[O.jsx("h3",{style:{marginTop:0},children:"Slett time?"}),O.jsxs("p",{style:{whiteSpace:"pre-wrap",lineHeight:1.4},children:[`Du er i ferd med  slette timen ${zt.time.name} i gruppen ${zt.time.category} for ${Se(zt.time.term)}.

`,`Historiske sesjoner beholdes, men timen forsvinner fra admin-oppsettet.
`,"Handlingen kan ikke angres."]}),O.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",marginTop:"0.75rem"},children:[O.jsx("button",{type:"button",onClick:Ir,style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#ffffff",cursor:"pointer"},children:"Avbryt"}),O.jsx("button",{type:"button",onClick:()=>void Rr(),style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"none",background:"#ef4444",color:"#ffffff",cursor:"pointer"},children:"Slett time"})]})]})})]}),ae&&O.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:O.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[O.jsx("h3",{style:{marginTop:0},children:"Sorter oppmtebker"}),O.jsx("ul",{style:{listStyle:"none",padding:0,margin:"0 0 0.75rem"},children:fe.map((de,be)=>O.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"0.4rem 0.6rem",marginBottom:"0.4rem"},children:[O.jsx("span",{style:{fontSize:"0.9rem"},children:de.label||`Termin ${de.value}`}),O.jsxs("span",{style:{display:"flex",gap:"0.25rem"},children:[O.jsx("button",{type:"button",onClick:()=>jt(be,-1),disabled:be===0,style:{padding:"0.2rem 0.4rem",borderRadius:"0.35rem",border:"1px solid #d1d5db",background:"#fff"},children:""}),O.jsx("button",{type:"button",onClick:()=>jt(be,1),disabled:be===fe.length-1,style:{padding:"0.2rem 0.4rem",borderRadius:"0.35rem",border:"1px solid #d1d5db",background:"#fff"},children:""})]})]},de.docId))}),O.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem"},children:[O.jsx("button",{type:"button",onClick:()=>re(!1),style:{padding:"0.35rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#fff"},children:"Avbryt"}),O.jsx("button",{type:"button",onClick:()=>void Be(),style:{padding:"0.35rem 0.7rem",borderRadius:"999px",border:"none",background:"#16a34a",color:"#fff"},children:"Lagre rekkeflge"})]})]})}),qe&&O.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:O.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[O.jsx("h3",{style:{marginTop:0},children:"Sorter grupper"}),O.jsx("ul",{style:{listStyle:"none",padding:0,margin:"0 0 0.75rem"},children:K.map((de,be)=>O.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"0.4rem 0.6rem",marginBottom:"0.4rem"},children:[O.jsx("span",{style:{fontSize:"0.9rem"},children:de.category}),O.jsxs("span",{style:{display:"flex",gap:"0.25rem"},children:[O.jsx("button",{type:"button",onClick:()=>at(be,-1),disabled:be===0,style:{padding:"0.2rem 0.4rem",borderRadius:"0.35rem",border:"1px solid #d1d5db",background:"#fff"},children:""}),O.jsx("button",{type:"button",onClick:()=>at(be,1),disabled:be===K.length-1,style:{padding:"0.2rem 0.4rem",borderRadius:"0.35rem",border:"1px solid #d1d5db",background:"#fff"},children:""})]})]},de.id))}),O.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem"},children:[O.jsx("button",{type:"button",onClick:()=>ut(!1),style:{padding:"0.35rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#fff"},children:"Avbryt"}),O.jsx("button",{type:"button",onClick:()=>void De(),style:{padding:"0.35rem 0.7rem",borderRadius:"999px",border:"none",background:"#16a34a",color:"#fff"},children:"Lagre rekkeflge"})]})]})})]})},BR=()=>{const{user:s,loading:e,logout:n}=yd(),[o,h]=ye.useState("setup"),[g,x]=ye.useState(!1);return e?O.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:O.jsx(To,{})}):!s||s.role!=="admin"?O.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"1.5rem"},children:O.jsxs("div",{className:"page-card page-card--admin",children:[O.jsx("h2",{children:"Ingen tilgang"}),O.jsx("p",{children:"Du m vre logget inn som administrator for  se denne siden."})]})}):O.jsxs(O.Fragment,{children:[O.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"flex-start",justifyContent:"center",padding:"1.5rem 1rem"},children:O.jsxs("div",{className:"page-card page-card--admin",children:[O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[O.jsx("div",{style:{fontWeight:600},children:s.displayName||s.email}),O.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[O.jsx("button",{type:"button",onClick:()=>x(!0),style:{padding:"0.35rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#ffffff",cursor:"pointer",fontSize:"0.85rem"},children:"Min profil"}),O.jsx("button",{type:"button",onClick:n,style:{padding:"0.35rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#ffffff",cursor:"pointer",fontSize:"0.85rem"},children:"Logg ut"})]})]}),O.jsxs("header",{style:{marginBottom:"1rem",borderBottom:"1px solid #e5e7eb",paddingBottom:"0.75rem"},children:[O.jsx("h2",{style:{margin:0},children:"Adminpanel"}),O.jsx("p",{style:{margin:"0.25rem 0 0.75rem",fontSize:"0.85rem",color:"#6b7280"},children:"Oppsett av oppm og administrasjon av brukere."}),O.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[O.jsx("button",{type:"button",onClick:()=>h("setup"),style:{flex:1,padding:"0.35rem 0.5rem",borderRadius:"999px",border:"1px solid #e5e7eb",background:o==="setup"?"#6CE1AB":"#ffffff",color:o==="setup"?"black":"#111827",fontSize:"0.85rem",cursor:"pointer"},children:"Oppmtebker"}),O.jsx("button",{type:"button",onClick:()=>h("users"),style:{flex:1,padding:"0.35rem 0.5rem",borderRadius:"999px",border:"1px solid #e5e7eb",background:o==="users"?"#6CE1AB":"#ffffff",color:o==="users"?"black":"#111827",fontSize:"0.85rem",cursor:"pointer"},children:"Brukere"})]})]}),o==="setup"&&O.jsx(PR,{}),o==="users"&&O.jsx(LR,{})]})}),g&&O.jsx(lm,{uid:s.uid,role:s.role,email:s.email,displayName:s.displayName,onClose:()=>x(!1)})]})};function VR(s){try{return s.toLocaleDateString("no-NO")}catch{const e=String(s.getDate()).padStart(2,"0"),n=String(s.getMonth()+1).padStart(2,"0"),o=s.getFullYear();return`${e}.${n}.${o}`}}function I1(){const s=VR(new Date);return O.jsx("footer",{className:"w-full rounded-t-[75px] bg-brand-light text-black",role:"contentinfo",children:O.jsxs("div",{id:"footer-container",className:"mx-auto flex w-[90%] max-w-[1200px] flex-col gap-8 px-0 py-12 sm:flex-row sm:justify-between",children:[O.jsxs("div",{className:"sm:w-3/5",children:[O.jsxs("p",{className:"text-sm opacity-80",children:["Sist teknisk oppdatert: ",s,"."]}),O.jsx("h2",{className:"mt-2 text-2xl font-normal",children:"Laget med kjrlighet for en effektiv hverdag"}),O.jsx("p",{className:"mt-3 text-[18px]",children:"Dette er sten beskrive at vi lytter til brukernes behov, og at forbedringer blir rullet ut fortlpende. Vrt ml er enkel registreringp design, funksjonalitet og tilgjengelighet. Takk for at du n, deler innspill, og bidrar til  gjre hverdagen mer effektiv. Din erfaring hjelper oss  prioritere riktig videre."})]}),O.jsxs("div",{className:"text-right sm:w-2/5",children:[O.jsx("img",{src:"/favicon.svg",alt:"Oppmteboka logo",className:"ml-auto h-12 w-12"}),O.jsxs("div",{className:"mt-2",children:[O.jsx("a",{href:"mailto:hei@oppmoteboka.no?subject=Tilbakelding",className:"text-[1.04rem] underline hover:no-underline",children:"Gi tilbakemelding"}),O.jsx("p",{className:"text-sm opacity-70",children:"hei@oppmoteboka.no"})]}),O.jsx("p",{className:"mt-4",children:"Nettisden er utviklet av Vetle Mrland og ge Frivoll"})]})]})})}function UR(){const{user:s,loading:e,login:n}=yd(),[o,h]=ye.useState(""),[g,x]=ye.useState(""),[T,b]=ye.useState(null),[w,C]=ye.useState(!1),R=async P=>{if(P.preventDefault(),b(null),!o||!g){b("Fyll inn bde e-post og passord.");return}C(!0);try{await n(o.trim(),g)}catch(B){console.error(B);let $="Kunne ikke logge inn.";B?.code==="auth/user-not-found"?$="Bruker finnes ikke.":B?.code==="auth/wrong-password"?$="Feil passord.":B?.code==="auth/email-already-in-use"?$="E-postadressen er allerede registrert.":B?.code==="auth/weak-password"&&($="Passordet er for svakt (min. 6 tegn)."),b($)}finally{C(!1)}};return e?O.jsxs(O.Fragment,{children:[O.jsx("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",padding:"1rem 0.75rem 0",width:"100%"},children:O.jsx("div",{className:"page-card",children:O.jsx(To,{})})}),O.jsx(I1,{})]}):s?O.jsxs(O.Fragment,{children:[O.jsx("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",width:"100%",padding:"1rem 0.75rem 0"},children:s.role==="admin"?O.jsx(BR,{user:s}):s.role==="teacher"?O.jsx(gR,{user:s}):O.jsx(iR,{user:s})}),O.jsx(I1,{})]}):O.jsxs(O.Fragment,{children:[O.jsx("div",{className:"front-page",style:{minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",background:"#CEFFDF",width:"100%",padding:"1rem 0.75rem 0"},children:O.jsxs("div",{className:"page-card",children:[O.jsx("h1",{style:{marginBottom:"2rem",textAlign:"center"},children:"Oppmteregistrering"}),O.jsxs("form",{onSubmit:R,children:[O.jsxs("div",{style:{marginBottom:"0.75rem"},children:[O.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.2rem"},children:"Mobil / Epost"}),O.jsx("input",{type:"email",value:o,onChange:P=>h(P.target.value),placeholder:"uiobrukernavn@uio.no",style:{width:"100%",padding:"0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db"}})]}),O.jsxs("div",{style:{marginBottom:"0.75rem"},children:[O.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.2rem"},children:"Passord"}),O.jsx("input",{type:"password",value:g,onChange:P=>x(P.target.value),placeholder:"Minst 6 tegn",style:{width:"100%",padding:"0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db"}})]}),T&&O.jsx("p",{style:{color:"red",fontSize:"0.85rem",marginBottom:"0.75rem"},children:T}),O.jsx("button",{type:"submit",disabled:w,style:{width:"100%",padding:"0.6rem 1rem",borderRadius:"999px",border:"none",background:"#6CE1AB",color:"black",fontWeight:500,cursor:"pointer",marginTop:"1.5rem",marginBottom:"1rem"},children:w?"Logger inn...":"Logg inn"})]})]})}),O.jsx(I1,{})]})}Bb.createRoot(document.getElementById("root")).render(O.jsxs(Ge.StrictMode,{children:[O.jsx(UR,{}),O.jsx(nR,{richColors:!0,position:"top-center"})]}));
