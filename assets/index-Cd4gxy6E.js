(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var Yk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pp(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var ym={exports:{}},tu={};var Uv;function iw(){if(Uv)return tu;Uv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:h,ref:o!==void 0?o:null,props:u}}return tu.Fragment=e,tu.jsx=n,tu.jsxs=n,tu}var zv;function sw(){return zv||(zv=1,ym.exports=iw()),ym.exports}var v=sw(),vm={exports:{}},at={};var Bv;function aw(){if(Bv)return at;Bv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function w(O){return O===null||typeof O!="object"?null:(O=S&&O[S]||O["@@iterator"],typeof O=="function"?O:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,B={};function ye(O,Q,H){this.props=O,this.context=Q,this.refs=B,this.updater=H||P}ye.prototype.isReactComponent={},ye.prototype.setState=function(O,Q){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Q,"setState")},ye.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function he(){}he.prototype=ye.prototype;function re(O,Q,H){this.props=O,this.context=Q,this.refs=B,this.updater=H||P}var Ae=re.prototype=new he;Ae.constructor=re,F(Ae,ye.prototype),Ae.isPureReactComponent=!0;var ze=Array.isArray;function Ve(){}var N={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function I(O,Q,H){var J=H.ref;return{$$typeof:i,type:O,key:Q,ref:J!==void 0?J:null,props:H}}function V(O,Q){return I(O.type,Q,O.props)}function k(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function L(O){var Q={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(H){return Q[H]})}var x=/\/+/g;function Ge(O,Q){return typeof O=="object"&&O!==null&&O.key!=null?L(""+O.key):Q.toString(36)}function rt(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(Ve,Ve):(O.status="pending",O.then(function(Q){O.status==="pending"&&(O.status="fulfilled",O.value=Q)},function(Q){O.status==="pending"&&(O.status="rejected",O.reason=Q)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function $(O,Q,H,J,Te){var _e=typeof O;(_e==="undefined"||_e==="boolean")&&(O=null);var Re=!1;if(O===null)Re=!0;else switch(_e){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(O.$$typeof){case i:case e:Re=!0;break;case _:return Re=O._init,$(Re(O._payload),Q,H,J,Te)}}if(Re)return Te=Te(O),Re=J===""?"."+Ge(O,0):J,ze(Te)?(H="",Re!=null&&(H=Re.replace(x,"$&/")+"/"),$(Te,Q,H,"",function(qt){return qt})):Te!=null&&(k(Te)&&(Te=V(Te,H+(Te.key==null||O&&O.key===Te.key?"":(""+Te.key).replace(x,"$&/")+"/")+Re)),Q.push(Te)),1;Re=0;var We=J===""?".":J+":";if(ze(O))for(var Je=0;Je<O.length;Je++)J=O[Je],_e=We+Ge(J,Je),Re+=$(J,Q,H,_e,Te);else if(Je=w(O),typeof Je=="function")for(O=Je.call(O),Je=0;!(J=O.next()).done;)J=J.value,_e=We+Ge(J,Je++),Re+=$(J,Q,H,_e,Te);else if(_e==="object"){if(typeof O.then=="function")return $(rt(O),Q,H,J,Te);throw Q=String(O),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return Re}function ue(O,Q,H){if(O==null)return O;var J=[],Te=0;return $(O,J,"","",function(_e){return Q.call(H,_e,Te++)}),J}function ve(O){if(O._status===-1){var Q=O._result;Q=Q(),Q.then(function(H){(O._status===0||O._status===-1)&&(O._status=1,O._result=H)},function(H){(O._status===0||O._status===-1)&&(O._status=2,O._result=H)}),O._status===-1&&(O._status=0,O._result=Q)}if(O._status===1)return O._result.default;throw O._result}var pe=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},je={map:ue,forEach:function(O,Q,H){ue(O,function(){Q.apply(this,arguments)},H)},count:function(O){var Q=0;return ue(O,function(){Q++}),Q},toArray:function(O){return ue(O,function(Q){return Q})||[]},only:function(O){if(!k(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return at.Activity=T,at.Children=je,at.Component=ye,at.Fragment=n,at.Profiler=o,at.PureComponent=re,at.StrictMode=s,at.Suspense=p,at.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,at.__COMPILER_RUNTIME={__proto__:null,c:function(O){return N.H.useMemoCache(O)}},at.cache=function(O){return function(){return O.apply(null,arguments)}},at.cacheSignal=function(){return null},at.cloneElement=function(O,Q,H){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var J=F({},O.props),Te=O.key;if(Q!=null)for(_e in Q.key!==void 0&&(Te=""+Q.key),Q)!C.call(Q,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&Q.ref===void 0||(J[_e]=Q[_e]);var _e=arguments.length-2;if(_e===1)J.children=H;else if(1<_e){for(var Re=Array(_e),We=0;We<_e;We++)Re[We]=arguments[We+2];J.children=Re}return I(O.type,Te,J)},at.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},at.createElement=function(O,Q,H){var J,Te={},_e=null;if(Q!=null)for(J in Q.key!==void 0&&(_e=""+Q.key),Q)C.call(Q,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(Te[J]=Q[J]);var Re=arguments.length-2;if(Re===1)Te.children=H;else if(1<Re){for(var We=Array(Re),Je=0;Je<Re;Je++)We[Je]=arguments[Je+2];Te.children=We}if(O&&O.defaultProps)for(J in Re=O.defaultProps,Re)Te[J]===void 0&&(Te[J]=Re[J]);return I(O,_e,Te)},at.createRef=function(){return{current:null}},at.forwardRef=function(O){return{$$typeof:g,render:O}},at.isValidElement=k,at.lazy=function(O){return{$$typeof:_,_payload:{_status:-1,_result:O},_init:ve}},at.memo=function(O,Q){return{$$typeof:m,type:O,compare:Q===void 0?null:Q}},at.startTransition=function(O){var Q=N.T,H={};N.T=H;try{var J=O(),Te=N.S;Te!==null&&Te(H,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(Ve,pe)}catch(_e){pe(_e)}finally{Q!==null&&H.types!==null&&(Q.types=H.types),N.T=Q}},at.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},at.use=function(O){return N.H.use(O)},at.useActionState=function(O,Q,H){return N.H.useActionState(O,Q,H)},at.useCallback=function(O,Q){return N.H.useCallback(O,Q)},at.useContext=function(O){return N.H.useContext(O)},at.useDebugValue=function(){},at.useDeferredValue=function(O,Q){return N.H.useDeferredValue(O,Q)},at.useEffect=function(O,Q){return N.H.useEffect(O,Q)},at.useEffectEvent=function(O){return N.H.useEffectEvent(O)},at.useId=function(){return N.H.useId()},at.useImperativeHandle=function(O,Q,H){return N.H.useImperativeHandle(O,Q,H)},at.useInsertionEffect=function(O,Q){return N.H.useInsertionEffect(O,Q)},at.useLayoutEffect=function(O,Q){return N.H.useLayoutEffect(O,Q)},at.useMemo=function(O,Q){return N.H.useMemo(O,Q)},at.useOptimistic=function(O,Q){return N.H.useOptimistic(O,Q)},at.useReducer=function(O,Q,H){return N.H.useReducer(O,Q,H)},at.useRef=function(O){return N.H.useRef(O)},at.useState=function(O){return N.H.useState(O)},at.useSyncExternalStore=function(O,Q,H){return N.H.useSyncExternalStore(O,Q,H)},at.useTransition=function(){return N.H.useTransition()},at.version="19.2.0",at}var qv;function gp(){return qv||(qv=1,vm.exports=aw()),vm.exports}var U=gp();const me=pp(U);var _m={exports:{}},nu={},bm={exports:{}},Em={};var Fv;function ow(){return Fv||(Fv=1,(function(i){function e($,ue){var ve=$.length;$.push(ue);e:for(;0<ve;){var pe=ve-1>>>1,je=$[pe];if(0<o(je,ue))$[pe]=ue,$[ve]=je,ve=pe;else break e}}function n($){return $.length===0?null:$[0]}function s($){if($.length===0)return null;var ue=$[0],ve=$.pop();if(ve!==ue){$[0]=ve;e:for(var pe=0,je=$.length,O=je>>>1;pe<O;){var Q=2*(pe+1)-1,H=$[Q],J=Q+1,Te=$[J];if(0>o(H,ve))J<je&&0>o(Te,H)?($[pe]=Te,$[J]=ve,pe=J):($[pe]=H,$[Q]=ve,pe=Q);else if(J<je&&0>o(Te,ve))$[pe]=Te,$[J]=ve,pe=J;else break e}}return ue}function o($,ue){var ve=$.sortIndex-ue.sortIndex;return ve!==0?ve:$.id-ue.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var h=Date,g=h.now();i.unstable_now=function(){return h.now()-g}}var p=[],m=[],_=1,T=null,S=3,w=!1,P=!1,F=!1,B=!1,ye=typeof setTimeout=="function"?setTimeout:null,he=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function Ae($){for(var ue=n(m);ue!==null;){if(ue.callback===null)s(m);else if(ue.startTime<=$)s(m),ue.sortIndex=ue.expirationTime,e(p,ue);else break;ue=n(m)}}function ze($){if(F=!1,Ae($),!P)if(n(p)!==null)P=!0,Ve||(Ve=!0,L());else{var ue=n(m);ue!==null&&rt(ze,ue.startTime-$)}}var Ve=!1,N=-1,C=5,I=-1;function V(){return B?!0:!(i.unstable_now()-I<C)}function k(){if(B=!1,Ve){var $=i.unstable_now();I=$;var ue=!0;try{e:{P=!1,F&&(F=!1,he(N),N=-1),w=!0;var ve=S;try{t:{for(Ae($),T=n(p);T!==null&&!(T.expirationTime>$&&V());){var pe=T.callback;if(typeof pe=="function"){T.callback=null,S=T.priorityLevel;var je=pe(T.expirationTime<=$);if($=i.unstable_now(),typeof je=="function"){T.callback=je,Ae($),ue=!0;break t}T===n(p)&&s(p),Ae($)}else s(p);T=n(p)}if(T!==null)ue=!0;else{var O=n(m);O!==null&&rt(ze,O.startTime-$),ue=!1}}break e}finally{T=null,S=ve,w=!1}ue=void 0}}finally{ue?L():Ve=!1}}}var L;if(typeof re=="function")L=function(){re(k)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,Ge=x.port2;x.port1.onmessage=k,L=function(){Ge.postMessage(null)}}else L=function(){ye(k,0)};function rt($,ue){N=ye(function(){$(i.unstable_now())},ue)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function($){$.callback=null},i.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<$?Math.floor(1e3/$):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_next=function($){switch(S){case 1:case 2:case 3:var ue=3;break;default:ue=S}var ve=S;S=ue;try{return $()}finally{S=ve}},i.unstable_requestPaint=function(){B=!0},i.unstable_runWithPriority=function($,ue){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ve=S;S=$;try{return ue()}finally{S=ve}},i.unstable_scheduleCallback=function($,ue,ve){var pe=i.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?pe+ve:pe):ve=pe,$){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=ve+je,$={id:_++,callback:ue,priorityLevel:$,startTime:ve,expirationTime:je,sortIndex:-1},ve>pe?($.sortIndex=ve,e(m,$),n(p)===null&&$===n(m)&&(F?(he(N),N=-1):F=!0,rt(ze,ve-pe))):($.sortIndex=je,e(p,$),P||w||(P=!0,Ve||(Ve=!0,L()))),$},i.unstable_shouldYield=V,i.unstable_wrapCallback=function($){var ue=S;return function(){var ve=S;S=ue;try{return $.apply(this,arguments)}finally{S=ve}}}})(Em)),Em}var Hv;function lw(){return Hv||(Hv=1,bm.exports=ow()),bm.exports}var Tm={exports:{}},tr={};var Gv;function uw(){if(Gv)return tr;Gv=1;var i=gp();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)m+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,m,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:p,containerInfo:m,implementation:_}}var h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return tr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,tr.createPortal=function(p,m){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return u(p,m,null,_)},tr.flushSync=function(p){var m=h.T,_=s.p;try{if(h.T=null,s.p=2,p)return p()}finally{h.T=m,s.p=_,s.d.f()}},tr.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(p,m))},tr.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},tr.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var _=m.as,T=g(_,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,w=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;_==="style"?s.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:w}):_==="script"&&s.d.X(p,{crossOrigin:T,integrity:S,fetchPriority:w,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},tr.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var _=g(m.as,m.crossOrigin);s.d.M(p,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(p)},tr.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var _=m.as,T=g(_,m.crossOrigin);s.d.L(p,_,{crossOrigin:T,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},tr.preloadModule=function(p,m){if(typeof p=="string")if(m){var _=g(m.as,m.crossOrigin);s.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(p)},tr.requestFormReset=function(p){s.d.r(p)},tr.unstable_batchedUpdates=function(p,m){return p(m)},tr.useFormState=function(p,m,_){return h.H.useFormState(p,m,_)},tr.useFormStatus=function(){return h.H.useHostTransitionStatus()},tr.version="19.2.0",tr}var Kv;function Ub(){if(Kv)return Tm.exports;Kv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Tm.exports=uw(),Tm.exports}var Qv;function cw(){if(Qv)return nu;Qv=1;var i=lw(),e=gp(),n=Ub();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function h(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function p(t){if(u(t)!==t)throw Error(s(188))}function m(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return p(d),t;if(f===l)return p(d),r;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=d,l=f;else{for(var b=!1,A=d.child;A;){if(A===a){b=!0,a=d,l=f;break}if(A===l){b=!0,l=d,a=f;break}A=A.sibling}if(!b){for(A=f.child;A;){if(A===a){b=!0,a=f,l=d;break}if(A===l){b=!0,l=f,a=d;break}A=A.sibling}if(!b)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function _(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=_(t),r!==null)return r;t=t.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),ye=Symbol.for("react.profiler"),he=Symbol.for("react.consumer"),re=Symbol.for("react.context"),Ae=Symbol.for("react.forward_ref"),ze=Symbol.for("react.suspense"),Ve=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function L(t){return t===null||typeof t!="object"?null:(t=k&&t[k]||t["@@iterator"],typeof t=="function"?t:null)}var x=Symbol.for("react.client.reference");function Ge(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===x?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case F:return"Fragment";case ye:return"Profiler";case B:return"StrictMode";case ze:return"Suspense";case Ve:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case P:return"Portal";case re:return t.displayName||"Context";case he:return(t._context.displayName||"Context")+".Consumer";case Ae:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return r=t.displayName||null,r!==null?r:Ge(t.type)||"Memo";case C:r=t._payload,t=t._init;try{return Ge(t(r))}catch{}}return null}var rt=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},pe=[],je=-1;function O(t){return{current:t}}function Q(t){0>je||(t.current=pe[je],pe[je]=null,je--)}function H(t,r){je++,pe[je]=t.current,t.current=r}var J=O(null),Te=O(null),_e=O(null),Re=O(null);function We(t,r){switch(H(_e,r),H(Te,t),H(J,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?lv(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=lv(r),t=uv(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Q(J),H(J,t)}function Je(){Q(J),Q(Te),Q(_e)}function qt(t){t.memoizedState!==null&&H(Re,t);var r=J.current,a=uv(r,t.type);r!==a&&(H(Te,t),H(J,a))}function Gt(t){Te.current===t&&(Q(J),Q(Te)),Re.current===t&&(Q(Re),Wl._currentValue=ve)}var Ot,Tn;function en(t){if(Ot===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Ot=r&&r[1]||"",Tn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ot+t+Tn}var sn=!1;function q(t,r){if(!t||sn)return"";sn=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(ee){var W=ee}Reflect.construct(t,[],ae)}else{try{ae.call()}catch(ee){W=ee}t.call(ae.prototype)}}else{try{throw Error()}catch(ee){W=ee}(ae=t())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(ee){if(ee&&W&&typeof ee.stack=="string")return[ee.stack,W.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),b=f[0],A=f[1];if(b&&A){var M=b.split(`
`),X=A.split(`
`);for(d=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;d<X.length&&!X[d].includes("DetermineComponentFrameRoot");)d++;if(l===M.length||d===X.length)for(l=M.length-1,d=X.length-1;1<=l&&0<=d&&M[l]!==X[d];)d--;for(;1<=l&&0<=d;l--,d--)if(M[l]!==X[d]){if(l!==1||d!==1)do if(l--,d--,0>d||M[l]!==X[d]){var te=`
`+M[l].replace(" at new "," at ");return t.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",t.displayName)),te}while(1<=l&&0<=d);break}}}finally{sn=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?en(a):""}function de(t,r){switch(t.tag){case 26:case 27:case 5:return en(t.type);case 16:return en("Lazy");case 13:return t.child!==r&&r!==null?en("Suspense Fallback"):en("Suspense");case 19:return en("SuspenseList");case 0:case 15:return q(t.type,!1);case 11:return q(t.type.render,!1);case 1:return q(t.type,!0);case 31:return en("Activity");default:return""}}function be(t){try{var r="",a=null;do r+=de(t,a),a=t,t=t.return;while(t);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ne=Object.prototype.hasOwnProperty,Ce=i.unstable_scheduleCallback,fe=i.unstable_cancelCallback,Me=i.unstable_shouldYield,Xe=i.unstable_requestPaint,nt=i.unstable_now,on=i.unstable_getCurrentPriorityLevel,ft=i.unstable_ImmediatePriority,Cn=i.unstable_UserBlockingPriority,mr=i.unstable_NormalPriority,ji=i.unstable_LowPriority,or=i.unstable_IdlePriority,fi=i.log,Lr=i.unstable_setDisableYieldValue,gn=null,Kt=null;function Ft(t){if(typeof fi=="function"&&Lr(t),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(gn,t)}catch{}}var pt=Math.clz32?Math.clz32:lr,Cr=Math.log,er=Math.LN2;function lr(t){return t>>>=0,t===0?32:31-(Cr(t)/er|0)|0}var Pn=256,In=262144,bt=4194304;function tn(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Bn(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var d=0,f=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var A=l&134217727;return A!==0?(l=A&~f,l!==0?d=tn(l):(b&=A,b!==0?d=tn(b):a||(a=A&~t,a!==0&&(d=tn(a))))):(A=l&~f,A!==0?d=tn(A):b!==0?d=tn(b):a||(a=l&~t,a!==0&&(d=tn(a)))),d===0?0:r!==0&&r!==d&&(r&f)===0&&(f=d&-d,a=r&-r,f>=a||f===32&&(a&4194048)!==0)?r:d}function Ue(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function mt(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function G(){var t=bt;return bt<<=1,(bt&62914560)===0&&(bt=4194304),t}function ne(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function ce(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ge(t,r,a,l,d,f){var b=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var A=t.entanglements,M=t.expirationTimes,X=t.hiddenUpdates;for(a=b&~a;0<a;){var te=31-pt(a),ae=1<<te;A[te]=0,M[te]=-1;var W=X[te];if(W!==null)for(X[te]=null,te=0;te<W.length;te++){var ee=W[te];ee!==null&&(ee.lane&=-536870913)}a&=~ae}l!==0&&we(t,l,0),f!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=f&~(b&~r))}function we(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-pt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Be(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-pt(a),d=1<<l;d&r|t[l]&r&&(t[l]|=r),a&=~d}}function Ie(t,r){var a=r&-r;return a=(a&42)!==0?1:Ct(a),(a&(t.suspendedLanes|r))!==0?0:a}function Ct(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ze(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ht(){var t=ue.p;return t!==0?t:(t=window.event,t===void 0?32:Dv(t.type))}function Ye(t,r){var a=ue.p;try{return ue.p=t,r()}finally{ue.p=a}}var Nt=Math.random().toString(36).slice(2),Le="__reactFiber$"+Nt,dt="__reactProps$"+Nt,xn="__reactContainer$"+Nt,ei="__reactEvents$"+Nt,ul="__reactListeners$"+Nt,Wa="__reactHandles$"+Nt,Ja="__reactResources$"+Nt,Pr="__reactMarker$"+Nt;function ms(t){delete t[Le],delete t[dt],delete t[ei],delete t[ul],delete t[Wa]}function Ur(t){var r=t[Le];if(r)return r;for(var a=t.parentNode;a;){if(r=a[xn]||a[Le]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=gv(t);t!==null;){if(a=t[Le])return a;t=gv(t)}return r}t=a,a=t.parentNode}return null}function pr(t){if(t=t[Le]||t[xn]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function ur(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function zr(t){var r=t[Ja];return r||(r=t[Ja]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function yn(t){t[Pr]=!0}var fa=new Set,D={};function le(t,r){Ee(t,r),Ee(t+"Capture",r)}function Ee(t,r){for(D[t]=r,t=0;t<r.length;t++)fa.add(r[t])}var Oe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fe={},st={};function gt(t){return Ne.call(st,t)?!0:Ne.call(Fe,t)?!1:Oe.test(t)?st[t]=!0:(Fe[t]=!0,!1)}function kt(t,r,a){if(gt(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function Dt(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function Pt(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}function Ut(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dn(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Br(t,r,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,f=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return d.call(this)},set:function(b){a=""+b,f.call(this,b)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(b){a=""+b},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function It(t){if(!t._valueTracker){var r=dn(t)?"checked":"value";t._valueTracker=Br(t,r,""+t[r])}}function qn(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=dn(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function Nn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Li=/[\n"\\]/g;function gr(t){return t.replace(Li,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Za(t,r,a,l,d,f,b,A){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),r!=null?b==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+Ut(r)):t.value!==""+Ut(r)&&(t.value=""+Ut(r)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),r!=null?cl(t,b,Ut(r)):a!=null?cl(t,b,Ut(a)):l!=null&&t.removeAttribute("value"),d==null&&f!=null&&(t.defaultChecked=!!f),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.name=""+Ut(A):t.removeAttribute("name")}function Gu(t,r,a,l,d,f,b,A){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),r!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||r!=null)){It(t);return}a=a!=null?""+Ut(a):"",r=r!=null?""+Ut(r):a,A||r===t.value||(t.value=r),t.defaultValue=r}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=A?t.checked:!!l,t.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b),It(t)}function cl(t,r,a){r==="number"&&Nn(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function ps(t,r,a,l){if(t=t.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=r.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Ut(a),r=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,l&&(t[d].defaultSelected=!0);return}r!==null||t[d].disabled||(r=t[d])}r!==null&&(r.selected=!0)}}function Ku(t,r,a){if(r!=null&&(r=""+Ut(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+Ut(a):""}function gs(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(rt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=Ut(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),It(t)}function yr(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var Qu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dl(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||Qu.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function hl(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var d in r)l=r[d],r.hasOwnProperty(d)&&a[d]!==l&&dl(t,d,l)}else for(var f in r)r.hasOwnProperty(f)&&dl(t,f,r[f])}function eo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ys=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function to(t){return ys.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ti(){}var fl=null;function qr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vs=null,mi=null;function ma(t){var r=pr(t);if(r&&(t=r.stateNode)){var a=t[dt]||null;e:switch(t=r.stateNode,r.type){case"input":if(Za(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+gr(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var d=l[dt]||null;if(!d)throw Error(s(90));Za(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&qn(l)}break e;case"textarea":Ku(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&ps(t,!!a.multiple,r,!1)}}}var no=!1;function _s(t,r,a){if(no)return t(r,a);no=!0;try{var l=t(r);return l}finally{if(no=!1,(vs!==null||mi!==null)&&(Bc(),vs&&(r=vs,t=mi,mi=vs=null,ma(r),t)))for(r=0;r<t.length;r++)ma(t[r])}}function ni(t,r){var a=t.stateNode;if(a===null)return null;var l=a[dt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pa=!1;if(Fr)try{var $t={};Object.defineProperty($t,"passive",{get:function(){pa=!0}}),window.addEventListener("test",$t,$t),window.removeEventListener("test",$t,$t)}catch{pa=!1}var pi=null,ml=null,ga=null;function pl(){if(ga)return ga;var t,r=ml,a=r.length,l,d="value"in pi?pi.value:pi.textContent,f=d.length;for(t=0;t<a&&r[t]===d[t];t++);var b=a-t;for(l=1;l<=b&&r[a-l]===d[f-l];l++);return ga=d.slice(t,1<l?1-l:void 0)}function ya(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Pi(){return!0}function ri(){return!1}function Gn(t){function r(a,l,d,f,b){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=f,this.target=b,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(a=t[A],this[A]=a?a(f):f[A]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Pi:ri,this.isPropagationStopped=ri,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Pi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Pi)},persist:function(){},isPersistent:Pi}),r}var Ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gi=Gn(Ui),bs=T({},Ui,{view:0,detail:0}),gl=Gn(bs),Es,ro,yi,io=T({},bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ts,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yi&&(yi&&t.type==="mousemove"?(Es=t.screenX-yi.screenX,ro=t.screenY-yi.screenY):ro=Es=0,yi=t),Es)},movementY:function(t){return"movementY"in t?t.movementY:ro}}),yl=Gn(io),va=T({},io,{dataTransfer:0}),Xu=Gn(va),$u=T({},bs,{relatedTarget:0}),_a=Gn($u),vl=T({},Ui,{animationName:0,elapsedTime:0,pseudoElement:0}),Wu=Gn(vl),so=T({},Ui,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ju=Gn(so),Zu=T({},Ui,{data:0}),vi=Gn(Zu),ec={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rc(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=nc[t])?!!r[t]:!1}function Ts(){return rc}var cr=T({},bs,{key:function(t){if(t.key){var r=ec[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=ya(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ts,charCode:function(t){return t.type==="keypress"?ya(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ya(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ic=Gn(cr),sc=T({},io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zi=Gn(sc),c=T({},bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ts}),y=Gn(c),E=T({},Ui,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=Gn(E),K=T({},io,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Z=Gn(K),Se=T({},Ui,{newState:0,oldState:0}),lt=Gn(Se),Sn=[9,13,27,32],zt=Fr&&"CompositionEvent"in window,hn=null;Fr&&"documentMode"in document&&(hn=document.documentMode);var Hr=Fr&&"TextEvent"in window&&!hn,_i=Fr&&(!zt||hn&&8<hn&&11>=hn),ii=" ",si=!1;function ba(t,r){switch(t){case"keyup":return Sn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ao(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var oo=!1;function I1(t,r){switch(t){case"compositionend":return ao(r);case"keypress":return r.which!==32?null:(si=!0,ii);case"textInput":return t=r.data,t===ii&&si?null:t;default:return null}}function x1(t,r){if(oo)return t==="compositionend"||!zt&&ba(t,r)?(t=pl(),ga=ml=pi=null,oo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return _i&&r.locale!=="ko"?null:r.data;default:return null}}var N1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _g(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!N1[t.type]:r==="textarea"}function bg(t,r,a,l){vs?mi?mi.push(l):mi=[l]:vs=l,r=Yc(r,"onChange"),0<r.length&&(a=new gi("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var _l=null,bl=null;function k1(t){nv(t,0)}function ac(t){var r=ur(t);if(qn(r))return t}function Eg(t,r){if(t==="change")return r}var Tg=!1;if(Fr){var Sh;if(Fr){var wh="oninput"in document;if(!wh){var Sg=document.createElement("div");Sg.setAttribute("oninput","return;"),wh=typeof Sg.oninput=="function"}Sh=wh}else Sh=!1;Tg=Sh&&(!document.documentMode||9<document.documentMode)}function wg(){_l&&(_l.detachEvent("onpropertychange",Ag),bl=_l=null)}function Ag(t){if(t.propertyName==="value"&&ac(bl)){var r=[];bg(r,bl,t,qr(t)),_s(k1,r)}}function D1(t,r,a){t==="focusin"?(wg(),_l=r,bl=a,_l.attachEvent("onpropertychange",Ag)):t==="focusout"&&wg()}function M1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ac(bl)}function O1(t,r){if(t==="click")return ac(r)}function V1(t,r){if(t==="input"||t==="change")return ac(r)}function j1(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Ir=typeof Object.is=="function"?Object.is:j1;function El(t,r){if(Ir(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!Ne.call(r,d)||!Ir(t[d],r[d]))return!1}return!0}function Rg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Cg(t,r){var a=Rg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Rg(a)}}function Ig(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Ig(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function xg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Nn(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Nn(t.document)}return r}function Ah(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var L1=Fr&&"documentMode"in document&&11>=document.documentMode,lo=null,Rh=null,Tl=null,Ch=!1;function Ng(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ch||lo==null||lo!==Nn(l)||(l=lo,"selectionStart"in l&&Ah(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Tl&&El(Tl,l)||(Tl=l,l=Yc(Rh,"onSelect"),0<l.length&&(r=new gi("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=lo)))}function Ea(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var uo={animationend:Ea("Animation","AnimationEnd"),animationiteration:Ea("Animation","AnimationIteration"),animationstart:Ea("Animation","AnimationStart"),transitionrun:Ea("Transition","TransitionRun"),transitionstart:Ea("Transition","TransitionStart"),transitioncancel:Ea("Transition","TransitionCancel"),transitionend:Ea("Transition","TransitionEnd")},Ih={},kg={};Fr&&(kg=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function Ta(t){if(Ih[t])return Ih[t];if(!uo[t])return t;var r=uo[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in kg)return Ih[t]=r[a];return t}var Dg=Ta("animationend"),Mg=Ta("animationiteration"),Og=Ta("animationstart"),P1=Ta("transitionrun"),U1=Ta("transitionstart"),z1=Ta("transitioncancel"),Vg=Ta("transitionend"),jg=new Map,xh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xh.push("scrollEnd");function ai(t,r){jg.set(t,r),le(r,[t])}var oc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Gr=[],co=0,Nh=0;function lc(){for(var t=co,r=Nh=co=0;r<t;){var a=Gr[r];Gr[r++]=null;var l=Gr[r];Gr[r++]=null;var d=Gr[r];Gr[r++]=null;var f=Gr[r];if(Gr[r++]=null,l!==null&&d!==null){var b=l.pending;b===null?d.next=d:(d.next=b.next,b.next=d),l.pending=d}f!==0&&Lg(a,d,f)}}function uc(t,r,a,l){Gr[co++]=t,Gr[co++]=r,Gr[co++]=a,Gr[co++]=l,Nh|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function kh(t,r,a,l){return uc(t,r,a,l),cc(t)}function Sa(t,r){return uc(t,null,null,r),cc(t)}function Lg(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var d=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(d=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,d&&r!==null&&(d=31-pt(a),t=f.hiddenUpdates,l=t[d],l===null?t[d]=[r]:l.push(r),r.lane=a|536870912),f):null}function cc(t){if(50<Hl)throw Hl=0,Bf=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var ho={};function B1(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xr(t,r,a,l){return new B1(t,r,a,l)}function Dh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Bi(t,r){var a=t.alternate;return a===null?(a=xr(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Pg(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function dc(t,r,a,l,d,f){var b=0;if(l=t,typeof t=="function")Dh(t)&&(b=1);else if(typeof t=="string")b=KS(t,a,J.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=xr(31,a,r,d),t.elementType=I,t.lanes=f,t;case F:return wa(a.children,d,f,r);case B:b=8,d|=24;break;case ye:return t=xr(12,a,r,d|2),t.elementType=ye,t.lanes=f,t;case ze:return t=xr(13,a,r,d),t.elementType=ze,t.lanes=f,t;case Ve:return t=xr(19,a,r,d),t.elementType=Ve,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case re:b=10;break e;case he:b=9;break e;case Ae:b=11;break e;case N:b=14;break e;case C:b=16,l=null;break e}b=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=xr(b,a,r,d),r.elementType=t,r.type=l,r.lanes=f,r}function wa(t,r,a,l){return t=xr(7,t,l,r),t.lanes=a,t}function Mh(t,r,a){return t=xr(6,t,null,r),t.lanes=a,t}function Ug(t){var r=xr(18,null,null,0);return r.stateNode=t,r}function Oh(t,r,a){return r=xr(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var zg=new WeakMap;function Kr(t,r){if(typeof t=="object"&&t!==null){var a=zg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:be(r)},zg.set(t,r),r)}return{value:t,source:r,stack:be(r)}}var fo=[],mo=0,hc=null,Sl=0,Qr=[],Yr=0,Ss=null,bi=1,Ei="";function qi(t,r){fo[mo++]=Sl,fo[mo++]=hc,hc=t,Sl=r}function Bg(t,r,a){Qr[Yr++]=bi,Qr[Yr++]=Ei,Qr[Yr++]=Ss,Ss=t;var l=bi;t=Ei;var d=32-pt(l)-1;l&=~(1<<d),a+=1;var f=32-pt(r)+d;if(30<f){var b=d-d%5;f=(l&(1<<b)-1).toString(32),l>>=b,d-=b,bi=1<<32-pt(r)+d|a<<d|l,Ei=f+t}else bi=1<<f|a<<d|l,Ei=t}function Vh(t){t.return!==null&&(qi(t,1),Bg(t,1,0))}function jh(t){for(;t===hc;)hc=fo[--mo],fo[mo]=null,Sl=fo[--mo],fo[mo]=null;for(;t===Ss;)Ss=Qr[--Yr],Qr[Yr]=null,Ei=Qr[--Yr],Qr[Yr]=null,bi=Qr[--Yr],Qr[Yr]=null}function qg(t,r){Qr[Yr++]=bi,Qr[Yr++]=Ei,Qr[Yr++]=Ss,bi=r.id,Ei=r.overflow,Ss=t}var Kn=null,ln=null,xt=!1,ws=null,Xr=!1,Lh=Error(s(519));function As(t){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw wl(Kr(r,t)),Lh}function Fg(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[Le]=t,r[dt]=l,a){case"dialog":vt("cancel",r),vt("close",r);break;case"iframe":case"object":case"embed":vt("load",r);break;case"video":case"audio":for(a=0;a<Kl.length;a++)vt(Kl[a],r);break;case"source":vt("error",r);break;case"img":case"image":case"link":vt("error",r),vt("load",r);break;case"details":vt("toggle",r);break;case"input":vt("invalid",r),Gu(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":vt("invalid",r);break;case"textarea":vt("invalid",r),gs(r,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||av(r.textContent,a)?(l.popover!=null&&(vt("beforetoggle",r),vt("toggle",r)),l.onScroll!=null&&vt("scroll",r),l.onScrollEnd!=null&&vt("scrollend",r),l.onClick!=null&&(r.onclick=ti),r=!0):r=!1,r||As(t,!0)}function Hg(t){for(Kn=t.return;Kn;)switch(Kn.tag){case 5:case 31:case 13:Xr=!1;return;case 27:case 3:Xr=!0;return;default:Kn=Kn.return}}function po(t){if(t!==Kn)return!1;if(!xt)return Hg(t),xt=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||nm(t.type,t.memoizedProps)),a=!a),a&&ln&&As(t),Hg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));ln=pv(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));ln=pv(t)}else r===27?(r=ln,Us(t.type)?(t=om,om=null,ln=t):ln=r):ln=Kn?Wr(t.stateNode.nextSibling):null;return!0}function Aa(){ln=Kn=null,xt=!1}function Ph(){var t=ws;return t!==null&&(Er===null?Er=t:Er.push.apply(Er,t),ws=null),t}function wl(t){ws===null?ws=[t]:ws.push(t)}var Uh=O(null),Ra=null,Fi=null;function Rs(t,r,a){H(Uh,r._currentValue),r._currentValue=a}function Hi(t){t._currentValue=Uh.current,Q(Uh)}function zh(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function Bh(t,r,a,l){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var f=d.dependencies;if(f!==null){var b=d.child;f=f.firstContext;e:for(;f!==null;){var A=f;f=d;for(var M=0;M<r.length;M++)if(A.context===r[M]){f.lanes|=a,A=f.alternate,A!==null&&(A.lanes|=a),zh(f.return,a,t),l||(b=null);break e}f=A.next}}else if(d.tag===18){if(b=d.return,b===null)throw Error(s(341));b.lanes|=a,f=b.alternate,f!==null&&(f.lanes|=a),zh(b,a,t),b=null}else b=d.child;if(b!==null)b.return=d;else for(b=d;b!==null;){if(b===t){b=null;break}if(d=b.sibling,d!==null){d.return=b.return,b=d;break}b=b.return}d=b}}function go(t,r,a,l){t=null;for(var d=r,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var b=d.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var A=d.type;Ir(d.pendingProps.value,b.value)||(t!==null?t.push(A):t=[A])}}else if(d===Re.current){if(b=d.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(Wl):t=[Wl])}d=d.return}t!==null&&Bh(r,t,a,l),r.flags|=262144}function fc(t){for(t=t.firstContext;t!==null;){if(!Ir(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ca(t){Ra=t,Fi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Qn(t){return Gg(Ra,t)}function mc(t,r){return Ra===null&&Ca(t),Gg(t,r)}function Gg(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Fi===null){if(t===null)throw Error(s(308));Fi=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Fi=Fi.next=r;return a}var q1=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},F1=i.unstable_scheduleCallback,H1=i.unstable_NormalPriority,kn={$$typeof:re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qh(){return{controller:new q1,data:new Map,refCount:0}}function Al(t){t.refCount--,t.refCount===0&&F1(H1,function(){t.controller.abort()})}var Rl=null,Fh=0,yo=0,vo=null;function G1(t,r){if(Rl===null){var a=Rl=[];Fh=0,yo=Qf(),vo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Fh++,r.then(Kg,Kg),r}function Kg(){if(--Fh===0&&Rl!==null){vo!==null&&(vo.status="fulfilled");var t=Rl;Rl=null,yo=0,vo=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function K1(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var d=0;d<a.length;d++)(0,a[d])(r)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var Qg=$.S;$.S=function(t,r){N0=nt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&G1(t,r),Qg!==null&&Qg(t,r)};var Ia=O(null);function Hh(){var t=Ia.current;return t!==null?t:nn.pooledCache}function pc(t,r){r===null?H(Ia,Ia.current):H(Ia,r.pool)}function Yg(){var t=Hh();return t===null?null:{parent:kn._currentValue,pool:t}}var _o=Error(s(460)),Gh=Error(s(474)),gc=Error(s(542)),yc={then:function(){}};function Xg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function $g(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(ti,ti),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Jg(t),t;default:if(typeof r.status=="string")r.then(ti,ti);else{if(t=nn,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var d=r;d.status="fulfilled",d.value=l}},function(l){if(r.status==="pending"){var d=r;d.status="rejected",d.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Jg(t),t}throw Na=r,_o}}function xa(t){try{var r=t._init;return r(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Na=a,_o):a}}var Na=null;function Wg(){if(Na===null)throw Error(s(459));var t=Na;return Na=null,t}function Jg(t){if(t===_o||t===gc)throw Error(s(483))}var bo=null,Cl=0;function vc(t){var r=Cl;return Cl+=1,bo===null&&(bo=[]),$g(bo,t,r)}function Il(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function _c(t,r){throw r.$$typeof===S?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Zg(t){function r(z,j){if(t){var Y=z.deletions;Y===null?(z.deletions=[j],z.flags|=16):Y.push(j)}}function a(z,j){if(!t)return null;for(;j!==null;)r(z,j),j=j.sibling;return null}function l(z){for(var j=new Map;z!==null;)z.key!==null?j.set(z.key,z):j.set(z.index,z),z=z.sibling;return j}function d(z,j){return z=Bi(z,j),z.index=0,z.sibling=null,z}function f(z,j,Y){return z.index=Y,t?(Y=z.alternate,Y!==null?(Y=Y.index,Y<j?(z.flags|=67108866,j):Y):(z.flags|=67108866,j)):(z.flags|=1048576,j)}function b(z){return t&&z.alternate===null&&(z.flags|=67108866),z}function A(z,j,Y,se){return j===null||j.tag!==6?(j=Mh(Y,z.mode,se),j.return=z,j):(j=d(j,Y),j.return=z,j)}function M(z,j,Y,se){var Ke=Y.type;return Ke===F?te(z,j,Y.props.children,se,Y.key):j!==null&&(j.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===C&&xa(Ke)===j.type)?(j=d(j,Y.props),Il(j,Y),j.return=z,j):(j=dc(Y.type,Y.key,Y.props,null,z.mode,se),Il(j,Y),j.return=z,j)}function X(z,j,Y,se){return j===null||j.tag!==4||j.stateNode.containerInfo!==Y.containerInfo||j.stateNode.implementation!==Y.implementation?(j=Oh(Y,z.mode,se),j.return=z,j):(j=d(j,Y.children||[]),j.return=z,j)}function te(z,j,Y,se,Ke){return j===null||j.tag!==7?(j=wa(Y,z.mode,se,Ke),j.return=z,j):(j=d(j,Y),j.return=z,j)}function ae(z,j,Y){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Mh(""+j,z.mode,Y),j.return=z,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case w:return Y=dc(j.type,j.key,j.props,null,z.mode,Y),Il(Y,j),Y.return=z,Y;case P:return j=Oh(j,z.mode,Y),j.return=z,j;case C:return j=xa(j),ae(z,j,Y)}if(rt(j)||L(j))return j=wa(j,z.mode,Y,null),j.return=z,j;if(typeof j.then=="function")return ae(z,vc(j),Y);if(j.$$typeof===re)return ae(z,mc(z,j),Y);_c(z,j)}return null}function W(z,j,Y,se){var Ke=j!==null?j.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Ke!==null?null:A(z,j,""+Y,se);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:return Y.key===Ke?M(z,j,Y,se):null;case P:return Y.key===Ke?X(z,j,Y,se):null;case C:return Y=xa(Y),W(z,j,Y,se)}if(rt(Y)||L(Y))return Ke!==null?null:te(z,j,Y,se,null);if(typeof Y.then=="function")return W(z,j,vc(Y),se);if(Y.$$typeof===re)return W(z,j,mc(z,Y),se);_c(z,Y)}return null}function ee(z,j,Y,se,Ke){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return z=z.get(Y)||null,A(j,z,""+se,Ke);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case w:return z=z.get(se.key===null?Y:se.key)||null,M(j,z,se,Ke);case P:return z=z.get(se.key===null?Y:se.key)||null,X(j,z,se,Ke);case C:return se=xa(se),ee(z,j,Y,se,Ke)}if(rt(se)||L(se))return z=z.get(Y)||null,te(j,z,se,Ke,null);if(typeof se.then=="function")return ee(z,j,Y,vc(se),Ke);if(se.$$typeof===re)return ee(z,j,Y,mc(j,se),Ke);_c(j,se)}return null}function Pe(z,j,Y,se){for(var Ke=null,Vt=null,qe=j,ct=j=0,Tt=null;qe!==null&&ct<Y.length;ct++){qe.index>ct?(Tt=qe,qe=null):Tt=qe.sibling;var jt=W(z,qe,Y[ct],se);if(jt===null){qe===null&&(qe=Tt);break}t&&qe&&jt.alternate===null&&r(z,qe),j=f(jt,j,ct),Vt===null?Ke=jt:Vt.sibling=jt,Vt=jt,qe=Tt}if(ct===Y.length)return a(z,qe),xt&&qi(z,ct),Ke;if(qe===null){for(;ct<Y.length;ct++)qe=ae(z,Y[ct],se),qe!==null&&(j=f(qe,j,ct),Vt===null?Ke=qe:Vt.sibling=qe,Vt=qe);return xt&&qi(z,ct),Ke}for(qe=l(qe);ct<Y.length;ct++)Tt=ee(qe,z,ct,Y[ct],se),Tt!==null&&(t&&Tt.alternate!==null&&qe.delete(Tt.key===null?ct:Tt.key),j=f(Tt,j,ct),Vt===null?Ke=Tt:Vt.sibling=Tt,Vt=Tt);return t&&qe.forEach(function(Hs){return r(z,Hs)}),xt&&qi(z,ct),Ke}function $e(z,j,Y,se){if(Y==null)throw Error(s(151));for(var Ke=null,Vt=null,qe=j,ct=j=0,Tt=null,jt=Y.next();qe!==null&&!jt.done;ct++,jt=Y.next()){qe.index>ct?(Tt=qe,qe=null):Tt=qe.sibling;var Hs=W(z,qe,jt.value,se);if(Hs===null){qe===null&&(qe=Tt);break}t&&qe&&Hs.alternate===null&&r(z,qe),j=f(Hs,j,ct),Vt===null?Ke=Hs:Vt.sibling=Hs,Vt=Hs,qe=Tt}if(jt.done)return a(z,qe),xt&&qi(z,ct),Ke;if(qe===null){for(;!jt.done;ct++,jt=Y.next())jt=ae(z,jt.value,se),jt!==null&&(j=f(jt,j,ct),Vt===null?Ke=jt:Vt.sibling=jt,Vt=jt);return xt&&qi(z,ct),Ke}for(qe=l(qe);!jt.done;ct++,jt=Y.next())jt=ee(qe,z,ct,jt.value,se),jt!==null&&(t&&jt.alternate!==null&&qe.delete(jt.key===null?ct:jt.key),j=f(jt,j,ct),Vt===null?Ke=jt:Vt.sibling=jt,Vt=jt);return t&&qe.forEach(function(rw){return r(z,rw)}),xt&&qi(z,ct),Ke}function Zt(z,j,Y,se){if(typeof Y=="object"&&Y!==null&&Y.type===F&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:e:{for(var Ke=Y.key;j!==null;){if(j.key===Ke){if(Ke=Y.type,Ke===F){if(j.tag===7){a(z,j.sibling),se=d(j,Y.props.children),se.return=z,z=se;break e}}else if(j.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===C&&xa(Ke)===j.type){a(z,j.sibling),se=d(j,Y.props),Il(se,Y),se.return=z,z=se;break e}a(z,j);break}else r(z,j);j=j.sibling}Y.type===F?(se=wa(Y.props.children,z.mode,se,Y.key),se.return=z,z=se):(se=dc(Y.type,Y.key,Y.props,null,z.mode,se),Il(se,Y),se.return=z,z=se)}return b(z);case P:e:{for(Ke=Y.key;j!==null;){if(j.key===Ke)if(j.tag===4&&j.stateNode.containerInfo===Y.containerInfo&&j.stateNode.implementation===Y.implementation){a(z,j.sibling),se=d(j,Y.children||[]),se.return=z,z=se;break e}else{a(z,j);break}else r(z,j);j=j.sibling}se=Oh(Y,z.mode,se),se.return=z,z=se}return b(z);case C:return Y=xa(Y),Zt(z,j,Y,se)}if(rt(Y))return Pe(z,j,Y,se);if(L(Y)){if(Ke=L(Y),typeof Ke!="function")throw Error(s(150));return Y=Ke.call(Y),$e(z,j,Y,se)}if(typeof Y.then=="function")return Zt(z,j,vc(Y),se);if(Y.$$typeof===re)return Zt(z,j,mc(z,Y),se);_c(z,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,j!==null&&j.tag===6?(a(z,j.sibling),se=d(j,Y),se.return=z,z=se):(a(z,j),se=Mh(Y,z.mode,se),se.return=z,z=se),b(z)):a(z,j)}return function(z,j,Y,se){try{Cl=0;var Ke=Zt(z,j,Y,se);return bo=null,Ke}catch(qe){if(qe===_o||qe===gc)throw qe;var Vt=xr(29,qe,null,z.mode);return Vt.lanes=se,Vt.return=z,Vt}finally{}}}var ka=Zg(!0),ey=Zg(!1),Cs=!1;function Kh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qh(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Is(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function xs(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Bt&2)!==0){var d=l.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),l.pending=r,r=cc(t),Lg(t,null,a),r}return uc(t,l,r,a),cc(t)}function xl(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Be(t,a)}}function Yh(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?d=f=b:f=f.next=b,a=a.next}while(a!==null);f===null?d=f=r:f=f.next=r}else d=f=r;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var Xh=!1;function Nl(){if(Xh){var t=vo;if(t!==null)throw t}}function kl(t,r,a,l){Xh=!1;var d=t.updateQueue;Cs=!1;var f=d.firstBaseUpdate,b=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var M=A,X=M.next;M.next=null,b===null?f=X:b.next=X,b=M;var te=t.alternate;te!==null&&(te=te.updateQueue,A=te.lastBaseUpdate,A!==b&&(A===null?te.firstBaseUpdate=X:A.next=X,te.lastBaseUpdate=M))}if(f!==null){var ae=d.baseState;b=0,te=X=M=null,A=f;do{var W=A.lane&-536870913,ee=W!==A.lane;if(ee?(Et&W)===W:(l&W)===W){W!==0&&W===yo&&(Xh=!0),te!==null&&(te=te.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Pe=t,$e=A;W=r;var Zt=a;switch($e.tag){case 1:if(Pe=$e.payload,typeof Pe=="function"){ae=Pe.call(Zt,ae,W);break e}ae=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=$e.payload,W=typeof Pe=="function"?Pe.call(Zt,ae,W):Pe,W==null)break e;ae=T({},ae,W);break e;case 2:Cs=!0}}W=A.callback,W!==null&&(t.flags|=64,ee&&(t.flags|=8192),ee=d.callbacks,ee===null?d.callbacks=[W]:ee.push(W))}else ee={lane:W,tag:A.tag,payload:A.payload,callback:A.callback,next:null},te===null?(X=te=ee,M=ae):te=te.next=ee,b|=W;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;ee=A,A=ee.next,ee.next=null,d.lastBaseUpdate=ee,d.shared.pending=null}}while(!0);te===null&&(M=ae),d.baseState=M,d.firstBaseUpdate=X,d.lastBaseUpdate=te,f===null&&(d.shared.lanes=0),Os|=b,t.lanes=b,t.memoizedState=ae}}function ty(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function ny(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)ty(a[t],r)}var Eo=O(null),bc=O(0);function ry(t,r){t=Zi,H(bc,t),H(Eo,r),Zi=t|r.baseLanes}function $h(){H(bc,Zi),H(Eo,Eo.current)}function Wh(){Zi=bc.current,Q(Eo),Q(bc)}var Nr=O(null),$r=null;function Ns(t){var r=t.alternate;H(wn,wn.current&1),H(Nr,t),$r===null&&(r===null||Eo.current!==null||r.memoizedState!==null)&&($r=t)}function Jh(t){H(wn,wn.current),H(Nr,t),$r===null&&($r=t)}function iy(t){t.tag===22?(H(wn,wn.current),H(Nr,t),$r===null&&($r=t)):ks()}function ks(){H(wn,wn.current),H(Nr,Nr.current)}function kr(t){Q(Nr),$r===t&&($r=null),Q(wn)}var wn=O(0);function Ec(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||sm(a)||am(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Gi=0,ut=null,Wt=null,Dn=null,Tc=!1,To=!1,Da=!1,Sc=0,Dl=0,So=null,Q1=0;function vn(){throw Error(s(321))}function Zh(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!Ir(t[a],r[a]))return!1;return!0}function ef(t,r,a,l,d,f){return Gi=f,ut=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,$.H=t===null||t.memoizedState===null?By:gf,Da=!1,f=a(l,d),Da=!1,To&&(f=ay(r,a,l,d)),sy(t),f}function sy(t){$.H=Vl;var r=Wt!==null&&Wt.next!==null;if(Gi=0,Dn=Wt=ut=null,Tc=!1,Dl=0,So=null,r)throw Error(s(300));t===null||Mn||(t=t.dependencies,t!==null&&fc(t)&&(Mn=!0))}function ay(t,r,a,l){ut=t;var d=0;do{if(To&&(So=null),Dl=0,To=!1,25<=d)throw Error(s(301));if(d+=1,Dn=Wt=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}$.H=qy,f=r(a,l)}while(To);return f}function Y1(){var t=$.H,r=t.useState()[0];return r=typeof r.then=="function"?Ml(r):r,t=t.useState()[0],(Wt!==null?Wt.memoizedState:null)!==t&&(ut.flags|=1024),r}function tf(){var t=Sc!==0;return Sc=0,t}function nf(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function rf(t){if(Tc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Tc=!1}Gi=0,Dn=Wt=ut=null,To=!1,Dl=Sc=0,So=null}function dr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?ut.memoizedState=Dn=t:Dn=Dn.next=t,Dn}function An(){if(Wt===null){var t=ut.alternate;t=t!==null?t.memoizedState:null}else t=Wt.next;var r=Dn===null?ut.memoizedState:Dn.next;if(r!==null)Dn=r,Wt=t;else{if(t===null)throw ut.alternate===null?Error(s(467)):Error(s(310));Wt=t,t={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},Dn===null?ut.memoizedState=Dn=t:Dn=Dn.next=t}return Dn}function wc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ml(t){var r=Dl;return Dl+=1,So===null&&(So=[]),t=$g(So,t,r),r=ut,(Dn===null?r.memoizedState:Dn.next)===null&&(r=r.alternate,$.H=r===null||r.memoizedState===null?By:gf),t}function Ac(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ml(t);if(t.$$typeof===re)return Qn(t)}throw Error(s(438,String(t)))}function sf(t){var r=null,a=ut.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=ut.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(d){return d.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=wc(),ut.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=V;return r.index++,a}function Ki(t,r){return typeof r=="function"?r(t):r}function Rc(t){var r=An();return af(r,Wt,t)}function af(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var d=t.baseQueue,f=l.pending;if(f!==null){if(d!==null){var b=d.next;d.next=f.next,f.next=b}r.baseQueue=d=f,l.pending=null}if(f=t.baseState,d===null)t.memoizedState=f;else{r=d.next;var A=b=null,M=null,X=r,te=!1;do{var ae=X.lane&-536870913;if(ae!==X.lane?(Et&ae)===ae:(Gi&ae)===ae){var W=X.revertLane;if(W===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),ae===yo&&(te=!0);else if((Gi&W)===W){X=X.next,W===yo&&(te=!0);continue}else ae={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},M===null?(A=M=ae,b=f):M=M.next=ae,ut.lanes|=W,Os|=W;ae=X.action,Da&&a(f,ae),f=X.hasEagerState?X.eagerState:a(f,ae)}else W={lane:ae,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},M===null?(A=M=W,b=f):M=M.next=W,ut.lanes|=ae,Os|=ae;X=X.next}while(X!==null&&X!==r);if(M===null?b=f:M.next=A,!Ir(f,t.memoizedState)&&(Mn=!0,te&&(a=vo,a!==null)))throw a;t.memoizedState=f,t.baseState=b,t.baseQueue=M,l.lastRenderedState=f}return d===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function of(t){var r=An(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,d=a.pending,f=r.memoizedState;if(d!==null){a.pending=null;var b=d=d.next;do f=t(f,b.action),b=b.next;while(b!==d);Ir(f,r.memoizedState)||(Mn=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),a.lastRenderedState=f}return[f,l]}function oy(t,r,a){var l=ut,d=An(),f=xt;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=r();var b=!Ir((Wt||d).memoizedState,a);if(b&&(d.memoizedState=a,Mn=!0),d=d.queue,cf(cy.bind(null,l,d,t),[t]),d.getSnapshot!==r||b||Dn!==null&&Dn.memoizedState.tag&1){if(l.flags|=2048,wo(9,{destroy:void 0},uy.bind(null,l,d,a,r),null),nn===null)throw Error(s(349));f||(Gi&127)!==0||ly(l,r,a)}return a}function ly(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=ut.updateQueue,r===null?(r=wc(),ut.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function uy(t,r,a,l){r.value=a,r.getSnapshot=l,dy(r)&&hy(t)}function cy(t,r,a){return a(function(){dy(r)&&hy(t)})}function dy(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!Ir(t,a)}catch{return!0}}function hy(t){var r=Sa(t,2);r!==null&&Tr(r,t,2)}function lf(t){var r=dr();if(typeof t=="function"){var a=t;if(t=a(),Da){Ft(!0);try{a()}finally{Ft(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:t},r}function fy(t,r,a,l){return t.baseState=a,af(t,Wt,typeof l=="function"?l:Ki)}function X1(t,r,a,l,d){if(xc(t))throw Error(s(485));if(t=r.action,t!==null){var f={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){f.listeners.push(b)}};$.T!==null?a(!0):f.isTransition=!1,l(f),a=r.pending,a===null?(f.next=r.pending=f,my(r,f)):(f.next=a.next,r.pending=a.next=f)}}function my(t,r){var a=r.action,l=r.payload,d=t.state;if(r.isTransition){var f=$.T,b={};$.T=b;try{var A=a(d,l),M=$.S;M!==null&&M(b,A),py(t,r,A)}catch(X){uf(t,r,X)}finally{f!==null&&b.types!==null&&(f.types=b.types),$.T=f}}else try{f=a(d,l),py(t,r,f)}catch(X){uf(t,r,X)}}function py(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){gy(t,r,l)},function(l){return uf(t,r,l)}):gy(t,r,a)}function gy(t,r,a){r.status="fulfilled",r.value=a,yy(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,my(t,a)))}function uf(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,yy(r),r=r.next;while(r!==l)}t.action=null}function yy(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function vy(t,r){return r}function _y(t,r){if(xt){var a=nn.formState;if(a!==null){e:{var l=ut;if(xt){if(ln){t:{for(var d=ln,f=Xr;d.nodeType!==8;){if(!f){d=null;break t}if(d=Wr(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){ln=Wr(d.nextSibling),l=d.data==="F!";break e}}As(l)}l=!1}l&&(r=a[0])}}return a=dr(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vy,lastRenderedState:r},a.queue=l,a=Py.bind(null,ut,l),l.dispatch=a,l=lf(!1),f=pf.bind(null,ut,!1,l.queue),l=dr(),d={state:r,dispatch:null,action:t,pending:null},l.queue=d,a=X1.bind(null,ut,d,f,a),d.dispatch=a,l.memoizedState=t,[r,a,!1]}function by(t){var r=An();return Ey(r,Wt,t)}function Ey(t,r,a){if(r=af(t,r,vy)[0],t=Rc(Ki)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Ml(r)}catch(b){throw b===_o?gc:b}else l=r;r=An();var d=r.queue,f=d.dispatch;return a!==r.memoizedState&&(ut.flags|=2048,wo(9,{destroy:void 0},$1.bind(null,d,a),null)),[l,f,t]}function $1(t,r){t.action=r}function Ty(t){var r=An(),a=Wt;if(a!==null)return Ey(r,a,t);An(),r=r.memoizedState,a=An();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function wo(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=ut.updateQueue,r===null&&(r=wc(),ut.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function Sy(){return An().memoizedState}function Cc(t,r,a,l){var d=dr();ut.flags|=t,d.memoizedState=wo(1|r,{destroy:void 0},a,l===void 0?null:l)}function Ic(t,r,a,l){var d=An();l=l===void 0?null:l;var f=d.memoizedState.inst;Wt!==null&&l!==null&&Zh(l,Wt.memoizedState.deps)?d.memoizedState=wo(r,f,a,l):(ut.flags|=t,d.memoizedState=wo(1|r,f,a,l))}function wy(t,r){Cc(8390656,8,t,r)}function cf(t,r){Ic(2048,8,t,r)}function W1(t){ut.flags|=4;var r=ut.updateQueue;if(r===null)r=wc(),ut.updateQueue=r,r.events=[t];else{var a=r.events;a===null?r.events=[t]:a.push(t)}}function Ay(t){var r=An().memoizedState;return W1({ref:r,nextImpl:t}),function(){if((Bt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function Ry(t,r){return Ic(4,2,t,r)}function Cy(t,r){return Ic(4,4,t,r)}function Iy(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function xy(t,r,a){a=a!=null?a.concat([t]):null,Ic(4,4,Iy.bind(null,r,t),a)}function df(){}function Ny(t,r){var a=An();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Zh(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function ky(t,r){var a=An();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Zh(r,l[1]))return l[0];if(l=t(),Da){Ft(!0);try{t()}finally{Ft(!1)}}return a.memoizedState=[l,r],l}function hf(t,r,a){return a===void 0||(Gi&1073741824)!==0&&(Et&261930)===0?t.memoizedState=r:(t.memoizedState=a,t=D0(),ut.lanes|=t,Os|=t,a)}function Dy(t,r,a,l){return Ir(a,r)?a:Eo.current!==null?(t=hf(t,a,l),Ir(t,r)||(Mn=!0),t):(Gi&42)===0||(Gi&1073741824)!==0&&(Et&261930)===0?(Mn=!0,t.memoizedState=a):(t=D0(),ut.lanes|=t,Os|=t,r)}function My(t,r,a,l,d){var f=ue.p;ue.p=f!==0&&8>f?f:8;var b=$.T,A={};$.T=A,pf(t,!1,r,a);try{var M=d(),X=$.S;if(X!==null&&X(A,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var te=K1(M,l);Ol(t,r,te,Or(t))}else Ol(t,r,l,Or(t))}catch(ae){Ol(t,r,{then:function(){},status:"rejected",reason:ae},Or())}finally{ue.p=f,b!==null&&A.types!==null&&(b.types=A.types),$.T=b}}function J1(){}function ff(t,r,a,l){if(t.tag!==5)throw Error(s(476));var d=Oy(t).queue;My(t,d,r,ve,a===null?J1:function(){return Vy(t),a(l)})}function Oy(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:ve},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Vy(t){var r=Oy(t);r.next===null&&(r=t.alternate.memoizedState),Ol(t,r.next.queue,{},Or())}function mf(){return Qn(Wl)}function jy(){return An().memoizedState}function Ly(){return An().memoizedState}function Z1(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=Or();t=Is(a);var l=xs(r,t,a);l!==null&&(Tr(l,r,a),xl(l,r,a)),r={cache:qh()},t.payload=r;return}r=r.return}}function eS(t,r,a){var l=Or();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},xc(t)?Uy(r,a):(a=kh(t,r,a,l),a!==null&&(Tr(a,t,l),zy(a,r,l)))}function Py(t,r,a){var l=Or();Ol(t,r,a,l)}function Ol(t,r,a,l){var d={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(xc(t))Uy(r,d);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var b=r.lastRenderedState,A=f(b,a);if(d.hasEagerState=!0,d.eagerState=A,Ir(A,b))return uc(t,r,d,0),nn===null&&lc(),!1}catch{}finally{}if(a=kh(t,r,d,l),a!==null)return Tr(a,t,l),zy(a,r,l),!0}return!1}function pf(t,r,a,l){if(l={lane:2,revertLane:Qf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},xc(t)){if(r)throw Error(s(479))}else r=kh(t,a,l,2),r!==null&&Tr(r,t,2)}function xc(t){var r=t.alternate;return t===ut||r!==null&&r===ut}function Uy(t,r){To=Tc=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function zy(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Be(t,a)}}var Vl={readContext:Qn,use:Ac,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useLayoutEffect:vn,useInsertionEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useSyncExternalStore:vn,useId:vn,useHostTransitionStatus:vn,useFormState:vn,useActionState:vn,useOptimistic:vn,useMemoCache:vn,useCacheRefresh:vn};Vl.useEffectEvent=vn;var By={readContext:Qn,use:Ac,useCallback:function(t,r){return dr().memoizedState=[t,r===void 0?null:r],t},useContext:Qn,useEffect:wy,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Cc(4194308,4,Iy.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Cc(4194308,4,t,r)},useInsertionEffect:function(t,r){Cc(4,2,t,r)},useMemo:function(t,r){var a=dr();r=r===void 0?null:r;var l=t();if(Da){Ft(!0);try{t()}finally{Ft(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=dr();if(a!==void 0){var d=a(r);if(Da){Ft(!0);try{a(r)}finally{Ft(!1)}}}else d=r;return l.memoizedState=l.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},l.queue=t,t=t.dispatch=eS.bind(null,ut,t),[l.memoizedState,t]},useRef:function(t){var r=dr();return t={current:t},r.memoizedState=t},useState:function(t){t=lf(t);var r=t.queue,a=Py.bind(null,ut,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:df,useDeferredValue:function(t,r){var a=dr();return hf(a,t,r)},useTransition:function(){var t=lf(!1);return t=My.bind(null,ut,t.queue,!0,!1),dr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=ut,d=dr();if(xt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),nn===null)throw Error(s(349));(Et&127)!==0||ly(l,r,a)}d.memoizedState=a;var f={value:a,getSnapshot:r};return d.queue=f,wy(cy.bind(null,l,f,t),[t]),l.flags|=2048,wo(9,{destroy:void 0},uy.bind(null,l,f,a,r),null),a},useId:function(){var t=dr(),r=nn.identifierPrefix;if(xt){var a=Ei,l=bi;a=(l&~(1<<32-pt(l)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Sc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=Q1++,r="_"+r+"r_"+a.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:mf,useFormState:_y,useActionState:_y,useOptimistic:function(t){var r=dr();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=pf.bind(null,ut,!0,a),a.dispatch=r,[t,r]},useMemoCache:sf,useCacheRefresh:function(){return dr().memoizedState=Z1.bind(null,ut)},useEffectEvent:function(t){var r=dr(),a={impl:t};return r.memoizedState=a,function(){if((Bt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},gf={readContext:Qn,use:Ac,useCallback:Ny,useContext:Qn,useEffect:cf,useImperativeHandle:xy,useInsertionEffect:Ry,useLayoutEffect:Cy,useMemo:ky,useReducer:Rc,useRef:Sy,useState:function(){return Rc(Ki)},useDebugValue:df,useDeferredValue:function(t,r){var a=An();return Dy(a,Wt.memoizedState,t,r)},useTransition:function(){var t=Rc(Ki)[0],r=An().memoizedState;return[typeof t=="boolean"?t:Ml(t),r]},useSyncExternalStore:oy,useId:jy,useHostTransitionStatus:mf,useFormState:by,useActionState:by,useOptimistic:function(t,r){var a=An();return fy(a,Wt,t,r)},useMemoCache:sf,useCacheRefresh:Ly};gf.useEffectEvent=Ay;var qy={readContext:Qn,use:Ac,useCallback:Ny,useContext:Qn,useEffect:cf,useImperativeHandle:xy,useInsertionEffect:Ry,useLayoutEffect:Cy,useMemo:ky,useReducer:of,useRef:Sy,useState:function(){return of(Ki)},useDebugValue:df,useDeferredValue:function(t,r){var a=An();return Wt===null?hf(a,t,r):Dy(a,Wt.memoizedState,t,r)},useTransition:function(){var t=of(Ki)[0],r=An().memoizedState;return[typeof t=="boolean"?t:Ml(t),r]},useSyncExternalStore:oy,useId:jy,useHostTransitionStatus:mf,useFormState:Ty,useActionState:Ty,useOptimistic:function(t,r){var a=An();return Wt!==null?fy(a,Wt,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:sf,useCacheRefresh:Ly};qy.useEffectEvent=Ay;function yf(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:T({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var vf={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=Or(),d=Is(l);d.payload=r,a!=null&&(d.callback=a),r=xs(t,d,l),r!==null&&(Tr(r,t,l),xl(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=Or(),d=Is(l);d.tag=1,d.payload=r,a!=null&&(d.callback=a),r=xs(t,d,l),r!==null&&(Tr(r,t,l),xl(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=Or(),l=Is(a);l.tag=2,r!=null&&(l.callback=r),r=xs(t,l,a),r!==null&&(Tr(r,t,a),xl(r,t,a))}};function Fy(t,r,a,l,d,f,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,b):r.prototype&&r.prototype.isPureReactComponent?!El(a,l)||!El(d,f):!0}function Hy(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&vf.enqueueReplaceState(r,r.state,null)}function Ma(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=T({},a));for(var d in t)a[d]===void 0&&(a[d]=t[d])}return a}function Gy(t){oc(t)}function Ky(t){console.error(t)}function Qy(t){oc(t)}function Nc(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Yy(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function _f(t,r,a){return a=Is(a),a.tag=3,a.payload={element:null},a.callback=function(){Nc(t,r)},a}function Xy(t){return t=Is(t),t.tag=3,t}function $y(t,r,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var f=l.value;t.payload=function(){return d(f)},t.callback=function(){Yy(r,a,l)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){Yy(r,a,l),typeof d!="function"&&(Vs===null?Vs=new Set([this]):Vs.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function tS(t,r,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&go(r,a,d,!0),a=Nr.current,a!==null){switch(a.tag){case 31:case 13:return $r===null?qc():a.alternate===null&&_n===0&&(_n=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===yc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Hf(t,l,d)),!1;case 22:return a.flags|=65536,l===yc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Hf(t,l,d)),!1}throw Error(s(435,a.tag))}return Hf(t,l,d),qc(),!1}if(xt)return r=Nr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=d,l!==Lh&&(t=Error(s(422),{cause:l}),wl(Kr(t,a)))):(l!==Lh&&(r=Error(s(423),{cause:l}),wl(Kr(r,a))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,l=Kr(l,a),d=_f(t.stateNode,l,d),Yh(t,d),_n!==4&&(_n=2)),!1;var f=Error(s(520),{cause:l});if(f=Kr(f,a),Fl===null?Fl=[f]:Fl.push(f),_n!==4&&(_n=2),r===null)return!0;l=Kr(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=d&-d,a.lanes|=t,t=_f(a.stateNode,l,t),Yh(a,t),!1;case 1:if(r=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Vs===null||!Vs.has(f))))return a.flags|=65536,d&=-d,a.lanes|=d,d=Xy(d),$y(d,t,a,l),Yh(a,d),!1}a=a.return}while(a!==null);return!1}var bf=Error(s(461)),Mn=!1;function Yn(t,r,a,l){r.child=t===null?ey(r,null,a,l):ka(r,t.child,a,l)}function Wy(t,r,a,l,d){a=a.render;var f=r.ref;if("ref"in l){var b={};for(var A in l)A!=="ref"&&(b[A]=l[A])}else b=l;return Ca(r),l=ef(t,r,a,b,f,d),A=tf(),t!==null&&!Mn?(nf(t,r,d),Qi(t,r,d)):(xt&&A&&Vh(r),r.flags|=1,Yn(t,r,l,d),r.child)}function Jy(t,r,a,l,d){if(t===null){var f=a.type;return typeof f=="function"&&!Dh(f)&&f.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=f,Zy(t,r,f,l,d)):(t=dc(a.type,null,l,r,r.mode,d),t.ref=r.ref,t.return=r,r.child=t)}if(f=t.child,!If(t,d)){var b=f.memoizedProps;if(a=a.compare,a=a!==null?a:El,a(b,l)&&t.ref===r.ref)return Qi(t,r,d)}return r.flags|=1,t=Bi(f,l),t.ref=r.ref,t.return=r,r.child=t}function Zy(t,r,a,l,d){if(t!==null){var f=t.memoizedProps;if(El(f,l)&&t.ref===r.ref)if(Mn=!1,r.pendingProps=l=f,If(t,d))(t.flags&131072)!==0&&(Mn=!0);else return r.lanes=t.lanes,Qi(t,r,d)}return Ef(t,r,a,l,d)}function e0(t,r,a,l){var d=l.children,f=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,t!==null){for(l=r.child=t.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~f}else l=0,r.child=null;return t0(t,r,f,a,l)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&pc(r,f!==null?f.cachePool:null),f!==null?ry(r,f):$h(),iy(r);else return l=r.lanes=536870912,t0(t,r,f!==null?f.baseLanes|a:a,a,l)}else f!==null?(pc(r,f.cachePool),ry(r,f),ks(),r.memoizedState=null):(t!==null&&pc(r,null),$h(),ks());return Yn(t,r,d,a),r.child}function jl(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function t0(t,r,a,l,d){var f=Hh();return f=f===null?null:{parent:kn._currentValue,pool:f},r.memoizedState={baseLanes:a,cachePool:f},t!==null&&pc(r,null),$h(),iy(r),t!==null&&go(t,r,l,!0),r.childLanes=d,null}function kc(t,r){return r=Mc({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function n0(t,r,a){return ka(r,t.child,null,a),t=kc(r,r.pendingProps),t.flags|=2,kr(r),r.memoizedState=null,t}function nS(t,r,a){var l=r.pendingProps,d=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(xt){if(l.mode==="hidden")return t=kc(r,l),r.lanes=536870912,jl(null,t);if(Jh(r),(t=ln)?(t=mv(t,Xr),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ss!==null?{id:bi,overflow:Ei}:null,retryLane:536870912,hydrationErrors:null},a=Ug(t),a.return=r,r.child=a,Kn=r,ln=null)):t=null,t===null)throw As(r);return r.lanes=536870912,null}return kc(r,l)}var f=t.memoizedState;if(f!==null){var b=f.dehydrated;if(Jh(r),d)if(r.flags&256)r.flags&=-257,r=n0(t,r,a);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(s(558));else if(Mn||go(t,r,a,!1),d=(a&t.childLanes)!==0,Mn||d){if(l=nn,l!==null&&(b=Ie(l,a),b!==0&&b!==f.retryLane))throw f.retryLane=b,Sa(t,b),Tr(l,t,b),bf;qc(),r=n0(t,r,a)}else t=f.treeContext,ln=Wr(b.nextSibling),Kn=r,xt=!0,ws=null,Xr=!1,t!==null&&qg(r,t),r=kc(r,l),r.flags|=4096;return r}return t=Bi(t.child,{mode:l.mode,children:l.children}),t.ref=r.ref,r.child=t,t.return=r,t}function Dc(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function Ef(t,r,a,l,d){return Ca(r),a=ef(t,r,a,l,void 0,d),l=tf(),t!==null&&!Mn?(nf(t,r,d),Qi(t,r,d)):(xt&&l&&Vh(r),r.flags|=1,Yn(t,r,a,d),r.child)}function r0(t,r,a,l,d,f){return Ca(r),r.updateQueue=null,a=ay(r,l,a,d),sy(t),l=tf(),t!==null&&!Mn?(nf(t,r,f),Qi(t,r,f)):(xt&&l&&Vh(r),r.flags|=1,Yn(t,r,a,f),r.child)}function i0(t,r,a,l,d){if(Ca(r),r.stateNode===null){var f=ho,b=a.contextType;typeof b=="object"&&b!==null&&(f=Qn(b)),f=new a(l,f),r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=vf,r.stateNode=f,f._reactInternals=r,f=r.stateNode,f.props=l,f.state=r.memoizedState,f.refs={},Kh(r),b=a.contextType,f.context=typeof b=="object"&&b!==null?Qn(b):ho,f.state=r.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(yf(r,a,b,l),f.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(b=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),b!==f.state&&vf.enqueueReplaceState(f,f.state,null),kl(r,l,f,d),Nl(),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){f=r.stateNode;var A=r.memoizedProps,M=Ma(a,A);f.props=M;var X=f.context,te=a.contextType;b=ho,typeof te=="object"&&te!==null&&(b=Qn(te));var ae=a.getDerivedStateFromProps;te=typeof ae=="function"||typeof f.getSnapshotBeforeUpdate=="function",A=r.pendingProps!==A,te||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(A||X!==b)&&Hy(r,f,l,b),Cs=!1;var W=r.memoizedState;f.state=W,kl(r,l,f,d),Nl(),X=r.memoizedState,A||W!==X||Cs?(typeof ae=="function"&&(yf(r,a,ae,l),X=r.memoizedState),(M=Cs||Fy(r,a,M,l,W,X,b))?(te||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(r.flags|=4194308)):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=X),f.props=l,f.state=X,f.context=b,l=M):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{f=r.stateNode,Qh(t,r),b=r.memoizedProps,te=Ma(a,b),f.props=te,ae=r.pendingProps,W=f.context,X=a.contextType,M=ho,typeof X=="object"&&X!==null&&(M=Qn(X)),A=a.getDerivedStateFromProps,(X=typeof A=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b!==ae||W!==M)&&Hy(r,f,l,M),Cs=!1,W=r.memoizedState,f.state=W,kl(r,l,f,d),Nl();var ee=r.memoizedState;b!==ae||W!==ee||Cs||t!==null&&t.dependencies!==null&&fc(t.dependencies)?(typeof A=="function"&&(yf(r,a,A,l),ee=r.memoizedState),(te=Cs||Fy(r,a,te,l,W,ee,M)||t!==null&&t.dependencies!==null&&fc(t.dependencies))?(X||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,ee,M),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,ee,M)),typeof f.componentDidUpdate=="function"&&(r.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof f.componentDidUpdate!="function"||b===t.memoizedProps&&W===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&W===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=ee),f.props=l,f.state=ee,f.context=M,l=te):(typeof f.componentDidUpdate!="function"||b===t.memoizedProps&&W===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&W===t.memoizedState||(r.flags|=1024),l=!1)}return f=l,Dc(t,r),l=(r.flags&128)!==0,f||l?(f=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),r.flags|=1,t!==null&&l?(r.child=ka(r,t.child,null,d),r.child=ka(r,null,a,d)):Yn(t,r,a,d),r.memoizedState=f.state,t=r.child):t=Qi(t,r,d),t}function s0(t,r,a,l){return Aa(),r.flags|=256,Yn(t,r,a,l),r.child}var Tf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sf(t){return{baseLanes:t,cachePool:Yg()}}function wf(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Mr),t}function a0(t,r,a){var l=r.pendingProps,d=!1,f=(r.flags&128)!==0,b;if((b=f)||(b=t!==null&&t.memoizedState===null?!1:(wn.current&2)!==0),b&&(d=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,t===null){if(xt){if(d?Ns(r):ks(),(t=ln)?(t=mv(t,Xr),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ss!==null?{id:bi,overflow:Ei}:null,retryLane:536870912,hydrationErrors:null},a=Ug(t),a.return=r,r.child=a,Kn=r,ln=null)):t=null,t===null)throw As(r);return am(t)?r.lanes=32:r.lanes=536870912,null}var A=l.children;return l=l.fallback,d?(ks(),d=r.mode,A=Mc({mode:"hidden",children:A},d),l=wa(l,d,a,null),A.return=r,l.return=r,A.sibling=l,r.child=A,l=r.child,l.memoizedState=Sf(a),l.childLanes=wf(t,b,a),r.memoizedState=Tf,jl(null,l)):(Ns(r),Af(r,A))}var M=t.memoizedState;if(M!==null&&(A=M.dehydrated,A!==null)){if(f)r.flags&256?(Ns(r),r.flags&=-257,r=Rf(t,r,a)):r.memoizedState!==null?(ks(),r.child=t.child,r.flags|=128,r=null):(ks(),A=l.fallback,d=r.mode,l=Mc({mode:"visible",children:l.children},d),A=wa(A,d,a,null),A.flags|=2,l.return=r,A.return=r,l.sibling=A,r.child=l,ka(r,t.child,null,a),l=r.child,l.memoizedState=Sf(a),l.childLanes=wf(t,b,a),r.memoizedState=Tf,r=jl(null,l));else if(Ns(r),am(A)){if(b=A.nextSibling&&A.nextSibling.dataset,b)var X=b.dgst;b=X,l=Error(s(419)),l.stack="",l.digest=b,wl({value:l,source:null,stack:null}),r=Rf(t,r,a)}else if(Mn||go(t,r,a,!1),b=(a&t.childLanes)!==0,Mn||b){if(b=nn,b!==null&&(l=Ie(b,a),l!==0&&l!==M.retryLane))throw M.retryLane=l,Sa(t,l),Tr(b,t,l),bf;sm(A)||qc(),r=Rf(t,r,a)}else sm(A)?(r.flags|=192,r.child=t.child,r=null):(t=M.treeContext,ln=Wr(A.nextSibling),Kn=r,xt=!0,ws=null,Xr=!1,t!==null&&qg(r,t),r=Af(r,l.children),r.flags|=4096);return r}return d?(ks(),A=l.fallback,d=r.mode,M=t.child,X=M.sibling,l=Bi(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,X!==null?A=Bi(X,A):(A=wa(A,d,a,null),A.flags|=2),A.return=r,l.return=r,l.sibling=A,r.child=l,jl(null,l),l=r.child,A=t.child.memoizedState,A===null?A=Sf(a):(d=A.cachePool,d!==null?(M=kn._currentValue,d=d.parent!==M?{parent:M,pool:M}:d):d=Yg(),A={baseLanes:A.baseLanes|a,cachePool:d}),l.memoizedState=A,l.childLanes=wf(t,b,a),r.memoizedState=Tf,jl(t.child,l)):(Ns(r),a=t.child,t=a.sibling,a=Bi(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(b=r.deletions,b===null?(r.deletions=[t],r.flags|=16):b.push(t)),r.child=a,r.memoizedState=null,a)}function Af(t,r){return r=Mc({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Mc(t,r){return t=xr(22,t,null,r),t.lanes=0,t}function Rf(t,r,a){return ka(r,t.child,null,a),t=Af(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function o0(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),zh(t.return,r,a)}function Cf(t,r,a,l,d,f){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d,treeForkCount:f}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=l,b.tail=a,b.tailMode=d,b.treeForkCount=f)}function l0(t,r,a){var l=r.pendingProps,d=l.revealOrder,f=l.tail;l=l.children;var b=wn.current,A=(b&2)!==0;if(A?(b=b&1|2,r.flags|=128):b&=1,H(wn,b),Yn(t,r,l,a),l=xt?Sl:0,!A&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&o0(t,a,r);else if(t.tag===19)o0(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(d){case"forwards":for(a=r.child,d=null;a!==null;)t=a.alternate,t!==null&&Ec(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),Cf(r,!1,d,a,f,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(t=d.alternate,t!==null&&Ec(t)===null){r.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}Cf(r,!0,a,null,f,l);break;case"together":Cf(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function Qi(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Os|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(go(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=Bi(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Bi(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function If(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&fc(t)))}function rS(t,r,a){switch(r.tag){case 3:We(r,r.stateNode.containerInfo),Rs(r,kn,t.memoizedState.cache),Aa();break;case 27:case 5:qt(r);break;case 4:We(r,r.stateNode.containerInfo);break;case 10:Rs(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Jh(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Ns(r),r.flags|=128,null):(a&r.child.childLanes)!==0?a0(t,r,a):(Ns(r),t=Qi(t,r,a),t!==null?t.sibling:null);Ns(r);break;case 19:var d=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(go(t,r,a,!1),l=(a&r.childLanes)!==0),d){if(l)return l0(t,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),H(wn,wn.current),l)break;return null;case 22:return r.lanes=0,e0(t,r,a,r.pendingProps);case 24:Rs(r,kn,t.memoizedState.cache)}return Qi(t,r,a)}function u0(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Mn=!0;else{if(!If(t,a)&&(r.flags&128)===0)return Mn=!1,rS(t,r,a);Mn=(t.flags&131072)!==0}else Mn=!1,xt&&(r.flags&1048576)!==0&&Bg(r,Sl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(t=xa(r.elementType),r.type=t,typeof t=="function")Dh(t)?(l=Ma(t,l),r.tag=1,r=i0(null,r,t,l,a)):(r.tag=0,r=Ef(null,r,t,l,a));else{if(t!=null){var d=t.$$typeof;if(d===Ae){r.tag=11,r=Wy(null,r,t,l,a);break e}else if(d===N){r.tag=14,r=Jy(null,r,t,l,a);break e}}throw r=Ge(t)||t,Error(s(306,r,""))}}return r;case 0:return Ef(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,d=Ma(l,r.pendingProps),i0(t,r,l,d,a);case 3:e:{if(We(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var f=r.memoizedState;d=f.element,Qh(t,r),kl(r,l,null,a);var b=r.memoizedState;if(l=b.cache,Rs(r,kn,l),l!==f.cache&&Bh(r,[kn],a,!0),Nl(),l=b.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=s0(t,r,l,a);break e}else if(l!==d){d=Kr(Error(s(424)),r),wl(d),r=s0(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ln=Wr(t.firstChild),Kn=r,xt=!0,ws=null,Xr=!0,a=ey(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Aa(),l===d){r=Qi(t,r,a);break e}Yn(t,r,l,a)}r=r.child}return r;case 26:return Dc(t,r),t===null?(a=bv(r.type,null,r.pendingProps,null))?r.memoizedState=a:xt||(a=r.type,t=r.pendingProps,l=Xc(_e.current).createElement(a),l[Le]=r,l[dt]=t,Xn(l,a,t),yn(l),r.stateNode=l):r.memoizedState=bv(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return qt(r),t===null&&xt&&(l=r.stateNode=yv(r.type,r.pendingProps,_e.current),Kn=r,Xr=!0,d=ln,Us(r.type)?(om=d,ln=Wr(l.firstChild)):ln=d),Yn(t,r,r.pendingProps.children,a),Dc(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&xt&&((d=l=ln)&&(l=MS(l,r.type,r.pendingProps,Xr),l!==null?(r.stateNode=l,Kn=r,ln=Wr(l.firstChild),Xr=!1,d=!0):d=!1),d||As(r)),qt(r),d=r.type,f=r.pendingProps,b=t!==null?t.memoizedProps:null,l=f.children,nm(d,f)?l=null:b!==null&&nm(d,b)&&(r.flags|=32),r.memoizedState!==null&&(d=ef(t,r,Y1,null,null,a),Wl._currentValue=d),Dc(t,r),Yn(t,r,l,a),r.child;case 6:return t===null&&xt&&((t=a=ln)&&(a=OS(a,r.pendingProps,Xr),a!==null?(r.stateNode=a,Kn=r,ln=null,t=!0):t=!1),t||As(r)),null;case 13:return a0(t,r,a);case 4:return We(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=ka(r,null,l,a):Yn(t,r,l,a),r.child;case 11:return Wy(t,r,r.type,r.pendingProps,a);case 7:return Yn(t,r,r.pendingProps,a),r.child;case 8:return Yn(t,r,r.pendingProps.children,a),r.child;case 12:return Yn(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Rs(r,r.type,l.value),Yn(t,r,l.children,a),r.child;case 9:return d=r.type._context,l=r.pendingProps.children,Ca(r),d=Qn(d),l=l(d),r.flags|=1,Yn(t,r,l,a),r.child;case 14:return Jy(t,r,r.type,r.pendingProps,a);case 15:return Zy(t,r,r.type,r.pendingProps,a);case 19:return l0(t,r,a);case 31:return nS(t,r,a);case 22:return e0(t,r,a,r.pendingProps);case 24:return Ca(r),l=Qn(kn),t===null?(d=Hh(),d===null&&(d=nn,f=qh(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=a),d=f),r.memoizedState={parent:l,cache:d},Kh(r),Rs(r,kn,d)):((t.lanes&a)!==0&&(Qh(t,r),kl(r,null,null,a),Nl()),d=t.memoizedState,f=r.memoizedState,d.parent!==l?(d={parent:l,cache:l},r.memoizedState=d,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=d),Rs(r,kn,l)):(l=f.cache,Rs(r,kn,l),l!==d.cache&&Bh(r,[kn],a,!0))),Yn(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Yi(t){t.flags|=4}function xf(t,r,a,l,d){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(d&335544128)===d)if(t.stateNode.complete)t.flags|=8192;else if(j0())t.flags|=8192;else throw Na=yc,Gh}else t.flags&=-16777217}function c0(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Av(r))if(j0())t.flags|=8192;else throw Na=yc,Gh}function Oc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?G():536870912,t.lanes|=r,Io|=r)}function Ll(t,r){if(!xt)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function un(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function iS(t,r,a){var l=r.pendingProps;switch(jh(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(r),null;case 1:return un(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Hi(kn),Je(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(po(r)?Yi(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Ph())),un(r),null;case 26:var d=r.type,f=r.memoizedState;return t===null?(Yi(r),f!==null?(un(r),c0(r,f)):(un(r),xf(r,d,null,l,a))):f?f!==t.memoizedState?(Yi(r),un(r),c0(r,f)):(un(r),r.flags&=-16777217):(t=t.memoizedProps,t!==l&&Yi(r),un(r),xf(r,d,t,l,a)),null;case 27:if(Gt(r),a=_e.current,d=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Yi(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return un(r),null}t=J.current,po(r)?Fg(r):(t=yv(d,l,a),r.stateNode=t,Yi(r))}return un(r),null;case 5:if(Gt(r),d=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Yi(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return un(r),null}if(f=J.current,po(r))Fg(r);else{var b=Xc(_e.current);switch(f){case 1:f=b.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:f=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":f=b.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":f=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":f=b.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof l.is=="string"?b.createElement("select",{is:l.is}):b.createElement("select"),l.multiple?f.multiple=!0:l.size&&(f.size=l.size);break;default:f=typeof l.is=="string"?b.createElement(d,{is:l.is}):b.createElement(d)}}f[Le]=r,f[dt]=l;e:for(b=r.child;b!==null;){if(b.tag===5||b.tag===6)f.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===r)break e;for(;b.sibling===null;){if(b.return===null||b.return===r)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}r.stateNode=f;e:switch(Xn(f,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Yi(r)}}return un(r),xf(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,a),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&Yi(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=_e.current,po(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,d=Kn,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}t[Le]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||av(t.nodeValue,a)),t||As(r,!0)}else t=Xc(t).createTextNode(l),t[Le]=r,r.stateNode=t}return un(r),null;case 31:if(a=r.memoizedState,t===null||t.memoizedState!==null){if(l=po(r),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[Le]=r}else Aa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;un(r),t=!1}else a=Ph(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return r.flags&256?(kr(r),r):(kr(r),null);if((r.flags&128)!==0)throw Error(s(558))}return un(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=po(r),l!==null&&l.dehydrated!==null){if(t===null){if(!d)throw Error(s(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[Le]=r}else Aa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;un(r),d=!1}else d=Ph(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return r.flags&256?(kr(r),r):(kr(r),null)}return kr(r),(r.flags&128)!==0?(r.lanes=a,r):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=r.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==d&&(l.flags|=2048)),a!==t&&a&&(r.child.flags|=8192),Oc(r,r.updateQueue),un(r),null);case 4:return Je(),t===null&&Wf(r.stateNode.containerInfo),un(r),null;case 10:return Hi(r.type),un(r),null;case 19:if(Q(wn),l=r.memoizedState,l===null)return un(r),null;if(d=(r.flags&128)!==0,f=l.rendering,f===null)if(d)Ll(l,!1);else{if(_n!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(f=Ec(t),f!==null){for(r.flags|=128,Ll(l,!1),t=f.updateQueue,r.updateQueue=t,Oc(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Pg(a,t),a=a.sibling;return H(wn,wn.current&1|2),xt&&qi(r,l.treeForkCount),r.child}t=t.sibling}l.tail!==null&&nt()>Uc&&(r.flags|=128,d=!0,Ll(l,!1),r.lanes=4194304)}else{if(!d)if(t=Ec(f),t!==null){if(r.flags|=128,d=!0,t=t.updateQueue,r.updateQueue=t,Oc(r,t),Ll(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!xt)return un(r),null}else 2*nt()-l.renderingStartTime>Uc&&a!==536870912&&(r.flags|=128,d=!0,Ll(l,!1),r.lanes=4194304);l.isBackwards?(f.sibling=r.child,r.child=f):(t=l.last,t!==null?t.sibling=f:r.child=f,l.last=f)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=nt(),t.sibling=null,a=wn.current,H(wn,d?a&1|2:a&1),xt&&qi(r,l.treeForkCount),t):(un(r),null);case 22:case 23:return kr(r),Wh(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(un(r),r.subtreeFlags&6&&(r.flags|=8192)):un(r),a=r.updateQueue,a!==null&&Oc(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&Q(Ia),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Hi(kn),un(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function sS(t,r){switch(jh(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Hi(kn),Je(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Gt(r),null;case 31:if(r.memoizedState!==null){if(kr(r),r.alternate===null)throw Error(s(340));Aa()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(kr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Aa()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Q(wn),null;case 4:return Je(),null;case 10:return Hi(r.type),null;case 22:case 23:return kr(r),Wh(),t!==null&&Q(Ia),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Hi(kn),null;case 25:return null;default:return null}}function d0(t,r){switch(jh(r),r.tag){case 3:Hi(kn),Je();break;case 26:case 27:case 5:Gt(r);break;case 4:Je();break;case 31:r.memoizedState!==null&&kr(r);break;case 13:kr(r);break;case 19:Q(wn);break;case 10:Hi(r.type);break;case 22:case 23:kr(r),Wh(),t!==null&&Q(Ia);break;case 24:Hi(kn)}}function Pl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&t)===t){l=void 0;var f=a.create,b=a.inst;l=f(),b.destroy=l}a=a.next}while(a!==d)}}catch(A){Yt(r,r.return,A)}}function Ds(t,r,a){try{var l=r.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var f=d.next;l=f;do{if((l.tag&t)===t){var b=l.inst,A=b.destroy;if(A!==void 0){b.destroy=void 0,d=r;var M=a,X=A;try{X()}catch(te){Yt(d,M,te)}}}l=l.next}while(l!==f)}}catch(te){Yt(r,r.return,te)}}function h0(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{ny(r,a)}catch(l){Yt(t,t.return,l)}}}function f0(t,r,a){a.props=Ma(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Yt(t,r,l)}}function Ul(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(d){Yt(t,r,d)}}function Ti(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){Yt(t,r,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){Yt(t,r,d)}else a.current=null}function m0(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){Yt(t,t.return,d)}}function Nf(t,r,a){try{var l=t.stateNode;CS(l,t.type,a,r),l[dt]=r}catch(d){Yt(t,t.return,d)}}function p0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Us(t.type)||t.tag===4}function kf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||p0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Us(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Df(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=ti));else if(l!==4&&(l===27&&Us(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(Df(t,r,a),t=t.sibling;t!==null;)Df(t,r,a),t=t.sibling}function Vc(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&Us(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Vc(t,r,a),t=t.sibling;t!==null;)Vc(t,r,a),t=t.sibling}function g0(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,d=r.attributes;d.length;)r.removeAttributeNode(d[0]);Xn(r,l,a),r[Le]=t,r[dt]=a}catch(f){Yt(t,t.return,f)}}var Xi=!1,On=!1,Mf=!1,y0=typeof WeakSet=="function"?WeakSet:Set,Fn=null;function aS(t,r){if(t=t.containerInfo,em=nd,t=xg(t),Ah(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var b=0,A=-1,M=-1,X=0,te=0,ae=t,W=null;t:for(;;){for(var ee;ae!==a||d!==0&&ae.nodeType!==3||(A=b+d),ae!==f||l!==0&&ae.nodeType!==3||(M=b+l),ae.nodeType===3&&(b+=ae.nodeValue.length),(ee=ae.firstChild)!==null;)W=ae,ae=ee;for(;;){if(ae===t)break t;if(W===a&&++X===d&&(A=b),W===f&&++te===l&&(M=b),(ee=ae.nextSibling)!==null)break;ae=W,W=ae.parentNode}ae=ee}a=A===-1||M===-1?null:{start:A,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(tm={focusedElem:t,selectionRange:a},nd=!1,Fn=r;Fn!==null;)if(r=Fn,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Fn=t;else for(;Fn!==null;){switch(r=Fn,f=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)d=t[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=r,d=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var Pe=Ma(a.type,d);t=l.getSnapshotBeforeUpdate(Pe,f),l.__reactInternalSnapshotBeforeUpdate=t}catch($e){Yt(a,a.return,$e)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)im(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":im(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Fn=t;break}Fn=r.return}}function v0(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Wi(t,a),l&4&&Pl(5,a);break;case 1:if(Wi(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(b){Yt(a,a.return,b)}else{var d=Ma(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(d,r,t.__reactInternalSnapshotBeforeUpdate)}catch(b){Yt(a,a.return,b)}}l&64&&h0(a),l&512&&Ul(a,a.return);break;case 3:if(Wi(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{ny(t,r)}catch(b){Yt(a,a.return,b)}}break;case 27:r===null&&l&4&&g0(a);case 26:case 5:Wi(t,a),r===null&&l&4&&m0(a),l&512&&Ul(a,a.return);break;case 12:Wi(t,a);break;case 31:Wi(t,a),l&4&&E0(t,a);break;case 13:Wi(t,a),l&4&&T0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=pS.bind(null,a),VS(t,a))));break;case 22:if(l=a.memoizedState!==null||Xi,!l){r=r!==null&&r.memoizedState!==null||On,d=Xi;var f=On;Xi=l,(On=r)&&!f?Ji(t,a,(a.subtreeFlags&8772)!==0):Wi(t,a),Xi=d,On=f}break;case 30:break;default:Wi(t,a)}}function _0(t){var r=t.alternate;r!==null&&(t.alternate=null,_0(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&ms(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var fn=null,vr=!1;function $i(t,r,a){for(a=a.child;a!==null;)b0(t,r,a),a=a.sibling}function b0(t,r,a){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(gn,a)}catch{}switch(a.tag){case 26:On||Ti(a,r),$i(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:On||Ti(a,r);var l=fn,d=vr;Us(a.type)&&(fn=a.stateNode,vr=!1),$i(t,r,a),Yl(a.stateNode),fn=l,vr=d;break;case 5:On||Ti(a,r);case 6:if(l=fn,d=vr,fn=null,$i(t,r,a),fn=l,vr=d,fn!==null)if(vr)try{(fn.nodeType===9?fn.body:fn.nodeName==="HTML"?fn.ownerDocument.body:fn).removeChild(a.stateNode)}catch(f){Yt(a,r,f)}else try{fn.removeChild(a.stateNode)}catch(f){Yt(a,r,f)}break;case 18:fn!==null&&(vr?(t=fn,hv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),jo(t)):hv(fn,a.stateNode));break;case 4:l=fn,d=vr,fn=a.stateNode.containerInfo,vr=!0,$i(t,r,a),fn=l,vr=d;break;case 0:case 11:case 14:case 15:Ds(2,a,r),On||Ds(4,a,r),$i(t,r,a);break;case 1:On||(Ti(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&f0(a,r,l)),$i(t,r,a);break;case 21:$i(t,r,a);break;case 22:On=(l=On)||a.memoizedState!==null,$i(t,r,a),On=l;break;default:$i(t,r,a)}}function E0(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{jo(t)}catch(a){Yt(r,r.return,a)}}}function T0(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{jo(t)}catch(a){Yt(r,r.return,a)}}function oS(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new y0),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new y0),r;default:throw Error(s(435,t.tag))}}function jc(t,r){var a=oS(t);r.forEach(function(l){if(!a.has(l)){a.add(l);var d=gS.bind(null,t,l);l.then(d,d)}})}function _r(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],f=t,b=r,A=b;e:for(;A!==null;){switch(A.tag){case 27:if(Us(A.type)){fn=A.stateNode,vr=!1;break e}break;case 5:fn=A.stateNode,vr=!1;break e;case 3:case 4:fn=A.stateNode.containerInfo,vr=!0;break e}A=A.return}if(fn===null)throw Error(s(160));b0(f,b,d),fn=null,vr=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)S0(r,t),r=r.sibling}var oi=null;function S0(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:_r(r,t),br(t),l&4&&(Ds(3,t,t.return),Pl(3,t),Ds(5,t,t.return));break;case 1:_r(r,t),br(t),l&512&&(On||a===null||Ti(a,a.return)),l&64&&Xi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=oi;if(_r(r,t),br(t),l&512&&(On||a===null||Ti(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":f=d.getElementsByTagName("title")[0],(!f||f[Pr]||f[Le]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(l),d.head.insertBefore(f,d.querySelector("head > title"))),Xn(f,l,a),f[Le]=t,yn(f),l=f;break e;case"link":var b=Sv("link","href",d).get(l+(a.href||""));if(b){for(var A=0;A<b.length;A++)if(f=b[A],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(A,1);break t}}f=d.createElement(l),Xn(f,l,a),d.head.appendChild(f);break;case"meta":if(b=Sv("meta","content",d).get(l+(a.content||""))){for(A=0;A<b.length;A++)if(f=b[A],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(A,1);break t}}f=d.createElement(l),Xn(f,l,a),d.head.appendChild(f);break;default:throw Error(s(468,l))}f[Le]=t,yn(f),l=f}t.stateNode=l}else wv(d,t.type,t.stateNode);else t.stateNode=Tv(d,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?wv(d,t.type,t.stateNode):Tv(d,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Nf(t,t.memoizedProps,a.memoizedProps)}break;case 27:_r(r,t),br(t),l&512&&(On||a===null||Ti(a,a.return)),a!==null&&l&4&&Nf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(_r(r,t),br(t),l&512&&(On||a===null||Ti(a,a.return)),t.flags&32){d=t.stateNode;try{yr(d,"")}catch(Pe){Yt(t,t.return,Pe)}}l&4&&t.stateNode!=null&&(d=t.memoizedProps,Nf(t,d,a!==null?a.memoizedProps:d)),l&1024&&(Mf=!0);break;case 6:if(_r(r,t),br(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Pe){Yt(t,t.return,Pe)}}break;case 3:if(Jc=null,d=oi,oi=$c(r.containerInfo),_r(r,t),oi=d,br(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{jo(r.containerInfo)}catch(Pe){Yt(t,t.return,Pe)}Mf&&(Mf=!1,w0(t));break;case 4:l=oi,oi=$c(t.stateNode.containerInfo),_r(r,t),br(t),oi=l;break;case 12:_r(r,t),br(t);break;case 31:_r(r,t),br(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,jc(t,l)));break;case 13:_r(r,t),br(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Pc=nt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,jc(t,l)));break;case 22:d=t.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,X=Xi,te=On;if(Xi=X||d,On=te||M,_r(r,t),On=te,Xi=X,br(t),l&8192)e:for(r=t.stateNode,r._visibility=d?r._visibility&-2:r._visibility|1,d&&(a===null||M||Xi||On||Oa(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){M=a=r;try{if(f=M.stateNode,d)b=f.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{A=M.stateNode;var ae=M.memoizedProps.style,W=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;A.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(Pe){Yt(M,M.return,Pe)}}}else if(r.tag===6){if(a===null){M=r;try{M.stateNode.nodeValue=d?"":M.memoizedProps}catch(Pe){Yt(M,M.return,Pe)}}}else if(r.tag===18){if(a===null){M=r;try{var ee=M.stateNode;d?fv(ee,!0):fv(M.stateNode,!1)}catch(Pe){Yt(M,M.return,Pe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,jc(t,a))));break;case 19:_r(r,t),br(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,jc(t,l)));break;case 30:break;case 21:break;default:_r(r,t),br(t)}}function br(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(p0(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var d=a.stateNode,f=kf(t);Vc(t,f,d);break;case 5:var b=a.stateNode;a.flags&32&&(yr(b,""),a.flags&=-33);var A=kf(t);Vc(t,A,b);break;case 3:case 4:var M=a.stateNode.containerInfo,X=kf(t);Df(t,X,M);break;default:throw Error(s(161))}}catch(te){Yt(t,t.return,te)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function w0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;w0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Wi(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)v0(t,r.alternate,r),r=r.sibling}function Oa(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Ds(4,r,r.return),Oa(r);break;case 1:Ti(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&f0(r,r.return,a),Oa(r);break;case 27:Yl(r.stateNode);case 26:case 5:Ti(r,r.return),Oa(r);break;case 22:r.memoizedState===null&&Oa(r);break;case 30:Oa(r);break;default:Oa(r)}t=t.sibling}}function Ji(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,d=t,f=r,b=f.flags;switch(f.tag){case 0:case 11:case 15:Ji(d,f,a),Pl(4,f);break;case 1:if(Ji(d,f,a),l=f,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(X){Yt(l,l.return,X)}if(l=f,d=l.updateQueue,d!==null){var A=l.stateNode;try{var M=d.shared.hiddenCallbacks;if(M!==null)for(d.shared.hiddenCallbacks=null,d=0;d<M.length;d++)ty(M[d],A)}catch(X){Yt(l,l.return,X)}}a&&b&64&&h0(f),Ul(f,f.return);break;case 27:g0(f);case 26:case 5:Ji(d,f,a),a&&l===null&&b&4&&m0(f),Ul(f,f.return);break;case 12:Ji(d,f,a);break;case 31:Ji(d,f,a),a&&b&4&&E0(d,f);break;case 13:Ji(d,f,a),a&&b&4&&T0(d,f);break;case 22:f.memoizedState===null&&Ji(d,f,a),Ul(f,f.return);break;case 30:break;default:Ji(d,f,a)}r=r.sibling}}function Of(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Al(a))}function Vf(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Al(t))}function li(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)A0(t,r,a,l),r=r.sibling}function A0(t,r,a,l){var d=r.flags;switch(r.tag){case 0:case 11:case 15:li(t,r,a,l),d&2048&&Pl(9,r);break;case 1:li(t,r,a,l);break;case 3:li(t,r,a,l),d&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Al(t)));break;case 12:if(d&2048){li(t,r,a,l),t=r.stateNode;try{var f=r.memoizedProps,b=f.id,A=f.onPostCommit;typeof A=="function"&&A(b,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(M){Yt(r,r.return,M)}}else li(t,r,a,l);break;case 31:li(t,r,a,l);break;case 13:li(t,r,a,l);break;case 23:break;case 22:f=r.stateNode,b=r.alternate,r.memoizedState!==null?f._visibility&2?li(t,r,a,l):zl(t,r):f._visibility&2?li(t,r,a,l):(f._visibility|=2,Ao(t,r,a,l,(r.subtreeFlags&10256)!==0||!1)),d&2048&&Of(b,r);break;case 24:li(t,r,a,l),d&2048&&Vf(r.alternate,r);break;default:li(t,r,a,l)}}function Ao(t,r,a,l,d){for(d=d&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var f=t,b=r,A=a,M=l,X=b.flags;switch(b.tag){case 0:case 11:case 15:Ao(f,b,A,M,d),Pl(8,b);break;case 23:break;case 22:var te=b.stateNode;b.memoizedState!==null?te._visibility&2?Ao(f,b,A,M,d):zl(f,b):(te._visibility|=2,Ao(f,b,A,M,d)),d&&X&2048&&Of(b.alternate,b);break;case 24:Ao(f,b,A,M,d),d&&X&2048&&Vf(b.alternate,b);break;default:Ao(f,b,A,M,d)}r=r.sibling}}function zl(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,d=l.flags;switch(l.tag){case 22:zl(a,l),d&2048&&Of(l.alternate,l);break;case 24:zl(a,l),d&2048&&Vf(l.alternate,l);break;default:zl(a,l)}r=r.sibling}}var Bl=8192;function Ro(t,r,a){if(t.subtreeFlags&Bl)for(t=t.child;t!==null;)R0(t,r,a),t=t.sibling}function R0(t,r,a){switch(t.tag){case 26:Ro(t,r,a),t.flags&Bl&&t.memoizedState!==null&&QS(a,oi,t.memoizedState,t.memoizedProps);break;case 5:Ro(t,r,a);break;case 3:case 4:var l=oi;oi=$c(t.stateNode.containerInfo),Ro(t,r,a),oi=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Bl,Bl=16777216,Ro(t,r,a),Bl=l):Ro(t,r,a));break;default:Ro(t,r,a)}}function C0(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function ql(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Fn=l,x0(l,t)}C0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)I0(t),t=t.sibling}function I0(t){switch(t.tag){case 0:case 11:case 15:ql(t),t.flags&2048&&Ds(9,t,t.return);break;case 3:ql(t);break;case 12:ql(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Lc(t)):ql(t);break;default:ql(t)}}function Lc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Fn=l,x0(l,t)}C0(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Ds(8,r,r.return),Lc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Lc(r));break;default:Lc(r)}t=t.sibling}}function x0(t,r){for(;Fn!==null;){var a=Fn;switch(a.tag){case 0:case 11:case 15:Ds(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Al(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Fn=l;else e:for(a=t;Fn!==null;){l=Fn;var d=l.sibling,f=l.return;if(_0(l),l===a){Fn=null;break e}if(d!==null){d.return=f,Fn=d;break e}Fn=f}}}var lS={getCacheForType:function(t){var r=Qn(kn),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a},cacheSignal:function(){return Qn(kn).controller.signal}},uS=typeof WeakMap=="function"?WeakMap:Map,Bt=0,nn=null,yt=null,Et=0,Qt=0,Dr=null,Ms=!1,Co=!1,jf=!1,Zi=0,_n=0,Os=0,Va=0,Lf=0,Mr=0,Io=0,Fl=null,Er=null,Pf=!1,Pc=0,N0=0,Uc=1/0,zc=null,Vs=null,Un=0,js=null,xo=null,es=0,Uf=0,zf=null,k0=null,Hl=0,Bf=null;function Or(){return(Bt&2)!==0&&Et!==0?Et&-Et:$.T!==null?Qf():ht()}function D0(){if(Mr===0)if((Et&536870912)===0||xt){var t=In;In<<=1,(In&3932160)===0&&(In=262144),Mr=t}else Mr=536870912;return t=Nr.current,t!==null&&(t.flags|=32),Mr}function Tr(t,r,a){(t===nn&&(Qt===2||Qt===9)||t.cancelPendingCommit!==null)&&(No(t,0),Ls(t,Et,Mr,!1)),ce(t,a),((Bt&2)===0||t!==nn)&&(t===nn&&((Bt&2)===0&&(Va|=a),_n===4&&Ls(t,Et,Mr,!1)),Si(t))}function M0(t,r,a){if((Bt&6)!==0)throw Error(s(327));var l=!a&&(r&127)===0&&(r&t.expiredLanes)===0||Ue(t,r),d=l?hS(t,r):Ff(t,r,!0),f=l;do{if(d===0){Co&&!l&&Ls(t,r,0,!1);break}else{if(a=t.current.alternate,f&&!cS(a)){d=Ff(t,r,!1),f=!1;continue}if(d===2){if(f=r,t.errorRecoveryDisabledLanes&f)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var A=t;d=Fl;var M=A.current.memoizedState.isDehydrated;if(M&&(No(A,b).flags|=256),b=Ff(A,b,!1),b!==2){if(jf&&!M){A.errorRecoveryDisabledLanes|=f,Va|=f,d=4;break e}f=Er,Er=d,f!==null&&(Er===null?Er=f:Er.push.apply(Er,f))}d=b}if(f=!1,d!==2)continue}}if(d===1){No(t,0),Ls(t,r,0,!0);break}e:{switch(l=t,f=d,f){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Ls(l,r,Mr,!Ms);break e;case 2:Er=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(d=Pc+300-nt(),10<d)){if(Ls(l,r,Mr,!Ms),Bn(l,0,!0)!==0)break e;es=r,l.timeoutHandle=cv(O0.bind(null,l,a,Er,zc,Pf,r,Mr,Va,Io,Ms,f,"Throttled",-0,0),d);break e}O0(l,a,Er,zc,Pf,r,Mr,Va,Io,Ms,f,null,-0,0)}}break}while(!0);Si(t)}function O0(t,r,a,l,d,f,b,A,M,X,te,ae,W,ee){if(t.timeoutHandle=-1,ae=r.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ti},R0(r,f,ae);var Pe=(f&62914560)===f?Pc-nt():(f&4194048)===f?N0-nt():0;if(Pe=YS(ae,Pe),Pe!==null){es=f,t.cancelPendingCommit=Pe(q0.bind(null,t,r,f,a,l,d,b,A,M,te,ae,null,W,ee)),Ls(t,f,b,!X);return}}q0(t,r,f,a,l,d,b,A,M)}function cS(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],f=d.getSnapshot;d=d.value;try{if(!Ir(f(),d))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ls(t,r,a,l){r&=~Lf,r&=~Va,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var d=r;0<d;){var f=31-pt(d),b=1<<f;l[f]=-1,d&=~b}a!==0&&we(t,a,r)}function Bc(){return(Bt&6)===0?(Gl(0),!1):!0}function qf(){if(yt!==null){if(Qt===0)var t=yt.return;else t=yt,Fi=Ra=null,rf(t),bo=null,Cl=0,t=yt;for(;t!==null;)d0(t.alternate,t),t=t.return;yt=null}}function No(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,NS(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),es=0,qf(),nn=t,yt=a=Bi(t.current,null),Et=r,Qt=0,Dr=null,Ms=!1,Co=Ue(t,r),jf=!1,Io=Mr=Lf=Va=Os=_n=0,Er=Fl=null,Pf=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var d=31-pt(l),f=1<<d;r|=t[d],l&=~f}return Zi=r,lc(),a}function V0(t,r){ut=null,$.H=Vl,r===_o||r===gc?(r=Wg(),Qt=3):r===Gh?(r=Wg(),Qt=4):Qt=r===bf?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Dr=r,yt===null&&(_n=1,Nc(t,Kr(r,t.current)))}function j0(){var t=Nr.current;return t===null?!0:(Et&4194048)===Et?$r===null:(Et&62914560)===Et||(Et&536870912)!==0?t===$r:!1}function L0(){var t=$.H;return $.H=Vl,t===null?Vl:t}function P0(){var t=$.A;return $.A=lS,t}function qc(){_n=4,Ms||(Et&4194048)!==Et&&Nr.current!==null||(Co=!0),(Os&134217727)===0&&(Va&134217727)===0||nn===null||Ls(nn,Et,Mr,!1)}function Ff(t,r,a){var l=Bt;Bt|=2;var d=L0(),f=P0();(nn!==t||Et!==r)&&(zc=null,No(t,r)),r=!1;var b=_n;e:do try{if(Qt!==0&&yt!==null){var A=yt,M=Dr;switch(Qt){case 8:qf(),b=6;break e;case 3:case 2:case 9:case 6:Nr.current===null&&(r=!0);var X=Qt;if(Qt=0,Dr=null,ko(t,A,M,X),a&&Co){b=0;break e}break;default:X=Qt,Qt=0,Dr=null,ko(t,A,M,X)}}dS(),b=_n;break}catch(te){V0(t,te)}while(!0);return r&&t.shellSuspendCounter++,Fi=Ra=null,Bt=l,$.H=d,$.A=f,yt===null&&(nn=null,Et=0,lc()),b}function dS(){for(;yt!==null;)U0(yt)}function hS(t,r){var a=Bt;Bt|=2;var l=L0(),d=P0();nn!==t||Et!==r?(zc=null,Uc=nt()+500,No(t,r)):Co=Ue(t,r);e:do try{if(Qt!==0&&yt!==null){r=yt;var f=Dr;t:switch(Qt){case 1:Qt=0,Dr=null,ko(t,r,f,1);break;case 2:case 9:if(Xg(f)){Qt=0,Dr=null,z0(r);break}r=function(){Qt!==2&&Qt!==9||nn!==t||(Qt=7),Si(t)},f.then(r,r);break e;case 3:Qt=7;break e;case 4:Qt=5;break e;case 7:Xg(f)?(Qt=0,Dr=null,z0(r)):(Qt=0,Dr=null,ko(t,r,f,7));break;case 5:var b=null;switch(yt.tag){case 26:b=yt.memoizedState;case 5:case 27:var A=yt;if(b?Av(b):A.stateNode.complete){Qt=0,Dr=null;var M=A.sibling;if(M!==null)yt=M;else{var X=A.return;X!==null?(yt=X,Fc(X)):yt=null}break t}}Qt=0,Dr=null,ko(t,r,f,5);break;case 6:Qt=0,Dr=null,ko(t,r,f,6);break;case 8:qf(),_n=6;break e;default:throw Error(s(462))}}fS();break}catch(te){V0(t,te)}while(!0);return Fi=Ra=null,$.H=l,$.A=d,Bt=a,yt!==null?0:(nn=null,Et=0,lc(),_n)}function fS(){for(;yt!==null&&!Me();)U0(yt)}function U0(t){var r=u0(t.alternate,t,Zi);t.memoizedProps=t.pendingProps,r===null?Fc(t):yt=r}function z0(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=r0(a,r,r.pendingProps,r.type,void 0,Et);break;case 11:r=r0(a,r,r.pendingProps,r.type.render,r.ref,Et);break;case 5:rf(r);default:d0(a,r),r=yt=Pg(r,Zi),r=u0(a,r,Zi)}t.memoizedProps=t.pendingProps,r===null?Fc(t):yt=r}function ko(t,r,a,l){Fi=Ra=null,rf(r),bo=null,Cl=0;var d=r.return;try{if(tS(t,d,r,a,Et)){_n=1,Nc(t,Kr(a,t.current)),yt=null;return}}catch(f){if(d!==null)throw yt=d,f;_n=1,Nc(t,Kr(a,t.current)),yt=null;return}r.flags&32768?(xt||l===1?t=!0:Co||(Et&536870912)!==0?t=!1:(Ms=t=!0,(l===2||l===9||l===3||l===6)&&(l=Nr.current,l!==null&&l.tag===13&&(l.flags|=16384))),B0(r,t)):Fc(r)}function Fc(t){var r=t;do{if((r.flags&32768)!==0){B0(r,Ms);return}t=r.return;var a=iS(r.alternate,r,Zi);if(a!==null){yt=a;return}if(r=r.sibling,r!==null){yt=r;return}yt=r=t}while(r!==null);_n===0&&(_n=5)}function B0(t,r){do{var a=sS(t.alternate,t);if(a!==null){a.flags&=32767,yt=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){yt=t;return}yt=t=a}while(t!==null);_n=6,yt=null}function q0(t,r,a,l,d,f,b,A,M){t.cancelPendingCommit=null;do Hc();while(Un!==0);if((Bt&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(f=r.lanes|r.childLanes,f|=Nh,ge(t,a,f,b,A,M),t===nn&&(yt=nn=null,Et=0),xo=r,js=t,es=a,Uf=f,zf=d,k0=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,yS(mr,function(){return Q0(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=$.T,$.T=null,d=ue.p,ue.p=2,b=Bt,Bt|=4;try{aS(t,r,a)}finally{Bt=b,ue.p=d,$.T=l}}Un=1,F0(),H0(),G0()}}function F0(){if(Un===1){Un=0;var t=js,r=xo,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=$.T,$.T=null;var l=ue.p;ue.p=2;var d=Bt;Bt|=4;try{S0(r,t);var f=tm,b=xg(t.containerInfo),A=f.focusedElem,M=f.selectionRange;if(b!==A&&A&&A.ownerDocument&&Ig(A.ownerDocument.documentElement,A)){if(M!==null&&Ah(A)){var X=M.start,te=M.end;if(te===void 0&&(te=X),"selectionStart"in A)A.selectionStart=X,A.selectionEnd=Math.min(te,A.value.length);else{var ae=A.ownerDocument||document,W=ae&&ae.defaultView||window;if(W.getSelection){var ee=W.getSelection(),Pe=A.textContent.length,$e=Math.min(M.start,Pe),Zt=M.end===void 0?$e:Math.min(M.end,Pe);!ee.extend&&$e>Zt&&(b=Zt,Zt=$e,$e=b);var z=Cg(A,$e),j=Cg(A,Zt);if(z&&j&&(ee.rangeCount!==1||ee.anchorNode!==z.node||ee.anchorOffset!==z.offset||ee.focusNode!==j.node||ee.focusOffset!==j.offset)){var Y=ae.createRange();Y.setStart(z.node,z.offset),ee.removeAllRanges(),$e>Zt?(ee.addRange(Y),ee.extend(j.node,j.offset)):(Y.setEnd(j.node,j.offset),ee.addRange(Y))}}}}for(ae=[],ee=A;ee=ee.parentNode;)ee.nodeType===1&&ae.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ae.length;A++){var se=ae[A];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}nd=!!em,tm=em=null}finally{Bt=d,ue.p=l,$.T=a}}t.current=r,Un=2}}function H0(){if(Un===2){Un=0;var t=js,r=xo,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=$.T,$.T=null;var l=ue.p;ue.p=2;var d=Bt;Bt|=4;try{v0(t,r.alternate,r)}finally{Bt=d,ue.p=l,$.T=a}}Un=3}}function G0(){if(Un===4||Un===3){Un=0,Xe();var t=js,r=xo,a=es,l=k0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Un=5:(Un=0,xo=js=null,K0(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(Vs=null),Ze(a),r=r.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(gn,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=$.T,d=ue.p,ue.p=2,$.T=null;try{for(var f=t.onRecoverableError,b=0;b<l.length;b++){var A=l[b];f(A.value,{componentStack:A.stack})}}finally{$.T=r,ue.p=d}}(es&3)!==0&&Hc(),Si(t),d=t.pendingLanes,(a&261930)!==0&&(d&42)!==0?t===Bf?Hl++:(Hl=0,Bf=t):Hl=0,Gl(0)}}function K0(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,Al(r)))}function Hc(){return F0(),H0(),G0(),Q0()}function Q0(){if(Un!==5)return!1;var t=js,r=Uf;Uf=0;var a=Ze(es),l=$.T,d=ue.p;try{ue.p=32>a?32:a,$.T=null,a=zf,zf=null;var f=js,b=es;if(Un=0,xo=js=null,es=0,(Bt&6)!==0)throw Error(s(331));var A=Bt;if(Bt|=4,I0(f.current),A0(f,f.current,b,a),Bt=A,Gl(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(gn,f)}catch{}return!0}finally{ue.p=d,$.T=l,K0(t,r)}}function Y0(t,r,a){r=Kr(a,r),r=_f(t.stateNode,r,2),t=xs(t,r,2),t!==null&&(ce(t,2),Si(t))}function Yt(t,r,a){if(t.tag===3)Y0(t,t,a);else for(;r!==null;){if(r.tag===3){Y0(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Vs===null||!Vs.has(l))){t=Kr(a,t),a=Xy(2),l=xs(r,a,2),l!==null&&($y(a,l,r,t),ce(l,2),Si(l));break}}r=r.return}}function Hf(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new uS;var d=new Set;l.set(r,d)}else d=l.get(r),d===void 0&&(d=new Set,l.set(r,d));d.has(a)||(jf=!0,d.add(a),t=mS.bind(null,t,r,a),r.then(t,t))}function mS(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,nn===t&&(Et&a)===a&&(_n===4||_n===3&&(Et&62914560)===Et&&300>nt()-Pc?(Bt&2)===0&&No(t,0):Lf|=a,Io===Et&&(Io=0)),Si(t)}function X0(t,r){r===0&&(r=G()),t=Sa(t,r),t!==null&&(ce(t,r),Si(t))}function pS(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),X0(t,a)}function gS(t,r){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),X0(t,a)}function yS(t,r){return Ce(t,r)}var Gc=null,Do=null,Gf=!1,Kc=!1,Kf=!1,Ps=0;function Si(t){t!==Do&&t.next===null&&(Do===null?Gc=Do=t:Do=Do.next=t),Kc=!0,Gf||(Gf=!0,_S())}function Gl(t,r){if(!Kf&&Kc){Kf=!0;do for(var a=!1,l=Gc;l!==null;){if(t!==0){var d=l.pendingLanes;if(d===0)var f=0;else{var b=l.suspendedLanes,A=l.pingedLanes;f=(1<<31-pt(42|t)+1)-1,f&=d&~(b&~A),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Z0(l,f))}else f=Et,f=Bn(l,l===nn?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Ue(l,f)||(a=!0,Z0(l,f));l=l.next}while(a);Kf=!1}}function vS(){$0()}function $0(){Kc=Gf=!1;var t=0;Ps!==0&&xS()&&(t=Ps);for(var r=nt(),a=null,l=Gc;l!==null;){var d=l.next,f=W0(l,r);f===0?(l.next=null,a===null?Gc=d:a.next=d,d===null&&(Do=a)):(a=l,(t!==0||(f&3)!==0)&&(Kc=!0)),l=d}Un!==0&&Un!==5||Gl(t),Ps!==0&&(Ps=0)}function W0(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,d=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var b=31-pt(f),A=1<<b,M=d[b];M===-1?((A&a)===0||(A&l)!==0)&&(d[b]=mt(A,r)):M<=r&&(t.expiredLanes|=A),f&=~A}if(r=nn,a=Et,a=Bn(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(Qt===2||Qt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&fe(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Ue(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&fe(l),Ze(a)){case 2:case 8:a=Cn;break;case 32:a=mr;break;case 268435456:a=or;break;default:a=mr}return l=J0.bind(null,t),a=Ce(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&fe(l),t.callbackPriority=2,t.callbackNode=null,2}function J0(t,r){if(Un!==0&&Un!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Hc()&&t.callbackNode!==a)return null;var l=Et;return l=Bn(t,t===nn?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(M0(t,l,r),W0(t,nt()),t.callbackNode!=null&&t.callbackNode===a?J0.bind(null,t):null)}function Z0(t,r){if(Hc())return null;M0(t,r,!0)}function _S(){kS(function(){(Bt&6)!==0?Ce(ft,vS):$0()})}function Qf(){if(Ps===0){var t=yo;t===0&&(t=Pn,Pn<<=1,(Pn&261888)===0&&(Pn=256)),Ps=t}return Ps}function ev(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:to(""+t)}function tv(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function bS(t,r,a,l,d){if(r==="submit"&&a&&a.stateNode===d){var f=ev((d[dt]||null).action),b=l.submitter;b&&(r=(r=b[dt]||null)?ev(r.formAction):b.getAttribute("formAction"),r!==null&&(f=r,b=null));var A=new gi("action","action",null,l,d);t.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ps!==0){var M=b?tv(d,b):new FormData(d);ff(a,{pending:!0,data:M,method:d.method,action:f},null,M)}}else typeof f=="function"&&(A.preventDefault(),M=b?tv(d,b):new FormData(d),ff(a,{pending:!0,data:M,method:d.method,action:f},f,M))},currentTarget:d}]})}}for(var Yf=0;Yf<xh.length;Yf++){var Xf=xh[Yf],ES=Xf.toLowerCase(),TS=Xf[0].toUpperCase()+Xf.slice(1);ai(ES,"on"+TS)}ai(Dg,"onAnimationEnd"),ai(Mg,"onAnimationIteration"),ai(Og,"onAnimationStart"),ai("dblclick","onDoubleClick"),ai("focusin","onFocus"),ai("focusout","onBlur"),ai(P1,"onTransitionRun"),ai(U1,"onTransitionStart"),ai(z1,"onTransitionCancel"),ai(Vg,"onTransitionEnd"),Ee("onMouseEnter",["mouseout","mouseover"]),Ee("onMouseLeave",["mouseout","mouseover"]),Ee("onPointerEnter",["pointerout","pointerover"]),Ee("onPointerLeave",["pointerout","pointerover"]),le("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),le("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),le("onBeforeInput",["compositionend","keypress","textInput","paste"]),le("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),le("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),le("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kl));function nv(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],d=l.event;l=l.listeners;e:{var f=void 0;if(r)for(var b=l.length-1;0<=b;b--){var A=l[b],M=A.instance,X=A.currentTarget;if(A=A.listener,M!==f&&d.isPropagationStopped())break e;f=A,d.currentTarget=X;try{f(d)}catch(te){oc(te)}d.currentTarget=null,f=M}else for(b=0;b<l.length;b++){if(A=l[b],M=A.instance,X=A.currentTarget,A=A.listener,M!==f&&d.isPropagationStopped())break e;f=A,d.currentTarget=X;try{f(d)}catch(te){oc(te)}d.currentTarget=null,f=M}}}}function vt(t,r){var a=r[ei];a===void 0&&(a=r[ei]=new Set);var l=t+"__bubble";a.has(l)||(rv(r,t,2,!1),a.add(l))}function $f(t,r,a){var l=0;r&&(l|=4),rv(a,t,l,r)}var Qc="_reactListening"+Math.random().toString(36).slice(2);function Wf(t){if(!t[Qc]){t[Qc]=!0,fa.forEach(function(a){a!=="selectionchange"&&(SS.has(a)||$f(a,!1,t),$f(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Qc]||(r[Qc]=!0,$f("selectionchange",!1,r))}}function rv(t,r,a,l){switch(Dv(r)){case 2:var d=WS;break;case 8:d=JS;break;default:d=hm}a=d.bind(null,r,a,t),d=void 0,!pa||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),l?d!==void 0?t.addEventListener(r,a,{capture:!0,passive:d}):t.addEventListener(r,a,!0):d!==void 0?t.addEventListener(r,a,{passive:d}):t.addEventListener(r,a,!1)}function Jf(t,r,a,l,d){var f=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var A=l.stateNode.containerInfo;if(A===d)break;if(b===4)for(b=l.return;b!==null;){var M=b.tag;if((M===3||M===4)&&b.stateNode.containerInfo===d)return;b=b.return}for(;A!==null;){if(b=Ur(A),b===null)return;if(M=b.tag,M===5||M===6||M===26||M===27){l=f=b;continue e}A=A.parentNode}}l=l.return}_s(function(){var X=f,te=qr(a),ae=[];e:{var W=jg.get(t);if(W!==void 0){var ee=gi,Pe=t;switch(t){case"keypress":if(ya(a)===0)break e;case"keydown":case"keyup":ee=ic;break;case"focusin":Pe="focus",ee=_a;break;case"focusout":Pe="blur",ee=_a;break;case"beforeblur":case"afterblur":ee=_a;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=yl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Xu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=y;break;case Dg:case Mg:case Og:ee=Wu;break;case Vg:ee=R;break;case"scroll":case"scrollend":ee=gl;break;case"wheel":ee=Z;break;case"copy":case"cut":case"paste":ee=Ju;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=zi;break;case"toggle":case"beforetoggle":ee=lt}var $e=(r&4)!==0,Zt=!$e&&(t==="scroll"||t==="scrollend"),z=$e?W!==null?W+"Capture":null:W;$e=[];for(var j=X,Y;j!==null;){var se=j;if(Y=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||Y===null||z===null||(se=ni(j,z),se!=null&&$e.push(Ql(j,se,Y))),Zt)break;j=j.return}0<$e.length&&(W=new ee(W,Pe,null,a,te),ae.push({event:W,listeners:$e}))}}if((r&7)===0){e:{if(W=t==="mouseover"||t==="pointerover",ee=t==="mouseout"||t==="pointerout",W&&a!==fl&&(Pe=a.relatedTarget||a.fromElement)&&(Ur(Pe)||Pe[xn]))break e;if((ee||W)&&(W=te.window===te?te:(W=te.ownerDocument)?W.defaultView||W.parentWindow:window,ee?(Pe=a.relatedTarget||a.toElement,ee=X,Pe=Pe?Ur(Pe):null,Pe!==null&&(Zt=u(Pe),$e=Pe.tag,Pe!==Zt||$e!==5&&$e!==27&&$e!==6)&&(Pe=null)):(ee=null,Pe=X),ee!==Pe)){if($e=yl,se="onMouseLeave",z="onMouseEnter",j="mouse",(t==="pointerout"||t==="pointerover")&&($e=zi,se="onPointerLeave",z="onPointerEnter",j="pointer"),Zt=ee==null?W:ur(ee),Y=Pe==null?W:ur(Pe),W=new $e(se,j+"leave",ee,a,te),W.target=Zt,W.relatedTarget=Y,se=null,Ur(te)===X&&($e=new $e(z,j+"enter",Pe,a,te),$e.target=Y,$e.relatedTarget=Zt,se=$e),Zt=se,ee&&Pe)t:{for($e=wS,z=ee,j=Pe,Y=0,se=z;se;se=$e(se))Y++;se=0;for(var Ke=j;Ke;Ke=$e(Ke))se++;for(;0<Y-se;)z=$e(z),Y--;for(;0<se-Y;)j=$e(j),se--;for(;Y--;){if(z===j||j!==null&&z===j.alternate){$e=z;break t}z=$e(z),j=$e(j)}$e=null}else $e=null;ee!==null&&iv(ae,W,ee,$e,!1),Pe!==null&&Zt!==null&&iv(ae,Zt,Pe,$e,!0)}}e:{if(W=X?ur(X):window,ee=W.nodeName&&W.nodeName.toLowerCase(),ee==="select"||ee==="input"&&W.type==="file")var Vt=Eg;else if(_g(W))if(Tg)Vt=V1;else{Vt=M1;var qe=D1}else ee=W.nodeName,!ee||ee.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?X&&eo(X.elementType)&&(Vt=Eg):Vt=O1;if(Vt&&(Vt=Vt(t,X))){bg(ae,Vt,a,te);break e}qe&&qe(t,W,X),t==="focusout"&&X&&W.type==="number"&&X.memoizedProps.value!=null&&cl(W,"number",W.value)}switch(qe=X?ur(X):window,t){case"focusin":(_g(qe)||qe.contentEditable==="true")&&(lo=qe,Rh=X,Tl=null);break;case"focusout":Tl=Rh=lo=null;break;case"mousedown":Ch=!0;break;case"contextmenu":case"mouseup":case"dragend":Ch=!1,Ng(ae,a,te);break;case"selectionchange":if(L1)break;case"keydown":case"keyup":Ng(ae,a,te)}var ct;if(zt)e:{switch(t){case"compositionstart":var Tt="onCompositionStart";break e;case"compositionend":Tt="onCompositionEnd";break e;case"compositionupdate":Tt="onCompositionUpdate";break e}Tt=void 0}else oo?ba(t,a)&&(Tt="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Tt="onCompositionStart");Tt&&(_i&&a.locale!=="ko"&&(oo||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&oo&&(ct=pl()):(pi=te,ml="value"in pi?pi.value:pi.textContent,oo=!0)),qe=Yc(X,Tt),0<qe.length&&(Tt=new vi(Tt,t,null,a,te),ae.push({event:Tt,listeners:qe}),ct?Tt.data=ct:(ct=ao(a),ct!==null&&(Tt.data=ct)))),(ct=Hr?I1(t,a):x1(t,a))&&(Tt=Yc(X,"onBeforeInput"),0<Tt.length&&(qe=new vi("onBeforeInput","beforeinput",null,a,te),ae.push({event:qe,listeners:Tt}),qe.data=ct)),bS(ae,t,X,a,te)}nv(ae,r)})}function Ql(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Yc(t,r){for(var a=r+"Capture",l=[];t!==null;){var d=t,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=ni(t,a),d!=null&&l.unshift(Ql(t,d,f)),d=ni(t,r),d!=null&&l.push(Ql(t,d,f))),t.tag===3)return l;t=t.return}return[]}function wS(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function iv(t,r,a,l,d){for(var f=r._reactName,b=[];a!==null&&a!==l;){var A=a,M=A.alternate,X=A.stateNode;if(A=A.tag,M!==null&&M===l)break;A!==5&&A!==26&&A!==27||X===null||(M=X,d?(X=ni(a,f),X!=null&&b.unshift(Ql(a,X,M))):d||(X=ni(a,f),X!=null&&b.push(Ql(a,X,M)))),a=a.return}b.length!==0&&t.push({event:r,listeners:b})}var AS=/\r\n?/g,RS=/\u0000|\uFFFD/g;function sv(t){return(typeof t=="string"?t:""+t).replace(AS,`
`).replace(RS,"")}function av(t,r){return r=sv(r),sv(t)===r}function Jt(t,r,a,l,d,f){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||yr(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&yr(t,""+l);break;case"className":Dt(t,"class",l);break;case"tabIndex":Dt(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Dt(t,a,l);break;case"style":hl(t,l,f);break;case"data":if(r!=="object"){Dt(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=to(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(r!=="input"&&Jt(t,r,"name",d.name,d,null),Jt(t,r,"formEncType",d.formEncType,d,null),Jt(t,r,"formMethod",d.formMethod,d,null),Jt(t,r,"formTarget",d.formTarget,d,null)):(Jt(t,r,"encType",d.encType,d,null),Jt(t,r,"method",d.method,d,null),Jt(t,r,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=to(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=ti);break;case"onScroll":l!=null&&vt("scroll",t);break;case"onScrollEnd":l!=null&&vt("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=to(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":vt("beforetoggle",t),vt("toggle",t),kt(t,"popover",l);break;case"xlinkActuate":Pt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Pt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Pt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Pt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Pt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Pt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Pt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Pt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Pt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":kt(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Yu.get(a)||a,kt(t,a,l))}}function Zf(t,r,a,l,d,f){switch(a){case"style":hl(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?yr(t,l):(typeof l=="number"||typeof l=="bigint")&&yr(t,""+l);break;case"onScroll":l!=null&&vt("scroll",t);break;case"onScrollEnd":l!=null&&vt("scrollend",t);break;case"onClick":l!=null&&(t.onclick=ti);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!D.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),r=a.slice(2,d?a.length-7:void 0),f=t[dt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(r,f,d),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,d);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):kt(t,a,l)}}}function Xn(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":vt("error",t),vt("load",t);var l=!1,d=!1,f;for(f in a)if(a.hasOwnProperty(f)){var b=a[f];if(b!=null)switch(f){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Jt(t,r,f,b,a,null)}}d&&Jt(t,r,"srcSet",a.srcSet,a,null),l&&Jt(t,r,"src",a.src,a,null);return;case"input":vt("invalid",t);var A=f=b=d=null,M=null,X=null;for(l in a)if(a.hasOwnProperty(l)){var te=a[l];if(te!=null)switch(l){case"name":d=te;break;case"type":b=te;break;case"checked":M=te;break;case"defaultChecked":X=te;break;case"value":f=te;break;case"defaultValue":A=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(s(137,r));break;default:Jt(t,r,l,te,a,null)}}Gu(t,f,A,M,X,b,d,!1);return;case"select":vt("invalid",t),l=b=f=null;for(d in a)if(a.hasOwnProperty(d)&&(A=a[d],A!=null))switch(d){case"value":f=A;break;case"defaultValue":b=A;break;case"multiple":l=A;default:Jt(t,r,d,A,a,null)}r=f,a=b,t.multiple=!!l,r!=null?ps(t,!!l,r,!1):a!=null&&ps(t,!!l,a,!0);return;case"textarea":vt("invalid",t),f=d=l=null;for(b in a)if(a.hasOwnProperty(b)&&(A=a[b],A!=null))switch(b){case"value":l=A;break;case"defaultValue":d=A;break;case"children":f=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(91));break;default:Jt(t,r,b,A,a,null)}gs(t,l,d,f);return;case"option":for(M in a)if(a.hasOwnProperty(M)&&(l=a[M],l!=null))switch(M){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Jt(t,r,M,l,a,null)}return;case"dialog":vt("beforetoggle",t),vt("toggle",t),vt("cancel",t),vt("close",t);break;case"iframe":case"object":vt("load",t);break;case"video":case"audio":for(l=0;l<Kl.length;l++)vt(Kl[l],t);break;case"image":vt("error",t),vt("load",t);break;case"details":vt("toggle",t);break;case"embed":case"source":case"link":vt("error",t),vt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in a)if(a.hasOwnProperty(X)&&(l=a[X],l!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Jt(t,r,X,l,a,null)}return;default:if(eo(r)){for(te in a)a.hasOwnProperty(te)&&(l=a[te],l!==void 0&&Zf(t,r,te,l,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(l=a[A],l!=null&&Jt(t,r,A,l,a,null))}function CS(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,b=null,A=null,M=null,X=null,te=null;for(ee in a){var ae=a[ee];if(a.hasOwnProperty(ee)&&ae!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":M=ae;default:l.hasOwnProperty(ee)||Jt(t,r,ee,null,l,ae)}}for(var W in l){var ee=l[W];if(ae=a[W],l.hasOwnProperty(W)&&(ee!=null||ae!=null))switch(W){case"type":f=ee;break;case"name":d=ee;break;case"checked":X=ee;break;case"defaultChecked":te=ee;break;case"value":b=ee;break;case"defaultValue":A=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,r));break;default:ee!==ae&&Jt(t,r,W,ee,l,ae)}}Za(t,b,A,M,X,te,f,d);return;case"select":ee=b=A=W=null;for(f in a)if(M=a[f],a.hasOwnProperty(f)&&M!=null)switch(f){case"value":break;case"multiple":ee=M;default:l.hasOwnProperty(f)||Jt(t,r,f,null,l,M)}for(d in l)if(f=l[d],M=a[d],l.hasOwnProperty(d)&&(f!=null||M!=null))switch(d){case"value":W=f;break;case"defaultValue":A=f;break;case"multiple":b=f;default:f!==M&&Jt(t,r,d,f,l,M)}r=A,a=b,l=ee,W!=null?ps(t,!!a,W,!1):!!l!=!!a&&(r!=null?ps(t,!!a,r,!0):ps(t,!!a,a?[]:"",!1));return;case"textarea":ee=W=null;for(A in a)if(d=a[A],a.hasOwnProperty(A)&&d!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Jt(t,r,A,null,l,d)}for(b in l)if(d=l[b],f=a[b],l.hasOwnProperty(b)&&(d!=null||f!=null))switch(b){case"value":W=d;break;case"defaultValue":ee=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(s(91));break;default:d!==f&&Jt(t,r,b,d,l,f)}Ku(t,W,ee);return;case"option":for(var Pe in a)if(W=a[Pe],a.hasOwnProperty(Pe)&&W!=null&&!l.hasOwnProperty(Pe))switch(Pe){case"selected":t.selected=!1;break;default:Jt(t,r,Pe,null,l,W)}for(M in l)if(W=l[M],ee=a[M],l.hasOwnProperty(M)&&W!==ee&&(W!=null||ee!=null))switch(M){case"selected":t.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:Jt(t,r,M,W,l,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in a)W=a[$e],a.hasOwnProperty($e)&&W!=null&&!l.hasOwnProperty($e)&&Jt(t,r,$e,null,l,W);for(X in l)if(W=l[X],ee=a[X],l.hasOwnProperty(X)&&W!==ee&&(W!=null||ee!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,r));break;default:Jt(t,r,X,W,l,ee)}return;default:if(eo(r)){for(var Zt in a)W=a[Zt],a.hasOwnProperty(Zt)&&W!==void 0&&!l.hasOwnProperty(Zt)&&Zf(t,r,Zt,void 0,l,W);for(te in l)W=l[te],ee=a[te],!l.hasOwnProperty(te)||W===ee||W===void 0&&ee===void 0||Zf(t,r,te,W,l,ee);return}}for(var z in a)W=a[z],a.hasOwnProperty(z)&&W!=null&&!l.hasOwnProperty(z)&&Jt(t,r,z,null,l,W);for(ae in l)W=l[ae],ee=a[ae],!l.hasOwnProperty(ae)||W===ee||W==null&&ee==null||Jt(t,r,ae,W,l,ee)}function ov(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function IS(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var d=a[l],f=d.transferSize,b=d.initiatorType,A=d.duration;if(f&&A&&ov(b)){for(b=0,A=d.responseEnd,l+=1;l<a.length;l++){var M=a[l],X=M.startTime;if(X>A)break;var te=M.transferSize,ae=M.initiatorType;te&&ov(ae)&&(M=M.responseEnd,b+=te*(M<A?1:(A-X)/(M-X)))}if(--l,r+=8*(f+b)/(d.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var em=null,tm=null;function Xc(t){return t.nodeType===9?t:t.ownerDocument}function lv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function uv(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function nm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var rm=null;function xS(){var t=window.event;return t&&t.type==="popstate"?t===rm?!1:(rm=t,!0):(rm=null,!1)}var cv=typeof setTimeout=="function"?setTimeout:void 0,NS=typeof clearTimeout=="function"?clearTimeout:void 0,dv=typeof Promise=="function"?Promise:void 0,kS=typeof queueMicrotask=="function"?queueMicrotask:typeof dv<"u"?function(t){return dv.resolve(null).then(t).catch(DS)}:cv;function DS(t){setTimeout(function(){throw t})}function Us(t){return t==="head"}function hv(t,r){var a=r,l=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(d),jo(r);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Yl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Yl(a);for(var f=a.firstChild;f;){var b=f.nextSibling,A=f.nodeName;f[Pr]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=b}}else a==="body"&&Yl(t.ownerDocument.body);a=d}while(a);jo(r)}function fv(t,r){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function im(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":im(a),ms(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function MS(t,r,a,l){for(;t.nodeType===1;){var d=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Pr])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Wr(t.nextSibling),t===null)break}return null}function OS(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Wr(t.nextSibling),t===null))return null;return t}function mv(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Wr(t.nextSibling),t===null))return null;return t}function sm(t){return t.data==="$?"||t.data==="$~"}function am(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function VS(t,r){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||a.readyState!=="loading")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Wr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var om=null;function pv(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(r===0)return Wr(t.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}t=t.nextSibling}return null}function gv(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return t;r--}else a!=="/$"&&a!=="/&"||r++}t=t.previousSibling}return null}function yv(t,r,a){switch(r=Xc(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Yl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);ms(t)}var Jr=new Map,vv=new Set;function $c(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ts=ue.d;ue.d={f:jS,r:LS,D:PS,C:US,L:zS,m:BS,X:FS,S:qS,M:HS};function jS(){var t=ts.f(),r=Bc();return t||r}function LS(t){var r=pr(t);r!==null&&r.tag===5&&r.type==="form"?Vy(r):ts.r(t)}var Mo=typeof document>"u"?null:document;function _v(t,r,a){var l=Mo;if(l&&typeof r=="string"&&r){var d=gr(r);d='link[rel="'+t+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),vv.has(d)||(vv.add(d),t={rel:t,crossOrigin:a,href:r},l.querySelector(d)===null&&(r=l.createElement("link"),Xn(r,"link",t),yn(r),l.head.appendChild(r)))}}function PS(t){ts.D(t),_v("dns-prefetch",t,null)}function US(t,r){ts.C(t,r),_v("preconnect",t,r)}function zS(t,r,a){ts.L(t,r,a);var l=Mo;if(l&&t&&r){var d='link[rel="preload"][as="'+gr(r)+'"]';r==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+gr(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+gr(a.imageSizes)+'"]')):d+='[href="'+gr(t)+'"]';var f=d;switch(r){case"style":f=Oo(t);break;case"script":f=Vo(t)}Jr.has(f)||(t=T({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Jr.set(f,t),l.querySelector(d)!==null||r==="style"&&l.querySelector(Xl(f))||r==="script"&&l.querySelector($l(f))||(r=l.createElement("link"),Xn(r,"link",t),yn(r),l.head.appendChild(r)))}}function BS(t,r){ts.m(t,r);var a=Mo;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",d='link[rel="modulepreload"][as="'+gr(l)+'"][href="'+gr(t)+'"]',f=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Vo(t)}if(!Jr.has(f)&&(t=T({rel:"modulepreload",href:t},r),Jr.set(f,t),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector($l(f)))return}l=a.createElement("link"),Xn(l,"link",t),yn(l),a.head.appendChild(l)}}}function qS(t,r,a){ts.S(t,r,a);var l=Mo;if(l&&t){var d=zr(l).hoistableStyles,f=Oo(t);r=r||"default";var b=d.get(f);if(!b){var A={loading:0,preload:null};if(b=l.querySelector(Xl(f)))A.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Jr.get(f))&&lm(t,a);var M=b=l.createElement("link");yn(M),Xn(M,"link",t),M._p=new Promise(function(X,te){M.onload=X,M.onerror=te}),M.addEventListener("load",function(){A.loading|=1}),M.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Wc(b,r,l)}b={type:"stylesheet",instance:b,count:1,state:A},d.set(f,b)}}}function FS(t,r){ts.X(t,r);var a=Mo;if(a&&t){var l=zr(a).hoistableScripts,d=Vo(t),f=l.get(d);f||(f=a.querySelector($l(d)),f||(t=T({src:t,async:!0},r),(r=Jr.get(d))&&um(t,r),f=a.createElement("script"),yn(f),Xn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function HS(t,r){ts.M(t,r);var a=Mo;if(a&&t){var l=zr(a).hoistableScripts,d=Vo(t),f=l.get(d);f||(f=a.querySelector($l(d)),f||(t=T({src:t,async:!0,type:"module"},r),(r=Jr.get(d))&&um(t,r),f=a.createElement("script"),yn(f),Xn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function bv(t,r,a,l){var d=(d=_e.current)?$c(d):null;if(!d)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Oo(a.href),a=zr(d).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Oo(a.href);var f=zr(d).hoistableStyles,b=f.get(t);if(b||(d=d.ownerDocument||d,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,b),(f=d.querySelector(Xl(t)))&&!f._p&&(b.instance=f,b.state.loading=5),Jr.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Jr.set(t,a),f||GS(d,t,a,b.state))),r&&l===null)throw Error(s(528,""));return b}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Vo(a),a=zr(d).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Oo(t){return'href="'+gr(t)+'"'}function Xl(t){return'link[rel="stylesheet"]['+t+"]"}function Ev(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function GS(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Xn(r,"link",a),yn(r),t.head.appendChild(r))}function Vo(t){return'[src="'+gr(t)+'"]'}function $l(t){return"script[async]"+t}function Tv(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+gr(a.href)+'"]');if(l)return r.instance=l,yn(l),l;var d=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),yn(l),Xn(l,"style",d),Wc(l,a.precedence,t),r.instance=l;case"stylesheet":d=Oo(a.href);var f=t.querySelector(Xl(d));if(f)return r.state.loading|=4,r.instance=f,yn(f),f;l=Ev(a),(d=Jr.get(d))&&lm(l,d),f=(t.ownerDocument||t).createElement("link"),yn(f);var b=f;return b._p=new Promise(function(A,M){b.onload=A,b.onerror=M}),Xn(f,"link",l),r.state.loading|=4,Wc(f,a.precedence,t),r.instance=f;case"script":return f=Vo(a.src),(d=t.querySelector($l(f)))?(r.instance=d,yn(d),d):(l=a,(d=Jr.get(f))&&(l=T({},a),um(l,d)),t=t.ownerDocument||t,d=t.createElement("script"),yn(d),Xn(d,"link",l),t.head.appendChild(d),r.instance=d);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Wc(l,a.precedence,t));return r.instance}function Wc(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,f=d,b=0;b<l.length;b++){var A=l[b];if(A.dataset.precedence===r)f=A;else if(f!==d)break}f?f.parentNode.insertBefore(t,f.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function lm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function um(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Jc=null;function Sv(t,r,a){if(Jc===null){var l=new Map,d=Jc=new Map;d.set(a,l)}else d=Jc,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),d=0;d<a.length;d++){var f=a[d];if(!(f[Pr]||f[Le]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var b=f.getAttribute(r)||"";b=t+b;var A=l.get(b);A?A.push(f):l.set(b,[f])}}return l}function wv(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function KS(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Av(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function QS(t,r,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=Oo(l.href),f=r.querySelector(Xl(d));if(f){r=f._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Zc.bind(t),r.then(t,t)),a.state.loading|=4,a.instance=f,yn(f);return}f=r.ownerDocument||r,l=Ev(l),(d=Jr.get(d))&&lm(l,d),f=f.createElement("link"),yn(f);var b=f;b._p=new Promise(function(A,M){b.onload=A,b.onerror=M}),Xn(f,"link",l),a.instance=f}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Zc.bind(t),r.addEventListener("load",a),r.addEventListener("error",a))}}var cm=0;function YS(t,r){return t.stylesheets&&t.count===0&&td(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&td(t,t.stylesheets),t.unsuspend){var f=t.unsuspend;t.unsuspend=null,f()}},6e4+r);0<t.imgBytes&&cm===0&&(cm=62500*IS());var d=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&td(t,t.stylesheets),t.unsuspend)){var f=t.unsuspend;t.unsuspend=null,f()}},(t.imgBytes>cm?50:800)+r);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function Zc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)td(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ed=null;function td(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ed=new Map,r.forEach(XS,t),ed=null,Zc.call(t))}function XS(t,r){if(!(r.state.loading&4)){var a=ed.get(t);if(a)var l=a.get(null);else{a=new Map,ed.set(t,a);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var b=d[f];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),l=b)}l&&a.set(null,l)}d=r.instance,b=d.getAttribute("data-precedence"),f=a.get(b)||l,f===l&&a.set(null,d),a.set(b,d),this.count++,l=Zc.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),f?f.parentNode.insertBefore(d,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),r.state.loading|=4}}var Wl={$$typeof:re,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function $S(t,r,a,l,d,f,b,A,M){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ne(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ne(0),this.hiddenUpdates=ne(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function Rv(t,r,a,l,d,f,b,A,M,X,te,ae){return t=new $S(t,r,a,b,M,X,te,ae,A),r=1,f===!0&&(r|=24),f=xr(3,null,null,r),t.current=f,f.stateNode=t,r=qh(),r.refCount++,t.pooledCache=r,r.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:r},Kh(f),t}function Cv(t){return t?(t=ho,t):ho}function Iv(t,r,a,l,d,f){d=Cv(d),l.context===null?l.context=d:l.pendingContext=d,l=Is(r),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=xs(t,l,r),a!==null&&(Tr(a,t,r),xl(a,t,r))}function xv(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function dm(t,r){xv(t,r),(t=t.alternate)&&xv(t,r)}function Nv(t){if(t.tag===13||t.tag===31){var r=Sa(t,67108864);r!==null&&Tr(r,t,67108864),dm(t,67108864)}}function kv(t){if(t.tag===13||t.tag===31){var r=Or();r=Ct(r);var a=Sa(t,r);a!==null&&Tr(a,t,r),dm(t,r)}}var nd=!0;function WS(t,r,a,l){var d=$.T;$.T=null;var f=ue.p;try{ue.p=2,hm(t,r,a,l)}finally{ue.p=f,$.T=d}}function JS(t,r,a,l){var d=$.T;$.T=null;var f=ue.p;try{ue.p=8,hm(t,r,a,l)}finally{ue.p=f,$.T=d}}function hm(t,r,a,l){if(nd){var d=fm(l);if(d===null)Jf(t,r,l,rd,a),Mv(t,l);else if(ew(d,t,r,a,l))l.stopPropagation();else if(Mv(t,l),r&4&&-1<ZS.indexOf(t)){for(;d!==null;){var f=pr(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var b=tn(f.pendingLanes);if(b!==0){var A=f;for(A.pendingLanes|=2,A.entangledLanes|=2;b;){var M=1<<31-pt(b);A.entanglements[1]|=M,b&=~M}Si(f),(Bt&6)===0&&(Uc=nt()+500,Gl(0))}}break;case 31:case 13:A=Sa(f,2),A!==null&&Tr(A,f,2),Bc(),dm(f,2)}if(f=fm(l),f===null&&Jf(t,r,l,rd,a),f===d)break;d=f}d!==null&&l.stopPropagation()}else Jf(t,r,l,null,a)}}function fm(t){return t=qr(t),mm(t)}var rd=null;function mm(t){if(rd=null,t=Ur(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=h(r),t!==null)return t;t=null}else if(a===31){if(t=g(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return rd=t,null}function Dv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(on()){case ft:return 2;case Cn:return 8;case mr:case ji:return 32;case or:return 268435456;default:return 32}default:return 32}}var pm=!1,zs=null,Bs=null,qs=null,Jl=new Map,Zl=new Map,Fs=[],ZS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Mv(t,r){switch(t){case"focusin":case"focusout":zs=null;break;case"dragenter":case"dragleave":Bs=null;break;case"mouseover":case"mouseout":qs=null;break;case"pointerover":case"pointerout":Jl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zl.delete(r.pointerId)}}function eu(t,r,a,l,d,f){return t===null||t.nativeEvent!==f?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[d]},r!==null&&(r=pr(r),r!==null&&Nv(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),t)}function ew(t,r,a,l,d){switch(r){case"focusin":return zs=eu(zs,t,r,a,l,d),!0;case"dragenter":return Bs=eu(Bs,t,r,a,l,d),!0;case"mouseover":return qs=eu(qs,t,r,a,l,d),!0;case"pointerover":var f=d.pointerId;return Jl.set(f,eu(Jl.get(f)||null,t,r,a,l,d)),!0;case"gotpointercapture":return f=d.pointerId,Zl.set(f,eu(Zl.get(f)||null,t,r,a,l,d)),!0}return!1}function Ov(t){var r=Ur(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=h(a),r!==null){t.blockedOn=r,Ye(t.priority,function(){kv(a)});return}}else if(r===31){if(r=g(a),r!==null){t.blockedOn=r,Ye(t.priority,function(){kv(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function id(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=fm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);fl=l,a.target.dispatchEvent(l),fl=null}else return r=pr(a),r!==null&&Nv(r),t.blockedOn=a,!1;r.shift()}return!0}function Vv(t,r,a){id(t)&&a.delete(r)}function tw(){pm=!1,zs!==null&&id(zs)&&(zs=null),Bs!==null&&id(Bs)&&(Bs=null),qs!==null&&id(qs)&&(qs=null),Jl.forEach(Vv),Zl.forEach(Vv)}function sd(t,r){t.blockedOn===r&&(t.blockedOn=null,pm||(pm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,tw)))}var ad=null;function jv(t){ad!==t&&(ad=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ad===t&&(ad=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],d=t[r+2];if(typeof l!="function"){if(mm(l||a)===null)continue;break}var f=pr(a);f!==null&&(t.splice(r,3),r-=3,ff(f,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function jo(t){function r(M){return sd(M,t)}zs!==null&&sd(zs,t),Bs!==null&&sd(Bs,t),qs!==null&&sd(qs,t),Jl.forEach(r),Zl.forEach(r);for(var a=0;a<Fs.length;a++){var l=Fs[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Fs.length&&(a=Fs[0],a.blockedOn===null);)Ov(a),a.blockedOn===null&&Fs.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],f=a[l+1],b=d[dt]||null;if(typeof f=="function")b||jv(a);else if(b){var A=null;if(f&&f.hasAttribute("formAction")){if(d=f,b=f[dt]||null)A=b.formAction;else if(mm(d)!==null)continue}else A=b.action;typeof A=="function"?a[l+1]=A:(a.splice(l,3),l-=3),jv(a)}}}function Lv(){function t(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(b){return d=b})},focusReset:"manual",scroll:"manual"})}function r(){d!==null&&(d(),d=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),d!==null&&(d(),d=null)}}}function gm(t){this._internalRoot=t}od.prototype.render=gm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=Or();Iv(a,l,t,r,null,null)},od.prototype.unmount=gm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Iv(t.current,2,null,t,null,null),Bc(),r[xn]=null}};function od(t){this._internalRoot=t}od.prototype.unstable_scheduleHydration=function(t){if(t){var r=ht();t={blockedOn:null,target:t,priority:r};for(var a=0;a<Fs.length&&r!==0&&r<Fs[a].priority;a++);Fs.splice(a,0,t),a===0&&Ov(t)}};var Pv=e.version;if(Pv!=="19.2.0")throw Error(s(527,Pv,"19.2.0"));ue.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=m(r),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var nw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ld.isDisabled&&ld.supportsFiber)try{gn=ld.inject(nw),Kt=ld}catch{}}return nu.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",d=Gy,f=Ky,b=Qy;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(f=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError)),r=Rv(t,1,!1,null,null,a,l,null,d,f,b,Lv),t[xn]=r.current,Wf(t),new gm(r)},nu.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,d="",f=Gy,b=Ky,A=Qy,M=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.formState!==void 0&&(M=a.formState)),r=Rv(t,1,!0,r,a??null,l,d,M,f,b,A,Lv),r.context=Cv(null),a=r.current,l=Or(),l=Ct(l),d=Is(l),d.callback=null,xs(a,d,l),a=l,r.current.lanes=a,ce(r,a),Si(r),t[xn]=r.current,Wf(t),new od(r)},nu.version="19.2.0",nu}var Yv;function dw(){if(Yv)return _m.exports;Yv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),_m.exports=cw(),_m.exports}var hw=dw();const fw=pp(hw),Qo=()=>v.jsxs("div",{style:{padding:"1.5rem 0",display:"flex",justifyContent:"center",alignItems:"center"},children:[v.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",border:"3px solid #e5e7eb",borderTopColor:"#2EC483",animation:"spin 1s linear infinite"}}),v.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `})]}),mw=()=>{};var Xv={};const zb=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},pw=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],h=i[n++],g=i[n++],p=((o&7)<<18|(u&63)<<12|(h&63)<<6|g&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=i[n++],h=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},Bb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],h=o+1<i.length,g=h?i[o+1]:0,p=o+2<i.length,m=p?i[o+2]:0,_=u>>2,T=(u&3)<<4|g>>4;let S=(g&15)<<2|m>>6,w=m&63;p||(w=64,h||(S=64)),s.push(n[_],n[T],n[S],n[w])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(zb(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):pw(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],g=o<i.length?n[i.charAt(o)]:0;++o;const m=o<i.length?n[i.charAt(o)]:64;++o;const T=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||g==null||m==null||T==null)throw new gw;const S=u<<2|g>>4;if(s.push(S),m!==64){const w=g<<4&240|m>>2;if(s.push(w),T!==64){const P=m<<6&192|T;s.push(P)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class gw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yw=function(i){const e=zb(i);return Bb.encodeByteArray(e,!0)},xd=function(i){return yw(i).replace(/\./g,"")},qb=function(i){try{return Bb.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function vw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const _w=()=>vw().__FIREBASE_DEFAULTS__,bw=()=>{if(typeof process>"u"||typeof Xv>"u")return;const i=Xv.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Ew=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&qb(i[1]);return e&&JSON.parse(e)},Jd=()=>{try{return mw()||_w()||bw()||Ew()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Fb=i=>Jd()?.emulatorHosts?.[i],Hb=i=>{const e=Fb(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Gb=()=>Jd()?.config,Kb=i=>Jd()?.[`_${i}`];class Tw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function ua(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function yp(i){return(await fetch(i,{credentials:"include"})).ok}function Sw(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[xd(JSON.stringify(n)),xd(JSON.stringify(h)),""].join(".")}const hu={};function ww(){const i={prod:[],emulator:[]};for(const e of Object.keys(hu))hu[e]?i.emulator.push(e):i.prod.push(e);return i}function Aw(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let $v=!1;function vp(i,e){if(typeof window>"u"||typeof document>"u"||!ua(window.location.host)||hu[i]===e||hu[i]||$v)return;hu[i]=e;function n(S){return`__firebase__banner__${S}`}const s="__firebase__banner",u=ww().prod.length>0;function h(){const S=document.getElementById(s);S&&S.remove()}function g(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,w){S.setAttribute("width","24"),S.setAttribute("id",w),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function m(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{$v=!0,h()},S}function _(S,w){S.setAttribute("id",w),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=Aw(s),w=n("text"),P=document.getElementById(w)||document.createElement("span"),F=n("learnmore"),B=document.getElementById(F)||document.createElement("a"),ye=n("preprendIcon"),he=document.getElementById(ye)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const re=S.element;g(re),_(B,F);const Ae=m();p(he,ye),re.append(he,P,B,Ae),document.body.appendChild(re)}u?(P.innerText="Preview backend disconnected.",he.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(he.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function ar(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Rw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ar())}function Cw(){const i=Jd()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Iw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xw(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function Nw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kw(){const i=ar();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function Dw(){return!Cw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Mw(){try{return typeof indexedDB=="object"}catch{return!1}}function Ow(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const Vw="FirebaseError";class Oi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Vw,Object.setPrototypeOf(this,Oi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xu.prototype.create)}}class xu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?jw(u,s):"Error",g=`${this.serviceName}: ${h} (${o}).`;return new Oi(o,g,s)}}function jw(i,e){return i.replace(Lw,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const Lw=/\{\$([^}]+)}/g;function Pw(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Ba(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],h=e[o];if(Wv(u)&&Wv(h)){if(!Ba(u,h))return!1}else if(u!==h)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Wv(i){return i!==null&&typeof i=="object"}function Nu(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function au(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function ou(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function Uw(i,e){const n=new zw(i,e);return n.subscribe.bind(n)}class zw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Bw(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Sm),o.error===void 0&&(o.error=Sm),o.complete===void 0&&(o.complete=Sm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Bw(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Sm(){}function rn(i){return i&&i._delegate?i._delegate:i}class na{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ja="[DEFAULT]";class qw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Tw;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Hw(e))try{this.getOrInitializeService({instanceIdentifier:ja})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=ja){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ja){return this.instances.has(e)}getOptions(e=ja){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,h]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);s===g&&h.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Fw(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ja){return this.component?this.component.multipleInstances?e:ja:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Fw(i){return i===ja?void 0:i}function Hw(i){return i.instantiationMode==="EAGER"}class Gw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new qw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var St;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(St||(St={}));const Kw={debug:St.DEBUG,verbose:St.VERBOSE,info:St.INFO,warn:St.WARN,error:St.ERROR,silent:St.SILENT},Qw=St.INFO,Yw={[St.DEBUG]:"log",[St.VERBOSE]:"log",[St.INFO]:"info",[St.WARN]:"warn",[St.ERROR]:"error"},Xw=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=Yw[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _p{constructor(e){this.name=e,this._logLevel=Qw,this._logHandler=Xw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in St))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Kw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,St.DEBUG,...e),this._logHandler(this,St.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,St.VERBOSE,...e),this._logHandler(this,St.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,St.INFO,...e),this._logHandler(this,St.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,St.WARN,...e),this._logHandler(this,St.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,St.ERROR,...e),this._logHandler(this,St.ERROR,...e)}}const $w=(i,e)=>e.some(n=>i instanceof n);let Jv,Zv;function Ww(){return Jv||(Jv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Jw(){return Zv||(Zv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Qb=new WeakMap,zm=new WeakMap,Yb=new WeakMap,wm=new WeakMap,bp=new WeakMap;function Zw(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",h)},u=()=>{n(Js(i.result)),o()},h=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&Qb.set(n,i)}).catch(()=>{}),bp.set(e,i),e}function eA(i){if(zm.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",h),i.removeEventListener("abort",h)},u=()=>{n(),o()},h=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",h),i.addEventListener("abort",h)});zm.set(i,e)}let Bm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return zm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Yb.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Js(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function tA(i){Bm=i(Bm)}function nA(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Am(this),e,...n);return Yb.set(s,e.sort?e.sort():[e]),Js(s)}:Jw().includes(i)?function(...e){return i.apply(Am(this),e),Js(Qb.get(this))}:function(...e){return Js(i.apply(Am(this),e))}}function rA(i){return typeof i=="function"?nA(i):(i instanceof IDBTransaction&&eA(i),$w(i,Ww())?new Proxy(i,Bm):i)}function Js(i){if(i instanceof IDBRequest)return Zw(i);if(wm.has(i))return wm.get(i);const e=rA(i);return e!==i&&(wm.set(i,e),bp.set(e,i)),e}const Am=i=>bp.get(i);function iA(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const h=indexedDB.open(i,e),g=Js(h);return s&&h.addEventListener("upgradeneeded",p=>{s(Js(h.result),p.oldVersion,p.newVersion,Js(h.transaction),p)}),n&&h.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),g}const sA=["get","getKey","getAll","getAllKeys","count"],aA=["put","add","delete","clear"],Rm=new Map;function e_(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Rm.get(e))return Rm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=aA.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||sA.includes(n)))return;const u=async function(h,...g){const p=this.transaction(h,o?"readwrite":"readonly");let m=p.store;return s&&(m=m.index(g.shift())),(await Promise.all([m[n](...g),o&&p.done]))[0]};return Rm.set(e,u),u}tA(i=>({...i,get:(e,n,s)=>e_(e,n)||i.get(e,n,s),has:(e,n)=>!!e_(e,n)||i.has(e,n)}));class oA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lA(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function lA(i){return i.getComponent()?.type==="VERSION"}const qm="@firebase/app",t_="0.14.6";const os=new _p("@firebase/app"),uA="@firebase/app-compat",cA="@firebase/analytics-compat",dA="@firebase/analytics",hA="@firebase/app-check-compat",fA="@firebase/app-check",mA="@firebase/auth",pA="@firebase/auth-compat",gA="@firebase/database",yA="@firebase/data-connect",vA="@firebase/database-compat",_A="@firebase/functions",bA="@firebase/functions-compat",EA="@firebase/installations",TA="@firebase/installations-compat",SA="@firebase/messaging",wA="@firebase/messaging-compat",AA="@firebase/performance",RA="@firebase/performance-compat",CA="@firebase/remote-config",IA="@firebase/remote-config-compat",xA="@firebase/storage",NA="@firebase/storage-compat",kA="@firebase/firestore",DA="@firebase/ai",MA="@firebase/firestore-compat",OA="firebase",VA="12.6.0";const Fm="[DEFAULT]",jA={[qm]:"fire-core",[uA]:"fire-core-compat",[dA]:"fire-analytics",[cA]:"fire-analytics-compat",[fA]:"fire-app-check",[hA]:"fire-app-check-compat",[mA]:"fire-auth",[pA]:"fire-auth-compat",[gA]:"fire-rtdb",[yA]:"fire-data-connect",[vA]:"fire-rtdb-compat",[_A]:"fire-fn",[bA]:"fire-fn-compat",[EA]:"fire-iid",[TA]:"fire-iid-compat",[SA]:"fire-fcm",[wA]:"fire-fcm-compat",[AA]:"fire-perf",[RA]:"fire-perf-compat",[CA]:"fire-rc",[IA]:"fire-rc-compat",[xA]:"fire-gcs",[NA]:"fire-gcs-compat",[kA]:"fire-fst",[MA]:"fire-fst-compat",[DA]:"fire-vertex","fire-js":"fire-js",[OA]:"fire-js-all"};const vu=new Map,LA=new Map,Hm=new Map;function n_(i,e){try{i.container.addComponent(e)}catch(n){os.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function qa(i){const e=i.name;if(Hm.has(e))return os.debug(`There were multiple attempts to register component ${e}.`),!1;Hm.set(e,i);for(const n of vu.values())n_(n,i);for(const n of LA.values())n_(n,i);return!0}function Zd(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Vr(i){return i==null?!1:i.settings!==void 0}const PA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zs=new xu("app","Firebase",PA);class UA{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new na("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zs.create("app-deleted",{appName:this._name})}}const nl=VA;function Ep(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:Fm,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Zs.create("bad-app-name",{appName:String(o)});if(n||(n=Gb()),!n)throw Zs.create("no-options");const u=vu.get(o);if(u){if(Ba(n,u.options)&&Ba(s,u.config))return u;throw Zs.create("duplicate-app",{appName:o})}const h=new Gw(o);for(const p of Hm.values())h.addComponent(p);const g=new UA(n,s,h);return vu.set(o,g),g}function eh(i=Fm){const e=vu.get(i);if(!e&&i===Fm&&Gb())return Ep();if(!e)throw Zs.create("no-app",{appName:i});return e}function Xb(){return Array.from(vu.values())}function Ai(i,e,n){let s=jA[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),os.warn(h.join(" "));return}qa(new na(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const zA="firebase-heartbeat-database",BA=1,_u="firebase-heartbeat-store";let Cm=null;function $b(){return Cm||(Cm=iA(zA,BA,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(_u)}catch(n){console.warn(n)}}}}).catch(i=>{throw Zs.create("idb-open",{originalErrorMessage:i.message})})),Cm}async function qA(i){try{const n=(await $b()).transaction(_u),s=await n.objectStore(_u).get(Wb(i));return await n.done,s}catch(e){if(e instanceof Oi)os.warn(e.message);else{const n=Zs.create("idb-get",{originalErrorMessage:e?.message});os.warn(n.message)}}}async function r_(i,e){try{const s=(await $b()).transaction(_u,"readwrite");await s.objectStore(_u).put(e,Wb(i)),await s.done}catch(n){if(n instanceof Oi)os.warn(n.message);else{const s=Zs.create("idb-set",{originalErrorMessage:n?.message});os.warn(s.message)}}}function Wb(i){return`${i.name}!${i.options.appId}`}const FA=1024,HA=30;class GA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new QA(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=i_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>HA){const o=YA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){os.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=i_(),{heartbeatsToSend:n,unsentEntries:s}=KA(this._heartbeatsCache.heartbeats),o=xd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return os.warn(e),""}}}function i_(){return new Date().toISOString().substring(0,10)}function KA(i,e=FA){const n=[];let s=i.slice();for(const o of i){const u=n.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),s_(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),s_(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class QA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Mw()?Ow().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await qA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return r_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return r_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function s_(i){return xd(JSON.stringify({version:2,heartbeats:i})).length}function YA(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}function XA(i){qa(new na("platform-logger",e=>new oA(e),"PRIVATE")),qa(new na("heartbeat",e=>new GA(e),"PRIVATE")),Ai(qm,t_,i),Ai(qm,t_,"esm2020"),Ai("fire-js","")}XA("");var $A="firebase",WA="12.6.0";Ai($A,WA,"app");function Jb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const JA=Jb,Zb=new xu("auth","Firebase",Jb());const Nd=new _p("@firebase/auth");function ZA(i,...e){Nd.logLevel<=St.WARN&&Nd.warn(`Auth (${nl}): ${i}`,...e)}function gd(i,...e){Nd.logLevel<=St.ERROR&&Nd.error(`Auth (${nl}): ${i}`,...e)}function di(i,...e){throw Tp(i,...e)}function Ri(i,...e){return Tp(i,...e)}function eE(i,e,n){const s={...JA(),[e]:n};return new xu("auth","Firebase",s).create(e,{appName:i.name})}function is(i){return eE(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tp(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return Zb.create(i,...e)}function et(i,e,...n){if(!i)throw Tp(e,...n)}function ns(i){const e="INTERNAL ASSERTION FAILED: "+i;throw gd(e),new Error(e)}function ls(i,e){i||ns(e)}function Gm(){return typeof self<"u"&&self.location?.href||""}function eR(){return a_()==="http:"||a_()==="https:"}function a_(){return typeof self<"u"&&self.location?.protocol||null}function tR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eR()||xw()||"connection"in navigator)?navigator.onLine:!0}function nR(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class ku{constructor(e,n){this.shortDelay=e,this.longDelay=n,ls(n>e,"Short delay should be less than long delay!"),this.isMobile=Rw()||Nw()}get(){return tR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Sp(i,e){ls(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class tE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ns("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ns("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ns("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const iR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],sR=new ku(3e4,6e4);function hs(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Vi(i,e,n,s,o={}){return nE(i,o,async()=>{let u={},h={};s&&(e==="GET"?h=s:u={body:JSON.stringify(s)});const g=Nu({key:i.config.apiKey,...h}).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const m={method:e,headers:p,...u};return Iw()||(m.referrerPolicy="no-referrer"),i.emulatorConfig&&ua(i.emulatorConfig.host)&&(m.credentials="include"),tE.fetch()(await rE(i,i.config.apiHost,n,g),m)})}async function nE(i,e,n){i._canInitEmulator=!1;const s={...rR,...e};try{const o=new oR(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw ud(i,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const g=u.ok?h.errorMessage:h.error.message,[p,m]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw ud(i,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw ud(i,"email-already-in-use",h);if(p==="USER_DISABLED")throw ud(i,"user-disabled",h);const _=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw eE(i,_,m);di(i,_)}}catch(o){if(o instanceof Oi)throw o;di(i,"network-request-failed",{message:String(o)})}}async function Du(i,e,n,s,o={}){const u=await Vi(i,e,n,s,o);return"mfaPendingCredential"in u&&di(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function rE(i,e,n,s){const o=`${e}${n}?${s}`,u=i,h=u.config.emulator?Sp(i.config,o):`${i.config.apiScheme}://${o}`;return iR.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function aR(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Ri(this.auth,"network-request-failed")),sR.get())})}}function ud(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Ri(i,e,s);return o.customData._tokenResponse=n,o}function o_(i){return i!==void 0&&i.enterprise!==void 0}class lR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return aR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function uR(i,e){return Vi(i,"GET","/v2/recaptchaConfig",hs(i,e))}async function cR(i,e){return Vi(i,"POST","/v1/accounts:delete",e)}async function kd(i,e){return Vi(i,"POST","/v1/accounts:lookup",e)}function fu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dR(i,e=!1){const n=rn(i),s=await n.getIdToken(e),o=wp(s);et(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u?.sign_in_provider;return{claims:o,token:s,authTime:fu(Im(o.auth_time)),issuedAtTime:fu(Im(o.iat)),expirationTime:fu(Im(o.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Im(i){return Number(i)*1e3}function wp(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return gd("JWT malformed, contained fewer than 3 sections"),null;try{const o=qb(n);return o?JSON.parse(o):(gd("Failed to decode base64 JWT payload"),null)}catch(o){return gd("Caught error parsing JWT payload as JSON",o?.toString()),null}}function l_(i){const e=wp(i);return et(e,"internal-error"),et(typeof e.exp<"u","internal-error"),et(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Yo(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Oi&&hR(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function hR({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class fR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Km{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=fu(this.lastLoginAt),this.creationTime=fu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Dd(i){const e=i.auth,n=await i.getIdToken(),s=await Yo(i,kd(e,{idToken:n}));et(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?iE(o.providerUserInfo):[],h=pR(i.providerData,u),g=i.isAnonymous,p=!(i.email&&o.passwordHash)&&!h?.length,m=g?p:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Km(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(i,_)}async function mR(i){const e=rn(i);await Dd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pR(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function iE(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function gR(i,e){const n=await nE(i,{},async()=>{const s=Nu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,h=await rE(i,o,"/v1/token",`key=${u}`),g=await i._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:s};return i.emulatorConfig&&ua(i.emulatorConfig.host)&&(p.credentials="include"),tE.fetch()(h,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yR(i,e){return Vi(i,"POST","/v2/accounts:revokeToken",hs(i,e))}class Fo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){et(e.idToken,"internal-error"),et(typeof e.idToken<"u","internal-error"),et(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):l_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){et(e.length!==0,"internal-error");const n=l_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(et(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await gR(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,h=new Fo;return s&&(et(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(et(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(et(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fo,this.toJSON())}_performRefresh(){return ns("not implemented")}}function Gs(i,e){et(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ci{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new fR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Km(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Yo(this,this.stsTokenManager.getToken(this.auth,e));return et(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return dR(this,e)}reload(){return mR(this)}_assign(e){this!==e&&(et(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ci({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Dd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vr(this.auth.app))return Promise.reject(is(this.auth));const e=await this.getIdToken();return await Yo(this,cR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,h=n.photoURL??void 0,g=n.tenantId??void 0,p=n._redirectEventId??void 0,m=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:w,providerData:P,stsTokenManager:F}=n;et(T&&F,e,"internal-error");const B=Fo.fromJSON(this.name,F);et(typeof T=="string",e,"internal-error"),Gs(s,e.name),Gs(o,e.name),et(typeof S=="boolean",e,"internal-error"),et(typeof w=="boolean",e,"internal-error"),Gs(u,e.name),Gs(h,e.name),Gs(g,e.name),Gs(p,e.name),Gs(m,e.name),Gs(_,e.name);const ye=new ci({uid:T,auth:e,email:o,emailVerified:S,displayName:s,isAnonymous:w,photoURL:h,phoneNumber:u,tenantId:g,stsTokenManager:B,createdAt:m,lastLoginAt:_});return P&&Array.isArray(P)&&(ye.providerData=P.map(he=>({...he}))),p&&(ye._redirectEventId=p),ye}static async _fromIdTokenResponse(e,n,s=!1){const o=new Fo;o.updateFromServerResponse(n);const u=new ci({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Dd(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];et(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?iE(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!u?.length,g=new Fo;g.updateFromIdToken(s);const p=new ci({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:h}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Km(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(p,m),p}}const u_=new Map;function rs(i){ls(i instanceof Function,"Expected a class definition");let e=u_.get(i);return e?(ls(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,u_.set(i,e),e)}class sE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}sE.type="NONE";const c_=sE;function yd(i,e,n){return`firebase:${i}:${e}:${n}`}class Ho{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=yd(this.userKey,o.apiKey,u),this.fullPersistenceKey=yd("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await kd(this.auth,{idToken:e}).catch(()=>{});return n?ci._fromGetAccountInfoResponse(this.auth,n,e):null}return ci._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Ho(rs(c_),e,s);const o=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let u=o[0]||rs(c_);const h=yd(s,e.config.apiKey,e.name);let g=null;for(const m of n)try{const _=await m._get(h);if(_){let T;if(typeof _=="string"){const S=await kd(e,{idToken:_}).catch(()=>{});if(!S)break;T=await ci._fromGetAccountInfoResponse(e,S,_)}else T=ci._fromJSON(e,_);m!==u&&(g=T),u=m;break}}catch{}const p=o.filter(m=>m._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new Ho(u,e,s):(u=p[0],g&&await u._set(h,g.toJSON()),await Promise.all(n.map(async m=>{if(m!==u)try{await m._remove(h)}catch{}})),new Ho(u,e,s))}}function d_(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dE(e))return"Blackberry";if(hE(e))return"Webos";if(oE(e))return"Safari";if((e.includes("chrome/")||lE(e))&&!e.includes("edge/"))return"Chrome";if(cE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if(s?.length===2)return s[1]}return"Other"}function aE(i=ar()){return/firefox\//i.test(i)}function oE(i=ar()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lE(i=ar()){return/crios\//i.test(i)}function uE(i=ar()){return/iemobile/i.test(i)}function cE(i=ar()){return/android/i.test(i)}function dE(i=ar()){return/blackberry/i.test(i)}function hE(i=ar()){return/webos/i.test(i)}function Ap(i=ar()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function vR(i=ar()){return Ap(i)&&!!window.navigator?.standalone}function _R(){return kw()&&document.documentMode===10}function fE(i=ar()){return Ap(i)||cE(i)||hE(i)||dE(i)||/windows phone/i.test(i)||uE(i)}function mE(i,e=[]){let n;switch(i){case"Browser":n=d_(ar());break;case"Worker":n=`${d_(ar())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${nl}/${s}`}class bR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((h,g)=>{try{const p=e(u);h(p)}catch(p){g(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function ER(i,e={}){return Vi(i,"GET","/v2/passwordPolicy",hs(i,e))}const TR=6;class SR{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??TR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class wR{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new h_(this),this.idTokenSubscription=new h_(this),this.beforeStateQueue=new bR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=rs(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ho.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await kd(this,{idToken:e}),s=await ci._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Vr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,h=s?._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===h)&&g?.user&&(s=g.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Dd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vr(this.app))return Promise.reject(is(this));const n=e?rn(e):null;return n&&et(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&et(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vr(this.app)?Promise.reject(is(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vr(this.app)?Promise.reject(is(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ER(this),n=new SR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xu("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await yR(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&rs(e)||this._popupRedirectResolver;et(n,this,"argument-error"),this.redirectPersistenceManager=await Ho.create(this,[rs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let h=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(et(g,this,"internal-error"),g.then(()=>{h||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{h=!0,p()}}else{const p=e.addObserver(n);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Vr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&ZA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ca(i){return rn(i)}class h_{constructor(e){this.auth=e,this.observer=null,this.addObserver=Uw(n=>this.observer=n)}get next(){return et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let th={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AR(i){th=i}function pE(i){return th.loadJS(i)}function RR(){return th.recaptchaEnterpriseScript}function CR(){return th.gapiScript}function IR(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class xR{constructor(){this.enterprise=new NR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class NR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const kR="recaptcha-enterprise",gE="NO_RECAPTCHA";class DR{constructor(e){this.type=kR,this.auth=ca(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,g)=>{uR(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const m=new lR(p);return u.tenantId==null?u._agentRecaptchaConfig=m:u._tenantRecaptchaConfigs[u.tenantId]=m,h(m.siteKey)}}).catch(p=>{g(p)})})}function o(u,h,g){const p=window.grecaptcha;o_(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(m=>{h(m)}).catch(()=>{h(gE)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new xR().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{s(this.auth).then(g=>{if(!n&&o_(window.grecaptcha))o(g,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=RR();p.length!==0&&(p+=g),pE(p).then(()=>{o(g,u,h)}).catch(m=>{h(m)})}}).catch(g=>{h(g)})})}}async function f_(i,e,n,s=!1,o=!1){const u=new DR(i);let h;if(o)h=gE;else try{h=await u.verify(n)}catch{h=await u.verify(n,!0)}const g={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const p=g.phoneEnrollmentInfo.phoneNumber,m=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:m,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const p=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return s?Object.assign(g,{captchaResp:h}):Object.assign(g,{captchaResponse:h}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function Md(i,e,n,s,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await f_(i,e,n,n==="getOobCode");return s(i,u)}else return s(i,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await f_(i,e,n,n==="getOobCode");return s(i,h)}else return Promise.reject(u)})}function MR(i,e){const n=Zd(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Ba(u,e??{}))return o;di(o,"already-initialized")}return n.initialize({options:e})}function OR(i,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(rs);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function VR(i,e,n){const s=ca(i);et(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=yE(e),{host:h,port:g}=jR(e),p=g===null?"":`:${g}`,m={url:`${u}//${h}${p}/`},_=Object.freeze({host:h,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){et(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),et(Ba(m,s.config.emulator)&&Ba(_,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=_,s.settings.appVerificationDisabledForTesting=!0,ua(h)?(yp(`${u}//${h}${p}`),vp("Auth",!0)):LR()}function yE(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function jR(i){const e=yE(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:m_(s.substr(u.length+1))}}else{const[u,h]=s.split(":");return{host:u,port:m_(h)}}}function m_(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function LR(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class Rp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ns("not implemented")}_getIdTokenResponse(e){return ns("not implemented")}_linkToIdToken(e,n){return ns("not implemented")}_getReauthenticationResolver(e){return ns("not implemented")}}async function PR(i,e){return Vi(i,"POST","/v1/accounts:update",e)}async function UR(i,e){return Vi(i,"POST","/v1/accounts:signUp",e)}async function zR(i,e){return Du(i,"POST","/v1/accounts:signInWithPassword",hs(i,e))}async function vE(i,e){return Vi(i,"POST","/v1/accounts:sendOobCode",hs(i,e))}async function BR(i,e){return vE(i,e)}async function qR(i,e){return vE(i,e)}async function FR(i,e){return Du(i,"POST","/v1/accounts:signInWithEmailLink",hs(i,e))}async function HR(i,e){return Du(i,"POST","/v1/accounts:signInWithEmailLink",hs(i,e))}class bu extends Rp{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new bu(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new bu(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Md(e,n,"signInWithPassword",zR);case"emailLink":return FR(e,{email:this._email,oobCode:this._password});default:di(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Md(e,s,"signUpPassword",UR);case"emailLink":return HR(e,{idToken:n,email:this._email,oobCode:this._password});default:di(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Go(i,e){return Du(i,"POST","/v1/accounts:signInWithIdp",hs(i,e))}const GR="http://localhost";class Fa extends Rp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Fa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):di("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const h=new Fa(s,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return Go(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Go(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Go(e,n)}buildRequest(){const e={requestUri:GR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Nu(n)}return e}}function KR(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function QR(i){const e=au(ou(i)).link,n=e?au(ou(e)).deep_link_id:null,s=au(ou(i)).deep_link_id;return(s?au(ou(s)).link:null)||s||n||e||i}class Cp{constructor(e){const n=au(ou(e)),s=n.apiKey??null,o=n.oobCode??null,u=KR(n.mode??null);et(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=QR(e);try{return new Cp(n)}catch{return null}}}class Ya{constructor(){this.providerId=Ya.PROVIDER_ID}static credential(e,n){return bu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Cp.parseLink(n);return et(s,"argument-error"),bu._fromEmailAndCode(e,s.code,s.tenantId)}}Ya.PROVIDER_ID="password";Ya.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ya.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class _E{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Mu extends _E{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ks extends Mu{constructor(){super("facebook.com")}static credential(e){return Fa._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ks.credential(e.oauthAccessToken)}catch{return null}}}Ks.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ks.PROVIDER_ID="facebook.com";class Qs extends Mu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Fa._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Qs.credential(n,s)}catch{return null}}}Qs.GOOGLE_SIGN_IN_METHOD="google.com";Qs.PROVIDER_ID="google.com";class Ys extends Mu{constructor(){super("github.com")}static credential(e){return Fa._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ys.credentialFromTaggedObject(e)}static credentialFromError(e){return Ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ys.credential(e.oauthAccessToken)}catch{return null}}}Ys.GITHUB_SIGN_IN_METHOD="github.com";Ys.PROVIDER_ID="github.com";class Xs extends Mu{constructor(){super("twitter.com")}static credential(e,n){return Fa._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Xs.credential(n,s)}catch{return null}}}Xs.TWITTER_SIGN_IN_METHOD="twitter.com";Xs.PROVIDER_ID="twitter.com";async function YR(i,e){return Du(i,"POST","/v1/accounts:signUp",hs(i,e))}class Ha{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await ci._fromIdTokenResponse(e,s,o),h=p_(s);return new Ha({user:u,providerId:h,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=p_(s);return new Ha({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function p_(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class Od extends Oi{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Od.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Od(e,n,s,o)}}function bE(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Od._fromErrorAndOperation(i,u,e,s):u})}async function XR(i,e,n=!1){const s=await Yo(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return Ha._forOperation(i,"link",s)}async function EE(i,e,n=!1){const{auth:s}=i;if(Vr(s.app))return Promise.reject(is(s));const o="reauthenticate";try{const u=await Yo(i,bE(s,o,e,i),n);et(u.idToken,s,"internal-error");const h=wp(u.idToken);et(h,s,"internal-error");const{sub:g}=h;return et(i.uid===g,s,"user-mismatch"),Ha._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&di(s,"user-mismatch"),u}}async function TE(i,e,n=!1){if(Vr(i.app))return Promise.reject(is(i));const s="signIn",o=await bE(i,s,e),u=await Ha._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}async function $R(i,e){return TE(ca(i),e)}async function WR(i,e){return EE(rn(i),e)}async function SE(i){const e=ca(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function JR(i,e,n){const s=ca(i);await Md(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",BR)}async function vd(i,e,n){if(Vr(i.app))return Promise.reject(is(i));const s=ca(i),h=await Md(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",YR).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&SE(i),p}),g=await Ha._fromIdTokenResponse(s,"signIn",h);return await s._updateCurrentUser(g.user),g}function ZR(i,e,n){return Vr(i.app)?Promise.reject(is(i)):$R(rn(i),Ya.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&SE(i),s})}async function g_(i,e,n){const s=rn(i),u={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await i.getIdToken(),newEmail:e},{email:h}=await qR(s.auth,u);h!==i.email&&await i.reload()}function eC(i,e){return tC(rn(i),null,e)}async function tC(i,e,n){const{auth:s}=i,u={idToken:await i.getIdToken(),returnSecureToken:!0};n&&(u.password=n);const h=await Yo(i,PR(s,u));await i._updateTokensIfNecessary(h,!0)}function nC(i,e,n,s){return rn(i).onIdTokenChanged(e,n,s)}function rC(i,e,n){return rn(i).beforeAuthStateChanged(e,n)}function iC(i,e,n,s){return rn(i).onAuthStateChanged(e,n,s)}function sC(i){return rn(i).signOut()}const Vd="__sak";class wE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Vd,"1"),this.storage.removeItem(Vd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const aC=1e3,oC=10;class AE extends wE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,g,p)=>{this.notifyListeners(h,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!n&&this.localCache[s]===h||this.notifyListeners(s,h)},u=this.storage.getItem(s);_R()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,oC):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},aC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}AE.type="LOCAL";const lC=AE;class RE extends wE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}RE.type="SESSION";const CE=RE;function uC(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class nh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new nh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,h=this.handlersMap[o];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const g=Array.from(h).map(async m=>m(n.origin,u)),p=await uC(g);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nh.receivers=[];function Ip(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}class cC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((g,p)=>{const m=Ip("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===m)switch(S.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(S.data.response);break;default:clearTimeout(_),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function Ci(){return window}function dC(i){Ci().location.href=i}function IE(){return typeof Ci().WorkerGlobalScope<"u"&&typeof Ci().importScripts=="function"}async function hC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fC(){return navigator?.serviceWorker?.controller||null}function mC(){return IE()?self:null}const xE="firebaseLocalStorageDb",pC=1,jd="firebaseLocalStorage",NE="fbase_key";class Ou{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function rh(i,e){return i.transaction([jd],e?"readwrite":"readonly").objectStore(jd)}function gC(){const i=indexedDB.deleteDatabase(xE);return new Ou(i).toPromise()}function Qm(){const i=indexedDB.open(xE,pC);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(jd,{keyPath:NE})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(jd)?e(s):(s.close(),await gC(),e(await Qm()))})})}async function y_(i,e,n){const s=rh(i,!0).put({[NE]:e,value:n});return new Ou(s).toPromise()}async function yC(i,e){const n=rh(i,!1).get(e),s=await new Ou(n).toPromise();return s===void 0?null:s.value}function v_(i,e){const n=rh(i,!0).delete(e);return new Ou(n).toPromise()}const vC=800,_C=3;class kE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>_C)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return IE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nh._getInstance(mC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await hC(),!this.activeServiceWorker)return;this.sender=new cC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qm();return await y_(e,Vd,"1"),await v_(e,Vd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>y_(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>yC(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>v_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=rh(o,!1).getAll();return new Ou(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kE.type="LOCAL";const bC=kE;new ku(3e4,6e4);function EC(i,e){return e?rs(e):(et(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class xp extends Rp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Go(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Go(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Go(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function TC(i){return TE(i.auth,new xp(i),i.bypassAuthState)}function SC(i){const{auth:e,user:n}=i;return et(n,e,"internal-error"),EE(n,new xp(i),i.bypassAuthState)}async function wC(i){const{auth:e,user:n}=i;return et(n,e,"internal-error"),XR(n,new xp(i),i.bypassAuthState)}class DE{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:h,type:g}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return TC;case"linkViaPopup":case"linkViaRedirect":return wC;case"reauthViaPopup":case"reauthViaRedirect":return SC;default:di(this.auth,"internal-error")}}resolve(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const AC=new ku(2e3,1e4);class Bo extends DE{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Bo.currentPopupAction&&Bo.currentPopupAction.cancel(),Bo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return et(e,this.auth,"internal-error"),e}async onExecution(){ls(this.filter.length===1,"Popup operations only handle one event");const e=Ip();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,AC.get())};e()}}Bo.currentPopupAction=null;const RC="pendingRedirect",_d=new Map;class CC extends DE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=_d.get(this.auth._key());if(!e){try{const s=await IC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}_d.set(this.auth._key(),e)}return this.bypassAuthState||_d.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IC(i,e){const n=kC(e),s=NC(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function xC(i,e){_d.set(i._key(),e)}function NC(i){return rs(i._redirectPersistence)}function kC(i){return yd(RC,i.config.apiKey,i.name)}async function DC(i,e,n=!1){if(Vr(i.app))return Promise.reject(is(i));const s=ca(i),o=EC(s,e),h=await new CC(s,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}const MC=600*1e3;class OC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!ME(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ri(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=MC&&this.cachedEventUids.clear(),this.cachedEventUids.has(__(e))}saveEventToCache(e){this.cachedEventUids.add(__(e)),this.lastProcessedEventTime=Date.now()}}function __(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function ME({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function VC(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ME(i);default:return!1}}async function jC(i,e={}){return Vi(i,"GET","/v1/projects",e)}const LC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PC=/^https?/;async function UC(i){if(i.config.emulator)return;const{authorizedDomains:e}=await jC(i);for(const n of e)try{if(zC(n))return}catch{}di(i,"unauthorized-domain")}function zC(i){const e=Gm(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const h=new URL(i);return h.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===s}if(!PC.test(n))return!1;if(LC.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const BC=new ku(3e4,6e4);function b_(){const i=Ci().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function qC(i){return new Promise((e,n)=>{function s(){b_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{b_(),n(Ri(i,"network-request-failed"))},timeout:BC.get()})}if(Ci().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ci().gapi?.load)s();else{const o=IR("iframefcb");return Ci()[o]=()=>{gapi.load?s():n(Ri(i,"network-request-failed"))},pE(`${CR()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw bd=null,e})}let bd=null;function FC(i){return bd=bd||qC(i),bd}const HC=new ku(5e3,15e3),GC="__/auth/iframe",KC="emulator/auth/iframe",QC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},YC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XC(i){const e=i.config;et(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Sp(e,KC):`https://${i.config.authDomain}/${GC}`,s={apiKey:e.apiKey,appName:i.name,v:nl},o=YC.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Nu(s).slice(1)}`}async function $C(i){const e=await FC(i),n=Ci().gapi;return et(n,i,"internal-error"),e.open({where:document.body,url:XC(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QC,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const h=Ri(i,"network-request-failed"),g=Ci().setTimeout(()=>{u(h)},HC.get());function p(){Ci().clearTimeout(g),o(s)}s.ping(p).then(p,()=>{u(h)})}))}const WC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JC=500,ZC=600,e2="_blank",t2="http://localhost";class E_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function n2(i,e,n,s=JC,o=ZC){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const p={...WC,width:s.toString(),height:o.toString(),top:u,left:h},m=ar().toLowerCase();n&&(g=lE(m)?e2:n),aE(m)&&(e=e||t2,p.scrollbars="yes");const _=Object.entries(p).reduce((S,[w,P])=>`${S}${w}=${P},`,"");if(vR(m)&&g!=="_self")return r2(e||"",g),new E_(null);const T=window.open(e||"",g,_);et(T,i,"popup-blocked");try{T.focus()}catch{}return new E_(T)}function r2(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const i2="__/auth/handler",s2="emulator/auth/handler",a2=encodeURIComponent("fac");async function T_(i,e,n,s,o,u){et(i.config.authDomain,i,"auth-domain-config-required"),et(i.config.apiKey,i,"invalid-api-key");const h={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:nl,eventId:o};if(e instanceof _E){e.setDefaultLanguage(i.languageCode),h.providerId=e.providerId||"",Pw(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))h[_]=T}if(e instanceof Mu){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(h.scopes=_.join(","))}i.tenantId&&(h.tid=i.tenantId);const g=h;for(const _ of Object.keys(g))g[_]===void 0&&delete g[_];const p=await i._getAppCheckToken(),m=p?`#${a2}=${encodeURIComponent(p)}`:"";return`${o2(i)}?${Nu(g).slice(1)}${m}`}function o2({config:i}){return i.emulator?Sp(i,s2):`https://${i.authDomain}/${i2}`}const xm="webStorageSupport";class l2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=CE,this._completeRedirectFn=DC,this._overrideRedirectResult=xC}async _openPopup(e,n,s,o){ls(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await T_(e,n,s,Gm(),o);return n2(e,u,Ip())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await T_(e,n,s,Gm(),o);return dC(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(ls(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await $C(e),s=new OC(e);return n.register("authEvent",o=>(et(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xm,{type:xm},o=>{const u=o?.[0]?.[xm];u!==void 0&&n(!!u),di(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=UC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return fE()||oE()||Ap()}}const u2=l2;var S_="@firebase/auth",w_="1.11.1";class c2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function d2(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function h2(i){qa(new na("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:g}=s.options;et(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:h,authDomain:g,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mE(i)},m=new wR(s,o,u,p);return OR(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),qa(new na("auth-internal",e=>{const n=ca(e.getProvider("auth").getImmediate());return(s=>new c2(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ai(S_,w_,d2(i)),Ai(S_,w_,"esm2020")}const f2=300,m2=Kb("authIdTokenMaxAge")||f2;let A_=null;const p2=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>m2)return;const o=n?.token;A_!==o&&(A_=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function OE(i=eh()){const e=Zd(i,"auth");if(e.isInitialized())return e.getImmediate();const n=MR(i,{popupRedirectResolver:u2,persistence:[bC,lC,CE]}),s=Kb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const h=p2(u.toString());rC(n,h,()=>h(n.currentUser)),nC(n,g=>h(g))}}const o=Fb("auth");return o&&VR(n,`http://${o}`),n}function g2(){return document.getElementsByTagName("head")?.[0]??document}AR({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=Ri("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",g2().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});h2("Browser");var R_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ea,VE;(function(){var i;function e(N,C){function I(){}I.prototype=C.prototype,N.F=C.prototype,N.prototype=new I,N.prototype.constructor=N,N.D=function(V,k,L){for(var x=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)x[Ge-2]=arguments[Ge];return C.prototype[k].apply(V,x)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,C,I){I||(I=0);const V=Array(16);if(typeof C=="string")for(var k=0;k<16;++k)V[k]=C.charCodeAt(I++)|C.charCodeAt(I++)<<8|C.charCodeAt(I++)<<16|C.charCodeAt(I++)<<24;else for(k=0;k<16;++k)V[k]=C[I++]|C[I++]<<8|C[I++]<<16|C[I++]<<24;C=N.g[0],I=N.g[1],k=N.g[2];let L=N.g[3],x;x=C+(L^I&(k^L))+V[0]+3614090360&4294967295,C=I+(x<<7&4294967295|x>>>25),x=L+(k^C&(I^k))+V[1]+3905402710&4294967295,L=C+(x<<12&4294967295|x>>>20),x=k+(I^L&(C^I))+V[2]+606105819&4294967295,k=L+(x<<17&4294967295|x>>>15),x=I+(C^k&(L^C))+V[3]+3250441966&4294967295,I=k+(x<<22&4294967295|x>>>10),x=C+(L^I&(k^L))+V[4]+4118548399&4294967295,C=I+(x<<7&4294967295|x>>>25),x=L+(k^C&(I^k))+V[5]+1200080426&4294967295,L=C+(x<<12&4294967295|x>>>20),x=k+(I^L&(C^I))+V[6]+2821735955&4294967295,k=L+(x<<17&4294967295|x>>>15),x=I+(C^k&(L^C))+V[7]+4249261313&4294967295,I=k+(x<<22&4294967295|x>>>10),x=C+(L^I&(k^L))+V[8]+1770035416&4294967295,C=I+(x<<7&4294967295|x>>>25),x=L+(k^C&(I^k))+V[9]+2336552879&4294967295,L=C+(x<<12&4294967295|x>>>20),x=k+(I^L&(C^I))+V[10]+4294925233&4294967295,k=L+(x<<17&4294967295|x>>>15),x=I+(C^k&(L^C))+V[11]+2304563134&4294967295,I=k+(x<<22&4294967295|x>>>10),x=C+(L^I&(k^L))+V[12]+1804603682&4294967295,C=I+(x<<7&4294967295|x>>>25),x=L+(k^C&(I^k))+V[13]+4254626195&4294967295,L=C+(x<<12&4294967295|x>>>20),x=k+(I^L&(C^I))+V[14]+2792965006&4294967295,k=L+(x<<17&4294967295|x>>>15),x=I+(C^k&(L^C))+V[15]+1236535329&4294967295,I=k+(x<<22&4294967295|x>>>10),x=C+(k^L&(I^k))+V[1]+4129170786&4294967295,C=I+(x<<5&4294967295|x>>>27),x=L+(I^k&(C^I))+V[6]+3225465664&4294967295,L=C+(x<<9&4294967295|x>>>23),x=k+(C^I&(L^C))+V[11]+643717713&4294967295,k=L+(x<<14&4294967295|x>>>18),x=I+(L^C&(k^L))+V[0]+3921069994&4294967295,I=k+(x<<20&4294967295|x>>>12),x=C+(k^L&(I^k))+V[5]+3593408605&4294967295,C=I+(x<<5&4294967295|x>>>27),x=L+(I^k&(C^I))+V[10]+38016083&4294967295,L=C+(x<<9&4294967295|x>>>23),x=k+(C^I&(L^C))+V[15]+3634488961&4294967295,k=L+(x<<14&4294967295|x>>>18),x=I+(L^C&(k^L))+V[4]+3889429448&4294967295,I=k+(x<<20&4294967295|x>>>12),x=C+(k^L&(I^k))+V[9]+568446438&4294967295,C=I+(x<<5&4294967295|x>>>27),x=L+(I^k&(C^I))+V[14]+3275163606&4294967295,L=C+(x<<9&4294967295|x>>>23),x=k+(C^I&(L^C))+V[3]+4107603335&4294967295,k=L+(x<<14&4294967295|x>>>18),x=I+(L^C&(k^L))+V[8]+1163531501&4294967295,I=k+(x<<20&4294967295|x>>>12),x=C+(k^L&(I^k))+V[13]+2850285829&4294967295,C=I+(x<<5&4294967295|x>>>27),x=L+(I^k&(C^I))+V[2]+4243563512&4294967295,L=C+(x<<9&4294967295|x>>>23),x=k+(C^I&(L^C))+V[7]+1735328473&4294967295,k=L+(x<<14&4294967295|x>>>18),x=I+(L^C&(k^L))+V[12]+2368359562&4294967295,I=k+(x<<20&4294967295|x>>>12),x=C+(I^k^L)+V[5]+4294588738&4294967295,C=I+(x<<4&4294967295|x>>>28),x=L+(C^I^k)+V[8]+2272392833&4294967295,L=C+(x<<11&4294967295|x>>>21),x=k+(L^C^I)+V[11]+1839030562&4294967295,k=L+(x<<16&4294967295|x>>>16),x=I+(k^L^C)+V[14]+4259657740&4294967295,I=k+(x<<23&4294967295|x>>>9),x=C+(I^k^L)+V[1]+2763975236&4294967295,C=I+(x<<4&4294967295|x>>>28),x=L+(C^I^k)+V[4]+1272893353&4294967295,L=C+(x<<11&4294967295|x>>>21),x=k+(L^C^I)+V[7]+4139469664&4294967295,k=L+(x<<16&4294967295|x>>>16),x=I+(k^L^C)+V[10]+3200236656&4294967295,I=k+(x<<23&4294967295|x>>>9),x=C+(I^k^L)+V[13]+681279174&4294967295,C=I+(x<<4&4294967295|x>>>28),x=L+(C^I^k)+V[0]+3936430074&4294967295,L=C+(x<<11&4294967295|x>>>21),x=k+(L^C^I)+V[3]+3572445317&4294967295,k=L+(x<<16&4294967295|x>>>16),x=I+(k^L^C)+V[6]+76029189&4294967295,I=k+(x<<23&4294967295|x>>>9),x=C+(I^k^L)+V[9]+3654602809&4294967295,C=I+(x<<4&4294967295|x>>>28),x=L+(C^I^k)+V[12]+3873151461&4294967295,L=C+(x<<11&4294967295|x>>>21),x=k+(L^C^I)+V[15]+530742520&4294967295,k=L+(x<<16&4294967295|x>>>16),x=I+(k^L^C)+V[2]+3299628645&4294967295,I=k+(x<<23&4294967295|x>>>9),x=C+(k^(I|~L))+V[0]+4096336452&4294967295,C=I+(x<<6&4294967295|x>>>26),x=L+(I^(C|~k))+V[7]+1126891415&4294967295,L=C+(x<<10&4294967295|x>>>22),x=k+(C^(L|~I))+V[14]+2878612391&4294967295,k=L+(x<<15&4294967295|x>>>17),x=I+(L^(k|~C))+V[5]+4237533241&4294967295,I=k+(x<<21&4294967295|x>>>11),x=C+(k^(I|~L))+V[12]+1700485571&4294967295,C=I+(x<<6&4294967295|x>>>26),x=L+(I^(C|~k))+V[3]+2399980690&4294967295,L=C+(x<<10&4294967295|x>>>22),x=k+(C^(L|~I))+V[10]+4293915773&4294967295,k=L+(x<<15&4294967295|x>>>17),x=I+(L^(k|~C))+V[1]+2240044497&4294967295,I=k+(x<<21&4294967295|x>>>11),x=C+(k^(I|~L))+V[8]+1873313359&4294967295,C=I+(x<<6&4294967295|x>>>26),x=L+(I^(C|~k))+V[15]+4264355552&4294967295,L=C+(x<<10&4294967295|x>>>22),x=k+(C^(L|~I))+V[6]+2734768916&4294967295,k=L+(x<<15&4294967295|x>>>17),x=I+(L^(k|~C))+V[13]+1309151649&4294967295,I=k+(x<<21&4294967295|x>>>11),x=C+(k^(I|~L))+V[4]+4149444226&4294967295,C=I+(x<<6&4294967295|x>>>26),x=L+(I^(C|~k))+V[11]+3174756917&4294967295,L=C+(x<<10&4294967295|x>>>22),x=k+(C^(L|~I))+V[2]+718787259&4294967295,k=L+(x<<15&4294967295|x>>>17),x=I+(L^(k|~C))+V[9]+3951481745&4294967295,N.g[0]=N.g[0]+C&4294967295,N.g[1]=N.g[1]+(k+(x<<21&4294967295|x>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+L&4294967295}s.prototype.v=function(N,C){C===void 0&&(C=N.length);const I=C-this.blockSize,V=this.C;let k=this.h,L=0;for(;L<C;){if(k==0)for(;L<=I;)o(this,N,L),L+=this.blockSize;if(typeof N=="string"){for(;L<C;)if(V[k++]=N.charCodeAt(L++),k==this.blockSize){o(this,V),k=0;break}}else for(;L<C;)if(V[k++]=N[L++],k==this.blockSize){o(this,V),k=0;break}}this.h=k,this.o+=C},s.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var C=1;C<N.length-8;++C)N[C]=0;C=this.o*8;for(var I=N.length-8;I<N.length;++I)N[I]=C&255,C/=256;for(this.v(N),N=Array(16),C=0,I=0;I<4;++I)for(let V=0;V<32;V+=8)N[C++]=this.g[I]>>>V&255;return N};function u(N,C){var I=g;return Object.prototype.hasOwnProperty.call(I,N)?I[N]:I[N]=C(N)}function h(N,C){this.h=C;const I=[];let V=!0;for(let k=N.length-1;k>=0;k--){const L=N[k]|0;V&&L==C||(I[k]=L,V=!1)}this.g=I}var g={};function p(N){return-128<=N&&N<128?u(N,function(C){return new h([C|0],C<0?-1:0)}):new h([N|0],N<0?-1:0)}function m(N){if(isNaN(N)||!isFinite(N))return T;if(N<0)return B(m(-N));const C=[];let I=1;for(let V=0;N>=I;V++)C[V]=N/I|0,I*=4294967296;return new h(C,0)}function _(N,C){if(N.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(N.charAt(0)=="-")return B(_(N.substring(1),C));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=m(Math.pow(C,8));let V=T;for(let L=0;L<N.length;L+=8){var k=Math.min(8,N.length-L);const x=parseInt(N.substring(L,L+k),C);k<8?(k=m(Math.pow(C,k)),V=V.j(k).add(m(x))):(V=V.j(I),V=V.add(m(x)))}return V}var T=p(0),S=p(1),w=p(16777216);i=h.prototype,i.m=function(){if(F(this))return-B(this).m();let N=0,C=1;for(let I=0;I<this.g.length;I++){const V=this.i(I);N+=(V>=0?V:4294967296+V)*C,C*=4294967296}return N},i.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(P(this))return"0";if(F(this))return"-"+B(this).toString(N);const C=m(Math.pow(N,6));var I=this;let V="";for(;;){const k=Ae(I,C).g;I=ye(I,k.j(C));let L=((I.g.length>0?I.g[0]:I.h)>>>0).toString(N);if(I=k,P(I))return L+V;for(;L.length<6;)L="0"+L;V=L+V}},i.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function P(N){if(N.h!=0)return!1;for(let C=0;C<N.g.length;C++)if(N.g[C]!=0)return!1;return!0}function F(N){return N.h==-1}i.l=function(N){return N=ye(this,N),F(N)?-1:P(N)?0:1};function B(N){const C=N.g.length,I=[];for(let V=0;V<C;V++)I[V]=~N.g[V];return new h(I,~N.h).add(S)}i.abs=function(){return F(this)?B(this):this},i.add=function(N){const C=Math.max(this.g.length,N.g.length),I=[];let V=0;for(let k=0;k<=C;k++){let L=V+(this.i(k)&65535)+(N.i(k)&65535),x=(L>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);V=x>>>16,L&=65535,x&=65535,I[k]=x<<16|L}return new h(I,I[I.length-1]&-2147483648?-1:0)};function ye(N,C){return N.add(B(C))}i.j=function(N){if(P(this)||P(N))return T;if(F(this))return F(N)?B(this).j(B(N)):B(B(this).j(N));if(F(N))return B(this.j(B(N)));if(this.l(w)<0&&N.l(w)<0)return m(this.m()*N.m());const C=this.g.length+N.g.length,I=[];for(var V=0;V<2*C;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(let k=0;k<N.g.length;k++){const L=this.i(V)>>>16,x=this.i(V)&65535,Ge=N.i(k)>>>16,rt=N.i(k)&65535;I[2*V+2*k]+=x*rt,he(I,2*V+2*k),I[2*V+2*k+1]+=L*rt,he(I,2*V+2*k+1),I[2*V+2*k+1]+=x*Ge,he(I,2*V+2*k+1),I[2*V+2*k+2]+=L*Ge,he(I,2*V+2*k+2)}for(N=0;N<C;N++)I[N]=I[2*N+1]<<16|I[2*N];for(N=C;N<2*C;N++)I[N]=0;return new h(I,0)};function he(N,C){for(;(N[C]&65535)!=N[C];)N[C+1]+=N[C]>>>16,N[C]&=65535,C++}function re(N,C){this.g=N,this.h=C}function Ae(N,C){if(P(C))throw Error("division by zero");if(P(N))return new re(T,T);if(F(N))return C=Ae(B(N),C),new re(B(C.g),B(C.h));if(F(C))return C=Ae(N,B(C)),new re(B(C.g),C.h);if(N.g.length>30){if(F(N)||F(C))throw Error("slowDivide_ only works with positive integers.");for(var I=S,V=C;V.l(N)<=0;)I=ze(I),V=ze(V);var k=Ve(I,1),L=Ve(V,1);for(V=Ve(V,2),I=Ve(I,2);!P(V);){var x=L.add(V);x.l(N)<=0&&(k=k.add(I),L=x),V=Ve(V,1),I=Ve(I,1)}return C=ye(N,k.j(C)),new re(k,C)}for(k=T;N.l(C)>=0;){for(I=Math.max(1,Math.floor(N.m()/C.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),L=m(I),x=L.j(C);F(x)||x.l(N)>0;)I-=V,L=m(I),x=L.j(C);P(L)&&(L=S),k=k.add(L),N=ye(N,x)}return new re(k,N)}i.B=function(N){return Ae(this,N).h},i.and=function(N){const C=Math.max(this.g.length,N.g.length),I=[];for(let V=0;V<C;V++)I[V]=this.i(V)&N.i(V);return new h(I,this.h&N.h)},i.or=function(N){const C=Math.max(this.g.length,N.g.length),I=[];for(let V=0;V<C;V++)I[V]=this.i(V)|N.i(V);return new h(I,this.h|N.h)},i.xor=function(N){const C=Math.max(this.g.length,N.g.length),I=[];for(let V=0;V<C;V++)I[V]=this.i(V)^N.i(V);return new h(I,this.h^N.h)};function ze(N){const C=N.g.length+1,I=[];for(let V=0;V<C;V++)I[V]=N.i(V)<<1|N.i(V-1)>>>31;return new h(I,N.h)}function Ve(N,C){const I=C>>5;C%=32;const V=N.g.length-I,k=[];for(let L=0;L<V;L++)k[L]=C>0?N.i(L+I)>>>C|N.i(L+I+1)<<32-C:N.i(L+I);return new h(k,N.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,VE=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=m,h.fromString=_,ea=h}).apply(typeof R_<"u"?R_:typeof self<"u"?self:typeof window<"u"?window:{});var cd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var jE,lu,LE,Ed,Ym,PE,UE,zE;(function(){var i,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof cd=="object"&&cd];for(var y=0;y<c.length;++y){var E=c[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var E=s;c=c.split(".");for(var R=0;R<c.length-1;R++){var K=c[R];if(!(K in E))break e;E=E[K]}c=c[c.length-1],R=E[c],y=y(R),y!=R&&y!=null&&e(E,c,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(y){var E=[],R;for(R in y)Object.prototype.hasOwnProperty.call(y,R)&&E.push([R,y[R]]);return E}});var u=u||{},h=this||self;function g(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function p(c,y,E){return c.call.apply(c.bind,arguments)}function m(c,y,E){return m=p,m.apply(null,arguments)}function _(c,y){var E=Array.prototype.slice.call(arguments,1);return function(){var R=E.slice();return R.push.apply(R,arguments),c.apply(this,R)}}function T(c,y){function E(){}E.prototype=y.prototype,c.Z=y.prototype,c.prototype=new E,c.prototype.constructor=c,c.Ob=function(R,K,Z){for(var Se=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)Se[lt-2]=arguments[lt];return y.prototype[K].apply(R,Se)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function w(c){const y=c.length;if(y>0){const E=Array(y);for(let R=0;R<y;R++)E[R]=c[R];return E}return[]}function P(c,y){for(let R=1;R<arguments.length;R++){const K=arguments[R];var E=typeof K;if(E=E!="object"?E:K?Array.isArray(K)?"array":E:"null",E=="array"||E=="object"&&typeof K.length=="number"){E=c.length||0;const Z=K.length||0;c.length=E+Z;for(let Se=0;Se<Z;Se++)c[E+Se]=K[Se]}else c.push(K)}}class F{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function B(c){h.setTimeout(()=>{throw c},0)}function ye(){var c=N;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class he{constructor(){this.h=this.g=null}add(y,E){const R=re.get();R.set(y,E),this.h?this.h.next=R:this.g=R,this.h=R}}var re=new F(()=>new Ae,c=>c.reset());class Ae{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ze,Ve=!1,N=new he,C=()=>{const c=Promise.resolve(void 0);ze=()=>{c.then(I)}};function I(){for(var c;c=ye();){try{c.h.call(c.g)}catch(E){B(E)}var y=re;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}Ve=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const E=()=>{};h.addEventListener("test",E,y),h.removeEventListener("test",E,y)}catch{}return c})();function x(c){return/^[\s\xa0]*$/.test(c)}function Ge(c,y){k.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}T(Ge,k),Ge.prototype.init=function(c,y){const E=this.type=c.type,R=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(E=="mouseover"?y=c.fromElement:E=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Ge.Z.h.call(this)},Ge.prototype.h=function(){Ge.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var rt="closure_listenable_"+(Math.random()*1e6|0),$=0;function ue(c,y,E,R,K){this.listener=c,this.proxy=null,this.src=y,this.type=E,this.capture=!!R,this.ha=K,this.key=++$,this.da=this.fa=!1}function ve(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function pe(c,y,E){for(const R in c)y.call(E,c[R],R,c)}function je(c,y){for(const E in c)y.call(void 0,c[E],E,c)}function O(c){const y={};for(const E in c)y[E]=c[E];return y}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function H(c,y){let E,R;for(let K=1;K<arguments.length;K++){R=arguments[K];for(E in R)c[E]=R[E];for(let Z=0;Z<Q.length;Z++)E=Q[Z],Object.prototype.hasOwnProperty.call(R,E)&&(c[E]=R[E])}}function J(c){this.src=c,this.g={},this.h=0}J.prototype.add=function(c,y,E,R,K){const Z=c.toString();c=this.g[Z],c||(c=this.g[Z]=[],this.h++);const Se=_e(c,y,R,K);return Se>-1?(y=c[Se],E||(y.fa=!1)):(y=new ue(y,this.src,Z,!!R,K),y.fa=E,c.push(y)),y};function Te(c,y){const E=y.type;if(E in c.g){var R=c.g[E],K=Array.prototype.indexOf.call(R,y,void 0),Z;(Z=K>=0)&&Array.prototype.splice.call(R,K,1),Z&&(ve(y),c.g[E].length==0&&(delete c.g[E],c.h--))}}function _e(c,y,E,R){for(let K=0;K<c.length;++K){const Z=c[K];if(!Z.da&&Z.listener==y&&Z.capture==!!E&&Z.ha==R)return K}return-1}var Re="closure_lm_"+(Math.random()*1e6|0),We={};function Je(c,y,E,R,K){if(Array.isArray(y)){for(let Z=0;Z<y.length;Z++)Je(c,y[Z],E,R,K);return null}return E=be(E),c&&c[rt]?c.J(y,E,g(R)?!!R.capture:!1,K):qt(c,y,E,!1,R,K)}function qt(c,y,E,R,K,Z){if(!y)throw Error("Invalid event type");const Se=g(K)?!!K.capture:!!K;let lt=q(c);if(lt||(c[Re]=lt=new J(c)),E=lt.add(y,E,R,Se,Z),E.proxy)return E;if(R=Gt(),E.proxy=R,R.src=c,R.listener=E,c.addEventListener)L||(K=Se),K===void 0&&(K=!1),c.addEventListener(y.toString(),R,K);else if(c.attachEvent)c.attachEvent(en(y.toString()),R);else if(c.addListener&&c.removeListener)c.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Gt(){function c(E){return y.call(c.src,c.listener,E)}const y=sn;return c}function Ot(c,y,E,R,K){if(Array.isArray(y))for(var Z=0;Z<y.length;Z++)Ot(c,y[Z],E,R,K);else R=g(R)?!!R.capture:!!R,E=be(E),c&&c[rt]?(c=c.i,Z=String(y).toString(),Z in c.g&&(y=c.g[Z],E=_e(y,E,R,K),E>-1&&(ve(y[E]),Array.prototype.splice.call(y,E,1),y.length==0&&(delete c.g[Z],c.h--)))):c&&(c=q(c))&&(y=c.g[y.toString()],c=-1,y&&(c=_e(y,E,R,K)),(E=c>-1?y[c]:null)&&Tn(E))}function Tn(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[rt])Te(y.i,c);else{var E=c.type,R=c.proxy;y.removeEventListener?y.removeEventListener(E,R,c.capture):y.detachEvent?y.detachEvent(en(E),R):y.addListener&&y.removeListener&&y.removeListener(R),(E=q(y))?(Te(E,c),E.h==0&&(E.src=null,y[Re]=null)):ve(c)}}}function en(c){return c in We?We[c]:We[c]="on"+c}function sn(c,y){if(c.da)c=!0;else{y=new Ge(y,this);const E=c.listener,R=c.ha||c.src;c.fa&&Tn(c),c=E.call(R,y)}return c}function q(c){return c=c[Re],c instanceof J?c:null}var de="__closure_events_fn_"+(Math.random()*1e9>>>0);function be(c){return typeof c=="function"?c:(c[de]||(c[de]=function(y){return c.handleEvent(y)}),c[de])}function Ne(){V.call(this),this.i=new J(this),this.M=this,this.G=null}T(Ne,V),Ne.prototype[rt]=!0,Ne.prototype.removeEventListener=function(c,y,E,R){Ot(this,c,y,E,R)};function Ce(c,y){var E,R=c.G;if(R)for(E=[];R;R=R.G)E.push(R);if(c=c.M,R=y.type||y,typeof y=="string")y=new k(y,c);else if(y instanceof k)y.target=y.target||c;else{var K=y;y=new k(R,c),H(y,K)}K=!0;let Z,Se;if(E)for(Se=E.length-1;Se>=0;Se--)Z=y.g=E[Se],K=fe(Z,R,!0,y)&&K;if(Z=y.g=c,K=fe(Z,R,!0,y)&&K,K=fe(Z,R,!1,y)&&K,E)for(Se=0;Se<E.length;Se++)Z=y.g=E[Se],K=fe(Z,R,!1,y)&&K}Ne.prototype.N=function(){if(Ne.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const E=c.g[y];for(let R=0;R<E.length;R++)ve(E[R]);delete c.g[y],c.h--}}this.G=null},Ne.prototype.J=function(c,y,E,R){return this.i.add(String(c),y,!1,E,R)},Ne.prototype.K=function(c,y,E,R){return this.i.add(String(c),y,!0,E,R)};function fe(c,y,E,R){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let K=!0;for(let Z=0;Z<y.length;++Z){const Se=y[Z];if(Se&&!Se.da&&Se.capture==E){const lt=Se.listener,Sn=Se.ha||Se.src;Se.fa&&Te(c.i,Se),K=lt.call(Sn,R)!==!1&&K}}return K&&!R.defaultPrevented}function Me(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:h.setTimeout(c,y||0)}function Xe(c){c.g=Me(()=>{c.g=null,c.i&&(c.i=!1,Xe(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class nt extends V{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Xe(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function on(c){V.call(this),this.h=c,this.g={}}T(on,V);var ft=[];function Cn(c){pe(c.g,function(y,E){this.g.hasOwnProperty(E)&&Tn(y)},c),c.g={}}on.prototype.N=function(){on.Z.N.call(this),Cn(this)},on.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mr=h.JSON.stringify,ji=h.JSON.parse,or=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function fi(){}function Lr(){}var gn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kt(){k.call(this,"d")}T(Kt,k);function Ft(){k.call(this,"c")}T(Ft,k);var pt={},Cr=null;function er(){return Cr=Cr||new Ne}pt.Ia="serverreachability";function lr(c){k.call(this,pt.Ia,c)}T(lr,k);function Pn(c){const y=er();Ce(y,new lr(y))}pt.STAT_EVENT="statevent";function In(c,y){k.call(this,pt.STAT_EVENT,c),this.stat=y}T(In,k);function bt(c){const y=er();Ce(y,new In(y,c))}pt.Ja="timingevent";function tn(c,y){k.call(this,pt.Ja,c),this.size=y}T(tn,k);function Bn(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},y)}function Ue(){this.g=!0}Ue.prototype.ua=function(){this.g=!1};function mt(c,y,E,R,K,Z){c.info(function(){if(c.g)if(Z){var Se="",lt=Z.split("&");for(let zt=0;zt<lt.length;zt++){var Sn=lt[zt].split("=");if(Sn.length>1){const hn=Sn[0];Sn=Sn[1];const Hr=hn.split("_");Se=Hr.length>=2&&Hr[1]=="type"?Se+(hn+"="+Sn+"&"):Se+(hn+"=redacted&")}}}else Se=null;else Se=Z;return"XMLHTTP REQ ("+R+") [attempt "+K+"]: "+y+`
`+E+`
`+Se})}function G(c,y,E,R,K,Z,Se){c.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+K+"]: "+y+`
`+E+`
`+Z+" "+Se})}function ne(c,y,E,R){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+ge(c,E)+(R?" "+R:"")})}function ce(c,y){c.info(function(){return"TIMEOUT: "+y})}Ue.prototype.info=function(){};function ge(c,y){if(!c.g)return y;if(!y)return null;try{const Z=JSON.parse(y);if(Z){for(c=0;c<Z.length;c++)if(Array.isArray(Z[c])){var E=Z[c];if(!(E.length<2)){var R=E[1];if(Array.isArray(R)&&!(R.length<1)){var K=R[0];if(K!="noop"&&K!="stop"&&K!="close")for(let Se=1;Se<R.length;Se++)R[Se]=""}}}}return mr(Z)}catch{return y}}var we={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Be={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ie;function Ct(){}T(Ct,fi),Ct.prototype.g=function(){return new XMLHttpRequest},Ie=new Ct;function Ze(c){return encodeURIComponent(String(c))}function ht(c){var y=1;c=c.split(":");const E=[];for(;y>0&&c.length;)E.push(c.shift()),y--;return c.length&&E.push(c.join(":")),E}function Ye(c,y,E,R){this.j=c,this.i=y,this.l=E,this.S=R||1,this.V=new on(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Nt}function Nt(){this.i=null,this.g="",this.h=!1}var Le={},dt={};function xn(c,y,E){c.M=1,c.A=qn(Pt(y)),c.u=E,c.R=!0,ei(c,null)}function ei(c,y){c.F=Date.now(),Pr(c),c.B=Pt(c.A);var E=c.B,R=c.S;Array.isArray(R)||(R=[String(R)]),eo(E.i,"t",R),c.C=0,E=c.j.L,c.h=new Nt,c.g=nc(c.j,E?y:null,!c.u),c.P>0&&(c.O=new nt(m(c.Y,c,c.g),c.P)),y=c.V,E=c.g,R=c.ba;var K="readystatechange";Array.isArray(K)||(K&&(ft[0]=K.toString()),K=ft);for(let Z=0;Z<K.length;Z++){const Se=Je(E,K[Z],R||y.handleEvent,!1,y.h||y);if(!Se)break;y.g[Se.key]=Se}y=c.J?O(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),Pn(),mt(c.i,c.v,c.B,c.l,c.S,c.u)}Ye.prototype.ba=function(c){c=c.target;const y=this.O;y&&ri(c)==3?y.j():this.Y(c)},Ye.prototype.Y=function(c){try{if(c==this.g)e:{const lt=ri(this.g),Sn=this.g.ya(),zt=this.g.ca();if(!(lt<3)&&(lt!=3||this.g&&(this.h.h||this.g.la()||Gn(this.g)))){this.K||lt!=4||Sn==7||(Sn==8||zt<=0?Pn(3):Pn(2)),Ur(this);var y=this.g.ca();this.X=y;var E=ul(this);if(this.o=y==200,G(this.i,this.v,this.B,this.l,this.S,lt,y),this.o){if(this.U&&!this.L){t:{if(this.g){var R,K=this.g;if((R=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(R)){var Z=R;break t}}Z=null}if(c=Z)ne(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,zr(this,c);else{this.o=!1,this.m=3,bt(12),ur(this),pr(this);break e}}if(this.R){c=!0;let hn;for(;!this.K&&this.C<E.length;)if(hn=Ja(this,E),hn==dt){lt==4&&(this.m=4,bt(14),c=!1),ne(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==Le){this.m=4,bt(15),ne(this.i,this.l,E,"[Invalid Chunk]"),c=!1;break}else ne(this.i,this.l,hn,null),zr(this,hn);if(Wa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),lt!=4||E.length!=0||this.h.h||(this.m=1,bt(16),c=!1),this.o=this.o&&c,!c)ne(this.i,this.l,E,"[Invalid Chunked Response]"),ur(this),pr(this);else if(E.length>0&&!this.W){this.W=!0;var Se=this.j;Se.g==this&&Se.aa&&!Se.P&&(Se.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),vl(Se),Se.P=!0,bt(11))}}else ne(this.i,this.l,E,null),zr(this,E);lt==4&&ur(this),this.o&&!this.K&&(lt==4?Ju(this.j,this):(this.o=!1,Pr(this)))}else Ui(this.g),y==400&&E.indexOf("Unknown SID")>0?(this.m=3,bt(12)):(this.m=0,bt(13)),ur(this),pr(this)}}}catch{}finally{}};function ul(c){if(!Wa(c))return c.g.la();const y=Gn(c.g);if(y==="")return"";let E="";const R=y.length,K=ri(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return ur(c),pr(c),"";c.h.i=new h.TextDecoder}for(let Z=0;Z<R;Z++)c.h.h=!0,E+=c.h.i.decode(y[Z],{stream:!(K&&Z==R-1)});return y.length=0,c.h.g+=E,c.C=0,c.h.g}function Wa(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Ja(c,y){var E=c.C,R=y.indexOf(`
`,E);return R==-1?dt:(E=Number(y.substring(E,R)),isNaN(E)?Le:(R+=1,R+E>y.length?dt:(y=y.slice(R,R+E),c.C=R+E,y)))}Ye.prototype.cancel=function(){this.K=!0,ur(this)};function Pr(c){c.T=Date.now()+c.H,ms(c,c.H)}function ms(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Bn(m(c.aa,c),y)}function Ur(c){c.D&&(h.clearTimeout(c.D),c.D=null)}Ye.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(ce(this.i,this.B),this.M!=2&&(Pn(),bt(17)),ur(this),this.m=2,pr(this)):ms(this,this.T-c)};function pr(c){c.j.I==0||c.K||Ju(c.j,c)}function ur(c){Ur(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,Cn(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function zr(c,y){try{var E=c.j;if(E.I!=0&&(E.g==c||Ee(E.h,c))){if(!c.L&&Ee(E.h,c)&&E.I==3){try{var R=E.Ba.g.parse(y)}catch{R=null}if(Array.isArray(R)&&R.length==3){var K=R;if(K[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<c.F)so(E),Es(E);else break e;_a(E),bt(18)}}else E.xa=K[1],0<E.xa-E.K&&K[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Bn(m(E.Va,E),6e3));le(E.h)<=1&&E.ta&&(E.ta=void 0)}else vi(E,11)}else if((c.L||E.g==c)&&so(E),!x(y))for(K=E.Ba.g.parse(y),y=0;y<K.length;y++){let zt=K[y];const hn=zt[0];if(!(hn<=E.K))if(E.K=hn,zt=zt[1],E.I==2)if(zt[0]=="c"){E.M=zt[1],E.ba=zt[2];const Hr=zt[3];Hr!=null&&(E.ka=Hr,E.j.info("VER="+E.ka));const _i=zt[4];_i!=null&&(E.za=_i,E.j.info("SVER="+E.za));const ii=zt[5];ii!=null&&typeof ii=="number"&&ii>0&&(R=1.5*ii,E.O=R,E.j.info("backChannelRequestTimeoutMs_="+R)),R=E;const si=c.g;if(si){const ba=si.g?si.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ba){var Z=R.h;Z.g||ba.indexOf("spdy")==-1&&ba.indexOf("quic")==-1&&ba.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Oe(Z,Z.h),Z.h=null))}if(R.G){const ao=si.g?si.g.getResponseHeader("X-HTTP-Session-Id"):null;ao&&(R.wa=ao,It(R.J,R.G,ao))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-c.F,E.j.info("Handshake RTT: "+E.T+"ms")),R=E;var Se=c;if(R.na=tc(R,R.L?R.ba:null,R.W),Se.L){Fe(R.h,Se);var lt=Se,Sn=R.O;Sn&&(lt.H=Sn),lt.D&&(Ur(lt),Pr(lt)),R.g=Se}else $u(R);E.i.length>0&&yi(E)}else zt[0]!="stop"&&zt[0]!="close"||vi(E,7);else E.I==3&&(zt[0]=="stop"||zt[0]=="close"?zt[0]=="stop"?vi(E,7):gl(E):zt[0]!="noop"&&E.l&&E.l.qa(zt),E.A=0)}}Pn(4)}catch{}}var yn=class{constructor(c,y){this.g=c,this.map=y}};function fa(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function D(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function le(c){return c.h?1:c.g?c.g.size:0}function Ee(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Oe(c,y){c.g?c.g.add(y):c.h=y}function Fe(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}fa.prototype.cancel=function(){if(this.i=st(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function st(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const E of c.g.values())y=y.concat(E.G);return y}return w(c.i)}var gt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kt(c,y){if(c){c=c.split("&");for(let E=0;E<c.length;E++){const R=c[E].indexOf("=");let K,Z=null;R>=0?(K=c[E].substring(0,R),Z=c[E].substring(R+1)):K=c[E],y(K,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function Dt(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof Dt?(this.l=c.l,Ut(this,c.j),this.o=c.o,this.g=c.g,dn(this,c.u),this.h=c.h,Br(this,Yu(c.i)),this.m=c.m):c&&(y=String(c).match(gt))?(this.l=!1,Ut(this,y[1]||"",!0),this.o=Nn(y[2]||""),this.g=Nn(y[3]||"",!0),dn(this,y[4]),this.h=Nn(y[5]||"",!0),Br(this,y[6]||"",!0),this.m=Nn(y[7]||"")):(this.l=!1,this.i=new gs(null,this.l))}Dt.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(Li(y,Za,!0),":");var E=this.g;return(E||y=="file")&&(c.push("//"),(y=this.o)&&c.push(Li(y,Za,!0),"@"),c.push(Ze(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&c.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&c.push("/"),c.push(Li(E,E.charAt(0)=="/"?cl:Gu,!0))),(E=this.i.toString())&&c.push("?",E),(E=this.m)&&c.push("#",Li(E,Ku)),c.join("")},Dt.prototype.resolve=function(c){const y=Pt(this);let E=!!c.j;E?Ut(y,c.j):E=!!c.o,E?y.o=c.o:E=!!c.g,E?y.g=c.g:E=c.u!=null;var R=c.h;if(E)dn(y,c.u);else if(E=!!c.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var K=y.h.lastIndexOf("/");K!=-1&&(R=y.h.slice(0,K+1)+R)}if(K=R,K==".."||K==".")R="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){R=K.lastIndexOf("/",0)==0,K=K.split("/");const Z=[];for(let Se=0;Se<K.length;){const lt=K[Se++];lt=="."?R&&Se==K.length&&Z.push(""):lt==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),R&&Se==K.length&&Z.push("")):(Z.push(lt),R=!0)}R=Z.join("/")}else R=K}return E?y.h=R:E=c.i.toString()!=="",E?Br(y,Yu(c.i)):E=!!c.m,E&&(y.m=c.m),y};function Pt(c){return new Dt(c)}function Ut(c,y,E){c.j=E?Nn(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function dn(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function Br(c,y,E){y instanceof gs?(c.i=y,to(c.i,c.l)):(E||(y=Li(y,ps)),c.i=new gs(y,c.l))}function It(c,y,E){c.i.set(y,E)}function qn(c){return It(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Nn(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Li(c,y,E){return typeof c=="string"?(c=encodeURI(c).replace(y,gr),E&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function gr(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Za=/[#\/\?@]/g,Gu=/[#\?:]/g,cl=/[#\?]/g,ps=/[#\?@]/g,Ku=/#/g;function gs(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function yr(c){c.g||(c.g=new Map,c.h=0,c.i&&kt(c.i,function(y,E){c.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}i=gs.prototype,i.add=function(c,y){yr(this),this.i=null,c=ys(this,c);let E=this.g.get(c);return E||this.g.set(c,E=[]),E.push(y),this.h+=1,this};function Qu(c,y){yr(c),y=ys(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function dl(c,y){return yr(c),y=ys(c,y),c.g.has(y)}i.forEach=function(c,y){yr(this),this.g.forEach(function(E,R){E.forEach(function(K){c.call(y,K,R,this)},this)},this)};function hl(c,y){yr(c);let E=[];if(typeof y=="string")dl(c,y)&&(E=E.concat(c.g.get(ys(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)E=E.concat(c[y]);return E}i.set=function(c,y){return yr(this),this.i=null,c=ys(this,c),dl(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},i.get=function(c,y){return c?(c=hl(this,c),c.length>0?String(c[0]):y):y};function eo(c,y,E){Qu(c,y),E.length>0&&(c.i=null,c.g.set(ys(c,y),w(E)),c.h+=E.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let R=0;R<y.length;R++){var E=y[R];const K=Ze(E);E=hl(this,E);for(let Z=0;Z<E.length;Z++){let Se=K;E[Z]!==""&&(Se+="="+Ze(E[Z])),c.push(Se)}}return this.i=c.join("&")};function Yu(c){const y=new gs;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function ys(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function to(c,y){y&&!c.j&&(yr(c),c.i=null,c.g.forEach(function(E,R){const K=R.toLowerCase();R!=K&&(Qu(this,R),eo(this,K,E))},c)),c.j=y}function ti(c,y){const E=new Ue;if(h.Image){const R=new Image;R.onload=_(qr,E,"TestLoadImage: loaded",!0,y,R),R.onerror=_(qr,E,"TestLoadImage: error",!1,y,R),R.onabort=_(qr,E,"TestLoadImage: abort",!1,y,R),R.ontimeout=_(qr,E,"TestLoadImage: timeout",!1,y,R),h.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=c}else y(!1)}function fl(c,y){const E=new Ue,R=new AbortController,K=setTimeout(()=>{R.abort(),qr(E,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:R.signal}).then(Z=>{clearTimeout(K),Z.ok?qr(E,"TestPingServer: ok",!0,y):qr(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(K),qr(E,"TestPingServer: error",!1,y)})}function qr(c,y,E,R,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),R(E)}catch{}}function vs(){this.g=new or}function mi(c){this.i=c.Sb||null,this.h=c.ab||!1}T(mi,fi),mi.prototype.g=function(){return new ma(this.i,this.h)};function ma(c,y){Ne.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(ma,Ne),i=ma.prototype,i.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,ni(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||h).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,_s(this)),this.readyState=0},i.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ni(this)),this.g&&(this.readyState=3,ni(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;no(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function no(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}i.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?_s(this):ni(this),this.readyState==3&&no(this)}},i.Oa=function(c){this.g&&(this.response=this.responseText=c,_s(this))},i.Na=function(c){this.g&&(this.response=c,_s(this))},i.ga=function(){this.g&&_s(this)};function _s(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ni(c)}i.setRequestHeader=function(c,y){this.A.append(c,y)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,c.push(E[0]+": "+E[1]),E=y.next();return c.join(`\r
`)};function ni(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ma.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Fr(c){let y="";return pe(c,function(E,R){y+=R,y+=":",y+=E,y+=`\r
`}),y}function pa(c,y,E){e:{for(R in E){var R=!1;break e}R=!0}R||(E=Fr(E),typeof c=="string"?E!=null&&Ze(E):It(c,y,E))}function $t(c){Ne.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T($t,Ne);var pi=/^https?$/i,ml=["POST","PUT"];i=$t.prototype,i.Fa=function(c){this.H=c},i.ea=function(c,y,E,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ie.g(),this.g.onreadystatechange=S(m(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(Z){ga(this,Z);return}if(c=E||"",E=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var K in R)E.set(K,R[K]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const Z of R.keys())E.set(Z,R.get(Z));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(E.keys()).find(Z=>Z.toLowerCase()=="content-type"),K=h.FormData&&c instanceof h.FormData,!(Array.prototype.indexOf.call(ml,y,void 0)>=0)||R||K||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,Se]of E)this.g.setRequestHeader(Z,Se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(Z){ga(this,Z)}};function ga(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,pl(c),Pi(c)}function pl(c){c.A||(c.A=!0,Ce(c,"complete"),Ce(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Ce(this,"complete"),Ce(this,"abort"),Pi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pi(this,!0)),$t.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?ya(this):this.Xa())},i.Xa=function(){ya(this)};function ya(c){if(c.h&&typeof u<"u"){if(c.v&&ri(c)==4)setTimeout(c.Ca.bind(c),0);else if(Ce(c,"readystatechange"),ri(c)==4){c.h=!1;try{const Z=c.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var R;if(R=Z===0){let Se=String(c.D).match(gt)[1]||null;!Se&&h.self&&h.self.location&&(Se=h.self.location.protocol.slice(0,-1)),R=!pi.test(Se?Se.toLowerCase():"")}E=R}if(E)Ce(c,"complete"),Ce(c,"success");else{c.o=6;try{var K=ri(c)>2?c.g.statusText:""}catch{K=""}c.l=K+" ["+c.ca()+"]",pl(c)}}finally{Pi(c)}}}}function Pi(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const E=c.g;c.g=null,y||Ce(c,"ready");try{E.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function ri(c){return c.g?c.g.readyState:0}i.ca=function(){try{return ri(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),ji(y)}};function Gn(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ui(c){const y={};c=(c.g&&ri(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<c.length;R++){if(x(c[R]))continue;var E=ht(c[R]);const K=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Z=y[K]||[];y[K]=Z,Z.push(E)}je(y,function(R){return R.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function gi(c,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[c]||y}function bs(c){this.za=0,this.i=[],this.j=new Ue,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=gi("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=gi("baseRetryDelayMs",5e3,c),this.Za=gi("retryDelaySeedMs",1e4,c),this.Ta=gi("forwardChannelMaxRetries",2,c),this.va=gi("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new fa(c&&c.concurrentRequestLimit),this.Ba=new vs,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=bs.prototype,i.ka=8,i.I=1,i.connect=function(c,y,E,R){bt(0),this.W=c,this.H=y||{},E&&R!==void 0&&(this.H.OSID=E,this.H.OAID=R),this.F=this.X,this.J=tc(this,null,this.W),yi(this)};function gl(c){if(ro(c),c.I==3){var y=c.V++,E=Pt(c.J);if(It(E,"SID",c.M),It(E,"RID",y),It(E,"TYPE","terminate"),va(c,E),y=new Ye(c,c.j,y),y.M=2,y.A=qn(Pt(E)),E=!1,h.navigator&&h.navigator.sendBeacon)try{E=h.navigator.sendBeacon(y.A.toString(),"")}catch{}!E&&h.Image&&(new Image().src=y.A,E=!0),E||(y.g=nc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Pr(y)}ec(c)}function Es(c){c.g&&(vl(c),c.g.cancel(),c.g=null)}function ro(c){Es(c),c.v&&(h.clearTimeout(c.v),c.v=null),so(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&h.clearTimeout(c.m),c.m=null)}function yi(c){if(!D(c.h)&&!c.m){c.m=!0;var y=c.Ea;ze||C(),Ve||(ze(),Ve=!0),N.add(y,c),c.D=0}}function io(c,y){return le(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Bn(m(c.Ea,c,y),Zu(c,c.D)),c.D++,!0)}i.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const K=new Ye(this,this.j,c);let Z=this.o;if(this.U&&(Z?(Z=O(Z),H(Z,this.U)):Z=this.U),this.u!==null||this.R||(K.J=Z,Z=null),this.S)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var R=this.i[E];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(y+=R,y>4096){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=Xu(this,K,y),E=Pt(this.J),It(E,"RID",c),It(E,"CVER",22),this.G&&It(E,"X-HTTP-Session-Id",this.G),va(this,E),Z&&(this.R?y="headers="+Ze(Fr(Z))+"&"+y:this.u&&pa(E,this.u,Z)),Oe(this.h,K),this.Ra&&It(E,"TYPE","init"),this.S?(It(E,"$req",y),It(E,"SID","null"),K.U=!0,xn(K,E,null)):xn(K,E,y),this.I=2}}else this.I==3&&(c?yl(this,c):this.i.length==0||D(this.h)||yl(this))};function yl(c,y){var E;y?E=y.l:E=c.V++;const R=Pt(c.J);It(R,"SID",c.M),It(R,"RID",E),It(R,"AID",c.K),va(c,R),c.u&&c.o&&pa(R,c.u,c.o),E=new Ye(c,c.j,E,c.D+1),c.u===null&&(E.J=c.o),y&&(c.i=y.G.concat(c.i)),y=Xu(c,E,1e3),E.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Oe(c.h,E),xn(E,R,y)}function va(c,y){c.H&&pe(c.H,function(E,R){It(y,R,E)}),c.l&&pe({},function(E,R){It(y,R,E)})}function Xu(c,y,E){E=Math.min(c.i.length,E);const R=c.l?m(c.l.Ka,c.l,c):null;e:{var K=c.i;let lt=-1;for(;;){const Sn=["count="+E];lt==-1?E>0?(lt=K[0].g,Sn.push("ofs="+lt)):lt=0:Sn.push("ofs="+lt);let zt=!0;for(let hn=0;hn<E;hn++){var Z=K[hn].g;const Hr=K[hn].map;if(Z-=lt,Z<0)lt=Math.max(0,K[hn].g-100),zt=!1;else try{Z="req"+Z+"_"||"";try{var Se=Hr instanceof Map?Hr:Object.entries(Hr);for(const[_i,ii]of Se){let si=ii;g(ii)&&(si=mr(ii)),Sn.push(Z+_i+"="+encodeURIComponent(si))}}catch(_i){throw Sn.push(Z+"type="+encodeURIComponent("_badmap")),_i}}catch{R&&R(Hr)}}if(zt){Se=Sn.join("&");break e}}Se=void 0}return c=c.i.splice(0,E),y.G=c,Se}function $u(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;ze||C(),Ve||(ze(),Ve=!0),N.add(y,c),c.A=0}}function _a(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Bn(m(c.Da,c),Zu(c,c.A)),c.A++,!0)}i.Da=function(){if(this.v=null,Wu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Bn(m(this.Wa,this),c)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,bt(10),Es(this),Wu(this))};function vl(c){c.B!=null&&(h.clearTimeout(c.B),c.B=null)}function Wu(c){c.g=new Ye(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=Pt(c.na);It(y,"RID","rpc"),It(y,"SID",c.M),It(y,"AID",c.K),It(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&It(y,"TO",c.ia),It(y,"TYPE","xmlhttp"),va(c,y),c.u&&c.o&&pa(y,c.u,c.o),c.O&&(c.g.H=c.O);var E=c.g;c=c.ba,E.M=1,E.A=qn(Pt(y)),E.u=null,E.R=!0,ei(E,c)}i.Va=function(){this.C!=null&&(this.C=null,Es(this),_a(this),bt(19))};function so(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function Ju(c,y){var E=null;if(c.g==y){so(c),vl(c),c.g=null;var R=2}else if(Ee(c.h,y))E=y.G,Fe(c.h,y),R=1;else return;if(c.I!=0){if(y.o)if(R==1){E=y.u?y.u.length:0,y=Date.now()-y.F;var K=c.D;R=er(),Ce(R,new tn(R,E)),yi(c)}else $u(c);else if(K=y.m,K==3||K==0&&y.X>0||!(R==1&&io(c,y)||R==2&&_a(c)))switch(E&&E.length>0&&(y=c.h,y.i=y.i.concat(E)),K){case 1:vi(c,5);break;case 4:vi(c,10);break;case 3:vi(c,6);break;default:vi(c,2)}}}function Zu(c,y){let E=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(E*=2),E*y}function vi(c,y){if(c.j.info("Error code "+y),y==2){var E=m(c.bb,c),R=c.Ua;const K=!R;R=new Dt(R||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Ut(R,"https"),qn(R),K?ti(R.toString(),E):fl(R.toString(),E)}else bt(2);c.I=0,c.l&&c.l.pa(y),ec(c),ro(c)}i.bb=function(c){c?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function ec(c){if(c.I=0,c.ja=[],c.l){const y=st(c.h);(y.length!=0||c.i.length!=0)&&(P(c.ja,y),P(c.ja,c.i),c.h.i.length=0,w(c.i),c.i.length=0),c.l.oa()}}function tc(c,y,E){var R=E instanceof Dt?Pt(E):new Dt(E);if(R.g!="")y&&(R.g=y+"."+R.g),dn(R,R.u);else{var K=h.location;R=K.protocol,y=y?y+"."+K.hostname:K.hostname,K=+K.port;const Z=new Dt(null);R&&Ut(Z,R),y&&(Z.g=y),K&&dn(Z,K),E&&(Z.h=E),R=Z}return E=c.G,y=c.wa,E&&y&&It(R,E,y),It(R,"VER",c.ka),va(c,R),R}function nc(c,y,E){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new $t(new mi({ab:E})):new $t(c.ma),y.Fa(c.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function rc(){}i=rc.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Ts(){}Ts.prototype.g=function(c,y){return new cr(c,y)};function cr(c,y){Ne.call(this),this.g=new bs(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!x(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!x(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new zi(this)}T(cr,Ne),cr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cr.prototype.close=function(){gl(this.g)},cr.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var E={};E.__data__=c,c=E}else this.v&&(E={},E.__data__=mr(c),c=E);y.i.push(new yn(y.Ya++,c)),y.I==3&&yi(y)},cr.prototype.N=function(){this.g.l=null,delete this.j,gl(this.g),delete this.g,cr.Z.N.call(this)};function ic(c){Kt.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const E in y){c=E;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}T(ic,Kt);function sc(){Ft.call(this),this.status=1}T(sc,Ft);function zi(c){this.g=c}T(zi,rc),zi.prototype.ra=function(){Ce(this.g,"a")},zi.prototype.qa=function(c){Ce(this.g,new ic(c))},zi.prototype.pa=function(c){Ce(this.g,new sc)},zi.prototype.oa=function(){Ce(this.g,"b")},Ts.prototype.createWebChannel=Ts.prototype.g,cr.prototype.send=cr.prototype.o,cr.prototype.open=cr.prototype.m,cr.prototype.close=cr.prototype.close,zE=function(){return new Ts},UE=function(){return er()},PE=pt,Ym={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},we.NO_ERROR=0,we.TIMEOUT=8,we.HTTP_ERROR=6,Ed=we,Be.COMPLETE="complete",LE=Be,Lr.EventType=gn,gn.OPEN="a",gn.CLOSE="b",gn.ERROR="c",gn.MESSAGE="d",Ne.prototype.listen=Ne.prototype.J,lu=Lr,$t.prototype.listenOnce=$t.prototype.K,$t.prototype.getLastError=$t.prototype.Ha,$t.prototype.getLastErrorCode=$t.prototype.ya,$t.prototype.getStatus=$t.prototype.ca,$t.prototype.getResponseJson=$t.prototype.La,$t.prototype.getResponseText=$t.prototype.la,$t.prototype.send=$t.prototype.ea,$t.prototype.setWithCredentials=$t.prototype.Fa,jE=$t}).apply(typeof cd<"u"?cd:typeof self<"u"?self:typeof window<"u"?window:{});const C_="@firebase/firestore",I_="4.9.2";class rr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rr.UNAUTHENTICATED=new rr(null),rr.GOOGLE_CREDENTIALS=new rr("google-credentials-uid"),rr.FIRST_PARTY=new rr("first-party-uid"),rr.MOCK_USER=new rr("mock-user");let rl="12.3.0";const Ga=new _p("@firebase/firestore");function Lo(){return Ga.logLevel}function De(i,...e){if(Ga.logLevel<=St.DEBUG){const n=e.map(Np);Ga.debug(`Firestore (${rl}): ${i}`,...n)}}function us(i,...e){if(Ga.logLevel<=St.ERROR){const n=e.map(Np);Ga.error(`Firestore (${rl}): ${i}`,...n)}}function Xo(i,...e){if(Ga.logLevel<=St.WARN){const n=e.map(Np);Ga.warn(`Firestore (${rl}): ${i}`,...n)}}function Np(i){if(typeof i=="string")return i;try{return(function(n){return JSON.stringify(n)})(i)}catch{return i}}function tt(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,BE(i,s,n)}function BE(i,e,n){let s=`FIRESTORE (${rl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw us(s),new Error(s)}function Ht(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||BE(e,o,s)}function ot(i,e){return i}const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Oi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ss{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class qE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class y2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(rr.UNAUTHENTICATED)))}shutdown(){}}class v2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class _2{constructor(e){this.t=e,this.currentUser=rr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ht(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new ss;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ss,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},g=p=>{De("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((p=>g(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(De("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ss)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(De("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ht(typeof s.accessToken=="string",31837,{l:s}),new qE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ht(e===null||typeof e=="string",2055,{h:e}),new rr(e)}}class b2{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=rr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class E2{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new b2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(rr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class x_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class T2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ht(this.o===void 0,3512);const s=u=>{u.error!=null&&De("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,De("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{De("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):De("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new x_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ht(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new x_(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function S2(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}class kp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=S2(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function At(i,e){return i<e?-1:i>e?1:0}function Xm(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),u=e.charAt(s);if(o!==u)return Nm(o)===Nm(u)?At(o,u):Nm(o)?1:-1}return At(i.length,e.length)}const w2=55296,A2=57343;function Nm(i){const e=i.charCodeAt(0);return e>=w2&&e<=A2}function $o(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}const N_="__name__";class wi{constructor(e,n,s){n===void 0?n=0:n>e.length&&tt(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&tt(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return wi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof wi?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=wi.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return At(e.length,n.length)}static compareSegments(e,n){const s=wi.isNumericId(e),o=wi.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?wi.extractNumericId(e).compare(wi.extractNumericId(n)):Xm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ea.fromString(e.substring(4,e.length-2))}}class an extends wi{construct(e,n,s){return new an(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new xe(ie.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new an(n)}static emptyPath(){return new an([])}}const R2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jn extends wi{construct(e,n,s){return new Jn(e,n,s)}static isValidIdentifier(e){return R2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===N_}static keyField(){return new Jn([N_])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new xe(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let h=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new xe(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new xe(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else g==="`"?(h=!h,o++):g!=="."||h?(s+=g,o++):(u(),o++)}if(u(),h)throw new xe(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jn(n)}static emptyPath(){return new Jn([])}}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(an.fromString(e))}static fromName(e){return new Qe(an.fromString(e).popFirst(5))}static empty(){return new Qe(an.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&an.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return an.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new an(e.slice()))}}function FE(i,e,n){if(!n)throw new xe(ie.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function C2(i,e,n,s){if(e===!0&&s===!0)throw new xe(ie.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function k_(i){if(!Qe.isDocumentKey(i))throw new xe(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function D_(i){if(Qe.isDocumentKey(i))throw new xe(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function HE(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function ih(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":tt(12329,{type:typeof i})}function hr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new xe(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ih(i);throw new xe(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function I2(i,e){if(e<=0)throw new xe(ie.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}function Ln(i,e){const n={typeString:i};return e&&(n.value=e),n}function Vu(i,e){if(!HE(i))throw new xe(ie.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const h=i[s];if(o&&typeof h!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new xe(ie.INVALID_ARGUMENT,n);return!0}const M_=-62135596800,O_=1e6;class Lt{static now(){return Lt.fromMillis(Date.now())}static fromDate(e){return Lt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*O_);return new Lt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new xe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<M_)throw new xe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/O_}_compareTo(e){return this.seconds===e.seconds?At(this.nanoseconds,e.nanoseconds):At(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vu(e,Lt._jsonSchema))return new Lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-M_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Lt._jsonSchemaVersion="firestore/timestamp/1.0",Lt._jsonSchema={type:Ln("string",Lt._jsonSchemaVersion),seconds:Ln("number"),nanoseconds:Ln("number")};class it{static fromTimestamp(e){return new it(e)}static min(){return new it(new Lt(0,0))}static max(){return new it(new Lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Eu=-1;function x2(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=it.fromTimestamp(s===1e9?new Lt(n+1,0):new Lt(n,s));return new ra(o,Qe.empty(),e)}function N2(i){return new ra(i.readTime,i.key,Eu)}class ra{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ra(it.min(),Qe.empty(),Eu)}static max(){return new ra(it.max(),Qe.empty(),Eu)}}function k2(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Qe.comparator(i.documentKey,e.documentKey),n!==0?n:At(i.largestBatchId,e.largestBatchId))}const D2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class M2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function il(i){if(i.code!==ie.FAILED_PRECONDITION||i.message!==D2)throw i;De("LocalStore","Unexpectedly lost primary lease")}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&tt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.reject(n)}static resolve(e){return new oe(((n,s)=>{n(e)}))}static reject(e){return new oe(((n,s)=>{s(e)}))}static waitFor(e){return new oe(((n,s)=>{let o=0,u=0,h=!1;e.forEach((g=>{++o,g.next((()=>{++u,h&&u===o&&n()}),(p=>s(p)))})),h=!0,u===o&&n()}))}static or(e){let n=oe.resolve(!1);for(const s of e)n=n.next((o=>o?oe.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new oe(((s,o)=>{const u=e.length,h=new Array(u);let g=0;for(let p=0;p<u;p++){const m=p;n(e[m]).next((_=>{h[m]=_,++g,g===u&&s(h)}),(_=>o(_)))}}))}static doWhile(e,n){return new oe(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function O2(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sl(i){return i.name==="IndexedDbTransactionError"}class sh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}sh.ce=-1;const Dp=-1;function ah(i){return i==null}function Ld(i){return i===0&&1/i==-1/0}function V2(i){return typeof i=="number"&&Number.isInteger(i)&&!Ld(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const GE="";function j2(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=V_(e)),e=L2(i.get(n),e);return V_(e)}function L2(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case GE:n+="";break;default:n+=u}}return n}function V_(i){return i+GE+""}function j_(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function da(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function KE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class pn{constructor(e,n){this.comparator=e,this.root=n||$n.EMPTY}insert(e,n){return new pn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$n.BLACK,null,null))}remove(e){return new pn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$n.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dd(this.root,e,this.comparator,!1)}getReverseIterator(){return new dd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dd(this.root,e,this.comparator,!0)}}class dd{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $n{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??$n.RED,this.left=o??$n.EMPTY,this.right=u??$n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new $n(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return $n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return $n.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw tt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw tt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw tt(27949);return e+(this.isRed()?0:1)}}$n.EMPTY=null,$n.RED=!0,$n.BLACK=!1;$n.EMPTY=new class{constructor(){this.size=0}get key(){throw tt(57766)}get value(){throw tt(16141)}get color(){throw tt(16727)}get left(){throw tt(29726)}get right(){throw tt(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new $n(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class zn{constructor(e){this.comparator=e,this.data=new pn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new L_(this.data.getIterator())}getIteratorFrom(e){return new L_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof zn)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new zn(this.comparator);return n.data=e,n}}class L_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class jr{constructor(e){this.fields=e,e.sort(Jn.comparator)}static empty(){return new jr([])}unionWith(e){let n=new zn(Jn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new jr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $o(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class QE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Zn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new QE("Invalid base64 string: "+u):u}})(e);return new Zn(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new Zn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return At(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zn.EMPTY_BYTE_STRING=new Zn("");const P2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ia(i){if(Ht(!!i,39018),typeof i=="string"){let e=0;const n=P2.exec(i);if(Ht(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Rn(i.seconds),nanos:Rn(i.nanos)}}function Rn(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function sa(i){return typeof i=="string"?Zn.fromBase64String(i):Zn.fromUint8Array(i)}const YE="server_timestamp",XE="__type__",$E="__previous_value__",WE="__local_write_time__";function Mp(i){return(i?.mapValue?.fields||{})[XE]?.stringValue===YE}function oh(i){const e=i.mapValue.fields[$E];return Mp(e)?oh(e):e}function Tu(i){const e=ia(i.mapValue.fields[WE].timestampValue);return new Lt(e.seconds,e.nanos)}class U2{constructor(e,n,s,o,u,h,g,p,m,_){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=_}}const Pd="(default)";class Su{constructor(e,n){this.projectId=e,this.database=n||Pd}static empty(){return new Su("","")}get isDefaultDatabase(){return this.database===Pd}isEqual(e){return e instanceof Su&&e.projectId===this.projectId&&e.database===this.database}}const JE="__type__",z2="__max__",hd={mapValue:{}},ZE="__vector__",Ud="value";function aa(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Mp(i)?4:q2(i)?9007199254740991:B2(i)?10:11:tt(28295,{value:i})}function Di(i,e){if(i===e)return!0;const n=aa(i);if(n!==aa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Tu(i).isEqual(Tu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=ia(o.timestampValue),g=ia(u.timestampValue);return h.seconds===g.seconds&&h.nanos===g.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return sa(o.bytesValue).isEqual(sa(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return Rn(o.geoPointValue.latitude)===Rn(u.geoPointValue.latitude)&&Rn(o.geoPointValue.longitude)===Rn(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Rn(o.integerValue)===Rn(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=Rn(o.doubleValue),g=Rn(u.doubleValue);return h===g?Ld(h)===Ld(g):isNaN(h)&&isNaN(g)}return!1})(i,e);case 9:return $o(i.arrayValue.values||[],e.arrayValue.values||[],Di);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},g=u.mapValue.fields||{};if(j_(h)!==j_(g))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(g[p]===void 0||!Di(h[p],g[p])))return!1;return!0})(i,e);default:return tt(52216,{left:i})}}function wu(i,e){return(i.values||[]).find((n=>Di(n,e)))!==void 0}function Wo(i,e){if(i===e)return 0;const n=aa(i),s=aa(e);if(n!==s)return At(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return At(i.booleanValue,e.booleanValue);case 2:return(function(u,h){const g=Rn(u.integerValue||u.doubleValue),p=Rn(h.integerValue||h.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1})(i,e);case 3:return P_(i.timestampValue,e.timestampValue);case 4:return P_(Tu(i),Tu(e));case 5:return Xm(i.stringValue,e.stringValue);case 6:return(function(u,h){const g=sa(u),p=sa(h);return g.compareTo(p)})(i.bytesValue,e.bytesValue);case 7:return(function(u,h){const g=u.split("/"),p=h.split("/");for(let m=0;m<g.length&&m<p.length;m++){const _=At(g[m],p[m]);if(_!==0)return _}return At(g.length,p.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,h){const g=At(Rn(u.latitude),Rn(h.latitude));return g!==0?g:At(Rn(u.longitude),Rn(h.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return U_(i.arrayValue,e.arrayValue);case 10:return(function(u,h){const g=u.fields||{},p=h.fields||{},m=g[Ud]?.arrayValue,_=p[Ud]?.arrayValue,T=At(m?.values?.length||0,_?.values?.length||0);return T!==0?T:U_(m,_)})(i.mapValue,e.mapValue);case 11:return(function(u,h){if(u===hd.mapValue&&h===hd.mapValue)return 0;if(u===hd.mapValue)return 1;if(h===hd.mapValue)return-1;const g=u.fields||{},p=Object.keys(g),m=h.fields||{},_=Object.keys(m);p.sort(),_.sort();for(let T=0;T<p.length&&T<_.length;++T){const S=Xm(p[T],_[T]);if(S!==0)return S;const w=Wo(g[p[T]],m[_[T]]);if(w!==0)return w}return At(p.length,_.length)})(i.mapValue,e.mapValue);default:throw tt(23264,{he:n})}}function P_(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return At(i,e);const n=ia(i),s=ia(e),o=At(n.seconds,s.seconds);return o!==0?o:At(n.nanos,s.nanos)}function U_(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Wo(n[o],s[o]);if(u)return u}return At(n.length,s.length)}function Jo(i){return $m(i)}function $m(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=ia(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return sa(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return Qe.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=$m(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const h of s)u?u=!1:o+=",",o+=`${h}:${$m(n.fields[h])}`;return o+"}"})(i.mapValue):tt(61005,{value:i})}function Td(i){switch(aa(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=oh(i);return e?16+Td(e):16;case 5:return 2*i.stringValue.length;case 6:return sa(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Td(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return da(s.fields,((u,h)=>{o+=u.length+Td(h)})),o})(i.mapValue);default:throw tt(13486,{value:i})}}function z_(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Wm(i){return!!i&&"integerValue"in i}function Op(i){return!!i&&"arrayValue"in i}function B_(i){return!!i&&"nullValue"in i}function q_(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Sd(i){return!!i&&"mapValue"in i}function B2(i){return(i?.mapValue?.fields||{})[JE]?.stringValue===ZE}function mu(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return da(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=mu(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=mu(i.arrayValue.values[n]);return e}return{...i}}function q2(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===z2}class Ar{constructor(e){this.value=e}static empty(){return new Ar({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Sd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=mu(n)}setAll(e){let n=Jn.emptyPath(),s={},o=[];e.forEach(((h,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=g.popLast()}h?s[g.lastSegment()]=mu(h):o.push(g.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());Sd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Di(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Sd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){da(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new Ar(mu(this.value))}}function eT(i){const e=[];return da(i.fields,((n,s)=>{const o=new Jn([n]);if(Sd(s)){const u=eT(s.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new jr(e)}class ir{constructor(e,n,s,o,u,h,g){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=h,this.documentState=g}static newInvalidDocument(e){return new ir(e,0,it.min(),it.min(),it.min(),Ar.empty(),0)}static newFoundDocument(e,n,s,o){return new ir(e,1,n,it.min(),s,o,0)}static newNoDocument(e,n){return new ir(e,2,n,it.min(),it.min(),Ar.empty(),0)}static newUnknownDocument(e,n){return new ir(e,3,n,it.min(),it.min(),Ar.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(it.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ar.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ar.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=it.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ir&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ir(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class zd{constructor(e,n){this.position=e,this.inclusive=n}}function F_(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],h=i.position[o];if(u.field.isKeyField()?s=Qe.comparator(Qe.fromName(h.referenceValue),n.key):s=Wo(h,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function H_(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Di(i.position[n],e.position[n]))return!1;return!0}class Au{constructor(e,n="asc"){this.field=e,this.dir=n}}function F2(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class tT{}class jn extends tT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new G2(e,n,s):n==="array-contains"?new Y2(e,s):n==="in"?new X2(e,s):n==="not-in"?new $2(e,s):n==="array-contains-any"?new W2(e,s):new jn(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new K2(e,s):new Q2(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Wo(n,this.value)):n!==null&&aa(this.value)===aa(n)&&this.matchesComparison(Wo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return tt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hi extends tT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new hi(e,n)}matches(e){return nT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function nT(i){return i.op==="and"}function rT(i){return H2(i)&&nT(i)}function H2(i){for(const e of i.filters)if(e instanceof hi)return!1;return!0}function Jm(i){if(i instanceof jn)return i.field.canonicalString()+i.op.toString()+Jo(i.value);if(rT(i))return i.filters.map((e=>Jm(e))).join(",");{const e=i.filters.map((n=>Jm(n))).join(",");return`${i.op}(${e})`}}function iT(i,e){return i instanceof jn?(function(s,o){return o instanceof jn&&s.op===o.op&&s.field.isEqual(o.field)&&Di(s.value,o.value)})(i,e):i instanceof hi?(function(s,o){return o instanceof hi&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,h,g)=>u&&iT(h,o.filters[g])),!0):!1})(i,e):void tt(19439)}function sT(i){return i instanceof jn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Jo(n.value)}`})(i):i instanceof hi?(function(n){return n.op.toString()+" {"+n.getFilters().map(sT).join(" ,")+"}"})(i):"Filter"}class G2 extends jn{constructor(e,n,s){super(e,n,s),this.key=Qe.fromName(s.referenceValue)}matches(e){const n=Qe.comparator(e.key,this.key);return this.matchesComparison(n)}}class K2 extends jn{constructor(e,n){super(e,"in",n),this.keys=aT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Q2 extends jn{constructor(e,n){super(e,"not-in",n),this.keys=aT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function aT(i,e){return(e.arrayValue?.values||[]).map((n=>Qe.fromName(n.referenceValue)))}class Y2 extends jn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Op(n)&&wu(n.arrayValue,this.value)}}class X2 extends jn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&wu(this.value.arrayValue,n)}}class $2 extends jn{constructor(e,n){super(e,"not-in",n)}matches(e){if(wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!wu(this.value.arrayValue,n)}}class W2 extends jn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Op(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>wu(this.value.arrayValue,s)))}}class J2{constructor(e,n=null,s=[],o=[],u=null,h=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=h,this.endAt=g,this.Te=null}}function G_(i,e=null,n=[],s=[],o=null,u=null,h=null){return new J2(i,e,n,s,o,u,h)}function Vp(i){const e=ot(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Jm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),ah(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Jo(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Jo(s))).join(",")),e.Te=n}return e.Te}function jp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!F2(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!iT(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!H_(i.startAt,e.startAt)&&H_(i.endAt,e.endAt)}function Zm(i){return Qe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class al{constructor(e,n=null,s=[],o=[],u=null,h="F",g=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=h,this.startAt=g,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Z2(i,e,n,s,o,u,h,g){return new al(i,e,n,s,o,u,h,g)}function lh(i){return new al(i)}function K_(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function oT(i){return i.collectionGroup!==null}function pu(i){const e=ot(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let g=new zn(Jn.comparator);return h.filters.forEach((p=>{p.getFlattenedFilters().forEach((m=>{m.isInequality()&&(g=g.add(m.field))}))})),g})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Au(u,s))})),n.has(Jn.keyField().canonicalString())||e.Ie.push(new Au(Jn.keyField(),s))}return e.Ie}function Ii(i){const e=ot(i);return e.Ee||(e.Ee=eI(e,pu(i))),e.Ee}function eI(i,e){if(i.limitType==="F")return G_(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Au(o.field,u)}));const n=i.endAt?new zd(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new zd(i.startAt.position,i.startAt.inclusive):null;return G_(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function ep(i,e){const n=i.filters.concat([e]);return new al(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Bd(i,e,n){return new al(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function uh(i,e){return jp(Ii(i),Ii(e))&&i.limitType===e.limitType}function lT(i){return`${Vp(Ii(i))}|lt:${i.limitType}`}function Po(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>sT(o))).join(", ")}]`),ah(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>Jo(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>Jo(o))).join(",")),`Target(${s})`})(Ii(i))}; limitType=${i.limitType})`}function ch(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Qe.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of pu(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(h,g,p){const m=F_(h,g,p);return h.inclusive?m<=0:m<0})(s.startAt,pu(s),o)||s.endAt&&!(function(h,g,p){const m=F_(h,g,p);return h.inclusive?m>=0:m>0})(s.endAt,pu(s),o))})(i,e)}function tI(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function uT(i){return(e,n)=>{let s=!1;for(const o of pu(i)){const u=nI(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function nI(i,e,n){const s=i.field.isKeyField()?Qe.comparator(e.key,n.key):(function(u,h,g){const p=h.data.field(u),m=g.data.field(u);return p!==null&&m!==null?Wo(p,m):tt(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return tt(19790,{direction:i.dir})}}class Xa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){da(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return KE(this.inner)}size(){return this.innerSize}}const rI=new pn(Qe.comparator);function cs(){return rI}const cT=new pn(Qe.comparator);function uu(...i){let e=cT;for(const n of i)e=e.insert(n.key,n);return e}function dT(i){let e=cT;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function La(){return gu()}function hT(){return gu()}function gu(){return new Xa((i=>i.toString()),((i,e)=>i.isEqual(e)))}const iI=new pn(Qe.comparator),sI=new zn(Qe.comparator);function Rt(...i){let e=sI;for(const n of i)e=e.add(n);return e}const aI=new zn(At);function oI(){return aI}function Lp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ld(e)?"-0":e}}function fT(i){return{integerValue:""+i}}function lI(i,e){return V2(e)?fT(e):Lp(i,e)}class dh{constructor(){this._=void 0}}function uI(i,e,n){return i instanceof Ru?(function(o,u){const h={fields:{[XE]:{stringValue:YE},[WE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Mp(u)&&(u=oh(u)),u&&(h.fields[$E]=u),{mapValue:h}})(n,e):i instanceof Cu?pT(i,e):i instanceof Iu?gT(i,e):(function(o,u){const h=mT(o,u),g=Q_(h)+Q_(o.Ae);return Wm(h)&&Wm(o.Ae)?fT(g):Lp(o.serializer,g)})(i,e)}function cI(i,e,n){return i instanceof Cu?pT(i,e):i instanceof Iu?gT(i,e):n}function mT(i,e){return i instanceof qd?(function(s){return Wm(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class Ru extends dh{}class Cu extends dh{constructor(e){super(),this.elements=e}}function pT(i,e){const n=yT(e);for(const s of i.elements)n.some((o=>Di(o,s)))||n.push(s);return{arrayValue:{values:n}}}class Iu extends dh{constructor(e){super(),this.elements=e}}function gT(i,e){let n=yT(e);for(const s of i.elements)n=n.filter((o=>!Di(o,s)));return{arrayValue:{values:n}}}class qd extends dh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Q_(i){return Rn(i.integerValue||i.doubleValue)}function yT(i){return Op(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class dI{constructor(e,n){this.field=e,this.transform=n}}function hI(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof Cu&&o instanceof Cu||s instanceof Iu&&o instanceof Iu?$o(s.elements,o.elements,Di):s instanceof qd&&o instanceof qd?Di(s.Ae,o.Ae):s instanceof Ru&&o instanceof Ru})(i.transform,e.transform)}class fI{constructor(e,n){this.version=e,this.transformResults=n}}class fr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new fr}static exists(e){return new fr(void 0,e)}static updateTime(e){return new fr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wd(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class hh{}function vT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new fh(i.key,fr.none()):new ju(i.key,i.data,fr.none());{const n=i.data,s=Ar.empty();let o=new zn(Jn.comparator);for(let u of e.fields)if(!o.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?s.delete(u):s.set(u,h),o=o.add(u)}return new ha(i.key,s,new jr(o.toArray()),fr.none())}}function mI(i,e,n){i instanceof ju?(function(o,u,h){const g=o.value.clone(),p=X_(o.fieldTransforms,u,h.transformResults);g.setAll(p),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(i,e,n):i instanceof ha?(function(o,u,h){if(!wd(o.precondition,u))return void u.convertToUnknownDocument(h.version);const g=X_(o.fieldTransforms,u,h.transformResults),p=u.data;p.setAll(_T(o)),p.setAll(g),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(i,e,n):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function yu(i,e,n,s){return i instanceof ju?(function(u,h,g,p){if(!wd(u.precondition,h))return g;const m=u.value.clone(),_=$_(u.fieldTransforms,p,h);return m.setAll(_),h.convertToFoundDocument(h.version,m).setHasLocalMutations(),null})(i,e,n,s):i instanceof ha?(function(u,h,g,p){if(!wd(u.precondition,h))return g;const m=$_(u.fieldTransforms,p,h),_=h.data;return _.setAll(_T(u)),_.setAll(m),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(i,e,n,s):(function(u,h,g){return wd(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):g})(i,e,n)}function pI(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=mT(s.transform,o||null);u!=null&&(n===null&&(n=Ar.empty()),n.set(s.field,u))}return n||null}function Y_(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&$o(s,o,((u,h)=>hI(u,h)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class ju extends hh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ha extends hh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function _T(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function X_(i,e,n){const s=new Map;Ht(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const u=i[o],h=u.transform,g=e.data.field(u.field);s.set(u.field,cI(h,g,n[o]))}return s}function $_(i,e,n){const s=new Map;for(const o of i){const u=o.transform,h=n.data.field(o.field);s.set(o.field,uI(u,h,e))}return s}class fh extends hh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gI extends hh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class yI{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&mI(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=yu(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=yu(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=hT();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let g=this.applyToLocalView(h,u.mutatedFields);g=n.has(o.key)?null:g;const p=vT(h,g);p!==null&&s.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(it.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Rt())}isEqual(e){return this.batchId===e.batchId&&$o(this.mutations,e.mutations,((n,s)=>Y_(n,s)))&&$o(this.baseMutations,e.baseMutations,((n,s)=>Y_(n,s)))}}class Pp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Ht(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return iI})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,s[h].version);return new Pp(e,n,s,o)}}class vI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class _I{constructor(e,n){this.count=e,this.unchangedNames=n}}var Vn,Mt;function bI(i){switch(i){case ie.OK:return tt(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return tt(15467,{code:i})}}function bT(i){if(i===void 0)return us("GRPC error has no .code"),ie.UNKNOWN;switch(i){case Vn.OK:return ie.OK;case Vn.CANCELLED:return ie.CANCELLED;case Vn.UNKNOWN:return ie.UNKNOWN;case Vn.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Vn.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Vn.INTERNAL:return ie.INTERNAL;case Vn.UNAVAILABLE:return ie.UNAVAILABLE;case Vn.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Vn.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Vn.NOT_FOUND:return ie.NOT_FOUND;case Vn.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Vn.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Vn.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Vn.ABORTED:return ie.ABORTED;case Vn.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Vn.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Vn.DATA_LOSS:return ie.DATA_LOSS;default:return tt(39323,{code:i})}}(Mt=Vn||(Vn={}))[Mt.OK=0]="OK",Mt[Mt.CANCELLED=1]="CANCELLED",Mt[Mt.UNKNOWN=2]="UNKNOWN",Mt[Mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mt[Mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mt[Mt.NOT_FOUND=5]="NOT_FOUND",Mt[Mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mt[Mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mt[Mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mt[Mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mt[Mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mt[Mt.ABORTED=10]="ABORTED",Mt[Mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mt[Mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mt[Mt.INTERNAL=13]="INTERNAL",Mt[Mt.UNAVAILABLE=14]="UNAVAILABLE",Mt[Mt.DATA_LOSS=15]="DATA_LOSS";function EI(){return new TextEncoder}const TI=new ea([4294967295,4294967295],0);function W_(i){const e=EI().encode(i),n=new VE;return n.update(e),new Uint8Array(n.digest())}function J_(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ea([n,s],0),new ea([o,u],0)]}class Up{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new cu(`Invalid padding: ${n}`);if(s<0)throw new cu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new cu(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new cu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ea.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(ea.fromNumber(s)));return o.compare(TI)===1&&(o=new ea([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=W_(e),[s,o]=J_(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,o,u);if(!this.we(h))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new Up(u,o,n);return s.forEach((g=>h.insert(g))),h}insert(e){if(this.ge===0)return;const n=W_(e),[s,o]=J_(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,o,u);this.Se(h)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class cu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class mh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Lu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new mh(it.min(),o,new pn(At),cs(),Rt())}}class Lu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Lu(s,n,Rt(),Rt(),Rt())}}class Ad{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class ET{constructor(e,n){this.targetId=e,this.Ce=n}}class TT{constructor(e,n,s=Zn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class Z_{constructor(){this.ve=0,this.Fe=eb(),this.Me=Zn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Rt(),n=Rt(),s=Rt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:tt(38017,{changeType:u})}})),new Lu(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=eb()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ht(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class SI{constructor(e){this.Ge=e,this.ze=new Map,this.je=cs(),this.Je=fd(),this.He=fd(),this.Ye=new pn(At)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:tt(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Zm(u))if(s===0){const h=new Qe(u.path);this.et(n,h,ir.newNoDocument(h,it.min()))}else Ht(s===1,20013,{expectedCount:s});else{const h=this._t(n);if(h!==s){const g=this.ut(e),p=g?this.ct(g,e,h):1;if(p!==0){this.it(n);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,m)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let h,g;try{h=sa(s).toUint8Array()}catch(p){if(p instanceof QE)return Xo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new Up(h,o,u)}catch(p){return Xo(p instanceof cu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.ge===0?null:g}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const h=this.Ge.ht(),g=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,h)=>{const g=this.ot(h);if(g){if(u.current&&Zm(g.target)){const p=new Qe(g.target.path);this.It(p).has(h)||this.Et(h,p)||this.et(h,p,ir.newNoDocument(p,e))}u.Be&&(n.set(h,u.ke()),u.qe())}}));let s=Rt();this.He.forEach(((u,h)=>{let g=!0;h.forEachWhile((p=>{const m=this.ot(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(s=s.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const o=new mh(e,n,this.Ye,this.je,s);return this.je=cs(),this.Je=fd(),this.He=fd(),this.Ye=new pn(At),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Z_,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new zn(At),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new zn(At),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||De("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Z_),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function fd(){return new pn(Qe.comparator)}function eb(){return new pn(Qe.comparator)}const wI={asc:"ASCENDING",desc:"DESCENDING"},AI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RI={and:"AND",or:"OR"};class CI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function tp(i,e){return i.useProto3Json||ah(e)?e:{value:e}}function Fd(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ST(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function II(i,e){return Fd(i,e.toTimestamp())}function xi(i){return Ht(!!i,49232),it.fromTimestamp((function(n){const s=ia(n);return new Lt(s.seconds,s.nanos)})(i))}function zp(i,e){return np(i,e).canonicalString()}function np(i,e){const n=(function(o){return new an(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function wT(i){const e=an.fromString(i);return Ht(xT(e),10190,{key:e.toString()}),e}function rp(i,e){return zp(i.databaseId,e.path)}function km(i,e){const n=wT(e);if(n.get(1)!==i.databaseId.projectId)throw new xe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new xe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Qe(RT(n))}function AT(i,e){return zp(i.databaseId,e)}function xI(i){const e=wT(i);return e.length===4?an.emptyPath():RT(e)}function ip(i){return new an(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function RT(i){return Ht(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function tb(i,e,n){return{name:rp(i,e),fields:n.value.mapValue.fields}}function NI(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:tt(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(m,_){return m.useProto3Json?(Ht(_===void 0||typeof _=="string",58123),Zn.fromBase64String(_||"")):(Ht(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Zn.fromUint8Array(_||new Uint8Array))})(i,e.targetChange.resumeToken),h=e.targetChange.cause,g=h&&(function(m){const _=m.code===void 0?ie.UNKNOWN:bT(m.code);return new xe(_,m.message||"")})(h);n=new TT(s,o,u,g||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=km(i,s.document.name),u=xi(s.document.updateTime),h=s.document.createTime?xi(s.document.createTime):it.min(),g=new Ar({mapValue:{fields:s.document.fields}}),p=ir.newFoundDocument(o,u,h,g),m=s.targetIds||[],_=s.removedTargetIds||[];n=new Ad(m,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=km(i,s.document),u=s.readTime?xi(s.readTime):it.min(),h=ir.newNoDocument(o,u),g=s.removedTargetIds||[];n=new Ad([],g,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=km(i,s.document),u=s.removedTargetIds||[];n=new Ad([],u,o,null)}else{if(!("filter"in e))return tt(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,h=new _I(o,u),g=s.targetId;n=new ET(g,h)}}return n}function kI(i,e){let n;if(e instanceof ju)n={update:tb(i,e.key,e.value)};else if(e instanceof fh)n={delete:rp(i,e.key)};else if(e instanceof ha)n={update:tb(i,e.key,e.data),updateMask:zI(e.fieldMask)};else{if(!(e instanceof gI))return tt(16599,{Vt:e.type});n={verify:rp(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,h){const g=h.transform;if(g instanceof Ru)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Cu)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Iu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof qd)return{fieldPath:h.field.canonicalString(),increment:g.Ae};throw tt(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:II(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:tt(27497)})(i,e.precondition)),n}function DI(i,e){return i&&i.length>0?(Ht(e!==void 0,14353),i.map((n=>(function(o,u){let h=o.updateTime?xi(o.updateTime):xi(u);return h.isEqual(it.min())&&(h=xi(u)),new fI(h,o.transformResults||[])})(n,e)))):[]}function MI(i,e){return{documents:[AT(i,e.path)]}}function OI(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=AT(i,o);const u=(function(m){if(m.length!==0)return IT(hi.create(m,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const h=(function(m){if(m.length!==0)return m.map((_=>(function(S){return{field:Uo(S.field),direction:LI(S.dir)}})(_)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const g=tp(i,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:n,parent:o}}function VI(i){let e=xI(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Ht(s===1,65062);const _=n.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let u=[];n.where&&(u=(function(T){const S=CT(T);return S instanceof hi&&rT(S)?S.getFilters():[S]})(n.where));let h=[];n.orderBy&&(h=(function(T){return T.map((S=>(function(P){return new Au(zo(P.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(S)))})(n.orderBy));let g=null;n.limit&&(g=(function(T){let S;return S=typeof T=="object"?T.value:T,ah(S)?null:S})(n.limit));let p=null;n.startAt&&(p=(function(T){const S=!!T.before,w=T.values||[];return new zd(w,S)})(n.startAt));let m=null;return n.endAt&&(m=(function(T){const S=!T.before,w=T.values||[];return new zd(w,S)})(n.endAt)),Z2(e,o,h,u,g,"F",p,m)}function jI(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tt(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function CT(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=zo(n.unaryFilter.field);return jn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=zo(n.unaryFilter.field);return jn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=zo(n.unaryFilter.field);return jn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=zo(n.unaryFilter.field);return jn.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return tt(61313);default:return tt(60726)}})(i):i.fieldFilter!==void 0?(function(n){return jn.create(zo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return tt(58110);default:return tt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return hi.create(n.compositeFilter.filters.map((s=>CT(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return tt(1026)}})(n.compositeFilter.op))})(i):tt(30097,{filter:i})}function LI(i){return wI[i]}function PI(i){return AI[i]}function UI(i){return RI[i]}function Uo(i){return{fieldPath:i.canonicalString()}}function zo(i){return Jn.fromServerFormat(i.fieldPath)}function IT(i){return i instanceof jn?(function(n){if(n.op==="=="){if(q_(n.value))return{unaryFilter:{field:Uo(n.field),op:"IS_NAN"}};if(B_(n.value))return{unaryFilter:{field:Uo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(q_(n.value))return{unaryFilter:{field:Uo(n.field),op:"IS_NOT_NAN"}};if(B_(n.value))return{unaryFilter:{field:Uo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uo(n.field),op:PI(n.op),value:n.value}}})(i):i instanceof hi?(function(n){const s=n.getFilters().map((o=>IT(o)));return s.length===1?s[0]:{compositeFilter:{op:UI(n.op),filters:s}}})(i):tt(54877,{filter:i})}function zI(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function xT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class $s{constructor(e,n,s,o,u=it.min(),h=it.min(),g=Zn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(e){return new $s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class BI{constructor(e){this.yt=e}}function qI(i){const e=VI({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Bd(e,e.limit,"L"):e}class FI{constructor(){this.Cn=new HI}addToCollectionParentIndex(e,n){return this.Cn.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve(ra.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve(ra.min())}updateCollectionGroup(e,n,s){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class HI{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new zn(an.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new zn(an.comparator)).toArray()}}const nb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},NT=41943040;class wr{static withCacheSize(e){return new wr(e,wr.DEFAULT_COLLECTION_PERCENTILE,wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}wr.DEFAULT_COLLECTION_PERCENTILE=10,wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wr.DEFAULT=new wr(NT,wr.DEFAULT_COLLECTION_PERCENTILE,wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wr.DISABLED=new wr(-1,0,0);class Zo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Zo(0)}static cr(){return new Zo(-1)}}const rb="LruGarbageCollector",GI=1048576;function ib([i,e],[n,s]){const o=At(i,n);return o===0?At(e,s):o}class KI{constructor(e){this.Ir=e,this.buffer=new zn(ib),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();ib(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class QI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){De(rb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){sl(n)?De(rb,"Ignoring IndexedDB error during garbage collection: ",n):await il(n)}await this.Vr(3e5)}))}}class YI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return oe.resolve(sh.ce);const s=new KI(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(De("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(nb)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(De("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nb):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,h,g,p,m;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(De("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,g=Date.now(),this.removeTargets(e,s,n)))).next((T=>(u=T,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(m=Date.now(),Lo()<=St.DEBUG&&De("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-_}ms
	Determined least recently used ${o} in `+(g-h)+`ms
	Removed ${u} targets in `+(p-g)+`ms
	Removed ${T} documents in `+(m-p)+`ms
Total Duration: ${m-_}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function XI(i,e){return new YI(i,e)}class $I{constructor(){this.changes=new Xa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ir.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?oe.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class WI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class JI{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&yu(s.mutation,o,jr.empty(),Lt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Rt()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Rt()){const o=La();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let h=uu();return u.forEach(((g,p)=>{h=h.insert(g,p.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const s=La();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Rt())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,g)=>{n.set(h,g)}))}))}computeViews(e,n,s,o){let u=cs();const h=gu(),g=(function(){return gu()})();return n.forEach(((p,m)=>{const _=s.get(m.key);o.has(m.key)&&(_===void 0||_.mutation instanceof ha)?u=u.insert(m.key,m):_!==void 0?(h.set(m.key,_.mutation.getFieldMask()),yu(_.mutation,m,_.mutation.getFieldMask(),Lt.now())):h.set(m.key,jr.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((m,_)=>h.set(m,_))),n.forEach(((m,_)=>g.set(m,new WI(_,h.get(m)??null)))),g)))}recalculateAndSaveOverlays(e,n){const s=gu();let o=new pn(((h,g)=>h-g)),u=Rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const g of h)g.keys().forEach((p=>{const m=n.get(p);if(m===null)return;let _=s.get(p)||jr.empty();_=g.applyToLocalView(m,_),s.set(p,_);const T=(o.get(g.batchId)||Rt()).add(p);o=o.insert(g.batchId,T)}))})).next((()=>{const h=[],g=o.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),m=p.key,_=p.value,T=hT();_.forEach((S=>{if(!u.has(S)){const w=vT(n.get(S),s.get(S));w!==null&&T.set(S,w),u=u.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(e,m,T))}return oe.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(h){return Qe.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):oT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):oe.resolve(La());let g=Eu,p=u;return h.next((m=>oe.forEach(m,((_,T)=>(g<T.largestBatchId&&(g=T.largestBatchId),u.get(_)?oe.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{p=p.insert(_,S)}))))).next((()=>this.populateOverlays(e,m,u))).next((()=>this.computeViews(e,p,m,Rt()))).next((_=>({batchId:g,changes:dT(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Qe(n)).next((s=>{let o=uu();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let h=uu();return this.indexManager.getCollectionParents(e,u).next((g=>oe.forEach(g,(p=>{const m=(function(T,S){return new al(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,m,s,o).next((_=>{_.forEach(((T,S)=>{h=h.insert(T,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((h=>{u.forEach(((p,m)=>{const _=m.getKey();h.get(_)===null&&(h=h.insert(_,ir.newInvalidDocument(_)))}));let g=uu();return h.forEach(((p,m)=>{const _=u.get(p);_!==void 0&&yu(_.mutation,m,jr.empty(),Lt.now()),ch(n,m)&&(g=g.insert(p,m))})),g}))}}class ZI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return oe.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:xi(o.createTime)}})(n)),oe.resolve()}getNamedQuery(e,n){return oe.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:qI(o.bundledQuery),readTime:xi(o.readTime)}})(n)),oe.resolve()}}class ex{constructor(){this.overlays=new pn(Qe.comparator),this.qr=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const s=La();return oe.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),oe.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),oe.resolve()}getOverlaysForCollection(e,n,s){const o=La(),u=n.length+1,h=new Qe(n.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const p=g.getNext().value,m=p.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return oe.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new pn(((m,_)=>m-_));const h=this.overlays.getIterator();for(;h.hasNext();){const m=h.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>s){let _=u.get(m.largestBatchId);_===null&&(_=La(),u=u.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const g=La(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((m,_)=>g.set(m,_))),!(g.size()>=o)););return oe.resolve(g)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new vI(n,s));let u=this.qr.get(n);u===void 0&&(u=Rt(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}class tx{constructor(){this.sessionToken=Zn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,oe.resolve()}}class Bp{constructor(){this.Qr=new zn(Hn.$r),this.Ur=new zn(Hn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Hn(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Hn(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new Qe(new an([])),s=new Hn(n,e),o=new Hn(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),u.push(h.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Qe(new an([])),s=new Hn(n,e),o=new Hn(n,e+1);let u=Rt();return this.Ur.forEachInRange([s,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const n=new Hn(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Hn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Qe.comparator(e.key,n.key)||At(e.Yr,n.Yr)}static Kr(e,n){return At(e.Yr,n.Yr)||Qe.comparator(e.key,n.key)}}class nx{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new zn(Hn.$r)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new yI(u,n,s,o);this.mutationQueue.push(h);for(const g of o)this.Zr=this.Zr.add(new Hn(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return oe.resolve(h)}lookupMutationBatch(e,n){return oe.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return oe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?Dp:this.tr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Hn(n,0),o=new Hn(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(h=>{const g=this.Xr(h.Yr);u.push(g)})),oe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new zn(At);return n.forEach((o=>{const u=new Hn(o,0),h=new Hn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,h],(g=>{s=s.add(g.Yr)}))})),oe.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;Qe.isDocumentKey(u)||(u=u.child(""));const h=new Hn(new Qe(u),0);let g=new zn(At);return this.Zr.forEachWhile((p=>{const m=p.key.path;return!!s.isPrefixOf(m)&&(m.length===o&&(g=g.add(p.Yr)),!0)}),h),oe.resolve(this.ti(g))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Ht(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return oe.forEach(n.mutations,(o=>{const u=new Hn(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Hn(n,0),o=this.Zr.firstAfterOrEqual(s);return oe.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class rx{constructor(e){this.ri=e,this.docs=(function(){return new pn(Qe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,h=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return oe.resolve(s?s.document.mutableCopy():ir.newInvalidDocument(n))}getEntries(e,n){let s=cs();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():ir.newInvalidDocument(o))})),oe.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=cs();const h=n.path,g=new Qe(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:m,value:{document:_}}=p.getNext();if(!h.isPrefixOf(m.path))break;m.path.length>h.length+1||k2(N2(_),s)<=0||(o.has(_.key)||ch(n,_))&&(u=u.insert(_.key,_.mutableCopy()))}return oe.resolve(u)}getAllFromCollectionGroup(e,n,s,o){tt(9500)}ii(e,n){return oe.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new ix(this)}getSize(e){return oe.resolve(this.size)}}class ix extends $I{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),oe.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class sx{constructor(e){this.persistence=e,this.si=new Xa((n=>Vp(n)),jp),this.lastRemoteSnapshotVersion=it.min(),this.highestTargetId=0,this.oi=0,this._i=new Bp,this.targetCount=0,this.ai=Zo.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),oe.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Zo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.Pr(n),oe.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((h,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.si.delete(h),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),oe.waitFor(u).next((()=>o))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return oe.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),oe.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),oe.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return oe.resolve(s)}containsKey(e,n){return oe.resolve(this._i.containsKey(n))}}class kT{constructor(e,n){this.ui={},this.overlays={},this.ci=new sh(0),this.li=!1,this.li=!0,this.hi=new tx,this.referenceDelegate=e(this),this.Pi=new sx(this),this.indexManager=new FI,this.remoteDocumentCache=(function(o){return new rx(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new BI(n),this.Ii=new ZI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ex,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new nx(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){De("MemoryPersistence","Starting transaction:",e);const o=new ax(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return oe.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class ax extends M2{constructor(e){super(),this.currentSequenceNumber=e}}class qp{constructor(e){this.persistence=e,this.Ri=new Bp,this.Vi=null}static mi(e){return new qp(e)}get fi(){if(this.Vi)return this.Vi;throw tt(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),oe.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),oe.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.fi,(s=>{const o=Qe.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,it.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return oe.or([()=>oe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Hd{constructor(e,n){this.persistence=e,this.pi=new Xa((s=>j2(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=XI(this,n)}static mi(e,n){return new Hd(e,n)}Ei(){}di(e){return oe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return oe.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?oe.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,n).next((g=>{g||(s++,u.removeEntry(h,it.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),oe.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),oe.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),oe.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Td(e.data.value)),n}br(e,n,s){return oe.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return oe.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Fp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=Rt(),o=Rt();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Fp(e,n.fromCache,s,o)}}class ox{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class lx{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Dw()?8:O2(ar())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new ox;return this.Ss(e,n,h).next((g=>{if(u.result=g,this.Vs)return this.bs(e,n,h,g.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(Lo()<=St.DEBUG&&De("QueryEngine","SDK will not create cache indexes for query:",Po(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),oe.resolve()):(Lo()<=St.DEBUG&&De("QueryEngine","Query:",Po(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Lo()<=St.DEBUG&&De("QueryEngine","The SDK decides to create cache indexes for query:",Po(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ii(n))):oe.resolve())}ys(e,n){if(K_(n))return oe.resolve(null);let s=Ii(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Bd(n,null,"F"),s=Ii(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const h=Rt(...u);return this.ps.getDocuments(e,h).next((g=>this.indexManager.getMinOffset(e,s).next((p=>{const m=this.Ds(n,g);return this.Cs(n,m,h,p.readTime)?this.ys(e,Bd(n,null,"F")):this.vs(e,m,n,p)}))))})))))}ws(e,n,s,o){return K_(n)||o.isEqual(it.min())?oe.resolve(null):this.ps.getDocuments(e,s).next((u=>{const h=this.Ds(n,u);return this.Cs(n,h,s,o)?oe.resolve(null):(Lo()<=St.DEBUG&&De("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Po(n)),this.vs(e,h,n,x2(o,Eu)).next((g=>g)))}))}Ds(e,n){let s=new zn(uT(e));return n.forEach(((o,u)=>{ch(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return Lo()<=St.DEBUG&&De("QueryEngine","Using full collection scan to execute query:",Po(n)),this.ps.getDocumentsMatchingQuery(e,n,ra.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}const Hp="LocalStore",ux=3e8;class cx{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new pn(At),this.xs=new Xa((u=>Vp(u)),jp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function dx(i,e,n,s){return new cx(i,e,n,s)}async function DT(i,e){const n=ot(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const h=[],g=[];let p=Rt();for(const m of o){h.push(m.batchId);for(const _ of m.mutations)p=p.add(_.key)}for(const m of u){g.push(m.batchId);for(const _ of m.mutations)p=p.add(_.key)}return n.localDocuments.getDocuments(s,p).next((m=>({Ls:m,removedBatchIds:h,addedBatchIds:g})))}))}))}function hx(i,e){const n=ot(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,p,m,_){const T=m.batch,S=T.keys();let w=oe.resolve();return S.forEach((P=>{w=w.next((()=>_.getEntry(p,P))).next((F=>{const B=m.docVersions.get(P);Ht(B!==null,48541),F.version.compareTo(B)<0&&(T.applyToRemoteDocument(F,m),F.isValidDocument()&&(F.setReadTime(m.commitVersion),_.addEntry(F)))}))})),w.next((()=>g.mutationQueue.removeMutationBatch(p,T)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(g){let p=Rt();for(let m=0;m<g.mutationResults.length;++m)g.mutationResults[m].transformResults.length>0&&(p=p.add(g.batch.mutations[m].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function MT(i){const e=ot(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function fx(i,e){const n=ot(i),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const g=[];e.targetChanges.forEach(((_,T)=>{const S=o.get(T);if(!S)return;g.push(n.Pi.removeMatchingKeys(u,_.removedDocuments,T).next((()=>n.Pi.addMatchingKeys(u,_.addedDocuments,T))));let w=S.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?w=w.withResumeToken(Zn.EMPTY_BYTE_STRING,it.min()).withLastLimboFreeSnapshotVersion(it.min()):_.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(_.resumeToken,s)),o=o.insert(T,w),(function(F,B,ye){return F.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=ux?!0:ye.addedDocuments.size+ye.modifiedDocuments.size+ye.removedDocuments.size>0})(S,w,_)&&g.push(n.Pi.updateTargetData(u,w))}));let p=cs(),m=Rt();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,_))})),g.push(mx(u,h,e.documentUpdates).next((_=>{p=_.ks,m=_.qs}))),!s.isEqual(it.min())){const _=n.Pi.getLastRemoteSnapshotVersion(u).next((T=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));g.push(_)}return oe.waitFor(g).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,m))).next((()=>p))})).then((u=>(n.Ms=o,u)))}function mx(i,e,n){let s=Rt(),o=Rt();return n.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let h=cs();return n.forEach(((g,p)=>{const m=u.get(g);p.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(g)),p.isNoDocument()&&p.version.isEqual(it.min())?(e.removeEntry(g,p.readTime),h=h.insert(g,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),h=h.insert(g,p)):De(Hp,"Ignoring outdated watch update for ",g,". Current version:",m.version," Watch version:",p.version)})),{ks:h,qs:o}}))}function px(i,e){const n=ot(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Dp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function gx(i,e){const n=ot(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,oe.resolve(o)):n.Pi.allocateTargetId(s).next((h=>(o=new $s(e,h,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function sp(i,e,n){const s=ot(i),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!sl(h))throw h;De(Hp,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function sb(i,e,n){const s=ot(i);let o=it.min(),u=Rt();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(p,m,_){const T=ot(p),S=T.xs.get(_);return S!==void 0?oe.resolve(T.Ms.get(S)):T.Pi.getTargetData(m,_)})(s,h,Ii(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,g.targetId).next((p=>{u=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,e,n?o:it.min(),n?u:Rt()))).next((g=>(yx(s,tI(e),g),{documents:g,Qs:u})))))}function yx(i,e,n){let s=i.Os.get(e)||it.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Os.set(e,s)}class ab{constructor(){this.activeTargetIds=oI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vx{constructor(){this.Mo=new ab,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ab,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class _x{Oo(e){}shutdown(){}}const ob="ConnectivityMonitor";class lb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){De(ob,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){De(ob,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let md=null;function ap(){return md===null?md=(function(){return 268435456+Math.round(2147483648*Math.random())})():md++,"0x"+md.toString(16)}const Dm="RestConnection",bx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ex{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Pd?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const h=ap(),g=this.zo(e,n.toUriEncodedString());De(Dm,`Sending RPC '${e}' ${h}:`,g,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:m}=new URL(g),_=ua(m);return this.Jo(e,g,p,s,_).then((T=>(De(Dm,`Received RPC '${e}' ${h}: `,T),T)),(T=>{throw Xo(Dm,`RPC '${e}' ${h} failed with error: `,T,"url: ",g,"request:",s),T}))}Ho(e,n,s,o,u,h){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+rl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=bx[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class Tx{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const nr="WebChannelConnection";class Sx extends Ex{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const h=ap();return new Promise(((g,p)=>{const m=new jE;m.setWithCredentials(!0),m.listenOnce(LE.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Ed.NO_ERROR:const T=m.getResponseJson();De(nr,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),g(T);break;case Ed.TIMEOUT:De(nr,`RPC '${e}' ${h} timed out`),p(new xe(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Ed.HTTP_ERROR:const S=m.getStatus();if(De(nr,`RPC '${e}' ${h} failed with status:`,S,"response text:",m.getResponseText()),S>0){let w=m.getResponseJson();Array.isArray(w)&&(w=w[0]);const P=w?.error;if(P&&P.status&&P.message){const F=(function(ye){const he=ye.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(he)>=0?he:ie.UNKNOWN})(P.status);p(new xe(F,P.message))}else p(new xe(ie.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new xe(ie.UNAVAILABLE,"Connection failed."));break;default:tt(9055,{l_:e,streamId:h,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{De(nr,`RPC '${e}' ${h} completed.`)}}));const _=JSON.stringify(o);De(nr,`RPC '${e}' ${h} sending request:`,o),m.send(n,"POST",_,s,15)}))}T_(e,n,s){const o=ap(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=zE(),g=UE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const _=u.join("");De(nr,`Creating RPC '${e}' stream ${o}: ${_}`,p);const T=h.createWebChannel(_,p);this.I_(T);let S=!1,w=!1;const P=new Tx({Yo:B=>{w?De(nr,`Not sending because RPC '${e}' stream ${o} is closed:`,B):(S||(De(nr,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),De(nr,`RPC '${e}' stream ${o} sending:`,B),T.send(B))},Zo:()=>T.close()}),F=(B,ye,he)=>{B.listen(ye,(re=>{try{he(re)}catch(Ae){setTimeout((()=>{throw Ae}),0)}}))};return F(T,lu.EventType.OPEN,(()=>{w||(De(nr,`RPC '${e}' stream ${o} transport opened.`),P.o_())})),F(T,lu.EventType.CLOSE,(()=>{w||(w=!0,De(nr,`RPC '${e}' stream ${o} transport closed`),P.a_(),this.E_(T))})),F(T,lu.EventType.ERROR,(B=>{w||(w=!0,Xo(nr,`RPC '${e}' stream ${o} transport errored. Name:`,B.name,"Message:",B.message),P.a_(new xe(ie.UNAVAILABLE,"The operation could not be completed")))})),F(T,lu.EventType.MESSAGE,(B=>{if(!w){const ye=B.data[0];Ht(!!ye,16349);const he=ye,re=he?.error||he[0]?.error;if(re){De(nr,`RPC '${e}' stream ${o} received error:`,re);const Ae=re.status;let ze=(function(C){const I=Vn[C];if(I!==void 0)return bT(I)})(Ae),Ve=re.message;ze===void 0&&(ze=ie.INTERNAL,Ve="Unknown error status: "+Ae+" with message "+re.message),w=!0,P.a_(new xe(ze,Ve)),T.close()}else De(nr,`RPC '${e}' stream ${o} received:`,ye),P.u_(ye)}})),F(g,PE.STAT_EVENT,(B=>{B.stat===Ym.PROXY?De(nr,`RPC '${e}' stream ${o} detected buffering proxy`):B.stat===Ym.NOPROXY&&De(nr,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{P.__()}),0),P}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Mm(){return typeof document<"u"?document:null}function ph(i){return new CI(i,!0)}class OT{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&De("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ub="PersistentStream";class VT{constructor(e,n,s,o,u,h,g,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new OT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ie.RESOURCE_EXHAUSTED?(us(n.toString()),us("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new xe(ie.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return De(ub,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(De(ub,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class wx extends VT{constructor(e,n,s,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,h),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=NI(this.serializer,e),s=(function(u){if(!("targetChange"in u))return it.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?it.min():h.readTime?xi(h.readTime):it.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=ip(this.serializer),n.addTarget=(function(u,h){let g;const p=h.target;if(g=Zm(p)?{documents:MI(u,p)}:{query:OI(u,p).ft},g.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){g.resumeToken=ST(u,h.resumeToken);const m=tp(u,h.expectedCount);m!==null&&(g.expectedCount=m)}else if(h.snapshotVersion.compareTo(it.min())>0){g.readTime=Fd(u,h.snapshotVersion.toTimestamp());const m=tp(u,h.expectedCount);m!==null&&(g.expectedCount=m)}return g})(this.serializer,e);const s=jI(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=ip(this.serializer),n.removeTarget=e,this.q_(n)}}class Ax extends VT{constructor(e,n,s,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,h),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ht(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ht(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ht(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=DI(e.writeResults,e.commitTime),s=xi(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=ip(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>kI(this.serializer,s)))};this.q_(n)}}class Rx{}class Cx extends Rx{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new xe(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Go(e,np(n,s),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new xe(ie.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,g])=>this.connection.Ho(e,np(n,s),o,h,g,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new xe(ie.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Ix{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(us(n),this.aa=!1):De("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ka="RemoteStore";class xx{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{$a(this)&&(De(Ka,"Restarting streams for network reachability change."),await(async function(p){const m=ot(p);m.Ea.add(4),await Pu(m),m.Ra.set("Unknown"),m.Ea.delete(4),await gh(m)})(this))}))})),this.Ra=new Ix(s,o)}}async function gh(i){if($a(i))for(const e of i.da)await e(!0)}async function Pu(i){for(const e of i.da)await e(!1)}function jT(i,e){const n=ot(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Yp(n)?Qp(n):ol(n).O_()&&Kp(n,e))}function Gp(i,e){const n=ot(i),s=ol(n);n.Ia.delete(e),s.O_()&&LT(n,e),n.Ia.size===0&&(s.O_()?s.L_():$a(n)&&n.Ra.set("Unknown"))}function Kp(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(it.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ol(i).Y_(e)}function LT(i,e){i.Va.Ue(e),ol(i).Z_(e)}function Qp(i){i.Va=new SI({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),ol(i).start(),i.Ra.ua()}function Yp(i){return $a(i)&&!ol(i).x_()&&i.Ia.size>0}function $a(i){return ot(i).Ea.size===0}function PT(i){i.Va=void 0}async function Nx(i){i.Ra.set("Online")}async function kx(i){i.Ia.forEach(((e,n)=>{Kp(i,e)}))}async function Dx(i,e){PT(i),Yp(i)?(i.Ra.ha(e),Qp(i)):i.Ra.set("Unknown")}async function Mx(i,e,n){if(i.Ra.set("Online"),e instanceof TT&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const g of u.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,h),o.Ia.delete(g),o.Va.removeTarget(g))})(i,e)}catch(s){De(Ka,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Gd(i,s)}else if(e instanceof Ad?i.Va.Ze(e):e instanceof ET?i.Va.st(e):i.Va.tt(e),!n.isEqual(it.min()))try{const s=await MT(i.localStore);n.compareTo(s)>=0&&await(function(u,h){const g=u.Va.Tt(h);return g.targetChanges.forEach(((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const _=u.Ia.get(m);_&&u.Ia.set(m,_.withResumeToken(p.resumeToken,h))}})),g.targetMismatches.forEach(((p,m)=>{const _=u.Ia.get(p);if(!_)return;u.Ia.set(p,_.withResumeToken(Zn.EMPTY_BYTE_STRING,_.snapshotVersion)),LT(u,p);const T=new $s(_.target,p,m,_.sequenceNumber);Kp(u,T)})),u.remoteSyncer.applyRemoteEvent(g)})(i,n)}catch(s){De(Ka,"Failed to raise snapshot:",s),await Gd(i,s)}}async function Gd(i,e,n){if(!sl(e))throw e;i.Ea.add(1),await Pu(i),i.Ra.set("Offline"),n||(n=()=>MT(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{De(Ka,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await gh(i)}))}function UT(i,e){return e().catch((n=>Gd(i,n,e)))}async function yh(i){const e=ot(i),n=oa(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Dp;for(;Ox(e);)try{const o=await px(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,Vx(e,o)}catch(o){await Gd(e,o)}zT(e)&&BT(e)}function Ox(i){return $a(i)&&i.Ta.length<10}function Vx(i,e){i.Ta.push(e);const n=oa(i);n.O_()&&n.X_&&n.ea(e.mutations)}function zT(i){return $a(i)&&!oa(i).x_()&&i.Ta.length>0}function BT(i){oa(i).start()}async function jx(i){oa(i).ra()}async function Lx(i){const e=oa(i);for(const n of i.Ta)e.ea(n.mutations)}async function Px(i,e,n){const s=i.Ta.shift(),o=Pp.from(s,e,n);await UT(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await yh(i)}async function Ux(i,e){e&&oa(i).X_&&await(async function(s,o){if((function(h){return bI(h)&&h!==ie.ABORTED})(o.code)){const u=s.Ta.shift();oa(s).B_(),await UT(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await yh(s)}})(i,e),zT(i)&&BT(i)}async function cb(i,e){const n=ot(i);n.asyncQueue.verifyOperationInProgress(),De(Ka,"RemoteStore received new credentials");const s=$a(n);n.Ea.add(3),await Pu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await gh(n)}async function zx(i,e){const n=ot(i);e?(n.Ea.delete(2),await gh(n)):e||(n.Ea.add(2),await Pu(n),n.Ra.set("Unknown"))}function ol(i){return i.ma||(i.ma=(function(n,s,o){const u=ot(n);return u.sa(),new wx(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:Nx.bind(null,i),t_:kx.bind(null,i),r_:Dx.bind(null,i),H_:Mx.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Yp(i)?Qp(i):i.Ra.set("Unknown")):(await i.ma.stop(),PT(i))}))),i.ma}function oa(i){return i.fa||(i.fa=(function(n,s,o){const u=ot(n);return u.sa(),new Ax(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:jx.bind(null,i),r_:Ux.bind(null,i),ta:Lx.bind(null,i),na:Px.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await yh(i)):(await i.fa.stop(),i.Ta.length>0&&(De(Ka,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class Xp{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new ss,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const h=Date.now()+s,g=new Xp(e,n,h,o,u);return g.start(s),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $p(i,e){if(us("AsyncQueue",`${e}: ${i}`),sl(i))return new xe(ie.UNAVAILABLE,`${e}: ${i}`);throw i}class Ko{static emptySet(e){return new Ko(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Qe.comparator(n.key,s.key):(n,s)=>Qe.comparator(n.key,s.key),this.keyedMap=uu(),this.sortedSet=new pn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ko)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Ko;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class db{constructor(){this.ga=new pn(Qe.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):tt(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class el{constructor(e,n,s,o,u,h,g,p,m){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,n,s,o,u){const h=[];return n.forEach((g=>{h.push({type:0,doc:g})})),new el(e,n,Ko.emptySet(n),h,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class Bx{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class qx{constructor(){this.queries=hb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=ot(n),u=o.queries;o.queries=hb(),u.forEach(((h,g)=>{for(const p of g.Sa)p.onError(s)}))})(this,new xe(ie.ABORTED,"Firestore shutting down"))}}function hb(){return new Xa((i=>lT(i)),uh)}async function Wp(i,e){const n=ot(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new Bx,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const g=$p(h,`Initialization of query '${Po(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Zp(n)}async function Jp(i,e){const n=ot(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const h=u.Sa.indexOf(e);h>=0&&(u.Sa.splice(h,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function Fx(i,e){const n=ot(i);let s=!1;for(const o of e){const u=o.query,h=n.queries.get(u);if(h){for(const g of h.Sa)g.Fa(o)&&(s=!0);h.wa=o}}s&&Zp(n)}function Hx(i,e,n){const s=ot(i),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function Zp(i){i.Ca.forEach((e=>{e.next()}))}var op,fb;(fb=op||(op={})).Ma="default",fb.Cache="cache";class eg{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new el(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=el.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==op.Cache}}class qT{constructor(e){this.key=e}}class FT{constructor(e){this.key=e}}class Gx{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Rt(),this.mutatedKeys=Rt(),this.eu=uT(e),this.tu=new Ko(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new db,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=o,g=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,T)=>{const S=o.get(_),w=ch(this.query,T)?T:null,P=!!S&&this.mutatedKeys.has(S.key),F=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let B=!1;S&&w?S.data.isEqual(w.data)?P!==F&&(s.track({type:3,doc:w}),B=!0):this.su(S,w)||(s.track({type:2,doc:w}),B=!0,(p&&this.eu(w,p)>0||m&&this.eu(w,m)<0)&&(g=!0)):!S&&w?(s.track({type:0,doc:w}),B=!0):S&&!w&&(s.track({type:1,doc:S}),B=!0,(p||m)&&(g=!0)),B&&(w?(h=h.add(w),u=F?u.add(_):u.delete(_)):(h=h.delete(_),u=u.delete(_)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const _=this.query.limitType==="F"?h.last():h.first();h=h.delete(_.key),u=u.delete(_.key),s.track({type:1,doc:_})}return{tu:h,iu:s,Cs:g,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((_,T)=>(function(w,P){const F=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt(20277,{Rt:B})}};return F(w)-F(P)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(s),o=o??!1;const g=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,m=p!==this.Za;return this.Za=p,h.length!==0||m?{snapshot:new el(this.query,e.tu,u,h,e.mutatedKeys,p===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new db,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Rt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new FT(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new qT(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Rt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return el.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const tg="SyncEngine";class Kx{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class Qx{constructor(e){this.key=e,this.hu=!1}}class Yx{constructor(e,n,s,o,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Xa((g=>lT(g)),uh),this.Iu=new Map,this.Eu=new Set,this.du=new pn(Qe.comparator),this.Au=new Map,this.Ru=new Bp,this.Vu={},this.mu=new Map,this.fu=Zo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Xx(i,e,n=!0){const s=XT(i);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await HT(s,e,n,!0),o}async function $x(i,e){const n=XT(i);await HT(n,e,!0,!1)}async function HT(i,e,n,s){const o=await gx(i.localStore,Ii(e)),u=o.targetId,h=i.sharedClientState.addLocalQueryTarget(u,n);let g;return s&&(g=await Wx(i,e,u,h==="current",o.resumeToken)),i.isPrimaryClient&&n&&jT(i.remoteStore,o),g}async function Wx(i,e,n,s,o){i.pu=(T,S,w)=>(async function(F,B,ye,he){let re=B.view.ru(ye);re.Cs&&(re=await sb(F.localStore,B.query,!1).then((({documents:N})=>B.view.ru(N,re))));const Ae=he&&he.targetChanges.get(B.targetId),ze=he&&he.targetMismatches.get(B.targetId)!=null,Ve=B.view.applyChanges(re,F.isPrimaryClient,Ae,ze);return pb(F,B.targetId,Ve.au),Ve.snapshot})(i,T,S,w);const u=await sb(i.localStore,e,!0),h=new Gx(e,u.Qs),g=h.ru(u.documents),p=Lu.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),m=h.applyChanges(g,i.isPrimaryClient,p);pb(i,n,m.au);const _=new Kx(e,n,h);return i.Tu.set(e,_),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),m.snapshot}async function Jx(i,e,n){const s=ot(i),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((h=>!uh(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await sp(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Gp(s.remoteStore,o.targetId),lp(s,o.targetId)})).catch(il)):(lp(s,o.targetId),await sp(s.localStore,o.targetId,!0))}async function Zx(i,e){const n=ot(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Gp(n.remoteStore,s.targetId))}async function eN(i,e,n){const s=oN(i);try{const o=await(function(h,g){const p=ot(h),m=Lt.now(),_=g.reduce(((w,P)=>w.add(P.key)),Rt());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let P=cs(),F=Rt();return p.Ns.getEntries(w,_).next((B=>{P=B,P.forEach(((ye,he)=>{he.isValidDocument()||(F=F.add(ye))}))})).next((()=>p.localDocuments.getOverlayedDocuments(w,P))).next((B=>{T=B;const ye=[];for(const he of g){const re=pI(he,T.get(he.key).overlayedDocument);re!=null&&ye.push(new ha(he.key,re,eT(re.value.mapValue),fr.exists(!0)))}return p.mutationQueue.addMutationBatch(w,m,ye,g)})).next((B=>{S=B;const ye=B.applyToLocalDocumentSet(T,F);return p.documentOverlayCache.saveOverlays(w,B.batchId,ye)}))})).then((()=>({batchId:S.batchId,changes:dT(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,g,p){let m=h.Vu[h.currentUser.toKey()];m||(m=new pn(At)),m=m.insert(g,p),h.Vu[h.currentUser.toKey()]=m})(s,o.batchId,n),await Uu(s,o.changes),await yh(s.remoteStore)}catch(o){const u=$p(o,"Failed to persist write");n.reject(u)}}async function GT(i,e){const n=ot(i);try{const s=await fx(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=n.Au.get(u);h&&(Ht(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?Ht(h.hu,14607):o.removedDocuments.size>0&&(Ht(h.hu,42227),h.hu=!1))})),await Uu(n,s,e)}catch(s){await il(s)}}function mb(i,e,n){const s=ot(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,h)=>{const g=h.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(h,g){const p=ot(h);p.onlineState=g;let m=!1;p.queries.forEach(((_,T)=>{for(const S of T.Sa)S.va(g)&&(m=!0)})),m&&Zp(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function tN(i,e,n){const s=ot(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let h=new pn(Qe.comparator);h=h.insert(u,ir.newNoDocument(u,it.min()));const g=Rt().add(u),p=new mh(it.min(),new Map,new pn(At),h,g);await GT(s,p),s.du=s.du.remove(u),s.Au.delete(e),ng(s)}else await sp(s.localStore,e,!1).then((()=>lp(s,e,n))).catch(il)}async function nN(i,e){const n=ot(i),s=e.batch.batchId;try{const o=await hx(n.localStore,e);QT(n,s,null),KT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Uu(n,o)}catch(o){await il(o)}}async function rN(i,e,n){const s=ot(i);try{const o=await(function(h,g){const p=ot(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let _;return p.mutationQueue.lookupMutationBatch(m,g).next((T=>(Ht(T!==null,37113),_=T.keys(),p.mutationQueue.removeMutationBatch(m,T)))).next((()=>p.mutationQueue.performConsistencyCheck(m))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(m,_,g))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_))).next((()=>p.localDocuments.getDocuments(m,_)))}))})(s.localStore,e);QT(s,e,n),KT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Uu(s,o)}catch(o){await il(o)}}function KT(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function QT(i,e,n){const s=ot(i);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function lp(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||YT(i,s)}))}function YT(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(Gp(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),ng(i))}function pb(i,e,n){for(const s of n)s instanceof qT?(i.Ru.addReference(s.key,e),iN(i,s)):s instanceof FT?(De(tg,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||YT(i,s.key)):tt(19791,{wu:s})}function iN(i,e){const n=e.key,s=n.path.canonicalString();i.du.get(n)||i.Eu.has(s)||(De(tg,"New document in limbo: "+n),i.Eu.add(s),ng(i))}function ng(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new Qe(an.fromString(e)),s=i.fu.next();i.Au.set(s,new Qx(n)),i.du=i.du.insert(n,s),jT(i.remoteStore,new $s(Ii(lh(n.path)),s,"TargetPurposeLimboResolution",sh.ce))}}async function Uu(i,e,n){const s=ot(i),o=[],u=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((g,p)=>{h.push(s.pu(p,e,n).then((m=>{if((m||n)&&s.isPrimaryClient){const _=m?!m.fromCache:n?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,_?"current":"not-current")}if(m){o.push(m);const _=Fp.As(p.targetId,m);u.push(_)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(p,m){const _=ot(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>oe.forEach(m,(S=>oe.forEach(S.Es,(w=>_.persistence.referenceDelegate.addReference(T,S.targetId,w))).next((()=>oe.forEach(S.ds,(w=>_.persistence.referenceDelegate.removeReference(T,S.targetId,w)))))))))}catch(T){if(!sl(T))throw T;De(Hp,"Failed to update sequence numbers: "+T)}for(const T of m){const S=T.targetId;if(!T.fromCache){const w=_.Ms.get(S),P=w.snapshotVersion,F=w.withLastLimboFreeSnapshotVersion(P);_.Ms=_.Ms.insert(S,F)}}})(s.localStore,u))}async function sN(i,e){const n=ot(i);if(!n.currentUser.isEqual(e)){De(tg,"User change. New user:",e.toKey());const s=await DT(n.localStore,e);n.currentUser=e,(function(u,h){u.mu.forEach((g=>{g.forEach((p=>{p.reject(new xe(ie.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Uu(n,s.Ls)}}function aN(i,e){const n=ot(i),s=n.Au.get(e);if(s&&s.hu)return Rt().add(s.key);{let o=Rt();const u=n.Iu.get(e);if(!u)return o;for(const h of u){const g=n.Tu.get(h);o=o.unionWith(g.view.nu)}return o}}function XT(i){const e=ot(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=GT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tN.bind(null,e),e.Pu.H_=Fx.bind(null,e.eventManager),e.Pu.yu=Hx.bind(null,e.eventManager),e}function oN(i){const e=ot(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rN.bind(null,e),e}class Kd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ph(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return dx(this.persistence,new lx,e.initialUser,this.serializer)}Cu(e){return new kT(qp.mi,this.serializer)}Du(e){return new vx}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kd.provider={build:()=>new Kd};class lN extends Kd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ht(this.persistence.referenceDelegate instanceof Hd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new QI(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?wr.withCacheSize(this.cacheSizeBytes):wr.DEFAULT;return new kT((s=>Hd.mi(s,n)),this.serializer)}}class up{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>mb(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=sN.bind(null,this.syncEngine),await zx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new qx})()}createDatastore(e){const n=ph(e.databaseInfo.databaseId),s=(function(u){return new Sx(u)})(e.databaseInfo);return(function(u,h,g,p){return new Cx(u,h,g,p)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,h,g){return new xx(s,o,u,h,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>mb(this.syncEngine,n,0)),(function(){return lb.v()?new lb:new _x})())}createSyncEngine(e,n){return(function(o,u,h,g,p,m,_){const T=new Yx(o,u,h,g,p,m);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=ot(n);De(Ka,"RemoteStore shutting down."),s.Ea.add(5),await Pu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}up.provider={build:()=>new up};class rg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):us("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const la="FirestoreClient";class uN{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=rr.UNAUTHENTICATED,this.clientId=kp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async h=>{De(la,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(De(la,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ss;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=$p(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Om(i,e){i.asyncQueue.verifyOperationInProgress(),De(la,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await DT(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function gb(i,e){i.asyncQueue.verifyOperationInProgress();const n=await cN(i);De(la,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>cb(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>cb(e.remoteStore,o))),i._onlineComponents=e}async function cN(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){De(la,"Using user provided OfflineComponentProvider");try{await Om(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ie.FAILED_PRECONDITION||o.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Xo("Error using user provided cache. Falling back to memory cache: "+n),await Om(i,new Kd)}}else De(la,"Using default OfflineComponentProvider"),await Om(i,new lN(void 0));return i._offlineComponents}async function $T(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(De(la,"Using user provided OnlineComponentProvider"),await gb(i,i._uninitializedComponentsProvider._online)):(De(la,"Using default OnlineComponentProvider"),await gb(i,new up))),i._onlineComponents}function dN(i){return $T(i).then((e=>e.syncEngine))}async function Qd(i){const e=await $T(i),n=e.eventManager;return n.onListen=Xx.bind(null,e.syncEngine),n.onUnlisten=Jx.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$x.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Zx.bind(null,e.syncEngine),n}function hN(i,e,n={}){const s=new ss;return i.asyncQueue.enqueueAndForget((async()=>(function(u,h,g,p,m){const _=new rg({next:S=>{_.Nu(),h.enqueueAndForget((()=>Jp(u,T)));const w=S.docs.has(g);!w&&S.fromCache?m.reject(new xe(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&S.fromCache&&p&&p.source==="server"?m.reject(new xe(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),T=new eg(lh(g.path),_,{includeMetadataChanges:!0,qa:!0});return Wp(u,T)})(await Qd(i),i.asyncQueue,e,n,s))),s.promise}function fN(i,e,n={}){const s=new ss;return i.asyncQueue.enqueueAndForget((async()=>(function(u,h,g,p,m){const _=new rg({next:S=>{_.Nu(),h.enqueueAndForget((()=>Jp(u,T))),S.fromCache&&p.source==="server"?m.reject(new xe(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),T=new eg(g,_,{includeMetadataChanges:!0,qa:!0});return Wp(u,T)})(await Qd(i),i.asyncQueue,e,n,s))),s.promise}function WT(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const yb=new Map;const JT="firestore.googleapis.com",vb=!0;class _b{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new xe(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=JT,this.ssl=vb}else this.host=e.host,this.ssl=e.ssl??vb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=NT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<GI)throw new xe(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}C2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new xe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new xe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new xe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vh{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _b({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _b(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new y2;switch(s.type){case"firstParty":return new E2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new xe(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=yb.get(n);s&&(De("ComponentProvider","Removing Datastore"),yb.delete(n),s.terminate())})(this),Promise.resolve()}}function mN(i,e,n,s={}){i=hr(i,vh);const o=ua(e),u=i._getSettings(),h={...u,emulatorOptions:i._getEmulatorOptions()},g=`${e}:${n}`;o&&(yp(`https://${g}`),vp("Firestore",!0)),u.host!==JT&&u.host!==g&&Xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:g,ssl:o,emulatorOptions:s};if(!Ba(p,h)&&(i._setSettings(p),s.mockUserToken)){let m,_;if(typeof s.mockUserToken=="string")m=s.mockUserToken,_=rr.MOCK_USER;else{m=Sw(s.mockUserToken,i._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new xe(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new rr(T)}i._authCredentials=new v2(new qE(m,_))}}class fs{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new fs(this.firestore,e,this._query)}}class En{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ta(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new En(this.firestore,e,this._key)}toJSON(){return{type:En._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Vu(n,En._jsonSchema))return new En(e,s||null,new Qe(an.fromString(n.referencePath)))}}En._jsonSchemaVersion="firestore/documentReference/1.0",En._jsonSchema={type:Ln("string",En._jsonSchemaVersion),referencePath:Ln("string")};class ta extends fs{constructor(e,n,s){super(e,n,lh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new En(this.firestore,null,new Qe(e))}withConverter(e){return new ta(this.firestore,e,this._path)}}function Xt(i,e,...n){if(i=rn(i),FE("collection","path",e),i instanceof vh){const s=an.fromString(e,...n);return D_(s),new ta(i,null,s)}{if(!(i instanceof En||i instanceof ta))throw new xe(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(an.fromString(e,...n));return D_(s),new ta(i.firestore,null,s)}}function wt(i,e,...n){if(i=rn(i),arguments.length===1&&(e=kp.newId()),FE("doc","path",e),i instanceof vh){const s=an.fromString(e,...n);return k_(s),new En(i,null,new Qe(s))}{if(!(i instanceof En||i instanceof ta))throw new xe(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(an.fromString(e,...n));return k_(s),new En(i.firestore,i instanceof ta?i.converter:null,new Qe(s))}}const bb="AsyncQueue";class Eb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new OT(this,"async_queue_retry"),this._c=()=>{const s=Mm();s&&De(bb,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Mm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Mm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ss;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!sl(e))throw e;De(bb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,us("INTERNAL UNHANDLED ERROR: ",Tb(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Xp.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&tt(47125,{Pc:Tb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Tb(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}function Sb(i){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(i,["next","error","complete"])}class Mi extends vh{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new Eb,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Eb(e),this._firestoreClient=void 0,await e}}}function pN(i,e){const n=typeof i=="object"?i:eh(),s=typeof i=="string"?i:Pd,o=Zd(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=Hb("firestore");u&&mN(o,...u)}return o}function zu(i){if(i._terminated)throw new xe(ie.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||gN(i),i._firestoreClient}function gN(i){const e=i._freezeSettings(),n=(function(o,u,h,g){return new U2(o,u,h,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,WT(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new uN(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}class Zr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zr(Zn.fromBase64String(e))}catch(n){throw new xe(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Zr(Zn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Zr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vu(e,Zr._jsonSchema))return Zr.fromBase64String(e.bytes)}}Zr._jsonSchemaVersion="firestore/bytes/1.0",Zr._jsonSchema={type:Ln("string",Zr._jsonSchemaVersion),bytes:Ln("string")};class Bu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new xe(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _h{constructor(e){this._methodName=e}}class Ni{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new xe(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new xe(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return At(this._lat,e._lat)||At(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ni._jsonSchemaVersion}}static fromJSON(e){if(Vu(e,Ni._jsonSchema))return new Ni(e.latitude,e.longitude)}}Ni._jsonSchemaVersion="firestore/geoPoint/1.0",Ni._jsonSchema={type:Ln("string",Ni._jsonSchemaVersion),latitude:Ln("number"),longitude:Ln("number")};class ki{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ki._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vu(e,ki._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ki(e.vectorValues);throw new xe(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ki._jsonSchemaVersion="firestore/vectorValue/1.0",ki._jsonSchema={type:Ln("string",ki._jsonSchemaVersion),vectorValues:Ln("object")};const yN=/^__.*__$/;class vN{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ha(e,this.data,this.fieldMask,n,this.fieldTransforms):new ju(e,this.data,n,this.fieldTransforms)}}class ZT{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ha(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function e1(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt(40011,{Ac:i})}}class ig{constructor(e,n,s,o,u,h){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ig({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Yd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(e1(this.Ac)&&yN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class _N{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||ph(e)}Cc(e,n,s,o=!1){return new ig({Ac:e,methodName:n,Dc:s,path:Jn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qu(i){const e=i._freezeSettings(),n=ph(i._databaseId);return new _N(i._databaseId,!!e.ignoreUndefinedProperties,n)}function sg(i,e,n,s,o,u={}){const h=i.Cc(u.merge||u.mergeFields?2:0,e,n,o);og("Data must be an object, but it was:",h,s);const g=r1(s,h);let p,m;if(u.merge)p=new jr(h.fieldMask),m=h.fieldTransforms;else if(u.mergeFields){const _=[];for(const T of u.mergeFields){const S=cp(e,T,n);if(!h.contains(S))throw new xe(ie.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);s1(_,S)||_.push(S)}p=new jr(_),m=h.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,m=h.fieldTransforms;return new vN(new Ar(g),p,m)}class bh extends _h{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bh}}class ag extends _h{_toFieldTransform(e){return new dI(e.path,new Ru)}isEqual(e){return e instanceof ag}}function t1(i,e,n,s){const o=i.Cc(1,e,n);og("Data must be an object, but it was:",o,s);const u=[],h=Ar.empty();da(s,((p,m)=>{const _=lg(e,p,n);m=rn(m);const T=o.yc(_);if(m instanceof bh)u.push(_);else{const S=Fu(m,T);S!=null&&(u.push(_),h.set(_,S))}}));const g=new jr(u);return new ZT(h,g,o.fieldTransforms)}function n1(i,e,n,s,o,u){const h=i.Cc(1,e,n),g=[cp(e,s,n)],p=[o];if(u.length%2!=0)throw new xe(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<u.length;S+=2)g.push(cp(e,u[S])),p.push(u[S+1]);const m=[],_=Ar.empty();for(let S=g.length-1;S>=0;--S)if(!s1(m,g[S])){const w=g[S];let P=p[S];P=rn(P);const F=h.yc(w);if(P instanceof bh)m.push(w);else{const B=Fu(P,F);B!=null&&(m.push(w),_.set(w,B))}}const T=new jr(m);return new ZT(_,T,h.fieldTransforms)}function bN(i,e,n,s=!1){return Fu(n,i.Cc(s?4:3,e))}function Fu(i,e){if(i1(i=rn(i)))return og("Unsupported field value:",e,i),r1(i,e);if(i instanceof _h)return(function(s,o){if(!e1(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let h=0;for(const g of s){let p=Fu(g,o.wc(h));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),h++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=rn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return lI(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Lt.fromDate(s);return{timestampValue:Fd(o.serializer,u)}}if(s instanceof Lt){const u=new Lt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Fd(o.serializer,u)}}if(s instanceof Ni)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Zr)return{bytesValue:ST(o.serializer,s._byteString)};if(s instanceof En){const u=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:zp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof ki)return(function(h,g){return{mapValue:{fields:{[JE]:{stringValue:ZE},[Ud]:{arrayValue:{values:h.toArray().map((m=>{if(typeof m!="number")throw g.Sc("VectorValues must only contain numeric values.");return Lp(g.serializer,m)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${ih(s)}`)})(i,e)}function r1(i,e){const n={};return KE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):da(i,((s,o)=>{const u=Fu(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function i1(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Lt||i instanceof Ni||i instanceof Zr||i instanceof En||i instanceof _h||i instanceof ki)}function og(i,e,n){if(!i1(n)||!HE(n)){const s=ih(n);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function cp(i,e,n){if((e=rn(e))instanceof Bu)return e._internalPath;if(typeof e=="string")return lg(i,e);throw Yd("Field path arguments must be of type string or ",i,!1,void 0,n)}const EN=new RegExp("[~\\*/\\[\\]]");function lg(i,e,n){if(e.search(EN)>=0)throw Yd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Bu(...e.split("."))._internalPath}catch{throw Yd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Yd(i,e,n,s,o){const u=s&&!s.isEmpty(),h=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(u||h)&&(p+=" (found",u&&(p+=` in field ${s}`),h&&(p+=` in document ${o}`),p+=")"),new xe(ie.INVALID_ARGUMENT,g+i+p)}function s1(i,e){return i.some((n=>n.isEqual(e)))}class a1{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new En(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Eh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class TN extends a1{data(){return super.data()}}function Eh(i,e){return typeof e=="string"?lg(i,e):e instanceof Bu?e._internalPath:e._delegate._internalPath}function o1(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new xe(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ug{}class cg extends ug{}function Wn(i,e,...n){let s=[];e instanceof ug&&s.push(e),s=s.concat(n),(function(u){const h=u.filter((p=>p instanceof dg)).length,g=u.filter((p=>p instanceof Th)).length;if(h>1||h>0&&g>0)throw new xe(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class Th extends cg{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Th(e,n,s)}_apply(e){const n=this._parse(e);return l1(e._query,n),new fs(e.firestore,e.converter,ep(e._query,n))}_parse(e){const n=qu(e.firestore);return(function(u,h,g,p,m,_,T){let S;if(m.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new xe(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Cb(T,_);const P=[];for(const F of T)P.push(Rb(p,u,F));S={arrayValue:{values:P}}}else S=Rb(p,u,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Cb(T,_),S=bN(g,h,T,_==="in"||_==="not-in");return jn.create(m,_,S)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function mn(i,e,n){const s=e,o=Eh("where",i);return Th._create(o,s,n)}class dg extends ug{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new dg(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:hi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let h=o;const g=u.getFlattenedFilters();for(const p of g)l1(h,p),h=ep(h,p)})(e._query,n),new fs(e.firestore,e.converter,ep(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class hg extends cg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new hg(e,n)}_apply(e){const n=(function(o,u,h){if(o.startAt!==null)throw new xe(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new xe(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Au(u,h)})(e._query,this._field,this._direction);return new fs(e.firestore,e.converter,(function(o,u){const h=o.explicitOrderBy.concat([u]);return new al(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function wb(i,e="asc"){const n=e,s=Eh("orderBy",i);return hg._create(s,n)}class fg extends cg{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new fg(e,n,s)}_apply(e){return new fs(e.firestore,e.converter,Bd(e._query,this._limit,this._limitType))}}function Ab(i){return I2("limit",i),fg._create("limit",i,"F")}function Rb(i,e,n){if(typeof(n=rn(n))=="string"){if(n==="")throw new xe(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oT(e)&&n.indexOf("/")!==-1)throw new xe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(an.fromString(n));if(!Qe.isDocumentKey(s))throw new xe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return z_(i,new Qe(s))}if(n instanceof En)return z_(i,n._key);throw new xe(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ih(n)}.`)}function Cb(i,e){if(!Array.isArray(i)||i.length===0)throw new xe(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function l1(i,e){const n=(function(o,u){for(const h of o)for(const g of h.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new xe(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class SN{convertValue(e,n="none"){switch(aa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(sa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw tt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return da(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[Ud].arrayValue?.values?.map((s=>Rn(s.doubleValue)));return new ki(n)}convertGeoPoint(e){return new Ni(Rn(e.latitude),Rn(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=oh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Tu(e));default:return null}}convertTimestamp(e){const n=ia(e);return new Lt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=an.fromString(e);Ht(xT(s),9688,{name:e});const o=new Su(s.get(1),s.get(3)),u=new Qe(s.popFirst(5));return o.isEqual(n)||us(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}function mg(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}class du{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pa extends a1{constructor(e,n,s,o,u,h){super(e,n,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Rd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Eh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Pa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Pa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Pa._jsonSchema={type:Ln("string",Pa._jsonSchemaVersion),bundleSource:Ln("string","DocumentSnapshot"),bundleName:Ln("string"),bundle:Ln("string")};class Rd extends Pa{data(e={}){return super.data(e)}}class Ua{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new du(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Rd(this._firestore,this._userDataWriter,s.key,s,new du(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new xe(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((g=>{const p=new Rd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new du(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const p=new Rd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new du(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,_=-1;return g.type!==0&&(m=h.indexOf(g.doc.key),h=h.delete(g.doc.key)),g.type!==1&&(h=h.add(g.doc),_=h.indexOf(g.doc.key)),{type:wN(g.type),doc:p,oldIndex:m,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ua._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=kp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function wN(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt(61501,{type:i})}}function ds(i){i=hr(i,En);const e=hr(i.firestore,Mi);return hN(zu(e),i._key).then((n=>c1(e,i,n)))}Ua._jsonSchemaVersion="firestore/querySnapshot/1.0",Ua._jsonSchema={type:Ln("string",Ua._jsonSchemaVersion),bundleSource:Ln("string","QuerySnapshot"),bundleName:Ln("string"),bundle:Ln("string")};class pg extends SN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,n)}}function cn(i){i=hr(i,fs);const e=hr(i.firestore,Mi),n=zu(e),s=new pg(e);return o1(i._query),fN(n,i._query).then((o=>new Ua(e,s,i,o)))}function za(i,e,n){i=hr(i,En);const s=hr(i.firestore,Mi),o=mg(i.converter,e,n);return Hu(s,[sg(qu(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,fr.none())])}function sr(i,e,n,...s){i=hr(i,En);const o=hr(i.firestore,Mi),u=qu(o);let h;return h=typeof(e=rn(e))=="string"||e instanceof Bu?n1(u,"updateDoc",i._key,e,n,s):t1(u,"updateDoc",i._key,e),Hu(o,[h.toMutation(i._key,fr.exists(!0))])}function u1(i){return Hu(hr(i.firestore,Mi),[new fh(i._key,fr.none())])}function Cd(i,e){const n=hr(i.firestore,Mi),s=wt(i),o=mg(i.converter,e);return Hu(n,[sg(qu(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,fr.exists(!1))]).then((()=>s))}function Ib(i,...e){i=rn(i);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Sb(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Sb(e[s])){const p=e[s];e[s]=p.next?.bind(p),e[s+1]=p.error?.bind(p),e[s+2]=p.complete?.bind(p)}let u,h,g;if(i instanceof En)h=hr(i.firestore,Mi),g=lh(i._key.path),u={next:p=>{e[s]&&e[s](c1(h,i,p))},error:e[s+1],complete:e[s+2]};else{const p=hr(i,fs);h=hr(p.firestore,Mi),g=p._query;const m=new pg(h);u={next:_=>{e[s]&&e[s](new Ua(h,m,p,_))},error:e[s+1],complete:e[s+2]},o1(i._query)}return(function(m,_,T,S){const w=new rg(S),P=new eg(_,w,T);return m.asyncQueue.enqueueAndForget((async()=>Wp(await Qd(m),P))),()=>{w.Nu(),m.asyncQueue.enqueueAndForget((async()=>Jp(await Qd(m),P)))}})(zu(h),g,o,u)}function Hu(i,e){return(function(s,o){const u=new ss;return s.asyncQueue.enqueueAndForget((async()=>eN(await dN(s),o,u))),u.promise})(zu(i),e)}function c1(i,e,n){const s=n.docs.get(e._key),o=new pg(i);return new Pa(i,o,e._key,s,new du(n.hasPendingWrites,n.fromCache),e.converter)}class AN{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=qu(e)}set(e,n,s){this._verifyNotCommitted();const o=Vm(e,this._firestore),u=mg(o.converter,n,s),h=sg(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,s);return this._mutations.push(h.toMutation(o._key,fr.none())),this}update(e,n,s,...o){this._verifyNotCommitted();const u=Vm(e,this._firestore);let h;return h=typeof(n=rn(n))=="string"||n instanceof Bu?n1(this._dataReader,"WriteBatch.update",u._key,n,s,o):t1(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(h.toMutation(u._key,fr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Vm(e,this._firestore);return this._mutations=this._mutations.concat(new fh(n._key,fr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Vm(i,e){if((i=rn(i)).firestore!==e)throw new xe(ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}function Id(){return new ag("serverTimestamp")}function ru(i){return zu(i=hr(i,Mi)),new AN(i,(e=>Hu(i,e)))}(function(e,n=!0){(function(o){rl=o})(nl),qa(new na("firestore",((s,{instanceIdentifier:o,options:u})=>{const h=s.getProvider("app").getImmediate(),g=new Mi(new _2(s.getProvider("auth-internal")),new T2(h,s.getProvider("app-check-internal")),(function(m,_){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new xe(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Su(m.options.projectId,_)})(h,o),h);return u={useFetchStreams:n,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),Ai(C_,I_,e),Ai(C_,I_,"esm2020")})();const d1={apiKey:"AIzaSyARwb6K0M4l-hWKi8FrOLEVqRqeHRf8JR4",authDomain:"oppmoteboka.firebaseapp.com",projectId:"oppmoteboka",storageBucket:"oppmoteboka.firebasestorage.app",messagingSenderId:"732911922070",appId:"1:732911922070:web:b16d9de65062395c018bb7"},h1=Xb().length?eh():Ep(d1),Ws=OE(h1),ke=pN(h1),RN=Xb().find(i=>i.name==="secondary")??Ep(d1,"secondary"),jm=OE(RN);function ll(){const[i,e]=U.useState(null),[n,s]=U.useState(!0);return U.useEffect(()=>{const g=iC(Ws,async p=>{if(!p){e(null),s(!1);return}try{const m=wt(ke,"users",p.uid);let _=await ds(m);if(!_.exists()){const P={uid:p.uid,email:p.email??"",displayName:p.displayName??p.email??"",role:"student",term:null,termLabel:null,semesterStatus:"aktiv"};await za(m,{...P,createdAt:Id()}),e(P),s(!1);return}const T=_.data();let S=T?.email??p.email??"";if(p.email&&T?.email!==p.email)try{await sr(m,{email:p.email}),S=p.email}catch(P){console.warn("Kunne ikke synkronisere epost til Firestore:",P)}const w={uid:p.uid,email:S,role:T?.role??"student",term:T?.term??null,termLabel:T?.termLabel??null,semesterStatus:T?.semesterStatus??null,displayName:T?.name??T?.displayName??p.displayName??p.email??""};e(w)}catch(m){console.error("Feil ved henting/oppretting av bruker:",m),e(null)}finally{s(!1)}});return()=>g()},[]),{user:i,loading:n,login:async(g,p)=>{await ZR(Ws,g,p)},register:async(g,p)=>{await vd(Ws,g,p)},logout:async()=>{await sC(Ws)}}}var CN=Ub();const IN=pp(CN);var xN=i=>{switch(i){case"success":return DN;case"info":return ON;case"warning":return MN;case"error":return VN;default:return null}},NN=Array(12).fill(0),kN=({visible:i,className:e})=>me.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":i},me.createElement("div",{className:"sonner-spinner"},NN.map((n,s)=>me.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),DN=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},me.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),MN=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},me.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),ON=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},me.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),VN=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},me.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),jN=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},me.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),me.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),LN=()=>{let[i,e]=me.useState(document.hidden);return me.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),i},dp=1,PN=class{constructor(){this.subscribe=i=>(this.subscribers.push(i),()=>{let e=this.subscribers.indexOf(i);this.subscribers.splice(e,1)}),this.publish=i=>{this.subscribers.forEach(e=>e(i))},this.addToast=i=>{this.publish(i),this.toasts=[...this.toasts,i]},this.create=i=>{var e;let{message:n,...s}=i,o=typeof i?.id=="number"||((e=i.id)==null?void 0:e.length)>0?i.id:dp++,u=this.toasts.find(g=>g.id===o),h=i.dismissible===void 0?!0:i.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),u?this.toasts=this.toasts.map(g=>g.id===o?(this.publish({...g,...i,id:o,title:n}),{...g,...i,id:o,dismissible:h,title:n}):g):this.addToast({title:n,...s,dismissible:h,id:o}),o},this.dismiss=i=>(this.dismissedToasts.add(i),i||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:i,dismiss:!0})),i),this.message=(i,e)=>this.create({...e,message:i}),this.error=(i,e)=>this.create({...e,message:i,type:"error"}),this.success=(i,e)=>this.create({...e,type:"success",message:i}),this.info=(i,e)=>this.create({...e,type:"info",message:i}),this.warning=(i,e)=>this.create({...e,type:"warning",message:i}),this.loading=(i,e)=>this.create({...e,type:"loading",message:i}),this.promise=(i,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:i,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let s=i instanceof Promise?i:i(),o=n!==void 0,u,h=s.then(async p=>{if(u=["resolve",p],me.isValidElement(p))o=!1,this.create({id:n,type:"default",message:p});else if(zN(p)&&!p.ok){o=!1;let m=typeof e.error=="function"?await e.error(`HTTP error! status: ${p.status}`):e.error,_=typeof e.description=="function"?await e.description(`HTTP error! status: ${p.status}`):e.description;this.create({id:n,type:"error",message:m,description:_})}else if(e.success!==void 0){o=!1;let m=typeof e.success=="function"?await e.success(p):e.success,_=typeof e.description=="function"?await e.description(p):e.description;this.create({id:n,type:"success",message:m,description:_})}}).catch(async p=>{if(u=["reject",p],e.error!==void 0){o=!1;let m=typeof e.error=="function"?await e.error(p):e.error,_=typeof e.description=="function"?await e.description(p):e.description;this.create({id:n,type:"error",message:m,description:_})}}).finally(()=>{var p;o&&(this.dismiss(n),n=void 0),(p=e.finally)==null||p.call(e)}),g=()=>new Promise((p,m)=>h.then(()=>u[0]==="reject"?m(u[1]):p(u[1])).catch(m));return typeof n!="string"&&typeof n!="number"?{unwrap:g}:Object.assign(n,{unwrap:g})},this.custom=(i,e)=>{let n=e?.id||dp++;return this.create({jsx:i(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(i=>!this.dismissedToasts.has(i.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Sr=new PN,UN=(i,e)=>{let n=e?.id||dp++;return Sr.addToast({title:i,...e,id:n}),n},zN=i=>i&&typeof i=="object"&&"ok"in i&&typeof i.ok=="boolean"&&"status"in i&&typeof i.status=="number",BN=UN,qN=()=>Sr.toasts,FN=()=>Sr.getActiveToasts(),He=Object.assign(BN,{success:Sr.success,info:Sr.info,warning:Sr.warning,error:Sr.error,custom:Sr.custom,message:Sr.message,promise:Sr.promise,dismiss:Sr.dismiss,loading:Sr.loading},{getHistory:qN,getToasts:FN});function HN(i,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e==="top"&&n.firstChild?n.insertBefore(s,n.firstChild):n.appendChild(s),s.styleSheet?s.styleSheet.cssText=i:s.appendChild(document.createTextNode(i))}HN(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function pd(i){return i.label!==void 0}var GN=3,KN="32px",QN="16px",xb=4e3,YN=356,XN=14,$N=20,WN=200;function ui(...i){return i.filter(Boolean).join(" ")}function JN(i){let[e,n]=i.split("-"),s=[];return e&&s.push(e),n&&s.push(n),s}var ZN=i=>{var e,n,s,o,u,h,g,p,m,_,T;let{invert:S,toast:w,unstyled:P,interacting:F,setHeights:B,visibleToasts:ye,heights:he,index:re,toasts:Ae,expanded:ze,removeToast:Ve,defaultRichColors:N,closeButton:C,style:I,cancelButtonStyle:V,actionButtonStyle:k,className:L="",descriptionClassName:x="",duration:Ge,position:rt,gap:$,loadingIcon:ue,expandByDefault:ve,classNames:pe,icons:je,closeButtonAriaLabel:O="Close toast",pauseWhenPageIsHidden:Q}=i,[H,J]=me.useState(null),[Te,_e]=me.useState(null),[Re,We]=me.useState(!1),[Je,qt]=me.useState(!1),[Gt,Ot]=me.useState(!1),[Tn,en]=me.useState(!1),[sn,q]=me.useState(!1),[de,be]=me.useState(0),[Ne,Ce]=me.useState(0),fe=me.useRef(w.duration||Ge||xb),Me=me.useRef(null),Xe=me.useRef(null),nt=re===0,on=re+1<=ye,ft=w.type,Cn=w.dismissible!==!1,mr=w.className||"",ji=w.descriptionClassName||"",or=me.useMemo(()=>he.findIndex(Ue=>Ue.toastId===w.id)||0,[he,w.id]),fi=me.useMemo(()=>{var Ue;return(Ue=w.closeButton)!=null?Ue:C},[w.closeButton,C]),Lr=me.useMemo(()=>w.duration||Ge||xb,[w.duration,Ge]),gn=me.useRef(0),Kt=me.useRef(0),Ft=me.useRef(0),pt=me.useRef(null),[Cr,er]=rt.split("-"),lr=me.useMemo(()=>he.reduce((Ue,mt,G)=>G>=or?Ue:Ue+mt.height,0),[he,or]),Pn=LN(),In=w.invert||S,bt=ft==="loading";Kt.current=me.useMemo(()=>or*$+lr,[or,lr]),me.useEffect(()=>{fe.current=Lr},[Lr]),me.useEffect(()=>{We(!0)},[]),me.useEffect(()=>{let Ue=Xe.current;if(Ue){let mt=Ue.getBoundingClientRect().height;return Ce(mt),B(G=>[{toastId:w.id,height:mt,position:w.position},...G]),()=>B(G=>G.filter(ne=>ne.toastId!==w.id))}},[B,w.id]),me.useLayoutEffect(()=>{if(!Re)return;let Ue=Xe.current,mt=Ue.style.height;Ue.style.height="auto";let G=Ue.getBoundingClientRect().height;Ue.style.height=mt,Ce(G),B(ne=>ne.find(ce=>ce.toastId===w.id)?ne.map(ce=>ce.toastId===w.id?{...ce,height:G}:ce):[{toastId:w.id,height:G,position:w.position},...ne])},[Re,w.title,w.description,B,w.id]);let tn=me.useCallback(()=>{qt(!0),be(Kt.current),B(Ue=>Ue.filter(mt=>mt.toastId!==w.id)),setTimeout(()=>{Ve(w)},WN)},[w,Ve,B,Kt]);me.useEffect(()=>{if(w.promise&&ft==="loading"||w.duration===1/0||w.type==="loading")return;let Ue;return ze||F||Q&&Pn?(()=>{if(Ft.current<gn.current){let mt=new Date().getTime()-gn.current;fe.current=fe.current-mt}Ft.current=new Date().getTime()})():fe.current!==1/0&&(gn.current=new Date().getTime(),Ue=setTimeout(()=>{var mt;(mt=w.onAutoClose)==null||mt.call(w,w),tn()},fe.current)),()=>clearTimeout(Ue)},[ze,F,w,ft,Q,Pn,tn]),me.useEffect(()=>{w.delete&&tn()},[tn,w.delete]);function Bn(){var Ue,mt,G;return je!=null&&je.loading?me.createElement("div",{className:ui(pe?.loader,(Ue=w?.classNames)==null?void 0:Ue.loader,"sonner-loader"),"data-visible":ft==="loading"},je.loading):ue?me.createElement("div",{className:ui(pe?.loader,(mt=w?.classNames)==null?void 0:mt.loader,"sonner-loader"),"data-visible":ft==="loading"},ue):me.createElement(kN,{className:ui(pe?.loader,(G=w?.classNames)==null?void 0:G.loader),visible:ft==="loading"})}return me.createElement("li",{tabIndex:0,ref:Xe,className:ui(L,mr,pe?.toast,(e=w?.classNames)==null?void 0:e.toast,pe?.default,pe?.[ft],(n=w?.classNames)==null?void 0:n[ft]),"data-sonner-toast":"","data-rich-colors":(s=w.richColors)!=null?s:N,"data-styled":!(w.jsx||w.unstyled||P),"data-mounted":Re,"data-promise":!!w.promise,"data-swiped":sn,"data-removed":Je,"data-visible":on,"data-y-position":Cr,"data-x-position":er,"data-index":re,"data-front":nt,"data-swiping":Gt,"data-dismissible":Cn,"data-type":ft,"data-invert":In,"data-swipe-out":Tn,"data-swipe-direction":Te,"data-expanded":!!(ze||ve&&Re),style:{"--index":re,"--toasts-before":re,"--z-index":Ae.length-re,"--offset":`${Je?de:Kt.current}px`,"--initial-height":ve?"auto":`${Ne}px`,...I,...w.style},onDragEnd:()=>{Ot(!1),J(null),pt.current=null},onPointerDown:Ue=>{bt||!Cn||(Me.current=new Date,be(Kt.current),Ue.target.setPointerCapture(Ue.pointerId),Ue.target.tagName!=="BUTTON"&&(Ot(!0),pt.current={x:Ue.clientX,y:Ue.clientY}))},onPointerUp:()=>{var Ue,mt,G,ne;if(Tn||!Cn)return;pt.current=null;let ce=Number(((Ue=Xe.current)==null?void 0:Ue.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ge=Number(((mt=Xe.current)==null?void 0:mt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),we=new Date().getTime()-((G=Me.current)==null?void 0:G.getTime()),Be=H==="x"?ce:ge,Ie=Math.abs(Be)/we;if(Math.abs(Be)>=$N||Ie>.11){be(Kt.current),(ne=w.onDismiss)==null||ne.call(w,w),_e(H==="x"?ce>0?"right":"left":ge>0?"down":"up"),tn(),en(!0),q(!1);return}Ot(!1),J(null)},onPointerMove:Ue=>{var mt,G,ne,ce;if(!pt.current||!Cn||((mt=window.getSelection())==null?void 0:mt.toString().length)>0)return;let ge=Ue.clientY-pt.current.y,we=Ue.clientX-pt.current.x,Be=(G=i.swipeDirections)!=null?G:JN(rt);!H&&(Math.abs(we)>1||Math.abs(ge)>1)&&J(Math.abs(we)>Math.abs(ge)?"x":"y");let Ie={x:0,y:0};H==="y"?(Be.includes("top")||Be.includes("bottom"))&&(Be.includes("top")&&ge<0||Be.includes("bottom")&&ge>0)&&(Ie.y=ge):H==="x"&&(Be.includes("left")||Be.includes("right"))&&(Be.includes("left")&&we<0||Be.includes("right")&&we>0)&&(Ie.x=we),(Math.abs(Ie.x)>0||Math.abs(Ie.y)>0)&&q(!0),(ne=Xe.current)==null||ne.style.setProperty("--swipe-amount-x",`${Ie.x}px`),(ce=Xe.current)==null||ce.style.setProperty("--swipe-amount-y",`${Ie.y}px`)}},fi&&!w.jsx?me.createElement("button",{"aria-label":O,"data-disabled":bt,"data-close-button":!0,onClick:bt||!Cn?()=>{}:()=>{var Ue;tn(),(Ue=w.onDismiss)==null||Ue.call(w,w)},className:ui(pe?.closeButton,(o=w?.classNames)==null?void 0:o.closeButton)},(u=je?.close)!=null?u:jN):null,w.jsx||U.isValidElement(w.title)?w.jsx?w.jsx:typeof w.title=="function"?w.title():w.title:me.createElement(me.Fragment,null,ft||w.icon||w.promise?me.createElement("div",{"data-icon":"",className:ui(pe?.icon,(h=w?.classNames)==null?void 0:h.icon)},w.promise||w.type==="loading"&&!w.icon?w.icon||Bn():null,w.type!=="loading"?w.icon||je?.[ft]||xN(ft):null):null,me.createElement("div",{"data-content":"",className:ui(pe?.content,(g=w?.classNames)==null?void 0:g.content)},me.createElement("div",{"data-title":"",className:ui(pe?.title,(p=w?.classNames)==null?void 0:p.title)},typeof w.title=="function"?w.title():w.title),w.description?me.createElement("div",{"data-description":"",className:ui(x,ji,pe?.description,(m=w?.classNames)==null?void 0:m.description)},typeof w.description=="function"?w.description():w.description):null),U.isValidElement(w.cancel)?w.cancel:w.cancel&&pd(w.cancel)?me.createElement("button",{"data-button":!0,"data-cancel":!0,style:w.cancelButtonStyle||V,onClick:Ue=>{var mt,G;pd(w.cancel)&&Cn&&((G=(mt=w.cancel).onClick)==null||G.call(mt,Ue),tn())},className:ui(pe?.cancelButton,(_=w?.classNames)==null?void 0:_.cancelButton)},w.cancel.label):null,U.isValidElement(w.action)?w.action:w.action&&pd(w.action)?me.createElement("button",{"data-button":!0,"data-action":!0,style:w.actionButtonStyle||k,onClick:Ue=>{var mt,G;pd(w.action)&&((G=(mt=w.action).onClick)==null||G.call(mt,Ue),!Ue.defaultPrevented&&tn())},className:ui(pe?.actionButton,(T=w?.classNames)==null?void 0:T.actionButton)},w.action.label):null))};function Nb(){if(typeof window>"u"||typeof document>"u")return"ltr";let i=document.documentElement.getAttribute("dir");return i==="auto"||!i?window.getComputedStyle(document.documentElement).direction:i}function ek(i,e){let n={};return[i,e].forEach((s,o)=>{let u=o===1,h=u?"--mobile-offset":"--offset",g=u?QN:KN;function p(m){["top","right","bottom","left"].forEach(_=>{n[`${h}-${_}`]=typeof m=="number"?`${m}px`:m})}typeof s=="number"||typeof s=="string"?p(s):typeof s=="object"?["top","right","bottom","left"].forEach(m=>{s[m]===void 0?n[`${h}-${m}`]=g:n[`${h}-${m}`]=typeof s[m]=="number"?`${s[m]}px`:s[m]}):p(g)}),n}var tk=U.forwardRef(function(i,e){let{invert:n,position:s="bottom-right",hotkey:o=["altKey","KeyT"],expand:u,closeButton:h,className:g,offset:p,mobileOffset:m,theme:_="light",richColors:T,duration:S,style:w,visibleToasts:P=GN,toastOptions:F,dir:B=Nb(),gap:ye=XN,loadingIcon:he,icons:re,containerAriaLabel:Ae="Notifications",pauseWhenPageIsHidden:ze}=i,[Ve,N]=me.useState([]),C=me.useMemo(()=>Array.from(new Set([s].concat(Ve.filter(Q=>Q.position).map(Q=>Q.position)))),[Ve,s]),[I,V]=me.useState([]),[k,L]=me.useState(!1),[x,Ge]=me.useState(!1),[rt,$]=me.useState(_!=="system"?_:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ue=me.useRef(null),ve=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),pe=me.useRef(null),je=me.useRef(!1),O=me.useCallback(Q=>{N(H=>{var J;return(J=H.find(Te=>Te.id===Q.id))!=null&&J.delete||Sr.dismiss(Q.id),H.filter(({id:Te})=>Te!==Q.id)})},[]);return me.useEffect(()=>Sr.subscribe(Q=>{if(Q.dismiss){N(H=>H.map(J=>J.id===Q.id?{...J,delete:!0}:J));return}setTimeout(()=>{IN.flushSync(()=>{N(H=>{let J=H.findIndex(Te=>Te.id===Q.id);return J!==-1?[...H.slice(0,J),{...H[J],...Q},...H.slice(J+1)]:[Q,...H]})})})}),[]),me.useEffect(()=>{if(_!=="system"){$(_);return}if(_==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?$("dark"):$("light")),typeof window>"u")return;let Q=window.matchMedia("(prefers-color-scheme: dark)");try{Q.addEventListener("change",({matches:H})=>{$(H?"dark":"light")})}catch{Q.addListener(({matches:J})=>{try{$(J?"dark":"light")}catch(Te){console.error(Te)}})}},[_]),me.useEffect(()=>{Ve.length<=1&&L(!1)},[Ve]),me.useEffect(()=>{let Q=H=>{var J,Te;o.every(_e=>H[_e]||H.code===_e)&&(L(!0),(J=ue.current)==null||J.focus()),H.code==="Escape"&&(document.activeElement===ue.current||(Te=ue.current)!=null&&Te.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",Q),()=>document.removeEventListener("keydown",Q)},[o]),me.useEffect(()=>{if(ue.current)return()=>{pe.current&&(pe.current.focus({preventScroll:!0}),pe.current=null,je.current=!1)}},[ue.current]),me.createElement("section",{ref:e,"aria-label":`${Ae} ${ve}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((Q,H)=>{var J;let[Te,_e]=Q.split("-");return Ve.length?me.createElement("ol",{key:Q,dir:B==="auto"?Nb():B,tabIndex:-1,ref:ue,className:g,"data-sonner-toaster":!0,"data-theme":rt,"data-y-position":Te,"data-lifted":k&&Ve.length>1&&!u,"data-x-position":_e,style:{"--front-toast-height":`${((J=I[0])==null?void 0:J.height)||0}px`,"--width":`${YN}px`,"--gap":`${ye}px`,...w,...ek(p,m)},onBlur:Re=>{je.current&&!Re.currentTarget.contains(Re.relatedTarget)&&(je.current=!1,pe.current&&(pe.current.focus({preventScroll:!0}),pe.current=null))},onFocus:Re=>{Re.target instanceof HTMLElement&&Re.target.dataset.dismissible==="false"||je.current||(je.current=!0,pe.current=Re.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{x||L(!1)},onDragEnd:()=>L(!1),onPointerDown:Re=>{Re.target instanceof HTMLElement&&Re.target.dataset.dismissible==="false"||Ge(!0)},onPointerUp:()=>Ge(!1)},Ve.filter(Re=>!Re.position&&H===0||Re.position===Q).map((Re,We)=>{var Je,qt;return me.createElement(ZN,{key:Re.id,icons:re,index:We,toast:Re,defaultRichColors:T,duration:(Je=F?.duration)!=null?Je:S,className:F?.className,descriptionClassName:F?.descriptionClassName,invert:n,visibleToasts:P,closeButton:(qt=F?.closeButton)!=null?qt:h,interacting:x,position:Q,style:F?.style,unstyled:F?.unstyled,classNames:F?.classNames,cancelButtonStyle:F?.cancelButtonStyle,actionButtonStyle:F?.actionButtonStyle,removeToast:O,toasts:Ve.filter(Gt=>Gt.position==Re.position),heights:I.filter(Gt=>Gt.position==Re.position),setHeights:V,expandByDefault:u,gap:ye,loadingIcon:he,expanded:k,pauseWhenPageIsHidden:ze,swipeDirections:i.swipeDirections})})):null}))});const nk="modulepreload",rk=function(i){return"/"+i},kb={},ik=function(e,n,s){let o=Promise.resolve();if(n&&n.length>0){let p=function(m){return Promise.all(m.map(_=>Promise.resolve(_).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),g=h?.nonce||h?.getAttribute("nonce");o=p(n.map(m=>{if(m=rk(m),m in kb)return;kb[m]=!0;const _=m.endsWith(".css"),T=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${T}`))return;const S=document.createElement("link");if(S.rel=_?"stylesheet":nk,_||(S.as="script"),S.crossOrigin="",S.href=m,g&&S.setAttribute("nonce",g),document.head.appendChild(S),_)return new Promise((w,P)=>{S.addEventListener("load",w),S.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${m}`)))})}))}function u(h){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=h,window.dispatchEvent(g),!g.defaultPrevented)throw h}return o.then(h=>{for(const g of h||[])g.status==="rejected"&&u(g.reason);return e().catch(u)})},sk=({onCode:i,onError:e})=>{const n=U.useMemo(()=>`qr-reader-${Math.random().toString(36).slice(2)}`,[]);return U.useEffect(()=>{let s=null,o=!1,u=!1,h;return(async()=>{let p;try{p=(await ik(()=>import("./index-CG2RzHvp.js"),[])).Html5Qrcode}catch(m){console.warn("QR: klarte ikke  laste html5-qrcode-modulen",m),e?.(m);return}try{s=new p(n)}catch(m){console.warn("QR: konstruktr-feil for Html5Qrcode",m),e?.(m);return}h=window.setTimeout(()=>{!o&&!u&&(console.warn("QR: start timeout  ingen respons fra kamera p 7s"),e?.(new Error("QR start timeout")))},7e3),s.start({facingMode:"environment"},{fps:10,qrbox:250},m=>{i(m)},()=>{}).then(()=>{o=!0,h&&window.clearTimeout(h)}).catch(m=>{h&&window.clearTimeout(h),!u&&(console.warn("Kunne ikke starte QR-leser:",m),e?.(m))})})(),()=>{if(u=!0,h&&window.clearTimeout(h),!s)return;s.stop().catch(()=>{}).then(()=>{try{s?.clear()}catch{}}).finally(()=>{try{const _=document.getElementById(n)?.querySelector("video"),T=_?.srcObject??void 0;T&&(T.getTracks().forEach(S=>{try{S.stop()}catch{}}),_&&(_.srcObject=null))}catch{}})}},[n,i,e]),v.jsx("div",{id:n,style:{width:"100%"}})};class ak extends me.Component{state={hasError:!1};static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){if(this.props.onError)try{this.props.onError(e,n)}catch{}}componentDidUpdate(e){e.resetKey!==this.props.resetKey&&this.setState({hasError:!1,error:void 0})}render(){if(this.state.hasError){const{fallback:e}=this.props;return e?typeof e=="function"?e(this.state.error):e:null}return this.props.children}}async function ok(){const e=(await cn(Xt(ke,"terms"))).docs.map(n=>{const s=n.data(),o=typeof s?.value=="number"?s.value:void 0;if(typeof o!="number")return null;const u=typeof s?.label=="string"?s.label:"",h=typeof s?.order=="number"?s.order:void 0;return{value:o,label:u,order:h}}).filter(Boolean);return e.sort((n,s)=>(n.order??n.value)-(s.order??s.value)),e}function gg(){const[i,e]=U.useState([]),[n,s]=U.useState(!0),[o,u]=U.useState(null);U.useEffect(()=>{let g=!0;return(async()=>{try{s(!0);const p=await ok();g&&e(p)}catch(p){g&&u(p)}finally{g&&s(!1)}})(),()=>{g=!1}},[]);const h=U.useMemo(()=>{const g=new Map;for(const p of i)g.set(p.value,p);return g},[i]);return{options:i,byValue:h,loading:n,error:o}}function as(i,e){if(e==null)return"Ukjent termin";let n;return Array.isArray(i)?n=i.find(s=>s.value===e):i instanceof Map&&(n=i.get(e)),n&&n.label?n.label:`Termin ${e}`}function lk(i){if(i==="Testmodul 1 - Testtermin 1")return i;const e=/(Modul)\s+(\d+)\s*-\s*(Blokk|Termin)\s+(\d+)/i,n=i.match(e);if(n){const u=n[2],h=n[4];return`M${u} - T${h}`}const s=/(Modul|Termin)\s+(\d+)/i,o=i.match(s);return o?`M${o[2]}`:i}function Db(i,e){if(e==null)return"";const n=as(i,e);return lk(n)}function uk({value:i,onChange:e,length:n=6,disabled:s}){const o=U.useRef([]),u=U.useMemo(()=>{const T=(i||"").replace(/\D/g,"").slice(0,n),S=new Array(n).fill("");for(let w=0;w<T.length;w++)S[w]=T[w];return S},[i,n]),h=T=>{const S=o.current[T];S&&S.focus()},g=(T,S)=>{const w=S.replace(/\D/g,"");if(!w)return;const F=u.join("").split("");let B=T;for(const ye of w){if(B>=n)break;F[B]=ye,B++}e(F.join("").slice(0,n)),B<=n-1&&h(B)},p=(T,S)=>{const w=S.target.value;if(w.length>1){g(T,w);return}const P=w.replace(/\D/g,""),F=u.slice();F[T]=P||"";const B=F.join("");e(B),P&&T<n-1&&h(T+1)},m=(T,S)=>{const w=S.key;if(w==="Backspace"){if(u[T]){const P=u.slice();P[T]="",e(P.join("")),S.preventDefault()}else if(T>0){S.preventDefault(),h(T-1);const P=u.slice();P[T-1]="",e(P.join(""))}}else w==="ArrowLeft"&&T>0?(S.preventDefault(),h(T-1)):w==="ArrowRight"&&T<n-1&&(S.preventDefault(),h(T+1))},_=(T,S)=>{const w=S.clipboardData.getData("text");w&&(S.preventDefault(),g(T,w))};return U.useEffect(()=>{o.current=o.current.slice(0,n)},[n]),v.jsx("div",{className:"",style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:u.map((T,S)=>v.jsx("input",{ref:w=>o.current[S]=w,type:"text",inputMode:"numeric",pattern:"[0-9]*",autoComplete:"one-time-code",className:"",style:{borderRadius:"7.5px",border:"2px solid var(--color-black",width:"2.2rem",height:"3.4rem",margin:"0 0.25rem",padding:"0.5rem 0.25rem",textAlign:"center"},value:T,onChange:w=>p(S,w),onKeyDown:w=>m(S,w),onPaste:w=>_(S,w),"aria-label":`Kode siffer ${S+1}`,disabled:s,maxLength:1},S))})}function ck({user:i}){const[e,n]=U.useState(""),[s,o]=U.useState(!1),u=i.term??11,[h,g]=U.useState([]),[p,m]=U.useState(!1),[_,T]=U.useState(0),[S,w]=U.useState(!1),{options:P}=gg(),[F,B]=U.useState(!1),[ye,he]=U.useState(null),[re,Ae]=U.useState([]),[ze,Ve]=U.useState({}),[N,C]=U.useState("idle"),[I,V]=U.useState(null),[k,L]=U.useState(null),x=i.semesterStatus&&i.semesterStatus!=="aktiv",Ge=()=>{C("idle"),V(null),L(null),n(""),w(!1)},rt=async H=>{if(!(!H||H.length<6)){o(!0),C("idle"),V(null);try{const J=Xt(ke,"sessions"),Te=Wn(J,mn("code","==",H)),_e=await cn(Te);if(_e.empty){C("error"),V("Fant ingen kt med denne koden."),n(""),w(!1),o(!1);return}const Re=_e.docs[0],We=Re.data(),Je=wt(ke,"sessions",Re.id,"attendance",i.uid);if((await ds(Je)).exists()){C("error"),V("Du er allerede registrert p denne kten."),n(""),w(!1),o(!1);return}await za(Je,{userId:i.uid,studentName:i.displayName,studentEmail:i.email,createdAt:Lt.now(),status:"present"});const Gt=We.name||"kten";L(Gt),C("success"),V(null),w(!1),n(""),T(Ot=>Ot+1)}catch(J){console.error(J),C("error"),V("Noe gikk galt ved registrering av oppmte."),n(""),w(!1)}finally{o(!1)}}},$=H=>{if(!H||s)return;const J=H.replace(/\D/g,"").slice(0,6);J.length===6&&(n(J),w(!1),rt(J))},ue=H=>{console.warn("QR-skanner-feil:",H),w(!1),C("error"),V("Kunne ikke starte kamera. Sjekk kameratilgang i nettleseren eller skriv inn oppmtekoden manuelt.")};U.useEffect(()=>{(async()=>{m(!0);try{const J=Xt(ke,"requirements"),Te=Wn(J,mn("term","==",u)),Re=(await cn(Te)).docs.map(fe=>{const Me=fe.data();return{category:Me.category,requiredCount:Me.requiredCount}}),We=Xt(ke,"sessions"),Je=Wn(We,mn("term","==",u)),Gt=(await cn(Je)).docs.map(fe=>{const Me=fe.data();return{id:fe.id,timeId:typeof Me?.timeId=="string"?Me.timeId:void 0,name:typeof Me?.name=="string"?Me.name:void 0,category:typeof Me?.category=="string"?Me.category:void 0}}),Ot=Xt(ke,"times"),Tn=Wn(Ot,mn("term","==",u)),sn=(await cn(Tn)).docs.map(fe=>{const Me=fe.data();return{id:fe.id,name:Me.name,category:Me.category,term:Me.term,order:typeof Me?.order=="number"?Me.order:void 0}}),q=new Map;for(const fe of sn)fe.category&&q.set(fe.category,(q.get(fe.category)??0)+1);const de=new Map,be={};for(const fe of Gt){if(!fe.category)continue;const Me=wt(ke,"sessions",fe.id,"attendance",i.uid);if((await ds(Me)).exists()){if(de.set(fe.category,(de.get(fe.category)??0)+1),fe.timeId)be[fe.timeId]=!0;else if(fe.name&&fe.category){const nt=sn.find(on=>on.category===fe.category&&on.name===fe.name);nt&&(be[nt.id]=!0)}}}const Ne=new Set;for(const fe of Re)Ne.add(fe.category);for(const fe of Gt)fe.category&&Ne.add(fe.category);for(const fe of sn)fe.category&&Ne.add(fe.category);const Ce=[];Ne.forEach(fe=>{const Me=Re.find(ft=>ft.category===fe),Xe=Me?Me.requiredCount:null,nt=q.get(fe)??0,on=de.get(fe)??0;Ce.push({category:fe,attendedCount:on,totalSessions:nt,requiredCount:Xe})}),Ce.sort((fe,Me)=>fe.category.localeCompare(Me.category,"nb-NO",{sensitivity:"base"})),g(Ce),Ae(sn),Ve(be)}catch(J){console.error(J),g([]),Ae([]),Ve({})}finally{m(!1)}})()},[u,i.uid,_]);const ve=H=>{const J=H.match(/^\s*(\d+)/);return J?parseInt(J[1],10):Number.POSITIVE_INFINITY},pe=U.useMemo(()=>{if(!F||!ye)return[];const H=re.filter(J=>J.category===ye).map(J=>({...J,attended:!!ze[J.id]}));return H.sort((J,Te)=>{const _e=(J.order??Number.MAX_SAFE_INTEGER)-(Te.order??Number.MAX_SAFE_INTEGER);if(_e!==0)return _e;const Re=ve(J.name),We=ve(Te.name);return Re!==We?Re-We:J.name.localeCompare(Te.name,"nb-NO",{sensitivity:"base"})}),H},[F,ye,re,ze]),je=H=>{he(H),B(!0)},O=()=>{B(!1),he(null)},Q=H=>{const Te=(H||"").replace(/\D/g,"").slice(0,6);n(Te),Te.length===6&&!s&&rt(Te)};return U.useEffect(()=>{if(N==="idle")return;const J=setTimeout(()=>{Ge()},N==="success"?1e4:2e3);return()=>clearTimeout(J)},[N]),v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"card student-card student-card-top round-border-top",children:[v.jsxs("div",{className:"studentInfo",children:[v.jsx("h2",{children:i.displayName||i.email}),v.jsx("p",{className:"thinFont smallText opaqueFont",children:as(P,u)})]}),v.jsx("img",{src:"/card-man.svg",alt:"Student-profile-placeholder"})]}),v.jsx("div",{className:"card student-card student-card-bottom round-border-bottom",children:N==="success"?v.jsx(v.Fragment,{children:v.jsxs("div",{className:"registered-sucsess",children:[v.jsx("img",{src:"/registered.svg",alt:"Registered-icon"}),v.jsx("h3",{className:"",children:"Oppmte registrert"}),k&&v.jsx("p",{className:"",children:k})]})}):N==="error"?v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"",children:""}),v.jsx("h3",{className:"",children:"Kunne ikke registrere oppmte"}),I&&v.jsx("p",{className:"m-0 mb-1 fs-0_95 text-gray-700",children:I})]}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"code-input-container",children:[v.jsx("p",{className:"spacedFont thinFont",children:"Oppmtekode fra lrer"}),v.jsx(uk,{value:e,onChange:Q,disabled:s})]}),v.jsx("img",{src:"/qrscan.svg",alt:"QR-code-icon",className:"qr-code-icon"}),v.jsx("br",{}),v.jsx("button",{type:"button",onClick:()=>w(!0),className:"button-colorless fontUnderline boldFont QRbutton",children:"Skann QR-kode"}),S&&v.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:60},onClick:()=>w(!1),role:"dialog","aria-modal":"true","aria-label":"Skann QR-kode",children:v.jsxs("div",{onClick:H=>H.stopPropagation(),style:{width:"100%",maxWidth:"480px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[v.jsx("h3",{style:{margin:0},children:"Skann QR-kode"}),v.jsx("button",{type:"button",onClick:()=>w(!1),style:{border:"none",background:"transparent",fontSize:"1.2rem",cursor:"pointer"},"aria-label":"Lukk",title:"Lukk",children:""})]}),v.jsx("div",{style:{borderRadius:"0.75rem",overflow:"hidden",border:"1px solid #e5e7eb"},children:v.jsx(ak,{onError:H=>ue(H),resetKey:S,children:v.jsx(sk,{onCode:$,onError:ue})})})]})})]})}),v.jsxs("div",{className:"card round-corners-full approved-term-card",children:[v.jsx("h2",{children:"Godkjent"}),v.jsxs("p",{className:"thinFont opaqueFont",children:["Bra jobba! Kravene for ",as(P,u).toLowerCase()," er oppndd. Lykke til p eksamen!"]}),v.jsx("button",{className:"btn button-primary button-black button-next-semester",children:"Start neste semester"}),v.jsx("button",{className:"button-primary button-colorless fontUnderline",children:"Innvilget permisjon"})]}),v.jsxs("div",{className:"card round-corners-full student-overview-card",children:[x&&v.jsxs("p",{className:"text-red text-center",children:['Du er markert som "',i.semesterStatus,'" dette semesteret. Ingen oppmtekrav, men du kan fortsatt registrere oppmte.']}),v.jsx("section",{children:p?v.jsx(Qo,{}):h.length===0?v.jsx("p",{className:"fs-0_9 text-gray-500",children:"Ingen registrerte timer for denne terminen enn."}):v.jsxs(v.Fragment,{children:[v.jsx("h2",{children:"Min oppmtebok"}),v.jsxs("p",{className:"thinFont opaqueFont",children:["Her finner du alle fullfrte",v.jsx("br",{})," og fremtidige oppmter."]}),v.jsx("table",{className:"table-container",children:v.jsx("tbody",{children:h.map(H=>{const J=H.requiredCount!=null&&H.attendedCount>=H.requiredCount;return v.jsxs("tr",{onClick:()=>je(H.category),children:[v.jsx("td",{className:"requirement-meet-icon",children:J?v.jsx("img",{src:"/check-white.svg",alt:"Checkmark-icon"}):v.jsx(v.Fragment,{})}),v.jsx("td",{className:"class-overview thinFont smal",children:H.category}),v.jsx("td",{className:"spacedFont",children:H.totalSessions>0?`${H.attendedCount}/${H.totalSessions}`:H.attendedCount}),v.jsx("td",{className:"required-classes",children:H.requiredCount??"-"})]},H.category)})})}),v.jsx("h2",{children:"Godkjent"}),v.jsxs("p",{className:"thinFont opaqueFont",children:["Bra jobba! Kravene for ",as(P,u).toLowerCase()," er oppndd. Lykke til p eksamen!"]})]})}),F&&v.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},onClick:O,children:v.jsxs("div",{onClick:H=>H.stopPropagation(),style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsx("h3",{style:{margin:0},children:ye?`Oppmte i ${ye}`:"Oppmte"}),v.jsx("button",{type:"button",onClick:O,style:{border:"none",background:"transparent",fontSize:"1.2rem",cursor:"pointer"},"aria-label":"Lukk",title:"Lukk",children:""})]}),pe.length===0?v.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"Ingen timer er definert i denne gruppen enda."}):v.jsx("ul",{style:{listStyle:"none",padding:0,marginTop:"0.75rem"},children:pe.map(H=>v.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.35rem 0",borderBottom:"1px solid #f3f4f6"},children:[v.jsx("span",{children:H.name}),v.jsx("span",{style:{display:"inline-block",padding:"0.15rem 0.5rem",borderRadius:"999px",backgroundColor:H.attended?"#dcfce7":"#fee2e2",color:H.attended?"#166534":"#991b1b",fontSize:"0.8rem"},children:H.attended?"Registrert":"Mangler"})]},H.id))}),v.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"0.75rem"},children:v.jsx("button",{type:"button",onClick:O,style:{padding:"0.35rem 0.8rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#fff",cursor:"pointer"},children:"Lukk"})})]})})]})]})}var dk=Object.defineProperty,Xd=Object.getOwnPropertySymbols,f1=Object.prototype.hasOwnProperty,m1=Object.prototype.propertyIsEnumerable,Mb=(i,e,n)=>e in i?dk(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,hp=(i,e)=>{for(var n in e||(e={}))f1.call(e,n)&&Mb(i,n,e[n]);if(Xd)for(var n of Xd(e))m1.call(e,n)&&Mb(i,n,e[n]);return i},fp=(i,e)=>{var n={};for(var s in i)f1.call(i,s)&&e.indexOf(s)<0&&(n[s]=i[s]);if(i!=null&&Xd)for(var s of Xd(i))e.indexOf(s)<0&&m1.call(i,s)&&(n[s]=i[s]);return n};var Qa;(i=>{const e=class _t{constructor(p,m,_,T){if(this.version=p,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],p<_t.MIN_VERSION||p>_t.MAX_VERSION)throw new RangeError("Version value out of range");if(T<-1||T>7)throw new RangeError("Mask value out of range");this.size=p*4+17;let S=[];for(let P=0;P<this.size;P++)S.push(!1);for(let P=0;P<this.size;P++)this.modules.push(S.slice()),this.isFunction.push(S.slice());this.drawFunctionPatterns();const w=this.addEccAndInterleave(_);if(this.drawCodewords(w),T==-1){let P=1e9;for(let F=0;F<8;F++){this.applyMask(F),this.drawFormatBits(F);const B=this.getPenaltyScore();B<P&&(T=F,P=B),this.applyMask(F)}}o(0<=T&&T<=7),this.mask=T,this.applyMask(T),this.drawFormatBits(T),this.isFunction=[]}static encodeText(p,m){const _=i.QrSegment.makeSegments(p);return _t.encodeSegments(_,m)}static encodeBinary(p,m){const _=i.QrSegment.makeBytes(p);return _t.encodeSegments([_],m)}static encodeSegments(p,m,_=1,T=40,S=-1,w=!0){if(!(_t.MIN_VERSION<=_&&_<=T&&T<=_t.MAX_VERSION)||S<-1||S>7)throw new RangeError("Invalid value");let P,F;for(P=_;;P++){const re=_t.getNumDataCodewords(P,m)*8,Ae=h.getTotalBits(p,P);if(Ae<=re){F=Ae;break}if(P>=T)throw new RangeError("Data too long")}for(const re of[_t.Ecc.MEDIUM,_t.Ecc.QUARTILE,_t.Ecc.HIGH])w&&F<=_t.getNumDataCodewords(P,re)*8&&(m=re);let B=[];for(const re of p){n(re.mode.modeBits,4,B),n(re.numChars,re.mode.numCharCountBits(P),B);for(const Ae of re.getData())B.push(Ae)}o(B.length==F);const ye=_t.getNumDataCodewords(P,m)*8;o(B.length<=ye),n(0,Math.min(4,ye-B.length),B),n(0,(8-B.length%8)%8,B),o(B.length%8==0);for(let re=236;B.length<ye;re^=253)n(re,8,B);let he=[];for(;he.length*8<B.length;)he.push(0);return B.forEach((re,Ae)=>he[Ae>>>3]|=re<<7-(Ae&7)),new _t(P,m,he,S)}getModule(p,m){return 0<=p&&p<this.size&&0<=m&&m<this.size&&this.modules[m][p]}getModules(){return this.modules}drawFunctionPatterns(){for(let _=0;_<this.size;_++)this.setFunctionModule(6,_,_%2==0),this.setFunctionModule(_,6,_%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const p=this.getAlignmentPatternPositions(),m=p.length;for(let _=0;_<m;_++)for(let T=0;T<m;T++)_==0&&T==0||_==0&&T==m-1||_==m-1&&T==0||this.drawAlignmentPattern(p[_],p[T]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(p){const m=this.errorCorrectionLevel.formatBits<<3|p;let _=m;for(let S=0;S<10;S++)_=_<<1^(_>>>9)*1335;const T=(m<<10|_)^21522;o(T>>>15==0);for(let S=0;S<=5;S++)this.setFunctionModule(8,S,s(T,S));this.setFunctionModule(8,7,s(T,6)),this.setFunctionModule(8,8,s(T,7)),this.setFunctionModule(7,8,s(T,8));for(let S=9;S<15;S++)this.setFunctionModule(14-S,8,s(T,S));for(let S=0;S<8;S++)this.setFunctionModule(this.size-1-S,8,s(T,S));for(let S=8;S<15;S++)this.setFunctionModule(8,this.size-15+S,s(T,S));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let p=this.version;for(let _=0;_<12;_++)p=p<<1^(p>>>11)*7973;const m=this.version<<12|p;o(m>>>18==0);for(let _=0;_<18;_++){const T=s(m,_),S=this.size-11+_%3,w=Math.floor(_/3);this.setFunctionModule(S,w,T),this.setFunctionModule(w,S,T)}}drawFinderPattern(p,m){for(let _=-4;_<=4;_++)for(let T=-4;T<=4;T++){const S=Math.max(Math.abs(T),Math.abs(_)),w=p+T,P=m+_;0<=w&&w<this.size&&0<=P&&P<this.size&&this.setFunctionModule(w,P,S!=2&&S!=4)}}drawAlignmentPattern(p,m){for(let _=-2;_<=2;_++)for(let T=-2;T<=2;T++)this.setFunctionModule(p+T,m+_,Math.max(Math.abs(T),Math.abs(_))!=1)}setFunctionModule(p,m,_){this.modules[m][p]=_,this.isFunction[m][p]=!0}addEccAndInterleave(p){const m=this.version,_=this.errorCorrectionLevel;if(p.length!=_t.getNumDataCodewords(m,_))throw new RangeError("Invalid argument");const T=_t.NUM_ERROR_CORRECTION_BLOCKS[_.ordinal][m],S=_t.ECC_CODEWORDS_PER_BLOCK[_.ordinal][m],w=Math.floor(_t.getNumRawDataModules(m)/8),P=T-w%T,F=Math.floor(w/T);let B=[];const ye=_t.reedSolomonComputeDivisor(S);for(let re=0,Ae=0;re<T;re++){let ze=p.slice(Ae,Ae+F-S+(re<P?0:1));Ae+=ze.length;const Ve=_t.reedSolomonComputeRemainder(ze,ye);re<P&&ze.push(0),B.push(ze.concat(Ve))}let he=[];for(let re=0;re<B[0].length;re++)B.forEach((Ae,ze)=>{(re!=F-S||ze>=P)&&he.push(Ae[re])});return o(he.length==w),he}drawCodewords(p){if(p.length!=Math.floor(_t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let _=this.size-1;_>=1;_-=2){_==6&&(_=5);for(let T=0;T<this.size;T++)for(let S=0;S<2;S++){const w=_-S,F=(_+1&2)==0?this.size-1-T:T;!this.isFunction[F][w]&&m<p.length*8&&(this.modules[F][w]=s(p[m>>>3],7-(m&7)),m++)}}o(m==p.length*8)}applyMask(p){if(p<0||p>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let _=0;_<this.size;_++){let T;switch(p){case 0:T=(_+m)%2==0;break;case 1:T=m%2==0;break;case 2:T=_%3==0;break;case 3:T=(_+m)%3==0;break;case 4:T=(Math.floor(_/3)+Math.floor(m/2))%2==0;break;case 5:T=_*m%2+_*m%3==0;break;case 6:T=(_*m%2+_*m%3)%2==0;break;case 7:T=((_+m)%2+_*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][_]&&T&&(this.modules[m][_]=!this.modules[m][_])}}getPenaltyScore(){let p=0;for(let S=0;S<this.size;S++){let w=!1,P=0,F=[0,0,0,0,0,0,0];for(let B=0;B<this.size;B++)this.modules[S][B]==w?(P++,P==5?p+=_t.PENALTY_N1:P>5&&p++):(this.finderPenaltyAddHistory(P,F),w||(p+=this.finderPenaltyCountPatterns(F)*_t.PENALTY_N3),w=this.modules[S][B],P=1);p+=this.finderPenaltyTerminateAndCount(w,P,F)*_t.PENALTY_N3}for(let S=0;S<this.size;S++){let w=!1,P=0,F=[0,0,0,0,0,0,0];for(let B=0;B<this.size;B++)this.modules[B][S]==w?(P++,P==5?p+=_t.PENALTY_N1:P>5&&p++):(this.finderPenaltyAddHistory(P,F),w||(p+=this.finderPenaltyCountPatterns(F)*_t.PENALTY_N3),w=this.modules[B][S],P=1);p+=this.finderPenaltyTerminateAndCount(w,P,F)*_t.PENALTY_N3}for(let S=0;S<this.size-1;S++)for(let w=0;w<this.size-1;w++){const P=this.modules[S][w];P==this.modules[S][w+1]&&P==this.modules[S+1][w]&&P==this.modules[S+1][w+1]&&(p+=_t.PENALTY_N2)}let m=0;for(const S of this.modules)m=S.reduce((w,P)=>w+(P?1:0),m);const _=this.size*this.size,T=Math.ceil(Math.abs(m*20-_*10)/_)-1;return o(0<=T&&T<=9),p+=T*_t.PENALTY_N4,o(0<=p&&p<=2568888),p}getAlignmentPatternPositions(){if(this.version==1)return[];{const p=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(p*2-2))*2;let _=[6];for(let T=this.size-7;_.length<p;T-=m)_.splice(1,0,T);return _}}static getNumRawDataModules(p){if(p<_t.MIN_VERSION||p>_t.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*p+128)*p+64;if(p>=2){const _=Math.floor(p/7)+2;m-=(25*_-10)*_-55,p>=7&&(m-=36)}return o(208<=m&&m<=29648),m}static getNumDataCodewords(p,m){return Math.floor(_t.getNumRawDataModules(p)/8)-_t.ECC_CODEWORDS_PER_BLOCK[m.ordinal][p]*_t.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][p]}static reedSolomonComputeDivisor(p){if(p<1||p>255)throw new RangeError("Degree out of range");let m=[];for(let T=0;T<p-1;T++)m.push(0);m.push(1);let _=1;for(let T=0;T<p;T++){for(let S=0;S<m.length;S++)m[S]=_t.reedSolomonMultiply(m[S],_),S+1<m.length&&(m[S]^=m[S+1]);_=_t.reedSolomonMultiply(_,2)}return m}static reedSolomonComputeRemainder(p,m){let _=m.map(T=>0);for(const T of p){const S=T^_.shift();_.push(0),m.forEach((w,P)=>_[P]^=_t.reedSolomonMultiply(w,S))}return _}static reedSolomonMultiply(p,m){if(p>>>8||m>>>8)throw new RangeError("Byte out of range");let _=0;for(let T=7;T>=0;T--)_=_<<1^(_>>>7)*285,_^=(m>>>T&1)*p;return o(_>>>8==0),_}finderPenaltyCountPatterns(p){const m=p[1];o(m<=this.size*3);const _=m>0&&p[2]==m&&p[3]==m*3&&p[4]==m&&p[5]==m;return(_&&p[0]>=m*4&&p[6]>=m?1:0)+(_&&p[6]>=m*4&&p[0]>=m?1:0)}finderPenaltyTerminateAndCount(p,m,_){return p&&(this.finderPenaltyAddHistory(m,_),m=0),m+=this.size,this.finderPenaltyAddHistory(m,_),this.finderPenaltyCountPatterns(_)}finderPenaltyAddHistory(p,m){m[0]==0&&(p+=this.size),m.pop(),m.unshift(p)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],i.QrCode=e;function n(g,p,m){if(p<0||p>31||g>>>p)throw new RangeError("Value out of range");for(let _=p-1;_>=0;_--)m.push(g>>>_&1)}function s(g,p){return(g>>>p&1)!=0}function o(g){if(!g)throw new Error("Assertion error")}const u=class bn{constructor(p,m,_){if(this.mode=p,this.numChars=m,this.bitData=_,m<0)throw new RangeError("Invalid argument");this.bitData=_.slice()}static makeBytes(p){let m=[];for(const _ of p)n(_,8,m);return new bn(bn.Mode.BYTE,p.length,m)}static makeNumeric(p){if(!bn.isNumeric(p))throw new RangeError("String contains non-numeric characters");let m=[];for(let _=0;_<p.length;){const T=Math.min(p.length-_,3);n(parseInt(p.substring(_,_+T),10),T*3+1,m),_+=T}return new bn(bn.Mode.NUMERIC,p.length,m)}static makeAlphanumeric(p){if(!bn.isAlphanumeric(p))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],_;for(_=0;_+2<=p.length;_+=2){let T=bn.ALPHANUMERIC_CHARSET.indexOf(p.charAt(_))*45;T+=bn.ALPHANUMERIC_CHARSET.indexOf(p.charAt(_+1)),n(T,11,m)}return _<p.length&&n(bn.ALPHANUMERIC_CHARSET.indexOf(p.charAt(_)),6,m),new bn(bn.Mode.ALPHANUMERIC,p.length,m)}static makeSegments(p){return p==""?[]:bn.isNumeric(p)?[bn.makeNumeric(p)]:bn.isAlphanumeric(p)?[bn.makeAlphanumeric(p)]:[bn.makeBytes(bn.toUtf8ByteArray(p))]}static makeEci(p){let m=[];if(p<0)throw new RangeError("ECI assignment value out of range");if(p<128)n(p,8,m);else if(p<16384)n(2,2,m),n(p,14,m);else if(p<1e6)n(6,3,m),n(p,21,m);else throw new RangeError("ECI assignment value out of range");return new bn(bn.Mode.ECI,0,m)}static isNumeric(p){return bn.NUMERIC_REGEX.test(p)}static isAlphanumeric(p){return bn.ALPHANUMERIC_REGEX.test(p)}getData(){return this.bitData.slice()}static getTotalBits(p,m){let _=0;for(const T of p){const S=T.mode.numCharCountBits(m);if(T.numChars>=1<<S)return 1/0;_+=4+S+T.bitData.length}return _}static toUtf8ByteArray(p){p=encodeURI(p);let m=[];for(let _=0;_<p.length;_++)p.charAt(_)!="%"?m.push(p.charCodeAt(_)):(m.push(parseInt(p.substring(_+1,_+3),16)),_+=2);return m}};u.NUMERIC_REGEX=/^[0-9]*$/,u.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,u.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let h=u;i.QrSegment=u})(Qa||(Qa={}));(i=>{(e=>{const n=class{constructor(o,u){this.ordinal=o,this.formatBits=u}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(i.QrCode||(i.QrCode={}))})(Qa||(Qa={}));(i=>{(e=>{const n=class{constructor(o,u){this.modeBits=o,this.numBitsCharCount=u}numCharCountBits(o){return this.numBitsCharCount[Math.floor((o+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(i.QrSegment||(i.QrSegment={}))})(Qa||(Qa={}));var qo=Qa;var hk={L:qo.QrCode.Ecc.LOW,M:qo.QrCode.Ecc.MEDIUM,Q:qo.QrCode.Ecc.QUARTILE,H:qo.QrCode.Ecc.HIGH},p1=128,g1="L",y1="#FFFFFF",v1="#000000",_1=!1,b1=1,fk=4,mk=0,pk=.1;function E1(i,e=0){const n=[];return i.forEach(function(s,o){let u=null;s.forEach(function(h,g){if(!h&&u!==null){n.push(`M${u+e} ${o+e}h${g-u}v1H${u+e}z`),u=null;return}if(g===s.length-1){if(!h)return;u===null?n.push(`M${g+e},${o+e} h1v1H${g+e}z`):n.push(`M${u+e},${o+e} h${g+1-u}v1H${u+e}z`);return}h&&u===null&&(u=g)})}),n.join("")}function T1(i,e){return i.slice().map((n,s)=>s<e.y||s>=e.y+e.h?n:n.map((o,u)=>u<e.x||u>=e.x+e.w?o:!1))}function gk(i,e,n,s){if(s==null)return null;const o=i.length+n*2,u=Math.floor(e*pk),h=o/e,g=(s.width||u)*h,p=(s.height||u)*h,m=s.x==null?i.length/2-g/2:s.x*h,_=s.y==null?i.length/2-p/2:s.y*h,T=s.opacity==null?1:s.opacity;let S=null;if(s.excavate){let P=Math.floor(m),F=Math.floor(_),B=Math.ceil(g+m-P),ye=Math.ceil(p+_-F);S={x:P,y:F,w:B,h:ye}}const w=s.crossOrigin;return{x:m,y:_,h:p,w:g,excavation:S,opacity:T,crossOrigin:w}}function yk(i,e){return e!=null?Math.max(Math.floor(e),0):i?fk:mk}function S1({value:i,level:e,minVersion:n,includeMargin:s,marginSize:o,imageSettings:u,size:h,boostLevel:g}){let p=me.useMemo(()=>{const P=(Array.isArray(i)?i:[i]).reduce((F,B)=>(F.push(...qo.QrSegment.makeSegments(B)),F),[]);return qo.QrCode.encodeSegments(P,hk[e],n,void 0,void 0,g)},[i,e,n,g]);const{cells:m,margin:_,numCells:T,calculatedImageSettings:S}=me.useMemo(()=>{let w=p.getModules();const P=yk(s,o),F=w.length+P*2,B=gk(w,h,P,u);return{cells:w,margin:P,numCells:F,calculatedImageSettings:B}},[p,h,u,s,o]);return{qrcode:p,margin:_,cells:m,numCells:T,calculatedImageSettings:S}}var vk=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),w1=me.forwardRef(function(e,n){const s=e,{value:o,size:u=p1,level:h=g1,bgColor:g=y1,fgColor:p=v1,includeMargin:m=_1,minVersion:_=b1,boostLevel:T,marginSize:S,imageSettings:w}=s,F=fp(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:B}=F,ye=fp(F,["style"]),he=w?.src,re=me.useRef(null),Ae=me.useRef(null),ze=me.useCallback(Ge=>{re.current=Ge,typeof n=="function"?n(Ge):n&&(n.current=Ge)},[n]),[Ve,N]=me.useState(!1),{margin:C,cells:I,numCells:V,calculatedImageSettings:k}=S1({value:o,level:h,minVersion:_,boostLevel:T,includeMargin:m,marginSize:S,imageSettings:w,size:u});me.useEffect(()=>{if(re.current!=null){const Ge=re.current,rt=Ge.getContext("2d");if(!rt)return;let $=I;const ue=Ae.current,ve=k!=null&&ue!==null&&ue.complete&&ue.naturalHeight!==0&&ue.naturalWidth!==0;ve&&k.excavation!=null&&($=T1(I,k.excavation));const pe=window.devicePixelRatio||1;Ge.height=Ge.width=u*pe;const je=u/V*pe;rt.scale(je,je),rt.fillStyle=g,rt.fillRect(0,0,V,V),rt.fillStyle=p,vk?rt.fill(new Path2D(E1($,C))):I.forEach(function(O,Q){O.forEach(function(H,J){H&&rt.fillRect(J+C,Q+C,1,1)})}),k&&(rt.globalAlpha=k.opacity),ve&&rt.drawImage(ue,k.x+C,k.y+C,k.w,k.h)}}),me.useEffect(()=>{N(!1)},[he]);const L=hp({height:u,width:u},B);let x=null;return he!=null&&(x=me.createElement("img",{src:he,key:he,style:{display:"none"},onLoad:()=>{N(!0)},ref:Ae,crossOrigin:k?.crossOrigin})),me.createElement(me.Fragment,null,me.createElement("canvas",hp({style:L,height:u,width:u,ref:ze,role:"img"},ye)),x)});w1.displayName="QRCodeCanvas";var _k=me.forwardRef(function(e,n){const s=e,{value:o,size:u=p1,level:h=g1,bgColor:g=y1,fgColor:p=v1,includeMargin:m=_1,minVersion:_=b1,boostLevel:T,title:S,marginSize:w,imageSettings:P}=s,F=fp(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:B,cells:ye,numCells:he,calculatedImageSettings:re}=S1({value:o,level:h,minVersion:_,boostLevel:T,includeMargin:m,marginSize:w,imageSettings:P,size:u});let Ae=ye,ze=null;P!=null&&re!=null&&(re.excavation!=null&&(Ae=T1(ye,re.excavation)),ze=me.createElement("image",{href:P.src,height:re.h,width:re.w,x:re.x+B,y:re.y+B,preserveAspectRatio:"none",opacity:re.opacity,crossOrigin:re.crossOrigin}));const Ve=E1(Ae,B);return me.createElement("svg",hp({height:u,width:u,viewBox:`0 0 ${he} ${he}`,ref:n,role:"img"},F),!!S&&me.createElement("title",null,S),me.createElement("path",{fill:g,d:`M0,0 h${he}v${he}H0z`,shapeRendering:"crispEdges"}),me.createElement("path",{fill:p,d:Ve,shapeRendering:"crispEdges"}),ze)});_k.displayName="QRCodeSVG";const bk={width:"100%",maxWidth:460,backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},iu={fontSize:"0.8rem",display:"block"},su={width:"100%",padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.9rem",marginTop:"0.15rem",boxSizing:"border-box"},Ek={padding:"0.35rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",color:"#111827",cursor:"pointer",fontSize:"0.9rem"};function yg({uid:i,role:e,onClose:n,displayName:s,email:o}){const{options:u}=gg(),[h,g]=U.useState(!0),[p,m]=U.useState(!1),[_,T]=U.useState(null),[S,w]=U.useState(""),[P,F]=U.useState(""),[B,ye]=U.useState(o),[he,re]=U.useState(null),[Ae,ze]=U.useState([]),[Ve,N]=U.useState(!1),[C,I]=U.useState(""),V=e==="teacher"||e==="student",[k,L]=U.useState(""),[x,Ge]=U.useState(""),[rt,$]=U.useState(o),[ue,ve]=U.useState({}),[pe,je]=U.useState(!1),[O,Q]=U.useState(""),[H,J]=U.useState(!1),[Te,_e]=U.useState(null),[Re,We]=U.useState(null);U.useEffect(()=>{let q=!0;return(async()=>{try{g(!0);const de=wt(ke,"users",i),be=await ds(de),Ne=be.exists()?be.data():{};if(!q)return;const Ce=String(Ne.phone??""),fe=String(Ne.secondaryEmail??""),Me=String(Ne?.email??o);w(Ce),F(fe),ye(Me),L(Ce),Ge(fe),$(Me),re(typeof Ne.term=="number"?Ne.term:null);const Xe=Array.isArray(Ne.allowedTerms)?Ne.allowedTerms.filter(nt=>typeof nt=="number"):[];ze(Xe);try{const nt=be.exists()?be.data():{};N(!!nt?.isSuperAdmin)}catch{N(!1)}}catch{q&&T("Kunne ikke laste profildata.")}finally{q&&g(!1)}})(),()=>{q=!1}},[i]);const Je=U.useMemo(()=>Ae.map(q=>as(u,q)),[Ae,u]),qt=async()=>{T(null),m(!0);try{await sr(wt(ke,"users",i),{phone:S.trim()||null}),L(S),He.success("Mobilnummer er oppdatert.")}catch(q){console.error(q),T("Kunne ikke lagre mobilnummer."),He.error("Kunne ikke lagre mobilnummer.")}finally{m(!1)}},Gt=async()=>{T(null),m(!0);try{await sr(wt(ke,"users",i),{secondaryEmail:P.trim()||null}),Ge(P),He.success("Sekundr epost er oppdatert.")}catch(q){console.error(q),T("Kunne ikke lagre sekundr epost."),He.error("Kunne ikke lagre sekundr epost.")}finally{m(!1)}},Ot=async()=>{T(null);const q=B.trim();if(!q){T("Epost kan ikke vre tom."),He.error("Epost kan ikke vre tom.");return}if(q===rt){He.info?.("Eposten er uendret.")||He("Eposten er uendret.");return}try{const de=Ws.currentUser;if(!de){T("Ingen innlogget bruker."),He.error("Ingen innlogget bruker.");return}await g_(de,q),$(q),He.success(`Vi har sendt en bekreftelseslenke til ${q}. Flg lenken for  fullfre endringen av epost.`)}catch(de){console.warn("updateEmail failed",de),de?.code==="auth/operation-not-allowed"?(T("Kan ikke oppdatere epost direkte. Du m bekrefte ny epost via lenken vi sender. Prv igjen."),He.error("Kan ikke oppdatere epost direkte. Bruk knappen igjen for  f tilsendt bekreftelseslenke.")):de?.code==="auth/requires-recent-login"?(We(q),Q(""),_e(null),je(!0),He.info?.("Av sikkerhetshensyn m du bekrefte med passord fr du kan endre epost.")||He("Av sikkerhetshensyn m du bekrefte med passord fr du kan endre epost.")):de?.code==="auth/email-already-in-use"?(T("Epostadressen er allerede i bruk av en annen bruker."),He.error("Epostadressen er allerede i bruk av en annen bruker.")):de?.code==="auth/invalid-email"?(T("Ugyldig epost."),He.error("Ugyldig epost.")):(T("Kunne ikke oppdatere epost. Prv igjen senere."),He.error("Kunne ikke oppdatere epost. Prv igjen senere."))}},Tn=()=>{je(!1),Q(""),_e(null)},en=async()=>{_e(null);const q=(Re||B||"").trim();if(!q){_e("Ugyldig ny epost.");return}const de=Ws.currentUser;if(!de){_e("Ingen innlogget bruker.");return}if(!O){_e("Skriv inn passordet ditt.");return}try{J(!0);const be=Ya.credential(de.email||o,O);await WR(de,be),await g_(de,q),je(!1),Q(""),We(null),He.success(`Vi har sendt en bekreftelseslenke til ${q}. Flg lenken for  fullfre endringen av epost.`)}catch(be){console.error("Reauth/update email failed",be),be?.code==="auth/wrong-password"?_e("Feil passord."):be?.code==="auth/too-many-requests"?_e("For mange forsk. Prv igjen senere."):be?.code==="auth/invalid-email"?_e("Ugyldig epost."):be?.code==="auth/email-already-in-use"?_e("Epostadressen er allerede i bruk av en annen bruker."):_e("Kunne ikke bekrefte innlogging eller oppdatere epost.")}finally{J(!1)}},sn=async()=>{if(T(null),!C||C.length<6){T("Passord m vre minst 6 tegn."),He.error("Passord m vre minst 6 tegn.");return}try{const q=Ws.currentUser;if(!q){T("Ingen innlogget bruker."),He.error("Ingen innlogget bruker.");return}await eC(q,C),He.success("Passordet er oppdatert."),I("")}catch(q){console.warn("updatePassword failed",q),q?.code==="auth/requires-recent-login"?(T("Du m logge inn p nytt fr du kan endre passord."),He.error("Du m logge inn p nytt fr du kan endre passord.")):(T("Kunne ikke endre passord."),He.error("Kunne ikke endre passord."))}};return v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:60},"aria-modal":!0,role:"dialog",children:v.jsxs("div",{style:bk,children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[v.jsx("h3",{style:{margin:0},children:s||o}),v.jsx("button",{type:"button",onClick:n,className:"button-small button-border button-colorless",children:"Lukk"})]}),h?v.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"1rem 0"},children:"Laster..."}):v.jsxs(v.Fragment,{children:[e==="student"&&v.jsxs("div",{style:{fontSize:"0.9rem",color:"#374151"},children:[v.jsx("div",{style:{fontWeight:600},children:"Din termin"}),v.jsx("div",{children:as(u,he)})]}),e==="teacher"&&v.jsxs("div",{style:{fontSize:"0.9rem",color:"#374151"},children:[v.jsx("div",{style:{fontWeight:600},children:"Terminer du kan registrere oppmte p:"}),Ae.length===0?v.jsx("div",{children:"Ingen"}):v.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.4rem",marginTop:"0.25rem"},children:Je.map((q,de)=>v.jsx("span",{style:{display:"inline-block",padding:"0.15rem 0.5rem",border:"1px solid #e5e7eb",borderRadius:"999px",background:"#f9fafb",fontSize:"0.8rem"},children:q},de))})]}),e==="admin"&&v.jsx("div",{style:{fontSize:"0.9rem",color:"#374151"},children:Ve?v.jsx("div",{style:{fontWeight:600},children:"Super administrator"}):v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{fontWeight:600},children:"Moduler du administrerer:"}),Ae.length===0?v.jsx("div",{children:"Ingen"}):v.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.4rem",marginTop:"0.25rem"},children:Je.map((q,de)=>v.jsx("span",{style:{display:"inline-block",padding:"0.15rem 0.5rem",border:"1px solid #e5e7eb",borderRadius:"999px",background:"#f9fafb",fontSize:"0.8rem"},children:q},de))})]})}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginTop:"1rem"},children:[v.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-end"},children:[v.jsx("div",{style:{flex:1,minWidth:0},children:v.jsxs("label",{style:iu,children:["Mobilnummer",v.jsx("input",{type:"tel",value:S,onChange:q=>w(q.target.value),placeholder:"Eks: 99999999",style:su})]})}),v.jsx("button",{type:"button",disabled:p||S===k,onMouseEnter:()=>ve(q=>({...q,phone:!0})),onMouseLeave:()=>ve(q=>({...q,phone:!1})),onClick:qt,className:"button-black button-small",children:"Lagre"})]}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-end"},children:[v.jsx("div",{style:{flex:1,minWidth:0},children:v.jsxs("label",{style:iu,children:["Epost",v.jsx("input",{type:"email",value:B,onChange:q=>ye(q.target.value),placeholder:"din@epost.no",style:su})]})}),v.jsx("button",{type:"button",disabled:p||B.trim()===rt.trim(),onMouseEnter:()=>ve(q=>({...q,primaryEmail:!0})),onMouseLeave:()=>ve(q=>({...q,primaryEmail:!1})),onClick:Ot,className:"button-black button-small",children:"Lagre"})]}),V&&v.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-end"},children:[v.jsx("div",{style:{flex:1,minWidth:0},children:v.jsxs("label",{style:iu,children:["Sekundr epost",v.jsx("input",{type:"email",value:P,onChange:q=>F(q.target.value),placeholder:"eksempel@uio.no",style:su})]})}),v.jsx("button",{type:"button",disabled:p||P===x,onMouseEnter:()=>ve(q=>({...q,secondaryEmail:!0})),onMouseLeave:()=>ve(q=>({...q,secondaryEmail:!1})),onClick:Gt,className:"button-black button-small",children:"Lagre"})]}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-end"},children:[v.jsx("div",{style:{flex:1,minWidth:0},children:v.jsxs("label",{style:iu,children:["Nytt passord",v.jsx("input",{type:"password",value:C,onChange:q=>I(q.target.value),placeholder:"Minst 6 tegn",style:su})]})}),v.jsx("button",{type:"button",disabled:p||C.length===0,onMouseEnter:()=>ve(q=>({...q,password:!0})),onMouseLeave:()=>ve(q=>({...q,password:!1})),onClick:sn,className:"button-black button-small",children:"Lagre"})]})]})]})]})}),pe&&v.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:70},children:v.jsxs("div",{className:"page-card",style:{maxWidth:520,width:"100%",background:"#ffffff"},children:[v.jsx("h3",{style:{marginTop:0},children:"Logg inn p nytt"}),v.jsxs("p",{style:{whiteSpace:"pre-wrap",lineHeight:1.4},children:["Av sikkerhetshensyn m du bekrefte kontoen fr du kan endre epost.",`
`,"Skriv inn passordet for ",o,"."]}),v.jsxs("label",{style:iu,children:["Passord",v.jsx("input",{type:"password",value:O,onChange:q=>Q(q.target.value),placeholder:"Passord",style:su,autoFocus:!0})]}),Te&&v.jsx("p",{style:{color:"#b91c1c",fontSize:"0.85rem",marginTop:"0.5rem"},children:Te}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",marginTop:"0.75rem"},children:[v.jsx("button",{type:"button",onClick:Tn,style:Ek,children:"Avbryt"}),v.jsx("button",{type:"button",onClick:en,style:{background:"#6CE1AB",color:"black",cursor:"pointer"},disabled:H,children:H?"Bekrefter...":"Bekreft og send lenke"})]})]})})]})}function Tk({user:i}){const[e,n]=U.useState([]),[s,o]=U.useState(null),[u,h]=U.useState(null),[g,p]=U.useState(""),[m,_]=U.useState(null),[T,S]=U.useState([]),[w,P]=U.useState(!0),[F,B]=U.useState(!1),[ye,he]=U.useState([]),[re,Ae]=U.useState(!0),[ze,Ve]=U.useState(""),[N,C]=U.useState(!1),[I,V]=U.useState({open:!1,attendee:null}),[k,L]=U.useState(120),[x,Ge]=U.useState([]),[rt,$]=U.useState(!1),ue=U.useRef(null),ve=U.useRef(null),{options:pe}=gg(),{logout:je}=ll(),[O,Q]=U.useState(!1);U.useEffect(()=>{(async()=>{P(!0);const be=(await cn(Xt(ke,"times"))).docs.map(Ne=>{const Ce=Ne.data();return{id:Ne.id,name:Ce.name,category:Ce.category,term:Ce.term}});n(be),P(!1)})()},[]),U.useEffect(()=>{(async()=>{try{const de=wt(ke,"users",i.uid),be=await ds(de),Ne=be.exists()?be.data():null,Ce=Array.isArray(Ne?.allowedTerms)?Ne.allowedTerms.map(fe=>typeof fe=="number"?fe:parseInt(fe,10)).filter(fe=>!Number.isNaN(fe)):[];h(Ce)}catch(de){console.warn("Kunne ikke hente allowedTerms for lrer:",de),h([])}})()},[i.uid]),U.useMemo(()=>{if(u===null)return pe;const q=new Set(u??[]);return pe.filter(de=>q.has(de.value))},[u,pe]),U.useEffect(()=>{(async()=>{if(!(u===null||!s)){Ae(!0);try{const de=Xt(ke,"users"),be=Wn(de,mn("role","==","student"),mn("term","==",s)),Ce=(await cn(be)).docs.map(fe=>{const Me=fe.data(),Xe=Me?.name&&String(Me.name)||Me?.displayName&&String(Me.displayName)||null;return{id:fe.id,name:Xe,email:String(Me?.email??""),phone:Me?.phone?String(Me.phone):null,term:typeof Me?.term=="number"?Me.term:null}});Ce.sort((fe,Me)=>{const Xe=(fe.name??"").toLocaleLowerCase(),nt=(Me.name??"").toLocaleLowerCase();return Xe!==nt?Xe.localeCompare(nt,"nb-NO"):fe.email.localeCompare(Me.email,"nb-NO")}),he(Ce)}catch(de){console.error("Feil ved lasting av studenter:",de),he([])}finally{Ae(!1)}}})()},[u,s]),U.useEffect(()=>{H()},[i.uid]);const H=async()=>{try{$(!0);const q=Date.now()-14400*1e3,de=Lt.fromMillis(q),be=Xt(ke,"sessions");let Ne=[];try{const Me=Wn(be,mn("teacherId","==",i.uid),mn("createdAt",">=",de),wb("createdAt","desc"),Ab(50));Ne=(await cn(Me)).docs}catch{const Xe=Wn(be,mn("teacherId","==",i.uid));Ne=(await cn(Xe)).docs.filter(on=>{const ft=on.data()?.createdAt;return ft&&ft.toMillis()>=q}).sort((on,ft)=>{const Cn=on.data()?.createdAt?.toMillis?.()??0;return(ft.data()?.createdAt?.toMillis?.()??0)-Cn}).slice(0,50)}const Ce=new Set,fe=[];for(const Me of Ne){const Xe=Me.data(),nt=String(Xe?.timeId??"");if(!(!nt||Ce.has(nt))&&(Ce.add(nt),fe.push({timeId:nt,name:String(Xe?.name??"Ukjent time"),category:String(Xe?.category??""),term:typeof Xe?.term=="number"?Xe.term:Number(Xe?.term)||0,lastAt:Xe?.createdAt}),fe.length>=10))break}Ge(fe)}catch(q){console.warn("Kunne ikke hente nylige timer:",q),Ge([])}finally{$(!1)}};U.useEffect(()=>{if(!m){S([]);return}const q=Xt(ke,"sessions",m.id,"attendance"),de=Ib(q,be=>{const Ne=be.docs.map(Ce=>{const fe=Ce.data();return{id:Ce.id,studentName:fe.studentName??null,studentEmail:fe.studentEmail??null,createdAt:fe.createdAt}}).sort((Ce,fe)=>{const Me=Ce.createdAt?.toMillis?.()??0,Xe=fe.createdAt?.toMillis?.()??0;return Me-Xe});S(Ne)});return()=>de()},[m?.id]);const J=U.useMemo(()=>e.filter(q=>q.term===s),[e,s]),Te=U.useMemo(()=>{const q=g.trim().toLowerCase();return q?J.filter(de=>de.name.toLowerCase().includes(q)).sort((de,be)=>de.name.localeCompare(be.name,"nb-NO",{sensitivity:"base"})):[]},[J,g]),_e=U.useMemo(()=>{const q=ze.trim().toLowerCase();if(!q||!m)return[];const de=q.includes("@");return ye.filter(be=>{if(be.term!==m.term)return!1;const Ne=String(be.name??"").toLowerCase(),Ce=String(be.email??"").toLowerCase(),fe=de?Ce:Ce.split("@")[0]??Ce,Me=String(be.phone??"").toLowerCase();return Ne.includes(q)||fe.includes(q)||Me.includes(q)}).slice(0,10)},[ye,ze,m]),Re=async q=>{const de=e.find(nt=>nt.id===q);if(!de)return;if(m){const nt=wt(ke,"sessions",m.id);await sr(nt,{isOpen:!1}),_(null)}const be=Math.floor(1e5+Math.random()*9e5),Ne=String(be),Ce=Xt(ke,"sessions"),fe=Lt.now(),Xe={id:(await Cd(Ce,{timeId:de.id,name:de.name,category:de.category,term:de.term,code:Ne,teacherId:i.uid,teacherName:i.displayName,teacherEmail:i.email,createdAt:fe,isOpen:!0,openedAt:fe})).id,timeId:de.id,name:de.name,category:de.category,term:de.term,code:Ne,teacherId:i.uid,createdAt:fe,isOpen:!0,openedAt:fe};_(Xe),H()},We=async q=>{p(q.name),B(!1),await Re(q.id),ve.current&&ve.current.blur()},Je=async q=>{o(q.term),p(q.name),B(!1);let de;try{const be=Wn(Xt(ke,"sessions"),mn("teacherId","==",i.uid),mn("timeId","==",q.timeId),wb("createdAt","desc"),Ab(1));de=(await cn(be)).docs[0]}catch{try{const Ne=Wn(Xt(ke,"sessions"),mn("teacherId","==",i.uid));de=(await cn(Ne)).docs.filter(Me=>String(Me.data()?.timeId??"")===String(q.timeId)).sort((Me,Xe)=>{const nt=Me.data()?.createdAt?.toMillis?.()??0;return(Xe.data()?.createdAt?.toMillis?.()??0)-nt})[0]}catch{}}if(de){const be=de.data();if(m&&m.id!==de.id){try{await sr(wt(ke,"sessions",m.id),{isOpen:!1})}catch{}_(null)}const Ne=Lt.now();try{await sr(wt(ke,"sessions",de.id),{isOpen:!0,openedAt:Ne})}catch{}const Ce={id:de.id,timeId:String(be.timeId??q.timeId),name:String(be.name??q.name),category:String(be.category??""),term:typeof be.term=="number"?be.term:Number(be.term)||q.term,code:String(be.code??""),teacherId:String(be.teacherId??i.uid),createdAt:be.createdAt??Lt.now(),isOpen:!0,openedAt:Ne};_(Ce),L(120);return}await Re(q.timeId)},qt=async()=>{if(!m)return;const q=wt(ke,"sessions",m.id);if(!m.isOpen){const be=Lt.now();await sr(q,{isOpen:!0,openedAt:be}),_({...m,isOpen:!0,openedAt:be}),L(120)}else await sr(q,{isOpen:!1}),_({...m,isOpen:!1})};U.useEffect(()=>{if(!m)return;const q=wt(ke,"sessions",m.id),de=Ib(q,be=>{if(!be.exists())return;const Ne=be.data();_(Ce=>Ce&&Ce.id===be.id?{...Ce,isOpen:Ne?.isOpen??Ce.isOpen,openedAt:Ne?.openedAt??Ce.openedAt}:Ce)});return()=>de()},[m?.id]),U.useEffect(()=>{if(!m||!m.isOpen||!m.openedAt){L(0);return}const q=m.openedAt.toMillis(),de=async()=>{const Ne=Date.now(),Ce=Math.floor((Ne-q)/1e3),fe=Math.max(0,60-Ce);if(L(fe),fe===0&&m.isOpen)try{await sr(wt(ke,"sessions",m.id),{isOpen:!1}),_({...m,isOpen:!1})}catch{}};de();const be=setInterval(de,1e3);return()=>clearInterval(be)},[m?.id,m?.isOpen,m?.openedAt]);const Gt=q=>{const de=Math.floor(q/60).toString().padStart(2,"0"),be=Math.floor(q%60).toString().padStart(2,"0");return`${de}:${be}`},Ot=async q=>{if(m)try{const de=wt(ke,"sessions",m.id,"attendance",q.id);if((await ds(de)).exists()){He.error("Studenten er allerede registrert p denne kten.");return}await za(de,{userId:q.id,studentName:q.name??null,studentEmail:q.email,createdAt:Lt.now(),status:"present",addedManually:!0,addedBy:i.uid}),Ve(""),C(!1)}catch(de){console.error(de),He.error("Kunne ikke legge til student manuelt.")}},Tn=q=>{V({open:!0,attendee:q})},en=()=>{V({open:!1,attendee:null})},sn=async()=>{if(!m||!I.attendee)return;const q=I.attendee;try{await u1(wt(ke,"sessions",m.id,"attendance",q.id)),He.success("Student fjernet fra kten.")}catch(de){console.error(de),He.error("Kunne ikke fjerne studenten.")}finally{en()}};return w?v.jsx("div",{className:"page-card page-card--teacher",children:v.jsx(Qo,{})}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"page-card page-card--teacher",children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[v.jsx("div",{style:{fontWeight:600},children:i.displayName||i.email}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[v.jsx("button",{className:"btn-hover-lg",type:"button",onClick:()=>Q(!0),style:{padding:"0.35rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#ffffff",cursor:"pointer",fontSize:"0.85rem"},children:"Min profil"}),v.jsx("button",{className:"btn-hover-lg",onClick:je,type:"button",style:{padding:"0.35rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#ffffff",cursor:"pointer",fontSize:"0.85rem"},children:"Logg ut"})]})]}),v.jsx("h2",{style:{textAlign:"center",margin:"4rem 0 3rem"},children:"Registrer oppmte"}),v.jsxs("section",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",alignItems:"center"},children:[v.jsx("div",{style:{marginBottom:"1.25rem",width:"100%",maxWidth:520},children:(()=>{const q=u!==null?new Set(u??[]):null,de=q?pe.filter(be=>q.has(be.value)):pe;return de.length===0?v.jsx("div",{style:{width:"100%",padding:"0.6rem 0",fontSize:"16px",border:"1px solid #e5e7eb",borderRadius:"0.5rem",background:"#f9fafb",color:"#6b7280",textAlign:"center"},children:"Ingen terminer tilgjengelig"}):v.jsxs("select",{value:s??"",onChange:be=>{const Ne=be.target.value,Ce=Ne===""?null:parseInt(Ne,10);o(Ce),p(""),B(!1),_(null),S([]),Ce!=null&&setTimeout(()=>{ve.current?.focus()},0)},style:{width:"100%",padding:"0.6rem 0.75rem",fontSize:"16px",textAlign:"center",borderRadius:"0.5rem",border:"solid 1px"},children:[v.jsx("option",{value:"",disabled:!0,children:"Velg modul"}),de.map(be=>v.jsx("option",{value:be.value,children:be.label},be.value))]})})()}),v.jsxs("div",{style:{position:"relative",marginBottom:"0.75rem",width:"100%",maxWidth:520},children:[v.jsx("input",{ref:ve,value:g,onChange:q=>{p(q.target.value),B(!0)},onFocus:()=>{s&&g.trim().length>0&&B(!0)},placeholder:s?"Start  skrive navnet p timen...":"Velg modul frst",disabled:!s,style:{width:"100%",padding:"0.6rem 0rem",fontSize:"16px",textAlign:"center",borderRadius:"0.5rem",border:"solid 1px",opacity:s?1:.6}}),F&&Te.length>0&&v.jsx("ul",{style:{position:"absolute",top:"100%",left:0,right:0,zIndex:10,background:"white",border:"1px solid #e5e7eb",borderRadius:"0.5rem",marginTop:"0.2rem",listStyle:"none",padding:0,maxHeight:"220px",overflowY:"auto",boxShadow:"0 10px 20px rgba(0,0,0,0.08)"},children:Te.map(q=>v.jsxs("li",{onClick:()=>We(q),style:{padding:"0.4rem 0.6rem",cursor:"pointer",borderBottom:"1px solid #f3f4f6"},onMouseDown:de=>de.preventDefault(),children:[v.jsx("div",{children:q.name}),v.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:q.category})]},q.id))})]})]}),!m&&x.length>0&&v.jsx("section",{style:{marginTop:"1.5rem",display:"flex",flexDirection:"column",alignItems:"center"},children:v.jsxs("div",{style:{width:"100%",maxWidth:520},children:[v.jsx("h4",{style:{textAlign:"center",marginTop:0},children:"Nylig registrerte timer"}),v.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:x.map(q=>v.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.5rem 0",borderBottom:"1px solid #f3f4f6"},children:[v.jsxs("div",{children:[v.jsx("div",{style:{fontWeight:600},children:q.name}),v.jsxs("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:[q.category,"  ",as(pe,q.term)]})]}),v.jsx("button",{type:"button",onClick:()=>void Je(q),style:{padding:"0.35rem 0.9rem",borderRadius:"999px",border:"none",background:"#6CE1AB",color:"black",cursor:"pointer"},children:"pne"})]},q.timeId))})]})})]}),v.jsx("br",{}),v.jsx("div",{className:"page-card page-card--session",style:{display:m?void 0:"none"},children:m&&v.jsxs("section",{ref:ue,style:{marginTop:"2rem",padding:"1rem",background:"#f9fafb"},children:[v.jsxs("div",{style:{textAlign:"center"},children:[v.jsx("h3",{style:{marginTop:0,marginBottom:"0.25rem"},children:as(pe,m.term)}),v.jsxs("p",{style:{margin:0},children:[v.jsx("strong",{children:"Time:"})," ",m.name]}),v.jsxs("p",{style:{marginTop:"0.2rem"},children:[v.jsx("strong",{children:"Gruppe:"})," ",m.category]})]}),v.jsxs("div",{style:{marginTop:"1rem",position:"relative"},children:[v.jsxs("div",{style:{filter:m.isOpen===!1?"blur(6px)":"none",pointerEvents:"none",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},children:[v.jsx(w1,{value:m.code,size:160,bgColor:"#f9fafb",includeMargin:!0}),v.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",letterSpacing:"0.3em"},children:m.code})]}),m.isOpen===!1&&v.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center"},children:v.jsx("div",{style:{background:"rgba(255,255,255,0.85)",padding:"0.5rem 0.75rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb",fontWeight:600,color:"#6b7280"},children:"kten er lukket"})})]}),v.jsxs("div",{style:{marginTop:"1.5rem"},children:[v.jsx("h4",{style:{textAlign:"center",marginBottom:"0.3rem"},children:"Legg til student manuelt"}),v.jsx("p",{style:{fontSize:"0.8rem",color:"#6b7280",textAlign:"center",marginTop:0,marginBottom:"0.5rem"},children:"Brukes dersom en student ikke kan skanne eller skrive inn kode."}),re&&v.jsx("div",{style:{display:"flex",justifyContent:"center"},children:v.jsx(Qo,{})}),v.jsxs("div",{style:{position:"relative",maxWidth:"360px",margin:"0 auto"},children:[v.jsx("input",{value:ze,onChange:q=>{Ve(q.target.value),C(!0)},onFocus:()=>{ze.trim().length>0&&C(!0)},placeholder:re?"Laster studenter...":"Sk p navn, e-post eller telefon",disabled:re,style:{width:"100%",padding:"0.6rem 0.75rem",fontSize:"16px",borderRadius:"0.5rem",border:"1px solid #d1d5db",textAlign:"center"}}),N&&_e.length>0&&v.jsx("ul",{style:{position:"absolute",top:"100%",left:0,right:0,zIndex:20,background:"white",border:"1px solid #e5e7eb",borderRadius:"0.5rem",marginTop:"0.2rem",listStyle:"none",padding:0,maxHeight:"220px",overflowY:"auto",boxShadow:"0 10px 20px rgba(0,0,0,0.08)"},children:_e.map(q=>v.jsxs("li",{onClick:()=>Ot(q),style:{padding:"0.4rem 0.6rem",cursor:"pointer",borderBottom:"1px solid #f3f4f6"},onMouseDown:de=>de.preventDefault(),children:[v.jsx("div",{children:q.name||"(Uten navn)"}),v.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[q.email,q.phone?`  ${q.phone}`:""]})]},q.id))})]})]}),v.jsxs("div",{style:{marginTop:"1.2rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[v.jsx("div",{style:{fontWeight:600,color:"#111827"},children:Gt(k)}),v.jsx("button",{onClick:qt,style:{padding:"0.5rem 1.2rem",borderRadius:"999px",border:"none",background:(m.isOpen===!1,"#6CE1AB"),color:"black",fontWeight:500,cursor:"pointer"},children:m.isOpen===!1?"pne kta":"Lukk kt"})]}),v.jsx("hr",{style:{margin:"1rem 0"}}),v.jsx("h4",{children:"Registrerte studenter"}),T.length===0?v.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"Ingen har registrert seg enn."}):v.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"Navn"}),v.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"E-post"}),v.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"Tidspunkt"}),v.jsx("th",{style:{textAlign:"right",borderBottom:"1px solid #e5e7eb",padding:"0.3rem",width:40}})]})}),v.jsx("tbody",{children:T.map(q=>v.jsxs("tr",{children:[v.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:q.studentName||"-"}),v.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:q.studentEmail||"-"}),v.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6",fontSize:"0.8rem",color:"#6b7280"},children:q.createdAt?new Date(q.createdAt.toMillis()).toLocaleTimeString("no-NO",{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-"}),v.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6",textAlign:"right"},children:v.jsx("button",{type:"button",onClick:()=>Tn(q),"aria-label":"Fjern student fra kten",title:"Fjern student",style:{background:"transparent",border:"none",cursor:"pointer",color:"#b91c1c",padding:"0.15rem"},children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[v.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),v.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})})]},q.id))})]})]})}),I.open&&I.attendee&&v.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1e3},children:v.jsxs("div",{className:"page-card",style:{maxWidth:520,width:"100%",background:"#ffffff",textAlign:"center"},children:[v.jsx("h3",{style:{marginTop:0},children:"Fjerne student?"}),v.jsx("p",{style:{whiteSpace:"pre-wrap",lineHeight:1.4},children:(()=>{const q=I.attendee;return`Du er i ferd med  fjerne ${q.studentName||q.studentEmail||"denne studenten"} fra denne kten.`})()}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",marginTop:"0.75rem"},children:[v.jsx("button",{className:"button",type:"button",onClick:en,style:{background:"#ef4444",color:"#ffffff"},children:"Avbryt"}),v.jsx("button",{type:"button",onClick:()=>void sn(),style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#ffffff",cursor:"pointer"},children:"Fjern student"})]})]})}),O&&v.jsx(yg,{uid:i.uid,role:i.role,email:i.email,displayName:i.displayName,onClose:()=>Q(!1)})]})}const Sk="type.googleapis.com/google.protobuf.Int64Value",wk="type.googleapis.com/google.protobuf.UInt64Value";function A1(i,e){const n={};for(const s in i)i.hasOwnProperty(s)&&(n[s]=e(i[s]));return n}function $d(i){if(i==null)return null;if(i instanceof Number&&(i=i.valueOf()),typeof i=="number"&&isFinite(i)||i===!0||i===!1||Object.prototype.toString.call(i)==="[object String]")return i;if(i instanceof Date)return i.toISOString();if(Array.isArray(i))return i.map(e=>$d(e));if(typeof i=="function"||typeof i=="object")return A1(i,e=>$d(e));throw new Error("Data cannot be encoded in JSON: "+i)}function tl(i){if(i==null)return i;if(i["@type"])switch(i["@type"]){case Sk:case wk:{const e=Number(i.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+i);return e}default:throw new Error("Data cannot be decoded from JSON: "+i)}return Array.isArray(i)?i.map(e=>tl(e)):typeof i=="function"||typeof i=="object"?A1(i,e=>tl(e)):i}const vg="functions";const Ob={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Rr extends Oi{constructor(e,n,s){super(`${vg}/${e}`,n||""),this.details=s,Object.setPrototypeOf(this,Rr.prototype)}}function Ak(i){if(i>=200&&i<300)return"ok";switch(i){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Wd(i,e){let n=Ak(i),s=n,o;try{const u=e&&e.error;if(u){const h=u.status;if(typeof h=="string"){if(!Ob[h])return new Rr("internal","internal");n=Ob[h],s=h}const g=u.message;typeof g=="string"&&(s=g),o=u.details,o!==void 0&&(o=tl(o))}}catch{}return n==="ok"?null:new Rr(n,s,o)}class Rk{constructor(e,n,s,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Vr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=s.getImmediate({optional:!0}),this.auth||n.get().then(u=>this.auth=u,()=>{}),this.messaging||s.get().then(u=>this.messaging=u,()=>{}),this.appCheck||o?.get().then(u=>this.appCheck=u,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),s=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:n,messagingToken:s,appCheckToken:o}}}const mp="us-central1",Ck=/^data: (.*?)(?:\n|$)/;function Ik(i){let e=null;return{promise:new Promise((n,s)=>{e=setTimeout(()=>{s(new Rr("deadline-exceeded","deadline-exceeded"))},i)}),cancel:()=>{e&&clearTimeout(e)}}}class xk{constructor(e,n,s,o,u=mp,h=(...g)=>fetch(...g)){this.app=e,this.fetchImpl=h,this.emulatorOrigin=null,this.contextProvider=new Rk(e,n,s,o),this.cancelAllRequests=new Promise(g=>{this.deleteService=()=>Promise.resolve(g())});try{const g=new URL(u);this.customDomain=g.origin+(g.pathname==="/"?"":g.pathname),this.region=mp}catch{this.customDomain=null,this.region=u}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function Nk(i,e,n){const s=ua(e);i.emulatorOrigin=`http${s?"s":""}://${e}:${n}`,s&&(yp(i.emulatorOrigin+"/backends"),vp("Functions",!0))}function kk(i,e,n){const s=o=>Mk(i,e,o,{});return s.stream=(o,u)=>Vk(i,e,o,u),s}function R1(i){return i.emulatorOrigin&&ua(i.emulatorOrigin)?"include":void 0}async function Dk(i,e,n,s,o){n["Content-Type"]="application/json";let u;try{u=await s(i,{method:"POST",body:JSON.stringify(e),headers:n,credentials:R1(o)})}catch{return{status:0,json:null}}let h=null;try{h=await u.json()}catch{}return{status:u.status,json:h}}async function C1(i,e){const n={},s=await i.contextProvider.getContext(e.limitedUseAppCheckTokens);return s.authToken&&(n.Authorization="Bearer "+s.authToken),s.messagingToken&&(n["Firebase-Instance-ID-Token"]=s.messagingToken),s.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=s.appCheckToken),n}function Mk(i,e,n,s){const o=i._url(e);return Ok(i,o,n,s)}async function Ok(i,e,n,s){n=$d(n);const o={data:n},u=await C1(i,s),h=s.timeout||7e4,g=Ik(h),p=await Promise.race([Dk(e,o,u,i.fetchImpl,i),g.promise,i.cancelAllRequests]);if(g.cancel(),!p)throw new Rr("cancelled","Firebase Functions instance was deleted.");const m=Wd(p.status,p.json);if(m)throw m;if(!p.json)throw new Rr("internal","Response is not valid JSON object.");let _=p.json.data;if(typeof _>"u"&&(_=p.json.result),typeof _>"u")throw new Rr("internal","Response is missing data field.");return{data:tl(_)}}function Vk(i,e,n,s){const o=i._url(e);return jk(i,o,n,s||{})}async function jk(i,e,n,s){n=$d(n);const o={data:n},u=await C1(i,s);u["Content-Type"]="application/json",u.Accept="text/event-stream";let h;try{h=await i.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:u,signal:s?.signal,credentials:R1(i)})}catch(S){if(S instanceof Error&&S.name==="AbortError"){const P=new Rr("cancelled","Request was cancelled.");return{data:Promise.reject(P),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(P)}}}}}}const w=Wd(0,null);return{data:Promise.reject(w),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(w)}}}}}}let g,p;const m=new Promise((S,w)=>{g=S,p=w});s?.signal?.addEventListener("abort",()=>{const S=new Rr("cancelled","Request was cancelled.");p(S)});const _=h.body.getReader(),T=Lk(_,g,p,s?.signal);return{stream:{[Symbol.asyncIterator](){const S=T.getReader();return{async next(){const{value:w,done:P}=await S.read();return{value:w,done:P}},async return(){return await S.cancel(),{done:!0,value:void 0}}}}},data:m}}function Lk(i,e,n,s){const o=(h,g)=>{const p=h.match(Ck);if(!p)return;const m=p[1];try{const _=JSON.parse(m);if("result"in _){e(tl(_.result));return}if("message"in _){g.enqueue(tl(_.message));return}if("error"in _){const T=Wd(0,_);g.error(T),n(T);return}}catch(_){if(_ instanceof Rr){g.error(_),n(_);return}}},u=new TextDecoder;return new ReadableStream({start(h){let g="";return p();async function p(){if(s?.aborted){const m=new Rr("cancelled","Request was cancelled");return h.error(m),n(m),Promise.resolve()}try{const{value:m,done:_}=await i.read();if(_){g.trim()&&o(g.trim(),h),h.close();return}if(s?.aborted){const S=new Rr("cancelled","Request was cancelled");h.error(S),n(S),await i.cancel();return}g+=u.decode(m,{stream:!0});const T=g.split(`
`);g=T.pop()||"";for(const S of T)S.trim()&&o(S.trim(),h);return p()}catch(m){const _=m instanceof Rr?m:Wd(0,null);h.error(_),n(_)}}},cancel(){return i.cancel()}})}const Vb="@firebase/functions",jb="0.13.1";const Pk="auth-internal",Uk="app-check-internal",zk="messaging-internal";function Bk(i){const e=(n,{instanceIdentifier:s})=>{const o=n.getProvider("app").getImmediate(),u=n.getProvider(Pk),h=n.getProvider(zk),g=n.getProvider(Uk);return new xk(o,u,h,g,s)};qa(new na(vg,e,"PUBLIC").setMultipleInstances(!0)),Ai(Vb,jb,i),Ai(Vb,jb,"esm2020")}function Lm(i=eh(),e=mp){const s=Zd(rn(i),vg).getImmediate({identifier:e}),o=Hb("functions");return o&&qk(s,...o),s}function qk(i,e,n){Nk(rn(i),e,n)}function Pm(i,e,n){return kk(rn(i),e)}Bk();function Lb(i){const e=i.match(/^\s*(\d+)/);return e?parseInt(e[1],10):Number.POSITIVE_INFINITY}function Um(){const i="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789!@#$";let e="";for(let n=0;n<12;n++)e+=i[Math.floor(Math.random()*i.length)];return e}const Fk=()=>{const{user:i}=ll(),[e,n]=U.useState([]),[s,o]=U.useState(!0),[u,h]=U.useState(""),[g,p]=U.useState("students"),[m,_]=U.useState("all"),[T,S]=U.useState("name"),[w,P]=U.useState("asc"),[F,B]=U.useState("all"),[ye,he]=U.useState("name"),[re,Ae]=U.useState("asc"),[ze,Ve]=U.useState("all"),[N,C]=U.useState("name"),[I,V]=U.useState("asc"),[k,L]=U.useState([]),x=U.useMemo(()=>k.slice().sort((D,le)=>(D.order??D.value)-(le.order??le.value)).map(D=>({value:D.value,label:D.label||`Termin ${D.value}`})),[k]),[Ge,rt]=U.useState(null),[$,ue]=U.useState(null);U.useEffect(()=>{(async()=>{try{if(!i?.uid)return;const le=wt(ke,"users",i.uid),Ee=await ds(le),Oe=Ee.exists()?Ee.data():null,st=(Array.isArray(Oe?.allowedTerms)?Oe.allowedTerms:[]).map(gt=>typeof gt=="number"?gt:parseInt(String(gt),10)).filter(gt=>!Number.isNaN(gt));rt(st),ue(!!Oe?.isSuperAdmin)}catch(le){console.warn("Kunne ikke hente allowedTerms for innlogget admin:",le),rt([]),ue(!1)}})()},[i?.uid]);const ve=U.useMemo(()=>{if($===!0||Ge===null)return x;const D=new Set(Ge);return x.filter(le=>D.has(le.value))},[x,Ge,$]),pe=U.useMemo(()=>{if($)return null;const D=Ge;return Array.isArray(D)&&D.length===1?Number(D[0]):null},[$,Ge]);U.useEffect(()=>{pe!=null&&(m==="all"&&_(pe),F==="all"&&B(pe))},[pe]),U.useEffect(()=>{(async()=>{try{const Ee=(await cn(Xt(ke,"terms"))).docs.map(Oe=>{const Fe=Oe.data(),st=typeof Fe?.value=="number"?Fe.value:void 0;if(typeof st!="number")return null;const gt=typeof Fe?.label=="string"?Fe.label:"",kt=typeof Fe?.order=="number"?Fe.order:void 0;return{value:st,label:gt,order:kt}}).filter(Boolean);Ee.sort((Oe,Fe)=>(Oe.order??Oe.value)-(Fe.order??Fe.value)),L(Ee)}catch(le){console.warn("Kunne ikke laste terminer fra Firestore for admin-brukerpanel:",le)}})()},[]);const[je,O]=U.useState(null),[Q,H]=U.useState(null),[J,Te]=U.useState(""),[_e,Re]=U.useState(""),[We,Je]=U.useState(""),[qt,Gt]=U.useState("teacher"),[Ot,Tn]=U.useState([]),[en,sn]=U.useState(null),[q,de]=U.useState(null),[be,Ne]=U.useState(""),[Ce,fe]=U.useState(""),[Me,Xe]=U.useState(""),[nt,on]=U.useState("student"),[ft,Cn]=U.useState(null),[mr,ji]=U.useState(null),[or,fi]=U.useState({}),Lr=(D,le)=>{if(D&&le!=null)return or[D]?.[le]},gn=async(D,le)=>{if(!(!D||le==null)&&or[D]?.[le]===void 0)try{const Ee=wt(ke,"users",D,"books",String(le)),Oe=await ds(Ee),Fe=Oe.exists()?{approved:!!Oe.data().approved,approvedAt:Oe.data().approvedAt??null}:{approved:!1,approvedAt:null};fi(st=>({...st,[D]:{...st[D]??{},[le]:Fe}}))}catch(Ee){console.error("Kunne ikke laste godkjenning for bok:",Ee)}},Kt=({uid:D,term:le})=>{const Ee=Lr(D,le);if(U.useEffect(()=>{Ee===void 0&&gn(D,le)},[D,le,Ee]),!Ee)return v.jsx("span",{style:{color:"#9ca3af"},children:""});if(Ee.approved){const Oe=Ee.approvedAt,Fe=Oe?new Date(Oe.toDate()).toLocaleString("nb-NO"):void 0;return v.jsx("span",{title:Fe,style:{color:"#16a34a",fontSize:"1rem"},children:""})}return v.jsx("span",{style:{color:"#9ca3af"},children:""})},[Ft,pt]=U.useState(null),[Cr,er]=U.useState(null),[lr,Pn]=U.useState(""),[In,bt]=U.useState(""),[tn,Bn]=U.useState(""),[Ue,mt]=U.useState("admin"),[G,ne]=U.useState([]);U.useEffect(()=>{(async()=>{try{o(!0);const Ee=(await cn(Xt(ke,"users"))).docs.map(Oe=>{const Fe=Oe.data();return{docId:Oe.id,email:Fe.email??"",displayName:Fe.name??Fe.displayName??Fe.email??"(uten navn)",role:Fe.role??"student",term:Fe.term??null,phone:Fe.phone??null,allowedTerms:Fe.allowedTerms??[]}});Ee.sort((Oe,Fe)=>Oe.displayName.localeCompare(Fe.displayName,"nb-NO",{sensitivity:"base"})),n(Ee)}catch(le){console.error("Feil ved lasting av brukere:",le),n([])}finally{o(!1)}})()},[]);const ce=U.useMemo(()=>{const D=u.trim().toLowerCase();if(!D)return e;const le=D.includes("@");return e.filter(Ee=>{const Oe=String(Ee.displayName??"").toLowerCase(),Fe=String(Ee.email??"").toLowerCase(),st=le?Fe:Fe.split("@")[0]??Fe,gt=String(Ee.phone??"").toLowerCase();return`${Oe} ${st} ${gt}`.includes(D)})},[e,u]);let ge=ce.filter(D=>D.role==="teacher"),we=ce.filter(D=>D.role==="student"),Be=ce.filter(D=>D.role==="admin");const Ie=(()=>{if($)return{teachers:ge,students:we,admins:Be};const D=Ge;if(!(Array.isArray(D)&&D.length>0))return{teachers:ge,students:we,admins:Be};const Ee=new Set(D),Oe=ge.filter(gt=>(gt.allowedTerms??[]).some(kt=>Ee.has(Number(kt)))),Fe=we.filter(gt=>gt.term!=null&&Ee.has(Number(gt.term)));return{teachers:Oe,students:Fe,admins:Be}})();if(ge=Ie.teachers,we=Ie.students,Be=Ie.admins,m!=="all"){const D=m;ge=ge.filter(le=>(le.allowedTerms??[]).includes(D))}if(F!=="all"){const D=F;we=we.filter(le=>le.term===D)}if(ze!=="all"){const D=ze;Be=Be.filter(le=>(le.allowedTerms??[]).includes(D))}ge.sort((D,le)=>{const Ee=st=>T==="name"?st.displayName??"":T==="email"?st.email??"":st.phone??"",Oe=String(Ee(D)??"").toLowerCase(),Fe=String(Ee(le)??"").toLowerCase();return Oe<Fe?w==="asc"?-1:1:Oe>Fe?w==="asc"?1:-1:0}),we.sort((D,le)=>{const Ee=st=>ye==="name"?st.displayName??"":ye==="email"?st.email??"":st.phone??"",Oe=String(Ee(D)??"").toLowerCase(),Fe=String(Ee(le)??"").toLowerCase();return Oe<Fe?re==="asc"?-1:1:Oe>Fe?re==="asc"?1:-1:0}),Be.sort((D,le)=>{const Ee=st=>N==="name"?st.displayName??"":N==="email"?st.email??"":st.phone??"",Oe=String(Ee(D)??"").toLowerCase(),Fe=String(Ee(le)??"").toLowerCase();return Oe<Fe?I==="asc"?-1:1:Oe>Fe?I==="asc"?1:-1:0}),ge=ge.slice(0,50),we=we.slice(0,50),Be=Be.slice(0,50);const Ct=D=>{S(le=>le===D?(P(Ee=>Ee==="asc"?"desc":"asc"),le):(P("asc"),D))},Ze=D=>{he(le=>le===D?(Ae(Ee=>Ee==="asc"?"desc":"asc"),le):(Ae("asc"),D))},ht=D=>{C(le=>le===D?(V(Ee=>Ee==="asc"?"desc":"asc"),le):(V("asc"),D))},Ye=()=>{O("create"),H(null),Te(""),Re(""),Je(""),Gt("teacher"),Tn(pe!=null?[pe]:[])},Nt=async()=>{const D=_e.trim(),le=J.trim(),Ee=We.trim();if(!D){He.error("E-post m fylles ut for  opprette lrer.");return}if(!Ot||Ot.length===0){He.error("Velg minst n termin lreren kan registrere for.");return}try{const Oe=Um(),st=(await vd(jm,D,Oe)).user.uid,gt={uid:st,email:D,displayName:le||D,name:le||D,role:"teacher",term:null,phone:Ee||null,allowedTerms:Ot};await za(wt(ke,"users",st),gt,{merge:!0}),n(kt=>{const Dt=[{docId:st,email:D,displayName:gt.displayName,role:"teacher",term:null,phone:Ee||null,allowedTerms:[...Ot]},...kt];return Dt.sort((Pt,Ut)=>Pt.displayName.localeCompare(Ut.displayName,"nb-NO",{sensitivity:"base"})),Dt}),O(null),H(null),He.success("Ny lrer opprettet",{description:`Epost: ${D}
Midlertidig passord: ${Oe}
Gi passordet videre og be om passordbytte etter frste innlogging.`,duration:15e3})}catch(Oe){if(console.error("Feil ved oppretting av lrer:",Oe),Oe?.code==="auth/email-already-in-use")try{const Fe=Wn(Xt(ke,"users"),mn("email","==",D)),st=await cn(Fe);if(st.empty){He.error("Eposten finnes allerede i Auth, men fant ingen bruker i Firestore. Kontakt administrator.");return}const gt=st.docs[0],kt=gt.data(),Dt=Array.isArray(kt?.allowedTerms)?kt.allowedTerms.map(dn=>typeof dn=="number"?dn:parseInt(String(dn),10)).filter(dn=>!Number.isNaN(dn)):[],Pt=new Set([...Dt,...Ot]),Ut=Array.from(Pt);await sr(wt(ke,"users",gt.id),{role:"teacher",allowedTerms:Ut,displayName:le||kt?.displayName||kt?.name||D,name:le||kt?.name||kt?.displayName||D,phone:Ee||kt?.phone||null}),n(dn=>{const Br=dn.findIndex(Nn=>Nn.docId===gt.id),It={docId:gt.id,email:D,displayName:le||(kt?.displayName??kt?.name??D),role:"teacher",term:null,phone:Ee||kt?.phone||null,allowedTerms:Ut};if(Br>=0){const Nn=dn.slice();return Nn[Br]={...Nn[Br],...It},Nn}const qn=[It,...dn];return qn.sort((Nn,Li)=>(Nn.displayName??"").localeCompare(Li.displayName??"","nb-NO",{sensitivity:"base"})),qn}),O(null),H(null),He.success("Eksisterende bruker oppdatert som lrer og tildelt valgte terminer.")}catch(Fe){console.error("Kunne ikke oppdatere eksisterende lrer:",Fe),He.error("Kunne ikke oppdatere eksisterende bruker med nye terminer.")}else He.error("Kunne ikke opprette lrer. Se console for mer info.")}},Le=D=>{O("edit"),H(D),Te(D.displayName),Re(D.email),Je(D.phone??""),Gt(D.role),Tn(D.allowedTerms??[])},dt=async()=>{if(!Q)return;const D=Q.docId;try{if(_e.trim()&&_e.trim()!==(Q.email||""))try{const Ee=Lm(void 0,"europe-west1");await Pm(Ee,"adminUpdateUserEmail")({uid:D,newEmail:_e.trim()})}catch(Ee){console.error("adminUpdateUserEmail failed",Ee),He.error("Kunne ikke oppdatere lrerens epost i Auth. Endringen er avbrutt. Kontroller at Cloud Function 'adminUpdateUserEmail' er deployet og at du har tilgang.");return}const le=wt(ke,"users",D);await sr(le,{displayName:J,email:_e,phone:We||null,role:qt,allowedTerms:Ot}),n(Ee=>Ee.map(Oe=>Oe.docId===D?{...Oe,displayName:J,email:_e,phone:We||null,role:qt,allowedTerms:[...Ot]}:Oe)),O(null),H(null)}catch(le){console.error("Feil ved lagring av lrer:",le),He.error("Kunne ikke lagre endringer for lrer.")}},xn=()=>{O(null),H(null)},ei=D=>{Tn(le=>le.includes(D)?le.filter(Ee=>Ee!==D):[...le,D])},ul=()=>{sn("create"),de(null),Ne(""),fe(""),Xe(""),on("student"),Cn(pe??null)},Wa=async()=>{const D=Ce.trim(),le=be.trim(),Ee=Me.trim();if(!le){He.error("Navn m fylles ut for  opprette student.");return}if(!D){He.error("E-post m fylles ut for  opprette student.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(D)){He.error("Ugyldig epost.");return}if(ft==null){He.error("Velg termin studenten tilhrer.");return}try{const Fe=Um(),gt=(await vd(jm,D,Fe)).user.uid,kt={uid:gt,email:D,displayName:le||D,name:le||D,role:"student",term:ft,phone:Ee||null,allowedTerms:[]};await za(wt(ke,"users",gt),kt,{merge:!0}),n(Dt=>{const Pt=[{docId:gt,email:D,displayName:kt.displayName,role:"student",term:ft,phone:Ee||null,allowedTerms:[]},...Dt];return Pt.sort((Ut,dn)=>Ut.displayName.localeCompare(dn.displayName,"nb-NO",{sensitivity:"base"})),Pt}),sn(null),de(null),He.success(`Ny student med epost ${D} er opprettet.`,{description:"Be studenten trykke Glemt passord p innloggingssiden for  lage sitt eget passord.",duration:12e3})}catch(Fe){if(console.error("Feil ved oppretting av student:",Fe),Fe?.code==="auth/invalid-email")He.error("Ugyldig epost.");else if(Fe?.code==="auth/email-already-in-use")try{const st=Wn(Xt(ke,"users"),mn("email","==",D)),gt=await cn(st);if(gt.empty){He.error("Eposten finnes allerede i Auth, men fant ingen bruker i Firestore. Kontakt administrator.");return}const kt=gt.docs[0],Dt=kt.data();await sr(wt(ke,"users",kt.id),{role:"student",term:ft,displayName:le||Dt?.displayName||Dt?.name||D,name:le||Dt?.name||Dt?.displayName||D,phone:Ee||Dt?.phone||null}),n(Ut=>{const dn=Ut.findIndex(qn=>qn.docId===kt.id),Br={docId:kt.id,email:D,displayName:le||(Dt?.displayName??Dt?.name??D),role:"student",term:ft,phone:Ee||Dt?.phone||null,allowedTerms:Array.isArray(Dt?.allowedTerms)?Dt.allowedTerms:[]};if(dn>=0){const qn=Ut.slice();return qn[dn]={...qn[dn],...Br},qn}const It=[Br,...Ut];return It.sort((qn,Nn)=>(qn.displayName??"").localeCompare(Nn.displayName??"","nb-NO",{sensitivity:"base"})),It}),sn(null),de(null);const Pt=Db(x,ft);He.success(`Eksisterende bruker oppdatert til termin ${Pt}.`)}catch(st){console.error("Kunne ikke oppdatere eksisterende student:",st),He.error("Kunne ikke oppdatere eksisterende bruker med valgt termin.")}else Fe?.code==="auth/missing-email"?He.error("Epost mangler."):He.error("Kunne ikke opprette student. Prv igjen senere.")}},Ja=D=>{sn("edit"),de(D),Ne(D.displayName),fe(D.email),Xe(D.phone??""),on(D.role),Cn(D.term??null)},Pr=async()=>{if(!q)return;const D=q.docId;try{if(Ce.trim()&&Ce.trim()!==(q.email||""))try{const Ee=Lm(void 0,"europe-west1");await Pm(Ee,"adminUpdateUserEmail")({uid:D,newEmail:Ce.trim()})}catch(Ee){console.error("adminUpdateUserEmail failed",Ee),He.error("Kunne ikke oppdatere studentens epost i Auth. Endringen er avbrutt. Kontroller at Cloud Function 'adminUpdateUserEmail' er deployet og at du har tilgang.");return}const le=wt(ke,"users",D);await sr(le,{displayName:be,email:Ce,phone:Me||null,role:nt,term:ft??null}),n(Ee=>Ee.map(Oe=>Oe.docId===D?{...Oe,displayName:be,email:Ce,phone:Me||null,role:nt,term:ft??null}:Oe)),sn(null),de(null)}catch(le){console.error("Feil ved lagring av student:",le),He.error("Kunne ikke lagre endringer for student.")}},ms=()=>{sn(null),de(null)},Ur=()=>{pt("create"),er(null),Pn(""),bt(""),Bn(""),mt("admin"),ne([])},pr=async()=>{const D=In.trim(),le=lr.trim(),Ee=tn.trim();if(!D){He.error("E-post m fylles ut for  opprette admin.");return}if(!Ee){He.error("Mobilnummer m fylles ut for  opprette admin.");return}if(!G||G.length===0){He.error("Velg minst n termin administratoren skal ha tilgang til.");return}try{const Oe=Um(),st=(await vd(jm,D,Oe)).user.uid,gt={uid:st,email:D,displayName:le||D,name:le||D,role:"admin",term:null,phone:Ee,allowedTerms:G};await za(wt(ke,"users",st),gt,{merge:!0}),n(kt=>{const Dt=[{docId:st,email:D,displayName:gt.displayName,role:"admin",term:null,phone:Ee,allowedTerms:[...G]},...kt];return Dt.sort((Pt,Ut)=>Pt.displayName.localeCompare(Ut.displayName,"nb-NO",{sensitivity:"base"})),Dt}),pt(null),er(null),He.success("Ny admin opprettet",{description:`Epost: ${D}
Midlertidig passord: ${Oe}
Gi passordet videre og be om passordbytte etter frste innlogging.`,duration:15e3})}catch(Oe){console.error("Feil ved oppretting av admin:",Oe),Oe?.code==="auth/email-already-in-use"?He.error("E-posten er allerede i bruk i Auth. Bruk en annen eller koble eksisterende bruker."):He.error("Kunne ikke opprette admin. Se console for mer info.")}},ur=D=>{pt("edit"),er(D),Pn(D.displayName),bt(D.email),Bn(D.phone??""),mt(D.role),ne(D.allowedTerms??[])},zr=async()=>{if(!Cr)return;const D=Cr.docId;try{if(In.trim()&&In.trim()!==(Cr.email||""))try{const Ee=Lm(void 0,"europe-west1");await Pm(Ee,"adminUpdateUserEmail")({uid:D,newEmail:In.trim()})}catch(Ee){console.error("adminUpdateUserEmail failed",Ee),He.error("Kunne ikke oppdatere adminepost i Auth. Endringen er avbrutt. Kontroller at Cloud Function 'adminUpdateUserEmail' er deployet og at du har tilgang.");return}const le=wt(ke,"users",D);await sr(le,{displayName:lr,email:In,phone:tn||null,role:Ue,allowedTerms:G}),n(Ee=>Ee.map(Oe=>Oe.docId===D?{...Oe,displayName:lr,email:In,phone:tn||null,role:Ue,allowedTerms:[...G]}:Oe)),pt(null),er(null)}catch(le){console.error("Feil ved lagring av admin:",le),He.error("Kunne ikke lagre endringer for admin.")}},yn=()=>{pt(null),er(null)},fa=D=>{ne(le=>le.includes(D)?le.filter(Ee=>Ee!==D):[...le,D])};return v.jsxs("div",{className:"mb-2",children:[v.jsxs("div",{className:"flex gap-0_5 mb-0_75",children:[v.jsx("button",{type:"button",onClick:()=>p("students"),className:`flex-1 py-0_35 px-0_6 rounded-full fs-0_85 cursor-pointer ${g==="students"?"bg-green-light border-green-light text-black":"bg-white border-gray text-gray-900"}`,children:"Studenter"}),v.jsx("button",{type:"button",onClick:()=>p("teachers"),className:`flex-1 py-0_35 px-0_6 fs-0_85 cursor-pointer ${g==="teachers"?"bg-green-light border-green-light text-black":"bg-white border-gray text-gray-900"}`,children:"Lrere"}),v.jsx("button",{type:"button",onClick:()=>p("admins"),className:`flex-1 py-0_35 px-0_6 rounded-full fs-0_85 cursor-pointer ${g==="admins"?"bg-green-light border-green-light text-black":"bg-white border-gray text-gray-900"}`,children:"Admin"})]}),v.jsx("input",{type:"text",placeholder:"Sk p navn, e-post eller mobil...",value:u,onChange:D=>h(D.target.value),className:"w-full py-0_4 px-0_6 mb-0_75 rounded-md border-gray fs-0_9"}),s?v.jsx(Qo,{}):v.jsxs(v.Fragment,{children:[g==="teachers"&&v.jsxs("div",{style:{marginBottom:"1.2rem"},children:[v.jsxs("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",gap:"0.5rem",marginBottom:"0.4rem"},children:[v.jsx("div",{style:{fontSize:"0.8rem"},children:v.jsx("label",{children:v.jsxs("select",{value:m==="all"?"":m,onChange:D=>{const le=D.target.value;_(le===""?"all":parseInt(le,10))},style:{padding:"0.2rem 0.4rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.8rem"},children:[v.jsx("option",{value:"",children:"Alle terminer"}),ve.map(D=>v.jsx("option",{value:D.value,children:D.label},D.value))]})})}),v.jsx("button",{type:"button",onClick:Ye,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.8rem",cursor:"pointer"},children:"Legg til"})]}),v.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>Ct("name"),children:["Navn"," ",T==="name"&&(w==="asc"?"":"")]}),v.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>Ct("email"),children:["E-post"," ",T==="email"&&(w==="asc"?"":"")]}),v.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>Ct("phone"),children:["Mobil"," ",T==="phone"&&(w==="asc"?"":"")]})]})}),v.jsx("tbody",{children:ge.length===0?v.jsx("tr",{children:v.jsx("td",{colSpan:3,style:{padding:"0.4rem",fontSize:"0.85rem",color:"#6b7280"},children:"Ingen lrere funnet."})}):ge.map(D=>v.jsxs("tr",{onClick:()=>Le(D),style:{cursor:"pointer"},children:[v.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:D.displayName}),v.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:D.email}),v.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:D.phone??""})]},D.docId))})]})]}),g==="students"&&v.jsxs("div",{style:{marginBottom:"1.2rem"},children:[v.jsxs("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",gap:"0.5rem",marginBottom:"0.4rem"},children:[v.jsx("div",{style:{fontSize:"0.8rem"},children:v.jsx("label",{children:v.jsxs("select",{value:F==="all"?"":F,onChange:D=>{const le=D.target.value;B(le===""?"all":parseInt(le,10))},style:{padding:"0.2rem 0.4rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.8rem"},children:[v.jsx("option",{value:"",children:"Alle terminer"}),ve.map(D=>v.jsx("option",{value:D.value,children:D.label},D.value))]})})}),v.jsx("button",{type:"button",onClick:ul,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.8rem",cursor:"pointer"},children:"Legg til"})]}),we.length===0?v.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280"},children:"Ingen studenter funnet."}):v.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>Ze("name"),children:["Navn"," ",ye==="name"&&(re==="asc"?"":"")]}),v.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem"},children:"Termin"}),v.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem"},children:"Godkjent?"})]})}),v.jsx("tbody",{children:we.map(D=>v.jsxs("tr",{onClick:()=>Ja(D),style:{cursor:"pointer"},children:[v.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:D.displayName}),v.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:D.term!=null&&D.term!==void 0?Db(x,D.term):"Ingen"}),v.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},onMouseEnter:le=>{gn(D.docId,D.term??null)},children:D.term==null?"":v.jsx(Kt,{uid:D.docId,term:D.term})})]},D.docId))})]})]}),g==="admins"&&v.jsxs("div",{style:{marginBottom:"1.2rem"},children:[v.jsxs("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",gap:"0.5rem",marginBottom:"0.4rem"},children:[v.jsx("div",{style:{fontSize:"0.8rem"},children:v.jsx("label",{children:v.jsxs("select",{value:ze==="all"?"":ze,onChange:D=>{const le=D.target.value;Ve(le===""?"all":parseInt(le,10))},style:{padding:"0.2rem 0.4rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.8rem"},children:[v.jsx("option",{value:"",children:"Alle terminer"}),x.map(D=>v.jsx("option",{value:D.value,children:D.label},D.value))]})})}),v.jsx("button",{type:"button",onClick:Ur,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.8rem",cursor:"pointer"},children:"Legg til"})]}),Be.length===0?v.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280"},children:"Ingen administratorer funnet."}):v.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>ht("name"),children:["Navn"," ",N==="name"&&(I==="asc"?"":"")]}),v.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>ht("email"),children:["E-post"," ",N==="email"&&(I==="asc"?"":"")]}),v.jsxs("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.25rem",cursor:"pointer"},onClick:()=>ht("phone"),children:["Mobil"," ",N==="phone"&&(I==="asc"?"":"")]})]})}),v.jsx("tbody",{children:Be.map(D=>v.jsxs("tr",{onClick:()=>ur(D),style:{cursor:"pointer"},children:[v.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:D.displayName}),v.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:D.email}),v.jsx("td",{style:{padding:"0.25rem",borderBottom:"1px solid #f3f4f6"},children:D.phone??""})]},D.docId))})]})]})]}),je&&v.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:v.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[v.jsx("h3",{style:{marginTop:0,marginBottom:"0.5rem"},children:je==="create"?"Ny lrer":"Rediger lrer"}),v.jsx("p",{style:{marginTop:0,marginBottom:"0.9rem",fontSize:"0.8rem",color:"#6b7280"},children:je==="create"?"Opprett ny lrer, velg hvilke terminer de kan registrere for og lagre.":"Endre navn, e-post, mobil, rolle og hvilke terminer lreren kan undervise p."}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.75rem"},children:[v.jsxs("label",{style:{fontSize:"0.8rem"},children:["Navn",v.jsx("input",{type:"text",value:J,onChange:D=>Te(D.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),v.jsxs("label",{style:{fontSize:"0.8rem"},children:["E-post",v.jsx("input",{type:"email",value:_e,onChange:D=>Re(D.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),v.jsxs("label",{style:{fontSize:"0.8rem"},children:["Mobil",v.jsx("input",{type:"tel",value:We,onChange:D=>Je(D.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),je==="edit"&&v.jsxs("label",{style:{fontSize:"0.8rem"},children:["Rolle",v.jsxs("select",{value:qt,onChange:D=>Gt(D.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"},children:[v.jsx("option",{value:"teacher",children:"Lrer"}),v.jsx("option",{value:"student",children:"Student"}),v.jsx("option",{value:"admin",children:"Admin"})]})]}),v.jsxs("div",{style:{fontSize:"0.8rem"},children:[v.jsx("div",{style:{marginBottom:"0.25rem"},children:"Termin(er) lreren kan registrere for:"}),v.jsx("div",{style:{maxHeight:"150px",overflowY:"auto",borderRadius:"0.5rem",border:"1px solid #e5e7eb",padding:"0.35rem 0.45rem"},children:(ve.length===0?[]:ve).map(D=>v.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.35rem",fontSize:"0.8rem",padding:"0.15rem 0"},children:[v.jsx("input",{type:"checkbox",checked:Ot.includes(D.value),onChange:()=>ei(D.value)}),v.jsx("span",{children:D.label})]},D.value))})]})]}),v.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"0.5rem"},children:[v.jsx("button",{type:"button",onClick:xn,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.85rem",cursor:"pointer"},children:"Avbryt"}),v.jsx("button",{className:"button button-green",type:"button",onClick:je==="create"?Nt:dt,children:je==="create"?"Opprett lrer":"Lagre"})]})]})}),en&&v.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:v.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[v.jsx("h3",{style:{marginTop:0,marginBottom:"0.5rem"},children:en==="create"?"Ny student":"Rediger student"}),v.jsx("p",{style:{marginTop:0,marginBottom:"0.9rem",fontSize:"0.8rem",color:"#6b7280"},children:en==="create"?"Opprett ny student og velg termin.":"Endre navn, e-post, mobil, rolle og termin."}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.75rem"},children:[v.jsxs("label",{style:{fontSize:"0.8rem"},children:["Navn",v.jsx("input",{type:"text",value:be,onChange:D=>Ne(D.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),v.jsxs("label",{style:{fontSize:"0.8rem"},children:["E-post",v.jsx("input",{type:"email",value:Ce,onChange:D=>fe(D.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),v.jsxs("label",{style:{fontSize:"0.8rem"},children:["Mobil",v.jsx("input",{type:"tel",value:Me,onChange:D=>Xe(D.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),en==="edit"&&v.jsxs("label",{style:{fontSize:"0.8rem"},children:["Rolle",v.jsxs("select",{value:nt,onChange:D=>on(D.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"},children:[v.jsx("option",{value:"student",children:"Student"}),v.jsx("option",{value:"teacher",children:"Lrer"}),v.jsx("option",{value:"admin",children:"Admin"})]})]}),v.jsxs("label",{style:{fontSize:"0.8rem"},children:["Termin",v.jsxs("select",{value:ft??"",onChange:D=>{const le=D.target.value;Cn(le===""?null:parseInt(le,10))},style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"},children:[v.jsx("option",{value:"",children:"Ingen"}),(ve.length===0?[]:ve).map(D=>v.jsx("option",{value:D.value,children:D.label},D.value))]})]})]}),v.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"0.5rem"},children:[v.jsx("button",{type:"button",onClick:ms,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.85rem",cursor:"pointer"},children:"Avbryt"}),v.jsx("button",{type:"button",onClick:en==="create"?Wa:Pr,style:{padding:"0.3rem 0.9rem",borderRadius:"999px",border:"none",backgroundColor:"#16a34a",color:"#ffffff",fontSize:"0.85rem",cursor:"pointer"},children:en==="create"?"Opprett student":"Lagre"})]})]})}),Ft&&v.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:v.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[v.jsx("h3",{style:{marginTop:0,marginBottom:"0.5rem"},children:Ft==="create"?"Ny admin":"Rediger admin"}),v.jsx("p",{style:{marginTop:0,marginBottom:"0.9rem",fontSize:"0.8rem",color:"#6b7280"},children:Ft==="create"?"Opprett ny admin.":"Endre navn, e-post, mobil og rolle."}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.75rem"},children:[v.jsxs("label",{style:{fontSize:"0.8rem"},children:["Navn",v.jsx("input",{type:"text",value:lr,onChange:D=>Pn(D.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),v.jsxs("label",{style:{fontSize:"0.8rem"},children:["E-post",v.jsx("input",{type:"email",value:In,onChange:D=>bt(D.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),v.jsxs("label",{style:{fontSize:"0.8rem"},children:["Mobil",v.jsx("input",{type:"tel",value:tn,onChange:D=>Bn(D.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),Ft==="edit"&&v.jsxs("label",{style:{fontSize:"0.8rem"},children:["Rolle",v.jsxs("select",{value:Ue,onChange:D=>mt(D.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"},children:[v.jsx("option",{value:"admin",children:"Admin"}),v.jsx("option",{value:"teacher",children:"Lrer"}),v.jsx("option",{value:"student",children:"Student"})]})]}),v.jsxs("div",{style:{fontSize:"0.8rem"},children:[v.jsx("div",{style:{marginBottom:"0.25rem"},children:"Termin(er) admin kan administrere:"}),v.jsx("div",{style:{maxHeight:"150px",overflowY:"auto",borderRadius:"0.5rem",border:"1px solid #e5e7eb",padding:"0.35rem 0.45rem"},children:ve.length===0?v.jsx("div",{style:{color:"#6b7280"},children:"Ingen terminer tilgjengelig"}):ve.map(D=>v.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.35rem",fontSize:"0.8rem",padding:"0.15rem 0"},children:[v.jsx("input",{type:"checkbox",checked:G.includes(D.value),onChange:()=>fa(D.value)}),v.jsx("span",{children:D.label})]},D.value))})]})]}),v.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"0.5rem"},children:[v.jsx("button",{type:"button",onClick:yn,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",fontSize:"0.85rem",cursor:"pointer"},children:"Avbryt"}),v.jsx("button",{type:"button",onClick:Ft==="create"?pr:zr,style:{padding:"0.3rem 0.9rem",borderRadius:"999px",border:"none",backgroundColor:"#16a34a",color:"#ffffff",fontSize:"0.85rem",cursor:"pointer"},children:Ft==="create"?"Opprett admin":"Lagre"})]})]})})]})},Hk=()=>{const[i,e]=U.useState([]),[n,s]=U.useState(""),[o,u]=U.useState([]),[h,g]=U.useState(!0),[p,m]=U.useState(""),[_,T]=U.useState({}),[S,w]=U.useState(null),[P,F]=U.useState(""),[B,ye]=U.useState(""),[he,re]=U.useState(null),[Ae,ze]=U.useState(0),[Ve,N]=U.useState({}),[C,I]=U.useState([]),[V,k]=U.useState(!1),[L,x]=U.useState(""),Ge=U.useRef(null),[rt,$]=U.useState(!1),[ue,ve]=U.useState([]),[pe,je]=U.useState(!1),[O,Q]=U.useState([]),{user:H}=ll(),[J,Te]=U.useState(null),[_e,Re]=U.useState(null);U.useEffect(()=>{(async()=>{try{if(!H?.uid)return;const ne=wt(ke,"users",H.uid),ce=await ds(ne),ge=ce.exists()?ce.data():null,Be=(Array.isArray(ge?.allowedTerms)?ge.allowedTerms:[]).map(Ie=>typeof Ie=="number"?Ie:parseInt(String(Ie),10)).filter(Ie=>!Number.isNaN(Ie));Te(Be),Re(!!ge?.isSuperAdmin)}catch(ne){console.warn("Kunne ikke hente allowedTerms for innlogget admin (TermSetup):",ne),Te([]),Re(!1)}})()},[H?.uid]);const We=U.useMemo(()=>_e?!1:Array.isArray(J)&&J.length>0,[_e,J]),Je=U.useMemo(()=>We?new Set(J):null,[We,J]);U.useEffect(()=>{_e||We&&(!J||J.length!==1||n===""&&s(J[0]))},[_e,We,J,n]),U.useEffect(()=>{We&&n!==""&&Je&&!Je.has(n)&&s("")},[We,Je,n]),U.useEffect(()=>{(async()=>{try{g(!0);const[ne,ce,ge,we]=await Promise.all([cn(Xt(ke,"requirements")),cn(Xt(ke,"times")),cn(Xt(ke,"termLabels")).catch(()=>null),cn(Xt(ke,"terms")).catch(()=>null)]),Be=ne.docs.map(Ct=>{const Ze=Ct.data();return{id:Ct.id,term:Ze.term,category:Ze.category,requiredCount:Ze.requiredCount??0,order:typeof Ze?.order=="number"?Ze.order:void 0}}),Ie=ce.docs.map(Ct=>{const Ze=Ct.data();return{id:Ct.id,name:Ze.name,category:Ze.category,term:Ze.term}});if(e(Be),u(Ie),we){const Ct=we.docs.map(Ze=>{const ht=Ze.data(),Ye=typeof ht?.value=="number"?ht.value:void 0,Nt=typeof ht?.label=="string"?ht.label:"",Le=typeof ht?.order=="number"?ht.order:void 0;return typeof Ye!="number"?null:{docId:Ze.id,value:Ye,label:Nt,order:Le}}).filter(Boolean);Ct.sort((Ze,ht)=>{const Ye=Ze.order??Ze.value,Nt=ht.order??ht.value;return Ye-Nt}),I(Ct)}if(ge){const Ct={};ge.docs.forEach(Ze=>{const ht=Ze.data(),Ye=parseInt(Ze.id,10);!Number.isNaN(Ye)&&typeof ht?.label=="string"&&ht.label.trim()&&(Ct[Ye]=ht.label.trim())}),N(Ct)}}catch(ne){console.error("Feil ved lasting av termin-oppsett:",ne)}finally{g(!1)}})()},[]);const qt=i.filter(G=>G.term===n).sort((G,ne)=>{const ce=G.order??Number.MAX_SAFE_INTEGER,ge=ne.order??Number.MAX_SAFE_INTEGER;return ce!==ge?ce-ge:G.category.localeCompare(ne.category,"nb-NO",{sensitivity:"base"})}),Gt=U.useMemo(()=>{const G=C.slice().sort((ne,ce)=>(ne.order??ne.value)-(ce.order??ce.value)).map(ne=>({value:ne.value,label:ne.label||`Termin ${ne.value}`}));return Object.keys(Ve).length>0?G.map(ne=>({...ne,label:Ve[ne.value]??ne.label})):G},[C,Ve]),Ot=G=>as(Gt,G??null),Tn=()=>{if(n==="")return;const G=Ot(n);x(G),k(!0),setTimeout(()=>Ge.current?.focus(),0)},en=()=>{k(!1),x("")},sn=async()=>{if(n==="")return;const G=Ot(n),ne=L.trim();if(!ne||ne===G){k(!1);return}try{const ce=C.find(ge=>ge.value===Number(n));if(ce)await sr(wt(ke,"terms",ce.docId),{label:ne,updatedAt:Id()}),I(ge=>ge.map(we=>we.docId===ce.docId?{...we,label:ne}:we));else{const ge=String(n);await za(wt(ke,"termLabels",ge),{label:ne,updatedAt:Id(),value:Number(n)},{merge:!0}),N(we=>({...we,[Number(n)]:ne}))}k(!1)}catch(ce){console.error("Feil ved endring av modulnavn:",ce),alert("Kunne ikke endre navn p modulen.")}},q=async()=>{try{const G=C.map(Ze=>Ze.value),ne=C.map(Ze=>Ze.order??Ze.value),ce=G.length>0?Math.max(...G):0,ge=ne.length>0?Math.max(...ne):0,we=ce+1,Be=ge+1,Ct={docId:(await Cd(Xt(ke,"terms"),{value:we,label:"",order:Be,createdAt:Id()})).id,value:we,label:"",order:Be};I(Ze=>[...Ze,Ct]),s(we),x(""),k(!0),setTimeout(()=>Ge.current?.focus(),0)}catch(G){console.error("Kunne ikke opprette ny oppmtebok:",G),alert("Kunne ikke opprette ny oppmtebok.")}},de=()=>{if(C.length===0)return;const G=C.slice().sort((ne,ce)=>(ne.order??ne.value)-(ce.order??ce.value));ve(G),$(!0)},be=(G,ne)=>{ve(ce=>{const ge=ce.slice(),we=G+ne;if(we<0||we>=ge.length)return ce;const[Be]=ge.splice(G,1);return ge.splice(we,0,Be),ge})},Ne=async()=>{try{const G=ru(ke);ue.forEach((ne,ce)=>{G.update(wt(ke,"terms",ne.docId),{order:ce+1})}),await G.commit(),I(ue.map((ne,ce)=>({...ne,order:ce+1}))),$(!1)}catch(G){console.error("Kunne ikke lagre sortering av terminer:",G),alert("Kunne ikke lagre sortering av terminer.")}},Ce=()=>{if(n==="")return;const G=i.filter(ne=>ne.term===n).slice().sort((ne,ce)=>{const ge=ne.order??Number.MAX_SAFE_INTEGER,we=ce.order??Number.MAX_SAFE_INTEGER;return ge!==we?ge-we:ne.category.localeCompare(ce.category,"nb-NO",{sensitivity:"base"})});Q(G),je(!0)},fe=(G,ne)=>{Q(ce=>{const ge=ce.slice(),we=G+ne;if(we<0||we>=ge.length)return ce;const[Be]=ge.splice(G,1);return ge.splice(we,0,Be),ge})},Me=async()=>{try{const G=ru(ke);O.forEach((ne,ce)=>{G.update(wt(ke,"requirements",ne.id),{order:ce+1})}),await G.commit(),e(ne=>{const ce={};return O.forEach((ge,we)=>ce[ge.id]=we+1),ne.map(ge=>ce[ge.id]?{...ge,order:ce[ge.id]}:ge)}),je(!1)}catch(G){console.error("Kunne ikke lagre sortering av grupper:",G),alert("Kunne ikke lagre sortering av grupper.")}},[Xe,nt]=U.useState({open:!1,termValue:null,termLabel:"",reqCount:0,timeCount:0}),on=()=>{if(n==="")return;const G=n,ne=Ot(G),ce=i.filter(we=>we.term===G).length,ge=o.filter(we=>we.term===G).length;nt({open:!0,termValue:G,termLabel:ne,reqCount:ce,timeCount:ge})},ft=()=>{nt({open:!1,termValue:null,termLabel:"",reqCount:0,timeCount:0})},Cn=async(G,ne)=>{try{const ce=C.find(Ye=>Ye.value===G);let ge=ce?wt(ke,"terms",ce.docId):null;const we=Wn(Xt(ke,"requirements"),mn("term","==",G)),Be=Wn(Xt(ke,"times"),mn("term","==",G)),[Ie,Ct]=await Promise.all([cn(we),cn(Be)]);if(!ge)try{const Ye=Wn(Xt(ke,"terms"),mn("value","==",G));ge=(await cn(Ye)).docs[0]?.ref??null}catch{}const Ze=[...Ie.docs.map(Ye=>Ye.ref),...Ct.docs.map(Ye=>Ye.ref)];ge&&Ze.push(ge);const ht=450;for(let Ye=0;Ye<Ze.length;Ye+=ht){const Nt=ru(ke);Ze.slice(Ye,Ye+ht).forEach(Le=>Nt.delete(Le)),await Nt.commit()}e(Ye=>Ye.filter(Nt=>Nt.term!==G)),u(Ye=>Ye.filter(Nt=>Nt.term!==G)),I(Ye=>Ye.filter(Nt=>Nt.value!==G)),s(""),k(!1),m(""),re(null),w(null),F(""),He.success("Termin slettet",{description:`${ne} er fjernet med alle grupper og timer.`})}catch(ce){console.error("Kunne ikke slette termin med relaterte data:",ce),He.error("Kunne ikke slette termin. Prv igjen senere.")}finally{ft()}},mr=async()=>{!Xe.open||Xe.termValue==null||await Cn(Xe.termValue,Xe.termLabel)},ji=async G=>{const ne=P.trim();if(!ne||ne===G.name){w(null),F("");return}try{await sr(wt(ke,"times",G.id),{name:ne}),u(ce=>ce.map(ge=>ge.id===G.id?{...ge,name:ne}:ge)),w(null),F("")}catch(ce){console.error("Feil ved endring av timenavn:",ce),alert("Kunne ikke oppdatere navn p timen.")}},or=o.filter(G=>G.term===n),fi=G=>{re(G.id),ye(G.category),ze(G.requiredCount??0)},Lr=()=>{re(null)},gn=async G=>{if(!he)return;const ne=G.category,ce=(B||"").trim()||ne,ge=o.filter(Ie=>Ie.term===G.term&&Ie.category===ne).length;let we=Ae;if((Number.isNaN(we)||we<0)&&(we=0),ge>0&&we>ge&&(we=ge),qt.find(Ie=>Ie.id!==G.id&&Ie.category.toLowerCase()===ce.toLowerCase())){alert("Det finnes allerede en gruppe med dette navnet i valgt termin.");return}try{const Ie=ru(ke),Ct=wt(ke,"requirements",G.id);Ie.update(Ct,{category:ce,requiredCount:we});const Ze=Wn(Xt(ke,"times"),mn("term","==",G.term),mn("category","==",ne));(await cn(Ze)).forEach(Le=>{Ie.update(Le.ref,{category:ce})});const Ye=Wn(Xt(ke,"sessions"),mn("term","==",G.term),mn("category","==",ne));(await cn(Ye)).forEach(Le=>{Ie.update(Le.ref,{category:ce})}),await Ie.commit(),e(Le=>Le.map(dt=>dt.id===G.id?{...dt,category:ce,requiredCount:we}:dt)),u(Le=>Le.map(dt=>dt.term===G.term&&dt.category===ne?{...dt,category:ce}:dt)),re(null)}catch(Ie){console.error("Feil ved lagring av gruppe:",Ie),alert("Kunne ikke lagre endringene for gruppen.")}},Kt=async()=>{const G=p.trim();if(!G)return;if(qt.some(ce=>ce.category.toLowerCase()===G.toLowerCase())){alert("Denne gruppen finnes allerede for valgt termin.");return}try{const ce=i.filter(Ie=>Ie.term===n),we=(ce.length?Math.max(...ce.map(Ie=>typeof Ie.order=="number"?Ie.order:0)):0)+1,Be=await Cd(Xt(ke,"requirements"),{term:n,category:G,requiredCount:0,order:we});e(Ie=>[...Ie,{id:Be.id,term:n,category:G,requiredCount:0,order:we}]),m("")}catch(ce){console.error("Feil ved oppretting av kategori:",ce),alert("Kunne ikke opprette kategori.")}},[Ft,pt]=U.useState({open:!1,req:null,timeCount:0}),Cr=async(G,ne)=>{const{id:ce,term:ge,category:we}=G;try{const Be=Wn(Xt(ke,"times"),mn("term","==",ge),mn("category","==",we)),Ie=await cn(Be),Ct=[wt(ke,"requirements",ce),...Ie.docs.map(ht=>ht.ref)],Ze=450;for(let ht=0;ht<Ct.length;ht+=Ze){const Ye=ru(ke);Ct.slice(ht,ht+Ze).forEach(Nt=>Ye.delete(Nt)),await Ye.commit()}e(ht=>ht.filter(Ye=>Ye.id!==ce)),u(ht=>ht.filter(Ye=>!(Ye.term===ge&&Ye.category===we)))}catch(Be){console.error("Feil ved sletting av gruppe og tilhrende timer:",Be),He.error("Kunne ikke slette gruppen. Prv igjen senere.")}finally{lr()}},er=G=>{const ne=o.filter(ce=>ce.term===G.term&&ce.category===G.category).length;if(ne===0){Cr(G);return}pt({open:!0,req:G,timeCount:ne})},lr=()=>{pt({open:!1,req:null,timeCount:0})},Pn=async()=>{Ft.req&&await Cr(Ft.req,Ft.timeCount)},In=async G=>{const ne=G.id,ce=(_[ne]??"").trim();if(ce)try{const ge=await Cd(Xt(ke,"times"),{term:n,category:G.category,name:ce});u(we=>[...we,{id:ge.id,term:n,category:G.category,name:ce}]),T(we=>({...we,[ne]:""}))}catch(ge){console.error("Feil ved oppretting av time:",ge),alert("Kunne ikke opprette time.")}},[bt,tn]=U.useState({open:!1,time:null}),Bn=G=>{tn({open:!0,time:G})},Ue=()=>{tn({open:!1,time:null})},mt=async()=>{if(!bt.time)return;const G=bt.time;try{await u1(wt(ke,"times",G.id)),u(ne=>ne.filter(ce=>ce.id!==G.id))}catch(ne){console.error("Feil ved sletting av time:",ne),He.error("Kunne ikke slette time. Prv igjen senere.")}finally{Ue()}};return h?v.jsx(Qo,{}):v.jsxs(v.Fragment,{children:[v.jsxs("section",{style:{marginBottom:"2rem"},children:[v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.75rem"},children:[v.jsxs("div",{className:"admin-books-controls",style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[v.jsxs("div",{className:`admin-books-rest${_e?" admin-books-rest--split":""}`,style:{display:"flex",gap:"0.5rem",flex:1,minWidth:0},children:[V&&_e?v.jsx("input",{className:"admin-books-select",ref:Ge,type:"text",value:L,onChange:G=>x(G.target.value),onKeyDown:G=>{G.key==="Enter"?(G.preventDefault(),sn()):G.key==="Escape"&&(G.preventDefault(),en())},placeholder:"Navn p modul",style:{flex:1,minWidth:0,padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db"}}):v.jsxs("select",{className:"admin-books-select",value:n,onChange:G=>{const ne=G.target.value;if(ne==="__new__"){if(We)return;q();return}s(ne===""?"":parseInt(ne,10))},style:{flex:1,minWidth:0,padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",width:_e?void 0:"100%"},children:[v.jsx("option",{value:"",disabled:!0,children:"Velg termin"}),(We?Gt.filter(G=>Je?.has(G.value)):Gt).map(G=>v.jsx("option",{value:G.value,children:G.label},G.value)),!We&&v.jsx("option",{value:"__new__",children:"+ Ny oppmtebok"})]}),_e&&v.jsx("button",{className:"button-green admin-books-action",type:"button",disabled:n===""&&!V,onClick:()=>{V?sn():Tn()},style:{width:"160px",padding:"0.45rem 0.9rem",cursor:n===""&&!V?"not-allowed":"pointer",whiteSpace:"nowrap"},children:V?"Legg til":"Endre navn"})]}),_e&&v.jsx("button",{className:"admin-books-filter",type:"button",title:"Sorter oppmtebker",disabled:C.length===0,onClick:de,style:{padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",background:"#ffffff",fontSize:"0.9rem",cursor:C.length===0?"not-allowed":"pointer"},children:""})]}),v.jsx("div",{className:"admin-books-controls",style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:(()=>{const G=n===""?null:Number(n),ne=G!=null?C.find(Ie=>Ie.value===G):void 0,ce=!!ne?.label&&ne.label.trim().length>0,ge=G!=null?Ve[G]:void 0,we=!!ge&&ge.trim().length>0,Be=G!=null&&(ce||we);return v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"admin-books-rest admin-books-rest--split",style:{display:"flex",gap:"0.5rem",flex:1,minWidth:0},children:[v.jsx("input",{className:"admin-books-select",type:"text",placeholder:"Ny gruppe...",value:p,onChange:Ie=>m(Ie.target.value),onKeyDown:Ie=>{Ie.key==="Enter"&&Be&&(Ie.preventDefault(),Kt())},disabled:!Be,style:{flex:1,minWidth:0,padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",opacity:Be?1:.6,cursor:Be?"text":"not-allowed"}}),v.jsx("button",{className:"button-green admin-books-action",type:"button",onClick:Kt,disabled:!Be,style:{width:"160px",padding:"0.45rem 0.9rem",cursor:Be?"pointer":"not-allowed",whiteSpace:"nowrap",opacity:Be?1:.7},children:"Legg til"})]}),v.jsx("button",{className:"admin-books-filter",type:"button",title:"Sorter grupper",disabled:!Be||qt.length===0,onClick:Ce,style:{padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",background:"#ffffff",fontSize:"0.9rem",cursor:!Be||qt.length===0?"not-allowed":"pointer",opacity:!Be||qt.length===0?.7:1},children:""})]})})()})]}),(()=>{const G=n===""?null:Number(n),ne=G!=null?C.find(Ie=>Ie.value===G):void 0,ce=!!ne?.label&&ne.label.trim().length>0,ge=G!=null?Ve[G]:void 0,we=!!ge&&ge.trim().length>0;return G!=null&&(ce||we)?qt.length===0?v.jsxs("p",{style:{fontSize:"0.85rem",color:"#6b7280"},children:["Ingen grupper definert enn for ",Ot(n),"."]}):v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:qt.map(Ie=>{const Ct=Ie.id,Ze=or.filter(Le=>Le.category===Ie.category).sort((Le,dt)=>{const xn=Lb(Le.name),ei=Lb(dt.name);return xn!==ei?xn-ei:Le.name.localeCompare(dt.name,"nb-NO",{sensitivity:"base"})}),ht=_[Ct]??"",Ye=or.filter(Le=>Le.category===Ie.category).length,Nt=he===Ie.id;return v.jsxs("div",{style:{borderRadius:"0.75rem",border:"1px solid #e5e7eb",padding:"0.75rem 0.75rem",backgroundColor:"#f9fafb"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem",gap:"0.5rem",flexWrap:"wrap"},children:[v.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:Nt?v.jsxs(v.Fragment,{children:[v.jsx("input",{type:"text",value:B,onChange:Le=>ye(Le.target.value),onKeyDown:Le=>{Le.key==="Enter"?gn(Ie):Le.key==="Escape"&&Lr()},autoFocus:!0,style:{minWidth:"12rem",padding:"0.2rem 0.35rem",borderRadius:"0.4rem",border:"1px solid #d1d5db",fontSize:"0.9rem"}}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[v.jsx("input",{type:"number",min:0,max:Ye,value:Ae,onChange:Le=>{const dt=parseInt(Le.target.value,10);ze(Number.isNaN(dt)?0:dt)},onKeyDown:Le=>{Le.key==="Enter"?gn(Ie):Le.key==="Escape"&&Lr()},style:{width:"4rem",padding:"0.2rem 0.35rem",borderRadius:"0.4rem",border:"1px solid #d1d5db",fontSize:"0.9rem",textAlign:"center"}}),v.jsxs("span",{style:{fontSize:"0.8rem",color:"#6b7280"},children:["/ ",Ye]})]})]}):v.jsxs("div",{style:{fontWeight:600,fontSize:"0.95rem"},children:[Ie.category," (",Ie.requiredCount,"/",Ye,")"]})}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx("button",{className:"button-green admin-books-action",type:"button",onClick:()=>Nt?void gn(Ie):fi(Ie),style:{padding:"0.45rem 0.9rem",cursor:"pointer",whiteSpace:"nowrap"},children:Nt?"Lagre":"Endre navn"}),v.jsx("button",{type:"button",onClick:()=>er({id:Ie.id,term:Ie.term,category:Ie.category}),style:{padding:"0.25rem 0.6rem",borderRadius:"999px",border:"none",backgroundColor:"#fee2e2",color:"#991b1b",fontSize:"0.75rem",cursor:"pointer"},children:"Slett gruppe"})]})]}),Ze.length>0?v.jsx("ul",{style:{listStyle:"none",paddingLeft:0,margin:"0 0 0.5rem 0",fontSize:"0.85rem"},children:Ze.map(Le=>{const dt=S===Le.id;return v.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.15rem 0",borderBottom:"1px dashed #e5e7eb",gap:"0.5rem"},children:[v.jsx("div",{style:{flex:1},children:dt?v.jsx("input",{type:"text",value:P,onChange:xn=>F(xn.target.value),onKeyDown:xn=>{xn.key==="Enter"?ji(Le):xn.key==="Escape"&&(w(null),F(""))},autoFocus:!0,style:{width:"100%",padding:"0.2rem 0.35rem",borderRadius:"0.4rem",border:"1px solid #d1d5db",fontSize:"0.85rem"}}):v.jsx("span",{children:Le.name})}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem"},children:[dt?v.jsx("button",{type:"button",onClick:()=>void ji(Le),style:{padding:"0.15rem 0.45rem",borderRadius:"999px",border:"none",backgroundColor:"#e5e7eb",color:"#111827",fontSize:"0.75rem",cursor:"pointer"},children:"Lagre"}):v.jsx("button",{type:"button",onClick:()=>{w(Le.id),F(Le.name)},style:{padding:"0.15rem 0.45rem",borderRadius:"999px",border:"none",backgroundColor:"#e5e7eb",color:"#111827",fontSize:"0.75rem",cursor:"pointer"},children:"Endre"}),v.jsx("button",{type:"button",onClick:()=>Bn(Le),style:{padding:"0.15rem 0.45rem",borderRadius:"999px",border:"none",backgroundColor:"#fee2e2",color:"#b91c1c",fontSize:"0.75rem",cursor:"pointer"},children:"Slett"})]})]},Le.id)})}):v.jsx("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.8rem",color:"#9ca3af"},children:"Ingen timer lagt til i denne gruppen."}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.25rem"},children:[v.jsx("input",{type:"text",placeholder:"Ny time...",value:ht,onChange:Le=>T(dt=>({...dt,[Ct]:Le.target.value})),onKeyDown:Le=>{Le.key==="Enter"&&(Le.preventDefault(),In(Ie))},style:{flex:1,padding:"0.3rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem"}}),v.jsx("button",{type:"button",onClick:()=>In(Ie),style:{padding:"0.35rem 0.8rem",borderRadius:"999px",border:"none",backgroundColor:"#4b5563",color:"#ffffff",fontSize:"0.8rem",cursor:"pointer"},children:"Legg til time"})]})]},Ie.id)})}):null})(),n!==""&&_e&&v.jsx("div",{style:{marginTop:"1rem",display:"flex",justifyContent:"center"},children:v.jsx("button",{className:"btn-hover-danger",type:"button",onClick:on,style:{backgroundColor:"#ef4444",borderColor:"#ef4444",color:"white",fontSize:"0.9rem"},children:"Slett termin"})}),Xe.open&&Xe.termValue!=null&&v.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1e3},children:v.jsxs("div",{className:"page-card",style:{textAlign:"center",maxWidth:520,width:"100%",background:"#ffffff"},children:[v.jsx("h3",{style:{marginTop:0},children:"Slett termin?"}),v.jsxs("p",{style:{whiteSpace:"pre-wrap",lineHeight:1.4},children:[`Du er i ferd med  slette oppmteboka for ${Xe.termLabel}.

`,`Dette vil slette selve terminen, alle grupper (${Xe.reqCount} stk) og alle timer (${Xe.timeCount} stk) som tilhrer denne terminen.
`]}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",marginTop:"0.75rem"},children:[v.jsx("button",{className:"btn-hover-danger",type:"button",onClick:ft,style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"none",background:"#ef4444",color:"black",cursor:"pointer"},children:"Avbryt"}),v.jsx("button",{className:"btn-hover-lg",type:"button",onClick:()=>void mr(),style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#ffffff",cursor:"pointer"},children:"Slett termin"})]})]})}),Ft.open&&Ft.req&&v.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1e3},children:v.jsxs("div",{className:"page-card",style:{maxWidth:520,width:"100%",background:"#ffffff"},children:[v.jsx("h3",{style:{marginTop:0},children:"Slett gruppe?"}),v.jsxs("p",{style:{whiteSpace:"pre-wrap",lineHeight:1.4},children:[`Du er i ferd med  slette gruppen ${Ft.req.category}.

`,`Dette vil ogs slette alle tilhrende timer i denne gruppen for valgt termin (${Ft.timeCount}).
`,"Handlingen kan ikke angres."]}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",marginTop:"0.75rem"},children:[v.jsx("button",{type:"button",onClick:lr,style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#ffffff",cursor:"pointer"},children:"Avbryt"}),v.jsx("button",{type:"button",onClick:()=>void Pn(),style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"none",background:"#ef4444",color:"#ffffff",cursor:"pointer"},children:"Slett gruppe"})]})]})}),bt.open&&bt.time&&v.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1e3},children:v.jsxs("div",{className:"page-card",style:{maxWidth:520,width:"100%",background:"#ffffff"},children:[v.jsx("h3",{style:{marginTop:0},children:"Slett time?"}),v.jsxs("p",{style:{whiteSpace:"pre-wrap",lineHeight:1.4},children:[`Du er i ferd med  slette timen ${bt.time.name} i gruppen ${bt.time.category} for ${Ot(bt.time.term)}.

`,`Historiske sesjoner beholdes, men timen forsvinner fra admin-oppsettet.
`,"Handlingen kan ikke angres."]}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",marginTop:"0.75rem"},children:[v.jsx("button",{type:"button",onClick:Ue,style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#ffffff",cursor:"pointer"},children:"Avbryt"}),v.jsx("button",{type:"button",onClick:()=>void mt(),style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"none",background:"#ef4444",color:"#ffffff",cursor:"pointer"},children:"Slett time"})]})]})})]}),rt&&v.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:v.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[v.jsx("h3",{style:{marginTop:0},children:"Sorter oppmtebker"}),v.jsx("ul",{style:{listStyle:"none",padding:0,margin:"0 0 0.75rem"},children:ue.map((G,ne)=>v.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"0.4rem 0.6rem",marginBottom:"0.4rem"},children:[v.jsx("span",{style:{fontSize:"0.9rem"},children:G.label||`Termin ${G.value}`}),v.jsxs("span",{style:{display:"flex",gap:"0.25rem"},children:[v.jsx("button",{type:"button",onClick:()=>be(ne,-1),disabled:ne===0,style:{padding:"0.2rem 0.4rem",borderRadius:"0.35rem",border:"1px solid #d1d5db",background:"#fff"},children:""}),v.jsx("button",{type:"button",onClick:()=>be(ne,1),disabled:ne===ue.length-1,style:{padding:"0.2rem 0.4rem",borderRadius:"0.35rem",border:"1px solid #d1d5db",background:"#fff"},children:""})]})]},G.docId))}),v.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem"},children:[v.jsx("button",{type:"button",onClick:()=>$(!1),style:{padding:"0.35rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#fff"},children:"Avbryt"}),v.jsx("button",{type:"button",onClick:()=>void Ne(),style:{padding:"0.35rem 0.7rem",borderRadius:"999px",border:"none",background:"#16a34a",color:"#fff"},children:"Lagre rekkeflge"})]})]})}),pe&&v.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:v.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[v.jsx("h3",{style:{marginTop:0},children:"Sorter grupper"}),v.jsx("ul",{style:{listStyle:"none",padding:0,margin:"0 0 0.75rem"},children:O.map((G,ne)=>v.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"0.4rem 0.6rem",marginBottom:"0.4rem"},children:[v.jsx("span",{style:{fontSize:"0.9rem"},children:G.category}),v.jsxs("span",{style:{display:"flex",gap:"0.25rem"},children:[v.jsx("button",{type:"button",onClick:()=>fe(ne,-1),disabled:ne===0,style:{padding:"0.2rem 0.4rem",borderRadius:"0.35rem",border:"1px solid #d1d5db",background:"#fff"},children:""}),v.jsx("button",{type:"button",onClick:()=>fe(ne,1),disabled:ne===O.length-1,style:{padding:"0.2rem 0.4rem",borderRadius:"0.35rem",border:"1px solid #d1d5db",background:"#fff"},children:""})]})]},G.id))}),v.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem"},children:[v.jsx("button",{type:"button",onClick:()=>je(!1),style:{padding:"0.35rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#fff"},children:"Avbryt"}),v.jsx("button",{type:"button",onClick:()=>void Me(),style:{padding:"0.35rem 0.7rem",borderRadius:"999px",border:"none",background:"#16a34a",color:"#fff"},children:"Lagre rekkeflge"})]})]})})]})},Gk=()=>{const{user:i,loading:e,logout:n}=ll(),[s,o]=U.useState("setup"),[u,h]=U.useState(!1);return e?v.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:v.jsx(Qo,{})}):!i||i.role!=="admin"?v.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"1.5rem"},children:v.jsxs("div",{className:"page-card page-card--admin",children:[v.jsx("h2",{children:"Ingen tilgang"}),v.jsx("p",{children:"Du m vre logget inn som administrator for  se denne siden."})]})}):v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"flex-start",justifyContent:"center",padding:"1.5rem 1rem"},children:v.jsxs("div",{className:"page-card page-card--admin",children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[v.jsx("div",{style:{fontWeight:600},children:i.displayName||i.email}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[v.jsx("button",{type:"button",onClick:()=>h(!0),style:{padding:"0.35rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#ffffff",cursor:"pointer",fontSize:"0.85rem"},children:"Min profil"}),v.jsx("button",{type:"button",onClick:n,style:{padding:"0.35rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#ffffff",cursor:"pointer",fontSize:"0.85rem"},children:"Logg ut"})]})]}),v.jsxs("header",{style:{marginBottom:"1rem",borderBottom:"1px solid #e5e7eb",paddingBottom:"0.75rem"},children:[v.jsx("h2",{style:{margin:0},children:"Adminpanel"}),v.jsx("p",{style:{margin:"0.25rem 0 0.75rem",fontSize:"0.85rem",color:"#6b7280"},children:"Oppsett av oppmtebker og administrasjon av brukere."}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[v.jsx("button",{type:"button",onClick:()=>o("setup"),style:{flex:1,padding:"0.35rem 0.5rem",borderRadius:"999px",border:"1px solid #e5e7eb",background:s==="setup"?"#6CE1AB":"#ffffff",color:s==="setup"?"black":"#111827",fontSize:"0.85rem",cursor:"pointer"},children:"Oppmtebker"}),v.jsx("button",{type:"button",onClick:()=>o("users"),style:{flex:1,padding:"0.35rem 0.5rem",borderRadius:"999px",border:"1px solid #e5e7eb",background:s==="users"?"#6CE1AB":"#ffffff",color:s==="users"?"black":"#111827",fontSize:"0.85rem",cursor:"pointer"},children:"Brukere"})]})]}),s==="setup"&&v.jsx(Hk,{}),s==="users"&&v.jsx(Fk,{})]})}),u&&v.jsx(yg,{uid:i.uid,role:i.role,email:i.email,displayName:i.displayName,onClose:()=>h(!1)})]})};function Pb(){return v.jsx("footer",{children:v.jsxs("div",{className:"container",children:[v.jsxs("div",{className:"row row1",children:[v.jsx("h2",{children:"Vi lytter til dere!"}),v.jsx("p",{children:"Traskende rundt i sykehuskorridorene med en oppmtebok du alltid er redd for  miste eller sle kaffekoppen p, begynner man  fundere p om det gr an  gjre livet litt enklere S hvorfor ikke lage en digital oppmtebok du aldri glemmer hjemme, som er superrask for lrerne og sparer fakultetet for over 3000(!) papirutgaver i ret?"}),v.jsx("br",{}),v.jsx("p",{children:"Miljvennlig, effektivt og bedre for studentene. Velkommen til Oppmteboka  skapt mellom uttrykning p vakt eller halvsovende p sofaen i de sene nattestimer. Send oss en melding om du har noe tips til hva vi br gjre!"})]}),v.jsxs("div",{className:"row row2",children:[v.jsx("img",{src:"/logo.svg",alt:"Oppmteboka logo"}),v.jsx("p",{className:"normalFont",children:v.jsx("a",{className:"link",href:"mailto:hei@sablateknisk.no?subject=Tilbakelding",children:"Gi tilbakemelding"})}),v.jsx("p",{children:"hei@sablateknisk.no"}),v.jsx("br",{}),v.jsxs("p",{className:"smallText",children:["Nettisden er utviklet av",v.jsx("br",{})," Vetle Mrland og ge Frivoll"]})]})]})})}function Kk({user:i}){const{logout:e}=ll(),[n,s]=U.useState(!1);return v.jsxs("header",{children:[v.jsxs("div",{className:"header-container",children:[v.jsx("div",{className:"header-img",children:v.jsx("img",{src:"/logo.svg",alt:"Logo",className:""})}),v.jsxs("div",{className:"header-buttons",children:[v.jsx("button",{className:"button-small button-border button-colorless boldFont",type:"button",onClick:()=>s(!0),children:"Min profil"}),v.jsx("button",{className:"button-small button-border button-black boldFont",type:"button",onClick:e,children:"Logg ut"})]})]}),v.jsx("div",{children:n&&v.jsx(yg,{uid:i.uid,role:i.role,email:i.email,displayName:i.displayName,onClose:()=>s(!1)})})]})}function Qk(){const{user:i,login:e}=ll(),[n,s]=U.useState(""),[o,u]=U.useState(""),[h,g]=U.useState(null),[p,m]=U.useState(null),[_,T]=U.useState(!1),[S,w]=U.useState(!1),P=U.useRef(null),F=U.useRef(null);U.useEffect(()=>{if(!h)return;const he=setTimeout(()=>g(null),3e3);return()=>clearTimeout(he)},[h]),U.useEffect(()=>{if(!p)return;const he=setTimeout(()=>m(null),3e3);return()=>clearTimeout(he)},[p]),U.useEffect(()=>{if(i)try{window.scrollTo({top:0,behavior:"smooth"})}catch{window.scrollTo(0,0)}},[i]);const B=async he=>{if(he.preventDefault(),g(null),!n||!o){g("Fyll inn bde e-post og passord.");return}T(!0);try{await e(n.trim(),o)}catch(re){console.error(re);let Ae="Kunne ikke logge inn.";re?.code==="auth/user-not-found"?Ae="Bruker finnes ikke.":re?.code==="auth/wrong-password"?Ae="Feil passord.":re?.code==="auth/email-already-in-use"?Ae="E-postadressen er allerede registrert.":re?.code==="auth/weak-password"&&(Ae="Passordet er for svakt (min. 6 tegn)."),g(Ae)}finally{T(!1)}},ye=async()=>{const he=n.trim();if(!he){g("Skriv inn epostadressen din frst.");return}w(!0);try{await JR(Ws,he),m("Sendte epost for tilbakestilling av passord.")}catch(re){console.error(re);let Ae="Kunne ikke sende epost for tilbakestilling.";re?.code==="auth/invalid-email"?Ae="Ugyldig epostadresse.":re?.code==="auth/user-not-found"&&(Ae="Fant ingen bruker for denne epostadressen."),g(Ae)}finally{w(!1)}};return i?v.jsxs(v.Fragment,{children:[v.jsx(Kk,{user:i}),v.jsx("div",{id:"main",children:i.role==="admin"?v.jsx(Gk,{user:i}):i.role==="teacher"?v.jsx(Tk,{user:i}):v.jsx(ck,{user:i})}),v.jsx(Pb,{})]}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{id:"main",children:[v.jsx("div",{id:"loginMan",children:v.jsx("img",{src:"/login-man.svg",alt:"Logo",className:""})}),v.jsxs("div",{className:"card round-corners-full login-card",children:[v.jsx("h1",{children:"Velkommen tilbake"}),v.jsxs("form",{onSubmit:B,children:[v.jsxs("div",{className:"input-group",children:[v.jsx("label",{className:"input-label",children:"Mobil / epost"}),v.jsx("input",{className:"input-field round-corners-half",type:"email",value:n,onChange:he=>s(he.target.value),ref:P,onKeyDown:he=>{he.key==="Enter"&&(he.preventDefault(),F.current?.focus())},enterKeyHint:"next"})]}),v.jsxs("div",{className:"input-group",children:[v.jsx("label",{className:"input-label",children:"Passord"}),v.jsx("input",{className:"input-field round-corners-half",type:"password",value:o,onChange:he=>u(he.target.value),ref:F,enterKeyHint:"go"})]}),v.jsx("button",{type:"submit",disabled:_,className:"button-primary button-black round-corners-half",children:_?"Logger inn...":"Logg inn"}),v.jsx("button",{type:"button",onClick:ye,disabled:S,className:"button-colorless boldFont",children:S?"Sender epost...":"Glemt passord"}),v.jsxs("p",{className:"errorTxt",children:[v.jsx("br",{}),h]}),v.jsxs("p",{className:"successTxt",children:[v.jsx("br",{}),p]})]})]})]}),v.jsx(Pb,{})]})}fw.createRoot(document.getElementById("root")).render(v.jsxs(me.StrictMode,{children:[v.jsx(Qk,{}),v.jsx(tk,{richColors:!0,position:"top-center"})]}));export{Yk as c,pp as g};
