function Lw(a,e){for(var n=0;n<e.length;n++){const o=e[n];if(typeof o!="string"&&!Array.isArray(o)){for(const h in o)if(h!=="default"&&!(h in a)){const m=Object.getOwnPropertyDescriptor(o,h);m&&Object.defineProperty(a,h,m.get?m:{enumerable:!0,get:()=>o[h]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))o(h);new MutationObserver(h=>{for(const m of h)if(m.type==="childList")for(const _ of m.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&o(_)}).observe(document,{childList:!0,subtree:!0});function n(h){const m={};return h.integrity&&(m.integrity=h.integrity),h.referrerPolicy&&(m.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?m.credentials="include":h.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function o(h){if(h.ep)return;h.ep=!0;const m=n(h);fetch(h.href,m)}})();var Rh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function D0(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var M1={exports:{}},Hc={};var O2;function Pw(){if(O2)return Hc;O2=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(o,h,m){var _=null;if(m!==void 0&&(_=""+m),h.key!==void 0&&(_=""+h.key),"key"in h){m={};for(var v in h)v!=="key"&&(m[v]=h[v])}else m=h;return h=m.ref,{$$typeof:a,type:o,key:_,ref:h!==void 0?h:null,props:m}}return Hc.Fragment=e,Hc.jsx=n,Hc.jsxs=n,Hc}var D2;function Bw(){return D2||(D2=1,M1.exports=Pw()),M1.exports}var Y=Bw(),L1={exports:{}},ft={};var M2;function kw(){if(M2)return ft;M2=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),_=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),V=Symbol.iterator;function j(X){return X===null||typeof X!="object"?null:(X=V&&X[V]||X["@@iterator"],typeof X=="function"?X:null)}var ee={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},re=Object.assign,le={};function ke(X,ge,Pe){this.props=X,this.context=ge,this.refs=le,this.updater=Pe||ee}ke.prototype.isReactComponent={},ke.prototype.setState=function(X,ge){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,ge,"setState")},ke.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function Re(){}Re.prototype=ke.prototype;function ye(X,ge,Pe){this.props=X,this.context=ge,this.refs=le,this.updater=Pe||ee}var pe=ye.prototype=new Re;pe.constructor=ye,re(pe,ke.prototype),pe.isPureReactComponent=!0;var we=Array.isArray;function Te(){}var B={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function k(X,ge,Pe){var Be=Pe.ref;return{$$typeof:a,type:X,key:ge,ref:Be!==void 0?Be:null,props:Pe}}function Z(X,ge){return k(X.type,ge,X.props)}function q(X){return typeof X=="object"&&X!==null&&X.$$typeof===a}function W(X){var ge={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(Pe){return ge[Pe]})}var G=/\/+/g;function Je(X,ge){return typeof X=="object"&&X!==null&&X.key!=null?W(""+X.key):ge.toString(36)}function ce(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(Te,Te):(X.status="pending",X.then(function(ge){X.status==="pending"&&(X.status="fulfilled",X.value=ge)},function(ge){X.status==="pending"&&(X.status="rejected",X.reason=ge)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function he(X,ge,Pe,Be,$e){var De=typeof X;(De==="undefined"||De==="boolean")&&(X=null);var At=!1;if(X===null)At=!0;else switch(De){case"bigint":case"string":case"number":At=!0;break;case"object":switch(X.$$typeof){case a:case e:At=!0;break;case b:return At=X._init,he(At(X._payload),ge,Pe,Be,$e)}}if(At)return $e=$e(X),At=Be===""?"."+Je(X,0):Be,we($e)?(Pe="",At!=null&&(Pe=At.replace(G,"$&/")+"/"),he($e,ge,Pe,"",function(dr){return dr})):$e!=null&&(q($e)&&($e=Z($e,Pe+($e.key==null||X&&X.key===$e.key?"":(""+$e.key).replace(G,"$&/")+"/")+At)),ge.push($e)),1;At=0;var wt=Be===""?".":Be+":";if(we(X))for(var Jt=0;Jt<X.length;Jt++)Be=X[Jt],De=wt+Je(Be,Jt),At+=he(Be,ge,Pe,De,$e);else if(Jt=j(X),typeof Jt=="function")for(X=Jt.call(X),Jt=0;!(Be=X.next()).done;)Be=Be.value,De=wt+Je(Be,Jt++),At+=he(Be,ge,Pe,De,$e);else if(De==="object"){if(typeof X.then=="function")return he(ce(X),ge,Pe,Be,$e);throw ge=String(X),Error("Objects are not valid as a React child (found: "+(ge==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":ge)+"). If you meant to render a collection of children, use an array instead.")}return At}function _e(X,ge,Pe){if(X==null)return X;var Be=[],$e=0;return he(X,Be,"","",function(De){return ge.call(Pe,De,$e++)}),Be}function je(X){if(X._status===-1){var ge=X._result;ge=ge(),ge.then(function(Pe){(X._status===0||X._status===-1)&&(X._status=1,X._result=Pe)},function(Pe){(X._status===0||X._status===-1)&&(X._status=2,X._result=Pe)}),X._status===-1&&(X._status=0,X._result=ge)}if(X._status===1)return X._result.default;throw X._result}var it=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ge=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(ge))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)},lt={map:_e,forEach:function(X,ge,Pe){_e(X,function(){ge.apply(this,arguments)},Pe)},count:function(X){var ge=0;return _e(X,function(){ge++}),ge},toArray:function(X){return _e(X,function(ge){return ge})||[]},only:function(X){if(!q(X))throw Error("React.Children.only expected to receive a single React element child.");return X}};return ft.Activity=O,ft.Children=lt,ft.Component=ke,ft.Fragment=n,ft.Profiler=h,ft.PureComponent=ye,ft.StrictMode=o,ft.Suspense=T,ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,ft.__COMPILER_RUNTIME={__proto__:null,c:function(X){return B.H.useMemoCache(X)}},ft.cache=function(X){return function(){return X.apply(null,arguments)}},ft.cacheSignal=function(){return null},ft.cloneElement=function(X,ge,Pe){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var Be=re({},X.props),$e=X.key;if(ge!=null)for(De in ge.key!==void 0&&($e=""+ge.key),ge)!F.call(ge,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&ge.ref===void 0||(Be[De]=ge[De]);var De=arguments.length-2;if(De===1)Be.children=Pe;else if(1<De){for(var At=Array(De),wt=0;wt<De;wt++)At[wt]=arguments[wt+2];Be.children=At}return k(X.type,$e,Be)},ft.createContext=function(X){return X={$$typeof:_,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:m,_context:X},X},ft.createElement=function(X,ge,Pe){var Be,$e={},De=null;if(ge!=null)for(Be in ge.key!==void 0&&(De=""+ge.key),ge)F.call(ge,Be)&&Be!=="key"&&Be!=="__self"&&Be!=="__source"&&($e[Be]=ge[Be]);var At=arguments.length-2;if(At===1)$e.children=Pe;else if(1<At){for(var wt=Array(At),Jt=0;Jt<At;Jt++)wt[Jt]=arguments[Jt+2];$e.children=wt}if(X&&X.defaultProps)for(Be in At=X.defaultProps,At)$e[Be]===void 0&&($e[Be]=At[Be]);return k(X,De,$e)},ft.createRef=function(){return{current:null}},ft.forwardRef=function(X){return{$$typeof:v,render:X}},ft.isValidElement=q,ft.lazy=function(X){return{$$typeof:b,_payload:{_status:-1,_result:X},_init:je}},ft.memo=function(X,ge){return{$$typeof:A,type:X,compare:ge===void 0?null:ge}},ft.startTransition=function(X){var ge=B.T,Pe={};B.T=Pe;try{var Be=X(),$e=B.S;$e!==null&&$e(Pe,Be),typeof Be=="object"&&Be!==null&&typeof Be.then=="function"&&Be.then(Te,it)}catch(De){it(De)}finally{ge!==null&&Pe.types!==null&&(ge.types=Pe.types),B.T=ge}},ft.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},ft.use=function(X){return B.H.use(X)},ft.useActionState=function(X,ge,Pe){return B.H.useActionState(X,ge,Pe)},ft.useCallback=function(X,ge){return B.H.useCallback(X,ge)},ft.useContext=function(X){return B.H.useContext(X)},ft.useDebugValue=function(){},ft.useDeferredValue=function(X,ge){return B.H.useDeferredValue(X,ge)},ft.useEffect=function(X,ge){return B.H.useEffect(X,ge)},ft.useEffectEvent=function(X){return B.H.useEffectEvent(X)},ft.useId=function(){return B.H.useId()},ft.useImperativeHandle=function(X,ge,Pe){return B.H.useImperativeHandle(X,ge,Pe)},ft.useInsertionEffect=function(X,ge){return B.H.useInsertionEffect(X,ge)},ft.useLayoutEffect=function(X,ge){return B.H.useLayoutEffect(X,ge)},ft.useMemo=function(X,ge){return B.H.useMemo(X,ge)},ft.useOptimistic=function(X,ge){return B.H.useOptimistic(X,ge)},ft.useReducer=function(X,ge,Pe){return B.H.useReducer(X,ge,Pe)},ft.useRef=function(X){return B.H.useRef(X)},ft.useState=function(X){return B.H.useState(X)},ft.useSyncExternalStore=function(X,ge,Pe){return B.H.useSyncExternalStore(X,ge,Pe)},ft.useTransition=function(){return B.H.useTransition()},ft.version="19.2.0",ft}var L2;function M0(){return L2||(L2=1,L1.exports=kw()),L1.exports}var yt=M0();const ti=D0(yt);var P1={exports:{}},jc={},B1={exports:{}},k1={};var P2;function Vw(){return P2||(P2=1,(function(a){function e(he,_e){var je=he.length;he.push(_e);e:for(;0<je;){var it=je-1>>>1,lt=he[it];if(0<h(lt,_e))he[it]=_e,he[je]=lt,je=it;else break e}}function n(he){return he.length===0?null:he[0]}function o(he){if(he.length===0)return null;var _e=he[0],je=he.pop();if(je!==_e){he[0]=je;e:for(var it=0,lt=he.length,X=lt>>>1;it<X;){var ge=2*(it+1)-1,Pe=he[ge],Be=ge+1,$e=he[Be];if(0>h(Pe,je))Be<lt&&0>h($e,Pe)?(he[it]=$e,he[Be]=je,it=Be):(he[it]=Pe,he[ge]=je,it=ge);else if(Be<lt&&0>h($e,je))he[it]=$e,he[Be]=je,it=Be;else break e}}return _e}function h(he,_e){var je=he.sortIndex-_e.sortIndex;return je!==0?je:he.id-_e.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;a.unstable_now=function(){return m.now()}}else{var _=Date,v=_.now();a.unstable_now=function(){return _.now()-v}}var T=[],A=[],b=1,O=null,V=3,j=!1,ee=!1,re=!1,le=!1,ke=typeof setTimeout=="function"?setTimeout:null,Re=typeof clearTimeout=="function"?clearTimeout:null,ye=typeof setImmediate<"u"?setImmediate:null;function pe(he){for(var _e=n(A);_e!==null;){if(_e.callback===null)o(A);else if(_e.startTime<=he)o(A),_e.sortIndex=_e.expirationTime,e(T,_e);else break;_e=n(A)}}function we(he){if(re=!1,pe(he),!ee)if(n(T)!==null)ee=!0,Te||(Te=!0,W());else{var _e=n(A);_e!==null&&ce(we,_e.startTime-he)}}var Te=!1,B=-1,F=5,k=-1;function Z(){return le?!0:!(a.unstable_now()-k<F)}function q(){if(le=!1,Te){var he=a.unstable_now();k=he;var _e=!0;try{e:{ee=!1,re&&(re=!1,Re(B),B=-1),j=!0;var je=V;try{t:{for(pe(he),O=n(T);O!==null&&!(O.expirationTime>he&&Z());){var it=O.callback;if(typeof it=="function"){O.callback=null,V=O.priorityLevel;var lt=it(O.expirationTime<=he);if(he=a.unstable_now(),typeof lt=="function"){O.callback=lt,pe(he),_e=!0;break t}O===n(T)&&o(T),pe(he)}else o(T);O=n(T)}if(O!==null)_e=!0;else{var X=n(A);X!==null&&ce(we,X.startTime-he),_e=!1}}break e}finally{O=null,V=je,j=!1}_e=void 0}}finally{_e?W():Te=!1}}}var W;if(typeof ye=="function")W=function(){ye(q)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Je=G.port2;G.port1.onmessage=q,W=function(){Je.postMessage(null)}}else W=function(){ke(q,0)};function ce(he,_e){B=ke(function(){he(a.unstable_now())},_e)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(he){he.callback=null},a.unstable_forceFrameRate=function(he){0>he||125<he?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<he?Math.floor(1e3/he):5},a.unstable_getCurrentPriorityLevel=function(){return V},a.unstable_next=function(he){switch(V){case 1:case 2:case 3:var _e=3;break;default:_e=V}var je=V;V=_e;try{return he()}finally{V=je}},a.unstable_requestPaint=function(){le=!0},a.unstable_runWithPriority=function(he,_e){switch(he){case 1:case 2:case 3:case 4:case 5:break;default:he=3}var je=V;V=he;try{return _e()}finally{V=je}},a.unstable_scheduleCallback=function(he,_e,je){var it=a.unstable_now();switch(typeof je=="object"&&je!==null?(je=je.delay,je=typeof je=="number"&&0<je?it+je:it):je=it,he){case 1:var lt=-1;break;case 2:lt=250;break;case 5:lt=1073741823;break;case 4:lt=1e4;break;default:lt=5e3}return lt=je+lt,he={id:b++,callback:_e,priorityLevel:he,startTime:je,expirationTime:lt,sortIndex:-1},je>it?(he.sortIndex=je,e(A,he),n(T)===null&&he===n(A)&&(re?(Re(B),B=-1):re=!0,ce(we,je-it))):(he.sortIndex=lt,e(T,he),ee||j||(ee=!0,Te||(Te=!0,W()))),he},a.unstable_shouldYield=Z,a.unstable_wrapCallback=function(he){var _e=V;return function(){var je=V;V=_e;try{return he.apply(this,arguments)}finally{V=je}}}})(k1)),k1}var B2;function Uw(){return B2||(B2=1,B1.exports=Vw()),B1.exports}var V1={exports:{}},zi={};var k2;function Fw(){if(k2)return zi;k2=1;var a=M0();function e(T){var A="https://react.dev/errors/"+T;if(1<arguments.length){A+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)A+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+T+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},h=Symbol.for("react.portal");function m(T,A,b){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:O==null?null:""+O,children:T,containerInfo:A,implementation:b}}var _=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function v(T,A){if(T==="font")return"";if(typeof A=="string")return A==="use-credentials"?A:""}return zi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,zi.createPortal=function(T,A){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)throw Error(e(299));return m(T,A,null,b)},zi.flushSync=function(T){var A=_.T,b=o.p;try{if(_.T=null,o.p=2,T)return T()}finally{_.T=A,o.p=b,o.d.f()}},zi.preconnect=function(T,A){typeof T=="string"&&(A?(A=A.crossOrigin,A=typeof A=="string"?A==="use-credentials"?A:"":void 0):A=null,o.d.C(T,A))},zi.prefetchDNS=function(T){typeof T=="string"&&o.d.D(T)},zi.preinit=function(T,A){if(typeof T=="string"&&A&&typeof A.as=="string"){var b=A.as,O=v(b,A.crossOrigin),V=typeof A.integrity=="string"?A.integrity:void 0,j=typeof A.fetchPriority=="string"?A.fetchPriority:void 0;b==="style"?o.d.S(T,typeof A.precedence=="string"?A.precedence:void 0,{crossOrigin:O,integrity:V,fetchPriority:j}):b==="script"&&o.d.X(T,{crossOrigin:O,integrity:V,fetchPriority:j,nonce:typeof A.nonce=="string"?A.nonce:void 0})}},zi.preinitModule=function(T,A){if(typeof T=="string")if(typeof A=="object"&&A!==null){if(A.as==null||A.as==="script"){var b=v(A.as,A.crossOrigin);o.d.M(T,{crossOrigin:b,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0})}}else A==null&&o.d.M(T)},zi.preload=function(T,A){if(typeof T=="string"&&typeof A=="object"&&A!==null&&typeof A.as=="string"){var b=A.as,O=v(b,A.crossOrigin);o.d.L(T,b,{crossOrigin:O,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0,type:typeof A.type=="string"?A.type:void 0,fetchPriority:typeof A.fetchPriority=="string"?A.fetchPriority:void 0,referrerPolicy:typeof A.referrerPolicy=="string"?A.referrerPolicy:void 0,imageSrcSet:typeof A.imageSrcSet=="string"?A.imageSrcSet:void 0,imageSizes:typeof A.imageSizes=="string"?A.imageSizes:void 0,media:typeof A.media=="string"?A.media:void 0})}},zi.preloadModule=function(T,A){if(typeof T=="string")if(A){var b=v(A.as,A.crossOrigin);o.d.m(T,{as:typeof A.as=="string"&&A.as!=="script"?A.as:void 0,crossOrigin:b,integrity:typeof A.integrity=="string"?A.integrity:void 0})}else o.d.m(T)},zi.requestFormReset=function(T){o.d.r(T)},zi.unstable_batchedUpdates=function(T,A){return T(A)},zi.useFormState=function(T,A,b){return _.H.useFormState(T,A,b)},zi.useFormStatus=function(){return _.H.useHostTransitionStatus()},zi.version="19.2.0",zi}var V2;function zw(){if(V2)return V1.exports;V2=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),V1.exports=Fw(),V1.exports}var U2;function Hw(){if(U2)return jc;U2=1;var a=Uw(),e=M0(),n=zw();function o(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)r+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function m(t){var r=t,c=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(c=r.return),t=r.return;while(t)}return r.tag===3?c:null}function _(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function v(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function T(t){if(m(t)!==t)throw Error(o(188))}function A(t){var r=t.alternate;if(!r){if(r=m(t),r===null)throw Error(o(188));return r!==t?null:t}for(var c=t,d=r;;){var E=c.return;if(E===null)break;var w=E.alternate;if(w===null){if(d=E.return,d!==null){c=d;continue}break}if(E.child===w.child){for(w=E.child;w;){if(w===c)return T(E),t;if(w===d)return T(E),r;w=w.sibling}throw Error(o(188))}if(c.return!==d.return)c=E,d=w;else{for(var R=!1,P=E.child;P;){if(P===c){R=!0,c=E,d=w;break}if(P===d){R=!0,d=E,c=w;break}P=P.sibling}if(!R){for(P=w.child;P;){if(P===c){R=!0,c=w,d=E;break}if(P===d){R=!0,d=w,c=E;break}P=P.sibling}if(!R)throw Error(o(189))}}if(c.alternate!==d)throw Error(o(190))}if(c.tag!==3)throw Error(o(188));return c.stateNode.current===c?t:r}function b(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=b(t),r!==null)return r;t=t.sibling}return null}var O=Object.assign,V=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),ee=Symbol.for("react.portal"),re=Symbol.for("react.fragment"),le=Symbol.for("react.strict_mode"),ke=Symbol.for("react.profiler"),Re=Symbol.for("react.consumer"),ye=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),we=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function W(t){return t===null||typeof t!="object"?null:(t=q&&t[q]||t["@@iterator"],typeof t=="function"?t:null)}var G=Symbol.for("react.client.reference");function Je(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===G?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case re:return"Fragment";case ke:return"Profiler";case le:return"StrictMode";case we:return"Suspense";case Te:return"SuspenseList";case k:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case ee:return"Portal";case ye:return t.displayName||"Context";case Re:return(t._context.displayName||"Context")+".Consumer";case pe:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case B:return r=t.displayName||null,r!==null?r:Je(t.type)||"Memo";case F:r=t._payload,t=t._init;try{return Je(t(r))}catch{}}return null}var ce=Array.isArray,he=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,je={pending:!1,data:null,method:null,action:null},it=[],lt=-1;function X(t){return{current:t}}function ge(t){0>lt||(t.current=it[lt],it[lt]=null,lt--)}function Pe(t,r){lt++,it[lt]=t.current,t.current=r}var Be=X(null),$e=X(null),De=X(null),At=X(null);function wt(t,r){switch(Pe(De,r),Pe($e,t),Pe(Be,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?e2(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=e2(r),t=t2(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ge(Be),Pe(Be,t)}function Jt(){ge(Be),ge($e),ge(De)}function dr(t){t.memoizedState!==null&&Pe(At,t);var r=Be.current,c=t2(r,t.type);r!==c&&(Pe($e,t),Pe(Be,c))}function jn(t){$e.current===t&&(ge(Be),ge($e)),At.current===t&&(ge(At),Vc._currentValue=je)}var ts,Tt;function mi(t){if(ts===void 0)try{throw Error()}catch(c){var r=c.stack.trim().match(/\n( *(at )?)/);ts=r&&r[1]||"",Tt=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ts+t+Tt}var Li=!1;function gr(t,r){if(!t||Li)return"";Li=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(Ee){var ue=Ee}Reflect.construct(t,[],Ce)}else{try{Ce.call()}catch(Ee){ue=Ee}t.call(Ce.prototype)}}else{try{throw Error()}catch(Ee){ue=Ee}(Ce=t())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(Ee){if(Ee&&ue&&typeof Ee.stack=="string")return[Ee.stack,ue.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=d.DetermineComponentFrameRoot(),R=w[0],P=w[1];if(R&&P){var K=R.split(`
`),oe=P.split(`
`);for(E=d=0;d<K.length&&!K[d].includes("DetermineComponentFrameRoot");)d++;for(;E<oe.length&&!oe[E].includes("DetermineComponentFrameRoot");)E++;if(d===K.length||E===oe.length)for(d=K.length-1,E=oe.length-1;1<=d&&0<=E&&K[d]!==oe[E];)E--;for(;1<=d&&0<=E;d--,E--)if(K[d]!==oe[E]){if(d!==1||E!==1)do if(d--,E--,0>E||K[d]!==oe[E]){var xe=`
`+K[d].replace(" at new "," at ");return t.displayName&&xe.includes("<anonymous>")&&(xe=xe.replace("<anonymous>",t.displayName)),xe}while(1<=d&&0<=E);break}}}finally{Li=!1,Error.prepareStackTrace=c}return(c=t?t.displayName||t.name:"")?mi(c):""}function Nn(t,r){switch(t.tag){case 26:case 27:case 5:return mi(t.type);case 16:return mi("Lazy");case 13:return t.child!==r&&r!==null?mi("Suspense Fallback"):mi("Suspense");case 19:return mi("SuspenseList");case 0:case 15:return gr(t.type,!1);case 11:return gr(t.type.render,!1);case 1:return gr(t.type,!0);case 31:return mi("Activity");default:return""}}function qt(t){try{var r="",c=null;do r+=Nn(t,c),c=t,t=t.return;while(t);return r}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Ze=Object.prototype.hasOwnProperty,wn=a.unstable_scheduleCallback,Fe=a.unstable_cancelCallback,Ea=a.unstable_shouldYield,xo=a.unstable_requestPaint,yn=a.unstable_now,ns=a.unstable_getCurrentPriorityLevel,pi=a.unstable_ImmediatePriority,_a=a.unstable_UserBlockingPriority,yi=a.unstable_NormalPriority,ri=a.unstable_LowPriority,Ao=a.unstable_IdlePriority,Ds=a.log,al=a.unstable_setDisableYieldValue,Xt=null,Ne=null;function Yt(t){if(typeof Ds=="function"&&al(t),Ne&&typeof Ne.setStrictMode=="function")try{Ne.setStrictMode(Xt,t)}catch{}}var rt=Math.clz32?Math.clz32:xa,hn=Math.log,Mr=Math.LN2;function xa(t){return t>>>=0,t===0?32:31-(hn(t)/Mr|0)|0}var mr=256,xt=262144,an=4194304;function pr(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function yr(t,r,c){var d=t.pendingLanes;if(d===0)return 0;var E=0,w=t.suspendedLanes,R=t.pingedLanes;t=t.warmLanes;var P=d&134217727;return P!==0?(d=P&~w,d!==0?E=pr(d):(R&=P,R!==0?E=pr(R):c||(c=P&~t,c!==0&&(E=pr(c))))):(P=d&~w,P!==0?E=pr(P):R!==0?E=pr(R):c||(c=d&~t,c!==0&&(E=pr(c)))),E===0?0:r!==0&&r!==E&&(r&w)===0&&(w=E&-E,c=r&-r,w>=c||w===32&&(c&4194048)!==0)?r:E}function On(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function wo(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gn(){var t=an;return an<<=1,(an&62914560)===0&&(an=4194304),t}function Ei(t){for(var r=[],c=0;31>c;c++)r.push(t);return r}function Lr(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function $i(t,r,c,d,E,w){var R=t.pendingLanes;t.pendingLanes=c,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=c,t.entangledLanes&=c,t.errorRecoveryDisabledLanes&=c,t.shellSuspendCounter=0;var P=t.entanglements,K=t.expirationTimes,oe=t.hiddenUpdates;for(c=R&~c;0<c;){var xe=31-rt(c),Ce=1<<xe;P[xe]=0,K[xe]=-1;var ue=oe[xe];if(ue!==null)for(oe[xe]=null,xe=0;xe<ue.length;xe++){var Ee=ue[xe];Ee!==null&&(Ee.lane&=-536870913)}c&=~Ce}d!==0&&Ms(t,d,0),w!==0&&E===0&&t.tag!==0&&(t.suspendedLanes|=w&~(R&~r))}function Ms(t,r,c){t.pendingLanes|=r,t.suspendedLanes&=~r;var d=31-rt(r);t.entangledLanes|=r,t.entanglements[d]=t.entanglements[d]|1073741824|c&261930}function Er(t,r){var c=t.entangledLanes|=r;for(t=t.entanglements;c;){var d=31-rt(c),E=1<<d;E&r|t[d]&r&&(t[d]|=r),c&=~E}}function Ls(t,r){var c=r&-r;return c=(c&42)!==0?1:Bn(c),(c&(t.suspendedLanes|r))!==0?0:c}function Bn(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function _i(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function xi(){var t=_e.p;return t!==0?t:(t=window.event,t===void 0?32:C2(t.type))}function Ve(t,r){var c=_e.p;try{return _e.p=t,r()}finally{_e.p=c}}var ui=Math.random().toString(36).slice(2),Tn="__reactFiber$"+ui,jt="__reactProps$"+ui,Ai="__reactContainer$"+ui,is="__reactEvents$"+ui,Aa="__reactListeners$"+ui,Xi="__reactHandles$"+ui,ol="__reactResources$"+ui,Pr="__reactMarker$"+ui;function wi(t){delete t[Tn],delete t[jt],delete t[is],delete t[Aa],delete t[Xi]}function mn(t){var r=t[Tn];if(r)return r;for(var c=t.parentNode;c;){if(r=c[Ai]||c[Tn]){if(c=r.alternate,r.child!==null||c!==null&&c.child!==null)for(t=l2(t);t!==null;){if(c=t[Tn])return c;t=l2(t)}return r}t=c,c=t.parentNode}return null}function St(t){if(t=t[Tn]||t[Ai]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function Pi(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(o(33))}function si(t){var r=t[ol];return r||(r=t[ol]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Cn(t){t[Pr]=!0}var Se=new Set,To={};function Gt(t,r){Ti(t,r),Ti(t+"Capture",r)}function Ti(t,r){for(To[t]=r,t=0;t<r.length;t++)Se.add(r[t])}var Co=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Dt={},bt={};function Et(t){return Ze.call(bt,t)?!0:Ze.call(Dt,t)?!1:Co.test(t)?bt[t]=!0:(Dt[t]=!0,!1)}function ds(t,r,c){if(Et(r))if(c===null)t.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+c)}}function Ci(t,r,c){if(c===null)t.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+c)}}function vn(t,r,c,d){if(d===null)t.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(c);return}t.setAttributeNS(r,c,""+d)}}function Ct(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vi(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function vo(t,r,c){var d=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var E=d.get,w=d.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return E.call(this)},set:function(R){c=""+R,w.call(this,R)}}),Object.defineProperty(t,r,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(R){c=""+R},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function tt(t){if(!t._valueTracker){var r=vi(t)?"checked":"value";t._valueTracker=vo(t,r,""+t[r])}}function Bi(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var c=r.getValue(),d="";return t&&(d=vi(t)?t.checked?"true":"false":t.value),t=d,t!==c?(r.setValue(t),!0):!1}function Br(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var er=/[\n"\\]/g;function mt(t){return t.replace(er,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Dn(t,r,c,d,E,w,R,P){t.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?t.type=R:t.removeAttribute("type"),r!=null?R==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+Ct(r)):t.value!==""+Ct(r)&&(t.value=""+Ct(r)):R!=="submit"&&R!=="reset"||t.removeAttribute("value"),r!=null?z(t,R,Ct(r)):c!=null?z(t,R,Ct(c)):d!=null&&t.removeAttribute("value"),E==null&&w!=null&&(t.defaultChecked=!!w),E!=null&&(t.checked=E&&typeof E!="function"&&typeof E!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?t.name=""+Ct(P):t.removeAttribute("name")}function se(t,r,c,d,E,w,R,P){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(t.type=w),r!=null||c!=null){if(!(w!=="submit"&&w!=="reset"||r!=null)){tt(t);return}c=c!=null?""+Ct(c):"",r=r!=null?""+Ct(r):c,P||r===t.value||(t.value=r),t.defaultValue=r}d=d??E,d=typeof d!="function"&&typeof d!="symbol"&&!!d,t.checked=P?t.checked:!!d,t.defaultChecked=!!d,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(t.name=R),tt(t)}function z(t,r,c){r==="number"&&Br(t.ownerDocument)===t||t.defaultValue===""+c||(t.defaultValue=""+c)}function Ge(t,r,c,d){if(t=t.options,r){r={};for(var E=0;E<c.length;E++)r["$"+c[E]]=!0;for(c=0;c<t.length;c++)E=r.hasOwnProperty("$"+t[c].value),t[c].selected!==E&&(t[c].selected=E),E&&d&&(t[c].defaultSelected=!0)}else{for(c=""+Ct(c),r=null,E=0;E<t.length;E++){if(t[E].value===c){t[E].selected=!0,d&&(t[E].defaultSelected=!0);return}r!==null||t[E].disabled||(r=t[E])}r!==null&&(r.selected=!0)}}function Mn(t,r,c){if(r!=null&&(r=""+Ct(r),r!==t.value&&(t.value=r),c==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=c!=null?""+Ct(c):""}function qn(t,r,c,d){if(r==null){if(d!=null){if(c!=null)throw Error(o(92));if(ce(d)){if(1<d.length)throw Error(o(93));d=d[0]}c=d}c==null&&(c=""),r=c}c=Ct(r),t.defaultValue=c,d=t.textContent,d===c&&d!==""&&d!==null&&(t.value=d),tt(t)}function ki(t,r){if(r){var c=t.firstChild;if(c&&c===t.lastChild&&c.nodeType===3){c.nodeValue=r;return}}t.textContent=r}var wa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hi(t,r,c){var d=r.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":d?t.setProperty(r,c):typeof c!="number"||c===0||wa.has(r)?r==="float"?t.cssFloat=c:t[r]=(""+c).trim():t[r]=c+"px"}function Ye(t,r,c){if(r!=null&&typeof r!="object")throw Error(o(62));if(t=t.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?t.setProperty(d,""):d==="float"?t.cssFloat="":t[d]="");for(var E in r)d=r[E],r.hasOwnProperty(E)&&c[E]!==d&&hi(t,E,d)}else for(var w in r)r.hasOwnProperty(w)&&hi(t,w,r[w])}function $t(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var So=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ms(t){return gs.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Vi(){}var Ps=null;function tr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fn=null,Ui=null;function Fi(t){var r=St(t);if(r&&(t=r.stateNode)){var c=t[jt]||null;e:switch(t=r.stateNode,r.type){case"input":if(Dn(t,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),r=c.name,c.type==="radio"&&r!=null){for(c=t;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+mt(""+r)+'"][type="radio"]'),r=0;r<c.length;r++){var d=c[r];if(d!==t&&d.form===t.form){var E=d[jt]||null;if(!E)throw Error(o(90));Dn(d,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(r=0;r<c.length;r++)d=c[r],d.form===t.form&&Bi(d)}break e;case"textarea":Mn(t,c.value,c.defaultValue);break e;case"select":r=c.value,r!=null&&Ge(t,!!c.multiple,r,!1)}}}var We=!1;function ps(t,r,c){if(We)return t(r,c);We=!0;try{var d=t(r);return d}finally{if(We=!1,(fn!==null||Ui!==null)&&(oh(),fn&&(r=fn,t=Ui,Ui=fn=null,Fi(r),t)))for(r=0;r<t.length;r++)Fi(t[r])}}function et(t,r){var c=t.stateNode;if(c===null)return null;var d=c[jt]||null;if(d===null)return null;c=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(t=t.type,d=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!d;break e;default:t=!1}if(t)return null;if(c&&typeof c!="function")throw Error(o(231,r,typeof c));return c}var en=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bs=!1;if(en)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Bs=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch{Bs=!1}var _r=null,xr=null,ks=null;function rs(){if(ks)return ks;var t,r=xr,c=r.length,d,E="value"in _r?_r.value:_r.textContent,w=E.length;for(t=0;t<c&&r[t]===E[t];t++);var R=c-t;for(d=1;d<=R&&r[c-d]===E[w-d];d++);return ks=E.slice(t,1<d?1-d:void 0)}function Ar(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Yi(){return!0}function nr(){return!1}function Ln(t){function r(c,d,E,w,R){this._reactName=c,this._targetInst=E,this.type=d,this.nativeEvent=w,this.target=R,this.currentTarget=null;for(var P in t)t.hasOwnProperty(P)&&(c=t[P],this[P]=c?c(w):w[P]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Yi:nr,this.isPropagationStopped=nr,this}return O(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Yi)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Yi)},persist:function(){},isPersistent:Yi}),r}var Wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},En=Ln(Wi),ss=O({},Wi,{view:0,detail:0}),Ta=Ln(ss),as,Ca,kr,va=O({},ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ur,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==kr&&(kr&&t.type==="mousemove"?(as=t.screenX-kr.screenX,Ca=t.screenY-kr.screenY):Ca=as=0,kr=t),as)},movementY:function(t){return"movementY"in t?t.movementY:Ca}}),zt=Ln(va),ys=O({},va,{dataTransfer:0}),Vs=Ln(ys),wr=O({},ss,{relatedTarget:0}),Us=Ln(wr),fe=O({},Wi,{animationName:0,elapsedTime:0,pseudoElement:0}),ht=Ln(fe),Sn=O({},Wi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Fs=Ln(Sn),bo=O({},Wi,{data:0}),Vr=Ln(bo),ll={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bn(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Sa[t])?!!r[t]:!1}function Ur(){return bn}var vt=O({},ss,{key:function(t){if(t.key){var r=ll[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Ar(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cl[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ur,charCode:function(t){return t.type==="keypress"?Ar(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ar(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zs=Ln(vt),Fr=O({},va,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),It=Ln(Fr),p=O({},ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ur}),S=Ln(p),N=O({},Wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),U=Ln(N),ne=O({},va,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),me=Ln(ne),Le=O({},Wi,{newState:0,oldState:0}),ot=Ln(Le),In=[9,13,27,32],Ut=en&&"CompositionEvent"in window,dn=null;en&&"documentMode"in document&&(dn=document.documentMode);var Ki=en&&"TextEvent"in window&&!dn,zr=en&&(!Ut||dn&&8<dn&&11>=dn),fi=" ",Qi=!1;function Hs(t,r){switch(t){case"keyup":return In.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hr(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ba=!1;function Es(t,r){switch(t){case"compositionend":return Hr(r);case"keypress":return r.which!==32?null:(Qi=!0,fi);case"textInput":return t=r.data,t===fi&&Qi?null:t;default:return null}}function ul(t,r){if(ba)return t==="compositionend"||!Ut&&Hs(t,r)?(t=rs(),ks=xr=_r=null,ba=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return zr&&r.locale!=="ko"?null:r.data;default:return null}}var ir={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lc(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!ir[t.type]:r==="textarea"}function Tr(t,r,c,d){fn?Ui?Ui.push(d):Ui=[d]:fn=d,r=gh(r,"onChange"),0<r.length&&(c=new En("onChange","change",null,c,d),t.push({event:c,listeners:r}))}var Io=null,js=null;function Xf(t){Wp(t,0)}function Ro(t){var r=Pi(t);if(Bi(r))return t}function Cr(t,r){if(t==="change")return r}var vu=!1;if(en){var No;if(en){var Gs="oninput"in document;if(!Gs){var Mt=document.createElement("div");Mt.setAttribute("oninput","return;"),Gs=typeof Mt.oninput=="function"}No=Gs}else No=!1;vu=No&&(!document.documentMode||9<document.documentMode)}function Oo(){Io&&(Io.detachEvent("onpropertychange",D),js=Io=null)}function D(t){if(t.propertyName==="value"&&Ro(js)){var r=[];Tr(r,js,t,tr(t)),ps(Xf,r)}}function i(t,r,c){t==="focusin"?(Oo(),Io=r,js=c,Io.attachEvent("onpropertychange",D)):t==="focusout"&&Oo()}function s(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ro(js)}function l(t,r){if(t==="click")return Ro(r)}function u(t,r){if(t==="input"||t==="change")return Ro(r)}function f(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var g=typeof Object.is=="function"?Object.is:f;function y(t,r){if(g(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var c=Object.keys(t),d=Object.keys(r);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var E=c[d];if(!Ze.call(r,E)||!g(t[E],r[E]))return!1}return!0}function x(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function C(t,r){var c=x(t);t=0;for(var d;c;){if(c.nodeType===3){if(d=t+c.textContent.length,t<=r&&d>=r)return{node:c,offset:r-t};t=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=x(c)}}function I(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?I(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function M(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Br(t.document);r instanceof t.HTMLIFrameElement;){try{var c=typeof r.contentWindow.location.href=="string"}catch{c=!1}if(c)t=r.contentWindow;else break;r=Br(t.document)}return r}function L(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var H=en&&"documentMode"in document&&11>=document.documentMode,Q=null,J=null,ie=null,de=!1;function Me(t,r,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;de||Q==null||Q!==Br(d)||(d=Q,"selectionStart"in d&&L(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ie&&y(ie,d)||(ie=d,d=gh(J,"onSelect"),0<d.length&&(r=new En("onSelect","select",null,r,c),t.push({event:r,listeners:d}),r.target=Q)))}function Oe(t,r){var c={};return c[t.toLowerCase()]=r.toLowerCase(),c["Webkit"+t]="webkit"+r,c["Moz"+t]="moz"+r,c}var Ie={animationend:Oe("Animation","AnimationEnd"),animationiteration:Oe("Animation","AnimationIteration"),animationstart:Oe("Animation","AnimationStart"),transitionrun:Oe("Transition","TransitionRun"),transitionstart:Oe("Transition","TransitionStart"),transitioncancel:Oe("Transition","TransitionCancel"),transitionend:Oe("Transition","TransitionEnd")},_t={},ct={};en&&(ct=document.createElement("div").style,"AnimationEvent"in window||(delete Ie.animationend.animation,delete Ie.animationiteration.animation,delete Ie.animationstart.animation),"TransitionEvent"in window||delete Ie.transitionend.transition);function kn(t){if(_t[t])return _t[t];if(!Ie[t])return t;var r=Ie[t],c;for(c in r)if(r.hasOwnProperty(c)&&c in ct)return _t[t]=r[c];return t}var rr=kn("animationend"),Si=kn("animationiteration"),tn=kn("animationstart"),ai=kn("transitionrun"),Zi=kn("transitionstart"),Ia=kn("transitioncancel"),qs=kn("transitionend"),Su=new Map,cc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cc.push("scrollEnd");function os(t,r){Su.set(t,r),Gt(r,[t])}var bu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},jr=[],hl=0,Yf=0;function Iu(){for(var t=hl,r=Yf=hl=0;r<t;){var c=jr[r];jr[r++]=null;var d=jr[r];jr[r++]=null;var E=jr[r];jr[r++]=null;var w=jr[r];if(jr[r++]=null,d!==null&&E!==null){var R=d.pending;R===null?E.next=E:(E.next=R.next,R.next=E),d.pending=E}w!==0&&Rg(c,E,w)}}function Ru(t,r,c,d){jr[hl++]=t,jr[hl++]=r,jr[hl++]=c,jr[hl++]=d,Yf|=d,t.lanes|=d,t=t.alternate,t!==null&&(t.lanes|=d)}function Wf(t,r,c,d){return Ru(t,r,c,d),Nu(t)}function Do(t,r){return Ru(t,null,null,r),Nu(t)}function Rg(t,r,c){t.lanes|=c;var d=t.alternate;d!==null&&(d.lanes|=c);for(var E=!1,w=t.return;w!==null;)w.childLanes|=c,d=w.alternate,d!==null&&(d.childLanes|=c),w.tag===22&&(t=w.stateNode,t===null||t._visibility&1||(E=!0)),t=w,w=w.return;return t.tag===3?(w=t.stateNode,E&&r!==null&&(E=31-rt(c),t=w.hiddenUpdates,d=t[E],d===null?t[E]=[r]:d.push(r),r.lane=c|536870912),w):null}function Nu(t){if(50<Oc)throw Oc=0,i1=null,Error(o(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var fl={};function yA(t,r,c,d){this.tag=t,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vr(t,r,c,d){return new yA(t,r,c,d)}function Kf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Xs(t,r){var c=t.alternate;return c===null?(c=vr(t.tag,r,t.key,t.mode),c.elementType=t.elementType,c.type=t.type,c.stateNode=t.stateNode,c.alternate=t,t.alternate=c):(c.pendingProps=r,c.type=t.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=t.flags&65011712,c.childLanes=t.childLanes,c.lanes=t.lanes,c.child=t.child,c.memoizedProps=t.memoizedProps,c.memoizedState=t.memoizedState,c.updateQueue=t.updateQueue,r=t.dependencies,c.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},c.sibling=t.sibling,c.index=t.index,c.ref=t.ref,c.refCleanup=t.refCleanup,c}function Ng(t,r){t.flags&=65011714;var c=t.alternate;return c===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=c.childLanes,t.lanes=c.lanes,t.child=c.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=c.memoizedProps,t.memoizedState=c.memoizedState,t.updateQueue=c.updateQueue,t.type=c.type,r=c.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Ou(t,r,c,d,E,w){var R=0;if(d=t,typeof t=="function")Kf(t)&&(R=1);else if(typeof t=="string")R=ww(t,c,Be.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case k:return t=vr(31,c,r,E),t.elementType=k,t.lanes=w,t;case re:return Mo(c.children,E,w,r);case le:R=8,E|=24;break;case ke:return t=vr(12,c,r,E|2),t.elementType=ke,t.lanes=w,t;case we:return t=vr(13,c,r,E),t.elementType=we,t.lanes=w,t;case Te:return t=vr(19,c,r,E),t.elementType=Te,t.lanes=w,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ye:R=10;break e;case Re:R=9;break e;case pe:R=11;break e;case B:R=14;break e;case F:R=16,d=null;break e}R=29,c=Error(o(130,t===null?"null":typeof t,"")),d=null}return r=vr(R,c,r,E),r.elementType=t,r.type=d,r.lanes=w,r}function Mo(t,r,c,d){return t=vr(7,t,d,r),t.lanes=c,t}function Qf(t,r,c){return t=vr(6,t,null,r),t.lanes=c,t}function Og(t){var r=vr(18,null,null,0);return r.stateNode=t,r}function Zf(t,r,c){return r=vr(4,t.children!==null?t.children:[],t.key,r),r.lanes=c,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Dg=new WeakMap;function Gr(t,r){if(typeof t=="object"&&t!==null){var c=Dg.get(t);return c!==void 0?c:(r={value:t,source:r,stack:qt(r)},Dg.set(t,r),r)}return{value:t,source:r,stack:qt(r)}}var dl=[],gl=0,Du=null,uc=0,qr=[],Xr=0,Ra=null,_s=1,xs="";function Ys(t,r){dl[gl++]=uc,dl[gl++]=Du,Du=t,uc=r}function Mg(t,r,c){qr[Xr++]=_s,qr[Xr++]=xs,qr[Xr++]=Ra,Ra=t;var d=_s;t=xs;var E=32-rt(d)-1;d&=~(1<<E),c+=1;var w=32-rt(r)+E;if(30<w){var R=E-E%5;w=(d&(1<<R)-1).toString(32),d>>=R,E-=R,_s=1<<32-rt(r)+E|c<<E|d,xs=w+t}else _s=1<<w|c<<E|d,xs=t}function Jf(t){t.return!==null&&(Ys(t,1),Mg(t,1,0))}function $f(t){for(;t===Du;)Du=dl[--gl],dl[gl]=null,uc=dl[--gl],dl[gl]=null;for(;t===Ra;)Ra=qr[--Xr],qr[Xr]=null,xs=qr[--Xr],qr[Xr]=null,_s=qr[--Xr],qr[Xr]=null}function Lg(t,r){qr[Xr++]=_s,qr[Xr++]=xs,qr[Xr++]=Ra,_s=r.id,xs=r.overflow,Ra=t}var bi=null,_n=null,Ft=!1,Na=null,Yr=!1,ed=Error(o(519));function Oa(t){var r=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw hc(Gr(r,t)),ed}function Pg(t){var r=t.stateNode,c=t.type,d=t.memoizedProps;switch(r[Tn]=t,r[jt]=d,c){case"dialog":Nt("cancel",r),Nt("close",r);break;case"iframe":case"object":case"embed":Nt("load",r);break;case"video":case"audio":for(c=0;c<Mc.length;c++)Nt(Mc[c],r);break;case"source":Nt("error",r);break;case"img":case"image":case"link":Nt("error",r),Nt("load",r);break;case"details":Nt("toggle",r);break;case"input":Nt("invalid",r),se(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Nt("invalid",r);break;case"textarea":Nt("invalid",r),qn(r,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||r.textContent===""+c||d.suppressHydrationWarning===!0||Jp(r.textContent,c)?(d.popover!=null&&(Nt("beforetoggle",r),Nt("toggle",r)),d.onScroll!=null&&Nt("scroll",r),d.onScrollEnd!=null&&Nt("scrollend",r),d.onClick!=null&&(r.onclick=Vi),r=!0):r=!1,r||Oa(t,!0)}function Bg(t){for(bi=t.return;bi;)switch(bi.tag){case 5:case 31:case 13:Yr=!1;return;case 27:case 3:Yr=!0;return;default:bi=bi.return}}function ml(t){if(t!==bi)return!1;if(!Ft)return Bg(t),Ft=!0,!1;var r=t.tag,c;if((c=r!==3&&r!==27)&&((c=r===5)&&(c=t.type,c=!(c!=="form"&&c!=="button")||E1(t.type,t.memoizedProps)),c=!c),c&&_n&&Oa(t),Bg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));_n=o2(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));_n=o2(t)}else r===27?(r=_n,qa(t.type)?(t=T1,T1=null,_n=t):_n=r):_n=bi?Kr(t.stateNode.nextSibling):null;return!0}function Lo(){_n=bi=null,Ft=!1}function td(){var t=Na;return t!==null&&(lr===null?lr=t:lr.push.apply(lr,t),Na=null),t}function hc(t){Na===null?Na=[t]:Na.push(t)}var nd=X(null),Po=null,Ws=null;function Da(t,r,c){Pe(nd,r._currentValue),r._currentValue=c}function Ks(t){t._currentValue=nd.current,ge(nd)}function id(t,r,c){for(;t!==null;){var d=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),t===c)break;t=t.return}}function rd(t,r,c,d){var E=t.child;for(E!==null&&(E.return=t);E!==null;){var w=E.dependencies;if(w!==null){var R=E.child;w=w.firstContext;e:for(;w!==null;){var P=w;w=E;for(var K=0;K<r.length;K++)if(P.context===r[K]){w.lanes|=c,P=w.alternate,P!==null&&(P.lanes|=c),id(w.return,c,t),d||(R=null);break e}w=P.next}}else if(E.tag===18){if(R=E.return,R===null)throw Error(o(341));R.lanes|=c,w=R.alternate,w!==null&&(w.lanes|=c),id(R,c,t),R=null}else R=E.child;if(R!==null)R.return=E;else for(R=E;R!==null;){if(R===t){R=null;break}if(E=R.sibling,E!==null){E.return=R.return,R=E;break}R=R.return}E=R}}function pl(t,r,c,d){t=null;for(var E=r,w=!1;E!==null;){if(!w){if((E.flags&524288)!==0)w=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var R=E.alternate;if(R===null)throw Error(o(387));if(R=R.memoizedProps,R!==null){var P=E.type;g(E.pendingProps.value,R.value)||(t!==null?t.push(P):t=[P])}}else if(E===At.current){if(R=E.alternate,R===null)throw Error(o(387));R.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(t!==null?t.push(Vc):t=[Vc])}E=E.return}t!==null&&rd(r,t,c,d),r.flags|=262144}function Mu(t){for(t=t.firstContext;t!==null;){if(!g(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Bo(t){Po=t,Ws=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ii(t){return kg(Po,t)}function Lu(t,r){return Po===null&&Bo(t),kg(t,r)}function kg(t,r){var c=r._currentValue;if(r={context:r,memoizedValue:c,next:null},Ws===null){if(t===null)throw Error(o(308));Ws=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Ws=Ws.next=r;return c}var EA=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(c,d){t.push(d)}};this.abort=function(){r.aborted=!0,t.forEach(function(c){return c()})}},_A=a.unstable_scheduleCallback,xA=a.unstable_NormalPriority,Qn={$$typeof:ye,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sd(){return{controller:new EA,data:new Map,refCount:0}}function fc(t){t.refCount--,t.refCount===0&&_A(xA,function(){t.controller.abort()})}var dc=null,ad=0,yl=0,El=null;function AA(t,r){if(dc===null){var c=dc=[];ad=0,yl=c1(),El={status:"pending",value:void 0,then:function(d){c.push(d)}}}return ad++,r.then(Vg,Vg),r}function Vg(){if(--ad===0&&dc!==null){El!==null&&(El.status="fulfilled");var t=dc;dc=null,yl=0,El=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function wA(t,r){var c=[],d={status:"pending",value:null,reason:null,then:function(E){c.push(E)}};return t.then(function(){d.status="fulfilled",d.value=r;for(var E=0;E<c.length;E++)(0,c[E])(r)},function(E){for(d.status="rejected",d.reason=E,E=0;E<c.length;E++)(0,c[E])(void 0)}),d}var Ug=he.S;he.S=function(t,r){wp=yn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&AA(t,r),Ug!==null&&Ug(t,r)};var ko=X(null);function od(){var t=ko.current;return t!==null?t:gn.pooledCache}function Pu(t,r){r===null?Pe(ko,ko.current):Pe(ko,r.pool)}function Fg(){var t=od();return t===null?null:{parent:Qn._currentValue,pool:t}}var _l=Error(o(460)),ld=Error(o(474)),Bu=Error(o(542)),ku={then:function(){}};function zg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Hg(t,r,c){switch(c=t[c],c===void 0?t.push(r):c!==r&&(r.then(Vi,Vi),r=c),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Gg(t),t;default:if(typeof r.status=="string")r.then(Vi,Vi);else{if(t=gn,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=r,t.status="pending",t.then(function(d){if(r.status==="pending"){var E=r;E.status="fulfilled",E.value=d}},function(d){if(r.status==="pending"){var E=r;E.status="rejected",E.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Gg(t),t}throw Uo=r,_l}}function Vo(t){try{var r=t._init;return r(t._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Uo=c,_l):c}}var Uo=null;function jg(){if(Uo===null)throw Error(o(459));var t=Uo;return Uo=null,t}function Gg(t){if(t===_l||t===Bu)throw Error(o(483))}var xl=null,gc=0;function Vu(t){var r=gc;return gc+=1,xl===null&&(xl=[]),Hg(xl,t,r)}function mc(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Uu(t,r){throw r.$$typeof===V?Error(o(525)):(t=Object.prototype.toString.call(r),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function qg(t){function r(te,$){if(t){var ae=te.deletions;ae===null?(te.deletions=[$],te.flags|=16):ae.push($)}}function c(te,$){if(!t)return null;for(;$!==null;)r(te,$),$=$.sibling;return null}function d(te){for(var $=new Map;te!==null;)te.key!==null?$.set(te.key,te):$.set(te.index,te),te=te.sibling;return $}function E(te,$){return te=Xs(te,$),te.index=0,te.sibling=null,te}function w(te,$,ae){return te.index=ae,t?(ae=te.alternate,ae!==null?(ae=ae.index,ae<$?(te.flags|=67108866,$):ae):(te.flags|=67108866,$)):(te.flags|=1048576,$)}function R(te){return t&&te.alternate===null&&(te.flags|=67108866),te}function P(te,$,ae,Ae){return $===null||$.tag!==6?($=Qf(ae,te.mode,Ae),$.return=te,$):($=E($,ae),$.return=te,$)}function K(te,$,ae,Ae){var Ke=ae.type;return Ke===re?xe(te,$,ae.props.children,Ae,ae.key):$!==null&&($.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===F&&Vo(Ke)===$.type)?($=E($,ae.props),mc($,ae),$.return=te,$):($=Ou(ae.type,ae.key,ae.props,null,te.mode,Ae),mc($,ae),$.return=te,$)}function oe(te,$,ae,Ae){return $===null||$.tag!==4||$.stateNode.containerInfo!==ae.containerInfo||$.stateNode.implementation!==ae.implementation?($=Zf(ae,te.mode,Ae),$.return=te,$):($=E($,ae.children||[]),$.return=te,$)}function xe(te,$,ae,Ae,Ke){return $===null||$.tag!==7?($=Mo(ae,te.mode,Ae,Ke),$.return=te,$):($=E($,ae),$.return=te,$)}function Ce(te,$,ae){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=Qf(""+$,te.mode,ae),$.return=te,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case j:return ae=Ou($.type,$.key,$.props,null,te.mode,ae),mc(ae,$),ae.return=te,ae;case ee:return $=Zf($,te.mode,ae),$.return=te,$;case F:return $=Vo($),Ce(te,$,ae)}if(ce($)||W($))return $=Mo($,te.mode,ae,null),$.return=te,$;if(typeof $.then=="function")return Ce(te,Vu($),ae);if($.$$typeof===ye)return Ce(te,Lu(te,$),ae);Uu(te,$)}return null}function ue(te,$,ae,Ae){var Ke=$!==null?$.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return Ke!==null?null:P(te,$,""+ae,Ae);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case j:return ae.key===Ke?K(te,$,ae,Ae):null;case ee:return ae.key===Ke?oe(te,$,ae,Ae):null;case F:return ae=Vo(ae),ue(te,$,ae,Ae)}if(ce(ae)||W(ae))return Ke!==null?null:xe(te,$,ae,Ae,null);if(typeof ae.then=="function")return ue(te,$,Vu(ae),Ae);if(ae.$$typeof===ye)return ue(te,$,Lu(te,ae),Ae);Uu(te,ae)}return null}function Ee(te,$,ae,Ae,Ke){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number"||typeof Ae=="bigint")return te=te.get(ae)||null,P($,te,""+Ae,Ke);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case j:return te=te.get(Ae.key===null?ae:Ae.key)||null,K($,te,Ae,Ke);case ee:return te=te.get(Ae.key===null?ae:Ae.key)||null,oe($,te,Ae,Ke);case F:return Ae=Vo(Ae),Ee(te,$,ae,Ae,Ke)}if(ce(Ae)||W(Ae))return te=te.get(ae)||null,xe($,te,Ae,Ke,null);if(typeof Ae.then=="function")return Ee(te,$,ae,Vu(Ae),Ke);if(Ae.$$typeof===ye)return Ee(te,$,ae,Lu($,Ae),Ke);Uu($,Ae)}return null}function qe(te,$,ae,Ae){for(var Ke=null,Kt=null,Xe=$,pt=$=0,Pt=null;Xe!==null&&pt<ae.length;pt++){Xe.index>pt?(Pt=Xe,Xe=null):Pt=Xe.sibling;var Qt=ue(te,Xe,ae[pt],Ae);if(Qt===null){Xe===null&&(Xe=Pt);break}t&&Xe&&Qt.alternate===null&&r(te,Xe),$=w(Qt,$,pt),Kt===null?Ke=Qt:Kt.sibling=Qt,Kt=Qt,Xe=Pt}if(pt===ae.length)return c(te,Xe),Ft&&Ys(te,pt),Ke;if(Xe===null){for(;pt<ae.length;pt++)Xe=Ce(te,ae[pt],Ae),Xe!==null&&($=w(Xe,$,pt),Kt===null?Ke=Xe:Kt.sibling=Xe,Kt=Xe);return Ft&&Ys(te,pt),Ke}for(Xe=d(Xe);pt<ae.length;pt++)Pt=Ee(Xe,te,pt,ae[pt],Ae),Pt!==null&&(t&&Pt.alternate!==null&&Xe.delete(Pt.key===null?pt:Pt.key),$=w(Pt,$,pt),Kt===null?Ke=Pt:Kt.sibling=Pt,Kt=Pt);return t&&Xe.forEach(function(Qa){return r(te,Qa)}),Ft&&Ys(te,pt),Ke}function nt(te,$,ae,Ae){if(ae==null)throw Error(o(151));for(var Ke=null,Kt=null,Xe=$,pt=$=0,Pt=null,Qt=ae.next();Xe!==null&&!Qt.done;pt++,Qt=ae.next()){Xe.index>pt?(Pt=Xe,Xe=null):Pt=Xe.sibling;var Qa=ue(te,Xe,Qt.value,Ae);if(Qa===null){Xe===null&&(Xe=Pt);break}t&&Xe&&Qa.alternate===null&&r(te,Xe),$=w(Qa,$,pt),Kt===null?Ke=Qa:Kt.sibling=Qa,Kt=Qa,Xe=Pt}if(Qt.done)return c(te,Xe),Ft&&Ys(te,pt),Ke;if(Xe===null){for(;!Qt.done;pt++,Qt=ae.next())Qt=Ce(te,Qt.value,Ae),Qt!==null&&($=w(Qt,$,pt),Kt===null?Ke=Qt:Kt.sibling=Qt,Kt=Qt);return Ft&&Ys(te,pt),Ke}for(Xe=d(Xe);!Qt.done;pt++,Qt=ae.next())Qt=Ee(Xe,te,pt,Qt.value,Ae),Qt!==null&&(t&&Qt.alternate!==null&&Xe.delete(Qt.key===null?pt:Qt.key),$=w(Qt,$,pt),Kt===null?Ke=Qt:Kt.sibling=Qt,Kt=Qt);return t&&Xe.forEach(function(Mw){return r(te,Mw)}),Ft&&Ys(te,pt),Ke}function cn(te,$,ae,Ae){if(typeof ae=="object"&&ae!==null&&ae.type===re&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case j:e:{for(var Ke=ae.key;$!==null;){if($.key===Ke){if(Ke=ae.type,Ke===re){if($.tag===7){c(te,$.sibling),Ae=E($,ae.props.children),Ae.return=te,te=Ae;break e}}else if($.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===F&&Vo(Ke)===$.type){c(te,$.sibling),Ae=E($,ae.props),mc(Ae,ae),Ae.return=te,te=Ae;break e}c(te,$);break}else r(te,$);$=$.sibling}ae.type===re?(Ae=Mo(ae.props.children,te.mode,Ae,ae.key),Ae.return=te,te=Ae):(Ae=Ou(ae.type,ae.key,ae.props,null,te.mode,Ae),mc(Ae,ae),Ae.return=te,te=Ae)}return R(te);case ee:e:{for(Ke=ae.key;$!==null;){if($.key===Ke)if($.tag===4&&$.stateNode.containerInfo===ae.containerInfo&&$.stateNode.implementation===ae.implementation){c(te,$.sibling),Ae=E($,ae.children||[]),Ae.return=te,te=Ae;break e}else{c(te,$);break}else r(te,$);$=$.sibling}Ae=Zf(ae,te.mode,Ae),Ae.return=te,te=Ae}return R(te);case F:return ae=Vo(ae),cn(te,$,ae,Ae)}if(ce(ae))return qe(te,$,ae,Ae);if(W(ae)){if(Ke=W(ae),typeof Ke!="function")throw Error(o(150));return ae=Ke.call(ae),nt(te,$,ae,Ae)}if(typeof ae.then=="function")return cn(te,$,Vu(ae),Ae);if(ae.$$typeof===ye)return cn(te,$,Lu(te,ae),Ae);Uu(te,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint"?(ae=""+ae,$!==null&&$.tag===6?(c(te,$.sibling),Ae=E($,ae),Ae.return=te,te=Ae):(c(te,$),Ae=Qf(ae,te.mode,Ae),Ae.return=te,te=Ae),R(te)):c(te,$)}return function(te,$,ae,Ae){try{gc=0;var Ke=cn(te,$,ae,Ae);return xl=null,Ke}catch(Xe){if(Xe===_l||Xe===Bu)throw Xe;var Kt=vr(29,Xe,null,te.mode);return Kt.lanes=Ae,Kt.return=te,Kt}finally{}}}var Fo=qg(!0),Xg=qg(!1),Ma=!1;function cd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ud(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function La(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Pa(t,r,c){var d=t.updateQueue;if(d===null)return null;if(d=d.shared,(Zt&2)!==0){var E=d.pending;return E===null?r.next=r:(r.next=E.next,E.next=r),d.pending=r,r=Nu(t),Rg(t,null,c),r}return Ru(t,d,r,c),Nu(t)}function pc(t,r,c){if(r=r.updateQueue,r!==null&&(r=r.shared,(c&4194048)!==0)){var d=r.lanes;d&=t.pendingLanes,c|=d,r.lanes=c,Er(t,c)}}function hd(t,r){var c=t.updateQueue,d=t.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var E=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var R={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};w===null?E=w=R:w=w.next=R,c=c.next}while(c!==null);w===null?E=w=r:w=w.next=r}else E=w=r;c={baseState:d.baseState,firstBaseUpdate:E,lastBaseUpdate:w,shared:d.shared,callbacks:d.callbacks},t.updateQueue=c;return}t=c.lastBaseUpdate,t===null?c.firstBaseUpdate=r:t.next=r,c.lastBaseUpdate=r}var fd=!1;function yc(){if(fd){var t=El;if(t!==null)throw t}}function Ec(t,r,c,d){fd=!1;var E=t.updateQueue;Ma=!1;var w=E.firstBaseUpdate,R=E.lastBaseUpdate,P=E.shared.pending;if(P!==null){E.shared.pending=null;var K=P,oe=K.next;K.next=null,R===null?w=oe:R.next=oe,R=K;var xe=t.alternate;xe!==null&&(xe=xe.updateQueue,P=xe.lastBaseUpdate,P!==R&&(P===null?xe.firstBaseUpdate=oe:P.next=oe,xe.lastBaseUpdate=K))}if(w!==null){var Ce=E.baseState;R=0,xe=oe=K=null,P=w;do{var ue=P.lane&-536870913,Ee=ue!==P.lane;if(Ee?(Lt&ue)===ue:(d&ue)===ue){ue!==0&&ue===yl&&(fd=!0),xe!==null&&(xe=xe.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var qe=t,nt=P;ue=r;var cn=c;switch(nt.tag){case 1:if(qe=nt.payload,typeof qe=="function"){Ce=qe.call(cn,Ce,ue);break e}Ce=qe;break e;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=nt.payload,ue=typeof qe=="function"?qe.call(cn,Ce,ue):qe,ue==null)break e;Ce=O({},Ce,ue);break e;case 2:Ma=!0}}ue=P.callback,ue!==null&&(t.flags|=64,Ee&&(t.flags|=8192),Ee=E.callbacks,Ee===null?E.callbacks=[ue]:Ee.push(ue))}else Ee={lane:ue,tag:P.tag,payload:P.payload,callback:P.callback,next:null},xe===null?(oe=xe=Ee,K=Ce):xe=xe.next=Ee,R|=ue;if(P=P.next,P===null){if(P=E.shared.pending,P===null)break;Ee=P,P=Ee.next,Ee.next=null,E.lastBaseUpdate=Ee,E.shared.pending=null}}while(!0);xe===null&&(K=Ce),E.baseState=K,E.firstBaseUpdate=oe,E.lastBaseUpdate=xe,w===null&&(E.shared.lanes=0),Fa|=R,t.lanes=R,t.memoizedState=Ce}}function Yg(t,r){if(typeof t!="function")throw Error(o(191,t));t.call(r)}function Wg(t,r){var c=t.callbacks;if(c!==null)for(t.callbacks=null,t=0;t<c.length;t++)Yg(c[t],r)}var Al=X(null),Fu=X(0);function Kg(t,r){t=ra,Pe(Fu,t),Pe(Al,r),ra=t|r.baseLanes}function dd(){Pe(Fu,ra),Pe(Al,Al.current)}function gd(){ra=Fu.current,ge(Al),ge(Fu)}var Sr=X(null),Wr=null;function Ba(t){var r=t.alternate;Pe(Xn,Xn.current&1),Pe(Sr,t),Wr===null&&(r===null||Al.current!==null||r.memoizedState!==null)&&(Wr=t)}function md(t){Pe(Xn,Xn.current),Pe(Sr,t),Wr===null&&(Wr=t)}function Qg(t){t.tag===22?(Pe(Xn,Xn.current),Pe(Sr,t),Wr===null&&(Wr=t)):ka()}function ka(){Pe(Xn,Xn.current),Pe(Sr,Sr.current)}function br(t){ge(Sr),Wr===t&&(Wr=null),ge(Xn)}var Xn=X(0);function zu(t){for(var r=t;r!==null;){if(r.tag===13){var c=r.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||A1(c)||w1(c)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Qs=0,gt=null,on=null,Zn=null,Hu=!1,wl=!1,zo=!1,ju=0,_c=0,Tl=null,TA=0;function Vn(){throw Error(o(321))}function pd(t,r){if(r===null)return!1;for(var c=0;c<r.length&&c<t.length;c++)if(!g(t[c],r[c]))return!1;return!0}function yd(t,r,c,d,E,w){return Qs=w,gt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,he.H=t===null||t.memoizedState===null?Mm:Dd,zo=!1,w=c(d,E),zo=!1,wl&&(w=Jg(r,c,d,E)),Zg(t),w}function Zg(t){he.H=wc;var r=on!==null&&on.next!==null;if(Qs=0,Zn=on=gt=null,Hu=!1,_c=0,Tl=null,r)throw Error(o(300));t===null||Jn||(t=t.dependencies,t!==null&&Mu(t)&&(Jn=!0))}function Jg(t,r,c,d){gt=t;var E=0;do{if(wl&&(Tl=null),_c=0,wl=!1,25<=E)throw Error(o(301));if(E+=1,Zn=on=null,t.updateQueue!=null){var w=t.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}he.H=Lm,w=r(c,d)}while(wl);return w}function CA(){var t=he.H,r=t.useState()[0];return r=typeof r.then=="function"?xc(r):r,t=t.useState()[0],(on!==null?on.memoizedState:null)!==t&&(gt.flags|=1024),r}function Ed(){var t=ju!==0;return ju=0,t}function _d(t,r,c){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~c}function xd(t){if(Hu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Hu=!1}Qs=0,Zn=on=gt=null,wl=!1,_c=ju=0,Tl=null}function Ji(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zn===null?gt.memoizedState=Zn=t:Zn=Zn.next=t,Zn}function Yn(){if(on===null){var t=gt.alternate;t=t!==null?t.memoizedState:null}else t=on.next;var r=Zn===null?gt.memoizedState:Zn.next;if(r!==null)Zn=r,on=t;else{if(t===null)throw gt.alternate===null?Error(o(467)):Error(o(310));on=t,t={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},Zn===null?gt.memoizedState=Zn=t:Zn=Zn.next=t}return Zn}function Gu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xc(t){var r=_c;return _c+=1,Tl===null&&(Tl=[]),t=Hg(Tl,t,r),r=gt,(Zn===null?r.memoizedState:Zn.next)===null&&(r=r.alternate,he.H=r===null||r.memoizedState===null?Mm:Dd),t}function qu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return xc(t);if(t.$$typeof===ye)return Ii(t)}throw Error(o(438,String(t)))}function Ad(t){var r=null,c=gt.updateQueue;if(c!==null&&(r=c.memoCache),r==null){var d=gt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(E){return E.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),c===null&&(c=Gu(),gt.updateQueue=c),c.memoCache=r,c=r.data[r.index],c===void 0)for(c=r.data[r.index]=Array(t),d=0;d<t;d++)c[d]=Z;return r.index++,c}function Zs(t,r){return typeof r=="function"?r(t):r}function Xu(t){var r=Yn();return wd(r,on,t)}function wd(t,r,c){var d=t.queue;if(d===null)throw Error(o(311));d.lastRenderedReducer=c;var E=t.baseQueue,w=d.pending;if(w!==null){if(E!==null){var R=E.next;E.next=w.next,w.next=R}r.baseQueue=E=w,d.pending=null}if(w=t.baseState,E===null)t.memoizedState=w;else{r=E.next;var P=R=null,K=null,oe=r,xe=!1;do{var Ce=oe.lane&-536870913;if(Ce!==oe.lane?(Lt&Ce)===Ce:(Qs&Ce)===Ce){var ue=oe.revertLane;if(ue===0)K!==null&&(K=K.next={lane:0,revertLane:0,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),Ce===yl&&(xe=!0);else if((Qs&ue)===ue){oe=oe.next,ue===yl&&(xe=!0);continue}else Ce={lane:0,revertLane:oe.revertLane,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},K===null?(P=K=Ce,R=w):K=K.next=Ce,gt.lanes|=ue,Fa|=ue;Ce=oe.action,zo&&c(w,Ce),w=oe.hasEagerState?oe.eagerState:c(w,Ce)}else ue={lane:Ce,revertLane:oe.revertLane,gesture:oe.gesture,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},K===null?(P=K=ue,R=w):K=K.next=ue,gt.lanes|=Ce,Fa|=Ce;oe=oe.next}while(oe!==null&&oe!==r);if(K===null?R=w:K.next=P,!g(w,t.memoizedState)&&(Jn=!0,xe&&(c=El,c!==null)))throw c;t.memoizedState=w,t.baseState=R,t.baseQueue=K,d.lastRenderedState=w}return E===null&&(d.lanes=0),[t.memoizedState,d.dispatch]}function Td(t){var r=Yn(),c=r.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=t;var d=c.dispatch,E=c.pending,w=r.memoizedState;if(E!==null){c.pending=null;var R=E=E.next;do w=t(w,R.action),R=R.next;while(R!==E);g(w,r.memoizedState)||(Jn=!0),r.memoizedState=w,r.baseQueue===null&&(r.baseState=w),c.lastRenderedState=w}return[w,d]}function $g(t,r,c){var d=gt,E=Yn(),w=Ft;if(w){if(c===void 0)throw Error(o(407));c=c()}else c=r();var R=!g((on||E).memoizedState,c);if(R&&(E.memoizedState=c,Jn=!0),E=E.queue,Sd(nm.bind(null,d,E,t),[t]),E.getSnapshot!==r||R||Zn!==null&&Zn.memoizedState.tag&1){if(d.flags|=2048,Cl(9,{destroy:void 0},tm.bind(null,d,E,c,r),null),gn===null)throw Error(o(349));w||(Qs&127)!==0||em(d,r,c)}return c}function em(t,r,c){t.flags|=16384,t={getSnapshot:r,value:c},r=gt.updateQueue,r===null?(r=Gu(),gt.updateQueue=r,r.stores=[t]):(c=r.stores,c===null?r.stores=[t]:c.push(t))}function tm(t,r,c,d){r.value=c,r.getSnapshot=d,im(r)&&rm(t)}function nm(t,r,c){return c(function(){im(r)&&rm(t)})}function im(t){var r=t.getSnapshot;t=t.value;try{var c=r();return!g(t,c)}catch{return!0}}function rm(t){var r=Do(t,2);r!==null&&cr(r,t,2)}function Cd(t){var r=Ji();if(typeof t=="function"){var c=t;if(t=c(),zo){Yt(!0);try{c()}finally{Yt(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zs,lastRenderedState:t},r}function sm(t,r,c,d){return t.baseState=c,wd(t,on,typeof d=="function"?d:Zs)}function vA(t,r,c,d,E){if(Ku(t))throw Error(o(485));if(t=r.action,t!==null){var w={payload:E,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){w.listeners.push(R)}};he.T!==null?c(!0):w.isTransition=!1,d(w),c=r.pending,c===null?(w.next=r.pending=w,am(r,w)):(w.next=c.next,r.pending=c.next=w)}}function am(t,r){var c=r.action,d=r.payload,E=t.state;if(r.isTransition){var w=he.T,R={};he.T=R;try{var P=c(E,d),K=he.S;K!==null&&K(R,P),om(t,r,P)}catch(oe){vd(t,r,oe)}finally{w!==null&&R.types!==null&&(w.types=R.types),he.T=w}}else try{w=c(E,d),om(t,r,w)}catch(oe){vd(t,r,oe)}}function om(t,r,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){lm(t,r,d)},function(d){return vd(t,r,d)}):lm(t,r,c)}function lm(t,r,c){r.status="fulfilled",r.value=c,cm(r),t.state=c,r=t.pending,r!==null&&(c=r.next,c===r?t.pending=null:(c=c.next,r.next=c,am(t,c)))}function vd(t,r,c){var d=t.pending;if(t.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=c,cm(r),r=r.next;while(r!==d)}t.action=null}function cm(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function um(t,r){return r}function hm(t,r){if(Ft){var c=gn.formState;if(c!==null){e:{var d=gt;if(Ft){if(_n){t:{for(var E=_n,w=Yr;E.nodeType!==8;){if(!w){E=null;break t}if(E=Kr(E.nextSibling),E===null){E=null;break t}}w=E.data,E=w==="F!"||w==="F"?E:null}if(E){_n=Kr(E.nextSibling),d=E.data==="F!";break e}}Oa(d)}d=!1}d&&(r=c[0])}}return c=Ji(),c.memoizedState=c.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:um,lastRenderedState:r},c.queue=d,c=Nm.bind(null,gt,d),d.dispatch=c,d=Cd(!1),w=Od.bind(null,gt,!1,d.queue),d=Ji(),E={state:r,dispatch:null,action:t,pending:null},d.queue=E,c=vA.bind(null,gt,E,w,c),E.dispatch=c,d.memoizedState=t,[r,c,!1]}function fm(t){var r=Yn();return dm(r,on,t)}function dm(t,r,c){if(r=wd(t,r,um)[0],t=Xu(Zs)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=xc(r)}catch(R){throw R===_l?Bu:R}else d=r;r=Yn();var E=r.queue,w=E.dispatch;return c!==r.memoizedState&&(gt.flags|=2048,Cl(9,{destroy:void 0},SA.bind(null,E,c),null)),[d,w,t]}function SA(t,r){t.action=r}function gm(t){var r=Yn(),c=on;if(c!==null)return dm(r,c,t);Yn(),r=r.memoizedState,c=Yn();var d=c.queue.dispatch;return c.memoizedState=t,[r,d,!1]}function Cl(t,r,c,d){return t={tag:t,create:c,deps:d,inst:r,next:null},r=gt.updateQueue,r===null&&(r=Gu(),gt.updateQueue=r),c=r.lastEffect,c===null?r.lastEffect=t.next=t:(d=c.next,c.next=t,t.next=d,r.lastEffect=t),t}function mm(){return Yn().memoizedState}function Yu(t,r,c,d){var E=Ji();gt.flags|=t,E.memoizedState=Cl(1|r,{destroy:void 0},c,d===void 0?null:d)}function Wu(t,r,c,d){var E=Yn();d=d===void 0?null:d;var w=E.memoizedState.inst;on!==null&&d!==null&&pd(d,on.memoizedState.deps)?E.memoizedState=Cl(r,w,c,d):(gt.flags|=t,E.memoizedState=Cl(1|r,w,c,d))}function pm(t,r){Yu(8390656,8,t,r)}function Sd(t,r){Wu(2048,8,t,r)}function bA(t){gt.flags|=4;var r=gt.updateQueue;if(r===null)r=Gu(),gt.updateQueue=r,r.events=[t];else{var c=r.events;c===null?r.events=[t]:c.push(t)}}function ym(t){var r=Yn().memoizedState;return bA({ref:r,nextImpl:t}),function(){if((Zt&2)!==0)throw Error(o(440));return r.impl.apply(void 0,arguments)}}function Em(t,r){return Wu(4,2,t,r)}function _m(t,r){return Wu(4,4,t,r)}function xm(t,r){if(typeof r=="function"){t=t();var c=r(t);return function(){typeof c=="function"?c():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Am(t,r,c){c=c!=null?c.concat([t]):null,Wu(4,4,xm.bind(null,r,t),c)}function bd(){}function wm(t,r){var c=Yn();r=r===void 0?null:r;var d=c.memoizedState;return r!==null&&pd(r,d[1])?d[0]:(c.memoizedState=[t,r],t)}function Tm(t,r){var c=Yn();r=r===void 0?null:r;var d=c.memoizedState;if(r!==null&&pd(r,d[1]))return d[0];if(d=t(),zo){Yt(!0);try{t()}finally{Yt(!1)}}return c.memoizedState=[d,r],d}function Id(t,r,c){return c===void 0||(Qs&1073741824)!==0&&(Lt&261930)===0?t.memoizedState=r:(t.memoizedState=c,t=Cp(),gt.lanes|=t,Fa|=t,c)}function Cm(t,r,c,d){return g(c,r)?c:Al.current!==null?(t=Id(t,c,d),g(t,r)||(Jn=!0),t):(Qs&42)===0||(Qs&1073741824)!==0&&(Lt&261930)===0?(Jn=!0,t.memoizedState=c):(t=Cp(),gt.lanes|=t,Fa|=t,r)}function vm(t,r,c,d,E){var w=_e.p;_e.p=w!==0&&8>w?w:8;var R=he.T,P={};he.T=P,Od(t,!1,r,c);try{var K=E(),oe=he.S;if(oe!==null&&oe(P,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var xe=wA(K,d);Ac(t,r,xe,Nr(t))}else Ac(t,r,d,Nr(t))}catch(Ce){Ac(t,r,{then:function(){},status:"rejected",reason:Ce},Nr())}finally{_e.p=w,R!==null&&P.types!==null&&(R.types=P.types),he.T=R}}function IA(){}function Rd(t,r,c,d){if(t.tag!==5)throw Error(o(476));var E=Sm(t).queue;vm(t,E,r,je,c===null?IA:function(){return bm(t),c(d)})}function Sm(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:je,baseState:je,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zs,lastRenderedState:je},next:null};var c={};return r.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zs,lastRenderedState:c},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function bm(t){var r=Sm(t);r.next===null&&(r=t.alternate.memoizedState),Ac(t,r.next.queue,{},Nr())}function Nd(){return Ii(Vc)}function Im(){return Yn().memoizedState}function Rm(){return Yn().memoizedState}function RA(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var c=Nr();t=La(c);var d=Pa(r,t,c);d!==null&&(cr(d,r,c),pc(d,r,c)),r={cache:sd()},t.payload=r;return}r=r.return}}function NA(t,r,c){var d=Nr();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ku(t)?Om(r,c):(c=Wf(t,r,c,d),c!==null&&(cr(c,t,d),Dm(c,r,d)))}function Nm(t,r,c){var d=Nr();Ac(t,r,c,d)}function Ac(t,r,c,d){var E={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ku(t))Om(r,E);else{var w=t.alternate;if(t.lanes===0&&(w===null||w.lanes===0)&&(w=r.lastRenderedReducer,w!==null))try{var R=r.lastRenderedState,P=w(R,c);if(E.hasEagerState=!0,E.eagerState=P,g(P,R))return Ru(t,r,E,0),gn===null&&Iu(),!1}catch{}finally{}if(c=Wf(t,r,E,d),c!==null)return cr(c,t,d),Dm(c,r,d),!0}return!1}function Od(t,r,c,d){if(d={lane:2,revertLane:c1(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Ku(t)){if(r)throw Error(o(479))}else r=Wf(t,c,d,2),r!==null&&cr(r,t,2)}function Ku(t){var r=t.alternate;return t===gt||r!==null&&r===gt}function Om(t,r){wl=Hu=!0;var c=t.pending;c===null?r.next=r:(r.next=c.next,c.next=r),t.pending=r}function Dm(t,r,c){if((c&4194048)!==0){var d=r.lanes;d&=t.pendingLanes,c|=d,r.lanes=c,Er(t,c)}}var wc={readContext:Ii,use:qu,useCallback:Vn,useContext:Vn,useEffect:Vn,useImperativeHandle:Vn,useLayoutEffect:Vn,useInsertionEffect:Vn,useMemo:Vn,useReducer:Vn,useRef:Vn,useState:Vn,useDebugValue:Vn,useDeferredValue:Vn,useTransition:Vn,useSyncExternalStore:Vn,useId:Vn,useHostTransitionStatus:Vn,useFormState:Vn,useActionState:Vn,useOptimistic:Vn,useMemoCache:Vn,useCacheRefresh:Vn};wc.useEffectEvent=Vn;var Mm={readContext:Ii,use:qu,useCallback:function(t,r){return Ji().memoizedState=[t,r===void 0?null:r],t},useContext:Ii,useEffect:pm,useImperativeHandle:function(t,r,c){c=c!=null?c.concat([t]):null,Yu(4194308,4,xm.bind(null,r,t),c)},useLayoutEffect:function(t,r){return Yu(4194308,4,t,r)},useInsertionEffect:function(t,r){Yu(4,2,t,r)},useMemo:function(t,r){var c=Ji();r=r===void 0?null:r;var d=t();if(zo){Yt(!0);try{t()}finally{Yt(!1)}}return c.memoizedState=[d,r],d},useReducer:function(t,r,c){var d=Ji();if(c!==void 0){var E=c(r);if(zo){Yt(!0);try{c(r)}finally{Yt(!1)}}}else E=r;return d.memoizedState=d.baseState=E,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:E},d.queue=t,t=t.dispatch=NA.bind(null,gt,t),[d.memoizedState,t]},useRef:function(t){var r=Ji();return t={current:t},r.memoizedState=t},useState:function(t){t=Cd(t);var r=t.queue,c=Nm.bind(null,gt,r);return r.dispatch=c,[t.memoizedState,c]},useDebugValue:bd,useDeferredValue:function(t,r){var c=Ji();return Id(c,t,r)},useTransition:function(){var t=Cd(!1);return t=vm.bind(null,gt,t.queue,!0,!1),Ji().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,c){var d=gt,E=Ji();if(Ft){if(c===void 0)throw Error(o(407));c=c()}else{if(c=r(),gn===null)throw Error(o(349));(Lt&127)!==0||em(d,r,c)}E.memoizedState=c;var w={value:c,getSnapshot:r};return E.queue=w,pm(nm.bind(null,d,w,t),[t]),d.flags|=2048,Cl(9,{destroy:void 0},tm.bind(null,d,w,c,r),null),c},useId:function(){var t=Ji(),r=gn.identifierPrefix;if(Ft){var c=xs,d=_s;c=(d&~(1<<32-rt(d)-1)).toString(32)+c,r="_"+r+"R_"+c,c=ju++,0<c&&(r+="H"+c.toString(32)),r+="_"}else c=TA++,r="_"+r+"r_"+c.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:Nd,useFormState:hm,useActionState:hm,useOptimistic:function(t){var r=Ji();r.memoizedState=r.baseState=t;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=c,r=Od.bind(null,gt,!0,c),c.dispatch=r,[t,r]},useMemoCache:Ad,useCacheRefresh:function(){return Ji().memoizedState=RA.bind(null,gt)},useEffectEvent:function(t){var r=Ji(),c={impl:t};return r.memoizedState=c,function(){if((Zt&2)!==0)throw Error(o(440));return c.impl.apply(void 0,arguments)}}},Dd={readContext:Ii,use:qu,useCallback:wm,useContext:Ii,useEffect:Sd,useImperativeHandle:Am,useInsertionEffect:Em,useLayoutEffect:_m,useMemo:Tm,useReducer:Xu,useRef:mm,useState:function(){return Xu(Zs)},useDebugValue:bd,useDeferredValue:function(t,r){var c=Yn();return Cm(c,on.memoizedState,t,r)},useTransition:function(){var t=Xu(Zs)[0],r=Yn().memoizedState;return[typeof t=="boolean"?t:xc(t),r]},useSyncExternalStore:$g,useId:Im,useHostTransitionStatus:Nd,useFormState:fm,useActionState:fm,useOptimistic:function(t,r){var c=Yn();return sm(c,on,t,r)},useMemoCache:Ad,useCacheRefresh:Rm};Dd.useEffectEvent=ym;var Lm={readContext:Ii,use:qu,useCallback:wm,useContext:Ii,useEffect:Sd,useImperativeHandle:Am,useInsertionEffect:Em,useLayoutEffect:_m,useMemo:Tm,useReducer:Td,useRef:mm,useState:function(){return Td(Zs)},useDebugValue:bd,useDeferredValue:function(t,r){var c=Yn();return on===null?Id(c,t,r):Cm(c,on.memoizedState,t,r)},useTransition:function(){var t=Td(Zs)[0],r=Yn().memoizedState;return[typeof t=="boolean"?t:xc(t),r]},useSyncExternalStore:$g,useId:Im,useHostTransitionStatus:Nd,useFormState:gm,useActionState:gm,useOptimistic:function(t,r){var c=Yn();return on!==null?sm(c,on,t,r):(c.baseState=t,[t,c.queue.dispatch])},useMemoCache:Ad,useCacheRefresh:Rm};Lm.useEffectEvent=ym;function Md(t,r,c,d){r=t.memoizedState,c=c(d,r),c=c==null?r:O({},r,c),t.memoizedState=c,t.lanes===0&&(t.updateQueue.baseState=c)}var Ld={enqueueSetState:function(t,r,c){t=t._reactInternals;var d=Nr(),E=La(d);E.payload=r,c!=null&&(E.callback=c),r=Pa(t,E,d),r!==null&&(cr(r,t,d),pc(r,t,d))},enqueueReplaceState:function(t,r,c){t=t._reactInternals;var d=Nr(),E=La(d);E.tag=1,E.payload=r,c!=null&&(E.callback=c),r=Pa(t,E,d),r!==null&&(cr(r,t,d),pc(r,t,d))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var c=Nr(),d=La(c);d.tag=2,r!=null&&(d.callback=r),r=Pa(t,d,c),r!==null&&(cr(r,t,c),pc(r,t,c))}};function Pm(t,r,c,d,E,w,R){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(d,w,R):r.prototype&&r.prototype.isPureReactComponent?!y(c,d)||!y(E,w):!0}function Bm(t,r,c,d){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(c,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(c,d),r.state!==t&&Ld.enqueueReplaceState(r,r.state,null)}function Ho(t,r){var c=r;if("ref"in r){c={};for(var d in r)d!=="ref"&&(c[d]=r[d])}if(t=t.defaultProps){c===r&&(c=O({},c));for(var E in t)c[E]===void 0&&(c[E]=t[E])}return c}function km(t){bu(t)}function Vm(t){console.error(t)}function Um(t){bu(t)}function Qu(t,r){try{var c=t.onUncaughtError;c(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function Fm(t,r,c){try{var d=t.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function Pd(t,r,c){return c=La(c),c.tag=3,c.payload={element:null},c.callback=function(){Qu(t,r)},c}function zm(t){return t=La(t),t.tag=3,t}function Hm(t,r,c,d){var E=c.type.getDerivedStateFromError;if(typeof E=="function"){var w=d.value;t.payload=function(){return E(w)},t.callback=function(){Fm(r,c,d)}}var R=c.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(t.callback=function(){Fm(r,c,d),typeof E!="function"&&(za===null?za=new Set([this]):za.add(this));var P=d.stack;this.componentDidCatch(d.value,{componentStack:P!==null?P:""})})}function OA(t,r,c,d,E){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=c.alternate,r!==null&&pl(r,c,E,!0),c=Sr.current,c!==null){switch(c.tag){case 31:case 13:return Wr===null?lh():c.alternate===null&&Un===0&&(Un=3),c.flags&=-257,c.flags|=65536,c.lanes=E,d===ku?c.flags|=16384:(r=c.updateQueue,r===null?c.updateQueue=new Set([d]):r.add(d),a1(t,d,E)),!1;case 22:return c.flags|=65536,d===ku?c.flags|=16384:(r=c.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=r):(c=r.retryQueue,c===null?r.retryQueue=new Set([d]):c.add(d)),a1(t,d,E)),!1}throw Error(o(435,c.tag))}return a1(t,d,E),lh(),!1}if(Ft)return r=Sr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=E,d!==ed&&(t=Error(o(422),{cause:d}),hc(Gr(t,c)))):(d!==ed&&(r=Error(o(423),{cause:d}),hc(Gr(r,c))),t=t.current.alternate,t.flags|=65536,E&=-E,t.lanes|=E,d=Gr(d,c),E=Pd(t.stateNode,d,E),hd(t,E),Un!==4&&(Un=2)),!1;var w=Error(o(520),{cause:d});if(w=Gr(w,c),Nc===null?Nc=[w]:Nc.push(w),Un!==4&&(Un=2),r===null)return!0;d=Gr(d,c),c=r;do{switch(c.tag){case 3:return c.flags|=65536,t=E&-E,c.lanes|=t,t=Pd(c.stateNode,d,t),hd(c,t),!1;case 1:if(r=c.type,w=c.stateNode,(c.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(za===null||!za.has(w))))return c.flags|=65536,E&=-E,c.lanes|=E,E=zm(E),Hm(E,t,c,d),hd(c,E),!1}c=c.return}while(c!==null);return!1}var Bd=Error(o(461)),Jn=!1;function Ri(t,r,c,d){r.child=t===null?Xg(r,null,c,d):Fo(r,t.child,c,d)}function jm(t,r,c,d,E){c=c.render;var w=r.ref;if("ref"in d){var R={};for(var P in d)P!=="ref"&&(R[P]=d[P])}else R=d;return Bo(r),d=yd(t,r,c,R,w,E),P=Ed(),t!==null&&!Jn?(_d(t,r,E),Js(t,r,E)):(Ft&&P&&Jf(r),r.flags|=1,Ri(t,r,d,E),r.child)}function Gm(t,r,c,d,E){if(t===null){var w=c.type;return typeof w=="function"&&!Kf(w)&&w.defaultProps===void 0&&c.compare===null?(r.tag=15,r.type=w,qm(t,r,w,d,E)):(t=Ou(c.type,null,d,r,r.mode,E),t.ref=r.ref,t.return=r,r.child=t)}if(w=t.child,!Gd(t,E)){var R=w.memoizedProps;if(c=c.compare,c=c!==null?c:y,c(R,d)&&t.ref===r.ref)return Js(t,r,E)}return r.flags|=1,t=Xs(w,d),t.ref=r.ref,t.return=r,r.child=t}function qm(t,r,c,d,E){if(t!==null){var w=t.memoizedProps;if(y(w,d)&&t.ref===r.ref)if(Jn=!1,r.pendingProps=d=w,Gd(t,E))(t.flags&131072)!==0&&(Jn=!0);else return r.lanes=t.lanes,Js(t,r,E)}return kd(t,r,c,d,E)}function Xm(t,r,c,d){var E=d.children,w=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((r.flags&128)!==0){if(w=w!==null?w.baseLanes|c:c,t!==null){for(d=r.child=t.child,E=0;d!==null;)E=E|d.lanes|d.childLanes,d=d.sibling;d=E&~w}else d=0,r.child=null;return Ym(t,r,w,c,d)}if((c&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&Pu(r,w!==null?w.cachePool:null),w!==null?Kg(r,w):dd(),Qg(r);else return d=r.lanes=536870912,Ym(t,r,w!==null?w.baseLanes|c:c,c,d)}else w!==null?(Pu(r,w.cachePool),Kg(r,w),ka(),r.memoizedState=null):(t!==null&&Pu(r,null),dd(),ka());return Ri(t,r,E,c),r.child}function Tc(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Ym(t,r,c,d,E){var w=od();return w=w===null?null:{parent:Qn._currentValue,pool:w},r.memoizedState={baseLanes:c,cachePool:w},t!==null&&Pu(r,null),dd(),Qg(r),t!==null&&pl(t,r,d,!0),r.childLanes=E,null}function Zu(t,r){return r=$u({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function Wm(t,r,c){return Fo(r,t.child,null,c),t=Zu(r,r.pendingProps),t.flags|=2,br(r),r.memoizedState=null,t}function DA(t,r,c){var d=r.pendingProps,E=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(Ft){if(d.mode==="hidden")return t=Zu(r,d),r.lanes=536870912,Tc(null,t);if(md(r),(t=_n)?(t=a2(t,Yr),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ra!==null?{id:_s,overflow:xs}:null,retryLane:536870912,hydrationErrors:null},c=Og(t),c.return=r,r.child=c,bi=r,_n=null)):t=null,t===null)throw Oa(r);return r.lanes=536870912,null}return Zu(r,d)}var w=t.memoizedState;if(w!==null){var R=w.dehydrated;if(md(r),E)if(r.flags&256)r.flags&=-257,r=Wm(t,r,c);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(o(558));else if(Jn||pl(t,r,c,!1),E=(c&t.childLanes)!==0,Jn||E){if(d=gn,d!==null&&(R=Ls(d,c),R!==0&&R!==w.retryLane))throw w.retryLane=R,Do(t,R),cr(d,t,R),Bd;lh(),r=Wm(t,r,c)}else t=w.treeContext,_n=Kr(R.nextSibling),bi=r,Ft=!0,Na=null,Yr=!1,t!==null&&Lg(r,t),r=Zu(r,d),r.flags|=4096;return r}return t=Xs(t.child,{mode:d.mode,children:d.children}),t.ref=r.ref,r.child=t,t.return=r,t}function Ju(t,r){var c=r.ref;if(c===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(o(284));(t===null||t.ref!==c)&&(r.flags|=4194816)}}function kd(t,r,c,d,E){return Bo(r),c=yd(t,r,c,d,void 0,E),d=Ed(),t!==null&&!Jn?(_d(t,r,E),Js(t,r,E)):(Ft&&d&&Jf(r),r.flags|=1,Ri(t,r,c,E),r.child)}function Km(t,r,c,d,E,w){return Bo(r),r.updateQueue=null,c=Jg(r,d,c,E),Zg(t),d=Ed(),t!==null&&!Jn?(_d(t,r,w),Js(t,r,w)):(Ft&&d&&Jf(r),r.flags|=1,Ri(t,r,c,w),r.child)}function Qm(t,r,c,d,E){if(Bo(r),r.stateNode===null){var w=fl,R=c.contextType;typeof R=="object"&&R!==null&&(w=Ii(R)),w=new c(d,w),r.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Ld,r.stateNode=w,w._reactInternals=r,w=r.stateNode,w.props=d,w.state=r.memoizedState,w.refs={},cd(r),R=c.contextType,w.context=typeof R=="object"&&R!==null?Ii(R):fl,w.state=r.memoizedState,R=c.getDerivedStateFromProps,typeof R=="function"&&(Md(r,c,R,d),w.state=r.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(R=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),R!==w.state&&Ld.enqueueReplaceState(w,w.state,null),Ec(r,d,w,E),yc(),w.state=r.memoizedState),typeof w.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(t===null){w=r.stateNode;var P=r.memoizedProps,K=Ho(c,P);w.props=K;var oe=w.context,xe=c.contextType;R=fl,typeof xe=="object"&&xe!==null&&(R=Ii(xe));var Ce=c.getDerivedStateFromProps;xe=typeof Ce=="function"||typeof w.getSnapshotBeforeUpdate=="function",P=r.pendingProps!==P,xe||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P||oe!==R)&&Bm(r,w,d,R),Ma=!1;var ue=r.memoizedState;w.state=ue,Ec(r,d,w,E),yc(),oe=r.memoizedState,P||ue!==oe||Ma?(typeof Ce=="function"&&(Md(r,c,Ce,d),oe=r.memoizedState),(K=Ma||Pm(r,c,K,d,ue,oe,R))?(xe||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(r.flags|=4194308)):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=oe),w.props=d,w.state=oe,w.context=R,d=K):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{w=r.stateNode,ud(t,r),R=r.memoizedProps,xe=Ho(c,R),w.props=xe,Ce=r.pendingProps,ue=w.context,oe=c.contextType,K=fl,typeof oe=="object"&&oe!==null&&(K=Ii(oe)),P=c.getDerivedStateFromProps,(oe=typeof P=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(R!==Ce||ue!==K)&&Bm(r,w,d,K),Ma=!1,ue=r.memoizedState,w.state=ue,Ec(r,d,w,E),yc();var Ee=r.memoizedState;R!==Ce||ue!==Ee||Ma||t!==null&&t.dependencies!==null&&Mu(t.dependencies)?(typeof P=="function"&&(Md(r,c,P,d),Ee=r.memoizedState),(xe=Ma||Pm(r,c,xe,d,ue,Ee,K)||t!==null&&t.dependencies!==null&&Mu(t.dependencies))?(oe||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(d,Ee,K),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(d,Ee,K)),typeof w.componentDidUpdate=="function"&&(r.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof w.componentDidUpdate!="function"||R===t.memoizedProps&&ue===t.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||R===t.memoizedProps&&ue===t.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=Ee),w.props=d,w.state=Ee,w.context=K,d=xe):(typeof w.componentDidUpdate!="function"||R===t.memoizedProps&&ue===t.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||R===t.memoizedProps&&ue===t.memoizedState||(r.flags|=1024),d=!1)}return w=d,Ju(t,r),d=(r.flags&128)!==0,w||d?(w=r.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:w.render(),r.flags|=1,t!==null&&d?(r.child=Fo(r,t.child,null,E),r.child=Fo(r,null,c,E)):Ri(t,r,c,E),r.memoizedState=w.state,t=r.child):t=Js(t,r,E),t}function Zm(t,r,c,d){return Lo(),r.flags|=256,Ri(t,r,c,d),r.child}var Vd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ud(t){return{baseLanes:t,cachePool:Fg()}}function Fd(t,r,c){return t=t!==null?t.childLanes&~c:0,r&&(t|=Rr),t}function Jm(t,r,c){var d=r.pendingProps,E=!1,w=(r.flags&128)!==0,R;if((R=w)||(R=t!==null&&t.memoizedState===null?!1:(Xn.current&2)!==0),R&&(E=!0,r.flags&=-129),R=(r.flags&32)!==0,r.flags&=-33,t===null){if(Ft){if(E?Ba(r):ka(),(t=_n)?(t=a2(t,Yr),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ra!==null?{id:_s,overflow:xs}:null,retryLane:536870912,hydrationErrors:null},c=Og(t),c.return=r,r.child=c,bi=r,_n=null)):t=null,t===null)throw Oa(r);return w1(t)?r.lanes=32:r.lanes=536870912,null}var P=d.children;return d=d.fallback,E?(ka(),E=r.mode,P=$u({mode:"hidden",children:P},E),d=Mo(d,E,c,null),P.return=r,d.return=r,P.sibling=d,r.child=P,d=r.child,d.memoizedState=Ud(c),d.childLanes=Fd(t,R,c),r.memoizedState=Vd,Tc(null,d)):(Ba(r),zd(r,P))}var K=t.memoizedState;if(K!==null&&(P=K.dehydrated,P!==null)){if(w)r.flags&256?(Ba(r),r.flags&=-257,r=Hd(t,r,c)):r.memoizedState!==null?(ka(),r.child=t.child,r.flags|=128,r=null):(ka(),P=d.fallback,E=r.mode,d=$u({mode:"visible",children:d.children},E),P=Mo(P,E,c,null),P.flags|=2,d.return=r,P.return=r,d.sibling=P,r.child=d,Fo(r,t.child,null,c),d=r.child,d.memoizedState=Ud(c),d.childLanes=Fd(t,R,c),r.memoizedState=Vd,r=Tc(null,d));else if(Ba(r),w1(P)){if(R=P.nextSibling&&P.nextSibling.dataset,R)var oe=R.dgst;R=oe,d=Error(o(419)),d.stack="",d.digest=R,hc({value:d,source:null,stack:null}),r=Hd(t,r,c)}else if(Jn||pl(t,r,c,!1),R=(c&t.childLanes)!==0,Jn||R){if(R=gn,R!==null&&(d=Ls(R,c),d!==0&&d!==K.retryLane))throw K.retryLane=d,Do(t,d),cr(R,t,d),Bd;A1(P)||lh(),r=Hd(t,r,c)}else A1(P)?(r.flags|=192,r.child=t.child,r=null):(t=K.treeContext,_n=Kr(P.nextSibling),bi=r,Ft=!0,Na=null,Yr=!1,t!==null&&Lg(r,t),r=zd(r,d.children),r.flags|=4096);return r}return E?(ka(),P=d.fallback,E=r.mode,K=t.child,oe=K.sibling,d=Xs(K,{mode:"hidden",children:d.children}),d.subtreeFlags=K.subtreeFlags&65011712,oe!==null?P=Xs(oe,P):(P=Mo(P,E,c,null),P.flags|=2),P.return=r,d.return=r,d.sibling=P,r.child=d,Tc(null,d),d=r.child,P=t.child.memoizedState,P===null?P=Ud(c):(E=P.cachePool,E!==null?(K=Qn._currentValue,E=E.parent!==K?{parent:K,pool:K}:E):E=Fg(),P={baseLanes:P.baseLanes|c,cachePool:E}),d.memoizedState=P,d.childLanes=Fd(t,R,c),r.memoizedState=Vd,Tc(t.child,d)):(Ba(r),c=t.child,t=c.sibling,c=Xs(c,{mode:"visible",children:d.children}),c.return=r,c.sibling=null,t!==null&&(R=r.deletions,R===null?(r.deletions=[t],r.flags|=16):R.push(t)),r.child=c,r.memoizedState=null,c)}function zd(t,r){return r=$u({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function $u(t,r){return t=vr(22,t,null,r),t.lanes=0,t}function Hd(t,r,c){return Fo(r,t.child,null,c),t=zd(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function $m(t,r,c){t.lanes|=r;var d=t.alternate;d!==null&&(d.lanes|=r),id(t.return,r,c)}function jd(t,r,c,d,E,w){var R=t.memoizedState;R===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:E,treeForkCount:w}:(R.isBackwards=r,R.rendering=null,R.renderingStartTime=0,R.last=d,R.tail=c,R.tailMode=E,R.treeForkCount=w)}function ep(t,r,c){var d=r.pendingProps,E=d.revealOrder,w=d.tail;d=d.children;var R=Xn.current,P=(R&2)!==0;if(P?(R=R&1|2,r.flags|=128):R&=1,Pe(Xn,R),Ri(t,r,d,c),d=Ft?uc:0,!P&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$m(t,c,r);else if(t.tag===19)$m(t,c,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(E){case"forwards":for(c=r.child,E=null;c!==null;)t=c.alternate,t!==null&&zu(t)===null&&(E=c),c=c.sibling;c=E,c===null?(E=r.child,r.child=null):(E=c.sibling,c.sibling=null),jd(r,!1,E,c,w,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,E=r.child,r.child=null;E!==null;){if(t=E.alternate,t!==null&&zu(t)===null){r.child=E;break}t=E.sibling,E.sibling=c,c=E,E=t}jd(r,!0,c,null,w,d);break;case"together":jd(r,!1,null,null,void 0,d);break;default:r.memoizedState=null}return r.child}function Js(t,r,c){if(t!==null&&(r.dependencies=t.dependencies),Fa|=r.lanes,(c&r.childLanes)===0)if(t!==null){if(pl(t,r,c,!1),(c&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(o(153));if(r.child!==null){for(t=r.child,c=Xs(t,t.pendingProps),r.child=c,c.return=r;t.sibling!==null;)t=t.sibling,c=c.sibling=Xs(t,t.pendingProps),c.return=r;c.sibling=null}return r.child}function Gd(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Mu(t)))}function MA(t,r,c){switch(r.tag){case 3:wt(r,r.stateNode.containerInfo),Da(r,Qn,t.memoizedState.cache),Lo();break;case 27:case 5:dr(r);break;case 4:wt(r,r.stateNode.containerInfo);break;case 10:Da(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,md(r),null;break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(Ba(r),r.flags|=128,null):(c&r.child.childLanes)!==0?Jm(t,r,c):(Ba(r),t=Js(t,r,c),t!==null?t.sibling:null);Ba(r);break;case 19:var E=(t.flags&128)!==0;if(d=(c&r.childLanes)!==0,d||(pl(t,r,c,!1),d=(c&r.childLanes)!==0),E){if(d)return ep(t,r,c);r.flags|=128}if(E=r.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Pe(Xn,Xn.current),d)break;return null;case 22:return r.lanes=0,Xm(t,r,c,r.pendingProps);case 24:Da(r,Qn,t.memoizedState.cache)}return Js(t,r,c)}function tp(t,r,c){if(t!==null)if(t.memoizedProps!==r.pendingProps)Jn=!0;else{if(!Gd(t,c)&&(r.flags&128)===0)return Jn=!1,MA(t,r,c);Jn=(t.flags&131072)!==0}else Jn=!1,Ft&&(r.flags&1048576)!==0&&Mg(r,uc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var d=r.pendingProps;if(t=Vo(r.elementType),r.type=t,typeof t=="function")Kf(t)?(d=Ho(t,d),r.tag=1,r=Qm(null,r,t,d,c)):(r.tag=0,r=kd(null,r,t,d,c));else{if(t!=null){var E=t.$$typeof;if(E===pe){r.tag=11,r=jm(null,r,t,d,c);break e}else if(E===B){r.tag=14,r=Gm(null,r,t,d,c);break e}}throw r=Je(t)||t,Error(o(306,r,""))}}return r;case 0:return kd(t,r,r.type,r.pendingProps,c);case 1:return d=r.type,E=Ho(d,r.pendingProps),Qm(t,r,d,E,c);case 3:e:{if(wt(r,r.stateNode.containerInfo),t===null)throw Error(o(387));d=r.pendingProps;var w=r.memoizedState;E=w.element,ud(t,r),Ec(r,d,null,c);var R=r.memoizedState;if(d=R.cache,Da(r,Qn,d),d!==w.cache&&rd(r,[Qn],c,!0),yc(),d=R.element,w.isDehydrated)if(w={element:d,isDehydrated:!1,cache:R.cache},r.updateQueue.baseState=w,r.memoizedState=w,r.flags&256){r=Zm(t,r,d,c);break e}else if(d!==E){E=Gr(Error(o(424)),r),hc(E),r=Zm(t,r,d,c);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(_n=Kr(t.firstChild),bi=r,Ft=!0,Na=null,Yr=!0,c=Xg(r,null,d,c),r.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Lo(),d===E){r=Js(t,r,c);break e}Ri(t,r,d,c)}r=r.child}return r;case 26:return Ju(t,r),t===null?(c=f2(r.type,null,r.pendingProps,null))?r.memoizedState=c:Ft||(c=r.type,t=r.pendingProps,d=mh(De.current).createElement(c),d[Tn]=r,d[jt]=t,Ni(d,c,t),Cn(d),r.stateNode=d):r.memoizedState=f2(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return dr(r),t===null&&Ft&&(d=r.stateNode=c2(r.type,r.pendingProps,De.current),bi=r,Yr=!0,E=_n,qa(r.type)?(T1=E,_n=Kr(d.firstChild)):_n=E),Ri(t,r,r.pendingProps.children,c),Ju(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Ft&&((E=d=_n)&&(d=cw(d,r.type,r.pendingProps,Yr),d!==null?(r.stateNode=d,bi=r,_n=Kr(d.firstChild),Yr=!1,E=!0):E=!1),E||Oa(r)),dr(r),E=r.type,w=r.pendingProps,R=t!==null?t.memoizedProps:null,d=w.children,E1(E,w)?d=null:R!==null&&E1(E,R)&&(r.flags|=32),r.memoizedState!==null&&(E=yd(t,r,CA,null,null,c),Vc._currentValue=E),Ju(t,r),Ri(t,r,d,c),r.child;case 6:return t===null&&Ft&&((t=c=_n)&&(c=uw(c,r.pendingProps,Yr),c!==null?(r.stateNode=c,bi=r,_n=null,t=!0):t=!1),t||Oa(r)),null;case 13:return Jm(t,r,c);case 4:return wt(r,r.stateNode.containerInfo),d=r.pendingProps,t===null?r.child=Fo(r,null,d,c):Ri(t,r,d,c),r.child;case 11:return jm(t,r,r.type,r.pendingProps,c);case 7:return Ri(t,r,r.pendingProps,c),r.child;case 8:return Ri(t,r,r.pendingProps.children,c),r.child;case 12:return Ri(t,r,r.pendingProps.children,c),r.child;case 10:return d=r.pendingProps,Da(r,r.type,d.value),Ri(t,r,d.children,c),r.child;case 9:return E=r.type._context,d=r.pendingProps.children,Bo(r),E=Ii(E),d=d(E),r.flags|=1,Ri(t,r,d,c),r.child;case 14:return Gm(t,r,r.type,r.pendingProps,c);case 15:return qm(t,r,r.type,r.pendingProps,c);case 19:return ep(t,r,c);case 31:return DA(t,r,c);case 22:return Xm(t,r,c,r.pendingProps);case 24:return Bo(r),d=Ii(Qn),t===null?(E=od(),E===null&&(E=gn,w=sd(),E.pooledCache=w,w.refCount++,w!==null&&(E.pooledCacheLanes|=c),E=w),r.memoizedState={parent:d,cache:E},cd(r),Da(r,Qn,E)):((t.lanes&c)!==0&&(ud(t,r),Ec(r,null,null,c),yc()),E=t.memoizedState,w=r.memoizedState,E.parent!==d?(E={parent:d,cache:d},r.memoizedState=E,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=E),Da(r,Qn,d)):(d=w.cache,Da(r,Qn,d),d!==E.cache&&rd(r,[Qn],c,!0))),Ri(t,r,r.pendingProps.children,c),r.child;case 29:throw r.pendingProps}throw Error(o(156,r.tag))}function $s(t){t.flags|=4}function qd(t,r,c,d,E){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(E&335544128)===E)if(t.stateNode.complete)t.flags|=8192;else if(Ip())t.flags|=8192;else throw Uo=ku,ld}else t.flags&=-16777217}function np(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!y2(r))if(Ip())t.flags|=8192;else throw Uo=ku,ld}function eh(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Gn():536870912,t.lanes|=r,Il|=r)}function Cc(t,r){if(!Ft)switch(t.tailMode){case"hidden":r=t.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?t.tail=null:c.sibling=null;break;case"collapsed":c=t.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:d.sibling=null}}function xn(t){var r=t.alternate!==null&&t.alternate.child===t.child,c=0,d=0;if(r)for(var E=t.child;E!==null;)c|=E.lanes|E.childLanes,d|=E.subtreeFlags&65011712,d|=E.flags&65011712,E.return=t,E=E.sibling;else for(E=t.child;E!==null;)c|=E.lanes|E.childLanes,d|=E.subtreeFlags,d|=E.flags,E.return=t,E=E.sibling;return t.subtreeFlags|=d,t.childLanes=c,r}function LA(t,r,c){var d=r.pendingProps;switch($f(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xn(r),null;case 1:return xn(r),null;case 3:return c=r.stateNode,d=null,t!==null&&(d=t.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),Ks(Qn),Jt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(ml(r)?$s(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,td())),xn(r),null;case 26:var E=r.type,w=r.memoizedState;return t===null?($s(r),w!==null?(xn(r),np(r,w)):(xn(r),qd(r,E,null,d,c))):w?w!==t.memoizedState?($s(r),xn(r),np(r,w)):(xn(r),r.flags&=-16777217):(t=t.memoizedProps,t!==d&&$s(r),xn(r),qd(r,E,t,d,c)),null;case 27:if(jn(r),c=De.current,E=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==d&&$s(r);else{if(!d){if(r.stateNode===null)throw Error(o(166));return xn(r),null}t=Be.current,ml(r)?Pg(r):(t=c2(E,d,c),r.stateNode=t,$s(r))}return xn(r),null;case 5:if(jn(r),E=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==d&&$s(r);else{if(!d){if(r.stateNode===null)throw Error(o(166));return xn(r),null}if(w=Be.current,ml(r))Pg(r);else{var R=mh(De.current);switch(w){case 1:w=R.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:w=R.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":w=R.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":w=R.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":w=R.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof d.is=="string"?R.createElement("select",{is:d.is}):R.createElement("select"),d.multiple?w.multiple=!0:d.size&&(w.size=d.size);break;default:w=typeof d.is=="string"?R.createElement(E,{is:d.is}):R.createElement(E)}}w[Tn]=r,w[jt]=d;e:for(R=r.child;R!==null;){if(R.tag===5||R.tag===6)w.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===r)break e;for(;R.sibling===null;){if(R.return===null||R.return===r)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}r.stateNode=w;e:switch(Ni(w,E,d),E){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&$s(r)}}return xn(r),qd(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,c),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==d&&$s(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(o(166));if(t=De.current,ml(r)){if(t=r.stateNode,c=r.memoizedProps,d=null,E=bi,E!==null)switch(E.tag){case 27:case 5:d=E.memoizedProps}t[Tn]=r,t=!!(t.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||Jp(t.nodeValue,c)),t||Oa(r,!0)}else t=mh(t).createTextNode(d),t[Tn]=r,r.stateNode=t}return xn(r),null;case 31:if(c=r.memoizedState,t===null||t.memoizedState!==null){if(d=ml(r),c!==null){if(t===null){if(!d)throw Error(o(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[Tn]=r}else Lo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;xn(r),t=!1}else c=td(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),t=!0;if(!t)return r.flags&256?(br(r),r):(br(r),null);if((r.flags&128)!==0)throw Error(o(558))}return xn(r),null;case 13:if(d=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(E=ml(r),d!==null&&d.dehydrated!==null){if(t===null){if(!E)throw Error(o(318));if(E=r.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(o(317));E[Tn]=r}else Lo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;xn(r),E=!1}else E=td(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=E),E=!0;if(!E)return r.flags&256?(br(r),r):(br(r),null)}return br(r),(r.flags&128)!==0?(r.lanes=c,r):(c=d!==null,t=t!==null&&t.memoizedState!==null,c&&(d=r.child,E=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(E=d.alternate.memoizedState.cachePool.pool),w=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(w=d.memoizedState.cachePool.pool),w!==E&&(d.flags|=2048)),c!==t&&c&&(r.child.flags|=8192),eh(r,r.updateQueue),xn(r),null);case 4:return Jt(),t===null&&d1(r.stateNode.containerInfo),xn(r),null;case 10:return Ks(r.type),xn(r),null;case 19:if(ge(Xn),d=r.memoizedState,d===null)return xn(r),null;if(E=(r.flags&128)!==0,w=d.rendering,w===null)if(E)Cc(d,!1);else{if(Un!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(w=zu(t),w!==null){for(r.flags|=128,Cc(d,!1),t=w.updateQueue,r.updateQueue=t,eh(r,t),r.subtreeFlags=0,t=c,c=r.child;c!==null;)Ng(c,t),c=c.sibling;return Pe(Xn,Xn.current&1|2),Ft&&Ys(r,d.treeForkCount),r.child}t=t.sibling}d.tail!==null&&yn()>sh&&(r.flags|=128,E=!0,Cc(d,!1),r.lanes=4194304)}else{if(!E)if(t=zu(w),t!==null){if(r.flags|=128,E=!0,t=t.updateQueue,r.updateQueue=t,eh(r,t),Cc(d,!0),d.tail===null&&d.tailMode==="hidden"&&!w.alternate&&!Ft)return xn(r),null}else 2*yn()-d.renderingStartTime>sh&&c!==536870912&&(r.flags|=128,E=!0,Cc(d,!1),r.lanes=4194304);d.isBackwards?(w.sibling=r.child,r.child=w):(t=d.last,t!==null?t.sibling=w:r.child=w,d.last=w)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=yn(),t.sibling=null,c=Xn.current,Pe(Xn,E?c&1|2:c&1),Ft&&Ys(r,d.treeForkCount),t):(xn(r),null);case 22:case 23:return br(r),gd(),d=r.memoizedState!==null,t!==null?t.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(c&536870912)!==0&&(r.flags&128)===0&&(xn(r),r.subtreeFlags&6&&(r.flags|=8192)):xn(r),c=r.updateQueue,c!==null&&eh(r,c.retryQueue),c=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==c&&(r.flags|=2048),t!==null&&ge(ko),null;case 24:return c=null,t!==null&&(c=t.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Ks(Qn),xn(r),null;case 25:return null;case 30:return null}throw Error(o(156,r.tag))}function PA(t,r){switch($f(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Ks(Qn),Jt(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return jn(r),null;case 31:if(r.memoizedState!==null){if(br(r),r.alternate===null)throw Error(o(340));Lo()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(br(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(o(340));Lo()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return ge(Xn),null;case 4:return Jt(),null;case 10:return Ks(r.type),null;case 22:case 23:return br(r),gd(),t!==null&&ge(ko),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Ks(Qn),null;case 25:return null;default:return null}}function ip(t,r){switch($f(r),r.tag){case 3:Ks(Qn),Jt();break;case 26:case 27:case 5:jn(r);break;case 4:Jt();break;case 31:r.memoizedState!==null&&br(r);break;case 13:br(r);break;case 19:ge(Xn);break;case 10:Ks(r.type);break;case 22:case 23:br(r),gd(),t!==null&&ge(ko);break;case 24:Ks(Qn)}}function vc(t,r){try{var c=r.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var E=d.next;c=E;do{if((c.tag&t)===t){d=void 0;var w=c.create,R=c.inst;d=w(),R.destroy=d}c=c.next}while(c!==E)}}catch(P){sn(r,r.return,P)}}function Va(t,r,c){try{var d=r.updateQueue,E=d!==null?d.lastEffect:null;if(E!==null){var w=E.next;d=w;do{if((d.tag&t)===t){var R=d.inst,P=R.destroy;if(P!==void 0){R.destroy=void 0,E=r;var K=c,oe=P;try{oe()}catch(xe){sn(E,K,xe)}}}d=d.next}while(d!==w)}}catch(xe){sn(r,r.return,xe)}}function rp(t){var r=t.updateQueue;if(r!==null){var c=t.stateNode;try{Wg(r,c)}catch(d){sn(t,t.return,d)}}}function sp(t,r,c){c.props=Ho(t.type,t.memoizedProps),c.state=t.memoizedState;try{c.componentWillUnmount()}catch(d){sn(t,r,d)}}function Sc(t,r){try{var c=t.ref;if(c!==null){switch(t.tag){case 26:case 27:case 5:var d=t.stateNode;break;case 30:d=t.stateNode;break;default:d=t.stateNode}typeof c=="function"?t.refCleanup=c(d):c.current=d}}catch(E){sn(t,r,E)}}function As(t,r){var c=t.ref,d=t.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(E){sn(t,r,E)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(E){sn(t,r,E)}else c.current=null}function ap(t){var r=t.type,c=t.memoizedProps,d=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(E){sn(t,t.return,E)}}function Xd(t,r,c){try{var d=t.stateNode;iw(d,t.type,c,r),d[jt]=r}catch(E){sn(t,t.return,E)}}function op(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&qa(t.type)||t.tag===4}function Yd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||op(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&qa(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wd(t,r,c){var d=t.tag;if(d===5||d===6)t=t.stateNode,r?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(t,r):(r=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,r.appendChild(t),c=c._reactRootContainer,c!=null||r.onclick!==null||(r.onclick=Vi));else if(d!==4&&(d===27&&qa(t.type)&&(c=t.stateNode,r=null),t=t.child,t!==null))for(Wd(t,r,c),t=t.sibling;t!==null;)Wd(t,r,c),t=t.sibling}function th(t,r,c){var d=t.tag;if(d===5||d===6)t=t.stateNode,r?c.insertBefore(t,r):c.appendChild(t);else if(d!==4&&(d===27&&qa(t.type)&&(c=t.stateNode),t=t.child,t!==null))for(th(t,r,c),t=t.sibling;t!==null;)th(t,r,c),t=t.sibling}function lp(t){var r=t.stateNode,c=t.memoizedProps;try{for(var d=t.type,E=r.attributes;E.length;)r.removeAttributeNode(E[0]);Ni(r,d,c),r[Tn]=t,r[jt]=c}catch(w){sn(t,t.return,w)}}var ea=!1,$n=!1,Kd=!1,cp=typeof WeakSet=="function"?WeakSet:Set,di=null;function BA(t,r){if(t=t.containerInfo,p1=wh,t=M(t),L(t)){if("selectionStart"in t)var c={start:t.selectionStart,end:t.selectionEnd};else e:{c=(c=t.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var E=d.anchorOffset,w=d.focusNode;d=d.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var R=0,P=-1,K=-1,oe=0,xe=0,Ce=t,ue=null;t:for(;;){for(var Ee;Ce!==c||E!==0&&Ce.nodeType!==3||(P=R+E),Ce!==w||d!==0&&Ce.nodeType!==3||(K=R+d),Ce.nodeType===3&&(R+=Ce.nodeValue.length),(Ee=Ce.firstChild)!==null;)ue=Ce,Ce=Ee;for(;;){if(Ce===t)break t;if(ue===c&&++oe===E&&(P=R),ue===w&&++xe===d&&(K=R),(Ee=Ce.nextSibling)!==null)break;Ce=ue,ue=Ce.parentNode}Ce=Ee}c=P===-1||K===-1?null:{start:P,end:K}}else c=null}c=c||{start:0,end:0}}else c=null;for(y1={focusedElem:t,selectionRange:c},wh=!1,di=r;di!==null;)if(r=di,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,di=t;else for(;di!==null;){switch(r=di,w=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(c=0;c<t.length;c++)E=t[c],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&w!==null){t=void 0,c=r,E=w.memoizedProps,w=w.memoizedState,d=c.stateNode;try{var qe=Ho(c.type,E);t=d.getSnapshotBeforeUpdate(qe,w),d.__reactInternalSnapshotBeforeUpdate=t}catch(nt){sn(c,c.return,nt)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,c=t.nodeType,c===9)x1(t);else if(c===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":x1(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=r.sibling,t!==null){t.return=r.return,di=t;break}di=r.return}}function up(t,r,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:na(t,c),d&4&&vc(5,c);break;case 1:if(na(t,c),d&4)if(t=c.stateNode,r===null)try{t.componentDidMount()}catch(R){sn(c,c.return,R)}else{var E=Ho(c.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(E,r,t.__reactInternalSnapshotBeforeUpdate)}catch(R){sn(c,c.return,R)}}d&64&&rp(c),d&512&&Sc(c,c.return);break;case 3:if(na(t,c),d&64&&(t=c.updateQueue,t!==null)){if(r=null,c.child!==null)switch(c.child.tag){case 27:case 5:r=c.child.stateNode;break;case 1:r=c.child.stateNode}try{Wg(t,r)}catch(R){sn(c,c.return,R)}}break;case 27:r===null&&d&4&&lp(c);case 26:case 5:na(t,c),r===null&&d&4&&ap(c),d&512&&Sc(c,c.return);break;case 12:na(t,c);break;case 31:na(t,c),d&4&&dp(t,c);break;case 13:na(t,c),d&4&&gp(t,c),d&64&&(t=c.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(c=qA.bind(null,c),hw(t,c))));break;case 22:if(d=c.memoizedState!==null||ea,!d){r=r!==null&&r.memoizedState!==null||$n,E=ea;var w=$n;ea=d,($n=r)&&!w?ia(t,c,(c.subtreeFlags&8772)!==0):na(t,c),ea=E,$n=w}break;case 30:break;default:na(t,c)}}function hp(t){var r=t.alternate;r!==null&&(t.alternate=null,hp(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&wi(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Rn=null,sr=!1;function ta(t,r,c){for(c=c.child;c!==null;)fp(t,r,c),c=c.sibling}function fp(t,r,c){if(Ne&&typeof Ne.onCommitFiberUnmount=="function")try{Ne.onCommitFiberUnmount(Xt,c)}catch{}switch(c.tag){case 26:$n||As(c,r),ta(t,r,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:$n||As(c,r);var d=Rn,E=sr;qa(c.type)&&(Rn=c.stateNode,sr=!1),ta(t,r,c),Pc(c.stateNode),Rn=d,sr=E;break;case 5:$n||As(c,r);case 6:if(d=Rn,E=sr,Rn=null,ta(t,r,c),Rn=d,sr=E,Rn!==null)if(sr)try{(Rn.nodeType===9?Rn.body:Rn.nodeName==="HTML"?Rn.ownerDocument.body:Rn).removeChild(c.stateNode)}catch(w){sn(c,r,w)}else try{Rn.removeChild(c.stateNode)}catch(w){sn(c,r,w)}break;case 18:Rn!==null&&(sr?(t=Rn,r2(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,c.stateNode),Bl(t)):r2(Rn,c.stateNode));break;case 4:d=Rn,E=sr,Rn=c.stateNode.containerInfo,sr=!0,ta(t,r,c),Rn=d,sr=E;break;case 0:case 11:case 14:case 15:Va(2,c,r),$n||Va(4,c,r),ta(t,r,c);break;case 1:$n||(As(c,r),d=c.stateNode,typeof d.componentWillUnmount=="function"&&sp(c,r,d)),ta(t,r,c);break;case 21:ta(t,r,c);break;case 22:$n=(d=$n)||c.memoizedState!==null,ta(t,r,c),$n=d;break;default:ta(t,r,c)}}function dp(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Bl(t)}catch(c){sn(r,r.return,c)}}}function gp(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Bl(t)}catch(c){sn(r,r.return,c)}}function kA(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new cp),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new cp),r;default:throw Error(o(435,t.tag))}}function nh(t,r){var c=kA(t);r.forEach(function(d){if(!c.has(d)){c.add(d);var E=XA.bind(null,t,d);d.then(E,E)}})}function ar(t,r){var c=r.deletions;if(c!==null)for(var d=0;d<c.length;d++){var E=c[d],w=t,R=r,P=R;e:for(;P!==null;){switch(P.tag){case 27:if(qa(P.type)){Rn=P.stateNode,sr=!1;break e}break;case 5:Rn=P.stateNode,sr=!1;break e;case 3:case 4:Rn=P.stateNode.containerInfo,sr=!0;break e}P=P.return}if(Rn===null)throw Error(o(160));fp(w,R,E),Rn=null,sr=!1,w=E.alternate,w!==null&&(w.return=null),E.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)mp(r,t),r=r.sibling}var ls=null;function mp(t,r){var c=t.alternate,d=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ar(r,t),or(t),d&4&&(Va(3,t,t.return),vc(3,t),Va(5,t,t.return));break;case 1:ar(r,t),or(t),d&512&&($n||c===null||As(c,c.return)),d&64&&ea&&(t=t.updateQueue,t!==null&&(d=t.callbacks,d!==null&&(c=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var E=ls;if(ar(r,t),or(t),d&512&&($n||c===null||As(c,c.return)),d&4){var w=c!==null?c.memoizedState:null;if(d=t.memoizedState,c===null)if(d===null)if(t.stateNode===null){e:{d=t.type,c=t.memoizedProps,E=E.ownerDocument||E;t:switch(d){case"title":w=E.getElementsByTagName("title")[0],(!w||w[Pr]||w[Tn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=E.createElement(d),E.head.insertBefore(w,E.querySelector("head > title"))),Ni(w,d,c),w[Tn]=t,Cn(w),d=w;break e;case"link":var R=m2("link","href",E).get(d+(c.href||""));if(R){for(var P=0;P<R.length;P++)if(w=R[P],w.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&w.getAttribute("rel")===(c.rel==null?null:c.rel)&&w.getAttribute("title")===(c.title==null?null:c.title)&&w.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){R.splice(P,1);break t}}w=E.createElement(d),Ni(w,d,c),E.head.appendChild(w);break;case"meta":if(R=m2("meta","content",E).get(d+(c.content||""))){for(P=0;P<R.length;P++)if(w=R[P],w.getAttribute("content")===(c.content==null?null:""+c.content)&&w.getAttribute("name")===(c.name==null?null:c.name)&&w.getAttribute("property")===(c.property==null?null:c.property)&&w.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&w.getAttribute("charset")===(c.charSet==null?null:c.charSet)){R.splice(P,1);break t}}w=E.createElement(d),Ni(w,d,c),E.head.appendChild(w);break;default:throw Error(o(468,d))}w[Tn]=t,Cn(w),d=w}t.stateNode=d}else p2(E,t.type,t.stateNode);else t.stateNode=g2(E,d,t.memoizedProps);else w!==d?(w===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):w.count--,d===null?p2(E,t.type,t.stateNode):g2(E,d,t.memoizedProps)):d===null&&t.stateNode!==null&&Xd(t,t.memoizedProps,c.memoizedProps)}break;case 27:ar(r,t),or(t),d&512&&($n||c===null||As(c,c.return)),c!==null&&d&4&&Xd(t,t.memoizedProps,c.memoizedProps);break;case 5:if(ar(r,t),or(t),d&512&&($n||c===null||As(c,c.return)),t.flags&32){E=t.stateNode;try{ki(E,"")}catch(qe){sn(t,t.return,qe)}}d&4&&t.stateNode!=null&&(E=t.memoizedProps,Xd(t,E,c!==null?c.memoizedProps:E)),d&1024&&(Kd=!0);break;case 6:if(ar(r,t),or(t),d&4){if(t.stateNode===null)throw Error(o(162));d=t.memoizedProps,c=t.stateNode;try{c.nodeValue=d}catch(qe){sn(t,t.return,qe)}}break;case 3:if(Eh=null,E=ls,ls=ph(r.containerInfo),ar(r,t),ls=E,or(t),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Bl(r.containerInfo)}catch(qe){sn(t,t.return,qe)}Kd&&(Kd=!1,pp(t));break;case 4:d=ls,ls=ph(t.stateNode.containerInfo),ar(r,t),or(t),ls=d;break;case 12:ar(r,t),or(t);break;case 31:ar(r,t),or(t),d&4&&(d=t.updateQueue,d!==null&&(t.updateQueue=null,nh(t,d)));break;case 13:ar(r,t),or(t),t.child.flags&8192&&t.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(rh=yn()),d&4&&(d=t.updateQueue,d!==null&&(t.updateQueue=null,nh(t,d)));break;case 22:E=t.memoizedState!==null;var K=c!==null&&c.memoizedState!==null,oe=ea,xe=$n;if(ea=oe||E,$n=xe||K,ar(r,t),$n=xe,ea=oe,or(t),d&8192)e:for(r=t.stateNode,r._visibility=E?r._visibility&-2:r._visibility|1,E&&(c===null||K||ea||$n||jo(t)),c=null,r=t;;){if(r.tag===5||r.tag===26){if(c===null){K=c=r;try{if(w=K.stateNode,E)R=w.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{P=K.stateNode;var Ce=K.memoizedProps.style,ue=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;P.style.display=ue==null||typeof ue=="boolean"?"":(""+ue).trim()}}catch(qe){sn(K,K.return,qe)}}}else if(r.tag===6){if(c===null){K=r;try{K.stateNode.nodeValue=E?"":K.memoizedProps}catch(qe){sn(K,K.return,qe)}}}else if(r.tag===18){if(c===null){K=r;try{var Ee=K.stateNode;E?s2(Ee,!0):s2(K.stateNode,!1)}catch(qe){sn(K,K.return,qe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;c===r&&(c=null),r=r.return}c===r&&(c=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=t.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,nh(t,c))));break;case 19:ar(r,t),or(t),d&4&&(d=t.updateQueue,d!==null&&(t.updateQueue=null,nh(t,d)));break;case 30:break;case 21:break;default:ar(r,t),or(t)}}function or(t){var r=t.flags;if(r&2){try{for(var c,d=t.return;d!==null;){if(op(d)){c=d;break}d=d.return}if(c==null)throw Error(o(160));switch(c.tag){case 27:var E=c.stateNode,w=Yd(t);th(t,w,E);break;case 5:var R=c.stateNode;c.flags&32&&(ki(R,""),c.flags&=-33);var P=Yd(t);th(t,P,R);break;case 3:case 4:var K=c.stateNode.containerInfo,oe=Yd(t);Wd(t,oe,K);break;default:throw Error(o(161))}}catch(xe){sn(t,t.return,xe)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function pp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;pp(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function na(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)up(t,r.alternate,r),r=r.sibling}function jo(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Va(4,r,r.return),jo(r);break;case 1:As(r,r.return);var c=r.stateNode;typeof c.componentWillUnmount=="function"&&sp(r,r.return,c),jo(r);break;case 27:Pc(r.stateNode);case 26:case 5:As(r,r.return),jo(r);break;case 22:r.memoizedState===null&&jo(r);break;case 30:jo(r);break;default:jo(r)}t=t.sibling}}function ia(t,r,c){for(c=c&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,E=t,w=r,R=w.flags;switch(w.tag){case 0:case 11:case 15:ia(E,w,c),vc(4,w);break;case 1:if(ia(E,w,c),d=w,E=d.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(oe){sn(d,d.return,oe)}if(d=w,E=d.updateQueue,E!==null){var P=d.stateNode;try{var K=E.shared.hiddenCallbacks;if(K!==null)for(E.shared.hiddenCallbacks=null,E=0;E<K.length;E++)Yg(K[E],P)}catch(oe){sn(d,d.return,oe)}}c&&R&64&&rp(w),Sc(w,w.return);break;case 27:lp(w);case 26:case 5:ia(E,w,c),c&&d===null&&R&4&&ap(w),Sc(w,w.return);break;case 12:ia(E,w,c);break;case 31:ia(E,w,c),c&&R&4&&dp(E,w);break;case 13:ia(E,w,c),c&&R&4&&gp(E,w);break;case 22:w.memoizedState===null&&ia(E,w,c),Sc(w,w.return);break;case 30:break;default:ia(E,w,c)}r=r.sibling}}function Qd(t,r){var c=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==c&&(t!=null&&t.refCount++,c!=null&&fc(c))}function Zd(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&fc(t))}function cs(t,r,c,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)yp(t,r,c,d),r=r.sibling}function yp(t,r,c,d){var E=r.flags;switch(r.tag){case 0:case 11:case 15:cs(t,r,c,d),E&2048&&vc(9,r);break;case 1:cs(t,r,c,d);break;case 3:cs(t,r,c,d),E&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&fc(t)));break;case 12:if(E&2048){cs(t,r,c,d),t=r.stateNode;try{var w=r.memoizedProps,R=w.id,P=w.onPostCommit;typeof P=="function"&&P(R,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(K){sn(r,r.return,K)}}else cs(t,r,c,d);break;case 31:cs(t,r,c,d);break;case 13:cs(t,r,c,d);break;case 23:break;case 22:w=r.stateNode,R=r.alternate,r.memoizedState!==null?w._visibility&2?cs(t,r,c,d):bc(t,r):w._visibility&2?cs(t,r,c,d):(w._visibility|=2,vl(t,r,c,d,(r.subtreeFlags&10256)!==0||!1)),E&2048&&Qd(R,r);break;case 24:cs(t,r,c,d),E&2048&&Zd(r.alternate,r);break;default:cs(t,r,c,d)}}function vl(t,r,c,d,E){for(E=E&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var w=t,R=r,P=c,K=d,oe=R.flags;switch(R.tag){case 0:case 11:case 15:vl(w,R,P,K,E),vc(8,R);break;case 23:break;case 22:var xe=R.stateNode;R.memoizedState!==null?xe._visibility&2?vl(w,R,P,K,E):bc(w,R):(xe._visibility|=2,vl(w,R,P,K,E)),E&&oe&2048&&Qd(R.alternate,R);break;case 24:vl(w,R,P,K,E),E&&oe&2048&&Zd(R.alternate,R);break;default:vl(w,R,P,K,E)}r=r.sibling}}function bc(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var c=t,d=r,E=d.flags;switch(d.tag){case 22:bc(c,d),E&2048&&Qd(d.alternate,d);break;case 24:bc(c,d),E&2048&&Zd(d.alternate,d);break;default:bc(c,d)}r=r.sibling}}var Ic=8192;function Sl(t,r,c){if(t.subtreeFlags&Ic)for(t=t.child;t!==null;)Ep(t,r,c),t=t.sibling}function Ep(t,r,c){switch(t.tag){case 26:Sl(t,r,c),t.flags&Ic&&t.memoizedState!==null&&Tw(c,ls,t.memoizedState,t.memoizedProps);break;case 5:Sl(t,r,c);break;case 3:case 4:var d=ls;ls=ph(t.stateNode.containerInfo),Sl(t,r,c),ls=d;break;case 22:t.memoizedState===null&&(d=t.alternate,d!==null&&d.memoizedState!==null?(d=Ic,Ic=16777216,Sl(t,r,c),Ic=d):Sl(t,r,c));break;default:Sl(t,r,c)}}function _p(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Rc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var d=r[c];di=d,Ap(d,t)}_p(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)xp(t),t=t.sibling}function xp(t){switch(t.tag){case 0:case 11:case 15:Rc(t),t.flags&2048&&Va(9,t,t.return);break;case 3:Rc(t);break;case 12:Rc(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,ih(t)):Rc(t);break;default:Rc(t)}}function ih(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var d=r[c];di=d,Ap(d,t)}_p(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Va(8,r,r.return),ih(r);break;case 22:c=r.stateNode,c._visibility&2&&(c._visibility&=-3,ih(r));break;default:ih(r)}t=t.sibling}}function Ap(t,r){for(;di!==null;){var c=di;switch(c.tag){case 0:case 11:case 15:Va(8,c,r);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:fc(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,di=d;else e:for(c=t;di!==null;){d=di;var E=d.sibling,w=d.return;if(hp(d),d===c){di=null;break e}if(E!==null){E.return=w,di=E;break e}di=w}}}var VA={getCacheForType:function(t){var r=Ii(Qn),c=r.data.get(t);return c===void 0&&(c=t(),r.data.set(t,c)),c},cacheSignal:function(){return Ii(Qn).controller.signal}},UA=typeof WeakMap=="function"?WeakMap:Map,Zt=0,gn=null,Rt=null,Lt=0,rn=0,Ir=null,Ua=!1,bl=!1,Jd=!1,ra=0,Un=0,Fa=0,Go=0,$d=0,Rr=0,Il=0,Nc=null,lr=null,e1=!1,rh=0,wp=0,sh=1/0,ah=null,za=null,oi=0,Ha=null,Rl=null,sa=0,t1=0,n1=null,Tp=null,Oc=0,i1=null;function Nr(){return(Zt&2)!==0&&Lt!==0?Lt&-Lt:he.T!==null?c1():xi()}function Cp(){if(Rr===0)if((Lt&536870912)===0||Ft){var t=xt;xt<<=1,(xt&3932160)===0&&(xt=262144),Rr=t}else Rr=536870912;return t=Sr.current,t!==null&&(t.flags|=32),Rr}function cr(t,r,c){(t===gn&&(rn===2||rn===9)||t.cancelPendingCommit!==null)&&(Nl(t,0),ja(t,Lt,Rr,!1)),Lr(t,c),((Zt&2)===0||t!==gn)&&(t===gn&&((Zt&2)===0&&(Go|=c),Un===4&&ja(t,Lt,Rr,!1)),ws(t))}function vp(t,r,c){if((Zt&6)!==0)throw Error(o(327));var d=!c&&(r&127)===0&&(r&t.expiredLanes)===0||On(t,r),E=d?HA(t,r):s1(t,r,!0),w=d;do{if(E===0){bl&&!d&&ja(t,r,0,!1);break}else{if(c=t.current.alternate,w&&!FA(c)){E=s1(t,r,!1),w=!1;continue}if(E===2){if(w=r,t.errorRecoveryDisabledLanes&w)var R=0;else R=t.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){r=R;e:{var P=t;E=Nc;var K=P.current.memoizedState.isDehydrated;if(K&&(Nl(P,R).flags|=256),R=s1(P,R,!1),R!==2){if(Jd&&!K){P.errorRecoveryDisabledLanes|=w,Go|=w,E=4;break e}w=lr,lr=E,w!==null&&(lr===null?lr=w:lr.push.apply(lr,w))}E=R}if(w=!1,E!==2)continue}}if(E===1){Nl(t,0),ja(t,r,0,!0);break}e:{switch(d=t,w=E,w){case 0:case 1:throw Error(o(345));case 4:if((r&4194048)!==r)break;case 6:ja(d,r,Rr,!Ua);break e;case 2:lr=null;break;case 3:case 5:break;default:throw Error(o(329))}if((r&62914560)===r&&(E=rh+300-yn(),10<E)){if(ja(d,r,Rr,!Ua),yr(d,0,!0)!==0)break e;sa=r,d.timeoutHandle=n2(Sp.bind(null,d,c,lr,ah,e1,r,Rr,Go,Il,Ua,w,"Throttled",-0,0),E);break e}Sp(d,c,lr,ah,e1,r,Rr,Go,Il,Ua,w,null,-0,0)}}break}while(!0);ws(t)}function Sp(t,r,c,d,E,w,R,P,K,oe,xe,Ce,ue,Ee){if(t.timeoutHandle=-1,Ce=r.subtreeFlags,Ce&8192||(Ce&16785408)===16785408){Ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vi},Ep(r,w,Ce);var qe=(w&62914560)===w?rh-yn():(w&4194048)===w?wp-yn():0;if(qe=Cw(Ce,qe),qe!==null){sa=w,t.cancelPendingCommit=qe(Lp.bind(null,t,r,w,c,d,E,R,P,K,xe,Ce,null,ue,Ee)),ja(t,w,R,!oe);return}}Lp(t,r,w,c,d,E,R,P,K)}function FA(t){for(var r=t;;){var c=r.tag;if((c===0||c===11||c===15)&&r.flags&16384&&(c=r.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var E=c[d],w=E.getSnapshot;E=E.value;try{if(!g(w(),E))return!1}catch{return!1}}if(c=r.child,r.subtreeFlags&16384&&c!==null)c.return=r,r=c;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ja(t,r,c,d){r&=~$d,r&=~Go,t.suspendedLanes|=r,t.pingedLanes&=~r,d&&(t.warmLanes|=r),d=t.expirationTimes;for(var E=r;0<E;){var w=31-rt(E),R=1<<w;d[w]=-1,E&=~R}c!==0&&Ms(t,c,r)}function oh(){return(Zt&6)===0?(Dc(0),!1):!0}function r1(){if(Rt!==null){if(rn===0)var t=Rt.return;else t=Rt,Ws=Po=null,xd(t),xl=null,gc=0,t=Rt;for(;t!==null;)ip(t.alternate,t),t=t.return;Rt=null}}function Nl(t,r){var c=t.timeoutHandle;c!==-1&&(t.timeoutHandle=-1,aw(c)),c=t.cancelPendingCommit,c!==null&&(t.cancelPendingCommit=null,c()),sa=0,r1(),gn=t,Rt=c=Xs(t.current,null),Lt=r,rn=0,Ir=null,Ua=!1,bl=On(t,r),Jd=!1,Il=Rr=$d=Go=Fa=Un=0,lr=Nc=null,e1=!1,(r&8)!==0&&(r|=r&32);var d=t.entangledLanes;if(d!==0)for(t=t.entanglements,d&=r;0<d;){var E=31-rt(d),w=1<<E;r|=t[E],d&=~w}return ra=r,Iu(),c}function bp(t,r){gt=null,he.H=wc,r===_l||r===Bu?(r=jg(),rn=3):r===ld?(r=jg(),rn=4):rn=r===Bd?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Ir=r,Rt===null&&(Un=1,Qu(t,Gr(r,t.current)))}function Ip(){var t=Sr.current;return t===null?!0:(Lt&4194048)===Lt?Wr===null:(Lt&62914560)===Lt||(Lt&536870912)!==0?t===Wr:!1}function Rp(){var t=he.H;return he.H=wc,t===null?wc:t}function Np(){var t=he.A;return he.A=VA,t}function lh(){Un=4,Ua||(Lt&4194048)!==Lt&&Sr.current!==null||(bl=!0),(Fa&134217727)===0&&(Go&134217727)===0||gn===null||ja(gn,Lt,Rr,!1)}function s1(t,r,c){var d=Zt;Zt|=2;var E=Rp(),w=Np();(gn!==t||Lt!==r)&&(ah=null,Nl(t,r)),r=!1;var R=Un;e:do try{if(rn!==0&&Rt!==null){var P=Rt,K=Ir;switch(rn){case 8:r1(),R=6;break e;case 3:case 2:case 9:case 6:Sr.current===null&&(r=!0);var oe=rn;if(rn=0,Ir=null,Ol(t,P,K,oe),c&&bl){R=0;break e}break;default:oe=rn,rn=0,Ir=null,Ol(t,P,K,oe)}}zA(),R=Un;break}catch(xe){bp(t,xe)}while(!0);return r&&t.shellSuspendCounter++,Ws=Po=null,Zt=d,he.H=E,he.A=w,Rt===null&&(gn=null,Lt=0,Iu()),R}function zA(){for(;Rt!==null;)Op(Rt)}function HA(t,r){var c=Zt;Zt|=2;var d=Rp(),E=Np();gn!==t||Lt!==r?(ah=null,sh=yn()+500,Nl(t,r)):bl=On(t,r);e:do try{if(rn!==0&&Rt!==null){r=Rt;var w=Ir;t:switch(rn){case 1:rn=0,Ir=null,Ol(t,r,w,1);break;case 2:case 9:if(zg(w)){rn=0,Ir=null,Dp(r);break}r=function(){rn!==2&&rn!==9||gn!==t||(rn=7),ws(t)},w.then(r,r);break e;case 3:rn=7;break e;case 4:rn=5;break e;case 7:zg(w)?(rn=0,Ir=null,Dp(r)):(rn=0,Ir=null,Ol(t,r,w,7));break;case 5:var R=null;switch(Rt.tag){case 26:R=Rt.memoizedState;case 5:case 27:var P=Rt;if(R?y2(R):P.stateNode.complete){rn=0,Ir=null;var K=P.sibling;if(K!==null)Rt=K;else{var oe=P.return;oe!==null?(Rt=oe,ch(oe)):Rt=null}break t}}rn=0,Ir=null,Ol(t,r,w,5);break;case 6:rn=0,Ir=null,Ol(t,r,w,6);break;case 8:r1(),Un=6;break e;default:throw Error(o(462))}}jA();break}catch(xe){bp(t,xe)}while(!0);return Ws=Po=null,he.H=d,he.A=E,Zt=c,Rt!==null?0:(gn=null,Lt=0,Iu(),Un)}function jA(){for(;Rt!==null&&!Ea();)Op(Rt)}function Op(t){var r=tp(t.alternate,t,ra);t.memoizedProps=t.pendingProps,r===null?ch(t):Rt=r}function Dp(t){var r=t,c=r.alternate;switch(r.tag){case 15:case 0:r=Km(c,r,r.pendingProps,r.type,void 0,Lt);break;case 11:r=Km(c,r,r.pendingProps,r.type.render,r.ref,Lt);break;case 5:xd(r);default:ip(c,r),r=Rt=Ng(r,ra),r=tp(c,r,ra)}t.memoizedProps=t.pendingProps,r===null?ch(t):Rt=r}function Ol(t,r,c,d){Ws=Po=null,xd(r),xl=null,gc=0;var E=r.return;try{if(OA(t,E,r,c,Lt)){Un=1,Qu(t,Gr(c,t.current)),Rt=null;return}}catch(w){if(E!==null)throw Rt=E,w;Un=1,Qu(t,Gr(c,t.current)),Rt=null;return}r.flags&32768?(Ft||d===1?t=!0:bl||(Lt&536870912)!==0?t=!1:(Ua=t=!0,(d===2||d===9||d===3||d===6)&&(d=Sr.current,d!==null&&d.tag===13&&(d.flags|=16384))),Mp(r,t)):ch(r)}function ch(t){var r=t;do{if((r.flags&32768)!==0){Mp(r,Ua);return}t=r.return;var c=LA(r.alternate,r,ra);if(c!==null){Rt=c;return}if(r=r.sibling,r!==null){Rt=r;return}Rt=r=t}while(r!==null);Un===0&&(Un=5)}function Mp(t,r){do{var c=PA(t.alternate,t);if(c!==null){c.flags&=32767,Rt=c;return}if(c=t.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!r&&(t=t.sibling,t!==null)){Rt=t;return}Rt=t=c}while(t!==null);Un=6,Rt=null}function Lp(t,r,c,d,E,w,R,P,K){t.cancelPendingCommit=null;do uh();while(oi!==0);if((Zt&6)!==0)throw Error(o(327));if(r!==null){if(r===t.current)throw Error(o(177));if(w=r.lanes|r.childLanes,w|=Yf,$i(t,c,w,R,P,K),t===gn&&(Rt=gn=null,Lt=0),Rl=r,Ha=t,sa=c,t1=w,n1=E,Tp=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,YA(yi,function(){return Up(),null})):(t.callbackNode=null,t.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=he.T,he.T=null,E=_e.p,_e.p=2,R=Zt,Zt|=4;try{BA(t,r,c)}finally{Zt=R,_e.p=E,he.T=d}}oi=1,Pp(),Bp(),kp()}}function Pp(){if(oi===1){oi=0;var t=Ha,r=Rl,c=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||c){c=he.T,he.T=null;var d=_e.p;_e.p=2;var E=Zt;Zt|=4;try{mp(r,t);var w=y1,R=M(t.containerInfo),P=w.focusedElem,K=w.selectionRange;if(R!==P&&P&&P.ownerDocument&&I(P.ownerDocument.documentElement,P)){if(K!==null&&L(P)){var oe=K.start,xe=K.end;if(xe===void 0&&(xe=oe),"selectionStart"in P)P.selectionStart=oe,P.selectionEnd=Math.min(xe,P.value.length);else{var Ce=P.ownerDocument||document,ue=Ce&&Ce.defaultView||window;if(ue.getSelection){var Ee=ue.getSelection(),qe=P.textContent.length,nt=Math.min(K.start,qe),cn=K.end===void 0?nt:Math.min(K.end,qe);!Ee.extend&&nt>cn&&(R=cn,cn=nt,nt=R);var te=C(P,nt),$=C(P,cn);if(te&&$&&(Ee.rangeCount!==1||Ee.anchorNode!==te.node||Ee.anchorOffset!==te.offset||Ee.focusNode!==$.node||Ee.focusOffset!==$.offset)){var ae=Ce.createRange();ae.setStart(te.node,te.offset),Ee.removeAllRanges(),nt>cn?(Ee.addRange(ae),Ee.extend($.node,$.offset)):(ae.setEnd($.node,$.offset),Ee.addRange(ae))}}}}for(Ce=[],Ee=P;Ee=Ee.parentNode;)Ee.nodeType===1&&Ce.push({element:Ee,left:Ee.scrollLeft,top:Ee.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<Ce.length;P++){var Ae=Ce[P];Ae.element.scrollLeft=Ae.left,Ae.element.scrollTop=Ae.top}}wh=!!p1,y1=p1=null}finally{Zt=E,_e.p=d,he.T=c}}t.current=r,oi=2}}function Bp(){if(oi===2){oi=0;var t=Ha,r=Rl,c=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||c){c=he.T,he.T=null;var d=_e.p;_e.p=2;var E=Zt;Zt|=4;try{up(t,r.alternate,r)}finally{Zt=E,_e.p=d,he.T=c}}oi=3}}function kp(){if(oi===4||oi===3){oi=0,xo();var t=Ha,r=Rl,c=sa,d=Tp;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?oi=5:(oi=0,Rl=Ha=null,Vp(t,t.pendingLanes));var E=t.pendingLanes;if(E===0&&(za=null),_i(c),r=r.stateNode,Ne&&typeof Ne.onCommitFiberRoot=="function")try{Ne.onCommitFiberRoot(Xt,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=he.T,E=_e.p,_e.p=2,he.T=null;try{for(var w=t.onRecoverableError,R=0;R<d.length;R++){var P=d[R];w(P.value,{componentStack:P.stack})}}finally{he.T=r,_e.p=E}}(sa&3)!==0&&uh(),ws(t),E=t.pendingLanes,(c&261930)!==0&&(E&42)!==0?t===i1?Oc++:(Oc=0,i1=t):Oc=0,Dc(0)}}function Vp(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,fc(r)))}function uh(){return Pp(),Bp(),kp(),Up()}function Up(){if(oi!==5)return!1;var t=Ha,r=t1;t1=0;var c=_i(sa),d=he.T,E=_e.p;try{_e.p=32>c?32:c,he.T=null,c=n1,n1=null;var w=Ha,R=sa;if(oi=0,Rl=Ha=null,sa=0,(Zt&6)!==0)throw Error(o(331));var P=Zt;if(Zt|=4,xp(w.current),yp(w,w.current,R,c),Zt=P,Dc(0,!1),Ne&&typeof Ne.onPostCommitFiberRoot=="function")try{Ne.onPostCommitFiberRoot(Xt,w)}catch{}return!0}finally{_e.p=E,he.T=d,Vp(t,r)}}function Fp(t,r,c){r=Gr(c,r),r=Pd(t.stateNode,r,2),t=Pa(t,r,2),t!==null&&(Lr(t,2),ws(t))}function sn(t,r,c){if(t.tag===3)Fp(t,t,c);else for(;r!==null;){if(r.tag===3){Fp(r,t,c);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(za===null||!za.has(d))){t=Gr(c,t),c=zm(2),d=Pa(r,c,2),d!==null&&(Hm(c,d,r,t),Lr(d,2),ws(d));break}}r=r.return}}function a1(t,r,c){var d=t.pingCache;if(d===null){d=t.pingCache=new UA;var E=new Set;d.set(r,E)}else E=d.get(r),E===void 0&&(E=new Set,d.set(r,E));E.has(c)||(Jd=!0,E.add(c),t=GA.bind(null,t,r,c),r.then(t,t))}function GA(t,r,c){var d=t.pingCache;d!==null&&d.delete(r),t.pingedLanes|=t.suspendedLanes&c,t.warmLanes&=~c,gn===t&&(Lt&c)===c&&(Un===4||Un===3&&(Lt&62914560)===Lt&&300>yn()-rh?(Zt&2)===0&&Nl(t,0):$d|=c,Il===Lt&&(Il=0)),ws(t)}function zp(t,r){r===0&&(r=Gn()),t=Do(t,r),t!==null&&(Lr(t,r),ws(t))}function qA(t){var r=t.memoizedState,c=0;r!==null&&(c=r.retryLane),zp(t,c)}function XA(t,r){var c=0;switch(t.tag){case 31:case 13:var d=t.stateNode,E=t.memoizedState;E!==null&&(c=E.retryLane);break;case 19:d=t.stateNode;break;case 22:d=t.stateNode._retryCache;break;default:throw Error(o(314))}d!==null&&d.delete(r),zp(t,c)}function YA(t,r){return wn(t,r)}var hh=null,Dl=null,o1=!1,fh=!1,l1=!1,Ga=0;function ws(t){t!==Dl&&t.next===null&&(Dl===null?hh=Dl=t:Dl=Dl.next=t),fh=!0,o1||(o1=!0,KA())}function Dc(t,r){if(!l1&&fh){l1=!0;do for(var c=!1,d=hh;d!==null;){if(t!==0){var E=d.pendingLanes;if(E===0)var w=0;else{var R=d.suspendedLanes,P=d.pingedLanes;w=(1<<31-rt(42|t)+1)-1,w&=E&~(R&~P),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(c=!0,qp(d,w))}else w=Lt,w=yr(d,d===gn?w:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(w&3)===0||On(d,w)||(c=!0,qp(d,w));d=d.next}while(c);l1=!1}}function WA(){Hp()}function Hp(){fh=o1=!1;var t=0;Ga!==0&&sw()&&(t=Ga);for(var r=yn(),c=null,d=hh;d!==null;){var E=d.next,w=jp(d,r);w===0?(d.next=null,c===null?hh=E:c.next=E,E===null&&(Dl=c)):(c=d,(t!==0||(w&3)!==0)&&(fh=!0)),d=E}oi!==0&&oi!==5||Dc(t),Ga!==0&&(Ga=0)}function jp(t,r){for(var c=t.suspendedLanes,d=t.pingedLanes,E=t.expirationTimes,w=t.pendingLanes&-62914561;0<w;){var R=31-rt(w),P=1<<R,K=E[R];K===-1?((P&c)===0||(P&d)!==0)&&(E[R]=wo(P,r)):K<=r&&(t.expiredLanes|=P),w&=~P}if(r=gn,c=Lt,c=yr(t,t===r?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),d=t.callbackNode,c===0||t===r&&(rn===2||rn===9)||t.cancelPendingCommit!==null)return d!==null&&d!==null&&Fe(d),t.callbackNode=null,t.callbackPriority=0;if((c&3)===0||On(t,c)){if(r=c&-c,r===t.callbackPriority)return r;switch(d!==null&&Fe(d),_i(c)){case 2:case 8:c=_a;break;case 32:c=yi;break;case 268435456:c=Ao;break;default:c=yi}return d=Gp.bind(null,t),c=wn(c,d),t.callbackPriority=r,t.callbackNode=c,r}return d!==null&&d!==null&&Fe(d),t.callbackPriority=2,t.callbackNode=null,2}function Gp(t,r){if(oi!==0&&oi!==5)return t.callbackNode=null,t.callbackPriority=0,null;var c=t.callbackNode;if(uh()&&t.callbackNode!==c)return null;var d=Lt;return d=yr(t,t===gn?d:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),d===0?null:(vp(t,d,r),jp(t,yn()),t.callbackNode!=null&&t.callbackNode===c?Gp.bind(null,t):null)}function qp(t,r){if(uh())return null;vp(t,r,!0)}function KA(){ow(function(){(Zt&6)!==0?wn(pi,WA):Hp()})}function c1(){if(Ga===0){var t=yl;t===0&&(t=mr,mr<<=1,(mr&261888)===0&&(mr=256)),Ga=t}return Ga}function Xp(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ms(""+t)}function Yp(t,r){var c=r.ownerDocument.createElement("input");return c.name=r.name,c.value=r.value,t.id&&c.setAttribute("form",t.id),r.parentNode.insertBefore(c,r),t=new FormData(t),c.parentNode.removeChild(c),t}function QA(t,r,c,d,E){if(r==="submit"&&c&&c.stateNode===E){var w=Xp((E[jt]||null).action),R=d.submitter;R&&(r=(r=R[jt]||null)?Xp(r.formAction):R.getAttribute("formAction"),r!==null&&(w=r,R=null));var P=new En("action","action",null,d,E);t.push({event:P,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Ga!==0){var K=R?Yp(E,R):new FormData(E);Rd(c,{pending:!0,data:K,method:E.method,action:w},null,K)}}else typeof w=="function"&&(P.preventDefault(),K=R?Yp(E,R):new FormData(E),Rd(c,{pending:!0,data:K,method:E.method,action:w},w,K))},currentTarget:E}]})}}for(var u1=0;u1<cc.length;u1++){var h1=cc[u1],ZA=h1.toLowerCase(),JA=h1[0].toUpperCase()+h1.slice(1);os(ZA,"on"+JA)}os(rr,"onAnimationEnd"),os(Si,"onAnimationIteration"),os(tn,"onAnimationStart"),os("dblclick","onDoubleClick"),os("focusin","onFocus"),os("focusout","onBlur"),os(ai,"onTransitionRun"),os(Zi,"onTransitionStart"),os(Ia,"onTransitionCancel"),os(qs,"onTransitionEnd"),Ti("onMouseEnter",["mouseout","mouseover"]),Ti("onMouseLeave",["mouseout","mouseover"]),Ti("onPointerEnter",["pointerout","pointerover"]),Ti("onPointerLeave",["pointerout","pointerover"]),Gt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$A=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mc));function Wp(t,r){r=(r&4)!==0;for(var c=0;c<t.length;c++){var d=t[c],E=d.event;d=d.listeners;e:{var w=void 0;if(r)for(var R=d.length-1;0<=R;R--){var P=d[R],K=P.instance,oe=P.currentTarget;if(P=P.listener,K!==w&&E.isPropagationStopped())break e;w=P,E.currentTarget=oe;try{w(E)}catch(xe){bu(xe)}E.currentTarget=null,w=K}else for(R=0;R<d.length;R++){if(P=d[R],K=P.instance,oe=P.currentTarget,P=P.listener,K!==w&&E.isPropagationStopped())break e;w=P,E.currentTarget=oe;try{w(E)}catch(xe){bu(xe)}E.currentTarget=null,w=K}}}}function Nt(t,r){var c=r[is];c===void 0&&(c=r[is]=new Set);var d=t+"__bubble";c.has(d)||(Kp(r,t,2,!1),c.add(d))}function f1(t,r,c){var d=0;r&&(d|=4),Kp(c,t,d,r)}var dh="_reactListening"+Math.random().toString(36).slice(2);function d1(t){if(!t[dh]){t[dh]=!0,Se.forEach(function(c){c!=="selectionchange"&&($A.has(c)||f1(c,!1,t),f1(c,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[dh]||(r[dh]=!0,f1("selectionchange",!1,r))}}function Kp(t,r,c,d){switch(C2(r)){case 2:var E=bw;break;case 8:E=Iw;break;default:E=I1}c=E.bind(null,r,c,t),E=void 0,!Bs||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(E=!0),d?E!==void 0?t.addEventListener(r,c,{capture:!0,passive:E}):t.addEventListener(r,c,!0):E!==void 0?t.addEventListener(r,c,{passive:E}):t.addEventListener(r,c,!1)}function g1(t,r,c,d,E){var w=d;if((r&1)===0&&(r&2)===0&&d!==null)e:for(;;){if(d===null)return;var R=d.tag;if(R===3||R===4){var P=d.stateNode.containerInfo;if(P===E)break;if(R===4)for(R=d.return;R!==null;){var K=R.tag;if((K===3||K===4)&&R.stateNode.containerInfo===E)return;R=R.return}for(;P!==null;){if(R=mn(P),R===null)return;if(K=R.tag,K===5||K===6||K===26||K===27){d=w=R;continue e}P=P.parentNode}}d=d.return}ps(function(){var oe=w,xe=tr(c),Ce=[];e:{var ue=Su.get(t);if(ue!==void 0){var Ee=En,qe=t;switch(t){case"keypress":if(Ar(c)===0)break e;case"keydown":case"keyup":Ee=zs;break;case"focusin":qe="focus",Ee=Us;break;case"focusout":qe="blur",Ee=Us;break;case"beforeblur":case"afterblur":Ee=Us;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ee=zt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ee=Vs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ee=S;break;case rr:case Si:case tn:Ee=ht;break;case qs:Ee=U;break;case"scroll":case"scrollend":Ee=Ta;break;case"wheel":Ee=me;break;case"copy":case"cut":case"paste":Ee=Fs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ee=It;break;case"toggle":case"beforetoggle":Ee=ot}var nt=(r&4)!==0,cn=!nt&&(t==="scroll"||t==="scrollend"),te=nt?ue!==null?ue+"Capture":null:ue;nt=[];for(var $=oe,ae;$!==null;){var Ae=$;if(ae=Ae.stateNode,Ae=Ae.tag,Ae!==5&&Ae!==26&&Ae!==27||ae===null||te===null||(Ae=et($,te),Ae!=null&&nt.push(Lc($,Ae,ae))),cn)break;$=$.return}0<nt.length&&(ue=new Ee(ue,qe,null,c,xe),Ce.push({event:ue,listeners:nt}))}}if((r&7)===0){e:{if(ue=t==="mouseover"||t==="pointerover",Ee=t==="mouseout"||t==="pointerout",ue&&c!==Ps&&(qe=c.relatedTarget||c.fromElement)&&(mn(qe)||qe[Ai]))break e;if((Ee||ue)&&(ue=xe.window===xe?xe:(ue=xe.ownerDocument)?ue.defaultView||ue.parentWindow:window,Ee?(qe=c.relatedTarget||c.toElement,Ee=oe,qe=qe?mn(qe):null,qe!==null&&(cn=m(qe),nt=qe.tag,qe!==cn||nt!==5&&nt!==27&&nt!==6)&&(qe=null)):(Ee=null,qe=oe),Ee!==qe)){if(nt=zt,Ae="onMouseLeave",te="onMouseEnter",$="mouse",(t==="pointerout"||t==="pointerover")&&(nt=It,Ae="onPointerLeave",te="onPointerEnter",$="pointer"),cn=Ee==null?ue:Pi(Ee),ae=qe==null?ue:Pi(qe),ue=new nt(Ae,$+"leave",Ee,c,xe),ue.target=cn,ue.relatedTarget=ae,Ae=null,mn(xe)===oe&&(nt=new nt(te,$+"enter",qe,c,xe),nt.target=ae,nt.relatedTarget=cn,Ae=nt),cn=Ae,Ee&&qe)t:{for(nt=ew,te=Ee,$=qe,ae=0,Ae=te;Ae;Ae=nt(Ae))ae++;Ae=0;for(var Ke=$;Ke;Ke=nt(Ke))Ae++;for(;0<ae-Ae;)te=nt(te),ae--;for(;0<Ae-ae;)$=nt($),Ae--;for(;ae--;){if(te===$||$!==null&&te===$.alternate){nt=te;break t}te=nt(te),$=nt($)}nt=null}else nt=null;Ee!==null&&Qp(Ce,ue,Ee,nt,!1),qe!==null&&cn!==null&&Qp(Ce,cn,qe,nt,!0)}}e:{if(ue=oe?Pi(oe):window,Ee=ue.nodeName&&ue.nodeName.toLowerCase(),Ee==="select"||Ee==="input"&&ue.type==="file")var Kt=Cr;else if(lc(ue))if(vu)Kt=u;else{Kt=s;var Xe=i}else Ee=ue.nodeName,!Ee||Ee.toLowerCase()!=="input"||ue.type!=="checkbox"&&ue.type!=="radio"?oe&&$t(oe.elementType)&&(Kt=Cr):Kt=l;if(Kt&&(Kt=Kt(t,oe))){Tr(Ce,Kt,c,xe);break e}Xe&&Xe(t,ue,oe),t==="focusout"&&oe&&ue.type==="number"&&oe.memoizedProps.value!=null&&z(ue,"number",ue.value)}switch(Xe=oe?Pi(oe):window,t){case"focusin":(lc(Xe)||Xe.contentEditable==="true")&&(Q=Xe,J=oe,ie=null);break;case"focusout":ie=J=Q=null;break;case"mousedown":de=!0;break;case"contextmenu":case"mouseup":case"dragend":de=!1,Me(Ce,c,xe);break;case"selectionchange":if(H)break;case"keydown":case"keyup":Me(Ce,c,xe)}var pt;if(Ut)e:{switch(t){case"compositionstart":var Pt="onCompositionStart";break e;case"compositionend":Pt="onCompositionEnd";break e;case"compositionupdate":Pt="onCompositionUpdate";break e}Pt=void 0}else ba?Hs(t,c)&&(Pt="onCompositionEnd"):t==="keydown"&&c.keyCode===229&&(Pt="onCompositionStart");Pt&&(zr&&c.locale!=="ko"&&(ba||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&ba&&(pt=rs()):(_r=xe,xr="value"in _r?_r.value:_r.textContent,ba=!0)),Xe=gh(oe,Pt),0<Xe.length&&(Pt=new Vr(Pt,t,null,c,xe),Ce.push({event:Pt,listeners:Xe}),pt?Pt.data=pt:(pt=Hr(c),pt!==null&&(Pt.data=pt)))),(pt=Ki?Es(t,c):ul(t,c))&&(Pt=gh(oe,"onBeforeInput"),0<Pt.length&&(Xe=new Vr("onBeforeInput","beforeinput",null,c,xe),Ce.push({event:Xe,listeners:Pt}),Xe.data=pt)),QA(Ce,t,oe,c,xe)}Wp(Ce,r)})}function Lc(t,r,c){return{instance:t,listener:r,currentTarget:c}}function gh(t,r){for(var c=r+"Capture",d=[];t!==null;){var E=t,w=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||w===null||(E=et(t,c),E!=null&&d.unshift(Lc(t,E,w)),E=et(t,r),E!=null&&d.push(Lc(t,E,w))),t.tag===3)return d;t=t.return}return[]}function ew(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Qp(t,r,c,d,E){for(var w=r._reactName,R=[];c!==null&&c!==d;){var P=c,K=P.alternate,oe=P.stateNode;if(P=P.tag,K!==null&&K===d)break;P!==5&&P!==26&&P!==27||oe===null||(K=oe,E?(oe=et(c,w),oe!=null&&R.unshift(Lc(c,oe,K))):E||(oe=et(c,w),oe!=null&&R.push(Lc(c,oe,K)))),c=c.return}R.length!==0&&t.push({event:r,listeners:R})}var tw=/\r\n?/g,nw=/\u0000|\uFFFD/g;function Zp(t){return(typeof t=="string"?t:""+t).replace(tw,`
`).replace(nw,"")}function Jp(t,r){return r=Zp(r),Zp(t)===r}function ln(t,r,c,d,E,w){switch(c){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||ki(t,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&ki(t,""+d);break;case"className":Ci(t,"class",d);break;case"tabIndex":Ci(t,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Ci(t,c,d);break;case"style":Ye(t,d,w);break;case"data":if(r!=="object"){Ci(t,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||c!=="href")){t.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){t.removeAttribute(c);break}d=ms(""+d),t.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){t.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(c==="formAction"?(r!=="input"&&ln(t,r,"name",E.name,E,null),ln(t,r,"formEncType",E.formEncType,E,null),ln(t,r,"formMethod",E.formMethod,E,null),ln(t,r,"formTarget",E.formTarget,E,null)):(ln(t,r,"encType",E.encType,E,null),ln(t,r,"method",E.method,E,null),ln(t,r,"target",E.target,E,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){t.removeAttribute(c);break}d=ms(""+d),t.setAttribute(c,d);break;case"onClick":d!=null&&(t.onclick=Vi);break;case"onScroll":d!=null&&Nt("scroll",t);break;case"onScrollEnd":d!=null&&Nt("scrollend",t);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(o(61));if(c=d.__html,c!=null){if(E.children!=null)throw Error(o(60));t.innerHTML=c}}break;case"multiple":t.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":t.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){t.removeAttribute("xlink:href");break}c=ms(""+d),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?t.setAttribute(c,""+d):t.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?t.setAttribute(c,""):t.removeAttribute(c);break;case"capture":case"download":d===!0?t.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?t.setAttribute(c,d):t.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?t.setAttribute(c,d):t.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?t.removeAttribute(c):t.setAttribute(c,d);break;case"popover":Nt("beforetoggle",t),Nt("toggle",t),ds(t,"popover",d);break;case"xlinkActuate":vn(t,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":vn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":vn(t,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":vn(t,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":vn(t,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":vn(t,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":vn(t,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":vn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":vn(t,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":ds(t,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=So.get(c)||c,ds(t,c,d))}}function m1(t,r,c,d,E,w){switch(c){case"style":Ye(t,d,w);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(o(61));if(c=d.__html,c!=null){if(E.children!=null)throw Error(o(60));t.innerHTML=c}}break;case"children":typeof d=="string"?ki(t,d):(typeof d=="number"||typeof d=="bigint")&&ki(t,""+d);break;case"onScroll":d!=null&&Nt("scroll",t);break;case"onScrollEnd":d!=null&&Nt("scrollend",t);break;case"onClick":d!=null&&(t.onclick=Vi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!To.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(E=c.endsWith("Capture"),r=c.slice(2,E?c.length-7:void 0),w=t[jt]||null,w=w!=null?w[c]:null,typeof w=="function"&&t.removeEventListener(r,w,E),typeof d=="function")){typeof w!="function"&&w!==null&&(c in t?t[c]=null:t.hasAttribute(c)&&t.removeAttribute(c)),t.addEventListener(r,d,E);break e}c in t?t[c]=d:d===!0?t.setAttribute(c,""):ds(t,c,d)}}}function Ni(t,r,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nt("error",t),Nt("load",t);var d=!1,E=!1,w;for(w in c)if(c.hasOwnProperty(w)){var R=c[w];if(R!=null)switch(w){case"src":d=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,r));default:ln(t,r,w,R,c,null)}}E&&ln(t,r,"srcSet",c.srcSet,c,null),d&&ln(t,r,"src",c.src,c,null);return;case"input":Nt("invalid",t);var P=w=R=E=null,K=null,oe=null;for(d in c)if(c.hasOwnProperty(d)){var xe=c[d];if(xe!=null)switch(d){case"name":E=xe;break;case"type":R=xe;break;case"checked":K=xe;break;case"defaultChecked":oe=xe;break;case"value":w=xe;break;case"defaultValue":P=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(o(137,r));break;default:ln(t,r,d,xe,c,null)}}se(t,w,P,K,oe,R,E,!1);return;case"select":Nt("invalid",t),d=R=w=null;for(E in c)if(c.hasOwnProperty(E)&&(P=c[E],P!=null))switch(E){case"value":w=P;break;case"defaultValue":R=P;break;case"multiple":d=P;default:ln(t,r,E,P,c,null)}r=w,c=R,t.multiple=!!d,r!=null?Ge(t,!!d,r,!1):c!=null&&Ge(t,!!d,c,!0);return;case"textarea":Nt("invalid",t),w=E=d=null;for(R in c)if(c.hasOwnProperty(R)&&(P=c[R],P!=null))switch(R){case"value":d=P;break;case"defaultValue":E=P;break;case"children":w=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(o(91));break;default:ln(t,r,R,P,c,null)}qn(t,d,E,w);return;case"option":for(K in c)if(c.hasOwnProperty(K)&&(d=c[K],d!=null))switch(K){case"selected":t.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:ln(t,r,K,d,c,null)}return;case"dialog":Nt("beforetoggle",t),Nt("toggle",t),Nt("cancel",t),Nt("close",t);break;case"iframe":case"object":Nt("load",t);break;case"video":case"audio":for(d=0;d<Mc.length;d++)Nt(Mc[d],t);break;case"image":Nt("error",t),Nt("load",t);break;case"details":Nt("toggle",t);break;case"embed":case"source":case"link":Nt("error",t),Nt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in c)if(c.hasOwnProperty(oe)&&(d=c[oe],d!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,r));default:ln(t,r,oe,d,c,null)}return;default:if($t(r)){for(xe in c)c.hasOwnProperty(xe)&&(d=c[xe],d!==void 0&&m1(t,r,xe,d,c,void 0));return}}for(P in c)c.hasOwnProperty(P)&&(d=c[P],d!=null&&ln(t,r,P,d,c,null))}function iw(t,r,c,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,w=null,R=null,P=null,K=null,oe=null,xe=null;for(Ee in c){var Ce=c[Ee];if(c.hasOwnProperty(Ee)&&Ce!=null)switch(Ee){case"checked":break;case"value":break;case"defaultValue":K=Ce;default:d.hasOwnProperty(Ee)||ln(t,r,Ee,null,d,Ce)}}for(var ue in d){var Ee=d[ue];if(Ce=c[ue],d.hasOwnProperty(ue)&&(Ee!=null||Ce!=null))switch(ue){case"type":w=Ee;break;case"name":E=Ee;break;case"checked":oe=Ee;break;case"defaultChecked":xe=Ee;break;case"value":R=Ee;break;case"defaultValue":P=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(o(137,r));break;default:Ee!==Ce&&ln(t,r,ue,Ee,d,Ce)}}Dn(t,R,P,K,oe,xe,w,E);return;case"select":Ee=R=P=ue=null;for(w in c)if(K=c[w],c.hasOwnProperty(w)&&K!=null)switch(w){case"value":break;case"multiple":Ee=K;default:d.hasOwnProperty(w)||ln(t,r,w,null,d,K)}for(E in d)if(w=d[E],K=c[E],d.hasOwnProperty(E)&&(w!=null||K!=null))switch(E){case"value":ue=w;break;case"defaultValue":P=w;break;case"multiple":R=w;default:w!==K&&ln(t,r,E,w,d,K)}r=P,c=R,d=Ee,ue!=null?Ge(t,!!c,ue,!1):!!d!=!!c&&(r!=null?Ge(t,!!c,r,!0):Ge(t,!!c,c?[]:"",!1));return;case"textarea":Ee=ue=null;for(P in c)if(E=c[P],c.hasOwnProperty(P)&&E!=null&&!d.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:ln(t,r,P,null,d,E)}for(R in d)if(E=d[R],w=c[R],d.hasOwnProperty(R)&&(E!=null||w!=null))switch(R){case"value":ue=E;break;case"defaultValue":Ee=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(o(91));break;default:E!==w&&ln(t,r,R,E,d,w)}Mn(t,ue,Ee);return;case"option":for(var qe in c)if(ue=c[qe],c.hasOwnProperty(qe)&&ue!=null&&!d.hasOwnProperty(qe))switch(qe){case"selected":t.selected=!1;break;default:ln(t,r,qe,null,d,ue)}for(K in d)if(ue=d[K],Ee=c[K],d.hasOwnProperty(K)&&ue!==Ee&&(ue!=null||Ee!=null))switch(K){case"selected":t.selected=ue&&typeof ue!="function"&&typeof ue!="symbol";break;default:ln(t,r,K,ue,d,Ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in c)ue=c[nt],c.hasOwnProperty(nt)&&ue!=null&&!d.hasOwnProperty(nt)&&ln(t,r,nt,null,d,ue);for(oe in d)if(ue=d[oe],Ee=c[oe],d.hasOwnProperty(oe)&&ue!==Ee&&(ue!=null||Ee!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(o(137,r));break;default:ln(t,r,oe,ue,d,Ee)}return;default:if($t(r)){for(var cn in c)ue=c[cn],c.hasOwnProperty(cn)&&ue!==void 0&&!d.hasOwnProperty(cn)&&m1(t,r,cn,void 0,d,ue);for(xe in d)ue=d[xe],Ee=c[xe],!d.hasOwnProperty(xe)||ue===Ee||ue===void 0&&Ee===void 0||m1(t,r,xe,ue,d,Ee);return}}for(var te in c)ue=c[te],c.hasOwnProperty(te)&&ue!=null&&!d.hasOwnProperty(te)&&ln(t,r,te,null,d,ue);for(Ce in d)ue=d[Ce],Ee=c[Ce],!d.hasOwnProperty(Ce)||ue===Ee||ue==null&&Ee==null||ln(t,r,Ce,ue,d,Ee)}function $p(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function rw(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var E=c[d],w=E.transferSize,R=E.initiatorType,P=E.duration;if(w&&P&&$p(R)){for(R=0,P=E.responseEnd,d+=1;d<c.length;d++){var K=c[d],oe=K.startTime;if(oe>P)break;var xe=K.transferSize,Ce=K.initiatorType;xe&&$p(Ce)&&(K=K.responseEnd,R+=xe*(K<P?1:(P-oe)/(K-oe)))}if(--d,r+=8*(w+R)/(E.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var p1=null,y1=null;function mh(t){return t.nodeType===9?t:t.ownerDocument}function e2(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function t2(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function E1(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var _1=null;function sw(){var t=window.event;return t&&t.type==="popstate"?t===_1?!1:(_1=t,!0):(_1=null,!1)}var n2=typeof setTimeout=="function"?setTimeout:void 0,aw=typeof clearTimeout=="function"?clearTimeout:void 0,i2=typeof Promise=="function"?Promise:void 0,ow=typeof queueMicrotask=="function"?queueMicrotask:typeof i2<"u"?function(t){return i2.resolve(null).then(t).catch(lw)}:n2;function lw(t){setTimeout(function(){throw t})}function qa(t){return t==="head"}function r2(t,r){var c=r,d=0;do{var E=c.nextSibling;if(t.removeChild(c),E&&E.nodeType===8)if(c=E.data,c==="/$"||c==="/&"){if(d===0){t.removeChild(E),Bl(r);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")Pc(t.ownerDocument.documentElement);else if(c==="head"){c=t.ownerDocument.head,Pc(c);for(var w=c.firstChild;w;){var R=w.nextSibling,P=w.nodeName;w[Pr]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&w.rel.toLowerCase()==="stylesheet"||c.removeChild(w),w=R}}else c==="body"&&Pc(t.ownerDocument.body);c=E}while(c);Bl(r)}function s2(t,r){var c=t;t=0;do{var d=c.nextSibling;if(c.nodeType===1?r?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(r?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(t===0)break;t--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||t++;c=d}while(c)}function x1(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var c=r;switch(r=r.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":x1(c),wi(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}t.removeChild(c)}}function cw(t,r,c,d){for(;t.nodeType===1;){var E=c;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(d){if(!t[Pr])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(w=t.getAttribute("rel"),w==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(w!==E.rel||t.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||t.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||t.getAttribute("title")!==(E.title==null?null:E.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(w=t.getAttribute("src"),(w!==(E.src==null?null:E.src)||t.getAttribute("type")!==(E.type==null?null:E.type)||t.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&w&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var w=E.name==null?null:""+E.name;if(E.type==="hidden"&&t.getAttribute("name")===w)return t}else return t;if(t=Kr(t.nextSibling),t===null)break}return null}function uw(t,r,c){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!c||(t=Kr(t.nextSibling),t===null))return null;return t}function a2(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Kr(t.nextSibling),t===null))return null;return t}function A1(t){return t.data==="$?"||t.data==="$~"}function w1(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function hw(t,r){var c=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||c.readyState!=="loading")r();else{var d=function(){r(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),t._reactRetry=d}}function Kr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var T1=null;function o2(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var c=t.data;if(c==="/$"||c==="/&"){if(r===0)return Kr(t.nextSibling);r--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||r++}t=t.nextSibling}return null}function l2(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var c=t.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(r===0)return t;r--}else c!=="/$"&&c!=="/&"||r++}t=t.previousSibling}return null}function c2(t,r,c){switch(r=mh(c),t){case"html":if(t=r.documentElement,!t)throw Error(o(452));return t;case"head":if(t=r.head,!t)throw Error(o(453));return t;case"body":if(t=r.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function Pc(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);wi(t)}var Qr=new Map,u2=new Set;function ph(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var aa=_e.d;_e.d={f:fw,r:dw,D:gw,C:mw,L:pw,m:yw,X:_w,S:Ew,M:xw};function fw(){var t=aa.f(),r=oh();return t||r}function dw(t){var r=St(t);r!==null&&r.tag===5&&r.type==="form"?bm(r):aa.r(t)}var Ml=typeof document>"u"?null:document;function h2(t,r,c){var d=Ml;if(d&&typeof r=="string"&&r){var E=mt(r);E='link[rel="'+t+'"][href="'+E+'"]',typeof c=="string"&&(E+='[crossorigin="'+c+'"]'),u2.has(E)||(u2.add(E),t={rel:t,crossOrigin:c,href:r},d.querySelector(E)===null&&(r=d.createElement("link"),Ni(r,"link",t),Cn(r),d.head.appendChild(r)))}}function gw(t){aa.D(t),h2("dns-prefetch",t,null)}function mw(t,r){aa.C(t,r),h2("preconnect",t,r)}function pw(t,r,c){aa.L(t,r,c);var d=Ml;if(d&&t&&r){var E='link[rel="preload"][as="'+mt(r)+'"]';r==="image"&&c&&c.imageSrcSet?(E+='[imagesrcset="'+mt(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(E+='[imagesizes="'+mt(c.imageSizes)+'"]')):E+='[href="'+mt(t)+'"]';var w=E;switch(r){case"style":w=Ll(t);break;case"script":w=Pl(t)}Qr.has(w)||(t=O({rel:"preload",href:r==="image"&&c&&c.imageSrcSet?void 0:t,as:r},c),Qr.set(w,t),d.querySelector(E)!==null||r==="style"&&d.querySelector(Bc(w))||r==="script"&&d.querySelector(kc(w))||(r=d.createElement("link"),Ni(r,"link",t),Cn(r),d.head.appendChild(r)))}}function yw(t,r){aa.m(t,r);var c=Ml;if(c&&t){var d=r&&typeof r.as=="string"?r.as:"script",E='link[rel="modulepreload"][as="'+mt(d)+'"][href="'+mt(t)+'"]',w=E;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Pl(t)}if(!Qr.has(w)&&(t=O({rel:"modulepreload",href:t},r),Qr.set(w,t),c.querySelector(E)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(kc(w)))return}d=c.createElement("link"),Ni(d,"link",t),Cn(d),c.head.appendChild(d)}}}function Ew(t,r,c){aa.S(t,r,c);var d=Ml;if(d&&t){var E=si(d).hoistableStyles,w=Ll(t);r=r||"default";var R=E.get(w);if(!R){var P={loading:0,preload:null};if(R=d.querySelector(Bc(w)))P.loading=5;else{t=O({rel:"stylesheet",href:t,"data-precedence":r},c),(c=Qr.get(w))&&C1(t,c);var K=R=d.createElement("link");Cn(K),Ni(K,"link",t),K._p=new Promise(function(oe,xe){K.onload=oe,K.onerror=xe}),K.addEventListener("load",function(){P.loading|=1}),K.addEventListener("error",function(){P.loading|=2}),P.loading|=4,yh(R,r,d)}R={type:"stylesheet",instance:R,count:1,state:P},E.set(w,R)}}}function _w(t,r){aa.X(t,r);var c=Ml;if(c&&t){var d=si(c).hoistableScripts,E=Pl(t),w=d.get(E);w||(w=c.querySelector(kc(E)),w||(t=O({src:t,async:!0},r),(r=Qr.get(E))&&v1(t,r),w=c.createElement("script"),Cn(w),Ni(w,"link",t),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(E,w))}}function xw(t,r){aa.M(t,r);var c=Ml;if(c&&t){var d=si(c).hoistableScripts,E=Pl(t),w=d.get(E);w||(w=c.querySelector(kc(E)),w||(t=O({src:t,async:!0,type:"module"},r),(r=Qr.get(E))&&v1(t,r),w=c.createElement("script"),Cn(w),Ni(w,"link",t),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(E,w))}}function f2(t,r,c,d){var E=(E=De.current)?ph(E):null;if(!E)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(r=Ll(c.href),c=si(E).hoistableStyles,d=c.get(r),d||(d={type:"style",instance:null,count:0,state:null},c.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){t=Ll(c.href);var w=si(E).hoistableStyles,R=w.get(t);if(R||(E=E.ownerDocument||E,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(t,R),(w=E.querySelector(Bc(t)))&&!w._p&&(R.instance=w,R.state.loading=5),Qr.has(t)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Qr.set(t,c),w||Aw(E,t,c,R.state))),r&&d===null)throw Error(o(528,""));return R}if(r&&d!==null)throw Error(o(529,""));return null;case"script":return r=c.async,c=c.src,typeof c=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Pl(c),c=si(E).hoistableScripts,d=c.get(r),d||(d={type:"script",instance:null,count:0,state:null},c.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Ll(t){return'href="'+mt(t)+'"'}function Bc(t){return'link[rel="stylesheet"]['+t+"]"}function d2(t){return O({},t,{"data-precedence":t.precedence,precedence:null})}function Aw(t,r,c,d){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=t.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),Ni(r,"link",c),Cn(r),t.head.appendChild(r))}function Pl(t){return'[src="'+mt(t)+'"]'}function kc(t){return"script[async]"+t}function g2(t,r,c){if(r.count++,r.instance===null)switch(r.type){case"style":var d=t.querySelector('style[data-href~="'+mt(c.href)+'"]');if(d)return r.instance=d,Cn(d),d;var E=O({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(t.ownerDocument||t).createElement("style"),Cn(d),Ni(d,"style",E),yh(d,c.precedence,t),r.instance=d;case"stylesheet":E=Ll(c.href);var w=t.querySelector(Bc(E));if(w)return r.state.loading|=4,r.instance=w,Cn(w),w;d=d2(c),(E=Qr.get(E))&&C1(d,E),w=(t.ownerDocument||t).createElement("link"),Cn(w);var R=w;return R._p=new Promise(function(P,K){R.onload=P,R.onerror=K}),Ni(w,"link",d),r.state.loading|=4,yh(w,c.precedence,t),r.instance=w;case"script":return w=Pl(c.src),(E=t.querySelector(kc(w)))?(r.instance=E,Cn(E),E):(d=c,(E=Qr.get(w))&&(d=O({},c),v1(d,E)),t=t.ownerDocument||t,E=t.createElement("script"),Cn(E),Ni(E,"link",d),t.head.appendChild(E),r.instance=E);case"void":return null;default:throw Error(o(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,yh(d,c.precedence,t));return r.instance}function yh(t,r,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=d.length?d[d.length-1]:null,w=E,R=0;R<d.length;R++){var P=d[R];if(P.dataset.precedence===r)w=P;else if(w!==E)break}w?w.parentNode.insertBefore(t,w.nextSibling):(r=c.nodeType===9?c.head:c,r.insertBefore(t,r.firstChild))}function C1(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function v1(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Eh=null;function m2(t,r,c){if(Eh===null){var d=new Map,E=Eh=new Map;E.set(c,d)}else E=Eh,d=E.get(c),d||(d=new Map,E.set(c,d));if(d.has(t))return d;for(d.set(t,null),c=c.getElementsByTagName(t),E=0;E<c.length;E++){var w=c[E];if(!(w[Pr]||w[Tn]||t==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var R=w.getAttribute(r)||"";R=t+R;var P=d.get(R);P?P.push(w):d.set(R,[w])}}return d}function p2(t,r,c){t=t.ownerDocument||t,t.head.insertBefore(c,r==="title"?t.querySelector("head > title"):null)}function ww(t,r,c){if(c===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function y2(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Tw(t,r,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var E=Ll(d.href),w=r.querySelector(Bc(E));if(w){r=w._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=_h.bind(t),r.then(t,t)),c.state.loading|=4,c.instance=w,Cn(w);return}w=r.ownerDocument||r,d=d2(d),(E=Qr.get(E))&&C1(d,E),w=w.createElement("link"),Cn(w);var R=w;R._p=new Promise(function(P,K){R.onload=P,R.onerror=K}),Ni(w,"link",d),c.instance=w}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(c,r),(r=c.state.preload)&&(c.state.loading&3)===0&&(t.count++,c=_h.bind(t),r.addEventListener("load",c),r.addEventListener("error",c))}}var S1=0;function Cw(t,r){return t.stylesheets&&t.count===0&&Ah(t,t.stylesheets),0<t.count||0<t.imgCount?function(c){var d=setTimeout(function(){if(t.stylesheets&&Ah(t,t.stylesheets),t.unsuspend){var w=t.unsuspend;t.unsuspend=null,w()}},6e4+r);0<t.imgBytes&&S1===0&&(S1=62500*rw());var E=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Ah(t,t.stylesheets),t.unsuspend)){var w=t.unsuspend;t.unsuspend=null,w()}},(t.imgBytes>S1?50:800)+r);return t.unsuspend=c,function(){t.unsuspend=null,clearTimeout(d),clearTimeout(E)}}:null}function _h(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ah(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var xh=null;function Ah(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,xh=new Map,r.forEach(vw,t),xh=null,_h.call(t))}function vw(t,r){if(!(r.state.loading&4)){var c=xh.get(t);if(c)var d=c.get(null);else{c=new Map,xh.set(t,c);for(var E=t.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<E.length;w++){var R=E[w];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(c.set(R.dataset.precedence,R),d=R)}d&&c.set(null,d)}E=r.instance,R=E.getAttribute("data-precedence"),w=c.get(R)||d,w===d&&c.set(null,E),c.set(R,E),this.count++,d=_h.bind(this),E.addEventListener("load",d),E.addEventListener("error",d),w?w.parentNode.insertBefore(E,w.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(E,t.firstChild)),r.state.loading|=4}}var Vc={$$typeof:ye,Provider:null,Consumer:null,_currentValue:je,_currentValue2:je,_threadCount:0};function Sw(t,r,c,d,E,w,R,P,K){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ei(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ei(0),this.hiddenUpdates=Ei(null),this.identifierPrefix=d,this.onUncaughtError=E,this.onCaughtError=w,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function E2(t,r,c,d,E,w,R,P,K,oe,xe,Ce){return t=new Sw(t,r,c,R,K,oe,xe,Ce,P),r=1,w===!0&&(r|=24),w=vr(3,null,null,r),t.current=w,w.stateNode=t,r=sd(),r.refCount++,t.pooledCache=r,r.refCount++,w.memoizedState={element:d,isDehydrated:c,cache:r},cd(w),t}function _2(t){return t?(t=fl,t):fl}function x2(t,r,c,d,E,w){E=_2(E),d.context===null?d.context=E:d.pendingContext=E,d=La(r),d.payload={element:c},w=w===void 0?null:w,w!==null&&(d.callback=w),c=Pa(t,d,r),c!==null&&(cr(c,t,r),pc(c,t,r))}function A2(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var c=t.retryLane;t.retryLane=c!==0&&c<r?c:r}}function b1(t,r){A2(t,r),(t=t.alternate)&&A2(t,r)}function w2(t){if(t.tag===13||t.tag===31){var r=Do(t,67108864);r!==null&&cr(r,t,67108864),b1(t,67108864)}}function T2(t){if(t.tag===13||t.tag===31){var r=Nr();r=Bn(r);var c=Do(t,r);c!==null&&cr(c,t,r),b1(t,r)}}var wh=!0;function bw(t,r,c,d){var E=he.T;he.T=null;var w=_e.p;try{_e.p=2,I1(t,r,c,d)}finally{_e.p=w,he.T=E}}function Iw(t,r,c,d){var E=he.T;he.T=null;var w=_e.p;try{_e.p=8,I1(t,r,c,d)}finally{_e.p=w,he.T=E}}function I1(t,r,c,d){if(wh){var E=R1(d);if(E===null)g1(t,r,d,Th,c),v2(t,d);else if(Nw(E,t,r,c,d))d.stopPropagation();else if(v2(t,d),r&4&&-1<Rw.indexOf(t)){for(;E!==null;){var w=St(E);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var R=pr(w.pendingLanes);if(R!==0){var P=w;for(P.pendingLanes|=2,P.entangledLanes|=2;R;){var K=1<<31-rt(R);P.entanglements[1]|=K,R&=~K}ws(w),(Zt&6)===0&&(sh=yn()+500,Dc(0))}}break;case 31:case 13:P=Do(w,2),P!==null&&cr(P,w,2),oh(),b1(w,2)}if(w=R1(d),w===null&&g1(t,r,d,Th,c),w===E)break;E=w}E!==null&&d.stopPropagation()}else g1(t,r,d,null,c)}}function R1(t){return t=tr(t),N1(t)}var Th=null;function N1(t){if(Th=null,t=mn(t),t!==null){var r=m(t);if(r===null)t=null;else{var c=r.tag;if(c===13){if(t=_(r),t!==null)return t;t=null}else if(c===31){if(t=v(r),t!==null)return t;t=null}else if(c===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Th=t,null}function C2(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ns()){case pi:return 2;case _a:return 8;case yi:case ri:return 32;case Ao:return 268435456;default:return 32}default:return 32}}var O1=!1,Xa=null,Ya=null,Wa=null,Uc=new Map,Fc=new Map,Ka=[],Rw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function v2(t,r){switch(t){case"focusin":case"focusout":Xa=null;break;case"dragenter":case"dragleave":Ya=null;break;case"mouseover":case"mouseout":Wa=null;break;case"pointerover":case"pointerout":Uc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fc.delete(r.pointerId)}}function zc(t,r,c,d,E,w){return t===null||t.nativeEvent!==w?(t={blockedOn:r,domEventName:c,eventSystemFlags:d,nativeEvent:w,targetContainers:[E]},r!==null&&(r=St(r),r!==null&&w2(r)),t):(t.eventSystemFlags|=d,r=t.targetContainers,E!==null&&r.indexOf(E)===-1&&r.push(E),t)}function Nw(t,r,c,d,E){switch(r){case"focusin":return Xa=zc(Xa,t,r,c,d,E),!0;case"dragenter":return Ya=zc(Ya,t,r,c,d,E),!0;case"mouseover":return Wa=zc(Wa,t,r,c,d,E),!0;case"pointerover":var w=E.pointerId;return Uc.set(w,zc(Uc.get(w)||null,t,r,c,d,E)),!0;case"gotpointercapture":return w=E.pointerId,Fc.set(w,zc(Fc.get(w)||null,t,r,c,d,E)),!0}return!1}function S2(t){var r=mn(t.target);if(r!==null){var c=m(r);if(c!==null){if(r=c.tag,r===13){if(r=_(c),r!==null){t.blockedOn=r,Ve(t.priority,function(){T2(c)});return}}else if(r===31){if(r=v(c),r!==null){t.blockedOn=r,Ve(t.priority,function(){T2(c)});return}}else if(r===3&&c.stateNode.current.memoizedState.isDehydrated){t.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ch(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var c=R1(t.nativeEvent);if(c===null){c=t.nativeEvent;var d=new c.constructor(c.type,c);Ps=d,c.target.dispatchEvent(d),Ps=null}else return r=St(c),r!==null&&w2(r),t.blockedOn=c,!1;r.shift()}return!0}function b2(t,r,c){Ch(t)&&c.delete(r)}function Ow(){O1=!1,Xa!==null&&Ch(Xa)&&(Xa=null),Ya!==null&&Ch(Ya)&&(Ya=null),Wa!==null&&Ch(Wa)&&(Wa=null),Uc.forEach(b2),Fc.forEach(b2)}function vh(t,r){t.blockedOn===r&&(t.blockedOn=null,O1||(O1=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Ow)))}var Sh=null;function I2(t){Sh!==t&&(Sh=t,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Sh===t&&(Sh=null);for(var r=0;r<t.length;r+=3){var c=t[r],d=t[r+1],E=t[r+2];if(typeof d!="function"){if(N1(d||c)===null)continue;break}var w=St(c);w!==null&&(t.splice(r,3),r-=3,Rd(w,{pending:!0,data:E,method:c.method,action:d},d,E))}}))}function Bl(t){function r(K){return vh(K,t)}Xa!==null&&vh(Xa,t),Ya!==null&&vh(Ya,t),Wa!==null&&vh(Wa,t),Uc.forEach(r),Fc.forEach(r);for(var c=0;c<Ka.length;c++){var d=Ka[c];d.blockedOn===t&&(d.blockedOn=null)}for(;0<Ka.length&&(c=Ka[0],c.blockedOn===null);)S2(c),c.blockedOn===null&&Ka.shift();if(c=(t.ownerDocument||t).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var E=c[d],w=c[d+1],R=E[jt]||null;if(typeof w=="function")R||I2(c);else if(R){var P=null;if(w&&w.hasAttribute("formAction")){if(E=w,R=w[jt]||null)P=R.formAction;else if(N1(E)!==null)continue}else P=R.action;typeof P=="function"?c[d+1]=P:(c.splice(d,3),d-=3),I2(c)}}}function R2(){function t(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(R){return E=R})},focusReset:"manual",scroll:"manual"})}function r(){E!==null&&(E(),E=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,E=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),E!==null&&(E(),E=null)}}}function D1(t){this._internalRoot=t}bh.prototype.render=D1.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(o(409));var c=r.current,d=Nr();x2(c,d,t,r,null,null)},bh.prototype.unmount=D1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;x2(t.current,2,null,t,null,null),oh(),r[Ai]=null}};function bh(t){this._internalRoot=t}bh.prototype.unstable_scheduleHydration=function(t){if(t){var r=xi();t={blockedOn:null,target:t,priority:r};for(var c=0;c<Ka.length&&r!==0&&r<Ka[c].priority;c++);Ka.splice(c,0,t),c===0&&S2(t)}};var N2=e.version;if(N2!=="19.2.0")throw Error(o(527,N2,"19.2.0"));_e.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=A(r),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var Dw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:he,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ih.isDisabled&&Ih.supportsFiber)try{Xt=Ih.inject(Dw),Ne=Ih}catch{}}return jc.createRoot=function(t,r){if(!h(t))throw Error(o(299));var c=!1,d="",E=km,w=Vm,R=Um;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(E=r.onUncaughtError),r.onCaughtError!==void 0&&(w=r.onCaughtError),r.onRecoverableError!==void 0&&(R=r.onRecoverableError)),r=E2(t,1,!1,null,null,c,d,null,E,w,R,R2),t[Ai]=r.current,d1(t),new D1(r)},jc.hydrateRoot=function(t,r,c){if(!h(t))throw Error(o(299));var d=!1,E="",w=km,R=Vm,P=Um,K=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(E=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(R=c.onCaughtError),c.onRecoverableError!==void 0&&(P=c.onRecoverableError),c.formState!==void 0&&(K=c.formState)),r=E2(t,1,!0,r,c??null,d,E,K,w,R,P,R2),r.context=_2(null),c=r.current,d=Nr(),d=Bn(d),E=La(d),E.callback=null,Pa(c,E,d),c=d,r.current.lanes=c,Lr(r,c),ws(r),t[Ai]=r.current,d1(t),new bh(r)},jc.version="19.2.0",jc}var F2;function jw(){if(F2)return P1.exports;F2=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),P1.exports=Hw(),P1.exports}var Gw=jw();const qw=D0(Gw),Xw=()=>{};var z2={};const NE=function(a){const e=[];let n=0;for(let o=0;o<a.length;o++){let h=a.charCodeAt(o);h<128?e[n++]=h:h<2048?(e[n++]=h>>6|192,e[n++]=h&63|128):(h&64512)===55296&&o+1<a.length&&(a.charCodeAt(o+1)&64512)===56320?(h=65536+((h&1023)<<10)+(a.charCodeAt(++o)&1023),e[n++]=h>>18|240,e[n++]=h>>12&63|128,e[n++]=h>>6&63|128,e[n++]=h&63|128):(e[n++]=h>>12|224,e[n++]=h>>6&63|128,e[n++]=h&63|128)}return e},Yw=function(a){const e=[];let n=0,o=0;for(;n<a.length;){const h=a[n++];if(h<128)e[o++]=String.fromCharCode(h);else if(h>191&&h<224){const m=a[n++];e[o++]=String.fromCharCode((h&31)<<6|m&63)}else if(h>239&&h<365){const m=a[n++],_=a[n++],v=a[n++],T=((h&7)<<18|(m&63)<<12|(_&63)<<6|v&63)-65536;e[o++]=String.fromCharCode(55296+(T>>10)),e[o++]=String.fromCharCode(56320+(T&1023))}else{const m=a[n++],_=a[n++];e[o++]=String.fromCharCode((h&15)<<12|(m&63)<<6|_&63)}}return e.join("")},OE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,e){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let h=0;h<a.length;h+=3){const m=a[h],_=h+1<a.length,v=_?a[h+1]:0,T=h+2<a.length,A=T?a[h+2]:0,b=m>>2,O=(m&3)<<4|v>>4;let V=(v&15)<<2|A>>6,j=A&63;T||(j=64,_||(V=64)),o.push(n[b],n[O],n[V],n[j])}return o.join("")},encodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(a):this.encodeByteArray(NE(a),e)},decodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(a):Yw(this.decodeStringToByteArray(a,e))},decodeStringToByteArray(a,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let h=0;h<a.length;){const m=n[a.charAt(h++)],v=h<a.length?n[a.charAt(h)]:0;++h;const A=h<a.length?n[a.charAt(h)]:64;++h;const O=h<a.length?n[a.charAt(h)]:64;if(++h,m==null||v==null||A==null||O==null)throw new Ww;const V=m<<2|v>>4;if(o.push(V),A!==64){const j=v<<4&240|A>>2;if(o.push(j),O!==64){const ee=A<<6&192|O;o.push(ee)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class Ww extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Kw=function(a){const e=NE(a);return OE.encodeByteArray(e,!0)},Kh=function(a){return Kw(a).replace(/\./g,"")},DE=function(a){try{return OE.decodeString(a,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Qw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Zw=()=>Qw().__FIREBASE_DEFAULTS__,Jw=()=>{if(typeof process>"u"||typeof z2>"u")return;const a=z2.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},$w=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=a&&DE(a[1]);return e&&JSON.parse(e)},wf=()=>{try{return Xw()||Zw()||Jw()||$w()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},ME=a=>wf()?.emulatorHosts?.[a],eT=a=>{const e=ME(a);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),o]:[e.substring(0,n),o]},LE=()=>wf()?.config,PE=a=>wf()?.[`_${a}`];class tT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,o)=>{n?this.reject(n):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,o))}}}function tc(a){try{return(a.startsWith("http://")||a.startsWith("https://")?new URL(a).hostname:a).endsWith(".cloudworkstations.dev")}catch{return!1}}async function BE(a){return(await fetch(a,{credentials:"include"})).ok}function nT(a,e){if(a.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},o=e||"demo-project",h=a.iat||0,m=a.sub||a.user_id;if(!m)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const _={iss:`https://securetoken.google.com/${o}`,aud:o,iat:h,exp:h+3600,auth_time:h,sub:m,user_id:m,firebase:{sign_in_provider:"custom",identities:{}},...a};return[Kh(JSON.stringify(n)),Kh(JSON.stringify(_)),""].join(".")}const Zc={};function iT(){const a={prod:[],emulator:[]};for(const e of Object.keys(Zc))Zc[e]?a.emulator.push(e):a.prod.push(e);return a}function rT(a){let e=document.getElementById(a),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",a),n=!0),{created:n,element:e}}let H2=!1;function kE(a,e){if(typeof window>"u"||typeof document>"u"||!tc(window.location.host)||Zc[a]===e||Zc[a]||H2)return;Zc[a]=e;function n(V){return`__firebase__banner__${V}`}const o="__firebase__banner",m=iT().prod.length>0;function _(){const V=document.getElementById(o);V&&V.remove()}function v(V){V.style.display="flex",V.style.background="#7faaf0",V.style.position="fixed",V.style.bottom="5px",V.style.left="5px",V.style.padding=".5em",V.style.borderRadius="5px",V.style.alignItems="center"}function T(V,j){V.setAttribute("width","24"),V.setAttribute("id",j),V.setAttribute("height","24"),V.setAttribute("viewBox","0 0 24 24"),V.setAttribute("fill","none"),V.style.marginLeft="-6px"}function A(){const V=document.createElement("span");return V.style.cursor="pointer",V.style.marginLeft="16px",V.style.fontSize="24px",V.innerHTML=" &times;",V.onclick=()=>{H2=!0,_()},V}function b(V,j){V.setAttribute("id",j),V.innerText="Learn more",V.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",V.setAttribute("target","__blank"),V.style.paddingLeft="5px",V.style.textDecoration="underline"}function O(){const V=rT(o),j=n("text"),ee=document.getElementById(j)||document.createElement("span"),re=n("learnmore"),le=document.getElementById(re)||document.createElement("a"),ke=n("preprendIcon"),Re=document.getElementById(ke)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(V.created){const ye=V.element;v(ye),b(le,re);const pe=A();T(Re,ke),ye.append(Re,ee,le,pe),document.body.appendChild(ye)}m?(ee.innerText="Preview backend disconnected.",Re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,ee.innerText="Preview backend running in this workspace."),ee.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",O):O()}function qi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qi())}function aT(){const a=wf()?.forceEnvironment;if(a==="node")return!0;if(a==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lT(){const a=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof a=="object"&&a.id!==void 0}function cT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uT(){const a=qi();return a.indexOf("MSIE ")>=0||a.indexOf("Trident/")>=0}function hT(){return!aT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fT(){try{return typeof indexedDB=="object"}catch{return!1}}function dT(){return new Promise((a,e)=>{try{let n=!0;const o="validate-browser-context-for-indexeddb-analytics-module",h=self.indexedDB.open(o);h.onsuccess=()=>{h.result.close(),n||self.indexedDB.deleteDatabase(o),a(!0)},h.onupgradeneeded=()=>{n=!1},h.onerror=()=>{e(h.error?.message||"")}}catch(n){e(n)}})}const gT="FirebaseError";class ya extends Error{constructor(e,n,o){super(n),this.code=e,this.customData=o,this.name=gT,Object.setPrototypeOf(this,ya.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fu.prototype.create)}}class fu{constructor(e,n,o){this.service=e,this.serviceName=n,this.errors=o}create(e,...n){const o=n[0]||{},h=`${this.service}/${e}`,m=this.errors[e],_=m?mT(m,o):"Error",v=`${this.serviceName}: ${_} (${h}).`;return new ya(h,v,o)}}function mT(a,e){return a.replace(pT,(n,o)=>{const h=e[o];return h!=null?String(h):`<${o}?>`})}const pT=/\{\$([^}]+)}/g;function yT(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}function Ko(a,e){if(a===e)return!0;const n=Object.keys(a),o=Object.keys(e);for(const h of n){if(!o.includes(h))return!1;const m=a[h],_=e[h];if(j2(m)&&j2(_)){if(!Ko(m,_))return!1}else if(m!==_)return!1}for(const h of o)if(!n.includes(h))return!1;return!0}function j2(a){return a!==null&&typeof a=="object"}function du(a){const e=[];for(const[n,o]of Object.entries(a))Array.isArray(o)?o.forEach(h=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(h))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(o));return e.length?"&"+e.join("&"):""}function Gc(a){const e={};return a.replace(/^\?/,"").split("&").forEach(o=>{if(o){const[h,m]=o.split("=");e[decodeURIComponent(h)]=decodeURIComponent(m)}}),e}function qc(a){const e=a.indexOf("?");if(!e)return"";const n=a.indexOf("#",e);return a.substring(e,n>0?n:void 0)}function ET(a,e){const n=new _T(a,e);return n.subscribe.bind(n)}class _T{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(o=>{this.error(o)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,o){let h;if(e===void 0&&n===void 0&&o===void 0)throw new Error("Missing Observer.");xT(e,["next","error","complete"])?h=e:h={next:e,error:n,complete:o},h.next===void 0&&(h.next=U1),h.error===void 0&&(h.error=U1),h.complete===void 0&&(h.complete=U1);const m=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?h.error(this.finalError):h.complete()}catch{}}),this.observers.push(h),m}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(o){typeof console<"u"&&console.error&&console.error(o)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xT(a,e){if(typeof a!="object"||a===null)return!1;for(const n of e)if(n in a&&typeof a[n]=="function")return!0;return!1}function U1(){}function ci(a){return a&&a._delegate?a._delegate:a}class Qo{constructor(e,n,o){this.name=e,this.instanceFactory=n,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const qo="[DEFAULT]";class AT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const o=new tT;if(this.instancesDeferred.set(n,o),this.isInitialized(n)||this.shouldAutoInitialize())try{const h=this.getOrInitializeService({instanceIdentifier:n});h&&o.resolve(h)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),o=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(h){if(o)return null;throw h}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TT(e))try{this.getOrInitializeService({instanceIdentifier:qo})}catch{}for(const[n,o]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(n);try{const m=this.getOrInitializeService({instanceIdentifier:h});o.resolve(m)}catch{}}}}clearInstance(e=qo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qo){return this.instances.has(e)}getOptions(e=qo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const h=this.getOrInitializeService({instanceIdentifier:o,options:n});for(const[m,_]of this.instancesDeferred.entries()){const v=this.normalizeInstanceIdentifier(m);o===v&&_.resolve(h)}return h}onInit(e,n){const o=this.normalizeInstanceIdentifier(n),h=this.onInitCallbacks.get(o)??new Set;h.add(e),this.onInitCallbacks.set(o,h);const m=this.instances.get(o);return m&&e(m,o),()=>{h.delete(e)}}invokeOnInitCallbacks(e,n){const o=this.onInitCallbacks.get(n);if(o)for(const h of o)try{h(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:wT(e),options:n}),this.instances.set(e,o),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=qo){return this.component?this.component.multipleInstances?e:qo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wT(a){return a===qo?void 0:a}function TT(a){return a.instantiationMode==="EAGER"}class CT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new AT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Bt;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(Bt||(Bt={}));const vT={debug:Bt.DEBUG,verbose:Bt.VERBOSE,info:Bt.INFO,warn:Bt.WARN,error:Bt.ERROR,silent:Bt.SILENT},ST=Bt.INFO,bT={[Bt.DEBUG]:"log",[Bt.VERBOSE]:"log",[Bt.INFO]:"info",[Bt.WARN]:"warn",[Bt.ERROR]:"error"},IT=(a,e,...n)=>{if(e<a.logLevel)return;const o=new Date().toISOString(),h=bT[e];if(h)console[h](`[${o}]  ${a.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class L0{constructor(e){this.name=e,this._logLevel=ST,this._logHandler=IT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Bt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Bt.DEBUG,...e),this._logHandler(this,Bt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Bt.VERBOSE,...e),this._logHandler(this,Bt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Bt.INFO,...e),this._logHandler(this,Bt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Bt.WARN,...e),this._logHandler(this,Bt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Bt.ERROR,...e),this._logHandler(this,Bt.ERROR,...e)}}const RT=(a,e)=>e.some(n=>a instanceof n);let G2,q2;function NT(){return G2||(G2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OT(){return q2||(q2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const VE=new WeakMap,e0=new WeakMap,UE=new WeakMap,F1=new WeakMap,P0=new WeakMap;function DT(a){const e=new Promise((n,o)=>{const h=()=>{a.removeEventListener("success",m),a.removeEventListener("error",_)},m=()=>{n(ro(a.result)),h()},_=()=>{o(a.error),h()};a.addEventListener("success",m),a.addEventListener("error",_)});return e.then(n=>{n instanceof IDBCursor&&VE.set(n,a)}).catch(()=>{}),P0.set(e,a),e}function MT(a){if(e0.has(a))return;const e=new Promise((n,o)=>{const h=()=>{a.removeEventListener("complete",m),a.removeEventListener("error",_),a.removeEventListener("abort",_)},m=()=>{n(),h()},_=()=>{o(a.error||new DOMException("AbortError","AbortError")),h()};a.addEventListener("complete",m),a.addEventListener("error",_),a.addEventListener("abort",_)});e0.set(a,e)}let t0={get(a,e,n){if(a instanceof IDBTransaction){if(e==="done")return e0.get(a);if(e==="objectStoreNames")return a.objectStoreNames||UE.get(a);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ro(a[e])},set(a,e,n){return a[e]=n,!0},has(a,e){return a instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in a}};function LT(a){t0=a(t0)}function PT(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const o=a.call(z1(this),e,...n);return UE.set(o,e.sort?e.sort():[e]),ro(o)}:OT().includes(a)?function(...e){return a.apply(z1(this),e),ro(VE.get(this))}:function(...e){return ro(a.apply(z1(this),e))}}function BT(a){return typeof a=="function"?PT(a):(a instanceof IDBTransaction&&MT(a),RT(a,NT())?new Proxy(a,t0):a)}function ro(a){if(a instanceof IDBRequest)return DT(a);if(F1.has(a))return F1.get(a);const e=BT(a);return e!==a&&(F1.set(a,e),P0.set(e,a)),e}const z1=a=>P0.get(a);function kT(a,e,{blocked:n,upgrade:o,blocking:h,terminated:m}={}){const _=indexedDB.open(a,e),v=ro(_);return o&&_.addEventListener("upgradeneeded",T=>{o(ro(_.result),T.oldVersion,T.newVersion,ro(_.transaction),T)}),n&&_.addEventListener("blocked",T=>n(T.oldVersion,T.newVersion,T)),v.then(T=>{m&&T.addEventListener("close",()=>m()),h&&T.addEventListener("versionchange",A=>h(A.oldVersion,A.newVersion,A))}).catch(()=>{}),v}const VT=["get","getKey","getAll","getAllKeys","count"],UT=["put","add","delete","clear"],H1=new Map;function X2(a,e){if(!(a instanceof IDBDatabase&&!(e in a)&&typeof e=="string"))return;if(H1.get(e))return H1.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,h=UT.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(h||VT.includes(n)))return;const m=async function(_,...v){const T=this.transaction(_,h?"readwrite":"readonly");let A=T.store;return o&&(A=A.index(v.shift())),(await Promise.all([A[n](...v),h&&T.done]))[0]};return H1.set(e,m),m}LT(a=>({...a,get:(e,n,o)=>X2(e,n)||a.get(e,n,o),has:(e,n)=>!!X2(e,n)||a.has(e,n)}));class FT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zT(n)){const o=n.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(n=>n).join(" ")}}function zT(a){return a.getComponent()?.type==="VERSION"}const n0="@firebase/app",Y2="0.14.6";const fa=new L0("@firebase/app"),HT="@firebase/app-compat",jT="@firebase/analytics-compat",GT="@firebase/analytics",qT="@firebase/app-check-compat",XT="@firebase/app-check",YT="@firebase/auth",WT="@firebase/auth-compat",KT="@firebase/database",QT="@firebase/data-connect",ZT="@firebase/database-compat",JT="@firebase/functions",$T="@firebase/functions-compat",e3="@firebase/installations",t3="@firebase/installations-compat",n3="@firebase/messaging",i3="@firebase/messaging-compat",r3="@firebase/performance",s3="@firebase/performance-compat",a3="@firebase/remote-config",o3="@firebase/remote-config-compat",l3="@firebase/storage",c3="@firebase/storage-compat",u3="@firebase/firestore",h3="@firebase/ai",f3="@firebase/firestore-compat",d3="firebase",g3="12.6.0";const i0="[DEFAULT]",m3={[n0]:"fire-core",[HT]:"fire-core-compat",[GT]:"fire-analytics",[jT]:"fire-analytics-compat",[XT]:"fire-app-check",[qT]:"fire-app-check-compat",[YT]:"fire-auth",[WT]:"fire-auth-compat",[KT]:"fire-rtdb",[QT]:"fire-data-connect",[ZT]:"fire-rtdb-compat",[JT]:"fire-fn",[$T]:"fire-fn-compat",[e3]:"fire-iid",[t3]:"fire-iid-compat",[n3]:"fire-fcm",[i3]:"fire-fcm-compat",[r3]:"fire-perf",[s3]:"fire-perf-compat",[a3]:"fire-rc",[o3]:"fire-rc-compat",[l3]:"fire-gcs",[c3]:"fire-gcs-compat",[u3]:"fire-fst",[f3]:"fire-fst-compat",[h3]:"fire-vertex","fire-js":"fire-js",[d3]:"fire-js-all"};const Qh=new Map,p3=new Map,r0=new Map;function W2(a,e){try{a.container.addComponent(e)}catch(n){fa.debug(`Component ${e.name} failed to register with FirebaseApp ${a.name}`,n)}}function Wl(a){const e=a.name;if(r0.has(e))return fa.debug(`There were multiple attempts to register component ${e}.`),!1;r0.set(e,a);for(const n of Qh.values())W2(n,a);for(const n of p3.values())W2(n,a);return!0}function B0(a,e){const n=a.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),a.container.getProvider(e)}function Zr(a){return a==null?!1:a.settings!==void 0}const y3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},so=new fu("app","Firebase",y3);class E3{constructor(e,n,o){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new Qo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw so.create("app-deleted",{appName:this._name})}}const nc=g3;function FE(a,e={}){let n=a;typeof e!="object"&&(e={name:e});const o={name:i0,automaticDataCollectionEnabled:!0,...e},h=o.name;if(typeof h!="string"||!h)throw so.create("bad-app-name",{appName:String(h)});if(n||(n=LE()),!n)throw so.create("no-options");const m=Qh.get(h);if(m){if(Ko(n,m.options)&&Ko(o,m.config))return m;throw so.create("duplicate-app",{appName:h})}const _=new CT(h);for(const T of r0.values())_.addComponent(T);const v=new E3(n,o,_);return Qh.set(h,v),v}function zE(a=i0){const e=Qh.get(a);if(!e&&a===i0&&LE())return FE();if(!e)throw so.create("no-app",{appName:a});return e}function ao(a,e,n){let o=m3[a]??a;n&&(o+=`-${n}`);const h=o.match(/\s|\//),m=e.match(/\s|\//);if(h||m){const _=[`Unable to register library "${o}" with version "${e}":`];h&&_.push(`library name "${o}" contains illegal characters (whitespace or "/")`),h&&m&&_.push("and"),m&&_.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fa.warn(_.join(" "));return}Wl(new Qo(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}const _3="firebase-heartbeat-database",x3=1,iu="firebase-heartbeat-store";let j1=null;function HE(){return j1||(j1=kT(_3,x3,{upgrade:(a,e)=>{switch(e){case 0:try{a.createObjectStore(iu)}catch(n){console.warn(n)}}}}).catch(a=>{throw so.create("idb-open",{originalErrorMessage:a.message})})),j1}async function A3(a){try{const n=(await HE()).transaction(iu),o=await n.objectStore(iu).get(jE(a));return await n.done,o}catch(e){if(e instanceof ya)fa.warn(e.message);else{const n=so.create("idb-get",{originalErrorMessage:e?.message});fa.warn(n.message)}}}async function K2(a,e){try{const o=(await HE()).transaction(iu,"readwrite");await o.objectStore(iu).put(e,jE(a)),await o.done}catch(n){if(n instanceof ya)fa.warn(n.message);else{const o=so.create("idb-set",{originalErrorMessage:n?.message});fa.warn(o.message)}}}function jE(a){return`${a.name}!${a.options.appId}`}const w3=1024,T3=30;class C3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new S3(n),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Q2();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(h=>h.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:n}),this._heartbeatsCache.heartbeats.length>T3){const h=b3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){fa.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Q2(),{heartbeatsToSend:n,unsentEntries:o}=v3(this._heartbeatsCache.heartbeats),h=Kh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),h}catch(e){return fa.warn(e),""}}}function Q2(){return new Date().toISOString().substring(0,10)}function v3(a,e=w3){const n=[];let o=a.slice();for(const h of a){const m=n.find(_=>_.agent===h.agent);if(m){if(m.dates.push(h.date),Z2(n)>e){m.dates.pop();break}}else if(n.push({agent:h.agent,dates:[h.date]}),Z2(n)>e){n.pop();break}o=o.slice(1)}return{heartbeatsToSend:n,unsentEntries:o}}class S3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fT()?dT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await A3(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return K2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return K2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Z2(a){return Kh(JSON.stringify({version:2,heartbeats:a})).length}function b3(a){if(a.length===0)return-1;let e=0,n=a[0].date;for(let o=1;o<a.length;o++)a[o].date<n&&(n=a[o].date,e=o);return e}function I3(a){Wl(new Qo("platform-logger",e=>new FT(e),"PRIVATE")),Wl(new Qo("heartbeat",e=>new C3(e),"PRIVATE")),ao(n0,Y2,a),ao(n0,Y2,"esm2020"),ao("fire-js","")}I3("");var R3="firebase",N3="12.6.0";ao(R3,N3,"app");function GE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const O3=GE,qE=new fu("auth","Firebase",GE());const Zh=new L0("@firebase/auth");function D3(a,...e){Zh.logLevel<=Bt.WARN&&Zh.warn(`Auth (${nc}): ${a}`,...e)}function Uh(a,...e){Zh.logLevel<=Bt.ERROR&&Zh.error(`Auth (${nc}): ${a}`,...e)}function hs(a,...e){throw k0(a,...e)}function Cs(a,...e){return k0(a,...e)}function XE(a,e,n){const o={...O3(),[e]:n};return new fu("auth","Firebase",o).create(e,{appName:a.name})}function ua(a){return XE(a,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function k0(a,...e){if(typeof a!="string"){const n=e[0],o=[...e.slice(1)];return o[0]&&(o[0].appName=a.name),a._errorFactory.create(n,...o)}return qE.create(a,...e)}function st(a,e,...n){if(!a)throw k0(e,...n)}function la(a){const e="INTERNAL ASSERTION FAILED: "+a;throw Uh(e),new Error(e)}function da(a,e){a||la(e)}function s0(){return typeof self<"u"&&self.location?.href||""}function M3(){return J2()==="http:"||J2()==="https:"}function J2(){return typeof self<"u"&&self.location?.protocol||null}function L3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(M3()||lT()||"connection"in navigator)?navigator.onLine:!0}function P3(){if(typeof navigator>"u")return null;const a=navigator;return a.languages&&a.languages[0]||a.language||null}class gu{constructor(e,n){this.shortDelay=e,this.longDelay=n,da(n>e,"Short delay should be less than long delay!"),this.isMobile=sT()||cT()}get(){return L3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function V0(a,e){da(a.emulator,"Emulator should always be set here");const{url:n}=a.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class YE{static initialize(e,n,o){this.fetchImpl=e,n&&(this.headersImpl=n),o&&(this.responseImpl=o)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;la("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;la("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;la("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const B3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const k3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],V3=new gu(3e4,6e4);function po(a,e){return a.tenantId&&!e.tenantId?{...e,tenantId:a.tenantId}:e}async function yo(a,e,n,o,h={}){return WE(a,h,async()=>{let m={},_={};o&&(e==="GET"?_=o:m={body:JSON.stringify(o)});const v=du({key:a.config.apiKey,..._}).slice(1),T=await a._getAdditionalHeaders();T["Content-Type"]="application/json",a.languageCode&&(T["X-Firebase-Locale"]=a.languageCode);const A={method:e,headers:T,...m};return oT()||(A.referrerPolicy="no-referrer"),a.emulatorConfig&&tc(a.emulatorConfig.host)&&(A.credentials="include"),YE.fetch()(await KE(a,a.config.apiHost,n,v),A)})}async function WE(a,e,n){a._canInitEmulator=!1;const o={...B3,...e};try{const h=new F3(a),m=await Promise.race([n(),h.promise]);h.clearNetworkTimeout();const _=await m.json();if("needConfirmation"in _)throw Nh(a,"account-exists-with-different-credential",_);if(m.ok&&!("errorMessage"in _))return _;{const v=m.ok?_.errorMessage:_.error.message,[T,A]=v.split(" : ");if(T==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nh(a,"credential-already-in-use",_);if(T==="EMAIL_EXISTS")throw Nh(a,"email-already-in-use",_);if(T==="USER_DISABLED")throw Nh(a,"user-disabled",_);const b=o[T]||T.toLowerCase().replace(/[_\s]+/g,"-");if(A)throw XE(a,b,A);hs(a,b)}}catch(h){if(h instanceof ya)throw h;hs(a,"network-request-failed",{message:String(h)})}}async function mu(a,e,n,o,h={}){const m=await yo(a,e,n,o,h);return"mfaPendingCredential"in m&&hs(a,"multi-factor-auth-required",{_serverResponse:m}),m}async function KE(a,e,n,o){const h=`${e}${n}?${o}`,m=a,_=m.config.emulator?V0(a.config,h):`${a.config.apiScheme}://${h}`;return k3.includes(n)&&(await m._persistenceManagerAvailable,m._getPersistenceType()==="COOKIE")?m._getPersistence()._getFinalTarget(_).toString():_}function U3(a){switch(a){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class F3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,o)=>{this.timer=setTimeout(()=>o(Cs(this.auth,"network-request-failed")),V3.get())})}}function Nh(a,e,n){const o={appName:a.name};n.email&&(o.email=n.email),n.phoneNumber&&(o.phoneNumber=n.phoneNumber);const h=Cs(a,e,o);return h.customData._tokenResponse=n,h}function $2(a){return a!==void 0&&a.enterprise!==void 0}class z3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return U3(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function H3(a,e){return yo(a,"GET","/v2/recaptchaConfig",po(a,e))}async function j3(a,e){return yo(a,"POST","/v1/accounts:delete",e)}async function Jh(a,e){return yo(a,"POST","/v1/accounts:lookup",e)}function Jc(a){if(a)try{const e=new Date(Number(a));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function G3(a,e=!1){const n=ci(a),o=await n.getIdToken(e),h=U0(o);st(h&&h.exp&&h.auth_time&&h.iat,n.auth,"internal-error");const m=typeof h.firebase=="object"?h.firebase:void 0,_=m?.sign_in_provider;return{claims:h,token:o,authTime:Jc(G1(h.auth_time)),issuedAtTime:Jc(G1(h.iat)),expirationTime:Jc(G1(h.exp)),signInProvider:_||null,signInSecondFactor:m?.sign_in_second_factor||null}}function G1(a){return Number(a)*1e3}function U0(a){const[e,n,o]=a.split(".");if(e===void 0||n===void 0||o===void 0)return Uh("JWT malformed, contained fewer than 3 sections"),null;try{const h=DE(n);return h?JSON.parse(h):(Uh("Failed to decode base64 JWT payload"),null)}catch(h){return Uh("Caught error parsing JWT payload as JSON",h?.toString()),null}}function ey(a){const e=U0(a);return st(e,"internal-error"),st(typeof e.exp<"u","internal-error"),st(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ru(a,e,n=!1){if(n)return e;try{return await e}catch(o){throw o instanceof ya&&q3(o)&&a.auth.currentUser===a&&await a.auth.signOut(),o}}function q3({code:a}){return a==="auth/user-disabled"||a==="auth/user-token-expired"}class X3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const o=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class a0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jc(this.lastLoginAt),this.creationTime=Jc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function $h(a){const e=a.auth,n=await a.getIdToken(),o=await ru(a,Jh(e,{idToken:n}));st(o?.users.length,e,"internal-error");const h=o.users[0];a._notifyReloadListener(h);const m=h.providerUserInfo?.length?QE(h.providerUserInfo):[],_=W3(a.providerData,m),v=a.isAnonymous,T=!(a.email&&h.passwordHash)&&!_?.length,A=v?T:!1,b={uid:h.localId,displayName:h.displayName||null,photoURL:h.photoUrl||null,email:h.email||null,emailVerified:h.emailVerified||!1,phoneNumber:h.phoneNumber||null,tenantId:h.tenantId||null,providerData:_,metadata:new a0(h.createdAt,h.lastLoginAt),isAnonymous:A};Object.assign(a,b)}async function Y3(a){const e=ci(a);await $h(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function W3(a,e){return[...a.filter(o=>!e.some(h=>h.providerId===o.providerId)),...e]}function QE(a){return a.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function K3(a,e){const n=await WE(a,{},async()=>{const o=du({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:h,apiKey:m}=a.config,_=await KE(a,h,"/v1/token",`key=${m}`),v=await a._getAdditionalHeaders();v["Content-Type"]="application/x-www-form-urlencoded";const T={method:"POST",headers:v,body:o};return a.emulatorConfig&&tc(a.emulatorConfig.host)&&(T.credentials="include"),YE.fetch()(_,T)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Q3(a,e){return yo(a,"POST","/v2/accounts:revokeToken",po(a,e))}class Gl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){st(e.idToken,"internal-error"),st(typeof e.idToken<"u","internal-error"),st(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ey(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){st(e.length!==0,"internal-error");const n=ey(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(st(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:o,refreshToken:h,expiresIn:m}=await K3(e,n);this.updateTokensAndExpiration(o,h,Number(m))}updateTokensAndExpiration(e,n,o){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+o*1e3}static fromJSON(e,n){const{refreshToken:o,accessToken:h,expirationTime:m}=n,_=new Gl;return o&&(st(typeof o=="string","internal-error",{appName:e}),_.refreshToken=o),h&&(st(typeof h=="string","internal-error",{appName:e}),_.accessToken=h),m&&(st(typeof m=="number","internal-error",{appName:e}),_.expirationTime=m),_}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gl,this.toJSON())}_performRefresh(){return la("not implemented")}}function Za(a,e){st(typeof a=="string"||typeof a>"u","internal-error",{appName:e})}class us{constructor({uid:e,auth:n,stsTokenManager:o,...h}){this.providerId="firebase",this.proactiveRefresh=new X3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=h.displayName||null,this.email=h.email||null,this.emailVerified=h.emailVerified||!1,this.phoneNumber=h.phoneNumber||null,this.photoURL=h.photoURL||null,this.isAnonymous=h.isAnonymous||!1,this.tenantId=h.tenantId||null,this.providerData=h.providerData?[...h.providerData]:[],this.metadata=new a0(h.createdAt||void 0,h.lastLoginAt||void 0)}async getIdToken(e){const n=await ru(this,this.stsTokenManager.getToken(this.auth,e));return st(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return G3(this,e)}reload(){return Y3(this)}_assign(e){this!==e&&(st(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new us({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){st(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let o=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),o=!0),n&&await $h(this),await this.auth._persistUserIfCurrent(this),o&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zr(this.auth.app))return Promise.reject(ua(this.auth));const e=await this.getIdToken();return await ru(this,j3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const o=n.displayName??void 0,h=n.email??void 0,m=n.phoneNumber??void 0,_=n.photoURL??void 0,v=n.tenantId??void 0,T=n._redirectEventId??void 0,A=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:O,emailVerified:V,isAnonymous:j,providerData:ee,stsTokenManager:re}=n;st(O&&re,e,"internal-error");const le=Gl.fromJSON(this.name,re);st(typeof O=="string",e,"internal-error"),Za(o,e.name),Za(h,e.name),st(typeof V=="boolean",e,"internal-error"),st(typeof j=="boolean",e,"internal-error"),Za(m,e.name),Za(_,e.name),Za(v,e.name),Za(T,e.name),Za(A,e.name),Za(b,e.name);const ke=new us({uid:O,auth:e,email:h,emailVerified:V,displayName:o,isAnonymous:j,photoURL:_,phoneNumber:m,tenantId:v,stsTokenManager:le,createdAt:A,lastLoginAt:b});return ee&&Array.isArray(ee)&&(ke.providerData=ee.map(Re=>({...Re}))),T&&(ke._redirectEventId=T),ke}static async _fromIdTokenResponse(e,n,o=!1){const h=new Gl;h.updateFromServerResponse(n);const m=new us({uid:n.localId,auth:e,stsTokenManager:h,isAnonymous:o});return await $h(m),m}static async _fromGetAccountInfoResponse(e,n,o){const h=n.users[0];st(h.localId!==void 0,"internal-error");const m=h.providerUserInfo!==void 0?QE(h.providerUserInfo):[],_=!(h.email&&h.passwordHash)&&!m?.length,v=new Gl;v.updateFromIdToken(o);const T=new us({uid:h.localId,auth:e,stsTokenManager:v,isAnonymous:_}),A={uid:h.localId,displayName:h.displayName||null,photoURL:h.photoUrl||null,email:h.email||null,emailVerified:h.emailVerified||!1,phoneNumber:h.phoneNumber||null,tenantId:h.tenantId||null,providerData:m,metadata:new a0(h.createdAt,h.lastLoginAt),isAnonymous:!(h.email&&h.passwordHash)&&!m?.length};return Object.assign(T,A),T}}const ty=new Map;function ca(a){da(a instanceof Function,"Expected a class definition");let e=ty.get(a);return e?(da(e instanceof a,"Instance stored in cache mismatched with class"),e):(e=new a,ty.set(a,e),e)}class ZE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ZE.type="NONE";const ny=ZE;function Fh(a,e,n){return`firebase:${a}:${e}:${n}`}class ql{constructor(e,n,o){this.persistence=e,this.auth=n,this.userKey=o;const{config:h,name:m}=this.auth;this.fullUserKey=Fh(this.userKey,h.apiKey,m),this.fullPersistenceKey=Fh("persistence",h.apiKey,m),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Jh(this.auth,{idToken:e}).catch(()=>{});return n?us._fromGetAccountInfoResponse(this.auth,n,e):null}return us._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,o="authUser"){if(!n.length)return new ql(ca(ny),e,o);const h=(await Promise.all(n.map(async A=>{if(await A._isAvailable())return A}))).filter(A=>A);let m=h[0]||ca(ny);const _=Fh(o,e.config.apiKey,e.name);let v=null;for(const A of n)try{const b=await A._get(_);if(b){let O;if(typeof b=="string"){const V=await Jh(e,{idToken:b}).catch(()=>{});if(!V)break;O=await us._fromGetAccountInfoResponse(e,V,b)}else O=us._fromJSON(e,b);A!==m&&(v=O),m=A;break}}catch{}const T=h.filter(A=>A._shouldAllowMigration);return!m._shouldAllowMigration||!T.length?new ql(m,e,o):(m=T[0],v&&await m._set(_,v.toJSON()),await Promise.all(n.map(async A=>{if(A!==m)try{await A._remove(_)}catch{}})),new ql(m,e,o))}}function iy(a){const e=a.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(t_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(JE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(i_(e))return"Blackberry";if(r_(e))return"Webos";if($E(e))return"Safari";if((e.includes("chrome/")||e_(e))&&!e.includes("edge/"))return"Chrome";if(n_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,o=a.match(n);if(o?.length===2)return o[1]}return"Other"}function JE(a=qi()){return/firefox\//i.test(a)}function $E(a=qi()){const e=a.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function e_(a=qi()){return/crios\//i.test(a)}function t_(a=qi()){return/iemobile/i.test(a)}function n_(a=qi()){return/android/i.test(a)}function i_(a=qi()){return/blackberry/i.test(a)}function r_(a=qi()){return/webos/i.test(a)}function F0(a=qi()){return/iphone|ipad|ipod/i.test(a)||/macintosh/i.test(a)&&/mobile/i.test(a)}function Z3(a=qi()){return F0(a)&&!!window.navigator?.standalone}function J3(){return uT()&&document.documentMode===10}function s_(a=qi()){return F0(a)||n_(a)||r_(a)||i_(a)||/windows phone/i.test(a)||t_(a)}function a_(a,e=[]){let n;switch(a){case"Browser":n=iy(qi());break;case"Worker":n=`${iy(qi())}-${a}`;break;default:n=a}const o=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${nc}/${o}`}class $3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const o=m=>new Promise((_,v)=>{try{const T=e(m);_(T)}catch(T){v(T)}});o.onAbort=n,this.queue.push(o);const h=this.queue.length-1;return()=>{this.queue[h]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const o of this.queue)await o(e),o.onAbort&&n.push(o.onAbort)}catch(o){n.reverse();for(const h of n)try{h()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:o?.message})}}}async function eC(a,e={}){return yo(a,"GET","/v2/passwordPolicy",po(a,e))}const tC=6;class nC{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??tC,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const o=this.customStrengthOptions.minPasswordLength,h=this.customStrengthOptions.maxPasswordLength;o&&(n.meetsMinPasswordLength=e.length>=o),h&&(n.meetsMaxPasswordLength=e.length<=h)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let o;for(let h=0;h<e.length;h++)o=e.charAt(h),this.updatePasswordCharacterOptionsStatuses(n,o>="a"&&o<="z",o>="A"&&o<="Z",o>="0"&&o<="9",this.allowedNonAlphanumericCharacters.includes(o))}updatePasswordCharacterOptionsStatuses(e,n,o,h,m){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=o)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=h)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=m))}}class iC{constructor(e,n,o,h){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=o,this.config=h,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ry(this),this.idTokenSubscription=new ry(this),this.beforeStateQueue=new $3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=h.sdkClientVersion,this._persistenceManagerAvailable=new Promise(m=>this._resolvePersistenceManagerAvailable=m)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ca(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ql.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Jh(this,{idToken:e}),o=await us._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(o)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Zr(this.app)){const m=this.app.settings.authIdToken;return m?new Promise(_=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(m).then(_,_))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let o=n,h=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const m=this.redirectUser?._redirectEventId,_=o?._redirectEventId,v=await this.tryRedirectSignIn(e);(!m||m===_)&&v?.user&&(o=v.user,h=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(h)try{await this.beforeStateQueue.runMiddleware(o)}catch(m){o=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(m))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return st(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await $h(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=P3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zr(this.app))return Promise.reject(ua(this));const n=e?ci(e):null;return n&&st(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&st(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zr(this.app)?Promise.reject(ua(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zr(this.app)?Promise.reject(ua(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ca(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await eC(this),n=new nC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fu("auth","Firebase",e())}onAuthStateChanged(e,n,o){return this.registerStateListener(this.authStateSubscription,e,n,o)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,o){return this.registerStateListener(this.idTokenSubscription,e,n,o)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const o=this.onAuthStateChanged(()=>{o(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),o={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(o.tenantId=this.tenantId),await Q3(this,o)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const o=await this.getOrInitRedirectPersistenceManager(n);return e===null?o.removeCurrentUser():o.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ca(e)||this._popupRedirectResolver;st(n,this,"argument-error"),this.redirectPersistenceManager=await ql.create(this,[ca(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,o,h){if(this._deleted)return()=>{};const m=typeof n=="function"?n:n.next.bind(n);let _=!1;const v=this._isInitialized?Promise.resolve():this._initializationPromise;if(st(v,this,"internal-error"),v.then(()=>{_||m(this.currentUser)}),typeof n=="function"){const T=e.addObserver(n,o,h);return()=>{_=!0,T()}}else{const T=e.addObserver(n);return()=>{_=!0,T()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return st(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=a_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const o=await this._getAppCheckToken();return o&&(e["X-Firebase-AppCheck"]=o),e}async _getAppCheckToken(){if(Zr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&D3(`Error while retrieving App Check token: ${e.error}`),e?.token}}function nl(a){return ci(a)}class ry{constructor(e){this.auth=e,this.observer=null,this.addObserver=ET(n=>this.observer=n)}get next(){return st(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Tf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rC(a){Tf=a}function o_(a){return Tf.loadJS(a)}function sC(){return Tf.recaptchaEnterpriseScript}function aC(){return Tf.gapiScript}function oC(a){return`__${a}${Math.floor(Math.random()*1e6)}`}class lC{constructor(){this.enterprise=new cC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class cC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const uC="recaptcha-enterprise",l_="NO_RECAPTCHA";class hC{constructor(e){this.type=uC,this.auth=nl(e)}async verify(e="verify",n=!1){async function o(m){if(!n){if(m.tenantId==null&&m._agentRecaptchaConfig!=null)return m._agentRecaptchaConfig.siteKey;if(m.tenantId!=null&&m._tenantRecaptchaConfigs[m.tenantId]!==void 0)return m._tenantRecaptchaConfigs[m.tenantId].siteKey}return new Promise(async(_,v)=>{H3(m,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(T=>{if(T.recaptchaKey===void 0)v(new Error("recaptcha Enterprise site key undefined"));else{const A=new z3(T);return m.tenantId==null?m._agentRecaptchaConfig=A:m._tenantRecaptchaConfigs[m.tenantId]=A,_(A.siteKey)}}).catch(T=>{v(T)})})}function h(m,_,v){const T=window.grecaptcha;$2(T)?T.enterprise.ready(()=>{T.enterprise.execute(m,{action:e}).then(A=>{_(A)}).catch(()=>{_(l_)})}):v(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new lC().execute("siteKey",{action:"verify"}):new Promise((m,_)=>{o(this.auth).then(v=>{if(!n&&$2(window.grecaptcha))h(v,m,_);else{if(typeof window>"u"){_(new Error("RecaptchaVerifier is only supported in browser"));return}let T=sC();T.length!==0&&(T+=v),o_(T).then(()=>{h(v,m,_)}).catch(A=>{_(A)})}}).catch(v=>{_(v)})})}}async function sy(a,e,n,o=!1,h=!1){const m=new hC(a);let _;if(h)_=l_;else try{_=await m.verify(n)}catch{_=await m.verify(n,!0)}const v={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in v){const T=v.phoneEnrollmentInfo.phoneNumber,A=v.phoneEnrollmentInfo.recaptchaToken;Object.assign(v,{phoneEnrollmentInfo:{phoneNumber:T,recaptchaToken:A,captchaResponse:_,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in v){const T=v.phoneSignInInfo.recaptchaToken;Object.assign(v,{phoneSignInInfo:{recaptchaToken:T,captchaResponse:_,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return v}return o?Object.assign(v,{captchaResp:_}):Object.assign(v,{captchaResponse:_}),Object.assign(v,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(v,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),v}async function o0(a,e,n,o,h){if(a._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const m=await sy(a,e,n,n==="getOobCode");return o(a,m)}else return o(a,e).catch(async m=>{if(m.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const _=await sy(a,e,n,n==="getOobCode");return o(a,_)}else return Promise.reject(m)})}function fC(a,e){const n=B0(a,"auth");if(n.isInitialized()){const h=n.getImmediate(),m=n.getOptions();if(Ko(m,e??{}))return h;hs(h,"already-initialized")}return n.initialize({options:e})}function dC(a,e){const n=e?.persistence||[],o=(Array.isArray(n)?n:[n]).map(ca);e?.errorMap&&a._updateErrorMap(e.errorMap),a._initializeWithPersistence(o,e?.popupRedirectResolver)}function gC(a,e,n){const o=nl(a);st(/^https?:\/\//.test(e),o,"invalid-emulator-scheme");const h=!1,m=c_(e),{host:_,port:v}=mC(e),T=v===null?"":`:${v}`,A={url:`${m}//${_}${T}/`},b=Object.freeze({host:_,port:v,protocol:m.replace(":",""),options:Object.freeze({disableWarnings:h})});if(!o._canInitEmulator){st(o.config.emulator&&o.emulatorConfig,o,"emulator-config-failed"),st(Ko(A,o.config.emulator)&&Ko(b,o.emulatorConfig),o,"emulator-config-failed");return}o.config.emulator=A,o.emulatorConfig=b,o.settings.appVerificationDisabledForTesting=!0,tc(_)?(BE(`${m}//${_}${T}`),kE("Auth",!0)):pC()}function c_(a){const e=a.indexOf(":");return e<0?"":a.substr(0,e+1)}function mC(a){const e=c_(a),n=/(\/\/)?([^?#/]+)/.exec(a.substr(e.length));if(!n)return{host:"",port:null};const o=n[2].split("@").pop()||"",h=/^(\[[^\]]+\])(:|$)/.exec(o);if(h){const m=h[1];return{host:m,port:ay(o.substr(m.length+1))}}else{const[m,_]=o.split(":");return{host:m,port:ay(_)}}}function ay(a){if(!a)return null;const e=Number(a);return isNaN(e)?null:e}function pC(){function a(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",a):a())}class z0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return la("not implemented")}_getIdTokenResponse(e){return la("not implemented")}_linkToIdToken(e,n){return la("not implemented")}_getReauthenticationResolver(e){return la("not implemented")}}async function yC(a,e){return yo(a,"POST","/v1/accounts:signUp",e)}async function EC(a,e){return mu(a,"POST","/v1/accounts:signInWithPassword",po(a,e))}async function _C(a,e){return mu(a,"POST","/v1/accounts:signInWithEmailLink",po(a,e))}async function xC(a,e){return mu(a,"POST","/v1/accounts:signInWithEmailLink",po(a,e))}class su extends z0{constructor(e,n,o,h=null){super("password",o),this._email=e,this._password=n,this._tenantId=h}static _fromEmailAndPassword(e,n){return new su(e,n,"password")}static _fromEmailAndCode(e,n,o=null){return new su(e,n,"emailLink",o)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return o0(e,n,"signInWithPassword",EC);case"emailLink":return _C(e,{email:this._email,oobCode:this._password});default:hs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const o={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return o0(e,o,"signUpPassword",yC);case"emailLink":return xC(e,{idToken:n,email:this._email,oobCode:this._password});default:hs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Xl(a,e){return mu(a,"POST","/v1/accounts:signInWithIdp",po(a,e))}const AC="http://localhost";class Zo extends z0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Zo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:o,signInMethod:h,...m}=n;if(!o||!h)return null;const _=new Zo(o,h);return _.idToken=m.idToken||void 0,_.accessToken=m.accessToken||void 0,_.secret=m.secret,_.nonce=m.nonce,_.pendingToken=m.pendingToken||null,_}_getIdTokenResponse(e){const n=this.buildRequest();return Xl(e,n)}_linkToIdToken(e,n){const o=this.buildRequest();return o.idToken=n,Xl(e,o)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xl(e,n)}buildRequest(){const e={requestUri:AC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=du(n)}return e}}function wC(a){switch(a){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function TC(a){const e=Gc(qc(a)).link,n=e?Gc(qc(e)).deep_link_id:null,o=Gc(qc(a)).deep_link_id;return(o?Gc(qc(o)).link:null)||o||n||e||a}class H0{constructor(e){const n=Gc(qc(e)),o=n.apiKey??null,h=n.oobCode??null,m=wC(n.mode??null);st(o&&h&&m,"argument-error"),this.apiKey=o,this.operation=m,this.code=h,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=TC(e);try{return new H0(n)}catch{return null}}}class ic{constructor(){this.providerId=ic.PROVIDER_ID}static credential(e,n){return su._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const o=H0.parseLink(n);return st(o,"argument-error"),su._fromEmailAndCode(e,o.code,o.tenantId)}}ic.PROVIDER_ID="password";ic.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ic.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class u_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class pu extends u_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ja extends pu{constructor(){super("facebook.com")}static credential(e){return Zo._fromParams({providerId:Ja.PROVIDER_ID,signInMethod:Ja.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ja.credentialFromTaggedObject(e)}static credentialFromError(e){return Ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ja.credential(e.oauthAccessToken)}catch{return null}}}Ja.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ja.PROVIDER_ID="facebook.com";class $a extends pu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Zo._fromParams({providerId:$a.PROVIDER_ID,signInMethod:$a.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $a.credentialFromTaggedObject(e)}static credentialFromError(e){return $a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:o}=e;if(!n&&!o)return null;try{return $a.credential(n,o)}catch{return null}}}$a.GOOGLE_SIGN_IN_METHOD="google.com";$a.PROVIDER_ID="google.com";class eo extends pu{constructor(){super("github.com")}static credential(e){return Zo._fromParams({providerId:eo.PROVIDER_ID,signInMethod:eo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return eo.credentialFromTaggedObject(e)}static credentialFromError(e){return eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return eo.credential(e.oauthAccessToken)}catch{return null}}}eo.GITHUB_SIGN_IN_METHOD="github.com";eo.PROVIDER_ID="github.com";class to extends pu{constructor(){super("twitter.com")}static credential(e,n){return Zo._fromParams({providerId:to.PROVIDER_ID,signInMethod:to.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return to.credentialFromTaggedObject(e)}static credentialFromError(e){return to.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:o}=e;if(!n||!o)return null;try{return to.credential(n,o)}catch{return null}}}to.TWITTER_SIGN_IN_METHOD="twitter.com";to.PROVIDER_ID="twitter.com";async function CC(a,e){return mu(a,"POST","/v1/accounts:signUp",po(a,e))}class Jo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,o,h=!1){const m=await us._fromIdTokenResponse(e,o,h),_=oy(o);return new Jo({user:m,providerId:_,_tokenResponse:o,operationType:n})}static async _forOperation(e,n,o){await e._updateTokensIfNecessary(o,!0);const h=oy(o);return new Jo({user:e,providerId:h,_tokenResponse:o,operationType:n})}}function oy(a){return a.providerId?a.providerId:"phoneNumber"in a?"phone":null}class ef extends ya{constructor(e,n,o,h){super(n.code,n.message),this.operationType=o,this.user=h,Object.setPrototypeOf(this,ef.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:o}}static _fromErrorAndOperation(e,n,o,h){return new ef(e,n,o,h)}}function h_(a,e,n,o){return(e==="reauthenticate"?n._getReauthenticationResolver(a):n._getIdTokenResponse(a)).catch(m=>{throw m.code==="auth/multi-factor-auth-required"?ef._fromErrorAndOperation(a,m,e,o):m})}async function vC(a,e,n=!1){const o=await ru(a,e._linkToIdToken(a.auth,await a.getIdToken()),n);return Jo._forOperation(a,"link",o)}async function SC(a,e,n=!1){const{auth:o}=a;if(Zr(o.app))return Promise.reject(ua(o));const h="reauthenticate";try{const m=await ru(a,h_(o,h,e,a),n);st(m.idToken,o,"internal-error");const _=U0(m.idToken);st(_,o,"internal-error");const{sub:v}=_;return st(a.uid===v,o,"user-mismatch"),Jo._forOperation(a,h,m)}catch(m){throw m?.code==="auth/user-not-found"&&hs(o,"user-mismatch"),m}}async function f_(a,e,n=!1){if(Zr(a.app))return Promise.reject(ua(a));const o="signIn",h=await h_(a,o,e),m=await Jo._fromIdTokenResponse(a,o,h);return n||await a._updateCurrentUser(m.user),m}async function bC(a,e){return f_(nl(a),e)}async function d_(a){const e=nl(a);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function IC(a,e,n){if(Zr(a.app))return Promise.reject(ua(a));const o=nl(a),_=await o0(o,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",CC).catch(T=>{throw T.code==="auth/password-does-not-meet-requirements"&&d_(a),T}),v=await Jo._fromIdTokenResponse(o,"signIn",_);return await o._updateCurrentUser(v.user),v}function RC(a,e,n){return Zr(a.app)?Promise.reject(ua(a)):bC(ci(a),ic.credential(e,n)).catch(async o=>{throw o.code==="auth/password-does-not-meet-requirements"&&d_(a),o})}function NC(a,e,n,o){return ci(a).onIdTokenChanged(e,n,o)}function OC(a,e,n){return ci(a).beforeAuthStateChanged(e,n)}function DC(a,e,n,o){return ci(a).onAuthStateChanged(e,n,o)}function MC(a){return ci(a).signOut()}const tf="__sak";class g_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(tf,"1"),this.storage.removeItem(tf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const LC=1e3,PC=10;class m_ extends g_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=s_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const o=this.storage.getItem(n),h=this.localCache[n];o!==h&&e(n,h,o)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((_,v,T)=>{this.notifyListeners(_,T)});return}const o=e.key;n?this.detachListener():this.stopPolling();const h=()=>{const _=this.storage.getItem(o);!n&&this.localCache[o]===_||this.notifyListeners(o,_)},m=this.storage.getItem(o);J3()&&m!==e.newValue&&e.newValue!==e.oldValue?setTimeout(h,PC):h()}notifyListeners(e,n){this.localCache[e]=n;const o=this.listeners[e];if(o)for(const h of Array.from(o))h(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,o)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:o}),!0)})},LC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}m_.type="LOCAL";const BC=m_;class p_ extends g_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}p_.type="SESSION";const y_=p_;function kC(a){return Promise.all(a.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Cf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(h=>h.isListeningto(e));if(n)return n;const o=new Cf(e);return this.receivers.push(o),o}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:o,eventType:h,data:m}=n.data,_=this.handlersMap[h];if(!_?.size)return;n.ports[0].postMessage({status:"ack",eventId:o,eventType:h});const v=Array.from(_).map(async A=>A(n.origin,m)),T=await kC(v);n.ports[0].postMessage({status:"done",eventId:o,eventType:h,response:T})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cf.receivers=[];function j0(a="",e=10){let n="";for(let o=0;o<e;o++)n+=Math.floor(Math.random()*10);return a+n}class VC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,o=50){const h=typeof MessageChannel<"u"?new MessageChannel:null;if(!h)throw new Error("connection_unavailable");let m,_;return new Promise((v,T)=>{const A=j0("",20);h.port1.start();const b=setTimeout(()=>{T(new Error("unsupported_event"))},o);_={messageChannel:h,onMessage(O){const V=O;if(V.data.eventId===A)switch(V.data.status){case"ack":clearTimeout(b),m=setTimeout(()=>{T(new Error("timeout"))},3e3);break;case"done":clearTimeout(m),v(V.data.response);break;default:clearTimeout(b),clearTimeout(m),T(new Error("invalid_response"));break}}},this.handlers.add(_),h.port1.addEventListener("message",_.onMessage),this.target.postMessage({eventType:e,eventId:A,data:n},[h.port2])}).finally(()=>{_&&this.removeMessageHandler(_)})}}function vs(){return window}function UC(a){vs().location.href=a}function E_(){return typeof vs().WorkerGlobalScope<"u"&&typeof vs().importScripts=="function"}async function FC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zC(){return navigator?.serviceWorker?.controller||null}function HC(){return E_()?self:null}const __="firebaseLocalStorageDb",jC=1,nf="firebaseLocalStorage",x_="fbase_key";class yu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vf(a,e){return a.transaction([nf],e?"readwrite":"readonly").objectStore(nf)}function GC(){const a=indexedDB.deleteDatabase(__);return new yu(a).toPromise()}function l0(){const a=indexedDB.open(__,jC);return new Promise((e,n)=>{a.addEventListener("error",()=>{n(a.error)}),a.addEventListener("upgradeneeded",()=>{const o=a.result;try{o.createObjectStore(nf,{keyPath:x_})}catch(h){n(h)}}),a.addEventListener("success",async()=>{const o=a.result;o.objectStoreNames.contains(nf)?e(o):(o.close(),await GC(),e(await l0()))})})}async function ly(a,e,n){const o=vf(a,!0).put({[x_]:e,value:n});return new yu(o).toPromise()}async function qC(a,e){const n=vf(a,!1).get(e),o=await new yu(n).toPromise();return o===void 0?null:o.value}function cy(a,e){const n=vf(a,!0).delete(e);return new yu(n).toPromise()}const XC=800,YC=3;class A_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await l0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const o=await this._openDb();return await e(o)}catch(o){if(n++>YC)throw o;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return E_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cf._getInstance(HC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await FC(),!this.activeServiceWorker)return;this.sender=new VC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await l0();return await ly(e,tf,"1"),await cy(e,tf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(o=>ly(o,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(o=>qC(o,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>cy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(h=>{const m=vf(h,!1).getAll();return new yu(m).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],o=new Set;if(e.length!==0)for(const{fbase_key:h,value:m}of e)o.add(h),JSON.stringify(this.localCache[h])!==JSON.stringify(m)&&(this.notifyListeners(h,m),n.push(h));for(const h of Object.keys(this.localCache))this.localCache[h]&&!o.has(h)&&(this.notifyListeners(h,null),n.push(h));return n}notifyListeners(e,n){this.localCache[e]=n;const o=this.listeners[e];if(o)for(const h of Array.from(o))h(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}A_.type="LOCAL";const WC=A_;new gu(3e4,6e4);function KC(a,e){return e?ca(e):(st(a._popupRedirectResolver,a,"argument-error"),a._popupRedirectResolver)}class G0 extends z0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function QC(a){return f_(a.auth,new G0(a),a.bypassAuthState)}function ZC(a){const{auth:e,user:n}=a;return st(n,e,"internal-error"),SC(n,new G0(a),a.bypassAuthState)}async function JC(a){const{auth:e,user:n}=a;return st(n,e,"internal-error"),vC(n,new G0(a),a.bypassAuthState)}class w_{constructor(e,n,o,h,m=!1){this.auth=e,this.resolver=o,this.user=h,this.bypassAuthState=m,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(o){this.reject(o)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:o,postBody:h,tenantId:m,error:_,type:v}=e;if(_){this.reject(_);return}const T={auth:this.auth,requestUri:n,sessionId:o,tenantId:m||void 0,postBody:h||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(v)(T))}catch(A){this.reject(A)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QC;case"linkViaPopup":case"linkViaRedirect":return JC;case"reauthViaPopup":case"reauthViaRedirect":return ZC;default:hs(this.auth,"internal-error")}}resolve(e){da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const $C=new gu(2e3,1e4);class zl extends w_{constructor(e,n,o,h,m){super(e,n,h,m),this.provider=o,this.authWindow=null,this.pollId=null,zl.currentPopupAction&&zl.currentPopupAction.cancel(),zl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return st(e,this.auth,"internal-error"),e}async onExecution(){da(this.filter.length===1,"Popup operations only handle one event");const e=j0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Cs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Cs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$C.get())};e()}}zl.currentPopupAction=null;const ev="pendingRedirect",zh=new Map;class tv extends w_{constructor(e,n,o=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,o),this.eventId=null}async execute(){let e=zh.get(this.auth._key());if(!e){try{const o=await nv(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(o)}catch(n){e=()=>Promise.reject(n)}zh.set(this.auth._key(),e)}return this.bypassAuthState||zh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nv(a,e){const n=sv(e),o=rv(a);if(!await o._isAvailable())return!1;const h=await o._get(n)==="true";return await o._remove(n),h}function iv(a,e){zh.set(a._key(),e)}function rv(a){return ca(a._redirectPersistence)}function sv(a){return Fh(ev,a.config.apiKey,a.name)}async function av(a,e,n=!1){if(Zr(a.app))return Promise.reject(ua(a));const o=nl(a),h=KC(o,e),_=await new tv(o,h,n).execute();return _&&!n&&(delete _.user._redirectEventId,await o._persistUserIfCurrent(_.user),await o._setRedirectUser(null,e)),_}const ov=600*1e3;class lv{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(o=>{this.isEventForConsumer(e,o)&&(n=!0,this.sendToConsumer(e,o),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cv(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!T_(e)){const o=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Cs(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const o=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&o}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ov&&this.cachedEventUids.clear(),this.cachedEventUids.has(uy(e))}saveEventToCache(e){this.cachedEventUids.add(uy(e)),this.lastProcessedEventTime=Date.now()}}function uy(a){return[a.type,a.eventId,a.sessionId,a.tenantId].filter(e=>e).join("-")}function T_({type:a,error:e}){return a==="unknown"&&e?.code==="auth/no-auth-event"}function cv(a){switch(a.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return T_(a);default:return!1}}async function uv(a,e={}){return yo(a,"GET","/v1/projects",e)}const hv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fv=/^https?/;async function dv(a){if(a.config.emulator)return;const{authorizedDomains:e}=await uv(a);for(const n of e)try{if(gv(n))return}catch{}hs(a,"unauthorized-domain")}function gv(a){const e=s0(),{protocol:n,hostname:o}=new URL(e);if(a.startsWith("chrome-extension://")){const _=new URL(a);return _.hostname===""&&o===""?n==="chrome-extension:"&&a.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&_.hostname===o}if(!fv.test(n))return!1;if(hv.test(a))return o===a;const h=a.replace(/\./g,"\\.");return new RegExp("^(.+\\."+h+"|"+h+")$","i").test(o)}const mv=new gu(3e4,6e4);function hy(){const a=vs().___jsl;if(a?.H){for(const e of Object.keys(a.H))if(a.H[e].r=a.H[e].r||[],a.H[e].L=a.H[e].L||[],a.H[e].r=[...a.H[e].L],a.CP)for(let n=0;n<a.CP.length;n++)a.CP[n]=null}}function pv(a){return new Promise((e,n)=>{function o(){hy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hy(),n(Cs(a,"network-request-failed"))},timeout:mv.get()})}if(vs().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(vs().gapi?.load)o();else{const h=oC("iframefcb");return vs()[h]=()=>{gapi.load?o():n(Cs(a,"network-request-failed"))},o_(`${aC()}?onload=${h}`).catch(m=>n(m))}}).catch(e=>{throw Hh=null,e})}let Hh=null;function yv(a){return Hh=Hh||pv(a),Hh}const Ev=new gu(5e3,15e3),_v="__/auth/iframe",xv="emulator/auth/iframe",Av={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Tv(a){const e=a.config;st(e.authDomain,a,"auth-domain-config-required");const n=e.emulator?V0(e,xv):`https://${a.config.authDomain}/${_v}`,o={apiKey:e.apiKey,appName:a.name,v:nc},h=wv.get(a.config.apiHost);h&&(o.eid=h);const m=a._getFrameworks();return m.length&&(o.fw=m.join(",")),`${n}?${du(o).slice(1)}`}async function Cv(a){const e=await yv(a),n=vs().gapi;return st(n,a,"internal-error"),e.open({where:document.body,url:Tv(a),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Av,dontclear:!0},o=>new Promise(async(h,m)=>{await o.restyle({setHideOnLeave:!1});const _=Cs(a,"network-request-failed"),v=vs().setTimeout(()=>{m(_)},Ev.get());function T(){vs().clearTimeout(v),h(o)}o.ping(T).then(T,()=>{m(_)})}))}const vv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Sv=500,bv=600,Iv="_blank",Rv="http://localhost";class fy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Nv(a,e,n,o=Sv,h=bv){const m=Math.max((window.screen.availHeight-h)/2,0).toString(),_=Math.max((window.screen.availWidth-o)/2,0).toString();let v="";const T={...vv,width:o.toString(),height:h.toString(),top:m,left:_},A=qi().toLowerCase();n&&(v=e_(A)?Iv:n),JE(A)&&(e=e||Rv,T.scrollbars="yes");const b=Object.entries(T).reduce((V,[j,ee])=>`${V}${j}=${ee},`,"");if(Z3(A)&&v!=="_self")return Ov(e||"",v),new fy(null);const O=window.open(e||"",v,b);st(O,a,"popup-blocked");try{O.focus()}catch{}return new fy(O)}function Ov(a,e){const n=document.createElement("a");n.href=a,n.target=e;const o=document.createEvent("MouseEvent");o.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(o)}const Dv="__/auth/handler",Mv="emulator/auth/handler",Lv=encodeURIComponent("fac");async function dy(a,e,n,o,h,m){st(a.config.authDomain,a,"auth-domain-config-required"),st(a.config.apiKey,a,"invalid-api-key");const _={apiKey:a.config.apiKey,appName:a.name,authType:n,redirectUrl:o,v:nc,eventId:h};if(e instanceof u_){e.setDefaultLanguage(a.languageCode),_.providerId=e.providerId||"",yT(e.getCustomParameters())||(_.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,O]of Object.entries({}))_[b]=O}if(e instanceof pu){const b=e.getScopes().filter(O=>O!=="");b.length>0&&(_.scopes=b.join(","))}a.tenantId&&(_.tid=a.tenantId);const v=_;for(const b of Object.keys(v))v[b]===void 0&&delete v[b];const T=await a._getAppCheckToken(),A=T?`#${Lv}=${encodeURIComponent(T)}`:"";return`${Pv(a)}?${du(v).slice(1)}${A}`}function Pv({config:a}){return a.emulator?V0(a,Mv):`https://${a.authDomain}/${Dv}`}const q1="webStorageSupport";class Bv{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=y_,this._completeRedirectFn=av,this._overrideRedirectResult=iv}async _openPopup(e,n,o,h){da(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const m=await dy(e,n,o,s0(),h);return Nv(e,m,j0())}async _openRedirect(e,n,o,h){await this._originValidation(e);const m=await dy(e,n,o,s0(),h);return UC(m),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:h,promise:m}=this.eventManagers[n];return h?Promise.resolve(h):(da(m,"If manager is not set, promise should be"),m)}const o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch(()=>{delete this.eventManagers[n]}),o}async initAndGetManager(e){const n=await Cv(e),o=new lv(e);return n.register("authEvent",h=>(st(h?.authEvent,e,"invalid-auth-event"),{status:o.onEvent(h.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:o},this.iframes[e._key()]=n,o}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(q1,{type:q1},h=>{const m=h?.[0]?.[q1];m!==void 0&&n(!!m),hs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=dv(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return s_()||$E()||F0()}}const kv=Bv;var gy="@firebase/auth",my="1.11.1";class Vv{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(o=>{e(o?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){st(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Uv(a){switch(a){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Fv(a){Wl(new Qo("auth",(e,{options:n})=>{const o=e.getProvider("app").getImmediate(),h=e.getProvider("heartbeat"),m=e.getProvider("app-check-internal"),{apiKey:_,authDomain:v}=o.options;st(_&&!_.includes(":"),"invalid-api-key",{appName:o.name});const T={apiKey:_,authDomain:v,clientPlatform:a,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:a_(a)},A=new iC(o,h,m,T);return dC(A,n),A},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,o)=>{e.getProvider("auth-internal").initialize()})),Wl(new Qo("auth-internal",e=>{const n=nl(e.getProvider("auth").getImmediate());return(o=>new Vv(o))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ao(gy,my,Uv(a)),ao(gy,my,"esm2020")}const zv=300,Hv=PE("authIdTokenMaxAge")||zv;let py=null;const jv=a=>async e=>{const n=e&&await e.getIdTokenResult(),o=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(o&&o>Hv)return;const h=n?.token;py!==h&&(py=h,await fetch(a,{method:h?"POST":"DELETE",headers:h?{Authorization:`Bearer ${h}`}:{}}))};function Gv(a=zE()){const e=B0(a,"auth");if(e.isInitialized())return e.getImmediate();const n=fC(a,{popupRedirectResolver:kv,persistence:[WC,BC,y_]}),o=PE("authTokenSyncURL");if(o&&typeof isSecureContext=="boolean"&&isSecureContext){const m=new URL(o,location.origin);if(location.origin===m.origin){const _=jv(m.toString());OC(n,_,()=>_(n.currentUser)),NC(n,v=>_(v))}}const h=ME("auth");return h&&gC(n,`http://${h}`),n}function qv(){return document.getElementsByTagName("head")?.[0]??document}rC({loadJS(a){return new Promise((e,n)=>{const o=document.createElement("script");o.setAttribute("src",a),o.onload=e,o.onerror=h=>{const m=Cs("internal-error");m.customData=h,n(m)},o.type="text/javascript",o.charset="UTF-8",qv().appendChild(o)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Fv("Browser");var yy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var oo,C_;(function(){var a;function e(B,F){function k(){}k.prototype=F.prototype,B.F=F.prototype,B.prototype=new k,B.prototype.constructor=B,B.D=function(Z,q,W){for(var G=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)G[Je-2]=arguments[Je];return F.prototype[q].apply(Z,G)}}function n(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(o,n),o.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function h(B,F,k){k||(k=0);const Z=Array(16);if(typeof F=="string")for(var q=0;q<16;++q)Z[q]=F.charCodeAt(k++)|F.charCodeAt(k++)<<8|F.charCodeAt(k++)<<16|F.charCodeAt(k++)<<24;else for(q=0;q<16;++q)Z[q]=F[k++]|F[k++]<<8|F[k++]<<16|F[k++]<<24;F=B.g[0],k=B.g[1],q=B.g[2];let W=B.g[3],G;G=F+(W^k&(q^W))+Z[0]+3614090360&4294967295,F=k+(G<<7&4294967295|G>>>25),G=W+(q^F&(k^q))+Z[1]+3905402710&4294967295,W=F+(G<<12&4294967295|G>>>20),G=q+(k^W&(F^k))+Z[2]+606105819&4294967295,q=W+(G<<17&4294967295|G>>>15),G=k+(F^q&(W^F))+Z[3]+3250441966&4294967295,k=q+(G<<22&4294967295|G>>>10),G=F+(W^k&(q^W))+Z[4]+4118548399&4294967295,F=k+(G<<7&4294967295|G>>>25),G=W+(q^F&(k^q))+Z[5]+1200080426&4294967295,W=F+(G<<12&4294967295|G>>>20),G=q+(k^W&(F^k))+Z[6]+2821735955&4294967295,q=W+(G<<17&4294967295|G>>>15),G=k+(F^q&(W^F))+Z[7]+4249261313&4294967295,k=q+(G<<22&4294967295|G>>>10),G=F+(W^k&(q^W))+Z[8]+1770035416&4294967295,F=k+(G<<7&4294967295|G>>>25),G=W+(q^F&(k^q))+Z[9]+2336552879&4294967295,W=F+(G<<12&4294967295|G>>>20),G=q+(k^W&(F^k))+Z[10]+4294925233&4294967295,q=W+(G<<17&4294967295|G>>>15),G=k+(F^q&(W^F))+Z[11]+2304563134&4294967295,k=q+(G<<22&4294967295|G>>>10),G=F+(W^k&(q^W))+Z[12]+1804603682&4294967295,F=k+(G<<7&4294967295|G>>>25),G=W+(q^F&(k^q))+Z[13]+4254626195&4294967295,W=F+(G<<12&4294967295|G>>>20),G=q+(k^W&(F^k))+Z[14]+2792965006&4294967295,q=W+(G<<17&4294967295|G>>>15),G=k+(F^q&(W^F))+Z[15]+1236535329&4294967295,k=q+(G<<22&4294967295|G>>>10),G=F+(q^W&(k^q))+Z[1]+4129170786&4294967295,F=k+(G<<5&4294967295|G>>>27),G=W+(k^q&(F^k))+Z[6]+3225465664&4294967295,W=F+(G<<9&4294967295|G>>>23),G=q+(F^k&(W^F))+Z[11]+643717713&4294967295,q=W+(G<<14&4294967295|G>>>18),G=k+(W^F&(q^W))+Z[0]+3921069994&4294967295,k=q+(G<<20&4294967295|G>>>12),G=F+(q^W&(k^q))+Z[5]+3593408605&4294967295,F=k+(G<<5&4294967295|G>>>27),G=W+(k^q&(F^k))+Z[10]+38016083&4294967295,W=F+(G<<9&4294967295|G>>>23),G=q+(F^k&(W^F))+Z[15]+3634488961&4294967295,q=W+(G<<14&4294967295|G>>>18),G=k+(W^F&(q^W))+Z[4]+3889429448&4294967295,k=q+(G<<20&4294967295|G>>>12),G=F+(q^W&(k^q))+Z[9]+568446438&4294967295,F=k+(G<<5&4294967295|G>>>27),G=W+(k^q&(F^k))+Z[14]+3275163606&4294967295,W=F+(G<<9&4294967295|G>>>23),G=q+(F^k&(W^F))+Z[3]+4107603335&4294967295,q=W+(G<<14&4294967295|G>>>18),G=k+(W^F&(q^W))+Z[8]+1163531501&4294967295,k=q+(G<<20&4294967295|G>>>12),G=F+(q^W&(k^q))+Z[13]+2850285829&4294967295,F=k+(G<<5&4294967295|G>>>27),G=W+(k^q&(F^k))+Z[2]+4243563512&4294967295,W=F+(G<<9&4294967295|G>>>23),G=q+(F^k&(W^F))+Z[7]+1735328473&4294967295,q=W+(G<<14&4294967295|G>>>18),G=k+(W^F&(q^W))+Z[12]+2368359562&4294967295,k=q+(G<<20&4294967295|G>>>12),G=F+(k^q^W)+Z[5]+4294588738&4294967295,F=k+(G<<4&4294967295|G>>>28),G=W+(F^k^q)+Z[8]+2272392833&4294967295,W=F+(G<<11&4294967295|G>>>21),G=q+(W^F^k)+Z[11]+1839030562&4294967295,q=W+(G<<16&4294967295|G>>>16),G=k+(q^W^F)+Z[14]+4259657740&4294967295,k=q+(G<<23&4294967295|G>>>9),G=F+(k^q^W)+Z[1]+2763975236&4294967295,F=k+(G<<4&4294967295|G>>>28),G=W+(F^k^q)+Z[4]+1272893353&4294967295,W=F+(G<<11&4294967295|G>>>21),G=q+(W^F^k)+Z[7]+4139469664&4294967295,q=W+(G<<16&4294967295|G>>>16),G=k+(q^W^F)+Z[10]+3200236656&4294967295,k=q+(G<<23&4294967295|G>>>9),G=F+(k^q^W)+Z[13]+681279174&4294967295,F=k+(G<<4&4294967295|G>>>28),G=W+(F^k^q)+Z[0]+3936430074&4294967295,W=F+(G<<11&4294967295|G>>>21),G=q+(W^F^k)+Z[3]+3572445317&4294967295,q=W+(G<<16&4294967295|G>>>16),G=k+(q^W^F)+Z[6]+76029189&4294967295,k=q+(G<<23&4294967295|G>>>9),G=F+(k^q^W)+Z[9]+3654602809&4294967295,F=k+(G<<4&4294967295|G>>>28),G=W+(F^k^q)+Z[12]+3873151461&4294967295,W=F+(G<<11&4294967295|G>>>21),G=q+(W^F^k)+Z[15]+530742520&4294967295,q=W+(G<<16&4294967295|G>>>16),G=k+(q^W^F)+Z[2]+3299628645&4294967295,k=q+(G<<23&4294967295|G>>>9),G=F+(q^(k|~W))+Z[0]+4096336452&4294967295,F=k+(G<<6&4294967295|G>>>26),G=W+(k^(F|~q))+Z[7]+1126891415&4294967295,W=F+(G<<10&4294967295|G>>>22),G=q+(F^(W|~k))+Z[14]+2878612391&4294967295,q=W+(G<<15&4294967295|G>>>17),G=k+(W^(q|~F))+Z[5]+4237533241&4294967295,k=q+(G<<21&4294967295|G>>>11),G=F+(q^(k|~W))+Z[12]+1700485571&4294967295,F=k+(G<<6&4294967295|G>>>26),G=W+(k^(F|~q))+Z[3]+2399980690&4294967295,W=F+(G<<10&4294967295|G>>>22),G=q+(F^(W|~k))+Z[10]+4293915773&4294967295,q=W+(G<<15&4294967295|G>>>17),G=k+(W^(q|~F))+Z[1]+2240044497&4294967295,k=q+(G<<21&4294967295|G>>>11),G=F+(q^(k|~W))+Z[8]+1873313359&4294967295,F=k+(G<<6&4294967295|G>>>26),G=W+(k^(F|~q))+Z[15]+4264355552&4294967295,W=F+(G<<10&4294967295|G>>>22),G=q+(F^(W|~k))+Z[6]+2734768916&4294967295,q=W+(G<<15&4294967295|G>>>17),G=k+(W^(q|~F))+Z[13]+1309151649&4294967295,k=q+(G<<21&4294967295|G>>>11),G=F+(q^(k|~W))+Z[4]+4149444226&4294967295,F=k+(G<<6&4294967295|G>>>26),G=W+(k^(F|~q))+Z[11]+3174756917&4294967295,W=F+(G<<10&4294967295|G>>>22),G=q+(F^(W|~k))+Z[2]+718787259&4294967295,q=W+(G<<15&4294967295|G>>>17),G=k+(W^(q|~F))+Z[9]+3951481745&4294967295,B.g[0]=B.g[0]+F&4294967295,B.g[1]=B.g[1]+(q+(G<<21&4294967295|G>>>11))&4294967295,B.g[2]=B.g[2]+q&4294967295,B.g[3]=B.g[3]+W&4294967295}o.prototype.v=function(B,F){F===void 0&&(F=B.length);const k=F-this.blockSize,Z=this.C;let q=this.h,W=0;for(;W<F;){if(q==0)for(;W<=k;)h(this,B,W),W+=this.blockSize;if(typeof B=="string"){for(;W<F;)if(Z[q++]=B.charCodeAt(W++),q==this.blockSize){h(this,Z),q=0;break}}else for(;W<F;)if(Z[q++]=B[W++],q==this.blockSize){h(this,Z),q=0;break}}this.h=q,this.o+=F},o.prototype.A=function(){var B=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);B[0]=128;for(var F=1;F<B.length-8;++F)B[F]=0;F=this.o*8;for(var k=B.length-8;k<B.length;++k)B[k]=F&255,F/=256;for(this.v(B),B=Array(16),F=0,k=0;k<4;++k)for(let Z=0;Z<32;Z+=8)B[F++]=this.g[k]>>>Z&255;return B};function m(B,F){var k=v;return Object.prototype.hasOwnProperty.call(k,B)?k[B]:k[B]=F(B)}function _(B,F){this.h=F;const k=[];let Z=!0;for(let q=B.length-1;q>=0;q--){const W=B[q]|0;Z&&W==F||(k[q]=W,Z=!1)}this.g=k}var v={};function T(B){return-128<=B&&B<128?m(B,function(F){return new _([F|0],F<0?-1:0)}):new _([B|0],B<0?-1:0)}function A(B){if(isNaN(B)||!isFinite(B))return O;if(B<0)return le(A(-B));const F=[];let k=1;for(let Z=0;B>=k;Z++)F[Z]=B/k|0,k*=4294967296;return new _(F,0)}function b(B,F){if(B.length==0)throw Error("number format error: empty string");if(F=F||10,F<2||36<F)throw Error("radix out of range: "+F);if(B.charAt(0)=="-")return le(b(B.substring(1),F));if(B.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=A(Math.pow(F,8));let Z=O;for(let W=0;W<B.length;W+=8){var q=Math.min(8,B.length-W);const G=parseInt(B.substring(W,W+q),F);q<8?(q=A(Math.pow(F,q)),Z=Z.j(q).add(A(G))):(Z=Z.j(k),Z=Z.add(A(G)))}return Z}var O=T(0),V=T(1),j=T(16777216);a=_.prototype,a.m=function(){if(re(this))return-le(this).m();let B=0,F=1;for(let k=0;k<this.g.length;k++){const Z=this.i(k);B+=(Z>=0?Z:4294967296+Z)*F,F*=4294967296}return B},a.toString=function(B){if(B=B||10,B<2||36<B)throw Error("radix out of range: "+B);if(ee(this))return"0";if(re(this))return"-"+le(this).toString(B);const F=A(Math.pow(B,6));var k=this;let Z="";for(;;){const q=pe(k,F).g;k=ke(k,q.j(F));let W=((k.g.length>0?k.g[0]:k.h)>>>0).toString(B);if(k=q,ee(k))return W+Z;for(;W.length<6;)W="0"+W;Z=W+Z}},a.i=function(B){return B<0?0:B<this.g.length?this.g[B]:this.h};function ee(B){if(B.h!=0)return!1;for(let F=0;F<B.g.length;F++)if(B.g[F]!=0)return!1;return!0}function re(B){return B.h==-1}a.l=function(B){return B=ke(this,B),re(B)?-1:ee(B)?0:1};function le(B){const F=B.g.length,k=[];for(let Z=0;Z<F;Z++)k[Z]=~B.g[Z];return new _(k,~B.h).add(V)}a.abs=function(){return re(this)?le(this):this},a.add=function(B){const F=Math.max(this.g.length,B.g.length),k=[];let Z=0;for(let q=0;q<=F;q++){let W=Z+(this.i(q)&65535)+(B.i(q)&65535),G=(W>>>16)+(this.i(q)>>>16)+(B.i(q)>>>16);Z=G>>>16,W&=65535,G&=65535,k[q]=G<<16|W}return new _(k,k[k.length-1]&-2147483648?-1:0)};function ke(B,F){return B.add(le(F))}a.j=function(B){if(ee(this)||ee(B))return O;if(re(this))return re(B)?le(this).j(le(B)):le(le(this).j(B));if(re(B))return le(this.j(le(B)));if(this.l(j)<0&&B.l(j)<0)return A(this.m()*B.m());const F=this.g.length+B.g.length,k=[];for(var Z=0;Z<2*F;Z++)k[Z]=0;for(Z=0;Z<this.g.length;Z++)for(let q=0;q<B.g.length;q++){const W=this.i(Z)>>>16,G=this.i(Z)&65535,Je=B.i(q)>>>16,ce=B.i(q)&65535;k[2*Z+2*q]+=G*ce,Re(k,2*Z+2*q),k[2*Z+2*q+1]+=W*ce,Re(k,2*Z+2*q+1),k[2*Z+2*q+1]+=G*Je,Re(k,2*Z+2*q+1),k[2*Z+2*q+2]+=W*Je,Re(k,2*Z+2*q+2)}for(B=0;B<F;B++)k[B]=k[2*B+1]<<16|k[2*B];for(B=F;B<2*F;B++)k[B]=0;return new _(k,0)};function Re(B,F){for(;(B[F]&65535)!=B[F];)B[F+1]+=B[F]>>>16,B[F]&=65535,F++}function ye(B,F){this.g=B,this.h=F}function pe(B,F){if(ee(F))throw Error("division by zero");if(ee(B))return new ye(O,O);if(re(B))return F=pe(le(B),F),new ye(le(F.g),le(F.h));if(re(F))return F=pe(B,le(F)),new ye(le(F.g),F.h);if(B.g.length>30){if(re(B)||re(F))throw Error("slowDivide_ only works with positive integers.");for(var k=V,Z=F;Z.l(B)<=0;)k=we(k),Z=we(Z);var q=Te(k,1),W=Te(Z,1);for(Z=Te(Z,2),k=Te(k,2);!ee(Z);){var G=W.add(Z);G.l(B)<=0&&(q=q.add(k),W=G),Z=Te(Z,1),k=Te(k,1)}return F=ke(B,q.j(F)),new ye(q,F)}for(q=O;B.l(F)>=0;){for(k=Math.max(1,Math.floor(B.m()/F.m())),Z=Math.ceil(Math.log(k)/Math.LN2),Z=Z<=48?1:Math.pow(2,Z-48),W=A(k),G=W.j(F);re(G)||G.l(B)>0;)k-=Z,W=A(k),G=W.j(F);ee(W)&&(W=V),q=q.add(W),B=ke(B,G)}return new ye(q,B)}a.B=function(B){return pe(this,B).h},a.and=function(B){const F=Math.max(this.g.length,B.g.length),k=[];for(let Z=0;Z<F;Z++)k[Z]=this.i(Z)&B.i(Z);return new _(k,this.h&B.h)},a.or=function(B){const F=Math.max(this.g.length,B.g.length),k=[];for(let Z=0;Z<F;Z++)k[Z]=this.i(Z)|B.i(Z);return new _(k,this.h|B.h)},a.xor=function(B){const F=Math.max(this.g.length,B.g.length),k=[];for(let Z=0;Z<F;Z++)k[Z]=this.i(Z)^B.i(Z);return new _(k,this.h^B.h)};function we(B){const F=B.g.length+1,k=[];for(let Z=0;Z<F;Z++)k[Z]=B.i(Z)<<1|B.i(Z-1)>>>31;return new _(k,B.h)}function Te(B,F){const k=F>>5;F%=32;const Z=B.g.length-k,q=[];for(let W=0;W<Z;W++)q[W]=F>0?B.i(W+k)>>>F|B.i(W+k+1)<<32-F:B.i(W+k);return new _(q,B.h)}o.prototype.digest=o.prototype.A,o.prototype.reset=o.prototype.u,o.prototype.update=o.prototype.v,C_=o,_.prototype.add=_.prototype.add,_.prototype.multiply=_.prototype.j,_.prototype.modulo=_.prototype.B,_.prototype.compare=_.prototype.l,_.prototype.toNumber=_.prototype.m,_.prototype.toString=_.prototype.toString,_.prototype.getBits=_.prototype.i,_.fromNumber=A,_.fromString=b,oo=_}).apply(typeof yy<"u"?yy:typeof self<"u"?self:typeof window<"u"?window:{});var Oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var v_,Xc,S_,jh,c0,b_,I_,R_;(function(){var a,e=Object.defineProperty;function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oh=="object"&&Oh];for(var S=0;S<p.length;++S){var N=p[S];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var o=n(this);function h(p,S){if(S)e:{var N=o;p=p.split(".");for(var U=0;U<p.length-1;U++){var ne=p[U];if(!(ne in N))break e;N=N[ne]}p=p[p.length-1],U=N[p],S=S(U),S!=U&&S!=null&&e(N,p,{configurable:!0,writable:!0,value:S})}}h("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),h("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),h("Object.entries",function(p){return p||function(S){var N=[],U;for(U in S)Object.prototype.hasOwnProperty.call(S,U)&&N.push([U,S[U]]);return N}});var m=m||{},_=this||self;function v(p){var S=typeof p;return S=="object"&&p!=null||S=="function"}function T(p,S,N){return p.call.apply(p.bind,arguments)}function A(p,S,N){return A=T,A.apply(null,arguments)}function b(p,S){var N=Array.prototype.slice.call(arguments,1);return function(){var U=N.slice();return U.push.apply(U,arguments),p.apply(this,U)}}function O(p,S){function N(){}N.prototype=S.prototype,p.Z=S.prototype,p.prototype=new N,p.prototype.constructor=p,p.Ob=function(U,ne,me){for(var Le=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)Le[ot-2]=arguments[ot];return S.prototype[ne].apply(U,Le)}}var V=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function j(p){const S=p.length;if(S>0){const N=Array(S);for(let U=0;U<S;U++)N[U]=p[U];return N}return[]}function ee(p,S){for(let U=1;U<arguments.length;U++){const ne=arguments[U];var N=typeof ne;if(N=N!="object"?N:ne?Array.isArray(ne)?"array":N:"null",N=="array"||N=="object"&&typeof ne.length=="number"){N=p.length||0;const me=ne.length||0;p.length=N+me;for(let Le=0;Le<me;Le++)p[N+Le]=ne[Le]}else p.push(ne)}}class re{constructor(S,N){this.i=S,this.j=N,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function le(p){_.setTimeout(()=>{throw p},0)}function ke(){var p=B;let S=null;return p.g&&(S=p.g,p.g=p.g.next,p.g||(p.h=null),S.next=null),S}class Re{constructor(){this.h=this.g=null}add(S,N){const U=ye.get();U.set(S,N),this.h?this.h.next=U:this.g=U,this.h=U}}var ye=new re(()=>new pe,p=>p.reset());class pe{constructor(){this.next=this.g=this.h=null}set(S,N){this.h=S,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let we,Te=!1,B=new Re,F=()=>{const p=Promise.resolve(void 0);we=()=>{p.then(k)}};function k(){for(var p;p=ke();){try{p.h.call(p.g)}catch(N){le(N)}var S=ye;S.j(p),S.h<100&&(S.h++,p.next=S.g,S.g=p)}Te=!1}function Z(){this.u=this.u,this.C=this.C}Z.prototype.u=!1,Z.prototype.dispose=function(){this.u||(this.u=!0,this.N())},Z.prototype[Symbol.dispose]=function(){this.dispose()},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function q(p,S){this.type=p,this.g=this.target=S,this.defaultPrevented=!1}q.prototype.h=function(){this.defaultPrevented=!0};var W=(function(){if(!_.addEventListener||!Object.defineProperty)return!1;var p=!1,S=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const N=()=>{};_.addEventListener("test",N,S),_.removeEventListener("test",N,S)}catch{}return p})();function G(p){return/^[\s\xa0]*$/.test(p)}function Je(p,S){q.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,S)}O(Je,q),Je.prototype.init=function(p,S){const N=this.type=p.type,U=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=S,S=p.relatedTarget,S||(N=="mouseover"?S=p.fromElement:N=="mouseout"&&(S=p.toElement)),this.relatedTarget=S,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&Je.Z.h.call(this)},Je.prototype.h=function(){Je.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var ce="closure_listenable_"+(Math.random()*1e6|0),he=0;function _e(p,S,N,U,ne){this.listener=p,this.proxy=null,this.src=S,this.type=N,this.capture=!!U,this.ha=ne,this.key=++he,this.da=this.fa=!1}function je(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function it(p,S,N){for(const U in p)S.call(N,p[U],U,p)}function lt(p,S){for(const N in p)S.call(void 0,p[N],N,p)}function X(p){const S={};for(const N in p)S[N]=p[N];return S}const ge="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pe(p,S){let N,U;for(let ne=1;ne<arguments.length;ne++){U=arguments[ne];for(N in U)p[N]=U[N];for(let me=0;me<ge.length;me++)N=ge[me],Object.prototype.hasOwnProperty.call(U,N)&&(p[N]=U[N])}}function Be(p){this.src=p,this.g={},this.h=0}Be.prototype.add=function(p,S,N,U,ne){const me=p.toString();p=this.g[me],p||(p=this.g[me]=[],this.h++);const Le=De(p,S,U,ne);return Le>-1?(S=p[Le],N||(S.fa=!1)):(S=new _e(S,this.src,me,!!U,ne),S.fa=N,p.push(S)),S};function $e(p,S){const N=S.type;if(N in p.g){var U=p.g[N],ne=Array.prototype.indexOf.call(U,S,void 0),me;(me=ne>=0)&&Array.prototype.splice.call(U,ne,1),me&&(je(S),p.g[N].length==0&&(delete p.g[N],p.h--))}}function De(p,S,N,U){for(let ne=0;ne<p.length;++ne){const me=p[ne];if(!me.da&&me.listener==S&&me.capture==!!N&&me.ha==U)return ne}return-1}var At="closure_lm_"+(Math.random()*1e6|0),wt={};function Jt(p,S,N,U,ne){if(Array.isArray(S)){for(let me=0;me<S.length;me++)Jt(p,S[me],N,U,ne);return null}return N=qt(N),p&&p[ce]?p.J(S,N,v(U)?!!U.capture:!1,ne):dr(p,S,N,!1,U,ne)}function dr(p,S,N,U,ne,me){if(!S)throw Error("Invalid event type");const Le=v(ne)?!!ne.capture:!!ne;let ot=gr(p);if(ot||(p[At]=ot=new Be(p)),N=ot.add(S,N,U,Le,me),N.proxy)return N;if(U=jn(),N.proxy=U,U.src=p,U.listener=N,p.addEventListener)W||(ne=Le),ne===void 0&&(ne=!1),p.addEventListener(S.toString(),U,ne);else if(p.attachEvent)p.attachEvent(mi(S.toString()),U);else if(p.addListener&&p.removeListener)p.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return N}function jn(){function p(N){return S.call(p.src,p.listener,N)}const S=Li;return p}function ts(p,S,N,U,ne){if(Array.isArray(S))for(var me=0;me<S.length;me++)ts(p,S[me],N,U,ne);else U=v(U)?!!U.capture:!!U,N=qt(N),p&&p[ce]?(p=p.i,me=String(S).toString(),me in p.g&&(S=p.g[me],N=De(S,N,U,ne),N>-1&&(je(S[N]),Array.prototype.splice.call(S,N,1),S.length==0&&(delete p.g[me],p.h--)))):p&&(p=gr(p))&&(S=p.g[S.toString()],p=-1,S&&(p=De(S,N,U,ne)),(N=p>-1?S[p]:null)&&Tt(N))}function Tt(p){if(typeof p!="number"&&p&&!p.da){var S=p.src;if(S&&S[ce])$e(S.i,p);else{var N=p.type,U=p.proxy;S.removeEventListener?S.removeEventListener(N,U,p.capture):S.detachEvent?S.detachEvent(mi(N),U):S.addListener&&S.removeListener&&S.removeListener(U),(N=gr(S))?($e(N,p),N.h==0&&(N.src=null,S[At]=null)):je(p)}}}function mi(p){return p in wt?wt[p]:wt[p]="on"+p}function Li(p,S){if(p.da)p=!0;else{S=new Je(S,this);const N=p.listener,U=p.ha||p.src;p.fa&&Tt(p),p=N.call(U,S)}return p}function gr(p){return p=p[At],p instanceof Be?p:null}var Nn="__closure_events_fn_"+(Math.random()*1e9>>>0);function qt(p){return typeof p=="function"?p:(p[Nn]||(p[Nn]=function(S){return p.handleEvent(S)}),p[Nn])}function Ze(){Z.call(this),this.i=new Be(this),this.M=this,this.G=null}O(Ze,Z),Ze.prototype[ce]=!0,Ze.prototype.removeEventListener=function(p,S,N,U){ts(this,p,S,N,U)};function wn(p,S){var N,U=p.G;if(U)for(N=[];U;U=U.G)N.push(U);if(p=p.M,U=S.type||S,typeof S=="string")S=new q(S,p);else if(S instanceof q)S.target=S.target||p;else{var ne=S;S=new q(U,p),Pe(S,ne)}ne=!0;let me,Le;if(N)for(Le=N.length-1;Le>=0;Le--)me=S.g=N[Le],ne=Fe(me,U,!0,S)&&ne;if(me=S.g=p,ne=Fe(me,U,!0,S)&&ne,ne=Fe(me,U,!1,S)&&ne,N)for(Le=0;Le<N.length;Le++)me=S.g=N[Le],ne=Fe(me,U,!1,S)&&ne}Ze.prototype.N=function(){if(Ze.Z.N.call(this),this.i){var p=this.i;for(const S in p.g){const N=p.g[S];for(let U=0;U<N.length;U++)je(N[U]);delete p.g[S],p.h--}}this.G=null},Ze.prototype.J=function(p,S,N,U){return this.i.add(String(p),S,!1,N,U)},Ze.prototype.K=function(p,S,N,U){return this.i.add(String(p),S,!0,N,U)};function Fe(p,S,N,U){if(S=p.i.g[String(S)],!S)return!0;S=S.concat();let ne=!0;for(let me=0;me<S.length;++me){const Le=S[me];if(Le&&!Le.da&&Le.capture==N){const ot=Le.listener,In=Le.ha||Le.src;Le.fa&&$e(p.i,Le),ne=ot.call(In,U)!==!1&&ne}}return ne&&!U.defaultPrevented}function Ea(p,S){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=A(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:_.setTimeout(p,S||0)}function xo(p){p.g=Ea(()=>{p.g=null,p.i&&(p.i=!1,xo(p))},p.l);const S=p.h;p.h=null,p.m.apply(null,S)}class yn extends Z{constructor(S,N){super(),this.m=S,this.l=N,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:xo(this)}N(){super.N(),this.g&&(_.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ns(p){Z.call(this),this.h=p,this.g={}}O(ns,Z);var pi=[];function _a(p){it(p.g,function(S,N){this.g.hasOwnProperty(N)&&Tt(S)},p),p.g={}}ns.prototype.N=function(){ns.Z.N.call(this),_a(this)},ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yi=_.JSON.stringify,ri=_.JSON.parse,Ao=class{stringify(p){return _.JSON.stringify(p,void 0)}parse(p){return _.JSON.parse(p,void 0)}};function Ds(){}function al(){}var Xt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ne(){q.call(this,"d")}O(Ne,q);function Yt(){q.call(this,"c")}O(Yt,q);var rt={},hn=null;function Mr(){return hn=hn||new Ze}rt.Ia="serverreachability";function xa(p){q.call(this,rt.Ia,p)}O(xa,q);function mr(p){const S=Mr();wn(S,new xa(S))}rt.STAT_EVENT="statevent";function xt(p,S){q.call(this,rt.STAT_EVENT,p),this.stat=S}O(xt,q);function an(p){const S=Mr();wn(S,new xt(S,p))}rt.Ja="timingevent";function pr(p,S){q.call(this,rt.Ja,p),this.size=S}O(pr,q);function yr(p,S){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return _.setTimeout(function(){p()},S)}function On(){this.g=!0}On.prototype.ua=function(){this.g=!1};function wo(p,S,N,U,ne,me){p.info(function(){if(p.g)if(me){var Le="",ot=me.split("&");for(let Ut=0;Ut<ot.length;Ut++){var In=ot[Ut].split("=");if(In.length>1){const dn=In[0];In=In[1];const Ki=dn.split("_");Le=Ki.length>=2&&Ki[1]=="type"?Le+(dn+"="+In+"&"):Le+(dn+"=redacted&")}}}else Le=null;else Le=me;return"XMLHTTP REQ ("+U+") [attempt "+ne+"]: "+S+`
`+N+`
`+Le})}function Gn(p,S,N,U,ne,me,Le){p.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+ne+"]: "+S+`
`+N+`
`+me+" "+Le})}function Ei(p,S,N,U){p.info(function(){return"XMLHTTP TEXT ("+S+"): "+$i(p,N)+(U?" "+U:"")})}function Lr(p,S){p.info(function(){return"TIMEOUT: "+S})}On.prototype.info=function(){};function $i(p,S){if(!p.g)return S;if(!S)return null;try{const me=JSON.parse(S);if(me){for(p=0;p<me.length;p++)if(Array.isArray(me[p])){var N=me[p];if(!(N.length<2)){var U=N[1];if(Array.isArray(U)&&!(U.length<1)){var ne=U[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(let Le=1;Le<U.length;Le++)U[Le]=""}}}}return yi(me)}catch{return S}}var Ms={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Er={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ls;function Bn(){}O(Bn,Ds),Bn.prototype.g=function(){return new XMLHttpRequest},Ls=new Bn;function _i(p){return encodeURIComponent(String(p))}function xi(p){var S=1;p=p.split(":");const N=[];for(;S>0&&p.length;)N.push(p.shift()),S--;return p.length&&N.push(p.join(":")),N}function Ve(p,S,N,U){this.j=p,this.i=S,this.l=N,this.S=U||1,this.V=new ns(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ui}function ui(){this.i=null,this.g="",this.h=!1}var Tn={},jt={};function Ai(p,S,N){p.M=1,p.A=Bi(vn(S)),p.u=N,p.R=!0,is(p,null)}function is(p,S){p.F=Date.now(),Pr(p),p.B=vn(p.A);var N=p.B,U=p.S;Array.isArray(U)||(U=[String(U)]),$t(N.i,"t",U),p.C=0,N=p.j.L,p.h=new ui,p.g=Sa(p.j,N?S:null,!p.u),p.P>0&&(p.O=new yn(A(p.Y,p,p.g),p.P)),S=p.V,N=p.g,U=p.ba;var ne="readystatechange";Array.isArray(ne)||(ne&&(pi[0]=ne.toString()),ne=pi);for(let me=0;me<ne.length;me++){const Le=Jt(N,ne[me],U||S.handleEvent,!1,S.h||S);if(!Le)break;S.g[Le.key]=Le}S=p.J?X(p.J):{},p.u?(p.v||(p.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,S)):(p.v="GET",p.g.ea(p.B,p.v,null,S)),mr(),wo(p.i,p.v,p.B,p.l,p.S,p.u)}Ve.prototype.ba=function(p){p=p.target;const S=this.O;S&&nr(p)==3?S.j():this.Y(p)},Ve.prototype.Y=function(p){try{if(p==this.g)e:{const ot=nr(this.g),In=this.g.ya(),Ut=this.g.ca();if(!(ot<3)&&(ot!=3||this.g&&(this.h.h||this.g.la()||Ln(this.g)))){this.K||ot!=4||In==7||(In==8||Ut<=0?mr(3):mr(2)),mn(this);var S=this.g.ca();this.X=S;var N=Aa(this);if(this.o=S==200,Gn(this.i,this.v,this.B,this.l,this.S,ot,S),this.o){if(this.U&&!this.L){t:{if(this.g){var U,ne=this.g;if((U=ne.g?ne.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(U)){var me=U;break t}}me=null}if(p=me)Ei(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,si(this,p);else{this.o=!1,this.m=3,an(12),Pi(this),St(this);break e}}if(this.R){p=!0;let dn;for(;!this.K&&this.C<N.length;)if(dn=ol(this,N),dn==jt){ot==4&&(this.m=4,an(14),p=!1),Ei(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==Tn){this.m=4,an(15),Ei(this.i,this.l,N,"[Invalid Chunk]"),p=!1;break}else Ei(this.i,this.l,dn,null),si(this,dn);if(Xi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||N.length!=0||this.h.h||(this.m=1,an(16),p=!1),this.o=this.o&&p,!p)Ei(this.i,this.l,N,"[Invalid Chunked Response]"),Pi(this),St(this);else if(N.length>0&&!this.W){this.W=!0;var Le=this.j;Le.g==this&&Le.aa&&!Le.P&&(Le.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),fe(Le),Le.P=!0,an(11))}}else Ei(this.i,this.l,N,null),si(this,N);ot==4&&Pi(this),this.o&&!this.K&&(ot==4?Fs(this.j,this):(this.o=!1,Pr(this)))}else Wi(this.g),S==400&&N.indexOf("Unknown SID")>0?(this.m=3,an(12)):(this.m=0,an(13)),Pi(this),St(this)}}}catch{}finally{}};function Aa(p){if(!Xi(p))return p.g.la();const S=Ln(p.g);if(S==="")return"";let N="";const U=S.length,ne=nr(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return Pi(p),St(p),"";p.h.i=new _.TextDecoder}for(let me=0;me<U;me++)p.h.h=!0,N+=p.h.i.decode(S[me],{stream:!(ne&&me==U-1)});return S.length=0,p.h.g+=N,p.C=0,p.h.g}function Xi(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function ol(p,S){var N=p.C,U=S.indexOf(`
`,N);return U==-1?jt:(N=Number(S.substring(N,U)),isNaN(N)?Tn:(U+=1,U+N>S.length?jt:(S=S.slice(U,U+N),p.C=U+N,S)))}Ve.prototype.cancel=function(){this.K=!0,Pi(this)};function Pr(p){p.T=Date.now()+p.H,wi(p,p.H)}function wi(p,S){if(p.D!=null)throw Error("WatchDog timer not null");p.D=yr(A(p.aa,p),S)}function mn(p){p.D&&(_.clearTimeout(p.D),p.D=null)}Ve.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(Lr(this.i,this.B),this.M!=2&&(mr(),an(17)),Pi(this),this.m=2,St(this)):wi(this,this.T-p)};function St(p){p.j.I==0||p.K||Fs(p.j,p)}function Pi(p){mn(p);var S=p.O;S&&typeof S.dispose=="function"&&S.dispose(),p.O=null,_a(p.V),p.g&&(S=p.g,p.g=null,S.abort(),S.dispose())}function si(p,S){try{var N=p.j;if(N.I!=0&&(N.g==p||Ti(N.h,p))){if(!p.L&&Ti(N.h,p)&&N.I==3){try{var U=N.Ba.g.parse(S)}catch{U=null}if(Array.isArray(U)&&U.length==3){var ne=U;if(ne[0]==0){e:if(!N.v){if(N.g)if(N.g.F+3e3<p.F)Sn(N),as(N);else break e;Us(N),an(18)}}else N.xa=ne[1],0<N.xa-N.K&&ne[2]<37500&&N.F&&N.A==0&&!N.C&&(N.C=yr(A(N.Va,N),6e3));Gt(N.h)<=1&&N.ta&&(N.ta=void 0)}else Vr(N,11)}else if((p.L||N.g==p)&&Sn(N),!G(S))for(ne=N.Ba.g.parse(S),S=0;S<ne.length;S++){let Ut=ne[S];const dn=Ut[0];if(!(dn<=N.K))if(N.K=dn,Ut=Ut[1],N.I==2)if(Ut[0]=="c"){N.M=Ut[1],N.ba=Ut[2];const Ki=Ut[3];Ki!=null&&(N.ka=Ki,N.j.info("VER="+N.ka));const zr=Ut[4];zr!=null&&(N.za=zr,N.j.info("SVER="+N.za));const fi=Ut[5];fi!=null&&typeof fi=="number"&&fi>0&&(U=1.5*fi,N.O=U,N.j.info("backChannelRequestTimeoutMs_="+U)),U=N;const Qi=p.g;if(Qi){const Hs=Qi.g?Qi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hs){var me=U.h;me.g||Hs.indexOf("spdy")==-1&&Hs.indexOf("quic")==-1&&Hs.indexOf("h2")==-1||(me.j=me.l,me.g=new Set,me.h&&(Co(me,me.h),me.h=null))}if(U.G){const Hr=Qi.g?Qi.g.getResponseHeader("X-HTTP-Session-Id"):null;Hr&&(U.wa=Hr,tt(U.J,U.G,Hr))}}N.I=3,N.l&&N.l.ra(),N.aa&&(N.T=Date.now()-p.F,N.j.info("Handshake RTT: "+N.T+"ms")),U=N;var Le=p;if(U.na=cl(U,U.L?U.ba:null,U.W),Le.L){Dt(U.h,Le);var ot=Le,In=U.O;In&&(ot.H=In),ot.D&&(mn(ot),Pr(ot)),U.g=Le}else wr(U);N.i.length>0&&kr(N)}else Ut[0]!="stop"&&Ut[0]!="close"||Vr(N,7);else N.I==3&&(Ut[0]=="stop"||Ut[0]=="close"?Ut[0]=="stop"?Vr(N,7):Ta(N):Ut[0]!="noop"&&N.l&&N.l.qa(Ut),N.A=0)}}mr(4)}catch{}}var Cn=class{constructor(p,S){this.g=p,this.map=S}};function Se(p){this.l=p||10,_.PerformanceNavigationTiming?(p=_.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(_.chrome&&_.chrome.loadTimes&&_.chrome.loadTimes()&&_.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function To(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Gt(p){return p.h?1:p.g?p.g.size:0}function Ti(p,S){return p.h?p.h==S:p.g?p.g.has(S):!1}function Co(p,S){p.g?p.g.add(S):p.h=S}function Dt(p,S){p.h&&p.h==S?p.h=null:p.g&&p.g.has(S)&&p.g.delete(S)}Se.prototype.cancel=function(){if(this.i=bt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function bt(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let S=p.i;for(const N of p.g.values())S=S.concat(N.G);return S}return j(p.i)}var Et=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ds(p,S){if(p){p=p.split("&");for(let N=0;N<p.length;N++){const U=p[N].indexOf("=");let ne,me=null;U>=0?(ne=p[N].substring(0,U),me=p[N].substring(U+1)):ne=p[N],S(ne,me?decodeURIComponent(me.replace(/\+/g," ")):"")}}}function Ci(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;p instanceof Ci?(this.l=p.l,Ct(this,p.j),this.o=p.o,this.g=p.g,vi(this,p.u),this.h=p.h,vo(this,So(p.i)),this.m=p.m):p&&(S=String(p).match(Et))?(this.l=!1,Ct(this,S[1]||"",!0),this.o=Br(S[2]||""),this.g=Br(S[3]||"",!0),vi(this,S[4]),this.h=Br(S[5]||"",!0),vo(this,S[6]||"",!0),this.m=Br(S[7]||"")):(this.l=!1,this.i=new qn(null,this.l))}Ci.prototype.toString=function(){const p=[];var S=this.j;S&&p.push(er(S,Dn,!0),":");var N=this.g;return(N||S=="file")&&(p.push("//"),(S=this.o)&&p.push(er(S,Dn,!0),"@"),p.push(_i(N).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.u,N!=null&&p.push(":",String(N))),(N=this.h)&&(this.g&&N.charAt(0)!="/"&&p.push("/"),p.push(er(N,N.charAt(0)=="/"?z:se,!0))),(N=this.i.toString())&&p.push("?",N),(N=this.m)&&p.push("#",er(N,Mn)),p.join("")},Ci.prototype.resolve=function(p){const S=vn(this);let N=!!p.j;N?Ct(S,p.j):N=!!p.o,N?S.o=p.o:N=!!p.g,N?S.g=p.g:N=p.u!=null;var U=p.h;if(N)vi(S,p.u);else if(N=!!p.h){if(U.charAt(0)!="/")if(this.g&&!this.h)U="/"+U;else{var ne=S.h.lastIndexOf("/");ne!=-1&&(U=S.h.slice(0,ne+1)+U)}if(ne=U,ne==".."||ne==".")U="";else if(ne.indexOf("./")!=-1||ne.indexOf("/.")!=-1){U=ne.lastIndexOf("/",0)==0,ne=ne.split("/");const me=[];for(let Le=0;Le<ne.length;){const ot=ne[Le++];ot=="."?U&&Le==ne.length&&me.push(""):ot==".."?((me.length>1||me.length==1&&me[0]!="")&&me.pop(),U&&Le==ne.length&&me.push("")):(me.push(ot),U=!0)}U=me.join("/")}else U=ne}return N?S.h=U:N=p.i.toString()!=="",N?vo(S,So(p.i)):N=!!p.m,N&&(S.m=p.m),S};function vn(p){return new Ci(p)}function Ct(p,S,N){p.j=N?Br(S,!0):S,p.j&&(p.j=p.j.replace(/:$/,""))}function vi(p,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);p.u=S}else p.u=null}function vo(p,S,N){S instanceof qn?(p.i=S,ms(p.i,p.l)):(N||(S=er(S,Ge)),p.i=new qn(S,p.l))}function tt(p,S,N){p.i.set(S,N)}function Bi(p){return tt(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function Br(p,S){return p?S?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function er(p,S,N){return typeof p=="string"?(p=encodeURI(p).replace(S,mt),N&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function mt(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Dn=/[#\/\?@]/g,se=/[#\?:]/g,z=/[#\?]/g,Ge=/[#\?@]/g,Mn=/#/g;function qn(p,S){this.h=this.g=null,this.i=p||null,this.j=!!S}function ki(p){p.g||(p.g=new Map,p.h=0,p.i&&ds(p.i,function(S,N){p.add(decodeURIComponent(S.replace(/\+/g," ")),N)}))}a=qn.prototype,a.add=function(p,S){ki(this),this.i=null,p=gs(this,p);let N=this.g.get(p);return N||this.g.set(p,N=[]),N.push(S),this.h+=1,this};function wa(p,S){ki(p),S=gs(p,S),p.g.has(S)&&(p.i=null,p.h-=p.g.get(S).length,p.g.delete(S))}function hi(p,S){return ki(p),S=gs(p,S),p.g.has(S)}a.forEach=function(p,S){ki(this),this.g.forEach(function(N,U){N.forEach(function(ne){p.call(S,ne,U,this)},this)},this)};function Ye(p,S){ki(p);let N=[];if(typeof S=="string")hi(p,S)&&(N=N.concat(p.g.get(gs(p,S))));else for(p=Array.from(p.g.values()),S=0;S<p.length;S++)N=N.concat(p[S]);return N}a.set=function(p,S){return ki(this),this.i=null,p=gs(this,p),hi(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[S]),this.h+=1,this},a.get=function(p,S){return p?(p=Ye(this,p),p.length>0?String(p[0]):S):S};function $t(p,S,N){wa(p,S),N.length>0&&(p.i=null,p.g.set(gs(p,S),j(N)),p.h+=N.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],S=Array.from(this.g.keys());for(let U=0;U<S.length;U++){var N=S[U];const ne=_i(N);N=Ye(this,N);for(let me=0;me<N.length;me++){let Le=ne;N[me]!==""&&(Le+="="+_i(N[me])),p.push(Le)}}return this.i=p.join("&")};function So(p){const S=new qn;return S.i=p.i,p.g&&(S.g=new Map(p.g),S.h=p.h),S}function gs(p,S){return S=String(S),p.j&&(S=S.toLowerCase()),S}function ms(p,S){S&&!p.j&&(ki(p),p.i=null,p.g.forEach(function(N,U){const ne=U.toLowerCase();U!=ne&&(wa(this,U),$t(this,ne,N))},p)),p.j=S}function Vi(p,S){const N=new On;if(_.Image){const U=new Image;U.onload=b(tr,N,"TestLoadImage: loaded",!0,S,U),U.onerror=b(tr,N,"TestLoadImage: error",!1,S,U),U.onabort=b(tr,N,"TestLoadImage: abort",!1,S,U),U.ontimeout=b(tr,N,"TestLoadImage: timeout",!1,S,U),_.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=p}else S(!1)}function Ps(p,S){const N=new On,U=new AbortController,ne=setTimeout(()=>{U.abort(),tr(N,"TestPingServer: timeout",!1,S)},1e4);fetch(p,{signal:U.signal}).then(me=>{clearTimeout(ne),me.ok?tr(N,"TestPingServer: ok",!0,S):tr(N,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(ne),tr(N,"TestPingServer: error",!1,S)})}function tr(p,S,N,U,ne){try{ne&&(ne.onload=null,ne.onerror=null,ne.onabort=null,ne.ontimeout=null),U(N)}catch{}}function fn(){this.g=new Ao}function Ui(p){this.i=p.Sb||null,this.h=p.ab||!1}O(Ui,Ds),Ui.prototype.g=function(){return new Fi(this.i,this.h)};function Fi(p,S){Ze.call(this),this.H=p,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}O(Fi,Ze),a=Fi.prototype,a.open=function(p,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=S,this.readyState=1,et(this)},a.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(S.body=p),(this.H||_).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ps(this)),this.readyState=0},a.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,et(this)),this.g&&(this.readyState=3,et(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof _.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;We(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function We(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}a.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var S=p.value?p.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!p.done}))&&(this.response=this.responseText+=S)}p.done?ps(this):et(this),this.readyState==3&&We(this)}},a.Oa=function(p){this.g&&(this.response=this.responseText=p,ps(this))},a.Na=function(p){this.g&&(this.response=p,ps(this))},a.ga=function(){this.g&&ps(this)};function ps(p){p.readyState=4,p.l=null,p.j=null,p.B=null,et(p)}a.setRequestHeader=function(p,S){this.A.append(p,S)},a.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],S=this.h.entries();for(var N=S.next();!N.done;)N=N.value,p.push(N[0]+": "+N[1]),N=S.next();return p.join(`\r
`)};function et(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Fi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function en(p){let S="";return it(p,function(N,U){S+=U,S+=":",S+=N,S+=`\r
`}),S}function Bs(p,S,N){e:{for(U in N){var U=!1;break e}U=!0}U||(N=en(N),typeof p=="string"?N!=null&&_i(N):tt(p,S,N))}function Wt(p){Ze.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}O(Wt,Ze);var _r=/^https?$/i,xr=["POST","PUT"];a=Wt.prototype,a.Fa=function(p){this.H=p},a.ea=function(p,S,N,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);S=S?S.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ls.g(),this.g.onreadystatechange=V(A(this.Ca,this));try{this.B=!0,this.g.open(S,String(p),!0),this.B=!1}catch(me){ks(this,me);return}if(p=N||"",N=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var ne in U)N.set(ne,U[ne]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const me of U.keys())N.set(me,U.get(me));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(N.keys()).find(me=>me.toLowerCase()=="content-type"),ne=_.FormData&&p instanceof _.FormData,!(Array.prototype.indexOf.call(xr,S,void 0)>=0)||U||ne||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,Le]of N)this.g.setRequestHeader(me,Le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(me){ks(this,me)}};function ks(p,S){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=S,p.o=5,rs(p),Yi(p)}function rs(p){p.A||(p.A=!0,wn(p,"complete"),wn(p,"error"))}a.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,wn(this,"complete"),wn(this,"abort"),Yi(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yi(this,!0)),Wt.Z.N.call(this)},a.Ca=function(){this.u||(this.B||this.v||this.j?Ar(this):this.Xa())},a.Xa=function(){Ar(this)};function Ar(p){if(p.h&&typeof m<"u"){if(p.v&&nr(p)==4)setTimeout(p.Ca.bind(p),0);else if(wn(p,"readystatechange"),nr(p)==4){p.h=!1;try{const me=p.ca();e:switch(me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var N;if(!(N=S)){var U;if(U=me===0){let Le=String(p.D).match(Et)[1]||null;!Le&&_.self&&_.self.location&&(Le=_.self.location.protocol.slice(0,-1)),U=!_r.test(Le?Le.toLowerCase():"")}N=U}if(N)wn(p,"complete"),wn(p,"success");else{p.o=6;try{var ne=nr(p)>2?p.g.statusText:""}catch{ne=""}p.l=ne+" ["+p.ca()+"]",rs(p)}}finally{Yi(p)}}}}function Yi(p,S){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const N=p.g;p.g=null,S||wn(p,"ready");try{N.onreadystatechange=null}catch{}}}a.isActive=function(){return!!this.g};function nr(p){return p.g?p.g.readyState:0}a.ca=function(){try{return nr(this)>2?this.g.status:-1}catch{return-1}},a.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.La=function(p){if(this.g){var S=this.g.responseText;return p&&S.indexOf(p)==0&&(S=S.substring(p.length)),ri(S)}};function Ln(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Wi(p){const S={};p=(p.g&&nr(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<p.length;U++){if(G(p[U]))continue;var N=xi(p[U]);const ne=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const me=S[ne]||[];S[ne]=me,me.push(N)}lt(S,function(U){return U.join(", ")})}a.ya=function(){return this.o},a.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function En(p,S,N){return N&&N.internalChannelParams&&N.internalChannelParams[p]||S}function ss(p){this.za=0,this.i=[],this.j=new On,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=En("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=En("baseRetryDelayMs",5e3,p),this.Za=En("retryDelaySeedMs",1e4,p),this.Ta=En("forwardChannelMaxRetries",2,p),this.va=En("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new Se(p&&p.concurrentRequestLimit),this.Ba=new fn,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}a=ss.prototype,a.ka=8,a.I=1,a.connect=function(p,S,N,U){an(0),this.W=p,this.H=S||{},N&&U!==void 0&&(this.H.OSID=N,this.H.OAID=U),this.F=this.X,this.J=cl(this,null,this.W),kr(this)};function Ta(p){if(Ca(p),p.I==3){var S=p.V++,N=vn(p.J);if(tt(N,"SID",p.M),tt(N,"RID",S),tt(N,"TYPE","terminate"),ys(p,N),S=new Ve(p,p.j,S),S.M=2,S.A=Bi(vn(N)),N=!1,_.navigator&&_.navigator.sendBeacon)try{N=_.navigator.sendBeacon(S.A.toString(),"")}catch{}!N&&_.Image&&(new Image().src=S.A,N=!0),N||(S.g=Sa(S.j,null),S.g.ea(S.A)),S.F=Date.now(),Pr(S)}ll(p)}function as(p){p.g&&(fe(p),p.g.cancel(),p.g=null)}function Ca(p){as(p),p.v&&(_.clearTimeout(p.v),p.v=null),Sn(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&_.clearTimeout(p.m),p.m=null)}function kr(p){if(!To(p.h)&&!p.m){p.m=!0;var S=p.Ea;we||F(),Te||(we(),Te=!0),B.add(S,p),p.D=0}}function va(p,S){return Gt(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=S.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=yr(A(p.Ea,p,S),bo(p,p.D)),p.D++,!0)}a.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const ne=new Ve(this,this.j,p);let me=this.o;if(this.U&&(me?(me=X(me),Pe(me,this.U)):me=this.U),this.u!==null||this.R||(ne.J=me,me=null),this.S)e:{for(var S=0,N=0;N<this.i.length;N++){t:{var U=this.i[N];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(S+=U,S>4096){S=N;break e}if(S===4096||N===this.i.length-1){S=N+1;break e}}S=1e3}else S=1e3;S=Vs(this,ne,S),N=vn(this.J),tt(N,"RID",p),tt(N,"CVER",22),this.G&&tt(N,"X-HTTP-Session-Id",this.G),ys(this,N),me&&(this.R?S="headers="+_i(en(me))+"&"+S:this.u&&Bs(N,this.u,me)),Co(this.h,ne),this.Ra&&tt(N,"TYPE","init"),this.S?(tt(N,"$req",S),tt(N,"SID","null"),ne.U=!0,Ai(ne,N,null)):Ai(ne,N,S),this.I=2}}else this.I==3&&(p?zt(this,p):this.i.length==0||To(this.h)||zt(this))};function zt(p,S){var N;S?N=S.l:N=p.V++;const U=vn(p.J);tt(U,"SID",p.M),tt(U,"RID",N),tt(U,"AID",p.K),ys(p,U),p.u&&p.o&&Bs(U,p.u,p.o),N=new Ve(p,p.j,N,p.D+1),p.u===null&&(N.J=p.o),S&&(p.i=S.G.concat(p.i)),S=Vs(p,N,1e3),N.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),Co(p.h,N),Ai(N,U,S)}function ys(p,S){p.H&&it(p.H,function(N,U){tt(S,U,N)}),p.l&&it({},function(N,U){tt(S,U,N)})}function Vs(p,S,N){N=Math.min(p.i.length,N);const U=p.l?A(p.l.Ka,p.l,p):null;e:{var ne=p.i;let ot=-1;for(;;){const In=["count="+N];ot==-1?N>0?(ot=ne[0].g,In.push("ofs="+ot)):ot=0:In.push("ofs="+ot);let Ut=!0;for(let dn=0;dn<N;dn++){var me=ne[dn].g;const Ki=ne[dn].map;if(me-=ot,me<0)ot=Math.max(0,ne[dn].g-100),Ut=!1;else try{me="req"+me+"_"||"";try{var Le=Ki instanceof Map?Ki:Object.entries(Ki);for(const[zr,fi]of Le){let Qi=fi;v(fi)&&(Qi=yi(fi)),In.push(me+zr+"="+encodeURIComponent(Qi))}}catch(zr){throw In.push(me+"type="+encodeURIComponent("_badmap")),zr}}catch{U&&U(Ki)}}if(Ut){Le=In.join("&");break e}}Le=void 0}return p=p.i.splice(0,N),S.G=p,Le}function wr(p){if(!p.g&&!p.v){p.Y=1;var S=p.Da;we||F(),Te||(we(),Te=!0),B.add(S,p),p.A=0}}function Us(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=yr(A(p.Da,p),bo(p,p.A)),p.A++,!0)}a.Da=function(){if(this.v=null,ht(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=yr(A(this.Wa,this),p)}},a.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,an(10),as(this),ht(this))};function fe(p){p.B!=null&&(_.clearTimeout(p.B),p.B=null)}function ht(p){p.g=new Ve(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var S=vn(p.na);tt(S,"RID","rpc"),tt(S,"SID",p.M),tt(S,"AID",p.K),tt(S,"CI",p.F?"0":"1"),!p.F&&p.ia&&tt(S,"TO",p.ia),tt(S,"TYPE","xmlhttp"),ys(p,S),p.u&&p.o&&Bs(S,p.u,p.o),p.O&&(p.g.H=p.O);var N=p.g;p=p.ba,N.M=1,N.A=Bi(vn(S)),N.u=null,N.R=!0,is(N,p)}a.Va=function(){this.C!=null&&(this.C=null,as(this),Us(this),an(19))};function Sn(p){p.C!=null&&(_.clearTimeout(p.C),p.C=null)}function Fs(p,S){var N=null;if(p.g==S){Sn(p),fe(p),p.g=null;var U=2}else if(Ti(p.h,S))N=S.G,Dt(p.h,S),U=1;else return;if(p.I!=0){if(S.o)if(U==1){N=S.u?S.u.length:0,S=Date.now()-S.F;var ne=p.D;U=Mr(),wn(U,new pr(U,N)),kr(p)}else wr(p);else if(ne=S.m,ne==3||ne==0&&S.X>0||!(U==1&&va(p,S)||U==2&&Us(p)))switch(N&&N.length>0&&(S=p.h,S.i=S.i.concat(N)),ne){case 1:Vr(p,5);break;case 4:Vr(p,10);break;case 3:Vr(p,6);break;default:Vr(p,2)}}}function bo(p,S){let N=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(N*=2),N*S}function Vr(p,S){if(p.j.info("Error code "+S),S==2){var N=A(p.bb,p),U=p.Ua;const ne=!U;U=new Ci(U||"//www.google.com/images/cleardot.gif"),_.location&&_.location.protocol=="http"||Ct(U,"https"),Bi(U),ne?Vi(U.toString(),N):Ps(U.toString(),N)}else an(2);p.I=0,p.l&&p.l.pa(S),ll(p),Ca(p)}a.bb=function(p){p?(this.j.info("Successfully pinged google.com"),an(2)):(this.j.info("Failed to ping google.com"),an(1))};function ll(p){if(p.I=0,p.ja=[],p.l){const S=bt(p.h);(S.length!=0||p.i.length!=0)&&(ee(p.ja,S),ee(p.ja,p.i),p.h.i.length=0,j(p.i),p.i.length=0),p.l.oa()}}function cl(p,S,N){var U=N instanceof Ci?vn(N):new Ci(N);if(U.g!="")S&&(U.g=S+"."+U.g),vi(U,U.u);else{var ne=_.location;U=ne.protocol,S=S?S+"."+ne.hostname:ne.hostname,ne=+ne.port;const me=new Ci(null);U&&Ct(me,U),S&&(me.g=S),ne&&vi(me,ne),N&&(me.h=N),U=me}return N=p.G,S=p.wa,N&&S&&tt(U,N,S),tt(U,"VER",p.ka),ys(p,U),U}function Sa(p,S,N){if(S&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=p.Aa&&!p.ma?new Wt(new Ui({ab:N})):new Wt(p.ma),S.Fa(p.L),S}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function bn(){}a=bn.prototype,a.ra=function(){},a.qa=function(){},a.pa=function(){},a.oa=function(){},a.isActive=function(){return!0},a.Ka=function(){};function Ur(){}Ur.prototype.g=function(p,S){return new vt(p,S)};function vt(p,S){Ze.call(this),this.g=new ss(S),this.l=p,this.h=S&&S.messageUrlParams||null,p=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(p?p["X-WebChannel-Content-Type"]=S.messageContentType:p={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(p?p["X-WebChannel-Client-Profile"]=S.sa:p={"X-WebChannel-Client-Profile":S.sa}),this.g.U=p,(p=S&&S.Qb)&&!G(p)&&(this.g.u=p),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!G(S)&&(this.g.G=S,p=this.h,p!==null&&S in p&&(p=this.h,S in p&&delete p[S])),this.j=new It(this)}O(vt,Ze),vt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vt.prototype.close=function(){Ta(this.g)},vt.prototype.o=function(p){var S=this.g;if(typeof p=="string"){var N={};N.__data__=p,p=N}else this.v&&(N={},N.__data__=yi(p),p=N);S.i.push(new Cn(S.Ya++,p)),S.I==3&&kr(S)},vt.prototype.N=function(){this.g.l=null,delete this.j,Ta(this.g),delete this.g,vt.Z.N.call(this)};function zs(p){Ne.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var S=p.__sm__;if(S){e:{for(const N in S){p=N;break e}p=void 0}(this.i=p)&&(p=this.i,S=S!==null&&p in S?S[p]:void 0),this.data=S}else this.data=p}O(zs,Ne);function Fr(){Yt.call(this),this.status=1}O(Fr,Yt);function It(p){this.g=p}O(It,bn),It.prototype.ra=function(){wn(this.g,"a")},It.prototype.qa=function(p){wn(this.g,new zs(p))},It.prototype.pa=function(p){wn(this.g,new Fr)},It.prototype.oa=function(){wn(this.g,"b")},Ur.prototype.createWebChannel=Ur.prototype.g,vt.prototype.send=vt.prototype.o,vt.prototype.open=vt.prototype.m,vt.prototype.close=vt.prototype.close,R_=function(){return new Ur},I_=function(){return Mr()},b_=rt,c0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ms.NO_ERROR=0,Ms.TIMEOUT=8,Ms.HTTP_ERROR=6,jh=Ms,Er.COMPLETE="complete",S_=Er,al.EventType=Xt,Xt.OPEN="a",Xt.CLOSE="b",Xt.ERROR="c",Xt.MESSAGE="d",Ze.prototype.listen=Ze.prototype.J,Xc=al,Wt.prototype.listenOnce=Wt.prototype.K,Wt.prototype.getLastError=Wt.prototype.Ha,Wt.prototype.getLastErrorCode=Wt.prototype.ya,Wt.prototype.getStatus=Wt.prototype.ca,Wt.prototype.getResponseJson=Wt.prototype.La,Wt.prototype.getResponseText=Wt.prototype.la,Wt.prototype.send=Wt.prototype.ea,Wt.prototype.setWithCredentials=Wt.prototype.Fa,v_=Wt}).apply(typeof Oh<"u"?Oh:typeof self<"u"?self:typeof window<"u"?window:{});const Ey="@firebase/firestore",_y="4.9.2";class ji{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ji.UNAUTHENTICATED=new ji(null),ji.GOOGLE_CREDENTIALS=new ji("google-credentials-uid"),ji.FIRST_PARTY=new ji("first-party-uid"),ji.MOCK_USER=new ji("mock-user");let rc="12.3.0";const $o=new L0("@firebase/firestore");function kl(){return $o.logLevel}function ze(a,...e){if($o.logLevel<=Bt.DEBUG){const n=e.map(q0);$o.debug(`Firestore (${rc}): ${a}`,...n)}}function ga(a,...e){if($o.logLevel<=Bt.ERROR){const n=e.map(q0);$o.error(`Firestore (${rc}): ${a}`,...n)}}function Kl(a,...e){if($o.logLevel<=Bt.WARN){const n=e.map(q0);$o.warn(`Firestore (${rc}): ${a}`,...n)}}function q0(a){if(typeof a=="string")return a;try{return(function(n){return JSON.stringify(n)})(a)}catch{return a}}function at(a,e,n){let o="Unexpected state";typeof e=="string"?o=e:n=e,N_(a,o,n)}function N_(a,e,n){let o=`FIRESTORE (${rc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${a.toString(16)})`;if(n!==void 0)try{o+=" CONTEXT: "+JSON.stringify(n)}catch{o+=" CONTEXT: "+n}throw ga(o),new Error(o)}function nn(a,e,n,o){let h="Unexpected state";typeof n=="string"?h=n:o=n,a||N_(e,h,o)}function dt(a,e){return a}const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends ya{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ha{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class O_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Xv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ji.UNAUTHENTICATED)))}shutdown(){}}class Yv{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Wv{constructor(e){this.t=e,this.currentUser=ji.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){nn(this.o===void 0,42304);let o=this.i;const h=T=>this.i!==o?(o=this.i,n(T)):Promise.resolve();let m=new ha;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new ha,e.enqueueRetryable((()=>h(this.currentUser)))};const _=()=>{const T=m;e.enqueueRetryable((async()=>{await T.promise,await h(this.currentUser)}))},v=T=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=T,this.o&&(this.auth.addAuthTokenListener(this.o),_())};this.t.onInit((T=>v(T))),setTimeout((()=>{if(!this.auth){const T=this.t.getImmediate({optional:!0});T?v(T):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),m.resolve(),m=new ha)}}),0),_()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((o=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(nn(typeof o.accessToken=="string",31837,{l:o}),new O_(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nn(e===null||typeof e=="string",2055,{h:e}),new ji(e)}}class Kv{constructor(e,n,o){this.P=e,this.T=n,this.I=o,this.type="FirstParty",this.user=ji.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Qv{constructor(e,n,o){this.P=e,this.T=n,this.I=o}getToken(){return Promise.resolve(new Kv(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ji.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class xy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Zv{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){nn(this.o===void 0,3512);const o=m=>{m.error!=null&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const _=m.token!==this.m;return this.m=m.token,ze("FirebaseAppCheckTokenProvider",`Received ${_?"new":"existing"} token.`),_?n(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable((()=>o(m)))};const h=m=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((m=>h(m))),setTimeout((()=>{if(!this.appCheck){const m=this.V.getImmediate({optional:!0});m?h(m):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new xy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(nn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new xy(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Jv(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(a);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let o=0;o<a;o++)n[o]=Math.floor(256*Math.random());return n}class X0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const h=Jv(40);for(let m=0;m<h.length;++m)o.length<20&&h[m]<n&&(o+=e.charAt(h[m]%62))}return o}}function kt(a,e){return a<e?-1:a>e?1:0}function u0(a,e){const n=Math.min(a.length,e.length);for(let o=0;o<n;o++){const h=a.charAt(o),m=e.charAt(o);if(h!==m)return X1(h)===X1(m)?kt(h,m):X1(h)?1:-1}return kt(a.length,e.length)}const $v=55296,eS=57343;function X1(a){const e=a.charCodeAt(0);return e>=$v&&e<=eS}function Ql(a,e,n){return a.length===e.length&&a.every(((o,h)=>n(o,e[h])))}const Ay="__name__";class Ts{constructor(e,n,o){n===void 0?n=0:n>e.length&&at(637,{offset:n,range:e.length}),o===void 0?o=e.length-n:o>e.length-n&&at(1746,{length:o,range:e.length-n}),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return Ts.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ts?e.forEach((o=>{n.push(o)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let h=0;h<o;h++){const m=Ts.compareSegments(e.get(h),n.get(h));if(m!==0)return m}return kt(e.length,n.length)}static compareSegments(e,n){const o=Ts.isNumericId(e),h=Ts.isNumericId(n);return o&&!h?-1:!o&&h?1:o&&h?Ts.extractNumericId(e).compare(Ts.extractNumericId(n)):u0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return oo.fromString(e.substring(4,e.length-2))}}class pn extends Ts{construct(e,n,o){return new pn(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new Ue(ve.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter((h=>h.length>0)))}return new pn(n)}static emptyPath(){return new pn([])}}const tS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Di extends Ts{construct(e,n,o){return new Di(e,n,o)}static isValidIdentifier(e){return tS.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Di.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ay}static keyField(){return new Di([Ay])}static fromServerFormat(e){const n=[];let o="",h=0;const m=()=>{if(o.length===0)throw new Ue(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let _=!1;for(;h<e.length;){const v=e[h];if(v==="\\"){if(h+1===e.length)throw new Ue(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const T=e[h+1];if(T!=="\\"&&T!=="."&&T!=="`")throw new Ue(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=T,h+=2}else v==="`"?(_=!_,h++):v!=="."||_?(o+=v,h++):(m(),h++)}if(m(),_)throw new Ue(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Di(n)}static emptyPath(){return new Di([])}}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(pn.fromString(e))}static fromName(e){return new Qe(pn.fromString(e).popFirst(5))}static empty(){return new Qe(pn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new pn(e.slice()))}}function D_(a,e,n){if(!n)throw new Ue(ve.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function nS(a,e,n,o){if(e===!0&&o===!0)throw new Ue(ve.INVALID_ARGUMENT,`${a} and ${n} cannot be used together.`)}function wy(a){if(!Qe.isDocumentKey(a))throw new Ue(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function Ty(a){if(Qe.isDocumentKey(a))throw new Ue(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function M_(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}function Sf(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(a);return e?`a custom ${e} object`:"an object"}}return typeof a=="function"?"a function":at(12329,{type:typeof a})}function fr(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new Ue(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sf(a);throw new Ue(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return a}function ii(a,e){const n={typeString:a};return e&&(n.value=e),n}function Eu(a,e){if(!M_(a))throw new Ue(ve.INVALID_ARGUMENT,"JSON must be an object");let n;for(const o in e)if(e[o]){const h=e[o].typeString,m="value"in e[o]?{value:e[o].value}:void 0;if(!(o in a)){n=`JSON missing required field: '${o}'`;break}const _=a[o];if(h&&typeof _!==h){n=`JSON field '${o}' must be a ${h}.`;break}if(m!==void 0&&_!==m.value){n=`Expected '${o}' field to equal '${m.value}'`;break}}if(n)throw new Ue(ve.INVALID_ARGUMENT,n);return!0}const Cy=-62135596800,vy=1e6;class un{static now(){return un.fromMillis(Date.now())}static fromDate(e){return un.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor((e-1e3*n)*vy);return new un(n,o)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ue(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ue(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Cy)throw new Ue(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/vy}_compareTo(e){return this.seconds===e.seconds?kt(this.nanoseconds,e.nanoseconds):kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:un._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Eu(e,un._jsonSchema))return new un(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Cy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}un._jsonSchemaVersion="firestore/timestamp/1.0",un._jsonSchema={type:ii("string",un._jsonSchemaVersion),seconds:ii("number"),nanoseconds:ii("number")};class ut{static fromTimestamp(e){return new ut(e)}static min(){return new ut(new un(0,0))}static max(){return new ut(new un(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const au=-1;function iS(a,e){const n=a.toTimestamp().seconds,o=a.toTimestamp().nanoseconds+1,h=ut.fromTimestamp(o===1e9?new un(n+1,0):new un(n,o));return new co(h,Qe.empty(),e)}function rS(a){return new co(a.readTime,a.key,au)}class co{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new co(ut.min(),Qe.empty(),au)}static max(){return new co(ut.max(),Qe.empty(),au)}}function sS(a,e){let n=a.readTime.compareTo(e.readTime);return n!==0?n:(n=Qe.comparator(a.documentKey,e.documentKey),n!==0?n:kt(a.largestBatchId,e.largestBatchId))}const aS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function sc(a){if(a.code!==ve.FAILED_PRECONDITION||a.message!==aS)throw a;ze("LocalStore","Unexpectedly lost primary lease")}class be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&at(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new be(((o,h)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(o,h)},this.catchCallback=m=>{this.wrapFailure(n,m).next(o,h)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof be?n:be.resolve(n)}catch(n){return be.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):be.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):be.reject(n)}static resolve(e){return new be(((n,o)=>{n(e)}))}static reject(e){return new be(((n,o)=>{o(e)}))}static waitFor(e){return new be(((n,o)=>{let h=0,m=0,_=!1;e.forEach((v=>{++h,v.next((()=>{++m,_&&m===h&&n()}),(T=>o(T)))})),_=!0,m===h&&n()}))}static or(e){let n=be.resolve(!1);for(const o of e)n=n.next((h=>h?be.resolve(h):o()));return n}static forEach(e,n){const o=[];return e.forEach(((h,m)=>{o.push(n.call(this,h,m))})),this.waitFor(o)}static mapArray(e,n){return new be(((o,h)=>{const m=e.length,_=new Array(m);let v=0;for(let T=0;T<m;T++){const A=T;n(e[A]).next((b=>{_[A]=b,++v,v===m&&o(_)}),(b=>h(b)))}}))}static doWhile(e,n){return new be(((o,h)=>{const m=()=>{e()===!0?n().next((()=>{m()}),h):o()};m()}))}}function lS(a){const e=a.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ac(a){return a.name==="IndexedDbTransactionError"}class bf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>n.writeSequenceNumber(o))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}bf.ce=-1;const Y0=-1;function If(a){return a==null}function rf(a){return a===0&&1/a==-1/0}function cS(a){return typeof a=="number"&&Number.isInteger(a)&&!rf(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}const L_="";function uS(a){let e="";for(let n=0;n<a.length;n++)e.length>0&&(e=Sy(e)),e=hS(a.get(n),e);return Sy(e)}function hS(a,e){let n=e;const o=a.length;for(let h=0;h<o;h++){const m=a.charAt(h);switch(m){case"\0":n+="";break;case L_:n+="";break;default:n+=m}}return n}function Sy(a){return a+L_+""}function by(a){let e=0;for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&e++;return e}function Eo(a,e){for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&e(n,a[n])}function P_(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}class Pn{constructor(e,n){this.comparator=e,this.root=n||Oi.EMPTY}insert(e,n){return new Pn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Oi.BLACK,null,null))}remove(e){return new Pn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Oi.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(o===0)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const h=this.comparator(e,o.key);if(h===0)return n+o.left.size;h<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,o)=>(e(n,o),!1)))}toString(){const e=[];return this.inorderTraversal(((n,o)=>(e.push(`${n}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dh(this.root,e,this.comparator,!0)}}class Dh{constructor(e,n,o,h){this.isReverse=h,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=n?o(e.key,n):1,n&&h&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(m===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Oi{constructor(e,n,o,h,m){this.key=e,this.value=n,this.color=o??Oi.RED,this.left=h??Oi.EMPTY,this.right=m??Oi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,h,m){return new Oi(e??this.key,n??this.value,o??this.color,h??this.left,m??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let h=this;const m=o(e,h.key);return h=m<0?h.copy(null,null,null,h.left.insert(e,n,o),null):m===0?h.copy(null,n,null,null,null):h.copy(null,null,null,null,h.right.insert(e,n,o)),h.fixUp()}removeMin(){if(this.left.isEmpty())return Oi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,h=this;if(n(e,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(e,n),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),n(e,h.key)===0){if(h.right.isEmpty())return Oi.EMPTY;o=h.right.min(),h=h.copy(o.key,o.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(e,n))}return h.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Oi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Oi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw at(43730,{key:this.key,value:this.value});if(this.right.isRed())throw at(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw at(27949);return e+(this.isRed()?0:1)}}Oi.EMPTY=null,Oi.RED=!0,Oi.BLACK=!1;Oi.EMPTY=new class{constructor(){this.size=0}get key(){throw at(57766)}get value(){throw at(16141)}get color(){throw at(16727)}get left(){throw at(29726)}get right(){throw at(36894)}copy(e,n,o,h,m){return this}insert(e,n,o){return new Oi(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class li{constructor(e){this.comparator=e,this.data=new Pn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,o)=>(e(n),!1)))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const h=o.getNext();if(this.comparator(h.key,e[1])>=0)return;n(h.key)}}forEachWhile(e,n){let o;for(o=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Iy(this.data.getIterator())}getIteratorFrom(e){return new Iy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((o=>{n=n.add(o)})),n}isEqual(e){if(!(e instanceof li)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const h=n.getNext().key,m=o.getNext().key;if(this.comparator(h,m)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new li(this.comparator);return n.data=e,n}}class Iy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Dr{constructor(e){this.fields=e,e.sort(Di.comparator)}static empty(){return new Dr([])}unionWith(e){let n=new li(Di.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new Dr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ql(this.fields,e.fields,((n,o)=>n.isEqual(o)))}}class B_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Mi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(h){try{return atob(h)}catch(m){throw typeof DOMException<"u"&&m instanceof DOMException?new B_("Invalid base64 string: "+m):m}})(e);return new Mi(n)}static fromUint8Array(e){const n=(function(h){let m="";for(let _=0;_<h.length;++_)m+=String.fromCharCode(h[_]);return m})(e);return new Mi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const o=new Uint8Array(n.length);for(let h=0;h<n.length;h++)o[h]=n.charCodeAt(h);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mi.EMPTY_BYTE_STRING=new Mi("");const fS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uo(a){if(nn(!!a,39018),typeof a=="string"){let e=0;const n=fS.exec(a);if(nn(!!n,46558,{timestamp:a}),n[1]){let h=n[1];h=(h+"000000000").substr(0,9),e=Number(h)}const o=new Date(a);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Wn(a.seconds),nanos:Wn(a.nanos)}}function Wn(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function ho(a){return typeof a=="string"?Mi.fromBase64String(a):Mi.fromUint8Array(a)}const k_="server_timestamp",V_="__type__",U_="__previous_value__",F_="__local_write_time__";function W0(a){return(a?.mapValue?.fields||{})[V_]?.stringValue===k_}function Rf(a){const e=a.mapValue.fields[U_];return W0(e)?Rf(e):e}function ou(a){const e=uo(a.mapValue.fields[F_].timestampValue);return new un(e.seconds,e.nanos)}class dS{constructor(e,n,o,h,m,_,v,T,A,b){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=h,this.ssl=m,this.forceLongPolling=_,this.autoDetectLongPolling=v,this.longPollingOptions=T,this.useFetchStreams=A,this.isUsingEmulator=b}}const sf="(default)";class lu{constructor(e,n){this.projectId=e,this.database=n||sf}static empty(){return new lu("","")}get isDefaultDatabase(){return this.database===sf}isEqual(e){return e instanceof lu&&e.projectId===this.projectId&&e.database===this.database}}const z_="__type__",gS="__max__",Mh={mapValue:{}},H_="__vector__",af="value";function fo(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?W0(a)?4:pS(a)?9007199254740991:mS(a)?10:11:at(28295,{value:a})}function Os(a,e){if(a===e)return!0;const n=fo(a);if(n!==fo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return ou(a).isEqual(ou(e));case 3:return(function(h,m){if(typeof h.timestampValue=="string"&&typeof m.timestampValue=="string"&&h.timestampValue.length===m.timestampValue.length)return h.timestampValue===m.timestampValue;const _=uo(h.timestampValue),v=uo(m.timestampValue);return _.seconds===v.seconds&&_.nanos===v.nanos})(a,e);case 5:return a.stringValue===e.stringValue;case 6:return(function(h,m){return ho(h.bytesValue).isEqual(ho(m.bytesValue))})(a,e);case 7:return a.referenceValue===e.referenceValue;case 8:return(function(h,m){return Wn(h.geoPointValue.latitude)===Wn(m.geoPointValue.latitude)&&Wn(h.geoPointValue.longitude)===Wn(m.geoPointValue.longitude)})(a,e);case 2:return(function(h,m){if("integerValue"in h&&"integerValue"in m)return Wn(h.integerValue)===Wn(m.integerValue);if("doubleValue"in h&&"doubleValue"in m){const _=Wn(h.doubleValue),v=Wn(m.doubleValue);return _===v?rf(_)===rf(v):isNaN(_)&&isNaN(v)}return!1})(a,e);case 9:return Ql(a.arrayValue.values||[],e.arrayValue.values||[],Os);case 10:case 11:return(function(h,m){const _=h.mapValue.fields||{},v=m.mapValue.fields||{};if(by(_)!==by(v))return!1;for(const T in _)if(_.hasOwnProperty(T)&&(v[T]===void 0||!Os(_[T],v[T])))return!1;return!0})(a,e);default:return at(52216,{left:a})}}function cu(a,e){return(a.values||[]).find((n=>Os(n,e)))!==void 0}function Zl(a,e){if(a===e)return 0;const n=fo(a),o=fo(e);if(n!==o)return kt(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return kt(a.booleanValue,e.booleanValue);case 2:return(function(m,_){const v=Wn(m.integerValue||m.doubleValue),T=Wn(_.integerValue||_.doubleValue);return v<T?-1:v>T?1:v===T?0:isNaN(v)?isNaN(T)?0:-1:1})(a,e);case 3:return Ry(a.timestampValue,e.timestampValue);case 4:return Ry(ou(a),ou(e));case 5:return u0(a.stringValue,e.stringValue);case 6:return(function(m,_){const v=ho(m),T=ho(_);return v.compareTo(T)})(a.bytesValue,e.bytesValue);case 7:return(function(m,_){const v=m.split("/"),T=_.split("/");for(let A=0;A<v.length&&A<T.length;A++){const b=kt(v[A],T[A]);if(b!==0)return b}return kt(v.length,T.length)})(a.referenceValue,e.referenceValue);case 8:return(function(m,_){const v=kt(Wn(m.latitude),Wn(_.latitude));return v!==0?v:kt(Wn(m.longitude),Wn(_.longitude))})(a.geoPointValue,e.geoPointValue);case 9:return Ny(a.arrayValue,e.arrayValue);case 10:return(function(m,_){const v=m.fields||{},T=_.fields||{},A=v[af]?.arrayValue,b=T[af]?.arrayValue,O=kt(A?.values?.length||0,b?.values?.length||0);return O!==0?O:Ny(A,b)})(a.mapValue,e.mapValue);case 11:return(function(m,_){if(m===Mh.mapValue&&_===Mh.mapValue)return 0;if(m===Mh.mapValue)return 1;if(_===Mh.mapValue)return-1;const v=m.fields||{},T=Object.keys(v),A=_.fields||{},b=Object.keys(A);T.sort(),b.sort();for(let O=0;O<T.length&&O<b.length;++O){const V=u0(T[O],b[O]);if(V!==0)return V;const j=Zl(v[T[O]],A[b[O]]);if(j!==0)return j}return kt(T.length,b.length)})(a.mapValue,e.mapValue);default:throw at(23264,{he:n})}}function Ry(a,e){if(typeof a=="string"&&typeof e=="string"&&a.length===e.length)return kt(a,e);const n=uo(a),o=uo(e),h=kt(n.seconds,o.seconds);return h!==0?h:kt(n.nanos,o.nanos)}function Ny(a,e){const n=a.values||[],o=e.values||[];for(let h=0;h<n.length&&h<o.length;++h){const m=Zl(n[h],o[h]);if(m)return m}return kt(n.length,o.length)}function Jl(a){return h0(a)}function h0(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?(function(n){const o=uo(n);return`time(${o.seconds},${o.nanos})`})(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?(function(n){return ho(n).toBase64()})(a.bytesValue):"referenceValue"in a?(function(n){return Qe.fromName(n).toString()})(a.referenceValue):"geoPointValue"in a?(function(n){return`geo(${n.latitude},${n.longitude})`})(a.geoPointValue):"arrayValue"in a?(function(n){let o="[",h=!0;for(const m of n.values||[])h?h=!1:o+=",",o+=h0(m);return o+"]"})(a.arrayValue):"mapValue"in a?(function(n){const o=Object.keys(n.fields||{}).sort();let h="{",m=!0;for(const _ of o)m?m=!1:h+=",",h+=`${_}:${h0(n.fields[_])}`;return h+"}"})(a.mapValue):at(61005,{value:a})}function Gh(a){switch(fo(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rf(a);return e?16+Gh(e):16;case 5:return 2*a.stringValue.length;case 6:return ho(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((h,m)=>h+Gh(m)),0)})(a.arrayValue);case 10:case 11:return(function(o){let h=0;return Eo(o.fields,((m,_)=>{h+=m.length+Gh(_)})),h})(a.mapValue);default:throw at(13486,{value:a})}}function Oy(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function f0(a){return!!a&&"integerValue"in a}function K0(a){return!!a&&"arrayValue"in a}function Dy(a){return!!a&&"nullValue"in a}function My(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function qh(a){return!!a&&"mapValue"in a}function mS(a){return(a?.mapValue?.fields||{})[z_]?.stringValue===H_}function $c(a){if(a.geoPointValue)return{geoPointValue:{...a.geoPointValue}};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:{...a.timestampValue}};if(a.mapValue){const e={mapValue:{fields:{}}};return Eo(a.mapValue.fields,((n,o)=>e.mapValue.fields[n]=$c(o))),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(a.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$c(a.arrayValue.values[n]);return e}return{...a}}function pS(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue===gS}class hr{constructor(e){this.value=e}static empty(){return new hr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!qh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$c(n)}setAll(e){let n=Di.emptyPath(),o={},h=[];e.forEach(((_,v)=>{if(!n.isImmediateParentOf(v)){const T=this.getFieldsMap(n);this.applyChanges(T,o,h),o={},h=[],n=v.popLast()}_?o[v.lastSegment()]=$c(_):h.push(v.lastSegment())}));const m=this.getFieldsMap(n);this.applyChanges(m,o,h)}delete(e){const n=this.field(e.popLast());qh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Os(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let h=n.mapValue.fields[e.get(o)];qh(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=h),n=h}return n.mapValue.fields}applyChanges(e,n,o){Eo(n,((h,m)=>e[h]=m));for(const h of o)delete e[h]}clone(){return new hr($c(this.value))}}function j_(a){const e=[];return Eo(a.fields,((n,o)=>{const h=new Di([n]);if(qh(o)){const m=j_(o.mapValue).fields;if(m.length===0)e.push(h);else for(const _ of m)e.push(h.child(_))}else e.push(h)})),new Dr(e)}class Gi{constructor(e,n,o,h,m,_,v){this.key=e,this.documentType=n,this.version=o,this.readTime=h,this.createTime=m,this.data=_,this.documentState=v}static newInvalidDocument(e){return new Gi(e,0,ut.min(),ut.min(),ut.min(),hr.empty(),0)}static newFoundDocument(e,n,o,h){return new Gi(e,1,n,ut.min(),o,h,0)}static newNoDocument(e,n){return new Gi(e,2,n,ut.min(),ut.min(),hr.empty(),0)}static newUnknownDocument(e,n){return new Gi(e,3,n,ut.min(),ut.min(),hr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ut.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class of{constructor(e,n){this.position=e,this.inclusive=n}}function Ly(a,e,n){let o=0;for(let h=0;h<a.position.length;h++){const m=e[h],_=a.position[h];if(m.field.isKeyField()?o=Qe.comparator(Qe.fromName(_.referenceValue),n.key):o=Zl(_,n.data.field(m.field)),m.dir==="desc"&&(o*=-1),o!==0)break}return o}function Py(a,e){if(a===null)return e===null;if(e===null||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let n=0;n<a.position.length;n++)if(!Os(a.position[n],e.position[n]))return!1;return!0}class lf{constructor(e,n="asc"){this.field=e,this.dir=n}}function yS(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}class G_{}class ni extends G_{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,o):new _S(e,n,o):n==="array-contains"?new wS(e,o):n==="in"?new TS(e,o):n==="not-in"?new CS(e,o):n==="array-contains-any"?new vS(e,o):new ni(e,n,o)}static createKeyFieldInFilter(e,n,o){return n==="in"?new xS(e,o):new AS(e,o)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Zl(n,this.value)):n!==null&&fo(this.value)===fo(n)&&this.matchesComparison(Zl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return at(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fs extends G_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new fs(e,n)}matches(e){return q_(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function q_(a){return a.op==="and"}function X_(a){return ES(a)&&q_(a)}function ES(a){for(const e of a.filters)if(e instanceof fs)return!1;return!0}function d0(a){if(a instanceof ni)return a.field.canonicalString()+a.op.toString()+Jl(a.value);if(X_(a))return a.filters.map((e=>d0(e))).join(",");{const e=a.filters.map((n=>d0(n))).join(",");return`${a.op}(${e})`}}function Y_(a,e){return a instanceof ni?(function(o,h){return h instanceof ni&&o.op===h.op&&o.field.isEqual(h.field)&&Os(o.value,h.value)})(a,e):a instanceof fs?(function(o,h){return h instanceof fs&&o.op===h.op&&o.filters.length===h.filters.length?o.filters.reduce(((m,_,v)=>m&&Y_(_,h.filters[v])),!0):!1})(a,e):void at(19439)}function W_(a){return a instanceof ni?(function(n){return`${n.field.canonicalString()} ${n.op} ${Jl(n.value)}`})(a):a instanceof fs?(function(n){return n.op.toString()+" {"+n.getFilters().map(W_).join(" ,")+"}"})(a):"Filter"}class _S extends ni{constructor(e,n,o){super(e,n,o),this.key=Qe.fromName(o.referenceValue)}matches(e){const n=Qe.comparator(e.key,this.key);return this.matchesComparison(n)}}class xS extends ni{constructor(e,n){super(e,"in",n),this.keys=K_("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class AS extends ni{constructor(e,n){super(e,"not-in",n),this.keys=K_("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function K_(a,e){return(e.arrayValue?.values||[]).map((n=>Qe.fromName(n.referenceValue)))}class wS extends ni{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return K0(n)&&cu(n.arrayValue,this.value)}}class TS extends ni{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&cu(this.value.arrayValue,n)}}class CS extends ni{constructor(e,n){super(e,"not-in",n)}matches(e){if(cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!cu(this.value.arrayValue,n)}}class vS extends ni{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!K0(n)||!n.arrayValue.values)&&n.arrayValue.values.some((o=>cu(this.value.arrayValue,o)))}}class SS{constructor(e,n=null,o=[],h=[],m=null,_=null,v=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=h,this.limit=m,this.startAt=_,this.endAt=v,this.Te=null}}function By(a,e=null,n=[],o=[],h=null,m=null,_=null){return new SS(a,e,n,o,h,m,_)}function Q0(a){const e=dt(a);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((o=>d0(o))).join(","),n+="|ob:",n+=e.orderBy.map((o=>(function(m){return m.field.canonicalString()+m.dir})(o))).join(","),If(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((o=>Jl(o))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((o=>Jl(o))).join(",")),e.Te=n}return e.Te}function Z0(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<a.orderBy.length;n++)if(!yS(a.orderBy[n],e.orderBy[n]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let n=0;n<a.filters.length;n++)if(!Y_(a.filters[n],e.filters[n]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!Py(a.startAt,e.startAt)&&Py(a.endAt,e.endAt)}function g0(a){return Qe.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}class _u{constructor(e,n=null,o=[],h=[],m=null,_="F",v=null,T=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=h,this.limit=m,this.limitType=_,this.startAt=v,this.endAt=T,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function bS(a,e,n,o,h,m,_,v){return new _u(a,e,n,o,h,m,_,v)}function Nf(a){return new _u(a)}function ky(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function Q_(a){return a.collectionGroup!==null}function eu(a){const e=dt(a);if(e.Ie===null){e.Ie=[];const n=new Set;for(const m of e.explicitOrderBy)e.Ie.push(m),n.add(m.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(_){let v=new li(Di.comparator);return _.filters.forEach((T=>{T.getFlattenedFilters().forEach((A=>{A.isInequality()&&(v=v.add(A.field))}))})),v})(e).forEach((m=>{n.has(m.canonicalString())||m.isKeyField()||e.Ie.push(new lf(m,o))})),n.has(Di.keyField().canonicalString())||e.Ie.push(new lf(Di.keyField(),o))}return e.Ie}function Ss(a){const e=dt(a);return e.Ee||(e.Ee=IS(e,eu(a))),e.Ee}function IS(a,e){if(a.limitType==="F")return By(a.path,a.collectionGroup,e,a.filters,a.limit,a.startAt,a.endAt);{e=e.map((h=>{const m=h.dir==="desc"?"asc":"desc";return new lf(h.field,m)}));const n=a.endAt?new of(a.endAt.position,a.endAt.inclusive):null,o=a.startAt?new of(a.startAt.position,a.startAt.inclusive):null;return By(a.path,a.collectionGroup,e,a.filters,a.limit,n,o)}}function m0(a,e){const n=a.filters.concat([e]);return new _u(a.path,a.collectionGroup,a.explicitOrderBy.slice(),n,a.limit,a.limitType,a.startAt,a.endAt)}function p0(a,e,n){return new _u(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,n,a.startAt,a.endAt)}function Of(a,e){return Z0(Ss(a),Ss(e))&&a.limitType===e.limitType}function Z_(a){return`${Q0(Ss(a))}|lt:${a.limitType}`}function Vl(a){return`Query(target=${(function(n){let o=n.path.canonicalString();return n.collectionGroup!==null&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map((h=>W_(h))).join(", ")}]`),If(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map((h=>(function(_){return`${_.field.canonicalString()} (${_.dir})`})(h))).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map((h=>Jl(h))).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map((h=>Jl(h))).join(",")),`Target(${o})`})(Ss(a))}; limitType=${a.limitType})`}function Df(a,e){return e.isFoundDocument()&&(function(o,h){const m=h.key.path;return o.collectionGroup!==null?h.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(m):Qe.isDocumentKey(o.path)?o.path.isEqual(m):o.path.isImmediateParentOf(m)})(a,e)&&(function(o,h){for(const m of eu(o))if(!m.field.isKeyField()&&h.data.field(m.field)===null)return!1;return!0})(a,e)&&(function(o,h){for(const m of o.filters)if(!m.matches(h))return!1;return!0})(a,e)&&(function(o,h){return!(o.startAt&&!(function(_,v,T){const A=Ly(_,v,T);return _.inclusive?A<=0:A<0})(o.startAt,eu(o),h)||o.endAt&&!(function(_,v,T){const A=Ly(_,v,T);return _.inclusive?A>=0:A>0})(o.endAt,eu(o),h))})(a,e)}function RS(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function J_(a){return(e,n)=>{let o=!1;for(const h of eu(a)){const m=NS(h,e,n);if(m!==0)return m;o=o||h.field.isKeyField()}return 0}}function NS(a,e,n){const o=a.field.isKeyField()?Qe.comparator(e.key,n.key):(function(m,_,v){const T=_.data.field(m),A=v.data.field(m);return T!==null&&A!==null?Zl(T,A):at(42886)})(a.field,e,n);switch(a.dir){case"asc":return o;case"desc":return-1*o;default:return at(19790,{direction:a.dir})}}class il{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o!==void 0){for(const[h,m]of o)if(this.equalsFn(h,e))return m}}has(e){return this.get(e)!==void 0}set(e,n){const o=this.mapKeyFn(e),h=this.inner[o];if(h===void 0)return this.inner[o]=[[e,n]],void this.innerSize++;for(let m=0;m<h.length;m++)if(this.equalsFn(h[m][0],e))return void(h[m]=[e,n]);h.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o===void 0)return!1;for(let h=0;h<o.length;h++)if(this.equalsFn(o[h][0],e))return o.length===1?delete this.inner[n]:o.splice(h,1),this.innerSize--,!0;return!1}forEach(e){Eo(this.inner,((n,o)=>{for(const[h,m]of o)e(h,m)}))}isEmpty(){return P_(this.inner)}size(){return this.innerSize}}const OS=new Pn(Qe.comparator);function ma(){return OS}const $_=new Pn(Qe.comparator);function Yc(...a){let e=$_;for(const n of a)e=e.insert(n.key,n);return e}function ex(a){let e=$_;return a.forEach(((n,o)=>e=e.insert(n,o.overlayedDocument))),e}function Xo(){return tu()}function tx(){return tu()}function tu(){return new il((a=>a.toString()),((a,e)=>a.isEqual(e)))}const DS=new Pn(Qe.comparator),MS=new li(Qe.comparator);function Vt(...a){let e=MS;for(const n of a)e=e.add(n);return e}const LS=new li(kt);function PS(){return LS}function J0(a,e){if(a.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rf(e)?"-0":e}}function nx(a){return{integerValue:""+a}}function BS(a,e){return cS(e)?nx(e):J0(a,e)}class Mf{constructor(){this._=void 0}}function kS(a,e,n){return a instanceof cf?(function(h,m){const _={fields:{[V_]:{stringValue:k_},[F_]:{timestampValue:{seconds:h.seconds,nanos:h.nanoseconds}}}};return m&&W0(m)&&(m=Rf(m)),m&&(_.fields[U_]=m),{mapValue:_}})(n,e):a instanceof uu?rx(a,e):a instanceof hu?sx(a,e):(function(h,m){const _=ix(h,m),v=Vy(_)+Vy(h.Ae);return f0(_)&&f0(h.Ae)?nx(v):J0(h.serializer,v)})(a,e)}function VS(a,e,n){return a instanceof uu?rx(a,e):a instanceof hu?sx(a,e):n}function ix(a,e){return a instanceof uf?(function(o){return f0(o)||(function(m){return!!m&&"doubleValue"in m})(o)})(e)?e:{integerValue:0}:null}class cf extends Mf{}class uu extends Mf{constructor(e){super(),this.elements=e}}function rx(a,e){const n=ax(e);for(const o of a.elements)n.some((h=>Os(h,o)))||n.push(o);return{arrayValue:{values:n}}}class hu extends Mf{constructor(e){super(),this.elements=e}}function sx(a,e){let n=ax(e);for(const o of a.elements)n=n.filter((h=>!Os(h,o)));return{arrayValue:{values:n}}}class uf extends Mf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Vy(a){return Wn(a.integerValue||a.doubleValue)}function ax(a){return K0(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}function US(a,e){return a.field.isEqual(e.field)&&(function(o,h){return o instanceof uu&&h instanceof uu||o instanceof hu&&h instanceof hu?Ql(o.elements,h.elements,Os):o instanceof uf&&h instanceof uf?Os(o.Ae,h.Ae):o instanceof cf&&h instanceof cf})(a.transform,e.transform)}class FS{constructor(e,n){this.version=e,this.transformResults=n}}class es{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new es}static exists(e){return new es(void 0,e)}static updateTime(e){return new es(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xh(a,e){return a.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(a.updateTime):a.exists===void 0||a.exists===e.isFoundDocument()}class Lf{}function ox(a,e){if(!a.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return a.isNoDocument()?new $0(a.key,es.none()):new xu(a.key,a.data,es.none());{const n=a.data,o=hr.empty();let h=new li(Di.comparator);for(let m of e.fields)if(!h.has(m)){let _=n.field(m);_===null&&m.length>1&&(m=m.popLast(),_=n.field(m)),_===null?o.delete(m):o.set(m,_),h=h.add(m)}return new _o(a.key,o,new Dr(h.toArray()),es.none())}}function zS(a,e,n){a instanceof xu?(function(h,m,_){const v=h.value.clone(),T=Fy(h.fieldTransforms,m,_.transformResults);v.setAll(T),m.convertToFoundDocument(_.version,v).setHasCommittedMutations()})(a,e,n):a instanceof _o?(function(h,m,_){if(!Xh(h.precondition,m))return void m.convertToUnknownDocument(_.version);const v=Fy(h.fieldTransforms,m,_.transformResults),T=m.data;T.setAll(lx(h)),T.setAll(v),m.convertToFoundDocument(_.version,T).setHasCommittedMutations()})(a,e,n):(function(h,m,_){m.convertToNoDocument(_.version).setHasCommittedMutations()})(0,e,n)}function nu(a,e,n,o){return a instanceof xu?(function(m,_,v,T){if(!Xh(m.precondition,_))return v;const A=m.value.clone(),b=zy(m.fieldTransforms,T,_);return A.setAll(b),_.convertToFoundDocument(_.version,A).setHasLocalMutations(),null})(a,e,n,o):a instanceof _o?(function(m,_,v,T){if(!Xh(m.precondition,_))return v;const A=zy(m.fieldTransforms,T,_),b=_.data;return b.setAll(lx(m)),b.setAll(A),_.convertToFoundDocument(_.version,b).setHasLocalMutations(),v===null?null:v.unionWith(m.fieldMask.fields).unionWith(m.fieldTransforms.map((O=>O.field)))})(a,e,n,o):(function(m,_,v){return Xh(m.precondition,_)?(_.convertToNoDocument(_.version).setHasLocalMutations(),null):v})(a,e,n)}function HS(a,e){let n=null;for(const o of a.fieldTransforms){const h=e.data.field(o.field),m=ix(o.transform,h||null);m!=null&&(n===null&&(n=hr.empty()),n.set(o.field,m))}return n||null}function Uy(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&!!(function(o,h){return o===void 0&&h===void 0||!(!o||!h)&&Ql(o,h,((m,_)=>US(m,_)))})(a.fieldTransforms,e.fieldTransforms)&&(a.type===0?a.value.isEqual(e.value):a.type!==1||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask))}class xu extends Lf{constructor(e,n,o,h=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=h,this.type=0}getFieldMask(){return null}}class _o extends Lf{constructor(e,n,o,h,m=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=h,this.fieldTransforms=m,this.type=1}getFieldMask(){return this.fieldMask}}function lx(a){const e=new Map;return a.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const o=a.data.field(n);e.set(n,o)}})),e}function Fy(a,e,n){const o=new Map;nn(a.length===n.length,32656,{Re:n.length,Ve:a.length});for(let h=0;h<n.length;h++){const m=a[h],_=m.transform,v=e.data.field(m.field);o.set(m.field,VS(_,v,n[h]))}return o}function zy(a,e,n){const o=new Map;for(const h of a){const m=h.transform,_=n.data.field(h.field);o.set(h.field,kS(m,_,e))}return o}class $0 extends Lf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jS extends Lf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class GS{constructor(e,n,o,h){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=h}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let h=0;h<this.mutations.length;h++){const m=this.mutations[h];m.key.isEqual(e.key)&&zS(m,e,o[h])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=nu(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=nu(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=tx();return this.mutations.forEach((h=>{const m=e.get(h.key),_=m.overlayedDocument;let v=this.applyToLocalView(_,m.mutatedFields);v=n.has(h.key)?null:v;const T=ox(_,v);T!==null&&o.set(h.key,T),_.isValidDocument()||_.convertToNoDocument(ut.min())})),o}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Vt())}isEqual(e){return this.batchId===e.batchId&&Ql(this.mutations,e.mutations,((n,o)=>Uy(n,o)))&&Ql(this.baseMutations,e.baseMutations,((n,o)=>Uy(n,o)))}}class eg{constructor(e,n,o,h){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=h}static from(e,n,o){nn(e.mutations.length===o.length,58842,{me:e.mutations.length,fe:o.length});let h=(function(){return DS})();const m=e.mutations;for(let _=0;_<m.length;_++)h=h.insert(m[_].key,o[_].version);return new eg(e,n,o,h)}}class qS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class XS{constructor(e,n){this.count=e,this.unchangedNames=n}}var ei,Ht;function YS(a){switch(a){case ve.OK:return at(64938);case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0;default:return at(15467,{code:a})}}function cx(a){if(a===void 0)return ga("GRPC error has no .code"),ve.UNKNOWN;switch(a){case ei.OK:return ve.OK;case ei.CANCELLED:return ve.CANCELLED;case ei.UNKNOWN:return ve.UNKNOWN;case ei.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case ei.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case ei.INTERNAL:return ve.INTERNAL;case ei.UNAVAILABLE:return ve.UNAVAILABLE;case ei.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case ei.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case ei.NOT_FOUND:return ve.NOT_FOUND;case ei.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case ei.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case ei.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case ei.ABORTED:return ve.ABORTED;case ei.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case ei.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case ei.DATA_LOSS:return ve.DATA_LOSS;default:return at(39323,{code:a})}}(Ht=ei||(ei={}))[Ht.OK=0]="OK",Ht[Ht.CANCELLED=1]="CANCELLED",Ht[Ht.UNKNOWN=2]="UNKNOWN",Ht[Ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ht[Ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ht[Ht.NOT_FOUND=5]="NOT_FOUND",Ht[Ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ht[Ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ht[Ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ht[Ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ht[Ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ht[Ht.ABORTED=10]="ABORTED",Ht[Ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ht[Ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ht[Ht.INTERNAL=13]="INTERNAL",Ht[Ht.UNAVAILABLE=14]="UNAVAILABLE",Ht[Ht.DATA_LOSS=15]="DATA_LOSS";function WS(){return new TextEncoder}const KS=new oo([4294967295,4294967295],0);function Hy(a){const e=WS().encode(a),n=new C_;return n.update(e),new Uint8Array(n.digest())}function jy(a){const e=new DataView(a.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),h=e.getUint32(8,!0),m=e.getUint32(12,!0);return[new oo([n,o],0),new oo([h,m],0)]}class tg{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new Wc(`Invalid padding: ${n}`);if(o<0)throw new Wc(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new Wc(`Invalid hash count: ${o}`);if(e.length===0&&n!==0)throw new Wc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=oo.fromNumber(this.ge)}ye(e,n,o){let h=e.add(n.multiply(oo.fromNumber(o)));return h.compare(KS)===1&&(h=new oo([h.getBits(0),h.getBits(1)],0)),h.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Hy(e),[o,h]=jy(n);for(let m=0;m<this.hashCount;m++){const _=this.ye(o,h,m);if(!this.we(_))return!1}return!0}static create(e,n,o){const h=e%8==0?0:8-e%8,m=new Uint8Array(Math.ceil(e/8)),_=new tg(m,h,n);return o.forEach((v=>_.insert(v))),_}insert(e){if(this.ge===0)return;const n=Hy(e),[o,h]=jy(n);for(let m=0;m<this.hashCount;m++){const _=this.ye(o,h,m);this.Se(_)}}Se(e){const n=Math.floor(e/8),o=e%8;this.bitmap[n]|=1<<o}}class Wc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Pf{constructor(e,n,o,h,m){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=h,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const h=new Map;return h.set(e,Au.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new Pf(ut.min(),h,new Pn(kt),ma(),Vt())}}class Au{constructor(e,n,o,h,m){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=h,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new Au(o,n,Vt(),Vt(),Vt())}}class Yh{constructor(e,n,o,h){this.be=e,this.removedTargetIds=n,this.key=o,this.De=h}}class ux{constructor(e,n){this.targetId=e,this.Ce=n}}class hx{constructor(e,n,o=Mi.EMPTY_BYTE_STRING,h=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=h}}class Gy{constructor(){this.ve=0,this.Fe=qy(),this.Me=Mi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Vt(),n=Vt(),o=Vt();return this.Fe.forEach(((h,m)=>{switch(m){case 0:e=e.add(h);break;case 2:n=n.add(h);break;case 1:o=o.add(h);break;default:at(38017,{changeType:m})}})),new Au(this.Me,this.xe,e,n,o)}qe(){this.Oe=!1,this.Fe=qy()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,nn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class QS{constructor(e){this.Ge=e,this.ze=new Map,this.je=ma(),this.Je=Lh(),this.He=Lh(),this.Ye=new Pn(kt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const o=this.nt(n);switch(e.state){case 0:this.rt(n)&&o.Le(e.resumeToken);break;case 1:o.Ke(),o.Ne||o.qe(),o.Le(e.resumeToken);break;case 2:o.Ke(),o.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(o.We(),o.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),o.Le(e.resumeToken));break;default:at(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((o,h)=>{this.rt(h)&&n(h)}))}st(e){const n=e.targetId,o=e.Ce.count,h=this.ot(n);if(h){const m=h.target;if(g0(m))if(o===0){const _=new Qe(m.path);this.et(n,_,Gi.newNoDocument(_,ut.min()))}else nn(o===1,20013,{expectedCount:o});else{const _=this._t(n);if(_!==o){const v=this.ut(e),T=v?this.ct(v,e,_):1;if(T!==0){this.it(n);const A=T===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,A)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:h=0},hashCount:m=0}=n;let _,v;try{_=ho(o).toUint8Array()}catch(T){if(T instanceof B_)return Kl("Decoding the base64 bloom filter in existence filter failed ("+T.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw T}try{v=new tg(_,h,m)}catch(T){return Kl(T instanceof Wc?"BloomFilter error: ":"Applying bloom filter failed: ",T),null}return v.ge===0?null:v}ct(e,n,o){return n.Ce.count===o-this.Pt(e,n.targetId)?0:2}Pt(e,n){const o=this.Ge.getRemoteKeysForTarget(n);let h=0;return o.forEach((m=>{const _=this.Ge.ht(),v=`projects/${_.projectId}/databases/${_.database}/documents/${m.path.canonicalString()}`;e.mightContain(v)||(this.et(n,m,null),h++)})),h}Tt(e){const n=new Map;this.ze.forEach(((m,_)=>{const v=this.ot(_);if(v){if(m.current&&g0(v.target)){const T=new Qe(v.target.path);this.It(T).has(_)||this.Et(_,T)||this.et(_,T,Gi.newNoDocument(T,e))}m.Be&&(n.set(_,m.ke()),m.qe())}}));let o=Vt();this.He.forEach(((m,_)=>{let v=!0;_.forEachWhile((T=>{const A=this.ot(T);return!A||A.purpose==="TargetPurposeLimboResolution"||(v=!1,!1)})),v&&(o=o.add(m))})),this.je.forEach(((m,_)=>_.setReadTime(e)));const h=new Pf(e,n,this.Ye,this.je,o);return this.je=ma(),this.Je=Lh(),this.He=Lh(),this.Ye=new Pn(kt),h}Xe(e,n){if(!this.rt(e))return;const o=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,o),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,o){if(!this.rt(e))return;const h=this.nt(e);this.Et(e,n)?h.Qe(n,1):h.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),o&&(this.je=this.je.insert(n,o))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Gy,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new li(kt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new li(kt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ze("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Gy),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Lh(){return new Pn(Qe.comparator)}function qy(){return new Pn(Qe.comparator)}const ZS={asc:"ASCENDING",desc:"DESCENDING"},JS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$S={and:"AND",or:"OR"};class eb{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function y0(a,e){return a.useProto3Json||If(e)?e:{value:e}}function hf(a,e){return a.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fx(a,e){return a.useProto3Json?e.toBase64():e.toUint8Array()}function tb(a,e){return hf(a,e.toTimestamp())}function bs(a){return nn(!!a,49232),ut.fromTimestamp((function(n){const o=uo(n);return new un(o.seconds,o.nanos)})(a))}function ng(a,e){return E0(a,e).canonicalString()}function E0(a,e){const n=(function(h){return new pn(["projects",h.projectId,"databases",h.database])})(a).child("documents");return e===void 0?n:n.child(e)}function dx(a){const e=pn.fromString(a);return nn(Ex(e),10190,{key:e.toString()}),e}function _0(a,e){return ng(a.databaseId,e.path)}function Y1(a,e){const n=dx(e);if(n.get(1)!==a.databaseId.projectId)throw new Ue(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+a.databaseId.projectId);if(n.get(3)!==a.databaseId.database)throw new Ue(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+a.databaseId.database);return new Qe(mx(n))}function gx(a,e){return ng(a.databaseId,e)}function nb(a){const e=dx(a);return e.length===4?pn.emptyPath():mx(e)}function x0(a){return new pn(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function mx(a){return nn(a.length>4&&a.get(4)==="documents",29091,{key:a.toString()}),a.popFirst(5)}function Xy(a,e,n){return{name:_0(a,e),fields:n.value.mapValue.fields}}function ib(a,e){let n;if("targetChange"in e){e.targetChange;const o=(function(A){return A==="NO_CHANGE"?0:A==="ADD"?1:A==="REMOVE"?2:A==="CURRENT"?3:A==="RESET"?4:at(39313,{state:A})})(e.targetChange.targetChangeType||"NO_CHANGE"),h=e.targetChange.targetIds||[],m=(function(A,b){return A.useProto3Json?(nn(b===void 0||typeof b=="string",58123),Mi.fromBase64String(b||"")):(nn(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Mi.fromUint8Array(b||new Uint8Array))})(a,e.targetChange.resumeToken),_=e.targetChange.cause,v=_&&(function(A){const b=A.code===void 0?ve.UNKNOWN:cx(A.code);return new Ue(b,A.message||"")})(_);n=new hx(o,h,m,v||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const h=Y1(a,o.document.name),m=bs(o.document.updateTime),_=o.document.createTime?bs(o.document.createTime):ut.min(),v=new hr({mapValue:{fields:o.document.fields}}),T=Gi.newFoundDocument(h,m,_,v),A=o.targetIds||[],b=o.removedTargetIds||[];n=new Yh(A,b,T.key,T)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const h=Y1(a,o.document),m=o.readTime?bs(o.readTime):ut.min(),_=Gi.newNoDocument(h,m),v=o.removedTargetIds||[];n=new Yh([],v,_.key,_)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const h=Y1(a,o.document),m=o.removedTargetIds||[];n=new Yh([],m,h,null)}else{if(!("filter"in e))return at(11601,{Rt:e});{e.filter;const o=e.filter;o.targetId;const{count:h=0,unchangedNames:m}=o,_=new XS(h,m),v=o.targetId;n=new ux(v,_)}}return n}function rb(a,e){let n;if(e instanceof xu)n={update:Xy(a,e.key,e.value)};else if(e instanceof $0)n={delete:_0(a,e.key)};else if(e instanceof _o)n={update:Xy(a,e.key,e.data),updateMask:db(e.fieldMask)};else{if(!(e instanceof jS))return at(16599,{Vt:e.type});n={verify:_0(a,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((o=>(function(m,_){const v=_.transform;if(v instanceof cf)return{fieldPath:_.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof uu)return{fieldPath:_.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof hu)return{fieldPath:_.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof uf)return{fieldPath:_.field.canonicalString(),increment:v.Ae};throw at(20930,{transform:_.transform})})(0,o)))),e.precondition.isNone||(n.currentDocument=(function(h,m){return m.updateTime!==void 0?{updateTime:tb(h,m.updateTime)}:m.exists!==void 0?{exists:m.exists}:at(27497)})(a,e.precondition)),n}function sb(a,e){return a&&a.length>0?(nn(e!==void 0,14353),a.map((n=>(function(h,m){let _=h.updateTime?bs(h.updateTime):bs(m);return _.isEqual(ut.min())&&(_=bs(m)),new FS(_,h.transformResults||[])})(n,e)))):[]}function ab(a,e){return{documents:[gx(a,e.path)]}}function ob(a,e){const n={structuredQuery:{}},o=e.path;let h;e.collectionGroup!==null?(h=o,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(h=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=gx(a,h);const m=(function(A){if(A.length!==0)return yx(fs.create(A,"and"))})(e.filters);m&&(n.structuredQuery.where=m);const _=(function(A){if(A.length!==0)return A.map((b=>(function(V){return{field:Ul(V.field),direction:ub(V.dir)}})(b)))})(e.orderBy);_&&(n.structuredQuery.orderBy=_);const v=y0(a,e.limit);return v!==null&&(n.structuredQuery.limit=v),e.startAt&&(n.structuredQuery.startAt=(function(A){return{before:A.inclusive,values:A.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(A){return{before:!A.inclusive,values:A.position}})(e.endAt)),{ft:n,parent:h}}function lb(a){let e=nb(a.parent);const n=a.structuredQuery,o=n.from?n.from.length:0;let h=null;if(o>0){nn(o===1,65062);const b=n.from[0];b.allDescendants?h=b.collectionId:e=e.child(b.collectionId)}let m=[];n.where&&(m=(function(O){const V=px(O);return V instanceof fs&&X_(V)?V.getFilters():[V]})(n.where));let _=[];n.orderBy&&(_=(function(O){return O.map((V=>(function(ee){return new lf(Fl(ee.field),(function(le){switch(le){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(ee.direction))})(V)))})(n.orderBy));let v=null;n.limit&&(v=(function(O){let V;return V=typeof O=="object"?O.value:O,If(V)?null:V})(n.limit));let T=null;n.startAt&&(T=(function(O){const V=!!O.before,j=O.values||[];return new of(j,V)})(n.startAt));let A=null;return n.endAt&&(A=(function(O){const V=!O.before,j=O.values||[];return new of(j,V)})(n.endAt)),bS(e,h,_,m,v,"F",T,A)}function cb(a,e){const n=(function(h){switch(h){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return at(28987,{purpose:h})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function px(a){return a.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=Fl(n.unaryFilter.field);return ni.create(o,"==",{doubleValue:NaN});case"IS_NULL":const h=Fl(n.unaryFilter.field);return ni.create(h,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const m=Fl(n.unaryFilter.field);return ni.create(m,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const _=Fl(n.unaryFilter.field);return ni.create(_,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return at(61313);default:return at(60726)}})(a):a.fieldFilter!==void 0?(function(n){return ni.create(Fl(n.fieldFilter.field),(function(h){switch(h){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return at(58110);default:return at(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(a):a.compositeFilter!==void 0?(function(n){return fs.create(n.compositeFilter.filters.map((o=>px(o))),(function(h){switch(h){case"AND":return"and";case"OR":return"or";default:return at(1026)}})(n.compositeFilter.op))})(a):at(30097,{filter:a})}function ub(a){return ZS[a]}function hb(a){return JS[a]}function fb(a){return $S[a]}function Ul(a){return{fieldPath:a.canonicalString()}}function Fl(a){return Di.fromServerFormat(a.fieldPath)}function yx(a){return a instanceof ni?(function(n){if(n.op==="=="){if(My(n.value))return{unaryFilter:{field:Ul(n.field),op:"IS_NAN"}};if(Dy(n.value))return{unaryFilter:{field:Ul(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(My(n.value))return{unaryFilter:{field:Ul(n.field),op:"IS_NOT_NAN"}};if(Dy(n.value))return{unaryFilter:{field:Ul(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ul(n.field),op:hb(n.op),value:n.value}}})(a):a instanceof fs?(function(n){const o=n.getFilters().map((h=>yx(h)));return o.length===1?o[0]:{compositeFilter:{op:fb(n.op),filters:o}}})(a):at(54877,{filter:a})}function db(a){const e=[];return a.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Ex(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}class no{constructor(e,n,o,h,m=ut.min(),_=ut.min(),v=Mi.EMPTY_BYTE_STRING,T=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=h,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=_,this.resumeToken=v,this.expectedCount=T}withSequenceNumber(e){return new no(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class gb{constructor(e){this.yt=e}}function mb(a){const e=lb({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?p0(e,e.limit,"L"):e}class pb{constructor(){this.Cn=new yb}addToCollectionParentIndex(e,n){return this.Cn.add(n),be.resolve()}getCollectionParents(e,n){return be.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return be.resolve()}deleteFieldIndex(e,n){return be.resolve()}deleteAllFieldIndexes(e){return be.resolve()}createTargetIndexes(e,n){return be.resolve()}getDocumentsMatchingTarget(e,n){return be.resolve(null)}getIndexType(e,n){return be.resolve(0)}getFieldIndexes(e,n){return be.resolve([])}getNextCollectionGroupToUpdate(e){return be.resolve(null)}getMinOffset(e,n){return be.resolve(co.min())}getMinOffsetFromCollectionGroup(e,n){return be.resolve(co.min())}updateCollectionGroup(e,n,o){return be.resolve()}updateIndexEntries(e,n){return be.resolve()}}class yb{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),h=this.index[n]||new li(pn.comparator),m=!h.has(o);return this.index[n]=h.add(o),m}has(e){const n=e.lastSegment(),o=e.popLast(),h=this.index[n];return h&&h.has(o)}getEntries(e){return(this.index[e]||new li(pn.comparator)).toArray()}}const Yy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_x=41943040;class ur{static withCacheSize(e){return new ur(e,ur.DEFAULT_COLLECTION_PERCENTILE,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}}ur.DEFAULT_COLLECTION_PERCENTILE=10,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ur.DEFAULT=new ur(_x,ur.DEFAULT_COLLECTION_PERCENTILE,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ur.DISABLED=new ur(-1,0,0);class $l{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new $l(0)}static cr(){return new $l(-1)}}const Wy="LruGarbageCollector",Eb=1048576;function Ky([a,e],[n,o]){const h=kt(a,n);return h===0?kt(e,o):h}class _b{constructor(e){this.Ir=e,this.buffer=new li(Ky),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();Ky(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class xb{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ze(Wy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ac(n)?ze(Wy,"Ignoring IndexedDB error during garbage collection: ",n):await sc(n)}await this.Vr(3e5)}))}}class Ab{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((o=>Math.floor(n/100*o)))}nthSequenceNumber(e,n){if(n===0)return be.resolve(bf.ce);const o=new _b(n);return this.mr.forEachTarget(e,(h=>o.Ar(h.sequenceNumber))).next((()=>this.mr.pr(e,(h=>o.Ar(h))))).next((()=>o.maxValue))}removeTargets(e,n,o){return this.mr.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(Yy)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yy):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let o,h,m,_,v,T,A;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((O=>(O>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),h=this.params.maximumSequenceNumbersToCollect):h=O,_=Date.now(),this.nthSequenceNumber(e,h)))).next((O=>(o=O,v=Date.now(),this.removeTargets(e,o,n)))).next((O=>(m=O,T=Date.now(),this.removeOrphanedDocuments(e,o)))).next((O=>(A=Date.now(),kl()<=Bt.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${_-b}ms
	Determined least recently used ${h} in `+(v-_)+`ms
	Removed ${m} targets in `+(T-v)+`ms
	Removed ${O} documents in `+(A-T)+`ms
Total Duration: ${A-b}ms`),be.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:m,documentsRemoved:O}))))}}function wb(a,e){return new Ab(a,e)}class Tb{constructor(){this.changes=new il((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Gi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return o!==void 0?be.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Cb{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class vb{constructor(e,n,o,h){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=h}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next((h=>(o=h,this.remoteDocumentCache.getEntry(e,n)))).next((h=>(o!==null&&nu(o.mutation,h,Dr.empty(),un.now()),h)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.getLocalViewOfDocuments(e,o,Vt()).next((()=>o))))}getLocalViewOfDocuments(e,n,o=Vt()){const h=Xo();return this.populateOverlays(e,h,n).next((()=>this.computeViews(e,n,h,o).next((m=>{let _=Yc();return m.forEach(((v,T)=>{_=_.insert(v,T.overlayedDocument)})),_}))))}getOverlayedDocuments(e,n){const o=Xo();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,Vt())))}populateOverlays(e,n,o){const h=[];return o.forEach((m=>{n.has(m)||h.push(m)})),this.documentOverlayCache.getOverlays(e,h).next((m=>{m.forEach(((_,v)=>{n.set(_,v)}))}))}computeViews(e,n,o,h){let m=ma();const _=tu(),v=(function(){return tu()})();return n.forEach(((T,A)=>{const b=o.get(A.key);h.has(A.key)&&(b===void 0||b.mutation instanceof _o)?m=m.insert(A.key,A):b!==void 0?(_.set(A.key,b.mutation.getFieldMask()),nu(b.mutation,A,b.mutation.getFieldMask(),un.now())):_.set(A.key,Dr.empty())})),this.recalculateAndSaveOverlays(e,m).next((T=>(T.forEach(((A,b)=>_.set(A,b))),n.forEach(((A,b)=>v.set(A,new Cb(b,_.get(A)??null)))),v)))}recalculateAndSaveOverlays(e,n){const o=tu();let h=new Pn(((_,v)=>_-v)),m=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((_=>{for(const v of _)v.keys().forEach((T=>{const A=n.get(T);if(A===null)return;let b=o.get(T)||Dr.empty();b=v.applyToLocalView(A,b),o.set(T,b);const O=(h.get(v.batchId)||Vt()).add(T);h=h.insert(v.batchId,O)}))})).next((()=>{const _=[],v=h.getReverseIterator();for(;v.hasNext();){const T=v.getNext(),A=T.key,b=T.value,O=tx();b.forEach((V=>{if(!m.has(V)){const j=ox(n.get(V),o.get(V));j!==null&&O.set(V,j),m=m.add(V)}})),_.push(this.documentOverlayCache.saveOverlays(e,A,O))}return be.waitFor(_)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,n,o,h){return(function(_){return Qe.isDocumentKey(_.path)&&_.collectionGroup===null&&_.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Q_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,h):this.getDocumentsMatchingCollectionQuery(e,n,o,h)}getNextDocuments(e,n,o,h){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,h).next((m=>{const _=h-m.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,h-m.size):be.resolve(Xo());let v=au,T=m;return _.next((A=>be.forEach(A,((b,O)=>(v<O.largestBatchId&&(v=O.largestBatchId),m.get(b)?be.resolve():this.remoteDocumentCache.getEntry(e,b).next((V=>{T=T.insert(b,V)}))))).next((()=>this.populateOverlays(e,A,m))).next((()=>this.computeViews(e,T,A,Vt()))).next((b=>({batchId:v,changes:ex(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Qe(n)).next((o=>{let h=Yc();return o.isFoundDocument()&&(h=h.insert(o.key,o)),h}))}getDocumentsMatchingCollectionGroupQuery(e,n,o,h){const m=n.collectionGroup;let _=Yc();return this.indexManager.getCollectionParents(e,m).next((v=>be.forEach(v,(T=>{const A=(function(O,V){return new _u(V,null,O.explicitOrderBy.slice(),O.filters.slice(),O.limit,O.limitType,O.startAt,O.endAt)})(n,T.child(m));return this.getDocumentsMatchingCollectionQuery(e,A,o,h).next((b=>{b.forEach(((O,V)=>{_=_.insert(O,V)}))}))})).next((()=>_))))}getDocumentsMatchingCollectionQuery(e,n,o,h){let m;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next((_=>(m=_,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,m,h)))).next((_=>{m.forEach(((T,A)=>{const b=A.getKey();_.get(b)===null&&(_=_.insert(b,Gi.newInvalidDocument(b)))}));let v=Yc();return _.forEach(((T,A)=>{const b=m.get(T);b!==void 0&&nu(b.mutation,A,Dr.empty(),un.now()),Df(n,A)&&(v=v.insert(T,A))})),v}))}}class Sb{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return be.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(h){return{id:h.id,version:h.version,createTime:bs(h.createTime)}})(n)),be.resolve()}getNamedQuery(e,n){return be.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(h){return{name:h.name,query:mb(h.bundledQuery),readTime:bs(h.readTime)}})(n)),be.resolve()}}class bb{constructor(){this.overlays=new Pn(Qe.comparator),this.qr=new Map}getOverlay(e,n){return be.resolve(this.overlays.get(n))}getOverlays(e,n){const o=Xo();return be.forEach(n,(h=>this.getOverlay(e,h).next((m=>{m!==null&&o.set(h,m)})))).next((()=>o))}saveOverlays(e,n,o){return o.forEach(((h,m)=>{this.St(e,n,m)})),be.resolve()}removeOverlaysForBatchId(e,n,o){const h=this.qr.get(o);return h!==void 0&&(h.forEach((m=>this.overlays=this.overlays.remove(m))),this.qr.delete(o)),be.resolve()}getOverlaysForCollection(e,n,o){const h=Xo(),m=n.length+1,_=new Qe(n.child("")),v=this.overlays.getIteratorFrom(_);for(;v.hasNext();){const T=v.getNext().value,A=T.getKey();if(!n.isPrefixOf(A.path))break;A.path.length===m&&T.largestBatchId>o&&h.set(T.getKey(),T)}return be.resolve(h)}getOverlaysForCollectionGroup(e,n,o,h){let m=new Pn(((A,b)=>A-b));const _=this.overlays.getIterator();for(;_.hasNext();){const A=_.getNext().value;if(A.getKey().getCollectionGroup()===n&&A.largestBatchId>o){let b=m.get(A.largestBatchId);b===null&&(b=Xo(),m=m.insert(A.largestBatchId,b)),b.set(A.getKey(),A)}}const v=Xo(),T=m.getIterator();for(;T.hasNext()&&(T.getNext().value.forEach(((A,b)=>v.set(A,b))),!(v.size()>=h)););return be.resolve(v)}St(e,n,o){const h=this.overlays.get(o.key);if(h!==null){const _=this.qr.get(h.largestBatchId).delete(o.key);this.qr.set(h.largestBatchId,_)}this.overlays=this.overlays.insert(o.key,new qS(n,o));let m=this.qr.get(n);m===void 0&&(m=Vt(),this.qr.set(n,m)),this.qr.set(n,m.add(o.key))}}class Ib{constructor(){this.sessionToken=Mi.EMPTY_BYTE_STRING}getSessionToken(e){return be.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,be.resolve()}}class ig{constructor(){this.Qr=new li(gi.$r),this.Ur=new li(gi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const o=new gi(e,n);this.Qr=this.Qr.add(o),this.Ur=this.Ur.add(o)}Wr(e,n){e.forEach((o=>this.addReference(o,n)))}removeReference(e,n){this.Gr(new gi(e,n))}zr(e,n){e.forEach((o=>this.removeReference(o,n)))}jr(e){const n=new Qe(new pn([])),o=new gi(n,e),h=new gi(n,e+1),m=[];return this.Ur.forEachInRange([o,h],(_=>{this.Gr(_),m.push(_.key)})),m}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Qe(new pn([])),o=new gi(n,e),h=new gi(n,e+1);let m=Vt();return this.Ur.forEachInRange([o,h],(_=>{m=m.add(_.key)})),m}containsKey(e){const n=new gi(e,0),o=this.Qr.firstAfterOrEqual(n);return o!==null&&e.isEqual(o.key)}}class gi{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Qe.comparator(e.key,n.key)||kt(e.Yr,n.Yr)}static Kr(e,n){return kt(e.Yr,n.Yr)||Qe.comparator(e.key,n.key)}}class Rb{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new li(gi.$r)}checkEmpty(e){return be.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,o,h){const m=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const _=new GS(m,n,o,h);this.mutationQueue.push(_);for(const v of h)this.Zr=this.Zr.add(new gi(v.key,m)),this.indexManager.addToCollectionParentIndex(e,v.key.path.popLast());return be.resolve(_)}lookupMutationBatch(e,n){return be.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const o=n+1,h=this.ei(o),m=h<0?0:h;return be.resolve(this.mutationQueue.length>m?this.mutationQueue[m]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(this.mutationQueue.length===0?Y0:this.tr-1)}getAllMutationBatches(e){return be.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new gi(n,0),h=new gi(n,Number.POSITIVE_INFINITY),m=[];return this.Zr.forEachInRange([o,h],(_=>{const v=this.Xr(_.Yr);m.push(v)})),be.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new li(kt);return n.forEach((h=>{const m=new gi(h,0),_=new gi(h,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([m,_],(v=>{o=o.add(v.Yr)}))})),be.resolve(this.ti(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,h=o.length+1;let m=o;Qe.isDocumentKey(m)||(m=m.child(""));const _=new gi(new Qe(m),0);let v=new li(kt);return this.Zr.forEachWhile((T=>{const A=T.key.path;return!!o.isPrefixOf(A)&&(A.length===h&&(v=v.add(T.Yr)),!0)}),_),be.resolve(this.ti(v))}ti(e){const n=[];return e.forEach((o=>{const h=this.Xr(o);h!==null&&n.push(h)})),n}removeMutationBatch(e,n){nn(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Zr;return be.forEach(n.mutations,(h=>{const m=new gi(h.key,n.batchId);return o=o.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,h.key)})).next((()=>{this.Zr=o}))}ir(e){}containsKey(e,n){const o=new gi(n,0),h=this.Zr.firstAfterOrEqual(o);return be.resolve(n.isEqual(h&&h.key))}performConsistencyCheck(e){return this.mutationQueue.length,be.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Nb{constructor(e){this.ri=e,this.docs=(function(){return new Pn(Qe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,h=this.docs.get(o),m=h?h.size:0,_=this.ri(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:_}),this.size+=_-m,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return be.resolve(o?o.document.mutableCopy():Gi.newInvalidDocument(n))}getEntries(e,n){let o=ma();return n.forEach((h=>{const m=this.docs.get(h);o=o.insert(h,m?m.document.mutableCopy():Gi.newInvalidDocument(h))})),be.resolve(o)}getDocumentsMatchingQuery(e,n,o,h){let m=ma();const _=n.path,v=new Qe(_.child("__id-9223372036854775808__")),T=this.docs.getIteratorFrom(v);for(;T.hasNext();){const{key:A,value:{document:b}}=T.getNext();if(!_.isPrefixOf(A.path))break;A.path.length>_.length+1||sS(rS(b),o)<=0||(h.has(b.key)||Df(n,b))&&(m=m.insert(b.key,b.mutableCopy()))}return be.resolve(m)}getAllFromCollectionGroup(e,n,o,h){at(9500)}ii(e,n){return be.forEach(this.docs,(o=>n(o)))}newChangeBuffer(e){return new Ob(this)}getSize(e){return be.resolve(this.size)}}class Ob extends Tb{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((o,h)=>{h.isValidDocument()?n.push(this.Nr.addEntry(e,h)):this.Nr.removeEntry(o)})),be.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class Db{constructor(e){this.persistence=e,this.si=new il((n=>Q0(n)),Z0),this.lastRemoteSnapshotVersion=ut.min(),this.highestTargetId=0,this.oi=0,this._i=new ig,this.targetCount=0,this.ai=$l.ur()}forEachTarget(e,n){return this.si.forEach(((o,h)=>n(h))),be.resolve()}getLastRemoteSnapshotVersion(e){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return be.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.oi&&(this.oi=n),be.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new $l(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,be.resolve()}updateTargetData(e,n){return this.Pr(n),be.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,be.resolve()}removeTargets(e,n,o){let h=0;const m=[];return this.si.forEach(((_,v)=>{v.sequenceNumber<=n&&o.get(v.targetId)===null&&(this.si.delete(_),m.push(this.removeMatchingKeysForTargetId(e,v.targetId)),h++)})),be.waitFor(m).next((()=>h))}getTargetCount(e){return be.resolve(this.targetCount)}getTargetData(e,n){const o=this.si.get(n)||null;return be.resolve(o)}addMatchingKeys(e,n,o){return this._i.Wr(n,o),be.resolve()}removeMatchingKeys(e,n,o){this._i.zr(n,o);const h=this.persistence.referenceDelegate,m=[];return h&&n.forEach((_=>{m.push(h.markPotentiallyOrphaned(e,_))})),be.waitFor(m)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),be.resolve()}getMatchingKeysForTargetId(e,n){const o=this._i.Hr(n);return be.resolve(o)}containsKey(e,n){return be.resolve(this._i.containsKey(n))}}class xx{constructor(e,n){this.ui={},this.overlays={},this.ci=new bf(0),this.li=!1,this.li=!0,this.hi=new Ib,this.referenceDelegate=e(this),this.Pi=new Db(this),this.indexManager=new pb,this.remoteDocumentCache=(function(h){return new Nb(h)})((o=>this.referenceDelegate.Ti(o))),this.serializer=new gb(n),this.Ii=new Sb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new bb,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.ui[e.toKey()];return o||(o=new Rb(n,this.referenceDelegate),this.ui[e.toKey()]=o),o}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,o){ze("MemoryPersistence","Starting transaction:",e);const h=new Mb(this.ci.next());return this.referenceDelegate.Ei(),o(h).next((m=>this.referenceDelegate.di(h).next((()=>m)))).toPromise().then((m=>(h.raiseOnCommittedEvent(),m)))}Ai(e,n){return be.or(Object.values(this.ui).map((o=>()=>o.containsKey(e,n))))}}class Mb extends oS{constructor(e){super(),this.currentSequenceNumber=e}}class rg{constructor(e){this.persistence=e,this.Ri=new ig,this.Vi=null}static mi(e){return new rg(e)}get fi(){if(this.Vi)return this.Vi;throw at(60996)}addReference(e,n,o){return this.Ri.addReference(o,n),this.fi.delete(o.toString()),be.resolve()}removeReference(e,n,o){return this.Ri.removeReference(o,n),this.fi.add(o.toString()),be.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),be.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((h=>this.fi.add(h.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next((h=>{h.forEach((m=>this.fi.add(m.toString())))})).next((()=>o.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.fi,(o=>{const h=Qe.fromPath(o);return this.gi(e,h).next((m=>{m||n.removeEntry(h,ut.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((o=>{o?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return be.or([()=>be.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class ff{constructor(e,n){this.persistence=e,this.pi=new il((o=>uS(o.path)),((o,h)=>o.isEqual(h))),this.garbageCollector=wb(this,n)}static mi(e,n){return new ff(e,n)}Ei(){}di(e){return be.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>n.next((h=>o+h))))}wr(e){let n=0;return this.pr(e,(o=>{n++})).next((()=>n))}pr(e,n){return be.forEach(this.pi,((o,h)=>this.br(e,o,h).next((m=>m?be.resolve():n(h)))))}removeTargets(e,n,o){return this.persistence.getTargetCache().removeTargets(e,n,o)}removeOrphanedDocuments(e,n){let o=0;const h=this.persistence.getRemoteDocumentCache(),m=h.newChangeBuffer();return h.ii(e,(_=>this.br(e,_,n).next((v=>{v||(o++,m.removeEntry(_,ut.min()))})))).next((()=>m.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),be.resolve()}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,n,o){return this.pi.set(o,e.currentSequenceNumber),be.resolve()}removeReference(e,n,o){return this.pi.set(o,e.currentSequenceNumber),be.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),be.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Gh(e.data.value)),n}br(e,n,o){return be.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const h=this.pi.get(n);return be.resolve(h!==void 0&&h>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class sg{constructor(e,n,o,h){this.targetId=e,this.fromCache=n,this.Es=o,this.ds=h}static As(e,n){let o=Vt(),h=Vt();for(const m of n.docChanges)switch(m.type){case 0:o=o.add(m.doc.key);break;case 1:h=h.add(m.doc.key)}return new sg(e,n.fromCache,o,h)}}class Lb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Pb{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return hT()?8:lS(qi())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,o,h){const m={result:null};return this.ys(e,n).next((_=>{m.result=_})).next((()=>{if(!m.result)return this.ws(e,n,h,o).next((_=>{m.result=_}))})).next((()=>{if(m.result)return;const _=new Lb;return this.Ss(e,n,_).next((v=>{if(m.result=v,this.Vs)return this.bs(e,n,_,v.size)}))})).next((()=>m.result))}bs(e,n,o,h){return o.documentReadCount<this.fs?(kl()<=Bt.DEBUG&&ze("QueryEngine","SDK will not create cache indexes for query:",Vl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),be.resolve()):(kl()<=Bt.DEBUG&&ze("QueryEngine","Query:",Vl(n),"scans",o.documentReadCount,"local documents and returns",h,"documents as results."),o.documentReadCount>this.gs*h?(kl()<=Bt.DEBUG&&ze("QueryEngine","The SDK decides to create cache indexes for query:",Vl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ss(n))):be.resolve())}ys(e,n){if(ky(n))return be.resolve(null);let o=Ss(n);return this.indexManager.getIndexType(e,o).next((h=>h===0?null:(n.limit!==null&&h===1&&(n=p0(n,null,"F"),o=Ss(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next((m=>{const _=Vt(...m);return this.ps.getDocuments(e,_).next((v=>this.indexManager.getMinOffset(e,o).next((T=>{const A=this.Ds(n,v);return this.Cs(n,A,_,T.readTime)?this.ys(e,p0(n,null,"F")):this.vs(e,A,n,T)}))))})))))}ws(e,n,o,h){return ky(n)||h.isEqual(ut.min())?be.resolve(null):this.ps.getDocuments(e,o).next((m=>{const _=this.Ds(n,m);return this.Cs(n,_,o,h)?be.resolve(null):(kl()<=Bt.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",h.toString(),Vl(n)),this.vs(e,_,n,iS(h,au)).next((v=>v)))}))}Ds(e,n){let o=new li(J_(e));return n.forEach(((h,m)=>{Df(e,m)&&(o=o.add(m))})),o}Cs(e,n,o,h){if(e.limit===null)return!1;if(o.size!==n.size)return!0;const m=e.limitType==="F"?n.last():n.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(h)>0)}Ss(e,n,o){return kl()<=Bt.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",Vl(n)),this.ps.getDocumentsMatchingQuery(e,n,co.min(),o)}vs(e,n,o,h){return this.ps.getDocumentsMatchingQuery(e,o,h).next((m=>(n.forEach((_=>{m=m.insert(_.key,_)})),m)))}}const ag="LocalStore",Bb=3e8;class kb{constructor(e,n,o,h){this.persistence=e,this.Fs=n,this.serializer=h,this.Ms=new Pn(kt),this.xs=new il((m=>Q0(m)),Z0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(o)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vb(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Vb(a,e,n,o){return new kb(a,e,n,o)}async function Ax(a,e){const n=dt(a);return await n.persistence.runTransaction("Handle user change","readonly",(o=>{let h;return n.mutationQueue.getAllMutationBatches(o).next((m=>(h=m,n.Bs(e),n.mutationQueue.getAllMutationBatches(o)))).next((m=>{const _=[],v=[];let T=Vt();for(const A of h){_.push(A.batchId);for(const b of A.mutations)T=T.add(b.key)}for(const A of m){v.push(A.batchId);for(const b of A.mutations)T=T.add(b.key)}return n.localDocuments.getDocuments(o,T).next((A=>({Ls:A,removedBatchIds:_,addedBatchIds:v})))}))}))}function Ub(a,e){const n=dt(a);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const h=e.batch.keys(),m=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(v,T,A,b){const O=A.batch,V=O.keys();let j=be.resolve();return V.forEach((ee=>{j=j.next((()=>b.getEntry(T,ee))).next((re=>{const le=A.docVersions.get(ee);nn(le!==null,48541),re.version.compareTo(le)<0&&(O.applyToRemoteDocument(re,A),re.isValidDocument()&&(re.setReadTime(A.commitVersion),b.addEntry(re)))}))})),j.next((()=>v.mutationQueue.removeMutationBatch(T,O)))})(n,o,e,m).next((()=>m.apply(o))).next((()=>n.mutationQueue.performConsistencyCheck(o))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(o,h,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(v){let T=Vt();for(let A=0;A<v.mutationResults.length;++A)v.mutationResults[A].transformResults.length>0&&(T=T.add(v.batch.mutations[A].key));return T})(e)))).next((()=>n.localDocuments.getDocuments(o,h)))}))}function wx(a){const e=dt(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function Fb(a,e){const n=dt(a),o=e.snapshotVersion;let h=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(m=>{const _=n.Ns.newChangeBuffer({trackRemovals:!0});h=n.Ms;const v=[];e.targetChanges.forEach(((b,O)=>{const V=h.get(O);if(!V)return;v.push(n.Pi.removeMatchingKeys(m,b.removedDocuments,O).next((()=>n.Pi.addMatchingKeys(m,b.addedDocuments,O))));let j=V.withSequenceNumber(m.currentSequenceNumber);e.targetMismatches.get(O)!==null?j=j.withResumeToken(Mi.EMPTY_BYTE_STRING,ut.min()).withLastLimboFreeSnapshotVersion(ut.min()):b.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(b.resumeToken,o)),h=h.insert(O,j),(function(re,le,ke){return re.resumeToken.approximateByteSize()===0||le.snapshotVersion.toMicroseconds()-re.snapshotVersion.toMicroseconds()>=Bb?!0:ke.addedDocuments.size+ke.modifiedDocuments.size+ke.removedDocuments.size>0})(V,j,b)&&v.push(n.Pi.updateTargetData(m,j))}));let T=ma(),A=Vt();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&v.push(n.persistence.referenceDelegate.updateLimboDocument(m,b))})),v.push(zb(m,_,e.documentUpdates).next((b=>{T=b.ks,A=b.qs}))),!o.isEqual(ut.min())){const b=n.Pi.getLastRemoteSnapshotVersion(m).next((O=>n.Pi.setTargetsMetadata(m,m.currentSequenceNumber,o)));v.push(b)}return be.waitFor(v).next((()=>_.apply(m))).next((()=>n.localDocuments.getLocalViewOfDocuments(m,T,A))).next((()=>T))})).then((m=>(n.Ms=h,m)))}function zb(a,e,n){let o=Vt(),h=Vt();return n.forEach((m=>o=o.add(m))),e.getEntries(a,o).next((m=>{let _=ma();return n.forEach(((v,T)=>{const A=m.get(v);T.isFoundDocument()!==A.isFoundDocument()&&(h=h.add(v)),T.isNoDocument()&&T.version.isEqual(ut.min())?(e.removeEntry(v,T.readTime),_=_.insert(v,T)):!A.isValidDocument()||T.version.compareTo(A.version)>0||T.version.compareTo(A.version)===0&&A.hasPendingWrites?(e.addEntry(T),_=_.insert(v,T)):ze(ag,"Ignoring outdated watch update for ",v,". Current version:",A.version," Watch version:",T.version)})),{ks:_,qs:h}}))}function Hb(a,e){const n=dt(a);return n.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=Y0),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function jb(a,e){const n=dt(a);return n.persistence.runTransaction("Allocate target","readwrite",(o=>{let h;return n.Pi.getTargetData(o,e).next((m=>m?(h=m,be.resolve(h)):n.Pi.allocateTargetId(o).next((_=>(h=new no(e,_,"TargetPurposeListen",o.currentSequenceNumber),n.Pi.addTargetData(o,h).next((()=>h)))))))})).then((o=>{const h=n.Ms.get(o.targetId);return(h===null||o.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(o.targetId,o),n.xs.set(e,o.targetId)),o}))}async function A0(a,e,n){const o=dt(a),h=o.Ms.get(e),m=n?"readwrite":"readwrite-primary";try{n||await o.persistence.runTransaction("Release target",m,(_=>o.persistence.referenceDelegate.removeTarget(_,h)))}catch(_){if(!ac(_))throw _;ze(ag,`Failed to update sequence numbers for target ${e}: ${_}`)}o.Ms=o.Ms.remove(e),o.xs.delete(h.target)}function Qy(a,e,n){const o=dt(a);let h=ut.min(),m=Vt();return o.persistence.runTransaction("Execute query","readwrite",(_=>(function(T,A,b){const O=dt(T),V=O.xs.get(b);return V!==void 0?be.resolve(O.Ms.get(V)):O.Pi.getTargetData(A,b)})(o,_,Ss(e)).next((v=>{if(v)return h=v.lastLimboFreeSnapshotVersion,o.Pi.getMatchingKeysForTargetId(_,v.targetId).next((T=>{m=T}))})).next((()=>o.Fs.getDocumentsMatchingQuery(_,e,n?h:ut.min(),n?m:Vt()))).next((v=>(Gb(o,RS(e),v),{documents:v,Qs:m})))))}function Gb(a,e,n){let o=a.Os.get(e)||ut.min();n.forEach(((h,m)=>{m.readTime.compareTo(o)>0&&(o=m.readTime)})),a.Os.set(e,o)}class Zy{constructor(){this.activeTargetIds=PS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qb{constructor(){this.Mo=new Zy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,o){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Zy,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Xb{Oo(e){}shutdown(){}}const Jy="ConnectivityMonitor";class $y{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ze(Jy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ze(Jy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Ph=null;function w0(){return Ph===null?Ph=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ph++,"0x"+Ph.toString(16)}const W1="RestConnection",Yb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Wb{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),h=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${o}/databases/${h}`,this.Wo=this.databaseId.database===sf?`project_id=${o}`:`project_id=${o}&database_id=${h}`}Go(e,n,o,h,m){const _=w0(),v=this.zo(e,n.toUriEncodedString());ze(W1,`Sending RPC '${e}' ${_}:`,v,o);const T={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(T,h,m);const{host:A}=new URL(v),b=tc(A);return this.Jo(e,v,T,o,b).then((O=>(ze(W1,`Received RPC '${e}' ${_}: `,O),O)),(O=>{throw Kl(W1,`RPC '${e}' ${_} failed with error: `,O,"url: ",v,"request:",o),O}))}Ho(e,n,o,h,m,_){return this.Go(e,n,o,h,m)}jo(e,n,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+rc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((h,m)=>e[m]=h)),o&&o.headers.forEach(((h,m)=>e[m]=h))}zo(e,n){const o=Yb[e];return`${this.Uo}/v1/${n}:${o}`}terminate(){}}class Kb{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Hi="WebChannelConnection";class Qb extends Wb{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,o,h,m){const _=w0();return new Promise(((v,T)=>{const A=new v_;A.setWithCredentials(!0),A.listenOnce(S_.COMPLETE,(()=>{try{switch(A.getLastErrorCode()){case jh.NO_ERROR:const O=A.getResponseJson();ze(Hi,`XHR for RPC '${e}' ${_} received:`,JSON.stringify(O)),v(O);break;case jh.TIMEOUT:ze(Hi,`RPC '${e}' ${_} timed out`),T(new Ue(ve.DEADLINE_EXCEEDED,"Request time out"));break;case jh.HTTP_ERROR:const V=A.getStatus();if(ze(Hi,`RPC '${e}' ${_} failed with status:`,V,"response text:",A.getResponseText()),V>0){let j=A.getResponseJson();Array.isArray(j)&&(j=j[0]);const ee=j?.error;if(ee&&ee.status&&ee.message){const re=(function(ke){const Re=ke.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(Re)>=0?Re:ve.UNKNOWN})(ee.status);T(new Ue(re,ee.message))}else T(new Ue(ve.UNKNOWN,"Server responded with status "+A.getStatus()))}else T(new Ue(ve.UNAVAILABLE,"Connection failed."));break;default:at(9055,{l_:e,streamId:_,h_:A.getLastErrorCode(),P_:A.getLastError()})}}finally{ze(Hi,`RPC '${e}' ${_} completed.`)}}));const b=JSON.stringify(h);ze(Hi,`RPC '${e}' ${_} sending request:`,h),A.send(n,"POST",b,o,15)}))}T_(e,n,o){const h=w0(),m=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],_=R_(),v=I_(),T={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},A=this.longPollingOptions.timeoutSeconds;A!==void 0&&(T.longPollingTimeout=Math.round(1e3*A)),this.useFetchStreams&&(T.useFetchStreams=!0),this.jo(T.initMessageHeaders,n,o),T.encodeInitMessageHeaders=!0;const b=m.join("");ze(Hi,`Creating RPC '${e}' stream ${h}: ${b}`,T);const O=_.createWebChannel(b,T);this.I_(O);let V=!1,j=!1;const ee=new Kb({Yo:le=>{j?ze(Hi,`Not sending because RPC '${e}' stream ${h} is closed:`,le):(V||(ze(Hi,`Opening RPC '${e}' stream ${h} transport.`),O.open(),V=!0),ze(Hi,`RPC '${e}' stream ${h} sending:`,le),O.send(le))},Zo:()=>O.close()}),re=(le,ke,Re)=>{le.listen(ke,(ye=>{try{Re(ye)}catch(pe){setTimeout((()=>{throw pe}),0)}}))};return re(O,Xc.EventType.OPEN,(()=>{j||(ze(Hi,`RPC '${e}' stream ${h} transport opened.`),ee.o_())})),re(O,Xc.EventType.CLOSE,(()=>{j||(j=!0,ze(Hi,`RPC '${e}' stream ${h} transport closed`),ee.a_(),this.E_(O))})),re(O,Xc.EventType.ERROR,(le=>{j||(j=!0,Kl(Hi,`RPC '${e}' stream ${h} transport errored. Name:`,le.name,"Message:",le.message),ee.a_(new Ue(ve.UNAVAILABLE,"The operation could not be completed")))})),re(O,Xc.EventType.MESSAGE,(le=>{if(!j){const ke=le.data[0];nn(!!ke,16349);const Re=ke,ye=Re?.error||Re[0]?.error;if(ye){ze(Hi,`RPC '${e}' stream ${h} received error:`,ye);const pe=ye.status;let we=(function(F){const k=ei[F];if(k!==void 0)return cx(k)})(pe),Te=ye.message;we===void 0&&(we=ve.INTERNAL,Te="Unknown error status: "+pe+" with message "+ye.message),j=!0,ee.a_(new Ue(we,Te)),O.close()}else ze(Hi,`RPC '${e}' stream ${h} received:`,ke),ee.u_(ke)}})),re(v,b_.STAT_EVENT,(le=>{le.stat===c0.PROXY?ze(Hi,`RPC '${e}' stream ${h} detected buffering proxy`):le.stat===c0.NOPROXY&&ze(Hi,`RPC '${e}' stream ${h} detected no buffering proxy`)})),setTimeout((()=>{ee.__()}),0),ee}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function K1(){return typeof document<"u"?document:null}function Bf(a){return new eb(a,!0)}class Tx{constructor(e,n,o=1e3,h=1.5,m=6e4){this.Mi=e,this.timerId=n,this.d_=o,this.A_=h,this.R_=m,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),o=Math.max(0,Date.now()-this.f_),h=Math.max(0,n-o);h>0&&ze("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,h,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const eE="PersistentStream";class Cx{constructor(e,n,o,h,m,_,v,T){this.Mi=e,this.S_=o,this.b_=h,this.connection=m,this.authCredentialsProvider=_,this.appCheckCredentialsProvider=v,this.listener=T,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Tx(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ve.RESOURCE_EXHAUSTED?(ga(n.toString()),ga("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,h])=>{this.D_===n&&this.G_(o,h)}),(o=>{e((()=>{const h=new Ue(ve.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(h)}))}))}G_(e,n){const o=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{o((()=>this.listener.Xo()))})),this.stream.t_((()=>{o((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((h=>{o((()=>this.z_(h)))})),this.stream.onMessage((h=>{o((()=>++this.F_==1?this.J_(h):this.onNext(h)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ze(eE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ze(eE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Zb extends Cx{constructor(e,n,o,h,m,_){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,h,_),this.serializer=m}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=ib(this.serializer,e),o=(function(m){if(!("targetChange"in m))return ut.min();const _=m.targetChange;return _.targetIds&&_.targetIds.length?ut.min():_.readTime?bs(_.readTime):ut.min()})(e);return this.listener.H_(n,o)}Y_(e){const n={};n.database=x0(this.serializer),n.addTarget=(function(m,_){let v;const T=_.target;if(v=g0(T)?{documents:ab(m,T)}:{query:ob(m,T).ft},v.targetId=_.targetId,_.resumeToken.approximateByteSize()>0){v.resumeToken=fx(m,_.resumeToken);const A=y0(m,_.expectedCount);A!==null&&(v.expectedCount=A)}else if(_.snapshotVersion.compareTo(ut.min())>0){v.readTime=hf(m,_.snapshotVersion.toTimestamp());const A=y0(m,_.expectedCount);A!==null&&(v.expectedCount=A)}return v})(this.serializer,e);const o=cb(this.serializer,e);o&&(n.labels=o),this.q_(n)}Z_(e){const n={};n.database=x0(this.serializer),n.removeTarget=e,this.q_(n)}}class Jb extends Cx{constructor(e,n,o,h,m,_){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,h,_),this.serializer=m}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return nn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){nn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=sb(e.writeResults,e.commitTime),o=bs(e.commitTime);return this.listener.na(o,n)}ra(){const e={};e.database=x0(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((o=>rb(this.serializer,o)))};this.q_(n)}}class $b{}class eI extends $b{constructor(e,n,o,h){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=h,this.ia=!1}sa(){if(this.ia)throw new Ue(ve.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,o,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([m,_])=>this.connection.Go(e,E0(n,o),h,m,_))).catch((m=>{throw m.name==="FirebaseError"?(m.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new Ue(ve.UNKNOWN,m.toString())}))}Ho(e,n,o,h,m){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([_,v])=>this.connection.Ho(e,E0(n,o),h,_,v,m))).catch((_=>{throw _.name==="FirebaseError"?(_.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),_):new Ue(ve.UNKNOWN,_.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class tI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ga(n),this.aa=!1):ze("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const el="RemoteStore";class nI{constructor(e,n,o,h,m){this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=m,this.Aa.Oo((_=>{o.enqueueAndForget((async()=>{rl(this)&&(ze(el,"Restarting streams for network reachability change."),await(async function(T){const A=dt(T);A.Ea.add(4),await wu(A),A.Ra.set("Unknown"),A.Ea.delete(4),await kf(A)})(this))}))})),this.Ra=new tI(o,h)}}async function kf(a){if(rl(a))for(const e of a.da)await e(!0)}async function wu(a){for(const e of a.da)await e(!1)}function vx(a,e){const n=dt(a);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ug(n)?cg(n):oc(n).O_()&&lg(n,e))}function og(a,e){const n=dt(a),o=oc(n);n.Ia.delete(e),o.O_()&&Sx(n,e),n.Ia.size===0&&(o.O_()?o.L_():rl(n)&&n.Ra.set("Unknown"))}function lg(a,e){if(a.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ut.min())>0){const n=a.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}oc(a).Y_(e)}function Sx(a,e){a.Va.Ue(e),oc(a).Z_(e)}function cg(a){a.Va=new QS({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),At:e=>a.Ia.get(e)||null,ht:()=>a.datastore.serializer.databaseId}),oc(a).start(),a.Ra.ua()}function ug(a){return rl(a)&&!oc(a).x_()&&a.Ia.size>0}function rl(a){return dt(a).Ea.size===0}function bx(a){a.Va=void 0}async function iI(a){a.Ra.set("Online")}async function rI(a){a.Ia.forEach(((e,n)=>{lg(a,e)}))}async function sI(a,e){bx(a),ug(a)?(a.Ra.ha(e),cg(a)):a.Ra.set("Unknown")}async function aI(a,e,n){if(a.Ra.set("Online"),e instanceof hx&&e.state===2&&e.cause)try{await(async function(h,m){const _=m.cause;for(const v of m.targetIds)h.Ia.has(v)&&(await h.remoteSyncer.rejectListen(v,_),h.Ia.delete(v),h.Va.removeTarget(v))})(a,e)}catch(o){ze(el,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await df(a,o)}else if(e instanceof Yh?a.Va.Ze(e):e instanceof ux?a.Va.st(e):a.Va.tt(e),!n.isEqual(ut.min()))try{const o=await wx(a.localStore);n.compareTo(o)>=0&&await(function(m,_){const v=m.Va.Tt(_);return v.targetChanges.forEach(((T,A)=>{if(T.resumeToken.approximateByteSize()>0){const b=m.Ia.get(A);b&&m.Ia.set(A,b.withResumeToken(T.resumeToken,_))}})),v.targetMismatches.forEach(((T,A)=>{const b=m.Ia.get(T);if(!b)return;m.Ia.set(T,b.withResumeToken(Mi.EMPTY_BYTE_STRING,b.snapshotVersion)),Sx(m,T);const O=new no(b.target,T,A,b.sequenceNumber);lg(m,O)})),m.remoteSyncer.applyRemoteEvent(v)})(a,n)}catch(o){ze(el,"Failed to raise snapshot:",o),await df(a,o)}}async function df(a,e,n){if(!ac(e))throw e;a.Ea.add(1),await wu(a),a.Ra.set("Offline"),n||(n=()=>wx(a.localStore)),a.asyncQueue.enqueueRetryable((async()=>{ze(el,"Retrying IndexedDB access"),await n(),a.Ea.delete(1),await kf(a)}))}function Ix(a,e){return e().catch((n=>df(a,n,e)))}async function Vf(a){const e=dt(a),n=go(e);let o=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Y0;for(;oI(e);)try{const h=await Hb(e.localStore,o);if(h===null){e.Ta.length===0&&n.L_();break}o=h.batchId,lI(e,h)}catch(h){await df(e,h)}Rx(e)&&Nx(e)}function oI(a){return rl(a)&&a.Ta.length<10}function lI(a,e){a.Ta.push(e);const n=go(a);n.O_()&&n.X_&&n.ea(e.mutations)}function Rx(a){return rl(a)&&!go(a).x_()&&a.Ta.length>0}function Nx(a){go(a).start()}async function cI(a){go(a).ra()}async function uI(a){const e=go(a);for(const n of a.Ta)e.ea(n.mutations)}async function hI(a,e,n){const o=a.Ta.shift(),h=eg.from(o,e,n);await Ix(a,(()=>a.remoteSyncer.applySuccessfulWrite(h))),await Vf(a)}async function fI(a,e){e&&go(a).X_&&await(async function(o,h){if((function(_){return YS(_)&&_!==ve.ABORTED})(h.code)){const m=o.Ta.shift();go(o).B_(),await Ix(o,(()=>o.remoteSyncer.rejectFailedWrite(m.batchId,h))),await Vf(o)}})(a,e),Rx(a)&&Nx(a)}async function tE(a,e){const n=dt(a);n.asyncQueue.verifyOperationInProgress(),ze(el,"RemoteStore received new credentials");const o=rl(n);n.Ea.add(3),await wu(n),o&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await kf(n)}async function dI(a,e){const n=dt(a);e?(n.Ea.delete(2),await kf(n)):e||(n.Ea.add(2),await wu(n),n.Ra.set("Unknown"))}function oc(a){return a.ma||(a.ma=(function(n,o,h){const m=dt(n);return m.sa(),new Zb(o,m.connection,m.authCredentials,m.appCheckCredentials,m.serializer,h)})(a.datastore,a.asyncQueue,{Xo:iI.bind(null,a),t_:rI.bind(null,a),r_:sI.bind(null,a),H_:aI.bind(null,a)}),a.da.push((async e=>{e?(a.ma.B_(),ug(a)?cg(a):a.Ra.set("Unknown")):(await a.ma.stop(),bx(a))}))),a.ma}function go(a){return a.fa||(a.fa=(function(n,o,h){const m=dt(n);return m.sa(),new Jb(o,m.connection,m.authCredentials,m.appCheckCredentials,m.serializer,h)})(a.datastore,a.asyncQueue,{Xo:()=>Promise.resolve(),t_:cI.bind(null,a),r_:fI.bind(null,a),ta:uI.bind(null,a),na:hI.bind(null,a)}),a.da.push((async e=>{e?(a.fa.B_(),await Vf(a)):(await a.fa.stop(),a.Ta.length>0&&(ze(el,`Stopping write stream with ${a.Ta.length} pending writes`),a.Ta=[]))}))),a.fa}class hg{constructor(e,n,o,h,m){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=h,this.removalCallback=m,this.deferred=new ha,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((_=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,h,m){const _=Date.now()+o,v=new hg(e,n,_,h,m);return v.start(o),v}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ue(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fg(a,e){if(ga("AsyncQueue",`${e}: ${a}`),ac(a))return new Ue(ve.UNAVAILABLE,`${e}: ${a}`);throw a}class Yl{static emptySet(e){return new Yl(e.comparator)}constructor(e){this.comparator=e?(n,o)=>e(n,o)||Qe.comparator(n.key,o.key):(n,o)=>Qe.comparator(n.key,o.key),this.keyedMap=Yc(),this.sortedSet=new Pn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,o)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Yl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const h=n.getNext().key,m=o.getNext().key;if(!h.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const o=new Yl;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class nE{constructor(){this.ga=new Pn(Qe.comparator)}track(e){const n=e.doc.key,o=this.ga.get(n);o?e.type!==0&&o.type===3?this.ga=this.ga.insert(n,e):e.type===3&&o.type!==1?this.ga=this.ga.insert(n,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.ga=this.ga.remove(n):e.type===1&&o.type===2?this.ga=this.ga.insert(n,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):at(63341,{Rt:e,pa:o}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,o)=>{e.push(o)})),e}}class ec{constructor(e,n,o,h,m,_,v,T,A){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=h,this.mutatedKeys=m,this.fromCache=_,this.syncStateChanged=v,this.excludesMetadataChanges=T,this.hasCachedResults=A}static fromInitialDocuments(e,n,o,h,m){const _=[];return n.forEach((v=>{_.push({type:0,doc:v})})),new ec(e,n,Yl.emptySet(n),_,o,h,!0,!1,m)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Of(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let h=0;h<n.length;h++)if(n[h].type!==o[h].type||!n[h].doc.isEqual(o[h].doc))return!1;return!0}}class gI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class mI{constructor(){this.queries=iE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,o){const h=dt(n),m=h.queries;h.queries=iE(),m.forEach(((_,v)=>{for(const T of v.Sa)T.onError(o)}))})(this,new Ue(ve.ABORTED,"Firestore shutting down"))}}function iE(){return new il((a=>Z_(a)),Of)}async function dg(a,e){const n=dt(a);let o=3;const h=e.query;let m=n.queries.get(h);m?!m.ba()&&e.Da()&&(o=2):(m=new gI,o=e.Da()?0:1);try{switch(o){case 0:m.wa=await n.onListen(h,!0);break;case 1:m.wa=await n.onListen(h,!1);break;case 2:await n.onFirstRemoteStoreListen(h)}}catch(_){const v=fg(_,`Initialization of query '${Vl(e.query)}' failed`);return void e.onError(v)}n.queries.set(h,m),m.Sa.push(e),e.va(n.onlineState),m.wa&&e.Fa(m.wa)&&mg(n)}async function gg(a,e){const n=dt(a),o=e.query;let h=3;const m=n.queries.get(o);if(m){const _=m.Sa.indexOf(e);_>=0&&(m.Sa.splice(_,1),m.Sa.length===0?h=e.Da()?0:1:!m.ba()&&e.Da()&&(h=2))}switch(h){case 0:return n.queries.delete(o),n.onUnlisten(o,!0);case 1:return n.queries.delete(o),n.onUnlisten(o,!1);case 2:return n.onLastRemoteStoreUnlisten(o);default:return}}function pI(a,e){const n=dt(a);let o=!1;for(const h of e){const m=h.query,_=n.queries.get(m);if(_){for(const v of _.Sa)v.Fa(h)&&(o=!0);_.wa=h}}o&&mg(n)}function yI(a,e,n){const o=dt(a),h=o.queries.get(e);if(h)for(const m of h.Sa)m.onError(n);o.queries.delete(e)}function mg(a){a.Ca.forEach((e=>{e.next()}))}var T0,rE;(rE=T0||(T0={})).Ma="default",rE.Cache="cache";class pg{constructor(e,n,o){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(e){if(!this.options.includeMetadataChanges){const o=[];for(const h of e.docChanges)h.type!==3&&o.push(h);e=new ec(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const o=n!=="Offline";return(!this.options.qa||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ec.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==T0.Cache}}class Ox{constructor(e){this.key=e}}class Dx{constructor(e){this.key=e}}class EI{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Vt(),this.mutatedKeys=Vt(),this.eu=J_(e),this.tu=new Yl(this.eu)}get nu(){return this.Ya}ru(e,n){const o=n?n.iu:new nE,h=n?n.tu:this.tu;let m=n?n.mutatedKeys:this.mutatedKeys,_=h,v=!1;const T=this.query.limitType==="F"&&h.size===this.query.limit?h.last():null,A=this.query.limitType==="L"&&h.size===this.query.limit?h.first():null;if(e.inorderTraversal(((b,O)=>{const V=h.get(b),j=Df(this.query,O)?O:null,ee=!!V&&this.mutatedKeys.has(V.key),re=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let le=!1;V&&j?V.data.isEqual(j.data)?ee!==re&&(o.track({type:3,doc:j}),le=!0):this.su(V,j)||(o.track({type:2,doc:j}),le=!0,(T&&this.eu(j,T)>0||A&&this.eu(j,A)<0)&&(v=!0)):!V&&j?(o.track({type:0,doc:j}),le=!0):V&&!j&&(o.track({type:1,doc:V}),le=!0,(T||A)&&(v=!0)),le&&(j?(_=_.add(j),m=re?m.add(b):m.delete(b)):(_=_.delete(b),m=m.delete(b)))})),this.query.limit!==null)for(;_.size>this.query.limit;){const b=this.query.limitType==="F"?_.last():_.first();_=_.delete(b.key),m=m.delete(b.key),o.track({type:1,doc:b})}return{tu:_,iu:o,Cs:v,mutatedKeys:m}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o,h){const m=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const _=e.iu.ya();_.sort(((b,O)=>(function(j,ee){const re=le=>{switch(le){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at(20277,{Rt:le})}};return re(j)-re(ee)})(b.type,O.type)||this.eu(b.doc,O.doc))),this.ou(o),h=h??!1;const v=n&&!h?this._u():[],T=this.Xa.size===0&&this.current&&!h?1:0,A=T!==this.Za;return this.Za=T,_.length!==0||A?{snapshot:new ec(this.query,e.tu,m,_,e.mutatedKeys,T===0,A,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:v}:{au:v}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new nE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Vt(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Xa=this.Xa.add(o.key))}));const n=[];return e.forEach((o=>{this.Xa.has(o)||n.push(new Dx(o))})),this.Xa.forEach((o=>{e.has(o)||n.push(new Ox(o))})),n}cu(e){this.Ya=e.Qs,this.Xa=Vt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ec.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const yg="SyncEngine";class _I{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class xI{constructor(e){this.key=e,this.hu=!1}}class AI{constructor(e,n,o,h,m,_){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=h,this.currentUser=m,this.maxConcurrentLimboResolutions=_,this.Pu={},this.Tu=new il((v=>Z_(v)),Of),this.Iu=new Map,this.Eu=new Set,this.du=new Pn(Qe.comparator),this.Au=new Map,this.Ru=new ig,this.Vu={},this.mu=new Map,this.fu=$l.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function wI(a,e,n=!0){const o=Vx(a);let h;const m=o.Tu.get(e);return m?(o.sharedClientState.addLocalQueryTarget(m.targetId),h=m.view.lu()):h=await Mx(o,e,n,!0),h}async function TI(a,e){const n=Vx(a);await Mx(n,e,!0,!1)}async function Mx(a,e,n,o){const h=await jb(a.localStore,Ss(e)),m=h.targetId,_=a.sharedClientState.addLocalQueryTarget(m,n);let v;return o&&(v=await CI(a,e,m,_==="current",h.resumeToken)),a.isPrimaryClient&&n&&vx(a.remoteStore,h),v}async function CI(a,e,n,o,h){a.pu=(O,V,j)=>(async function(re,le,ke,Re){let ye=le.view.ru(ke);ye.Cs&&(ye=await Qy(re.localStore,le.query,!1).then((({documents:B})=>le.view.ru(B,ye))));const pe=Re&&Re.targetChanges.get(le.targetId),we=Re&&Re.targetMismatches.get(le.targetId)!=null,Te=le.view.applyChanges(ye,re.isPrimaryClient,pe,we);return aE(re,le.targetId,Te.au),Te.snapshot})(a,O,V,j);const m=await Qy(a.localStore,e,!0),_=new EI(e,m.Qs),v=_.ru(m.documents),T=Au.createSynthesizedTargetChangeForCurrentChange(n,o&&a.onlineState!=="Offline",h),A=_.applyChanges(v,a.isPrimaryClient,T);aE(a,n,A.au);const b=new _I(e,n,_);return a.Tu.set(e,b),a.Iu.has(n)?a.Iu.get(n).push(e):a.Iu.set(n,[e]),A.snapshot}async function vI(a,e,n){const o=dt(a),h=o.Tu.get(e),m=o.Iu.get(h.targetId);if(m.length>1)return o.Iu.set(h.targetId,m.filter((_=>!Of(_,e)))),void o.Tu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(h.targetId),o.sharedClientState.isActiveQueryTarget(h.targetId)||await A0(o.localStore,h.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(h.targetId),n&&og(o.remoteStore,h.targetId),C0(o,h.targetId)})).catch(sc)):(C0(o,h.targetId),await A0(o.localStore,h.targetId,!0))}async function SI(a,e){const n=dt(a),o=n.Tu.get(e),h=n.Iu.get(o.targetId);n.isPrimaryClient&&h.length===1&&(n.sharedClientState.removeLocalQueryTarget(o.targetId),og(n.remoteStore,o.targetId))}async function bI(a,e,n){const o=LI(a);try{const h=await(function(_,v){const T=dt(_),A=un.now(),b=v.reduce(((j,ee)=>j.add(ee.key)),Vt());let O,V;return T.persistence.runTransaction("Locally write mutations","readwrite",(j=>{let ee=ma(),re=Vt();return T.Ns.getEntries(j,b).next((le=>{ee=le,ee.forEach(((ke,Re)=>{Re.isValidDocument()||(re=re.add(ke))}))})).next((()=>T.localDocuments.getOverlayedDocuments(j,ee))).next((le=>{O=le;const ke=[];for(const Re of v){const ye=HS(Re,O.get(Re.key).overlayedDocument);ye!=null&&ke.push(new _o(Re.key,ye,j_(ye.value.mapValue),es.exists(!0)))}return T.mutationQueue.addMutationBatch(j,A,ke,v)})).next((le=>{V=le;const ke=le.applyToLocalDocumentSet(O,re);return T.documentOverlayCache.saveOverlays(j,le.batchId,ke)}))})).then((()=>({batchId:V.batchId,changes:ex(O)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(h.batchId),(function(_,v,T){let A=_.Vu[_.currentUser.toKey()];A||(A=new Pn(kt)),A=A.insert(v,T),_.Vu[_.currentUser.toKey()]=A})(o,h.batchId,n),await Tu(o,h.changes),await Vf(o.remoteStore)}catch(h){const m=fg(h,"Failed to persist write");n.reject(m)}}async function Lx(a,e){const n=dt(a);try{const o=await Fb(n.localStore,e);e.targetChanges.forEach(((h,m)=>{const _=n.Au.get(m);_&&(nn(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1,22616),h.addedDocuments.size>0?_.hu=!0:h.modifiedDocuments.size>0?nn(_.hu,14607):h.removedDocuments.size>0&&(nn(_.hu,42227),_.hu=!1))})),await Tu(n,o,e)}catch(o){await sc(o)}}function sE(a,e,n){const o=dt(a);if(o.isPrimaryClient&&n===0||!o.isPrimaryClient&&n===1){const h=[];o.Tu.forEach(((m,_)=>{const v=_.view.va(e);v.snapshot&&h.push(v.snapshot)})),(function(_,v){const T=dt(_);T.onlineState=v;let A=!1;T.queries.forEach(((b,O)=>{for(const V of O.Sa)V.va(v)&&(A=!0)})),A&&mg(T)})(o.eventManager,e),h.length&&o.Pu.H_(h),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function II(a,e,n){const o=dt(a);o.sharedClientState.updateQueryState(e,"rejected",n);const h=o.Au.get(e),m=h&&h.key;if(m){let _=new Pn(Qe.comparator);_=_.insert(m,Gi.newNoDocument(m,ut.min()));const v=Vt().add(m),T=new Pf(ut.min(),new Map,new Pn(kt),_,v);await Lx(o,T),o.du=o.du.remove(m),o.Au.delete(e),Eg(o)}else await A0(o.localStore,e,!1).then((()=>C0(o,e,n))).catch(sc)}async function RI(a,e){const n=dt(a),o=e.batch.batchId;try{const h=await Ub(n.localStore,e);Bx(n,o,null),Px(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),await Tu(n,h)}catch(h){await sc(h)}}async function NI(a,e,n){const o=dt(a);try{const h=await(function(_,v){const T=dt(_);return T.persistence.runTransaction("Reject batch","readwrite-primary",(A=>{let b;return T.mutationQueue.lookupMutationBatch(A,v).next((O=>(nn(O!==null,37113),b=O.keys(),T.mutationQueue.removeMutationBatch(A,O)))).next((()=>T.mutationQueue.performConsistencyCheck(A))).next((()=>T.documentOverlayCache.removeOverlaysForBatchId(A,b,v))).next((()=>T.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(A,b))).next((()=>T.localDocuments.getDocuments(A,b)))}))})(o.localStore,e);Bx(o,e,n),Px(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),await Tu(o,h)}catch(h){await sc(h)}}function Px(a,e){(a.mu.get(e)||[]).forEach((n=>{n.resolve()})),a.mu.delete(e)}function Bx(a,e,n){const o=dt(a);let h=o.Vu[o.currentUser.toKey()];if(h){const m=h.get(e);m&&(n?m.reject(n):m.resolve(),h=h.remove(e)),o.Vu[o.currentUser.toKey()]=h}}function C0(a,e,n=null){a.sharedClientState.removeLocalQueryTarget(e);for(const o of a.Iu.get(e))a.Tu.delete(o),n&&a.Pu.yu(o,n);a.Iu.delete(e),a.isPrimaryClient&&a.Ru.jr(e).forEach((o=>{a.Ru.containsKey(o)||kx(a,o)}))}function kx(a,e){a.Eu.delete(e.path.canonicalString());const n=a.du.get(e);n!==null&&(og(a.remoteStore,n),a.du=a.du.remove(e),a.Au.delete(n),Eg(a))}function aE(a,e,n){for(const o of n)o instanceof Ox?(a.Ru.addReference(o.key,e),OI(a,o)):o instanceof Dx?(ze(yg,"Document no longer in limbo: "+o.key),a.Ru.removeReference(o.key,e),a.Ru.containsKey(o.key)||kx(a,o.key)):at(19791,{wu:o})}function OI(a,e){const n=e.key,o=n.path.canonicalString();a.du.get(n)||a.Eu.has(o)||(ze(yg,"New document in limbo: "+n),a.Eu.add(o),Eg(a))}function Eg(a){for(;a.Eu.size>0&&a.du.size<a.maxConcurrentLimboResolutions;){const e=a.Eu.values().next().value;a.Eu.delete(e);const n=new Qe(pn.fromString(e)),o=a.fu.next();a.Au.set(o,new xI(n)),a.du=a.du.insert(n,o),vx(a.remoteStore,new no(Ss(Nf(n.path)),o,"TargetPurposeLimboResolution",bf.ce))}}async function Tu(a,e,n){const o=dt(a),h=[],m=[],_=[];o.Tu.isEmpty()||(o.Tu.forEach(((v,T)=>{_.push(o.pu(T,e,n).then((A=>{if((A||n)&&o.isPrimaryClient){const b=A?!A.fromCache:n?.targetChanges.get(T.targetId)?.current;o.sharedClientState.updateQueryState(T.targetId,b?"current":"not-current")}if(A){h.push(A);const b=sg.As(T.targetId,A);m.push(b)}})))})),await Promise.all(_),o.Pu.H_(h),await(async function(T,A){const b=dt(T);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(O=>be.forEach(A,(V=>be.forEach(V.Es,(j=>b.persistence.referenceDelegate.addReference(O,V.targetId,j))).next((()=>be.forEach(V.ds,(j=>b.persistence.referenceDelegate.removeReference(O,V.targetId,j)))))))))}catch(O){if(!ac(O))throw O;ze(ag,"Failed to update sequence numbers: "+O)}for(const O of A){const V=O.targetId;if(!O.fromCache){const j=b.Ms.get(V),ee=j.snapshotVersion,re=j.withLastLimboFreeSnapshotVersion(ee);b.Ms=b.Ms.insert(V,re)}}})(o.localStore,m))}async function DI(a,e){const n=dt(a);if(!n.currentUser.isEqual(e)){ze(yg,"User change. New user:",e.toKey());const o=await Ax(n.localStore,e);n.currentUser=e,(function(m,_){m.mu.forEach((v=>{v.forEach((T=>{T.reject(new Ue(ve.CANCELLED,_))}))})),m.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await Tu(n,o.Ls)}}function MI(a,e){const n=dt(a),o=n.Au.get(e);if(o&&o.hu)return Vt().add(o.key);{let h=Vt();const m=n.Iu.get(e);if(!m)return h;for(const _ of m){const v=n.Tu.get(_);h=h.unionWith(v.view.nu)}return h}}function Vx(a){const e=dt(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=Lx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=II.bind(null,e),e.Pu.H_=pI.bind(null,e.eventManager),e.Pu.yu=yI.bind(null,e.eventManager),e}function LI(a){const e=dt(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NI.bind(null,e),e}class gf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Vb(this.persistence,new Pb,e.initialUser,this.serializer)}Cu(e){return new xx(rg.mi,this.serializer)}Du(e){return new qb}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gf.provider={build:()=>new gf};class PI extends gf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){nn(this.persistence.referenceDelegate instanceof ff,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new xb(o,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ur.withCacheSize(this.cacheSizeBytes):ur.DEFAULT;return new xx((o=>ff.mi(o,n)),this.serializer)}}class v0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>sE(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=DI.bind(null,this.syncEngine),await dI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new mI})()}createDatastore(e){const n=Bf(e.databaseInfo.databaseId),o=(function(m){return new Qb(m)})(e.databaseInfo);return(function(m,_,v,T){return new eI(m,_,v,T)})(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return(function(o,h,m,_,v){return new nI(o,h,m,_,v)})(this.localStore,this.datastore,e.asyncQueue,(n=>sE(this.syncEngine,n,0)),(function(){return $y.v()?new $y:new Xb})())}createSyncEngine(e,n){return(function(h,m,_,v,T,A,b){const O=new AI(h,m,_,v,T,A);return b&&(O.gu=!0),O})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const o=dt(n);ze(el,"RemoteStore shutting down."),o.Ea.add(5),await wu(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}v0.provider={build:()=>new v0};class _g{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ga("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const mo="FirestoreClient";class BI{constructor(e,n,o,h,m){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=h,this.user=ji.UNAUTHENTICATED,this.clientId=X0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=m,this.authCredentials.start(o,(async _=>{ze(mo,"Received user=",_.uid),await this.authCredentialListener(_),this.user=_})),this.appCheckCredentials.start(o,(_=>(ze(mo,"Received new app check token=",_),this.appCheckCredentialListener(_,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ha;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const o=fg(n,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function Q1(a,e){a.asyncQueue.verifyOperationInProgress(),ze(mo,"Initializing OfflineComponentProvider");const n=a.configuration;await e.initialize(n);let o=n.initialUser;a.setCredentialChangeListener((async h=>{o.isEqual(h)||(await Ax(e.localStore,h),o=h)})),e.persistence.setDatabaseDeletedListener((()=>a.terminate())),a._offlineComponents=e}async function oE(a,e){a.asyncQueue.verifyOperationInProgress();const n=await kI(a);ze(mo,"Initializing OnlineComponentProvider"),await e.initialize(n,a.configuration),a.setCredentialChangeListener((o=>tE(e.remoteStore,o))),a.setAppCheckTokenChangeListener(((o,h)=>tE(e.remoteStore,h))),a._onlineComponents=e}async function kI(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){ze(mo,"Using user provided OfflineComponentProvider");try{await Q1(a,a._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(h){return h.name==="FirebaseError"?h.code===ve.FAILED_PRECONDITION||h.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&h instanceof DOMException)||h.code===22||h.code===20||h.code===11})(n))throw n;Kl("Error using user provided cache. Falling back to memory cache: "+n),await Q1(a,new gf)}}else ze(mo,"Using default OfflineComponentProvider"),await Q1(a,new PI(void 0));return a._offlineComponents}async function Ux(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(ze(mo,"Using user provided OnlineComponentProvider"),await oE(a,a._uninitializedComponentsProvider._online)):(ze(mo,"Using default OnlineComponentProvider"),await oE(a,new v0))),a._onlineComponents}function VI(a){return Ux(a).then((e=>e.syncEngine))}async function mf(a){const e=await Ux(a),n=e.eventManager;return n.onListen=wI.bind(null,e.syncEngine),n.onUnlisten=vI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=TI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=SI.bind(null,e.syncEngine),n}function UI(a,e,n={}){const o=new ha;return a.asyncQueue.enqueueAndForget((async()=>(function(m,_,v,T,A){const b=new _g({next:V=>{b.Nu(),_.enqueueAndForget((()=>gg(m,O)));const j=V.docs.has(v);!j&&V.fromCache?A.reject(new Ue(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&V.fromCache&&T&&T.source==="server"?A.reject(new Ue(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):A.resolve(V)},error:V=>A.reject(V)}),O=new pg(Nf(v.path),b,{includeMetadataChanges:!0,qa:!0});return dg(m,O)})(await mf(a),a.asyncQueue,e,n,o))),o.promise}function FI(a,e,n={}){const o=new ha;return a.asyncQueue.enqueueAndForget((async()=>(function(m,_,v,T,A){const b=new _g({next:V=>{b.Nu(),_.enqueueAndForget((()=>gg(m,O))),V.fromCache&&T.source==="server"?A.reject(new Ue(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):A.resolve(V)},error:V=>A.reject(V)}),O=new pg(v,b,{includeMetadataChanges:!0,qa:!0});return dg(m,O)})(await mf(a),a.asyncQueue,e,n,o))),o.promise}function Fx(a){const e={};return a.timeoutSeconds!==void 0&&(e.timeoutSeconds=a.timeoutSeconds),e}const lE=new Map;const zx="firestore.googleapis.com",cE=!0;class uE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ue(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zx,this.ssl=cE}else this.host=e.host,this.ssl=e.ssl??cE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_x;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Eb)throw new Ue(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Fx(e.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Ue(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Ue(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Ue(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,h){return o.timeoutSeconds===h.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uf{constructor(e,n,o,h){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=h,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ue(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ue(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new Xv;switch(o.type){case"firstParty":return new Qv(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new Ue(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const o=lE.get(n);o&&(ze("ComponentProvider","Removing Datastore"),lE.delete(n),o.terminate())})(this),Promise.resolve()}}function zI(a,e,n,o={}){a=fr(a,Uf);const h=tc(e),m=a._getSettings(),_={...m,emulatorOptions:a._getEmulatorOptions()},v=`${e}:${n}`;h&&(BE(`https://${v}`),kE("Firestore",!0)),m.host!==zx&&m.host!==v&&Kl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const T={...m,host:v,ssl:h,emulatorOptions:o};if(!Ko(T,_)&&(a._setSettings(T),o.mockUserToken)){let A,b;if(typeof o.mockUserToken=="string")A=o.mockUserToken,b=ji.MOCK_USER;else{A=nT(o.mockUserToken,a._app?.options.projectId);const O=o.mockUserToken.sub||o.mockUserToken.user_id;if(!O)throw new Ue(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new ji(O)}a._authCredentials=new Yv(new O_(A,b))}}class sl{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new sl(this.firestore,e,this._query)}}class Hn{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Hn(this.firestore,e,this._key)}toJSON(){return{type:Hn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,o){if(Eu(n,Hn._jsonSchema))return new Hn(e,o||null,new Qe(pn.fromString(n.referencePath)))}}Hn._jsonSchemaVersion="firestore/documentReference/1.0",Hn._jsonSchema={type:ii("string",Hn._jsonSchemaVersion),referencePath:ii("string")};class lo extends sl{constructor(e,n,o){super(e,n,Nf(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Hn(this.firestore,null,new Qe(e))}withConverter(e){return new lo(this.firestore,e,this._path)}}function $r(a,e,...n){if(a=ci(a),D_("collection","path",e),a instanceof Uf){const o=pn.fromString(e,...n);return Ty(o),new lo(a,null,o)}{if(!(a instanceof Hn||a instanceof lo))throw new Ue(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=a._path.child(pn.fromString(e,...n));return Ty(o),new lo(a.firestore,null,o)}}function Is(a,e,...n){if(a=ci(a),arguments.length===1&&(e=X0.newId()),D_("doc","path",e),a instanceof Uf){const o=pn.fromString(e,...n);return wy(o),new Hn(a,null,new Qe(o))}{if(!(a instanceof Hn||a instanceof lo))throw new Ue(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=a._path.child(pn.fromString(e,...n));return wy(o),new Hn(a.firestore,a instanceof lo?a.converter:null,new Qe(o))}}const hE="AsyncQueue";class fE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Tx(this,"async_queue_retry"),this._c=()=>{const o=K1();o&&ze(hE,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=e;const n=K1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=K1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ha;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ac(e))throw e;ze(hE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((o=>{throw this.nc=o,this.rc=!1,ga("INTERNAL UNHANDLED ERROR: ",dE(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=n,n}enqueueAfterDelay(e,n,o){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const h=hg.createAndSchedule(this,e,n,o,(m=>this.hc(m)));return this.tc.push(h),h}uc(){this.nc&&at(47125,{Pc:dE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,o)=>n.targetTimeMs-o.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function dE(a){let e=a.message||"";return a.stack&&(e=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),e}function gE(a){return(function(n,o){if(typeof n!="object"||n===null)return!1;const h=n;for(const m of o)if(m in h&&typeof h[m]=="function")return!0;return!1})(a,["next","error","complete"])}class pa extends Uf{constructor(e,n,o,h){super(e,n,o,h),this.type="firestore",this._queue=new fE,this._persistenceKey=h?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fE(e),this._firestoreClient=void 0,await e}}}function HI(a,e){const n=typeof a=="object"?a:zE(),o=typeof a=="string"?a:sf,h=B0(n,"firestore").getImmediate({identifier:o});if(!h._initialized){const m=eT("firestore");m&&zI(h,...m)}return h}function Ff(a){if(a._terminated)throw new Ue(ve.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||jI(a),a._firestoreClient}function jI(a){const e=a._freezeSettings(),n=(function(h,m,_,v){return new dS(h,m,_,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,Fx(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(a._databaseId,a._app?.options.appId||"",a._persistenceKey,e);a._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(a._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),a._firestoreClient=new BI(a._authCredentials,a._appCheckCredentials,a._queue,n,a._componentsProvider&&(function(h){const m=h?._online.build();return{_offline:h?._offline.build(m),_online:m}})(a._componentsProvider))}class Jr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jr(Mi.fromBase64String(e))}catch(n){throw new Ue(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Jr(Mi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Jr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Eu(e,Jr._jsonSchema))return Jr.fromBase64String(e.bytes)}}Jr._jsonSchemaVersion="firestore/bytes/1.0",Jr._jsonSchema={type:ii("string",Jr._jsonSchemaVersion),bytes:ii("string")};class zf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ue(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Di(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xg{constructor(e){this._methodName=e}}class Rs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ue(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ue(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return kt(this._lat,e._lat)||kt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Rs._jsonSchemaVersion}}static fromJSON(e){if(Eu(e,Rs._jsonSchema))return new Rs(e.latitude,e.longitude)}}Rs._jsonSchemaVersion="firestore/geoPoint/1.0",Rs._jsonSchema={type:ii("string",Rs._jsonSchemaVersion),latitude:ii("number"),longitude:ii("number")};class Ns{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,h){if(o.length!==h.length)return!1;for(let m=0;m<o.length;++m)if(o[m]!==h[m])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ns._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Eu(e,Ns._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ns(e.vectorValues);throw new Ue(ve.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ns._jsonSchemaVersion="firestore/vectorValue/1.0",Ns._jsonSchema={type:ii("string",Ns._jsonSchemaVersion),vectorValues:ii("object")};const GI=/^__.*__$/;class qI{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return this.fieldMask!==null?new _o(e,this.data,this.fieldMask,n,this.fieldTransforms):new xu(e,this.data,n,this.fieldTransforms)}}class Hx{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new _o(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function jx(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at(40011,{Ac:a})}}class Ag{constructor(e,n,o,h,m,_){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=h,m===void 0&&this.Rc(),this.fieldTransforms=m||[],this.fieldMask=_||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ag({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),o=this.Vc({path:n,fc:!1});return o.gc(e),o}yc(e){const n=this.path?.child(e),o=this.Vc({path:n,fc:!1});return o.Rc(),o}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return pf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(jx(this.Ac)&&GI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class XI{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||Bf(e)}Cc(e,n,o,h=!1){return new Ag({Ac:e,methodName:n,Dc:o,path:Di.emptyPath(),fc:!1,bc:h},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hf(a){const e=a._freezeSettings(),n=Bf(a._databaseId);return new XI(a._databaseId,!!e.ignoreUndefinedProperties,n)}function Gx(a,e,n,o,h,m={}){const _=a.Cc(m.merge||m.mergeFields?2:0,e,n,h);wg("Data must be an object, but it was:",_,o);const v=qx(o,_);let T,A;if(m.merge)T=new Dr(_.fieldMask),A=_.fieldTransforms;else if(m.mergeFields){const b=[];for(const O of m.mergeFields){const V=S0(e,O,n);if(!_.contains(V))throw new Ue(ve.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);Yx(b,V)||b.push(V)}T=new Dr(b),A=_.fieldTransforms.filter((O=>T.covers(O.field)))}else T=null,A=_.fieldTransforms;return new qI(new hr(v),T,A)}class jf extends xg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jf}}function YI(a,e,n,o){const h=a.Cc(1,e,n);wg("Data must be an object, but it was:",h,o);const m=[],_=hr.empty();Eo(o,((T,A)=>{const b=Tg(e,T,n);A=ci(A);const O=h.yc(b);if(A instanceof jf)m.push(b);else{const V=Cu(A,O);V!=null&&(m.push(b),_.set(b,V))}}));const v=new Dr(m);return new Hx(_,v,h.fieldTransforms)}function WI(a,e,n,o,h,m){const _=a.Cc(1,e,n),v=[S0(e,o,n)],T=[h];if(m.length%2!=0)throw new Ue(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<m.length;V+=2)v.push(S0(e,m[V])),T.push(m[V+1]);const A=[],b=hr.empty();for(let V=v.length-1;V>=0;--V)if(!Yx(A,v[V])){const j=v[V];let ee=T[V];ee=ci(ee);const re=_.yc(j);if(ee instanceof jf)A.push(j);else{const le=Cu(ee,re);le!=null&&(A.push(j),b.set(j,le))}}const O=new Dr(A);return new Hx(b,O,_.fieldTransforms)}function KI(a,e,n,o=!1){return Cu(n,a.Cc(o?4:3,e))}function Cu(a,e){if(Xx(a=ci(a)))return wg("Unsupported field value:",e,a),qx(a,e);if(a instanceof xg)return(function(o,h){if(!jx(h.Ac))throw h.Sc(`${o._methodName}() can only be used with update() and set()`);if(!h.path)throw h.Sc(`${o._methodName}() is not currently supported inside arrays`);const m=o._toFieldTransform(h);m&&h.fieldTransforms.push(m)})(a,e),null;if(a===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(o,h){const m=[];let _=0;for(const v of o){let T=Cu(v,h.wc(_));T==null&&(T={nullValue:"NULL_VALUE"}),m.push(T),_++}return{arrayValue:{values:m}}})(a,e)}return(function(o,h){if((o=ci(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return BS(h.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const m=un.fromDate(o);return{timestampValue:hf(h.serializer,m)}}if(o instanceof un){const m=new un(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:hf(h.serializer,m)}}if(o instanceof Rs)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Jr)return{bytesValue:fx(h.serializer,o._byteString)};if(o instanceof Hn){const m=h.databaseId,_=o.firestore._databaseId;if(!_.isEqual(m))throw h.Sc(`Document reference is for database ${_.projectId}/${_.database} but should be for database ${m.projectId}/${m.database}`);return{referenceValue:ng(o.firestore._databaseId||h.databaseId,o._key.path)}}if(o instanceof Ns)return(function(_,v){return{mapValue:{fields:{[z_]:{stringValue:H_},[af]:{arrayValue:{values:_.toArray().map((A=>{if(typeof A!="number")throw v.Sc("VectorValues must only contain numeric values.");return J0(v.serializer,A)}))}}}}}})(o,h);throw h.Sc(`Unsupported field value: ${Sf(o)}`)})(a,e)}function qx(a,e){const n={};return P_(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Eo(a,((o,h)=>{const m=Cu(h,e.mc(o));m!=null&&(n[o]=m)})),{mapValue:{fields:n}}}function Xx(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof un||a instanceof Rs||a instanceof Jr||a instanceof Hn||a instanceof xg||a instanceof Ns)}function wg(a,e,n){if(!Xx(n)||!M_(n)){const o=Sf(n);throw o==="an object"?e.Sc(a+" a custom object"):e.Sc(a+" "+o)}}function S0(a,e,n){if((e=ci(e))instanceof zf)return e._internalPath;if(typeof e=="string")return Tg(a,e);throw pf("Field path arguments must be of type string or ",a,!1,void 0,n)}const QI=new RegExp("[~\\*/\\[\\]]");function Tg(a,e,n){if(e.search(QI)>=0)throw pf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,n);try{return new zf(...e.split("."))._internalPath}catch{throw pf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,n)}}function pf(a,e,n,o,h){const m=o&&!o.isEmpty(),_=h!==void 0;let v=`Function ${e}() called with invalid data`;n&&(v+=" (via `toFirestore()`)"),v+=". ";let T="";return(m||_)&&(T+=" (found",m&&(T+=` in field ${o}`),_&&(T+=` in document ${h}`),T+=")"),new Ue(ve.INVALID_ARGUMENT,v+a+T)}function Yx(a,e){return a.some((n=>n.isEqual(e)))}class Wx{constructor(e,n,o,h,m){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=h,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new Hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Cg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ZI extends Wx{data(){return super.data()}}function Cg(a,e){return typeof e=="string"?Tg(a,e):e instanceof zf?e._internalPath:e._delegate._internalPath}function Kx(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new Ue(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vg{}class JI extends vg{}function Bh(a,e,...n){let o=[];e instanceof vg&&o.push(e),o=o.concat(n),(function(m){const _=m.filter((T=>T instanceof Sg)).length,v=m.filter((T=>T instanceof Gf)).length;if(_>1||_>0&&v>0)throw new Ue(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const h of o)a=h._apply(a);return a}class Gf extends JI{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new Gf(e,n,o)}_apply(e){const n=this._parse(e);return Qx(e._query,n),new sl(e.firestore,e.converter,m0(e._query,n))}_parse(e){const n=Hf(e.firestore);return(function(m,_,v,T,A,b,O){let V;if(A.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new Ue(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){pE(O,b);const ee=[];for(const re of O)ee.push(mE(T,m,re));V={arrayValue:{values:ee}}}else V=mE(T,m,O)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||pE(O,b),V=KI(v,_,O,b==="in"||b==="not-in");return ni.create(A,b,V)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function kh(a,e,n){const o=e,h=Cg("where",a);return Gf._create(h,o,n)}class Sg extends vg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Sg(e,n)}_parse(e){const n=this._queryConstraints.map((o=>o._parse(e))).filter((o=>o.getFilters().length>0));return n.length===1?n[0]:fs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(h,m){let _=h;const v=m.getFlattenedFilters();for(const T of v)Qx(_,T),_=m0(_,T)})(e._query,n),new sl(e.firestore,e.converter,m0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function mE(a,e,n){if(typeof(n=ci(n))=="string"){if(n==="")throw new Ue(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Q_(e)&&n.indexOf("/")!==-1)throw new Ue(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(pn.fromString(n));if(!Qe.isDocumentKey(o))throw new Ue(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Oy(a,new Qe(o))}if(n instanceof Hn)return Oy(a,n._key);throw new Ue(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sf(n)}.`)}function pE(a,e){if(!Array.isArray(a)||a.length===0)throw new Ue(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Qx(a,e){const n=(function(h,m){for(const _ of h)for(const v of _.getFlattenedFilters())if(m.indexOf(v.op)>=0)return v.op;return null})(a.filters,(function(h){switch(h){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ue(ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ue(ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class $I{convertValue(e,n="none"){switch(fo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ho(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw at(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return Eo(e,((h,m)=>{o[h]=this.convertValue(m,n)})),o}convertVectorValue(e){const n=e.fields?.[af].arrayValue?.values?.map((o=>Wn(o.doubleValue)));return new Ns(n)}convertGeoPoint(e){return new Rs(Wn(e.latitude),Wn(e.longitude))}convertArray(e,n){return(e.values||[]).map((o=>this.convertValue(o,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const o=Rf(e);return o==null?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(ou(e));default:return null}}convertTimestamp(e){const n=uo(e);return new un(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=pn.fromString(e);nn(Ex(o),9688,{name:e});const h=new lu(o.get(1),o.get(3)),m=new Qe(o.popFirst(5));return h.isEqual(n)||ga(`Document ${m} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),m}}function Zx(a,e,n){let o;return o=a?a.toFirestore(e):e,o}class Kc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yo extends Wx{constructor(e,n,o,h,m,_){super(e,n,o,h,_),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(Cg("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ue(ve.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Yo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Yo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Yo._jsonSchema={type:ii("string",Yo._jsonSchemaVersion),bundleSource:ii("string","DocumentSnapshot"),bundleName:ii("string"),bundle:ii("string")};class Wh extends Yo{data(e={}){return super.data(e)}}class Wo{constructor(e,n,o,h){this._firestore=e,this._userDataWriter=n,this._snapshot=h,this.metadata=new Kc(h.hasPendingWrites,h.fromCache),this.query=o}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((o=>{e.call(n,new Wh(this._firestore,this._userDataWriter,o.key,o,new Kc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ue(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(h,m){if(h._snapshot.oldDocs.isEmpty()){let _=0;return h._snapshot.docChanges.map((v=>{const T=new Wh(h._firestore,h._userDataWriter,v.doc.key,v.doc,new Kc(h._snapshot.mutatedKeys.has(v.doc.key),h._snapshot.fromCache),h.query.converter);return v.doc,{type:"added",doc:T,oldIndex:-1,newIndex:_++}}))}{let _=h._snapshot.oldDocs;return h._snapshot.docChanges.filter((v=>m||v.type!==3)).map((v=>{const T=new Wh(h._firestore,h._userDataWriter,v.doc.key,v.doc,new Kc(h._snapshot.mutatedKeys.has(v.doc.key),h._snapshot.fromCache),h.query.converter);let A=-1,b=-1;return v.type!==0&&(A=_.indexOf(v.doc.key),_=_.delete(v.doc.key)),v.type!==1&&(_=_.add(v.doc),b=_.indexOf(v.doc.key)),{type:e4(v.type),doc:T,oldIndex:A,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ue(ve.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Wo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=X0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],o=[],h=[];return this.docs.forEach((m=>{m._document!==null&&(n.push(m._document),o.push(this._userDataWriter.convertObjectMap(m._document.data.value.mapValue.fields,"previous")),h.push(m.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function e4(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at(61501,{type:a})}}function b0(a){a=fr(a,Hn);const e=fr(a.firestore,pa);return UI(Ff(e),a._key).then((n=>$x(e,a,n)))}Wo._jsonSchemaVersion="firestore/querySnapshot/1.0",Wo._jsonSchema={type:ii("string",Wo._jsonSchemaVersion),bundleSource:ii("string","QuerySnapshot"),bundleName:ii("string"),bundle:ii("string")};class bg extends $I{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Hn(this.firestore,null,n)}}function io(a){a=fr(a,sl);const e=fr(a.firestore,pa),n=Ff(e),o=new bg(e);return Kx(a._query),FI(n,a._query).then((h=>new Wo(e,o,a,h)))}function Jx(a,e,n){a=fr(a,Hn);const o=fr(a.firestore,pa),h=Zx(a.converter,e);return qf(o,[Gx(Hf(o),"setDoc",a._key,h,a.converter!==null,n).toMutation(a._key,es.none())])}function yf(a,e,n,...o){a=fr(a,Hn);const h=fr(a.firestore,pa),m=Hf(h);let _;return _=typeof(e=ci(e))=="string"||e instanceof zf?WI(m,"updateDoc",a._key,e,n,o):YI(m,"updateDoc",a._key,e),qf(h,[_.toMutation(a._key,es.exists(!0))])}function yE(a){return qf(fr(a.firestore,pa),[new $0(a._key,es.none())])}function I0(a,e){const n=fr(a.firestore,pa),o=Is(a),h=Zx(a.converter,e);return qf(n,[Gx(Hf(a.firestore),"addDoc",o._key,h,a.converter!==null,{}).toMutation(o._key,es.exists(!1))]).then((()=>o))}function t4(a,...e){a=ci(a);let n={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||gE(e[o])||(n=e[o++]);const h={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(gE(e[o])){const T=e[o];e[o]=T.next?.bind(T),e[o+1]=T.error?.bind(T),e[o+2]=T.complete?.bind(T)}let m,_,v;if(a instanceof Hn)_=fr(a.firestore,pa),v=Nf(a._key.path),m={next:T=>{e[o]&&e[o]($x(_,a,T))},error:e[o+1],complete:e[o+2]};else{const T=fr(a,sl);_=fr(T.firestore,pa),v=T._query;const A=new bg(_);m={next:b=>{e[o]&&e[o](new Wo(_,A,T,b))},error:e[o+1],complete:e[o+2]},Kx(a._query)}return(function(A,b,O,V){const j=new _g(V),ee=new pg(b,j,O);return A.asyncQueue.enqueueAndForget((async()=>dg(await mf(A),ee))),()=>{j.Nu(),A.asyncQueue.enqueueAndForget((async()=>gg(await mf(A),ee)))}})(Ff(_),v,h,m)}function qf(a,e){return(function(o,h){const m=new ha;return o.asyncQueue.enqueueAndForget((async()=>bI(await VI(o),h,m))),m.promise})(Ff(a),e)}function $x(a,e,n){const o=n.docs.get(e._key),h=new bg(a);return new Yo(a,h,e._key,o,new Kc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(h){rc=h})(nc),Wl(new Qo("firestore",((o,{instanceIdentifier:h,options:m})=>{const _=o.getProvider("app").getImmediate(),v=new pa(new Wv(o.getProvider("auth-internal")),new Zv(_,o.getProvider("app-check-internal")),(function(A,b){if(!Object.prototype.hasOwnProperty.apply(A.options,["projectId"]))throw new Ue(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lu(A.options.projectId,b)})(_,h),_);return m={useFetchStreams:n,...m},v._setSettings(m),v}),"PUBLIC").setMultipleInstances(!0)),ao(Ey,_y,e),ao(Ey,_y,"esm2020")})();const n4={apiKey:"AIzaSyARwb6K0M4l-hWKi8FrOLEVqRqeHRf8JR4",authDomain:"oppmoteboka.firebaseapp.com",projectId:"oppmoteboka",storageBucket:"oppmoteboka.firebasestorage.app",messagingSenderId:"732911922070",appId:"1:732911922070:web:b16d9de65062395c018bb7"},eA=FE(n4),Vh=Gv(eA),Kn=HI(eA);function i4(){const[a,e]=yt.useState(null),[n,o]=yt.useState(!0);return yt.useEffect(()=>{const v=DC(Vh,async T=>{if(!T){e(null),o(!1);return}const A=Is(Kn,"users",T.uid),b=await b0(A);if(b.exists()){const O=b.data(),V={uid:T.uid,email:T.email,displayName:T.displayName??T.email,role:O.role??"student",term:O.term??null,semesterStatus:O.semesterStatus??"aktiv"};e(V)}else{const O={uid:T.uid,email:T.email,displayName:T.email,role:"student",term:null,semesterStatus:"aktiv"};await Jx(A,O),e(O)}o(!1)});return()=>v()},[]),{user:a,loading:n,login:async(v,T)=>{await RC(Vh,v,T)},register:async(v,T)=>{await IC(Vh,v,T)},logout:async()=>{await MC(Vh)}}}var He;(function(a){a[a.QR_CODE=0]="QR_CODE",a[a.AZTEC=1]="AZTEC",a[a.CODABAR=2]="CODABAR",a[a.CODE_39=3]="CODE_39",a[a.CODE_93=4]="CODE_93",a[a.CODE_128=5]="CODE_128",a[a.DATA_MATRIX=6]="DATA_MATRIX",a[a.MAXICODE=7]="MAXICODE",a[a.ITF=8]="ITF",a[a.EAN_13=9]="EAN_13",a[a.EAN_8=10]="EAN_8",a[a.PDF_417=11]="PDF_417",a[a.RSS_14=12]="RSS_14",a[a.RSS_EXPANDED=13]="RSS_EXPANDED",a[a.UPC_A=14]="UPC_A",a[a.UPC_E=15]="UPC_E",a[a.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(He||(He={}));var EE=new Map([[He.QR_CODE,"QR_CODE"],[He.AZTEC,"AZTEC"],[He.CODABAR,"CODABAR"],[He.CODE_39,"CODE_39"],[He.CODE_93,"CODE_93"],[He.CODE_128,"CODE_128"],[He.DATA_MATRIX,"DATA_MATRIX"],[He.MAXICODE,"MAXICODE"],[He.ITF,"ITF"],[He.EAN_13,"EAN_13"],[He.EAN_8,"EAN_8"],[He.PDF_417,"PDF_417"],[He.RSS_14,"RSS_14"],[He.RSS_EXPANDED,"RSS_EXPANDED"],[He.UPC_A,"UPC_A"],[He.UPC_E,"UPC_E"],[He.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),_E;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.URL=1]="URL"})(_E||(_E={}));function r4(a){return Object.values(He).includes(a)}var Ef;(function(a){a[a.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",a[a.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Ef||(Ef={}));var s4=(function(){function a(){}return a.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",a.SCAN_DEFAULT_FPS=2,a.DEFAULT_DISABLE_FLIP=!1,a.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,a.DEFAULT_SUPPORTED_SCAN_TYPE=[Ef.SCAN_TYPE_CAMERA,Ef.SCAN_TYPE_FILE],a})(),tA=(function(){function a(e,n){this.format=e,this.formatName=n}return a.prototype.toString=function(){return this.formatName},a.create=function(e){if(!EE.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new a(e,EE.get(e))},a})(),xE=(function(){function a(){}return a.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},a.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},a})(),R0;(function(a){a[a.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",a[a.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",a[a.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(R0||(R0={}));var a4=(function(){function a(){}return a.createFrom=function(e){return{errorMessage:e,type:R0.UNKWOWN_ERROR}},a})(),o4=(function(){function a(e){this.verbose=e}return a.prototype.log=function(e){this.verbose&&console.log(e)},a.prototype.warn=function(e){this.verbose&&console.warn(e)},a.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},a.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},a})();function oa(a){return typeof a>"u"||a===null}var Hl=(function(){function a(){}return a.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},a.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},a.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},a.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},a.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},a.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},a.scannerPaused=function(){return"Scanner paused"},a})(),nA=(function(){function a(){}return a.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var o=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(o,"."),!0),!1}for(var h=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],m=new Set(h),_=Object.keys(e),v=0,T=_;v<T.length;v++){var A=T[v];if(m.has(A))return n.logError("".concat(A," is not supported videoConstaints."),!0),!1}return!0},a})(),Qc={exports:{}},l4=Qc.exports,AE;function c4(){return AE||(AE=1,(function(a,e){(function(n,o){o(e)})(l4,(function(n){function o(D){return D==null}var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,i){D.__proto__=i}||function(D,i){for(var s in i)i.hasOwnProperty(s)&&(D[s]=i[s])};function m(D,i){h(D,i);function s(){this.constructor=D}D.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}function _(D,i){var s=Object.setPrototypeOf;s?s(D,i):D.__proto__=i}function v(D,i){i===void 0&&(i=D.constructor);var s=Error.captureStackTrace;s&&s(D,i)}var T=(function(D){m(i,D);function i(s){var l=this.constructor,u=D.call(this,s)||this;return Object.defineProperty(u,"name",{value:l.name,enumerable:!1}),_(u,l.prototype),v(u),u}return i})(Error);class A extends T{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}A.kind="Exception";class b extends A{}b.kind="ArgumentException";class O extends A{}O.kind="IllegalArgumentException";class V{constructor(i){if(this.binarizer=i,i===null)throw new O("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,s){return this.binarizer.getBlackRow(i,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,s,l,u){const f=this.binarizer.getLuminanceSource().crop(i,s,l,u);return new V(this.binarizer.createBinarizer(f))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new V(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new V(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class j extends A{static getChecksumInstance(){return new j}}j.kind="ChecksumException";class ee{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class re{static arraycopy(i,s,l,u,f){for(;f--;)l[u++]=i[s++]}static currentTimeMillis(){return Date.now()}}class le extends A{}le.kind="IndexOutOfBoundsException";class ke extends le{constructor(i=void 0,s=void 0){super(s),this.index=i,this.message=s}}ke.kind="ArrayIndexOutOfBoundsException";class Re{static fill(i,s){for(let l=0,u=i.length;l<u;l++)i[l]=s}static fillWithin(i,s,l,u){Re.rangeCheck(i.length,s,l);for(let f=s;f<l;f++)i[f]=u}static rangeCheck(i,s,l){if(s>l)throw new O("fromIndex("+s+") > toIndex("+l+")");if(s<0)throw new ke(s);if(l>i)throw new ke(l)}static asList(...i){return i}static create(i,s,l){return Array.from({length:i}).map(f=>Array.from({length:s}).fill(l))}static createInt32Array(i,s,l){return Array.from({length:i}).map(f=>Int32Array.from({length:s}).fill(l))}static equals(i,s){if(!i||!s||!i.length||!s.length||i.length!==s.length)return!1;for(let l=0,u=i.length;l<u;l++)if(i[l]!==s[l])return!1;return!0}static hashCode(i){if(i===null)return 0;let s=1;for(const l of i)s=31*s+l;return s}static fillUint8Array(i,s){for(let l=0;l!==i.length;l++)i[l]=s}static copyOf(i,s){return i.slice(0,s)}static copyOfUint8Array(i,s){if(i.length<=s){const l=new Uint8Array(s);return l.set(i),l}return i.slice(0,s)}static copyOfRange(i,s,l){const u=l-s,f=new Int32Array(u);return re.arraycopy(i,s,f,0,u),f}static binarySearch(i,s,l){l===void 0&&(l=Re.numberComparator);let u=0,f=i.length-1;for(;u<=f;){const g=f+u>>1,y=l(s,i[g]);if(y>0)u=g+1;else if(y<0)f=g-1;else return g}return-u-1}static numberComparator(i,s){return i-s}}class ye{static numberOfTrailingZeros(i){let s;if(i===0)return 32;let l=31;return s=i<<16,s!==0&&(l-=16,i=s),s=i<<8,s!==0&&(l-=8,i=s),s=i<<4,s!==0&&(l-=4,i=s),s=i<<2,s!==0&&(l-=2,i=s),l-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let s=1;return i>>>16||(s+=16,i<<=16),i>>>24||(s+=8,i<<=8),i>>>28||(s+=4,i<<=4),i>>>30||(s+=2,i<<=2),s-=i>>>31,s}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,s){return Math.trunc(i/s)}static parseInt(i,s=void 0){return parseInt(i,s)}}ye.MIN_VALUE_32_BITS=-2147483648,ye.MAX_VALUE=Number.MAX_SAFE_INTEGER;class pe{constructor(i,s){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,s==null?this.bits=pe.makeArray(i):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const s=pe.makeArray(i);re.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const s=this.size;if(i>=s)return s;const l=this.bits;let u=Math.floor(i/32),f=l[u];f&=~((1<<(i&31))-1);const g=l.length;for(;f===0;){if(++u===g)return s;f=l[u]}const y=u*32+ye.numberOfTrailingZeros(f);return y>s?s:y}getNextUnset(i){const s=this.size;if(i>=s)return s;const l=this.bits;let u=Math.floor(i/32),f=~l[u];f&=~((1<<(i&31))-1);const g=l.length;for(;f===0;){if(++u===g)return s;f=~l[u]}const y=u*32+ye.numberOfTrailingZeros(f);return y>s?s:y}setBulk(i,s){this.bits[Math.floor(i/32)]=s}setRange(i,s){if(s<i||i<0||s>this.size)throw new O;if(s===i)return;s--;const l=Math.floor(i/32),u=Math.floor(s/32),f=this.bits;for(let g=l;g<=u;g++){const y=g>l?0:i&31,C=(2<<(g<u?31:s&31))-(1<<y);f[g]|=C}}clear(){const i=this.bits.length,s=this.bits;for(let l=0;l<i;l++)s[l]=0}isRange(i,s,l){if(s<i||i<0||s>this.size)throw new O;if(s===i)return!0;s--;const u=Math.floor(i/32),f=Math.floor(s/32),g=this.bits;for(let y=u;y<=f;y++){const x=y>u?0:i&31,I=(2<<(y<f?31:s&31))-(1<<x)&4294967295;if((g[y]&I)!==(l?I:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,s){if(s<0||s>32)throw new O("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let l=s;l>0;l--)this.appendBit((i>>l-1&1)===1)}appendBitArray(i){const s=i.size;this.ensureCapacity(this.size+s);for(let l=0;l<s;l++)this.appendBit(i.get(l))}xor(i){if(this.size!==i.size)throw new O("Sizes don't match");const s=this.bits;for(let l=0,u=s.length;l<u;l++)s[l]^=i.bits[l]}toBytes(i,s,l,u){for(let f=0;f<u;f++){let g=0;for(let y=0;y<8;y++)this.get(i)&&(g|=1<<7-y),i++;s[l+f]=g}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),l=s+1,u=this.bits;for(let f=0;f<l;f++){let g=u[f];g=g>>1&1431655765|(g&1431655765)<<1,g=g>>2&858993459|(g&858993459)<<2,g=g>>4&252645135|(g&252645135)<<4,g=g>>8&16711935|(g&16711935)<<8,g=g>>16&65535|(g&65535)<<16,i[s-f]=g}if(this.size!==l*32){const f=l*32-this.size;let g=i[0]>>>f;for(let y=1;y<l;y++){const x=i[y];g|=x<<32-f,i[y-1]=g,g=x>>>f}i[l-1]=g}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof pe))return!1;const s=i;return this.size===s.size&&Re.equals(this.bits,s.bits)}hashCode(){return 31*this.size+Re.hashCode(this.bits)}toString(){let i="";for(let s=0,l=this.size;s<l;s++)(s&7)===0&&(i+=" "),i+=this.get(s)?"X":".";return i}clone(){return new pe(this.size,this.bits.slice())}}var we;(function(D){D[D.OTHER=0]="OTHER",D[D.PURE_BARCODE=1]="PURE_BARCODE",D[D.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",D[D.TRY_HARDER=3]="TRY_HARDER",D[D.CHARACTER_SET=4]="CHARACTER_SET",D[D.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",D[D.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",D[D.ASSUME_GS1=7]="ASSUME_GS1",D[D.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",D[D.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",D[D.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(we||(we={}));var Te=we;class B extends A{static getFormatInstance(){return new B}}B.kind="FormatException";var F;(function(D){D[D.Cp437=0]="Cp437",D[D.ISO8859_1=1]="ISO8859_1",D[D.ISO8859_2=2]="ISO8859_2",D[D.ISO8859_3=3]="ISO8859_3",D[D.ISO8859_4=4]="ISO8859_4",D[D.ISO8859_5=5]="ISO8859_5",D[D.ISO8859_6=6]="ISO8859_6",D[D.ISO8859_7=7]="ISO8859_7",D[D.ISO8859_8=8]="ISO8859_8",D[D.ISO8859_9=9]="ISO8859_9",D[D.ISO8859_10=10]="ISO8859_10",D[D.ISO8859_11=11]="ISO8859_11",D[D.ISO8859_13=12]="ISO8859_13",D[D.ISO8859_14=13]="ISO8859_14",D[D.ISO8859_15=14]="ISO8859_15",D[D.ISO8859_16=15]="ISO8859_16",D[D.SJIS=16]="SJIS",D[D.Cp1250=17]="Cp1250",D[D.Cp1251=18]="Cp1251",D[D.Cp1252=19]="Cp1252",D[D.Cp1256=20]="Cp1256",D[D.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",D[D.UTF8=22]="UTF8",D[D.ASCII=23]="ASCII",D[D.Big5=24]="Big5",D[D.GB18030=25]="GB18030",D[D.EUC_KR=26]="EUC_KR"})(F||(F={}));class k{constructor(i,s,l,...u){this.valueIdentifier=i,this.name=l,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=u,k.VALUE_IDENTIFIER_TO_ECI.set(i,this),k.NAME_TO_ECI.set(l,this);const f=this.values;for(let g=0,y=f.length;g!==y;g++){const x=f[g];k.VALUES_TO_ECI.set(x,this)}for(const g of u)k.NAME_TO_ECI.set(g,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new B("incorect value");const s=k.VALUES_TO_ECI.get(i);if(s===void 0)throw new B("incorect value");return s}static getCharacterSetECIByName(i){const s=k.NAME_TO_ECI.get(i);if(s===void 0)throw new B("incorect value");return s}equals(i){if(!(i instanceof k))return!1;const s=i;return this.getName()===s.getName()}}k.VALUE_IDENTIFIER_TO_ECI=new Map,k.VALUES_TO_ECI=new Map,k.NAME_TO_ECI=new Map,k.Cp437=new k(F.Cp437,Int32Array.from([0,2]),"Cp437"),k.ISO8859_1=new k(F.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),k.ISO8859_2=new k(F.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),k.ISO8859_3=new k(F.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),k.ISO8859_4=new k(F.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),k.ISO8859_5=new k(F.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),k.ISO8859_6=new k(F.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),k.ISO8859_7=new k(F.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),k.ISO8859_8=new k(F.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),k.ISO8859_9=new k(F.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),k.ISO8859_10=new k(F.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),k.ISO8859_11=new k(F.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),k.ISO8859_13=new k(F.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),k.ISO8859_14=new k(F.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),k.ISO8859_15=new k(F.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),k.ISO8859_16=new k(F.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),k.SJIS=new k(F.SJIS,20,"SJIS","Shift_JIS"),k.Cp1250=new k(F.Cp1250,21,"Cp1250","windows-1250"),k.Cp1251=new k(F.Cp1251,22,"Cp1251","windows-1251"),k.Cp1252=new k(F.Cp1252,23,"Cp1252","windows-1252"),k.Cp1256=new k(F.Cp1256,24,"Cp1256","windows-1256"),k.UnicodeBigUnmarked=new k(F.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),k.UTF8=new k(F.UTF8,26,"UTF8","UTF-8"),k.ASCII=new k(F.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),k.Big5=new k(F.Big5,28,"Big5"),k.GB18030=new k(F.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),k.EUC_KR=new k(F.EUC_KR,30,"EUC_KR","EUC-KR");class Z extends A{}Z.kind="UnsupportedOperationException";class q{static decode(i,s){const l=this.encodingName(s);return this.customDecoder?this.customDecoder(i,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(i,l):new TextDecoder(l).decode(i)}static shouldDecodeOnFallback(i){return!q.isBrowser()&&i==="ISO-8859-1"}static encode(i,s){const l=this.encodingName(s);return this.customEncoder?this.customEncoder(i,l):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof k?i:k.getCharacterSetECIByName(i)}static decodeFallback(i,s){const l=this.encodingCharacterSet(s);if(q.isDecodeFallbackSupported(l)){let u="";for(let f=0,g=i.length;f<g;f++){let y=i[f].toString(16);y.length<2&&(y="0"+y),u+="%"+y}return decodeURIComponent(u)}if(l.equals(k.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new Z(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(k.UTF8)||i.equals(k.ISO8859_1)||i.equals(k.ASCII)}static encodeFallback(i){const l=btoa(unescape(encodeURIComponent(i))).split(""),u=[];for(let f=0;f<l.length;f++)u.push(l[f].charCodeAt(0));return new Uint8Array(u)}}class W{static castAsNonUtf8Char(i,s=null){const l=s?s.getName():this.ISO88591;return q.decode(new Uint8Array([i]),l)}static guessEncoding(i,s){if(s!=null&&s.get(Te.CHARACTER_SET)!==void 0)return s.get(Te.CHARACTER_SET).toString();const l=i.length;let u=!0,f=!0,g=!0,y=0,x=0,C=0,I=0,M=0,L=0,H=0,Q=0,J=0,ie=0,de=0;const Me=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let Oe=0;Oe<l&&(u||f||g);Oe++){const Ie=i[Oe]&255;g&&(y>0?(Ie&128)===0?g=!1:y--:(Ie&128)!==0&&((Ie&64)===0?g=!1:(y++,(Ie&32)===0?x++:(y++,(Ie&16)===0?C++:(y++,(Ie&8)===0?I++:g=!1))))),u&&(Ie>127&&Ie<160?u=!1:Ie>159&&(Ie<192||Ie===215||Ie===247)&&de++),f&&(M>0?Ie<64||Ie===127||Ie>252?f=!1:M--:Ie===128||Ie===160||Ie>239?f=!1:Ie>160&&Ie<224?(L++,Q=0,H++,H>J&&(J=H)):Ie>127?(M++,H=0,Q++,Q>ie&&(ie=Q)):(H=0,Q=0))}return g&&y>0&&(g=!1),f&&M>0&&(f=!1),g&&(Me||x+C+I>0)?W.UTF8:f&&(W.ASSUME_SHIFT_JIS||J>=3||ie>=3)?W.SHIFT_JIS:u&&f?J===2&&L===2||de*10>=l?W.SHIFT_JIS:W.ISO88591:u?W.ISO88591:f?W.SHIFT_JIS:g?W.UTF8:W.PLATFORM_DEFAULT_ENCODING}static format(i,...s){let l=-1;function u(g,y,x,C,I,M){if(g==="%%")return"%";if(s[++l]===void 0)return;g=C?parseInt(C.substr(1)):void 0;let L=I?parseInt(I.substr(1)):void 0,H;switch(M){case"s":H=s[l];break;case"c":H=s[l][0];break;case"f":H=parseFloat(s[l]).toFixed(g);break;case"p":H=parseFloat(s[l]).toPrecision(g);break;case"e":H=parseFloat(s[l]).toExponential(g);break;case"x":H=parseInt(s[l]).toString(L||16);break;case"d":H=parseFloat(parseInt(s[l],L||10).toPrecision(g)).toFixed(0);break}H=typeof H=="object"?JSON.stringify(H):(+H).toString(L);let Q=parseInt(x),J=x&&x[0]+""=="0"?"0":" ";for(;H.length<Q;)H=y!==void 0?H+J:J+H;return H}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(f,u)}static getBytes(i,s){return q.encode(i,s)}static getCharCode(i,s=0){return i.charCodeAt(s)}static getCharAt(i){return String.fromCharCode(i)}}W.SHIFT_JIS=k.SJIS.getName(),W.GB2312="GB2312",W.ISO88591=k.ISO8859_1.getName(),W.EUC_JP="EUC_JP",W.UTF8=k.UTF8.getName(),W.PLATFORM_DEFAULT_ENCODING=W.UTF8,W.ASSUME_SHIFT_JIS=!1;class G{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=W.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,s,l){for(let u=s;s<s+l;u++)this.append(i[u]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,s){this.value=this.value.substr(0,i)+s+this.value.substr(i+1)}substring(i,s){return this.value.substring(i,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,s){this.value=this.value.substr(0,i)+s+this.value.substr(i+s.length)}}class Je{constructor(i,s,l,u){if(this.width=i,this.height=s,this.rowSize=l,this.bits=u,s==null&&(s=i),this.height=s,i<1||s<1)throw new O("Both dimensions must be greater than 0");l==null&&(l=Math.floor((i+31)/32)),this.rowSize=l,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const s=i.length,l=i[0].length,u=new Je(l,s);for(let f=0;f<s;f++){const g=i[f];for(let y=0;y<l;y++)g[y]&&u.set(y,f)}return u}static parseFromString(i,s,l){if(i===null)throw new O("stringRepresentation cannot be null");const u=new Array(i.length);let f=0,g=0,y=-1,x=0,C=0;for(;C<i.length;)if(i.charAt(C)===`
`||i.charAt(C)==="\r"){if(f>g){if(y===-1)y=f-g;else if(f-g!==y)throw new O("row lengths do not match");g=f,x++}C++}else if(i.substring(C,C+s.length)===s)C+=s.length,u[f]=!0,f++;else if(i.substring(C,C+l.length)===l)C+=l.length,u[f]=!1,f++;else throw new O("illegal character encountered: "+i.substring(C));if(f>g){if(y===-1)y=f-g;else if(f-g!==y)throw new O("row lengths do not match");x++}const I=new Je(y,x);for(let M=0;M<f;M++)u[M]&&I.set(Math.floor(M%y),Math.floor(M/y));return I}get(i,s){const l=s*this.rowSize+Math.floor(i/32);return(this.bits[l]>>>(i&31)&1)!==0}set(i,s){const l=s*this.rowSize+Math.floor(i/32);this.bits[l]|=1<<(i&31)&4294967295}unset(i,s){const l=s*this.rowSize+Math.floor(i/32);this.bits[l]&=~(1<<(i&31)&4294967295)}flip(i,s){const l=s*this.rowSize+Math.floor(i/32);this.bits[l]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new O("input matrix dimensions do not match");const s=new pe(Math.floor(this.width/32)+1),l=this.rowSize,u=this.bits;for(let f=0,g=this.height;f<g;f++){const y=f*l,x=i.getRow(f,s).getBitArray();for(let C=0;C<l;C++)u[y+C]^=x[C]}}clear(){const i=this.bits,s=i.length;for(let l=0;l<s;l++)i[l]=0}setRegion(i,s,l,u){if(s<0||i<0)throw new O("Left and top must be nonnegative");if(u<1||l<1)throw new O("Height and width must be at least 1");const f=i+l,g=s+u;if(g>this.height||f>this.width)throw new O("The region must fit inside the matrix");const y=this.rowSize,x=this.bits;for(let C=s;C<g;C++){const I=C*y;for(let M=i;M<f;M++)x[I+Math.floor(M/32)]|=1<<(M&31)&4294967295}}getRow(i,s){s==null||s.getSize()<this.width?s=new pe(this.width):s.clear();const l=this.rowSize,u=this.bits,f=i*l;for(let g=0;g<l;g++)s.setBulk(g*32,u[f+g]);return s}setRow(i,s){re.arraycopy(s.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),s=this.getHeight();let l=new pe(i),u=new pe(i);for(let f=0,g=Math.floor((s+1)/2);f<g;f++)l=this.getRow(f,l),u=this.getRow(s-1-f,u),l.reverse(),u.reverse(),this.setRow(f,u),this.setRow(s-1-f,l)}getEnclosingRectangle(){const i=this.width,s=this.height,l=this.rowSize,u=this.bits;let f=i,g=s,y=-1,x=-1;for(let C=0;C<s;C++)for(let I=0;I<l;I++){const M=u[C*l+I];if(M!==0){if(C<g&&(g=C),C>x&&(x=C),I*32<f){let L=0;for(;(M<<31-L&4294967295)===0;)L++;I*32+L<f&&(f=I*32+L)}if(I*32+31>y){let L=31;for(;!(M>>>L);)L--;I*32+L>y&&(y=I*32+L)}}}return y<f||x<g?null:Int32Array.from([f,g,y-f+1,x-g+1])}getTopLeftOnBit(){const i=this.rowSize,s=this.bits;let l=0;for(;l<s.length&&s[l]===0;)l++;if(l===s.length)return null;const u=l/i;let f=l%i*32;const g=s[l];let y=0;for(;(g<<31-y&4294967295)===0;)y++;return f+=y,Int32Array.from([f,u])}getBottomRightOnBit(){const i=this.rowSize,s=this.bits;let l=s.length-1;for(;l>=0&&s[l]===0;)l--;if(l<0)return null;const u=Math.floor(l/i);let f=Math.floor(l%i)*32;const g=s[l];let y=31;for(;!(g>>>y);)y--;return f+=y,Int32Array.from([f,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof Je))return!1;const s=i;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&Re.equals(this.bits,s.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+Re.hashCode(this.bits),i}toString(i="X ",s="  ",l=`
`){return this.buildToString(i,s,l)}buildToString(i,s,l){let u=new G;for(let f=0,g=this.height;f<g;f++){for(let y=0,x=this.width;y<x;y++)u.append(this.get(y,f)?i:s);u.append(l)}return u.toString()}clone(){return new Je(this.width,this.height,this.rowSize,this.bits.slice())}}class ce extends A{static getNotFoundInstance(){return new ce}}ce.kind="NotFoundException";class he extends ee{constructor(i){super(i),this.luminances=he.EMPTY,this.buckets=new Int32Array(he.LUMINANCE_BUCKETS)}getBlackRow(i,s){const l=this.getLuminanceSource(),u=l.getWidth();s==null||s.getSize()<u?s=new pe(u):s.clear(),this.initArrays(u);const f=l.getRow(i,this.luminances),g=this.buckets;for(let x=0;x<u;x++)g[(f[x]&255)>>he.LUMINANCE_SHIFT]++;const y=he.estimateBlackPoint(g);if(u<3)for(let x=0;x<u;x++)(f[x]&255)<y&&s.set(x);else{let x=f[0]&255,C=f[1]&255;for(let I=1;I<u-1;I++){const M=f[I+1]&255;(C*4-x-M)/2<y&&s.set(I),x=C,C=M}}return s}getBlackMatrix(){const i=this.getLuminanceSource(),s=i.getWidth(),l=i.getHeight(),u=new Je(s,l);this.initArrays(s);const f=this.buckets;for(let x=1;x<5;x++){const C=Math.floor(l*x/5),I=i.getRow(C,this.luminances),M=Math.floor(s*4/5);for(let L=Math.floor(s/5);L<M;L++){const H=I[L]&255;f[H>>he.LUMINANCE_SHIFT]++}}const g=he.estimateBlackPoint(f),y=i.getMatrix();for(let x=0;x<l;x++){const C=x*s;for(let I=0;I<s;I++)(y[C+I]&255)<g&&u.set(I,x)}return u}createBinarizer(i){return new he(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const s=this.buckets;for(let l=0;l<he.LUMINANCE_BUCKETS;l++)s[l]=0}static estimateBlackPoint(i){const s=i.length;let l=0,u=0,f=0;for(let I=0;I<s;I++)i[I]>f&&(u=I,f=i[I]),i[I]>l&&(l=i[I]);let g=0,y=0;for(let I=0;I<s;I++){const M=I-u,L=i[I]*M*M;L>y&&(g=I,y=L)}if(u>g){const I=u;u=g,g=I}if(g-u<=s/16)throw new ce;let x=g-1,C=-1;for(let I=g-1;I>u;I--){const M=I-u,L=M*M*(g-I)*(l-i[I]);L>C&&(x=I,C=L)}return x<<he.LUMINANCE_SHIFT}}he.LUMINANCE_BITS=5,he.LUMINANCE_SHIFT=8-he.LUMINANCE_BITS,he.LUMINANCE_BUCKETS=1<<he.LUMINANCE_BITS,he.EMPTY=Uint8ClampedArray.from([0]);class _e extends he{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),s=i.getWidth(),l=i.getHeight();if(s>=_e.MINIMUM_DIMENSION&&l>=_e.MINIMUM_DIMENSION){const u=i.getMatrix();let f=s>>_e.BLOCK_SIZE_POWER;(s&_e.BLOCK_SIZE_MASK)!==0&&f++;let g=l>>_e.BLOCK_SIZE_POWER;(l&_e.BLOCK_SIZE_MASK)!==0&&g++;const y=_e.calculateBlackPoints(u,f,g,s,l),x=new Je(s,l);_e.calculateThresholdForBlock(u,f,g,s,l,y,x),this.matrix=x}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new _e(i)}static calculateThresholdForBlock(i,s,l,u,f,g,y){const x=f-_e.BLOCK_SIZE,C=u-_e.BLOCK_SIZE;for(let I=0;I<l;I++){let M=I<<_e.BLOCK_SIZE_POWER;M>x&&(M=x);const L=_e.cap(I,2,l-3);for(let H=0;H<s;H++){let Q=H<<_e.BLOCK_SIZE_POWER;Q>C&&(Q=C);const J=_e.cap(H,2,s-3);let ie=0;for(let Me=-2;Me<=2;Me++){const Oe=g[L+Me];ie+=Oe[J-2]+Oe[J-1]+Oe[J]+Oe[J+1]+Oe[J+2]}const de=ie/25;_e.thresholdBlock(i,Q,M,de,u,y)}}}static cap(i,s,l){return i<s?s:i>l?l:i}static thresholdBlock(i,s,l,u,f,g){for(let y=0,x=l*f+s;y<_e.BLOCK_SIZE;y++,x+=f)for(let C=0;C<_e.BLOCK_SIZE;C++)(i[x+C]&255)<=u&&g.set(s+C,l+y)}static calculateBlackPoints(i,s,l,u,f){const g=f-_e.BLOCK_SIZE,y=u-_e.BLOCK_SIZE,x=new Array(l);for(let C=0;C<l;C++){x[C]=new Int32Array(s);let I=C<<_e.BLOCK_SIZE_POWER;I>g&&(I=g);for(let M=0;M<s;M++){let L=M<<_e.BLOCK_SIZE_POWER;L>y&&(L=y);let H=0,Q=255,J=0;for(let de=0,Me=I*u+L;de<_e.BLOCK_SIZE;de++,Me+=u){for(let Oe=0;Oe<_e.BLOCK_SIZE;Oe++){const Ie=i[Me+Oe]&255;H+=Ie,Ie<Q&&(Q=Ie),Ie>J&&(J=Ie)}if(J-Q>_e.MIN_DYNAMIC_RANGE)for(de++,Me+=u;de<_e.BLOCK_SIZE;de++,Me+=u)for(let Oe=0;Oe<_e.BLOCK_SIZE;Oe++)H+=i[Me+Oe]&255}let ie=H>>_e.BLOCK_SIZE_POWER*2;if(J-Q<=_e.MIN_DYNAMIC_RANGE&&(ie=Q/2,C>0&&M>0)){const de=(x[C-1][M]+2*x[C][M-1]+x[C-1][M-1])/4;Q<de&&(ie=de)}x[C][M]=ie}}return x}}_e.BLOCK_SIZE_POWER=3,_e.BLOCK_SIZE=1<<_e.BLOCK_SIZE_POWER,_e.BLOCK_SIZE_MASK=_e.BLOCK_SIZE-1,_e.MINIMUM_DIMENSION=_e.BLOCK_SIZE*5,_e.MIN_DYNAMIC_RANGE=24;class je{constructor(i,s){this.width=i,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,s,l,u){throw new Z("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Z("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Z("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let s=new G;for(let l=0;l<this.height;l++){const u=this.getRow(l,i);for(let f=0;f<this.width;f++){const g=u[f]&255;let y;g<64?y="#":g<128?y="+":g<192?y=".":y=" ",s.append(y)}s.append(`
`)}return s.toString()}}class it extends je{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,s){const l=this.delegate.getRow(i,s),u=this.getWidth();for(let f=0;f<u;f++)l[f]=255-(l[f]&255);return l}getMatrix(){const i=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(s);for(let u=0;u<s;u++)l[u]=255-(i[u]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(i,s,l,u){return new it(this.delegate.crop(i,s,l,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new it(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new it(this.delegate.rotateCounterClockwise45())}}class lt extends je{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=lt.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const s=i.getContext("2d").getImageData(0,0,i.width,i.height);return lt.toGrayscaleBuffer(s.data,i.width,i.height)}static toGrayscaleBuffer(i,s,l){const u=new Uint8ClampedArray(s*l);for(let f=0,g=0,y=i.length;f<y;f+=4,g++){let x;if(i[f+3]===0)x=255;else{const I=i[f],M=i[f+1],L=i[f+2];x=306*I+601*M+117*L+512>>10}u[g]=x}return u}getRow(i,s){if(i<0||i>=this.getHeight())throw new O("Requested row is outside the image: "+i);const l=this.getWidth(),u=i*l;return s===null?s=this.buffer.slice(u,u+l):(s.length<l&&(s=new Uint8ClampedArray(l)),s.set(this.buffer.slice(u,u+l))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,s,l,u){return super.crop(i,s,l,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const s=this.getTempCanvasElement(),l=s.getContext("2d"),u=i*lt.DEGREE_TO_RADIANS,f=this.canvas.width,g=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(u))*f+Math.abs(Math.sin(u))*g),x=Math.ceil(Math.abs(Math.sin(u))*f+Math.abs(Math.cos(u))*g);return s.width=y,s.height=x,l.translate(y/2,x/2),l.rotate(u),l.drawImage(this.canvas,f/-2,g/-2),this.buffer=lt.makeBufferFromCanvasImageData(s),this}invert(){return new it(this)}}lt.DEGREE_TO_RADIANS=Math.PI/180;class X{constructor(i,s,l){this.deviceId=i,this.label=s,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ge=(globalThis||Rh||self||window||void 0)&&(globalThis||Rh||self||window||void 0).__awaiter||function(D,i,s,l){function u(f){return f instanceof s?f:new s(function(g){g(f)})}return new(s||(s=Promise))(function(f,g){function y(I){try{C(l.next(I))}catch(M){g(M)}}function x(I){try{C(l.throw(I))}catch(M){g(M)}}function C(I){I.done?f(I.value):u(I.value).then(y,x)}C((l=l.apply(D,i||[])).next())})};class Pe{constructor(i,s=500,l){this.reader=i,this.timeBetweenScansMillis=s,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return ge(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const l of i){const u=l.kind==="video"?"videoinput":l.kind;if(u!=="videoinput")continue;const f=l.deviceId||l.id,g=l.label||`Video device ${s.length+1}`,y=l.groupId,x={deviceId:f,label:g,kind:u,groupId:y};s.push(x)}return s})}getVideoInputDevices(){return ge(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new X(s.deviceId,s.label))})}findDeviceById(i){return ge(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(l=>l.deviceId===i):null})}decodeFromInputVideoDevice(i,s){return ge(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,s)})}decodeOnceFromVideoDevice(i,s){return ge(this,void 0,void 0,function*(){this.reset();let l;i?l={deviceId:{exact:i}}:l={facingMode:"environment"};const u={video:l};return yield this.decodeOnceFromConstraints(u,s)})}decodeOnceFromConstraints(i,s){return ge(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(l,s)})}decodeOnceFromStream(i,s){return ge(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(i,s);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(i,s,l){return ge(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,s,l)})}decodeFromVideoDevice(i,s,l){return ge(this,void 0,void 0,function*(){let u;i?u={deviceId:{exact:i}}:u={facingMode:"environment"};const f={video:u};return yield this.decodeFromConstraints(f,s,l)})}decodeFromConstraints(i,s,l){return ge(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(u,s,l)})}decodeFromStream(i,s,l){return ge(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(i,s);return yield this.decodeContinuously(u,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,s){return ge(this,void 0,void 0,function*(){const l=this.prepareVideoElement(s);return this.addVideoSource(l,i),this.videoElement=l,this.stream=i,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(i){return new Promise((s,l)=>this.playVideoOnLoad(i,()=>s()))}playVideoOnLoad(i,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",s),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return ge(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,s){const l=document.getElementById(i);if(!l)throw new b(`element with id '${i}' not found`);if(l.nodeName.toLowerCase()!==s.toLowerCase())throw new b(`element with id '${i}' must be an ${s} element`);return l}decodeFromImage(i,s){if(!i&&!s)throw new b("either imageElement with a src set or an url must be provided");return s&&!i?this.decodeFromImageUrl(s):this.decodeFromImageElement(i)}decodeFromVideo(i,s){if(!i&&!s)throw new b("Either an element with a src set or an URL must be provided");return s&&!i?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,s,l){if(i===void 0&&s===void 0)throw new b("Either an element with a src set or an URL must be provided");return s&&!i?this.decodeFromVideoUrlContinuously(s,l):this.decodeFromVideoElementContinuously(i,l)}decodeFromImageElement(i){if(!i)throw new b("An image element must be provided.");this.reset();const s=this.prepareImageElement(i);this.imageElement=s;let l;return this.isImageLoaded(s)?l=this.decodeOnce(s,!1,!0):l=this._decodeOnLoadImage(s),l}decodeFromVideoElement(i){const s=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(i,s){const l=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(l,s)}_decodeFromVideoElementSetup(i){if(!i)throw new b("A video element must be provided.");this.reset();const s=this.prepareVideoElement(i);return this.videoElement=s,s}decodeFromImageUrl(i){if(!i)throw new b("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const l=this._decodeOnLoadImage(s);return s.src=i,l}decodeFromVideoUrl(i){if(!i)throw new b("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),l=this.decodeFromVideoElement(s);return s.src=i,l}decodeFromVideoUrlContinuously(i,s){if(!i)throw new b("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(l,s);return l.src=i,u}_decodeOnLoadImage(i){return new Promise((s,l)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(s,l),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return ge(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,s){return ge(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,s)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let s;return typeof i>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof i=="string"&&(s=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(s=i),s}prepareVideoElement(i){let s;return!i&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof i=="string"&&(s=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(s=i),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(i,s=!0,l=!0){this._stopAsyncDecode=!1;const u=(f,g)=>{if(this._stopAsyncDecode){g(new ce("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const y=this.decode(i);f(y)}catch(y){const x=s&&y instanceof ce,I=(y instanceof j||y instanceof B)&&l;if(x||I)return setTimeout(u,this._timeBetweenDecodingAttempts,f,g);g(y)}};return new Promise((f,g)=>u(f,g))}decodeContinuously(i,s){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(i);s(u,null),setTimeout(l,this.timeBetweenScansMillis)}catch(u){s(null,u);const f=u instanceof j||u instanceof B,g=u instanceof ce;(f||g)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(i){const s=this.createBinaryBitmap(i);return this.decodeBitmap(s)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,s,l){s||(s={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(i,s,l=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const s=this.getCaptureCanvas(i),l=new lt(s),u=new _e(l);return new V(u)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const s=this.createCaptureCanvas(i);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let l,u;return typeof i<"u"&&(i instanceof HTMLVideoElement?(l=i.videoWidth,u=i.videoHeight):i instanceof HTMLImageElement&&(l=i.naturalWidth||i.width,u=i.naturalHeight||i.height)),s.style.width=l+"px",s.style.height=u+"px",s.width=l,s.height=u,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,s){try{i.srcObject=s}catch{i.src=URL.createObjectURL(s)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class Be{constructor(i,s,l=s==null?0:8*s.length,u,f,g=re.currentTimeMillis()){this.text=i,this.rawBytes=s,this.numBits=l,this.resultPoints=u,this.format=f,this.timestamp=g,this.text=i,this.rawBytes=s,l==null?this.numBits=s==null?0:8*s.length:this.numBits=l,this.resultPoints=u,this.format=f,this.resultMetadata=null,g==null?this.timestamp=re.currentTimeMillis():this.timestamp=g}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,s)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const s=this.resultPoints;if(s===null)this.resultPoints=i;else if(i!==null&&i.length>0){const l=new Array(s.length+i.length);re.arraycopy(s,0,l,0,s.length),re.arraycopy(i,0,l,s.length,i.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var $e;(function(D){D[D.AZTEC=0]="AZTEC",D[D.CODABAR=1]="CODABAR",D[D.CODE_39=2]="CODE_39",D[D.CODE_93=3]="CODE_93",D[D.CODE_128=4]="CODE_128",D[D.DATA_MATRIX=5]="DATA_MATRIX",D[D.EAN_8=6]="EAN_8",D[D.EAN_13=7]="EAN_13",D[D.ITF=8]="ITF",D[D.MAXICODE=9]="MAXICODE",D[D.PDF_417=10]="PDF_417",D[D.QR_CODE=11]="QR_CODE",D[D.RSS_14=12]="RSS_14",D[D.RSS_EXPANDED=13]="RSS_EXPANDED",D[D.UPC_A=14]="UPC_A",D[D.UPC_E=15]="UPC_E",D[D.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})($e||($e={}));var De=$e,At;(function(D){D[D.OTHER=0]="OTHER",D[D.ORIENTATION=1]="ORIENTATION",D[D.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",D[D.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",D[D.ISSUE_NUMBER=4]="ISSUE_NUMBER",D[D.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",D[D.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",D[D.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",D[D.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",D[D.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",D[D.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(At||(At={}));var wt=At;class Jt{constructor(i,s,l,u,f=-1,g=-1){this.rawBytes=i,this.text=s,this.byteSegments=l,this.ecLevel=u,this.structuredAppendSequenceNumber=f,this.structuredAppendParity=g,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class dr{exp(i){return this.expTable[i]}log(i){if(i===0)throw new O;return this.logTable[i]}static addOrSubtract(i,s){return i^s}}class jn{constructor(i,s){if(s.length===0)throw new O;this.field=i;const l=s.length;if(l>1&&s[0]===0){let u=1;for(;u<l&&s[u]===0;)u++;u===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-u),re.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const s=this.coefficients;let l;if(i===1){l=0;for(let g=0,y=s.length;g!==y;g++){const x=s[g];l=dr.addOrSubtract(l,x)}return l}l=s[0];const u=s.length,f=this.field;for(let g=1;g<u;g++)l=dr.addOrSubtract(f.multiply(i,l),s[g]);return l}addOrSubtract(i){if(!this.field.equals(i.field))throw new O("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let s=this.coefficients,l=i.coefficients;if(s.length>l.length){const g=s;s=l,l=g}let u=new Int32Array(l.length);const f=l.length-s.length;re.arraycopy(l,0,u,0,f);for(let g=f;g<l.length;g++)u[g]=dr.addOrSubtract(s[g-f],l[g]);return new jn(this.field,u)}multiply(i){if(!this.field.equals(i.field))throw new O("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const s=this.coefficients,l=s.length,u=i.coefficients,f=u.length,g=new Int32Array(l+f-1),y=this.field;for(let x=0;x<l;x++){const C=s[x];for(let I=0;I<f;I++)g[x+I]=dr.addOrSubtract(g[x+I],y.multiply(C,u[I]))}return new jn(y,g)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const s=this.coefficients.length,l=this.field,u=new Int32Array(s),f=this.coefficients;for(let g=0;g<s;g++)u[g]=l.multiply(f[g],i);return new jn(l,u)}multiplyByMonomial(i,s){if(i<0)throw new O;if(s===0)return this.field.getZero();const l=this.coefficients,u=l.length,f=new Int32Array(u+i),g=this.field;for(let y=0;y<u;y++)f[y]=g.multiply(l[y],s);return new jn(g,f)}divide(i){if(!this.field.equals(i.field))throw new O("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new O("Divide by 0");const s=this.field;let l=s.getZero(),u=this;const f=i.getCoefficient(i.getDegree()),g=s.inverse(f);for(;u.getDegree()>=i.getDegree()&&!u.isZero();){const y=u.getDegree()-i.getDegree(),x=s.multiply(u.getCoefficient(u.getDegree()),g),C=i.multiplyByMonomial(y,x),I=s.buildMonomial(y,x);l=l.addOrSubtract(I),u=u.addOrSubtract(C)}return[l,u]}toString(){let i="";for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);if(l!==0){if(l<0?(i+=" - ",l=-l):i.length>0&&(i+=" + "),s===0||l!==1){const u=this.field.log(l);u===0?i+="1":u===1?i+="a":(i+="a^",i+=u)}s!==0&&(s===1?i+="x":(i+="x^",i+=s))}}return i}}class ts extends A{}ts.kind="ArithmeticException";class Tt extends dr{constructor(i,s,l){super(),this.primitive=i,this.size=s,this.generatorBase=l;const u=new Int32Array(s);let f=1;for(let y=0;y<s;y++)u[y]=f,f*=2,f>=s&&(f^=i,f&=s-1);this.expTable=u;const g=new Int32Array(s);for(let y=0;y<s-1;y++)g[u[y]]=y;this.logTable=g,this.zero=new jn(this,Int32Array.from([0])),this.one=new jn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,s){if(i<0)throw new O;if(s===0)return this.zero;const l=new Int32Array(i+1);return l[0]=s,new jn(this,l)}inverse(i){if(i===0)throw new ts;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,s){return i===0||s===0?0:this.expTable[(this.logTable[i]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+ye.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}Tt.AZTEC_DATA_12=new Tt(4201,4096,1),Tt.AZTEC_DATA_10=new Tt(1033,1024,1),Tt.AZTEC_DATA_6=new Tt(67,64,1),Tt.AZTEC_PARAM=new Tt(19,16,1),Tt.QR_CODE_FIELD_256=new Tt(285,256,0),Tt.DATA_MATRIX_FIELD_256=new Tt(301,256,1),Tt.AZTEC_DATA_8=Tt.DATA_MATRIX_FIELD_256,Tt.MAXICODE_FIELD_64=Tt.AZTEC_DATA_6;class mi extends A{}mi.kind="ReedSolomonException";class Li extends A{}Li.kind="IllegalStateException";class gr{constructor(i){this.field=i}decode(i,s){const l=this.field,u=new jn(l,i),f=new Int32Array(s);let g=!0;for(let H=0;H<s;H++){const Q=u.evaluateAt(l.exp(H+l.getGeneratorBase()));f[f.length-1-H]=Q,Q!==0&&(g=!1)}if(g)return;const y=new jn(l,f),x=this.runEuclideanAlgorithm(l.buildMonomial(s,1),y,s),C=x[0],I=x[1],M=this.findErrorLocations(C),L=this.findErrorMagnitudes(I,M);for(let H=0;H<M.length;H++){const Q=i.length-1-l.log(M[H]);if(Q<0)throw new mi("Bad error location");i[Q]=Tt.addOrSubtract(i[Q],L[H])}}runEuclideanAlgorithm(i,s,l){if(i.getDegree()<s.getDegree()){const H=i;i=s,s=H}const u=this.field;let f=i,g=s,y=u.getZero(),x=u.getOne();for(;g.getDegree()>=(l/2|0);){let H=f,Q=y;if(f=g,y=x,f.isZero())throw new mi("r_{i-1} was zero");g=H;let J=u.getZero();const ie=f.getCoefficient(f.getDegree()),de=u.inverse(ie);for(;g.getDegree()>=f.getDegree()&&!g.isZero();){const Me=g.getDegree()-f.getDegree(),Oe=u.multiply(g.getCoefficient(g.getDegree()),de);J=J.addOrSubtract(u.buildMonomial(Me,Oe)),g=g.addOrSubtract(f.multiplyByMonomial(Me,Oe))}if(x=J.multiply(y).addOrSubtract(Q),g.getDegree()>=f.getDegree())throw new Li("Division algorithm failed to reduce polynomial?")}const C=x.getCoefficient(0);if(C===0)throw new mi("sigmaTilde(0) was zero");const I=u.inverse(C),M=x.multiplyScalar(I),L=g.multiplyScalar(I);return[M,L]}findErrorLocations(i){const s=i.getDegree();if(s===1)return Int32Array.from([i.getCoefficient(1)]);const l=new Int32Array(s);let u=0;const f=this.field;for(let g=1;g<f.getSize()&&u<s;g++)i.evaluateAt(g)===0&&(l[u]=f.inverse(g),u++);if(u!==s)throw new mi("Error locator degree does not match number of roots");return l}findErrorMagnitudes(i,s){const l=s.length,u=new Int32Array(l),f=this.field;for(let g=0;g<l;g++){const y=f.inverse(s[g]);let x=1;for(let C=0;C<l;C++)if(g!==C){const I=f.multiply(s[C],y),M=(I&1)===0?I|1:I&-2;x=f.multiply(x,M)}u[g]=f.multiply(i.evaluateAt(y),f.inverse(x)),f.getGeneratorBase()!==0&&(u[g]=f.multiply(u[g],y))}return u}}var Nn;(function(D){D[D.UPPER=0]="UPPER",D[D.LOWER=1]="LOWER",D[D.MIXED=2]="MIXED",D[D.DIGIT=3]="DIGIT",D[D.PUNCT=4]="PUNCT",D[D.BINARY=5]="BINARY"})(Nn||(Nn={}));class qt{decode(i){this.ddata=i;let s=i.getBits(),l=this.extractBits(s),u=this.correctBits(l),f=qt.convertBoolArrayToByteArray(u),g=qt.getEncodedData(u),y=new Jt(f,g,null,null);return y.setNumBits(u.length),y}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let s=i.length,l=Nn.UPPER,u=Nn.UPPER,f="",g=0;for(;g<s;)if(u===Nn.BINARY){if(s-g<5)break;let y=qt.readCode(i,g,5);if(g+=5,y===0){if(s-g<11)break;y=qt.readCode(i,g,11)+31,g+=11}for(let x=0;x<y;x++){if(s-g<8){g=s;break}const C=qt.readCode(i,g,8);f+=W.castAsNonUtf8Char(C),g+=8}u=l}else{let y=u===Nn.DIGIT?4:5;if(s-g<y)break;let x=qt.readCode(i,g,y);g+=y;let C=qt.getCharacter(u,x);C.startsWith("CTRL_")?(l=u,u=qt.getTable(C.charAt(5)),C.charAt(6)==="L"&&(l=u)):(f+=C,u=l)}return f}static getTable(i){switch(i){case"L":return Nn.LOWER;case"P":return Nn.PUNCT;case"M":return Nn.MIXED;case"D":return Nn.DIGIT;case"B":return Nn.BINARY;case"U":default:return Nn.UPPER}}static getCharacter(i,s){switch(i){case Nn.UPPER:return qt.UPPER_TABLE[s];case Nn.LOWER:return qt.LOWER_TABLE[s];case Nn.MIXED:return qt.MIXED_TABLE[s];case Nn.PUNCT:return qt.PUNCT_TABLE[s];case Nn.DIGIT:return qt.DIGIT_TABLE[s];default:throw new Li("Bad table")}}correctBits(i){let s,l;this.ddata.getNbLayers()<=2?(l=6,s=Tt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,s=Tt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,s=Tt.AZTEC_DATA_10):(l=12,s=Tt.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),f=i.length/l;if(f<u)throw new B;let g=i.length%l,y=new Int32Array(f);for(let L=0;L<f;L++,g+=l)y[L]=qt.readCode(i,g,l);try{new gr(s).decode(y,f-u)}catch(L){throw new B(L)}let x=(1<<l)-1,C=0;for(let L=0;L<u;L++){let H=y[L];if(H===0||H===x)throw new B;(H===1||H===x-1)&&C++}let I=new Array(u*l-C),M=0;for(let L=0;L<u;L++){let H=y[L];if(H===1||H===x-1)I.fill(H>1,M,M+l-1),M+=l-1;else for(let Q=l-1;Q>=0;--Q)I[M++]=(H&1<<Q)!==0}return I}extractBits(i){let s=this.ddata.isCompact(),l=this.ddata.getNbLayers(),u=(s?11:14)+l*4,f=new Int32Array(u),g=new Array(this.totalBitsInLayer(l,s));if(s)for(let y=0;y<f.length;y++)f[y]=y;else{let y=u+1+2*ye.truncDivision(ye.truncDivision(u,2)-1,15),x=u/2,C=ye.truncDivision(y,2);for(let I=0;I<x;I++){let M=I+ye.truncDivision(I,15);f[x-I-1]=C-M-1,f[x+I]=C+M+1}}for(let y=0,x=0;y<l;y++){let C=(l-y)*4+(s?9:12),I=y*2,M=u-1-I;for(let L=0;L<C;L++){let H=L*2;for(let Q=0;Q<2;Q++)g[x+H+Q]=i.get(f[I+Q],f[I+L]),g[x+2*C+H+Q]=i.get(f[I+L],f[M-Q]),g[x+4*C+H+Q]=i.get(f[M-Q],f[M-L]),g[x+6*C+H+Q]=i.get(f[M-L],f[I+Q])}x+=C*8}return g}static readCode(i,s,l){let u=0;for(let f=s;f<s+l;f++)u<<=1,i[f]&&(u|=1);return u}static readByte(i,s){let l=i.length-s;return l>=8?qt.readCode(i,s,8):qt.readCode(i,s,l)<<8-l}static convertBoolArrayToByteArray(i){let s=new Uint8Array((i.length+7)/8);for(let l=0;l<s.length;l++)s[l]=qt.readByte(i,8*l);return s}totalBitsInLayer(i,s){return((s?88:112)+16*i)*i}}qt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],qt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],qt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],qt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],qt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ze{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,s,l,u){const f=i-l,g=s-u;return Math.sqrt(f*f+g*g)}static sum(i){let s=0;for(let l=0,u=i.length;l!==u;l++){const f=i[l];s+=f}return s}}class wn{static floatToIntBits(i){return i}}wn.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Fe{constructor(i,s){this.x=i,this.y=s}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof Fe){const s=i;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*wn.floatToIntBits(this.x)+wn.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const s=this.distance(i[0],i[1]),l=this.distance(i[1],i[2]),u=this.distance(i[0],i[2]);let f,g,y;if(l>=s&&l>=u?(g=i[0],f=i[1],y=i[2]):u>=l&&u>=s?(g=i[1],f=i[0],y=i[2]):(g=i[2],f=i[0],y=i[1]),this.crossProductZ(f,g,y)<0){const x=f;f=y,y=x}i[0]=f,i[1]=g,i[2]=y}static distance(i,s){return Ze.distance(i.x,i.y,s.x,s.y)}static crossProductZ(i,s,l){const u=s.x,f=s.y;return(l.x-u)*(i.y-f)-(l.y-f)*(i.x-u)}}class Ea{constructor(i,s){this.bits=i,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class xo extends Ea{constructor(i,s,l,u,f){super(i,s),this.compact=l,this.nbDatablocks=u,this.nbLayers=f}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class yn{constructor(i,s,l,u){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),s==null&&(s=yn.INIT_SIZE),l==null&&(l=i.getWidth()/2|0),u==null&&(u=i.getHeight()/2|0);const f=s/2|0;if(this.leftInit=l-f,this.rightInit=l+f,this.upInit=u-f,this.downInit=u+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ce}detect(){let i=this.leftInit,s=this.rightInit,l=this.upInit,u=this.downInit,f=!1,g=!0,y=!1,x=!1,C=!1,I=!1,M=!1;const L=this.width,H=this.height;for(;g;){g=!1;let Q=!0;for(;(Q||!x)&&s<L;)Q=this.containsBlackPoint(l,u,s,!1),Q?(s++,g=!0,x=!0):x||s++;if(s>=L){f=!0;break}let J=!0;for(;(J||!C)&&u<H;)J=this.containsBlackPoint(i,s,u,!0),J?(u++,g=!0,C=!0):C||u++;if(u>=H){f=!0;break}let ie=!0;for(;(ie||!I)&&i>=0;)ie=this.containsBlackPoint(l,u,i,!1),ie?(i--,g=!0,I=!0):I||i--;if(i<0){f=!0;break}let de=!0;for(;(de||!M)&&l>=0;)de=this.containsBlackPoint(i,s,l,!0),de?(l--,g=!0,M=!0):M||l--;if(l<0){f=!0;break}g&&(y=!0)}if(!f&&y){const Q=s-i;let J=null;for(let Oe=1;J===null&&Oe<Q;Oe++)J=this.getBlackPointOnSegment(i,u-Oe,i+Oe,u);if(J==null)throw new ce;let ie=null;for(let Oe=1;ie===null&&Oe<Q;Oe++)ie=this.getBlackPointOnSegment(i,l+Oe,i+Oe,l);if(ie==null)throw new ce;let de=null;for(let Oe=1;de===null&&Oe<Q;Oe++)de=this.getBlackPointOnSegment(s,l+Oe,s-Oe,l);if(de==null)throw new ce;let Me=null;for(let Oe=1;Me===null&&Oe<Q;Oe++)Me=this.getBlackPointOnSegment(s,u-Oe,s-Oe,u);if(Me==null)throw new ce;return this.centerEdges(Me,J,de,ie)}else throw new ce}getBlackPointOnSegment(i,s,l,u){const f=Ze.round(Ze.distance(i,s,l,u)),g=(l-i)/f,y=(u-s)/f,x=this.image;for(let C=0;C<f;C++){const I=Ze.round(i+C*g),M=Ze.round(s+C*y);if(x.get(I,M))return new Fe(I,M)}return null}centerEdges(i,s,l,u){const f=i.getX(),g=i.getY(),y=s.getX(),x=s.getY(),C=l.getX(),I=l.getY(),M=u.getX(),L=u.getY(),H=yn.CORR;return f<this.width/2?[new Fe(M-H,L+H),new Fe(y+H,x+H),new Fe(C-H,I-H),new Fe(f+H,g-H)]:[new Fe(M+H,L+H),new Fe(y+H,x-H),new Fe(C-H,I+H),new Fe(f-H,g-H)]}containsBlackPoint(i,s,l,u){const f=this.image;if(u){for(let g=i;g<=s;g++)if(f.get(g,l))return!0}else for(let g=i;g<=s;g++)if(f.get(l,g))return!0;return!1}}yn.INIT_SIZE=10,yn.CORR=1;class ns{static checkAndNudgePoints(i,s){const l=i.getWidth(),u=i.getHeight();let f=!0;for(let g=0;g<s.length&&f;g+=2){const y=Math.floor(s[g]),x=Math.floor(s[g+1]);if(y<-1||y>l||x<-1||x>u)throw new ce;f=!1,y===-1?(s[g]=0,f=!0):y===l&&(s[g]=l-1,f=!0),x===-1?(s[g+1]=0,f=!0):x===u&&(s[g+1]=u-1,f=!0)}f=!0;for(let g=s.length-2;g>=0&&f;g-=2){const y=Math.floor(s[g]),x=Math.floor(s[g+1]);if(y<-1||y>l||x<-1||x>u)throw new ce;f=!1,y===-1?(s[g]=0,f=!0):y===l&&(s[g]=l-1,f=!0),x===-1?(s[g+1]=0,f=!0):x===u&&(s[g+1]=u-1,f=!0)}}}class pi{constructor(i,s,l,u,f,g,y,x,C){this.a11=i,this.a21=s,this.a31=l,this.a12=u,this.a22=f,this.a32=g,this.a13=y,this.a23=x,this.a33=C}static quadrilateralToQuadrilateral(i,s,l,u,f,g,y,x,C,I,M,L,H,Q,J,ie){const de=pi.quadrilateralToSquare(i,s,l,u,f,g,y,x);return pi.squareToQuadrilateral(C,I,M,L,H,Q,J,ie).times(de)}transformPoints(i){const s=i.length,l=this.a11,u=this.a12,f=this.a13,g=this.a21,y=this.a22,x=this.a23,C=this.a31,I=this.a32,M=this.a33;for(let L=0;L<s;L+=2){const H=i[L],Q=i[L+1],J=f*H+x*Q+M;i[L]=(l*H+g*Q+C)/J,i[L+1]=(u*H+y*Q+I)/J}}transformPointsWithValues(i,s){const l=this.a11,u=this.a12,f=this.a13,g=this.a21,y=this.a22,x=this.a23,C=this.a31,I=this.a32,M=this.a33,L=i.length;for(let H=0;H<L;H++){const Q=i[H],J=s[H],ie=f*Q+x*J+M;i[H]=(l*Q+g*J+C)/ie,s[H]=(u*Q+y*J+I)/ie}}static squareToQuadrilateral(i,s,l,u,f,g,y,x){const C=i-l+f-y,I=s-u+g-x;if(C===0&&I===0)return new pi(l-i,f-l,i,u-s,g-u,s,0,0,1);{const M=l-f,L=y-f,H=u-g,Q=x-g,J=M*Q-L*H,ie=(C*Q-L*I)/J,de=(M*I-C*H)/J;return new pi(l-i+ie*l,y-i+de*y,i,u-s+ie*u,x-s+de*x,s,ie,de,1)}}static quadrilateralToSquare(i,s,l,u,f,g,y,x){return pi.squareToQuadrilateral(i,s,l,u,f,g,y,x).buildAdjoint()}buildAdjoint(){return new pi(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new pi(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class _a extends ns{sampleGrid(i,s,l,u,f,g,y,x,C,I,M,L,H,Q,J,ie,de,Me,Oe){const Ie=pi.quadrilateralToQuadrilateral(u,f,g,y,x,C,I,M,L,H,Q,J,ie,de,Me,Oe);return this.sampleGridWithTransform(i,s,l,Ie)}sampleGridWithTransform(i,s,l,u){if(s<=0||l<=0)throw new ce;const f=new Je(s,l),g=new Float32Array(2*s);for(let y=0;y<l;y++){const x=g.length,C=y+.5;for(let I=0;I<x;I+=2)g[I]=I/2+.5,g[I+1]=C;u.transformPoints(g),ns.checkAndNudgePoints(i,g);try{for(let I=0;I<x;I+=2)i.get(Math.floor(g[I]),Math.floor(g[I+1]))&&f.set(I/2,y)}catch{throw new ce}}return f}}class yi{static setGridSampler(i){yi.gridSampler=i}static getInstance(){return yi.gridSampler}}yi.gridSampler=new _a;class ri{constructor(i,s){this.x=i,this.y=s}toResultPoint(){return new Fe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ao{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let s=this.getMatrixCenter(),l=this.getBullsEyeCorners(s);if(i){let g=l[0];l[0]=l[2],l[2]=g}this.extractParameters(l);let u=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),f=this.getMatrixCornerPoints(l);return new xo(u,f,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new ce;let s=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(i[0],i[1],s),this.sampleLine(i[1],i[2],s),this.sampleLine(i[2],i[3],s),this.sampleLine(i[3],i[0],s)]);this.shift=this.getRotation(l,s);let u=0;for(let g=0;g<4;g++){let y=l[(this.shift+g)%4];this.compact?(u<<=7,u+=y>>1&127):(u<<=10,u+=(y>>2&992)+(y>>1&31))}let f=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(f>>6)+1,this.nbDataBlocks=(f&63)+1):(this.nbLayers=(f>>11)+1,this.nbDataBlocks=(f&2047)+1)}getRotation(i,s){let l=0;i.forEach((u,f,g)=>{let y=(u>>s-2<<1)+(u&1);l=(l<<3)+y}),l=((l&1)<<11)+(l>>1);for(let u=0;u<4;u++)if(ye.bitCount(l^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new ce}getCorrectedParameterData(i,s){let l,u;s?(l=7,u=2):(l=10,u=4);let f=l-u,g=new Int32Array(l);for(let x=l-1;x>=0;--x)g[x]=i&15,i>>=4;try{new gr(Tt.AZTEC_PARAM).decode(g,f)}catch{throw new ce}let y=0;for(let x=0;x<u;x++)y=(y<<4)+g[x];return y}getBullsEyeCorners(i){let s=i,l=i,u=i,f=i,g=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let M=this.getFirstDifferent(s,g,1,-1),L=this.getFirstDifferent(l,g,1,1),H=this.getFirstDifferent(u,g,-1,1),Q=this.getFirstDifferent(f,g,-1,-1);if(this.nbCenterLayers>2){let J=this.distancePoint(Q,M)*this.nbCenterLayers/(this.distancePoint(f,s)*(this.nbCenterLayers+2));if(J<.75||J>1.25||!this.isWhiteOrBlackRectangle(M,L,H,Q))break}s=M,l=L,u=H,f=Q,g=!g}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ce;this.compact=this.nbCenterLayers===5;let y=new Fe(s.getX()+.5,s.getY()-.5),x=new Fe(l.getX()+.5,l.getY()+.5),C=new Fe(u.getX()-.5,u.getY()+.5),I=new Fe(f.getX()-.5,f.getY()-.5);return this.expandSquare([y,x,C,I],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,s,l,u;try{let y=new yn(this.image).detect();i=y[0],s=y[1],l=y[2],u=y[3]}catch{let x=this.image.getWidth()/2,C=this.image.getHeight()/2;i=this.getFirstDifferent(new ri(x+7,C-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new ri(x+7,C+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new ri(x-7,C+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new ri(x-7,C-7),!1,-1,-1).toResultPoint()}let f=Ze.round((i.getX()+u.getX()+s.getX()+l.getX())/4),g=Ze.round((i.getY()+u.getY()+s.getY()+l.getY())/4);try{let y=new yn(this.image,15,f,g).detect();i=y[0],s=y[1],l=y[2],u=y[3]}catch{i=this.getFirstDifferent(new ri(f+7,g-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new ri(f+7,g+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new ri(f-7,g+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new ri(f-7,g-7),!1,-1,-1).toResultPoint()}return f=Ze.round((i.getX()+u.getX()+s.getX()+l.getX())/4),g=Ze.round((i.getY()+u.getY()+s.getY()+l.getY())/4),new ri(f,g)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,s,l,u,f){let g=yi.getInstance(),y=this.getDimension(),x=y/2-this.nbCenterLayers,C=y/2+this.nbCenterLayers;return g.sampleGrid(i,y,y,x,x,C,x,C,C,x,C,s.getX(),s.getY(),l.getX(),l.getY(),u.getX(),u.getY(),f.getX(),f.getY())}sampleLine(i,s,l){let u=0,f=this.distanceResultPoint(i,s),g=f/l,y=i.getX(),x=i.getY(),C=g*(s.getX()-i.getX())/f,I=g*(s.getY()-i.getY())/f;for(let M=0;M<l;M++)this.image.get(Ze.round(y+M*C),Ze.round(x+M*I))&&(u|=1<<l-M-1);return u}isWhiteOrBlackRectangle(i,s,l,u){let f=3;i=new ri(i.getX()-f,i.getY()+f),s=new ri(s.getX()-f,s.getY()-f),l=new ri(l.getX()+f,l.getY()-f),u=new ri(u.getX()+f,u.getY()+f);let g=this.getColor(u,i);if(g===0)return!1;let y=this.getColor(i,s);return y!==g||(y=this.getColor(s,l),y!==g)?!1:(y=this.getColor(l,u),y===g)}getColor(i,s){let l=this.distancePoint(i,s),u=(s.getX()-i.getX())/l,f=(s.getY()-i.getY())/l,g=0,y=i.getX(),x=i.getY(),C=this.image.get(i.getX(),i.getY()),I=Math.ceil(l);for(let L=0;L<I;L++)y+=u,x+=f,this.image.get(Ze.round(y),Ze.round(x))!==C&&g++;let M=g/l;return M>.1&&M<.9?0:M<=.1===C?1:-1}getFirstDifferent(i,s,l,u){let f=i.getX()+l,g=i.getY()+u;for(;this.isValid(f,g)&&this.image.get(f,g)===s;)f+=l,g+=u;for(f-=l,g-=u;this.isValid(f,g)&&this.image.get(f,g)===s;)f+=l;for(f-=l;this.isValid(f,g)&&this.image.get(f,g)===s;)g+=u;return g-=u,new ri(f,g)}expandSquare(i,s,l){let u=l/(2*s),f=i[0].getX()-i[2].getX(),g=i[0].getY()-i[2].getY(),y=(i[0].getX()+i[2].getX())/2,x=(i[0].getY()+i[2].getY())/2,C=new Fe(y+u*f,x+u*g),I=new Fe(y-u*f,x-u*g);f=i[1].getX()-i[3].getX(),g=i[1].getY()-i[3].getY(),y=(i[1].getX()+i[3].getX())/2,x=(i[1].getY()+i[3].getY())/2;let M=new Fe(y+u*f,x+u*g),L=new Fe(y-u*f,x-u*g);return[C,M,I,L]}isValid(i,s){return i>=0&&i<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(i){let s=Ze.round(i.getX()),l=Ze.round(i.getY());return this.isValid(s,l)}distancePoint(i,s){return Ze.distance(i.getX(),i.getY(),s.getX(),s.getY())}distanceResultPoint(i,s){return Ze.distance(i.getX(),i.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ye.truncDivision(this.nbLayers-4,8)+1)+15}}class Ds{decode(i,s=null){let l=null,u=new Ao(i.getBlackMatrix()),f=null,g=null;try{let I=u.detectMirror(!1);f=I.getPoints(),this.reportFoundResultPoints(s,f),g=new qt().decode(I)}catch(I){l=I}if(g==null)try{let I=u.detectMirror(!0);f=I.getPoints(),this.reportFoundResultPoints(s,f),g=new qt().decode(I)}catch(I){throw l??I}let y=new Be(g.getText(),g.getRawBytes(),g.getNumBits(),f,De.AZTEC,re.currentTimeMillis()),x=g.getByteSegments();x!=null&&y.putMetadata(wt.BYTE_SEGMENTS,x);let C=g.getECLevel();return C!=null&&y.putMetadata(wt.ERROR_CORRECTION_LEVEL,C),y}reportFoundResultPoints(i,s){if(i!=null){let l=i.get(Te.NEED_RESULT_POINT_CALLBACK);l!=null&&s.forEach((u,f,g)=>{l.foundPossibleResultPoint(u)})}}reset(){}}class al extends Pe{constructor(i=500){super(new Ds,i)}}class Xt{decode(i,s){try{return this.doDecode(i,s)}catch{if(s&&s.get(Te.TRY_HARDER)===!0&&i.isRotateSupported()){const f=i.rotateCounterClockwise(),g=this.doDecode(f,s),y=g.getResultMetadata();let x=270;y!==null&&y.get(wt.ORIENTATION)===!0&&(x=x+y.get(wt.ORIENTATION)%360),g.putMetadata(wt.ORIENTATION,x);const C=g.getResultPoints();if(C!==null){const I=f.getHeight();for(let M=0;M<C.length;M++)C[M]=new Fe(I-C[M].getY()-1,C[M].getX())}return g}else throw new ce}}reset(){}doDecode(i,s){const l=i.getWidth(),u=i.getHeight();let f=new pe(l);const g=s&&s.get(Te.TRY_HARDER)===!0,y=Math.max(1,u>>(g?8:5));let x;g?x=u:x=15;const C=Math.trunc(u/2);for(let I=0;I<x;I++){const M=Math.trunc((I+1)/2),L=(I&1)===0,H=C+y*(L?M:-M);if(H<0||H>=u)break;try{f=i.getBlackRow(H,f)}catch{continue}for(let Q=0;Q<2;Q++){if(Q===1&&(f.reverse(),s&&s.get(Te.NEED_RESULT_POINT_CALLBACK)===!0)){const J=new Map;s.forEach((ie,de)=>J.set(de,ie)),J.delete(Te.NEED_RESULT_POINT_CALLBACK),s=J}try{const J=this.decodeRow(H,f,s);if(Q===1){J.putMetadata(wt.ORIENTATION,180);const ie=J.getResultPoints();ie!==null&&(ie[0]=new Fe(l-ie[0].getX()-1,ie[0].getY()),ie[1]=new Fe(l-ie[1].getX()-1,ie[1].getY()))}return J}catch{}}}throw new ce}static recordPattern(i,s,l){const u=l.length;for(let C=0;C<u;C++)l[C]=0;const f=i.getSize();if(s>=f)throw new ce;let g=!i.get(s),y=0,x=s;for(;x<f;){if(i.get(x)!==g)l[y]++;else{if(++y===u)break;l[y]=1,g=!g}x++}if(!(y===u||y===u-1&&x===f))throw new ce}static recordPatternInReverse(i,s,l){let u=l.length,f=i.get(s);for(;s>0&&u>=0;)i.get(--s)!==f&&(u--,f=!f);if(u>=0)throw new ce;Xt.recordPattern(i,s+1,l)}static patternMatchVariance(i,s,l){const u=i.length;let f=0,g=0;for(let C=0;C<u;C++)f+=i[C],g+=s[C];if(f<g)return Number.POSITIVE_INFINITY;const y=f/g;l*=y;let x=0;for(let C=0;C<u;C++){const I=i[C],M=s[C]*y,L=I>M?I-M:M-I;if(L>l)return Number.POSITIVE_INFINITY;x+=L}return x/f}}class Ne extends Xt{static findStartPattern(i){const s=i.getSize(),l=i.getNextSet(0);let u=0,f=Int32Array.from([0,0,0,0,0,0]),g=l,y=!1;const x=6;for(let C=l;C<s;C++)if(i.get(C)!==y)f[u]++;else{if(u===x-1){let I=Ne.MAX_AVG_VARIANCE,M=-1;for(let L=Ne.CODE_START_A;L<=Ne.CODE_START_C;L++){const H=Xt.patternMatchVariance(f,Ne.CODE_PATTERNS[L],Ne.MAX_INDIVIDUAL_VARIANCE);H<I&&(I=H,M=L)}if(M>=0&&i.isRange(Math.max(0,g-(C-g)/2),g,!1))return Int32Array.from([g,C,M]);g+=f[0]+f[1],f=f.slice(2,f.length-1),f[u-1]=0,f[u]=0,u--}else u++;f[u]=1,y=!y}throw new ce}static decodeCode(i,s,l){Xt.recordPattern(i,l,s);let u=Ne.MAX_AVG_VARIANCE,f=-1;for(let g=0;g<Ne.CODE_PATTERNS.length;g++){const y=Ne.CODE_PATTERNS[g],x=this.patternMatchVariance(s,y,Ne.MAX_INDIVIDUAL_VARIANCE);x<u&&(u=x,f=g)}if(f>=0)return f;throw new ce}decodeRow(i,s,l){const u=l&&l.get(Te.ASSUME_GS1)===!0,f=Ne.findStartPattern(s),g=f[2];let y=0;const x=new Uint8Array(20);x[y++]=g;let C;switch(g){case Ne.CODE_START_A:C=Ne.CODE_CODE_A;break;case Ne.CODE_START_B:C=Ne.CODE_CODE_B;break;case Ne.CODE_START_C:C=Ne.CODE_CODE_C;break;default:throw new B}let I=!1,M=!1,L="",H=f[0],Q=f[1];const J=Int32Array.from([0,0,0,0,0,0]);let ie=0,de=0,Me=g,Oe=0,Ie=!0,_t=!1,ct=!1;for(;!I;){const qs=M;switch(M=!1,ie=de,de=Ne.decodeCode(s,J,Q),x[y++]=de,de!==Ne.CODE_STOP&&(Ie=!0),de!==Ne.CODE_STOP&&(Oe++,Me+=Oe*de),H=Q,Q+=J.reduce((Su,cc)=>Su+cc,0),de){case Ne.CODE_START_A:case Ne.CODE_START_B:case Ne.CODE_START_C:throw new B}switch(C){case Ne.CODE_CODE_A:if(de<64)ct===_t?L+=String.fromCharCode(32+de):L+=String.fromCharCode(32+de+128),ct=!1;else if(de<96)ct===_t?L+=String.fromCharCode(de-64):L+=String.fromCharCode(de+64),ct=!1;else switch(de!==Ne.CODE_STOP&&(Ie=!1),de){case Ne.CODE_FNC_1:u&&(L.length===0?L+="]C1":L+="");break;case Ne.CODE_FNC_2:case Ne.CODE_FNC_3:break;case Ne.CODE_FNC_4_A:!_t&&ct?(_t=!0,ct=!1):_t&&ct?(_t=!1,ct=!1):ct=!0;break;case Ne.CODE_SHIFT:M=!0,C=Ne.CODE_CODE_B;break;case Ne.CODE_CODE_B:C=Ne.CODE_CODE_B;break;case Ne.CODE_CODE_C:C=Ne.CODE_CODE_C;break;case Ne.CODE_STOP:I=!0;break}break;case Ne.CODE_CODE_B:if(de<96)ct===_t?L+=String.fromCharCode(32+de):L+=String.fromCharCode(32+de+128),ct=!1;else switch(de!==Ne.CODE_STOP&&(Ie=!1),de){case Ne.CODE_FNC_1:u&&(L.length===0?L+="]C1":L+="");break;case Ne.CODE_FNC_2:case Ne.CODE_FNC_3:break;case Ne.CODE_FNC_4_B:!_t&&ct?(_t=!0,ct=!1):_t&&ct?(_t=!1,ct=!1):ct=!0;break;case Ne.CODE_SHIFT:M=!0,C=Ne.CODE_CODE_A;break;case Ne.CODE_CODE_A:C=Ne.CODE_CODE_A;break;case Ne.CODE_CODE_C:C=Ne.CODE_CODE_C;break;case Ne.CODE_STOP:I=!0;break}break;case Ne.CODE_CODE_C:if(de<100)de<10&&(L+="0"),L+=de;else switch(de!==Ne.CODE_STOP&&(Ie=!1),de){case Ne.CODE_FNC_1:u&&(L.length===0?L+="]C1":L+="");break;case Ne.CODE_CODE_A:C=Ne.CODE_CODE_A;break;case Ne.CODE_CODE_B:C=Ne.CODE_CODE_B;break;case Ne.CODE_STOP:I=!0;break}break}qs&&(C=C===Ne.CODE_CODE_A?Ne.CODE_CODE_B:Ne.CODE_CODE_A)}const kn=Q-H;if(Q=s.getNextUnset(Q),!s.isRange(Q,Math.min(s.getSize(),Q+(Q-H)/2),!1))throw new ce;if(Me-=Oe*ie,Me%103!==ie)throw new j;const rr=L.length;if(rr===0)throw new ce;rr>0&&Ie&&(C===Ne.CODE_CODE_C?L=L.substring(0,rr-2):L=L.substring(0,rr-1));const Si=(f[1]+f[0])/2,tn=H+kn/2,ai=x.length,Zi=new Uint8Array(ai);for(let qs=0;qs<ai;qs++)Zi[qs]=x[qs];const Ia=[new Fe(Si,i),new Fe(tn,i)];return new Be(L,Zi,0,Ia,De.CODE_128,new Date().getTime())}}Ne.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ne.MAX_AVG_VARIANCE=.25,Ne.MAX_INDIVIDUAL_VARIANCE=.7,Ne.CODE_SHIFT=98,Ne.CODE_CODE_C=99,Ne.CODE_CODE_B=100,Ne.CODE_CODE_A=101,Ne.CODE_FNC_1=102,Ne.CODE_FNC_2=97,Ne.CODE_FNC_3=96,Ne.CODE_FNC_4_A=101,Ne.CODE_FNC_4_B=100,Ne.CODE_START_A=103,Ne.CODE_START_B=104,Ne.CODE_START_C=105,Ne.CODE_STOP=106;class Yt extends Xt{constructor(i=!1,s=!1){super(),this.usingCheckDigit=i,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,s,l){let u=this.counters;u.fill(0),this.decodeRowResult="";let f=Yt.findAsteriskPattern(s,u),g=s.getNextSet(f[1]),y=s.getSize(),x,C;do{Yt.recordPattern(s,g,u);let J=Yt.toNarrowWidePattern(u);if(J<0)throw new ce;x=Yt.patternToChar(J),this.decodeRowResult+=x,C=g;for(let ie of u)g+=ie;g=s.getNextSet(g)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let I=0;for(let J of u)I+=J;let M=g-C-I;if(g!==y&&M*2<I)throw new ce;if(this.usingCheckDigit){let J=this.decodeRowResult.length-1,ie=0;for(let de=0;de<J;de++)ie+=Yt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(de));if(this.decodeRowResult.charAt(J)!==Yt.ALPHABET_STRING.charAt(ie%43))throw new j;this.decodeRowResult=this.decodeRowResult.substring(0,J)}if(this.decodeRowResult.length===0)throw new ce;let L;this.extendedMode?L=Yt.decodeExtended(this.decodeRowResult):L=this.decodeRowResult;let H=(f[1]+f[0])/2,Q=C+I/2;return new Be(L,null,0,[new Fe(H,i),new Fe(Q,i)],De.CODE_39,new Date().getTime())}static findAsteriskPattern(i,s){let l=i.getSize(),u=i.getNextSet(0),f=0,g=u,y=!1,x=s.length;for(let C=u;C<l;C++)if(i.get(C)!==y)s[f]++;else{if(f===x-1){if(this.toNarrowWidePattern(s)===Yt.ASTERISK_ENCODING&&i.isRange(Math.max(0,g-Math.floor((C-g)/2)),g,!1))return[g,C];g+=s[0]+s[1],s.copyWithin(0,2,2+f-1),s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,y=!y}throw new ce}static toNarrowWidePattern(i){let s=i.length,l=0,u;do{let f=2147483647;for(let x of i)x<f&&x>l&&(f=x);l=f,u=0;let g=0,y=0;for(let x=0;x<s;x++){let C=i[x];C>l&&(y|=1<<s-1-x,u++,g+=C)}if(u===3){for(let x=0;x<s&&u>0;x++){let C=i[x];if(C>l&&(u--,C*2>=g))return-1}return y}}while(u>3);return-1}static patternToChar(i){for(let s=0;s<Yt.CHARACTER_ENCODINGS.length;s++)if(Yt.CHARACTER_ENCODINGS[s]===i)return Yt.ALPHABET_STRING.charAt(s);if(i===Yt.ASTERISK_ENCODING)return"*";throw new ce}static decodeExtended(i){let s=i.length,l="";for(let u=0;u<s;u++){let f=i.charAt(u);if(f==="+"||f==="$"||f==="%"||f==="/"){let g=i.charAt(u+1),y="\0";switch(f){case"+":if(g>="A"&&g<="Z")y=String.fromCharCode(g.charCodeAt(0)+32);else throw new B;break;case"$":if(g>="A"&&g<="Z")y=String.fromCharCode(g.charCodeAt(0)-64);else throw new B;break;case"%":if(g>="A"&&g<="E")y=String.fromCharCode(g.charCodeAt(0)-38);else if(g>="F"&&g<="J")y=String.fromCharCode(g.charCodeAt(0)-11);else if(g>="K"&&g<="O")y=String.fromCharCode(g.charCodeAt(0)+16);else if(g>="P"&&g<="T")y=String.fromCharCode(g.charCodeAt(0)+43);else if(g==="U")y="\0";else if(g==="V")y="@";else if(g==="W")y="`";else if(g==="X"||g==="Y"||g==="Z")y="";else throw new B;break;case"/":if(g>="A"&&g<="O")y=String.fromCharCode(g.charCodeAt(0)-32);else if(g==="Z")y=":";else throw new B;break}l+=y,u++}else l+=f}return l}}Yt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Yt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Yt.ASTERISK_ENCODING=148;class rt extends Xt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,s,l){let u=this.decodeStart(s),f=this.decodeEnd(s),g=new G;rt.decodeMiddle(s,u[1],f[0],g);let y=g.toString(),x=null;l!=null&&(x=l.get(Te.ALLOWED_LENGTHS)),x==null&&(x=rt.DEFAULT_ALLOWED_LENGTHS);let C=y.length,I=!1,M=0;for(let Q of x){if(C===Q){I=!0;break}Q>M&&(M=Q)}if(!I&&C>M&&(I=!0),!I)throw new B;const L=[new Fe(u[1],i),new Fe(f[0],i)];return new Be(y,null,0,L,De.ITF,new Date().getTime())}static decodeMiddle(i,s,l,u){let f=new Int32Array(10),g=new Int32Array(5),y=new Int32Array(5);for(f.fill(0),g.fill(0),y.fill(0);s<l;){Xt.recordPattern(i,s,f);for(let C=0;C<5;C++){let I=2*C;g[C]=f[I],y[C]=f[I+1]}let x=rt.decodeDigit(g);u.append(x.toString()),x=this.decodeDigit(y),u.append(x.toString()),f.forEach(function(C){s+=C})}}decodeStart(i){let s=rt.skipWhiteSpace(i),l=rt.findGuardPattern(i,s,rt.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(i,l[0]),l}validateQuietZone(i,s){let l=this.narrowLineWidth*10;l=l<s?l:s;for(let u=s-1;l>0&&u>=0&&!i.get(u);u--)l--;if(l!==0)throw new ce}static skipWhiteSpace(i){const s=i.getSize(),l=i.getNextSet(0);if(l===s)throw new ce;return l}decodeEnd(i){i.reverse();try{let s=rt.skipWhiteSpace(i),l;try{l=rt.findGuardPattern(i,s,rt.END_PATTERN_REVERSED[0])}catch(f){f instanceof ce&&(l=rt.findGuardPattern(i,s,rt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,l[0]);let u=l[0];return l[0]=i.getSize()-l[1],l[1]=i.getSize()-u,l}finally{i.reverse()}}static findGuardPattern(i,s,l){let u=l.length,f=new Int32Array(u),g=i.getSize(),y=!1,x=0,C=s;f.fill(0);for(let I=s;I<g;I++)if(i.get(I)!==y)f[x]++;else{if(x===u-1){if(Xt.patternMatchVariance(f,l,rt.MAX_INDIVIDUAL_VARIANCE)<rt.MAX_AVG_VARIANCE)return[C,I];C+=f[0]+f[1],re.arraycopy(f,2,f,0,x-1),f[x-1]=0,f[x]=0,x--}else x++;f[x]=1,y=!y}throw new ce}static decodeDigit(i){let s=rt.MAX_AVG_VARIANCE,l=-1,u=rt.PATTERNS.length;for(let f=0;f<u;f++){let g=rt.PATTERNS[f],y=Xt.patternMatchVariance(i,g,rt.MAX_INDIVIDUAL_VARIANCE);y<s?(s=y,l=f):y===s&&(l=-1)}if(l>=0)return l%10;throw new ce}}rt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],rt.MAX_AVG_VARIANCE=.38,rt.MAX_INDIVIDUAL_VARIANCE=.5,rt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],rt.START_PATTERN=Int32Array.from([1,1,1,1]),rt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class hn extends Xt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let s=!1,l,u=0,f=Int32Array.from([0,0,0]);for(;!s;){f=Int32Array.from([0,0,0]),l=hn.findGuardPattern(i,u,!1,this.START_END_PATTERN,f);let g=l[0];u=l[1];let y=g-(u-g);y>=0&&(s=i.isRange(y,g,!1))}return l}static checkChecksum(i){return hn.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let s=i.length;if(s===0)return!1;let l=parseInt(i.charAt(s-1),10);return hn.getStandardUPCEANChecksum(i.substring(0,s-1))===l}static getStandardUPCEANChecksum(i){let s=i.length,l=0;for(let u=s-1;u>=0;u-=2){let f=i.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new B;l+=f}l*=3;for(let u=s-2;u>=0;u-=2){let f=i.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new B;l+=f}return(1e3-l)%10}static decodeEnd(i,s){return hn.findGuardPattern(i,s,!1,hn.START_END_PATTERN,new Int32Array(hn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,s,l,u){return this.findGuardPattern(i,s,l,u,new Int32Array(u.length))}static findGuardPattern(i,s,l,u,f){let g=i.getSize();s=l?i.getNextUnset(s):i.getNextSet(s);let y=0,x=s,C=u.length,I=l;for(let M=s;M<g;M++)if(i.get(M)!==I)f[y]++;else{if(y===C-1){if(Xt.patternMatchVariance(f,u,hn.MAX_INDIVIDUAL_VARIANCE)<hn.MAX_AVG_VARIANCE)return Int32Array.from([x,M]);x+=f[0]+f[1];let L=f.slice(2,f.length-1);for(let H=0;H<y-1;H++)f[H]=L[H];f[y-1]=0,f[y]=0,y--}else y++;f[y]=1,I=!I}throw new ce}static decodeDigit(i,s,l,u){this.recordPattern(i,l,s);let f=this.MAX_AVG_VARIANCE,g=-1,y=u.length;for(let x=0;x<y;x++){let C=u[x],I=Xt.patternMatchVariance(s,C,hn.MAX_INDIVIDUAL_VARIANCE);I<f&&(f=I,g=x)}if(g>=0)return g;throw new ce}}hn.MAX_AVG_VARIANCE=.48,hn.MAX_INDIVIDUAL_VARIANCE=.7,hn.START_END_PATTERN=Int32Array.from([1,1,1]),hn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),hn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),hn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Mr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,s,l){let u=this.decodeRowStringBuffer,f=this.decodeMiddle(s,l,u),g=u.toString(),y=Mr.parseExtensionString(g),x=[new Fe((l[0]+l[1])/2,i),new Fe(f,i)],C=new Be(g,null,0,x,De.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&C.putAllMetadata(y),C}decodeMiddle(i,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=i.getSize(),g=s[1],y=0;for(let C=0;C<5&&g<f;C++){let I=hn.decodeDigit(i,u,g,hn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+I%10);for(let M of u)g+=M;I>=10&&(y|=1<<4-C),C!==4&&(g=i.getNextSet(g),g=i.getNextUnset(g))}if(l.length!==5)throw new ce;let x=this.determineCheckDigit(y);if(Mr.extensionChecksum(l.toString())!==x)throw new ce;return g}static extensionChecksum(i){let s=i.length,l=0;for(let u=s-2;u>=0;u-=2)l+=i.charAt(u).charCodeAt(0)-48;l*=3;for(let u=s-1;u>=0;u-=2)l+=i.charAt(u).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(i){for(let s=0;s<10;s++)if(i===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new ce}static parseExtensionString(i){if(i.length!==5)return null;let s=Mr.parseExtension5String(i);return s==null?null:new Map([[wt.SUGGESTED_PRICE,s]])}static parseExtension5String(i){let s;switch(i.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let l=parseInt(i.substring(1)),u=(l/100).toString(),f=l%100,g=f<10?"0"+f:f.toString();return s+u+"."+g}}class xa{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,s,l){let u=this.decodeRowStringBuffer,f=this.decodeMiddle(s,l,u),g=u.toString(),y=xa.parseExtensionString(g),x=[new Fe((l[0]+l[1])/2,i),new Fe(f,i)],C=new Be(g,null,0,x,De.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&C.putAllMetadata(y),C}decodeMiddle(i,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=i.getSize(),g=s[1],y=0;for(let x=0;x<2&&g<f;x++){let C=hn.decodeDigit(i,u,g,hn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+C%10);for(let I of u)g+=I;C>=10&&(y|=1<<1-x),x!==1&&(g=i.getNextSet(g),g=i.getNextUnset(g))}if(l.length!==2)throw new ce;if(parseInt(l.toString())%4!==y)throw new ce;return g}static parseExtensionString(i){return i.length!==2?null:new Map([[wt.ISSUE_NUMBER,parseInt(i)]])}}class mr{static decodeRow(i,s,l){let u=hn.findGuardPattern(s,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Mr().decodeRow(i,s,u)}catch{return new xa().decodeRow(i,s,u)}}}mr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class xt extends hn{constructor(){super(),this.decodeRowStringBuffer="",xt.L_AND_G_PATTERNS=xt.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let s=xt.L_PATTERNS[i-10],l=new Int32Array(s.length);for(let u=0;u<s.length;u++)l[u]=s[s.length-u-1];xt.L_AND_G_PATTERNS[i]=l}}decodeRow(i,s,l){let u=xt.findStartGuardPattern(s),f=l==null?null:l.get(Te.NEED_RESULT_POINT_CALLBACK);if(f!=null){const Ie=new Fe((u[0]+u[1])/2,i);f.foundPossibleResultPoint(Ie)}let g=this.decodeMiddle(s,u,this.decodeRowStringBuffer),y=g.rowOffset,x=g.resultString;if(f!=null){const Ie=new Fe(y,i);f.foundPossibleResultPoint(Ie)}let C=this.decodeEnd(s,y);if(f!=null){const Ie=new Fe((C[0]+C[1])/2,i);f.foundPossibleResultPoint(Ie)}let I=C[1],M=I+(I-C[0]);if(M>=s.getSize()||!s.isRange(I,M,!1))throw new ce;let L=x.toString();if(L.length<8)throw new B;if(!xt.checkChecksum(L))throw new j;let H=(u[1]+u[0])/2,Q=(C[1]+C[0])/2,J=this.getBarcodeFormat(),ie=[new Fe(H,i),new Fe(Q,i)],de=new Be(L,null,0,ie,J,new Date().getTime()),Me=0;try{let Ie=mr.decodeRow(i,s,C[1]);de.putMetadata(wt.UPC_EAN_EXTENSION,Ie.getText()),de.putAllMetadata(Ie.getResultMetadata()),de.addResultPoints(Ie.getResultPoints()),Me=Ie.getText().length}catch{}let Oe=l==null?null:l.get(Te.ALLOWED_EAN_EXTENSIONS);if(Oe!=null){let Ie=!1;for(let _t in Oe)if(Me.toString()===_t){Ie=!0;break}if(!Ie)throw new ce}return de}decodeEnd(i,s){return xt.findGuardPattern(i,s,!1,xt.START_END_PATTERN,new Int32Array(xt.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return xt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let s=i.length;if(s===0)return!1;let l=parseInt(i.charAt(s-1),10);return xt.getStandardUPCEANChecksum(i.substring(0,s-1))===l}static getStandardUPCEANChecksum(i){let s=i.length,l=0;for(let u=s-1;u>=0;u-=2){let f=i.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new B;l+=f}l*=3;for(let u=s-2;u>=0;u-=2){let f=i.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new B;l+=f}return(1e3-l)%10}}class an extends xt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=i.getSize(),g=s[1],y=0;for(let C=0;C<6&&g<f;C++){let I=xt.decodeDigit(i,u,g,xt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+I%10);for(let M of u)g+=M;I>=10&&(y|=1<<5-C)}l=an.determineFirstDigit(l,y),g=xt.findGuardPattern(i,g,!0,xt.MIDDLE_PATTERN,new Int32Array(xt.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<6&&g<f;C++){let I=xt.decodeDigit(i,u,g,xt.L_PATTERNS);l+=String.fromCharCode(48+I);for(let M of u)g+=M}return{rowOffset:g,resultString:l}}getBarcodeFormat(){return De.EAN_13}static determineFirstDigit(i,s){for(let l=0;l<10;l++)if(s===this.FIRST_DIGIT_ENCODINGS[l])return i=String.fromCharCode(48+l)+i,i;throw new ce}}an.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class pr extends xt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,s,l){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=i.getSize(),g=s[1];for(let x=0;x<4&&g<f;x++){let C=xt.decodeDigit(i,u,g,xt.L_PATTERNS);l+=String.fromCharCode(48+C);for(let I of u)g+=I}g=xt.findGuardPattern(i,g,!0,xt.MIDDLE_PATTERN,new Int32Array(xt.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<4&&g<f;x++){let C=xt.decodeDigit(i,u,g,xt.L_PATTERNS);l+=String.fromCharCode(48+C);for(let I of u)g+=I}return{rowOffset:g,resultString:l}}getBarcodeFormat(){return De.EAN_8}}class yr extends xt{constructor(){super(...arguments),this.ean13Reader=new an}getBarcodeFormat(){return De.UPC_A}decode(i,s){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,s,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,s,l))}decodeMiddle(i,s,l){return this.ean13Reader.decodeMiddle(i,s,l)}maybeReturnResult(i){let s=i.getText();if(s.charAt(0)==="0"){let l=new Be(s.substring(1),null,null,i.getResultPoints(),De.UPC_A);return i.getResultMetadata()!=null&&l.putAllMetadata(i.getResultMetadata()),l}else throw new ce}reset(){this.ean13Reader.reset()}}class On extends xt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,s,l){const u=this.decodeMiddleCounters.map(C=>C);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const f=i.getSize();let g=s[1],y=0;for(let C=0;C<6&&g<f;C++){const I=On.decodeDigit(i,u,g,On.L_AND_G_PATTERNS);l+=String.fromCharCode(48+I%10);for(let M of u)g+=M;I>=10&&(y|=1<<5-C)}let x=On.determineNumSysAndCheckDigit(l,y);return{rowOffset:g,resultString:x}}decodeEnd(i,s){return On.findGuardPatternWithoutCounters(i,s,!0,On.MIDDLE_END_PATTERN)}checkChecksum(i){return xt.checkChecksum(On.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,s){for(let l=0;l<=1;l++)for(let u=0;u<10;u++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][u]){let f=String.fromCharCode(48+l),g=String.fromCharCode(48+u);return f+i+g}throw ce.getNotFoundInstance()}getBarcodeFormat(){return De.UPC_E}static convertUPCEtoUPCA(i){const s=i.slice(1,7).split("").map(f=>f.charCodeAt(0)),l=new G;l.append(i.charAt(0));let u=s[5];switch(u){case 0:case 1:case 2:l.appendChars(s,0,2),l.append(u),l.append("0000"),l.appendChars(s,2,3);break;case 3:l.appendChars(s,0,3),l.append("00000"),l.appendChars(s,3,2);break;case 4:l.appendChars(s,0,4),l.append("00000"),l.append(s[4]);break;default:l.appendChars(s,0,5),l.append("0000"),l.append(u);break}return i.length>=8&&l.append(i.charAt(7)),l.toString()}}On.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),On.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class wo extends Xt{constructor(i){super();let s=i==null?null:i.get(Te.POSSIBLE_FORMATS),l=[];o(s)?(l.push(new an),l.push(new yr),l.push(new pr),l.push(new On)):(s.indexOf(De.EAN_13)>-1&&l.push(new an),s.indexOf(De.UPC_A)>-1&&l.push(new yr),s.indexOf(De.EAN_8)>-1&&l.push(new pr),s.indexOf(De.UPC_E)>-1&&l.push(new On)),this.readers=l}decodeRow(i,s,l){for(let u of this.readers)try{const f=u.decodeRow(i,s,l),g=f.getBarcodeFormat()===De.EAN_13&&f.getText().charAt(0)==="0",y=l==null?null:l.get(Te.POSSIBLE_FORMATS),x=y==null||y.includes(De.UPC_A);if(g&&x){const C=f.getRawBytes(),I=new Be(f.getText().substring(1),C,C?C.length:null,f.getResultPoints(),De.UPC_A);return I.putAllMetadata(f.getResultMetadata()),I}return f}catch{}throw new ce}reset(){for(let i of this.readers)i.reset()}}class Gn extends Xt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,s){for(let l=0;l<s.length;l++)if(Xt.patternMatchVariance(i,s[l],Gn.MAX_INDIVIDUAL_VARIANCE)<Gn.MAX_AVG_VARIANCE)return l;throw new ce}static count(i){return Ze.sum(new Int32Array(i))}static increment(i,s){let l=0,u=s[0];for(let f=1;f<i.length;f++)s[f]>u&&(u=s[f],l=f);i[l]++}static decrement(i,s){let l=0,u=s[0];for(let f=1;f<i.length;f++)s[f]<u&&(u=s[f],l=f);i[l]--}static isFinderPattern(i){let s=i[0]+i[1],l=s+i[2]+i[3],u=s/l;if(u>=Gn.MIN_FINDER_PATTERN_RATIO&&u<=Gn.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;for(let y of i)y>g&&(g=y),y<f&&(f=y);return g<10*f}return!1}}Gn.MAX_AVG_VARIANCE=.2,Gn.MAX_INDIVIDUAL_VARIANCE=.45,Gn.MIN_FINDER_PATTERN_RATIO=9.5/12,Gn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ei{constructor(i,s){this.value=i,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof Ei))return!1;const s=i;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Lr{constructor(i,s,l,u,f){this.value=i,this.startEnd=s,this.value=i,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new Fe(l,f)),this.resultPoints.push(new Fe(u,f))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof Lr))return!1;const s=i;return this.value===s.value}hashCode(){return this.value}}class $i{constructor(){}static getRSSvalue(i,s,l){let u=0;for(let x of i)u+=x;let f=0,g=0,y=i.length;for(let x=0;x<y-1;x++){let C;for(C=1,g|=1<<x;C<i[x];C++,g&=~(1<<x)){let I=$i.combins(u-C-1,y-x-2);if(l&&g===0&&u-C-(y-x-1)>=y-x-1&&(I-=$i.combins(u-C-(y-x),y-x-2)),y-x-1>1){let M=0;for(let L=u-C-(y-x-2);L>s;L--)M+=$i.combins(u-C-L-1,y-x-3);I-=M*(y-1-x)}else u-C>s&&I--;f+=I}u-=C}return f}static combins(i,s){let l,u;i-s>s?(u=s,l=i-s):(u=i-s,l=s);let f=1,g=1;for(let y=i;y>l;y--)f*=y,g<=u&&(f/=g,g++);for(;g<=u;)f/=g,g++;return f}}class Ms{static buildBitArray(i){let s=i.length*2-1;i[i.length-1].getRightChar()==null&&(s-=1);let l=12*s,u=new pe(l),f=0,y=i[0].getRightChar().getValue();for(let x=11;x>=0;--x)(y&1<<x)!=0&&u.set(f),f++;for(let x=1;x<i.length;++x){let C=i[x],I=C.getLeftChar().getValue();for(let M=11;M>=0;--M)(I&1<<M)!=0&&u.set(f),f++;if(C.getRightChar()!=null){let M=C.getRightChar().getValue();for(let L=11;L>=0;--L)(M&1<<L)!=0&&u.set(f),f++}}return u}}class Er{constructor(i,s){s?this.decodedInformation=null:(this.finished=i,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Ls{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class Bn extends Ls{constructor(i,s){super(i),this.value=s}getValue(){return this.value}isFNC1(){return this.value===Bn.FNC1}}Bn.FNC1="$";class _i extends Ls{constructor(i,s,l){super(i),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class xi extends Ls{constructor(i,s,l){if(super(i),s<0||s>10||l<0||l>10)throw new B;this.firstDigit=s,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===xi.FNC1}isSecondDigitFNC1(){return this.secondDigit===xi.FNC1}isAnyFNC1(){return this.firstDigit===xi.FNC1||this.secondDigit===xi.FNC1}}xi.FNC1=10;class Ve{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new ce;let s=i.substring(0,2);for(let f of Ve.TWO_DIGIT_DATA_LENGTH)if(f[0]===s)return f[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(2,f[2],i):Ve.processFixedAI(2,f[1],i);if(i.length<3)throw new ce;let l=i.substring(0,3);for(let f of Ve.THREE_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(3,f[2],i):Ve.processFixedAI(3,f[1],i);for(let f of Ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(4,f[2],i):Ve.processFixedAI(4,f[1],i);if(i.length<4)throw new ce;let u=i.substring(0,4);for(let f of Ve.FOUR_DIGIT_DATA_LENGTH)if(f[0]===u)return f[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(4,f[2],i):Ve.processFixedAI(4,f[1],i);throw new ce}static processFixedAI(i,s,l){if(l.length<i)throw new ce;let u=l.substring(0,i);if(l.length<i+s)throw new ce;let f=l.substring(i,i+s),g=l.substring(i+s),y="("+u+")"+f,x=Ve.parseFieldsInGeneralPurpose(g);return x==null?y:y+x}static processVariableAI(i,s,l){let u=l.substring(0,i),f;l.length<i+s?f=l.length:f=i+s;let g=l.substring(i,f),y=l.substring(f),x="("+u+")"+g,C=Ve.parseFieldsInGeneralPurpose(y);return C==null?x:x+C}}Ve.VARIABLE_LENGTH=[],Ve.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ve.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ve.VARIABLE_LENGTH,20],["22",Ve.VARIABLE_LENGTH,29],["30",Ve.VARIABLE_LENGTH,8],["37",Ve.VARIABLE_LENGTH,8],["90",Ve.VARIABLE_LENGTH,30],["91",Ve.VARIABLE_LENGTH,30],["92",Ve.VARIABLE_LENGTH,30],["93",Ve.VARIABLE_LENGTH,30],["94",Ve.VARIABLE_LENGTH,30],["95",Ve.VARIABLE_LENGTH,30],["96",Ve.VARIABLE_LENGTH,30],["97",Ve.VARIABLE_LENGTH,3],["98",Ve.VARIABLE_LENGTH,30],["99",Ve.VARIABLE_LENGTH,30]],Ve.THREE_DIGIT_DATA_LENGTH=[["240",Ve.VARIABLE_LENGTH,30],["241",Ve.VARIABLE_LENGTH,30],["242",Ve.VARIABLE_LENGTH,6],["250",Ve.VARIABLE_LENGTH,30],["251",Ve.VARIABLE_LENGTH,30],["253",Ve.VARIABLE_LENGTH,17],["254",Ve.VARIABLE_LENGTH,20],["400",Ve.VARIABLE_LENGTH,30],["401",Ve.VARIABLE_LENGTH,30],["402",17],["403",Ve.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ve.VARIABLE_LENGTH,20],["421",Ve.VARIABLE_LENGTH,15],["422",3],["423",Ve.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ve.VARIABLE_LENGTH,15],["391",Ve.VARIABLE_LENGTH,18],["392",Ve.VARIABLE_LENGTH,15],["393",Ve.VARIABLE_LENGTH,18],["703",Ve.VARIABLE_LENGTH,30]],Ve.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ve.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ve.VARIABLE_LENGTH,20],["8003",Ve.VARIABLE_LENGTH,30],["8004",Ve.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ve.VARIABLE_LENGTH,30],["8008",Ve.VARIABLE_LENGTH,12],["8018",18],["8020",Ve.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ve.VARIABLE_LENGTH,70],["8200",Ve.VARIABLE_LENGTH,70]];class ui{constructor(i){this.buffer=new G,this.information=i}decodeAllCodes(i,s){let l=s,u=null;do{let f=this.decodeGeneralPurposeField(l,u),g=Ve.parseFieldsInGeneralPurpose(f.getNewString());if(g!=null&&i.append(g),f.isRemaining()?u=""+f.getRemainingValue():u=null,l===f.getNewPosition())break;l=f.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let s=i;s<i+3;++s)if(this.information.get(s))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let f=this.extractNumericValueFromBitArray(i,4);return f===0?new xi(this.information.getSize(),xi.FNC1,xi.FNC1):new xi(this.information.getSize(),f-1,xi.FNC1)}let s=this.extractNumericValueFromBitArray(i,7),l=(s-8)/11,u=(s-8)%11;return new xi(i+7,l,u)}extractNumericValueFromBitArray(i,s){return ui.extractNumericValueFromBitArray(this.information,i,s)}static extractNumericValueFromBitArray(i,s,l){let u=0;for(let f=0;f<l;++f)i.get(s+f)&&(u|=1<<l-f-1);return u}decodeGeneralPurposeField(i,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(i);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new _i(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new _i(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,s;do{let l=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),i=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),i=s.isFinished()):(s=this.parseNumericBlock(),i=s.isFinished()),!(l!==this.current.getPosition())&&!i)break}while(!i);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let s;return i.isSecondDigitFNC1()?s=new _i(this.current.getPosition(),this.buffer.toString()):s=new _i(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new Er(!0,s)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let s=new _i(this.current.getPosition(),this.buffer.toString());return new Er(!0,s)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Er(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let s=new _i(this.current.getPosition(),this.buffer.toString());return new Er(!0,s)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Er(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let s=new _i(this.current.getPosition(),this.buffer.toString());return new Er(!0,s)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Er(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(i,5);if(s>=5&&s<16)return!0;if(i+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<116)return!0;if(i+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(i,8);return u>=232&&u<253}decodeIsoIec646(i){let s=this.extractNumericValueFromBitArray(i,5);if(s===15)return new Bn(i+5,Bn.FNC1);if(s>=5&&s<15)return new Bn(i+5,"0"+(s-5));let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<90)return new Bn(i+7,""+(l+1));if(l>=90&&l<116)return new Bn(i+7,""+(l+7));let u=this.extractNumericValueFromBitArray(i,8),f;switch(u){case 232:f="!";break;case 233:f='"';break;case 234:f="%";break;case 235:f="&";break;case 236:f="'";break;case 237:f="(";break;case 238:f=")";break;case 239:f="*";break;case 240:f="+";break;case 241:f=",";break;case 242:f="-";break;case 243:f=".";break;case 244:f="/";break;case 245:f=":";break;case 246:f=";";break;case 247:f="<";break;case 248:f="=";break;case 249:f=">";break;case 250:f="?";break;case 251:f="_";break;case 252:f=" ";break;default:throw new B}return new Bn(i+8,f)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(i,5);if(s>=5&&s<16)return!0;if(i+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,6);return l>=16&&l<63}decodeAlphanumeric(i){let s=this.extractNumericValueFromBitArray(i,5);if(s===15)return new Bn(i+5,Bn.FNC1);if(s>=5&&s<15)return new Bn(i+5,"0"+(s-5));let l=this.extractNumericValueFromBitArray(i,6);if(l>=32&&l<58)return new Bn(i+6,""+(l+33));let u;switch(l){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new Li("Decoding invalid alphanumeric value: "+l)}return new Bn(i+6,u)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let s=0;s<5&&s+i<this.information.getSize();++s)if(s===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+s))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let s=i;s<i+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let s=0;s<4&&s+i<this.information.getSize();++s)if(this.information.get(i+s))return!1;return!0}}class Tn{constructor(i){this.information=i,this.generalDecoder=new ui(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class jt extends Tn{constructor(i){super(i)}encodeCompressedGtin(i,s){i.append("(01)");let l=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,s,l)}encodeCompressedGtinWithoutAI(i,s,l){for(let u=0;u<4;++u){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*u,10);f/100===0&&i.append("0"),f/10===0&&i.append("0"),i.append(f)}jt.appendCheckDigit(i,l)}static appendCheckDigit(i,s){let l=0;for(let u=0;u<13;u++){let f=i.charAt(u+s).charCodeAt(0)-48;l+=(u&1)===0?3*f:f}l=10-l%10,l===10&&(l=0),i.append(l)}}jt.GTIN_SIZE=40;class Ai extends jt{constructor(i){super(i)}parseInformation(){let i=new G;i.append("(01)");let s=i.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(Ai.HEADER_SIZE,4);return i.append(l),this.encodeCompressedGtinWithoutAI(i,Ai.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(i,Ai.HEADER_SIZE+44)}}Ai.HEADER_SIZE=4;class is extends Tn{constructor(i){super(i)}parseInformation(){let i=new G;return this.getGeneralDecoder().decodeAllCodes(i,is.HEADER_SIZE)}}is.HEADER_SIZE=5;class Aa extends jt{constructor(i){super(i)}encodeCompressedWeight(i,s,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s,l);this.addWeightCode(i,u);let f=this.checkWeight(u),g=1e5;for(let y=0;y<5;++y)f/g===0&&i.append("0"),g/=10;i.append(f)}}class Xi extends Aa{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=Xi.HEADER_SIZE+Aa.GTIN_SIZE+Xi.WEIGHT_SIZE)throw new ce;let i=new G;return this.encodeCompressedGtin(i,Xi.HEADER_SIZE),this.encodeCompressedWeight(i,Xi.HEADER_SIZE+Aa.GTIN_SIZE,Xi.WEIGHT_SIZE),i.toString()}}Xi.HEADER_SIZE=5,Xi.WEIGHT_SIZE=15;class ol extends Xi{constructor(i){super(i)}addWeightCode(i,s){i.append("(3103)")}checkWeight(i){return i}}class Pr extends Xi{constructor(i){super(i)}addWeightCode(i,s){s<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class wi extends jt{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<wi.HEADER_SIZE+jt.GTIN_SIZE)throw new ce;let i=new G;this.encodeCompressedGtin(i,wi.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(wi.HEADER_SIZE+jt.GTIN_SIZE,wi.LAST_DIGIT_SIZE);i.append("(392"),i.append(s),i.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(wi.HEADER_SIZE+jt.GTIN_SIZE+wi.LAST_DIGIT_SIZE,null);return i.append(l.getNewString()),i.toString()}}wi.HEADER_SIZE=8,wi.LAST_DIGIT_SIZE=2;class mn extends jt{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<mn.HEADER_SIZE+jt.GTIN_SIZE)throw new ce;let i=new G;this.encodeCompressedGtin(i,mn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(mn.HEADER_SIZE+jt.GTIN_SIZE,mn.LAST_DIGIT_SIZE);i.append("(393"),i.append(s),i.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(mn.HEADER_SIZE+jt.GTIN_SIZE+mn.LAST_DIGIT_SIZE,mn.FIRST_THREE_DIGITS_SIZE);l/100==0&&i.append("0"),l/10==0&&i.append("0"),i.append(l);let u=this.getGeneralDecoder().decodeGeneralPurposeField(mn.HEADER_SIZE+jt.GTIN_SIZE+mn.LAST_DIGIT_SIZE+mn.FIRST_THREE_DIGITS_SIZE,null);return i.append(u.getNewString()),i.toString()}}mn.HEADER_SIZE=8,mn.LAST_DIGIT_SIZE=2,mn.FIRST_THREE_DIGITS_SIZE=10;class St extends Aa{constructor(i,s,l){super(i),this.dateCode=l,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=St.HEADER_SIZE+St.GTIN_SIZE+St.WEIGHT_SIZE+St.DATE_SIZE)throw new ce;let i=new G;return this.encodeCompressedGtin(i,St.HEADER_SIZE),this.encodeCompressedWeight(i,St.HEADER_SIZE+St.GTIN_SIZE,St.WEIGHT_SIZE),this.encodeCompressedDate(i,St.HEADER_SIZE+St.GTIN_SIZE+St.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,s){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(s,St.DATE_SIZE);if(l==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let u=l%32;l/=32;let f=l%12+1;l/=12;let g=l;g/10==0&&i.append("0"),i.append(g),f/10==0&&i.append("0"),i.append(f),u/10==0&&i.append("0"),i.append(u)}addWeightCode(i,s){i.append("("),i.append(this.firstAIdigits),i.append(s/1e5),i.append(")")}checkWeight(i){return i%1e5}}St.HEADER_SIZE=8,St.WEIGHT_SIZE=20,St.DATE_SIZE=16;function Pi(D){try{if(D.get(1))return new Ai(D);if(!D.get(2))return new is(D);switch(ui.extractNumericValueFromBitArray(D,1,4)){case 4:return new ol(D);case 5:return new Pr(D)}switch(ui.extractNumericValueFromBitArray(D,1,5)){case 12:return new wi(D);case 13:return new mn(D)}switch(ui.extractNumericValueFromBitArray(D,1,7)){case 56:return new St(D,"310","11");case 57:return new St(D,"320","11");case 58:return new St(D,"310","13");case 59:return new St(D,"320","13");case 60:return new St(D,"310","15");case 61:return new St(D,"320","15");case 62:return new St(D,"310","17");case 63:return new St(D,"320","17")}}catch(i){throw console.log(i),new Li("unknown decoder: "+D)}}class si{constructor(i,s,l,u){this.leftchar=i,this.rightchar=s,this.finderpattern=l,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,s){return i instanceof si?si.equalsOrNull(i.leftchar,s.leftchar)&&si.equalsOrNull(i.rightchar,s.rightchar)&&si.equalsOrNull(i.finderpattern,s.finderpattern):!1}static equalsOrNull(i,s){return i===null?s===null:si.equals(i,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Cn{constructor(i,s,l){this.pairs=i,this.rowNumber=s,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,s){return i instanceof Cn?this.checkEqualitity(i,s)&&i.wasReversed===s.wasReversed:!1}checkEqualitity(i,s){if(!i||!s)return;let l;return i.forEach((u,f)=>{s.forEach(g=>{u.getLeftChar().getValue()===g.getLeftChar().getValue()&&u.getRightChar().getValue()===g.getRightChar().getValue()&&u.getFinderPatter().getValue()===g.getFinderPatter().getValue()&&(l=!0)})}),l}}class Se extends Gn{constructor(i){super(...arguments),this.pairs=new Array(Se.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,s,l){this.pairs.length=0,this.startFromEven=!1;try{return Se.constructResult(this.decodeRow2pairs(i,s))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,Se.constructResult(this.decodeRow2pairs(i,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,s){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,i))}catch(f){if(f instanceof ce){if(!this.pairs.length)throw new ce;l=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(i,!1),u){let f=this.checkRowsBoolean(!1);if(f!=null||(f=this.checkRowsBoolean(!0),f!=null))return f}throw new ce}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return i&&(this.rows=this.rows.reverse()),s}checkRows(i,s){for(let l=s;l<this.rows.length;l++){let u=this.rows[l];this.pairs.length=0;for(let g of i)this.pairs.push(g.getPairs());if(this.pairs.push(u.getPairs()),!Se.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let f=new Array(i);f.push(u);try{return this.checkRows(f,l+1)}catch(g){this.verbose&&console.log(g)}}throw new ce}static isValidSequence(i){for(let s of Se.FINDER_PATTERN_SEQUENCES){if(i.length>s.length)continue;let l=!0;for(let u=0;u<i.length;u++)if(i[u].getFinderPattern().getValue()!=s[u]){l=!1;break}if(l)return!0}return!1}storeRow(i,s){let l=0,u=!1,f=!1;for(;l<this.rows.length;){let g=this.rows[l];if(g.getRowNumber()>i){f=g.isEquivalent(this.pairs);break}u=g.isEquivalent(this.pairs),l++}f||u||Se.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new Cn(this.pairs,i,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,s){for(let l of s)if(l.getPairs().length!==i.length){for(let u of l.getPairs())for(let f of i)if(si.equals(u,f))break}}static isPartialRow(i,s){for(let l of s){let u=!0;for(let f of i){let g=!1;for(let y of l.getPairs())if(f.equals(y)){g=!0;break}if(!g){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(i){let s=Ms.buildBitArray(i),u=Pi(s).parseInformation(),f=i[0].getFinderPattern().getResultPoints(),g=i[i.length-1].getFinderPattern().getResultPoints(),y=[f[0],f[1],g[0],g[1]];return new Be(u,null,null,y,De.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),s=i.getLeftChar(),l=i.getRightChar();if(l==null)return!1;let u=l.getChecksumPortion(),f=2;for(let y=1;y<this.pairs.size();++y){let x=this.pairs.get(y);u+=x.getLeftChar().getChecksumPortion(),f++;let C=x.getRightChar();C!=null&&(u+=C.getChecksumPortion(),f++)}return u%=211,211*(f-4)+u==s.getValue()}static getNextSecondBar(i,s){let l;return i.get(s)?(l=i.getNextUnset(s),l=i.getNextSet(l)):(l=i.getNextSet(s),l=i.getNextUnset(l)),l}retrieveNextPair(i,s,l){let u=s.length%2==0;this.startFromEven&&(u=!u);let f,g=!0,y=-1;do this.findNextPair(i,s,y),f=this.parseFoundFinderPattern(i,l,u),f==null?y=Se.getNextSecondBar(i,this.startEnd[0]):g=!1;while(g);let x=this.decodeDataCharacter(i,f,u,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new ce;let C;try{C=this.decodeDataCharacter(i,f,u,!1)}catch(I){C=null,this.verbose&&console.log(I)}return new si(x,C,f,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,s,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=i.getSize(),g;l>=0?g=l:this.isEmptyPair(s)?g=0:g=s[s.length-1].getFinderPattern().getStartEnd()[1];let y=s.length%2!=0;this.startFromEven&&(y=!y);let x=!1;for(;g<f&&(x=!i.get(g),!!x);)g++;let C=0,I=g;for(let M=g;M<f;M++)if(i.get(M)!=x)u[C]++;else{if(C==3){if(y&&Se.reverseCounters(u),Se.isFinderPattern(u)){this.startEnd[0]=I,this.startEnd[1]=M;return}y&&Se.reverseCounters(u),I+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,C--}else C++;u[C]=1,x=!x}throw new ce}static reverseCounters(i){let s=i.length;for(let l=0;l<s/2;++l){let u=i[l];i[l]=i[s-l-1],i[s-l-1]=u}}parseFoundFinderPattern(i,s,l){let u,f,g;if(l){let C=this.startEnd[0]-1;for(;C>=0&&!i.get(C);)C--;C++,u=this.startEnd[0]-C,f=C,g=this.startEnd[1]}else f=this.startEnd[0],g=i.getNextUnset(this.startEnd[1]+1),u=g-this.startEnd[1];let y=this.getDecodeFinderCounters();re.arraycopy(y,0,y,1,y.length-1),y[0]=u;let x;try{x=this.parseFinderValue(y,Se.FINDER_PATTERNS)}catch{return null}return new Lr(x,[f,g],f,g,s)}decodeDataCharacter(i,s,l,u){let f=this.getDataCharacterCounters();for(let tn=0;tn<f.length;tn++)f[tn]=0;if(u)Se.recordPatternInReverse(i,s.getStartEnd()[0],f);else{Se.recordPattern(i,s.getStartEnd()[1],f);for(let tn=0,ai=f.length-1;tn<ai;tn++,ai--){let Zi=f[tn];f[tn]=f[ai],f[ai]=Zi}}let g=17,y=Ze.sum(new Int32Array(f))/g,x=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(y-x)/x>.3)throw new ce;let C=this.getOddCounts(),I=this.getEvenCounts(),M=this.getOddRoundingErrors(),L=this.getEvenRoundingErrors();for(let tn=0;tn<f.length;tn++){let ai=1*f[tn]/y,Zi=ai+.5;if(Zi<1){if(ai<.3)throw new ce;Zi=1}else if(Zi>8){if(ai>8.7)throw new ce;Zi=8}let Ia=tn/2;(tn&1)==0?(C[Ia]=Zi,M[Ia]=ai-Zi):(I[Ia]=Zi,L[Ia]=ai-Zi)}this.adjustOddEvenCounts(g);let H=4*s.getValue()+(l?0:2)+(u?0:1)-1,Q=0,J=0;for(let tn=C.length-1;tn>=0;tn--){if(Se.isNotA1left(s,l,u)){let ai=Se.WEIGHTS[H][2*tn];J+=C[tn]*ai}Q+=C[tn]}let ie=0;for(let tn=I.length-1;tn>=0;tn--)if(Se.isNotA1left(s,l,u)){let ai=Se.WEIGHTS[H][2*tn+1];ie+=I[tn]*ai}let de=J+ie;if((Q&1)!=0||Q>13||Q<4)throw new ce;let Me=(13-Q)/2,Oe=Se.SYMBOL_WIDEST[Me],Ie=9-Oe,_t=$i.getRSSvalue(C,Oe,!0),ct=$i.getRSSvalue(I,Ie,!1),kn=Se.EVEN_TOTAL_SUBSET[Me],rr=Se.GSUM[Me],Si=_t*kn+ct+rr;return new Ei(Si,de)}static isNotA1left(i,s,l){return!(i.getValue()==0&&s&&l)}adjustOddEvenCounts(i){let s=Ze.sum(new Int32Array(this.getOddCounts())),l=Ze.sum(new Int32Array(this.getEvenCounts())),u=!1,f=!1;s>13?f=!0:s<4&&(u=!0);let g=!1,y=!1;l>13?y=!0:l<4&&(g=!0);let x=s+l-i,C=(s&1)==1,I=(l&1)==0;if(x==1)if(C){if(I)throw new ce;f=!0}else{if(!I)throw new ce;y=!0}else if(x==-1)if(C){if(I)throw new ce;u=!0}else{if(!I)throw new ce;g=!0}else if(x==0){if(C){if(!I)throw new ce;s<l?(u=!0,y=!0):(f=!0,g=!0)}else if(I)throw new ce}else throw new ce;if(u){if(f)throw new ce;Se.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Se.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(y)throw new ce;Se.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&Se.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Se.SYMBOL_WIDEST=[7,5,4,3,1],Se.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Se.GSUM=[0,348,1388,2948,3988],Se.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Se.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Se.FINDER_PAT_A=0,Se.FINDER_PAT_B=1,Se.FINDER_PAT_C=2,Se.FINDER_PAT_D=3,Se.FINDER_PAT_E=4,Se.FINDER_PAT_F=5,Se.FINDER_PATTERN_SEQUENCES=[[Se.FINDER_PAT_A,Se.FINDER_PAT_A],[Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B],[Se.FINDER_PAT_A,Se.FINDER_PAT_C,Se.FINDER_PAT_B,Se.FINDER_PAT_D],[Se.FINDER_PAT_A,Se.FINDER_PAT_E,Se.FINDER_PAT_B,Se.FINDER_PAT_D,Se.FINDER_PAT_C],[Se.FINDER_PAT_A,Se.FINDER_PAT_E,Se.FINDER_PAT_B,Se.FINDER_PAT_D,Se.FINDER_PAT_D,Se.FINDER_PAT_F],[Se.FINDER_PAT_A,Se.FINDER_PAT_E,Se.FINDER_PAT_B,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_F,Se.FINDER_PAT_F],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_D],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_E],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_F,Se.FINDER_PAT_F],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_E,Se.FINDER_PAT_F,Se.FINDER_PAT_F]],Se.MAX_PAIRS=11;class To extends Ei{constructor(i,s,l){super(i,s),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Gt extends Gn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,s,l){const u=this.decodePair(s,!1,i,l);Gt.addOrTally(this.possibleLeftPairs,u),s.reverse();let f=this.decodePair(s,!0,i,l);Gt.addOrTally(this.possibleRightPairs,f),s.reverse();for(let g of this.possibleLeftPairs)if(g.getCount()>1){for(let y of this.possibleRightPairs)if(y.getCount()>1&&Gt.checkChecksum(g,y))return Gt.constructResult(g,y)}throw new ce}static addOrTally(i,s){if(s==null)return;let l=!1;for(let u of i)if(u.getValue()===s.getValue()){u.incrementCount(),l=!0;break}l||i.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,s){let l=4537077*i.getValue()+s.getValue(),u=new String(l).toString(),f=new G;for(let C=13-u.length;C>0;C--)f.append("0");f.append(u);let g=0;for(let C=0;C<13;C++){let I=f.charAt(C).charCodeAt(0)-48;g+=(C&1)===0?3*I:I}g=10-g%10,g===10&&(g=0),f.append(g.toString());let y=i.getFinderPattern().getResultPoints(),x=s.getFinderPattern().getResultPoints();return new Be(f.toString(),null,0,[y[0],y[1],x[0],x[1]],De.RSS_14,new Date().getTime())}static checkChecksum(i,s){let l=(i.getChecksumPortion()+16*s.getChecksumPortion())%79,u=9*i.getFinderPattern().getValue()+s.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,l===u}decodePair(i,s,l,u){try{let f=this.findFinderPattern(i,s),g=this.parseFoundFinderPattern(i,l,s,f),y=u==null?null:u.get(Te.NEED_RESULT_POINT_CALLBACK);if(y!=null){let I=(f[0]+f[1])/2;s&&(I=i.getSize()-1-I),y.foundPossibleResultPoint(new Fe(I,l))}let x=this.decodeDataCharacter(i,g,!0),C=this.decodeDataCharacter(i,g,!1);return new To(1597*x.getValue()+C.getValue(),x.getChecksumPortion()+4*C.getChecksumPortion(),g)}catch{return null}}decodeDataCharacter(i,s,l){let u=this.getDataCharacterCounters();for(let ie=0;ie<u.length;ie++)u[ie]=0;if(l)Xt.recordPatternInReverse(i,s.getStartEnd()[0],u);else{Xt.recordPattern(i,s.getStartEnd()[1]+1,u);for(let ie=0,de=u.length-1;ie<de;ie++,de--){let Me=u[ie];u[ie]=u[de],u[de]=Me}}let f=l?16:15,g=Ze.sum(new Int32Array(u))/f,y=this.getOddCounts(),x=this.getEvenCounts(),C=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let ie=0;ie<u.length;ie++){let de=u[ie]/g,Me=Math.floor(de+.5);Me<1?Me=1:Me>8&&(Me=8);let Oe=Math.floor(ie/2);(ie&1)===0?(y[Oe]=Me,C[Oe]=de-Me):(x[Oe]=Me,I[Oe]=de-Me)}this.adjustOddEvenCounts(l,f);let M=0,L=0;for(let ie=y.length-1;ie>=0;ie--)L*=9,L+=y[ie],M+=y[ie];let H=0,Q=0;for(let ie=x.length-1;ie>=0;ie--)H*=9,H+=x[ie],Q+=x[ie];let J=L+3*H;if(l){if((M&1)!==0||M>12||M<4)throw new ce;let ie=(12-M)/2,de=Gt.OUTSIDE_ODD_WIDEST[ie],Me=9-de,Oe=$i.getRSSvalue(y,de,!1),Ie=$i.getRSSvalue(x,Me,!0),_t=Gt.OUTSIDE_EVEN_TOTAL_SUBSET[ie],ct=Gt.OUTSIDE_GSUM[ie];return new Ei(Oe*_t+Ie+ct,J)}else{if((Q&1)!==0||Q>10||Q<4)throw new ce;let ie=(10-Q)/2,de=Gt.INSIDE_ODD_WIDEST[ie],Me=9-de,Oe=$i.getRSSvalue(y,de,!0),Ie=$i.getRSSvalue(x,Me,!1),_t=Gt.INSIDE_ODD_TOTAL_SUBSET[ie],ct=Gt.INSIDE_GSUM[ie];return new Ei(Ie*_t+Oe+ct,J)}}findFinderPattern(i,s){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=i.getSize(),f=!1,g=0;for(;g<u&&(f=!i.get(g),s!==f);)g++;let y=0,x=g;for(let C=g;C<u;C++)if(i.get(C)!==f)l[y]++;else{if(y===3){if(Gn.isFinderPattern(l))return[x,C];x+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,y--}else y++;l[y]=1,f=!f}throw new ce}parseFoundFinderPattern(i,s,l,u){let f=i.get(u[0]),g=u[0]-1;for(;g>=0&&f!==i.get(g);)g--;g++;const y=u[0]-g,x=this.getDecodeFinderCounters(),C=new Int32Array(x.length);re.arraycopy(x,0,C,1,x.length-1),C[0]=y;const I=this.parseFinderValue(C,Gt.FINDER_PATTERNS);let M=g,L=u[1];return l&&(M=i.getSize()-1-M,L=i.getSize()-1-L),new Lr(I,[g,u[1]],M,L,s)}adjustOddEvenCounts(i,s){let l=Ze.sum(new Int32Array(this.getOddCounts())),u=Ze.sum(new Int32Array(this.getEvenCounts())),f=!1,g=!1,y=!1,x=!1;i?(l>12?g=!0:l<4&&(f=!0),u>12?x=!0:u<4&&(y=!0)):(l>11?g=!0:l<5&&(f=!0),u>10?x=!0:u<4&&(y=!0));let C=l+u-s,I=(l&1)===(i?1:0),M=(u&1)===1;if(C===1)if(I){if(M)throw new ce;g=!0}else{if(!M)throw new ce;x=!0}else if(C===-1)if(I){if(M)throw new ce;f=!0}else{if(!M)throw new ce;y=!0}else if(C===0){if(I){if(!M)throw new ce;l<u?(f=!0,x=!0):(g=!0,y=!0)}else if(M)throw new ce}else throw new ce;if(f){if(g)throw new ce;Gn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&Gn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(x)throw new ce;Gn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&Gn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Gt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Gt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Gt.OUTSIDE_GSUM=[0,161,961,2015,2715],Gt.INSIDE_GSUM=[0,336,1036,1516],Gt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Gt.INSIDE_ODD_WIDEST=[2,4,6,8],Gt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ti extends Xt{constructor(i,s){super(),this.readers=[],this.verbose=s===!0;const l=i?i.get(Te.POSSIBLE_FORMATS):null,u=i&&i.get(Te.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(De.EAN_13)||l.includes(De.UPC_A)||l.includes(De.EAN_8)||l.includes(De.UPC_E))&&this.readers.push(new wo(i)),l.includes(De.CODE_39)&&this.readers.push(new Yt(u)),l.includes(De.CODE_128)&&this.readers.push(new Ne),l.includes(De.ITF)&&this.readers.push(new rt),l.includes(De.RSS_14)&&this.readers.push(new Gt),l.includes(De.RSS_EXPANDED)&&this.readers.push(new Se(this.verbose))):(this.readers.push(new wo(i)),this.readers.push(new Yt),this.readers.push(new wo(i)),this.readers.push(new Ne),this.readers.push(new rt),this.readers.push(new Gt),this.readers.push(new Se(this.verbose)))}decodeRow(i,s,l){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(i,s,l)}catch{}throw new ce}reset(){this.readers.forEach(i=>i.reset())}}class Co extends Pe{constructor(i=500,s){super(new Ti(s),i,s)}}class Dt{constructor(i,s,l){this.ecCodewords=i,this.ecBlocks=[s],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class bt{constructor(i,s){this.count=i,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Et{constructor(i,s,l,u,f,g){this.versionNumber=i,this.symbolSizeRows=s,this.symbolSizeColumns=l,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=f,this.ecBlocks=g;let y=0;const x=g.getECCodewords(),C=g.getECBlocks();for(let I of C)y+=I.getCount()*(I.getDataCodewords()+x);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,s){if((i&1)!==0||(s&1)!==0)throw new B;for(let l of Et.VERSIONS)if(l.symbolSizeRows===i&&l.symbolSizeColumns===s)return l;throw new B}toString(){return""+this.versionNumber}static buildVersions(){return[new Et(1,10,10,8,8,new Dt(5,new bt(1,3))),new Et(2,12,12,10,10,new Dt(7,new bt(1,5))),new Et(3,14,14,12,12,new Dt(10,new bt(1,8))),new Et(4,16,16,14,14,new Dt(12,new bt(1,12))),new Et(5,18,18,16,16,new Dt(14,new bt(1,18))),new Et(6,20,20,18,18,new Dt(18,new bt(1,22))),new Et(7,22,22,20,20,new Dt(20,new bt(1,30))),new Et(8,24,24,22,22,new Dt(24,new bt(1,36))),new Et(9,26,26,24,24,new Dt(28,new bt(1,44))),new Et(10,32,32,14,14,new Dt(36,new bt(1,62))),new Et(11,36,36,16,16,new Dt(42,new bt(1,86))),new Et(12,40,40,18,18,new Dt(48,new bt(1,114))),new Et(13,44,44,20,20,new Dt(56,new bt(1,144))),new Et(14,48,48,22,22,new Dt(68,new bt(1,174))),new Et(15,52,52,24,24,new Dt(42,new bt(2,102))),new Et(16,64,64,14,14,new Dt(56,new bt(2,140))),new Et(17,72,72,16,16,new Dt(36,new bt(4,92))),new Et(18,80,80,18,18,new Dt(48,new bt(4,114))),new Et(19,88,88,20,20,new Dt(56,new bt(4,144))),new Et(20,96,96,22,22,new Dt(68,new bt(4,174))),new Et(21,104,104,24,24,new Dt(56,new bt(6,136))),new Et(22,120,120,18,18,new Dt(68,new bt(6,175))),new Et(23,132,132,20,20,new Dt(62,new bt(8,163))),new Et(24,144,144,22,22,new Dt(62,new bt(8,156),new bt(2,155))),new Et(25,8,18,6,16,new Dt(7,new bt(1,5))),new Et(26,8,32,6,14,new Dt(11,new bt(1,10))),new Et(27,12,26,10,24,new Dt(14,new bt(1,16))),new Et(28,12,36,10,16,new Dt(18,new bt(1,22))),new Et(29,16,36,14,16,new Dt(24,new bt(1,32))),new Et(30,16,48,14,22,new Dt(28,new bt(1,49)))]}}Et.VERSIONS=Et.buildVersions();class ds{constructor(i){const s=i.getHeight();if(s<8||s>144||(s&1)!==0)throw new B;this.version=ds.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new Je(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const s=i.getHeight(),l=i.getWidth();return Et.getVersionForDimensions(s,l)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let s=0,l=4,u=0;const f=this.mappingBitMatrix.getHeight(),g=this.mappingBitMatrix.getWidth();let y=!1,x=!1,C=!1,I=!1;do if(l===f&&u===0&&!y)i[s++]=this.readCorner1(f,g)&255,l-=2,u+=2,y=!0;else if(l===f-2&&u===0&&(g&3)!==0&&!x)i[s++]=this.readCorner2(f,g)&255,l-=2,u+=2,x=!0;else if(l===f+4&&u===2&&(g&7)===0&&!C)i[s++]=this.readCorner3(f,g)&255,l-=2,u+=2,C=!0;else if(l===f-2&&u===0&&(g&7)===4&&!I)i[s++]=this.readCorner4(f,g)&255,l-=2,u+=2,I=!0;else{do l<f&&u>=0&&!this.readMappingMatrix.get(u,l)&&(i[s++]=this.readUtah(l,u,f,g)&255),l-=2,u+=2;while(l>=0&&u<g);l+=1,u+=3;do l>=0&&u<g&&!this.readMappingMatrix.get(u,l)&&(i[s++]=this.readUtah(l,u,f,g)&255),l+=2,u-=2;while(l<f&&u>=0);l+=3,u+=1}while(l<f||u<g);if(s!==this.version.getTotalCodewords())throw new B;return i}readModule(i,s,l,u){return i<0&&(i+=l,s+=4-(l+4&7)),s<0&&(s+=u,i+=4-(u+4&7)),this.readMappingMatrix.set(s,i),this.mappingBitMatrix.get(s,i)}readUtah(i,s,l,u){let f=0;return this.readModule(i-2,s-2,l,u)&&(f|=1),f<<=1,this.readModule(i-2,s-1,l,u)&&(f|=1),f<<=1,this.readModule(i-1,s-2,l,u)&&(f|=1),f<<=1,this.readModule(i-1,s-1,l,u)&&(f|=1),f<<=1,this.readModule(i-1,s,l,u)&&(f|=1),f<<=1,this.readModule(i,s-2,l,u)&&(f|=1),f<<=1,this.readModule(i,s-1,l,u)&&(f|=1),f<<=1,this.readModule(i,s,l,u)&&(f|=1),f}readCorner1(i,s){let l=0;return this.readModule(i-1,0,i,s)&&(l|=1),l<<=1,this.readModule(i-1,1,i,s)&&(l|=1),l<<=1,this.readModule(i-1,2,i,s)&&(l|=1),l<<=1,this.readModule(0,s-2,i,s)&&(l|=1),l<<=1,this.readModule(0,s-1,i,s)&&(l|=1),l<<=1,this.readModule(1,s-1,i,s)&&(l|=1),l<<=1,this.readModule(2,s-1,i,s)&&(l|=1),l<<=1,this.readModule(3,s-1,i,s)&&(l|=1),l}readCorner2(i,s){let l=0;return this.readModule(i-3,0,i,s)&&(l|=1),l<<=1,this.readModule(i-2,0,i,s)&&(l|=1),l<<=1,this.readModule(i-1,0,i,s)&&(l|=1),l<<=1,this.readModule(0,s-4,i,s)&&(l|=1),l<<=1,this.readModule(0,s-3,i,s)&&(l|=1),l<<=1,this.readModule(0,s-2,i,s)&&(l|=1),l<<=1,this.readModule(0,s-1,i,s)&&(l|=1),l<<=1,this.readModule(1,s-1,i,s)&&(l|=1),l}readCorner3(i,s){let l=0;return this.readModule(i-1,0,i,s)&&(l|=1),l<<=1,this.readModule(i-1,s-1,i,s)&&(l|=1),l<<=1,this.readModule(0,s-3,i,s)&&(l|=1),l<<=1,this.readModule(0,s-2,i,s)&&(l|=1),l<<=1,this.readModule(0,s-1,i,s)&&(l|=1),l<<=1,this.readModule(1,s-3,i,s)&&(l|=1),l<<=1,this.readModule(1,s-2,i,s)&&(l|=1),l<<=1,this.readModule(1,s-1,i,s)&&(l|=1),l}readCorner4(i,s){let l=0;return this.readModule(i-3,0,i,s)&&(l|=1),l<<=1,this.readModule(i-2,0,i,s)&&(l|=1),l<<=1,this.readModule(i-1,0,i,s)&&(l|=1),l<<=1,this.readModule(0,s-2,i,s)&&(l|=1),l<<=1,this.readModule(0,s-1,i,s)&&(l|=1),l<<=1,this.readModule(1,s-1,i,s)&&(l|=1),l<<=1,this.readModule(2,s-1,i,s)&&(l|=1),l<<=1,this.readModule(3,s-1,i,s)&&(l|=1),l}extractDataRegion(i){const s=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(i.getHeight()!==s)throw new O("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),f=this.version.getDataRegionSizeColumns(),g=s/u|0,y=l/f|0,x=g*u,C=y*f,I=new Je(C,x);for(let M=0;M<g;++M){const L=M*u;for(let H=0;H<y;++H){const Q=H*f;for(let J=0;J<u;++J){const ie=M*(u+2)+1+J,de=L+J;for(let Me=0;Me<f;++Me){const Oe=H*(f+2)+1+Me;if(i.get(Oe,ie)){const Ie=Q+Me;I.set(Ie,de)}}}}}return I}}class Ci{constructor(i,s){this.numDataCodewords=i,this.codewords=s}static getDataBlocks(i,s){const l=s.getECBlocks();let u=0;const f=l.getECBlocks();for(let J of f)u+=J.getCount();const g=new Array(u);let y=0;for(let J of f)for(let ie=0;ie<J.getCount();ie++){const de=J.getDataCodewords(),Me=l.getECCodewords()+de;g[y++]=new Ci(de,new Uint8Array(Me))}const C=g[0].codewords.length-l.getECCodewords(),I=C-1;let M=0;for(let J=0;J<I;J++)for(let ie=0;ie<y;ie++)g[ie].codewords[J]=i[M++];const L=s.getVersionNumber()===24,H=L?8:y;for(let J=0;J<H;J++)g[J].codewords[C-1]=i[M++];const Q=g[0].codewords.length;for(let J=C;J<Q;J++)for(let ie=0;ie<y;ie++){const de=L?(ie+8)%y:ie,Me=L&&de>7?J-1:J;g[de].codewords[Me]=i[M++]}if(M!==i.length)throw new O;return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class vn{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new O(""+i);let s=0,l=this.bitOffset,u=this.byteOffset;const f=this.bytes;if(l>0){const g=8-l,y=i<g?i:g,x=g-y,C=255>>8-y<<x;s=(f[u]&C)>>x,i-=y,l+=y,l===8&&(l=0,u++)}if(i>0){for(;i>=8;)s=s<<8|f[u]&255,u++,i-=8;if(i>0){const g=8-i,y=255>>g<<g;s=s<<i|(f[u]&y)>>g,l+=i}}return this.bitOffset=l,this.byteOffset=u,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Ct;(function(D){D[D.PAD_ENCODE=0]="PAD_ENCODE",D[D.ASCII_ENCODE=1]="ASCII_ENCODE",D[D.C40_ENCODE=2]="C40_ENCODE",D[D.TEXT_ENCODE=3]="TEXT_ENCODE",D[D.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",D[D.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",D[D.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ct||(Ct={}));class vi{static decode(i){const s=new vn(i),l=new G,u=new G,f=new Array;let g=Ct.ASCII_ENCODE;do if(g===Ct.ASCII_ENCODE)g=this.decodeAsciiSegment(s,l,u);else{switch(g){case Ct.C40_ENCODE:this.decodeC40Segment(s,l);break;case Ct.TEXT_ENCODE:this.decodeTextSegment(s,l);break;case Ct.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,l);break;case Ct.EDIFACT_ENCODE:this.decodeEdifactSegment(s,l);break;case Ct.BASE256_ENCODE:this.decodeBase256Segment(s,l,f);break;default:throw new B}g=Ct.ASCII_ENCODE}while(g!==Ct.PAD_ENCODE&&s.available()>0);return u.length()>0&&l.append(u.toString()),new Jt(i,l.toString(),f.length===0?null:f,null)}static decodeAsciiSegment(i,s,l){let u=!1;do{let f=i.readBits(8);if(f===0)throw new B;if(f<=128)return u&&(f+=128),s.append(String.fromCharCode(f-1)),Ct.ASCII_ENCODE;if(f===129)return Ct.PAD_ENCODE;if(f<=229){const g=f-130;g<10&&s.append("0"),s.append(""+g)}else switch(f){case 230:return Ct.C40_ENCODE;case 231:return Ct.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:s.append("[)>05"),l.insert(0,"");break;case 237:s.append("[)>06"),l.insert(0,"");break;case 238:return Ct.ANSIX12_ENCODE;case 239:return Ct.TEXT_ENCODE;case 240:return Ct.EDIFACT_ENCODE;case 241:break;default:if(f!==254||i.available()!==0)throw new B;break}}while(i.available()>0);return Ct.ASCII_ENCODE}static decodeC40Segment(i,s){let l=!1;const u=[];let f=0;do{if(i.available()===8)return;const g=i.readBits(8);if(g===254)return;this.parseTwoBytes(g,i.readBits(8),u);for(let y=0;y<3;y++){const x=u[y];switch(f){case 0:if(x<3)f=x+1;else if(x<this.C40_BASIC_SET_CHARS.length){const C=this.C40_BASIC_SET_CHARS[x];l?(s.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):s.append(C)}else throw new B;break;case 1:l?(s.append(String.fromCharCode(x+128)),l=!1):s.append(String.fromCharCode(x)),f=0;break;case 2:if(x<this.C40_SHIFT2_SET_CHARS.length){const C=this.C40_SHIFT2_SET_CHARS[x];l?(s.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):s.append(C)}else switch(x){case 27:s.append("");break;case 30:l=!0;break;default:throw new B}f=0;break;case 3:l?(s.append(String.fromCharCode(x+224)),l=!1):s.append(String.fromCharCode(x+96)),f=0;break;default:throw new B}}}while(i.available()>0)}static decodeTextSegment(i,s){let l=!1,u=[],f=0;do{if(i.available()===8)return;const g=i.readBits(8);if(g===254)return;this.parseTwoBytes(g,i.readBits(8),u);for(let y=0;y<3;y++){const x=u[y];switch(f){case 0:if(x<3)f=x+1;else if(x<this.TEXT_BASIC_SET_CHARS.length){const C=this.TEXT_BASIC_SET_CHARS[x];l?(s.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):s.append(C)}else throw new B;break;case 1:l?(s.append(String.fromCharCode(x+128)),l=!1):s.append(String.fromCharCode(x)),f=0;break;case 2:if(x<this.TEXT_SHIFT2_SET_CHARS.length){const C=this.TEXT_SHIFT2_SET_CHARS[x];l?(s.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):s.append(C)}else switch(x){case 27:s.append("");break;case 30:l=!0;break;default:throw new B}f=0;break;case 3:if(x<this.TEXT_SHIFT3_SET_CHARS.length){const C=this.TEXT_SHIFT3_SET_CHARS[x];l?(s.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):s.append(C),f=0}else throw new B;break;default:throw new B}}}while(i.available()>0)}static decodeAnsiX12Segment(i,s){const l=[];do{if(i.available()===8)return;const u=i.readBits(8);if(u===254)return;this.parseTwoBytes(u,i.readBits(8),l);for(let f=0;f<3;f++){const g=l[f];switch(g){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(g<14)s.append(String.fromCharCode(g+44));else if(g<40)s.append(String.fromCharCode(g+51));else throw new B;break}}}while(i.available()>0)}static parseTwoBytes(i,s,l){let u=(i<<8)+s-1,f=Math.floor(u/1600);l[0]=f,u-=f*1600,f=Math.floor(u/40),l[1]=f,l[2]=u-f*40}static decodeEdifactSegment(i,s){do{if(i.available()<=16)return;for(let l=0;l<4;l++){let u=i.readBits(6);if(u===31){const f=8-i.getBitOffset();f!==8&&i.readBits(f);return}(u&32)===0&&(u|=64),s.append(String.fromCharCode(u))}}while(i.available()>0)}static decodeBase256Segment(i,s,l){let u=1+i.getByteOffset();const f=this.unrandomize255State(i.readBits(8),u++);let g;if(f===0?g=i.available()/8|0:f<250?g=f:g=250*(f-249)+this.unrandomize255State(i.readBits(8),u++),g<0)throw new B;const y=new Uint8Array(g);for(let x=0;x<g;x++){if(i.available()<8)throw new B;y[x]=this.unrandomize255State(i.readBits(8),u++)}l.push(y);try{s.append(q.decode(y,W.ISO88591))}catch(x){throw new Li("Platform does not support required encoding: "+x.message)}}static unrandomize255State(i,s){const l=149*s%255+1,u=i-l;return u>=0?u:u+256}}vi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],vi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],vi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],vi.TEXT_SHIFT2_SET_CHARS=vi.C40_SHIFT2_SET_CHARS,vi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class vo{constructor(){this.rsDecoder=new gr(Tt.DATA_MATRIX_FIELD_256)}decode(i){const s=new ds(i),l=s.getVersion(),u=s.readCodewords(),f=Ci.getDataBlocks(u,l);let g=0;for(let C of f)g+=C.getNumDataCodewords();const y=new Uint8Array(g),x=f.length;for(let C=0;C<x;C++){const I=f[C],M=I.getCodewords(),L=I.getNumDataCodewords();this.correctErrors(M,L);for(let H=0;H<L;H++)y[H*x+C]=M[H]}return vi.decode(y)}correctErrors(i,s){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-s)}catch{throw new j}for(let u=0;u<s;u++)i[u]=l[u]}}class tt{constructor(i){this.image=i,this.rectangleDetector=new yn(this.image)}detect(){const i=this.rectangleDetector.detect();let s=this.detectSolid1(i);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new ce;s=this.shiftToModuleCenter(s);const l=s[0],u=s[1],f=s[2],g=s[3];let y=this.transitionsBetween(l,g)+1,x=this.transitionsBetween(f,g)+1;(y&1)===1&&(y+=1),(x&1)===1&&(x+=1),4*y<7*x&&4*x<7*y&&(y=x=Math.max(y,x));let C=tt.sampleGrid(this.image,l,u,f,g,y,x);return new Ea(C,[l,u,f,g])}static shiftPoint(i,s,l){let u=(s.getX()-i.getX())/(l+1),f=(s.getY()-i.getY())/(l+1);return new Fe(i.getX()+u,i.getY()+f)}static moveAway(i,s,l){let u=i.getX(),f=i.getY();return u<s?u-=1:u+=1,f<l?f-=1:f+=1,new Fe(u,f)}detectSolid1(i){let s=i[0],l=i[1],u=i[3],f=i[2],g=this.transitionsBetween(s,l),y=this.transitionsBetween(l,u),x=this.transitionsBetween(u,f),C=this.transitionsBetween(f,s),I=g,M=[f,s,l,u];return I>y&&(I=y,M[0]=s,M[1]=l,M[2]=u,M[3]=f),I>x&&(I=x,M[0]=l,M[1]=u,M[2]=f,M[3]=s),I>C&&(M[0]=u,M[1]=f,M[2]=s,M[3]=l),M}detectSolid2(i){let s=i[0],l=i[1],u=i[2],f=i[3],g=this.transitionsBetween(s,f),y=tt.shiftPoint(l,u,(g+1)*4),x=tt.shiftPoint(u,l,(g+1)*4),C=this.transitionsBetween(y,s),I=this.transitionsBetween(x,f);return C<I?(i[0]=s,i[1]=l,i[2]=u,i[3]=f):(i[0]=l,i[1]=u,i[2]=f,i[3]=s),i}correctTopRight(i){let s=i[0],l=i[1],u=i[2],f=i[3],g=this.transitionsBetween(s,f),y=this.transitionsBetween(l,f),x=tt.shiftPoint(s,l,(y+1)*4),C=tt.shiftPoint(u,l,(g+1)*4);g=this.transitionsBetween(x,f),y=this.transitionsBetween(C,f);let I=new Fe(f.getX()+(u.getX()-l.getX())/(g+1),f.getY()+(u.getY()-l.getY())/(g+1)),M=new Fe(f.getX()+(s.getX()-l.getX())/(y+1),f.getY()+(s.getY()-l.getY())/(y+1));if(!this.isValid(I))return this.isValid(M)?M:null;if(!this.isValid(M))return I;let L=this.transitionsBetween(x,I)+this.transitionsBetween(C,I),H=this.transitionsBetween(x,M)+this.transitionsBetween(C,M);return L>H?I:M}shiftToModuleCenter(i){let s=i[0],l=i[1],u=i[2],f=i[3],g=this.transitionsBetween(s,f)+1,y=this.transitionsBetween(u,f)+1,x=tt.shiftPoint(s,l,y*4),C=tt.shiftPoint(u,l,g*4);g=this.transitionsBetween(x,f)+1,y=this.transitionsBetween(C,f)+1,(g&1)===1&&(g+=1),(y&1)===1&&(y+=1);let I=(s.getX()+l.getX()+u.getX()+f.getX())/4,M=(s.getY()+l.getY()+u.getY()+f.getY())/4;s=tt.moveAway(s,I,M),l=tt.moveAway(l,I,M),u=tt.moveAway(u,I,M),f=tt.moveAway(f,I,M);let L,H;return x=tt.shiftPoint(s,l,y*4),x=tt.shiftPoint(x,f,g*4),L=tt.shiftPoint(l,s,y*4),L=tt.shiftPoint(L,u,g*4),C=tt.shiftPoint(u,f,y*4),C=tt.shiftPoint(C,l,g*4),H=tt.shiftPoint(f,u,y*4),H=tt.shiftPoint(H,s,g*4),[x,L,C,H]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,s,l,u,f,g,y){return yi.getInstance().sampleGrid(i,g,y,.5,.5,g-.5,.5,g-.5,y-.5,.5,y-.5,s.getX(),s.getY(),f.getX(),f.getY(),u.getX(),u.getY(),l.getX(),l.getY())}transitionsBetween(i,s){let l=Math.trunc(i.getX()),u=Math.trunc(i.getY()),f=Math.trunc(s.getX()),g=Math.trunc(s.getY()),y=Math.abs(g-u)>Math.abs(f-l);if(y){let J=l;l=u,u=J,J=f,f=g,g=J}let x=Math.abs(f-l),C=Math.abs(g-u),I=-x/2,M=u<g?1:-1,L=l<f?1:-1,H=0,Q=this.image.get(y?u:l,y?l:u);for(let J=l,ie=u;J!==f;J+=L){let de=this.image.get(y?ie:J,y?J:ie);if(de!==Q&&(H++,Q=de),I+=C,I>0){if(ie===g)break;ie+=M,I-=x}}return H}}class Bi{constructor(){this.decoder=new vo}decode(i,s=null){let l,u;if(s!=null&&s.has(Te.PURE_BARCODE)){const C=Bi.extractPureBits(i.getBlackMatrix());l=this.decoder.decode(C),u=Bi.NO_POINTS}else{const C=new tt(i.getBlackMatrix()).detect();l=this.decoder.decode(C.getBits()),u=C.getPoints()}const f=l.getRawBytes(),g=new Be(l.getText(),f,8*f.length,u,De.DATA_MATRIX,re.currentTimeMillis()),y=l.getByteSegments();y!=null&&g.putMetadata(wt.BYTE_SEGMENTS,y);const x=l.getECLevel();return x!=null&&g.putMetadata(wt.ERROR_CORRECTION_LEVEL,x),g}reset(){}static extractPureBits(i){const s=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(s==null||l==null)throw new ce;const u=this.moduleSize(s,i);let f=s[1];const g=l[1];let y=s[0];const C=(l[0]-y+1)/u,I=(g-f+1)/u;if(C<=0||I<=0)throw new ce;const M=u/2;f+=M,y+=M;const L=new Je(C,I);for(let H=0;H<I;H++){const Q=f+H*u;for(let J=0;J<C;J++)i.get(y+J*u,Q)&&L.set(J,H)}return L}static moduleSize(i,s){const l=s.getWidth();let u=i[0];const f=i[1];for(;u<l&&s.get(u,f);)u++;if(u===l)throw new ce;const g=u-i[0];if(g===0)throw new ce;return g}}Bi.NO_POINTS=[];class Br extends Pe{constructor(i=500){super(new Bi,i)}}var er;(function(D){D[D.L=0]="L",D[D.M=1]="M",D[D.Q=2]="Q",D[D.H=3]="H"})(er||(er={}));class mt{constructor(i,s,l){this.value=i,this.stringValue=s,this.bits=l,mt.FOR_BITS.set(l,this),mt.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return mt.L;case"M":return mt.M;case"Q":return mt.Q;case"H":return mt.H;default:throw new b(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof mt))return!1;const s=i;return this.value===s.value}static forBits(i){if(i<0||i>=mt.FOR_BITS.size)throw new O;return mt.FOR_BITS.get(i)}}mt.FOR_BITS=new Map,mt.FOR_VALUE=new Map,mt.L=new mt(er.L,"L",1),mt.M=new mt(er.M,"M",0),mt.Q=new mt(er.Q,"Q",3),mt.H=new mt(er.H,"H",2);class Dn{constructor(i){this.errorCorrectionLevel=mt.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,s){return ye.bitCount(i^s)}static decodeFormatInformation(i,s){const l=Dn.doDecodeFormatInformation(i,s);return l!==null?l:Dn.doDecodeFormatInformation(i^Dn.FORMAT_INFO_MASK_QR,s^Dn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,s){let l=Number.MAX_SAFE_INTEGER,u=0;for(const f of Dn.FORMAT_INFO_DECODE_LOOKUP){const g=f[0];if(g===i||g===s)return new Dn(f[1]);let y=Dn.numBitsDiffering(i,g);y<l&&(u=f[1],l=y),i!==s&&(y=Dn.numBitsDiffering(s,g),y<l&&(u=f[1],l=y))}return l<=3?new Dn(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof Dn))return!1;const s=i;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}Dn.FORMAT_INFO_MASK_QR=21522,Dn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class se{constructor(i,...s){this.ecCodewordsPerBlock=i,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const s=this.ecBlocks;for(const l of s)i+=l.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class z{constructor(i,s){this.count=i,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ge{constructor(i,s,...l){this.versionNumber=i,this.alignmentPatternCenters=s,this.ecBlocks=l;let u=0;const f=l[0].getECCodewordsPerBlock(),g=l[0].getECBlocks();for(const y of g)u+=y.getCount()*(y.getDataCodewords()+f);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new B;try{return this.getVersionForNumber((i-17)/4)}catch{throw new B}}static getVersionForNumber(i){if(i<1||i>40)throw new O;return Ge.VERSIONS[i-1]}static decodeVersionInformation(i){let s=Number.MAX_SAFE_INTEGER,l=0;for(let u=0;u<Ge.VERSION_DECODE_INFO.length;u++){const f=Ge.VERSION_DECODE_INFO[u];if(f===i)return Ge.getVersionForNumber(u+7);const g=Dn.numBitsDiffering(i,f);g<s&&(l=u+7,s=g)}return s<=3?Ge.getVersionForNumber(l):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),s=new Je(i);s.setRegion(0,0,9,9),s.setRegion(i-8,0,8,9),s.setRegion(0,i-8,9,8);const l=this.alignmentPatternCenters.length;for(let u=0;u<l;u++){const f=this.alignmentPatternCenters[u]-2;for(let g=0;g<l;g++)u===0&&(g===0||g===l-1)||u===l-1&&g===0||s.setRegion(this.alignmentPatternCenters[g]-2,f,5,5)}return s.setRegion(6,9,1,i-17),s.setRegion(9,6,i-17,1),this.versionNumber>6&&(s.setRegion(i-11,0,3,6),s.setRegion(0,i-11,6,3)),s}toString(){return""+this.versionNumber}}Ge.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ge.VERSIONS=[new Ge(1,new Int32Array(0),new se(7,new z(1,19)),new se(10,new z(1,16)),new se(13,new z(1,13)),new se(17,new z(1,9))),new Ge(2,Int32Array.from([6,18]),new se(10,new z(1,34)),new se(16,new z(1,28)),new se(22,new z(1,22)),new se(28,new z(1,16))),new Ge(3,Int32Array.from([6,22]),new se(15,new z(1,55)),new se(26,new z(1,44)),new se(18,new z(2,17)),new se(22,new z(2,13))),new Ge(4,Int32Array.from([6,26]),new se(20,new z(1,80)),new se(18,new z(2,32)),new se(26,new z(2,24)),new se(16,new z(4,9))),new Ge(5,Int32Array.from([6,30]),new se(26,new z(1,108)),new se(24,new z(2,43)),new se(18,new z(2,15),new z(2,16)),new se(22,new z(2,11),new z(2,12))),new Ge(6,Int32Array.from([6,34]),new se(18,new z(2,68)),new se(16,new z(4,27)),new se(24,new z(4,19)),new se(28,new z(4,15))),new Ge(7,Int32Array.from([6,22,38]),new se(20,new z(2,78)),new se(18,new z(4,31)),new se(18,new z(2,14),new z(4,15)),new se(26,new z(4,13),new z(1,14))),new Ge(8,Int32Array.from([6,24,42]),new se(24,new z(2,97)),new se(22,new z(2,38),new z(2,39)),new se(22,new z(4,18),new z(2,19)),new se(26,new z(4,14),new z(2,15))),new Ge(9,Int32Array.from([6,26,46]),new se(30,new z(2,116)),new se(22,new z(3,36),new z(2,37)),new se(20,new z(4,16),new z(4,17)),new se(24,new z(4,12),new z(4,13))),new Ge(10,Int32Array.from([6,28,50]),new se(18,new z(2,68),new z(2,69)),new se(26,new z(4,43),new z(1,44)),new se(24,new z(6,19),new z(2,20)),new se(28,new z(6,15),new z(2,16))),new Ge(11,Int32Array.from([6,30,54]),new se(20,new z(4,81)),new se(30,new z(1,50),new z(4,51)),new se(28,new z(4,22),new z(4,23)),new se(24,new z(3,12),new z(8,13))),new Ge(12,Int32Array.from([6,32,58]),new se(24,new z(2,92),new z(2,93)),new se(22,new z(6,36),new z(2,37)),new se(26,new z(4,20),new z(6,21)),new se(28,new z(7,14),new z(4,15))),new Ge(13,Int32Array.from([6,34,62]),new se(26,new z(4,107)),new se(22,new z(8,37),new z(1,38)),new se(24,new z(8,20),new z(4,21)),new se(22,new z(12,11),new z(4,12))),new Ge(14,Int32Array.from([6,26,46,66]),new se(30,new z(3,115),new z(1,116)),new se(24,new z(4,40),new z(5,41)),new se(20,new z(11,16),new z(5,17)),new se(24,new z(11,12),new z(5,13))),new Ge(15,Int32Array.from([6,26,48,70]),new se(22,new z(5,87),new z(1,88)),new se(24,new z(5,41),new z(5,42)),new se(30,new z(5,24),new z(7,25)),new se(24,new z(11,12),new z(7,13))),new Ge(16,Int32Array.from([6,26,50,74]),new se(24,new z(5,98),new z(1,99)),new se(28,new z(7,45),new z(3,46)),new se(24,new z(15,19),new z(2,20)),new se(30,new z(3,15),new z(13,16))),new Ge(17,Int32Array.from([6,30,54,78]),new se(28,new z(1,107),new z(5,108)),new se(28,new z(10,46),new z(1,47)),new se(28,new z(1,22),new z(15,23)),new se(28,new z(2,14),new z(17,15))),new Ge(18,Int32Array.from([6,30,56,82]),new se(30,new z(5,120),new z(1,121)),new se(26,new z(9,43),new z(4,44)),new se(28,new z(17,22),new z(1,23)),new se(28,new z(2,14),new z(19,15))),new Ge(19,Int32Array.from([6,30,58,86]),new se(28,new z(3,113),new z(4,114)),new se(26,new z(3,44),new z(11,45)),new se(26,new z(17,21),new z(4,22)),new se(26,new z(9,13),new z(16,14))),new Ge(20,Int32Array.from([6,34,62,90]),new se(28,new z(3,107),new z(5,108)),new se(26,new z(3,41),new z(13,42)),new se(30,new z(15,24),new z(5,25)),new se(28,new z(15,15),new z(10,16))),new Ge(21,Int32Array.from([6,28,50,72,94]),new se(28,new z(4,116),new z(4,117)),new se(26,new z(17,42)),new se(28,new z(17,22),new z(6,23)),new se(30,new z(19,16),new z(6,17))),new Ge(22,Int32Array.from([6,26,50,74,98]),new se(28,new z(2,111),new z(7,112)),new se(28,new z(17,46)),new se(30,new z(7,24),new z(16,25)),new se(24,new z(34,13))),new Ge(23,Int32Array.from([6,30,54,78,102]),new se(30,new z(4,121),new z(5,122)),new se(28,new z(4,47),new z(14,48)),new se(30,new z(11,24),new z(14,25)),new se(30,new z(16,15),new z(14,16))),new Ge(24,Int32Array.from([6,28,54,80,106]),new se(30,new z(6,117),new z(4,118)),new se(28,new z(6,45),new z(14,46)),new se(30,new z(11,24),new z(16,25)),new se(30,new z(30,16),new z(2,17))),new Ge(25,Int32Array.from([6,32,58,84,110]),new se(26,new z(8,106),new z(4,107)),new se(28,new z(8,47),new z(13,48)),new se(30,new z(7,24),new z(22,25)),new se(30,new z(22,15),new z(13,16))),new Ge(26,Int32Array.from([6,30,58,86,114]),new se(28,new z(10,114),new z(2,115)),new se(28,new z(19,46),new z(4,47)),new se(28,new z(28,22),new z(6,23)),new se(30,new z(33,16),new z(4,17))),new Ge(27,Int32Array.from([6,34,62,90,118]),new se(30,new z(8,122),new z(4,123)),new se(28,new z(22,45),new z(3,46)),new se(30,new z(8,23),new z(26,24)),new se(30,new z(12,15),new z(28,16))),new Ge(28,Int32Array.from([6,26,50,74,98,122]),new se(30,new z(3,117),new z(10,118)),new se(28,new z(3,45),new z(23,46)),new se(30,new z(4,24),new z(31,25)),new se(30,new z(11,15),new z(31,16))),new Ge(29,Int32Array.from([6,30,54,78,102,126]),new se(30,new z(7,116),new z(7,117)),new se(28,new z(21,45),new z(7,46)),new se(30,new z(1,23),new z(37,24)),new se(30,new z(19,15),new z(26,16))),new Ge(30,Int32Array.from([6,26,52,78,104,130]),new se(30,new z(5,115),new z(10,116)),new se(28,new z(19,47),new z(10,48)),new se(30,new z(15,24),new z(25,25)),new se(30,new z(23,15),new z(25,16))),new Ge(31,Int32Array.from([6,30,56,82,108,134]),new se(30,new z(13,115),new z(3,116)),new se(28,new z(2,46),new z(29,47)),new se(30,new z(42,24),new z(1,25)),new se(30,new z(23,15),new z(28,16))),new Ge(32,Int32Array.from([6,34,60,86,112,138]),new se(30,new z(17,115)),new se(28,new z(10,46),new z(23,47)),new se(30,new z(10,24),new z(35,25)),new se(30,new z(19,15),new z(35,16))),new Ge(33,Int32Array.from([6,30,58,86,114,142]),new se(30,new z(17,115),new z(1,116)),new se(28,new z(14,46),new z(21,47)),new se(30,new z(29,24),new z(19,25)),new se(30,new z(11,15),new z(46,16))),new Ge(34,Int32Array.from([6,34,62,90,118,146]),new se(30,new z(13,115),new z(6,116)),new se(28,new z(14,46),new z(23,47)),new se(30,new z(44,24),new z(7,25)),new se(30,new z(59,16),new z(1,17))),new Ge(35,Int32Array.from([6,30,54,78,102,126,150]),new se(30,new z(12,121),new z(7,122)),new se(28,new z(12,47),new z(26,48)),new se(30,new z(39,24),new z(14,25)),new se(30,new z(22,15),new z(41,16))),new Ge(36,Int32Array.from([6,24,50,76,102,128,154]),new se(30,new z(6,121),new z(14,122)),new se(28,new z(6,47),new z(34,48)),new se(30,new z(46,24),new z(10,25)),new se(30,new z(2,15),new z(64,16))),new Ge(37,Int32Array.from([6,28,54,80,106,132,158]),new se(30,new z(17,122),new z(4,123)),new se(28,new z(29,46),new z(14,47)),new se(30,new z(49,24),new z(10,25)),new se(30,new z(24,15),new z(46,16))),new Ge(38,Int32Array.from([6,32,58,84,110,136,162]),new se(30,new z(4,122),new z(18,123)),new se(28,new z(13,46),new z(32,47)),new se(30,new z(48,24),new z(14,25)),new se(30,new z(42,15),new z(32,16))),new Ge(39,Int32Array.from([6,26,54,82,110,138,166]),new se(30,new z(20,117),new z(4,118)),new se(28,new z(40,47),new z(7,48)),new se(30,new z(43,24),new z(22,25)),new se(30,new z(10,15),new z(67,16))),new Ge(40,Int32Array.from([6,30,58,86,114,142,170]),new se(30,new z(19,118),new z(6,119)),new se(28,new z(18,47),new z(31,48)),new se(30,new z(34,24),new z(34,25)),new se(30,new z(20,15),new z(61,16)))];var Mn;(function(D){D[D.DATA_MASK_000=0]="DATA_MASK_000",D[D.DATA_MASK_001=1]="DATA_MASK_001",D[D.DATA_MASK_010=2]="DATA_MASK_010",D[D.DATA_MASK_011=3]="DATA_MASK_011",D[D.DATA_MASK_100=4]="DATA_MASK_100",D[D.DATA_MASK_101=5]="DATA_MASK_101",D[D.DATA_MASK_110=6]="DATA_MASK_110",D[D.DATA_MASK_111=7]="DATA_MASK_111"})(Mn||(Mn={}));class qn{constructor(i,s){this.value=i,this.isMasked=s}unmaskBitMatrix(i,s){for(let l=0;l<s;l++)for(let u=0;u<s;u++)this.isMasked(l,u)&&i.flip(u,l)}}qn.values=new Map([[Mn.DATA_MASK_000,new qn(Mn.DATA_MASK_000,(D,i)=>(D+i&1)===0)],[Mn.DATA_MASK_001,new qn(Mn.DATA_MASK_001,(D,i)=>(D&1)===0)],[Mn.DATA_MASK_010,new qn(Mn.DATA_MASK_010,(D,i)=>i%3===0)],[Mn.DATA_MASK_011,new qn(Mn.DATA_MASK_011,(D,i)=>(D+i)%3===0)],[Mn.DATA_MASK_100,new qn(Mn.DATA_MASK_100,(D,i)=>(Math.floor(D/2)+Math.floor(i/3)&1)===0)],[Mn.DATA_MASK_101,new qn(Mn.DATA_MASK_101,(D,i)=>D*i%6===0)],[Mn.DATA_MASK_110,new qn(Mn.DATA_MASK_110,(D,i)=>D*i%6<3)],[Mn.DATA_MASK_111,new qn(Mn.DATA_MASK_111,(D,i)=>(D+i+D*i%3&1)===0)]]);class ki{constructor(i){const s=i.getHeight();if(s<21||(s&3)!==1)throw new B;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let f=0;f<6;f++)i=this.copyBit(f,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let f=5;f>=0;f--)i=this.copyBit(8,f,i);const s=this.bitMatrix.getHeight();let l=0;const u=s-7;for(let f=s-1;f>=u;f--)l=this.copyBit(8,f,l);for(let f=s-8;f<s;f++)l=this.copyBit(f,8,l);if(this.parsedFormatInfo=Dn.decodeFormatInformation(i,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new B}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),s=Math.floor((i-17)/4);if(s<=6)return Ge.getVersionForNumber(s);let l=0;const u=i-11;for(let g=5;g>=0;g--)for(let y=i-9;y>=u;y--)l=this.copyBit(y,g,l);let f=Ge.decodeVersionInformation(l);if(f!==null&&f.getDimensionForVersion()===i)return this.parsedVersion=f,f;l=0;for(let g=5;g>=0;g--)for(let y=i-9;y>=u;y--)l=this.copyBit(g,y,l);if(f=Ge.decodeVersionInformation(l),f!==null&&f.getDimensionForVersion()===i)return this.parsedVersion=f,f;throw new B}copyBit(i,s,l){return(this.isMirror?this.bitMatrix.get(s,i):this.bitMatrix.get(i,s))?l<<1|1:l<<1}readCodewords(){const i=this.readFormatInformation(),s=this.readVersion(),l=qn.values.get(i.getDataMask()),u=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,u);const f=s.buildFunctionPattern();let g=!0;const y=new Uint8Array(s.getTotalCodewords());let x=0,C=0,I=0;for(let M=u-1;M>0;M-=2){M===6&&M--;for(let L=0;L<u;L++){const H=g?u-1-L:L;for(let Q=0;Q<2;Q++)f.get(M-Q,H)||(I++,C<<=1,this.bitMatrix.get(M-Q,H)&&(C|=1),I===8&&(y[x++]=C,I=0,C=0))}g=!g}if(x!==s.getTotalCodewords())throw new B;return y}remask(){if(this.parsedFormatInfo===null)return;const i=qn.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,s)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let s=0,l=i.getWidth();s<l;s++)for(let u=s+1,f=i.getHeight();u<f;u++)i.get(s,u)!==i.get(u,s)&&(i.flip(u,s),i.flip(s,u))}}class wa{constructor(i,s){this.numDataCodewords=i,this.codewords=s}static getDataBlocks(i,s,l){if(i.length!==s.getTotalCodewords())throw new O;const u=s.getECBlocksForLevel(l);let f=0;const g=u.getECBlocks();for(const Q of g)f+=Q.getCount();const y=new Array(f);let x=0;for(const Q of g)for(let J=0;J<Q.getCount();J++){const ie=Q.getDataCodewords(),de=u.getECCodewordsPerBlock()+ie;y[x++]=new wa(ie,new Uint8Array(de))}const C=y[0].codewords.length;let I=y.length-1;for(;I>=0&&y[I].codewords.length!==C;)I--;I++;const M=C-u.getECCodewordsPerBlock();let L=0;for(let Q=0;Q<M;Q++)for(let J=0;J<x;J++)y[J].codewords[Q]=i[L++];for(let Q=I;Q<x;Q++)y[Q].codewords[M]=i[L++];const H=y[0].codewords.length;for(let Q=M;Q<H;Q++)for(let J=0;J<x;J++){const ie=J<I?Q:Q+1;y[J].codewords[ie]=i[L++]}return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var hi;(function(D){D[D.TERMINATOR=0]="TERMINATOR",D[D.NUMERIC=1]="NUMERIC",D[D.ALPHANUMERIC=2]="ALPHANUMERIC",D[D.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",D[D.BYTE=4]="BYTE",D[D.ECI=5]="ECI",D[D.KANJI=6]="KANJI",D[D.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",D[D.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",D[D.HANZI=9]="HANZI"})(hi||(hi={}));class Ye{constructor(i,s,l,u){this.value=i,this.stringValue=s,this.characterCountBitsForVersions=l,this.bits=u,Ye.FOR_BITS.set(u,this),Ye.FOR_VALUE.set(i,this)}static forBits(i){const s=Ye.FOR_BITS.get(i);if(s===void 0)throw new O;return s}getCharacterCountBits(i){const s=i.getVersionNumber();let l;return s<=9?l=0:s<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof Ye))return!1;const s=i;return this.value===s.value}toString(){return this.stringValue}}Ye.FOR_BITS=new Map,Ye.FOR_VALUE=new Map,Ye.TERMINATOR=new Ye(hi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ye.NUMERIC=new Ye(hi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ye.ALPHANUMERIC=new Ye(hi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ye.STRUCTURED_APPEND=new Ye(hi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ye.BYTE=new Ye(hi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ye.ECI=new Ye(hi.ECI,"ECI",Int32Array.from([0,0,0]),7),Ye.KANJI=new Ye(hi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ye.FNC1_FIRST_POSITION=new Ye(hi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ye.FNC1_SECOND_POSITION=new Ye(hi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ye.HANZI=new Ye(hi.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class $t{static decode(i,s,l,u){const f=new vn(i);let g=new G;const y=new Array;let x=-1,C=-1;try{let I=null,M=!1,L;do{if(f.available()<4)L=Ye.TERMINATOR;else{const H=f.readBits(4);L=Ye.forBits(H)}switch(L){case Ye.TERMINATOR:break;case Ye.FNC1_FIRST_POSITION:case Ye.FNC1_SECOND_POSITION:M=!0;break;case Ye.STRUCTURED_APPEND:if(f.available()<16)throw new B;x=f.readBits(8),C=f.readBits(8);break;case Ye.ECI:const H=$t.parseECIValue(f);if(I=k.getCharacterSetECIByValue(H),I===null)throw new B;break;case Ye.HANZI:const Q=f.readBits(4),J=f.readBits(L.getCharacterCountBits(s));Q===$t.GB2312_SUBSET&&$t.decodeHanziSegment(f,g,J);break;default:const ie=f.readBits(L.getCharacterCountBits(s));switch(L){case Ye.NUMERIC:$t.decodeNumericSegment(f,g,ie);break;case Ye.ALPHANUMERIC:$t.decodeAlphanumericSegment(f,g,ie,M);break;case Ye.BYTE:$t.decodeByteSegment(f,g,ie,I,y,u);break;case Ye.KANJI:$t.decodeKanjiSegment(f,g,ie);break;default:throw new B}break}}while(L!==Ye.TERMINATOR)}catch{throw new B}return new Jt(i,g.toString(),y.length===0?null:y,l===null?null:l.toString(),x,C)}static decodeHanziSegment(i,s,l){if(l*13>i.available())throw new B;const u=new Uint8Array(2*l);let f=0;for(;l>0;){const g=i.readBits(13);let y=g/96<<8&4294967295|g%96;y<959?y+=41377:y+=42657,u[f]=y>>8&255,u[f+1]=y&255,f+=2,l--}try{s.append(q.decode(u,W.GB2312))}catch(g){throw new B(g)}}static decodeKanjiSegment(i,s,l){if(l*13>i.available())throw new B;const u=new Uint8Array(2*l);let f=0;for(;l>0;){const g=i.readBits(13);let y=g/192<<8&4294967295|g%192;y<7936?y+=33088:y+=49472,u[f]=y>>8,u[f+1]=y,f+=2,l--}try{s.append(q.decode(u,W.SHIFT_JIS))}catch(g){throw new B(g)}}static decodeByteSegment(i,s,l,u,f,g){if(8*l>i.available())throw new B;const y=new Uint8Array(l);for(let C=0;C<l;C++)y[C]=i.readBits(8);let x;u===null?x=W.guessEncoding(y,g):x=u.getName();try{s.append(q.decode(y,x))}catch(C){throw new B(C)}f.push(y)}static toAlphaNumericChar(i){if(i>=$t.ALPHANUMERIC_CHARS.length)throw new B;return $t.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,s,l,u){const f=s.length();for(;l>1;){if(i.available()<11)throw new B;const g=i.readBits(11);s.append($t.toAlphaNumericChar(Math.floor(g/45))),s.append($t.toAlphaNumericChar(g%45)),l-=2}if(l===1){if(i.available()<6)throw new B;s.append($t.toAlphaNumericChar(i.readBits(6)))}if(u)for(let g=f;g<s.length();g++)s.charAt(g)==="%"&&(g<s.length()-1&&s.charAt(g+1)==="%"?s.deleteCharAt(g+1):s.setCharAt(g,""))}static decodeNumericSegment(i,s,l){for(;l>=3;){if(i.available()<10)throw new B;const u=i.readBits(10);if(u>=1e3)throw new B;s.append($t.toAlphaNumericChar(Math.floor(u/100))),s.append($t.toAlphaNumericChar(Math.floor(u/10)%10)),s.append($t.toAlphaNumericChar(u%10)),l-=3}if(l===2){if(i.available()<7)throw new B;const u=i.readBits(7);if(u>=100)throw new B;s.append($t.toAlphaNumericChar(Math.floor(u/10))),s.append($t.toAlphaNumericChar(u%10))}else if(l===1){if(i.available()<4)throw new B;const u=i.readBits(4);if(u>=10)throw new B;s.append($t.toAlphaNumericChar(u))}}static parseECIValue(i){const s=i.readBits(8);if((s&128)===0)return s&127;if((s&192)===128){const l=i.readBits(8);return(s&63)<<8&4294967295|l}if((s&224)===192){const l=i.readBits(16);return(s&31)<<16&4294967295|l}throw new B}}$t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",$t.GB2312_SUBSET=1;class So{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const s=i[0];i[0]=i[2],i[2]=s}}class gs{constructor(){this.rsDecoder=new gr(Tt.QR_CODE_FIELD_256)}decodeBooleanArray(i,s){return this.decodeBitMatrix(Je.parseFromBooleanArray(i),s)}decodeBitMatrix(i,s){const l=new ki(i);let u=null;try{return this.decodeBitMatrixParser(l,s)}catch(f){u=f}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const f=this.decodeBitMatrixParser(l,s);return f.setOther(new So(!0)),f}catch(f){throw u!==null?u:f}}decodeBitMatrixParser(i,s){const l=i.readVersion(),u=i.readFormatInformation().getErrorCorrectionLevel(),f=i.readCodewords(),g=wa.getDataBlocks(f,l,u);let y=0;for(const I of g)y+=I.getNumDataCodewords();const x=new Uint8Array(y);let C=0;for(const I of g){const M=I.getCodewords(),L=I.getNumDataCodewords();this.correctErrors(M,L);for(let H=0;H<L;H++)x[C++]=M[H]}return $t.decode(x,l,u,s)}correctErrors(i,s){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-s)}catch{throw new j}for(let u=0;u<s;u++)i[u]=l[u]}}class ms extends Fe{constructor(i,s,l){super(i,s),this.estimatedModuleSize=l}aboutEquals(i,s,l){if(Math.abs(s-this.getY())<=i&&Math.abs(l-this.getX())<=i){const u=Math.abs(i-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(i,s,l){const u=(this.getX()+s)/2,f=(this.getY()+i)/2,g=(this.estimatedModuleSize+l)/2;return new ms(u,f,g)}}class Vi{constructor(i,s,l,u,f,g,y){this.image=i,this.startX=s,this.startY=l,this.width=u,this.height=f,this.moduleSize=g,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,s=this.height,l=this.width,u=i+l,f=this.startY+s/2,g=new Int32Array(3),y=this.image;for(let x=0;x<s;x++){const C=f+((x&1)===0?Math.floor((x+1)/2):-Math.floor((x+1)/2));g[0]=0,g[1]=0,g[2]=0;let I=i;for(;I<u&&!y.get(I,C);)I++;let M=0;for(;I<u;){if(y.get(I,C))if(M===1)g[1]++;else if(M===2){if(this.foundPatternCross(g)){const L=this.handlePossibleCenter(g,C,I);if(L!==null)return L}g[0]=g[2],g[1]=1,g[2]=0,M=1}else g[++M]++;else M===1&&M++,g[M]++;I++}if(this.foundPatternCross(g)){const L=this.handlePossibleCenter(g,C,u);if(L!==null)return L}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ce}static centerFromEnd(i,s){return s-i[2]-i[1]/2}foundPatternCross(i){const s=this.moduleSize,l=s/2;for(let u=0;u<3;u++)if(Math.abs(s-i[u])>=l)return!1;return!0}crossCheckVertical(i,s,l,u){const f=this.image,g=f.getHeight(),y=this.crossCheckStateCount;y[0]=0,y[1]=0,y[2]=0;let x=i;for(;x>=0&&f.get(s,x)&&y[1]<=l;)y[1]++,x--;if(x<0||y[1]>l)return NaN;for(;x>=0&&!f.get(s,x)&&y[0]<=l;)y[0]++,x--;if(y[0]>l)return NaN;for(x=i+1;x<g&&f.get(s,x)&&y[1]<=l;)y[1]++,x++;if(x===g||y[1]>l)return NaN;for(;x<g&&!f.get(s,x)&&y[2]<=l;)y[2]++,x++;if(y[2]>l)return NaN;const C=y[0]+y[1]+y[2];return 5*Math.abs(C-u)>=2*u?NaN:this.foundPatternCross(y)?Vi.centerFromEnd(y,x):NaN}handlePossibleCenter(i,s,l){const u=i[0]+i[1]+i[2],f=Vi.centerFromEnd(i,l),g=this.crossCheckVertical(s,f,2*i[1],u);if(!isNaN(g)){const y=(i[0]+i[1]+i[2])/3;for(const C of this.possibleCenters)if(C.aboutEquals(y,g,f))return C.combineEstimate(g,f,y);const x=new ms(f,g,y);this.possibleCenters.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return null}}class Ps extends Fe{constructor(i,s,l,u){super(i,s),this.estimatedModuleSize=l,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,s,l){if(Math.abs(s-this.getY())<=i&&Math.abs(l-this.getX())<=i){const u=Math.abs(i-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(i,s,l){const u=this.count+1,f=(this.count*this.getX()+s)/u,g=(this.count*this.getY()+i)/u,y=(this.count*this.estimatedModuleSize+l)/u;return new Ps(f,g,y,u)}}class tr{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class fn{constructor(i,s){this.image=i,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const s=i!=null&&i.get(Te.TRY_HARDER)!==void 0,l=i!=null&&i.get(Te.PURE_BARCODE)!==void 0,u=this.image,f=u.getHeight(),g=u.getWidth();let y=Math.floor(3*f/(4*fn.MAX_MODULES));(y<fn.MIN_SKIP||s)&&(y=fn.MIN_SKIP);let x=!1;const C=new Int32Array(5);for(let M=y-1;M<f&&!x;M+=y){C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0;let L=0;for(let H=0;H<g;H++)if(u.get(H,M))(L&1)===1&&L++,C[L]++;else if((L&1)===0)if(L===4)if(fn.foundPatternCross(C)){if(this.handlePossibleCenter(C,M,H,l)===!0)if(y=2,this.hasSkipped===!0)x=this.haveMultiplyConfirmedCenters();else{const J=this.findRowSkip();J>C[2]&&(M+=J-C[2]-y,H=g-1)}else{C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,L=3;continue}L=0,C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0}else C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,L=3;else C[++L]++;else C[L]++;fn.foundPatternCross(C)&&this.handlePossibleCenter(C,M,g,l)===!0&&(y=C[0],this.hasSkipped&&(x=this.haveMultiplyConfirmedCenters()))}const I=this.selectBestPatterns();return Fe.orderBestPatterns(I),new tr(I)}static centerFromEnd(i,s){return s-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let s=0;for(let f=0;f<5;f++){const g=i[f];if(g===0)return!1;s+=g}if(s<7)return!1;const l=s/7,u=l/2;return Math.abs(l-i[0])<u&&Math.abs(l-i[1])<u&&Math.abs(3*l-i[2])<3*u&&Math.abs(l-i[3])<u&&Math.abs(l-i[4])<u}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,s,l,u){const f=this.getCrossCheckStateCount();let g=0;const y=this.image;for(;i>=g&&s>=g&&y.get(s-g,i-g);)f[2]++,g++;if(i<g||s<g)return!1;for(;i>=g&&s>=g&&!y.get(s-g,i-g)&&f[1]<=l;)f[1]++,g++;if(i<g||s<g||f[1]>l)return!1;for(;i>=g&&s>=g&&y.get(s-g,i-g)&&f[0]<=l;)f[0]++,g++;if(f[0]>l)return!1;const x=y.getHeight(),C=y.getWidth();for(g=1;i+g<x&&s+g<C&&y.get(s+g,i+g);)f[2]++,g++;if(i+g>=x||s+g>=C)return!1;for(;i+g<x&&s+g<C&&!y.get(s+g,i+g)&&f[3]<l;)f[3]++,g++;if(i+g>=x||s+g>=C||f[3]>=l)return!1;for(;i+g<x&&s+g<C&&y.get(s+g,i+g)&&f[4]<l;)f[4]++,g++;if(f[4]>=l)return!1;const I=f[0]+f[1]+f[2]+f[3]+f[4];return Math.abs(I-u)<2*u&&fn.foundPatternCross(f)}crossCheckVertical(i,s,l,u){const f=this.image,g=f.getHeight(),y=this.getCrossCheckStateCount();let x=i;for(;x>=0&&f.get(s,x);)y[2]++,x--;if(x<0)return NaN;for(;x>=0&&!f.get(s,x)&&y[1]<=l;)y[1]++,x--;if(x<0||y[1]>l)return NaN;for(;x>=0&&f.get(s,x)&&y[0]<=l;)y[0]++,x--;if(y[0]>l)return NaN;for(x=i+1;x<g&&f.get(s,x);)y[2]++,x++;if(x===g)return NaN;for(;x<g&&!f.get(s,x)&&y[3]<l;)y[3]++,x++;if(x===g||y[3]>=l)return NaN;for(;x<g&&f.get(s,x)&&y[4]<l;)y[4]++,x++;if(y[4]>=l)return NaN;const C=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(C-u)>=2*u?NaN:fn.foundPatternCross(y)?fn.centerFromEnd(y,x):NaN}crossCheckHorizontal(i,s,l,u){const f=this.image,g=f.getWidth(),y=this.getCrossCheckStateCount();let x=i;for(;x>=0&&f.get(x,s);)y[2]++,x--;if(x<0)return NaN;for(;x>=0&&!f.get(x,s)&&y[1]<=l;)y[1]++,x--;if(x<0||y[1]>l)return NaN;for(;x>=0&&f.get(x,s)&&y[0]<=l;)y[0]++,x--;if(y[0]>l)return NaN;for(x=i+1;x<g&&f.get(x,s);)y[2]++,x++;if(x===g)return NaN;for(;x<g&&!f.get(x,s)&&y[3]<l;)y[3]++,x++;if(x===g||y[3]>=l)return NaN;for(;x<g&&f.get(x,s)&&y[4]<l;)y[4]++,x++;if(y[4]>=l)return NaN;const C=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(C-u)>=u?NaN:fn.foundPatternCross(y)?fn.centerFromEnd(y,x):NaN}handlePossibleCenter(i,s,l,u){const f=i[0]+i[1]+i[2]+i[3]+i[4];let g=fn.centerFromEnd(i,l),y=this.crossCheckVertical(s,Math.floor(g),i[2],f);if(!isNaN(y)&&(g=this.crossCheckHorizontal(Math.floor(g),Math.floor(y),i[2],f),!isNaN(g)&&(!u||this.crossCheckDiagonal(Math.floor(y),Math.floor(g),i[2],f)))){const x=f/7;let C=!1;const I=this.possibleCenters;for(let M=0,L=I.length;M<L;M++){const H=I[M];if(H.aboutEquals(x,y,g)){I[M]=H.combineEstimate(y,g,x),C=!0;break}}if(!C){const M=new Ps(g,y,x);I.push(M),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(M)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const l of this.possibleCenters)if(l.getCount()>=fn.CENTER_QUORUM)if(s==null)s=l;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-l.getX())-Math.abs(s.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,s=0;const l=this.possibleCenters.length;for(const g of this.possibleCenters)g.getCount()>=fn.CENTER_QUORUM&&(i++,s+=g.getEstimatedModuleSize());if(i<3)return!1;const u=s/l;let f=0;for(const g of this.possibleCenters)f+=Math.abs(g.getEstimatedModuleSize()-u);return f<=.05*s}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new ce;const s=this.possibleCenters;let l;if(i>3){let u=0,f=0;for(const x of this.possibleCenters){const C=x.getEstimatedModuleSize();u+=C,f+=C*C}l=u/i;let g=Math.sqrt(f/i-l*l);s.sort((x,C)=>{const I=Math.abs(C.getEstimatedModuleSize()-l),M=Math.abs(x.getEstimatedModuleSize()-l);return I<M?-1:I>M?1:0});const y=Math.max(.2*l,g);for(let x=0;x<s.length&&s.length>3;x++){const C=s[x];Math.abs(C.getEstimatedModuleSize()-l)>y&&(s.splice(x,1),x--)}}if(s.length>3){let u=0;for(const f of s)u+=f.getEstimatedModuleSize();l=u/s.length,s.sort((f,g)=>{if(g.getCount()===f.getCount()){const y=Math.abs(g.getEstimatedModuleSize()-l),x=Math.abs(f.getEstimatedModuleSize()-l);return y<x?1:y>x?-1:0}else return g.getCount()-f.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}fn.CENTER_QUORUM=2,fn.MIN_SKIP=3,fn.MAX_MODULES=57;class Ui{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(Te.NEED_RESULT_POINT_CALLBACK);const l=new fn(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(l)}processFinderPatternInfo(i){const s=i.getTopLeft(),l=i.getTopRight(),u=i.getBottomLeft(),f=this.calculateModuleSize(s,l,u);if(f<1)throw new ce("No pattern found in proccess finder.");const g=Ui.computeDimension(s,l,u,f),y=Ge.getProvisionalVersionForDimension(g),x=y.getDimensionForVersion()-7;let C=null;if(y.getAlignmentPatternCenters().length>0){const H=l.getX()-s.getX()+u.getX(),Q=l.getY()-s.getY()+u.getY(),J=1-3/x,ie=Math.floor(s.getX()+J*(H-s.getX())),de=Math.floor(s.getY()+J*(Q-s.getY()));for(let Me=4;Me<=16;Me<<=1)try{C=this.findAlignmentInRegion(f,ie,de,Me);break}catch(Oe){if(!(Oe instanceof ce))throw Oe}}const I=Ui.createTransform(s,l,u,C,g),M=Ui.sampleGrid(this.image,I,g);let L;return C===null?L=[u,s,l]:L=[u,s,l,C],new Ea(M,L)}static createTransform(i,s,l,u,f){const g=f-3.5;let y,x,C,I;return u!==null?(y=u.getX(),x=u.getY(),C=g-3,I=C):(y=s.getX()-i.getX()+l.getX(),x=s.getY()-i.getY()+l.getY(),C=g,I=g),pi.quadrilateralToQuadrilateral(3.5,3.5,g,3.5,C,I,3.5,g,i.getX(),i.getY(),s.getX(),s.getY(),y,x,l.getX(),l.getY())}static sampleGrid(i,s,l){return yi.getInstance().sampleGridWithTransform(i,l,l,s)}static computeDimension(i,s,l,u){const f=Ze.round(Fe.distance(i,s)/u),g=Ze.round(Fe.distance(i,l)/u);let y=Math.floor((f+g)/2)+7;switch(y&3){case 0:y++;break;case 2:y--;break;case 3:throw new ce("Dimensions could be not found.")}return y}calculateModuleSize(i,s,l){return(this.calculateModuleSizeOneWay(i,s)+this.calculateModuleSizeOneWay(i,l))/2}calculateModuleSizeOneWay(i,s){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(s.getX()),Math.floor(s.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(l)?u/7:isNaN(u)?l/7:(l+u)/14}sizeOfBlackWhiteBlackRunBothWays(i,s,l,u){let f=this.sizeOfBlackWhiteBlackRun(i,s,l,u),g=1,y=i-(l-i);y<0?(g=i/(i-y),y=0):y>=this.image.getWidth()&&(g=(this.image.getWidth()-1-i)/(y-i),y=this.image.getWidth()-1);let x=Math.floor(s-(u-s)*g);return g=1,x<0?(g=s/(s-x),x=0):x>=this.image.getHeight()&&(g=(this.image.getHeight()-1-s)/(x-s),x=this.image.getHeight()-1),y=Math.floor(i+(y-i)*g),f+=this.sizeOfBlackWhiteBlackRun(i,s,y,x),f-1}sizeOfBlackWhiteBlackRun(i,s,l,u){const f=Math.abs(u-s)>Math.abs(l-i);if(f){let H=i;i=s,s=H,H=l,l=u,u=H}const g=Math.abs(l-i),y=Math.abs(u-s);let x=-g/2;const C=i<l?1:-1,I=s<u?1:-1;let M=0;const L=l+C;for(let H=i,Q=s;H!==L;H+=C){const J=f?Q:H,ie=f?H:Q;if(M===1===this.image.get(J,ie)){if(M===2)return Ze.distance(H,Q,i,s);M++}if(x+=y,x>0){if(Q===u)break;Q+=I,x-=g}}return M===2?Ze.distance(l+C,u,i,s):NaN}findAlignmentInRegion(i,s,l,u){const f=Math.floor(u*i),g=Math.max(0,s-f),y=Math.min(this.image.getWidth()-1,s+f);if(y-g<i*3)throw new ce("Alignment top exceeds estimated module size.");const x=Math.max(0,l-f),C=Math.min(this.image.getHeight()-1,l+f);if(C-x<i*3)throw new ce("Alignment bottom exceeds estimated module size.");return new Vi(this.image,g,x,y-g,C-x,i,this.resultPointCallback).find()}}class Fi{constructor(){this.decoder=new gs}getDecoder(){return this.decoder}decode(i,s){let l,u;if(s!=null&&s.get(Te.PURE_BARCODE)!==void 0){const x=Fi.extractPureBits(i.getBlackMatrix());l=this.decoder.decodeBitMatrix(x,s),u=Fi.NO_POINTS}else{const x=new Ui(i.getBlackMatrix()).detect(s);l=this.decoder.decodeBitMatrix(x.getBits(),s),u=x.getPoints()}l.getOther()instanceof So&&l.getOther().applyMirroredCorrection(u);const f=new Be(l.getText(),l.getRawBytes(),void 0,u,De.QR_CODE,void 0),g=l.getByteSegments();g!==null&&f.putMetadata(wt.BYTE_SEGMENTS,g);const y=l.getECLevel();return y!==null&&f.putMetadata(wt.ERROR_CORRECTION_LEVEL,y),l.hasStructuredAppend()&&(f.putMetadata(wt.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),f.putMetadata(wt.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),f}reset(){}static extractPureBits(i){const s=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(s===null||l===null)throw new ce;const u=this.moduleSize(s,i);let f=s[1],g=l[1],y=s[0],x=l[0];if(y>=x||f>=g)throw new ce;if(g-f!==x-y&&(x=y+(g-f),x>=i.getWidth()))throw new ce;const C=Math.round((x-y+1)/u),I=Math.round((g-f+1)/u);if(C<=0||I<=0)throw new ce;if(I!==C)throw new ce;const M=Math.floor(u/2);f+=M,y+=M;const L=y+Math.floor((C-1)*u)-x;if(L>0){if(L>M)throw new ce;y-=L}const H=f+Math.floor((I-1)*u)-g;if(H>0){if(H>M)throw new ce;f-=H}const Q=new Je(C,I);for(let J=0;J<I;J++){const ie=f+Math.floor(J*u);for(let de=0;de<C;de++)i.get(y+Math.floor(de*u),ie)&&Q.set(de,J)}return Q}static moduleSize(i,s){const l=s.getHeight(),u=s.getWidth();let f=i[0],g=i[1],y=!0,x=0;for(;f<u&&g<l;){if(y!==s.get(f,g)){if(++x===5)break;y=!y}f++,g++}if(f===u||g===l)throw new ce;return(f-i[0])/7}}Fi.NO_POINTS=new Array;class We{PDF417Common(){}static getBitCountSum(i){return Ze.sum(i)}static toIntArray(i){if(i==null||!i.length)return We.EMPTY_INT_ARRAY;const s=new Int32Array(i.length);let l=0;for(const u of i)s[l++]=u;return s}static getCodeword(i){const s=Re.binarySearch(We.SYMBOL_TABLE,i&262143);return s<0?-1:(We.CODEWORD_TABLE[s]-1)%We.NUMBER_OF_CODEWORDS}}We.NUMBER_OF_CODEWORDS=929,We.MAX_CODEWORDS_IN_BARCODE=We.NUMBER_OF_CODEWORDS-1,We.MIN_ROWS_IN_BARCODE=3,We.MAX_ROWS_IN_BARCODE=90,We.MODULES_IN_CODEWORD=17,We.MODULES_IN_STOP_PATTERN=18,We.BARS_IN_MODULE=8,We.EMPTY_INT_ARRAY=new Int32Array([]),We.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),We.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class ps{constructor(i,s){this.bits=i,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class et{static detectMultiple(i,s,l){let u=i.getBlackMatrix(),f=et.detect(l,u);return f.length||(u=u.clone(),u.rotate180(),f=et.detect(l,u)),new ps(u,f)}static detect(i,s){const l=new Array;let u=0,f=0,g=!1;for(;u<s.getHeight();){const y=et.findVertices(s,u,f);if(y[0]==null&&y[3]==null){if(!g)break;g=!1,f=0;for(const x of l)x[1]!=null&&(u=Math.trunc(Math.max(u,x[1].getY()))),x[3]!=null&&(u=Math.max(u,Math.trunc(x[3].getY())));u+=et.ROW_STEP;continue}if(g=!0,l.push(y),!i)break;y[2]!=null?(f=Math.trunc(y[2].getX()),u=Math.trunc(y[2].getY())):(f=Math.trunc(y[4].getX()),u=Math.trunc(y[4].getY()))}return l}static findVertices(i,s,l){const u=i.getHeight(),f=i.getWidth(),g=new Array(8);return et.copyToResult(g,et.findRowsWithPattern(i,u,f,s,l,et.START_PATTERN),et.INDEXES_START_PATTERN),g[4]!=null&&(l=Math.trunc(g[4].getX()),s=Math.trunc(g[4].getY())),et.copyToResult(g,et.findRowsWithPattern(i,u,f,s,l,et.STOP_PATTERN),et.INDEXES_STOP_PATTERN),g}static copyToResult(i,s,l){for(let u=0;u<l.length;u++)i[l[u]]=s[u]}static findRowsWithPattern(i,s,l,u,f,g){const y=new Array(4);let x=!1;const C=new Int32Array(g.length);for(;u<s;u+=et.ROW_STEP){let M=et.findGuardPattern(i,f,u,l,!1,g,C);if(M!=null){for(;u>0;){const L=et.findGuardPattern(i,f,--u,l,!1,g,C);if(L!=null)M=L;else{u++;break}}y[0]=new Fe(M[0],u),y[1]=new Fe(M[1],u),x=!0;break}}let I=u+1;if(x){let M=0,L=Int32Array.from([Math.trunc(y[0].getX()),Math.trunc(y[1].getX())]);for(;I<s;I++){const H=et.findGuardPattern(i,L[0],I,l,!1,g,C);if(H!=null&&Math.abs(L[0]-H[0])<et.MAX_PATTERN_DRIFT&&Math.abs(L[1]-H[1])<et.MAX_PATTERN_DRIFT)L=H,M=0;else{if(M>et.SKIPPED_ROW_COUNT_MAX)break;M++}}I-=M+1,y[2]=new Fe(L[0],I),y[3]=new Fe(L[1],I)}return I-u<et.BARCODE_MIN_HEIGHT&&Re.fill(y,null),y}static findGuardPattern(i,s,l,u,f,g,y){Re.fillWithin(y,0,y.length,0);let x=s,C=0;for(;i.get(x,l)&&x>0&&C++<et.MAX_PIXEL_DRIFT;)x--;let I=x,M=0,L=g.length;for(let H=f;I<u;I++)if(i.get(I,l)!==H)y[M]++;else{if(M===L-1){if(et.patternMatchVariance(y,g,et.MAX_INDIVIDUAL_VARIANCE)<et.MAX_AVG_VARIANCE)return new Int32Array([x,I]);x+=y[0]+y[1],re.arraycopy(y,2,y,0,M-1),y[M-1]=0,y[M]=0,M--}else M++;y[M]=1,H=!H}return M===L-1&&et.patternMatchVariance(y,g,et.MAX_INDIVIDUAL_VARIANCE)<et.MAX_AVG_VARIANCE?new Int32Array([x,I-1]):null}static patternMatchVariance(i,s,l){let u=i.length,f=0,g=0;for(let C=0;C<u;C++)f+=i[C],g+=s[C];if(f<g)return 1/0;let y=f/g;l*=y;let x=0;for(let C=0;C<u;C++){let I=i[C],M=s[C]*y,L=I>M?I-M:M-I;if(L>l)return 1/0;x+=L}return x/f}}et.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),et.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),et.MAX_AVG_VARIANCE=.42,et.MAX_INDIVIDUAL_VARIANCE=.8,et.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),et.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),et.MAX_PIXEL_DRIFT=3,et.MAX_PATTERN_DRIFT=5,et.SKIPPED_ROW_COUNT_MAX=25,et.ROW_STEP=5,et.BARCODE_MIN_HEIGHT=10;class en{constructor(i,s){if(s.length===0)throw new O;this.field=i;let l=s.length;if(l>1&&s[0]===0){let u=1;for(;u<l&&s[u]===0;)u++;u===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-u),re.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let u=0;for(let f of this.coefficients)u=this.field.add(u,f);return u}let s=this.coefficients[0],l=this.coefficients.length;for(let u=1;u<l;u++)s=this.field.add(this.field.multiply(i,s),this.coefficients[u]);return s}add(i){if(!this.field.equals(i.field))throw new O("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let s=this.coefficients,l=i.coefficients;if(s.length>l.length){let g=s;s=l,l=g}let u=new Int32Array(l.length),f=l.length-s.length;re.arraycopy(l,0,u,0,f);for(let g=f;g<l.length;g++)u[g]=this.field.add(s[g-f],l[g]);return new en(this.field,u)}subtract(i){if(!this.field.equals(i.field))throw new O("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof en?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new O("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new en(this.field,new Int32Array([0]));let s=this.coefficients,l=s.length,u=i.coefficients,f=u.length,g=new Int32Array(l+f-1);for(let y=0;y<l;y++){let x=s[y];for(let C=0;C<f;C++)g[y+C]=this.field.add(g[y+C],this.field.multiply(x,u[C]))}return new en(this.field,g)}negative(){let i=this.coefficients.length,s=new Int32Array(i);for(let l=0;l<i;l++)s[l]=this.field.subtract(0,this.coefficients[l]);return new en(this.field,s)}multiplyScalar(i){if(i===0)return new en(this.field,new Int32Array([0]));if(i===1)return this;let s=this.coefficients.length,l=new Int32Array(s);for(let u=0;u<s;u++)l[u]=this.field.multiply(this.coefficients[u],i);return new en(this.field,l)}multiplyByMonomial(i,s){if(i<0)throw new O;if(s===0)return new en(this.field,new Int32Array([0]));let l=this.coefficients.length,u=new Int32Array(l+i);for(let f=0;f<l;f++)u[f]=this.field.multiply(this.coefficients[f],s);return new en(this.field,u)}toString(){let i=new G;for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);l!==0&&(l<0?(i.append(" - "),l=-l):i.length()>0&&i.append(" + "),(s===0||l!==1)&&i.append(l),s!==0&&(s===1?i.append("x"):(i.append("x^"),i.append(s))))}return i.toString()}}class Bs{add(i,s){return(i+s)%this.modulus}subtract(i,s){return(this.modulus+i-s)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new O;return this.logTable[i]}inverse(i){if(i===0)throw new ts;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,s){return i===0||s===0?0:this.expTable[(this.logTable[i]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class Wt extends Bs{constructor(i,s){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let l=1;for(let u=0;u<i;u++)this.expTable[u]=l,l=l*s%i;for(let u=0;u<i-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new en(this,new Int32Array([0])),this.one=new en(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,s){if(i<0)throw new O;if(s===0)return this.zero;let l=new Int32Array(i+1);return l[0]=s,new en(this,l)}}Wt.PDF417_GF=new Wt(We.NUMBER_OF_CODEWORDS,3);class _r{constructor(){this.field=Wt.PDF417_GF}decode(i,s,l){let u=new en(this.field,i),f=new Int32Array(s),g=!1;for(let Q=s;Q>0;Q--){let J=u.evaluateAt(this.field.exp(Q));f[s-Q]=J,J!==0&&(g=!0)}if(!g)return 0;let y=this.field.getOne();if(l!=null)for(const Q of l){let J=this.field.exp(i.length-1-Q),ie=new en(this.field,new Int32Array([this.field.subtract(0,J),1]));y=y.multiply(ie)}let x=new en(this.field,f),C=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),x,s),I=C[0],M=C[1],L=this.findErrorLocations(I),H=this.findErrorMagnitudes(M,I,L);for(let Q=0;Q<L.length;Q++){let J=i.length-1-this.field.log(L[Q]);if(J<0)throw j.getChecksumInstance();i[J]=this.field.subtract(i[J],H[Q])}return L.length}runEuclideanAlgorithm(i,s,l){if(i.getDegree()<s.getDegree()){let L=i;i=s,s=L}let u=i,f=s,g=this.field.getZero(),y=this.field.getOne();for(;f.getDegree()>=Math.round(l/2);){let L=u,H=g;if(u=f,g=y,u.isZero())throw j.getChecksumInstance();f=L;let Q=this.field.getZero(),J=u.getCoefficient(u.getDegree()),ie=this.field.inverse(J);for(;f.getDegree()>=u.getDegree()&&!f.isZero();){let de=f.getDegree()-u.getDegree(),Me=this.field.multiply(f.getCoefficient(f.getDegree()),ie);Q=Q.add(this.field.buildMonomial(de,Me)),f=f.subtract(u.multiplyByMonomial(de,Me))}y=Q.multiply(g).subtract(H).negative()}let x=y.getCoefficient(0);if(x===0)throw j.getChecksumInstance();let C=this.field.inverse(x),I=y.multiply(C),M=f.multiply(C);return[I,M]}findErrorLocations(i){let s=i.getDegree(),l=new Int32Array(s),u=0;for(let f=1;f<this.field.getSize()&&u<s;f++)i.evaluateAt(f)===0&&(l[u]=this.field.inverse(f),u++);if(u!==s)throw j.getChecksumInstance();return l}findErrorMagnitudes(i,s,l){let u=s.getDegree(),f=new Int32Array(u);for(let C=1;C<=u;C++)f[u-C]=this.field.multiply(C,s.getCoefficient(C));let g=new en(this.field,f),y=l.length,x=new Int32Array(y);for(let C=0;C<y;C++){let I=this.field.inverse(l[C]),M=this.field.subtract(0,i.evaluateAt(I)),L=this.field.inverse(g.evaluateAt(I));x[C]=this.field.multiply(M,L)}return x}}class xr{constructor(i,s,l,u,f){i instanceof xr?this.constructor_2(i):this.constructor_1(i,s,l,u,f)}constructor_1(i,s,l,u,f){const g=s==null||l==null,y=u==null||f==null;if(g&&y)throw new ce;g?(s=new Fe(0,u.getY()),l=new Fe(0,f.getY())):y&&(u=new Fe(i.getWidth()-1,s.getY()),f=new Fe(i.getWidth()-1,l.getY())),this.image=i,this.topLeft=s,this.bottomLeft=l,this.topRight=u,this.bottomRight=f,this.minX=Math.trunc(Math.min(s.getX(),l.getX())),this.maxX=Math.trunc(Math.max(u.getX(),f.getX())),this.minY=Math.trunc(Math.min(s.getY(),u.getY())),this.maxY=Math.trunc(Math.max(l.getY(),f.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,s){return i==null?s:s==null?i:new xr(i.image,i.topLeft,i.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(i,s,l){let u=this.topLeft,f=this.bottomLeft,g=this.topRight,y=this.bottomRight;if(i>0){let x=l?this.topLeft:this.topRight,C=Math.trunc(x.getY()-i);C<0&&(C=0);let I=new Fe(x.getX(),C);l?u=I:g=I}if(s>0){let x=l?this.bottomLeft:this.bottomRight,C=Math.trunc(x.getY()+s);C>=this.image.getHeight()&&(C=this.image.getHeight()-1);let I=new Fe(x.getX(),C);l?f=I:y=I}return new xr(this.image,u,f,g,y)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ks{constructor(i,s,l,u){this.columnCount=i,this.errorCorrectionLevel=u,this.rowCountUpperPart=s,this.rowCountLowerPart=l,this.rowCount=s+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class rs{constructor(){this.buffer=""}static form(i,s){let l=-1;function u(g,y,x,C,I,M){if(g==="%%")return"%";if(s[++l]===void 0)return;g=C?parseInt(C.substr(1)):void 0;let L=I?parseInt(I.substr(1)):void 0,H;switch(M){case"s":H=s[l];break;case"c":H=s[l][0];break;case"f":H=parseFloat(s[l]).toFixed(g);break;case"p":H=parseFloat(s[l]).toPrecision(g);break;case"e":H=parseFloat(s[l]).toExponential(g);break;case"x":H=parseInt(s[l]).toString(L||16);break;case"d":H=parseFloat(parseInt(s[l],L||10).toPrecision(g)).toFixed(0);break}H=typeof H=="object"?JSON.stringify(H):(+H).toString(L);let Q=parseInt(x),J=x&&x[0]+""=="0"?"0":" ";for(;H.length<Q;)H=y!==void 0?H+J:J+H;return H}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(f,u)}format(i,...s){this.buffer+=rs.form(i,s)}toString(){return this.buffer}}class Ar{constructor(i){this.boundingBox=new xr(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let s=this.getCodeword(i);if(s!=null)return s;for(let l=1;l<Ar.MAX_NEARBY_DISTANCE;l++){let u=this.imageRowToCodewordIndex(i)-l;if(u>=0&&(s=this.codewords[u],s!=null)||(u=this.imageRowToCodewordIndex(i)+l,u<this.codewords.length&&(s=this.codewords[u],s!=null)))return s}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,s){this.codewords[this.imageRowToCodewordIndex(i)]=s}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new rs;let s=0;for(const l of this.codewords){if(l==null){i.format("%3d:    |   %n",s++);continue}i.format("%3d: %3d|%3d%n",s++,l.getRowNumber(),l.getValue())}return i.toString()}}Ar.MAX_NEARBY_DISTANCE=5;class Yi{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let s=this.values.get(i);s==null&&(s=0),s++,this.values.set(i,s)}getValue(){let i=-1,s=new Array;for(const[l,u]of this.values.entries()){const f={getKey:()=>l,getValue:()=>u};f.getValue()>i?(i=f.getValue(),s=[],s.push(f.getKey())):f.getValue()===i&&s.push(f.getKey())}return We.toIntArray(s)}getConfidence(i){return this.values.get(i)}}class nr extends Ar{constructor(i,s){super(i),this._isLeft=s}setRowNumbers(){for(let i of this.getCodewords())i?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,i);let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),f=this._isLeft?l.getBottomLeft():l.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=this.imageRowToCodewordIndex(Math.trunc(f.getY())),x=-1,C=1,I=0;for(let M=g;M<y;M++){if(s[M]==null)continue;let L=s[M],H=L.getRowNumber()-x;if(H===0)I++;else if(H===1)C=Math.max(C,I),I=1,x=L.getRowNumber();else if(H<0||L.getRowNumber()>=i.getRowCount()||H>M)s[M]=null;else{let Q;C>2?Q=(C-2)*H:Q=H;let J=Q>=M;for(let ie=1;ie<=Q&&!J;ie++)J=s[M-ie]!=null;J?s[M]=null:(x=L.getRowNumber(),I=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let s=new Int32Array(i.getRowCount());for(let l of this.getCodewords())if(l!=null){let u=l.getRowNumber();if(u>=s.length)continue;s[u]++}return s}adjustIncompleteIndicatorColumnRowNumbers(i){let s=this.getBoundingBox(),l=this._isLeft?s.getTopLeft():s.getTopRight(),u=this._isLeft?s.getBottomLeft():s.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(l.getY())),g=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=this.getCodewords(),x=-1;for(let C=f;C<g;C++){if(y[C]==null)continue;let I=y[C];I.setRowNumberAsRowIndicatorColumn();let M=I.getRowNumber()-x;M===0||(M===1?x=I.getRowNumber():I.getRowNumber()>=i.getRowCount()?y[C]=null:x=I.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),s=new Yi,l=new Yi,u=new Yi,f=new Yi;for(let y of i){if(y==null)continue;y.setRowNumberAsRowIndicatorColumn();let x=y.getValue()%30,C=y.getRowNumber();switch(this._isLeft||(C+=2),C%3){case 0:l.setValue(x*3+1);break;case 1:f.setValue(x/3),u.setValue(x%3);break;case 2:s.setValue(x+1);break}}if(s.getValue().length===0||l.getValue().length===0||u.getValue().length===0||f.getValue().length===0||s.getValue()[0]<1||l.getValue()[0]+u.getValue()[0]<We.MIN_ROWS_IN_BARCODE||l.getValue()[0]+u.getValue()[0]>We.MAX_ROWS_IN_BARCODE)return null;let g=new ks(s.getValue()[0],l.getValue()[0],u.getValue()[0],f.getValue()[0]);return this.removeIncorrectCodewords(i,g),g}removeIncorrectCodewords(i,s){for(let l=0;l<i.length;l++){let u=i[l];if(i[l]==null)continue;let f=u.getValue()%30,g=u.getRowNumber();if(g>s.getRowCount()){i[l]=null;continue}switch(this._isLeft||(g+=2),g%3){case 0:f*3+1!==s.getRowCountUpperPart()&&(i[l]=null);break;case 1:(Math.trunc(f/3)!==s.getErrorCorrectionLevel()||f%3!==s.getRowCountLowerPart())&&(i[l]=null);break;case 2:f+1!==s.getColumnCount()&&(i[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ln{constructor(i,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=We.MAX_CODEWORDS_IN_BARCODE,s;do s=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let l=this.detectionResultColumns[s].getCodewords();for(let u=0;u<l.length;u++)l[u]!=null&&(l[u].hasValidRowNumber()||this.adjustRowNumbers(s,u,l))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<i.length;l++)if(i[l]!=null&&s[l]!=null&&i[l].getRowNumber()===s[l].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let f=this.detectionResultColumns[u].getCodewords()[l];f!=null&&(f.setRowNumber(i[l].getRowNumber()),f.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<s.length;l++){if(s[l]==null)continue;let u=s[l].getRowNumber(),f=0;for(let g=this.barcodeColumnCount+1;g>0&&f<this.ADJUST_ROW_NUMBER_SKIP;g--){let y=this.detectionResultColumns[g].getCodewords()[l];y!=null&&(f=Ln.adjustRowNumberIfValid(u,f,y),y.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,s=this.detectionResultColumns[0].getCodewords();for(let l=0;l<s.length;l++){if(s[l]==null)continue;let u=s[l].getRowNumber(),f=0;for(let g=1;g<this.barcodeColumnCount+1&&f<this.ADJUST_ROW_NUMBER_SKIP;g++){let y=this.detectionResultColumns[g].getCodewords()[l];y!=null&&(f=Ln.adjustRowNumberIfValid(u,f,y),y.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,s,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(i)?(l.setRowNumber(i),s=0):++s),s}adjustRowNumbers(i,s,l){if(!this.detectionResultColumns[i-1])return;let u=l[s],f=this.detectionResultColumns[i-1].getCodewords(),g=f;this.detectionResultColumns[i+1]!=null&&(g=this.detectionResultColumns[i+1].getCodewords());let y=new Array(14);y[2]=f[s],y[3]=g[s],s>0&&(y[0]=l[s-1],y[4]=f[s-1],y[5]=g[s-1]),s>1&&(y[8]=l[s-2],y[10]=f[s-2],y[11]=g[s-2]),s<l.length-1&&(y[1]=l[s+1],y[6]=f[s+1],y[7]=g[s+1]),s<l.length-2&&(y[9]=l[s+2],y[12]=f[s+2],y[13]=g[s+2]);for(let x of y)if(Ln.adjustRowNumber(u,x))return}static adjustRowNumber(i,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===i.getBucket()?(i.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,s){this.detectionResultColumns[i]=s}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new rs;for(let l=0;l<i.getCodewords().length;l++){s.format("CW %3d:",l);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){s.format("    |   ");continue}let f=this.detectionResultColumns[u].getCodewords()[l];if(f==null){s.format("    |   ");continue}s.format(" %3d|%3d",f.getRowNumber(),f.getValue())}s.format("%n")}return s.toString()}}class Wi{constructor(i,s,l,u){this.rowNumber=Wi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(s),this.bucket=Math.trunc(l),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==Wi.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}Wi.BARCODE_ROW_UNKNOWN=-1;class En{static initialize(){for(let i=0;i<We.SYMBOL_TABLE.length;i++){let s=We.SYMBOL_TABLE[i],l=s&1;for(let u=0;u<We.BARS_IN_MODULE;u++){let f=0;for(;(s&1)===l;)f+=1,s>>=1;l=s&1,En.RATIOS_TABLE[i]||(En.RATIOS_TABLE[i]=new Array(We.BARS_IN_MODULE)),En.RATIOS_TABLE[i][We.BARS_IN_MODULE-u-1]=Math.fround(f/We.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let s=En.getDecodedCodewordValue(En.sampleBitCounts(i));return s!==-1?s:En.getClosestDecodedValue(i)}static sampleBitCounts(i){let s=Ze.sum(i),l=new Int32Array(We.BARS_IN_MODULE),u=0,f=0;for(let g=0;g<We.MODULES_IN_CODEWORD;g++){let y=s/(2*We.MODULES_IN_CODEWORD)+g*s/We.MODULES_IN_CODEWORD;f+i[u]<=y&&(f+=i[u],u++),l[u]++}return l}static getDecodedCodewordValue(i){let s=En.getBitValue(i);return We.getCodeword(s)===-1?-1:s}static getBitValue(i){let s=0;for(let l=0;l<i.length;l++)for(let u=0;u<i[l];u++)s=s<<1|(l%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(i){let s=Ze.sum(i),l=new Array(We.BARS_IN_MODULE);if(s>1)for(let g=0;g<l.length;g++)l[g]=Math.fround(i[g]/s);let u=wn.MAX_VALUE,f=-1;this.bSymbolTableReady||En.initialize();for(let g=0;g<En.RATIOS_TABLE.length;g++){let y=0,x=En.RATIOS_TABLE[g];for(let C=0;C<We.BARS_IN_MODULE;C++){let I=Math.fround(x[C]-l[C]);if(y+=Math.fround(I*I),y>=u)break}y<u&&(u=y,f=We.SYMBOL_TABLE[g])}return f}}En.bSymbolTableReady=!1,En.RATIOS_TABLE=new Array(We.SYMBOL_TABLE.length).map(D=>new Array(We.BARS_IN_MODULE));class ss{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class Ta{static parseLong(i,s=void 0){return parseInt(i,s)}}class as extends A{}as.kind="NullPointerException";class Ca{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,s,l){if(i==null)throw new as;if(s<0||s>i.length||l<0||s+l>i.length||s+l<0)throw new le;if(l===0)return;for(let u=0;u<l;u++)this.write(i[s+u])}flush(){}close(){}}class kr extends A{}class va extends Ca{constructor(i=32){if(super(),this.count=0,i<0)throw new O("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let l=this.buf.length<<1;if(l-i<0&&(l=i),l<0){if(i<0)throw new kr;l=ye.MAX_VALUE}this.buf=Re.copyOfUint8Array(this.buf,l)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,s,l){if(s<0||s>i.length||l<0||s+l-i.length>0)throw new le;this.ensureCapacity(this.count+l),re.arraycopy(i,s,this.buf,this.count,l),this.count+=l}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return Re.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var zt;(function(D){D[D.ALPHA=0]="ALPHA",D[D.LOWER=1]="LOWER",D[D.MIXED=2]="MIXED",D[D.PUNCT=3]="PUNCT",D[D.ALPHA_SHIFT=4]="ALPHA_SHIFT",D[D.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(zt||(zt={}));function ys(){if(typeof window<"u")return window.BigInt||null;if(typeof Rh<"u")return Rh.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Vs;function wr(D){if(typeof Vs>"u"&&(Vs=ys()),Vs===null)throw new Error("BigInt is not supported!");return Vs(D)}function Us(){let D=[];D[0]=wr(1);let i=wr(900);D[1]=i;for(let s=2;s<16;s++)D[s]=D[s-1]*i;return D}class fe{static decode(i,s){let l=new G(""),u=k.ISO8859_1;l.enableDecoding(u);let f=1,g=i[f++],y=new ss;for(;f<i[0];){switch(g){case fe.TEXT_COMPACTION_MODE_LATCH:f=fe.textCompaction(i,f,l);break;case fe.BYTE_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:f=fe.byteCompaction(g,i,u,f,l);break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(i[f++]);break;case fe.NUMERIC_COMPACTION_MODE_LATCH:f=fe.numericCompaction(i,f,l);break;case fe.ECI_CHARSET:k.getCharacterSetECIByValue(i[f++]);break;case fe.ECI_GENERAL_PURPOSE:f+=2;break;case fe.ECI_USER_DEFINED:f++;break;case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:f=fe.decodeMacroBlock(i,f,y);break;case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:throw new B;default:f--,f=fe.textCompaction(i,f,l);break}if(f<i.length)g=i[f++];else throw B.getFormatInstance()}if(l.length()===0)throw B.getFormatInstance();let x=new Jt(null,l.toString(),null,s);return x.setOther(y),x}static decodeMacroBlock(i,s,l){if(s+fe.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw B.getFormatInstance();let u=new Int32Array(fe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let y=0;y<fe.NUMBER_OF_SEQUENCE_CODEWORDS;y++,s++)u[y]=i[s];l.setSegmentIndex(ye.parseInt(fe.decodeBase900toBase10(u,fe.NUMBER_OF_SEQUENCE_CODEWORDS)));let f=new G;s=fe.textCompaction(i,s,f),l.setFileId(f.toString());let g=-1;for(i[s]===fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(g=s+1);s<i[0];)switch(i[s]){case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,i[s]){case fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let y=new G;s=fe.textCompaction(i,s+1,y),l.setFileName(y.toString());break;case fe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let x=new G;s=fe.textCompaction(i,s+1,x),l.setSender(x.toString());break;case fe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let C=new G;s=fe.textCompaction(i,s+1,C),l.setAddressee(C.toString());break;case fe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let I=new G;s=fe.numericCompaction(i,s+1,I),l.setSegmentCount(ye.parseInt(I.toString()));break;case fe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let M=new G;s=fe.numericCompaction(i,s+1,M),l.setTimestamp(Ta.parseLong(M.toString()));break;case fe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let L=new G;s=fe.numericCompaction(i,s+1,L),l.setChecksum(ye.parseInt(L.toString()));break;case fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let H=new G;s=fe.numericCompaction(i,s+1,H),l.setFileSize(Ta.parseLong(H.toString()));break;default:throw B.getFormatInstance()}break;case fe.MACRO_PDF417_TERMINATOR:s++,l.setLastSegment(!0);break;default:throw B.getFormatInstance()}if(g!==-1){let y=s-g;l.isLastSegment()&&y--,l.setOptionalData(Re.copyOfRange(i,g,g+y))}return s}static textCompaction(i,s,l){let u=new Int32Array((i[0]-s)*2),f=new Int32Array((i[0]-s)*2),g=0,y=!1;for(;s<i[0]&&!y;){let x=i[s++];if(x<fe.TEXT_COMPACTION_MODE_LATCH)u[g]=x/30,u[g+1]=x%30,g+=2;else switch(x){case fe.TEXT_COMPACTION_MODE_LATCH:u[g++]=fe.TEXT_COMPACTION_MODE_LATCH;break;case fe.BYTE_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:case fe.NUMERIC_COMPACTION_MODE_LATCH:case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:s--,y=!0;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[g]=fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,x=i[s++],f[g]=x,g++;break}}return fe.decodeTextCompaction(u,f,g,l),s}static decodeTextCompaction(i,s,l,u){let f=zt.ALPHA,g=zt.ALPHA,y=0;for(;y<l;){let x=i[y],C="";switch(f){case zt.ALPHA:if(x<26)C=String.fromCharCode(65+x);else switch(x){case 26:C=" ";break;case fe.LL:f=zt.LOWER;break;case fe.ML:f=zt.MIXED;break;case fe.PS:g=f,f=zt.PUNCT_SHIFT;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case fe.TEXT_COMPACTION_MODE_LATCH:f=zt.ALPHA;break}break;case zt.LOWER:if(x<26)C=String.fromCharCode(97+x);else switch(x){case 26:C=" ";break;case fe.AS:g=f,f=zt.ALPHA_SHIFT;break;case fe.ML:f=zt.MIXED;break;case fe.PS:g=f,f=zt.PUNCT_SHIFT;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case fe.TEXT_COMPACTION_MODE_LATCH:f=zt.ALPHA;break}break;case zt.MIXED:if(x<fe.PL)C=fe.MIXED_CHARS[x];else switch(x){case fe.PL:f=zt.PUNCT;break;case 26:C=" ";break;case fe.LL:f=zt.LOWER;break;case fe.AL:f=zt.ALPHA;break;case fe.PS:g=f,f=zt.PUNCT_SHIFT;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case fe.TEXT_COMPACTION_MODE_LATCH:f=zt.ALPHA;break}break;case zt.PUNCT:if(x<fe.PAL)C=fe.PUNCT_CHARS[x];else switch(x){case fe.PAL:f=zt.ALPHA;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case fe.TEXT_COMPACTION_MODE_LATCH:f=zt.ALPHA;break}break;case zt.ALPHA_SHIFT:if(f=g,x<26)C=String.fromCharCode(65+x);else switch(x){case 26:C=" ";break;case fe.TEXT_COMPACTION_MODE_LATCH:f=zt.ALPHA;break}break;case zt.PUNCT_SHIFT:if(f=g,x<fe.PAL)C=fe.PUNCT_CHARS[x];else switch(x){case fe.PAL:f=zt.ALPHA;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case fe.TEXT_COMPACTION_MODE_LATCH:f=zt.ALPHA;break}break}C!==""&&u.append(C),y++}}static byteCompaction(i,s,l,u,f){let g=new va,y=0,x=0,C=!1;switch(i){case fe.BYTE_COMPACTION_MODE_LATCH:let I=new Int32Array(6),M=s[u++];for(;u<s[0]&&!C;)switch(I[y++]=M,x=900*x+M,M=s[u++],M){case fe.TEXT_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH:case fe.NUMERIC_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:u--,C=!0;break;default:if(y%5===0&&y>0){for(let L=0;L<6;++L)g.write(Number(wr(x)>>wr(8*(5-L))));x=0,y=0}break}u===s[0]&&M<fe.TEXT_COMPACTION_MODE_LATCH&&(I[y++]=M);for(let L=0;L<y;L++)g.write(I[L]);break;case fe.BYTE_COMPACTION_MODE_LATCH_6:for(;u<s[0]&&!C;){let L=s[u++];if(L<fe.TEXT_COMPACTION_MODE_LATCH)y++,x=900*x+L;else switch(L){case fe.TEXT_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH:case fe.NUMERIC_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:u--,C=!0;break}if(y%5===0&&y>0){for(let H=0;H<6;++H)g.write(Number(wr(x)>>wr(8*(5-H))));x=0,y=0}}break}return f.append(q.decode(g.toByteArray(),l)),u}static numericCompaction(i,s,l){let u=0,f=!1,g=new Int32Array(fe.MAX_NUMERIC_CODEWORDS);for(;s<i[0]&&!f;){let y=i[s++];if(s===i[0]&&(f=!0),y<fe.TEXT_COMPACTION_MODE_LATCH)g[u]=y,u++;else switch(y){case fe.TEXT_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:s--,f=!0;break}(u%fe.MAX_NUMERIC_CODEWORDS===0||y===fe.NUMERIC_COMPACTION_MODE_LATCH||f)&&u>0&&(l.append(fe.decodeBase900toBase10(g,u)),u=0)}return s}static decodeBase900toBase10(i,s){let l=wr(0);for(let f=0;f<s;f++)l+=fe.EXP900[s-f-1]*wr(i[f]);let u=l.toString();if(u.charAt(0)!=="1")throw new B;return u.substring(1)}}fe.TEXT_COMPACTION_MODE_LATCH=900,fe.BYTE_COMPACTION_MODE_LATCH=901,fe.NUMERIC_COMPACTION_MODE_LATCH=902,fe.BYTE_COMPACTION_MODE_LATCH_6=924,fe.ECI_USER_DEFINED=925,fe.ECI_GENERAL_PURPOSE=926,fe.ECI_CHARSET=927,fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,fe.MACRO_PDF417_TERMINATOR=922,fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,fe.MAX_NUMERIC_CODEWORDS=15,fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,fe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,fe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,fe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,fe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,fe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,fe.PL=25,fe.LL=27,fe.AS=27,fe.ML=28,fe.AL=28,fe.PS=29,fe.PAL=29,fe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,fe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",fe.EXP900=ys()?Us():[],fe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ht{constructor(){}static decode(i,s,l,u,f,g,y){let x=new xr(i,s,l,u,f),C=null,I=null,M;for(let Q=!0;;Q=!1){if(s!=null&&(C=ht.getRowIndicatorColumn(i,x,s,!0,g,y)),u!=null&&(I=ht.getRowIndicatorColumn(i,x,u,!1,g,y)),M=ht.merge(C,I),M==null)throw ce.getNotFoundInstance();let J=M.getBoundingBox();if(Q&&J!=null&&(J.getMinY()<x.getMinY()||J.getMaxY()>x.getMaxY()))x=J;else break}M.setBoundingBox(x);let L=M.getBarcodeColumnCount()+1;M.setDetectionResultColumn(0,C),M.setDetectionResultColumn(L,I);let H=C!=null;for(let Q=1;Q<=L;Q++){let J=H?Q:L-Q;if(M.getDetectionResultColumn(J)!==void 0)continue;let ie;J===0||J===L?ie=new nr(x,J===0):ie=new Ar(x),M.setDetectionResultColumn(J,ie);let de=-1,Me=de;for(let Oe=x.getMinY();Oe<=x.getMaxY();Oe++){if(de=ht.getStartColumn(M,J,Oe,H),de<0||de>x.getMaxX()){if(Me===-1)continue;de=Me}let Ie=ht.detectCodeword(i,x.getMinX(),x.getMaxX(),H,de,Oe,g,y);Ie!=null&&(ie.setCodeword(Oe,Ie),Me=de,g=Math.min(g,Ie.getWidth()),y=Math.max(y,Ie.getWidth()))}}return ht.createDecoderResult(M)}static merge(i,s){if(i==null&&s==null)return null;let l=ht.getBarcodeMetadata(i,s);if(l==null)return null;let u=xr.merge(ht.adjustBoundingBox(i),ht.adjustBoundingBox(s));return new Ln(l,u)}static adjustBoundingBox(i){if(i==null)return null;let s=i.getRowHeights();if(s==null)return null;let l=ht.getMax(s),u=0;for(let y of s)if(u+=l-y,y>0)break;let f=i.getCodewords();for(let y=0;u>0&&f[y]==null;y++)u--;let g=0;for(let y=s.length-1;y>=0&&(g+=l-s[y],!(s[y]>0));y--);for(let y=f.length-1;g>0&&f[y]==null;y--)g--;return i.getBoundingBox().addMissingRows(u,g,i.isLeft())}static getMax(i){let s=-1;for(let l of i)s=Math.max(s,l);return s}static getBarcodeMetadata(i,s){let l;if(i==null||(l=i.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let u;return s==null||(u=s.getBarcodeMetadata())==null?l:l.getColumnCount()!==u.getColumnCount()&&l.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&l.getRowCount()!==u.getRowCount()?null:l}static getRowIndicatorColumn(i,s,l,u,f,g){let y=new nr(s,u);for(let x=0;x<2;x++){let C=x===0?1:-1,I=Math.trunc(Math.trunc(l.getX()));for(let M=Math.trunc(Math.trunc(l.getY()));M<=s.getMaxY()&&M>=s.getMinY();M+=C){let L=ht.detectCodeword(i,0,i.getWidth(),u,I,M,f,g);L!=null&&(y.setCodeword(M,L),u?I=L.getStartX():I=L.getEndX())}}return y}static adjustCodewordCount(i,s){let l=s[0][1],u=l.getValue(),f=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-ht.getNumberOfECCodeWords(i.getBarcodeECLevel());if(u.length===0){if(f<1||f>We.MAX_CODEWORDS_IN_BARCODE)throw ce.getNotFoundInstance();l.setValue(f)}else u[0]!==f&&l.setValue(f)}static createDecoderResult(i){let s=ht.createBarcodeMatrix(i);ht.adjustCodewordCount(i,s);let l=new Array,u=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),f=[],g=new Array;for(let x=0;x<i.getBarcodeRowCount();x++)for(let C=0;C<i.getBarcodeColumnCount();C++){let I=s[x][C+1].getValue(),M=x*i.getBarcodeColumnCount()+C;I.length===0?l.push(M):I.length===1?u[M]=I[0]:(g.push(M),f.push(I))}let y=new Array(f.length);for(let x=0;x<y.length;x++)y[x]=f[x];return ht.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),u,We.toIntArray(l),We.toIntArray(g),y)}static createDecoderResultFromAmbiguousValues(i,s,l,u,f){let g=new Int32Array(u.length),y=100;for(;y-- >0;){for(let x=0;x<g.length;x++)s[u[x]]=f[x][g[x]];try{return ht.decodeCodewords(s,i,l)}catch(x){if(!(x instanceof j))throw x}if(g.length===0)throw j.getChecksumInstance();for(let x=0;x<g.length;x++)if(g[x]<f[x].length-1){g[x]++;break}else if(g[x]=0,x===g.length-1)throw j.getChecksumInstance()}throw j.getChecksumInstance()}static createBarcodeMatrix(i){let s=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let u=0;u<s.length;u++)for(let f=0;f<s[u].length;f++)s[u][f]=new Yi;let l=0;for(let u of i.getDetectionResultColumns()){if(u!=null){for(let f of u.getCodewords())if(f!=null){let g=f.getRowNumber();if(g>=0){if(g>=s.length)continue;s[g][l].setValue(f.getValue())}}}l++}return s}static isValidBarcodeColumn(i,s){return s>=0&&s<=i.getBarcodeColumnCount()+1}static getStartColumn(i,s,l,u){let f=u?1:-1,g=null;if(ht.isValidBarcodeColumn(i,s-f)&&(g=i.getDetectionResultColumn(s-f).getCodeword(l)),g!=null)return u?g.getEndX():g.getStartX();if(g=i.getDetectionResultColumn(s).getCodewordNearby(l),g!=null)return u?g.getStartX():g.getEndX();if(ht.isValidBarcodeColumn(i,s-f)&&(g=i.getDetectionResultColumn(s-f).getCodewordNearby(l)),g!=null)return u?g.getEndX():g.getStartX();let y=0;for(;ht.isValidBarcodeColumn(i,s-f);){s-=f;for(let x of i.getDetectionResultColumn(s).getCodewords())if(x!=null)return(u?x.getEndX():x.getStartX())+f*y*(x.getEndX()-x.getStartX());y++}return u?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,s,l,u,f,g,y,x){f=ht.adjustCodewordStartColumn(i,s,l,u,f,g);let C=ht.getModuleBitCount(i,s,l,u,f,g);if(C==null)return null;let I,M=Ze.sum(C);if(u)I=f+M;else{for(let Q=0;Q<C.length/2;Q++){let J=C[Q];C[Q]=C[C.length-1-Q],C[C.length-1-Q]=J}I=f,f=I-M}if(!ht.checkCodewordSkew(M,y,x))return null;let L=En.getDecodedValue(C),H=We.getCodeword(L);return H===-1?null:new Wi(f,I,ht.getCodewordBucketNumber(L),H)}static getModuleBitCount(i,s,l,u,f,g){let y=f,x=new Int32Array(8),C=0,I=u?1:-1,M=u;for(;(u?y<l:y>=s)&&C<x.length;)i.get(y,g)===M?(x[C]++,y+=I):(C++,M=!M);return C===x.length||y===(u?l:s)&&C===x.length-1?x:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,s,l,u,f,g){let y=f,x=u?-1:1;for(let C=0;C<2;C++){for(;(u?y>=s:y<l)&&u===i.get(y,g);){if(Math.abs(f-y)>ht.CODEWORD_SKEW_SIZE)return f;y+=x}x=-x,u=!u}return y}static checkCodewordSkew(i,s,l){return s-ht.CODEWORD_SKEW_SIZE<=i&&i<=l+ht.CODEWORD_SKEW_SIZE}static decodeCodewords(i,s,l){if(i.length===0)throw B.getFormatInstance();let u=1<<s+1,f=ht.correctErrors(i,l,u);ht.verifyCodewordCount(i,u);let g=fe.decode(i,""+s);return g.setErrorsCorrected(f),g.setErasures(l.length),g}static correctErrors(i,s,l){if(s!=null&&s.length>l/2+ht.MAX_ERRORS||l<0||l>ht.MAX_EC_CODEWORDS)throw j.getChecksumInstance();return ht.errorCorrection.decode(i,l,s)}static verifyCodewordCount(i,s){if(i.length<4)throw B.getFormatInstance();let l=i[0];if(l>i.length)throw B.getFormatInstance();if(l===0)if(s<i.length)i[0]=i.length-s;else throw B.getFormatInstance()}static getBitCountForCodeword(i){let s=new Int32Array(8),l=0,u=s.length-1;for(;!((i&1)!==l&&(l=i&1,u--,u<0));)s[u]++,i>>=1;return s}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return ht.getCodewordBucketNumber(ht.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let s=new rs;for(let l=0;l<i.length;l++){s.format("Row %2d: ",l);for(let u=0;u<i[l].length;u++){let f=i[l][u];f.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",f.getValue()[0],f.getConfidence(f.getValue()[0]))}s.format("%n")}return s.toString()}}ht.CODEWORD_SKEW_SIZE=2,ht.MAX_ERRORS=3,ht.MAX_EC_CODEWORDS=512,ht.errorCorrection=new _r;class Sn{decode(i,s=null){let l=Sn.decode(i,s,!1);if(l==null||l.length===0||l[0]==null)throw ce.getNotFoundInstance();return l[0]}decodeMultiple(i,s=null){try{return Sn.decode(i,s,!0)}catch(l){throw l instanceof B||l instanceof j?ce.getNotFoundInstance():l}}static decode(i,s,l){const u=new Array,f=et.detectMultiple(i,s,l);for(const g of f.getPoints()){const y=ht.decode(f.getBits(),g[4],g[5],g[6],g[7],Sn.getMinCodewordWidth(g),Sn.getMaxCodewordWidth(g)),x=new Be(y.getText(),y.getRawBytes(),void 0,g,De.PDF_417);x.putMetadata(wt.ERROR_CORRECTION_LEVEL,y.getECLevel());const C=y.getOther();C!=null&&x.putMetadata(wt.PDF417_EXTRA_METADATA,C),u.push(x)}return u.map(g=>g)}static getMaxWidth(i,s){return i==null||s==null?0:Math.trunc(Math.abs(i.getX()-s.getX()))}static getMinWidth(i,s){return i==null||s==null?ye.MAX_VALUE:Math.trunc(Math.abs(i.getX()-s.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(Sn.getMaxWidth(i[0],i[4]),Sn.getMaxWidth(i[6],i[2])*We.MODULES_IN_CODEWORD/We.MODULES_IN_STOP_PATTERN),Math.max(Sn.getMaxWidth(i[1],i[5]),Sn.getMaxWidth(i[7],i[3])*We.MODULES_IN_CODEWORD/We.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(Sn.getMinWidth(i[0],i[4]),Sn.getMinWidth(i[6],i[2])*We.MODULES_IN_CODEWORD/We.MODULES_IN_STOP_PATTERN),Math.min(Sn.getMinWidth(i[1],i[5]),Sn.getMinWidth(i[7],i[3])*We.MODULES_IN_CODEWORD/We.MODULES_IN_STOP_PATTERN)))}reset(){}}class Fs extends A{}Fs.kind="ReaderException";class bo{constructor(i,s){this.verbose=i===!0,s&&this.setHints(s)}decode(i,s){return s&&this.setHints(s),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const s=!o(i)&&i.get(Te.TRY_HARDER)===!0,l=o(i)?null:i.get(Te.POSSIBLE_FORMATS),u=new Array;if(!o(l)){const f=l.some(g=>g===De.UPC_A||g===De.UPC_E||g===De.EAN_13||g===De.EAN_8||g===De.CODABAR||g===De.CODE_39||g===De.CODE_93||g===De.CODE_128||g===De.ITF||g===De.RSS_14||g===De.RSS_EXPANDED);f&&!s&&u.push(new Ti(i,this.verbose)),l.includes(De.QR_CODE)&&u.push(new Fi),l.includes(De.DATA_MATRIX)&&u.push(new Bi),l.includes(De.AZTEC)&&u.push(new Ds),l.includes(De.PDF_417)&&u.push(new Sn),f&&s&&u.push(new Ti(i,this.verbose))}u.length===0&&(s||u.push(new Ti(i,this.verbose)),u.push(new Fi),u.push(new Bi),u.push(new Ds),u.push(new Sn),s&&u.push(new Ti(i,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new Fs("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(i,this.hints)}catch(l){if(l instanceof Fs)continue}throw new ce("No MultiFormat Readers were able to detect the code.")}}class Vr extends Pe{constructor(i=null,s=500){const l=new bo;l.setHints(i),super(l,s)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class ll extends Pe{constructor(i=500){super(new Sn,i)}}class cl extends Pe{constructor(i=500){super(new Fi,i)}}var Sa;(function(D){D[D.ERROR_CORRECTION=0]="ERROR_CORRECTION",D[D.CHARACTER_SET=1]="CHARACTER_SET",D[D.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",D[D.MIN_SIZE=3]="MIN_SIZE",D[D.MAX_SIZE=4]="MAX_SIZE",D[D.MARGIN=5]="MARGIN",D[D.PDF417_COMPACT=6]="PDF417_COMPACT",D[D.PDF417_COMPACTION=7]="PDF417_COMPACTION",D[D.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",D[D.AZTEC_LAYERS=9]="AZTEC_LAYERS",D[D.QR_VERSION=10]="QR_VERSION"})(Sa||(Sa={}));var bn=Sa;class Ur{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new jn(i,Int32Array.from([1])))}buildGenerator(i){const s=this.cachedGenerators;if(i>=s.length){let l=s[s.length-1];const u=this.field;for(let f=s.length;f<=i;f++){const g=l.multiply(new jn(u,Int32Array.from([1,u.exp(f-1+u.getGeneratorBase())])));s.push(g),l=g}}return s[i]}encode(i,s){if(s===0)throw new O("No error correction bytes");const l=i.length-s;if(l<=0)throw new O("No data bytes provided");const u=this.buildGenerator(s),f=new Int32Array(l);re.arraycopy(i,0,f,0,l);let g=new jn(this.field,f);g=g.multiplyByMonomial(s,1);const x=g.divide(u)[1].getCoefficients(),C=s-x.length;for(let I=0;I<C;I++)i[l+I]=0;re.arraycopy(x,0,i,l+C,x.length)}}class vt{constructor(){}static applyMaskPenaltyRule1(i){return vt.applyMaskPenaltyRule1Internal(i,!0)+vt.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let s=0;const l=i.getArray(),u=i.getWidth(),f=i.getHeight();for(let g=0;g<f-1;g++){const y=l[g];for(let x=0;x<u-1;x++){const C=y[x];C===y[x+1]&&C===l[g+1][x]&&C===l[g+1][x+1]&&s++}}return vt.N2*s}static applyMaskPenaltyRule3(i){let s=0;const l=i.getArray(),u=i.getWidth(),f=i.getHeight();for(let g=0;g<f;g++)for(let y=0;y<u;y++){const x=l[g];y+6<u&&x[y]===1&&x[y+1]===0&&x[y+2]===1&&x[y+3]===1&&x[y+4]===1&&x[y+5]===0&&x[y+6]===1&&(vt.isWhiteHorizontal(x,y-4,y)||vt.isWhiteHorizontal(x,y+7,y+11))&&s++,g+6<f&&l[g][y]===1&&l[g+1][y]===0&&l[g+2][y]===1&&l[g+3][y]===1&&l[g+4][y]===1&&l[g+5][y]===0&&l[g+6][y]===1&&(vt.isWhiteVertical(l,y,g-4,g)||vt.isWhiteVertical(l,y,g+7,g+11))&&s++}return s*vt.N3}static isWhiteHorizontal(i,s,l){s=Math.max(s,0),l=Math.min(l,i.length);for(let u=s;u<l;u++)if(i[u]===1)return!1;return!0}static isWhiteVertical(i,s,l,u){l=Math.max(l,0),u=Math.min(u,i.length);for(let f=l;f<u;f++)if(i[f][s]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let s=0;const l=i.getArray(),u=i.getWidth(),f=i.getHeight();for(let x=0;x<f;x++){const C=l[x];for(let I=0;I<u;I++)C[I]===1&&s++}const g=i.getHeight()*i.getWidth();return Math.floor(Math.abs(s*2-g)*10/g)*vt.N4}static getDataMaskBit(i,s,l){let u,f;switch(i){case 0:u=l+s&1;break;case 1:u=l&1;break;case 2:u=s%3;break;case 3:u=(l+s)%3;break;case 4:u=Math.floor(l/2)+Math.floor(s/3)&1;break;case 5:f=l*s,u=(f&1)+f%3;break;case 6:f=l*s,u=(f&1)+f%3&1;break;case 7:f=l*s,u=f%3+(l+s&1)&1;break;default:throw new O("Invalid mask pattern: "+i)}return u===0}static applyMaskPenaltyRule1Internal(i,s){let l=0;const u=s?i.getHeight():i.getWidth(),f=s?i.getWidth():i.getHeight(),g=i.getArray();for(let y=0;y<u;y++){let x=0,C=-1;for(let I=0;I<f;I++){const M=s?g[y][I]:g[I][y];M===C?x++:(x>=5&&(l+=vt.N1+(x-5)),x=1,C=M)}x>=5&&(l+=vt.N1+(x-5))}return l}}vt.N1=3,vt.N2=3,vt.N3=40,vt.N4=10;class zs{constructor(i,s){this.width=i,this.height=s;const l=new Array(s);for(let u=0;u!==s;u++)l[u]=new Uint8Array(i);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(i,s){return this.bytes[s][i]}getArray(){return this.bytes}setNumber(i,s,l){this.bytes[s][i]=l}setBoolean(i,s,l){this.bytes[s][i]=l?1:0}clear(i){for(const s of this.bytes)Re.fill(s,i)}equals(i){if(!(i instanceof zs))return!1;const s=i;if(this.width!==s.width||this.height!==s.height)return!1;for(let l=0,u=this.height;l<u;++l){const f=this.bytes[l],g=s.bytes[l];for(let y=0,x=this.width;y<x;++y)if(f[y]!==g[y])return!1}return!0}toString(){const i=new G;for(let s=0,l=this.height;s<l;++s){const u=this.bytes[s];for(let f=0,g=this.width;f<g;++f)switch(u[f]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class Fr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new G;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<Fr.NUM_MASK_PATTERNS}}Fr.NUM_MASK_PATTERNS=8;class It extends A{}It.kind="WriterException";class p{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,s,l,u,f){p.clearMatrix(f),p.embedBasicPatterns(l,f),p.embedTypeInfo(s,u,f),p.maybeEmbedVersionInfo(l,f),p.embedDataBits(i,u,f)}static embedBasicPatterns(i,s){p.embedPositionDetectionPatternsAndSeparators(s),p.embedDarkDotAtLeftBottomCorner(s),p.maybeEmbedPositionAdjustmentPatterns(i,s),p.embedTimingPatterns(s)}static embedTypeInfo(i,s,l){const u=new pe;p.makeTypeInfoBits(i,s,u);for(let f=0,g=u.getSize();f<g;++f){const y=u.get(u.getSize()-1-f),x=p.TYPE_INFO_COORDINATES[f],C=x[0],I=x[1];if(l.setBoolean(C,I,y),f<8){const M=l.getWidth()-f-1;l.setBoolean(M,8,y)}else{const L=l.getHeight()-7+(f-8);l.setBoolean(8,L,y)}}}static maybeEmbedVersionInfo(i,s){if(i.getVersionNumber()<7)return;const l=new pe;p.makeVersionInfoBits(i,l);let u=17;for(let f=0;f<6;++f)for(let g=0;g<3;++g){const y=l.get(u);u--,s.setBoolean(f,s.getHeight()-11+g,y),s.setBoolean(s.getHeight()-11+g,f,y)}}static embedDataBits(i,s,l){let u=0,f=-1,g=l.getWidth()-1,y=l.getHeight()-1;for(;g>0;){for(g===6&&(g-=1);y>=0&&y<l.getHeight();){for(let x=0;x<2;++x){const C=g-x;if(!p.isEmpty(l.get(C,y)))continue;let I;u<i.getSize()?(I=i.get(u),++u):I=!1,s!==255&&vt.getDataMaskBit(s,C,y)&&(I=!I),l.setBoolean(C,y,I)}y+=f}f=-f,y+=f,g-=2}if(u!==i.getSize())throw new It("Not all bits consumed: "+u+"/"+i.getSize())}static findMSBSet(i){return 32-ye.numberOfLeadingZeros(i)}static calculateBCHCode(i,s){if(s===0)throw new O("0 polynomial");const l=p.findMSBSet(s);for(i<<=l-1;p.findMSBSet(i)>=l;)i^=s<<p.findMSBSet(i)-l;return i}static makeTypeInfoBits(i,s,l){if(!Fr.isValidMaskPattern(s))throw new It("Invalid mask pattern");const u=i.getBits()<<3|s;l.appendBits(u,5);const f=p.calculateBCHCode(u,p.TYPE_INFO_POLY);l.appendBits(f,10);const g=new pe;if(g.appendBits(p.TYPE_INFO_MASK_PATTERN,15),l.xor(g),l.getSize()!==15)throw new It("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(i,s){s.appendBits(i.getVersionNumber(),6);const l=p.calculateBCHCode(i.getVersionNumber(),p.VERSION_INFO_POLY);if(s.appendBits(l,12),s.getSize()!==18)throw new It("should not happen but we got: "+s.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let s=8;s<i.getWidth()-8;++s){const l=(s+1)%2;p.isEmpty(i.get(s,6))&&i.setNumber(s,6,l),p.isEmpty(i.get(6,s))&&i.setNumber(6,s,l)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new It;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,s,l){for(let u=0;u<8;++u){if(!p.isEmpty(l.get(i+u,s)))throw new It;l.setNumber(i+u,s,0)}}static embedVerticalSeparationPattern(i,s,l){for(let u=0;u<7;++u){if(!p.isEmpty(l.get(i,s+u)))throw new It;l.setNumber(i,s+u,0)}}static embedPositionAdjustmentPattern(i,s,l){for(let u=0;u<5;++u){const f=p.POSITION_ADJUSTMENT_PATTERN[u];for(let g=0;g<5;++g)l.setNumber(i+g,s+u,f[g])}}static embedPositionDetectionPattern(i,s,l){for(let u=0;u<7;++u){const f=p.POSITION_DETECTION_PATTERN[u];for(let g=0;g<7;++g)l.setNumber(i+g,s+u,f[g])}}static embedPositionDetectionPatternsAndSeparators(i){const s=p.POSITION_DETECTION_PATTERN[0].length;p.embedPositionDetectionPattern(0,0,i),p.embedPositionDetectionPattern(i.getWidth()-s,0,i),p.embedPositionDetectionPattern(0,i.getWidth()-s,i);const l=8;p.embedHorizontalSeparationPattern(0,l-1,i),p.embedHorizontalSeparationPattern(i.getWidth()-l,l-1,i),p.embedHorizontalSeparationPattern(0,i.getWidth()-l,i);const u=7;p.embedVerticalSeparationPattern(u,0,i),p.embedVerticalSeparationPattern(i.getHeight()-u-1,0,i),p.embedVerticalSeparationPattern(u,i.getHeight()-u,i)}static maybeEmbedPositionAdjustmentPatterns(i,s){if(i.getVersionNumber()<2)return;const l=i.getVersionNumber()-1,u=p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let f=0,g=u.length;f!==g;f++){const y=u[f];if(y>=0)for(let x=0;x!==g;x++){const C=u[x];C>=0&&p.isEmpty(s.get(C,y))&&p.embedPositionAdjustmentPattern(C-2,y-2,s)}}}}p.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),p.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),p.VERSION_INFO_POLY=7973,p.TYPE_INFO_POLY=1335,p.TYPE_INFO_MASK_PATTERN=21522;class S{constructor(i,s){this.dataBytes=i,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class N{constructor(){}static calculateMaskPenalty(i){return vt.applyMaskPenaltyRule1(i)+vt.applyMaskPenaltyRule2(i)+vt.applyMaskPenaltyRule3(i)+vt.applyMaskPenaltyRule4(i)}static encode(i,s,l=null){let u=N.DEFAULT_BYTE_MODE_ENCODING;const f=l!==null&&l.get(bn.CHARACTER_SET)!==void 0;f&&(u=l.get(bn.CHARACTER_SET).toString());const g=this.chooseMode(i,u),y=new pe;if(g===Ye.BYTE&&(f||N.DEFAULT_BYTE_MODE_ENCODING!==u)){const Oe=k.getCharacterSetECIByName(u);Oe!==void 0&&this.appendECI(Oe,y)}this.appendModeInfo(g,y);const x=new pe;this.appendBytes(i,g,x,u);let C;if(l!==null&&l.get(bn.QR_VERSION)!==void 0){const Oe=Number.parseInt(l.get(bn.QR_VERSION).toString(),10);C=Ge.getVersionForNumber(Oe);const Ie=this.calculateBitsNeeded(g,y,x,C);if(!this.willFit(Ie,C,s))throw new It("Data too big for requested version")}else C=this.recommendVersion(s,g,y,x);const I=new pe;I.appendBitArray(y);const M=g===Ye.BYTE?x.getSizeInBytes():i.length;this.appendLengthInfo(M,C,g,I),I.appendBitArray(x);const L=C.getECBlocksForLevel(s),H=C.getTotalCodewords()-L.getTotalECCodewords();this.terminateBits(H,I);const Q=this.interleaveWithECBytes(I,C.getTotalCodewords(),H,L.getNumBlocks()),J=new Fr;J.setECLevel(s),J.setMode(g),J.setVersion(C);const ie=C.getDimensionForVersion(),de=new zs(ie,ie),Me=this.chooseMaskPattern(Q,s,C,de);return J.setMaskPattern(Me),p.buildMatrix(Q,s,C,Me,de),J.setMatrix(de),J}static recommendVersion(i,s,l,u){const f=this.calculateBitsNeeded(s,l,u,Ge.getVersionForNumber(1)),g=this.chooseVersion(f,i),y=this.calculateBitsNeeded(s,l,u,g);return this.chooseVersion(y,i)}static calculateBitsNeeded(i,s,l,u){return s.getSize()+i.getCharacterCountBits(u)+l.getSize()}static getAlphanumericCode(i){return i<N.ALPHANUMERIC_TABLE.length?N.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,s=null){if(k.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(i))return Ye.KANJI;let l=!1,u=!1;for(let f=0,g=i.length;f<g;++f){const y=i.charAt(f);if(N.isDigit(y))l=!0;else if(this.getAlphanumericCode(y.charCodeAt(0))!==-1)u=!0;else return Ye.BYTE}return u?Ye.ALPHANUMERIC:l?Ye.NUMERIC:Ye.BYTE}static isOnlyDoubleByteKanji(i){let s;try{s=q.encode(i,k.SJIS)}catch{return!1}const l=s.length;if(l%2!==0)return!1;for(let u=0;u<l;u+=2){const f=s[u]&255;if((f<129||f>159)&&(f<224||f>235))return!1}return!0}static chooseMaskPattern(i,s,l,u){let f=Number.MAX_SAFE_INTEGER,g=-1;for(let y=0;y<Fr.NUM_MASK_PATTERNS;y++){p.buildMatrix(i,s,l,y,u);let x=this.calculateMaskPenalty(u);x<f&&(f=x,g=y)}return g}static chooseVersion(i,s){for(let l=1;l<=40;l++){const u=Ge.getVersionForNumber(l);if(N.willFit(i,u,s))return u}throw new It("Data too big")}static willFit(i,s,l){const u=s.getTotalCodewords(),g=s.getECBlocksForLevel(l).getTotalECCodewords(),y=u-g,x=(i+7)/8;return y>=x}static terminateBits(i,s){const l=i*8;if(s.getSize()>l)throw new It("data bits cannot fit in the QR Code"+s.getSize()+" > "+l);for(let g=0;g<4&&s.getSize()<l;++g)s.appendBit(!1);const u=s.getSize()&7;if(u>0)for(let g=u;g<8;g++)s.appendBit(!1);const f=i-s.getSizeInBytes();for(let g=0;g<f;++g)s.appendBits((g&1)===0?236:17,8);if(s.getSize()!==l)throw new It("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,s,l,u,f,g){if(u>=l)throw new It("Block ID too large");const y=i%l,x=l-y,C=Math.floor(i/l),I=C+1,M=Math.floor(s/l),L=M+1,H=C-M,Q=I-L;if(H!==Q)throw new It("EC bytes mismatch");if(l!==x+y)throw new It("RS blocks mismatch");if(i!==(M+H)*x+(L+Q)*y)throw new It("Total bytes mismatch");u<x?(f[0]=M,g[0]=H):(f[0]=L,g[0]=Q)}static interleaveWithECBytes(i,s,l,u){if(i.getSizeInBytes()!==l)throw new It("Number of bits and data bytes does not match");let f=0,g=0,y=0;const x=new Array;for(let I=0;I<u;++I){const M=new Int32Array(1),L=new Int32Array(1);N.getNumDataBytesAndNumECBytesForBlockID(s,l,u,I,M,L);const H=M[0],Q=new Uint8Array(H);i.toBytes(8*f,Q,0,H);const J=N.generateECBytes(Q,L[0]);x.push(new S(Q,J)),g=Math.max(g,H),y=Math.max(y,J.length),f+=M[0]}if(l!==f)throw new It("Data bytes does not match offset");const C=new pe;for(let I=0;I<g;++I)for(const M of x){const L=M.getDataBytes();I<L.length&&C.appendBits(L[I],8)}for(let I=0;I<y;++I)for(const M of x){const L=M.getErrorCorrectionBytes();I<L.length&&C.appendBits(L[I],8)}if(s!==C.getSizeInBytes())throw new It("Interleaving error: "+s+" and "+C.getSizeInBytes()+" differ.");return C}static generateECBytes(i,s){const l=i.length,u=new Int32Array(l+s);for(let g=0;g<l;g++)u[g]=i[g]&255;new Ur(Tt.QR_CODE_FIELD_256).encode(u,s);const f=new Uint8Array(s);for(let g=0;g<s;g++)f[g]=u[l+g];return f}static appendModeInfo(i,s){s.appendBits(i.getBits(),4)}static appendLengthInfo(i,s,l,u){const f=l.getCharacterCountBits(s);if(i>=1<<f)throw new It(i+" is bigger than "+((1<<f)-1));u.appendBits(i,f)}static appendBytes(i,s,l,u){switch(s){case Ye.NUMERIC:N.appendNumericBytes(i,l);break;case Ye.ALPHANUMERIC:N.appendAlphanumericBytes(i,l);break;case Ye.BYTE:N.append8BitBytes(i,l,u);break;case Ye.KANJI:N.appendKanjiBytes(i,l);break;default:throw new It("Invalid mode: "+s)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const s=N.getDigit(i);return s>=0&&s<=9}static appendNumericBytes(i,s){const l=i.length;let u=0;for(;u<l;){const f=N.getDigit(i.charAt(u));if(u+2<l){const g=N.getDigit(i.charAt(u+1)),y=N.getDigit(i.charAt(u+2));s.appendBits(f*100+g*10+y,10),u+=3}else if(u+1<l){const g=N.getDigit(i.charAt(u+1));s.appendBits(f*10+g,7),u+=2}else s.appendBits(f,4),u++}}static appendAlphanumericBytes(i,s){const l=i.length;let u=0;for(;u<l;){const f=N.getAlphanumericCode(i.charCodeAt(u));if(f===-1)throw new It;if(u+1<l){const g=N.getAlphanumericCode(i.charCodeAt(u+1));if(g===-1)throw new It;s.appendBits(f*45+g,11),u+=2}else s.appendBits(f,6),u++}}static append8BitBytes(i,s,l){let u;try{u=q.encode(i,l)}catch(f){throw new It(f)}for(let f=0,g=u.length;f!==g;f++){const y=u[f];s.appendBits(y,8)}}static appendKanjiBytes(i,s){let l;try{l=q.encode(i,k.SJIS)}catch(f){throw new It(f)}const u=l.length;for(let f=0;f<u;f+=2){const g=l[f]&255,y=l[f+1]&255,x=g<<8&4294967295|y;let C=-1;if(x>=33088&&x<=40956?C=x-33088:x>=57408&&x<=60351&&(C=x-49472),C===-1)throw new It("Invalid byte sequence");const I=(C>>8)*192+(C&255);s.appendBits(I,13)}}static appendECI(i,s){s.appendBits(Ye.ECI.getBits(),4),s.appendBits(i.getValue(),8)}}N.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),N.DEFAULT_BYTE_MODE_ENCODING=k.UTF8.getName();class U{write(i,s,l,u=null){if(i.length===0)throw new O("Found empty contents");if(s<0||l<0)throw new O("Requested dimensions are too small: "+s+"x"+l);let f=mt.L,g=U.QUIET_ZONE_SIZE;u!==null&&(u.get(bn.ERROR_CORRECTION)!==void 0&&(f=mt.fromString(u.get(bn.ERROR_CORRECTION).toString())),u.get(bn.MARGIN)!==void 0&&(g=Number.parseInt(u.get(bn.MARGIN).toString(),10)));const y=N.encode(i,f,u);return this.renderResult(y,s,l,g)}writeToDom(i,s,l,u,f=null){typeof i=="string"&&(i=document.querySelector(i));const g=this.write(s,l,u,f);i&&i.appendChild(g)}renderResult(i,s,l,u){const f=i.getMatrix();if(f===null)throw new Li;const g=f.getWidth(),y=f.getHeight(),x=g+u*2,C=y+u*2,I=Math.max(s,x),M=Math.max(l,C),L=Math.min(Math.floor(I/x),Math.floor(M/C)),H=Math.floor((I-g*L)/2),Q=Math.floor((M-y*L)/2),J=this.createSVGElement(I,M);for(let ie=0,de=Q;ie<y;ie++,de+=L)for(let Me=0,Oe=H;Me<g;Me++,Oe+=L)if(f.get(Me,ie)===1){const Ie=this.createSvgRectElement(Oe,de,L,L);J.appendChild(Ie)}return J}createSVGElement(i,s){const l=document.createElementNS(U.SVG_NS,"svg");return l.setAttributeNS(null,"height",i.toString()),l.setAttributeNS(null,"width",s.toString()),l}createSvgRectElement(i,s,l,u){const f=document.createElementNS(U.SVG_NS,"rect");return f.setAttributeNS(null,"x",i.toString()),f.setAttributeNS(null,"y",s.toString()),f.setAttributeNS(null,"height",l.toString()),f.setAttributeNS(null,"width",u.toString()),f.setAttributeNS(null,"fill","#000000"),f}}U.QUIET_ZONE_SIZE=4,U.SVG_NS="http://www.w3.org/2000/svg";class ne{encode(i,s,l,u,f){if(i.length===0)throw new O("Found empty contents");if(s!==De.QR_CODE)throw new O("Can only encode QR_CODE, but got "+s);if(l<0||u<0)throw new O(`Requested dimensions are too small: ${l}x${u}`);let g=mt.L,y=ne.QUIET_ZONE_SIZE;f!==null&&(f.get(bn.ERROR_CORRECTION)!==void 0&&(g=mt.fromString(f.get(bn.ERROR_CORRECTION).toString())),f.get(bn.MARGIN)!==void 0&&(y=Number.parseInt(f.get(bn.MARGIN).toString(),10)));const x=N.encode(i,g,f);return ne.renderResult(x,l,u,y)}static renderResult(i,s,l,u){const f=i.getMatrix();if(f===null)throw new Li;const g=f.getWidth(),y=f.getHeight(),x=g+u*2,C=y+u*2,I=Math.max(s,x),M=Math.max(l,C),L=Math.min(Math.floor(I/x),Math.floor(M/C)),H=Math.floor((I-g*L)/2),Q=Math.floor((M-y*L)/2),J=new Je(I,M);for(let ie=0,de=Q;ie<y;ie++,de+=L)for(let Me=0,Oe=H;Me<g;Me++,Oe+=L)f.get(Me,ie)===1&&J.setRegion(Oe,de,L,L);return J}}ne.QUIET_ZONE_SIZE=4;class me{encode(i,s,l,u,f){let g;switch(s){case De.QR_CODE:g=new ne;break;default:throw new O("No encoder available for format "+s)}return g.encode(i,s,l,u,f)}}class Le extends je{constructor(i,s,l,u,f,g,y,x){if(super(g,y),this.yuvData=i,this.dataWidth=s,this.dataHeight=l,this.left=u,this.top=f,u+g>s||f+y>l)throw new O("Crop rectangle does not fit within image data.");x&&this.reverseHorizontal(g,y)}getRow(i,s){if(i<0||i>=this.getHeight())throw new O("Requested row is outside the image: "+i);const l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));const u=(i+this.top)*this.dataWidth+this.left;return re.arraycopy(this.yuvData,u,s,0,l),s}getMatrix(){const i=this.getWidth(),s=this.getHeight();if(i===this.dataWidth&&s===this.dataHeight)return this.yuvData;const l=i*s,u=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return re.arraycopy(this.yuvData,f,u,0,l),u;for(let g=0;g<s;g++){const y=g*i;re.arraycopy(this.yuvData,f,u,y,i),f+=this.dataWidth}return u}isCropSupported(){return!0}crop(i,s,l,u){return new Le(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+s,l,u,!1)}renderThumbnail(){const i=this.getWidth()/Le.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/Le.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(i*s),u=this.yuvData;let f=this.top*this.dataWidth+this.left;for(let g=0;g<s;g++){const y=g*i;for(let x=0;x<i;x++){const C=u[f+x*Le.THUMBNAIL_SCALE_FACTOR]&255;l[y+x]=4278190080|C*65793}f+=this.dataWidth*Le.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Le.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Le.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,s){const l=this.yuvData;for(let u=0,f=this.top*this.dataWidth+this.left;u<s;u++,f+=this.dataWidth){const g=f+i/2;for(let y=f,x=f+i-1;y<g;y++,x--){const C=l[y];l[y]=l[x],l[x]=C}}}invert(){return new it(this)}}Le.THUMBNAIL_SCALE_FACTOR=2;class ot extends je{constructor(i,s,l,u,f,g,y){if(super(s,l),this.dataWidth=u,this.dataHeight=f,this.left=g,this.top=y,i.BYTES_PER_ELEMENT===4){const x=s*l,C=new Uint8ClampedArray(x);for(let I=0;I<x;I++){const M=i[I],L=M>>16&255,H=M>>7&510,Q=M&255;C[I]=(L+H+Q)/4&255}this.luminances=C}else this.luminances=i;if(u===void 0&&(this.dataWidth=s),f===void 0&&(this.dataHeight=l),g===void 0&&(this.left=0),y===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+l>this.dataHeight)throw new O("Crop rectangle does not fit within image data.")}getRow(i,s){if(i<0||i>=this.getHeight())throw new O("Requested row is outside the image: "+i);const l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));const u=(i+this.top)*this.dataWidth+this.left;return re.arraycopy(this.luminances,u,s,0,l),s}getMatrix(){const i=this.getWidth(),s=this.getHeight();if(i===this.dataWidth&&s===this.dataHeight)return this.luminances;const l=i*s,u=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return re.arraycopy(this.luminances,f,u,0,l),u;for(let g=0;g<s;g++){const y=g*i;re.arraycopy(this.luminances,f,u,y,i),f+=this.dataWidth}return u}isCropSupported(){return!0}crop(i,s,l,u){return new ot(this.luminances,l,u,this.dataWidth,this.dataHeight,this.left+i,this.top+s)}invert(){return new it(this)}}class In extends k{static forName(i){return this.getCharacterSetECIByName(i)}}class Ut{}Ut.ISO_8859_1=k.ISO8859_1;class dn{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class Ki{static singletonList(i){return[i]}static min(i,s){return i.sort(s)[0]}}class zr{constructor(i){this.previous=i}getPrevious(){return this.previous}}class fi extends zr{constructor(i,s,l){super(i),this.value=s,this.bitCount=l}appendTo(i,s){i.appendBits(this.value,this.bitCount)}add(i,s){return new fi(this,i,s)}addBinaryShift(i,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new fi(this,i,s)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+ye.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class Qi extends fi{constructor(i,s,l){super(i,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=l}appendTo(i,s){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):l===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(s[this.binaryShiftStart+l],8)}addBinaryShift(i,s){return new Qi(this,i,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Hs(D,i,s){return new Qi(D,i,s)}function Hr(D,i,s){return new fi(D,i,s)}const ba=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Es=0,ul=1,ir=2,lc=3,Tr=4,Io=new fi(null,0,0),js=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Xf(D){for(let i of D)Re.fill(i,-1);return D[Es][Tr]=0,D[ul][Tr]=0,D[ul][Es]=28,D[lc][Tr]=0,D[ir][Tr]=0,D[ir][Es]=15,D}const Ro=Xf(Re.createInt32Array(6,6));class Cr{constructor(i,s,l,u){this.token=i,this.mode=s,this.binaryShiftByteCount=l,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,s){let l=this.bitCount,u=this.token;if(i!==this.mode){let g=js[this.mode][i];u=Hr(u,g&65535,g>>16),l+=g>>16}let f=i===ir?4:5;return u=Hr(u,s,f),new Cr(u,i,0,l+f)}shiftAndAppend(i,s){let l=this.token,u=this.mode===ir?4:5;return l=Hr(l,Ro[this.mode][i],u),l=Hr(l,s,5),new Cr(l,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(i){let s=this.token,l=this.mode,u=this.bitCount;if(this.mode===Tr||this.mode===ir){let y=js[l][Es];s=Hr(s,y&65535,y>>16),u+=y>>16,l=Es}let f=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,g=new Cr(s,l,this.binaryShiftByteCount+1,u+f);return g.binaryShiftByteCount===2078&&(g=g.endBinaryShift(i+1)),g}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=Hs(s,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new Cr(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let s=this.bitCount+(js[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?s+=Cr.calculateBinaryShiftCost(i)-Cr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(s+=10),s<=i.bitCount}toBitArray(i){let s=[];for(let u=this.endBinaryShift(i.length).token;u!==null;u=u.getPrevious())s.unshift(u);let l=new pe;for(const u of s)u.appendTo(l,i);return l}toString(){return W.format("%s bits=%d bytes=%d",ba[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}Cr.INITIAL_STATE=new Cr(Io,Es,0,0);function vu(D){const i=W.getCharCode(" "),s=W.getCharCode("."),l=W.getCharCode(",");D[Es][i]=1;const u=W.getCharCode("Z"),f=W.getCharCode("A");for(let L=f;L<=u;L++)D[Es][L]=L-f+2;D[ul][i]=1;const g=W.getCharCode("z"),y=W.getCharCode("a");for(let L=y;L<=g;L++)D[ul][L]=L-y+2;D[ir][i]=1;const x=W.getCharCode("9"),C=W.getCharCode("0");for(let L=C;L<=x;L++)D[ir][L]=L-C+2;D[ir][l]=12,D[ir][s]=13;const I=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let L=0;L<I.length;L++)D[lc][W.getCharCode(I[L])]=L;const M=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let L=0;L<M.length;L++)W.getCharCode(M[L])>0&&(D[Tr][W.getCharCode(M[L])]=L);return D}const No=vu(Re.createInt32Array(5,256));class Gs{constructor(i){this.text=i}encode(){const i=W.getCharCode(" "),s=W.getCharCode(`
`);let l=Ki.singletonList(Cr.INITIAL_STATE);for(let f=0;f<this.text.length;f++){let g,y=f+1<this.text.length?this.text[f+1]:0;switch(this.text[f]){case W.getCharCode("\r"):g=y===s?2:0;break;case W.getCharCode("."):g=y===i?3:0;break;case W.getCharCode(","):g=y===i?4:0;break;case W.getCharCode(":"):g=y===i?5:0;break;default:g=0}g>0?(l=Gs.updateStateListForPair(l,f,g),f++):l=this.updateStateListForChar(l,f)}return Ki.min(l,(f,g)=>f.getBitCount()-g.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,s){const l=[];for(let u of i)this.updateStateForChar(u,s,l);return Gs.simplifyStates(l)}updateStateForChar(i,s,l){let u=this.text[s]&255,f=No[i.getMode()][u]>0,g=null;for(let y=0;y<=Tr;y++){let x=No[y][u];if(x>0){if(g==null&&(g=i.endBinaryShift(s)),!f||y===i.getMode()||y===ir){const C=g.latchAndAppend(y,x);l.push(C)}if(!f&&Ro[i.getMode()][y]>=0){const C=g.shiftAndAppend(y,x);l.push(C)}}}if(i.getBinaryShiftByteCount()>0||No[i.getMode()][u]===0){let y=i.addBinaryShiftChar(s);l.push(y)}}static updateStateListForPair(i,s,l){const u=[];for(let f of i)this.updateStateForPair(f,s,l,u);return this.simplifyStates(u)}static updateStateForPair(i,s,l,u){let f=i.endBinaryShift(s);if(u.push(f.latchAndAppend(Tr,l)),i.getMode()!==Tr&&u.push(f.shiftAndAppend(Tr,l)),l===3||l===4){let g=f.latchAndAppend(ir,16-l).latchAndAppend(ir,1);u.push(g)}if(i.getBinaryShiftByteCount()>0){let g=i.addBinaryShiftChar(s).addBinaryShiftChar(s+1);u.push(g)}}static simplifyStates(i){let s=[];for(const l of i){let u=!0;for(const f of s){if(f.isBetterThanOrEqualTo(l)){u=!1;break}l.isBetterThanOrEqualTo(f)&&(s=s.filter(g=>g!==f))}u&&s.push(l)}return s}}class Mt{constructor(){}static encodeBytes(i){return Mt.encode(i,Mt.DEFAULT_EC_PERCENT,Mt.DEFAULT_AZTEC_LAYERS)}static encode(i,s,l){let u=new Gs(i).encode(),f=ye.truncDivision(u.getSize()*s,100)+11,g=u.getSize()+f,y,x,C,I,M;if(l!==Mt.DEFAULT_AZTEC_LAYERS){if(y=l<0,x=Math.abs(l),x>(y?Mt.MAX_NB_BITS_COMPACT:Mt.MAX_NB_BITS))throw new O(W.format("Illegal value %s for layers",l));C=Mt.totalBitsInLayer(x,y),I=Mt.WORD_SIZE[x];let Ie=C-C%I;if(M=Mt.stuffBits(u,I),M.getSize()+f>Ie)throw new O("Data to large for user specified layer");if(y&&M.getSize()>I*64)throw new O("Data to large for user specified layer")}else{I=0,M=null;for(let Ie=0;;Ie++){if(Ie>Mt.MAX_NB_BITS)throw new O("Data too large for an Aztec code");if(y=Ie<=3,x=y?Ie+1:Ie,C=Mt.totalBitsInLayer(x,y),g>C)continue;(M==null||I!==Mt.WORD_SIZE[x])&&(I=Mt.WORD_SIZE[x],M=Mt.stuffBits(u,I));let _t=C-C%I;if(!(y&&M.getSize()>I*64)&&M.getSize()+f<=_t)break}}let L=Mt.generateCheckWords(M,C,I),H=M.getSize()/I,Q=Mt.generateModeMessage(y,x,H),J=(y?11:14)+x*4,ie=new Int32Array(J),de;if(y){de=J;for(let Ie=0;Ie<ie.length;Ie++)ie[Ie]=Ie}else{de=J+1+2*ye.truncDivision(ye.truncDivision(J,2)-1,15);let Ie=ye.truncDivision(J,2),_t=ye.truncDivision(de,2);for(let ct=0;ct<Ie;ct++){let kn=ct+ye.truncDivision(ct,15);ie[Ie-ct-1]=_t-kn-1,ie[Ie+ct]=_t+kn+1}}let Me=new Je(de);for(let Ie=0,_t=0;Ie<x;Ie++){let ct=(x-Ie)*4+(y?9:12);for(let kn=0;kn<ct;kn++){let rr=kn*2;for(let Si=0;Si<2;Si++)L.get(_t+rr+Si)&&Me.set(ie[Ie*2+Si],ie[Ie*2+kn]),L.get(_t+ct*2+rr+Si)&&Me.set(ie[Ie*2+kn],ie[J-1-Ie*2-Si]),L.get(_t+ct*4+rr+Si)&&Me.set(ie[J-1-Ie*2-Si],ie[J-1-Ie*2-kn]),L.get(_t+ct*6+rr+Si)&&Me.set(ie[J-1-Ie*2-kn],ie[Ie*2+Si])}_t+=ct*8}if(Mt.drawModeMessage(Me,y,de,Q),y)Mt.drawBullsEye(Me,ye.truncDivision(de,2),5);else{Mt.drawBullsEye(Me,ye.truncDivision(de,2),7);for(let Ie=0,_t=0;Ie<ye.truncDivision(J,2)-1;Ie+=15,_t+=16)for(let ct=ye.truncDivision(de,2)&1;ct<de;ct+=2)Me.set(ye.truncDivision(de,2)-_t,ct),Me.set(ye.truncDivision(de,2)+_t,ct),Me.set(ct,ye.truncDivision(de,2)-_t),Me.set(ct,ye.truncDivision(de,2)+_t)}let Oe=new dn;return Oe.setCompact(y),Oe.setSize(de),Oe.setLayers(x),Oe.setCodeWords(H),Oe.setMatrix(Me),Oe}static drawBullsEye(i,s,l){for(let u=0;u<l;u+=2)for(let f=s-u;f<=s+u;f++)i.set(f,s-u),i.set(f,s+u),i.set(s-u,f),i.set(s+u,f);i.set(s-l,s-l),i.set(s-l+1,s-l),i.set(s-l,s-l+1),i.set(s+l,s-l),i.set(s+l,s-l+1),i.set(s+l,s+l-1)}static generateModeMessage(i,s,l){let u=new pe;return i?(u.appendBits(s-1,2),u.appendBits(l-1,6),u=Mt.generateCheckWords(u,28,4)):(u.appendBits(s-1,5),u.appendBits(l-1,11),u=Mt.generateCheckWords(u,40,4)),u}static drawModeMessage(i,s,l,u){let f=ye.truncDivision(l,2);if(s)for(let g=0;g<7;g++){let y=f-3+g;u.get(g)&&i.set(y,f-5),u.get(g+7)&&i.set(f+5,y),u.get(20-g)&&i.set(y,f+5),u.get(27-g)&&i.set(f-5,y)}else for(let g=0;g<10;g++){let y=f-5+g+ye.truncDivision(g,5);u.get(g)&&i.set(y,f-7),u.get(g+10)&&i.set(f+7,y),u.get(29-g)&&i.set(y,f+7),u.get(39-g)&&i.set(f-7,y)}}static generateCheckWords(i,s,l){let u=i.getSize()/l,f=new Ur(Mt.getGF(l)),g=ye.truncDivision(s,l),y=Mt.bitsToWords(i,l,g);f.encode(y,g-u);let x=s%l,C=new pe;C.appendBits(0,x);for(const I of Array.from(y))C.appendBits(I,l);return C}static bitsToWords(i,s,l){let u=new Int32Array(l),f,g;for(f=0,g=i.getSize()/s;f<g;f++){let y=0;for(let x=0;x<s;x++)y|=i.get(f*s+x)?1<<s-x-1:0;u[f]=y}return u}static getGF(i){switch(i){case 4:return Tt.AZTEC_PARAM;case 6:return Tt.AZTEC_DATA_6;case 8:return Tt.AZTEC_DATA_8;case 10:return Tt.AZTEC_DATA_10;case 12:return Tt.AZTEC_DATA_12;default:throw new O("Unsupported word size "+i)}}static stuffBits(i,s){let l=new pe,u=i.getSize(),f=(1<<s)-2;for(let g=0;g<u;g+=s){let y=0;for(let x=0;x<s;x++)(g+x>=u||i.get(g+x))&&(y|=1<<s-1-x);(y&f)===f?(l.appendBits(y&f,s),g--):(y&f)===0?(l.appendBits(y|1,s),g--):l.appendBits(y,s)}return l}static totalBitsInLayer(i,s){return((s?88:112)+16*i)*i}}Mt.DEFAULT_EC_PERCENT=33,Mt.DEFAULT_AZTEC_LAYERS=0,Mt.MAX_NB_BITS=32,Mt.MAX_NB_BITS_COMPACT=4,Mt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Oo{encode(i,s,l,u){return this.encodeWithHints(i,s,l,u,null)}encodeWithHints(i,s,l,u,f){let g=Ut.ISO_8859_1,y=Mt.DEFAULT_EC_PERCENT,x=Mt.DEFAULT_AZTEC_LAYERS;return f!=null&&(f.has(bn.CHARACTER_SET)&&(g=In.forName(f.get(bn.CHARACTER_SET).toString())),f.has(bn.ERROR_CORRECTION)&&(y=ye.parseInt(f.get(bn.ERROR_CORRECTION).toString())),f.has(bn.AZTEC_LAYERS)&&(x=ye.parseInt(f.get(bn.AZTEC_LAYERS).toString()))),Oo.encodeLayers(i,s,l,u,g,y,x)}static encodeLayers(i,s,l,u,f,g,y){if(s!==De.AZTEC)throw new O("Can only encode AZTEC, but got "+s);let x=Mt.encode(W.getBytes(i,f),g,y);return Oo.renderResult(x,l,u)}static renderResult(i,s,l){let u=i.getMatrix();if(u==null)throw new Li;let f=u.getWidth(),g=u.getHeight(),y=Math.max(s,f),x=Math.max(l,g),C=Math.min(y/f,x/g),I=(y-f*C)/2,M=(x-g*C)/2,L=new Je(y,x);for(let H=0,Q=M;H<g;H++,Q+=C)for(let J=0,ie=I;J<f;J++,ie+=C)u.get(J,H)&&L.setRegion(ie,Q,C,C);return L}}n.AbstractExpandedDecoder=Tn,n.ArgumentException=b,n.ArithmeticException=ts,n.AztecCode=dn,n.AztecCodeReader=Ds,n.AztecCodeWriter=Oo,n.AztecDecoder=qt,n.AztecDetector=Ao,n.AztecDetectorResult=xo,n.AztecEncoder=Mt,n.AztecHighLevelEncoder=Gs,n.AztecPoint=ri,n.BarcodeFormat=De,n.Binarizer=ee,n.BinaryBitmap=V,n.BitArray=pe,n.BitMatrix=Je,n.BitSource=vn,n.BrowserAztecCodeReader=al,n.BrowserBarcodeReader=Co,n.BrowserCodeReader=Pe,n.BrowserDatamatrixCodeReader=Br,n.BrowserMultiFormatReader=Vr,n.BrowserPDF417Reader=ll,n.BrowserQRCodeReader=cl,n.BrowserQRCodeSvgWriter=U,n.CharacterSetECI=k,n.ChecksumException=j,n.Code128Reader=Ne,n.Code39Reader=Yt,n.DataMatrixDecodedBitStreamParser=vi,n.DataMatrixReader=Bi,n.DecodeHintType=Te,n.DecoderResult=Jt,n.DefaultGridSampler=_a,n.DetectorResult=Ea,n.EAN13Reader=an,n.EncodeHintType=bn,n.Exception=A,n.FormatException=B,n.GenericGF=Tt,n.GenericGFPoly=jn,n.GlobalHistogramBinarizer=he,n.GridSampler=ns,n.GridSamplerInstance=yi,n.HTMLCanvasElementLuminanceSource=lt,n.HybridBinarizer=_e,n.ITFReader=rt,n.IllegalArgumentException=O,n.IllegalStateException=Li,n.InvertedLuminanceSource=it,n.LuminanceSource=je,n.MathUtils=Ze,n.MultiFormatOneDReader=Ti,n.MultiFormatReader=bo,n.MultiFormatWriter=me,n.NotFoundException=ce,n.OneDReader=Xt,n.PDF417DecodedBitStreamParser=fe,n.PDF417DecoderErrorCorrection=_r,n.PDF417Reader=Sn,n.PDF417ResultMetadata=ss,n.PerspectiveTransform=pi,n.PlanarYUVLuminanceSource=Le,n.QRCodeByteMatrix=zs,n.QRCodeDataMask=qn,n.QRCodeDecodedBitStreamParser=$t,n.QRCodeDecoderErrorCorrectionLevel=mt,n.QRCodeDecoderFormatInformation=Dn,n.QRCodeEncoder=N,n.QRCodeEncoderQRCode=Fr,n.QRCodeMaskUtil=vt,n.QRCodeMatrixUtil=p,n.QRCodeMode=Ye,n.QRCodeReader=Fi,n.QRCodeVersion=Ge,n.QRCodeWriter=ne,n.RGBLuminanceSource=ot,n.RSS14Reader=Gt,n.RSSExpandedReader=Se,n.ReaderException=Fs,n.ReedSolomonDecoder=gr,n.ReedSolomonEncoder=Ur,n.ReedSolomonException=mi,n.Result=Be,n.ResultMetadataType=wt,n.ResultPoint=Fe,n.StringUtils=W,n.UnsupportedOperationException=Z,n.VideoInputDevice=X,n.WhiteRectangleDetector=yn,n.WriterException=It,n.ZXingArrays=Re,n.ZXingCharset=In,n.ZXingInteger=ye,n.ZXingStandardCharsets=Ut,n.ZXingStringBuilder=G,n.ZXingStringEncoding=q,n.ZXingSystem=re,n.createAbstractExpandedDecoder=Pi,Object.defineProperty(n,"__esModule",{value:!0})}))})(Qc,Qc.exports)),Qc.exports}var An=c4();const u4=D0(An),h4=Lw({__proto__:null,default:u4},[An]);var wE=(function(){function a(e,n,o){if(this.formatMap=new Map([[He.QR_CODE,An.BarcodeFormat.QR_CODE],[He.AZTEC,An.BarcodeFormat.AZTEC],[He.CODABAR,An.BarcodeFormat.CODABAR],[He.CODE_39,An.BarcodeFormat.CODE_39],[He.CODE_93,An.BarcodeFormat.CODE_93],[He.CODE_128,An.BarcodeFormat.CODE_128],[He.DATA_MATRIX,An.BarcodeFormat.DATA_MATRIX],[He.MAXICODE,An.BarcodeFormat.MAXICODE],[He.ITF,An.BarcodeFormat.ITF],[He.EAN_13,An.BarcodeFormat.EAN_13],[He.EAN_8,An.BarcodeFormat.EAN_8],[He.PDF_417,An.BarcodeFormat.PDF_417],[He.RSS_14,An.BarcodeFormat.RSS_14],[He.RSS_EXPANDED,An.BarcodeFormat.RSS_EXPANDED],[He.UPC_A,An.BarcodeFormat.UPC_A],[He.UPC_E,An.BarcodeFormat.UPC_E],[He.UPC_EAN_EXTENSION,An.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!h4)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=o;var h=this.createZXingFormats(e),m=new Map;m.set(An.DecodeHintType.POSSIBLE_FORMATS,h),m.set(An.DecodeHintType.TRY_HARDER,!1),this.hints=m}return a.prototype.decodeAsync=function(e){var n=this;return new Promise(function(o,h){try{o(n.decode(e))}catch(m){h(m)}})},a.prototype.decode=function(e){var n=new An.MultiFormatReader(this.verbose,this.hints),o=new An.HTMLCanvasElementLuminanceSource(e),h=new An.BinaryBitmap(new An.HybridBinarizer(o)),m=n.decode(h);return{text:m.text,format:tA.create(this.toHtml5QrcodeSupportedFormats(m.format)),debugData:this.createDebugData()}},a.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,h){e.set(n,o)}),e},a.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},a.prototype.createZXingFormats=function(e){for(var n=[],o=0,h=e;o<h.length;o++){var m=h[o];this.formatMap.has(m)?n.push(this.formatMap.get(m)):this.logger.logError("".concat(m," is not supported by")+"ZXingHtml5QrcodeShim")}return n},a.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},a})(),f4=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(_){_(m)})}return new(n||(n=Promise))(function(m,_){function v(b){try{A(o.next(b))}catch(O){_(O)}}function T(b){try{A(o.throw(b))}catch(O){_(O)}}function A(b){b.done?m(b.value):h(b.value).then(v,T)}A((o=o.apply(a,e||[])).next())})},d4=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,_;return _={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function v(A){return function(b){return T([A,b])}}function T(A){if(o)throw new TypeError("Generator is already executing.");for(;_&&(_=0,A[0]&&(n=0)),n;)try{if(o=1,h&&(m=A[0]&2?h.return:A[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,A[1])).done)return m;switch(h=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,h=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){n.label=A[1];break}if(A[0]===6&&n.label<m[1]){n.label=m[1],m=A;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(A);break}m[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(a,n)}catch(b){A=[6,b],h=0}finally{o=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},TE=(function(){function a(e,n,o){if(this.formatMap=new Map([[He.QR_CODE,"qr_code"],[He.AZTEC,"aztec"],[He.CODABAR,"codabar"],[He.CODE_39,"code_39"],[He.CODE_93,"code_93"],[He.CODE_128,"code_128"],[He.DATA_MATRIX,"data_matrix"],[He.ITF,"itf"],[He.EAN_13,"ean_13"],[He.EAN_8,"ean_8"],[He.PDF_417,"pdf417"],[He.UPC_A,"upc_a"],[He.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!a.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=o;var h=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(h),!this.detector)throw"BarcodeDetector detector not supported"}return a.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},a.prototype.decodeAsync=function(e){return f4(this,void 0,void 0,function(){var n,o;return d4(this,function(h){switch(h.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=h.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return o=this.selectLargestBarcode(n),[2,{text:o.rawValue,format:tA.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}]}})})},a.prototype.selectLargestBarcode=function(e){for(var n=null,o=0,h=0,m=e;h<m.length;h++){var _=m[h],v=_.boundingBox.width*_.boundingBox.height;v>o&&(o=v,n=_)}if(!n)throw"No largest barcode found";return n},a.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],o=0,h=e;o<h.length;o++){var m=h[o];this.formatMap.has(m)?n.push(this.formatMap.get(m)):this.logger.warn("".concat(m," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},a.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},a.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,h){e.set(n,o)}),e},a.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},a})(),CE=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(_){_(m)})}return new(n||(n=Promise))(function(m,_){function v(b){try{A(o.next(b))}catch(O){_(O)}}function T(b){try{A(o.throw(b))}catch(O){_(O)}}function A(b){b.done?m(b.value):h(b.value).then(v,T)}A((o=o.apply(a,e||[])).next())})},vE=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,_;return _={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function v(A){return function(b){return T([A,b])}}function T(A){if(o)throw new TypeError("Generator is already executing.");for(;_&&(_=0,A[0]&&(n=0)),n;)try{if(o=1,h&&(m=A[0]&2?h.return:A[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,A[1])).done)return m;switch(h=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,h=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){n.label=A[1];break}if(A[0]===6&&n.label<m[1]){n.label=m[1],m=A;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(A);break}m[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(a,n)}catch(b){A=[6,b],h=0}finally{o=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},g4=(function(){function a(e,n,o,h){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=o,n&&TE.isSupported()?(this.primaryDecoder=new TE(e,o,h),this.secondaryDecoder=new wE(e,o,h)):this.primaryDecoder=new wE(e,o,h)}return a.prototype.decodeAsync=function(e){return CE(this,void 0,void 0,function(){var n;return vE(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,o.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},a.prototype.decodeRobustlyAsync=function(e){return CE(this,void 0,void 0,function(){var n,o;return vE(this,function(h){switch(h.label){case 0:n=performance.now(),h.label=1;case 1:return h.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,h.sent()];case 3:if(o=h.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw o;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},a.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},a.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},a.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,o=this.executionResults;n<o.length;n++){var h=o[n];e+=h}var m=e/this.executionResults.length;console.log("".concat(m," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},a})(),Ig=(function(){var a=function(e,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(o[m]=h[m])},a(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");a(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),_f=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(_){_(m)})}return new(n||(n=Promise))(function(m,_){function v(b){try{A(o.next(b))}catch(O){_(O)}}function T(b){try{A(o.throw(b))}catch(O){_(O)}}function A(b){b.done?m(b.value):h(b.value).then(v,T)}A((o=o.apply(a,e||[])).next())})},xf=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,_;return _={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function v(A){return function(b){return T([A,b])}}function T(A){if(o)throw new TypeError("Generator is already executing.");for(;_&&(_=0,A[0]&&(n=0)),n;)try{if(o=1,h&&(m=A[0]&2?h.return:A[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,A[1])).done)return m;switch(h=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,h=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){n.label=A[1];break}if(A[0]===6&&n.label<m[1]){n.label=m[1],m=A;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(A);break}m[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(a,n)}catch(b){A=[6,b],h=0}finally{o=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},iA=(function(){function a(e,n){this.name=e,this.track=n}return a.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},a.prototype.apply=function(e){var n={};n[this.name]=e;var o={advanced:[n]};return this.track.applyConstraints(o)},a.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},a})(),m4=(function(a){Ig(e,a);function e(n,o){return a.call(this,n,o)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var o={};o[this.name]=n;var h={advanced:[o]};return this.track.applyConstraints(h)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),o=n[this.name];return{min:o.min,max:o.max,step:o.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(iA),p4=(function(a){Ig(e,a);function e(n){return a.call(this,"zoom",n)||this}return e})(m4),y4=(function(a){Ig(e,a);function e(n){return a.call(this,"torch",n)||this}return e})(iA),E4=(function(){function a(e){this.track=e}return a.prototype.zoomFeature=function(){return new p4(this.track)},a.prototype.torchFeature=function(){return new y4(this.track)},a})(),_4=(function(){function a(e,n,o){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=o,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return a.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},a.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var o=e.surface.clientWidth,h=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(o,h),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},a.create=function(e,n,o,h){return _f(this,void 0,void 0,function(){var m,_;return xf(this,function(v){switch(v.label){case 0:return m=new a(e,n,h),o.aspectRatio?(_={aspectRatio:o.aspectRatio},[4,m.getFirstTrackOrFail().applyConstraints(_)]):[3,2];case 1:v.sent(),v.label=2;case 2:return m.setupSurface(),[2,m]}})})},a.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},a.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},a.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},a.prototype.resume=function(e){this.failIfClosed();var n=this,o=function(){setTimeout(e,200),n.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.play()},a.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},a.prototype.getSurface=function(){return this.failIfClosed(),this.surface},a.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},a.prototype.applyVideoConstraints=function(e){return _f(this,void 0,void 0,function(){return xf(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},a.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,o){var h=e.mediaStream.getVideoTracks(),m=h.length,_=0;e.mediaStream.getVideoTracks().forEach(function(v){e.mediaStream.removeTrack(v),v.stop(),++_,_>=m&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},a.prototype.getCapabilities=function(){return new E4(this.getFirstTrackOrFail())},a})(),x4=(function(){function a(e){this.mediaStream=e}return a.prototype.render=function(e,n,o){return _f(this,void 0,void 0,function(){return xf(this,function(h){return[2,_4.create(e,this.mediaStream,n,o)]})})},a.create=function(e){return _f(this,void 0,void 0,function(){var n,o;return xf(this,function(h){switch(h.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return o=h.sent(),[2,new a(o)]}})})},a})(),SE=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(_){_(m)})}return new(n||(n=Promise))(function(m,_){function v(b){try{A(o.next(b))}catch(O){_(O)}}function T(b){try{A(o.throw(b))}catch(O){_(O)}}function A(b){b.done?m(b.value):h(b.value).then(v,T)}A((o=o.apply(a,e||[])).next())})},bE=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,_;return _={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function v(A){return function(b){return T([A,b])}}function T(A){if(o)throw new TypeError("Generator is already executing.");for(;_&&(_=0,A[0]&&(n=0)),n;)try{if(o=1,h&&(m=A[0]&2?h.return:A[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,A[1])).done)return m;switch(h=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,h=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){n.label=A[1];break}if(A[0]===6&&n.label<m[1]){n.label=m[1],m=A;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(A);break}m[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(a,n)}catch(b){A=[6,b],h=0}finally{o=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},A4=(function(){function a(){}return a.failIfNotSupported=function(){return SE(this,void 0,void 0,function(){return bE(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new a]})})},a.prototype.create=function(e){return SE(this,void 0,void 0,function(){return bE(this,function(n){return[2,x4.create(e)]})})},a})(),w4=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(_){_(m)})}return new(n||(n=Promise))(function(m,_){function v(b){try{A(o.next(b))}catch(O){_(O)}}function T(b){try{A(o.throw(b))}catch(O){_(O)}}function A(b){b.done?m(b.value):h(b.value).then(v,T)}A((o=o.apply(a,e||[])).next())})},T4=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,_;return _={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function v(A){return function(b){return T([A,b])}}function T(A){if(o)throw new TypeError("Generator is already executing.");for(;_&&(_=0,A[0]&&(n=0)),n;)try{if(o=1,h&&(m=A[0]&2?h.return:A[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,A[1])).done)return m;switch(h=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,h=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){n.label=A[1];break}if(A[0]===6&&n.label<m[1]){n.label=m[1],m=A;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(A);break}m[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(a,n)}catch(b){A=[6,b],h=0}finally{o=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},C4=(function(){function a(){}return a.retrieve=function(){if(navigator.mediaDevices)return a.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?a.getCamerasFromMediaStreamTrack():a.rejectWithError()},a.rejectWithError=function(){var e=Hl.unableToQuerySupportedDevices();return a.isHttpsOrLocalhost()||(e=Hl.insecureContextCameraQueryError()),Promise.reject(e)},a.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},a.getCamerasFromMediaDevices=function(){return w4(this,void 0,void 0,function(){var e,n,o,h,m,_,v;return T4(this,function(T){switch(T.label){case 0:return e=function(A){for(var b=A.getVideoTracks(),O=0,V=b;O<V.length;O++){var j=V[O];j.enabled=!1,j.stop(),A.removeTrack(j)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=T.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(o=T.sent(),h=[],m=0,_=o;m<_.length;m++)v=_[m],v.kind==="videoinput"&&h.push({id:v.deviceId,label:v.label});return e(n),[2,h]}})})},a.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var o=function(m){for(var _=[],v=0,T=m;v<T.length;v++){var A=T[v];A.kind==="video"&&_.push({id:A.id,label:A.label})}e(_)},h=MediaStreamTrack;h.getSources(o)})},a})(),zn;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.NOT_STARTED=1]="NOT_STARTED",a[a.SCANNING=2]="SCANNING",a[a.PAUSED=3]="PAUSED"})(zn||(zn={}));var v4=(function(){function a(){this.state=zn.NOT_STARTED,this.onGoingTransactionNewState=zn.UNKNOWN}return a.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},a.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},a.prototype.execute=function(){if(this.onGoingTransactionNewState===zn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=zn.UNKNOWN,this.directTransition(e)},a.prototype.cancel=function(){if(this.onGoingTransactionNewState===zn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=zn.UNKNOWN},a.prototype.getState=function(){return this.state},a.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==zn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},a.prototype.validateTransition=function(e){switch(this.state){case zn.UNKNOWN:throw"Transition from unknown is not allowed";case zn.NOT_STARTED:this.failIfNewStateIs(e,[zn.PAUSED]);break;case zn.SCANNING:break;case zn.PAUSED:break}},a.prototype.failIfNewStateIs=function(e,n){for(var o=0,h=n;o<h.length;o++){var m=h[o];if(e===m)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},a})(),S4=(function(){function a(e){this.stateManager=e}return a.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},a.prototype.directTransition=function(e){this.stateManager.directTransition(e)},a.prototype.getState=function(){return this.stateManager.getState()},a.prototype.canScanFile=function(){return this.stateManager.getState()===zn.NOT_STARTED},a.prototype.isScanning=function(){return this.stateManager.getState()!==zn.NOT_STARTED},a.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===zn.SCANNING},a.prototype.isPaused=function(){return this.stateManager.getState()===zn.PAUSED},a})(),b4=(function(){function a(){}return a.create=function(){return new S4(new v4)},a})(),I4=(function(){var a=function(e,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(o[m]=h[m])},a(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");a(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Or=(function(a){I4(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(s4),R4=(function(){function a(e,n){this.logger=n,this.fps=Or.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Or.DEFAULT_DISABLE_FLIP}return a.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?nA.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},a.prototype.isShadedBoxEnabled=function(){return!oa(this.qrbox)},a.create=function(e,n){return new a(e,n)},a})(),N4=(function(){function a(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var o;typeof n=="boolean"?this.verbose=n===!0:n&&(o=n,this.verbose=o.verbose===!0,o.experimentalFeatures),this.logger=new o4(this.verbose),this.qrcode=new g4(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(o),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=b4.create()}return a.prototype.start=function(e,n,o,h){var m=this;if(!e)throw"cameraIdOrConfig is required";if(!o||typeof o!="function")throw"qrCodeSuccessCallback is required and should be a function.";var _;h?_=h:_=this.verbose?this.logger.log:function(){};var v=R4.create(n,this.logger);this.clearElement();var T=!1;v.videoConstraints&&(v.isMediaStreamConstraintsValid()?T=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var A=T,b=document.getElementById(this.elementId);b.clientWidth?b.clientWidth:Or.DEFAULT_WIDTH,b.style.position="relative",this.shouldScan=!0,this.element=b;var O=this,V=this.stateManagerProxy.startTransition(zn.SCANNING);return new Promise(function(j,ee){var re=A?v.videoConstraints:O.createVideoConstraints(e);if(!re){V.cancel(),ee("videoConstraints should be defined");return}var le={};(!A||v.aspectRatio)&&(le.aspectRatio=v.aspectRatio);var ke={onRenderSurfaceReady:function(Re,ye){O.setupUi(Re,ye,v),O.isScanning=!0,O.foreverScan(v,o,_)}};A4.failIfNotSupported().then(function(Re){Re.create(re).then(function(ye){return ye.render(m.element,le,ke).then(function(pe){O.renderedCamera=pe,V.execute(),j(null)}).catch(function(pe){V.cancel(),ee(pe)})}).catch(function(ye){V.cancel(),ee(Hl.errorGettingUserMedia(ye))})}).catch(function(Re){V.cancel(),ee(Hl.cameraStreamingNotSupported())})})},a.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(zn.PAUSED),this.showPausedState(),(oa(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},a.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(zn.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},a.prototype.getState=function(){return this.stateManagerProxy.getState()},a.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(zn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var o=function(){if(e.element){var m=document.getElementById(Or.SHADED_REGION_ELEMENT_ID);m&&e.element.removeChild(m)}},h=this;return this.renderedCamera.close().then(function(){return h.renderedCamera=null,h.element&&(h.element.removeChild(h.canvasElement),h.canvasElement=null),o(),h.qrRegion&&(h.qrRegion=null),h.context&&(h.context=null),n.execute(),h.hidePausedState(),h.isScanning=!1,Promise.resolve()})},a.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(o){return o.decodedText})},a.prototype.scanFileV2=function(e,n){var o=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(oa(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(h,m){o.possiblyCloseLastScanImageFile(),o.clearElement(),o.lastScanImageFile=URL.createObjectURL(e);var _=new Image;_.onload=function(){var v=_.width,T=_.height,A=document.getElementById(o.elementId),b=A.clientWidth?A.clientWidth:Or.DEFAULT_WIDTH,O=Math.max(A.clientHeight?A.clientHeight:T,Or.FILE_SCAN_MIN_HEIGHT),V=o.computeCanvasDrawConfig(v,T,b,O);if(n){var j=o.createCanvasElement(b,O,"qr-canvas-visible");j.style.display="inline-block",A.appendChild(j);var ee=j.getContext("2d");if(!ee)throw"Unable to get 2d context from canvas";ee.canvas.width=b,ee.canvas.height=O,ee.drawImage(_,0,0,v,T,V.x,V.y,V.width,V.height)}var re=Or.FILE_SCAN_HIDDEN_CANVAS_PADDING,le=Math.max(_.width,V.width),ke=Math.max(_.height,V.height),Re=le+2*re,ye=ke+2*re,pe=o.createCanvasElement(Re,ye);A.appendChild(pe);var we=pe.getContext("2d");if(!we)throw"Unable to get 2d context from canvas";we.canvas.width=Re,we.canvas.height=ye,we.drawImage(_,0,0,v,T,re,re,le,ke);try{o.qrcode.decodeRobustlyAsync(pe).then(function(Te){h(xE.createFromQrcodeResult(Te))}).catch(m)}catch(Te){m("QR code parse error, error = ".concat(Te))}},_.onerror=m,_.onabort=m,_.onstalled=m,_.onsuspend=m,_.src=URL.createObjectURL(e)})},a.prototype.clear=function(){this.clearElement()},a.getCameras=function(){return C4.retrieve()},a.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},a.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},a.prototype.applyVideoConstraints=function(e){if(e){if(!nA.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},a.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},a.prototype.getSupportedFormats=function(e){var n=[He.QR_CODE,He.AZTEC,He.CODABAR,He.CODE_39,He.CODE_93,He.CODE_128,He.DATA_MATRIX,He.MAXICODE,He.ITF,He.EAN_13,He.EAN_8,He.PDF_417,He.RSS_14,He.RSS_EXPANDED,He.UPC_A,He.UPC_E,He.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var o=[],h=0,m=e.formatsToSupport;h<m.length;h++){var _=m[h];r4(_)?o.push(_):this.logger.warn("Invalid format: ".concat(_," passed in config, ignoring."))}if(o.length===0)throw"None of formatsToSupport match supported values.";return o},a.prototype.getUseBarCodeDetectorIfSupported=function(e){if(oa(e))return!0;if(!oa(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(oa(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return oa(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},a.prototype.validateQrboxSize=function(e,n,o){var h=this,m=o.qrbox;this.validateQrboxConfig(m);var _=this.toQrdimensions(e,n,m),v=function(A){if(A<Or.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Or.MIN_QR_BOX_SIZE,"px.")},T=function(A){return A>e&&(h.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),A=e),A};v(_.width),v(_.height),_.width=T(_.width)},a.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},a.prototype.toQrdimensions=function(e,n,o){if(typeof o=="number")return{width:o,height:o};if(typeof o=="function")try{return o(e,n)}catch(h){throw new Error("qrbox config was passed as a function but it failed with unknown error"+h)}return o},a.prototype.setupUi=function(e,n,o){o.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,o);var h=oa(o.qrbox)?{width:e,height:n}:o.qrbox;this.validateQrboxConfig(h);var m=this.toQrdimensions(e,n,h);m.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var _=o.isShadedBoxEnabled()&&m.height<=n,v={x:0,y:0,width:e,height:n},T=_?this.getShadedRegionBounds(e,n,m):v,A=this.createCanvasElement(T.width,T.height),b={willReadFrequently:!0},O=A.getContext("2d",b);O.canvas.width=T.width,O.canvas.height=T.height,this.element.append(A),_&&this.possiblyInsertShadingElement(this.element,e,n,m),this.createScannerPausedUiElement(this.element),this.qrRegion=T,this.context=O,this.canvasElement=A},a.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Hl.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},a.prototype.scanContext=function(e,n){var o=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(h){return e(h.text,xE.createFromQrcodeResult(h)),o.possiblyUpdateShaders(!0),!0}).catch(function(h){o.possiblyUpdateShaders(!1);var m=Hl.codeParseError(h);return n(m,a4.createFrom(m)),!1})},a.prototype.foreverScan=function(e,n,o){var h=this;if(this.shouldScan&&this.renderedCamera){var m=this.renderedCamera.getSurface(),_=m.videoWidth/m.clientWidth,v=m.videoHeight/m.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var T=this.qrRegion.width*_,A=this.qrRegion.height*v,b=this.qrRegion.x*_,O=this.qrRegion.y*v;this.context.drawImage(m,b,O,T,A,0,0,this.qrRegion.width,this.qrRegion.height);var V=function(){h.foreverScanTimeout=setTimeout(function(){h.foreverScan(e,n,o)},h.getTimeoutFps(e.fps))};this.scanContext(n,o).then(function(j){!j&&e.disableFlip!==!0?(h.context.translate(h.context.canvas.width,0),h.context.scale(-1,1),h.scanContext(n,o).finally(function(){V()})):V()}).catch(function(j){h.logger.logError("Error happend while scanning context",j),V()})}},a.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",o="deviceId",h={user:!0,environment:!0},m="exact",_=function(ee){if(ee in h)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(ee,"'")},v=Object.keys(e);if(v.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(v.length," keys");var T=Object.keys(e)[0];if(T!==n&&T!==o)throw"Only '".concat(n,"' and '").concat(o,"' ")+" are supported for 'cameraIdOrConfig'";if(T===n){var A=e.facingMode;if(typeof A=="string"){if(_(A))return{facingMode:A}}else if(typeof A=="object")if(m in A){if(_(A["".concat(m)]))return{facingMode:{exact:A["".concat(m)]}}}else throw"'facingMode' should be string or object with"+" ".concat(m," as key.");else{var b=typeof A;throw"Invalid type of 'facingMode' = ".concat(b)}}else{var O=e.deviceId;if(typeof O=="string")return{deviceId:O};if(typeof O=="object"){if(m in O)return{deviceId:{exact:O["".concat(m)]}};throw"'deviceId' should be string or object with"+" ".concat(m," as key.")}else{var V=typeof O;throw"Invalid type of 'deviceId' = ".concat(V)}}}var j=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(j)},a.prototype.computeCanvasDrawConfig=function(e,n,o,h){if(e<=o&&n<=h){var m=(o-e)/2,_=(h-n)/2;return{x:m,y:_,width:e,height:n}}else{var v=e,T=n;return e>o&&(n=o/e*n,e=o),n>h&&(e=h/n*e,n=h),this.logger.log("Image downsampled from "+"".concat(v,"X").concat(T)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,o,h)}},a.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},a.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Or.BORDER_SHADER_MATCH_COLOR:Or.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},a.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},a.prototype.createCanvasElement=function(e,n,o){var h=e,m=n,_=document.createElement("canvas");return _.style.width="".concat(h,"px"),_.style.height="".concat(m,"px"),_.style.display="none",_.id=oa(o)?"qr-canvas":o,_},a.prototype.getShadedRegionBounds=function(e,n,o){if(o.width>e||o.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-o.width)/2,y:(n-o.height)/2,width:o.width,height:o.height}},a.prototype.possiblyInsertShadingElement=function(e,n,o,h){if(!(n-h.width<1||o-h.height<1)){var m=document.createElement("div");m.style.position="absolute";var _=(n-h.width)/2,v=(o-h.height)/2;if(m.style.borderLeft="".concat(_,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderRight="".concat(_,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderTop="".concat(v,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderBottom="".concat(v,"px solid rgba(0, 0, 0, 0.48)"),m.style.boxSizing="border-box",m.style.top="0px",m.style.bottom="0px",m.style.left="0px",m.style.right="0px",m.id="".concat(Or.SHADED_REGION_ELEMENT_ID),n-h.width<11||o-h.height<11)this.hasBorderShaders=!1;else{var T=5,A=40;this.insertShaderBorders(m,A,T,-T,null,0,!0),this.insertShaderBorders(m,A,T,-T,null,0,!1),this.insertShaderBorders(m,A,T,null,-T,0,!0),this.insertShaderBorders(m,A,T,null,-T,0,!1),this.insertShaderBorders(m,T,A+T,-T,null,-T,!0),this.insertShaderBorders(m,T,A+T,null,-T,-T,!0),this.insertShaderBorders(m,T,A+T,-T,null,-T,!1),this.insertShaderBorders(m,T,A+T,null,-T,-T,!1),this.hasBorderShaders=!0}e.append(m)}},a.prototype.insertShaderBorders=function(e,n,o,h,m,_,v){var T=document.createElement("div");T.style.position="absolute",T.style.backgroundColor=Or.BORDER_SHADER_DEFAULT_COLOR,T.style.width="".concat(n,"px"),T.style.height="".concat(o,"px"),h!==null&&(T.style.top="".concat(h,"px")),m!==null&&(T.style.bottom="".concat(m,"px")),v?T.style.left="".concat(_,"px"):T.style.right="".concat(_,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(T),e.appendChild(T)},a.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},a.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},a.prototype.getTimeoutFps=function(e){return 1e3/e},a})(),IE;(function(a){a[a.STATUS_DEFAULT=0]="STATUS_DEFAULT",a[a.STATUS_SUCCESS=1]="STATUS_SUCCESS",a[a.STATUS_WARNING=2]="STATUS_WARNING",a[a.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(IE||(IE={}));const O4=({onCode:a})=>(yt.useEffect(()=>{const e="qr-reader",n=new N4(e);return n.start({facingMode:"environment"},{fps:10,qrbox:250},o=>{a(o)},()=>{}).catch(o=>{console.error("Kunne ikke starte QR-leser:",o)}),()=>{n.stop().then(()=>n.clear()).catch(()=>{})}},[a]),Y.jsx("div",{id:"qr-reader",style:{width:"100%"}}));function D4({user:a}){const[e,n]=yt.useState(""),[o,h]=yt.useState(null),[m,_]=yt.useState(!1),v=a.term??11,[T,A]=yt.useState([]),[b,O]=yt.useState(!1),[V,j]=yt.useState(0),[ee,re]=yt.useState(!1),le=a.semesterStatus&&a.semesterStatus!=="aktiv",ke=async pe=>{if(!(!pe||pe.length<6)){h(null),_(!0);try{const we=$r(Kn,"sessions"),Te=Bh(we,kh("code","==",pe)),B=await io(Te);if(B.empty){h("Fant ingen kt med denne koden."),n(""),_(!1);return}const F=B.docs[0],k=F.data(),Z=Is(Kn,"sessions",F.id,"attendance",a.uid);if((await b0(Z)).exists()){h("Du er allerede registrert p denne kten."),n(""),_(!1);return}await Jx(Z,{userId:a.uid,studentName:a.displayName,studentEmail:a.email,createdAt:un.now(),status:"present"}),h(`Oppmte registrert for ${k.name||"kten"}.`),n(""),j(W=>W+1)}catch(we){console.error(we),h("Noe gikk galt ved registrering av oppmte.")}finally{_(!1)}}},Re=pe=>{if(!pe||m)return;const we=pe.replace(/\D/g,"").slice(0,6);we.length===6&&(n(we),ke(we),re(!1))};yt.useEffect(()=>{(async()=>{O(!0);try{const we=$r(Kn,"requirements"),Te=Bh(we,kh("term","==",v)),F=(await io(Te)).docs.map(X=>{const ge=X.data();return{category:ge.category,requiredCount:ge.requiredCount}}),k=$r(Kn,"sessions"),Z=Bh(k,kh("term","==",v)),W=(await io(Z)).docs.map(X=>{const ge=X.data();return{id:X.id,category:ge.category}}),G=$r(Kn,"times"),Je=Bh(G,kh("term","==",v)),he=(await io(Je)).docs.map(X=>({category:X.data().category})),_e=new Map;for(const X of he)X.category&&_e.set(X.category,(_e.get(X.category)??0)+1);const je=new Map;for(const X of W){if(!X.category)continue;const ge=Is(Kn,"sessions",X.id,"attendance",a.uid);(await b0(ge)).exists()&&je.set(X.category,(je.get(X.category)??0)+1)}const it=new Set;for(const X of F)it.add(X.category);for(const X of W)X.category&&it.add(X.category);for(const X of he)X.category&&it.add(X.category);const lt=[];it.forEach(X=>{const ge=F.find(De=>De.category===X),Pe=ge?ge.requiredCount:null,Be=_e.get(X)??0,$e=je.get(X)??0;lt.push({category:X,attendedCount:$e,totalSessions:Be,requiredCount:Pe})}),lt.sort((X,ge)=>X.category.localeCompare(ge.category,"nb-NO",{sensitivity:"base"})),A(lt)}catch(we){console.error(we),A([])}finally{O(!1)}})()},[v,a.uid,V]);const ye=pe=>{const Te=pe.target.value.replace(/\D/g,"").slice(0,6);n(Te),Te.length===6&&!m&&ke(Te)};return Y.jsxs("div",{style:{maxWidth:"720px",margin:"0 auto"},children:[Y.jsx("h2",{style:{textAlign:"center",marginBottom:"1rem"},children:"Student  registrer oppmte"}),le&&Y.jsxs("p",{style:{color:"red",textAlign:"center"},children:['Du er markert som "',a.semesterStatus,'" dette semesteret. Ingen oppmtekrav, men du kan fortsatt registrere oppmte.']}),Y.jsxs("div",{style:{marginTop:"1rem",textAlign:"center"},children:[Y.jsx("label",{style:{display:"block",marginBottom:"0.3rem"},children:"6-sifret kode fra lrer"}),Y.jsx("input",{value:e,onChange:ye,maxLength:6,placeholder:"482931",style:{padding:"0.5rem 0.8rem",fontSize:"1.2rem",letterSpacing:"0.3em",textAlign:"center",borderRadius:"0.5rem",border:"1px solid #d1d5db",minWidth:"10rem"}}),Y.jsx("p",{style:{fontSize:"0.8rem",color:"#6b7280",marginTop:"0.4rem"},children:"Koden registreres automatisk nr du har skrevet inn 6 siffer."}),Y.jsx("button",{type:"button",onClick:()=>re(pe=>!pe),style:{marginTop:"0.5rem",padding:"0.4rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:ee?"#e5e7eb":"#f9fafb",cursor:"pointer",fontSize:"0.9rem"},children:ee?"Stopp skanning":"Skann QR-kode"}),ee&&Y.jsx("div",{style:{marginTop:"0.8rem",display:"flex",justifyContent:"center"},children:Y.jsx("div",{style:{width:"260px",maxWidth:"100%",borderRadius:"0.75rem",overflow:"hidden",border:"1px solid #d1d5db"},children:Y.jsx(O4,{onCode:Re})})})]}),o&&Y.jsx("p",{style:{marginTop:"1rem",textAlign:"center"},children:o}),Y.jsx("hr",{style:{marginTop:"2rem",marginBottom:"1rem"}}),Y.jsxs("section",{children:[Y.jsxs("h3",{children:["Oppmteoversikt termin ",v]}),b?Y.jsx("p",{children:"Laster oppmte..."}):T.length===0?Y.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"Ingen registrerte timer for denne terminen enn."}):Y.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[Y.jsx("thead",{children:Y.jsxs("tr",{children:[Y.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"Gruppe"}),Y.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"Registrerte oppmter"}),Y.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"Krav"})]})}),Y.jsx("tbody",{children:T.map(pe=>{const Te={padding:"0.3rem",borderBottom:"1px solid #f3f4f6",background:pe.requiredCount!=null&&pe.attendedCount>=pe.requiredCount?"#dcfce7":"transparent"};return Y.jsxs("tr",{children:[Y.jsx("td",{style:Te,children:pe.category}),Y.jsx("td",{style:Te,children:pe.totalSessions>0?`${pe.attendedCount}/${pe.totalSessions}`:pe.attendedCount}),Y.jsx("td",{style:Te,children:pe.requiredCount??"-"})]},pe.category)})})]})]})]})}var M4=Object.defineProperty,Af=Object.getOwnPropertySymbols,rA=Object.prototype.hasOwnProperty,sA=Object.prototype.propertyIsEnumerable,RE=(a,e,n)=>e in a?M4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,N0=(a,e)=>{for(var n in e||(e={}))rA.call(e,n)&&RE(a,n,e[n]);if(Af)for(var n of Af(e))sA.call(e,n)&&RE(a,n,e[n]);return a},O0=(a,e)=>{var n={};for(var o in a)rA.call(a,o)&&e.indexOf(o)<0&&(n[o]=a[o]);if(a!=null&&Af)for(var o of Af(a))e.indexOf(o)<0&&sA.call(a,o)&&(n[o]=a[o]);return n};var tl;(a=>{const e=class Ot{constructor(T,A,b,O){if(this.version=T,this.errorCorrectionLevel=A,this.modules=[],this.isFunction=[],T<Ot.MIN_VERSION||T>Ot.MAX_VERSION)throw new RangeError("Version value out of range");if(O<-1||O>7)throw new RangeError("Mask value out of range");this.size=T*4+17;let V=[];for(let ee=0;ee<this.size;ee++)V.push(!1);for(let ee=0;ee<this.size;ee++)this.modules.push(V.slice()),this.isFunction.push(V.slice());this.drawFunctionPatterns();const j=this.addEccAndInterleave(b);if(this.drawCodewords(j),O==-1){let ee=1e9;for(let re=0;re<8;re++){this.applyMask(re),this.drawFormatBits(re);const le=this.getPenaltyScore();le<ee&&(O=re,ee=le),this.applyMask(re)}}h(0<=O&&O<=7),this.mask=O,this.applyMask(O),this.drawFormatBits(O),this.isFunction=[]}static encodeText(T,A){const b=a.QrSegment.makeSegments(T);return Ot.encodeSegments(b,A)}static encodeBinary(T,A){const b=a.QrSegment.makeBytes(T);return Ot.encodeSegments([b],A)}static encodeSegments(T,A,b=1,O=40,V=-1,j=!0){if(!(Ot.MIN_VERSION<=b&&b<=O&&O<=Ot.MAX_VERSION)||V<-1||V>7)throw new RangeError("Invalid value");let ee,re;for(ee=b;;ee++){const ye=Ot.getNumDataCodewords(ee,A)*8,pe=_.getTotalBits(T,ee);if(pe<=ye){re=pe;break}if(ee>=O)throw new RangeError("Data too long")}for(const ye of[Ot.Ecc.MEDIUM,Ot.Ecc.QUARTILE,Ot.Ecc.HIGH])j&&re<=Ot.getNumDataCodewords(ee,ye)*8&&(A=ye);let le=[];for(const ye of T){n(ye.mode.modeBits,4,le),n(ye.numChars,ye.mode.numCharCountBits(ee),le);for(const pe of ye.getData())le.push(pe)}h(le.length==re);const ke=Ot.getNumDataCodewords(ee,A)*8;h(le.length<=ke),n(0,Math.min(4,ke-le.length),le),n(0,(8-le.length%8)%8,le),h(le.length%8==0);for(let ye=236;le.length<ke;ye^=253)n(ye,8,le);let Re=[];for(;Re.length*8<le.length;)Re.push(0);return le.forEach((ye,pe)=>Re[pe>>>3]|=ye<<7-(pe&7)),new Ot(ee,A,Re,V)}getModule(T,A){return 0<=T&&T<this.size&&0<=A&&A<this.size&&this.modules[A][T]}getModules(){return this.modules}drawFunctionPatterns(){for(let b=0;b<this.size;b++)this.setFunctionModule(6,b,b%2==0),this.setFunctionModule(b,6,b%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const T=this.getAlignmentPatternPositions(),A=T.length;for(let b=0;b<A;b++)for(let O=0;O<A;O++)b==0&&O==0||b==0&&O==A-1||b==A-1&&O==0||this.drawAlignmentPattern(T[b],T[O]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(T){const A=this.errorCorrectionLevel.formatBits<<3|T;let b=A;for(let V=0;V<10;V++)b=b<<1^(b>>>9)*1335;const O=(A<<10|b)^21522;h(O>>>15==0);for(let V=0;V<=5;V++)this.setFunctionModule(8,V,o(O,V));this.setFunctionModule(8,7,o(O,6)),this.setFunctionModule(8,8,o(O,7)),this.setFunctionModule(7,8,o(O,8));for(let V=9;V<15;V++)this.setFunctionModule(14-V,8,o(O,V));for(let V=0;V<8;V++)this.setFunctionModule(this.size-1-V,8,o(O,V));for(let V=8;V<15;V++)this.setFunctionModule(8,this.size-15+V,o(O,V));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let T=this.version;for(let b=0;b<12;b++)T=T<<1^(T>>>11)*7973;const A=this.version<<12|T;h(A>>>18==0);for(let b=0;b<18;b++){const O=o(A,b),V=this.size-11+b%3,j=Math.floor(b/3);this.setFunctionModule(V,j,O),this.setFunctionModule(j,V,O)}}drawFinderPattern(T,A){for(let b=-4;b<=4;b++)for(let O=-4;O<=4;O++){const V=Math.max(Math.abs(O),Math.abs(b)),j=T+O,ee=A+b;0<=j&&j<this.size&&0<=ee&&ee<this.size&&this.setFunctionModule(j,ee,V!=2&&V!=4)}}drawAlignmentPattern(T,A){for(let b=-2;b<=2;b++)for(let O=-2;O<=2;O++)this.setFunctionModule(T+O,A+b,Math.max(Math.abs(O),Math.abs(b))!=1)}setFunctionModule(T,A,b){this.modules[A][T]=b,this.isFunction[A][T]=!0}addEccAndInterleave(T){const A=this.version,b=this.errorCorrectionLevel;if(T.length!=Ot.getNumDataCodewords(A,b))throw new RangeError("Invalid argument");const O=Ot.NUM_ERROR_CORRECTION_BLOCKS[b.ordinal][A],V=Ot.ECC_CODEWORDS_PER_BLOCK[b.ordinal][A],j=Math.floor(Ot.getNumRawDataModules(A)/8),ee=O-j%O,re=Math.floor(j/O);let le=[];const ke=Ot.reedSolomonComputeDivisor(V);for(let ye=0,pe=0;ye<O;ye++){let we=T.slice(pe,pe+re-V+(ye<ee?0:1));pe+=we.length;const Te=Ot.reedSolomonComputeRemainder(we,ke);ye<ee&&we.push(0),le.push(we.concat(Te))}let Re=[];for(let ye=0;ye<le[0].length;ye++)le.forEach((pe,we)=>{(ye!=re-V||we>=ee)&&Re.push(pe[ye])});return h(Re.length==j),Re}drawCodewords(T){if(T.length!=Math.floor(Ot.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let A=0;for(let b=this.size-1;b>=1;b-=2){b==6&&(b=5);for(let O=0;O<this.size;O++)for(let V=0;V<2;V++){const j=b-V,re=(b+1&2)==0?this.size-1-O:O;!this.isFunction[re][j]&&A<T.length*8&&(this.modules[re][j]=o(T[A>>>3],7-(A&7)),A++)}}h(A==T.length*8)}applyMask(T){if(T<0||T>7)throw new RangeError("Mask value out of range");for(let A=0;A<this.size;A++)for(let b=0;b<this.size;b++){let O;switch(T){case 0:O=(b+A)%2==0;break;case 1:O=A%2==0;break;case 2:O=b%3==0;break;case 3:O=(b+A)%3==0;break;case 4:O=(Math.floor(b/3)+Math.floor(A/2))%2==0;break;case 5:O=b*A%2+b*A%3==0;break;case 6:O=(b*A%2+b*A%3)%2==0;break;case 7:O=((b+A)%2+b*A%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[A][b]&&O&&(this.modules[A][b]=!this.modules[A][b])}}getPenaltyScore(){let T=0;for(let V=0;V<this.size;V++){let j=!1,ee=0,re=[0,0,0,0,0,0,0];for(let le=0;le<this.size;le++)this.modules[V][le]==j?(ee++,ee==5?T+=Ot.PENALTY_N1:ee>5&&T++):(this.finderPenaltyAddHistory(ee,re),j||(T+=this.finderPenaltyCountPatterns(re)*Ot.PENALTY_N3),j=this.modules[V][le],ee=1);T+=this.finderPenaltyTerminateAndCount(j,ee,re)*Ot.PENALTY_N3}for(let V=0;V<this.size;V++){let j=!1,ee=0,re=[0,0,0,0,0,0,0];for(let le=0;le<this.size;le++)this.modules[le][V]==j?(ee++,ee==5?T+=Ot.PENALTY_N1:ee>5&&T++):(this.finderPenaltyAddHistory(ee,re),j||(T+=this.finderPenaltyCountPatterns(re)*Ot.PENALTY_N3),j=this.modules[le][V],ee=1);T+=this.finderPenaltyTerminateAndCount(j,ee,re)*Ot.PENALTY_N3}for(let V=0;V<this.size-1;V++)for(let j=0;j<this.size-1;j++){const ee=this.modules[V][j];ee==this.modules[V][j+1]&&ee==this.modules[V+1][j]&&ee==this.modules[V+1][j+1]&&(T+=Ot.PENALTY_N2)}let A=0;for(const V of this.modules)A=V.reduce((j,ee)=>j+(ee?1:0),A);const b=this.size*this.size,O=Math.ceil(Math.abs(A*20-b*10)/b)-1;return h(0<=O&&O<=9),T+=O*Ot.PENALTY_N4,h(0<=T&&T<=2568888),T}getAlignmentPatternPositions(){if(this.version==1)return[];{const T=Math.floor(this.version/7)+2,A=this.version==32?26:Math.ceil((this.version*4+4)/(T*2-2))*2;let b=[6];for(let O=this.size-7;b.length<T;O-=A)b.splice(1,0,O);return b}}static getNumRawDataModules(T){if(T<Ot.MIN_VERSION||T>Ot.MAX_VERSION)throw new RangeError("Version number out of range");let A=(16*T+128)*T+64;if(T>=2){const b=Math.floor(T/7)+2;A-=(25*b-10)*b-55,T>=7&&(A-=36)}return h(208<=A&&A<=29648),A}static getNumDataCodewords(T,A){return Math.floor(Ot.getNumRawDataModules(T)/8)-Ot.ECC_CODEWORDS_PER_BLOCK[A.ordinal][T]*Ot.NUM_ERROR_CORRECTION_BLOCKS[A.ordinal][T]}static reedSolomonComputeDivisor(T){if(T<1||T>255)throw new RangeError("Degree out of range");let A=[];for(let O=0;O<T-1;O++)A.push(0);A.push(1);let b=1;for(let O=0;O<T;O++){for(let V=0;V<A.length;V++)A[V]=Ot.reedSolomonMultiply(A[V],b),V+1<A.length&&(A[V]^=A[V+1]);b=Ot.reedSolomonMultiply(b,2)}return A}static reedSolomonComputeRemainder(T,A){let b=A.map(O=>0);for(const O of T){const V=O^b.shift();b.push(0),A.forEach((j,ee)=>b[ee]^=Ot.reedSolomonMultiply(j,V))}return b}static reedSolomonMultiply(T,A){if(T>>>8||A>>>8)throw new RangeError("Byte out of range");let b=0;for(let O=7;O>=0;O--)b=b<<1^(b>>>7)*285,b^=(A>>>O&1)*T;return h(b>>>8==0),b}finderPenaltyCountPatterns(T){const A=T[1];h(A<=this.size*3);const b=A>0&&T[2]==A&&T[3]==A*3&&T[4]==A&&T[5]==A;return(b&&T[0]>=A*4&&T[6]>=A?1:0)+(b&&T[6]>=A*4&&T[0]>=A?1:0)}finderPenaltyTerminateAndCount(T,A,b){return T&&(this.finderPenaltyAddHistory(A,b),A=0),A+=this.size,this.finderPenaltyAddHistory(A,b),this.finderPenaltyCountPatterns(b)}finderPenaltyAddHistory(T,A){A[0]==0&&(T+=this.size),A.pop(),A.unshift(T)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],a.QrCode=e;function n(v,T,A){if(T<0||T>31||v>>>T)throw new RangeError("Value out of range");for(let b=T-1;b>=0;b--)A.push(v>>>b&1)}function o(v,T){return(v>>>T&1)!=0}function h(v){if(!v)throw new Error("Assertion error")}const m=class Fn{constructor(T,A,b){if(this.mode=T,this.numChars=A,this.bitData=b,A<0)throw new RangeError("Invalid argument");this.bitData=b.slice()}static makeBytes(T){let A=[];for(const b of T)n(b,8,A);return new Fn(Fn.Mode.BYTE,T.length,A)}static makeNumeric(T){if(!Fn.isNumeric(T))throw new RangeError("String contains non-numeric characters");let A=[];for(let b=0;b<T.length;){const O=Math.min(T.length-b,3);n(parseInt(T.substring(b,b+O),10),O*3+1,A),b+=O}return new Fn(Fn.Mode.NUMERIC,T.length,A)}static makeAlphanumeric(T){if(!Fn.isAlphanumeric(T))throw new RangeError("String contains unencodable characters in alphanumeric mode");let A=[],b;for(b=0;b+2<=T.length;b+=2){let O=Fn.ALPHANUMERIC_CHARSET.indexOf(T.charAt(b))*45;O+=Fn.ALPHANUMERIC_CHARSET.indexOf(T.charAt(b+1)),n(O,11,A)}return b<T.length&&n(Fn.ALPHANUMERIC_CHARSET.indexOf(T.charAt(b)),6,A),new Fn(Fn.Mode.ALPHANUMERIC,T.length,A)}static makeSegments(T){return T==""?[]:Fn.isNumeric(T)?[Fn.makeNumeric(T)]:Fn.isAlphanumeric(T)?[Fn.makeAlphanumeric(T)]:[Fn.makeBytes(Fn.toUtf8ByteArray(T))]}static makeEci(T){let A=[];if(T<0)throw new RangeError("ECI assignment value out of range");if(T<128)n(T,8,A);else if(T<16384)n(2,2,A),n(T,14,A);else if(T<1e6)n(6,3,A),n(T,21,A);else throw new RangeError("ECI assignment value out of range");return new Fn(Fn.Mode.ECI,0,A)}static isNumeric(T){return Fn.NUMERIC_REGEX.test(T)}static isAlphanumeric(T){return Fn.ALPHANUMERIC_REGEX.test(T)}getData(){return this.bitData.slice()}static getTotalBits(T,A){let b=0;for(const O of T){const V=O.mode.numCharCountBits(A);if(O.numChars>=1<<V)return 1/0;b+=4+V+O.bitData.length}return b}static toUtf8ByteArray(T){T=encodeURI(T);let A=[];for(let b=0;b<T.length;b++)T.charAt(b)!="%"?A.push(T.charCodeAt(b)):(A.push(parseInt(T.substring(b+1,b+3),16)),b+=2);return A}};m.NUMERIC_REGEX=/^[0-9]*$/,m.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,m.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let _=m;a.QrSegment=m})(tl||(tl={}));(a=>{(e=>{const n=class{constructor(h,m){this.ordinal=h,this.formatBits=m}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(a.QrCode||(a.QrCode={}))})(tl||(tl={}));(a=>{(e=>{const n=class{constructor(h,m){this.modeBits=h,this.numBitsCharCount=m}numCharCountBits(h){return this.numBitsCharCount[Math.floor((h+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(a.QrSegment||(a.QrSegment={}))})(tl||(tl={}));var jl=tl;var L4={L:jl.QrCode.Ecc.LOW,M:jl.QrCode.Ecc.MEDIUM,Q:jl.QrCode.Ecc.QUARTILE,H:jl.QrCode.Ecc.HIGH},aA=128,oA="L",lA="#FFFFFF",cA="#000000",uA=!1,hA=1,P4=4,B4=0,k4=.1;function fA(a,e=0){const n=[];return a.forEach(function(o,h){let m=null;o.forEach(function(_,v){if(!_&&m!==null){n.push(`M${m+e} ${h+e}h${v-m}v1H${m+e}z`),m=null;return}if(v===o.length-1){if(!_)return;m===null?n.push(`M${v+e},${h+e} h1v1H${v+e}z`):n.push(`M${m+e},${h+e} h${v+1-m}v1H${m+e}z`);return}_&&m===null&&(m=v)})}),n.join("")}function dA(a,e){return a.slice().map((n,o)=>o<e.y||o>=e.y+e.h?n:n.map((h,m)=>m<e.x||m>=e.x+e.w?h:!1))}function V4(a,e,n,o){if(o==null)return null;const h=a.length+n*2,m=Math.floor(e*k4),_=h/e,v=(o.width||m)*_,T=(o.height||m)*_,A=o.x==null?a.length/2-v/2:o.x*_,b=o.y==null?a.length/2-T/2:o.y*_,O=o.opacity==null?1:o.opacity;let V=null;if(o.excavate){let ee=Math.floor(A),re=Math.floor(b),le=Math.ceil(v+A-ee),ke=Math.ceil(T+b-re);V={x:ee,y:re,w:le,h:ke}}const j=o.crossOrigin;return{x:A,y:b,h:T,w:v,excavation:V,opacity:O,crossOrigin:j}}function U4(a,e){return e!=null?Math.max(Math.floor(e),0):a?P4:B4}function gA({value:a,level:e,minVersion:n,includeMargin:o,marginSize:h,imageSettings:m,size:_,boostLevel:v}){let T=ti.useMemo(()=>{const ee=(Array.isArray(a)?a:[a]).reduce((re,le)=>(re.push(...jl.QrSegment.makeSegments(le)),re),[]);return jl.QrCode.encodeSegments(ee,L4[e],n,void 0,void 0,v)},[a,e,n,v]);const{cells:A,margin:b,numCells:O,calculatedImageSettings:V}=ti.useMemo(()=>{let j=T.getModules();const ee=U4(o,h),re=j.length+ee*2,le=V4(j,_,ee,m);return{cells:j,margin:ee,numCells:re,calculatedImageSettings:le}},[T,_,m,o,h]);return{qrcode:T,margin:b,cells:A,numCells:O,calculatedImageSettings:V}}var F4=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),mA=ti.forwardRef(function(e,n){const o=e,{value:h,size:m=aA,level:_=oA,bgColor:v=lA,fgColor:T=cA,includeMargin:A=uA,minVersion:b=hA,boostLevel:O,marginSize:V,imageSettings:j}=o,re=O0(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:le}=re,ke=O0(re,["style"]),Re=j?.src,ye=ti.useRef(null),pe=ti.useRef(null),we=ti.useCallback(Je=>{ye.current=Je,typeof n=="function"?n(Je):n&&(n.current=Je)},[n]),[Te,B]=ti.useState(!1),{margin:F,cells:k,numCells:Z,calculatedImageSettings:q}=gA({value:h,level:_,minVersion:b,boostLevel:O,includeMargin:A,marginSize:V,imageSettings:j,size:m});ti.useEffect(()=>{if(ye.current!=null){const Je=ye.current,ce=Je.getContext("2d");if(!ce)return;let he=k;const _e=pe.current,je=q!=null&&_e!==null&&_e.complete&&_e.naturalHeight!==0&&_e.naturalWidth!==0;je&&q.excavation!=null&&(he=dA(k,q.excavation));const it=window.devicePixelRatio||1;Je.height=Je.width=m*it;const lt=m/Z*it;ce.scale(lt,lt),ce.fillStyle=v,ce.fillRect(0,0,Z,Z),ce.fillStyle=T,F4?ce.fill(new Path2D(fA(he,F))):k.forEach(function(X,ge){X.forEach(function(Pe,Be){Pe&&ce.fillRect(Be+F,ge+F,1,1)})}),q&&(ce.globalAlpha=q.opacity),je&&ce.drawImage(_e,q.x+F,q.y+F,q.w,q.h)}}),ti.useEffect(()=>{B(!1)},[Re]);const W=N0({height:m,width:m},le);let G=null;return Re!=null&&(G=ti.createElement("img",{src:Re,key:Re,style:{display:"none"},onLoad:()=>{B(!0)},ref:pe,crossOrigin:q?.crossOrigin})),ti.createElement(ti.Fragment,null,ti.createElement("canvas",N0({style:W,height:m,width:m,ref:we,role:"img"},ke)),G)});mA.displayName="QRCodeCanvas";var z4=ti.forwardRef(function(e,n){const o=e,{value:h,size:m=aA,level:_=oA,bgColor:v=lA,fgColor:T=cA,includeMargin:A=uA,minVersion:b=hA,boostLevel:O,title:V,marginSize:j,imageSettings:ee}=o,re=O0(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:le,cells:ke,numCells:Re,calculatedImageSettings:ye}=gA({value:h,level:_,minVersion:b,boostLevel:O,includeMargin:A,marginSize:j,imageSettings:ee,size:m});let pe=ke,we=null;ee!=null&&ye!=null&&(ye.excavation!=null&&(pe=dA(ke,ye.excavation)),we=ti.createElement("image",{href:ee.src,height:ye.h,width:ye.w,x:ye.x+le,y:ye.y+le,preserveAspectRatio:"none",opacity:ye.opacity,crossOrigin:ye.crossOrigin}));const Te=fA(pe,le);return ti.createElement("svg",N0({height:m,width:m,viewBox:`0 0 ${Re} ${Re}`,ref:n,role:"img"},re),!!V&&ti.createElement("title",null,V),ti.createElement("path",{fill:v,d:`M0,0 h${Re}v${Re}H0z`,shapeRendering:"crispEdges"}),ti.createElement("path",{fill:T,d:Te,shapeRendering:"crispEdges"}),we)});z4.displayName="QRCodeSVG";function pA({user:a}){const[e,n]=yt.useState([]),[o,h]=yt.useState(a.term??11),[m,_]=yt.useState(""),[v,T]=yt.useState(null),[A,b]=yt.useState([]),[O,V]=yt.useState(!0),[j,ee]=yt.useState(!1);yt.useEffect(()=>{(async()=>{V(!0);const B=(await io($r(Kn,"times"))).docs.map(F=>{const k=F.data();return{id:F.id,name:k.name,category:k.category,term:k.term}});n(B),V(!1)})()},[]),yt.useEffect(()=>{if(!v){b([]);return}const we=$r(Kn,"sessions",v.id,"attendance"),Te=t4(we,B=>{const F=B.docs.map(k=>{const Z=k.data();return{id:k.id,studentName:Z.studentName??null,studentEmail:Z.studentEmail??null,createdAt:Z.createdAt}}).sort((k,Z)=>{const q=k.createdAt?.toMillis?.()??0,W=Z.createdAt?.toMillis?.()??0;return q-W});b(F)});return()=>Te()},[v?.id]);const re=yt.useMemo(()=>e.filter(we=>we.term===o),[e,o]),le=yt.useMemo(()=>{const we=m.trim().toLowerCase();return we?re.filter(Te=>Te.name.toLowerCase().includes(we)||Te.category.toLowerCase().includes(we)).sort((Te,B)=>Te.name.localeCompare(B.name,"nb-NO",{sensitivity:"base"})):[]},[re,m]),ke=async we=>{const Te=e.find(W=>W.id===we);if(!Te)return;if(v){const W=Is(Kn,"sessions",v.id);await yf(W,{isOpen:!1}),T(null)}const B=Math.floor(1e5+Math.random()*9e5),F=String(B),k=$r(Kn,"sessions"),q={id:(await I0(k,{timeId:Te.id,name:Te.name,category:Te.category,term:Te.term,code:F,teacherId:a.uid,teacherName:a.displayName,teacherEmail:a.email,createdAt:un.now(),isOpen:!0})).id,timeId:Te.id,name:Te.name,category:Te.category,term:Te.term,code:F,teacherId:a.uid,createdAt:un.now()};T(q)},Re=async we=>{_(we.name),ee(!1),await ke(we.id)},ye=async()=>{if(!v)return;const we=Is(Kn,"sessions",v.id);await yf(we,{isOpen:!1}),T(null),b([])},pe=we=>{const Te=parseInt(we.target.value,10);Number.isNaN(Te)||Te<1||Te>12||(h(Te),_(""),ee(!1),T(null),b([]))};return O?Y.jsx("p",{children:"Laster lrerdata..."}):Y.jsxs("div",{style:{maxWidth:"720px",margin:"0 auto"},children:[Y.jsx("h2",{style:{textAlign:"center",marginBottom:"1rem"},children:"Lrer  oppmte"}),Y.jsx("section",{style:{marginTop:"1rem"},children:Y.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",alignItems:"flex-end"},children:[Y.jsxs("div",{style:{minWidth:"120px"},children:[Y.jsx("label",{children:"Termin"}),Y.jsx("br",{}),Y.jsx("input",{type:"number",min:1,max:12,value:o,onChange:pe,style:{width:"100%",padding:"0.4rem"}})]}),Y.jsxs("div",{style:{flex:1,position:"relative"},children:[Y.jsx("label",{children:'Time (sk f.eks. "ort")'}),Y.jsx("br",{}),Y.jsx("input",{value:m,onChange:we=>{_(we.target.value),ee(!0)},onFocus:()=>{m.trim().length>0&&ee(!0)},placeholder:"Start  skrive navnet p timen...",style:{width:"100%",padding:"0.4rem"}}),j&&le.length>0&&Y.jsx("ul",{style:{position:"absolute",top:"100%",left:0,right:0,zIndex:10,background:"white",border:"1px solid #e5e7eb",borderRadius:"0.5rem",marginTop:"0.2rem",listStyle:"none",padding:0,maxHeight:"220px",overflowY:"auto",boxShadow:"0 10px 20px rgba(0,0,0,0.08)"},children:le.map(we=>Y.jsxs("li",{onClick:()=>Re(we),style:{padding:"0.4rem 0.6rem",cursor:"pointer",borderBottom:"1px solid #f3f4f6"},onMouseDown:Te=>Te.preventDefault(),children:[Y.jsx("div",{children:we.name}),Y.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[we.category,"  termin ",we.term]})]},we.id))})]})]})}),v&&Y.jsxs("section",{style:{marginTop:"2rem",padding:"1rem",border:"1px solid #e5e7eb",borderRadius:"0.75rem",background:"#f9fafb"},children:[Y.jsxs("div",{style:{textAlign:"center"},children:[Y.jsxs("h3",{style:{marginTop:0,marginBottom:"0.25rem"},children:["Termin ",v.term]}),Y.jsxs("p",{style:{margin:0},children:[Y.jsx("strong",{children:"Time:"})," ",v.name]}),Y.jsxs("p",{style:{marginTop:"0.2rem"},children:[Y.jsx("strong",{children:"Gruppe:"})," ",v.category]})]}),Y.jsxs("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},children:[Y.jsx(mA,{value:v.code,size:160,includeMargin:!0}),Y.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",letterSpacing:"0.3em"},children:v.code})]}),Y.jsx("div",{style:{marginTop:"1rem",display:"flex",justifyContent:"center"},children:Y.jsx("button",{onClick:ye,style:{padding:"0.5rem 1.2rem",borderRadius:"999px",border:"none",background:"#dc2626",color:"white",fontWeight:500,cursor:"pointer"},children:"Lukk kt"})}),Y.jsx("hr",{style:{margin:"1rem 0"}}),Y.jsx("h4",{children:"Registrerte studenter"}),A.length===0?Y.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"Ingen har registrert seg enn."}):Y.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[Y.jsx("thead",{children:Y.jsxs("tr",{children:[Y.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"Navn"}),Y.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"E-post"}),Y.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb",padding:"0.3rem"},children:"Tidspunkt"})]})}),Y.jsx("tbody",{children:A.map(we=>Y.jsxs("tr",{children:[Y.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:we.studentName||"-"}),Y.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:we.studentEmail||"-"}),Y.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6",fontSize:"0.8rem",color:"#6b7280"},children:we.createdAt?new Date(we.createdAt.toMillis()).toLocaleTimeString("no-NO",{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-"})]},we.id))})]})]})]})}function H4({user:a}){const[e,n]=yt.useState("termSetup");return Y.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto"},children:[Y.jsx("h2",{style:{textAlign:"center",marginBottom:"1rem"},children:"Admin-panel"}),Y.jsxs("nav",{style:{display:"flex",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem",flexWrap:"wrap"},children:[Y.jsx(Z1,{active:e==="termSetup",onClick:()=>n("termSetup"),children:"Oppsett per termin"}),Y.jsx(Z1,{active:e==="users",onClick:()=>n("users"),children:"Brukere"}),Y.jsx(Z1,{active:e==="teacher",onClick:()=>n("teacher"),children:"Lrer-visning"})]}),e==="termSetup"&&Y.jsx(j4,{}),e==="users"&&Y.jsx(G4,{}),e==="teacher"&&Y.jsx(pA,{user:a})]})}function Z1({active:a,onClick:e,children:n}){return Y.jsx("button",{onClick:e,style:{padding:"0.3rem 0.7rem",borderRadius:"999px",border:a?"2px solid #2563eb":"1px solid #ccc",background:a?"#eff6ff":"#f9fafb",cursor:"pointer"},children:n})}function j4(){const[a,e]=yt.useState(11),[n,o]=yt.useState([]),[h,m]=yt.useState([]),[_,v]=yt.useState(!0),[T,A]=yt.useState(""),[b,O]=yt.useState({}),V=[1,2,3,4,5,6,7,8,9,10,11,12];yt.useEffect(()=>{(async()=>{v(!0);const[we,Te]=await Promise.all([io($r(Kn,"times")),io($r(Kn,"requirements"))]),B=we.docs.map(k=>{const Z=k.data();return{id:k.id,name:Z.name,category:Z.category,term:Z.term}}),F=Te.docs.map(k=>{const Z=k.data();return{id:k.id,term:Z.term,category:Z.category,requiredCount:Z.requiredCount}});o(B),m(F),v(!1)})()},[]);const j=h.filter(pe=>pe.term===a),ee=n.filter(pe=>pe.term===a),re=async(pe,we)=>{if(Number.isNaN(we)||we<0)return;const Te=Is(Kn,"requirements",pe);await yf(Te,{requiredCount:we}),m(B=>B.map(F=>F.id===pe?{...F,requiredCount:we}:F))},le=async pe=>{await yE(Is(Kn,"requirements",pe)),m(we=>we.filter(Te=>Te.id!==pe))},ke=async pe=>{pe.preventDefault();const we=T.trim();if(!we)return;if(j.find(Z=>Z.category.toLowerCase()===we.toLowerCase())){A("");return}const B=$r(Kn,"requirements"),k={id:(await I0(B,{term:a,category:we,requiredCount:0})).id,term:a,category:we,requiredCount:0};m(Z=>[...Z,k]),A("")},Re=async pe=>{await yE(Is(Kn,"times",pe)),o(we=>we.filter(Te=>Te.id!==pe))},ye=async(pe,we)=>{pe.preventDefault();const B=(b[we]??"").trim();if(!B)return;const F=$r(Kn,"times"),Z={id:(await I0(F,{name:B,category:we,term:a})).id,name:B,category:we,term:a};o(q=>[...q,Z]),O(q=>({...q,[we]:""}))};return _?Y.jsx("p",{children:"Laster oppsett..."}):Y.jsxs("div",{children:[Y.jsx("h3",{children:"Times og krav per termin"}),Y.jsx("p",{children:"Velg termin. Legg til kategorier (f.eks. Kirurgi, Indremedisin), sett krav, og administrer timene (Ortopedi 1 osv.) under hver kategori."}),Y.jsxs("div",{style:{marginBottom:"1rem"},children:[Y.jsx("label",{children:"Termin"}),Y.jsx("br",{}),Y.jsx("select",{value:a,onChange:pe=>e(parseInt(pe.target.value,10)),children:V.map(pe=>Y.jsxs("option",{value:pe,children:["Termin ",pe]},pe))})]}),Y.jsxs("section",{style:{marginBottom:"2rem"},children:[Y.jsxs("h4",{children:["Kategorier og timer  termin ",a]}),j.length===0?Y.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"Ingen kategorier/krav satt for denne terminen enn."}):Y.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:j.map(pe=>{const we=ee.filter(B=>B.category===pe.category).sort((B,F)=>B.name.localeCompare(F.name,"nb-NO",{sensitivity:"base"})),Te=b[pe.category]??"";return Y.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.75rem",padding:"0.75rem",background:"#f9fafb"},children:[Y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem",alignItems:"center",marginBottom:"0.5rem"},children:[Y.jsxs("div",{children:[Y.jsx("div",{style:{fontWeight:600},children:pe.category}),Y.jsxs("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:["Krav for termin ",a]})]}),Y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[Y.jsx("span",{style:{fontSize:"0.85rem"},children:"Krav:"}),Y.jsx("input",{type:"number",min:0,value:pe.requiredCount,onChange:B=>re(pe.id,parseInt(B.target.value,10)||0),style:{width:"4rem"}}),Y.jsx("button",{onClick:()=>le(pe.id),children:"Slett kategori"})]})]}),Y.jsxs("div",{children:[Y.jsx("div",{style:{fontSize:"0.85rem",marginBottom:"0.25rem",fontWeight:500},children:"Timer i denne kategorien"}),we.length===0?Y.jsx("p",{style:{fontSize:"0.8rem",color:"#6b7280",margin:0},children:"Ingen timer registrert i denne kategorien enn."}):Y.jsx("ul",{style:{listStyle:"none",padding:0,margin:0,display:"flex",flexDirection:"column",gap:"0.25rem"},children:we.map(B=>Y.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"white",borderRadius:"0.5rem",padding:"0.3rem 0.5rem",border:"1px solid #e5e7eb"},children:[Y.jsx("span",{children:B.name}),Y.jsx("button",{onClick:()=>Re(B.id),style:{fontSize:"0.8rem"},children:"Slett time"})]},B.id))}),Y.jsxs("form",{onSubmit:B=>ye(B,pe.category),style:{marginTop:"0.4rem",display:"flex",gap:"0.5rem",alignItems:"center"},children:[Y.jsx("input",{value:Te,onChange:B=>O(F=>({...F,[pe.category]:B.target.value})),placeholder:"Ny time, f.eks. Ortopedi 1",style:{flex:1,padding:"0.3rem 0.4rem",borderRadius:"0.4rem",border:"1px solid #d1d5db",fontSize:"0.85rem"}}),Y.jsx("button",{type:"submit",style:{fontSize:"0.85rem"},children:"Legg til time"})]})]})]},pe.id)})}),Y.jsxs("form",{onSubmit:ke,style:{marginTop:"0.75rem"},children:[Y.jsxs("label",{style:{fontSize:"0.8rem"},children:["Legg til kategori for termin ",a]}),Y.jsx("br",{}),Y.jsx("input",{value:T,onChange:pe=>A(pe.target.value),placeholder:"Kirurgi, Indremedisin, Anestesi ...",style:{marginRight:"0.5rem",width:"60%"}}),Y.jsx("button",{type:"submit",children:"Legg til kategori"})]})]})]})}function G4(){const[a,e]=yt.useState([]),[n,o]=yt.useState(!0),[h,m]=yt.useState(""),_=async()=>{o(!0);const ee=(await io($r(Kn,"users"))).docs.map(re=>({...re.data(),docId:re.id}));e(ee),o(!1)};yt.useEffect(()=>{_()},[]);const v=async(j,ee,re)=>{const le=Is(Kn,"users",j);await yf(le,{[ee]:re}),e(ke=>ke.map(Re=>Re.docId===j?{...Re,[ee]:re}:Re))},T=j=>{if(!h.trim())return!0;const ee=h.trim().toLowerCase(),re=(j.displayName||"").toLowerCase(),le=(j.email||"").toLowerCase();return re.includes(ee)||le.includes(ee)},A=j=>j.slice(0,10),b=A(a.filter(j=>j.role==="teacher"&&T(j))),O=A(a.filter(j=>j.role==="student"&&T(j))),V=A(a.filter(j=>j.role==="admin"&&T(j)));return n?Y.jsx("p",{children:"Laster brukere..."}):Y.jsxs("div",{children:[Y.jsx("h3",{children:"Brukere"}),Y.jsxs("p",{children:["Sett roller (",Y.jsx("code",{children:"student"}),", ",Y.jsx("code",{children:"teacher"}),","," ",Y.jsx("code",{children:"admin"}),"). Bare studenter har termin og status for semester."]}),Y.jsxs("div",{style:{marginBottom:"1rem"},children:[Y.jsx("label",{children:"Sk p navn eller e-post"}),Y.jsx("br",{}),Y.jsx("input",{value:h,onChange:j=>m(j.target.value),placeholder:"Sk...",style:{maxWidth:"300px"}}),Y.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Viser maks 10 treff per seksjon."})]}),Y.jsxs("section",{style:{marginBottom:"1.5rem"},children:[Y.jsx("h4",{children:"Studenter"}),O.length===0?Y.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280"},children:"Ingen studenter (eller ingen som matcher sket)."}):Y.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[Y.jsx("thead",{children:Y.jsxs("tr",{children:[Y.jsx("th",{style:{borderBottom:"1px solid #ddd",textAlign:"left",padding:"0.3rem"},children:"Navn / e-post"}),Y.jsx("th",{style:{borderBottom:"1px solid #ddd",textAlign:"left",padding:"0.3rem"},children:"Rolle"}),Y.jsx("th",{style:{borderBottom:"1px solid #ddd",textAlign:"left",padding:"0.3rem"},children:"Termin"}),Y.jsx("th",{style:{borderBottom:"1px solid #ddd",textAlign:"left",padding:"0.3rem"},children:"Status semester"})]})}),Y.jsx("tbody",{children:O.map(j=>Y.jsxs("tr",{children:[Y.jsxs("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:[Y.jsx("div",{children:j.displayName||j.email}),Y.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:j.email})]}),Y.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:Y.jsxs("select",{value:j.role,onChange:ee=>v(j.docId,"role",ee.target.value),children:[Y.jsx("option",{value:"student",children:"student"}),Y.jsx("option",{value:"teacher",children:"teacher"}),Y.jsx("option",{value:"admin",children:"admin"})]})}),Y.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:Y.jsxs("select",{value:j.term??"",onChange:ee=>{const re=ee.target.value;v(j.docId,"term",re?parseInt(re,10):null)},children:[Y.jsx("option",{value:"",children:"-"}),[1,2,3,4,5,6,7,8,9,10,11,12].map(ee=>Y.jsx("option",{value:ee,children:ee},ee))]})}),Y.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:Y.jsxs("select",{value:j.semesterStatus||"aktiv",onChange:ee=>v(j.docId,"semesterStatus",ee.target.value),children:[Y.jsx("option",{value:"aktiv",children:"aktiv"}),Y.jsx("option",{value:"frir",children:"frir"}),Y.jsx("option",{value:"permisjon",children:"permisjon"}),Y.jsx("option",{value:"forskning",children:"forskningslinje"}),Y.jsx("option",{value:"ikke_aktuell",children:"ikke aktuell"})]})})]},j.docId))})]})]}),Y.jsxs("section",{style:{marginBottom:"1.5rem"},children:[Y.jsx("h4",{children:"Lrere"}),b.length===0?Y.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280"},children:"Ingen lrere (eller ingen som matcher sket)."}):Y.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[Y.jsx("thead",{children:Y.jsxs("tr",{children:[Y.jsx("th",{style:{borderBottom:"1px solid #ddd",textAlign:"left",padding:"0.3rem"},children:"Navn / e-post"}),Y.jsx("th",{style:{borderBottom:"1px solid #ddd",textAlign:"left",padding:"0.3rem"},children:"Rolle"})]})}),Y.jsx("tbody",{children:b.map(j=>Y.jsxs("tr",{children:[Y.jsxs("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:[Y.jsx("div",{children:j.displayName||j.email}),Y.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:j.email})]}),Y.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:Y.jsxs("select",{value:j.role,onChange:ee=>v(j.docId,"role",ee.target.value),children:[Y.jsx("option",{value:"teacher",children:"teacher"}),Y.jsx("option",{value:"student",children:"student"}),Y.jsx("option",{value:"admin",children:"admin"})]})})]},j.docId))})]})]}),Y.jsxs("section",{style:{marginBottom:"1.5rem"},children:[Y.jsx("h4",{children:"Administratorer"}),V.length===0?Y.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280"},children:"Ingen administratorer (eller ingen som matcher sket)."}):Y.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[Y.jsx("thead",{children:Y.jsxs("tr",{children:[Y.jsx("th",{style:{borderBottom:"1px solid #ddd",textAlign:"left",padding:"0.3rem"},children:"Navn / e-post"}),Y.jsx("th",{style:{borderBottom:"1px solid #ddd",textAlign:"left",padding:"0.3rem"},children:"Rolle"})]})}),Y.jsx("tbody",{children:V.map(j=>Y.jsxs("tr",{children:[Y.jsxs("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:[Y.jsx("div",{children:j.displayName||j.email}),Y.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:j.email})]}),Y.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6"},children:Y.jsxs("select",{value:j.role,onChange:ee=>v(j.docId,"role",ee.target.value),children:[Y.jsx("option",{value:"admin",children:"admin"}),Y.jsx("option",{value:"teacher",children:"teacher"}),Y.jsx("option",{value:"student",children:"student"})]})})]},j.docId))})]})]})]})}const J1={minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#f3f4f6",fontFamily:"system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif"},$1={background:"white",borderRadius:"0.75rem",padding:"1.5rem",boxShadow:"0 10px 25px rgba(0,0,0,0.08)",width:"100%",maxWidth:"960px"};function q4(){const{user:a,loading:e,login:n,register:o,logout:h}=i4(),[m,_]=yt.useState(""),[v,T]=yt.useState(""),[A,b]=yt.useState(!1),[O,V]=yt.useState(null),[j,ee]=yt.useState(!1),re=async le=>{if(le.preventDefault(),V(null),!m||!v){V("Fyll inn bde e-post og passord.");return}ee(!0);try{A?await o(m.trim(),v):await n(m.trim(),v)}catch(ke){console.error(ke);let Re="Kunne ikke logge inn.";ke?.code==="auth/user-not-found"?Re="Bruker finnes ikke. Prv  registrere deg frst.":ke?.code==="auth/wrong-password"?Re="Feil passord.":ke?.code==="auth/email-already-in-use"?Re="E-postadressen er allerede registrert.":ke?.code==="auth/weak-password"&&(Re="Passordet er for svakt (min. 6 tegn)."),V(Re)}finally{ee(!1)}};return e?Y.jsx("div",{style:J1,children:Y.jsx("div",{style:$1,children:Y.jsx("p",{children:"Laster..."})})}):a?Y.jsx("div",{style:J1,children:Y.jsxs("div",{style:$1,children:[Y.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[Y.jsxs("div",{children:[Y.jsx("div",{children:a.displayName||a.email}),Y.jsxs("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:["Rolle: ",a.role]})]}),Y.jsx("button",{onClick:h,style:{padding:"0.3rem 0.8rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#f9fafb",cursor:"pointer",fontSize:"0.85rem"},children:"Logg ut"})]}),Y.jsx("main",{children:a.role==="admin"?Y.jsx(H4,{user:a}):a.role==="teacher"?Y.jsx(pA,{user:a}):Y.jsx(D4,{user:a})})]})}):Y.jsx("div",{style:J1,children:Y.jsxs("div",{style:{...$1,maxWidth:"420px"},children:[Y.jsx("h1",{style:{marginBottom:"0.5rem",textAlign:"center"},children:"Oppmteregistrering"}),Y.jsxs("form",{onSubmit:re,children:[Y.jsxs("div",{style:{marginBottom:"0.75rem"},children:[Y.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.2rem"},children:"E-post"}),Y.jsx("input",{type:"email",value:m,onChange:le=>_(le.target.value),placeholder:"fornavn.etternavn@uio.no",style:{width:"100%",padding:"0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db"}})]}),Y.jsxs("div",{style:{marginBottom:"0.75rem"},children:[Y.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.2rem"},children:"Passord"}),Y.jsx("input",{type:"password",value:v,onChange:le=>T(le.target.value),placeholder:"Minst 6 tegn",style:{width:"100%",padding:"0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db"}})]}),O&&Y.jsx("p",{style:{color:"red",fontSize:"0.85rem",marginBottom:"0.75rem"},children:O}),Y.jsx("button",{type:"submit",disabled:j,style:{width:"100%",padding:"0.6rem 1rem",borderRadius:"999px",border:"none",background:"#2563eb",color:"white",fontWeight:500,cursor:"pointer",marginBottom:"0.5rem"},children:j?A?"Registrerer...":"Logger inn...":A?"Registrer bruker":"Logg inn"})]}),Y.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.85rem",textAlign:"center"},children:A?Y.jsxs(Y.Fragment,{children:["Har du allerede en bruker?"," ",Y.jsx("button",{type:"button",onClick:()=>{b(!1),V(null)},style:{border:"none",background:"transparent",color:"#2563eb",cursor:"pointer",textDecoration:"underline",padding:0},children:"Logg inn"})]}):Y.jsxs(Y.Fragment,{children:["Ny bruker?"," ",Y.jsx("button",{type:"button",onClick:()=>{b(!0),V(null)},style:{border:"none",background:"transparent",color:"#2563eb",cursor:"pointer",textDecoration:"underline",padding:0},children:"Registrer deg"})]})})]})})}qw.createRoot(document.getElementById("root")).render(Y.jsx(ti.StrictMode,{children:Y.jsx(q4,{})}));
