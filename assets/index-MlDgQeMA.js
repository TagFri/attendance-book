(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var $k=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gp(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var ym={exports:{}},Zl={};var z0;function rw(){if(z0)return Zl;z0=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:h,ref:o!==void 0?o:null,props:u}}return Zl.Fragment=e,Zl.jsx=n,Zl.jsxs=n,Zl}var B0;function iw(){return B0||(B0=1,ym.exports=rw()),ym.exports}var _=iw(),vm={exports:{}},lt={};var q0;function sw(){if(q0)return lt;q0=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function w(O){return O===null||typeof O!="object"?null:(O=S&&O[S]||O["@@iterator"],typeof O=="function"?O:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,U={};function ge(O,q,ee){this.props=O,this.context=q,this.refs=U,this.updater=ee||L}ge.prototype.isReactComponent={},ge.prototype.setState=function(O,q){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,q,"setState")},ge.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function he(){}he.prototype=ge.prototype;function re(O,q,ee){this.props=O,this.context=q,this.refs=U,this.updater=ee||L}var Ee=re.prototype=new he;Ee.constructor=re,F(Ee,ge.prototype),Ee.isPureReactComponent=!0;var He=Array.isArray;function Me(){}var k={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function N(O,q,ee){var se=ee.ref;return{$$typeof:i,type:O,key:q,ref:se!==void 0?se:null,props:ee}}function V(O,q){return N(O.type,q,O.props)}function D(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function P(O){var q={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ee){return q[ee]})}var x=/\/+/g;function Be(O,q){return typeof O=="object"&&O!==null&&O.key!=null?P(""+O.key):q.toString(36)}function rt(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(Me,Me):(O.status="pending",O.then(function(q){O.status==="pending"&&(O.status="fulfilled",O.value=q)},function(q){O.status==="pending"&&(O.status="rejected",O.reason=q)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function Y(O,q,ee,se,we){var Ae=typeof O;(Ae==="undefined"||Ae==="boolean")&&(O=null);var De=!1;if(O===null)De=!0;else switch(Ae){case"bigint":case"string":case"number":De=!0;break;case"object":switch(O.$$typeof){case i:case e:De=!0;break;case v:return De=O._init,Y(De(O._payload),q,ee,se,we)}}if(De)return we=we(O),De=se===""?"."+Be(O,0):se,He(we)?(ee="",De!=null&&(ee=De.replace(x,"$&/")+"/"),Y(we,q,ee,"",function(Ue){return Ue})):we!=null&&(D(we)&&(we=V(we,ee+(we.key==null||O&&O.key===we.key?"":(""+we.key).replace(x,"$&/")+"/")+De)),q.push(we)),1;De=0;var it=se===""?".":se+":";if(He(O))for(var me=0;me<O.length;me++)se=O[me],Ae=it+Be(se,me),De+=Y(se,q,ee,Ae,we);else if(me=w(O),typeof me=="function")for(O=me.call(O),me=0;!(se=O.next()).done;)se=se.value,Ae=it+Be(se,me++),De+=Y(se,q,ee,Ae,we);else if(Ae==="object"){if(typeof O.then=="function")return Y(rt(O),q,ee,se,we);throw q=String(O),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return De}function ce(O,q,ee){if(O==null)return O;var se=[],we=0;return Y(O,se,"","",function(Ae){return q.call(ee,Ae,we++)}),se}function ve(O){if(O._status===-1){var q=O._result;q=q(),q.then(function(ee){(O._status===0||O._status===-1)&&(O._status=1,O._result=ee)},function(ee){(O._status===0||O._status===-1)&&(O._status=2,O._result=ee)}),O._status===-1&&(O._status=0,O._result=q)}if(O._status===1)return O._result.default;throw O._result}var ye=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Le={map:ce,forEach:function(O,q,ee){ce(O,function(){q.apply(this,arguments)},ee)},count:function(O){var q=0;return ce(O,function(){q++}),q},toArray:function(O){return ce(O,function(q){return q})||[]},only:function(O){if(!D(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return lt.Activity=T,lt.Children=Le,lt.Component=ge,lt.Fragment=n,lt.Profiler=o,lt.PureComponent=re,lt.StrictMode=s,lt.Suspense=p,lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,lt.__COMPILER_RUNTIME={__proto__:null,c:function(O){return k.H.useMemoCache(O)}},lt.cache=function(O){return function(){return O.apply(null,arguments)}},lt.cacheSignal=function(){return null},lt.cloneElement=function(O,q,ee){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var se=F({},O.props),we=O.key;if(q!=null)for(Ae in q.key!==void 0&&(we=""+q.key),q)!C.call(q,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&q.ref===void 0||(se[Ae]=q[Ae]);var Ae=arguments.length-2;if(Ae===1)se.children=ee;else if(1<Ae){for(var De=Array(Ae),it=0;it<Ae;it++)De[it]=arguments[it+2];se.children=De}return N(O.type,we,se)},lt.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},lt.createElement=function(O,q,ee){var se,we={},Ae=null;if(q!=null)for(se in q.key!==void 0&&(Ae=""+q.key),q)C.call(q,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(we[se]=q[se]);var De=arguments.length-2;if(De===1)we.children=ee;else if(1<De){for(var it=Array(De),me=0;me<De;me++)it[me]=arguments[me+2];we.children=it}if(O&&O.defaultProps)for(se in De=O.defaultProps,De)we[se]===void 0&&(we[se]=De[se]);return N(O,Ae,we)},lt.createRef=function(){return{current:null}},lt.forwardRef=function(O){return{$$typeof:g,render:O}},lt.isValidElement=D,lt.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:ve}},lt.memo=function(O,q){return{$$typeof:m,type:O,compare:q===void 0?null:q}},lt.startTransition=function(O){var q=k.T,ee={};k.T=ee;try{var se=O(),we=k.S;we!==null&&we(ee,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(Me,ye)}catch(Ae){ye(Ae)}finally{q!==null&&ee.types!==null&&(q.types=ee.types),k.T=q}},lt.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},lt.use=function(O){return k.H.use(O)},lt.useActionState=function(O,q,ee){return k.H.useActionState(O,q,ee)},lt.useCallback=function(O,q){return k.H.useCallback(O,q)},lt.useContext=function(O){return k.H.useContext(O)},lt.useDebugValue=function(){},lt.useDeferredValue=function(O,q){return k.H.useDeferredValue(O,q)},lt.useEffect=function(O,q){return k.H.useEffect(O,q)},lt.useEffectEvent=function(O){return k.H.useEffectEvent(O)},lt.useId=function(){return k.H.useId()},lt.useImperativeHandle=function(O,q,ee){return k.H.useImperativeHandle(O,q,ee)},lt.useInsertionEffect=function(O,q){return k.H.useInsertionEffect(O,q)},lt.useLayoutEffect=function(O,q){return k.H.useLayoutEffect(O,q)},lt.useMemo=function(O,q){return k.H.useMemo(O,q)},lt.useOptimistic=function(O,q){return k.H.useOptimistic(O,q)},lt.useReducer=function(O,q,ee){return k.H.useReducer(O,q,ee)},lt.useRef=function(O){return k.H.useRef(O)},lt.useState=function(O){return k.H.useState(O)},lt.useSyncExternalStore=function(O,q,ee){return k.H.useSyncExternalStore(O,q,ee)},lt.useTransition=function(){return k.H.useTransition()},lt.version="19.2.0",lt}var F0;function yp(){return F0||(F0=1,vm.exports=sw()),vm.exports}var B=yp();const pe=gp(B);var _m={exports:{}},eu={},bm={exports:{}},Em={};var H0;function aw(){return H0||(H0=1,(function(i){function e(Y,ce){var ve=Y.length;Y.push(ce);e:for(;0<ve;){var ye=ve-1>>>1,Le=Y[ye];if(0<o(Le,ce))Y[ye]=ce,Y[ve]=Le,ve=ye;else break e}}function n(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var ce=Y[0],ve=Y.pop();if(ve!==ce){Y[0]=ve;e:for(var ye=0,Le=Y.length,O=Le>>>1;ye<O;){var q=2*(ye+1)-1,ee=Y[q],se=q+1,we=Y[se];if(0>o(ee,ve))se<Le&&0>o(we,ee)?(Y[ye]=we,Y[se]=ve,ye=se):(Y[ye]=ee,Y[q]=ve,ye=q);else if(se<Le&&0>o(we,ve))Y[ye]=we,Y[se]=ve,ye=se;else break e}}return ce}function o(Y,ce){var ve=Y.sortIndex-ce.sortIndex;return ve!==0?ve:Y.id-ce.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var h=Date,g=h.now();i.unstable_now=function(){return h.now()-g}}var p=[],m=[],v=1,T=null,S=3,w=!1,L=!1,F=!1,U=!1,ge=typeof setTimeout=="function"?setTimeout:null,he=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function Ee(Y){for(var ce=n(m);ce!==null;){if(ce.callback===null)s(m);else if(ce.startTime<=Y)s(m),ce.sortIndex=ce.expirationTime,e(p,ce);else break;ce=n(m)}}function He(Y){if(F=!1,Ee(Y),!L)if(n(p)!==null)L=!0,Me||(Me=!0,P());else{var ce=n(m);ce!==null&&rt(He,ce.startTime-Y)}}var Me=!1,k=-1,C=5,N=-1;function V(){return U?!0:!(i.unstable_now()-N<C)}function D(){if(U=!1,Me){var Y=i.unstable_now();N=Y;var ce=!0;try{e:{L=!1,F&&(F=!1,he(k),k=-1),w=!0;var ve=S;try{t:{for(Ee(Y),T=n(p);T!==null&&!(T.expirationTime>Y&&V());){var ye=T.callback;if(typeof ye=="function"){T.callback=null,S=T.priorityLevel;var Le=ye(T.expirationTime<=Y);if(Y=i.unstable_now(),typeof Le=="function"){T.callback=Le,Ee(Y),ce=!0;break t}T===n(p)&&s(p),Ee(Y)}else s(p);T=n(p)}if(T!==null)ce=!0;else{var O=n(m);O!==null&&rt(He,O.startTime-Y),ce=!1}}break e}finally{T=null,S=ve,w=!1}ce=void 0}}finally{ce?P():Me=!1}}}var P;if(typeof re=="function")P=function(){re(D)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,Be=x.port2;x.port1.onmessage=D,P=function(){Be.postMessage(null)}}else P=function(){ge(D,0)};function rt(Y,ce){k=ge(function(){Y(i.unstable_now())},ce)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Y){Y.callback=null},i.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Y?Math.floor(1e3/Y):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_next=function(Y){switch(S){case 1:case 2:case 3:var ce=3;break;default:ce=S}var ve=S;S=ce;try{return Y()}finally{S=ve}},i.unstable_requestPaint=function(){U=!0},i.unstable_runWithPriority=function(Y,ce){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ve=S;S=Y;try{return ce()}finally{S=ve}},i.unstable_scheduleCallback=function(Y,ce,ve){var ye=i.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?ye+ve:ye):ve=ye,Y){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=ve+Le,Y={id:v++,callback:ce,priorityLevel:Y,startTime:ve,expirationTime:Le,sortIndex:-1},ve>ye?(Y.sortIndex=ve,e(m,Y),n(p)===null&&Y===n(m)&&(F?(he(k),k=-1):F=!0,rt(He,ve-ye))):(Y.sortIndex=Le,e(p,Y),L||w||(L=!0,Me||(Me=!0,P()))),Y},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(Y){var ce=S;return function(){var ve=S;S=ce;try{return Y.apply(this,arguments)}finally{S=ve}}}})(Em)),Em}var G0;function ow(){return G0||(G0=1,bm.exports=aw()),bm.exports}var Tm={exports:{}},or={};var K0;function lw(){if(K0)return or;K0=1;var i=yp();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,m,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:p,containerInfo:m,implementation:v}}var h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return or.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,or.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return u(p,m,null,v)},or.flushSync=function(p){var m=h.T,v=s.p;try{if(h.T=null,s.p=2,p)return p()}finally{h.T=m,s.p=v,s.d.f()}},or.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(p,m))},or.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},or.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,T=g(v,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,w=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:w}):v==="script"&&s.d.X(p,{crossOrigin:T,integrity:S,fetchPriority:w,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},or.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=g(m.as,m.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(p)},or.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,T=g(v,m.crossOrigin);s.d.L(p,v,{crossOrigin:T,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},or.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=g(m.as,m.crossOrigin);s.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(p)},or.requestFormReset=function(p){s.d.r(p)},or.unstable_batchedUpdates=function(p,m){return p(m)},or.useFormState=function(p,m,v){return h.H.useFormState(p,m,v)},or.useFormStatus=function(){return h.H.useHostTransitionStatus()},or.version="19.2.0",or}var Q0;function Pb(){if(Q0)return Tm.exports;Q0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Tm.exports=lw(),Tm.exports}var Y0;function uw(){if(Y0)return eu;Y0=1;var i=ow(),e=yp(),n=Pb();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function h(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function p(t){if(u(t)!==t)throw Error(s(188))}function m(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return p(d),t;if(f===l)return p(d),r;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=d,l=f;else{for(var b=!1,A=d.child;A;){if(A===a){b=!0,a=d,l=f;break}if(A===l){b=!0,l=d,a=f;break}A=A.sibling}if(!b){for(A=f.child;A;){if(A===a){b=!0,a=f,l=d;break}if(A===l){b=!0,l=f,a=d;break}A=A.sibling}if(!b)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function v(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=v(t),r!==null)return r;t=t.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),ge=Symbol.for("react.profiler"),he=Symbol.for("react.consumer"),re=Symbol.for("react.context"),Ee=Symbol.for("react.forward_ref"),He=Symbol.for("react.suspense"),Me=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function P(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var x=Symbol.for("react.client.reference");function Be(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===x?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case F:return"Fragment";case ge:return"Profiler";case U:return"StrictMode";case He:return"Suspense";case Me:return"SuspenseList";case N:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case L:return"Portal";case re:return t.displayName||"Context";case he:return(t._context.displayName||"Context")+".Consumer";case Ee:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k:return r=t.displayName||null,r!==null?r:Be(t.type)||"Memo";case C:r=t._payload,t=t._init;try{return Be(t(r))}catch{}}return null}var rt=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},ye=[],Le=-1;function O(t){return{current:t}}function q(t){0>Le||(t.current=ye[Le],ye[Le]=null,Le--)}function ee(t,r){Le++,ye[Le]=t.current,t.current=r}var se=O(null),we=O(null),Ae=O(null),De=O(null);function it(t,r){switch(ee(Ae,r),ee(we,t),ee(se,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?u0(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=u0(r),t=c0(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}q(se),ee(se,t)}function me(){q(se),q(we),q(Ae)}function Ue(t){t.memoizedState!==null&&ee(De,t);var r=se.current,a=c0(r,t.type);r!==a&&(ee(we,t),ee(se,a))}function We(t){we.current===t&&(q(se),q(we)),De.current===t&&(q(De),Xl._currentValue=ve)}var ht,le;function fe(t){if(ht===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);ht=r&&r[1]||"",le=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ht+t+le}var Te=!1;function oe(t,r){if(!t||Te)return"";Te=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(W){var X=W}Reflect.construct(t,[],ae)}else{try{ae.call()}catch(W){X=W}t.call(ae.prototype)}}else{try{throw Error()}catch(W){X=W}(ae=t())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(W){if(W&&X&&typeof W.stack=="string")return[W.stack,X.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),b=f[0],A=f[1];if(b&&A){var M=b.split(`
`),K=A.split(`
`);for(d=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;d<K.length&&!K[d].includes("DetermineComponentFrameRoot");)d++;if(l===M.length||d===K.length)for(l=M.length-1,d=K.length-1;1<=l&&0<=d&&M[l]!==K[d];)d--;for(;1<=l&&0<=d;l--,d--)if(M[l]!==K[d]){if(l!==1||d!==1)do if(l--,d--,0>d||M[l]!==K[d]){var Z=`
`+M[l].replace(" at new "," at ");return t.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",t.displayName)),Z}while(1<=l&&0<=d);break}}}finally{Te=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?fe(a):""}function Ne(t,r){switch(t.tag){case 26:case 27:case 5:return fe(t.type);case 16:return fe("Lazy");case 13:return t.child!==r&&r!==null?fe("Suspense Fallback"):fe("Suspense");case 19:return fe("SuspenseList");case 0:case 15:return oe(t.type,!1);case 11:return oe(t.type.render,!1);case 1:return oe(t.type,!0);case 31:return fe("Activity");default:return""}}function Oe(t){try{var r="",a=null;do r+=Ne(t,a),a=t,t=t.return;while(t);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var je=Object.prototype.hasOwnProperty,Ie=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Kt=i.unstable_shouldYield,ot=i.unstable_requestPaint,Tt=i.unstable_now,kn=i.unstable_getCurrentPriorityLevel,Vt=i.unstable_ImmediatePriority,yn=i.unstable_UserBlockingPriority,Qe=i.unstable_NormalPriority,pt=i.unstable_LowPriority,Sn=i.unstable_IdlePriority,Gn=i.log,Dn=i.unstable_setDisableYieldValue,Wt=null,Pt=null;function Ut(t){if(typeof Gn=="function"&&Dn(t),Pt&&typeof Pt.setStrictMode=="function")try{Pt.setStrictMode(Wt,t)}catch{}}var xt=Math.clz32?Math.clz32:An,Ir=Math.log,wn=Math.LN2;function An(t){return t>>>=0,t===0?32:31-(Ir(t)/wn|0)|0}var on=256,ir=262144,kt=4194304;function mn(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function sr(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var d=0,f=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var A=l&134217727;return A!==0?(l=A&~f,l!==0?d=mn(l):(b&=A,b!==0?d=mn(b):a||(a=A&~t,a!==0&&(d=mn(a))))):(A=l&~f,A!==0?d=mn(A):b!==0?d=mn(b):a||(a=l&~t,a!==0&&(d=mn(a)))),d===0?0:r!==0&&r!==d&&(r&f)===0&&(f=d&-d,a=r&-r,f>=a||f===32&&(a&4194048)!==0)?r:d}function qe(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function St(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Q(){var t=kt;return kt<<=1,(kt&62914560)===0&&(kt=4194304),t}function J(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function de(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Se(t,r,a,l,d,f){var b=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var A=t.entanglements,M=t.expirationTimes,K=t.hiddenUpdates;for(a=b&~a;0<a;){var Z=31-xt(a),ae=1<<Z;A[Z]=0,M[Z]=-1;var X=K[Z];if(X!==null)for(K[Z]=null,Z=0;Z<X.length;Z++){var W=X[Z];W!==null&&(W.lane&=-536870913)}a&=~ae}l!==0&&ke(t,l,0),f!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=f&~(b&~r))}function ke(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-xt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Je(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-xt(a),d=1<<l;d&r|t[l]&r&&(t[l]|=r),a&=~d}}function xe(t,r){var a=r&-r;return a=(a&42)!==0?1:Ot(a),(a&(t.suspendedLanes|r))!==0?0:a}function Ot(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function et(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function yt(){var t=ce.p;return t!==0?t:(t=window.event,t===void 0?32:M0(t.type))}function $e(t,r){var a=ce.p;try{return ce.p=t,r()}finally{ce.p=a}}var Dt=Math.random().toString(36).slice(2),I="__reactFiber$"+Dt,ie="__reactProps$"+Dt,_e="__reactContainer$"+Dt,Fe="__reactEvents$"+Dt,st="__reactListeners$"+Dt,zt="__reactHandles$"+Dt,vt="__reactResources$"+Dt,gt="__reactMarker$"+Dt;function nn(t){delete t[I],delete t[ie],delete t[Fe],delete t[st],delete t[zt]}function Rn(t){var r=t[I];if(r)return r;for(var a=t.parentNode;a;){if(r=a[_e]||a[I]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=y0(t);t!==null;){if(a=t[I])return a;t=y0(t)}return r}t=a,a=t.parentNode}return null}function cn(t){if(t=t[I]||t[_e]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function Qt(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function Xn(t){var r=t[vt];return r||(r=t[vt]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function ln(t){t[gt]=!0}var ar=new Set,hr={};function Ur(t,r){di(t,r),di(t+"Capture",r)}function di(t,r){for(hr[t]=r,t=0;t<r.length;t++)ar.add(r[t])}var il=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sl={},al={};function Hu(t){return je.call(al,t)?!0:je.call(sl,t)?!1:il.test(t)?al[t]=!0:(sl[t]=!0,!1)}function Ya(t,r,a){if(Hu(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function xr(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function Mn(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}function Kn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cs(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ol(t,r,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,f=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return d.call(this)},set:function(b){a=""+b,f.call(this,b)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(b){a=""+b},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Yt(t){if(!t._valueTracker){var r=cs(t)?"checked":"value";t._valueTracker=ol(t,r,""+t[r])}}function ca(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=cs(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function hi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var da=/[\n"\\]/g;function yr(t){return t.replace(da,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Xa(t,r,a,l,d,f,b,A){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),r!=null?b==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+Kn(r)):t.value!==""+Kn(r)&&(t.value=""+Kn(r)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),r!=null?ll(t,b,Kn(r)):a!=null?ll(t,b,Kn(a)):l!=null&&t.removeAttribute("value"),d==null&&f!=null&&(t.defaultChecked=!!f),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.name=""+Kn(A):t.removeAttribute("name")}function Gu(t,r,a,l,d,f,b,A){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),r!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||r!=null)){Yt(t);return}a=a!=null?""+Kn(a):"",r=r!=null?""+Kn(r):a,A||r===t.value||(t.value=r),t.defaultValue=r}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=A?t.checked:!!l,t.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b),Yt(t)}function ll(t,r,a){r==="number"&&hi(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function ds(t,r,a,l){if(t=t.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=r.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Kn(a),r=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,l&&(t[d].defaultSelected=!0);return}r!==null||t[d].disabled||(r=t[d])}r!==null&&(r.selected=!0)}}function Ku(t,r,a){if(r!=null&&(r=""+Kn(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+Kn(a):""}function hs(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(rt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=Kn(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Yt(t)}function vr(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var Qu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ul(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||Qu.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function cl(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var d in r)l=r[d],r.hasOwnProperty(d)&&a[d]!==l&&ul(t,d,l)}else for(var f in r)r.hasOwnProperty(f)&&ul(t,f,r[f])}function $a(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wa(t){return fs.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Jr(){}var dl=null;function zr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ms=null,fi=null;function ha(t){var r=cn(t);if(r&&(t=r.stateNode)){var a=t[ie]||null;e:switch(t=r.stateNode,r.type){case"input":if(Xa(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+yr(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var d=l[ie]||null;if(!d)throw Error(s(90));Xa(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&ca(l)}break e;case"textarea":Ku(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&ds(t,!!a.multiple,r,!1)}}}var Ja=!1;function ps(t,r,a){if(Ja)return t(r,a);Ja=!0;try{var l=t(r);return l}finally{if(Ja=!1,(ms!==null||fi!==null)&&(Bc(),ms&&(r=ms,t=fi,fi=ms=null,ha(r),t)))for(r=0;r<t.length;r++)ha(t[r])}}function Zr(t,r){var a=t.stateNode;if(a===null)return null;var l=a[ie]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fa=!1;if(Br)try{var Jt={};Object.defineProperty(Jt,"passive",{get:function(){fa=!0}}),window.addEventListener("test",Jt,Jt),window.removeEventListener("test",Jt,Jt)}catch{fa=!1}var mi=null,hl=null,ma=null;function fl(){if(ma)return ma;var t,r=hl,a=r.length,l,d="value"in mi?mi.value:mi.textContent,f=d.length;for(t=0;t<a&&r[t]===d[t];t++);var b=a-t;for(l=1;l<=b&&r[a-l]===d[f-l];l++);return ma=d.slice(t,1<l?1-l:void 0)}function pa(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Vi(){return!0}function ei(){return!1}function $n(t){function r(a,l,d,f,b){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=f,this.target=b,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(a=t[A],this[A]=a?a(f):f[A]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Vi:ei,this.isPropagationStopped=ei,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Vi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Vi)},persist:function(){},isPersistent:Vi}),r}var Li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pi=$n(Li),gs=T({},Li,{view:0,detail:0}),ml=$n(gs),ys,Za,gi,eo=T({},gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==gi&&(gi&&t.type==="mousemove"?(ys=t.screenX-gi.screenX,Za=t.screenY-gi.screenY):Za=ys=0,gi=t),ys)},movementY:function(t){return"movementY"in t?t.movementY:Za}}),pl=$n(eo),ga=T({},eo,{dataTransfer:0}),Xu=$n(ga),$u=T({},gs,{relatedTarget:0}),ya=$n($u),gl=T({},Li,{animationName:0,elapsedTime:0,pseudoElement:0}),Wu=$n(gl),to=T({},Li,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ju=$n(to),Zu=T({},Li,{data:0}),yi=$n(Zu),ec={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rc(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=nc[t])?!!r[t]:!1}function vs(){return rc}var fr=T({},gs,{key:function(t){if(t.key){var r=ec[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=pa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vs,charCode:function(t){return t.type==="keypress"?pa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?pa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ic=$n(fr),sc=T({},eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ji=$n(sc),c=T({},gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vs}),y=$n(c),E=T({},Li,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=$n(E),H=T({},eo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$=$n(H),be=T({},Li,{newState:0,oldState:0}),ct=$n(be),Cn=[9,13,27,32],Bt=Br&&"CompositionEvent"in window,pn=null;Br&&"documentMode"in document&&(pn=document.documentMode);var qr=Br&&"TextEvent"in window&&!pn,vi=Br&&(!Bt||pn&&8<pn&&11>=pn),ti=" ",ni=!1;function va(t,r){switch(t){case"keyup":return Cn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function no(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ro=!1;function CS(t,r){switch(t){case"compositionend":return no(r);case"keypress":return r.which!==32?null:(ni=!0,ti);case"textInput":return t=r.data,t===ti&&ni?null:t;default:return null}}function IS(t,r){if(ro)return t==="compositionend"||!Bt&&va(t,r)?(t=fl(),ma=hl=mi=null,ro=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return vi&&r.locale!=="ko"?null:r.data;default:return null}}var xS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bg(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!xS[t.type]:r==="textarea"}function Eg(t,r,a,l){ms?fi?fi.push(l):fi=[l]:ms=l,r=Yc(r,"onChange"),0<r.length&&(a=new pi("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var yl=null,vl=null;function NS(t){r0(t,0)}function ac(t){var r=Qt(t);if(ca(r))return t}function Tg(t,r){if(t==="change")return r}var Sg=!1;if(Br){var Sh;if(Br){var wh="oninput"in document;if(!wh){var wg=document.createElement("div");wg.setAttribute("oninput","return;"),wh=typeof wg.oninput=="function"}Sh=wh}else Sh=!1;Sg=Sh&&(!document.documentMode||9<document.documentMode)}function Ag(){yl&&(yl.detachEvent("onpropertychange",Rg),vl=yl=null)}function Rg(t){if(t.propertyName==="value"&&ac(vl)){var r=[];Eg(r,vl,t,zr(t)),ps(NS,r)}}function kS(t,r,a){t==="focusin"?(Ag(),yl=r,vl=a,yl.attachEvent("onpropertychange",Rg)):t==="focusout"&&Ag()}function DS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ac(vl)}function MS(t,r){if(t==="click")return ac(r)}function OS(t,r){if(t==="input"||t==="change")return ac(r)}function VS(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Nr=typeof Object.is=="function"?Object.is:VS;function _l(t,r){if(Nr(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!je.call(r,d)||!Nr(t[d],r[d]))return!1}return!0}function Cg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ig(t,r){var a=Cg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Cg(a)}}function xg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?xg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Ng(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=hi(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=hi(t.document)}return r}function Ah(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var LS=Br&&"documentMode"in document&&11>=document.documentMode,io=null,Rh=null,bl=null,Ch=!1;function kg(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ch||io==null||io!==hi(l)||(l=io,"selectionStart"in l&&Ah(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),bl&&_l(bl,l)||(bl=l,l=Yc(Rh,"onSelect"),0<l.length&&(r=new pi("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=io)))}function _a(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var so={animationend:_a("Animation","AnimationEnd"),animationiteration:_a("Animation","AnimationIteration"),animationstart:_a("Animation","AnimationStart"),transitionrun:_a("Transition","TransitionRun"),transitionstart:_a("Transition","TransitionStart"),transitioncancel:_a("Transition","TransitionCancel"),transitionend:_a("Transition","TransitionEnd")},Ih={},Dg={};Br&&(Dg=document.createElement("div").style,"AnimationEvent"in window||(delete so.animationend.animation,delete so.animationiteration.animation,delete so.animationstart.animation),"TransitionEvent"in window||delete so.transitionend.transition);function ba(t){if(Ih[t])return Ih[t];if(!so[t])return t;var r=so[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Dg)return Ih[t]=r[a];return t}var Mg=ba("animationend"),Og=ba("animationiteration"),Vg=ba("animationstart"),jS=ba("transitionrun"),PS=ba("transitionstart"),US=ba("transitioncancel"),Lg=ba("transitionend"),jg=new Map,xh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xh.push("scrollEnd");function ri(t,r){jg.set(t,r),Ur(r,[t])}var oc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Fr=[],ao=0,Nh=0;function lc(){for(var t=ao,r=Nh=ao=0;r<t;){var a=Fr[r];Fr[r++]=null;var l=Fr[r];Fr[r++]=null;var d=Fr[r];Fr[r++]=null;var f=Fr[r];if(Fr[r++]=null,l!==null&&d!==null){var b=l.pending;b===null?d.next=d:(d.next=b.next,b.next=d),l.pending=d}f!==0&&Pg(a,d,f)}}function uc(t,r,a,l){Fr[ao++]=t,Fr[ao++]=r,Fr[ao++]=a,Fr[ao++]=l,Nh|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function kh(t,r,a,l){return uc(t,r,a,l),cc(t)}function Ea(t,r){return uc(t,null,null,r),cc(t)}function Pg(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var d=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(d=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,d&&r!==null&&(d=31-xt(a),t=f.hiddenUpdates,l=t[d],l===null?t[d]=[r]:l.push(r),r.lane=a|536870912),f):null}function cc(t){if(50<ql)throw ql=0,Bf=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var oo={};function zS(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kr(t,r,a,l){return new zS(t,r,a,l)}function Dh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Pi(t,r){var a=t.alternate;return a===null?(a=kr(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Ug(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function dc(t,r,a,l,d,f){var b=0;if(l=t,typeof t=="function")Dh(t)&&(b=1);else if(typeof t=="string")b=G1(t,a,se.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case N:return t=kr(31,a,r,d),t.elementType=N,t.lanes=f,t;case F:return Ta(a.children,d,f,r);case U:b=8,d|=24;break;case ge:return t=kr(12,a,r,d|2),t.elementType=ge,t.lanes=f,t;case He:return t=kr(13,a,r,d),t.elementType=He,t.lanes=f,t;case Me:return t=kr(19,a,r,d),t.elementType=Me,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case re:b=10;break e;case he:b=9;break e;case Ee:b=11;break e;case k:b=14;break e;case C:b=16,l=null;break e}b=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=kr(b,a,r,d),r.elementType=t,r.type=l,r.lanes=f,r}function Ta(t,r,a,l){return t=kr(7,t,l,r),t.lanes=a,t}function Mh(t,r,a){return t=kr(6,t,null,r),t.lanes=a,t}function zg(t){var r=kr(18,null,null,0);return r.stateNode=t,r}function Oh(t,r,a){return r=kr(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Bg=new WeakMap;function Hr(t,r){if(typeof t=="object"&&t!==null){var a=Bg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:Oe(r)},Bg.set(t,r),r)}return{value:t,source:r,stack:Oe(r)}}var lo=[],uo=0,hc=null,El=0,Gr=[],Kr=0,_s=null,_i=1,bi="";function Ui(t,r){lo[uo++]=El,lo[uo++]=hc,hc=t,El=r}function qg(t,r,a){Gr[Kr++]=_i,Gr[Kr++]=bi,Gr[Kr++]=_s,_s=t;var l=_i;t=bi;var d=32-xt(l)-1;l&=~(1<<d),a+=1;var f=32-xt(r)+d;if(30<f){var b=d-d%5;f=(l&(1<<b)-1).toString(32),l>>=b,d-=b,_i=1<<32-xt(r)+d|a<<d|l,bi=f+t}else _i=1<<f|a<<d|l,bi=t}function Vh(t){t.return!==null&&(Ui(t,1),qg(t,1,0))}function Lh(t){for(;t===hc;)hc=lo[--uo],lo[uo]=null,El=lo[--uo],lo[uo]=null;for(;t===_s;)_s=Gr[--Kr],Gr[Kr]=null,bi=Gr[--Kr],Gr[Kr]=null,_i=Gr[--Kr],Gr[Kr]=null}function Fg(t,r){Gr[Kr++]=_i,Gr[Kr++]=bi,Gr[Kr++]=_s,_i=r.id,bi=r.overflow,_s=t}var Wn=null,dn=null,Nt=!1,bs=null,Qr=!1,jh=Error(s(519));function Es(t){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Tl(Hr(r,t)),jh}function Hg(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[I]=t,r[ie]=l,a){case"dialog":bt("cancel",r),bt("close",r);break;case"iframe":case"object":case"embed":bt("load",r);break;case"video":case"audio":for(a=0;a<Hl.length;a++)bt(Hl[a],r);break;case"source":bt("error",r);break;case"img":case"image":case"link":bt("error",r),bt("load",r);break;case"details":bt("toggle",r);break;case"input":bt("invalid",r),Gu(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":bt("invalid",r);break;case"textarea":bt("invalid",r),hs(r,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||o0(r.textContent,a)?(l.popover!=null&&(bt("beforetoggle",r),bt("toggle",r)),l.onScroll!=null&&bt("scroll",r),l.onScrollEnd!=null&&bt("scrollend",r),l.onClick!=null&&(r.onclick=Jr),r=!0):r=!1,r||Es(t,!0)}function Gg(t){for(Wn=t.return;Wn;)switch(Wn.tag){case 5:case 31:case 13:Qr=!1;return;case 27:case 3:Qr=!0;return;default:Wn=Wn.return}}function co(t){if(t!==Wn)return!1;if(!Nt)return Gg(t),Nt=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||nm(t.type,t.memoizedProps)),a=!a),a&&dn&&Es(t),Gg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));dn=g0(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));dn=g0(t)}else r===27?(r=dn,Vs(t.type)?(t=om,om=null,dn=t):dn=r):dn=Wn?Xr(t.stateNode.nextSibling):null;return!0}function Sa(){dn=Wn=null,Nt=!1}function Ph(){var t=bs;return t!==null&&(Tr===null?Tr=t:Tr.push.apply(Tr,t),bs=null),t}function Tl(t){bs===null?bs=[t]:bs.push(t)}var Uh=O(null),wa=null,zi=null;function Ts(t,r,a){ee(Uh,r._currentValue),r._currentValue=a}function Bi(t){t._currentValue=Uh.current,q(Uh)}function zh(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function Bh(t,r,a,l){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var f=d.dependencies;if(f!==null){var b=d.child;f=f.firstContext;e:for(;f!==null;){var A=f;f=d;for(var M=0;M<r.length;M++)if(A.context===r[M]){f.lanes|=a,A=f.alternate,A!==null&&(A.lanes|=a),zh(f.return,a,t),l||(b=null);break e}f=A.next}}else if(d.tag===18){if(b=d.return,b===null)throw Error(s(341));b.lanes|=a,f=b.alternate,f!==null&&(f.lanes|=a),zh(b,a,t),b=null}else b=d.child;if(b!==null)b.return=d;else for(b=d;b!==null;){if(b===t){b=null;break}if(d=b.sibling,d!==null){d.return=b.return,b=d;break}b=b.return}d=b}}function ho(t,r,a,l){t=null;for(var d=r,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var b=d.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var A=d.type;Nr(d.pendingProps.value,b.value)||(t!==null?t.push(A):t=[A])}}else if(d===De.current){if(b=d.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(Xl):t=[Xl])}d=d.return}t!==null&&Bh(r,t,a,l),r.flags|=262144}function fc(t){for(t=t.firstContext;t!==null;){if(!Nr(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Aa(t){wa=t,zi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Jn(t){return Kg(wa,t)}function mc(t,r){return wa===null&&Aa(t),Kg(t,r)}function Kg(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},zi===null){if(t===null)throw Error(s(308));zi=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else zi=zi.next=r;return a}var BS=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},qS=i.unstable_scheduleCallback,FS=i.unstable_NormalPriority,On={$$typeof:re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qh(){return{controller:new BS,data:new Map,refCount:0}}function Sl(t){t.refCount--,t.refCount===0&&qS(FS,function(){t.controller.abort()})}var wl=null,Fh=0,fo=0,mo=null;function HS(t,r){if(wl===null){var a=wl=[];Fh=0,fo=Qf(),mo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Fh++,r.then(Qg,Qg),r}function Qg(){if(--Fh===0&&wl!==null){mo!==null&&(mo.status="fulfilled");var t=wl;wl=null,fo=0,mo=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function GS(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var d=0;d<a.length;d++)(0,a[d])(r)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var Yg=Y.S;Y.S=function(t,r){kv=Tt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&HS(t,r),Yg!==null&&Yg(t,r)};var Ra=O(null);function Hh(){var t=Ra.current;return t!==null?t:rn.pooledCache}function pc(t,r){r===null?ee(Ra,Ra.current):ee(Ra,r.pool)}function Xg(){var t=Hh();return t===null?null:{parent:On._currentValue,pool:t}}var po=Error(s(460)),Gh=Error(s(474)),gc=Error(s(542)),yc={then:function(){}};function $g(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Wg(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(Jr,Jr),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Zg(t),t;default:if(typeof r.status=="string")r.then(Jr,Jr);else{if(t=rn,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var d=r;d.status="fulfilled",d.value=l}},function(l){if(r.status==="pending"){var d=r;d.status="rejected",d.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Zg(t),t}throw Ia=r,po}}function Ca(t){try{var r=t._init;return r(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ia=a,po):a}}var Ia=null;function Jg(){if(Ia===null)throw Error(s(459));var t=Ia;return Ia=null,t}function Zg(t){if(t===po||t===gc)throw Error(s(483))}var go=null,Al=0;function vc(t){var r=Al;return Al+=1,go===null&&(go=[]),Wg(go,t,r)}function Rl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function _c(t,r){throw r.$$typeof===S?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function ey(t){function r(z,j){if(t){var G=z.deletions;G===null?(z.deletions=[j],z.flags|=16):G.push(j)}}function a(z,j){if(!t)return null;for(;j!==null;)r(z,j),j=j.sibling;return null}function l(z){for(var j=new Map;z!==null;)z.key!==null?j.set(z.key,z):j.set(z.index,z),z=z.sibling;return j}function d(z,j){return z=Pi(z,j),z.index=0,z.sibling=null,z}function f(z,j,G){return z.index=G,t?(G=z.alternate,G!==null?(G=G.index,G<j?(z.flags|=67108866,j):G):(z.flags|=67108866,j)):(z.flags|=1048576,j)}function b(z){return t&&z.alternate===null&&(z.flags|=67108866),z}function A(z,j,G,ne){return j===null||j.tag!==6?(j=Mh(G,z.mode,ne),j.return=z,j):(j=d(j,G),j.return=z,j)}function M(z,j,G,ne){var Ye=G.type;return Ye===F?Z(z,j,G.props.children,ne,G.key):j!==null&&(j.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===C&&Ca(Ye)===j.type)?(j=d(j,G.props),Rl(j,G),j.return=z,j):(j=dc(G.type,G.key,G.props,null,z.mode,ne),Rl(j,G),j.return=z,j)}function K(z,j,G,ne){return j===null||j.tag!==4||j.stateNode.containerInfo!==G.containerInfo||j.stateNode.implementation!==G.implementation?(j=Oh(G,z.mode,ne),j.return=z,j):(j=d(j,G.children||[]),j.return=z,j)}function Z(z,j,G,ne,Ye){return j===null||j.tag!==7?(j=Ta(G,z.mode,ne,Ye),j.return=z,j):(j=d(j,G),j.return=z,j)}function ae(z,j,G){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Mh(""+j,z.mode,G),j.return=z,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case w:return G=dc(j.type,j.key,j.props,null,z.mode,G),Rl(G,j),G.return=z,G;case L:return j=Oh(j,z.mode,G),j.return=z,j;case C:return j=Ca(j),ae(z,j,G)}if(rt(j)||P(j))return j=Ta(j,z.mode,G,null),j.return=z,j;if(typeof j.then=="function")return ae(z,vc(j),G);if(j.$$typeof===re)return ae(z,mc(z,j),G);_c(z,j)}return null}function X(z,j,G,ne){var Ye=j!==null?j.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Ye!==null?null:A(z,j,""+G,ne);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case w:return G.key===Ye?M(z,j,G,ne):null;case L:return G.key===Ye?K(z,j,G,ne):null;case C:return G=Ca(G),X(z,j,G,ne)}if(rt(G)||P(G))return Ye!==null?null:Z(z,j,G,ne,null);if(typeof G.then=="function")return X(z,j,vc(G),ne);if(G.$$typeof===re)return X(z,j,mc(z,G),ne);_c(z,G)}return null}function W(z,j,G,ne,Ye){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return z=z.get(G)||null,A(j,z,""+ne,Ye);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case w:return z=z.get(ne.key===null?G:ne.key)||null,M(j,z,ne,Ye);case L:return z=z.get(ne.key===null?G:ne.key)||null,K(j,z,ne,Ye);case C:return ne=Ca(ne),W(z,j,G,ne,Ye)}if(rt(ne)||P(ne))return z=z.get(G)||null,Z(j,z,ne,Ye,null);if(typeof ne.then=="function")return W(z,j,G,vc(ne),Ye);if(ne.$$typeof===re)return W(z,j,G,mc(j,ne),Ye);_c(j,ne)}return null}function Pe(z,j,G,ne){for(var Ye=null,Lt=null,ze=j,ft=j=0,At=null;ze!==null&&ft<G.length;ft++){ze.index>ft?(At=ze,ze=null):At=ze.sibling;var jt=X(z,ze,G[ft],ne);if(jt===null){ze===null&&(ze=At);break}t&&ze&&jt.alternate===null&&r(z,ze),j=f(jt,j,ft),Lt===null?Ye=jt:Lt.sibling=jt,Lt=jt,ze=At}if(ft===G.length)return a(z,ze),Nt&&Ui(z,ft),Ye;if(ze===null){for(;ft<G.length;ft++)ze=ae(z,G[ft],ne),ze!==null&&(j=f(ze,j,ft),Lt===null?Ye=ze:Lt.sibling=ze,Lt=ze);return Nt&&Ui(z,ft),Ye}for(ze=l(ze);ft<G.length;ft++)At=W(ze,z,ft,G[ft],ne),At!==null&&(t&&At.alternate!==null&&ze.delete(At.key===null?ft:At.key),j=f(At,j,ft),Lt===null?Ye=At:Lt.sibling=At,Lt=At);return t&&ze.forEach(function(zs){return r(z,zs)}),Nt&&Ui(z,ft),Ye}function Ze(z,j,G,ne){if(G==null)throw Error(s(151));for(var Ye=null,Lt=null,ze=j,ft=j=0,At=null,jt=G.next();ze!==null&&!jt.done;ft++,jt=G.next()){ze.index>ft?(At=ze,ze=null):At=ze.sibling;var zs=X(z,ze,jt.value,ne);if(zs===null){ze===null&&(ze=At);break}t&&ze&&zs.alternate===null&&r(z,ze),j=f(zs,j,ft),Lt===null?Ye=zs:Lt.sibling=zs,Lt=zs,ze=At}if(jt.done)return a(z,ze),Nt&&Ui(z,ft),Ye;if(ze===null){for(;!jt.done;ft++,jt=G.next())jt=ae(z,jt.value,ne),jt!==null&&(j=f(jt,j,ft),Lt===null?Ye=jt:Lt.sibling=jt,Lt=jt);return Nt&&Ui(z,ft),Ye}for(ze=l(ze);!jt.done;ft++,jt=G.next())jt=W(ze,z,ft,jt.value,ne),jt!==null&&(t&&jt.alternate!==null&&ze.delete(jt.key===null?ft:jt.key),j=f(jt,j,ft),Lt===null?Ye=jt:Lt.sibling=jt,Lt=jt);return t&&ze.forEach(function(nw){return r(z,nw)}),Nt&&Ui(z,ft),Ye}function tn(z,j,G,ne){if(typeof G=="object"&&G!==null&&G.type===F&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case w:e:{for(var Ye=G.key;j!==null;){if(j.key===Ye){if(Ye=G.type,Ye===F){if(j.tag===7){a(z,j.sibling),ne=d(j,G.props.children),ne.return=z,z=ne;break e}}else if(j.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===C&&Ca(Ye)===j.type){a(z,j.sibling),ne=d(j,G.props),Rl(ne,G),ne.return=z,z=ne;break e}a(z,j);break}else r(z,j);j=j.sibling}G.type===F?(ne=Ta(G.props.children,z.mode,ne,G.key),ne.return=z,z=ne):(ne=dc(G.type,G.key,G.props,null,z.mode,ne),Rl(ne,G),ne.return=z,z=ne)}return b(z);case L:e:{for(Ye=G.key;j!==null;){if(j.key===Ye)if(j.tag===4&&j.stateNode.containerInfo===G.containerInfo&&j.stateNode.implementation===G.implementation){a(z,j.sibling),ne=d(j,G.children||[]),ne.return=z,z=ne;break e}else{a(z,j);break}else r(z,j);j=j.sibling}ne=Oh(G,z.mode,ne),ne.return=z,z=ne}return b(z);case C:return G=Ca(G),tn(z,j,G,ne)}if(rt(G))return Pe(z,j,G,ne);if(P(G)){if(Ye=P(G),typeof Ye!="function")throw Error(s(150));return G=Ye.call(G),Ze(z,j,G,ne)}if(typeof G.then=="function")return tn(z,j,vc(G),ne);if(G.$$typeof===re)return tn(z,j,mc(z,G),ne);_c(z,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,j!==null&&j.tag===6?(a(z,j.sibling),ne=d(j,G),ne.return=z,z=ne):(a(z,j),ne=Mh(G,z.mode,ne),ne.return=z,z=ne),b(z)):a(z,j)}return function(z,j,G,ne){try{Al=0;var Ye=tn(z,j,G,ne);return go=null,Ye}catch(ze){if(ze===po||ze===gc)throw ze;var Lt=kr(29,ze,null,z.mode);return Lt.lanes=ne,Lt.return=z,Lt}finally{}}}var xa=ey(!0),ty=ey(!1),Ss=!1;function Kh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qh(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ws(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function As(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(qt&2)!==0){var d=l.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),l.pending=r,r=cc(t),Pg(t,null,a),r}return uc(t,l,r,a),cc(t)}function Cl(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Je(t,a)}}function Yh(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?d=f=b:f=f.next=b,a=a.next}while(a!==null);f===null?d=f=r:f=f.next=r}else d=f=r;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var Xh=!1;function Il(){if(Xh){var t=mo;if(t!==null)throw t}}function xl(t,r,a,l){Xh=!1;var d=t.updateQueue;Ss=!1;var f=d.firstBaseUpdate,b=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var M=A,K=M.next;M.next=null,b===null?f=K:b.next=K,b=M;var Z=t.alternate;Z!==null&&(Z=Z.updateQueue,A=Z.lastBaseUpdate,A!==b&&(A===null?Z.firstBaseUpdate=K:A.next=K,Z.lastBaseUpdate=M))}if(f!==null){var ae=d.baseState;b=0,Z=K=M=null,A=f;do{var X=A.lane&-536870913,W=X!==A.lane;if(W?(wt&X)===X:(l&X)===X){X!==0&&X===fo&&(Xh=!0),Z!==null&&(Z=Z.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Pe=t,Ze=A;X=r;var tn=a;switch(Ze.tag){case 1:if(Pe=Ze.payload,typeof Pe=="function"){ae=Pe.call(tn,ae,X);break e}ae=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Ze.payload,X=typeof Pe=="function"?Pe.call(tn,ae,X):Pe,X==null)break e;ae=T({},ae,X);break e;case 2:Ss=!0}}X=A.callback,X!==null&&(t.flags|=64,W&&(t.flags|=8192),W=d.callbacks,W===null?d.callbacks=[X]:W.push(X))}else W={lane:X,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Z===null?(K=Z=W,M=ae):Z=Z.next=W,b|=X;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;W=A,A=W.next,W.next=null,d.lastBaseUpdate=W,d.shared.pending=null}}while(!0);Z===null&&(M=ae),d.baseState=M,d.firstBaseUpdate=K,d.lastBaseUpdate=Z,f===null&&(d.shared.lanes=0),Ns|=b,t.lanes=b,t.memoizedState=ae}}function ny(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function ry(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)ny(a[t],r)}var yo=O(null),bc=O(0);function iy(t,r){t=$i,ee(bc,t),ee(yo,r),$i=t|r.baseLanes}function $h(){ee(bc,$i),ee(yo,yo.current)}function Wh(){$i=bc.current,q(yo),q(bc)}var Dr=O(null),Yr=null;function Rs(t){var r=t.alternate;ee(In,In.current&1),ee(Dr,t),Yr===null&&(r===null||yo.current!==null||r.memoizedState!==null)&&(Yr=t)}function Jh(t){ee(In,In.current),ee(Dr,t),Yr===null&&(Yr=t)}function sy(t){t.tag===22?(ee(In,In.current),ee(Dr,t),Yr===null&&(Yr=t)):Cs()}function Cs(){ee(In,In.current),ee(Dr,Dr.current)}function Mr(t){q(Dr),Yr===t&&(Yr=null),q(In)}var In=O(0);function Ec(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||sm(a)||am(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var qi=0,dt=null,Zt=null,Vn=null,Tc=!1,vo=!1,Na=!1,Sc=0,Nl=0,_o=null,KS=0;function _n(){throw Error(s(321))}function Zh(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!Nr(t[a],r[a]))return!1;return!0}function ef(t,r,a,l,d,f){return qi=f,dt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Y.H=t===null||t.memoizedState===null?qy:gf,Na=!1,f=a(l,d),Na=!1,vo&&(f=oy(r,a,l,d)),ay(t),f}function ay(t){Y.H=Ml;var r=Zt!==null&&Zt.next!==null;if(qi=0,Vn=Zt=dt=null,Tc=!1,Nl=0,_o=null,r)throw Error(s(300));t===null||Ln||(t=t.dependencies,t!==null&&fc(t)&&(Ln=!0))}function oy(t,r,a,l){dt=t;var d=0;do{if(vo&&(_o=null),Nl=0,vo=!1,25<=d)throw Error(s(301));if(d+=1,Vn=Zt=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}Y.H=Fy,f=r(a,l)}while(vo);return f}function QS(){var t=Y.H,r=t.useState()[0];return r=typeof r.then=="function"?kl(r):r,t=t.useState()[0],(Zt!==null?Zt.memoizedState:null)!==t&&(dt.flags|=1024),r}function tf(){var t=Sc!==0;return Sc=0,t}function nf(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function rf(t){if(Tc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Tc=!1}qi=0,Vn=Zt=dt=null,vo=!1,Nl=Sc=0,_o=null}function mr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vn===null?dt.memoizedState=Vn=t:Vn=Vn.next=t,Vn}function xn(){if(Zt===null){var t=dt.alternate;t=t!==null?t.memoizedState:null}else t=Zt.next;var r=Vn===null?dt.memoizedState:Vn.next;if(r!==null)Vn=r,Zt=t;else{if(t===null)throw dt.alternate===null?Error(s(467)):Error(s(310));Zt=t,t={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},Vn===null?dt.memoizedState=Vn=t:Vn=Vn.next=t}return Vn}function wc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kl(t){var r=Nl;return Nl+=1,_o===null&&(_o=[]),t=Wg(_o,t,r),r=dt,(Vn===null?r.memoizedState:Vn.next)===null&&(r=r.alternate,Y.H=r===null||r.memoizedState===null?qy:gf),t}function Ac(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return kl(t);if(t.$$typeof===re)return Jn(t)}throw Error(s(438,String(t)))}function sf(t){var r=null,a=dt.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=dt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(d){return d.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=wc(),dt.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=V;return r.index++,a}function Fi(t,r){return typeof r=="function"?r(t):r}function Rc(t){var r=xn();return af(r,Zt,t)}function af(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var d=t.baseQueue,f=l.pending;if(f!==null){if(d!==null){var b=d.next;d.next=f.next,f.next=b}r.baseQueue=d=f,l.pending=null}if(f=t.baseState,d===null)t.memoizedState=f;else{r=d.next;var A=b=null,M=null,K=r,Z=!1;do{var ae=K.lane&-536870913;if(ae!==K.lane?(wt&ae)===ae:(qi&ae)===ae){var X=K.revertLane;if(X===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ae===fo&&(Z=!0);else if((qi&X)===X){K=K.next,X===fo&&(Z=!0);continue}else ae={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},M===null?(A=M=ae,b=f):M=M.next=ae,dt.lanes|=X,Ns|=X;ae=K.action,Na&&a(f,ae),f=K.hasEagerState?K.eagerState:a(f,ae)}else X={lane:ae,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},M===null?(A=M=X,b=f):M=M.next=X,dt.lanes|=ae,Ns|=ae;K=K.next}while(K!==null&&K!==r);if(M===null?b=f:M.next=A,!Nr(f,t.memoizedState)&&(Ln=!0,Z&&(a=mo,a!==null)))throw a;t.memoizedState=f,t.baseState=b,t.baseQueue=M,l.lastRenderedState=f}return d===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function of(t){var r=xn(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,d=a.pending,f=r.memoizedState;if(d!==null){a.pending=null;var b=d=d.next;do f=t(f,b.action),b=b.next;while(b!==d);Nr(f,r.memoizedState)||(Ln=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),a.lastRenderedState=f}return[f,l]}function ly(t,r,a){var l=dt,d=xn(),f=Nt;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=r();var b=!Nr((Zt||d).memoizedState,a);if(b&&(d.memoizedState=a,Ln=!0),d=d.queue,cf(dy.bind(null,l,d,t),[t]),d.getSnapshot!==r||b||Vn!==null&&Vn.memoizedState.tag&1){if(l.flags|=2048,bo(9,{destroy:void 0},cy.bind(null,l,d,a,r),null),rn===null)throw Error(s(349));f||(qi&127)!==0||uy(l,r,a)}return a}function uy(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=dt.updateQueue,r===null?(r=wc(),dt.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function cy(t,r,a,l){r.value=a,r.getSnapshot=l,hy(r)&&fy(t)}function dy(t,r,a){return a(function(){hy(r)&&fy(t)})}function hy(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!Nr(t,a)}catch{return!0}}function fy(t){var r=Ea(t,2);r!==null&&Sr(r,t,2)}function lf(t){var r=mr();if(typeof t=="function"){var a=t;if(t=a(),Na){Ut(!0);try{a()}finally{Ut(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:t},r}function my(t,r,a,l){return t.baseState=a,af(t,Zt,typeof l=="function"?l:Fi)}function YS(t,r,a,l,d){if(xc(t))throw Error(s(485));if(t=r.action,t!==null){var f={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){f.listeners.push(b)}};Y.T!==null?a(!0):f.isTransition=!1,l(f),a=r.pending,a===null?(f.next=r.pending=f,py(r,f)):(f.next=a.next,r.pending=a.next=f)}}function py(t,r){var a=r.action,l=r.payload,d=t.state;if(r.isTransition){var f=Y.T,b={};Y.T=b;try{var A=a(d,l),M=Y.S;M!==null&&M(b,A),gy(t,r,A)}catch(K){uf(t,r,K)}finally{f!==null&&b.types!==null&&(f.types=b.types),Y.T=f}}else try{f=a(d,l),gy(t,r,f)}catch(K){uf(t,r,K)}}function gy(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){yy(t,r,l)},function(l){return uf(t,r,l)}):yy(t,r,a)}function yy(t,r,a){r.status="fulfilled",r.value=a,vy(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,py(t,a)))}function uf(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,vy(r),r=r.next;while(r!==l)}t.action=null}function vy(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function _y(t,r){return r}function by(t,r){if(Nt){var a=rn.formState;if(a!==null){e:{var l=dt;if(Nt){if(dn){t:{for(var d=dn,f=Qr;d.nodeType!==8;){if(!f){d=null;break t}if(d=Xr(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){dn=Xr(d.nextSibling),l=d.data==="F!";break e}}Es(l)}l=!1}l&&(r=a[0])}}return a=mr(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_y,lastRenderedState:r},a.queue=l,a=Uy.bind(null,dt,l),l.dispatch=a,l=lf(!1),f=pf.bind(null,dt,!1,l.queue),l=mr(),d={state:r,dispatch:null,action:t,pending:null},l.queue=d,a=YS.bind(null,dt,d,f,a),d.dispatch=a,l.memoizedState=t,[r,a,!1]}function Ey(t){var r=xn();return Ty(r,Zt,t)}function Ty(t,r,a){if(r=af(t,r,_y)[0],t=Rc(Fi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=kl(r)}catch(b){throw b===po?gc:b}else l=r;r=xn();var d=r.queue,f=d.dispatch;return a!==r.memoizedState&&(dt.flags|=2048,bo(9,{destroy:void 0},XS.bind(null,d,a),null)),[l,f,t]}function XS(t,r){t.action=r}function Sy(t){var r=xn(),a=Zt;if(a!==null)return Ty(r,a,t);xn(),r=r.memoizedState,a=xn();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function bo(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=dt.updateQueue,r===null&&(r=wc(),dt.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function wy(){return xn().memoizedState}function Cc(t,r,a,l){var d=mr();dt.flags|=t,d.memoizedState=bo(1|r,{destroy:void 0},a,l===void 0?null:l)}function Ic(t,r,a,l){var d=xn();l=l===void 0?null:l;var f=d.memoizedState.inst;Zt!==null&&l!==null&&Zh(l,Zt.memoizedState.deps)?d.memoizedState=bo(r,f,a,l):(dt.flags|=t,d.memoizedState=bo(1|r,f,a,l))}function Ay(t,r){Cc(8390656,8,t,r)}function cf(t,r){Ic(2048,8,t,r)}function $S(t){dt.flags|=4;var r=dt.updateQueue;if(r===null)r=wc(),dt.updateQueue=r,r.events=[t];else{var a=r.events;a===null?r.events=[t]:a.push(t)}}function Ry(t){var r=xn().memoizedState;return $S({ref:r,nextImpl:t}),function(){if((qt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function Cy(t,r){return Ic(4,2,t,r)}function Iy(t,r){return Ic(4,4,t,r)}function xy(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Ny(t,r,a){a=a!=null?a.concat([t]):null,Ic(4,4,xy.bind(null,r,t),a)}function df(){}function ky(t,r){var a=xn();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Zh(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function Dy(t,r){var a=xn();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Zh(r,l[1]))return l[0];if(l=t(),Na){Ut(!0);try{t()}finally{Ut(!1)}}return a.memoizedState=[l,r],l}function hf(t,r,a){return a===void 0||(qi&1073741824)!==0&&(wt&261930)===0?t.memoizedState=r:(t.memoizedState=a,t=Mv(),dt.lanes|=t,Ns|=t,a)}function My(t,r,a,l){return Nr(a,r)?a:yo.current!==null?(t=hf(t,a,l),Nr(t,r)||(Ln=!0),t):(qi&42)===0||(qi&1073741824)!==0&&(wt&261930)===0?(Ln=!0,t.memoizedState=a):(t=Mv(),dt.lanes|=t,Ns|=t,r)}function Oy(t,r,a,l,d){var f=ce.p;ce.p=f!==0&&8>f?f:8;var b=Y.T,A={};Y.T=A,pf(t,!1,r,a);try{var M=d(),K=Y.S;if(K!==null&&K(A,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var Z=GS(M,l);Dl(t,r,Z,Lr(t))}else Dl(t,r,l,Lr(t))}catch(ae){Dl(t,r,{then:function(){},status:"rejected",reason:ae},Lr())}finally{ce.p=f,b!==null&&A.types!==null&&(b.types=A.types),Y.T=b}}function WS(){}function ff(t,r,a,l){if(t.tag!==5)throw Error(s(476));var d=Vy(t).queue;Oy(t,d,r,ve,a===null?WS:function(){return Ly(t),a(l)})}function Vy(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:ve},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Ly(t){var r=Vy(t);r.next===null&&(r=t.alternate.memoizedState),Dl(t,r.next.queue,{},Lr())}function mf(){return Jn(Xl)}function jy(){return xn().memoizedState}function Py(){return xn().memoizedState}function JS(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=Lr();t=ws(a);var l=As(r,t,a);l!==null&&(Sr(l,r,a),Cl(l,r,a)),r={cache:qh()},t.payload=r;return}r=r.return}}function ZS(t,r,a){var l=Lr();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},xc(t)?zy(r,a):(a=kh(t,r,a,l),a!==null&&(Sr(a,t,l),By(a,r,l)))}function Uy(t,r,a){var l=Lr();Dl(t,r,a,l)}function Dl(t,r,a,l){var d={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(xc(t))zy(r,d);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var b=r.lastRenderedState,A=f(b,a);if(d.hasEagerState=!0,d.eagerState=A,Nr(A,b))return uc(t,r,d,0),rn===null&&lc(),!1}catch{}finally{}if(a=kh(t,r,d,l),a!==null)return Sr(a,t,l),By(a,r,l),!0}return!1}function pf(t,r,a,l){if(l={lane:2,revertLane:Qf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},xc(t)){if(r)throw Error(s(479))}else r=kh(t,a,l,2),r!==null&&Sr(r,t,2)}function xc(t){var r=t.alternate;return t===dt||r!==null&&r===dt}function zy(t,r){vo=Tc=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function By(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Je(t,a)}}var Ml={readContext:Jn,use:Ac,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useLayoutEffect:_n,useInsertionEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useSyncExternalStore:_n,useId:_n,useHostTransitionStatus:_n,useFormState:_n,useActionState:_n,useOptimistic:_n,useMemoCache:_n,useCacheRefresh:_n};Ml.useEffectEvent=_n;var qy={readContext:Jn,use:Ac,useCallback:function(t,r){return mr().memoizedState=[t,r===void 0?null:r],t},useContext:Jn,useEffect:Ay,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Cc(4194308,4,xy.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Cc(4194308,4,t,r)},useInsertionEffect:function(t,r){Cc(4,2,t,r)},useMemo:function(t,r){var a=mr();r=r===void 0?null:r;var l=t();if(Na){Ut(!0);try{t()}finally{Ut(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=mr();if(a!==void 0){var d=a(r);if(Na){Ut(!0);try{a(r)}finally{Ut(!1)}}}else d=r;return l.memoizedState=l.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},l.queue=t,t=t.dispatch=ZS.bind(null,dt,t),[l.memoizedState,t]},useRef:function(t){var r=mr();return t={current:t},r.memoizedState=t},useState:function(t){t=lf(t);var r=t.queue,a=Uy.bind(null,dt,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:df,useDeferredValue:function(t,r){var a=mr();return hf(a,t,r)},useTransition:function(){var t=lf(!1);return t=Oy.bind(null,dt,t.queue,!0,!1),mr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=dt,d=mr();if(Nt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),rn===null)throw Error(s(349));(wt&127)!==0||uy(l,r,a)}d.memoizedState=a;var f={value:a,getSnapshot:r};return d.queue=f,Ay(dy.bind(null,l,f,t),[t]),l.flags|=2048,bo(9,{destroy:void 0},cy.bind(null,l,f,a,r),null),a},useId:function(){var t=mr(),r=rn.identifierPrefix;if(Nt){var a=bi,l=_i;a=(l&~(1<<32-xt(l)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Sc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=KS++,r="_"+r+"r_"+a.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:mf,useFormState:by,useActionState:by,useOptimistic:function(t){var r=mr();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=pf.bind(null,dt,!0,a),a.dispatch=r,[t,r]},useMemoCache:sf,useCacheRefresh:function(){return mr().memoizedState=JS.bind(null,dt)},useEffectEvent:function(t){var r=mr(),a={impl:t};return r.memoizedState=a,function(){if((qt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},gf={readContext:Jn,use:Ac,useCallback:ky,useContext:Jn,useEffect:cf,useImperativeHandle:Ny,useInsertionEffect:Cy,useLayoutEffect:Iy,useMemo:Dy,useReducer:Rc,useRef:wy,useState:function(){return Rc(Fi)},useDebugValue:df,useDeferredValue:function(t,r){var a=xn();return My(a,Zt.memoizedState,t,r)},useTransition:function(){var t=Rc(Fi)[0],r=xn().memoizedState;return[typeof t=="boolean"?t:kl(t),r]},useSyncExternalStore:ly,useId:jy,useHostTransitionStatus:mf,useFormState:Ey,useActionState:Ey,useOptimistic:function(t,r){var a=xn();return my(a,Zt,t,r)},useMemoCache:sf,useCacheRefresh:Py};gf.useEffectEvent=Ry;var Fy={readContext:Jn,use:Ac,useCallback:ky,useContext:Jn,useEffect:cf,useImperativeHandle:Ny,useInsertionEffect:Cy,useLayoutEffect:Iy,useMemo:Dy,useReducer:of,useRef:wy,useState:function(){return of(Fi)},useDebugValue:df,useDeferredValue:function(t,r){var a=xn();return Zt===null?hf(a,t,r):My(a,Zt.memoizedState,t,r)},useTransition:function(){var t=of(Fi)[0],r=xn().memoizedState;return[typeof t=="boolean"?t:kl(t),r]},useSyncExternalStore:ly,useId:jy,useHostTransitionStatus:mf,useFormState:Sy,useActionState:Sy,useOptimistic:function(t,r){var a=xn();return Zt!==null?my(a,Zt,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:sf,useCacheRefresh:Py};Fy.useEffectEvent=Ry;function yf(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:T({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var vf={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=Lr(),d=ws(l);d.payload=r,a!=null&&(d.callback=a),r=As(t,d,l),r!==null&&(Sr(r,t,l),Cl(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=Lr(),d=ws(l);d.tag=1,d.payload=r,a!=null&&(d.callback=a),r=As(t,d,l),r!==null&&(Sr(r,t,l),Cl(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=Lr(),l=ws(a);l.tag=2,r!=null&&(l.callback=r),r=As(t,l,a),r!==null&&(Sr(r,t,a),Cl(r,t,a))}};function Hy(t,r,a,l,d,f,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,b):r.prototype&&r.prototype.isPureReactComponent?!_l(a,l)||!_l(d,f):!0}function Gy(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&vf.enqueueReplaceState(r,r.state,null)}function ka(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=T({},a));for(var d in t)a[d]===void 0&&(a[d]=t[d])}return a}function Ky(t){oc(t)}function Qy(t){console.error(t)}function Yy(t){oc(t)}function Nc(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Xy(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function _f(t,r,a){return a=ws(a),a.tag=3,a.payload={element:null},a.callback=function(){Nc(t,r)},a}function $y(t){return t=ws(t),t.tag=3,t}function Wy(t,r,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var f=l.value;t.payload=function(){return d(f)},t.callback=function(){Xy(r,a,l)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){Xy(r,a,l),typeof d!="function"&&(ks===null?ks=new Set([this]):ks.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function e1(t,r,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&ho(r,a,d,!0),a=Dr.current,a!==null){switch(a.tag){case 31:case 13:return Yr===null?qc():a.alternate===null&&bn===0&&(bn=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===yc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Hf(t,l,d)),!1;case 22:return a.flags|=65536,l===yc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Hf(t,l,d)),!1}throw Error(s(435,a.tag))}return Hf(t,l,d),qc(),!1}if(Nt)return r=Dr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=d,l!==jh&&(t=Error(s(422),{cause:l}),Tl(Hr(t,a)))):(l!==jh&&(r=Error(s(423),{cause:l}),Tl(Hr(r,a))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,l=Hr(l,a),d=_f(t.stateNode,l,d),Yh(t,d),bn!==4&&(bn=2)),!1;var f=Error(s(520),{cause:l});if(f=Hr(f,a),Bl===null?Bl=[f]:Bl.push(f),bn!==4&&(bn=2),r===null)return!0;l=Hr(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=d&-d,a.lanes|=t,t=_f(a.stateNode,l,t),Yh(a,t),!1;case 1:if(r=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(ks===null||!ks.has(f))))return a.flags|=65536,d&=-d,a.lanes|=d,d=$y(d),Wy(d,t,a,l),Yh(a,d),!1}a=a.return}while(a!==null);return!1}var bf=Error(s(461)),Ln=!1;function Zn(t,r,a,l){r.child=t===null?ty(r,null,a,l):xa(r,t.child,a,l)}function Jy(t,r,a,l,d){a=a.render;var f=r.ref;if("ref"in l){var b={};for(var A in l)A!=="ref"&&(b[A]=l[A])}else b=l;return Aa(r),l=ef(t,r,a,b,f,d),A=tf(),t!==null&&!Ln?(nf(t,r,d),Hi(t,r,d)):(Nt&&A&&Vh(r),r.flags|=1,Zn(t,r,l,d),r.child)}function Zy(t,r,a,l,d){if(t===null){var f=a.type;return typeof f=="function"&&!Dh(f)&&f.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=f,ev(t,r,f,l,d)):(t=dc(a.type,null,l,r,r.mode,d),t.ref=r.ref,t.return=r,r.child=t)}if(f=t.child,!If(t,d)){var b=f.memoizedProps;if(a=a.compare,a=a!==null?a:_l,a(b,l)&&t.ref===r.ref)return Hi(t,r,d)}return r.flags|=1,t=Pi(f,l),t.ref=r.ref,t.return=r,r.child=t}function ev(t,r,a,l,d){if(t!==null){var f=t.memoizedProps;if(_l(f,l)&&t.ref===r.ref)if(Ln=!1,r.pendingProps=l=f,If(t,d))(t.flags&131072)!==0&&(Ln=!0);else return r.lanes=t.lanes,Hi(t,r,d)}return Ef(t,r,a,l,d)}function tv(t,r,a,l){var d=l.children,f=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,t!==null){for(l=r.child=t.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~f}else l=0,r.child=null;return nv(t,r,f,a,l)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&pc(r,f!==null?f.cachePool:null),f!==null?iy(r,f):$h(),sy(r);else return l=r.lanes=536870912,nv(t,r,f!==null?f.baseLanes|a:a,a,l)}else f!==null?(pc(r,f.cachePool),iy(r,f),Cs(),r.memoizedState=null):(t!==null&&pc(r,null),$h(),Cs());return Zn(t,r,d,a),r.child}function Ol(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function nv(t,r,a,l,d){var f=Hh();return f=f===null?null:{parent:On._currentValue,pool:f},r.memoizedState={baseLanes:a,cachePool:f},t!==null&&pc(r,null),$h(),sy(r),t!==null&&ho(t,r,l,!0),r.childLanes=d,null}function kc(t,r){return r=Mc({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function rv(t,r,a){return xa(r,t.child,null,a),t=kc(r,r.pendingProps),t.flags|=2,Mr(r),r.memoizedState=null,t}function t1(t,r,a){var l=r.pendingProps,d=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(Nt){if(l.mode==="hidden")return t=kc(r,l),r.lanes=536870912,Ol(null,t);if(Jh(r),(t=dn)?(t=p0(t,Qr),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:_s!==null?{id:_i,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},a=zg(t),a.return=r,r.child=a,Wn=r,dn=null)):t=null,t===null)throw Es(r);return r.lanes=536870912,null}return kc(r,l)}var f=t.memoizedState;if(f!==null){var b=f.dehydrated;if(Jh(r),d)if(r.flags&256)r.flags&=-257,r=rv(t,r,a);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(s(558));else if(Ln||ho(t,r,a,!1),d=(a&t.childLanes)!==0,Ln||d){if(l=rn,l!==null&&(b=xe(l,a),b!==0&&b!==f.retryLane))throw f.retryLane=b,Ea(t,b),Sr(l,t,b),bf;qc(),r=rv(t,r,a)}else t=f.treeContext,dn=Xr(b.nextSibling),Wn=r,Nt=!0,bs=null,Qr=!1,t!==null&&Fg(r,t),r=kc(r,l),r.flags|=4096;return r}return t=Pi(t.child,{mode:l.mode,children:l.children}),t.ref=r.ref,r.child=t,t.return=r,t}function Dc(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function Ef(t,r,a,l,d){return Aa(r),a=ef(t,r,a,l,void 0,d),l=tf(),t!==null&&!Ln?(nf(t,r,d),Hi(t,r,d)):(Nt&&l&&Vh(r),r.flags|=1,Zn(t,r,a,d),r.child)}function iv(t,r,a,l,d,f){return Aa(r),r.updateQueue=null,a=oy(r,l,a,d),ay(t),l=tf(),t!==null&&!Ln?(nf(t,r,f),Hi(t,r,f)):(Nt&&l&&Vh(r),r.flags|=1,Zn(t,r,a,f),r.child)}function sv(t,r,a,l,d){if(Aa(r),r.stateNode===null){var f=oo,b=a.contextType;typeof b=="object"&&b!==null&&(f=Jn(b)),f=new a(l,f),r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=vf,r.stateNode=f,f._reactInternals=r,f=r.stateNode,f.props=l,f.state=r.memoizedState,f.refs={},Kh(r),b=a.contextType,f.context=typeof b=="object"&&b!==null?Jn(b):oo,f.state=r.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(yf(r,a,b,l),f.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(b=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),b!==f.state&&vf.enqueueReplaceState(f,f.state,null),xl(r,l,f,d),Il(),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){f=r.stateNode;var A=r.memoizedProps,M=ka(a,A);f.props=M;var K=f.context,Z=a.contextType;b=oo,typeof Z=="object"&&Z!==null&&(b=Jn(Z));var ae=a.getDerivedStateFromProps;Z=typeof ae=="function"||typeof f.getSnapshotBeforeUpdate=="function",A=r.pendingProps!==A,Z||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(A||K!==b)&&Gy(r,f,l,b),Ss=!1;var X=r.memoizedState;f.state=X,xl(r,l,f,d),Il(),K=r.memoizedState,A||X!==K||Ss?(typeof ae=="function"&&(yf(r,a,ae,l),K=r.memoizedState),(M=Ss||Hy(r,a,M,l,X,K,b))?(Z||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(r.flags|=4194308)):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=K),f.props=l,f.state=K,f.context=b,l=M):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{f=r.stateNode,Qh(t,r),b=r.memoizedProps,Z=ka(a,b),f.props=Z,ae=r.pendingProps,X=f.context,K=a.contextType,M=oo,typeof K=="object"&&K!==null&&(M=Jn(K)),A=a.getDerivedStateFromProps,(K=typeof A=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b!==ae||X!==M)&&Gy(r,f,l,M),Ss=!1,X=r.memoizedState,f.state=X,xl(r,l,f,d),Il();var W=r.memoizedState;b!==ae||X!==W||Ss||t!==null&&t.dependencies!==null&&fc(t.dependencies)?(typeof A=="function"&&(yf(r,a,A,l),W=r.memoizedState),(Z=Ss||Hy(r,a,Z,l,X,W,M)||t!==null&&t.dependencies!==null&&fc(t.dependencies))?(K||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,W,M),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,W,M)),typeof f.componentDidUpdate=="function"&&(r.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof f.componentDidUpdate!="function"||b===t.memoizedProps&&X===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&X===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=W),f.props=l,f.state=W,f.context=M,l=Z):(typeof f.componentDidUpdate!="function"||b===t.memoizedProps&&X===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&X===t.memoizedState||(r.flags|=1024),l=!1)}return f=l,Dc(t,r),l=(r.flags&128)!==0,f||l?(f=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),r.flags|=1,t!==null&&l?(r.child=xa(r,t.child,null,d),r.child=xa(r,null,a,d)):Zn(t,r,a,d),r.memoizedState=f.state,t=r.child):t=Hi(t,r,d),t}function av(t,r,a,l){return Sa(),r.flags|=256,Zn(t,r,a,l),r.child}var Tf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sf(t){return{baseLanes:t,cachePool:Xg()}}function wf(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Vr),t}function ov(t,r,a){var l=r.pendingProps,d=!1,f=(r.flags&128)!==0,b;if((b=f)||(b=t!==null&&t.memoizedState===null?!1:(In.current&2)!==0),b&&(d=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,t===null){if(Nt){if(d?Rs(r):Cs(),(t=dn)?(t=p0(t,Qr),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:_s!==null?{id:_i,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},a=zg(t),a.return=r,r.child=a,Wn=r,dn=null)):t=null,t===null)throw Es(r);return am(t)?r.lanes=32:r.lanes=536870912,null}var A=l.children;return l=l.fallback,d?(Cs(),d=r.mode,A=Mc({mode:"hidden",children:A},d),l=Ta(l,d,a,null),A.return=r,l.return=r,A.sibling=l,r.child=A,l=r.child,l.memoizedState=Sf(a),l.childLanes=wf(t,b,a),r.memoizedState=Tf,Ol(null,l)):(Rs(r),Af(r,A))}var M=t.memoizedState;if(M!==null&&(A=M.dehydrated,A!==null)){if(f)r.flags&256?(Rs(r),r.flags&=-257,r=Rf(t,r,a)):r.memoizedState!==null?(Cs(),r.child=t.child,r.flags|=128,r=null):(Cs(),A=l.fallback,d=r.mode,l=Mc({mode:"visible",children:l.children},d),A=Ta(A,d,a,null),A.flags|=2,l.return=r,A.return=r,l.sibling=A,r.child=l,xa(r,t.child,null,a),l=r.child,l.memoizedState=Sf(a),l.childLanes=wf(t,b,a),r.memoizedState=Tf,r=Ol(null,l));else if(Rs(r),am(A)){if(b=A.nextSibling&&A.nextSibling.dataset,b)var K=b.dgst;b=K,l=Error(s(419)),l.stack="",l.digest=b,Tl({value:l,source:null,stack:null}),r=Rf(t,r,a)}else if(Ln||ho(t,r,a,!1),b=(a&t.childLanes)!==0,Ln||b){if(b=rn,b!==null&&(l=xe(b,a),l!==0&&l!==M.retryLane))throw M.retryLane=l,Ea(t,l),Sr(b,t,l),bf;sm(A)||qc(),r=Rf(t,r,a)}else sm(A)?(r.flags|=192,r.child=t.child,r=null):(t=M.treeContext,dn=Xr(A.nextSibling),Wn=r,Nt=!0,bs=null,Qr=!1,t!==null&&Fg(r,t),r=Af(r,l.children),r.flags|=4096);return r}return d?(Cs(),A=l.fallback,d=r.mode,M=t.child,K=M.sibling,l=Pi(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,K!==null?A=Pi(K,A):(A=Ta(A,d,a,null),A.flags|=2),A.return=r,l.return=r,l.sibling=A,r.child=l,Ol(null,l),l=r.child,A=t.child.memoizedState,A===null?A=Sf(a):(d=A.cachePool,d!==null?(M=On._currentValue,d=d.parent!==M?{parent:M,pool:M}:d):d=Xg(),A={baseLanes:A.baseLanes|a,cachePool:d}),l.memoizedState=A,l.childLanes=wf(t,b,a),r.memoizedState=Tf,Ol(t.child,l)):(Rs(r),a=t.child,t=a.sibling,a=Pi(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(b=r.deletions,b===null?(r.deletions=[t],r.flags|=16):b.push(t)),r.child=a,r.memoizedState=null,a)}function Af(t,r){return r=Mc({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Mc(t,r){return t=kr(22,t,null,r),t.lanes=0,t}function Rf(t,r,a){return xa(r,t.child,null,a),t=Af(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function lv(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),zh(t.return,r,a)}function Cf(t,r,a,l,d,f){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d,treeForkCount:f}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=l,b.tail=a,b.tailMode=d,b.treeForkCount=f)}function uv(t,r,a){var l=r.pendingProps,d=l.revealOrder,f=l.tail;l=l.children;var b=In.current,A=(b&2)!==0;if(A?(b=b&1|2,r.flags|=128):b&=1,ee(In,b),Zn(t,r,l,a),l=Nt?El:0,!A&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lv(t,a,r);else if(t.tag===19)lv(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(d){case"forwards":for(a=r.child,d=null;a!==null;)t=a.alternate,t!==null&&Ec(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),Cf(r,!1,d,a,f,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(t=d.alternate,t!==null&&Ec(t)===null){r.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}Cf(r,!0,a,null,f,l);break;case"together":Cf(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function Hi(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Ns|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(ho(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=Pi(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Pi(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function If(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&fc(t)))}function n1(t,r,a){switch(r.tag){case 3:it(r,r.stateNode.containerInfo),Ts(r,On,t.memoizedState.cache),Sa();break;case 27:case 5:Ue(r);break;case 4:it(r,r.stateNode.containerInfo);break;case 10:Ts(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Jh(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Rs(r),r.flags|=128,null):(a&r.child.childLanes)!==0?ov(t,r,a):(Rs(r),t=Hi(t,r,a),t!==null?t.sibling:null);Rs(r);break;case 19:var d=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(ho(t,r,a,!1),l=(a&r.childLanes)!==0),d){if(l)return uv(t,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ee(In,In.current),l)break;return null;case 22:return r.lanes=0,tv(t,r,a,r.pendingProps);case 24:Ts(r,On,t.memoizedState.cache)}return Hi(t,r,a)}function cv(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Ln=!0;else{if(!If(t,a)&&(r.flags&128)===0)return Ln=!1,n1(t,r,a);Ln=(t.flags&131072)!==0}else Ln=!1,Nt&&(r.flags&1048576)!==0&&qg(r,El,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(t=Ca(r.elementType),r.type=t,typeof t=="function")Dh(t)?(l=ka(t,l),r.tag=1,r=sv(null,r,t,l,a)):(r.tag=0,r=Ef(null,r,t,l,a));else{if(t!=null){var d=t.$$typeof;if(d===Ee){r.tag=11,r=Jy(null,r,t,l,a);break e}else if(d===k){r.tag=14,r=Zy(null,r,t,l,a);break e}}throw r=Be(t)||t,Error(s(306,r,""))}}return r;case 0:return Ef(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,d=ka(l,r.pendingProps),sv(t,r,l,d,a);case 3:e:{if(it(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var f=r.memoizedState;d=f.element,Qh(t,r),xl(r,l,null,a);var b=r.memoizedState;if(l=b.cache,Ts(r,On,l),l!==f.cache&&Bh(r,[On],a,!0),Il(),l=b.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=av(t,r,l,a);break e}else if(l!==d){d=Hr(Error(s(424)),r),Tl(d),r=av(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(dn=Xr(t.firstChild),Wn=r,Nt=!0,bs=null,Qr=!0,a=ty(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Sa(),l===d){r=Hi(t,r,a);break e}Zn(t,r,l,a)}r=r.child}return r;case 26:return Dc(t,r),t===null?(a=E0(r.type,null,r.pendingProps,null))?r.memoizedState=a:Nt||(a=r.type,t=r.pendingProps,l=Xc(Ae.current).createElement(a),l[I]=r,l[ie]=t,er(l,a,t),ln(l),r.stateNode=l):r.memoizedState=E0(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Ue(r),t===null&&Nt&&(l=r.stateNode=v0(r.type,r.pendingProps,Ae.current),Wn=r,Qr=!0,d=dn,Vs(r.type)?(om=d,dn=Xr(l.firstChild)):dn=d),Zn(t,r,r.pendingProps.children,a),Dc(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Nt&&((d=l=dn)&&(l=D1(l,r.type,r.pendingProps,Qr),l!==null?(r.stateNode=l,Wn=r,dn=Xr(l.firstChild),Qr=!1,d=!0):d=!1),d||Es(r)),Ue(r),d=r.type,f=r.pendingProps,b=t!==null?t.memoizedProps:null,l=f.children,nm(d,f)?l=null:b!==null&&nm(d,b)&&(r.flags|=32),r.memoizedState!==null&&(d=ef(t,r,QS,null,null,a),Xl._currentValue=d),Dc(t,r),Zn(t,r,l,a),r.child;case 6:return t===null&&Nt&&((t=a=dn)&&(a=M1(a,r.pendingProps,Qr),a!==null?(r.stateNode=a,Wn=r,dn=null,t=!0):t=!1),t||Es(r)),null;case 13:return ov(t,r,a);case 4:return it(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=xa(r,null,l,a):Zn(t,r,l,a),r.child;case 11:return Jy(t,r,r.type,r.pendingProps,a);case 7:return Zn(t,r,r.pendingProps,a),r.child;case 8:return Zn(t,r,r.pendingProps.children,a),r.child;case 12:return Zn(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Ts(r,r.type,l.value),Zn(t,r,l.children,a),r.child;case 9:return d=r.type._context,l=r.pendingProps.children,Aa(r),d=Jn(d),l=l(d),r.flags|=1,Zn(t,r,l,a),r.child;case 14:return Zy(t,r,r.type,r.pendingProps,a);case 15:return ev(t,r,r.type,r.pendingProps,a);case 19:return uv(t,r,a);case 31:return t1(t,r,a);case 22:return tv(t,r,a,r.pendingProps);case 24:return Aa(r),l=Jn(On),t===null?(d=Hh(),d===null&&(d=rn,f=qh(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=a),d=f),r.memoizedState={parent:l,cache:d},Kh(r),Ts(r,On,d)):((t.lanes&a)!==0&&(Qh(t,r),xl(r,null,null,a),Il()),d=t.memoizedState,f=r.memoizedState,d.parent!==l?(d={parent:l,cache:l},r.memoizedState=d,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=d),Ts(r,On,l)):(l=f.cache,Ts(r,On,l),l!==d.cache&&Bh(r,[On],a,!0))),Zn(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Gi(t){t.flags|=4}function xf(t,r,a,l,d){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(d&335544128)===d)if(t.stateNode.complete)t.flags|=8192;else if(jv())t.flags|=8192;else throw Ia=yc,Gh}else t.flags&=-16777217}function dv(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!R0(r))if(jv())t.flags|=8192;else throw Ia=yc,Gh}function Oc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Q():536870912,t.lanes|=r,wo|=r)}function Vl(t,r){if(!Nt)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function hn(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function r1(t,r,a){var l=r.pendingProps;switch(Lh(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hn(r),null;case 1:return hn(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Bi(On),me(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(co(r)?Gi(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Ph())),hn(r),null;case 26:var d=r.type,f=r.memoizedState;return t===null?(Gi(r),f!==null?(hn(r),dv(r,f)):(hn(r),xf(r,d,null,l,a))):f?f!==t.memoizedState?(Gi(r),hn(r),dv(r,f)):(hn(r),r.flags&=-16777217):(t=t.memoizedProps,t!==l&&Gi(r),hn(r),xf(r,d,t,l,a)),null;case 27:if(We(r),a=Ae.current,d=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Gi(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return hn(r),null}t=se.current,co(r)?Hg(r):(t=v0(d,l,a),r.stateNode=t,Gi(r))}return hn(r),null;case 5:if(We(r),d=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Gi(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return hn(r),null}if(f=se.current,co(r))Hg(r);else{var b=Xc(Ae.current);switch(f){case 1:f=b.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:f=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":f=b.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":f=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":f=b.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof l.is=="string"?b.createElement("select",{is:l.is}):b.createElement("select"),l.multiple?f.multiple=!0:l.size&&(f.size=l.size);break;default:f=typeof l.is=="string"?b.createElement(d,{is:l.is}):b.createElement(d)}}f[I]=r,f[ie]=l;e:for(b=r.child;b!==null;){if(b.tag===5||b.tag===6)f.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===r)break e;for(;b.sibling===null;){if(b.return===null||b.return===r)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}r.stateNode=f;e:switch(er(f,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Gi(r)}}return hn(r),xf(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,a),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&Gi(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=Ae.current,co(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,d=Wn,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}t[I]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||o0(t.nodeValue,a)),t||Es(r,!0)}else t=Xc(t).createTextNode(l),t[I]=r,r.stateNode=t}return hn(r),null;case 31:if(a=r.memoizedState,t===null||t.memoizedState!==null){if(l=co(r),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[I]=r}else Sa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;hn(r),t=!1}else a=Ph(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return r.flags&256?(Mr(r),r):(Mr(r),null);if((r.flags&128)!==0)throw Error(s(558))}return hn(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=co(r),l!==null&&l.dehydrated!==null){if(t===null){if(!d)throw Error(s(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[I]=r}else Sa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;hn(r),d=!1}else d=Ph(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return r.flags&256?(Mr(r),r):(Mr(r),null)}return Mr(r),(r.flags&128)!==0?(r.lanes=a,r):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=r.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==d&&(l.flags|=2048)),a!==t&&a&&(r.child.flags|=8192),Oc(r,r.updateQueue),hn(r),null);case 4:return me(),t===null&&Wf(r.stateNode.containerInfo),hn(r),null;case 10:return Bi(r.type),hn(r),null;case 19:if(q(In),l=r.memoizedState,l===null)return hn(r),null;if(d=(r.flags&128)!==0,f=l.rendering,f===null)if(d)Vl(l,!1);else{if(bn!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(f=Ec(t),f!==null){for(r.flags|=128,Vl(l,!1),t=f.updateQueue,r.updateQueue=t,Oc(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Ug(a,t),a=a.sibling;return ee(In,In.current&1|2),Nt&&Ui(r,l.treeForkCount),r.child}t=t.sibling}l.tail!==null&&Tt()>Uc&&(r.flags|=128,d=!0,Vl(l,!1),r.lanes=4194304)}else{if(!d)if(t=Ec(f),t!==null){if(r.flags|=128,d=!0,t=t.updateQueue,r.updateQueue=t,Oc(r,t),Vl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!Nt)return hn(r),null}else 2*Tt()-l.renderingStartTime>Uc&&a!==536870912&&(r.flags|=128,d=!0,Vl(l,!1),r.lanes=4194304);l.isBackwards?(f.sibling=r.child,r.child=f):(t=l.last,t!==null?t.sibling=f:r.child=f,l.last=f)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Tt(),t.sibling=null,a=In.current,ee(In,d?a&1|2:a&1),Nt&&Ui(r,l.treeForkCount),t):(hn(r),null);case 22:case 23:return Mr(r),Wh(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(hn(r),r.subtreeFlags&6&&(r.flags|=8192)):hn(r),a=r.updateQueue,a!==null&&Oc(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&q(Ra),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Bi(On),hn(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function i1(t,r){switch(Lh(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Bi(On),me(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return We(r),null;case 31:if(r.memoizedState!==null){if(Mr(r),r.alternate===null)throw Error(s(340));Sa()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(Mr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Sa()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return q(In),null;case 4:return me(),null;case 10:return Bi(r.type),null;case 22:case 23:return Mr(r),Wh(),t!==null&&q(Ra),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Bi(On),null;case 25:return null;default:return null}}function hv(t,r){switch(Lh(r),r.tag){case 3:Bi(On),me();break;case 26:case 27:case 5:We(r);break;case 4:me();break;case 31:r.memoizedState!==null&&Mr(r);break;case 13:Mr(r);break;case 19:q(In);break;case 10:Bi(r.type);break;case 22:case 23:Mr(r),Wh(),t!==null&&q(Ra);break;case 24:Bi(On)}}function Ll(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&t)===t){l=void 0;var f=a.create,b=a.inst;l=f(),b.destroy=l}a=a.next}while(a!==d)}}catch(A){$t(r,r.return,A)}}function Is(t,r,a){try{var l=r.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var f=d.next;l=f;do{if((l.tag&t)===t){var b=l.inst,A=b.destroy;if(A!==void 0){b.destroy=void 0,d=r;var M=a,K=A;try{K()}catch(Z){$t(d,M,Z)}}}l=l.next}while(l!==f)}}catch(Z){$t(r,r.return,Z)}}function fv(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{ry(r,a)}catch(l){$t(t,t.return,l)}}}function mv(t,r,a){a.props=ka(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){$t(t,r,l)}}function jl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(d){$t(t,r,d)}}function Ei(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){$t(t,r,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){$t(t,r,d)}else a.current=null}function pv(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){$t(t,t.return,d)}}function Nf(t,r,a){try{var l=t.stateNode;R1(l,t.type,a,r),l[ie]=r}catch(d){$t(t,t.return,d)}}function gv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Vs(t.type)||t.tag===4}function kf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Vs(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Df(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Jr));else if(l!==4&&(l===27&&Vs(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(Df(t,r,a),t=t.sibling;t!==null;)Df(t,r,a),t=t.sibling}function Vc(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&Vs(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Vc(t,r,a),t=t.sibling;t!==null;)Vc(t,r,a),t=t.sibling}function yv(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,d=r.attributes;d.length;)r.removeAttributeNode(d[0]);er(r,l,a),r[I]=t,r[ie]=a}catch(f){$t(t,t.return,f)}}var Ki=!1,jn=!1,Mf=!1,vv=typeof WeakSet=="function"?WeakSet:Set,Qn=null;function s1(t,r){if(t=t.containerInfo,em=nd,t=Ng(t),Ah(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var b=0,A=-1,M=-1,K=0,Z=0,ae=t,X=null;t:for(;;){for(var W;ae!==a||d!==0&&ae.nodeType!==3||(A=b+d),ae!==f||l!==0&&ae.nodeType!==3||(M=b+l),ae.nodeType===3&&(b+=ae.nodeValue.length),(W=ae.firstChild)!==null;)X=ae,ae=W;for(;;){if(ae===t)break t;if(X===a&&++K===d&&(A=b),X===f&&++Z===l&&(M=b),(W=ae.nextSibling)!==null)break;ae=X,X=ae.parentNode}ae=W}a=A===-1||M===-1?null:{start:A,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(tm={focusedElem:t,selectionRange:a},nd=!1,Qn=r;Qn!==null;)if(r=Qn,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Qn=t;else for(;Qn!==null;){switch(r=Qn,f=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)d=t[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=r,d=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var Pe=ka(a.type,d);t=l.getSnapshotBeforeUpdate(Pe,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ze){$t(a,a.return,Ze)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)im(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":im(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Qn=t;break}Qn=r.return}}function _v(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Yi(t,a),l&4&&Ll(5,a);break;case 1:if(Yi(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(b){$t(a,a.return,b)}else{var d=ka(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(d,r,t.__reactInternalSnapshotBeforeUpdate)}catch(b){$t(a,a.return,b)}}l&64&&fv(a),l&512&&jl(a,a.return);break;case 3:if(Yi(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{ry(t,r)}catch(b){$t(a,a.return,b)}}break;case 27:r===null&&l&4&&yv(a);case 26:case 5:Yi(t,a),r===null&&l&4&&pv(a),l&512&&jl(a,a.return);break;case 12:Yi(t,a);break;case 31:Yi(t,a),l&4&&Tv(t,a);break;case 13:Yi(t,a),l&4&&Sv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=m1.bind(null,a),O1(t,a))));break;case 22:if(l=a.memoizedState!==null||Ki,!l){r=r!==null&&r.memoizedState!==null||jn,d=Ki;var f=jn;Ki=l,(jn=r)&&!f?Xi(t,a,(a.subtreeFlags&8772)!==0):Yi(t,a),Ki=d,jn=f}break;case 30:break;default:Yi(t,a)}}function bv(t){var r=t.alternate;r!==null&&(t.alternate=null,bv(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&nn(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var gn=null,_r=!1;function Qi(t,r,a){for(a=a.child;a!==null;)Ev(t,r,a),a=a.sibling}function Ev(t,r,a){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(Wt,a)}catch{}switch(a.tag){case 26:jn||Ei(a,r),Qi(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:jn||Ei(a,r);var l=gn,d=_r;Vs(a.type)&&(gn=a.stateNode,_r=!1),Qi(t,r,a),Kl(a.stateNode),gn=l,_r=d;break;case 5:jn||Ei(a,r);case 6:if(l=gn,d=_r,gn=null,Qi(t,r,a),gn=l,_r=d,gn!==null)if(_r)try{(gn.nodeType===9?gn.body:gn.nodeName==="HTML"?gn.ownerDocument.body:gn).removeChild(a.stateNode)}catch(f){$t(a,r,f)}else try{gn.removeChild(a.stateNode)}catch(f){$t(a,r,f)}break;case 18:gn!==null&&(_r?(t=gn,f0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Do(t)):f0(gn,a.stateNode));break;case 4:l=gn,d=_r,gn=a.stateNode.containerInfo,_r=!0,Qi(t,r,a),gn=l,_r=d;break;case 0:case 11:case 14:case 15:Is(2,a,r),jn||Is(4,a,r),Qi(t,r,a);break;case 1:jn||(Ei(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&mv(a,r,l)),Qi(t,r,a);break;case 21:Qi(t,r,a);break;case 22:jn=(l=jn)||a.memoizedState!==null,Qi(t,r,a),jn=l;break;default:Qi(t,r,a)}}function Tv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Do(t)}catch(a){$t(r,r.return,a)}}}function Sv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Do(t)}catch(a){$t(r,r.return,a)}}function a1(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new vv),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new vv),r;default:throw Error(s(435,t.tag))}}function Lc(t,r){var a=a1(t);r.forEach(function(l){if(!a.has(l)){a.add(l);var d=p1.bind(null,t,l);l.then(d,d)}})}function br(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],f=t,b=r,A=b;e:for(;A!==null;){switch(A.tag){case 27:if(Vs(A.type)){gn=A.stateNode,_r=!1;break e}break;case 5:gn=A.stateNode,_r=!1;break e;case 3:case 4:gn=A.stateNode.containerInfo,_r=!0;break e}A=A.return}if(gn===null)throw Error(s(160));Ev(f,b,d),gn=null,_r=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)wv(r,t),r=r.sibling}var ii=null;function wv(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:br(r,t),Er(t),l&4&&(Is(3,t,t.return),Ll(3,t),Is(5,t,t.return));break;case 1:br(r,t),Er(t),l&512&&(jn||a===null||Ei(a,a.return)),l&64&&Ki&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=ii;if(br(r,t),Er(t),l&512&&(jn||a===null||Ei(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":f=d.getElementsByTagName("title")[0],(!f||f[gt]||f[I]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(l),d.head.insertBefore(f,d.querySelector("head > title"))),er(f,l,a),f[I]=t,ln(f),l=f;break e;case"link":var b=w0("link","href",d).get(l+(a.href||""));if(b){for(var A=0;A<b.length;A++)if(f=b[A],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(A,1);break t}}f=d.createElement(l),er(f,l,a),d.head.appendChild(f);break;case"meta":if(b=w0("meta","content",d).get(l+(a.content||""))){for(A=0;A<b.length;A++)if(f=b[A],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(A,1);break t}}f=d.createElement(l),er(f,l,a),d.head.appendChild(f);break;default:throw Error(s(468,l))}f[I]=t,ln(f),l=f}t.stateNode=l}else A0(d,t.type,t.stateNode);else t.stateNode=S0(d,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?A0(d,t.type,t.stateNode):S0(d,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Nf(t,t.memoizedProps,a.memoizedProps)}break;case 27:br(r,t),Er(t),l&512&&(jn||a===null||Ei(a,a.return)),a!==null&&l&4&&Nf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(br(r,t),Er(t),l&512&&(jn||a===null||Ei(a,a.return)),t.flags&32){d=t.stateNode;try{vr(d,"")}catch(Pe){$t(t,t.return,Pe)}}l&4&&t.stateNode!=null&&(d=t.memoizedProps,Nf(t,d,a!==null?a.memoizedProps:d)),l&1024&&(Mf=!0);break;case 6:if(br(r,t),Er(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Pe){$t(t,t.return,Pe)}}break;case 3:if(Jc=null,d=ii,ii=$c(r.containerInfo),br(r,t),ii=d,Er(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Do(r.containerInfo)}catch(Pe){$t(t,t.return,Pe)}Mf&&(Mf=!1,Av(t));break;case 4:l=ii,ii=$c(t.stateNode.containerInfo),br(r,t),Er(t),ii=l;break;case 12:br(r,t),Er(t);break;case 31:br(r,t),Er(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Lc(t,l)));break;case 13:br(r,t),Er(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Pc=Tt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Lc(t,l)));break;case 22:d=t.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,K=Ki,Z=jn;if(Ki=K||d,jn=Z||M,br(r,t),jn=Z,Ki=K,Er(t),l&8192)e:for(r=t.stateNode,r._visibility=d?r._visibility&-2:r._visibility|1,d&&(a===null||M||Ki||jn||Da(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){M=a=r;try{if(f=M.stateNode,d)b=f.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{A=M.stateNode;var ae=M.memoizedProps.style,X=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;A.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(Pe){$t(M,M.return,Pe)}}}else if(r.tag===6){if(a===null){M=r;try{M.stateNode.nodeValue=d?"":M.memoizedProps}catch(Pe){$t(M,M.return,Pe)}}}else if(r.tag===18){if(a===null){M=r;try{var W=M.stateNode;d?m0(W,!0):m0(M.stateNode,!1)}catch(Pe){$t(M,M.return,Pe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Lc(t,a))));break;case 19:br(r,t),Er(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Lc(t,l)));break;case 30:break;case 21:break;default:br(r,t),Er(t)}}function Er(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(gv(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var d=a.stateNode,f=kf(t);Vc(t,f,d);break;case 5:var b=a.stateNode;a.flags&32&&(vr(b,""),a.flags&=-33);var A=kf(t);Vc(t,A,b);break;case 3:case 4:var M=a.stateNode.containerInfo,K=kf(t);Df(t,K,M);break;default:throw Error(s(161))}}catch(Z){$t(t,t.return,Z)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Av(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Av(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Yi(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)_v(t,r.alternate,r),r=r.sibling}function Da(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Is(4,r,r.return),Da(r);break;case 1:Ei(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&mv(r,r.return,a),Da(r);break;case 27:Kl(r.stateNode);case 26:case 5:Ei(r,r.return),Da(r);break;case 22:r.memoizedState===null&&Da(r);break;case 30:Da(r);break;default:Da(r)}t=t.sibling}}function Xi(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,d=t,f=r,b=f.flags;switch(f.tag){case 0:case 11:case 15:Xi(d,f,a),Ll(4,f);break;case 1:if(Xi(d,f,a),l=f,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(K){$t(l,l.return,K)}if(l=f,d=l.updateQueue,d!==null){var A=l.stateNode;try{var M=d.shared.hiddenCallbacks;if(M!==null)for(d.shared.hiddenCallbacks=null,d=0;d<M.length;d++)ny(M[d],A)}catch(K){$t(l,l.return,K)}}a&&b&64&&fv(f),jl(f,f.return);break;case 27:yv(f);case 26:case 5:Xi(d,f,a),a&&l===null&&b&4&&pv(f),jl(f,f.return);break;case 12:Xi(d,f,a);break;case 31:Xi(d,f,a),a&&b&4&&Tv(d,f);break;case 13:Xi(d,f,a),a&&b&4&&Sv(d,f);break;case 22:f.memoizedState===null&&Xi(d,f,a),jl(f,f.return);break;case 30:break;default:Xi(d,f,a)}r=r.sibling}}function Of(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Sl(a))}function Vf(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Sl(t))}function si(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Rv(t,r,a,l),r=r.sibling}function Rv(t,r,a,l){var d=r.flags;switch(r.tag){case 0:case 11:case 15:si(t,r,a,l),d&2048&&Ll(9,r);break;case 1:si(t,r,a,l);break;case 3:si(t,r,a,l),d&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Sl(t)));break;case 12:if(d&2048){si(t,r,a,l),t=r.stateNode;try{var f=r.memoizedProps,b=f.id,A=f.onPostCommit;typeof A=="function"&&A(b,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(M){$t(r,r.return,M)}}else si(t,r,a,l);break;case 31:si(t,r,a,l);break;case 13:si(t,r,a,l);break;case 23:break;case 22:f=r.stateNode,b=r.alternate,r.memoizedState!==null?f._visibility&2?si(t,r,a,l):Pl(t,r):f._visibility&2?si(t,r,a,l):(f._visibility|=2,Eo(t,r,a,l,(r.subtreeFlags&10256)!==0||!1)),d&2048&&Of(b,r);break;case 24:si(t,r,a,l),d&2048&&Vf(r.alternate,r);break;default:si(t,r,a,l)}}function Eo(t,r,a,l,d){for(d=d&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var f=t,b=r,A=a,M=l,K=b.flags;switch(b.tag){case 0:case 11:case 15:Eo(f,b,A,M,d),Ll(8,b);break;case 23:break;case 22:var Z=b.stateNode;b.memoizedState!==null?Z._visibility&2?Eo(f,b,A,M,d):Pl(f,b):(Z._visibility|=2,Eo(f,b,A,M,d)),d&&K&2048&&Of(b.alternate,b);break;case 24:Eo(f,b,A,M,d),d&&K&2048&&Vf(b.alternate,b);break;default:Eo(f,b,A,M,d)}r=r.sibling}}function Pl(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,d=l.flags;switch(l.tag){case 22:Pl(a,l),d&2048&&Of(l.alternate,l);break;case 24:Pl(a,l),d&2048&&Vf(l.alternate,l);break;default:Pl(a,l)}r=r.sibling}}var Ul=8192;function To(t,r,a){if(t.subtreeFlags&Ul)for(t=t.child;t!==null;)Cv(t,r,a),t=t.sibling}function Cv(t,r,a){switch(t.tag){case 26:To(t,r,a),t.flags&Ul&&t.memoizedState!==null&&K1(a,ii,t.memoizedState,t.memoizedProps);break;case 5:To(t,r,a);break;case 3:case 4:var l=ii;ii=$c(t.stateNode.containerInfo),To(t,r,a),ii=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Ul,Ul=16777216,To(t,r,a),Ul=l):To(t,r,a));break;default:To(t,r,a)}}function Iv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function zl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Qn=l,Nv(l,t)}Iv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)xv(t),t=t.sibling}function xv(t){switch(t.tag){case 0:case 11:case 15:zl(t),t.flags&2048&&Is(9,t,t.return);break;case 3:zl(t);break;case 12:zl(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,jc(t)):zl(t);break;default:zl(t)}}function jc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Qn=l,Nv(l,t)}Iv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Is(8,r,r.return),jc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,jc(r));break;default:jc(r)}t=t.sibling}}function Nv(t,r){for(;Qn!==null;){var a=Qn;switch(a.tag){case 0:case 11:case 15:Is(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Sl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Qn=l;else e:for(a=t;Qn!==null;){l=Qn;var d=l.sibling,f=l.return;if(bv(l),l===a){Qn=null;break e}if(d!==null){d.return=f,Qn=d;break e}Qn=f}}}var o1={getCacheForType:function(t){var r=Jn(On),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a},cacheSignal:function(){return Jn(On).controller.signal}},l1=typeof WeakMap=="function"?WeakMap:Map,qt=0,rn=null,_t=null,wt=0,Xt=0,Or=null,xs=!1,So=!1,Lf=!1,$i=0,bn=0,Ns=0,Ma=0,jf=0,Vr=0,wo=0,Bl=null,Tr=null,Pf=!1,Pc=0,kv=0,Uc=1/0,zc=null,ks=null,qn=0,Ds=null,Ao=null,Wi=0,Uf=0,zf=null,Dv=null,ql=0,Bf=null;function Lr(){return(qt&2)!==0&&wt!==0?wt&-wt:Y.T!==null?Qf():yt()}function Mv(){if(Vr===0)if((wt&536870912)===0||Nt){var t=ir;ir<<=1,(ir&3932160)===0&&(ir=262144),Vr=t}else Vr=536870912;return t=Dr.current,t!==null&&(t.flags|=32),Vr}function Sr(t,r,a){(t===rn&&(Xt===2||Xt===9)||t.cancelPendingCommit!==null)&&(Ro(t,0),Ms(t,wt,Vr,!1)),de(t,a),((qt&2)===0||t!==rn)&&(t===rn&&((qt&2)===0&&(Ma|=a),bn===4&&Ms(t,wt,Vr,!1)),Ti(t))}function Ov(t,r,a){if((qt&6)!==0)throw Error(s(327));var l=!a&&(r&127)===0&&(r&t.expiredLanes)===0||qe(t,r),d=l?d1(t,r):Ff(t,r,!0),f=l;do{if(d===0){So&&!l&&Ms(t,r,0,!1);break}else{if(a=t.current.alternate,f&&!u1(a)){d=Ff(t,r,!1),f=!1;continue}if(d===2){if(f=r,t.errorRecoveryDisabledLanes&f)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var A=t;d=Bl;var M=A.current.memoizedState.isDehydrated;if(M&&(Ro(A,b).flags|=256),b=Ff(A,b,!1),b!==2){if(Lf&&!M){A.errorRecoveryDisabledLanes|=f,Ma|=f,d=4;break e}f=Tr,Tr=d,f!==null&&(Tr===null?Tr=f:Tr.push.apply(Tr,f))}d=b}if(f=!1,d!==2)continue}}if(d===1){Ro(t,0),Ms(t,r,0,!0);break}e:{switch(l=t,f=d,f){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Ms(l,r,Vr,!xs);break e;case 2:Tr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(d=Pc+300-Tt(),10<d)){if(Ms(l,r,Vr,!xs),sr(l,0,!0)!==0)break e;Wi=r,l.timeoutHandle=d0(Vv.bind(null,l,a,Tr,zc,Pf,r,Vr,Ma,wo,xs,f,"Throttled",-0,0),d);break e}Vv(l,a,Tr,zc,Pf,r,Vr,Ma,wo,xs,f,null,-0,0)}}break}while(!0);Ti(t)}function Vv(t,r,a,l,d,f,b,A,M,K,Z,ae,X,W){if(t.timeoutHandle=-1,ae=r.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Jr},Cv(r,f,ae);var Pe=(f&62914560)===f?Pc-Tt():(f&4194048)===f?kv-Tt():0;if(Pe=Q1(ae,Pe),Pe!==null){Wi=f,t.cancelPendingCommit=Pe(Fv.bind(null,t,r,f,a,l,d,b,A,M,Z,ae,null,X,W)),Ms(t,f,b,!K);return}}Fv(t,r,f,a,l,d,b,A,M)}function u1(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],f=d.getSnapshot;d=d.value;try{if(!Nr(f(),d))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ms(t,r,a,l){r&=~jf,r&=~Ma,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var d=r;0<d;){var f=31-xt(d),b=1<<f;l[f]=-1,d&=~b}a!==0&&ke(t,a,r)}function Bc(){return(qt&6)===0?(Fl(0),!1):!0}function qf(){if(_t!==null){if(Xt===0)var t=_t.return;else t=_t,zi=wa=null,rf(t),go=null,Al=0,t=_t;for(;t!==null;)hv(t.alternate,t),t=t.return;_t=null}}function Ro(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,x1(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Wi=0,qf(),rn=t,_t=a=Pi(t.current,null),wt=r,Xt=0,Or=null,xs=!1,So=qe(t,r),Lf=!1,wo=Vr=jf=Ma=Ns=bn=0,Tr=Bl=null,Pf=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var d=31-xt(l),f=1<<d;r|=t[d],l&=~f}return $i=r,lc(),a}function Lv(t,r){dt=null,Y.H=Ml,r===po||r===gc?(r=Jg(),Xt=3):r===Gh?(r=Jg(),Xt=4):Xt=r===bf?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Or=r,_t===null&&(bn=1,Nc(t,Hr(r,t.current)))}function jv(){var t=Dr.current;return t===null?!0:(wt&4194048)===wt?Yr===null:(wt&62914560)===wt||(wt&536870912)!==0?t===Yr:!1}function Pv(){var t=Y.H;return Y.H=Ml,t===null?Ml:t}function Uv(){var t=Y.A;return Y.A=o1,t}function qc(){bn=4,xs||(wt&4194048)!==wt&&Dr.current!==null||(So=!0),(Ns&134217727)===0&&(Ma&134217727)===0||rn===null||Ms(rn,wt,Vr,!1)}function Ff(t,r,a){var l=qt;qt|=2;var d=Pv(),f=Uv();(rn!==t||wt!==r)&&(zc=null,Ro(t,r)),r=!1;var b=bn;e:do try{if(Xt!==0&&_t!==null){var A=_t,M=Or;switch(Xt){case 8:qf(),b=6;break e;case 3:case 2:case 9:case 6:Dr.current===null&&(r=!0);var K=Xt;if(Xt=0,Or=null,Co(t,A,M,K),a&&So){b=0;break e}break;default:K=Xt,Xt=0,Or=null,Co(t,A,M,K)}}c1(),b=bn;break}catch(Z){Lv(t,Z)}while(!0);return r&&t.shellSuspendCounter++,zi=wa=null,qt=l,Y.H=d,Y.A=f,_t===null&&(rn=null,wt=0,lc()),b}function c1(){for(;_t!==null;)zv(_t)}function d1(t,r){var a=qt;qt|=2;var l=Pv(),d=Uv();rn!==t||wt!==r?(zc=null,Uc=Tt()+500,Ro(t,r)):So=qe(t,r);e:do try{if(Xt!==0&&_t!==null){r=_t;var f=Or;t:switch(Xt){case 1:Xt=0,Or=null,Co(t,r,f,1);break;case 2:case 9:if($g(f)){Xt=0,Or=null,Bv(r);break}r=function(){Xt!==2&&Xt!==9||rn!==t||(Xt=7),Ti(t)},f.then(r,r);break e;case 3:Xt=7;break e;case 4:Xt=5;break e;case 7:$g(f)?(Xt=0,Or=null,Bv(r)):(Xt=0,Or=null,Co(t,r,f,7));break;case 5:var b=null;switch(_t.tag){case 26:b=_t.memoizedState;case 5:case 27:var A=_t;if(b?R0(b):A.stateNode.complete){Xt=0,Or=null;var M=A.sibling;if(M!==null)_t=M;else{var K=A.return;K!==null?(_t=K,Fc(K)):_t=null}break t}}Xt=0,Or=null,Co(t,r,f,5);break;case 6:Xt=0,Or=null,Co(t,r,f,6);break;case 8:qf(),bn=6;break e;default:throw Error(s(462))}}h1();break}catch(Z){Lv(t,Z)}while(!0);return zi=wa=null,Y.H=l,Y.A=d,qt=a,_t!==null?0:(rn=null,wt=0,lc(),bn)}function h1(){for(;_t!==null&&!Kt();)zv(_t)}function zv(t){var r=cv(t.alternate,t,$i);t.memoizedProps=t.pendingProps,r===null?Fc(t):_t=r}function Bv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=iv(a,r,r.pendingProps,r.type,void 0,wt);break;case 11:r=iv(a,r,r.pendingProps,r.type.render,r.ref,wt);break;case 5:rf(r);default:hv(a,r),r=_t=Ug(r,$i),r=cv(a,r,$i)}t.memoizedProps=t.pendingProps,r===null?Fc(t):_t=r}function Co(t,r,a,l){zi=wa=null,rf(r),go=null,Al=0;var d=r.return;try{if(e1(t,d,r,a,wt)){bn=1,Nc(t,Hr(a,t.current)),_t=null;return}}catch(f){if(d!==null)throw _t=d,f;bn=1,Nc(t,Hr(a,t.current)),_t=null;return}r.flags&32768?(Nt||l===1?t=!0:So||(wt&536870912)!==0?t=!1:(xs=t=!0,(l===2||l===9||l===3||l===6)&&(l=Dr.current,l!==null&&l.tag===13&&(l.flags|=16384))),qv(r,t)):Fc(r)}function Fc(t){var r=t;do{if((r.flags&32768)!==0){qv(r,xs);return}t=r.return;var a=r1(r.alternate,r,$i);if(a!==null){_t=a;return}if(r=r.sibling,r!==null){_t=r;return}_t=r=t}while(r!==null);bn===0&&(bn=5)}function qv(t,r){do{var a=i1(t.alternate,t);if(a!==null){a.flags&=32767,_t=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){_t=t;return}_t=t=a}while(t!==null);bn=6,_t=null}function Fv(t,r,a,l,d,f,b,A,M){t.cancelPendingCommit=null;do Hc();while(qn!==0);if((qt&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(f=r.lanes|r.childLanes,f|=Nh,Se(t,a,f,b,A,M),t===rn&&(_t=rn=null,wt=0),Ao=r,Ds=t,Wi=a,Uf=f,zf=d,Dv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,g1(Qe,function(){return Yv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null,d=ce.p,ce.p=2,b=qt,qt|=4;try{s1(t,r,a)}finally{qt=b,ce.p=d,Y.T=l}}qn=1,Hv(),Gv(),Kv()}}function Hv(){if(qn===1){qn=0;var t=Ds,r=Ao,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=Y.T,Y.T=null;var l=ce.p;ce.p=2;var d=qt;qt|=4;try{wv(r,t);var f=tm,b=Ng(t.containerInfo),A=f.focusedElem,M=f.selectionRange;if(b!==A&&A&&A.ownerDocument&&xg(A.ownerDocument.documentElement,A)){if(M!==null&&Ah(A)){var K=M.start,Z=M.end;if(Z===void 0&&(Z=K),"selectionStart"in A)A.selectionStart=K,A.selectionEnd=Math.min(Z,A.value.length);else{var ae=A.ownerDocument||document,X=ae&&ae.defaultView||window;if(X.getSelection){var W=X.getSelection(),Pe=A.textContent.length,Ze=Math.min(M.start,Pe),tn=M.end===void 0?Ze:Math.min(M.end,Pe);!W.extend&&Ze>tn&&(b=tn,tn=Ze,Ze=b);var z=Ig(A,Ze),j=Ig(A,tn);if(z&&j&&(W.rangeCount!==1||W.anchorNode!==z.node||W.anchorOffset!==z.offset||W.focusNode!==j.node||W.focusOffset!==j.offset)){var G=ae.createRange();G.setStart(z.node,z.offset),W.removeAllRanges(),Ze>tn?(W.addRange(G),W.extend(j.node,j.offset)):(G.setEnd(j.node,j.offset),W.addRange(G))}}}}for(ae=[],W=A;W=W.parentNode;)W.nodeType===1&&ae.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ae.length;A++){var ne=ae[A];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}nd=!!em,tm=em=null}finally{qt=d,ce.p=l,Y.T=a}}t.current=r,qn=2}}function Gv(){if(qn===2){qn=0;var t=Ds,r=Ao,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=Y.T,Y.T=null;var l=ce.p;ce.p=2;var d=qt;qt|=4;try{_v(t,r.alternate,r)}finally{qt=d,ce.p=l,Y.T=a}}qn=3}}function Kv(){if(qn===4||qn===3){qn=0,ot();var t=Ds,r=Ao,a=Wi,l=Dv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?qn=5:(qn=0,Ao=Ds=null,Qv(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(ks=null),et(a),r=r.stateNode,Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(Wt,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=Y.T,d=ce.p,ce.p=2,Y.T=null;try{for(var f=t.onRecoverableError,b=0;b<l.length;b++){var A=l[b];f(A.value,{componentStack:A.stack})}}finally{Y.T=r,ce.p=d}}(Wi&3)!==0&&Hc(),Ti(t),d=t.pendingLanes,(a&261930)!==0&&(d&42)!==0?t===Bf?ql++:(ql=0,Bf=t):ql=0,Fl(0)}}function Qv(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,Sl(r)))}function Hc(){return Hv(),Gv(),Kv(),Yv()}function Yv(){if(qn!==5)return!1;var t=Ds,r=Uf;Uf=0;var a=et(Wi),l=Y.T,d=ce.p;try{ce.p=32>a?32:a,Y.T=null,a=zf,zf=null;var f=Ds,b=Wi;if(qn=0,Ao=Ds=null,Wi=0,(qt&6)!==0)throw Error(s(331));var A=qt;if(qt|=4,xv(f.current),Rv(f,f.current,b,a),qt=A,Fl(0,!1),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(Wt,f)}catch{}return!0}finally{ce.p=d,Y.T=l,Qv(t,r)}}function Xv(t,r,a){r=Hr(a,r),r=_f(t.stateNode,r,2),t=As(t,r,2),t!==null&&(de(t,2),Ti(t))}function $t(t,r,a){if(t.tag===3)Xv(t,t,a);else for(;r!==null;){if(r.tag===3){Xv(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ks===null||!ks.has(l))){t=Hr(a,t),a=$y(2),l=As(r,a,2),l!==null&&(Wy(a,l,r,t),de(l,2),Ti(l));break}}r=r.return}}function Hf(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new l1;var d=new Set;l.set(r,d)}else d=l.get(r),d===void 0&&(d=new Set,l.set(r,d));d.has(a)||(Lf=!0,d.add(a),t=f1.bind(null,t,r,a),r.then(t,t))}function f1(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,rn===t&&(wt&a)===a&&(bn===4||bn===3&&(wt&62914560)===wt&&300>Tt()-Pc?(qt&2)===0&&Ro(t,0):jf|=a,wo===wt&&(wo=0)),Ti(t)}function $v(t,r){r===0&&(r=Q()),t=Ea(t,r),t!==null&&(de(t,r),Ti(t))}function m1(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),$v(t,a)}function p1(t,r){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),$v(t,a)}function g1(t,r){return Ie(t,r)}var Gc=null,Io=null,Gf=!1,Kc=!1,Kf=!1,Os=0;function Ti(t){t!==Io&&t.next===null&&(Io===null?Gc=Io=t:Io=Io.next=t),Kc=!0,Gf||(Gf=!0,v1())}function Fl(t,r){if(!Kf&&Kc){Kf=!0;do for(var a=!1,l=Gc;l!==null;){if(t!==0){var d=l.pendingLanes;if(d===0)var f=0;else{var b=l.suspendedLanes,A=l.pingedLanes;f=(1<<31-xt(42|t)+1)-1,f&=d&~(b&~A),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,e0(l,f))}else f=wt,f=sr(l,l===rn?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||qe(l,f)||(a=!0,e0(l,f));l=l.next}while(a);Kf=!1}}function y1(){Wv()}function Wv(){Kc=Gf=!1;var t=0;Os!==0&&I1()&&(t=Os);for(var r=Tt(),a=null,l=Gc;l!==null;){var d=l.next,f=Jv(l,r);f===0?(l.next=null,a===null?Gc=d:a.next=d,d===null&&(Io=a)):(a=l,(t!==0||(f&3)!==0)&&(Kc=!0)),l=d}qn!==0&&qn!==5||Fl(t),Os!==0&&(Os=0)}function Jv(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,d=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var b=31-xt(f),A=1<<b,M=d[b];M===-1?((A&a)===0||(A&l)!==0)&&(d[b]=St(A,r)):M<=r&&(t.expiredLanes|=A),f&=~A}if(r=rn,a=wt,a=sr(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(Xt===2||Xt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Ke(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||qe(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Ke(l),et(a)){case 2:case 8:a=yn;break;case 32:a=Qe;break;case 268435456:a=Sn;break;default:a=Qe}return l=Zv.bind(null,t),a=Ie(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Ke(l),t.callbackPriority=2,t.callbackNode=null,2}function Zv(t,r){if(qn!==0&&qn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Hc()&&t.callbackNode!==a)return null;var l=wt;return l=sr(t,t===rn?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Ov(t,l,r),Jv(t,Tt()),t.callbackNode!=null&&t.callbackNode===a?Zv.bind(null,t):null)}function e0(t,r){if(Hc())return null;Ov(t,r,!0)}function v1(){N1(function(){(qt&6)!==0?Ie(Vt,y1):Wv()})}function Qf(){if(Os===0){var t=fo;t===0&&(t=on,on<<=1,(on&261888)===0&&(on=256)),Os=t}return Os}function t0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Wa(""+t)}function n0(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function _1(t,r,a,l,d){if(r==="submit"&&a&&a.stateNode===d){var f=t0((d[ie]||null).action),b=l.submitter;b&&(r=(r=b[ie]||null)?t0(r.formAction):b.getAttribute("formAction"),r!==null&&(f=r,b=null));var A=new pi("action","action",null,l,d);t.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Os!==0){var M=b?n0(d,b):new FormData(d);ff(a,{pending:!0,data:M,method:d.method,action:f},null,M)}}else typeof f=="function"&&(A.preventDefault(),M=b?n0(d,b):new FormData(d),ff(a,{pending:!0,data:M,method:d.method,action:f},f,M))},currentTarget:d}]})}}for(var Yf=0;Yf<xh.length;Yf++){var Xf=xh[Yf],b1=Xf.toLowerCase(),E1=Xf[0].toUpperCase()+Xf.slice(1);ri(b1,"on"+E1)}ri(Mg,"onAnimationEnd"),ri(Og,"onAnimationIteration"),ri(Vg,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri(jS,"onTransitionRun"),ri(PS,"onTransitionStart"),ri(US,"onTransitionCancel"),ri(Lg,"onTransitionEnd"),di("onMouseEnter",["mouseout","mouseover"]),di("onMouseLeave",["mouseout","mouseover"]),di("onPointerEnter",["pointerout","pointerover"]),di("onPointerLeave",["pointerout","pointerover"]),Ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ur("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hl));function r0(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],d=l.event;l=l.listeners;e:{var f=void 0;if(r)for(var b=l.length-1;0<=b;b--){var A=l[b],M=A.instance,K=A.currentTarget;if(A=A.listener,M!==f&&d.isPropagationStopped())break e;f=A,d.currentTarget=K;try{f(d)}catch(Z){oc(Z)}d.currentTarget=null,f=M}else for(b=0;b<l.length;b++){if(A=l[b],M=A.instance,K=A.currentTarget,A=A.listener,M!==f&&d.isPropagationStopped())break e;f=A,d.currentTarget=K;try{f(d)}catch(Z){oc(Z)}d.currentTarget=null,f=M}}}}function bt(t,r){var a=r[Fe];a===void 0&&(a=r[Fe]=new Set);var l=t+"__bubble";a.has(l)||(i0(r,t,2,!1),a.add(l))}function $f(t,r,a){var l=0;r&&(l|=4),i0(a,t,l,r)}var Qc="_reactListening"+Math.random().toString(36).slice(2);function Wf(t){if(!t[Qc]){t[Qc]=!0,ar.forEach(function(a){a!=="selectionchange"&&(T1.has(a)||$f(a,!1,t),$f(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Qc]||(r[Qc]=!0,$f("selectionchange",!1,r))}}function i0(t,r,a,l){switch(M0(r)){case 2:var d=$1;break;case 8:d=W1;break;default:d=hm}a=d.bind(null,r,a,t),d=void 0,!fa||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),l?d!==void 0?t.addEventListener(r,a,{capture:!0,passive:d}):t.addEventListener(r,a,!0):d!==void 0?t.addEventListener(r,a,{passive:d}):t.addEventListener(r,a,!1)}function Jf(t,r,a,l,d){var f=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var A=l.stateNode.containerInfo;if(A===d)break;if(b===4)for(b=l.return;b!==null;){var M=b.tag;if((M===3||M===4)&&b.stateNode.containerInfo===d)return;b=b.return}for(;A!==null;){if(b=Rn(A),b===null)return;if(M=b.tag,M===5||M===6||M===26||M===27){l=f=b;continue e}A=A.parentNode}}l=l.return}ps(function(){var K=f,Z=zr(a),ae=[];e:{var X=jg.get(t);if(X!==void 0){var W=pi,Pe=t;switch(t){case"keypress":if(pa(a)===0)break e;case"keydown":case"keyup":W=ic;break;case"focusin":Pe="focus",W=ya;break;case"focusout":Pe="blur",W=ya;break;case"beforeblur":case"afterblur":W=ya;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=pl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Xu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=y;break;case Mg:case Og:case Vg:W=Wu;break;case Lg:W=R;break;case"scroll":case"scrollend":W=ml;break;case"wheel":W=$;break;case"copy":case"cut":case"paste":W=Ju;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=ji;break;case"toggle":case"beforetoggle":W=ct}var Ze=(r&4)!==0,tn=!Ze&&(t==="scroll"||t==="scrollend"),z=Ze?X!==null?X+"Capture":null:X;Ze=[];for(var j=K,G;j!==null;){var ne=j;if(G=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||G===null||z===null||(ne=Zr(j,z),ne!=null&&Ze.push(Gl(j,ne,G))),tn)break;j=j.return}0<Ze.length&&(X=new W(X,Pe,null,a,Z),ae.push({event:X,listeners:Ze}))}}if((r&7)===0){e:{if(X=t==="mouseover"||t==="pointerover",W=t==="mouseout"||t==="pointerout",X&&a!==dl&&(Pe=a.relatedTarget||a.fromElement)&&(Rn(Pe)||Pe[_e]))break e;if((W||X)&&(X=Z.window===Z?Z:(X=Z.ownerDocument)?X.defaultView||X.parentWindow:window,W?(Pe=a.relatedTarget||a.toElement,W=K,Pe=Pe?Rn(Pe):null,Pe!==null&&(tn=u(Pe),Ze=Pe.tag,Pe!==tn||Ze!==5&&Ze!==27&&Ze!==6)&&(Pe=null)):(W=null,Pe=K),W!==Pe)){if(Ze=pl,ne="onMouseLeave",z="onMouseEnter",j="mouse",(t==="pointerout"||t==="pointerover")&&(Ze=ji,ne="onPointerLeave",z="onPointerEnter",j="pointer"),tn=W==null?X:Qt(W),G=Pe==null?X:Qt(Pe),X=new Ze(ne,j+"leave",W,a,Z),X.target=tn,X.relatedTarget=G,ne=null,Rn(Z)===K&&(Ze=new Ze(z,j+"enter",Pe,a,Z),Ze.target=G,Ze.relatedTarget=tn,ne=Ze),tn=ne,W&&Pe)t:{for(Ze=S1,z=W,j=Pe,G=0,ne=z;ne;ne=Ze(ne))G++;ne=0;for(var Ye=j;Ye;Ye=Ze(Ye))ne++;for(;0<G-ne;)z=Ze(z),G--;for(;0<ne-G;)j=Ze(j),ne--;for(;G--;){if(z===j||j!==null&&z===j.alternate){Ze=z;break t}z=Ze(z),j=Ze(j)}Ze=null}else Ze=null;W!==null&&s0(ae,X,W,Ze,!1),Pe!==null&&tn!==null&&s0(ae,tn,Pe,Ze,!0)}}e:{if(X=K?Qt(K):window,W=X.nodeName&&X.nodeName.toLowerCase(),W==="select"||W==="input"&&X.type==="file")var Lt=Tg;else if(bg(X))if(Sg)Lt=OS;else{Lt=DS;var ze=kS}else W=X.nodeName,!W||W.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?K&&$a(K.elementType)&&(Lt=Tg):Lt=MS;if(Lt&&(Lt=Lt(t,K))){Eg(ae,Lt,a,Z);break e}ze&&ze(t,X,K),t==="focusout"&&K&&X.type==="number"&&K.memoizedProps.value!=null&&ll(X,"number",X.value)}switch(ze=K?Qt(K):window,t){case"focusin":(bg(ze)||ze.contentEditable==="true")&&(io=ze,Rh=K,bl=null);break;case"focusout":bl=Rh=io=null;break;case"mousedown":Ch=!0;break;case"contextmenu":case"mouseup":case"dragend":Ch=!1,kg(ae,a,Z);break;case"selectionchange":if(LS)break;case"keydown":case"keyup":kg(ae,a,Z)}var ft;if(Bt)e:{switch(t){case"compositionstart":var At="onCompositionStart";break e;case"compositionend":At="onCompositionEnd";break e;case"compositionupdate":At="onCompositionUpdate";break e}At=void 0}else ro?va(t,a)&&(At="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(At="onCompositionStart");At&&(vi&&a.locale!=="ko"&&(ro||At!=="onCompositionStart"?At==="onCompositionEnd"&&ro&&(ft=fl()):(mi=Z,hl="value"in mi?mi.value:mi.textContent,ro=!0)),ze=Yc(K,At),0<ze.length&&(At=new yi(At,t,null,a,Z),ae.push({event:At,listeners:ze}),ft?At.data=ft:(ft=no(a),ft!==null&&(At.data=ft)))),(ft=qr?CS(t,a):IS(t,a))&&(At=Yc(K,"onBeforeInput"),0<At.length&&(ze=new yi("onBeforeInput","beforeinput",null,a,Z),ae.push({event:ze,listeners:At}),ze.data=ft)),_1(ae,t,K,a,Z)}r0(ae,r)})}function Gl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Yc(t,r){for(var a=r+"Capture",l=[];t!==null;){var d=t,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=Zr(t,a),d!=null&&l.unshift(Gl(t,d,f)),d=Zr(t,r),d!=null&&l.push(Gl(t,d,f))),t.tag===3)return l;t=t.return}return[]}function S1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function s0(t,r,a,l,d){for(var f=r._reactName,b=[];a!==null&&a!==l;){var A=a,M=A.alternate,K=A.stateNode;if(A=A.tag,M!==null&&M===l)break;A!==5&&A!==26&&A!==27||K===null||(M=K,d?(K=Zr(a,f),K!=null&&b.unshift(Gl(a,K,M))):d||(K=Zr(a,f),K!=null&&b.push(Gl(a,K,M)))),a=a.return}b.length!==0&&t.push({event:r,listeners:b})}var w1=/\r\n?/g,A1=/\u0000|\uFFFD/g;function a0(t){return(typeof t=="string"?t:""+t).replace(w1,`
`).replace(A1,"")}function o0(t,r){return r=a0(r),a0(t)===r}function en(t,r,a,l,d,f){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||vr(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&vr(t,""+l);break;case"className":xr(t,"class",l);break;case"tabIndex":xr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":xr(t,a,l);break;case"style":cl(t,l,f);break;case"data":if(r!=="object"){xr(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Wa(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(r!=="input"&&en(t,r,"name",d.name,d,null),en(t,r,"formEncType",d.formEncType,d,null),en(t,r,"formMethod",d.formMethod,d,null),en(t,r,"formTarget",d.formTarget,d,null)):(en(t,r,"encType",d.encType,d,null),en(t,r,"method",d.method,d,null),en(t,r,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Wa(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Jr);break;case"onScroll":l!=null&&bt("scroll",t);break;case"onScrollEnd":l!=null&&bt("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Wa(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":bt("beforetoggle",t),bt("toggle",t),Ya(t,"popover",l);break;case"xlinkActuate":Mn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Mn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Mn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Mn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Mn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Mn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Mn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Mn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Mn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ya(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Yu.get(a)||a,Ya(t,a,l))}}function Zf(t,r,a,l,d,f){switch(a){case"style":cl(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?vr(t,l):(typeof l=="number"||typeof l=="bigint")&&vr(t,""+l);break;case"onScroll":l!=null&&bt("scroll",t);break;case"onScrollEnd":l!=null&&bt("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Jr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hr.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),r=a.slice(2,d?a.length-7:void 0),f=t[ie]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(r,f,d),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,d);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ya(t,a,l)}}}function er(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":bt("error",t),bt("load",t);var l=!1,d=!1,f;for(f in a)if(a.hasOwnProperty(f)){var b=a[f];if(b!=null)switch(f){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:en(t,r,f,b,a,null)}}d&&en(t,r,"srcSet",a.srcSet,a,null),l&&en(t,r,"src",a.src,a,null);return;case"input":bt("invalid",t);var A=f=b=d=null,M=null,K=null;for(l in a)if(a.hasOwnProperty(l)){var Z=a[l];if(Z!=null)switch(l){case"name":d=Z;break;case"type":b=Z;break;case"checked":M=Z;break;case"defaultChecked":K=Z;break;case"value":f=Z;break;case"defaultValue":A=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,r));break;default:en(t,r,l,Z,a,null)}}Gu(t,f,A,M,K,b,d,!1);return;case"select":bt("invalid",t),l=b=f=null;for(d in a)if(a.hasOwnProperty(d)&&(A=a[d],A!=null))switch(d){case"value":f=A;break;case"defaultValue":b=A;break;case"multiple":l=A;default:en(t,r,d,A,a,null)}r=f,a=b,t.multiple=!!l,r!=null?ds(t,!!l,r,!1):a!=null&&ds(t,!!l,a,!0);return;case"textarea":bt("invalid",t),f=d=l=null;for(b in a)if(a.hasOwnProperty(b)&&(A=a[b],A!=null))switch(b){case"value":l=A;break;case"defaultValue":d=A;break;case"children":f=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(91));break;default:en(t,r,b,A,a,null)}hs(t,l,d,f);return;case"option":for(M in a)if(a.hasOwnProperty(M)&&(l=a[M],l!=null))switch(M){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:en(t,r,M,l,a,null)}return;case"dialog":bt("beforetoggle",t),bt("toggle",t),bt("cancel",t),bt("close",t);break;case"iframe":case"object":bt("load",t);break;case"video":case"audio":for(l=0;l<Hl.length;l++)bt(Hl[l],t);break;case"image":bt("error",t),bt("load",t);break;case"details":bt("toggle",t);break;case"embed":case"source":case"link":bt("error",t),bt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in a)if(a.hasOwnProperty(K)&&(l=a[K],l!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:en(t,r,K,l,a,null)}return;default:if($a(r)){for(Z in a)a.hasOwnProperty(Z)&&(l=a[Z],l!==void 0&&Zf(t,r,Z,l,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(l=a[A],l!=null&&en(t,r,A,l,a,null))}function R1(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,b=null,A=null,M=null,K=null,Z=null;for(W in a){var ae=a[W];if(a.hasOwnProperty(W)&&ae!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":M=ae;default:l.hasOwnProperty(W)||en(t,r,W,null,l,ae)}}for(var X in l){var W=l[X];if(ae=a[X],l.hasOwnProperty(X)&&(W!=null||ae!=null))switch(X){case"type":f=W;break;case"name":d=W;break;case"checked":K=W;break;case"defaultChecked":Z=W;break;case"value":b=W;break;case"defaultValue":A=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,r));break;default:W!==ae&&en(t,r,X,W,l,ae)}}Xa(t,b,A,M,K,Z,f,d);return;case"select":W=b=A=X=null;for(f in a)if(M=a[f],a.hasOwnProperty(f)&&M!=null)switch(f){case"value":break;case"multiple":W=M;default:l.hasOwnProperty(f)||en(t,r,f,null,l,M)}for(d in l)if(f=l[d],M=a[d],l.hasOwnProperty(d)&&(f!=null||M!=null))switch(d){case"value":X=f;break;case"defaultValue":A=f;break;case"multiple":b=f;default:f!==M&&en(t,r,d,f,l,M)}r=A,a=b,l=W,X!=null?ds(t,!!a,X,!1):!!l!=!!a&&(r!=null?ds(t,!!a,r,!0):ds(t,!!a,a?[]:"",!1));return;case"textarea":W=X=null;for(A in a)if(d=a[A],a.hasOwnProperty(A)&&d!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:en(t,r,A,null,l,d)}for(b in l)if(d=l[b],f=a[b],l.hasOwnProperty(b)&&(d!=null||f!=null))switch(b){case"value":X=d;break;case"defaultValue":W=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(s(91));break;default:d!==f&&en(t,r,b,d,l,f)}Ku(t,X,W);return;case"option":for(var Pe in a)if(X=a[Pe],a.hasOwnProperty(Pe)&&X!=null&&!l.hasOwnProperty(Pe))switch(Pe){case"selected":t.selected=!1;break;default:en(t,r,Pe,null,l,X)}for(M in l)if(X=l[M],W=a[M],l.hasOwnProperty(M)&&X!==W&&(X!=null||W!=null))switch(M){case"selected":t.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:en(t,r,M,X,l,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ze in a)X=a[Ze],a.hasOwnProperty(Ze)&&X!=null&&!l.hasOwnProperty(Ze)&&en(t,r,Ze,null,l,X);for(K in l)if(X=l[K],W=a[K],l.hasOwnProperty(K)&&X!==W&&(X!=null||W!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,r));break;default:en(t,r,K,X,l,W)}return;default:if($a(r)){for(var tn in a)X=a[tn],a.hasOwnProperty(tn)&&X!==void 0&&!l.hasOwnProperty(tn)&&Zf(t,r,tn,void 0,l,X);for(Z in l)X=l[Z],W=a[Z],!l.hasOwnProperty(Z)||X===W||X===void 0&&W===void 0||Zf(t,r,Z,X,l,W);return}}for(var z in a)X=a[z],a.hasOwnProperty(z)&&X!=null&&!l.hasOwnProperty(z)&&en(t,r,z,null,l,X);for(ae in l)X=l[ae],W=a[ae],!l.hasOwnProperty(ae)||X===W||X==null&&W==null||en(t,r,ae,X,l,W)}function l0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function C1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var d=a[l],f=d.transferSize,b=d.initiatorType,A=d.duration;if(f&&A&&l0(b)){for(b=0,A=d.responseEnd,l+=1;l<a.length;l++){var M=a[l],K=M.startTime;if(K>A)break;var Z=M.transferSize,ae=M.initiatorType;Z&&l0(ae)&&(M=M.responseEnd,b+=Z*(M<A?1:(A-K)/(M-K)))}if(--l,r+=8*(f+b)/(d.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var em=null,tm=null;function Xc(t){return t.nodeType===9?t:t.ownerDocument}function u0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function c0(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function nm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var rm=null;function I1(){var t=window.event;return t&&t.type==="popstate"?t===rm?!1:(rm=t,!0):(rm=null,!1)}var d0=typeof setTimeout=="function"?setTimeout:void 0,x1=typeof clearTimeout=="function"?clearTimeout:void 0,h0=typeof Promise=="function"?Promise:void 0,N1=typeof queueMicrotask=="function"?queueMicrotask:typeof h0<"u"?function(t){return h0.resolve(null).then(t).catch(k1)}:d0;function k1(t){setTimeout(function(){throw t})}function Vs(t){return t==="head"}function f0(t,r){var a=r,l=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(d),Do(r);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Kl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Kl(a);for(var f=a.firstChild;f;){var b=f.nextSibling,A=f.nodeName;f[gt]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=b}}else a==="body"&&Kl(t.ownerDocument.body);a=d}while(a);Do(r)}function m0(t,r){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function im(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":im(a),nn(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function D1(t,r,a,l){for(;t.nodeType===1;){var d=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[gt])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Xr(t.nextSibling),t===null)break}return null}function M1(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Xr(t.nextSibling),t===null))return null;return t}function p0(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Xr(t.nextSibling),t===null))return null;return t}function sm(t){return t.data==="$?"||t.data==="$~"}function am(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function O1(t,r){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||a.readyState!=="loading")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Xr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var om=null;function g0(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(r===0)return Xr(t.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}t=t.nextSibling}return null}function y0(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return t;r--}else a!=="/$"&&a!=="/&"||r++}t=t.previousSibling}return null}function v0(t,r,a){switch(r=Xc(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Kl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);nn(t)}var $r=new Map,_0=new Set;function $c(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ji=ce.d;ce.d={f:V1,r:L1,D:j1,C:P1,L:U1,m:z1,X:q1,S:B1,M:F1};function V1(){var t=Ji.f(),r=Bc();return t||r}function L1(t){var r=cn(t);r!==null&&r.tag===5&&r.type==="form"?Ly(r):Ji.r(t)}var xo=typeof document>"u"?null:document;function b0(t,r,a){var l=xo;if(l&&typeof r=="string"&&r){var d=yr(r);d='link[rel="'+t+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),_0.has(d)||(_0.add(d),t={rel:t,crossOrigin:a,href:r},l.querySelector(d)===null&&(r=l.createElement("link"),er(r,"link",t),ln(r),l.head.appendChild(r)))}}function j1(t){Ji.D(t),b0("dns-prefetch",t,null)}function P1(t,r){Ji.C(t,r),b0("preconnect",t,r)}function U1(t,r,a){Ji.L(t,r,a);var l=xo;if(l&&t&&r){var d='link[rel="preload"][as="'+yr(r)+'"]';r==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+yr(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+yr(a.imageSizes)+'"]')):d+='[href="'+yr(t)+'"]';var f=d;switch(r){case"style":f=No(t);break;case"script":f=ko(t)}$r.has(f)||(t=T({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),$r.set(f,t),l.querySelector(d)!==null||r==="style"&&l.querySelector(Ql(f))||r==="script"&&l.querySelector(Yl(f))||(r=l.createElement("link"),er(r,"link",t),ln(r),l.head.appendChild(r)))}}function z1(t,r){Ji.m(t,r);var a=xo;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",d='link[rel="modulepreload"][as="'+yr(l)+'"][href="'+yr(t)+'"]',f=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=ko(t)}if(!$r.has(f)&&(t=T({rel:"modulepreload",href:t},r),$r.set(f,t),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Yl(f)))return}l=a.createElement("link"),er(l,"link",t),ln(l),a.head.appendChild(l)}}}function B1(t,r,a){Ji.S(t,r,a);var l=xo;if(l&&t){var d=Xn(l).hoistableStyles,f=No(t);r=r||"default";var b=d.get(f);if(!b){var A={loading:0,preload:null};if(b=l.querySelector(Ql(f)))A.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":r},a),(a=$r.get(f))&&lm(t,a);var M=b=l.createElement("link");ln(M),er(M,"link",t),M._p=new Promise(function(K,Z){M.onload=K,M.onerror=Z}),M.addEventListener("load",function(){A.loading|=1}),M.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Wc(b,r,l)}b={type:"stylesheet",instance:b,count:1,state:A},d.set(f,b)}}}function q1(t,r){Ji.X(t,r);var a=xo;if(a&&t){var l=Xn(a).hoistableScripts,d=ko(t),f=l.get(d);f||(f=a.querySelector(Yl(d)),f||(t=T({src:t,async:!0},r),(r=$r.get(d))&&um(t,r),f=a.createElement("script"),ln(f),er(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function F1(t,r){Ji.M(t,r);var a=xo;if(a&&t){var l=Xn(a).hoistableScripts,d=ko(t),f=l.get(d);f||(f=a.querySelector(Yl(d)),f||(t=T({src:t,async:!0,type:"module"},r),(r=$r.get(d))&&um(t,r),f=a.createElement("script"),ln(f),er(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function E0(t,r,a,l){var d=(d=Ae.current)?$c(d):null;if(!d)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=No(a.href),a=Xn(d).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=No(a.href);var f=Xn(d).hoistableStyles,b=f.get(t);if(b||(d=d.ownerDocument||d,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,b),(f=d.querySelector(Ql(t)))&&!f._p&&(b.instance=f,b.state.loading=5),$r.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},$r.set(t,a),f||H1(d,t,a,b.state))),r&&l===null)throw Error(s(528,""));return b}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ko(a),a=Xn(d).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function No(t){return'href="'+yr(t)+'"'}function Ql(t){return'link[rel="stylesheet"]['+t+"]"}function T0(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function H1(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),er(r,"link",a),ln(r),t.head.appendChild(r))}function ko(t){return'[src="'+yr(t)+'"]'}function Yl(t){return"script[async]"+t}function S0(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+yr(a.href)+'"]');if(l)return r.instance=l,ln(l),l;var d=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),ln(l),er(l,"style",d),Wc(l,a.precedence,t),r.instance=l;case"stylesheet":d=No(a.href);var f=t.querySelector(Ql(d));if(f)return r.state.loading|=4,r.instance=f,ln(f),f;l=T0(a),(d=$r.get(d))&&lm(l,d),f=(t.ownerDocument||t).createElement("link"),ln(f);var b=f;return b._p=new Promise(function(A,M){b.onload=A,b.onerror=M}),er(f,"link",l),r.state.loading|=4,Wc(f,a.precedence,t),r.instance=f;case"script":return f=ko(a.src),(d=t.querySelector(Yl(f)))?(r.instance=d,ln(d),d):(l=a,(d=$r.get(f))&&(l=T({},a),um(l,d)),t=t.ownerDocument||t,d=t.createElement("script"),ln(d),er(d,"link",l),t.head.appendChild(d),r.instance=d);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Wc(l,a.precedence,t));return r.instance}function Wc(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,f=d,b=0;b<l.length;b++){var A=l[b];if(A.dataset.precedence===r)f=A;else if(f!==d)break}f?f.parentNode.insertBefore(t,f.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function lm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function um(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Jc=null;function w0(t,r,a){if(Jc===null){var l=new Map,d=Jc=new Map;d.set(a,l)}else d=Jc,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),d=0;d<a.length;d++){var f=a[d];if(!(f[gt]||f[I]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var b=f.getAttribute(r)||"";b=t+b;var A=l.get(b);A?A.push(f):l.set(b,[f])}}return l}function A0(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function G1(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function R0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function K1(t,r,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=No(l.href),f=r.querySelector(Ql(d));if(f){r=f._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Zc.bind(t),r.then(t,t)),a.state.loading|=4,a.instance=f,ln(f);return}f=r.ownerDocument||r,l=T0(l),(d=$r.get(d))&&lm(l,d),f=f.createElement("link"),ln(f);var b=f;b._p=new Promise(function(A,M){b.onload=A,b.onerror=M}),er(f,"link",l),a.instance=f}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Zc.bind(t),r.addEventListener("load",a),r.addEventListener("error",a))}}var cm=0;function Q1(t,r){return t.stylesheets&&t.count===0&&td(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&td(t,t.stylesheets),t.unsuspend){var f=t.unsuspend;t.unsuspend=null,f()}},6e4+r);0<t.imgBytes&&cm===0&&(cm=62500*C1());var d=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&td(t,t.stylesheets),t.unsuspend)){var f=t.unsuspend;t.unsuspend=null,f()}},(t.imgBytes>cm?50:800)+r);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function Zc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)td(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ed=null;function td(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ed=new Map,r.forEach(Y1,t),ed=null,Zc.call(t))}function Y1(t,r){if(!(r.state.loading&4)){var a=ed.get(t);if(a)var l=a.get(null);else{a=new Map,ed.set(t,a);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var b=d[f];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),l=b)}l&&a.set(null,l)}d=r.instance,b=d.getAttribute("data-precedence"),f=a.get(b)||l,f===l&&a.set(null,d),a.set(b,d),this.count++,l=Zc.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),f?f.parentNode.insertBefore(d,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),r.state.loading|=4}}var Xl={$$typeof:re,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function X1(t,r,a,l,d,f,b,A,M){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=J(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=J(0),this.hiddenUpdates=J(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function C0(t,r,a,l,d,f,b,A,M,K,Z,ae){return t=new X1(t,r,a,b,M,K,Z,ae,A),r=1,f===!0&&(r|=24),f=kr(3,null,null,r),t.current=f,f.stateNode=t,r=qh(),r.refCount++,t.pooledCache=r,r.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:r},Kh(f),t}function I0(t){return t?(t=oo,t):oo}function x0(t,r,a,l,d,f){d=I0(d),l.context===null?l.context=d:l.pendingContext=d,l=ws(r),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=As(t,l,r),a!==null&&(Sr(a,t,r),Cl(a,t,r))}function N0(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function dm(t,r){N0(t,r),(t=t.alternate)&&N0(t,r)}function k0(t){if(t.tag===13||t.tag===31){var r=Ea(t,67108864);r!==null&&Sr(r,t,67108864),dm(t,67108864)}}function D0(t){if(t.tag===13||t.tag===31){var r=Lr();r=Ot(r);var a=Ea(t,r);a!==null&&Sr(a,t,r),dm(t,r)}}var nd=!0;function $1(t,r,a,l){var d=Y.T;Y.T=null;var f=ce.p;try{ce.p=2,hm(t,r,a,l)}finally{ce.p=f,Y.T=d}}function W1(t,r,a,l){var d=Y.T;Y.T=null;var f=ce.p;try{ce.p=8,hm(t,r,a,l)}finally{ce.p=f,Y.T=d}}function hm(t,r,a,l){if(nd){var d=fm(l);if(d===null)Jf(t,r,l,rd,a),O0(t,l);else if(Z1(d,t,r,a,l))l.stopPropagation();else if(O0(t,l),r&4&&-1<J1.indexOf(t)){for(;d!==null;){var f=cn(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var b=mn(f.pendingLanes);if(b!==0){var A=f;for(A.pendingLanes|=2,A.entangledLanes|=2;b;){var M=1<<31-xt(b);A.entanglements[1]|=M,b&=~M}Ti(f),(qt&6)===0&&(Uc=Tt()+500,Fl(0))}}break;case 31:case 13:A=Ea(f,2),A!==null&&Sr(A,f,2),Bc(),dm(f,2)}if(f=fm(l),f===null&&Jf(t,r,l,rd,a),f===d)break;d=f}d!==null&&l.stopPropagation()}else Jf(t,r,l,null,a)}}function fm(t){return t=zr(t),mm(t)}var rd=null;function mm(t){if(rd=null,t=Rn(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=h(r),t!==null)return t;t=null}else if(a===31){if(t=g(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return rd=t,null}function M0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kn()){case Vt:return 2;case yn:return 8;case Qe:case pt:return 32;case Sn:return 268435456;default:return 32}default:return 32}}var pm=!1,Ls=null,js=null,Ps=null,$l=new Map,Wl=new Map,Us=[],J1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function O0(t,r){switch(t){case"focusin":case"focusout":Ls=null;break;case"dragenter":case"dragleave":js=null;break;case"mouseover":case"mouseout":Ps=null;break;case"pointerover":case"pointerout":$l.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wl.delete(r.pointerId)}}function Jl(t,r,a,l,d,f){return t===null||t.nativeEvent!==f?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[d]},r!==null&&(r=cn(r),r!==null&&k0(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),t)}function Z1(t,r,a,l,d){switch(r){case"focusin":return Ls=Jl(Ls,t,r,a,l,d),!0;case"dragenter":return js=Jl(js,t,r,a,l,d),!0;case"mouseover":return Ps=Jl(Ps,t,r,a,l,d),!0;case"pointerover":var f=d.pointerId;return $l.set(f,Jl($l.get(f)||null,t,r,a,l,d)),!0;case"gotpointercapture":return f=d.pointerId,Wl.set(f,Jl(Wl.get(f)||null,t,r,a,l,d)),!0}return!1}function V0(t){var r=Rn(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=h(a),r!==null){t.blockedOn=r,$e(t.priority,function(){D0(a)});return}}else if(r===31){if(r=g(a),r!==null){t.blockedOn=r,$e(t.priority,function(){D0(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function id(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=fm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);dl=l,a.target.dispatchEvent(l),dl=null}else return r=cn(a),r!==null&&k0(r),t.blockedOn=a,!1;r.shift()}return!0}function L0(t,r,a){id(t)&&a.delete(r)}function ew(){pm=!1,Ls!==null&&id(Ls)&&(Ls=null),js!==null&&id(js)&&(js=null),Ps!==null&&id(Ps)&&(Ps=null),$l.forEach(L0),Wl.forEach(L0)}function sd(t,r){t.blockedOn===r&&(t.blockedOn=null,pm||(pm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,ew)))}var ad=null;function j0(t){ad!==t&&(ad=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ad===t&&(ad=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],d=t[r+2];if(typeof l!="function"){if(mm(l||a)===null)continue;break}var f=cn(a);f!==null&&(t.splice(r,3),r-=3,ff(f,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function Do(t){function r(M){return sd(M,t)}Ls!==null&&sd(Ls,t),js!==null&&sd(js,t),Ps!==null&&sd(Ps,t),$l.forEach(r),Wl.forEach(r);for(var a=0;a<Us.length;a++){var l=Us[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Us.length&&(a=Us[0],a.blockedOn===null);)V0(a),a.blockedOn===null&&Us.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],f=a[l+1],b=d[ie]||null;if(typeof f=="function")b||j0(a);else if(b){var A=null;if(f&&f.hasAttribute("formAction")){if(d=f,b=f[ie]||null)A=b.formAction;else if(mm(d)!==null)continue}else A=b.action;typeof A=="function"?a[l+1]=A:(a.splice(l,3),l-=3),j0(a)}}}function P0(){function t(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(b){return d=b})},focusReset:"manual",scroll:"manual"})}function r(){d!==null&&(d(),d=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),d!==null&&(d(),d=null)}}}function gm(t){this._internalRoot=t}od.prototype.render=gm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=Lr();x0(a,l,t,r,null,null)},od.prototype.unmount=gm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;x0(t.current,2,null,t,null,null),Bc(),r[_e]=null}};function od(t){this._internalRoot=t}od.prototype.unstable_scheduleHydration=function(t){if(t){var r=yt();t={blockedOn:null,target:t,priority:r};for(var a=0;a<Us.length&&r!==0&&r<Us[a].priority;a++);Us.splice(a,0,t),a===0&&V0(t)}};var U0=e.version;if(U0!=="19.2.0")throw Error(s(527,U0,"19.2.0"));ce.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=m(r),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var tw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ld.isDisabled&&ld.supportsFiber)try{Wt=ld.inject(tw),Pt=ld}catch{}}return eu.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",d=Ky,f=Qy,b=Yy;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(f=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError)),r=C0(t,1,!1,null,null,a,l,null,d,f,b,P0),t[_e]=r.current,Wf(t),new gm(r)},eu.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,d="",f=Ky,b=Qy,A=Yy,M=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.formState!==void 0&&(M=a.formState)),r=C0(t,1,!0,r,a??null,l,d,M,f,b,A,P0),r.context=I0(null),a=r.current,l=Lr(),l=Ot(l),d=ws(l),d.callback=null,As(a,d,l),a=l,r.current.lanes=a,de(r,a),Ti(r),t[_e]=r.current,Wf(t),new od(r)},eu.version="19.2.0",eu}var X0;function cw(){if(X0)return _m.exports;X0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),_m.exports=uw(),_m.exports}var dw=cw();const hw=gp(dw),Wd=()=>_.jsxs("div",{style:{padding:"1.5rem 0",display:"flex",justifyContent:"center",alignItems:"center"},children:[_.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",border:"3px solid #e5e7eb",borderTopColor:"#2EC483",animation:"spin 1s linear infinite"}}),_.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `})]}),fw=()=>{};var $0={};const Ub=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},mw=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],h=i[n++],g=i[n++],p=((o&7)<<18|(u&63)<<12|(h&63)<<6|g&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=i[n++],h=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},zb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],h=o+1<i.length,g=h?i[o+1]:0,p=o+2<i.length,m=p?i[o+2]:0,v=u>>2,T=(u&3)<<4|g>>4;let S=(g&15)<<2|m>>6,w=m&63;p||(w=64,h||(S=64)),s.push(n[v],n[T],n[S],n[w])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Ub(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):mw(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],g=o<i.length?n[i.charAt(o)]:0;++o;const m=o<i.length?n[i.charAt(o)]:64;++o;const T=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||g==null||m==null||T==null)throw new pw;const S=u<<2|g>>4;if(s.push(S),m!==64){const w=g<<4&240|m>>2;if(s.push(w),T!==64){const L=m<<6&192|T;s.push(L)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class pw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gw=function(i){const e=Ub(i);return zb.encodeByteArray(e,!0)},Id=function(i){return gw(i).replace(/\./g,"")},Bb=function(i){try{return zb.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function yw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const vw=()=>yw().__FIREBASE_DEFAULTS__,_w=()=>{if(typeof process>"u"||typeof $0>"u")return;const i=$0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},bw=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Bb(i[1]);return e&&JSON.parse(e)},Jd=()=>{try{return fw()||vw()||_w()||bw()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},qb=i=>Jd()?.emulatorHosts?.[i],Fb=i=>{const e=qb(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Hb=()=>Jd()?.config,Gb=i=>Jd()?.[`_${i}`];class Ew{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function aa(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function vp(i){return(await fetch(i,{credentials:"include"})).ok}function Tw(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Id(JSON.stringify(n)),Id(JSON.stringify(h)),""].join(".")}const cu={};function Sw(){const i={prod:[],emulator:[]};for(const e of Object.keys(cu))cu[e]?i.emulator.push(e):i.prod.push(e);return i}function ww(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let W0=!1;function _p(i,e){if(typeof window>"u"||typeof document>"u"||!aa(window.location.host)||cu[i]===e||cu[i]||W0)return;cu[i]=e;function n(S){return`__firebase__banner__${S}`}const s="__firebase__banner",u=Sw().prod.length>0;function h(){const S=document.getElementById(s);S&&S.remove()}function g(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,w){S.setAttribute("width","24"),S.setAttribute("id",w),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function m(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{W0=!0,h()},S}function v(S,w){S.setAttribute("id",w),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=ww(s),w=n("text"),L=document.getElementById(w)||document.createElement("span"),F=n("learnmore"),U=document.getElementById(F)||document.createElement("a"),ge=n("preprendIcon"),he=document.getElementById(ge)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const re=S.element;g(re),v(U,F);const Ee=m();p(he,ge),re.append(he,L,U,Ee),document.body.appendChild(re)}u?(L.innerText="Preview backend disconnected.",he.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(he.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function dr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Aw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dr())}function Rw(){const i=Jd()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Cw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Iw(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function xw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Nw(){const i=dr();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function kw(){return!Rw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Dw(){try{return typeof indexedDB=="object"}catch{return!1}}function Mw(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const Ow="FirebaseError";class Mi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Ow,Object.setPrototypeOf(this,Mi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Iu.prototype.create)}}class Iu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?Vw(u,s):"Error",g=`${this.serviceName}: ${h} (${o}).`;return new Mi(o,g,s)}}function Vw(i,e){return i.replace(Lw,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const Lw=/\{\$([^}]+)}/g;function jw(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Pa(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],h=e[o];if(J0(u)&&J0(h)){if(!Pa(u,h))return!1}else if(u!==h)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function J0(i){return i!==null&&typeof i=="object"}function xu(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function iu(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function su(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function Pw(i,e){const n=new Uw(i,e);return n.subscribe.bind(n)}class Uw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");zw(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Sm),o.error===void 0&&(o.error=Sm),o.complete===void 0&&(o.complete=Sm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zw(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Sm(){}function an(i){return i&&i._delegate?i._delegate:i}class Zs{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Oa="[DEFAULT]";class Bw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Ew;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Fw(e))try{this.getOrInitializeService({instanceIdentifier:Oa})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Oa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oa){return this.instances.has(e)}getOptions(e=Oa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,h]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);s===g&&h.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:qw(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Oa){return this.component?this.component.multipleInstances?e:Oa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qw(i){return i===Oa?void 0:i}function Fw(i){return i.instantiationMode==="EAGER"}class Hw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Bw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Rt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Rt||(Rt={}));const Gw={debug:Rt.DEBUG,verbose:Rt.VERBOSE,info:Rt.INFO,warn:Rt.WARN,error:Rt.ERROR,silent:Rt.SILENT},Kw=Rt.INFO,Qw={[Rt.DEBUG]:"log",[Rt.VERBOSE]:"log",[Rt.INFO]:"info",[Rt.WARN]:"warn",[Rt.ERROR]:"error"},Yw=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=Qw[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bp{constructor(e){this.name=e,this._logLevel=Kw,this._logHandler=Yw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Gw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Rt.DEBUG,...e),this._logHandler(this,Rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Rt.VERBOSE,...e),this._logHandler(this,Rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Rt.INFO,...e),this._logHandler(this,Rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Rt.WARN,...e),this._logHandler(this,Rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Rt.ERROR,...e),this._logHandler(this,Rt.ERROR,...e)}}const Xw=(i,e)=>e.some(n=>i instanceof n);let Z0,e_;function $w(){return Z0||(Z0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ww(){return e_||(e_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Kb=new WeakMap,zm=new WeakMap,Qb=new WeakMap,wm=new WeakMap,Ep=new WeakMap;function Jw(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",h)},u=()=>{n(Ys(i.result)),o()},h=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&Kb.set(n,i)}).catch(()=>{}),Ep.set(e,i),e}function Zw(i){if(zm.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",h),i.removeEventListener("abort",h)},u=()=>{n(),o()},h=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",h),i.addEventListener("abort",h)});zm.set(i,e)}let Bm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return zm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Qb.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ys(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function eA(i){Bm=i(Bm)}function tA(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Am(this),e,...n);return Qb.set(s,e.sort?e.sort():[e]),Ys(s)}:Ww().includes(i)?function(...e){return i.apply(Am(this),e),Ys(Kb.get(this))}:function(...e){return Ys(i.apply(Am(this),e))}}function nA(i){return typeof i=="function"?tA(i):(i instanceof IDBTransaction&&Zw(i),Xw(i,$w())?new Proxy(i,Bm):i)}function Ys(i){if(i instanceof IDBRequest)return Jw(i);if(wm.has(i))return wm.get(i);const e=nA(i);return e!==i&&(wm.set(i,e),Ep.set(e,i)),e}const Am=i=>Ep.get(i);function rA(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const h=indexedDB.open(i,e),g=Ys(h);return s&&h.addEventListener("upgradeneeded",p=>{s(Ys(h.result),p.oldVersion,p.newVersion,Ys(h.transaction),p)}),n&&h.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),g}const iA=["get","getKey","getAll","getAllKeys","count"],sA=["put","add","delete","clear"],Rm=new Map;function t_(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Rm.get(e))return Rm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=sA.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||iA.includes(n)))return;const u=async function(h,...g){const p=this.transaction(h,o?"readwrite":"readonly");let m=p.store;return s&&(m=m.index(g.shift())),(await Promise.all([m[n](...g),o&&p.done]))[0]};return Rm.set(e,u),u}eA(i=>({...i,get:(e,n,s)=>t_(e,n)||i.get(e,n,s),has:(e,n)=>!!t_(e,n)||i.has(e,n)}));class aA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oA(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function oA(i){return i.getComponent()?.type==="VERSION"}const qm="@firebase/app",n_="0.14.6";const is=new bp("@firebase/app"),lA="@firebase/app-compat",uA="@firebase/analytics-compat",cA="@firebase/analytics",dA="@firebase/app-check-compat",hA="@firebase/app-check",fA="@firebase/auth",mA="@firebase/auth-compat",pA="@firebase/database",gA="@firebase/data-connect",yA="@firebase/database-compat",vA="@firebase/functions",_A="@firebase/functions-compat",bA="@firebase/installations",EA="@firebase/installations-compat",TA="@firebase/messaging",SA="@firebase/messaging-compat",wA="@firebase/performance",AA="@firebase/performance-compat",RA="@firebase/remote-config",CA="@firebase/remote-config-compat",IA="@firebase/storage",xA="@firebase/storage-compat",NA="@firebase/firestore",kA="@firebase/ai",DA="@firebase/firestore-compat",MA="firebase",OA="12.6.0";const Fm="[DEFAULT]",VA={[qm]:"fire-core",[lA]:"fire-core-compat",[cA]:"fire-analytics",[uA]:"fire-analytics-compat",[hA]:"fire-app-check",[dA]:"fire-app-check-compat",[fA]:"fire-auth",[mA]:"fire-auth-compat",[pA]:"fire-rtdb",[gA]:"fire-data-connect",[yA]:"fire-rtdb-compat",[vA]:"fire-fn",[_A]:"fire-fn-compat",[bA]:"fire-iid",[EA]:"fire-iid-compat",[TA]:"fire-fcm",[SA]:"fire-fcm-compat",[wA]:"fire-perf",[AA]:"fire-perf-compat",[RA]:"fire-rc",[CA]:"fire-rc-compat",[IA]:"fire-gcs",[xA]:"fire-gcs-compat",[NA]:"fire-fst",[DA]:"fire-fst-compat",[kA]:"fire-vertex","fire-js":"fire-js",[MA]:"fire-js-all"};const yu=new Map,LA=new Map,Hm=new Map;function r_(i,e){try{i.container.addComponent(e)}catch(n){is.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Ua(i){const e=i.name;if(Hm.has(e))return is.debug(`There were multiple attempts to register component ${e}.`),!1;Hm.set(e,i);for(const n of yu.values())r_(n,i);for(const n of LA.values())r_(n,i);return!0}function Zd(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function jr(i){return i==null?!1:i.settings!==void 0}const jA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xs=new Iu("app","Firebase",jA);class PA{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Zs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xs.create("app-deleted",{appName:this._name})}}const Wo=OA;function Tp(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:Fm,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Xs.create("bad-app-name",{appName:String(o)});if(n||(n=Hb()),!n)throw Xs.create("no-options");const u=yu.get(o);if(u){if(Pa(n,u.options)&&Pa(s,u.config))return u;throw Xs.create("duplicate-app",{appName:o})}const h=new Hw(o);for(const p of Hm.values())h.addComponent(p);const g=new PA(n,s,h);return yu.set(o,g),g}function eh(i=Fm){const e=yu.get(i);if(!e&&i===Fm&&Hb())return Tp();if(!e)throw Xs.create("no-app",{appName:i});return e}function Yb(){return Array.from(yu.values())}function wi(i,e,n){let s=VA[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),is.warn(h.join(" "));return}Ua(new Zs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const UA="firebase-heartbeat-database",zA=1,vu="firebase-heartbeat-store";let Cm=null;function Xb(){return Cm||(Cm=rA(UA,zA,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(vu)}catch(n){console.warn(n)}}}}).catch(i=>{throw Xs.create("idb-open",{originalErrorMessage:i.message})})),Cm}async function BA(i){try{const n=(await Xb()).transaction(vu),s=await n.objectStore(vu).get($b(i));return await n.done,s}catch(e){if(e instanceof Mi)is.warn(e.message);else{const n=Xs.create("idb-get",{originalErrorMessage:e?.message});is.warn(n.message)}}}async function i_(i,e){try{const s=(await Xb()).transaction(vu,"readwrite");await s.objectStore(vu).put(e,$b(i)),await s.done}catch(n){if(n instanceof Mi)is.warn(n.message);else{const s=Xs.create("idb-set",{originalErrorMessage:n?.message});is.warn(s.message)}}}function $b(i){return`${i.name}!${i.options.appId}`}const qA=1024,FA=30;class HA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new KA(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=s_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>FA){const o=QA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){is.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=s_(),{heartbeatsToSend:n,unsentEntries:s}=GA(this._heartbeatsCache.heartbeats),o=Id(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return is.warn(e),""}}}function s_(){return new Date().toISOString().substring(0,10)}function GA(i,e=qA){const n=[];let s=i.slice();for(const o of i){const u=n.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),a_(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),a_(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class KA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Dw()?Mw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await BA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return i_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return i_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function a_(i){return Id(JSON.stringify({version:2,heartbeats:i})).length}function QA(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}function YA(i){Ua(new Zs("platform-logger",e=>new aA(e),"PRIVATE")),Ua(new Zs("heartbeat",e=>new HA(e),"PRIVATE")),wi(qm,n_,i),wi(qm,n_,"esm2020"),wi("fire-js","")}YA("");var XA="firebase",$A="12.6.0";wi(XA,$A,"app");function Wb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WA=Wb,Jb=new Iu("auth","Firebase",Wb());const xd=new bp("@firebase/auth");function JA(i,...e){xd.logLevel<=Rt.WARN&&xd.warn(`Auth (${Wo}): ${i}`,...e)}function gd(i,...e){xd.logLevel<=Rt.ERROR&&xd.error(`Auth (${Wo}): ${i}`,...e)}function ui(i,...e){throw Sp(i,...e)}function Ai(i,...e){return Sp(i,...e)}function Zb(i,e,n){const s={...WA(),[e]:n};return new Iu("auth","Firebase",s).create(e,{appName:i.name})}function ns(i){return Zb(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sp(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return Jb.create(i,...e)}function tt(i,e,...n){if(!i)throw Sp(e,...n)}function Zi(i){const e="INTERNAL ASSERTION FAILED: "+i;throw gd(e),new Error(e)}function ss(i,e){i||Zi(e)}function Gm(){return typeof self<"u"&&self.location?.href||""}function ZA(){return o_()==="http:"||o_()==="https:"}function o_(){return typeof self<"u"&&self.location?.protocol||null}function eR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZA()||Iw()||"connection"in navigator)?navigator.onLine:!0}function tR(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class Nu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ss(n>e,"Short delay should be less than long delay!"),this.isMobile=Aw()||xw()}get(){return eR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function wp(i,e){ss(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class eE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const nR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const rR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],iR=new Nu(3e4,6e4);function ls(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Oi(i,e,n,s,o={}){return tE(i,o,async()=>{let u={},h={};s&&(e==="GET"?h=s:u={body:JSON.stringify(s)});const g=xu({key:i.config.apiKey,...h}).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const m={method:e,headers:p,...u};return Cw()||(m.referrerPolicy="no-referrer"),i.emulatorConfig&&aa(i.emulatorConfig.host)&&(m.credentials="include"),eE.fetch()(await nE(i,i.config.apiHost,n,g),m)})}async function tE(i,e,n){i._canInitEmulator=!1;const s={...nR,...e};try{const o=new aR(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw ud(i,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const g=u.ok?h.errorMessage:h.error.message,[p,m]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw ud(i,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw ud(i,"email-already-in-use",h);if(p==="USER_DISABLED")throw ud(i,"user-disabled",h);const v=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Zb(i,v,m);ui(i,v)}}catch(o){if(o instanceof Mi)throw o;ui(i,"network-request-failed",{message:String(o)})}}async function ku(i,e,n,s,o={}){const u=await Oi(i,e,n,s,o);return"mfaPendingCredential"in u&&ui(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function nE(i,e,n,s){const o=`${e}${n}?${s}`,u=i,h=u.config.emulator?wp(i.config,o):`${i.config.apiScheme}://${o}`;return rR.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function sR(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class aR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Ai(this.auth,"network-request-failed")),iR.get())})}}function ud(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Ai(i,e,s);return o.customData._tokenResponse=n,o}function l_(i){return i!==void 0&&i.enterprise!==void 0}class oR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return sR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function lR(i,e){return Oi(i,"GET","/v2/recaptchaConfig",ls(i,e))}async function uR(i,e){return Oi(i,"POST","/v1/accounts:delete",e)}async function Nd(i,e){return Oi(i,"POST","/v1/accounts:lookup",e)}function du(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cR(i,e=!1){const n=an(i),s=await n.getIdToken(e),o=Ap(s);tt(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u?.sign_in_provider;return{claims:o,token:s,authTime:du(Im(o.auth_time)),issuedAtTime:du(Im(o.iat)),expirationTime:du(Im(o.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Im(i){return Number(i)*1e3}function Ap(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return gd("JWT malformed, contained fewer than 3 sections"),null;try{const o=Bb(n);return o?JSON.parse(o):(gd("Failed to decode base64 JWT payload"),null)}catch(o){return gd("Caught error parsing JWT payload as JSON",o?.toString()),null}}function u_(i){const e=Ap(i);return tt(e,"internal-error"),tt(typeof e.exp<"u","internal-error"),tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Fo(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Mi&&dR(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function dR({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class hR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Km{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=du(this.lastLoginAt),this.creationTime=du(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function kd(i){const e=i.auth,n=await i.getIdToken(),s=await Fo(i,Nd(e,{idToken:n}));tt(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?rE(o.providerUserInfo):[],h=mR(i.providerData,u),g=i.isAnonymous,p=!(i.email&&o.passwordHash)&&!h?.length,m=g?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Km(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(i,v)}async function fR(i){const e=an(i);await kd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mR(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function rE(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function pR(i,e){const n=await tE(i,{},async()=>{const s=xu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,h=await nE(i,o,"/v1/token",`key=${u}`),g=await i._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:s};return i.emulatorConfig&&aa(i.emulatorConfig.host)&&(p.credentials="include"),eE.fetch()(h,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function gR(i,e){return Oi(i,"POST","/v2/accounts:revokeToken",ls(i,e))}class Uo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tt(e.idToken,"internal-error"),tt(typeof e.idToken<"u","internal-error"),tt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):u_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){tt(e.length!==0,"internal-error");const n=u_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await pR(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,h=new Uo;return s&&(tt(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(tt(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(tt(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Uo,this.toJSON())}_performRefresh(){return Zi("not implemented")}}function Bs(i,e){tt(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class li{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new hR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Km(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Fo(this,this.stsTokenManager.getToken(this.auth,e));return tt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return cR(this,e)}reload(){return fR(this)}_assign(e){this!==e&&(tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new li({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await kd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jr(this.auth.app))return Promise.reject(ns(this.auth));const e=await this.getIdToken();return await Fo(this,uR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,h=n.photoURL??void 0,g=n.tenantId??void 0,p=n._redirectEventId??void 0,m=n.createdAt??void 0,v=n.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:w,providerData:L,stsTokenManager:F}=n;tt(T&&F,e,"internal-error");const U=Uo.fromJSON(this.name,F);tt(typeof T=="string",e,"internal-error"),Bs(s,e.name),Bs(o,e.name),tt(typeof S=="boolean",e,"internal-error"),tt(typeof w=="boolean",e,"internal-error"),Bs(u,e.name),Bs(h,e.name),Bs(g,e.name),Bs(p,e.name),Bs(m,e.name),Bs(v,e.name);const ge=new li({uid:T,auth:e,email:o,emailVerified:S,displayName:s,isAnonymous:w,photoURL:h,phoneNumber:u,tenantId:g,stsTokenManager:U,createdAt:m,lastLoginAt:v});return L&&Array.isArray(L)&&(ge.providerData=L.map(he=>({...he}))),p&&(ge._redirectEventId=p),ge}static async _fromIdTokenResponse(e,n,s=!1){const o=new Uo;o.updateFromServerResponse(n);const u=new li({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await kd(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];tt(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?rE(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!u?.length,g=new Uo;g.updateFromIdToken(s);const p=new li({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:h}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Km(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(p,m),p}}const c_=new Map;function es(i){ss(i instanceof Function,"Expected a class definition");let e=c_.get(i);return e?(ss(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,c_.set(i,e),e)}class iE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}iE.type="NONE";const d_=iE;function yd(i,e,n){return`firebase:${i}:${e}:${n}`}class zo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=yd(this.userKey,o.apiKey,u),this.fullPersistenceKey=yd("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Nd(this.auth,{idToken:e}).catch(()=>{});return n?li._fromGetAccountInfoResponse(this.auth,n,e):null}return li._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new zo(es(d_),e,s);const o=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let u=o[0]||es(d_);const h=yd(s,e.config.apiKey,e.name);let g=null;for(const m of n)try{const v=await m._get(h);if(v){let T;if(typeof v=="string"){const S=await Nd(e,{idToken:v}).catch(()=>{});if(!S)break;T=await li._fromGetAccountInfoResponse(e,S,v)}else T=li._fromJSON(e,v);m!==u&&(g=T),u=m;break}}catch{}const p=o.filter(m=>m._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new zo(u,e,s):(u=p[0],g&&await u._set(h,g.toJSON()),await Promise.all(n.map(async m=>{if(m!==u)try{await m._remove(h)}catch{}})),new zo(u,e,s))}}function h_(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cE(e))return"Blackberry";if(dE(e))return"Webos";if(aE(e))return"Safari";if((e.includes("chrome/")||oE(e))&&!e.includes("edge/"))return"Chrome";if(uE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if(s?.length===2)return s[1]}return"Other"}function sE(i=dr()){return/firefox\//i.test(i)}function aE(i=dr()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oE(i=dr()){return/crios\//i.test(i)}function lE(i=dr()){return/iemobile/i.test(i)}function uE(i=dr()){return/android/i.test(i)}function cE(i=dr()){return/blackberry/i.test(i)}function dE(i=dr()){return/webos/i.test(i)}function Rp(i=dr()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function yR(i=dr()){return Rp(i)&&!!window.navigator?.standalone}function vR(){return Nw()&&document.documentMode===10}function hE(i=dr()){return Rp(i)||uE(i)||dE(i)||cE(i)||/windows phone/i.test(i)||lE(i)}function fE(i,e=[]){let n;switch(i){case"Browser":n=h_(dr());break;case"Worker":n=`${h_(dr())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wo}/${s}`}class _R{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((h,g)=>{try{const p=e(u);h(p)}catch(p){g(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function bR(i,e={}){return Oi(i,"GET","/v2/passwordPolicy",ls(i,e))}const ER=6;class TR{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??ER,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class SR{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new f_(this),this.idTokenSubscription=new f_(this),this.beforeStateQueue=new _R(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=es(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await zo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Nd(this,{idToken:e}),s=await li._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(jr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,h=s?._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===h)&&g?.user&&(s=g.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await kd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jr(this.app))return Promise.reject(ns(this));const n=e?an(e):null;return n&&tt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jr(this.app)?Promise.reject(ns(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jr(this.app)?Promise.reject(ns(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(es(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bR(this),n=new TR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Iu("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await gR(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&es(e)||this._popupRedirectResolver;tt(n,this,"argument-error"),this.redirectPersistenceManager=await zo.create(this,[es(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let h=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(tt(g,this,"internal-error"),g.then(()=>{h||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{h=!0,p()}}else{const p=e.addObserver(n);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(jr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&JA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function oa(i){return an(i)}class f_{constructor(e){this.auth=e,this.observer=null,this.addObserver=Pw(n=>this.observer=n)}get next(){return tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let th={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wR(i){th=i}function mE(i){return th.loadJS(i)}function AR(){return th.recaptchaEnterpriseScript}function RR(){return th.gapiScript}function CR(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class IR{constructor(){this.enterprise=new xR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class xR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const NR="recaptcha-enterprise",pE="NO_RECAPTCHA";class kR{constructor(e){this.type=NR,this.auth=oa(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,g)=>{lR(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const m=new oR(p);return u.tenantId==null?u._agentRecaptchaConfig=m:u._tenantRecaptchaConfigs[u.tenantId]=m,h(m.siteKey)}}).catch(p=>{g(p)})})}function o(u,h,g){const p=window.grecaptcha;l_(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(m=>{h(m)}).catch(()=>{h(pE)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new IR().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{s(this.auth).then(g=>{if(!n&&l_(window.grecaptcha))o(g,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=AR();p.length!==0&&(p+=g),mE(p).then(()=>{o(g,u,h)}).catch(m=>{h(m)})}}).catch(g=>{h(g)})})}}async function m_(i,e,n,s=!1,o=!1){const u=new kR(i);let h;if(o)h=pE;else try{h=await u.verify(n)}catch{h=await u.verify(n,!0)}const g={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const p=g.phoneEnrollmentInfo.phoneNumber,m=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:m,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const p=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return s?Object.assign(g,{captchaResp:h}):Object.assign(g,{captchaResponse:h}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function Dd(i,e,n,s,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await m_(i,e,n,n==="getOobCode");return s(i,u)}else return s(i,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await m_(i,e,n,n==="getOobCode");return s(i,h)}else return Promise.reject(u)})}function DR(i,e){const n=Zd(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Pa(u,e??{}))return o;ui(o,"already-initialized")}return n.initialize({options:e})}function MR(i,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(es);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function OR(i,e,n){const s=oa(i);tt(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=gE(e),{host:h,port:g}=VR(e),p=g===null?"":`:${g}`,m={url:`${u}//${h}${p}/`},v=Object.freeze({host:h,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){tt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),tt(Pa(m,s.config.emulator)&&Pa(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,aa(h)?(vp(`${u}//${h}${p}`),_p("Auth",!0)):LR()}function gE(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function VR(i){const e=gE(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:p_(s.substr(u.length+1))}}else{const[u,h]=s.split(":");return{host:u,port:p_(h)}}}function p_(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function LR(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class Cp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Zi("not implemented")}_getIdTokenResponse(e){return Zi("not implemented")}_linkToIdToken(e,n){return Zi("not implemented")}_getReauthenticationResolver(e){return Zi("not implemented")}}async function jR(i,e){return Oi(i,"POST","/v1/accounts:update",e)}async function PR(i,e){return Oi(i,"POST","/v1/accounts:signUp",e)}async function UR(i,e){return ku(i,"POST","/v1/accounts:signInWithPassword",ls(i,e))}async function yE(i,e){return Oi(i,"POST","/v1/accounts:sendOobCode",ls(i,e))}async function zR(i,e){return yE(i,e)}async function BR(i,e){return yE(i,e)}async function qR(i,e){return ku(i,"POST","/v1/accounts:signInWithEmailLink",ls(i,e))}async function FR(i,e){return ku(i,"POST","/v1/accounts:signInWithEmailLink",ls(i,e))}class _u extends Cp{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new _u(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new _u(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Dd(e,n,"signInWithPassword",UR);case"emailLink":return qR(e,{email:this._email,oobCode:this._password});default:ui(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Dd(e,s,"signUpPassword",PR);case"emailLink":return FR(e,{idToken:n,email:this._email,oobCode:this._password});default:ui(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Bo(i,e){return ku(i,"POST","/v1/accounts:signInWithIdp",ls(i,e))}const HR="http://localhost";class za extends Cp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new za(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ui("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const h=new za(s,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return Bo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Bo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Bo(e,n)}buildRequest(){const e={requestUri:HR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xu(n)}return e}}function GR(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function KR(i){const e=iu(su(i)).link,n=e?iu(su(e)).deep_link_id:null,s=iu(su(i)).deep_link_id;return(s?iu(su(s)).link:null)||s||n||e||i}class Ip{constructor(e){const n=iu(su(e)),s=n.apiKey??null,o=n.oobCode??null,u=GR(n.mode??null);tt(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=KR(e);try{return new Ip(n)}catch{return null}}}class Ga{constructor(){this.providerId=Ga.PROVIDER_ID}static credential(e,n){return _u._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Ip.parseLink(n);return tt(s,"argument-error"),_u._fromEmailAndCode(e,s.code,s.tenantId)}}Ga.PROVIDER_ID="password";Ga.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ga.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class vE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Du extends vE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class qs extends Du{constructor(){super("facebook.com")}static credential(e){return za._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qs.credential(e.oauthAccessToken)}catch{return null}}}qs.FACEBOOK_SIGN_IN_METHOD="facebook.com";qs.PROVIDER_ID="facebook.com";class Fs extends Du{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return za._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Fs.credential(n,s)}catch{return null}}}Fs.GOOGLE_SIGN_IN_METHOD="google.com";Fs.PROVIDER_ID="google.com";class Hs extends Du{constructor(){super("github.com")}static credential(e){return za._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hs.credential(e.oauthAccessToken)}catch{return null}}}Hs.GITHUB_SIGN_IN_METHOD="github.com";Hs.PROVIDER_ID="github.com";class Gs extends Du{constructor(){super("twitter.com")}static credential(e,n){return za._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Gs.credential(n,s)}catch{return null}}}Gs.TWITTER_SIGN_IN_METHOD="twitter.com";Gs.PROVIDER_ID="twitter.com";async function QR(i,e){return ku(i,"POST","/v1/accounts:signUp",ls(i,e))}class Ba{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await li._fromIdTokenResponse(e,s,o),h=g_(s);return new Ba({user:u,providerId:h,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=g_(s);return new Ba({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function g_(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class Md extends Mi{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Md.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Md(e,n,s,o)}}function _E(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Md._fromErrorAndOperation(i,u,e,s):u})}async function YR(i,e,n=!1){const s=await Fo(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return Ba._forOperation(i,"link",s)}async function bE(i,e,n=!1){const{auth:s}=i;if(jr(s.app))return Promise.reject(ns(s));const o="reauthenticate";try{const u=await Fo(i,_E(s,o,e,i),n);tt(u.idToken,s,"internal-error");const h=Ap(u.idToken);tt(h,s,"internal-error");const{sub:g}=h;return tt(i.uid===g,s,"user-mismatch"),Ba._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&ui(s,"user-mismatch"),u}}async function EE(i,e,n=!1){if(jr(i.app))return Promise.reject(ns(i));const s="signIn",o=await _E(i,s,e),u=await Ba._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}async function XR(i,e){return EE(oa(i),e)}async function $R(i,e){return bE(an(i),e)}async function TE(i){const e=oa(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function WR(i,e,n){const s=oa(i);await Dd(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",zR)}async function vd(i,e,n){if(jr(i.app))return Promise.reject(ns(i));const s=oa(i),h=await Dd(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",QR).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&TE(i),p}),g=await Ba._fromIdTokenResponse(s,"signIn",h);return await s._updateCurrentUser(g.user),g}function JR(i,e,n){return jr(i.app)?Promise.reject(ns(i)):XR(an(i),Ga.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&TE(i),s})}async function y_(i,e,n){const s=an(i),u={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await i.getIdToken(),newEmail:e},{email:h}=await BR(s.auth,u);h!==i.email&&await i.reload()}function ZR(i,e){return eC(an(i),null,e)}async function eC(i,e,n){const{auth:s}=i,u={idToken:await i.getIdToken(),returnSecureToken:!0};n&&(u.password=n);const h=await Fo(i,jR(s,u));await i._updateTokensIfNecessary(h,!0)}function tC(i,e,n,s){return an(i).onIdTokenChanged(e,n,s)}function nC(i,e,n){return an(i).beforeAuthStateChanged(e,n)}function rC(i,e,n,s){return an(i).onAuthStateChanged(e,n,s)}function iC(i){return an(i).signOut()}const Od="__sak";class SE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Od,"1"),this.storage.removeItem(Od),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const sC=1e3,aC=10;class wE extends SE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,g,p)=>{this.notifyListeners(h,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!n&&this.localCache[s]===h||this.notifyListeners(s,h)},u=this.storage.getItem(s);vR()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,aC):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},sC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}wE.type="LOCAL";const oC=wE;class AE extends SE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}AE.type="SESSION";const RE=AE;function lC(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class nh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new nh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,h=this.handlersMap[o];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const g=Array.from(h).map(async m=>m(n.origin,u)),p=await lC(g);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nh.receivers=[];function xp(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}class uC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((g,p)=>{const m=xp("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===m)switch(S.data.status){case"ack":clearTimeout(v),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(S.data.response);break;default:clearTimeout(v),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function Ri(){return window}function cC(i){Ri().location.href=i}function CE(){return typeof Ri().WorkerGlobalScope<"u"&&typeof Ri().importScripts=="function"}async function dC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hC(){return navigator?.serviceWorker?.controller||null}function fC(){return CE()?self:null}const IE="firebaseLocalStorageDb",mC=1,Vd="firebaseLocalStorage",xE="fbase_key";class Mu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function rh(i,e){return i.transaction([Vd],e?"readwrite":"readonly").objectStore(Vd)}function pC(){const i=indexedDB.deleteDatabase(IE);return new Mu(i).toPromise()}function Qm(){const i=indexedDB.open(IE,mC);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Vd,{keyPath:xE})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Vd)?e(s):(s.close(),await pC(),e(await Qm()))})})}async function v_(i,e,n){const s=rh(i,!0).put({[xE]:e,value:n});return new Mu(s).toPromise()}async function gC(i,e){const n=rh(i,!1).get(e),s=await new Mu(n).toPromise();return s===void 0?null:s.value}function __(i,e){const n=rh(i,!0).delete(e);return new Mu(n).toPromise()}const yC=800,vC=3;class NE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>vC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nh._getInstance(fC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await dC(),!this.activeServiceWorker)return;this.sender=new uC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qm();return await v_(e,Od,"1"),await __(e,Od),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>v_(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>gC(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>__(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=rh(o,!1).getAll();return new Mu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}NE.type="LOCAL";const _C=NE;new Nu(3e4,6e4);function bC(i,e){return e?es(e):(tt(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class Np extends Cp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Bo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function EC(i){return EE(i.auth,new Np(i),i.bypassAuthState)}function TC(i){const{auth:e,user:n}=i;return tt(n,e,"internal-error"),bE(n,new Np(i),i.bypassAuthState)}async function SC(i){const{auth:e,user:n}=i;return tt(n,e,"internal-error"),YR(n,new Np(i),i.bypassAuthState)}class kE{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:h,type:g}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return EC;case"linkViaPopup":case"linkViaRedirect":return SC;case"reauthViaPopup":case"reauthViaRedirect":return TC;default:ui(this.auth,"internal-error")}}resolve(e){ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wC=new Nu(2e3,1e4);class jo extends kE{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,jo.currentPopupAction&&jo.currentPopupAction.cancel(),jo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return tt(e,this.auth,"internal-error"),e}async onExecution(){ss(this.filter.length===1,"Popup operations only handle one event");const e=xp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ai(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ai(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,jo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ai(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wC.get())};e()}}jo.currentPopupAction=null;const AC="pendingRedirect",_d=new Map;class RC extends kE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=_d.get(this.auth._key());if(!e){try{const s=await CC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}_d.set(this.auth._key(),e)}return this.bypassAuthState||_d.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function CC(i,e){const n=NC(e),s=xC(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function IC(i,e){_d.set(i._key(),e)}function xC(i){return es(i._redirectPersistence)}function NC(i){return yd(AC,i.config.apiKey,i.name)}async function kC(i,e,n=!1){if(jr(i.app))return Promise.reject(ns(i));const s=oa(i),o=bC(s,e),h=await new RC(s,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}const DC=600*1e3;class MC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!OC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!DE(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ai(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=DC&&this.cachedEventUids.clear(),this.cachedEventUids.has(b_(e))}saveEventToCache(e){this.cachedEventUids.add(b_(e)),this.lastProcessedEventTime=Date.now()}}function b_(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function DE({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function OC(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DE(i);default:return!1}}async function VC(i,e={}){return Oi(i,"GET","/v1/projects",e)}const LC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jC=/^https?/;async function PC(i){if(i.config.emulator)return;const{authorizedDomains:e}=await VC(i);for(const n of e)try{if(UC(n))return}catch{}ui(i,"unauthorized-domain")}function UC(i){const e=Gm(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const h=new URL(i);return h.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===s}if(!jC.test(n))return!1;if(LC.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const zC=new Nu(3e4,6e4);function E_(){const i=Ri().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function BC(i){return new Promise((e,n)=>{function s(){E_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{E_(),n(Ai(i,"network-request-failed"))},timeout:zC.get()})}if(Ri().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ri().gapi?.load)s();else{const o=CR("iframefcb");return Ri()[o]=()=>{gapi.load?s():n(Ai(i,"network-request-failed"))},mE(`${RR()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw bd=null,e})}let bd=null;function qC(i){return bd=bd||BC(i),bd}const FC=new Nu(5e3,15e3),HC="__/auth/iframe",GC="emulator/auth/iframe",KC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},QC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YC(i){const e=i.config;tt(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?wp(e,GC):`https://${i.config.authDomain}/${HC}`,s={apiKey:e.apiKey,appName:i.name,v:Wo},o=QC.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${xu(s).slice(1)}`}async function XC(i){const e=await qC(i),n=Ri().gapi;return tt(n,i,"internal-error"),e.open({where:document.body,url:YC(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KC,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const h=Ai(i,"network-request-failed"),g=Ri().setTimeout(()=>{u(h)},FC.get());function p(){Ri().clearTimeout(g),o(s)}s.ping(p).then(p,()=>{u(h)})}))}const $C={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WC=500,JC=600,ZC="_blank",eI="http://localhost";class T_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tI(i,e,n,s=WC,o=JC){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const p={...$C,width:s.toString(),height:o.toString(),top:u,left:h},m=dr().toLowerCase();n&&(g=oE(m)?ZC:n),sE(m)&&(e=e||eI,p.scrollbars="yes");const v=Object.entries(p).reduce((S,[w,L])=>`${S}${w}=${L},`,"");if(yR(m)&&g!=="_self")return nI(e||"",g),new T_(null);const T=window.open(e||"",g,v);tt(T,i,"popup-blocked");try{T.focus()}catch{}return new T_(T)}function nI(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const rI="__/auth/handler",iI="emulator/auth/handler",sI=encodeURIComponent("fac");async function S_(i,e,n,s,o,u){tt(i.config.authDomain,i,"auth-domain-config-required"),tt(i.config.apiKey,i,"invalid-api-key");const h={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:Wo,eventId:o};if(e instanceof vE){e.setDefaultLanguage(i.languageCode),h.providerId=e.providerId||"",jw(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries({}))h[v]=T}if(e instanceof Du){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(h.scopes=v.join(","))}i.tenantId&&(h.tid=i.tenantId);const g=h;for(const v of Object.keys(g))g[v]===void 0&&delete g[v];const p=await i._getAppCheckToken(),m=p?`#${sI}=${encodeURIComponent(p)}`:"";return`${aI(i)}?${xu(g).slice(1)}${m}`}function aI({config:i}){return i.emulator?wp(i,iI):`https://${i.authDomain}/${rI}`}const xm="webStorageSupport";class oI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RE,this._completeRedirectFn=kC,this._overrideRedirectResult=IC}async _openPopup(e,n,s,o){ss(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await S_(e,n,s,Gm(),o);return tI(e,u,xp())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await S_(e,n,s,Gm(),o);return cC(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(ss(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await XC(e),s=new MC(e);return n.register("authEvent",o=>(tt(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xm,{type:xm},o=>{const u=o?.[0]?.[xm];u!==void 0&&n(!!u),ui(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=PC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return hE()||aE()||Rp()}}const lI=oI;var w_="@firebase/auth",A_="1.11.1";class uI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function cI(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dI(i){Ua(new Zs("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:g}=s.options;tt(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:h,authDomain:g,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fE(i)},m=new SR(s,o,u,p);return MR(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Ua(new Zs("auth-internal",e=>{const n=oa(e.getProvider("auth").getImmediate());return(s=>new uI(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),wi(w_,A_,cI(i)),wi(w_,A_,"esm2020")}const hI=300,fI=Gb("authIdTokenMaxAge")||hI;let R_=null;const mI=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>fI)return;const o=n?.token;R_!==o&&(R_=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function ME(i=eh()){const e=Zd(i,"auth");if(e.isInitialized())return e.getImmediate();const n=DR(i,{popupRedirectResolver:lI,persistence:[_C,oC,RE]}),s=Gb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const h=mI(u.toString());nC(n,h,()=>h(n.currentUser)),tC(n,g=>h(g))}}const o=qb("auth");return o&&OR(n,`http://${o}`),n}function pI(){return document.getElementsByTagName("head")?.[0]??document}wR({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=Ai("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",pI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dI("Browser");var C_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var $s,OE;(function(){var i;function e(k,C){function N(){}N.prototype=C.prototype,k.F=C.prototype,k.prototype=new N,k.prototype.constructor=k,k.D=function(V,D,P){for(var x=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)x[Be-2]=arguments[Be];return C.prototype[D].apply(V,x)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,C,N){N||(N=0);const V=Array(16);if(typeof C=="string")for(var D=0;D<16;++D)V[D]=C.charCodeAt(N++)|C.charCodeAt(N++)<<8|C.charCodeAt(N++)<<16|C.charCodeAt(N++)<<24;else for(D=0;D<16;++D)V[D]=C[N++]|C[N++]<<8|C[N++]<<16|C[N++]<<24;C=k.g[0],N=k.g[1],D=k.g[2];let P=k.g[3],x;x=C+(P^N&(D^P))+V[0]+3614090360&4294967295,C=N+(x<<7&4294967295|x>>>25),x=P+(D^C&(N^D))+V[1]+3905402710&4294967295,P=C+(x<<12&4294967295|x>>>20),x=D+(N^P&(C^N))+V[2]+606105819&4294967295,D=P+(x<<17&4294967295|x>>>15),x=N+(C^D&(P^C))+V[3]+3250441966&4294967295,N=D+(x<<22&4294967295|x>>>10),x=C+(P^N&(D^P))+V[4]+4118548399&4294967295,C=N+(x<<7&4294967295|x>>>25),x=P+(D^C&(N^D))+V[5]+1200080426&4294967295,P=C+(x<<12&4294967295|x>>>20),x=D+(N^P&(C^N))+V[6]+2821735955&4294967295,D=P+(x<<17&4294967295|x>>>15),x=N+(C^D&(P^C))+V[7]+4249261313&4294967295,N=D+(x<<22&4294967295|x>>>10),x=C+(P^N&(D^P))+V[8]+1770035416&4294967295,C=N+(x<<7&4294967295|x>>>25),x=P+(D^C&(N^D))+V[9]+2336552879&4294967295,P=C+(x<<12&4294967295|x>>>20),x=D+(N^P&(C^N))+V[10]+4294925233&4294967295,D=P+(x<<17&4294967295|x>>>15),x=N+(C^D&(P^C))+V[11]+2304563134&4294967295,N=D+(x<<22&4294967295|x>>>10),x=C+(P^N&(D^P))+V[12]+1804603682&4294967295,C=N+(x<<7&4294967295|x>>>25),x=P+(D^C&(N^D))+V[13]+4254626195&4294967295,P=C+(x<<12&4294967295|x>>>20),x=D+(N^P&(C^N))+V[14]+2792965006&4294967295,D=P+(x<<17&4294967295|x>>>15),x=N+(C^D&(P^C))+V[15]+1236535329&4294967295,N=D+(x<<22&4294967295|x>>>10),x=C+(D^P&(N^D))+V[1]+4129170786&4294967295,C=N+(x<<5&4294967295|x>>>27),x=P+(N^D&(C^N))+V[6]+3225465664&4294967295,P=C+(x<<9&4294967295|x>>>23),x=D+(C^N&(P^C))+V[11]+643717713&4294967295,D=P+(x<<14&4294967295|x>>>18),x=N+(P^C&(D^P))+V[0]+3921069994&4294967295,N=D+(x<<20&4294967295|x>>>12),x=C+(D^P&(N^D))+V[5]+3593408605&4294967295,C=N+(x<<5&4294967295|x>>>27),x=P+(N^D&(C^N))+V[10]+38016083&4294967295,P=C+(x<<9&4294967295|x>>>23),x=D+(C^N&(P^C))+V[15]+3634488961&4294967295,D=P+(x<<14&4294967295|x>>>18),x=N+(P^C&(D^P))+V[4]+3889429448&4294967295,N=D+(x<<20&4294967295|x>>>12),x=C+(D^P&(N^D))+V[9]+568446438&4294967295,C=N+(x<<5&4294967295|x>>>27),x=P+(N^D&(C^N))+V[14]+3275163606&4294967295,P=C+(x<<9&4294967295|x>>>23),x=D+(C^N&(P^C))+V[3]+4107603335&4294967295,D=P+(x<<14&4294967295|x>>>18),x=N+(P^C&(D^P))+V[8]+1163531501&4294967295,N=D+(x<<20&4294967295|x>>>12),x=C+(D^P&(N^D))+V[13]+2850285829&4294967295,C=N+(x<<5&4294967295|x>>>27),x=P+(N^D&(C^N))+V[2]+4243563512&4294967295,P=C+(x<<9&4294967295|x>>>23),x=D+(C^N&(P^C))+V[7]+1735328473&4294967295,D=P+(x<<14&4294967295|x>>>18),x=N+(P^C&(D^P))+V[12]+2368359562&4294967295,N=D+(x<<20&4294967295|x>>>12),x=C+(N^D^P)+V[5]+4294588738&4294967295,C=N+(x<<4&4294967295|x>>>28),x=P+(C^N^D)+V[8]+2272392833&4294967295,P=C+(x<<11&4294967295|x>>>21),x=D+(P^C^N)+V[11]+1839030562&4294967295,D=P+(x<<16&4294967295|x>>>16),x=N+(D^P^C)+V[14]+4259657740&4294967295,N=D+(x<<23&4294967295|x>>>9),x=C+(N^D^P)+V[1]+2763975236&4294967295,C=N+(x<<4&4294967295|x>>>28),x=P+(C^N^D)+V[4]+1272893353&4294967295,P=C+(x<<11&4294967295|x>>>21),x=D+(P^C^N)+V[7]+4139469664&4294967295,D=P+(x<<16&4294967295|x>>>16),x=N+(D^P^C)+V[10]+3200236656&4294967295,N=D+(x<<23&4294967295|x>>>9),x=C+(N^D^P)+V[13]+681279174&4294967295,C=N+(x<<4&4294967295|x>>>28),x=P+(C^N^D)+V[0]+3936430074&4294967295,P=C+(x<<11&4294967295|x>>>21),x=D+(P^C^N)+V[3]+3572445317&4294967295,D=P+(x<<16&4294967295|x>>>16),x=N+(D^P^C)+V[6]+76029189&4294967295,N=D+(x<<23&4294967295|x>>>9),x=C+(N^D^P)+V[9]+3654602809&4294967295,C=N+(x<<4&4294967295|x>>>28),x=P+(C^N^D)+V[12]+3873151461&4294967295,P=C+(x<<11&4294967295|x>>>21),x=D+(P^C^N)+V[15]+530742520&4294967295,D=P+(x<<16&4294967295|x>>>16),x=N+(D^P^C)+V[2]+3299628645&4294967295,N=D+(x<<23&4294967295|x>>>9),x=C+(D^(N|~P))+V[0]+4096336452&4294967295,C=N+(x<<6&4294967295|x>>>26),x=P+(N^(C|~D))+V[7]+1126891415&4294967295,P=C+(x<<10&4294967295|x>>>22),x=D+(C^(P|~N))+V[14]+2878612391&4294967295,D=P+(x<<15&4294967295|x>>>17),x=N+(P^(D|~C))+V[5]+4237533241&4294967295,N=D+(x<<21&4294967295|x>>>11),x=C+(D^(N|~P))+V[12]+1700485571&4294967295,C=N+(x<<6&4294967295|x>>>26),x=P+(N^(C|~D))+V[3]+2399980690&4294967295,P=C+(x<<10&4294967295|x>>>22),x=D+(C^(P|~N))+V[10]+4293915773&4294967295,D=P+(x<<15&4294967295|x>>>17),x=N+(P^(D|~C))+V[1]+2240044497&4294967295,N=D+(x<<21&4294967295|x>>>11),x=C+(D^(N|~P))+V[8]+1873313359&4294967295,C=N+(x<<6&4294967295|x>>>26),x=P+(N^(C|~D))+V[15]+4264355552&4294967295,P=C+(x<<10&4294967295|x>>>22),x=D+(C^(P|~N))+V[6]+2734768916&4294967295,D=P+(x<<15&4294967295|x>>>17),x=N+(P^(D|~C))+V[13]+1309151649&4294967295,N=D+(x<<21&4294967295|x>>>11),x=C+(D^(N|~P))+V[4]+4149444226&4294967295,C=N+(x<<6&4294967295|x>>>26),x=P+(N^(C|~D))+V[11]+3174756917&4294967295,P=C+(x<<10&4294967295|x>>>22),x=D+(C^(P|~N))+V[2]+718787259&4294967295,D=P+(x<<15&4294967295|x>>>17),x=N+(P^(D|~C))+V[9]+3951481745&4294967295,k.g[0]=k.g[0]+C&4294967295,k.g[1]=k.g[1]+(D+(x<<21&4294967295|x>>>11))&4294967295,k.g[2]=k.g[2]+D&4294967295,k.g[3]=k.g[3]+P&4294967295}s.prototype.v=function(k,C){C===void 0&&(C=k.length);const N=C-this.blockSize,V=this.C;let D=this.h,P=0;for(;P<C;){if(D==0)for(;P<=N;)o(this,k,P),P+=this.blockSize;if(typeof k=="string"){for(;P<C;)if(V[D++]=k.charCodeAt(P++),D==this.blockSize){o(this,V),D=0;break}}else for(;P<C;)if(V[D++]=k[P++],D==this.blockSize){o(this,V),D=0;break}}this.h=D,this.o+=C},s.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var C=1;C<k.length-8;++C)k[C]=0;C=this.o*8;for(var N=k.length-8;N<k.length;++N)k[N]=C&255,C/=256;for(this.v(k),k=Array(16),C=0,N=0;N<4;++N)for(let V=0;V<32;V+=8)k[C++]=this.g[N]>>>V&255;return k};function u(k,C){var N=g;return Object.prototype.hasOwnProperty.call(N,k)?N[k]:N[k]=C(k)}function h(k,C){this.h=C;const N=[];let V=!0;for(let D=k.length-1;D>=0;D--){const P=k[D]|0;V&&P==C||(N[D]=P,V=!1)}this.g=N}var g={};function p(k){return-128<=k&&k<128?u(k,function(C){return new h([C|0],C<0?-1:0)}):new h([k|0],k<0?-1:0)}function m(k){if(isNaN(k)||!isFinite(k))return T;if(k<0)return U(m(-k));const C=[];let N=1;for(let V=0;k>=N;V++)C[V]=k/N|0,N*=4294967296;return new h(C,0)}function v(k,C){if(k.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(k.charAt(0)=="-")return U(v(k.substring(1),C));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=m(Math.pow(C,8));let V=T;for(let P=0;P<k.length;P+=8){var D=Math.min(8,k.length-P);const x=parseInt(k.substring(P,P+D),C);D<8?(D=m(Math.pow(C,D)),V=V.j(D).add(m(x))):(V=V.j(N),V=V.add(m(x)))}return V}var T=p(0),S=p(1),w=p(16777216);i=h.prototype,i.m=function(){if(F(this))return-U(this).m();let k=0,C=1;for(let N=0;N<this.g.length;N++){const V=this.i(N);k+=(V>=0?V:4294967296+V)*C,C*=4294967296}return k},i.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(L(this))return"0";if(F(this))return"-"+U(this).toString(k);const C=m(Math.pow(k,6));var N=this;let V="";for(;;){const D=Ee(N,C).g;N=ge(N,D.j(C));let P=((N.g.length>0?N.g[0]:N.h)>>>0).toString(k);if(N=D,L(N))return P+V;for(;P.length<6;)P="0"+P;V=P+V}},i.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function L(k){if(k.h!=0)return!1;for(let C=0;C<k.g.length;C++)if(k.g[C]!=0)return!1;return!0}function F(k){return k.h==-1}i.l=function(k){return k=ge(this,k),F(k)?-1:L(k)?0:1};function U(k){const C=k.g.length,N=[];for(let V=0;V<C;V++)N[V]=~k.g[V];return new h(N,~k.h).add(S)}i.abs=function(){return F(this)?U(this):this},i.add=function(k){const C=Math.max(this.g.length,k.g.length),N=[];let V=0;for(let D=0;D<=C;D++){let P=V+(this.i(D)&65535)+(k.i(D)&65535),x=(P>>>16)+(this.i(D)>>>16)+(k.i(D)>>>16);V=x>>>16,P&=65535,x&=65535,N[D]=x<<16|P}return new h(N,N[N.length-1]&-2147483648?-1:0)};function ge(k,C){return k.add(U(C))}i.j=function(k){if(L(this)||L(k))return T;if(F(this))return F(k)?U(this).j(U(k)):U(U(this).j(k));if(F(k))return U(this.j(U(k)));if(this.l(w)<0&&k.l(w)<0)return m(this.m()*k.m());const C=this.g.length+k.g.length,N=[];for(var V=0;V<2*C;V++)N[V]=0;for(V=0;V<this.g.length;V++)for(let D=0;D<k.g.length;D++){const P=this.i(V)>>>16,x=this.i(V)&65535,Be=k.i(D)>>>16,rt=k.i(D)&65535;N[2*V+2*D]+=x*rt,he(N,2*V+2*D),N[2*V+2*D+1]+=P*rt,he(N,2*V+2*D+1),N[2*V+2*D+1]+=x*Be,he(N,2*V+2*D+1),N[2*V+2*D+2]+=P*Be,he(N,2*V+2*D+2)}for(k=0;k<C;k++)N[k]=N[2*k+1]<<16|N[2*k];for(k=C;k<2*C;k++)N[k]=0;return new h(N,0)};function he(k,C){for(;(k[C]&65535)!=k[C];)k[C+1]+=k[C]>>>16,k[C]&=65535,C++}function re(k,C){this.g=k,this.h=C}function Ee(k,C){if(L(C))throw Error("division by zero");if(L(k))return new re(T,T);if(F(k))return C=Ee(U(k),C),new re(U(C.g),U(C.h));if(F(C))return C=Ee(k,U(C)),new re(U(C.g),C.h);if(k.g.length>30){if(F(k)||F(C))throw Error("slowDivide_ only works with positive integers.");for(var N=S,V=C;V.l(k)<=0;)N=He(N),V=He(V);var D=Me(N,1),P=Me(V,1);for(V=Me(V,2),N=Me(N,2);!L(V);){var x=P.add(V);x.l(k)<=0&&(D=D.add(N),P=x),V=Me(V,1),N=Me(N,1)}return C=ge(k,D.j(C)),new re(D,C)}for(D=T;k.l(C)>=0;){for(N=Math.max(1,Math.floor(k.m()/C.m())),V=Math.ceil(Math.log(N)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),P=m(N),x=P.j(C);F(x)||x.l(k)>0;)N-=V,P=m(N),x=P.j(C);L(P)&&(P=S),D=D.add(P),k=ge(k,x)}return new re(D,k)}i.B=function(k){return Ee(this,k).h},i.and=function(k){const C=Math.max(this.g.length,k.g.length),N=[];for(let V=0;V<C;V++)N[V]=this.i(V)&k.i(V);return new h(N,this.h&k.h)},i.or=function(k){const C=Math.max(this.g.length,k.g.length),N=[];for(let V=0;V<C;V++)N[V]=this.i(V)|k.i(V);return new h(N,this.h|k.h)},i.xor=function(k){const C=Math.max(this.g.length,k.g.length),N=[];for(let V=0;V<C;V++)N[V]=this.i(V)^k.i(V);return new h(N,this.h^k.h)};function He(k){const C=k.g.length+1,N=[];for(let V=0;V<C;V++)N[V]=k.i(V)<<1|k.i(V-1)>>>31;return new h(N,k.h)}function Me(k,C){const N=C>>5;C%=32;const V=k.g.length-N,D=[];for(let P=0;P<V;P++)D[P]=C>0?k.i(P+N)>>>C|k.i(P+N+1)<<32-C:k.i(P+N);return new h(D,k.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,OE=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=m,h.fromString=v,$s=h}).apply(typeof C_<"u"?C_:typeof self<"u"?self:typeof window<"u"?window:{});var cd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var VE,au,LE,Ed,Ym,jE,PE,UE;(function(){var i,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof cd=="object"&&cd];for(var y=0;y<c.length;++y){var E=c[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var E=s;c=c.split(".");for(var R=0;R<c.length-1;R++){var H=c[R];if(!(H in E))break e;E=E[H]}c=c[c.length-1],R=E[c],y=y(R),y!=R&&y!=null&&e(E,c,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(y){var E=[],R;for(R in y)Object.prototype.hasOwnProperty.call(y,R)&&E.push([R,y[R]]);return E}});var u=u||{},h=this||self;function g(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function p(c,y,E){return c.call.apply(c.bind,arguments)}function m(c,y,E){return m=p,m.apply(null,arguments)}function v(c,y){var E=Array.prototype.slice.call(arguments,1);return function(){var R=E.slice();return R.push.apply(R,arguments),c.apply(this,R)}}function T(c,y){function E(){}E.prototype=y.prototype,c.Z=y.prototype,c.prototype=new E,c.prototype.constructor=c,c.Ob=function(R,H,$){for(var be=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)be[ct-2]=arguments[ct];return y.prototype[H].apply(R,be)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function w(c){const y=c.length;if(y>0){const E=Array(y);for(let R=0;R<y;R++)E[R]=c[R];return E}return[]}function L(c,y){for(let R=1;R<arguments.length;R++){const H=arguments[R];var E=typeof H;if(E=E!="object"?E:H?Array.isArray(H)?"array":E:"null",E=="array"||E=="object"&&typeof H.length=="number"){E=c.length||0;const $=H.length||0;c.length=E+$;for(let be=0;be<$;be++)c[E+be]=H[be]}else c.push(H)}}class F{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function U(c){h.setTimeout(()=>{throw c},0)}function ge(){var c=k;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class he{constructor(){this.h=this.g=null}add(y,E){const R=re.get();R.set(y,E),this.h?this.h.next=R:this.g=R,this.h=R}}var re=new F(()=>new Ee,c=>c.reset());class Ee{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let He,Me=!1,k=new he,C=()=>{const c=Promise.resolve(void 0);He=()=>{c.then(N)}};function N(){for(var c;c=ge();){try{c.h.call(c.g)}catch(E){U(E)}var y=re;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}Me=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const E=()=>{};h.addEventListener("test",E,y),h.removeEventListener("test",E,y)}catch{}return c})();function x(c){return/^[\s\xa0]*$/.test(c)}function Be(c,y){D.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}T(Be,D),Be.prototype.init=function(c,y){const E=this.type=c.type,R=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(E=="mouseover"?y=c.fromElement:E=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Be.Z.h.call(this)},Be.prototype.h=function(){Be.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var rt="closure_listenable_"+(Math.random()*1e6|0),Y=0;function ce(c,y,E,R,H){this.listener=c,this.proxy=null,this.src=y,this.type=E,this.capture=!!R,this.ha=H,this.key=++Y,this.da=this.fa=!1}function ve(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ye(c,y,E){for(const R in c)y.call(E,c[R],R,c)}function Le(c,y){for(const E in c)y.call(void 0,c[E],E,c)}function O(c){const y={};for(const E in c)y[E]=c[E];return y}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(c,y){let E,R;for(let H=1;H<arguments.length;H++){R=arguments[H];for(E in R)c[E]=R[E];for(let $=0;$<q.length;$++)E=q[$],Object.prototype.hasOwnProperty.call(R,E)&&(c[E]=R[E])}}function se(c){this.src=c,this.g={},this.h=0}se.prototype.add=function(c,y,E,R,H){const $=c.toString();c=this.g[$],c||(c=this.g[$]=[],this.h++);const be=Ae(c,y,R,H);return be>-1?(y=c[be],E||(y.fa=!1)):(y=new ce(y,this.src,$,!!R,H),y.fa=E,c.push(y)),y};function we(c,y){const E=y.type;if(E in c.g){var R=c.g[E],H=Array.prototype.indexOf.call(R,y,void 0),$;($=H>=0)&&Array.prototype.splice.call(R,H,1),$&&(ve(y),c.g[E].length==0&&(delete c.g[E],c.h--))}}function Ae(c,y,E,R){for(let H=0;H<c.length;++H){const $=c[H];if(!$.da&&$.listener==y&&$.capture==!!E&&$.ha==R)return H}return-1}var De="closure_lm_"+(Math.random()*1e6|0),it={};function me(c,y,E,R,H){if(Array.isArray(y)){for(let $=0;$<y.length;$++)me(c,y[$],E,R,H);return null}return E=Oe(E),c&&c[rt]?c.J(y,E,g(R)?!!R.capture:!1,H):Ue(c,y,E,!1,R,H)}function Ue(c,y,E,R,H,$){if(!y)throw Error("Invalid event type");const be=g(H)?!!H.capture:!!H;let ct=oe(c);if(ct||(c[De]=ct=new se(c)),E=ct.add(y,E,R,be,$),E.proxy)return E;if(R=We(),E.proxy=R,R.src=c,R.listener=E,c.addEventListener)P||(H=be),H===void 0&&(H=!1),c.addEventListener(y.toString(),R,H);else if(c.attachEvent)c.attachEvent(fe(y.toString()),R);else if(c.addListener&&c.removeListener)c.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return E}function We(){function c(E){return y.call(c.src,c.listener,E)}const y=Te;return c}function ht(c,y,E,R,H){if(Array.isArray(y))for(var $=0;$<y.length;$++)ht(c,y[$],E,R,H);else R=g(R)?!!R.capture:!!R,E=Oe(E),c&&c[rt]?(c=c.i,$=String(y).toString(),$ in c.g&&(y=c.g[$],E=Ae(y,E,R,H),E>-1&&(ve(y[E]),Array.prototype.splice.call(y,E,1),y.length==0&&(delete c.g[$],c.h--)))):c&&(c=oe(c))&&(y=c.g[y.toString()],c=-1,y&&(c=Ae(y,E,R,H)),(E=c>-1?y[c]:null)&&le(E))}function le(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[rt])we(y.i,c);else{var E=c.type,R=c.proxy;y.removeEventListener?y.removeEventListener(E,R,c.capture):y.detachEvent?y.detachEvent(fe(E),R):y.addListener&&y.removeListener&&y.removeListener(R),(E=oe(y))?(we(E,c),E.h==0&&(E.src=null,y[De]=null)):ve(c)}}}function fe(c){return c in it?it[c]:it[c]="on"+c}function Te(c,y){if(c.da)c=!0;else{y=new Be(y,this);const E=c.listener,R=c.ha||c.src;c.fa&&le(c),c=E.call(R,y)}return c}function oe(c){return c=c[De],c instanceof se?c:null}var Ne="__closure_events_fn_"+(Math.random()*1e9>>>0);function Oe(c){return typeof c=="function"?c:(c[Ne]||(c[Ne]=function(y){return c.handleEvent(y)}),c[Ne])}function je(){V.call(this),this.i=new se(this),this.M=this,this.G=null}T(je,V),je.prototype[rt]=!0,je.prototype.removeEventListener=function(c,y,E,R){ht(this,c,y,E,R)};function Ie(c,y){var E,R=c.G;if(R)for(E=[];R;R=R.G)E.push(R);if(c=c.M,R=y.type||y,typeof y=="string")y=new D(y,c);else if(y instanceof D)y.target=y.target||c;else{var H=y;y=new D(R,c),ee(y,H)}H=!0;let $,be;if(E)for(be=E.length-1;be>=0;be--)$=y.g=E[be],H=Ke($,R,!0,y)&&H;if($=y.g=c,H=Ke($,R,!0,y)&&H,H=Ke($,R,!1,y)&&H,E)for(be=0;be<E.length;be++)$=y.g=E[be],H=Ke($,R,!1,y)&&H}je.prototype.N=function(){if(je.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const E=c.g[y];for(let R=0;R<E.length;R++)ve(E[R]);delete c.g[y],c.h--}}this.G=null},je.prototype.J=function(c,y,E,R){return this.i.add(String(c),y,!1,E,R)},je.prototype.K=function(c,y,E,R){return this.i.add(String(c),y,!0,E,R)};function Ke(c,y,E,R){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let H=!0;for(let $=0;$<y.length;++$){const be=y[$];if(be&&!be.da&&be.capture==E){const ct=be.listener,Cn=be.ha||be.src;be.fa&&we(c.i,be),H=ct.call(Cn,R)!==!1&&H}}return H&&!R.defaultPrevented}function Kt(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:h.setTimeout(c,y||0)}function ot(c){c.g=Kt(()=>{c.g=null,c.i&&(c.i=!1,ot(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Tt extends V{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ot(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kn(c){V.call(this),this.h=c,this.g={}}T(kn,V);var Vt=[];function yn(c){ye(c.g,function(y,E){this.g.hasOwnProperty(E)&&le(y)},c),c.g={}}kn.prototype.N=function(){kn.Z.N.call(this),yn(this)},kn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qe=h.JSON.stringify,pt=h.JSON.parse,Sn=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function Gn(){}function Dn(){}var Wt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Pt(){D.call(this,"d")}T(Pt,D);function Ut(){D.call(this,"c")}T(Ut,D);var xt={},Ir=null;function wn(){return Ir=Ir||new je}xt.Ia="serverreachability";function An(c){D.call(this,xt.Ia,c)}T(An,D);function on(c){const y=wn();Ie(y,new An(y))}xt.STAT_EVENT="statevent";function ir(c,y){D.call(this,xt.STAT_EVENT,c),this.stat=y}T(ir,D);function kt(c){const y=wn();Ie(y,new ir(y,c))}xt.Ja="timingevent";function mn(c,y){D.call(this,xt.Ja,c),this.size=y}T(mn,D);function sr(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},y)}function qe(){this.g=!0}qe.prototype.ua=function(){this.g=!1};function St(c,y,E,R,H,$){c.info(function(){if(c.g)if($){var be="",ct=$.split("&");for(let Bt=0;Bt<ct.length;Bt++){var Cn=ct[Bt].split("=");if(Cn.length>1){const pn=Cn[0];Cn=Cn[1];const qr=pn.split("_");be=qr.length>=2&&qr[1]=="type"?be+(pn+"="+Cn+"&"):be+(pn+"=redacted&")}}}else be=null;else be=$;return"XMLHTTP REQ ("+R+") [attempt "+H+"]: "+y+`
`+E+`
`+be})}function Q(c,y,E,R,H,$,be){c.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+H+"]: "+y+`
`+E+`
`+$+" "+be})}function J(c,y,E,R){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+Se(c,E)+(R?" "+R:"")})}function de(c,y){c.info(function(){return"TIMEOUT: "+y})}qe.prototype.info=function(){};function Se(c,y){if(!c.g)return y;if(!y)return null;try{const $=JSON.parse(y);if($){for(c=0;c<$.length;c++)if(Array.isArray($[c])){var E=$[c];if(!(E.length<2)){var R=E[1];if(Array.isArray(R)&&!(R.length<1)){var H=R[0];if(H!="noop"&&H!="stop"&&H!="close")for(let be=1;be<R.length;be++)R[be]=""}}}}return Qe($)}catch{return y}}var ke={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Je={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xe;function Ot(){}T(Ot,Gn),Ot.prototype.g=function(){return new XMLHttpRequest},xe=new Ot;function et(c){return encodeURIComponent(String(c))}function yt(c){var y=1;c=c.split(":");const E=[];for(;y>0&&c.length;)E.push(c.shift()),y--;return c.length&&E.push(c.join(":")),E}function $e(c,y,E,R){this.j=c,this.i=y,this.l=E,this.S=R||1,this.V=new kn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Dt}function Dt(){this.i=null,this.g="",this.h=!1}var I={},ie={};function _e(c,y,E){c.M=1,c.A=ca(Mn(y)),c.u=E,c.R=!0,Fe(c,null)}function Fe(c,y){c.F=Date.now(),gt(c),c.B=Mn(c.A);var E=c.B,R=c.S;Array.isArray(R)||(R=[String(R)]),$a(E.i,"t",R),c.C=0,E=c.j.L,c.h=new Dt,c.g=nc(c.j,E?y:null,!c.u),c.P>0&&(c.O=new Tt(m(c.Y,c,c.g),c.P)),y=c.V,E=c.g,R=c.ba;var H="readystatechange";Array.isArray(H)||(H&&(Vt[0]=H.toString()),H=Vt);for(let $=0;$<H.length;$++){const be=me(E,H[$],R||y.handleEvent,!1,y.h||y);if(!be)break;y.g[be.key]=be}y=c.J?O(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),on(),St(c.i,c.v,c.B,c.l,c.S,c.u)}$e.prototype.ba=function(c){c=c.target;const y=this.O;y&&ei(c)==3?y.j():this.Y(c)},$e.prototype.Y=function(c){try{if(c==this.g)e:{const ct=ei(this.g),Cn=this.g.ya(),Bt=this.g.ca();if(!(ct<3)&&(ct!=3||this.g&&(this.h.h||this.g.la()||$n(this.g)))){this.K||ct!=4||Cn==7||(Cn==8||Bt<=0?on(3):on(2)),Rn(this);var y=this.g.ca();this.X=y;var E=st(this);if(this.o=y==200,Q(this.i,this.v,this.B,this.l,this.S,ct,y),this.o){if(this.U&&!this.L){t:{if(this.g){var R,H=this.g;if((R=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(R)){var $=R;break t}}$=null}if(c=$)J(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Xn(this,c);else{this.o=!1,this.m=3,kt(12),Qt(this),cn(this);break e}}if(this.R){c=!0;let pn;for(;!this.K&&this.C<E.length;)if(pn=vt(this,E),pn==ie){ct==4&&(this.m=4,kt(14),c=!1),J(this.i,this.l,null,"[Incomplete Response]");break}else if(pn==I){this.m=4,kt(15),J(this.i,this.l,E,"[Invalid Chunk]"),c=!1;break}else J(this.i,this.l,pn,null),Xn(this,pn);if(zt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||E.length!=0||this.h.h||(this.m=1,kt(16),c=!1),this.o=this.o&&c,!c)J(this.i,this.l,E,"[Invalid Chunked Response]"),Qt(this),cn(this);else if(E.length>0&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.aa&&!be.P&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),gl(be),be.P=!0,kt(11))}}else J(this.i,this.l,E,null),Xn(this,E);ct==4&&Qt(this),this.o&&!this.K&&(ct==4?Ju(this.j,this):(this.o=!1,gt(this)))}else Li(this.g),y==400&&E.indexOf("Unknown SID")>0?(this.m=3,kt(12)):(this.m=0,kt(13)),Qt(this),cn(this)}}}catch{}finally{}};function st(c){if(!zt(c))return c.g.la();const y=$n(c.g);if(y==="")return"";let E="";const R=y.length,H=ei(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Qt(c),cn(c),"";c.h.i=new h.TextDecoder}for(let $=0;$<R;$++)c.h.h=!0,E+=c.h.i.decode(y[$],{stream:!(H&&$==R-1)});return y.length=0,c.h.g+=E,c.C=0,c.h.g}function zt(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function vt(c,y){var E=c.C,R=y.indexOf(`
`,E);return R==-1?ie:(E=Number(y.substring(E,R)),isNaN(E)?I:(R+=1,R+E>y.length?ie:(y=y.slice(R,R+E),c.C=R+E,y)))}$e.prototype.cancel=function(){this.K=!0,Qt(this)};function gt(c){c.T=Date.now()+c.H,nn(c,c.H)}function nn(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=sr(m(c.aa,c),y)}function Rn(c){c.D&&(h.clearTimeout(c.D),c.D=null)}$e.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(de(this.i,this.B),this.M!=2&&(on(),kt(17)),Qt(this),this.m=2,cn(this)):nn(this,this.T-c)};function cn(c){c.j.I==0||c.K||Ju(c.j,c)}function Qt(c){Rn(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,yn(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function Xn(c,y){try{var E=c.j;if(E.I!=0&&(E.g==c||di(E.h,c))){if(!c.L&&di(E.h,c)&&E.I==3){try{var R=E.Ba.g.parse(y)}catch{R=null}if(Array.isArray(R)&&R.length==3){var H=R;if(H[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<c.F)to(E),ys(E);else break e;ya(E),kt(18)}}else E.xa=H[1],0<E.xa-E.K&&H[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=sr(m(E.Va,E),6e3));Ur(E.h)<=1&&E.ta&&(E.ta=void 0)}else yi(E,11)}else if((c.L||E.g==c)&&to(E),!x(y))for(H=E.Ba.g.parse(y),y=0;y<H.length;y++){let Bt=H[y];const pn=Bt[0];if(!(pn<=E.K))if(E.K=pn,Bt=Bt[1],E.I==2)if(Bt[0]=="c"){E.M=Bt[1],E.ba=Bt[2];const qr=Bt[3];qr!=null&&(E.ka=qr,E.j.info("VER="+E.ka));const vi=Bt[4];vi!=null&&(E.za=vi,E.j.info("SVER="+E.za));const ti=Bt[5];ti!=null&&typeof ti=="number"&&ti>0&&(R=1.5*ti,E.O=R,E.j.info("backChannelRequestTimeoutMs_="+R)),R=E;const ni=c.g;if(ni){const va=ni.g?ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(va){var $=R.h;$.g||va.indexOf("spdy")==-1&&va.indexOf("quic")==-1&&va.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(il($,$.h),$.h=null))}if(R.G){const no=ni.g?ni.g.getResponseHeader("X-HTTP-Session-Id"):null;no&&(R.wa=no,Yt(R.J,R.G,no))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-c.F,E.j.info("Handshake RTT: "+E.T+"ms")),R=E;var be=c;if(R.na=tc(R,R.L?R.ba:null,R.W),be.L){sl(R.h,be);var ct=be,Cn=R.O;Cn&&(ct.H=Cn),ct.D&&(Rn(ct),gt(ct)),R.g=be}else $u(R);E.i.length>0&&gi(E)}else Bt[0]!="stop"&&Bt[0]!="close"||yi(E,7);else E.I==3&&(Bt[0]=="stop"||Bt[0]=="close"?Bt[0]=="stop"?yi(E,7):ml(E):Bt[0]!="noop"&&E.l&&E.l.qa(Bt),E.A=0)}}on(4)}catch{}}var ln=class{constructor(c,y){this.g=c,this.map=y}};function ar(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function hr(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ur(c){return c.h?1:c.g?c.g.size:0}function di(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function il(c,y){c.g?c.g.add(y):c.h=y}function sl(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}ar.prototype.cancel=function(){if(this.i=al(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function al(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const E of c.g.values())y=y.concat(E.G);return y}return w(c.i)}var Hu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ya(c,y){if(c){c=c.split("&");for(let E=0;E<c.length;E++){const R=c[E].indexOf("=");let H,$=null;R>=0?(H=c[E].substring(0,R),$=c[E].substring(R+1)):H=c[E],y(H,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function xr(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof xr?(this.l=c.l,Kn(this,c.j),this.o=c.o,this.g=c.g,cs(this,c.u),this.h=c.h,ol(this,Yu(c.i)),this.m=c.m):c&&(y=String(c).match(Hu))?(this.l=!1,Kn(this,y[1]||"",!0),this.o=hi(y[2]||""),this.g=hi(y[3]||"",!0),cs(this,y[4]),this.h=hi(y[5]||"",!0),ol(this,y[6]||"",!0),this.m=hi(y[7]||"")):(this.l=!1,this.i=new hs(null,this.l))}xr.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(da(y,Xa,!0),":");var E=this.g;return(E||y=="file")&&(c.push("//"),(y=this.o)&&c.push(da(y,Xa,!0),"@"),c.push(et(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&c.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&c.push("/"),c.push(da(E,E.charAt(0)=="/"?ll:Gu,!0))),(E=this.i.toString())&&c.push("?",E),(E=this.m)&&c.push("#",da(E,Ku)),c.join("")},xr.prototype.resolve=function(c){const y=Mn(this);let E=!!c.j;E?Kn(y,c.j):E=!!c.o,E?y.o=c.o:E=!!c.g,E?y.g=c.g:E=c.u!=null;var R=c.h;if(E)cs(y,c.u);else if(E=!!c.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var H=y.h.lastIndexOf("/");H!=-1&&(R=y.h.slice(0,H+1)+R)}if(H=R,H==".."||H==".")R="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){R=H.lastIndexOf("/",0)==0,H=H.split("/");const $=[];for(let be=0;be<H.length;){const ct=H[be++];ct=="."?R&&be==H.length&&$.push(""):ct==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),R&&be==H.length&&$.push("")):($.push(ct),R=!0)}R=$.join("/")}else R=H}return E?y.h=R:E=c.i.toString()!=="",E?ol(y,Yu(c.i)):E=!!c.m,E&&(y.m=c.m),y};function Mn(c){return new xr(c)}function Kn(c,y,E){c.j=E?hi(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function cs(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function ol(c,y,E){y instanceof hs?(c.i=y,Wa(c.i,c.l)):(E||(y=da(y,ds)),c.i=new hs(y,c.l))}function Yt(c,y,E){c.i.set(y,E)}function ca(c){return Yt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function hi(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function da(c,y,E){return typeof c=="string"?(c=encodeURI(c).replace(y,yr),E&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function yr(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Xa=/[#\/\?@]/g,Gu=/[#\?:]/g,ll=/[#\?]/g,ds=/[#\?@]/g,Ku=/#/g;function hs(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function vr(c){c.g||(c.g=new Map,c.h=0,c.i&&Ya(c.i,function(y,E){c.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}i=hs.prototype,i.add=function(c,y){vr(this),this.i=null,c=fs(this,c);let E=this.g.get(c);return E||this.g.set(c,E=[]),E.push(y),this.h+=1,this};function Qu(c,y){vr(c),y=fs(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function ul(c,y){return vr(c),y=fs(c,y),c.g.has(y)}i.forEach=function(c,y){vr(this),this.g.forEach(function(E,R){E.forEach(function(H){c.call(y,H,R,this)},this)},this)};function cl(c,y){vr(c);let E=[];if(typeof y=="string")ul(c,y)&&(E=E.concat(c.g.get(fs(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)E=E.concat(c[y]);return E}i.set=function(c,y){return vr(this),this.i=null,c=fs(this,c),ul(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},i.get=function(c,y){return c?(c=cl(this,c),c.length>0?String(c[0]):y):y};function $a(c,y,E){Qu(c,y),E.length>0&&(c.i=null,c.g.set(fs(c,y),w(E)),c.h+=E.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let R=0;R<y.length;R++){var E=y[R];const H=et(E);E=cl(this,E);for(let $=0;$<E.length;$++){let be=H;E[$]!==""&&(be+="="+et(E[$])),c.push(be)}}return this.i=c.join("&")};function Yu(c){const y=new hs;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function fs(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Wa(c,y){y&&!c.j&&(vr(c),c.i=null,c.g.forEach(function(E,R){const H=R.toLowerCase();R!=H&&(Qu(this,R),$a(this,H,E))},c)),c.j=y}function Jr(c,y){const E=new qe;if(h.Image){const R=new Image;R.onload=v(zr,E,"TestLoadImage: loaded",!0,y,R),R.onerror=v(zr,E,"TestLoadImage: error",!1,y,R),R.onabort=v(zr,E,"TestLoadImage: abort",!1,y,R),R.ontimeout=v(zr,E,"TestLoadImage: timeout",!1,y,R),h.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=c}else y(!1)}function dl(c,y){const E=new qe,R=new AbortController,H=setTimeout(()=>{R.abort(),zr(E,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:R.signal}).then($=>{clearTimeout(H),$.ok?zr(E,"TestPingServer: ok",!0,y):zr(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),zr(E,"TestPingServer: error",!1,y)})}function zr(c,y,E,R,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),R(E)}catch{}}function ms(){this.g=new Sn}function fi(c){this.i=c.Sb||null,this.h=c.ab||!1}T(fi,Gn),fi.prototype.g=function(){return new ha(this.i,this.h)};function ha(c,y){je.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(ha,je),i=ha.prototype,i.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,Zr(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||h).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ps(this)),this.readyState=0},i.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Zr(this)),this.g&&(this.readyState=3,Zr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ja(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ja(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}i.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?ps(this):Zr(this),this.readyState==3&&Ja(this)}},i.Oa=function(c){this.g&&(this.response=this.responseText=c,ps(this))},i.Na=function(c){this.g&&(this.response=c,ps(this))},i.ga=function(){this.g&&ps(this)};function ps(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Zr(c)}i.setRequestHeader=function(c,y){this.A.append(c,y)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,c.push(E[0]+": "+E[1]),E=y.next();return c.join(`\r
`)};function Zr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ha.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Br(c){let y="";return ye(c,function(E,R){y+=R,y+=":",y+=E,y+=`\r
`}),y}function fa(c,y,E){e:{for(R in E){var R=!1;break e}R=!0}R||(E=Br(E),typeof c=="string"?E!=null&&et(E):Yt(c,y,E))}function Jt(c){je.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(Jt,je);var mi=/^https?$/i,hl=["POST","PUT"];i=Jt.prototype,i.Fa=function(c){this.H=c},i.ea=function(c,y,E,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xe.g(),this.g.onreadystatechange=S(m(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch($){ma(this,$);return}if(c=E||"",E=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var H in R)E.set(H,R[H]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const $ of R.keys())E.set($,R.get($));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(E.keys()).find($=>$.toLowerCase()=="content-type"),H=h.FormData&&c instanceof h.FormData,!(Array.prototype.indexOf.call(hl,y,void 0)>=0)||R||H||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,be]of E)this.g.setRequestHeader($,be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch($){ma(this,$)}};function ma(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,fl(c),Vi(c)}function fl(c){c.A||(c.A=!0,Ie(c,"complete"),Ie(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Ie(this,"complete"),Ie(this,"abort"),Vi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vi(this,!0)),Jt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?pa(this):this.Xa())},i.Xa=function(){pa(this)};function pa(c){if(c.h&&typeof u<"u"){if(c.v&&ei(c)==4)setTimeout(c.Ca.bind(c),0);else if(Ie(c,"readystatechange"),ei(c)==4){c.h=!1;try{const $=c.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var R;if(R=$===0){let be=String(c.D).match(Hu)[1]||null;!be&&h.self&&h.self.location&&(be=h.self.location.protocol.slice(0,-1)),R=!mi.test(be?be.toLowerCase():"")}E=R}if(E)Ie(c,"complete"),Ie(c,"success");else{c.o=6;try{var H=ei(c)>2?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.ca()+"]",fl(c)}}finally{Vi(c)}}}}function Vi(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const E=c.g;c.g=null,y||Ie(c,"ready");try{E.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function ei(c){return c.g?c.g.readyState:0}i.ca=function(){try{return ei(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),pt(y)}};function $n(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Li(c){const y={};c=(c.g&&ei(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<c.length;R++){if(x(c[R]))continue;var E=yt(c[R]);const H=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const $=y[H]||[];y[H]=$,$.push(E)}Le(y,function(R){return R.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function pi(c,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[c]||y}function gs(c){this.za=0,this.i=[],this.j=new qe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=pi("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=pi("baseRetryDelayMs",5e3,c),this.Za=pi("retryDelaySeedMs",1e4,c),this.Ta=pi("forwardChannelMaxRetries",2,c),this.va=pi("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new ar(c&&c.concurrentRequestLimit),this.Ba=new ms,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=gs.prototype,i.ka=8,i.I=1,i.connect=function(c,y,E,R){kt(0),this.W=c,this.H=y||{},E&&R!==void 0&&(this.H.OSID=E,this.H.OAID=R),this.F=this.X,this.J=tc(this,null,this.W),gi(this)};function ml(c){if(Za(c),c.I==3){var y=c.V++,E=Mn(c.J);if(Yt(E,"SID",c.M),Yt(E,"RID",y),Yt(E,"TYPE","terminate"),ga(c,E),y=new $e(c,c.j,y),y.M=2,y.A=ca(Mn(E)),E=!1,h.navigator&&h.navigator.sendBeacon)try{E=h.navigator.sendBeacon(y.A.toString(),"")}catch{}!E&&h.Image&&(new Image().src=y.A,E=!0),E||(y.g=nc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),gt(y)}ec(c)}function ys(c){c.g&&(gl(c),c.g.cancel(),c.g=null)}function Za(c){ys(c),c.v&&(h.clearTimeout(c.v),c.v=null),to(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&h.clearTimeout(c.m),c.m=null)}function gi(c){if(!hr(c.h)&&!c.m){c.m=!0;var y=c.Ea;He||C(),Me||(He(),Me=!0),k.add(y,c),c.D=0}}function eo(c,y){return Ur(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=sr(m(c.Ea,c,y),Zu(c,c.D)),c.D++,!0)}i.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const H=new $e(this,this.j,c);let $=this.o;if(this.U&&($?($=O($),ee($,this.U)):$=this.U),this.u!==null||this.R||(H.J=$,$=null),this.S)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var R=this.i[E];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(y+=R,y>4096){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=Xu(this,H,y),E=Mn(this.J),Yt(E,"RID",c),Yt(E,"CVER",22),this.G&&Yt(E,"X-HTTP-Session-Id",this.G),ga(this,E),$&&(this.R?y="headers="+et(Br($))+"&"+y:this.u&&fa(E,this.u,$)),il(this.h,H),this.Ra&&Yt(E,"TYPE","init"),this.S?(Yt(E,"$req",y),Yt(E,"SID","null"),H.U=!0,_e(H,E,null)):_e(H,E,y),this.I=2}}else this.I==3&&(c?pl(this,c):this.i.length==0||hr(this.h)||pl(this))};function pl(c,y){var E;y?E=y.l:E=c.V++;const R=Mn(c.J);Yt(R,"SID",c.M),Yt(R,"RID",E),Yt(R,"AID",c.K),ga(c,R),c.u&&c.o&&fa(R,c.u,c.o),E=new $e(c,c.j,E,c.D+1),c.u===null&&(E.J=c.o),y&&(c.i=y.G.concat(c.i)),y=Xu(c,E,1e3),E.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),il(c.h,E),_e(E,R,y)}function ga(c,y){c.H&&ye(c.H,function(E,R){Yt(y,R,E)}),c.l&&ye({},function(E,R){Yt(y,R,E)})}function Xu(c,y,E){E=Math.min(c.i.length,E);const R=c.l?m(c.l.Ka,c.l,c):null;e:{var H=c.i;let ct=-1;for(;;){const Cn=["count="+E];ct==-1?E>0?(ct=H[0].g,Cn.push("ofs="+ct)):ct=0:Cn.push("ofs="+ct);let Bt=!0;for(let pn=0;pn<E;pn++){var $=H[pn].g;const qr=H[pn].map;if($-=ct,$<0)ct=Math.max(0,H[pn].g-100),Bt=!1;else try{$="req"+$+"_"||"";try{var be=qr instanceof Map?qr:Object.entries(qr);for(const[vi,ti]of be){let ni=ti;g(ti)&&(ni=Qe(ti)),Cn.push($+vi+"="+encodeURIComponent(ni))}}catch(vi){throw Cn.push($+"type="+encodeURIComponent("_badmap")),vi}}catch{R&&R(qr)}}if(Bt){be=Cn.join("&");break e}}be=void 0}return c=c.i.splice(0,E),y.G=c,be}function $u(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;He||C(),Me||(He(),Me=!0),k.add(y,c),c.A=0}}function ya(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=sr(m(c.Da,c),Zu(c,c.A)),c.A++,!0)}i.Da=function(){if(this.v=null,Wu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=sr(m(this.Wa,this),c)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,kt(10),ys(this),Wu(this))};function gl(c){c.B!=null&&(h.clearTimeout(c.B),c.B=null)}function Wu(c){c.g=new $e(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=Mn(c.na);Yt(y,"RID","rpc"),Yt(y,"SID",c.M),Yt(y,"AID",c.K),Yt(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&Yt(y,"TO",c.ia),Yt(y,"TYPE","xmlhttp"),ga(c,y),c.u&&c.o&&fa(y,c.u,c.o),c.O&&(c.g.H=c.O);var E=c.g;c=c.ba,E.M=1,E.A=ca(Mn(y)),E.u=null,E.R=!0,Fe(E,c)}i.Va=function(){this.C!=null&&(this.C=null,ys(this),ya(this),kt(19))};function to(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function Ju(c,y){var E=null;if(c.g==y){to(c),gl(c),c.g=null;var R=2}else if(di(c.h,y))E=y.G,sl(c.h,y),R=1;else return;if(c.I!=0){if(y.o)if(R==1){E=y.u?y.u.length:0,y=Date.now()-y.F;var H=c.D;R=wn(),Ie(R,new mn(R,E)),gi(c)}else $u(c);else if(H=y.m,H==3||H==0&&y.X>0||!(R==1&&eo(c,y)||R==2&&ya(c)))switch(E&&E.length>0&&(y=c.h,y.i=y.i.concat(E)),H){case 1:yi(c,5);break;case 4:yi(c,10);break;case 3:yi(c,6);break;default:yi(c,2)}}}function Zu(c,y){let E=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(E*=2),E*y}function yi(c,y){if(c.j.info("Error code "+y),y==2){var E=m(c.bb,c),R=c.Ua;const H=!R;R=new xr(R||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Kn(R,"https"),ca(R),H?Jr(R.toString(),E):dl(R.toString(),E)}else kt(2);c.I=0,c.l&&c.l.pa(y),ec(c),Za(c)}i.bb=function(c){c?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function ec(c){if(c.I=0,c.ja=[],c.l){const y=al(c.h);(y.length!=0||c.i.length!=0)&&(L(c.ja,y),L(c.ja,c.i),c.h.i.length=0,w(c.i),c.i.length=0),c.l.oa()}}function tc(c,y,E){var R=E instanceof xr?Mn(E):new xr(E);if(R.g!="")y&&(R.g=y+"."+R.g),cs(R,R.u);else{var H=h.location;R=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;const $=new xr(null);R&&Kn($,R),y&&($.g=y),H&&cs($,H),E&&($.h=E),R=$}return E=c.G,y=c.wa,E&&y&&Yt(R,E,y),Yt(R,"VER",c.ka),ga(c,R),R}function nc(c,y,E){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new Jt(new fi({ab:E})):new Jt(c.ma),y.Fa(c.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function rc(){}i=rc.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function vs(){}vs.prototype.g=function(c,y){return new fr(c,y)};function fr(c,y){je.call(this),this.g=new gs(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!x(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!x(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new ji(this)}T(fr,je),fr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fr.prototype.close=function(){ml(this.g)},fr.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var E={};E.__data__=c,c=E}else this.v&&(E={},E.__data__=Qe(c),c=E);y.i.push(new ln(y.Ya++,c)),y.I==3&&gi(y)},fr.prototype.N=function(){this.g.l=null,delete this.j,ml(this.g),delete this.g,fr.Z.N.call(this)};function ic(c){Pt.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const E in y){c=E;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}T(ic,Pt);function sc(){Ut.call(this),this.status=1}T(sc,Ut);function ji(c){this.g=c}T(ji,rc),ji.prototype.ra=function(){Ie(this.g,"a")},ji.prototype.qa=function(c){Ie(this.g,new ic(c))},ji.prototype.pa=function(c){Ie(this.g,new sc)},ji.prototype.oa=function(){Ie(this.g,"b")},vs.prototype.createWebChannel=vs.prototype.g,fr.prototype.send=fr.prototype.o,fr.prototype.open=fr.prototype.m,fr.prototype.close=fr.prototype.close,UE=function(){return new vs},PE=function(){return wn()},jE=xt,Ym={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ke.NO_ERROR=0,ke.TIMEOUT=8,ke.HTTP_ERROR=6,Ed=ke,Je.COMPLETE="complete",LE=Je,Dn.EventType=Wt,Wt.OPEN="a",Wt.CLOSE="b",Wt.ERROR="c",Wt.MESSAGE="d",je.prototype.listen=je.prototype.J,au=Dn,Jt.prototype.listenOnce=Jt.prototype.K,Jt.prototype.getLastError=Jt.prototype.Ha,Jt.prototype.getLastErrorCode=Jt.prototype.ya,Jt.prototype.getStatus=Jt.prototype.ca,Jt.prototype.getResponseJson=Jt.prototype.La,Jt.prototype.getResponseText=Jt.prototype.la,Jt.prototype.send=Jt.prototype.ea,Jt.prototype.setWithCredentials=Jt.prototype.Fa,VE=Jt}).apply(typeof cd<"u"?cd:typeof self<"u"?self:typeof window<"u"?window:{});const I_="@firebase/firestore",x_="4.9.2";class ur{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ur.UNAUTHENTICATED=new ur(null),ur.GOOGLE_CREDENTIALS=new ur("google-credentials-uid"),ur.FIRST_PARTY=new ur("first-party-uid"),ur.MOCK_USER=new ur("mock-user");let Jo="12.3.0";const qa=new bp("@firebase/firestore");function Mo(){return qa.logLevel}function Ve(i,...e){if(qa.logLevel<=Rt.DEBUG){const n=e.map(kp);qa.debug(`Firestore (${Jo}): ${i}`,...n)}}function as(i,...e){if(qa.logLevel<=Rt.ERROR){const n=e.map(kp);qa.error(`Firestore (${Jo}): ${i}`,...n)}}function Ho(i,...e){if(qa.logLevel<=Rt.WARN){const n=e.map(kp);qa.warn(`Firestore (${Jo}): ${i}`,...n)}}function kp(i){if(typeof i=="string")return i;try{return(function(n){return JSON.stringify(n)})(i)}catch{return i}}function nt(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,zE(i,s,n)}function zE(i,e,n){let s=`FIRESTORE (${Jo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw as(s),new Error(s)}function Gt(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||zE(e,o,s)}function ut(i,e){return i}const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends Mi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class rs{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class BE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ur.UNAUTHENTICATED)))}shutdown(){}}class yI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class vI{constructor(e){this.t=e,this.currentUser=ur.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Gt(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new rs;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new rs,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},g=p=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((p=>g(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new rs)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Gt(typeof s.accessToken=="string",31837,{l:s}),new BE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Gt(e===null||typeof e=="string",2055,{h:e}),new ur(e)}}class _I{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=ur.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class bI{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new _I(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ur.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class N_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Gt(this.o===void 0,3512);const s=u=>{u.error!=null&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,Ve("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new N_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Gt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new N_(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function TI(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}class Dp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=TI(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Ct(i,e){return i<e?-1:i>e?1:0}function Xm(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),u=e.charAt(s);if(o!==u)return Nm(o)===Nm(u)?Ct(o,u):Nm(o)?1:-1}return Ct(i.length,e.length)}const SI=55296,wI=57343;function Nm(i){const e=i.charCodeAt(0);return e>=SI&&e<=wI}function Go(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}const k_="__name__";class Si{constructor(e,n,s){n===void 0?n=0:n>e.length&&nt(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&nt(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Si.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Si?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=Si.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Ct(e.length,n.length)}static compareSegments(e,n){const s=Si.isNumericId(e),o=Si.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Si.extractNumericId(e).compare(Si.extractNumericId(n)):Xm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $s.fromString(e.substring(4,e.length-2))}}class un extends Si{construct(e,n,s){return new un(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ce(te.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new un(n)}static emptyPath(){return new un([])}}const AI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nr extends Si{construct(e,n,s){return new nr(e,n,s)}static isValidIdentifier(e){return AI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===k_}static keyField(){return new nr([k_])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new Ce(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let h=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new Ce(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Ce(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else g==="`"?(h=!h,o++):g!=="."||h?(s+=g,o++):(u(),o++)}if(u(),h)throw new Ce(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nr(n)}static emptyPath(){return new nr([])}}class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(un.fromString(e))}static fromName(e){return new Xe(un.fromString(e).popFirst(5))}static empty(){return new Xe(un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&un.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return un.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new un(e.slice()))}}function qE(i,e,n){if(!n)throw new Ce(te.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function RI(i,e,n,s){if(e===!0&&s===!0)throw new Ce(te.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function D_(i){if(!Xe.isDocumentKey(i))throw new Ce(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function M_(i){if(Xe.isDocumentKey(i))throw new Ce(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function FE(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function ih(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":nt(12329,{type:typeof i})}function pr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Ce(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ih(i);throw new Ce(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function CI(i,e){if(e<=0)throw new Ce(te.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}function Bn(i,e){const n={typeString:i};return e&&(n.value=e),n}function Ou(i,e){if(!FE(i))throw new Ce(te.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const h=i[s];if(o&&typeof h!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new Ce(te.INVALID_ARGUMENT,n);return!0}const O_=-62135596800,V_=1e6;class Ht{static now(){return Ht.fromMillis(Date.now())}static fromDate(e){return Ht.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*V_);return new Ht(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ce(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ce(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<O_)throw new Ce(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/V_}_compareTo(e){return this.seconds===e.seconds?Ct(this.nanoseconds,e.nanoseconds):Ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ou(e,Ht._jsonSchema))return new Ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-O_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ht._jsonSchemaVersion="firestore/timestamp/1.0",Ht._jsonSchema={type:Bn("string",Ht._jsonSchemaVersion),seconds:Bn("number"),nanoseconds:Bn("number")};class at{static fromTimestamp(e){return new at(e)}static min(){return new at(new Ht(0,0))}static max(){return new at(new Ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const bu=-1;function II(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=at.fromTimestamp(s===1e9?new Ht(n+1,0):new Ht(n,s));return new ea(o,Xe.empty(),e)}function xI(i){return new ea(i.readTime,i.key,bu)}class ea{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ea(at.min(),Xe.empty(),bu)}static max(){return new ea(at.max(),Xe.empty(),bu)}}function NI(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Xe.comparator(i.documentKey,e.documentKey),n!==0?n:Ct(i.largestBatchId,e.largestBatchId))}const kI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Zo(i){if(i.code!==te.FAILED_PRECONDITION||i.message!==kI)throw i;Ve("LocalStore","Unexpectedly lost primary lease")}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&nt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ue(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ue?n:ue.resolve(n)}catch(n){return ue.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.reject(n)}static resolve(e){return new ue(((n,s)=>{n(e)}))}static reject(e){return new ue(((n,s)=>{s(e)}))}static waitFor(e){return new ue(((n,s)=>{let o=0,u=0,h=!1;e.forEach((g=>{++o,g.next((()=>{++u,h&&u===o&&n()}),(p=>s(p)))})),h=!0,u===o&&n()}))}static or(e){let n=ue.resolve(!1);for(const s of e)n=n.next((o=>o?ue.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new ue(((s,o)=>{const u=e.length,h=new Array(u);let g=0;for(let p=0;p<u;p++){const m=p;n(e[m]).next((v=>{h[m]=v,++g,g===u&&s(h)}),(v=>o(v)))}}))}static doWhile(e,n){return new ue(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function MI(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function el(i){return i.name==="IndexedDbTransactionError"}class sh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}sh.ce=-1;const Mp=-1;function ah(i){return i==null}function Ld(i){return i===0&&1/i==-1/0}function OI(i){return typeof i=="number"&&Number.isInteger(i)&&!Ld(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const HE="";function VI(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=L_(e)),e=LI(i.get(n),e);return L_(e)}function LI(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case HE:n+="";break;default:n+=u}}return n}function L_(i){return i+HE+""}function j_(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function la(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function GE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class vn{constructor(e,n){this.comparator=e,this.root=n||tr.EMPTY}insert(e,n){return new vn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tr.BLACK,null,null))}remove(e){return new vn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dd(this.root,e,this.comparator,!1)}getReverseIterator(){return new dd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dd(this.root,e,this.comparator,!0)}}class dd{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tr{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??tr.RED,this.left=o??tr.EMPTY,this.right=u??tr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new tr(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return tr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return tr.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw nt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw nt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw nt(27949);return e+(this.isRed()?0:1)}}tr.EMPTY=null,tr.RED=!0,tr.BLACK=!1;tr.EMPTY=new class{constructor(){this.size=0}get key(){throw nt(57766)}get value(){throw nt(16141)}get color(){throw nt(16727)}get left(){throw nt(29726)}get right(){throw nt(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new tr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hn{constructor(e){this.comparator=e,this.data=new vn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new P_(this.data.getIterator())}getIteratorFrom(e){return new P_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Hn)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Hn(this.comparator);return n.data=e,n}}class P_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Pr{constructor(e){this.fields=e,e.sort(nr.comparator)}static empty(){return new Pr([])}unionWith(e){let n=new Hn(nr.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Pr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Go(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class KE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class rr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new KE("Invalid base64 string: "+u):u}})(e);return new rr(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new rr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rr.EMPTY_BYTE_STRING=new rr("");const jI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ta(i){if(Gt(!!i,39018),typeof i=="string"){let e=0;const n=jI.exec(i);if(Gt(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Nn(i.seconds),nanos:Nn(i.nanos)}}function Nn(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function na(i){return typeof i=="string"?rr.fromBase64String(i):rr.fromUint8Array(i)}const QE="server_timestamp",YE="__type__",XE="__previous_value__",$E="__local_write_time__";function Op(i){return(i?.mapValue?.fields||{})[YE]?.stringValue===QE}function oh(i){const e=i.mapValue.fields[XE];return Op(e)?oh(e):e}function Eu(i){const e=ta(i.mapValue.fields[$E].timestampValue);return new Ht(e.seconds,e.nanos)}class PI{constructor(e,n,s,o,u,h,g,p,m,v){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=v}}const jd="(default)";class Tu{constructor(e,n){this.projectId=e,this.database=n||jd}static empty(){return new Tu("","")}get isDefaultDatabase(){return this.database===jd}isEqual(e){return e instanceof Tu&&e.projectId===this.projectId&&e.database===this.database}}const WE="__type__",UI="__max__",hd={mapValue:{}},JE="__vector__",Pd="value";function ra(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Op(i)?4:BI(i)?9007199254740991:zI(i)?10:11:nt(28295,{value:i})}function ki(i,e){if(i===e)return!0;const n=ra(i);if(n!==ra(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Eu(i).isEqual(Eu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=ta(o.timestampValue),g=ta(u.timestampValue);return h.seconds===g.seconds&&h.nanos===g.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return na(o.bytesValue).isEqual(na(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return Nn(o.geoPointValue.latitude)===Nn(u.geoPointValue.latitude)&&Nn(o.geoPointValue.longitude)===Nn(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Nn(o.integerValue)===Nn(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=Nn(o.doubleValue),g=Nn(u.doubleValue);return h===g?Ld(h)===Ld(g):isNaN(h)&&isNaN(g)}return!1})(i,e);case 9:return Go(i.arrayValue.values||[],e.arrayValue.values||[],ki);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},g=u.mapValue.fields||{};if(j_(h)!==j_(g))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(g[p]===void 0||!ki(h[p],g[p])))return!1;return!0})(i,e);default:return nt(52216,{left:i})}}function Su(i,e){return(i.values||[]).find((n=>ki(n,e)))!==void 0}function Ko(i,e){if(i===e)return 0;const n=ra(i),s=ra(e);if(n!==s)return Ct(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ct(i.booleanValue,e.booleanValue);case 2:return(function(u,h){const g=Nn(u.integerValue||u.doubleValue),p=Nn(h.integerValue||h.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1})(i,e);case 3:return U_(i.timestampValue,e.timestampValue);case 4:return U_(Eu(i),Eu(e));case 5:return Xm(i.stringValue,e.stringValue);case 6:return(function(u,h){const g=na(u),p=na(h);return g.compareTo(p)})(i.bytesValue,e.bytesValue);case 7:return(function(u,h){const g=u.split("/"),p=h.split("/");for(let m=0;m<g.length&&m<p.length;m++){const v=Ct(g[m],p[m]);if(v!==0)return v}return Ct(g.length,p.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,h){const g=Ct(Nn(u.latitude),Nn(h.latitude));return g!==0?g:Ct(Nn(u.longitude),Nn(h.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return z_(i.arrayValue,e.arrayValue);case 10:return(function(u,h){const g=u.fields||{},p=h.fields||{},m=g[Pd]?.arrayValue,v=p[Pd]?.arrayValue,T=Ct(m?.values?.length||0,v?.values?.length||0);return T!==0?T:z_(m,v)})(i.mapValue,e.mapValue);case 11:return(function(u,h){if(u===hd.mapValue&&h===hd.mapValue)return 0;if(u===hd.mapValue)return 1;if(h===hd.mapValue)return-1;const g=u.fields||{},p=Object.keys(g),m=h.fields||{},v=Object.keys(m);p.sort(),v.sort();for(let T=0;T<p.length&&T<v.length;++T){const S=Xm(p[T],v[T]);if(S!==0)return S;const w=Ko(g[p[T]],m[v[T]]);if(w!==0)return w}return Ct(p.length,v.length)})(i.mapValue,e.mapValue);default:throw nt(23264,{he:n})}}function U_(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ct(i,e);const n=ta(i),s=ta(e),o=Ct(n.seconds,s.seconds);return o!==0?o:Ct(n.nanos,s.nanos)}function z_(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Ko(n[o],s[o]);if(u)return u}return Ct(n.length,s.length)}function Qo(i){return $m(i)}function $m(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=ta(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return na(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return Xe.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=$m(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const h of s)u?u=!1:o+=",",o+=`${h}:${$m(n.fields[h])}`;return o+"}"})(i.mapValue):nt(61005,{value:i})}function Td(i){switch(ra(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=oh(i);return e?16+Td(e):16;case 5:return 2*i.stringValue.length;case 6:return na(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Td(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return la(s.fields,((u,h)=>{o+=u.length+Td(h)})),o})(i.mapValue);default:throw nt(13486,{value:i})}}function B_(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Wm(i){return!!i&&"integerValue"in i}function Vp(i){return!!i&&"arrayValue"in i}function q_(i){return!!i&&"nullValue"in i}function F_(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Sd(i){return!!i&&"mapValue"in i}function zI(i){return(i?.mapValue?.fields||{})[WE]?.stringValue===JE}function hu(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return la(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=hu(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=hu(i.arrayValue.values[n]);return e}return{...i}}function BI(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===UI}class Rr{constructor(e){this.value=e}static empty(){return new Rr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Sd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=hu(n)}setAll(e){let n=nr.emptyPath(),s={},o=[];e.forEach(((h,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=g.popLast()}h?s[g.lastSegment()]=hu(h):o.push(g.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());Sd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ki(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Sd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){la(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new Rr(hu(this.value))}}function ZE(i){const e=[];return la(i.fields,((n,s)=>{const o=new nr([n]);if(Sd(s)){const u=ZE(s.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new Pr(e)}class cr{constructor(e,n,s,o,u,h,g){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=h,this.documentState=g}static newInvalidDocument(e){return new cr(e,0,at.min(),at.min(),at.min(),Rr.empty(),0)}static newFoundDocument(e,n,s,o){return new cr(e,1,n,at.min(),s,o,0)}static newNoDocument(e,n){return new cr(e,2,n,at.min(),at.min(),Rr.empty(),0)}static newUnknownDocument(e,n){return new cr(e,3,n,at.min(),at.min(),Rr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(at.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=at.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ud{constructor(e,n){this.position=e,this.inclusive=n}}function H_(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],h=i.position[o];if(u.field.isKeyField()?s=Xe.comparator(Xe.fromName(h.referenceValue),n.key):s=Ko(h,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function G_(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!ki(i.position[n],e.position[n]))return!1;return!0}class wu{constructor(e,n="asc"){this.field=e,this.dir=n}}function qI(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class eT{}class zn extends eT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new HI(e,n,s):n==="array-contains"?new QI(e,s):n==="in"?new YI(e,s):n==="not-in"?new XI(e,s):n==="array-contains-any"?new $I(e,s):new zn(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new GI(e,s):new KI(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ko(n,this.value)):n!==null&&ra(this.value)===ra(n)&&this.matchesComparison(Ko(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return nt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ci extends eT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ci(e,n)}matches(e){return tT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function tT(i){return i.op==="and"}function nT(i){return FI(i)&&tT(i)}function FI(i){for(const e of i.filters)if(e instanceof ci)return!1;return!0}function Jm(i){if(i instanceof zn)return i.field.canonicalString()+i.op.toString()+Qo(i.value);if(nT(i))return i.filters.map((e=>Jm(e))).join(",");{const e=i.filters.map((n=>Jm(n))).join(",");return`${i.op}(${e})`}}function rT(i,e){return i instanceof zn?(function(s,o){return o instanceof zn&&s.op===o.op&&s.field.isEqual(o.field)&&ki(s.value,o.value)})(i,e):i instanceof ci?(function(s,o){return o instanceof ci&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,h,g)=>u&&rT(h,o.filters[g])),!0):!1})(i,e):void nt(19439)}function iT(i){return i instanceof zn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Qo(n.value)}`})(i):i instanceof ci?(function(n){return n.op.toString()+" {"+n.getFilters().map(iT).join(" ,")+"}"})(i):"Filter"}class HI extends zn{constructor(e,n,s){super(e,n,s),this.key=Xe.fromName(s.referenceValue)}matches(e){const n=Xe.comparator(e.key,this.key);return this.matchesComparison(n)}}class GI extends zn{constructor(e,n){super(e,"in",n),this.keys=sT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class KI extends zn{constructor(e,n){super(e,"not-in",n),this.keys=sT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function sT(i,e){return(e.arrayValue?.values||[]).map((n=>Xe.fromName(n.referenceValue)))}class QI extends zn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vp(n)&&Su(n.arrayValue,this.value)}}class YI extends zn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Su(this.value.arrayValue,n)}}class XI extends zn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Su(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Su(this.value.arrayValue,n)}}class $I extends zn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Su(this.value.arrayValue,s)))}}class WI{constructor(e,n=null,s=[],o=[],u=null,h=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=h,this.endAt=g,this.Te=null}}function K_(i,e=null,n=[],s=[],o=null,u=null,h=null){return new WI(i,e,n,s,o,u,h)}function Lp(i){const e=ut(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Jm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),ah(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Qo(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Qo(s))).join(",")),e.Te=n}return e.Te}function jp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!qI(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!rT(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!G_(i.startAt,e.startAt)&&G_(i.endAt,e.endAt)}function Zm(i){return Xe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class tl{constructor(e,n=null,s=[],o=[],u=null,h="F",g=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=h,this.startAt=g,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function JI(i,e,n,s,o,u,h,g){return new tl(i,e,n,s,o,u,h,g)}function lh(i){return new tl(i)}function Q_(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function aT(i){return i.collectionGroup!==null}function fu(i){const e=ut(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let g=new Hn(nr.comparator);return h.filters.forEach((p=>{p.getFlattenedFilters().forEach((m=>{m.isInequality()&&(g=g.add(m.field))}))})),g})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new wu(u,s))})),n.has(nr.keyField().canonicalString())||e.Ie.push(new wu(nr.keyField(),s))}return e.Ie}function Ci(i){const e=ut(i);return e.Ee||(e.Ee=ZI(e,fu(i))),e.Ee}function ZI(i,e){if(i.limitType==="F")return K_(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new wu(o.field,u)}));const n=i.endAt?new Ud(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Ud(i.startAt.position,i.startAt.inclusive):null;return K_(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function ep(i,e){const n=i.filters.concat([e]);return new tl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function zd(i,e,n){return new tl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function uh(i,e){return jp(Ci(i),Ci(e))&&i.limitType===e.limitType}function oT(i){return`${Lp(Ci(i))}|lt:${i.limitType}`}function Oo(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>iT(o))).join(", ")}]`),ah(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>Qo(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>Qo(o))).join(",")),`Target(${s})`})(Ci(i))}; limitType=${i.limitType})`}function ch(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Xe.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of fu(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(h,g,p){const m=H_(h,g,p);return h.inclusive?m<=0:m<0})(s.startAt,fu(s),o)||s.endAt&&!(function(h,g,p){const m=H_(h,g,p);return h.inclusive?m>=0:m>0})(s.endAt,fu(s),o))})(i,e)}function e2(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function lT(i){return(e,n)=>{let s=!1;for(const o of fu(i)){const u=t2(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function t2(i,e,n){const s=i.field.isKeyField()?Xe.comparator(e.key,n.key):(function(u,h,g){const p=h.data.field(u),m=g.data.field(u);return p!==null&&m!==null?Ko(p,m):nt(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return nt(19790,{direction:i.dir})}}class Ka{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){la(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return GE(this.inner)}size(){return this.innerSize}}const n2=new vn(Xe.comparator);function os(){return n2}const uT=new vn(Xe.comparator);function ou(...i){let e=uT;for(const n of i)e=e.insert(n.key,n);return e}function cT(i){let e=uT;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Va(){return mu()}function dT(){return mu()}function mu(){return new Ka((i=>i.toString()),((i,e)=>i.isEqual(e)))}const r2=new vn(Xe.comparator),i2=new Hn(Xe.comparator);function It(...i){let e=i2;for(const n of i)e=e.add(n);return e}const s2=new Hn(Ct);function a2(){return s2}function Pp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ld(e)?"-0":e}}function hT(i){return{integerValue:""+i}}function o2(i,e){return OI(e)?hT(e):Pp(i,e)}class dh{constructor(){this._=void 0}}function l2(i,e,n){return i instanceof Au?(function(o,u){const h={fields:{[YE]:{stringValue:QE},[$E]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Op(u)&&(u=oh(u)),u&&(h.fields[XE]=u),{mapValue:h}})(n,e):i instanceof Ru?mT(i,e):i instanceof Cu?pT(i,e):(function(o,u){const h=fT(o,u),g=Y_(h)+Y_(o.Ae);return Wm(h)&&Wm(o.Ae)?hT(g):Pp(o.serializer,g)})(i,e)}function u2(i,e,n){return i instanceof Ru?mT(i,e):i instanceof Cu?pT(i,e):n}function fT(i,e){return i instanceof Bd?(function(s){return Wm(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class Au extends dh{}class Ru extends dh{constructor(e){super(),this.elements=e}}function mT(i,e){const n=gT(e);for(const s of i.elements)n.some((o=>ki(o,s)))||n.push(s);return{arrayValue:{values:n}}}class Cu extends dh{constructor(e){super(),this.elements=e}}function pT(i,e){let n=gT(e);for(const s of i.elements)n=n.filter((o=>!ki(o,s)));return{arrayValue:{values:n}}}class Bd extends dh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Y_(i){return Nn(i.integerValue||i.doubleValue)}function gT(i){return Vp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class c2{constructor(e,n){this.field=e,this.transform=n}}function d2(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof Ru&&o instanceof Ru||s instanceof Cu&&o instanceof Cu?Go(s.elements,o.elements,ki):s instanceof Bd&&o instanceof Bd?ki(s.Ae,o.Ae):s instanceof Au&&o instanceof Au})(i.transform,e.transform)}class h2{constructor(e,n){this.version=e,this.transformResults=n}}class gr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gr}static exists(e){return new gr(void 0,e)}static updateTime(e){return new gr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wd(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class hh{}function yT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new fh(i.key,gr.none()):new Vu(i.key,i.data,gr.none());{const n=i.data,s=Rr.empty();let o=new Hn(nr.comparator);for(let u of e.fields)if(!o.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?s.delete(u):s.set(u,h),o=o.add(u)}return new ua(i.key,s,new Pr(o.toArray()),gr.none())}}function f2(i,e,n){i instanceof Vu?(function(o,u,h){const g=o.value.clone(),p=$_(o.fieldTransforms,u,h.transformResults);g.setAll(p),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(i,e,n):i instanceof ua?(function(o,u,h){if(!wd(o.precondition,u))return void u.convertToUnknownDocument(h.version);const g=$_(o.fieldTransforms,u,h.transformResults),p=u.data;p.setAll(vT(o)),p.setAll(g),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(i,e,n):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function pu(i,e,n,s){return i instanceof Vu?(function(u,h,g,p){if(!wd(u.precondition,h))return g;const m=u.value.clone(),v=W_(u.fieldTransforms,p,h);return m.setAll(v),h.convertToFoundDocument(h.version,m).setHasLocalMutations(),null})(i,e,n,s):i instanceof ua?(function(u,h,g,p){if(!wd(u.precondition,h))return g;const m=W_(u.fieldTransforms,p,h),v=h.data;return v.setAll(vT(u)),v.setAll(m),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(i,e,n,s):(function(u,h,g){return wd(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):g})(i,e,n)}function m2(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=fT(s.transform,o||null);u!=null&&(n===null&&(n=Rr.empty()),n.set(s.field,u))}return n||null}function X_(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Go(s,o,((u,h)=>d2(u,h)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Vu extends hh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ua extends hh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function vT(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function $_(i,e,n){const s=new Map;Gt(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const u=i[o],h=u.transform,g=e.data.field(u.field);s.set(u.field,u2(h,g,n[o]))}return s}function W_(i,e,n){const s=new Map;for(const o of i){const u=o.transform,h=n.data.field(o.field);s.set(o.field,l2(u,h,e))}return s}class fh extends hh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class p2 extends hh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class g2{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&f2(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=pu(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=pu(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=dT();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let g=this.applyToLocalView(h,u.mutatedFields);g=n.has(o.key)?null:g;const p=yT(h,g);p!==null&&s.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(at.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),It())}isEqual(e){return this.batchId===e.batchId&&Go(this.mutations,e.mutations,((n,s)=>X_(n,s)))&&Go(this.baseMutations,e.baseMutations,((n,s)=>X_(n,s)))}}class Up{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Gt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return r2})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,s[h].version);return new Up(e,n,s,o)}}class y2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class v2{constructor(e,n){this.count=e,this.unchangedNames=n}}var Pn,Mt;function _2(i){switch(i){case te.OK:return nt(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return nt(15467,{code:i})}}function _T(i){if(i===void 0)return as("GRPC error has no .code"),te.UNKNOWN;switch(i){case Pn.OK:return te.OK;case Pn.CANCELLED:return te.CANCELLED;case Pn.UNKNOWN:return te.UNKNOWN;case Pn.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Pn.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Pn.INTERNAL:return te.INTERNAL;case Pn.UNAVAILABLE:return te.UNAVAILABLE;case Pn.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Pn.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Pn.NOT_FOUND:return te.NOT_FOUND;case Pn.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Pn.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Pn.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Pn.ABORTED:return te.ABORTED;case Pn.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Pn.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Pn.DATA_LOSS:return te.DATA_LOSS;default:return nt(39323,{code:i})}}(Mt=Pn||(Pn={}))[Mt.OK=0]="OK",Mt[Mt.CANCELLED=1]="CANCELLED",Mt[Mt.UNKNOWN=2]="UNKNOWN",Mt[Mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mt[Mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mt[Mt.NOT_FOUND=5]="NOT_FOUND",Mt[Mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mt[Mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mt[Mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mt[Mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mt[Mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mt[Mt.ABORTED=10]="ABORTED",Mt[Mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mt[Mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mt[Mt.INTERNAL=13]="INTERNAL",Mt[Mt.UNAVAILABLE=14]="UNAVAILABLE",Mt[Mt.DATA_LOSS=15]="DATA_LOSS";function b2(){return new TextEncoder}const E2=new $s([4294967295,4294967295],0);function J_(i){const e=b2().encode(i),n=new OE;return n.update(e),new Uint8Array(n.digest())}function Z_(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new $s([n,s],0),new $s([o,u],0)]}class zp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new lu(`Invalid padding: ${n}`);if(s<0)throw new lu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new lu(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new lu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=$s.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply($s.fromNumber(s)));return o.compare(E2)===1&&(o=new $s([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=J_(e),[s,o]=Z_(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,o,u);if(!this.we(h))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new zp(u,o,n);return s.forEach((g=>h.insert(g))),h}insert(e){if(this.ge===0)return;const n=J_(e),[s,o]=Z_(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,o,u);this.Se(h)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class lu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class mh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Lu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new mh(at.min(),o,new vn(Ct),os(),It())}}class Lu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Lu(s,n,It(),It(),It())}}class Ad{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class bT{constructor(e,n){this.targetId=e,this.Ce=n}}class ET{constructor(e,n,s=rr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class eb{constructor(){this.ve=0,this.Fe=tb(),this.Me=rr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=It(),n=It(),s=It();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:nt(38017,{changeType:u})}})),new Lu(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=tb()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Gt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class T2{constructor(e){this.Ge=e,this.ze=new Map,this.je=os(),this.Je=fd(),this.He=fd(),this.Ye=new vn(Ct)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:nt(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Zm(u))if(s===0){const h=new Xe(u.path);this.et(n,h,cr.newNoDocument(h,at.min()))}else Gt(s===1,20013,{expectedCount:s});else{const h=this._t(n);if(h!==s){const g=this.ut(e),p=g?this.ct(g,e,h):1;if(p!==0){this.it(n);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,m)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let h,g;try{h=na(s).toUint8Array()}catch(p){if(p instanceof KE)return Ho("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new zp(h,o,u)}catch(p){return Ho(p instanceof lu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.ge===0?null:g}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const h=this.Ge.ht(),g=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,h)=>{const g=this.ot(h);if(g){if(u.current&&Zm(g.target)){const p=new Xe(g.target.path);this.It(p).has(h)||this.Et(h,p)||this.et(h,p,cr.newNoDocument(p,e))}u.Be&&(n.set(h,u.ke()),u.qe())}}));let s=It();this.He.forEach(((u,h)=>{let g=!0;h.forEachWhile((p=>{const m=this.ot(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(s=s.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const o=new mh(e,n,this.Ye,this.je,s);return this.je=os(),this.Je=fd(),this.He=fd(),this.Ye=new vn(Ct),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new eb,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Hn(Ct),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Hn(Ct),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ve("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new eb),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function fd(){return new vn(Xe.comparator)}function tb(){return new vn(Xe.comparator)}const S2={asc:"ASCENDING",desc:"DESCENDING"},w2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},A2={and:"AND",or:"OR"};class R2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function tp(i,e){return i.useProto3Json||ah(e)?e:{value:e}}function qd(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TT(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function C2(i,e){return qd(i,e.toTimestamp())}function Ii(i){return Gt(!!i,49232),at.fromTimestamp((function(n){const s=ta(n);return new Ht(s.seconds,s.nanos)})(i))}function Bp(i,e){return np(i,e).canonicalString()}function np(i,e){const n=(function(o){return new un(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function ST(i){const e=un.fromString(i);return Gt(IT(e),10190,{key:e.toString()}),e}function rp(i,e){return Bp(i.databaseId,e.path)}function km(i,e){const n=ST(e);if(n.get(1)!==i.databaseId.projectId)throw new Ce(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Ce(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Xe(AT(n))}function wT(i,e){return Bp(i.databaseId,e)}function I2(i){const e=ST(i);return e.length===4?un.emptyPath():AT(e)}function ip(i){return new un(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function AT(i){return Gt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function nb(i,e,n){return{name:rp(i,e),fields:n.value.mapValue.fields}}function x2(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:nt(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(m,v){return m.useProto3Json?(Gt(v===void 0||typeof v=="string",58123),rr.fromBase64String(v||"")):(Gt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),rr.fromUint8Array(v||new Uint8Array))})(i,e.targetChange.resumeToken),h=e.targetChange.cause,g=h&&(function(m){const v=m.code===void 0?te.UNKNOWN:_T(m.code);return new Ce(v,m.message||"")})(h);n=new ET(s,o,u,g||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=km(i,s.document.name),u=Ii(s.document.updateTime),h=s.document.createTime?Ii(s.document.createTime):at.min(),g=new Rr({mapValue:{fields:s.document.fields}}),p=cr.newFoundDocument(o,u,h,g),m=s.targetIds||[],v=s.removedTargetIds||[];n=new Ad(m,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=km(i,s.document),u=s.readTime?Ii(s.readTime):at.min(),h=cr.newNoDocument(o,u),g=s.removedTargetIds||[];n=new Ad([],g,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=km(i,s.document),u=s.removedTargetIds||[];n=new Ad([],u,o,null)}else{if(!("filter"in e))return nt(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,h=new v2(o,u),g=s.targetId;n=new bT(g,h)}}return n}function N2(i,e){let n;if(e instanceof Vu)n={update:nb(i,e.key,e.value)};else if(e instanceof fh)n={delete:rp(i,e.key)};else if(e instanceof ua)n={update:nb(i,e.key,e.data),updateMask:U2(e.fieldMask)};else{if(!(e instanceof p2))return nt(16599,{Vt:e.type});n={verify:rp(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,h){const g=h.transform;if(g instanceof Au)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Ru)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Cu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Bd)return{fieldPath:h.field.canonicalString(),increment:g.Ae};throw nt(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:C2(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:nt(27497)})(i,e.precondition)),n}function k2(i,e){return i&&i.length>0?(Gt(e!==void 0,14353),i.map((n=>(function(o,u){let h=o.updateTime?Ii(o.updateTime):Ii(u);return h.isEqual(at.min())&&(h=Ii(u)),new h2(h,o.transformResults||[])})(n,e)))):[]}function D2(i,e){return{documents:[wT(i,e.path)]}}function M2(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=wT(i,o);const u=(function(m){if(m.length!==0)return CT(ci.create(m,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const h=(function(m){if(m.length!==0)return m.map((v=>(function(S){return{field:Vo(S.field),direction:L2(S.dir)}})(v)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const g=tp(i,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:n,parent:o}}function O2(i){let e=I2(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Gt(s===1,65062);const v=n.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let u=[];n.where&&(u=(function(T){const S=RT(T);return S instanceof ci&&nT(S)?S.getFilters():[S]})(n.where));let h=[];n.orderBy&&(h=(function(T){return T.map((S=>(function(L){return new wu(Lo(L.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(S)))})(n.orderBy));let g=null;n.limit&&(g=(function(T){let S;return S=typeof T=="object"?T.value:T,ah(S)?null:S})(n.limit));let p=null;n.startAt&&(p=(function(T){const S=!!T.before,w=T.values||[];return new Ud(w,S)})(n.startAt));let m=null;return n.endAt&&(m=(function(T){const S=!T.before,w=T.values||[];return new Ud(w,S)})(n.endAt)),JI(e,o,h,u,g,"F",p,m)}function V2(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return nt(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function RT(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Lo(n.unaryFilter.field);return zn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Lo(n.unaryFilter.field);return zn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Lo(n.unaryFilter.field);return zn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Lo(n.unaryFilter.field);return zn.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return nt(61313);default:return nt(60726)}})(i):i.fieldFilter!==void 0?(function(n){return zn.create(Lo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return nt(58110);default:return nt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return ci.create(n.compositeFilter.filters.map((s=>RT(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return nt(1026)}})(n.compositeFilter.op))})(i):nt(30097,{filter:i})}function L2(i){return S2[i]}function j2(i){return w2[i]}function P2(i){return A2[i]}function Vo(i){return{fieldPath:i.canonicalString()}}function Lo(i){return nr.fromServerFormat(i.fieldPath)}function CT(i){return i instanceof zn?(function(n){if(n.op==="=="){if(F_(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NAN"}};if(q_(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(F_(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NOT_NAN"}};if(q_(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vo(n.field),op:j2(n.op),value:n.value}}})(i):i instanceof ci?(function(n){const s=n.getFilters().map((o=>CT(o)));return s.length===1?s[0]:{compositeFilter:{op:P2(n.op),filters:s}}})(i):nt(54877,{filter:i})}function U2(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function IT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class Ks{constructor(e,n,s,o,u=at.min(),h=at.min(),g=rr.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(e){return new Ks(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class z2{constructor(e){this.yt=e}}function B2(i){const e=O2({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?zd(e,e.limit,"L"):e}class q2{constructor(){this.Cn=new F2}addToCollectionParentIndex(e,n){return this.Cn.add(n),ue.resolve()}getCollectionParents(e,n){return ue.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ue.resolve()}deleteFieldIndex(e,n){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,n){return ue.resolve()}getDocumentsMatchingTarget(e,n){return ue.resolve(null)}getIndexType(e,n){return ue.resolve(0)}getFieldIndexes(e,n){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,n){return ue.resolve(ea.min())}getMinOffsetFromCollectionGroup(e,n){return ue.resolve(ea.min())}updateCollectionGroup(e,n,s){return ue.resolve()}updateIndexEntries(e,n){return ue.resolve()}}class F2{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Hn(un.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Hn(un.comparator)).toArray()}}const rb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xT=41943040;class Ar{static withCacheSize(e){return new Ar(e,Ar.DEFAULT_COLLECTION_PERCENTILE,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Ar.DEFAULT_COLLECTION_PERCENTILE=10,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ar.DEFAULT=new Ar(xT,Ar.DEFAULT_COLLECTION_PERCENTILE,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ar.DISABLED=new Ar(-1,0,0);class Yo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Yo(0)}static cr(){return new Yo(-1)}}const ib="LruGarbageCollector",H2=1048576;function sb([i,e],[n,s]){const o=Ct(i,n);return o===0?Ct(e,s):o}class G2{constructor(e){this.Ir=e,this.buffer=new Hn(sb),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();sb(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class K2{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ve(ib,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){el(n)?Ve(ib,"Ignoring IndexedDB error during garbage collection: ",n):await Zo(n)}await this.Vr(3e5)}))}}class Q2{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ue.resolve(sh.ce);const s=new G2(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(rb)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rb):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,h,g,p,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,g=Date.now(),this.removeTargets(e,s,n)))).next((T=>(u=T,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(m=Date.now(),Mo()<=Rt.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-v}ms
	Determined least recently used ${o} in `+(g-h)+`ms
	Removed ${u} targets in `+(p-g)+`ms
	Removed ${T} documents in `+(m-p)+`ms
Total Duration: ${m-v}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function Y2(i,e){return new Q2(i,e)}class X2{constructor(){this.changes=new Ka((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ue.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class W2{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&pu(s.mutation,o,Pr.empty(),Ht.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,It()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=It()){const o=Va();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let h=ou();return u.forEach(((g,p)=>{h=h.insert(g,p.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const s=Va();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,It())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,g)=>{n.set(h,g)}))}))}computeViews(e,n,s,o){let u=os();const h=mu(),g=(function(){return mu()})();return n.forEach(((p,m)=>{const v=s.get(m.key);o.has(m.key)&&(v===void 0||v.mutation instanceof ua)?u=u.insert(m.key,m):v!==void 0?(h.set(m.key,v.mutation.getFieldMask()),pu(v.mutation,m,v.mutation.getFieldMask(),Ht.now())):h.set(m.key,Pr.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((m,v)=>h.set(m,v))),n.forEach(((m,v)=>g.set(m,new $2(v,h.get(m)??null)))),g)))}recalculateAndSaveOverlays(e,n){const s=mu();let o=new vn(((h,g)=>h-g)),u=It();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const g of h)g.keys().forEach((p=>{const m=n.get(p);if(m===null)return;let v=s.get(p)||Pr.empty();v=g.applyToLocalView(m,v),s.set(p,v);const T=(o.get(g.batchId)||It()).add(p);o=o.insert(g.batchId,T)}))})).next((()=>{const h=[],g=o.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),m=p.key,v=p.value,T=dT();v.forEach((S=>{if(!u.has(S)){const w=yT(n.get(S),s.get(S));w!==null&&T.set(S,w),u=u.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(e,m,T))}return ue.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(h){return Xe.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):aT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ue.resolve(Va());let g=bu,p=u;return h.next((m=>ue.forEach(m,((v,T)=>(g<T.largestBatchId&&(g=T.largestBatchId),u.get(v)?ue.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{p=p.insert(v,S)}))))).next((()=>this.populateOverlays(e,m,u))).next((()=>this.computeViews(e,p,m,It()))).next((v=>({batchId:g,changes:cT(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Xe(n)).next((s=>{let o=ou();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let h=ou();return this.indexManager.getCollectionParents(e,u).next((g=>ue.forEach(g,(p=>{const m=(function(T,S){return new tl(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,m,s,o).next((v=>{v.forEach(((T,S)=>{h=h.insert(T,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((h=>{u.forEach(((p,m)=>{const v=m.getKey();h.get(v)===null&&(h=h.insert(v,cr.newInvalidDocument(v)))}));let g=ou();return h.forEach(((p,m)=>{const v=u.get(p);v!==void 0&&pu(v.mutation,m,Pr.empty(),Ht.now()),ch(n,m)&&(g=g.insert(p,m))})),g}))}}class J2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ue.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Ii(o.createTime)}})(n)),ue.resolve()}getNamedQuery(e,n){return ue.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:B2(o.bundledQuery),readTime:Ii(o.readTime)}})(n)),ue.resolve()}}class Z2{constructor(){this.overlays=new vn(Xe.comparator),this.qr=new Map}getOverlay(e,n){return ue.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Va();return ue.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),ue.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),ue.resolve()}getOverlaysForCollection(e,n,s){const o=Va(),u=n.length+1,h=new Xe(n.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const p=g.getNext().value,m=p.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return ue.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new vn(((m,v)=>m-v));const h=this.overlays.getIterator();for(;h.hasNext();){const m=h.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>s){let v=u.get(m.largestBatchId);v===null&&(v=Va(),u=u.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const g=Va(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((m,v)=>g.set(m,v))),!(g.size()>=o)););return ue.resolve(g)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new y2(n,s));let u=this.qr.get(n);u===void 0&&(u=It(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}class ex{constructor(){this.sessionToken=rr.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ue.resolve()}}class qp{constructor(){this.Qr=new Hn(Yn.$r),this.Ur=new Hn(Yn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Yn(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Yn(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new Xe(new un([])),s=new Yn(n,e),o=new Yn(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),u.push(h.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Xe(new un([])),s=new Yn(n,e),o=new Yn(n,e+1);let u=It();return this.Ur.forEachInRange([s,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const n=new Yn(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Yn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Xe.comparator(e.key,n.key)||Ct(e.Yr,n.Yr)}static Kr(e,n){return Ct(e.Yr,n.Yr)||Xe.comparator(e.key,n.key)}}class tx{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Hn(Yn.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new g2(u,n,s,o);this.mutationQueue.push(h);for(const g of o)this.Zr=this.Zr.add(new Yn(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ue.resolve(h)}lookupMutationBatch(e,n){return ue.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return ue.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?Mp:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Yn(n,0),o=new Yn(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(h=>{const g=this.Xr(h.Yr);u.push(g)})),ue.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Hn(Ct);return n.forEach((o=>{const u=new Yn(o,0),h=new Yn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,h],(g=>{s=s.add(g.Yr)}))})),ue.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;Xe.isDocumentKey(u)||(u=u.child(""));const h=new Yn(new Xe(u),0);let g=new Hn(Ct);return this.Zr.forEachWhile((p=>{const m=p.key.path;return!!s.isPrefixOf(m)&&(m.length===o&&(g=g.add(p.Yr)),!0)}),h),ue.resolve(this.ti(g))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Gt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ue.forEach(n.mutations,(o=>{const u=new Yn(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Yn(n,0),o=this.Zr.firstAfterOrEqual(s);return ue.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class nx{constructor(e){this.ri=e,this.docs=(function(){return new vn(Xe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,h=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ue.resolve(s?s.document.mutableCopy():cr.newInvalidDocument(n))}getEntries(e,n){let s=os();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():cr.newInvalidDocument(o))})),ue.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=os();const h=n.path,g=new Xe(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:m,value:{document:v}}=p.getNext();if(!h.isPrefixOf(m.path))break;m.path.length>h.length+1||NI(xI(v),s)<=0||(o.has(v.key)||ch(n,v))&&(u=u.insert(v.key,v.mutableCopy()))}return ue.resolve(u)}getAllFromCollectionGroup(e,n,s,o){nt(9500)}ii(e,n){return ue.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new rx(this)}getSize(e){return ue.resolve(this.size)}}class rx extends X2{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ue.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class ix{constructor(e){this.persistence=e,this.si=new Ka((n=>Lp(n)),jp),this.lastRemoteSnapshotVersion=at.min(),this.highestTargetId=0,this.oi=0,this._i=new qp,this.targetCount=0,this.ai=Yo.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ue.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Yo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ue.resolve()}updateTargetData(e,n){return this.Pr(n),ue.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((h,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.si.delete(h),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),ue.waitFor(u).next((()=>o))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ue.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ue.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),ue.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ue.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ue.resolve(s)}containsKey(e,n){return ue.resolve(this._i.containsKey(n))}}class NT{constructor(e,n){this.ui={},this.overlays={},this.ci=new sh(0),this.li=!1,this.li=!0,this.hi=new ex,this.referenceDelegate=e(this),this.Pi=new ix(this),this.indexManager=new q2,this.remoteDocumentCache=(function(o){return new nx(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new z2(n),this.Ii=new J2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Z2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new tx(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){Ve("MemoryPersistence","Starting transaction:",e);const o=new sx(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return ue.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class sx extends DI{constructor(e){super(),this.currentSequenceNumber=e}}class Fp{constructor(e){this.persistence=e,this.Ri=new qp,this.Vi=null}static mi(e){return new Fp(e)}get fi(){if(this.Vi)return this.Vi;throw nt(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ue.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ue.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ue.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,(s=>{const o=Xe.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,at.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ue.or([()=>ue.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Fd{constructor(e,n){this.persistence=e,this.pi=new Ka((s=>VI(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=Y2(this,n)}static mi(e,n){return new Fd(e,n)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return ue.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?ue.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,n).next((g=>{g||(s++,u.removeEntry(h,at.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ue.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ue.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Td(e.data.value)),n}br(e,n,s){return ue.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ue.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Hp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=It(),o=It();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Hp(e,n.fromCache,s,o)}}class ax{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class ox{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return kw()?8:MI(dr())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new ax;return this.Ss(e,n,h).next((g=>{if(u.result=g,this.Vs)return this.bs(e,n,h,g.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(Mo()<=Rt.DEBUG&&Ve("QueryEngine","SDK will not create cache indexes for query:",Oo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(Mo()<=Rt.DEBUG&&Ve("QueryEngine","Query:",Oo(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Mo()<=Rt.DEBUG&&Ve("QueryEngine","The SDK decides to create cache indexes for query:",Oo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ci(n))):ue.resolve())}ys(e,n){if(Q_(n))return ue.resolve(null);let s=Ci(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=zd(n,null,"F"),s=Ci(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const h=It(...u);return this.ps.getDocuments(e,h).next((g=>this.indexManager.getMinOffset(e,s).next((p=>{const m=this.Ds(n,g);return this.Cs(n,m,h,p.readTime)?this.ys(e,zd(n,null,"F")):this.vs(e,m,n,p)}))))})))))}ws(e,n,s,o){return Q_(n)||o.isEqual(at.min())?ue.resolve(null):this.ps.getDocuments(e,s).next((u=>{const h=this.Ds(n,u);return this.Cs(n,h,s,o)?ue.resolve(null):(Mo()<=Rt.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Oo(n)),this.vs(e,h,n,II(o,bu)).next((g=>g)))}))}Ds(e,n){let s=new Hn(lT(e));return n.forEach(((o,u)=>{ch(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return Mo()<=Rt.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",Oo(n)),this.ps.getDocumentsMatchingQuery(e,n,ea.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}const Gp="LocalStore",lx=3e8;class ux{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new vn(Ct),this.xs=new Ka((u=>Lp(u)),jp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new W2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function cx(i,e,n,s){return new ux(i,e,n,s)}async function kT(i,e){const n=ut(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const h=[],g=[];let p=It();for(const m of o){h.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}for(const m of u){g.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}return n.localDocuments.getDocuments(s,p).next((m=>({Ls:m,removedBatchIds:h,addedBatchIds:g})))}))}))}function dx(i,e){const n=ut(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,p,m,v){const T=m.batch,S=T.keys();let w=ue.resolve();return S.forEach((L=>{w=w.next((()=>v.getEntry(p,L))).next((F=>{const U=m.docVersions.get(L);Gt(U!==null,48541),F.version.compareTo(U)<0&&(T.applyToRemoteDocument(F,m),F.isValidDocument()&&(F.setReadTime(m.commitVersion),v.addEntry(F)))}))})),w.next((()=>g.mutationQueue.removeMutationBatch(p,T)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(g){let p=It();for(let m=0;m<g.mutationResults.length;++m)g.mutationResults[m].transformResults.length>0&&(p=p.add(g.batch.mutations[m].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function DT(i){const e=ut(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function hx(i,e){const n=ut(i),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const g=[];e.targetChanges.forEach(((v,T)=>{const S=o.get(T);if(!S)return;g.push(n.Pi.removeMatchingKeys(u,v.removedDocuments,T).next((()=>n.Pi.addMatchingKeys(u,v.addedDocuments,T))));let w=S.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?w=w.withResumeToken(rr.EMPTY_BYTE_STRING,at.min()).withLastLimboFreeSnapshotVersion(at.min()):v.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(v.resumeToken,s)),o=o.insert(T,w),(function(F,U,ge){return F.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=lx?!0:ge.addedDocuments.size+ge.modifiedDocuments.size+ge.removedDocuments.size>0})(S,w,v)&&g.push(n.Pi.updateTargetData(u,w))}));let p=os(),m=It();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,v))})),g.push(fx(u,h,e.documentUpdates).next((v=>{p=v.ks,m=v.qs}))),!s.isEqual(at.min())){const v=n.Pi.getLastRemoteSnapshotVersion(u).next((T=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));g.push(v)}return ue.waitFor(g).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,m))).next((()=>p))})).then((u=>(n.Ms=o,u)))}function fx(i,e,n){let s=It(),o=It();return n.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let h=os();return n.forEach(((g,p)=>{const m=u.get(g);p.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(g)),p.isNoDocument()&&p.version.isEqual(at.min())?(e.removeEntry(g,p.readTime),h=h.insert(g,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),h=h.insert(g,p)):Ve(Gp,"Ignoring outdated watch update for ",g,". Current version:",m.version," Watch version:",p.version)})),{ks:h,qs:o}}))}function mx(i,e){const n=ut(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Mp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function px(i,e){const n=ut(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,ue.resolve(o)):n.Pi.allocateTargetId(s).next((h=>(o=new Ks(e,h,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function sp(i,e,n){const s=ut(i),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!el(h))throw h;Ve(Gp,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function ab(i,e,n){const s=ut(i);let o=at.min(),u=It();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(p,m,v){const T=ut(p),S=T.xs.get(v);return S!==void 0?ue.resolve(T.Ms.get(S)):T.Pi.getTargetData(m,v)})(s,h,Ci(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,g.targetId).next((p=>{u=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,e,n?o:at.min(),n?u:It()))).next((g=>(gx(s,e2(e),g),{documents:g,Qs:u})))))}function gx(i,e,n){let s=i.Os.get(e)||at.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Os.set(e,s)}class ob{constructor(){this.activeTargetIds=a2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yx{constructor(){this.Mo=new ob,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ob,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class vx{Oo(e){}shutdown(){}}const lb="ConnectivityMonitor";class ub{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ve(lb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ve(lb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let md=null;function ap(){return md===null?md=(function(){return 268435456+Math.round(2147483648*Math.random())})():md++,"0x"+md.toString(16)}const Dm="RestConnection",_x={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bx{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===jd?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const h=ap(),g=this.zo(e,n.toUriEncodedString());Ve(Dm,`Sending RPC '${e}' ${h}:`,g,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:m}=new URL(g),v=aa(m);return this.Jo(e,g,p,s,v).then((T=>(Ve(Dm,`Received RPC '${e}' ${h}: `,T),T)),(T=>{throw Ho(Dm,`RPC '${e}' ${h} failed with error: `,T,"url: ",g,"request:",s),T}))}Ho(e,n,s,o,u,h){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Jo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=_x[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class Ex{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const lr="WebChannelConnection";class Tx extends bx{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const h=ap();return new Promise(((g,p)=>{const m=new VE;m.setWithCredentials(!0),m.listenOnce(LE.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Ed.NO_ERROR:const T=m.getResponseJson();Ve(lr,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),g(T);break;case Ed.TIMEOUT:Ve(lr,`RPC '${e}' ${h} timed out`),p(new Ce(te.DEADLINE_EXCEEDED,"Request time out"));break;case Ed.HTTP_ERROR:const S=m.getStatus();if(Ve(lr,`RPC '${e}' ${h} failed with status:`,S,"response text:",m.getResponseText()),S>0){let w=m.getResponseJson();Array.isArray(w)&&(w=w[0]);const L=w?.error;if(L&&L.status&&L.message){const F=(function(ge){const he=ge.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(he)>=0?he:te.UNKNOWN})(L.status);p(new Ce(F,L.message))}else p(new Ce(te.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new Ce(te.UNAVAILABLE,"Connection failed."));break;default:nt(9055,{l_:e,streamId:h,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{Ve(lr,`RPC '${e}' ${h} completed.`)}}));const v=JSON.stringify(o);Ve(lr,`RPC '${e}' ${h} sending request:`,o),m.send(n,"POST",v,s,15)}))}T_(e,n,s){const o=ap(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=UE(),g=PE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const v=u.join("");Ve(lr,`Creating RPC '${e}' stream ${o}: ${v}`,p);const T=h.createWebChannel(v,p);this.I_(T);let S=!1,w=!1;const L=new Ex({Yo:U=>{w?Ve(lr,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(S||(Ve(lr,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),Ve(lr,`RPC '${e}' stream ${o} sending:`,U),T.send(U))},Zo:()=>T.close()}),F=(U,ge,he)=>{U.listen(ge,(re=>{try{he(re)}catch(Ee){setTimeout((()=>{throw Ee}),0)}}))};return F(T,au.EventType.OPEN,(()=>{w||(Ve(lr,`RPC '${e}' stream ${o} transport opened.`),L.o_())})),F(T,au.EventType.CLOSE,(()=>{w||(w=!0,Ve(lr,`RPC '${e}' stream ${o} transport closed`),L.a_(),this.E_(T))})),F(T,au.EventType.ERROR,(U=>{w||(w=!0,Ho(lr,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),L.a_(new Ce(te.UNAVAILABLE,"The operation could not be completed")))})),F(T,au.EventType.MESSAGE,(U=>{if(!w){const ge=U.data[0];Gt(!!ge,16349);const he=ge,re=he?.error||he[0]?.error;if(re){Ve(lr,`RPC '${e}' stream ${o} received error:`,re);const Ee=re.status;let He=(function(C){const N=Pn[C];if(N!==void 0)return _T(N)})(Ee),Me=re.message;He===void 0&&(He=te.INTERNAL,Me="Unknown error status: "+Ee+" with message "+re.message),w=!0,L.a_(new Ce(He,Me)),T.close()}else Ve(lr,`RPC '${e}' stream ${o} received:`,ge),L.u_(ge)}})),F(g,jE.STAT_EVENT,(U=>{U.stat===Ym.PROXY?Ve(lr,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===Ym.NOPROXY&&Ve(lr,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{L.__()}),0),L}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Mm(){return typeof document<"u"?document:null}function ph(i){return new R2(i,!0)}class MT{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&Ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const cb="PersistentStream";class OT{constructor(e,n,s,o,u,h,g,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new MT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===te.RESOURCE_EXHAUSTED?(as(n.toString()),as("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new Ce(te.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ve(cb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Ve(cb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Sx extends OT{constructor(e,n,s,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,h),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=x2(this.serializer,e),s=(function(u){if(!("targetChange"in u))return at.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?at.min():h.readTime?Ii(h.readTime):at.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=ip(this.serializer),n.addTarget=(function(u,h){let g;const p=h.target;if(g=Zm(p)?{documents:D2(u,p)}:{query:M2(u,p).ft},g.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){g.resumeToken=TT(u,h.resumeToken);const m=tp(u,h.expectedCount);m!==null&&(g.expectedCount=m)}else if(h.snapshotVersion.compareTo(at.min())>0){g.readTime=qd(u,h.snapshotVersion.toTimestamp());const m=tp(u,h.expectedCount);m!==null&&(g.expectedCount=m)}return g})(this.serializer,e);const s=V2(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=ip(this.serializer),n.removeTarget=e,this.q_(n)}}class wx extends OT{constructor(e,n,s,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,h),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Gt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Gt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Gt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=k2(e.writeResults,e.commitTime),s=Ii(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=ip(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>N2(this.serializer,s)))};this.q_(n)}}class Ax{}class Rx extends Ax{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Ce(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Go(e,np(n,s),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ce(te.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,g])=>this.connection.Ho(e,np(n,s),o,h,g,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Ce(te.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Cx{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(as(n),this.aa=!1):Ve("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Fa="RemoteStore";class Ix{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{Qa(this)&&(Ve(Fa,"Restarting streams for network reachability change."),await(async function(p){const m=ut(p);m.Ea.add(4),await ju(m),m.Ra.set("Unknown"),m.Ea.delete(4),await gh(m)})(this))}))})),this.Ra=new Cx(s,o)}}async function gh(i){if(Qa(i))for(const e of i.da)await e(!0)}async function ju(i){for(const e of i.da)await e(!1)}function VT(i,e){const n=ut(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Xp(n)?Yp(n):nl(n).O_()&&Qp(n,e))}function Kp(i,e){const n=ut(i),s=nl(n);n.Ia.delete(e),s.O_()&&LT(n,e),n.Ia.size===0&&(s.O_()?s.L_():Qa(n)&&n.Ra.set("Unknown"))}function Qp(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(at.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}nl(i).Y_(e)}function LT(i,e){i.Va.Ue(e),nl(i).Z_(e)}function Yp(i){i.Va=new T2({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),nl(i).start(),i.Ra.ua()}function Xp(i){return Qa(i)&&!nl(i).x_()&&i.Ia.size>0}function Qa(i){return ut(i).Ea.size===0}function jT(i){i.Va=void 0}async function xx(i){i.Ra.set("Online")}async function Nx(i){i.Ia.forEach(((e,n)=>{Qp(i,e)}))}async function kx(i,e){jT(i),Xp(i)?(i.Ra.ha(e),Yp(i)):i.Ra.set("Unknown")}async function Dx(i,e,n){if(i.Ra.set("Online"),e instanceof ET&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const g of u.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,h),o.Ia.delete(g),o.Va.removeTarget(g))})(i,e)}catch(s){Ve(Fa,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Hd(i,s)}else if(e instanceof Ad?i.Va.Ze(e):e instanceof bT?i.Va.st(e):i.Va.tt(e),!n.isEqual(at.min()))try{const s=await DT(i.localStore);n.compareTo(s)>=0&&await(function(u,h){const g=u.Va.Tt(h);return g.targetChanges.forEach(((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const v=u.Ia.get(m);v&&u.Ia.set(m,v.withResumeToken(p.resumeToken,h))}})),g.targetMismatches.forEach(((p,m)=>{const v=u.Ia.get(p);if(!v)return;u.Ia.set(p,v.withResumeToken(rr.EMPTY_BYTE_STRING,v.snapshotVersion)),LT(u,p);const T=new Ks(v.target,p,m,v.sequenceNumber);Qp(u,T)})),u.remoteSyncer.applyRemoteEvent(g)})(i,n)}catch(s){Ve(Fa,"Failed to raise snapshot:",s),await Hd(i,s)}}async function Hd(i,e,n){if(!el(e))throw e;i.Ea.add(1),await ju(i),i.Ra.set("Offline"),n||(n=()=>DT(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Ve(Fa,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await gh(i)}))}function PT(i,e){return e().catch((n=>Hd(i,n,e)))}async function yh(i){const e=ut(i),n=ia(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Mp;for(;Mx(e);)try{const o=await mx(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,Ox(e,o)}catch(o){await Hd(e,o)}UT(e)&&zT(e)}function Mx(i){return Qa(i)&&i.Ta.length<10}function Ox(i,e){i.Ta.push(e);const n=ia(i);n.O_()&&n.X_&&n.ea(e.mutations)}function UT(i){return Qa(i)&&!ia(i).x_()&&i.Ta.length>0}function zT(i){ia(i).start()}async function Vx(i){ia(i).ra()}async function Lx(i){const e=ia(i);for(const n of i.Ta)e.ea(n.mutations)}async function jx(i,e,n){const s=i.Ta.shift(),o=Up.from(s,e,n);await PT(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await yh(i)}async function Px(i,e){e&&ia(i).X_&&await(async function(s,o){if((function(h){return _2(h)&&h!==te.ABORTED})(o.code)){const u=s.Ta.shift();ia(s).B_(),await PT(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await yh(s)}})(i,e),UT(i)&&zT(i)}async function db(i,e){const n=ut(i);n.asyncQueue.verifyOperationInProgress(),Ve(Fa,"RemoteStore received new credentials");const s=Qa(n);n.Ea.add(3),await ju(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await gh(n)}async function Ux(i,e){const n=ut(i);e?(n.Ea.delete(2),await gh(n)):e||(n.Ea.add(2),await ju(n),n.Ra.set("Unknown"))}function nl(i){return i.ma||(i.ma=(function(n,s,o){const u=ut(n);return u.sa(),new Sx(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:xx.bind(null,i),t_:Nx.bind(null,i),r_:kx.bind(null,i),H_:Dx.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Xp(i)?Yp(i):i.Ra.set("Unknown")):(await i.ma.stop(),jT(i))}))),i.ma}function ia(i){return i.fa||(i.fa=(function(n,s,o){const u=ut(n);return u.sa(),new wx(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:Vx.bind(null,i),r_:Px.bind(null,i),ta:Lx.bind(null,i),na:jx.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await yh(i)):(await i.fa.stop(),i.Ta.length>0&&(Ve(Fa,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class $p{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const h=Date.now()+s,g=new $p(e,n,h,o,u);return g.start(s),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ce(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wp(i,e){if(as("AsyncQueue",`${e}: ${i}`),el(i))return new Ce(te.UNAVAILABLE,`${e}: ${i}`);throw i}class qo{static emptySet(e){return new qo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Xe.comparator(n.key,s.key):(n,s)=>Xe.comparator(n.key,s.key),this.keyedMap=ou(),this.sortedSet=new vn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new qo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class hb{constructor(){this.ga=new vn(Xe.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):nt(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Xo{constructor(e,n,s,o,u,h,g,p,m){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,n,s,o,u){const h=[];return n.forEach((g=>{h.push({type:0,doc:g})})),new Xo(e,n,qo.emptySet(n),h,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class zx{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Bx{constructor(){this.queries=fb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=ut(n),u=o.queries;o.queries=fb(),u.forEach(((h,g)=>{for(const p of g.Sa)p.onError(s)}))})(this,new Ce(te.ABORTED,"Firestore shutting down"))}}function fb(){return new Ka((i=>oT(i)),uh)}async function Jp(i,e){const n=ut(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new zx,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const g=Wp(h,`Initialization of query '${Oo(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&eg(n)}async function Zp(i,e){const n=ut(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const h=u.Sa.indexOf(e);h>=0&&(u.Sa.splice(h,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function qx(i,e){const n=ut(i);let s=!1;for(const o of e){const u=o.query,h=n.queries.get(u);if(h){for(const g of h.Sa)g.Fa(o)&&(s=!0);h.wa=o}}s&&eg(n)}function Fx(i,e,n){const s=ut(i),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function eg(i){i.Ca.forEach((e=>{e.next()}))}var op,mb;(mb=op||(op={})).Ma="default",mb.Cache="cache";class tg{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Xo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Xo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==op.Cache}}class BT{constructor(e){this.key=e}}class qT{constructor(e){this.key=e}}class Hx{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=It(),this.mutatedKeys=It(),this.eu=lT(e),this.tu=new qo(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new hb,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=o,g=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,T)=>{const S=o.get(v),w=ch(this.query,T)?T:null,L=!!S&&this.mutatedKeys.has(S.key),F=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let U=!1;S&&w?S.data.isEqual(w.data)?L!==F&&(s.track({type:3,doc:w}),U=!0):this.su(S,w)||(s.track({type:2,doc:w}),U=!0,(p&&this.eu(w,p)>0||m&&this.eu(w,m)<0)&&(g=!0)):!S&&w?(s.track({type:0,doc:w}),U=!0):S&&!w&&(s.track({type:1,doc:S}),U=!0,(p||m)&&(g=!0)),U&&(w?(h=h.add(w),u=F?u.add(v):u.delete(v)):(h=h.delete(v),u=u.delete(v)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const v=this.query.limitType==="F"?h.last():h.first();h=h.delete(v.key),u=u.delete(v.key),s.track({type:1,doc:v})}return{tu:h,iu:s,Cs:g,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((v,T)=>(function(w,L){const F=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt(20277,{Rt:U})}};return F(w)-F(L)})(v.type,T.type)||this.eu(v.doc,T.doc))),this.ou(s),o=o??!1;const g=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,m=p!==this.Za;return this.Za=p,h.length!==0||m?{snapshot:new Xo(this.query,e.tu,u,h,e.mutatedKeys,p===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new hb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=It(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new qT(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new BT(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=It();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Xo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ng="SyncEngine";class Gx{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class Kx{constructor(e){this.key=e,this.hu=!1}}class Qx{constructor(e,n,s,o,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Ka((g=>oT(g)),uh),this.Iu=new Map,this.Eu=new Set,this.du=new vn(Xe.comparator),this.Au=new Map,this.Ru=new qp,this.Vu={},this.mu=new Map,this.fu=Yo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Yx(i,e,n=!0){const s=YT(i);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await FT(s,e,n,!0),o}async function Xx(i,e){const n=YT(i);await FT(n,e,!0,!1)}async function FT(i,e,n,s){const o=await px(i.localStore,Ci(e)),u=o.targetId,h=i.sharedClientState.addLocalQueryTarget(u,n);let g;return s&&(g=await $x(i,e,u,h==="current",o.resumeToken)),i.isPrimaryClient&&n&&VT(i.remoteStore,o),g}async function $x(i,e,n,s,o){i.pu=(T,S,w)=>(async function(F,U,ge,he){let re=U.view.ru(ge);re.Cs&&(re=await ab(F.localStore,U.query,!1).then((({documents:k})=>U.view.ru(k,re))));const Ee=he&&he.targetChanges.get(U.targetId),He=he&&he.targetMismatches.get(U.targetId)!=null,Me=U.view.applyChanges(re,F.isPrimaryClient,Ee,He);return gb(F,U.targetId,Me.au),Me.snapshot})(i,T,S,w);const u=await ab(i.localStore,e,!0),h=new Hx(e,u.Qs),g=h.ru(u.documents),p=Lu.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),m=h.applyChanges(g,i.isPrimaryClient,p);gb(i,n,m.au);const v=new Gx(e,n,h);return i.Tu.set(e,v),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),m.snapshot}async function Wx(i,e,n){const s=ut(i),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((h=>!uh(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await sp(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Kp(s.remoteStore,o.targetId),lp(s,o.targetId)})).catch(Zo)):(lp(s,o.targetId),await sp(s.localStore,o.targetId,!0))}async function Jx(i,e){const n=ut(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Kp(n.remoteStore,s.targetId))}async function Zx(i,e,n){const s=aN(i);try{const o=await(function(h,g){const p=ut(h),m=Ht.now(),v=g.reduce(((w,L)=>w.add(L.key)),It());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let L=os(),F=It();return p.Ns.getEntries(w,v).next((U=>{L=U,L.forEach(((ge,he)=>{he.isValidDocument()||(F=F.add(ge))}))})).next((()=>p.localDocuments.getOverlayedDocuments(w,L))).next((U=>{T=U;const ge=[];for(const he of g){const re=m2(he,T.get(he.key).overlayedDocument);re!=null&&ge.push(new ua(he.key,re,ZE(re.value.mapValue),gr.exists(!0)))}return p.mutationQueue.addMutationBatch(w,m,ge,g)})).next((U=>{S=U;const ge=U.applyToLocalDocumentSet(T,F);return p.documentOverlayCache.saveOverlays(w,U.batchId,ge)}))})).then((()=>({batchId:S.batchId,changes:cT(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,g,p){let m=h.Vu[h.currentUser.toKey()];m||(m=new vn(Ct)),m=m.insert(g,p),h.Vu[h.currentUser.toKey()]=m})(s,o.batchId,n),await Pu(s,o.changes),await yh(s.remoteStore)}catch(o){const u=Wp(o,"Failed to persist write");n.reject(u)}}async function HT(i,e){const n=ut(i);try{const s=await hx(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=n.Au.get(u);h&&(Gt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?Gt(h.hu,14607):o.removedDocuments.size>0&&(Gt(h.hu,42227),h.hu=!1))})),await Pu(n,s,e)}catch(s){await Zo(s)}}function pb(i,e,n){const s=ut(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,h)=>{const g=h.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(h,g){const p=ut(h);p.onlineState=g;let m=!1;p.queries.forEach(((v,T)=>{for(const S of T.Sa)S.va(g)&&(m=!0)})),m&&eg(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function eN(i,e,n){const s=ut(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let h=new vn(Xe.comparator);h=h.insert(u,cr.newNoDocument(u,at.min()));const g=It().add(u),p=new mh(at.min(),new Map,new vn(Ct),h,g);await HT(s,p),s.du=s.du.remove(u),s.Au.delete(e),rg(s)}else await sp(s.localStore,e,!1).then((()=>lp(s,e,n))).catch(Zo)}async function tN(i,e){const n=ut(i),s=e.batch.batchId;try{const o=await dx(n.localStore,e);KT(n,s,null),GT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Pu(n,o)}catch(o){await Zo(o)}}async function nN(i,e,n){const s=ut(i);try{const o=await(function(h,g){const p=ut(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return p.mutationQueue.lookupMutationBatch(m,g).next((T=>(Gt(T!==null,37113),v=T.keys(),p.mutationQueue.removeMutationBatch(m,T)))).next((()=>p.mutationQueue.performConsistencyCheck(m))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(m,v,g))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>p.localDocuments.getDocuments(m,v)))}))})(s.localStore,e);KT(s,e,n),GT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Pu(s,o)}catch(o){await Zo(o)}}function GT(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function KT(i,e,n){const s=ut(i);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function lp(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||QT(i,s)}))}function QT(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(Kp(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),rg(i))}function gb(i,e,n){for(const s of n)s instanceof BT?(i.Ru.addReference(s.key,e),rN(i,s)):s instanceof qT?(Ve(ng,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||QT(i,s.key)):nt(19791,{wu:s})}function rN(i,e){const n=e.key,s=n.path.canonicalString();i.du.get(n)||i.Eu.has(s)||(Ve(ng,"New document in limbo: "+n),i.Eu.add(s),rg(i))}function rg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new Xe(un.fromString(e)),s=i.fu.next();i.Au.set(s,new Kx(n)),i.du=i.du.insert(n,s),VT(i.remoteStore,new Ks(Ci(lh(n.path)),s,"TargetPurposeLimboResolution",sh.ce))}}async function Pu(i,e,n){const s=ut(i),o=[],u=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((g,p)=>{h.push(s.pu(p,e,n).then((m=>{if((m||n)&&s.isPrimaryClient){const v=m?!m.fromCache:n?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,v?"current":"not-current")}if(m){o.push(m);const v=Hp.As(p.targetId,m);u.push(v)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(p,m){const v=ut(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>ue.forEach(m,(S=>ue.forEach(S.Es,(w=>v.persistence.referenceDelegate.addReference(T,S.targetId,w))).next((()=>ue.forEach(S.ds,(w=>v.persistence.referenceDelegate.removeReference(T,S.targetId,w)))))))))}catch(T){if(!el(T))throw T;Ve(Gp,"Failed to update sequence numbers: "+T)}for(const T of m){const S=T.targetId;if(!T.fromCache){const w=v.Ms.get(S),L=w.snapshotVersion,F=w.withLastLimboFreeSnapshotVersion(L);v.Ms=v.Ms.insert(S,F)}}})(s.localStore,u))}async function iN(i,e){const n=ut(i);if(!n.currentUser.isEqual(e)){Ve(ng,"User change. New user:",e.toKey());const s=await kT(n.localStore,e);n.currentUser=e,(function(u,h){u.mu.forEach((g=>{g.forEach((p=>{p.reject(new Ce(te.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Pu(n,s.Ls)}}function sN(i,e){const n=ut(i),s=n.Au.get(e);if(s&&s.hu)return It().add(s.key);{let o=It();const u=n.Iu.get(e);if(!u)return o;for(const h of u){const g=n.Tu.get(h);o=o.unionWith(g.view.nu)}return o}}function YT(i){const e=ut(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=HT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eN.bind(null,e),e.Pu.H_=qx.bind(null,e.eventManager),e.Pu.yu=Fx.bind(null,e.eventManager),e}function aN(i){const e=ut(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nN.bind(null,e),e}class Gd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ph(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return cx(this.persistence,new ox,e.initialUser,this.serializer)}Cu(e){return new NT(Fp.mi,this.serializer)}Du(e){return new yx}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gd.provider={build:()=>new Gd};class oN extends Gd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Gt(this.persistence.referenceDelegate instanceof Fd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new K2(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ar.withCacheSize(this.cacheSizeBytes):Ar.DEFAULT;return new NT((s=>Fd.mi(s,n)),this.serializer)}}class up{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>pb(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=iN.bind(null,this.syncEngine),await Ux(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Bx})()}createDatastore(e){const n=ph(e.databaseInfo.databaseId),s=(function(u){return new Tx(u)})(e.databaseInfo);return(function(u,h,g,p){return new Rx(u,h,g,p)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,h,g){return new Ix(s,o,u,h,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>pb(this.syncEngine,n,0)),(function(){return ub.v()?new ub:new vx})())}createSyncEngine(e,n){return(function(o,u,h,g,p,m,v){const T=new Qx(o,u,h,g,p,m);return v&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=ut(n);Ve(Fa,"RemoteStore shutting down."),s.Ea.add(5),await ju(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}up.provider={build:()=>new up};class ig{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):as("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const sa="FirestoreClient";class lN{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=ur.UNAUTHENTICATED,this.clientId=Dp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async h=>{Ve(sa,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(Ve(sa,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Wp(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Om(i,e){i.asyncQueue.verifyOperationInProgress(),Ve(sa,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await kT(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function yb(i,e){i.asyncQueue.verifyOperationInProgress();const n=await uN(i);Ve(sa,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>db(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>db(e.remoteStore,o))),i._onlineComponents=e}async function uN(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ve(sa,"Using user provided OfflineComponentProvider");try{await Om(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Ho("Error using user provided cache. Falling back to memory cache: "+n),await Om(i,new Gd)}}else Ve(sa,"Using default OfflineComponentProvider"),await Om(i,new oN(void 0));return i._offlineComponents}async function XT(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ve(sa,"Using user provided OnlineComponentProvider"),await yb(i,i._uninitializedComponentsProvider._online)):(Ve(sa,"Using default OnlineComponentProvider"),await yb(i,new up))),i._onlineComponents}function cN(i){return XT(i).then((e=>e.syncEngine))}async function Kd(i){const e=await XT(i),n=e.eventManager;return n.onListen=Yx.bind(null,e.syncEngine),n.onUnlisten=Wx.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Xx.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Jx.bind(null,e.syncEngine),n}function dN(i,e,n={}){const s=new rs;return i.asyncQueue.enqueueAndForget((async()=>(function(u,h,g,p,m){const v=new ig({next:S=>{v.Nu(),h.enqueueAndForget((()=>Zp(u,T)));const w=S.docs.has(g);!w&&S.fromCache?m.reject(new Ce(te.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&S.fromCache&&p&&p.source==="server"?m.reject(new Ce(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),T=new tg(lh(g.path),v,{includeMetadataChanges:!0,qa:!0});return Jp(u,T)})(await Kd(i),i.asyncQueue,e,n,s))),s.promise}function hN(i,e,n={}){const s=new rs;return i.asyncQueue.enqueueAndForget((async()=>(function(u,h,g,p,m){const v=new ig({next:S=>{v.Nu(),h.enqueueAndForget((()=>Zp(u,T))),S.fromCache&&p.source==="server"?m.reject(new Ce(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),T=new tg(g,v,{includeMetadataChanges:!0,qa:!0});return Jp(u,T)})(await Kd(i),i.asyncQueue,e,n,s))),s.promise}function $T(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const vb=new Map;const WT="firestore.googleapis.com",_b=!0;class bb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ce(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=WT,this.ssl=_b}else this.host=e.host,this.ssl=e.ssl??_b;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<H2)throw new Ce(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$T(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ce(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ce(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ce(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vh{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ce(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ce(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new gI;switch(s.type){case"firstParty":return new bI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ce(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=vb.get(n);s&&(Ve("ComponentProvider","Removing Datastore"),vb.delete(n),s.terminate())})(this),Promise.resolve()}}function fN(i,e,n,s={}){i=pr(i,vh);const o=aa(e),u=i._getSettings(),h={...u,emulatorOptions:i._getEmulatorOptions()},g=`${e}:${n}`;o&&(vp(`https://${g}`),_p("Firestore",!0)),u.host!==WT&&u.host!==g&&Ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:g,ssl:o,emulatorOptions:s};if(!Pa(p,h)&&(i._setSettings(p),s.mockUserToken)){let m,v;if(typeof s.mockUserToken=="string")m=s.mockUserToken,v=ur.MOCK_USER;else{m=Tw(s.mockUserToken,i._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new Ce(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new ur(T)}i._authCredentials=new yI(new BE(m,v))}}class us{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new us(this.firestore,e,this._query)}}class Tn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tn(this.firestore,e,this._key)}toJSON(){return{type:Tn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Ou(n,Tn._jsonSchema))return new Tn(e,s||null,new Xe(un.fromString(n.referencePath)))}}Tn._jsonSchemaVersion="firestore/documentReference/1.0",Tn._jsonSchema={type:Bn("string",Tn._jsonSchemaVersion),referencePath:Bn("string")};class Ws extends us{constructor(e,n,s){super(e,n,lh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tn(this.firestore,null,new Xe(e))}withConverter(e){return new Ws(this.firestore,e,this._path)}}function Ft(i,e,...n){if(i=an(i),qE("collection","path",e),i instanceof vh){const s=un.fromString(e,...n);return M_(s),new Ws(i,null,s)}{if(!(i instanceof Tn||i instanceof Ws))throw new Ce(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(un.fromString(e,...n));return M_(s),new Ws(i.firestore,null,s)}}function mt(i,e,...n){if(i=an(i),arguments.length===1&&(e=Dp.newId()),qE("doc","path",e),i instanceof vh){const s=un.fromString(e,...n);return D_(s),new Tn(i,null,new Xe(s))}{if(!(i instanceof Tn||i instanceof Ws))throw new Ce(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(un.fromString(e,...n));return D_(s),new Tn(i.firestore,i instanceof Ws?i.converter:null,new Xe(s))}}const Eb="AsyncQueue";class Tb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new MT(this,"async_queue_retry"),this._c=()=>{const s=Mm();s&&Ve(Eb,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Mm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Mm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new rs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!el(e))throw e;Ve(Eb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,as("INTERNAL UNHANDLED ERROR: ",Sb(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=$p.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&nt(47125,{Pc:Sb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Sb(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}function wb(i){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(i,["next","error","complete"])}class Di extends vh{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new Tb,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Tb(e),this._firestoreClient=void 0,await e}}}function mN(i,e){const n=typeof i=="object"?i:eh(),s=typeof i=="string"?i:jd,o=Zd(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=Fb("firestore");u&&fN(o,...u)}return o}function Uu(i){if(i._terminated)throw new Ce(te.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||pN(i),i._firestoreClient}function pN(i){const e=i._freezeSettings(),n=(function(o,u,h,g){return new PI(o,u,h,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,$T(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new lN(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}class Wr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wr(rr.fromBase64String(e))}catch(n){throw new Ce(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wr(rr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Wr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ou(e,Wr._jsonSchema))return Wr.fromBase64String(e.bytes)}}Wr._jsonSchemaVersion="firestore/bytes/1.0",Wr._jsonSchema={type:Bn("string",Wr._jsonSchemaVersion),bytes:Bn("string")};class zu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ce(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _h{constructor(e){this._methodName=e}}class xi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ce(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ce(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ct(this._lat,e._lat)||Ct(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xi._jsonSchemaVersion}}static fromJSON(e){if(Ou(e,xi._jsonSchema))return new xi(e.latitude,e.longitude)}}xi._jsonSchemaVersion="firestore/geoPoint/1.0",xi._jsonSchema={type:Bn("string",xi._jsonSchemaVersion),latitude:Bn("number"),longitude:Bn("number")};class Ni{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ni._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ou(e,Ni._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ni(e.vectorValues);throw new Ce(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ni._jsonSchemaVersion="firestore/vectorValue/1.0",Ni._jsonSchema={type:Bn("string",Ni._jsonSchemaVersion),vectorValues:Bn("object")};const gN=/^__.*__$/;class yN{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ua(e,this.data,this.fieldMask,n,this.fieldTransforms):new Vu(e,this.data,n,this.fieldTransforms)}}class JT{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ua(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ZT(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt(40011,{Ac:i})}}class sg{constructor(e,n,s,o,u,h){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new sg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Qd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ZT(this.Ac)&&gN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class vN{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||ph(e)}Cc(e,n,s,o=!1){return new sg({Ac:e,methodName:n,Dc:s,path:nr.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bu(i){const e=i._freezeSettings(),n=ph(i._databaseId);return new vN(i._databaseId,!!e.ignoreUndefinedProperties,n)}function ag(i,e,n,s,o,u={}){const h=i.Cc(u.merge||u.mergeFields?2:0,e,n,o);lg("Data must be an object, but it was:",h,s);const g=nS(s,h);let p,m;if(u.merge)p=new Pr(h.fieldMask),m=h.fieldTransforms;else if(u.mergeFields){const v=[];for(const T of u.mergeFields){const S=cp(e,T,n);if(!h.contains(S))throw new Ce(te.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);iS(v,S)||v.push(S)}p=new Pr(v),m=h.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,m=h.fieldTransforms;return new yN(new Rr(g),p,m)}class bh extends _h{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bh}}class og extends _h{_toFieldTransform(e){return new c2(e.path,new Au)}isEqual(e){return e instanceof og}}function eS(i,e,n,s){const o=i.Cc(1,e,n);lg("Data must be an object, but it was:",o,s);const u=[],h=Rr.empty();la(s,((p,m)=>{const v=ug(e,p,n);m=an(m);const T=o.yc(v);if(m instanceof bh)u.push(v);else{const S=qu(m,T);S!=null&&(u.push(v),h.set(v,S))}}));const g=new Pr(u);return new JT(h,g,o.fieldTransforms)}function tS(i,e,n,s,o,u){const h=i.Cc(1,e,n),g=[cp(e,s,n)],p=[o];if(u.length%2!=0)throw new Ce(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<u.length;S+=2)g.push(cp(e,u[S])),p.push(u[S+1]);const m=[],v=Rr.empty();for(let S=g.length-1;S>=0;--S)if(!iS(m,g[S])){const w=g[S];let L=p[S];L=an(L);const F=h.yc(w);if(L instanceof bh)m.push(w);else{const U=qu(L,F);U!=null&&(m.push(w),v.set(w,U))}}const T=new Pr(m);return new JT(v,T,h.fieldTransforms)}function _N(i,e,n,s=!1){return qu(n,i.Cc(s?4:3,e))}function qu(i,e){if(rS(i=an(i)))return lg("Unsupported field value:",e,i),nS(i,e);if(i instanceof _h)return(function(s,o){if(!ZT(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let h=0;for(const g of s){let p=qu(g,o.wc(h));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),h++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=an(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return o2(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Ht.fromDate(s);return{timestampValue:qd(o.serializer,u)}}if(s instanceof Ht){const u=new Ht(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:qd(o.serializer,u)}}if(s instanceof xi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Wr)return{bytesValue:TT(o.serializer,s._byteString)};if(s instanceof Tn){const u=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Bp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Ni)return(function(h,g){return{mapValue:{fields:{[WE]:{stringValue:JE},[Pd]:{arrayValue:{values:h.toArray().map((m=>{if(typeof m!="number")throw g.Sc("VectorValues must only contain numeric values.");return Pp(g.serializer,m)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${ih(s)}`)})(i,e)}function nS(i,e){const n={};return GE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):la(i,((s,o)=>{const u=qu(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function rS(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Ht||i instanceof xi||i instanceof Wr||i instanceof Tn||i instanceof _h||i instanceof Ni)}function lg(i,e,n){if(!rS(n)||!FE(n)){const s=ih(n);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function cp(i,e,n){if((e=an(e))instanceof zu)return e._internalPath;if(typeof e=="string")return ug(i,e);throw Qd("Field path arguments must be of type string or ",i,!1,void 0,n)}const bN=new RegExp("[~\\*/\\[\\]]");function ug(i,e,n){if(e.search(bN)>=0)throw Qd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new zu(...e.split("."))._internalPath}catch{throw Qd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Qd(i,e,n,s,o){const u=s&&!s.isEmpty(),h=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(u||h)&&(p+=" (found",u&&(p+=` in field ${s}`),h&&(p+=` in document ${o}`),p+=")"),new Ce(te.INVALID_ARGUMENT,g+i+p)}function iS(i,e){return i.some((n=>n.isEqual(e)))}class sS{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new EN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Eh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class EN extends sS{data(){return super.data()}}function Eh(i,e){return typeof e=="string"?ug(i,e):e instanceof zu?e._internalPath:e._delegate._internalPath}function aS(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Ce(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cg{}class dg extends cg{}function Fn(i,e,...n){let s=[];e instanceof cg&&s.push(e),s=s.concat(n),(function(u){const h=u.filter((p=>p instanceof hg)).length,g=u.filter((p=>p instanceof Th)).length;if(h>1||h>0&&g>0)throw new Ce(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class Th extends dg{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Th(e,n,s)}_apply(e){const n=this._parse(e);return oS(e._query,n),new us(e.firestore,e.converter,ep(e._query,n))}_parse(e){const n=Bu(e.firestore);return(function(u,h,g,p,m,v,T){let S;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Ce(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Ib(T,v);const L=[];for(const F of T)L.push(Cb(p,u,F));S={arrayValue:{values:L}}}else S=Cb(p,u,T)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Ib(T,v),S=_N(g,h,T,v==="in"||v==="not-in");return zn.create(m,v,S)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function fn(i,e,n){const s=e,o=Eh("where",i);return Th._create(o,s,n)}class hg extends cg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new hg(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:ci.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let h=o;const g=u.getFlattenedFilters();for(const p of g)oS(h,p),h=ep(h,p)})(e._query,n),new us(e.firestore,e.converter,ep(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class fg extends dg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new fg(e,n)}_apply(e){const n=(function(o,u,h){if(o.startAt!==null)throw new Ce(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Ce(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wu(u,h)})(e._query,this._field,this._direction);return new us(e.firestore,e.converter,(function(o,u){const h=o.explicitOrderBy.concat([u]);return new tl(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function Ab(i,e="asc"){const n=e,s=Eh("orderBy",i);return fg._create(s,n)}class mg extends dg{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new mg(e,n,s)}_apply(e){return new us(e.firestore,e.converter,zd(e._query,this._limit,this._limitType))}}function Rb(i){return CI("limit",i),mg._create("limit",i,"F")}function Cb(i,e,n){if(typeof(n=an(n))=="string"){if(n==="")throw new Ce(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aT(e)&&n.indexOf("/")!==-1)throw new Ce(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(un.fromString(n));if(!Xe.isDocumentKey(s))throw new Ce(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return B_(i,new Xe(s))}if(n instanceof Tn)return B_(i,n._key);throw new Ce(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ih(n)}.`)}function Ib(i,e){if(!Array.isArray(i)||i.length===0)throw new Ce(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function oS(i,e){const n=(function(o,u){for(const h of o)for(const g of h.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ce(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ce(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class TN{convertValue(e,n="none"){switch(ra(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(na(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw nt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return la(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[Pd].arrayValue?.values?.map((s=>Nn(s.doubleValue)));return new Ni(n)}convertGeoPoint(e){return new xi(Nn(e.latitude),Nn(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=oh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Eu(e));default:return null}}convertTimestamp(e){const n=ta(e);return new Ht(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=un.fromString(e);Gt(IT(s),9688,{name:e});const o=new Tu(s.get(1),s.get(3)),u=new Xe(s.popFirst(5));return o.isEqual(n)||as(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}function pg(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}class uu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class La extends sS{constructor(e,n,s,o,u,h){super(e,n,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Rd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Eh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=La._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}La._jsonSchemaVersion="firestore/documentSnapshot/1.0",La._jsonSchema={type:Bn("string",La._jsonSchemaVersion),bundleSource:Bn("string","DocumentSnapshot"),bundleName:Bn("string"),bundle:Bn("string")};class Rd extends La{data(e={}){return super.data(e)}}class ja{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new uu(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Rd(this._firestore,this._userDataWriter,s.key,s,new uu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ce(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((g=>{const p=new Rd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new uu(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const p=new Rd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new uu(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,v=-1;return g.type!==0&&(m=h.indexOf(g.doc.key),h=h.delete(g.doc.key)),g.type!==1&&(h=h.add(g.doc),v=h.indexOf(g.doc.key)),{type:SN(g.type),doc:p,oldIndex:m,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ja._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Dp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function SN(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt(61501,{type:i})}}function oi(i){i=pr(i,Tn);const e=pr(i.firestore,Di);return dN(Uu(e),i._key).then((n=>uS(e,i,n)))}ja._jsonSchemaVersion="firestore/querySnapshot/1.0",ja._jsonSchema={type:Bn("string",ja._jsonSchemaVersion),bundleSource:Bn("string","QuerySnapshot"),bundleName:Bn("string"),bundle:Bn("string")};class gg extends TN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,n)}}function sn(i){i=pr(i,us);const e=pr(i.firestore,Di),n=Uu(e),s=new gg(e);return aS(i._query),hN(n,i._query).then((o=>new ja(e,s,i,o)))}function Js(i,e,n){i=pr(i,Tn);const s=pr(i.firestore,Di),o=pg(i.converter,e,n);return Fu(s,[ag(Bu(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,gr.none())])}function Un(i,e,n,...s){i=pr(i,Tn);const o=pr(i.firestore,Di),u=Bu(o);let h;return h=typeof(e=an(e))=="string"||e instanceof zu?tS(u,"updateDoc",i._key,e,n,s):eS(u,"updateDoc",i._key,e),Fu(o,[h.toMutation(i._key,gr.exists(!0))])}function lS(i){return Fu(pr(i.firestore,Di),[new fh(i._key,gr.none())])}function Cd(i,e){const n=pr(i.firestore,Di),s=mt(i),o=pg(i.converter,e);return Fu(n,[ag(Bu(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,gr.exists(!1))]).then((()=>s))}function dp(i,...e){i=an(i);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||wb(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(wb(e[s])){const p=e[s];e[s]=p.next?.bind(p),e[s+1]=p.error?.bind(p),e[s+2]=p.complete?.bind(p)}let u,h,g;if(i instanceof Tn)h=pr(i.firestore,Di),g=lh(i._key.path),u={next:p=>{e[s]&&e[s](uS(h,i,p))},error:e[s+1],complete:e[s+2]};else{const p=pr(i,us);h=pr(p.firestore,Di),g=p._query;const m=new gg(h);u={next:v=>{e[s]&&e[s](new ja(h,m,p,v))},error:e[s+1],complete:e[s+2]},aS(i._query)}return(function(m,v,T,S){const w=new ig(S),L=new tg(v,w,T);return m.asyncQueue.enqueueAndForget((async()=>Jp(await Kd(m),L))),()=>{w.Nu(),m.asyncQueue.enqueueAndForget((async()=>Zp(await Kd(m),L)))}})(Uu(h),g,o,u)}function Fu(i,e){return(function(s,o){const u=new rs;return s.asyncQueue.enqueueAndForget((async()=>Zx(await cN(s),o,u))),u.promise})(Uu(i),e)}function uS(i,e,n){const s=n.docs.get(e._key),o=new gg(i);return new La(i,o,e._key,s,new uu(n.hasPendingWrites,n.fromCache),e.converter)}class wN{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Bu(e)}set(e,n,s){this._verifyNotCommitted();const o=Vm(e,this._firestore),u=pg(o.converter,n,s),h=ag(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,s);return this._mutations.push(h.toMutation(o._key,gr.none())),this}update(e,n,s,...o){this._verifyNotCommitted();const u=Vm(e,this._firestore);let h;return h=typeof(n=an(n))=="string"||n instanceof zu?tS(this._dataReader,"WriteBatch.update",u._key,n,s,o):eS(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(h.toMutation(u._key,gr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Vm(e,this._firestore);return this._mutations=this._mutations.concat(new fh(n._key,gr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ce(te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Vm(i,e){if((i=an(i)).firestore!==e)throw new Ce(te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}function gu(){return new og("serverTimestamp")}function tu(i){return Uu(i=pr(i,Di)),new wN(i,(e=>Fu(i,e)))}(function(e,n=!0){(function(o){Jo=o})(Wo),Ua(new Zs("firestore",((s,{instanceIdentifier:o,options:u})=>{const h=s.getProvider("app").getImmediate(),g=new Di(new vI(s.getProvider("auth-internal")),new EI(h,s.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Ce(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tu(m.options.projectId,v)})(h,o),h);return u={useFetchStreams:n,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),wi(I_,x_,e),wi(I_,x_,"esm2020")})();const cS={apiKey:"AIzaSyARwb6K0M4l-hWKi8FrOLEVqRqeHRf8JR4",authDomain:"oppmoteboka.firebaseapp.com",projectId:"oppmoteboka",storageBucket:"oppmoteboka.firebasestorage.app",messagingSenderId:"732911922070",appId:"1:732911922070:web:b16d9de65062395c018bb7"},dS=Yb().length?eh():Tp(cS),Qs=ME(dS),Re=mN(dS),AN=Yb().find(i=>i.name==="secondary")??Tp(cS,"secondary"),Lm=ME(AN);function rl(){const[i,e]=B.useState(null),[n,s]=B.useState(!0),o=()=>{try{const p=new Uint8Array(16);crypto.getRandomValues(p);let m=Array.from(p).map(v=>String.fromCharCode(v)).join("");return m=btoa(m).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),m}catch{return Math.random().toString(36).slice(2)+Math.random().toString(36).slice(2)}};return B.useEffect(()=>{let p=null;const m=rC(Qs,async v=>{if(p&&(p(),p=null),!v){e(null),s(!1);return}try{const T=mt(Re,"users",v.uid);let S=await oi(T);if(S.exists()){const w=S.data();if(v.email&&w?.email!==v.email)try{await Un(T,{email:v.email})}catch(L){console.warn("Kunne ikke synkronisere epost til Firestore:",L)}if(!w?.authUid)try{await Un(T,{authUid:o()})}catch(L){console.warn("Kunne ikke sette authUid p bruker.",L)}}else{const w={uid:v.uid,email:v.email??"",displayName:v.displayName??v.email??"",role:"student",term:null,termLabel:null,semesterStatus:"aktiv",approvedCurrentTerm:!1,createdAt:gu(),authUid:o()};await Js(T,w)}p=dp(T,w=>{const L=w.data();if(!L)return;const F={uid:v.uid,email:L?.email??v.email??"",role:L?.role??"student",term:L?.term??null,termLabel:L?.termLabel??null,semesterStatus:L?.semesterStatus??null,approvedCurrentTerm:typeof L?.approvedCurrentTerm=="boolean"?L.approvedCurrentTerm:!1,displayName:L?.name??L?.displayName??v.displayName??v.email??""};e(F),s(!1)},w=>{console.error("Feil ved realtime-lytting p bruker:",w),s(!1)})}catch(T){console.error("Feil ved henting/oppretting av bruker:",T),e(null),s(!1)}});return()=>{p&&p(),m()}},[]),{user:i,loading:n,login:async(p,m)=>{await JR(Qs,p,m)},register:async(p,m)=>{await vd(Qs,p,m)},logout:async()=>{await iC(Qs)}}}var RN=Pb();const CN=gp(RN);var IN=i=>{switch(i){case"success":return kN;case"info":return MN;case"warning":return DN;case"error":return ON;default:return null}},xN=Array(12).fill(0),NN=({visible:i,className:e})=>pe.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":i},pe.createElement("div",{className:"sonner-spinner"},xN.map((n,s)=>pe.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),kN=pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},pe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),DN=pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},pe.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),MN=pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},pe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ON=pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},pe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),VN=pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},pe.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),pe.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),LN=()=>{let[i,e]=pe.useState(document.hidden);return pe.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),i},hp=1,jN=class{constructor(){this.subscribe=i=>(this.subscribers.push(i),()=>{let e=this.subscribers.indexOf(i);this.subscribers.splice(e,1)}),this.publish=i=>{this.subscribers.forEach(e=>e(i))},this.addToast=i=>{this.publish(i),this.toasts=[...this.toasts,i]},this.create=i=>{var e;let{message:n,...s}=i,o=typeof i?.id=="number"||((e=i.id)==null?void 0:e.length)>0?i.id:hp++,u=this.toasts.find(g=>g.id===o),h=i.dismissible===void 0?!0:i.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),u?this.toasts=this.toasts.map(g=>g.id===o?(this.publish({...g,...i,id:o,title:n}),{...g,...i,id:o,dismissible:h,title:n}):g):this.addToast({title:n,...s,dismissible:h,id:o}),o},this.dismiss=i=>(this.dismissedToasts.add(i),i||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:i,dismiss:!0})),i),this.message=(i,e)=>this.create({...e,message:i}),this.error=(i,e)=>this.create({...e,message:i,type:"error"}),this.success=(i,e)=>this.create({...e,type:"success",message:i}),this.info=(i,e)=>this.create({...e,type:"info",message:i}),this.warning=(i,e)=>this.create({...e,type:"warning",message:i}),this.loading=(i,e)=>this.create({...e,type:"loading",message:i}),this.promise=(i,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:i,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let s=i instanceof Promise?i:i(),o=n!==void 0,u,h=s.then(async p=>{if(u=["resolve",p],pe.isValidElement(p))o=!1,this.create({id:n,type:"default",message:p});else if(UN(p)&&!p.ok){o=!1;let m=typeof e.error=="function"?await e.error(`HTTP error! status: ${p.status}`):e.error,v=typeof e.description=="function"?await e.description(`HTTP error! status: ${p.status}`):e.description;this.create({id:n,type:"error",message:m,description:v})}else if(e.success!==void 0){o=!1;let m=typeof e.success=="function"?await e.success(p):e.success,v=typeof e.description=="function"?await e.description(p):e.description;this.create({id:n,type:"success",message:m,description:v})}}).catch(async p=>{if(u=["reject",p],e.error!==void 0){o=!1;let m=typeof e.error=="function"?await e.error(p):e.error,v=typeof e.description=="function"?await e.description(p):e.description;this.create({id:n,type:"error",message:m,description:v})}}).finally(()=>{var p;o&&(this.dismiss(n),n=void 0),(p=e.finally)==null||p.call(e)}),g=()=>new Promise((p,m)=>h.then(()=>u[0]==="reject"?m(u[1]):p(u[1])).catch(m));return typeof n!="string"&&typeof n!="number"?{unwrap:g}:Object.assign(n,{unwrap:g})},this.custom=(i,e)=>{let n=e?.id||hp++;return this.create({jsx:i(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(i=>!this.dismissedToasts.has(i.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},wr=new jN,PN=(i,e)=>{let n=e?.id||hp++;return wr.addToast({title:i,...e,id:n}),n},UN=i=>i&&typeof i=="object"&&"ok"in i&&typeof i.ok=="boolean"&&"status"in i&&typeof i.status=="number",zN=PN,BN=()=>wr.toasts,qN=()=>wr.getActiveToasts(),Ge=Object.assign(zN,{success:wr.success,info:wr.info,warning:wr.warning,error:wr.error,custom:wr.custom,message:wr.message,promise:wr.promise,dismiss:wr.dismiss,loading:wr.loading},{getHistory:BN,getToasts:qN});function FN(i,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e==="top"&&n.firstChild?n.insertBefore(s,n.firstChild):n.appendChild(s),s.styleSheet?s.styleSheet.cssText=i:s.appendChild(document.createTextNode(i))}FN(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function pd(i){return i.label!==void 0}var HN=3,GN="32px",KN="16px",xb=4e3,QN=356,YN=14,XN=20,$N=200;function ai(...i){return i.filter(Boolean).join(" ")}function WN(i){let[e,n]=i.split("-"),s=[];return e&&s.push(e),n&&s.push(n),s}var JN=i=>{var e,n,s,o,u,h,g,p,m,v,T;let{invert:S,toast:w,unstyled:L,interacting:F,setHeights:U,visibleToasts:ge,heights:he,index:re,toasts:Ee,expanded:He,removeToast:Me,defaultRichColors:k,closeButton:C,style:N,cancelButtonStyle:V,actionButtonStyle:D,className:P="",descriptionClassName:x="",duration:Be,position:rt,gap:Y,loadingIcon:ce,expandByDefault:ve,classNames:ye,icons:Le,closeButtonAriaLabel:O="Close toast",pauseWhenPageIsHidden:q}=i,[ee,se]=pe.useState(null),[we,Ae]=pe.useState(null),[De,it]=pe.useState(!1),[me,Ue]=pe.useState(!1),[We,ht]=pe.useState(!1),[le,fe]=pe.useState(!1),[Te,oe]=pe.useState(!1),[Ne,Oe]=pe.useState(0),[je,Ie]=pe.useState(0),Ke=pe.useRef(w.duration||Be||xb),Kt=pe.useRef(null),ot=pe.useRef(null),Tt=re===0,kn=re+1<=ge,Vt=w.type,yn=w.dismissible!==!1,Qe=w.className||"",pt=w.descriptionClassName||"",Sn=pe.useMemo(()=>he.findIndex(qe=>qe.toastId===w.id)||0,[he,w.id]),Gn=pe.useMemo(()=>{var qe;return(qe=w.closeButton)!=null?qe:C},[w.closeButton,C]),Dn=pe.useMemo(()=>w.duration||Be||xb,[w.duration,Be]),Wt=pe.useRef(0),Pt=pe.useRef(0),Ut=pe.useRef(0),xt=pe.useRef(null),[Ir,wn]=rt.split("-"),An=pe.useMemo(()=>he.reduce((qe,St,Q)=>Q>=Sn?qe:qe+St.height,0),[he,Sn]),on=LN(),ir=w.invert||S,kt=Vt==="loading";Pt.current=pe.useMemo(()=>Sn*Y+An,[Sn,An]),pe.useEffect(()=>{Ke.current=Dn},[Dn]),pe.useEffect(()=>{it(!0)},[]),pe.useEffect(()=>{let qe=ot.current;if(qe){let St=qe.getBoundingClientRect().height;return Ie(St),U(Q=>[{toastId:w.id,height:St,position:w.position},...Q]),()=>U(Q=>Q.filter(J=>J.toastId!==w.id))}},[U,w.id]),pe.useLayoutEffect(()=>{if(!De)return;let qe=ot.current,St=qe.style.height;qe.style.height="auto";let Q=qe.getBoundingClientRect().height;qe.style.height=St,Ie(Q),U(J=>J.find(de=>de.toastId===w.id)?J.map(de=>de.toastId===w.id?{...de,height:Q}:de):[{toastId:w.id,height:Q,position:w.position},...J])},[De,w.title,w.description,U,w.id]);let mn=pe.useCallback(()=>{Ue(!0),Oe(Pt.current),U(qe=>qe.filter(St=>St.toastId!==w.id)),setTimeout(()=>{Me(w)},$N)},[w,Me,U,Pt]);pe.useEffect(()=>{if(w.promise&&Vt==="loading"||w.duration===1/0||w.type==="loading")return;let qe;return He||F||q&&on?(()=>{if(Ut.current<Wt.current){let St=new Date().getTime()-Wt.current;Ke.current=Ke.current-St}Ut.current=new Date().getTime()})():Ke.current!==1/0&&(Wt.current=new Date().getTime(),qe=setTimeout(()=>{var St;(St=w.onAutoClose)==null||St.call(w,w),mn()},Ke.current)),()=>clearTimeout(qe)},[He,F,w,Vt,q,on,mn]),pe.useEffect(()=>{w.delete&&mn()},[mn,w.delete]);function sr(){var qe,St,Q;return Le!=null&&Le.loading?pe.createElement("div",{className:ai(ye?.loader,(qe=w?.classNames)==null?void 0:qe.loader,"sonner-loader"),"data-visible":Vt==="loading"},Le.loading):ce?pe.createElement("div",{className:ai(ye?.loader,(St=w?.classNames)==null?void 0:St.loader,"sonner-loader"),"data-visible":Vt==="loading"},ce):pe.createElement(NN,{className:ai(ye?.loader,(Q=w?.classNames)==null?void 0:Q.loader),visible:Vt==="loading"})}return pe.createElement("li",{tabIndex:0,ref:ot,className:ai(P,Qe,ye?.toast,(e=w?.classNames)==null?void 0:e.toast,ye?.default,ye?.[Vt],(n=w?.classNames)==null?void 0:n[Vt]),"data-sonner-toast":"","data-rich-colors":(s=w.richColors)!=null?s:k,"data-styled":!(w.jsx||w.unstyled||L),"data-mounted":De,"data-promise":!!w.promise,"data-swiped":Te,"data-removed":me,"data-visible":kn,"data-y-position":Ir,"data-x-position":wn,"data-index":re,"data-front":Tt,"data-swiping":We,"data-dismissible":yn,"data-type":Vt,"data-invert":ir,"data-swipe-out":le,"data-swipe-direction":we,"data-expanded":!!(He||ve&&De),style:{"--index":re,"--toasts-before":re,"--z-index":Ee.length-re,"--offset":`${me?Ne:Pt.current}px`,"--initial-height":ve?"auto":`${je}px`,...N,...w.style},onDragEnd:()=>{ht(!1),se(null),xt.current=null},onPointerDown:qe=>{kt||!yn||(Kt.current=new Date,Oe(Pt.current),qe.target.setPointerCapture(qe.pointerId),qe.target.tagName!=="BUTTON"&&(ht(!0),xt.current={x:qe.clientX,y:qe.clientY}))},onPointerUp:()=>{var qe,St,Q,J;if(le||!yn)return;xt.current=null;let de=Number(((qe=ot.current)==null?void 0:qe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Se=Number(((St=ot.current)==null?void 0:St.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ke=new Date().getTime()-((Q=Kt.current)==null?void 0:Q.getTime()),Je=ee==="x"?de:Se,xe=Math.abs(Je)/ke;if(Math.abs(Je)>=XN||xe>.11){Oe(Pt.current),(J=w.onDismiss)==null||J.call(w,w),Ae(ee==="x"?de>0?"right":"left":Se>0?"down":"up"),mn(),fe(!0),oe(!1);return}ht(!1),se(null)},onPointerMove:qe=>{var St,Q,J,de;if(!xt.current||!yn||((St=window.getSelection())==null?void 0:St.toString().length)>0)return;let Se=qe.clientY-xt.current.y,ke=qe.clientX-xt.current.x,Je=(Q=i.swipeDirections)!=null?Q:WN(rt);!ee&&(Math.abs(ke)>1||Math.abs(Se)>1)&&se(Math.abs(ke)>Math.abs(Se)?"x":"y");let xe={x:0,y:0};ee==="y"?(Je.includes("top")||Je.includes("bottom"))&&(Je.includes("top")&&Se<0||Je.includes("bottom")&&Se>0)&&(xe.y=Se):ee==="x"&&(Je.includes("left")||Je.includes("right"))&&(Je.includes("left")&&ke<0||Je.includes("right")&&ke>0)&&(xe.x=ke),(Math.abs(xe.x)>0||Math.abs(xe.y)>0)&&oe(!0),(J=ot.current)==null||J.style.setProperty("--swipe-amount-x",`${xe.x}px`),(de=ot.current)==null||de.style.setProperty("--swipe-amount-y",`${xe.y}px`)}},Gn&&!w.jsx?pe.createElement("button",{"aria-label":O,"data-disabled":kt,"data-close-button":!0,onClick:kt||!yn?()=>{}:()=>{var qe;mn(),(qe=w.onDismiss)==null||qe.call(w,w)},className:ai(ye?.closeButton,(o=w?.classNames)==null?void 0:o.closeButton)},(u=Le?.close)!=null?u:VN):null,w.jsx||B.isValidElement(w.title)?w.jsx?w.jsx:typeof w.title=="function"?w.title():w.title:pe.createElement(pe.Fragment,null,Vt||w.icon||w.promise?pe.createElement("div",{"data-icon":"",className:ai(ye?.icon,(h=w?.classNames)==null?void 0:h.icon)},w.promise||w.type==="loading"&&!w.icon?w.icon||sr():null,w.type!=="loading"?w.icon||Le?.[Vt]||IN(Vt):null):null,pe.createElement("div",{"data-content":"",className:ai(ye?.content,(g=w?.classNames)==null?void 0:g.content)},pe.createElement("div",{"data-title":"",className:ai(ye?.title,(p=w?.classNames)==null?void 0:p.title)},typeof w.title=="function"?w.title():w.title),w.description?pe.createElement("div",{"data-description":"",className:ai(x,pt,ye?.description,(m=w?.classNames)==null?void 0:m.description)},typeof w.description=="function"?w.description():w.description):null),B.isValidElement(w.cancel)?w.cancel:w.cancel&&pd(w.cancel)?pe.createElement("button",{"data-button":!0,"data-cancel":!0,style:w.cancelButtonStyle||V,onClick:qe=>{var St,Q;pd(w.cancel)&&yn&&((Q=(St=w.cancel).onClick)==null||Q.call(St,qe),mn())},className:ai(ye?.cancelButton,(v=w?.classNames)==null?void 0:v.cancelButton)},w.cancel.label):null,B.isValidElement(w.action)?w.action:w.action&&pd(w.action)?pe.createElement("button",{"data-button":!0,"data-action":!0,style:w.actionButtonStyle||D,onClick:qe=>{var St,Q;pd(w.action)&&((Q=(St=w.action).onClick)==null||Q.call(St,qe),!qe.defaultPrevented&&mn())},className:ai(ye?.actionButton,(T=w?.classNames)==null?void 0:T.actionButton)},w.action.label):null))};function Nb(){if(typeof window>"u"||typeof document>"u")return"ltr";let i=document.documentElement.getAttribute("dir");return i==="auto"||!i?window.getComputedStyle(document.documentElement).direction:i}function ZN(i,e){let n={};return[i,e].forEach((s,o)=>{let u=o===1,h=u?"--mobile-offset":"--offset",g=u?KN:GN;function p(m){["top","right","bottom","left"].forEach(v=>{n[`${h}-${v}`]=typeof m=="number"?`${m}px`:m})}typeof s=="number"||typeof s=="string"?p(s):typeof s=="object"?["top","right","bottom","left"].forEach(m=>{s[m]===void 0?n[`${h}-${m}`]=g:n[`${h}-${m}`]=typeof s[m]=="number"?`${s[m]}px`:s[m]}):p(g)}),n}var ek=B.forwardRef(function(i,e){let{invert:n,position:s="bottom-right",hotkey:o=["altKey","KeyT"],expand:u,closeButton:h,className:g,offset:p,mobileOffset:m,theme:v="light",richColors:T,duration:S,style:w,visibleToasts:L=HN,toastOptions:F,dir:U=Nb(),gap:ge=YN,loadingIcon:he,icons:re,containerAriaLabel:Ee="Notifications",pauseWhenPageIsHidden:He}=i,[Me,k]=pe.useState([]),C=pe.useMemo(()=>Array.from(new Set([s].concat(Me.filter(q=>q.position).map(q=>q.position)))),[Me,s]),[N,V]=pe.useState([]),[D,P]=pe.useState(!1),[x,Be]=pe.useState(!1),[rt,Y]=pe.useState(v!=="system"?v:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ce=pe.useRef(null),ve=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),ye=pe.useRef(null),Le=pe.useRef(!1),O=pe.useCallback(q=>{k(ee=>{var se;return(se=ee.find(we=>we.id===q.id))!=null&&se.delete||wr.dismiss(q.id),ee.filter(({id:we})=>we!==q.id)})},[]);return pe.useEffect(()=>wr.subscribe(q=>{if(q.dismiss){k(ee=>ee.map(se=>se.id===q.id?{...se,delete:!0}:se));return}setTimeout(()=>{CN.flushSync(()=>{k(ee=>{let se=ee.findIndex(we=>we.id===q.id);return se!==-1?[...ee.slice(0,se),{...ee[se],...q},...ee.slice(se+1)]:[q,...ee]})})})}),[]),pe.useEffect(()=>{if(v!=="system"){Y(v);return}if(v==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Y("dark"):Y("light")),typeof window>"u")return;let q=window.matchMedia("(prefers-color-scheme: dark)");try{q.addEventListener("change",({matches:ee})=>{Y(ee?"dark":"light")})}catch{q.addListener(({matches:se})=>{try{Y(se?"dark":"light")}catch(we){console.error(we)}})}},[v]),pe.useEffect(()=>{Me.length<=1&&P(!1)},[Me]),pe.useEffect(()=>{let q=ee=>{var se,we;o.every(Ae=>ee[Ae]||ee.code===Ae)&&(P(!0),(se=ce.current)==null||se.focus()),ee.code==="Escape"&&(document.activeElement===ce.current||(we=ce.current)!=null&&we.contains(document.activeElement))&&P(!1)};return document.addEventListener("keydown",q),()=>document.removeEventListener("keydown",q)},[o]),pe.useEffect(()=>{if(ce.current)return()=>{ye.current&&(ye.current.focus({preventScroll:!0}),ye.current=null,Le.current=!1)}},[ce.current]),pe.createElement("section",{ref:e,"aria-label":`${Ee} ${ve}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((q,ee)=>{var se;let[we,Ae]=q.split("-");return Me.length?pe.createElement("ol",{key:q,dir:U==="auto"?Nb():U,tabIndex:-1,ref:ce,className:g,"data-sonner-toaster":!0,"data-theme":rt,"data-y-position":we,"data-lifted":D&&Me.length>1&&!u,"data-x-position":Ae,style:{"--front-toast-height":`${((se=N[0])==null?void 0:se.height)||0}px`,"--width":`${QN}px`,"--gap":`${ge}px`,...w,...ZN(p,m)},onBlur:De=>{Le.current&&!De.currentTarget.contains(De.relatedTarget)&&(Le.current=!1,ye.current&&(ye.current.focus({preventScroll:!0}),ye.current=null))},onFocus:De=>{De.target instanceof HTMLElement&&De.target.dataset.dismissible==="false"||Le.current||(Le.current=!0,ye.current=De.relatedTarget)},onMouseEnter:()=>P(!0),onMouseMove:()=>P(!0),onMouseLeave:()=>{x||P(!1)},onDragEnd:()=>P(!1),onPointerDown:De=>{De.target instanceof HTMLElement&&De.target.dataset.dismissible==="false"||Be(!0)},onPointerUp:()=>Be(!1)},Me.filter(De=>!De.position&&ee===0||De.position===q).map((De,it)=>{var me,Ue;return pe.createElement(JN,{key:De.id,icons:re,index:it,toast:De,defaultRichColors:T,duration:(me=F?.duration)!=null?me:S,className:F?.className,descriptionClassName:F?.descriptionClassName,invert:n,visibleToasts:L,closeButton:(Ue=F?.closeButton)!=null?Ue:h,interacting:x,position:q,style:F?.style,unstyled:F?.unstyled,classNames:F?.classNames,cancelButtonStyle:F?.cancelButtonStyle,actionButtonStyle:F?.actionButtonStyle,removeToast:O,toasts:Me.filter(We=>We.position==De.position),heights:N.filter(We=>We.position==De.position),setHeights:V,expandByDefault:u,gap:ge,loadingIcon:he,expanded:D,pauseWhenPageIsHidden:He,swipeDirections:i.swipeDirections})})):null}))});const tk="modulepreload",nk=function(i){return"/"+i},kb={},rk=function(e,n,s){let o=Promise.resolve();if(n&&n.length>0){let p=function(m){return Promise.all(m.map(v=>Promise.resolve(v).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),g=h?.nonce||h?.getAttribute("nonce");o=p(n.map(m=>{if(m=nk(m),m in kb)return;kb[m]=!0;const v=m.endsWith(".css"),T=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${T}`))return;const S=document.createElement("link");if(S.rel=v?"stylesheet":tk,v||(S.as="script"),S.crossOrigin="",S.href=m,g&&S.setAttribute("nonce",g),document.head.appendChild(S),v)return new Promise((w,L)=>{S.addEventListener("load",w),S.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${m}`)))})}))}function u(h){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=h,window.dispatchEvent(g),!g.defaultPrevented)throw h}return o.then(h=>{for(const g of h||[])g.status==="rejected"&&u(g.reason);return e().catch(u)})},ik=({onCode:i,onError:e})=>{const n=B.useMemo(()=>`qr-reader-${Math.random().toString(36).slice(2)}`,[]);return B.useEffect(()=>{let s=null,o=!1,u=!1,h;return(async()=>{let p;try{p=(await rk(()=>import("./index-E_luaAo1.js"),[])).Html5Qrcode}catch(m){console.warn("QR: klarte ikke  laste html5-qrcode-modulen",m),e?.(m);return}try{s=new p(n)}catch(m){console.warn("QR: konstruktr-feil for Html5Qrcode",m),e?.(m);return}h=window.setTimeout(()=>{!o&&!u&&(console.warn("QR: start timeout  ingen respons fra kamera p 7s"),e?.(new Error("QR start timeout")))},7e3),s.start({facingMode:"environment"},{fps:10,qrbox:250},m=>{i(m)},()=>{}).then(()=>{o=!0,h&&window.clearTimeout(h)}).catch(m=>{h&&window.clearTimeout(h),!u&&(console.warn("Kunne ikke starte QR-leser:",m),e?.(m))})})(),()=>{if(u=!0,h&&window.clearTimeout(h),!s)return;s.stop().catch(()=>{}).then(()=>{try{s?.clear()}catch{}}).finally(()=>{try{const v=document.getElementById(n)?.querySelector("video"),T=v?.srcObject??void 0;T&&(T.getTracks().forEach(S=>{try{S.stop()}catch{}}),v&&(v.srcObject=null))}catch{}})}},[n,i,e]),_.jsx("div",{id:n,style:{width:"100%"}})};class sk extends pe.Component{state={hasError:!1};static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){if(this.props.onError)try{this.props.onError(e,n)}catch{}}componentDidUpdate(e){e.resetKey!==this.props.resetKey&&this.setState({hasError:!1,error:void 0})}render(){if(this.state.hasError){const{fallback:e}=this.props;return e?typeof e=="function"?e(this.state.error):e:null}return this.props.children}}async function ak(){const e=(await sn(Ft(Re,"terms"))).docs.map(n=>{const s=n.data(),o=typeof s?.value=="number"?s.value:void 0;if(typeof o!="number")return null;const u=typeof s?.label=="string"?s.label:"",h=typeof s?.order=="number"?s.order:void 0;return{value:o,label:u,order:h}}).filter(Boolean);return e.sort((n,s)=>(n.order??n.value)-(s.order??s.value)),e}function yg(){const[i,e]=B.useState([]),[n,s]=B.useState(!0),[o,u]=B.useState(null);B.useEffect(()=>{let g=!0;return(async()=>{try{s(!0);const p=await ak();g&&e(p)}catch(p){g&&u(p)}finally{g&&s(!1)}})(),()=>{g=!1}},[]);const h=B.useMemo(()=>{const g=new Map;for(const p of i)g.set(p.value,p);return g},[i]);return{options:i,byValue:h,loading:n,error:o}}function ts(i,e){if(e==null)return"Ukjent termin";if(e===99)return"Permisjon";let n;return Array.isArray(i)?n=i.find(s=>s.value===e):i instanceof Map&&(n=i.get(e)),n&&n.label?n.label:`Termin ${e}`}function ok(i){if(i==="Testmodul 1 - Testtermin 1")return i;const e=/(Modul)\s+(\d+)\s*-\s*(Blokk|Termin)\s+(\d+)/i,n=i.match(e);if(n){const u=n[2],h=n[4];return`M${u} - T${h}`}const s=/(Modul|Termin)\s+(\d+)/i,o=i.match(s);return o?`M${o[2]}`:i}function lk(i,e){if(e==null)return"";const n=ts(i,e);return ok(n)}function uk({value:i,onChange:e,length:n=6,disabled:s}){const o=B.useRef([]),u=B.useMemo(()=>{const T=(i||"").replace(/\D/g,"").slice(0,n),S=new Array(n).fill("");for(let w=0;w<T.length;w++)S[w]=T[w];return S},[i,n]),h=T=>{const S=o.current[T];S&&S.focus()},g=(T,S)=>{const w=S.replace(/\D/g,"");if(!w)return;const F=u.join("").split("");let U=T;for(const ge of w){if(U>=n)break;F[U]=ge,U++}e(F.join("").slice(0,n)),U<=n-1&&h(U)},p=(T,S)=>{const w=S.target.value;if(w.length>1){g(T,w);return}const L=w.replace(/\D/g,""),F=u.slice();F[T]=L||"";const U=F.join("");e(U),L&&T<n-1&&h(T+1)},m=(T,S)=>{const w=S.key;if(w==="Backspace"){if(u[T]){const L=u.slice();L[T]="",e(L.join("")),S.preventDefault()}else if(T>0){S.preventDefault(),h(T-1);const L=u.slice();L[T-1]="",e(L.join(""))}}else w==="ArrowLeft"&&T>0?(S.preventDefault(),h(T-1)):w==="ArrowRight"&&T<n-1&&(S.preventDefault(),h(T+1))},v=(T,S)=>{const w=S.clipboardData.getData("text");w&&(S.preventDefault(),g(T,w))};return B.useEffect(()=>{o.current=o.current.slice(0,n)},[n]),_.jsx("div",{className:"",style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:u.map((T,S)=>_.jsx("input",{ref:w=>o.current[S]=w,type:"text",inputMode:"numeric",pattern:"[0-9]*",autoComplete:"one-time-code",className:"",style:{borderRadius:"7.5px",border:"2px solid var(--color-black",width:"2.2rem",height:"3.4rem",margin:"0 0.25rem",padding:"0.5rem 0.25rem",textAlign:"center"},value:T,onChange:w=>p(S,w),onKeyDown:w=>m(S,w),onPaste:w=>v(S,w),"aria-label":`Kode siffer ${S+1}`,disabled:s,maxLength:1},S))})}function ck({user:i}){const[e,n]=B.useState(""),[s,o]=B.useState(!1),[u,h]=B.useState(i.term??11),[g,p]=B.useState(i.approvedCurrentTerm??!1),[m,v]=B.useState([]),[T,S]=B.useState(!1),[w,L]=B.useState(0),[F,U]=B.useState(!1),{options:ge}=yg(),[he,re]=B.useState({}),[Ee,He]=B.useState([]),[Me,k]=B.useState({}),[C,N]=B.useState({}),[V,D]=B.useState("idle"),[P,x]=B.useState(null),[Be,rt]=B.useState(null),Y=i.semesterStatus&&i.semesterStatus!=="aktiv",ce=()=>{D("idle"),x(null),rt(null),n(""),U(!1)};B.useEffect(()=>{typeof i.term=="number"&&h(i.term),p(!!i.approvedCurrentTerm)},[i.term,i.approvedCurrentTerm]);const ve=async()=>{try{const me=mt(Re,"users",i.uid),Ue=await oi(me),We=Ue.exists()?Ue.data()?.authUid:null;if(typeof We=="string"&&We.length>=8)return We;const ht=`authUid:${i.uid}`;let le=localStorage.getItem(ht);if(!le){try{const fe=new Uint8Array(16);crypto.getRandomValues(fe),le=Array.from(fe).map(Te=>String.fromCharCode(Te)).join(""),le=btoa(le).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}catch{le=Math.random().toString(36).slice(2)+Math.random().toString(36).slice(2)}localStorage.setItem(ht,le)}return await Js(me,{authUid:le},{merge:!0}),le}catch(me){return console.warn("Kunne ikke generere/lagre authUid, bruker fallback i minnet.",me),Math.random().toString(36).slice(2)+Math.random().toString(36).slice(2)}},ye=async me=>{if(!(!me||me.length<6)){o(!0),D("idle"),x(null);try{const Ue=Ft(Re,"sessions"),We=Fn(Ue,fn("code","==",me)),ht=await sn(We);if(ht.empty){D("error"),x("Fant ingen kt med denne koden."),n(""),U(!1),o(!1);return}let le=ht.docs[0];if(ht.docs.length>1){const Ie=ht.docs.find(Ke=>{const Kt=Ke.data(),ot=typeof Kt?.term=="number"?Kt.term:Number(Kt?.term);return Number.isFinite(ot)&&ot===u});Ie&&(le=Ie)}const fe=le.data(),Te=typeof u=="number"?u:typeof i.term=="number"?i.term:null,oe=typeof fe?.term=="number"?fe.term:Number(fe?.term);if(Te==null){D("error"),x("Kontoen din mangler tilknytning til en termin. Kontakt lrer/admin for  f satt riktig termin fr du registrerer oppmte."),n(""),U(!1),o(!1);return}if(!Number.isFinite(oe)||oe!==Te){const Ie=Number.isFinite(oe)?ts(ge,oe):"ukjent termin",Ke=ts(ge,Te),ot=!!(fe&&fe.isOpen)?"Koden gjeder for en annen termin enn du er registert p. Kanskje underviseren har valgt feil termin?":`Denne kten er for ${Ie}. Du er i ${Ke}. Du kan bare registrere oppmte for din egen termin.`;D("error"),x(ot),n(""),U(!1),o(!1);return}const Ne=mt(Re,"sessions",le.id,"attendance",i.uid);if((await oi(Ne)).exists()){D("error"),x("Du er allerede registrert p denne kten."),n(""),U(!1),o(!1);return}await Js(Ne,{userId:i.uid,studentName:i.displayName,studentEmail:i.email,createdAt:Ht.now(),status:"present"});const je=fe.name||"kten";rt(je),D("success"),x(null),U(!1),n(""),L(Ie=>Ie+1),we()}catch(Ue){console.error(Ue),D("error"),x("Noe gikk galt ved registrering av oppmte."),n(""),U(!1)}finally{o(!1)}}},Le=me=>{if(!me||s)return;const Ue=me.replace(/\D/g,"").slice(0,6);Ue.length===6&&(n(Ue),U(!1),ye(Ue))},O=me=>{console.warn("QR-skanner-feil:",me),U(!1),D("error"),x("Kunne ikke starte kamera. Sjekk kameratilgang i nettleseren eller skriv inn oppmtekoden manuelt.")};B.useEffect(()=>{(async()=>{S(!0);try{const Ue=Ft(Re,"requirements"),We=Fn(Ue,fn("term","==",u)),le=(await sn(We)).docs.map(Qe=>{const pt=Qe.data();return{category:pt.category,requiredCount:pt.requiredCount}}),fe=Ft(Re,"sessions"),Te=Fn(fe,fn("term","==",u)),Ne=(await sn(Te)).docs.map(Qe=>{const pt=Qe.data();return{id:Qe.id,timeId:typeof pt?.timeId=="string"?pt.timeId:void 0,name:typeof pt?.name=="string"?pt.name:void 0,category:typeof pt?.category=="string"?pt.category:void 0}}),Oe=Ft(Re,"times"),je=Fn(Oe,fn("term","==",u)),Ke=(await sn(je)).docs.map(Qe=>{const pt=Qe.data();return{id:Qe.id,name:pt.name,category:pt.category,term:pt.term,order:typeof pt?.order=="number"?pt.order:void 0}}),Kt=new Map;for(const Qe of Ke)Qe.category&&Kt.set(Qe.category,(Kt.get(Qe.category)??0)+1);const ot=new Map,Tt={},kn={};for(const Qe of Ne){if(!Qe.category)continue;const pt=mt(Re,"sessions",Qe.id,"attendance",i.uid),Sn=await oi(pt);if(Sn.exists()){const Gn=Sn.data()?.createdAt;if(ot.set(Qe.category,(ot.get(Qe.category)??0)+1),Qe.timeId)Tt[Qe.timeId]=!0,kn[Qe.timeId]=Gn;else if(Qe.name&&Qe.category){const Dn=Ke.find(Wt=>Wt.category===Qe.category&&Wt.name===Qe.name);Dn&&(Tt[Dn.id]=!0,kn[Dn.id]=Gn)}}}const Vt=new Set;for(const Qe of le)Vt.add(Qe.category);for(const Qe of Ne)Qe.category&&Vt.add(Qe.category);for(const Qe of Ke)Qe.category&&Vt.add(Qe.category);const yn=[];Vt.forEach(Qe=>{const pt=le.find(Wt=>Wt.category===Qe),Sn=pt?pt.requiredCount:null,Gn=Kt.get(Qe)??0,Dn=ot.get(Qe)??0;yn.push({category:Qe,attendedCount:Dn,totalSessions:Gn,requiredCount:Sn})}),yn.sort((Qe,pt)=>Qe.category.localeCompare(pt.category,"nb-NO",{sensitivity:"base"})),v(yn),He(Ke),k(Tt),N(kn)}catch(Ue){console.error(Ue),v([]),He([]),k({}),N({})}finally{S(!1)}})()},[u,i.uid,w]);const q=me=>{const Ue=me.match(/^\s*(\d+)/);return Ue?parseInt(Ue[1],10):Number.POSITIVE_INFINITY},ee=me=>{re(Ue=>({...Ue,[me]:!Ue[me]}))},se=me=>{if(!me)return"";try{return new Date(me.toMillis()).toLocaleDateString("nb-NO")}catch{return""}},we=async()=>{try{const me=u,We=(await sn(Fn(Ft(Re,"requirements"),fn("term","==",me)))).docs.map(Ie=>Ie.data());if(!We.length)return;const le=(await sn(Fn(Ft(Re,"sessions"),fn("term","==",me)))).docs.map(Ie=>{const Ke=Ie.data();return{id:Ie.id,category:typeof Ke?.category=="string"?Ke.category:void 0}}),fe=new Map;for(const Ie of le){if(!Ie.category)continue;const Ke=mt(Re,"sessions",Ie.id,"attendance",i.uid);(await oi(Ke)).exists()&&fe.set(Ie.category,(fe.get(Ie.category)??0)+1)}if(!We.every(Ie=>{const Ke=typeof Ie.requiredCount=="number"?Ie.requiredCount:0;return Ke<=0?!0:(fe.get(Ie.category)??0)>=Ke}))return;const oe=await ve(),Ne=`${oe}_${me}`,Oe=mt(Re,"attendanceBook",Ne);if((await oi(Oe)).exists())return;await Js(Oe,{authUid:oe,term:me,acceptedBy:"system",acceptedTimeStamp:gu()});try{await Un(mt(Re,"users",i.uid),{approvedCurrentTerm:!0}),p(!0)}catch(Ie){console.warn("Kunne ikke oppdatere approvedCurrentTerm p bruker:",Ie)}}catch(me){console.warn("Klarte ikke  registrere akseptert oppmtebok:",me)}},Ae=async()=>{const me=(u??0)+1;try{await Un(mt(Re,"users",i.uid),{term:me,approvedCurrentTerm:!1})}catch(Ue){console.warn("Kunne ikke oppdatere bruker ved semesterbytte:",Ue)}finally{h(me),p(!1),L(Ue=>Ue+1)}},De=async()=>{try{await Un(mt(Re,"users",i.uid),{term:99,approvedCurrentTerm:!1})}catch(Ue){console.warn("Kunne ikke oppdatere bruker ved semesterbytte:",Ue)}finally{h(99),p(!1),L(Ue=>Ue+1)}},it=me=>{const We=(me||"").replace(/\D/g,"").slice(0,6);n(We),We.length===6&&!s&&ye(We)};return B.useEffect(()=>{if(V==="idle")return;const Ue=setTimeout(()=>{ce()},V==="success"?1e4:2e3);return()=>clearTimeout(Ue)},[V]),_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"card student-card card-top round-corner-top100",children:[_.jsxs("div",{className:"userInfo",children:[_.jsx("h2",{className:"whiteTxt",children:i.displayName||i.email}),_.jsx("p",{className:"thinFont opaqueFont whiteTxt",children:ts(ge,u)})]}),_.jsx("img",{src:"/card-man.svg",alt:"Student-profile-placeholder"})]}),_.jsx("div",{className:"card student-card card-bottom full-border round-corner-bottom100 ",children:V==="success"?_.jsx(_.Fragment,{children:_.jsxs("div",{className:"registered-sucsess",children:[_.jsx("img",{src:"/registered.svg",alt:"Registered-icon"}),_.jsx("h3",{className:"",children:"Oppmte registrert"}),Be&&_.jsx("p",{className:"",children:Be})]})}):V==="error"?_.jsx(_.Fragment,{children:_.jsxs("div",{className:"registered-error",children:[_.jsx("img",{src:"/error.svg",alt:"Error-icon"}),_.jsx("h3",{className:"",children:"Kunne ikke registrere oppmte"}),_.jsx("p",{className:"",children:P??"Fant ingen gruppetimer med denne koden. Sjekk at kten er pen hos underviseren."})]})}):_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"code-input-container",children:[_.jsx("p",{className:"spacedFont thinFont",children:"Oppmtekode fra underviser"}),_.jsx(uk,{value:e,onChange:it,disabled:s})]}),_.jsx("img",{src:"/qrscan.svg",alt:"QR-code-icon",className:"qr-code-icon"}),_.jsx("br",{}),_.jsx("button",{type:"button",onClick:()=>U(!0),className:"button-colorless fontUnderline boldFont qr-code-button",children:"Scan QR-kode"}),F&&_.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:60},onClick:()=>U(!1),role:"dialog","aria-modal":"true","aria-label":"Skann QR-kode",children:_.jsxs("div",{onClick:me=>me.stopPropagation(),style:{width:"100%",maxWidth:"480px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[_.jsx("h3",{style:{margin:0},children:"Skann QR-kode"}),_.jsx("button",{type:"button",onClick:()=>U(!1),style:{border:"none",background:"transparent",fontSize:"1.2rem",cursor:"pointer"},"aria-label":"Lukk",title:"Lukk",children:""})]}),_.jsx("div",{style:{borderRadius:"0.75rem",overflow:"hidden",border:"1px solid #e5e7eb"},children:_.jsx(sk,{onError:me=>O(me),resetKey:F,children:_.jsx(ik,{onCode:Le,onError:O})})})]})})]})}),g&&_.jsxs("div",{className:"card approved-term-card full-border round-corners-whole100 ",children:[_.jsx("h2",{className:"boldFont",children:"Godkjent"}),_.jsxs("p",{className:"thinFont opaqueFont",children:["Bra jobba! Kravene for ",ts(ge,u).toLowerCase()," er oppndd. Lykke til p eksamen!"]}),_.jsx("button",{id:"start-next-semester-button",className:"button button-black button-fullwidth field-height-100 round-corners-whole50",onClick:Ae,children:"Start neste semester"}),_.jsx("button",{id:"gap-life-button",className:"button button-colorless fontUnderline boldFont",onClick:De,children:"Har innvilget permisjon"})]}),_.jsxs("div",{className:"card round-corners-whole100 student-overview-card",children:[Y&&_.jsxs("p",{className:"text-red text-center",children:['Du er markert som "',i.semesterStatus,'" dette semesteret. Ingen oppmtekrav, men du kan fortsatt registrere oppmte.']}),_.jsx("section",{children:T?_.jsx(Wd,{}):m.length===0?_.jsx("p",{className:"fs-0_9 text-gray-500",children:"Ingen registrerte timer for denne terminen enn."}):_.jsxs(_.Fragment,{children:[_.jsx("h2",{children:"Min oppmtebok"}),_.jsx("p",{className:"thinFont opaqueFont",children:"Her finner du alle fullfrte og fremtidige oppmter."}),_.jsx("table",{className:"table-container",children:_.jsx("tbody",{children:m.map(me=>{const Ue=me.requiredCount!=null&&me.attendedCount>=me.requiredCount;return _.jsxs(pe.Fragment,{children:[_.jsxs("tr",{onClick:()=>ee(me.category),className:"main-table-overview-row",children:[_.jsx("td",{className:"requirement-meet-icon",children:Ue?_.jsx("img",{src:"/check-white.svg",alt:"Checkmark-icon"}):_.jsx(_.Fragment,{})}),_.jsx("td",{className:"class-overview thinFont smal",children:me.category}),_.jsx("td",{className:"spacedFont",children:me.totalSessions>0?`${me.attendedCount}/${me.totalSessions}`:me.attendedCount}),_.jsx("td",{className:"required-classes",children:me.requiredCount??"-"})]}),he[me.category]&&_.jsx("tr",{children:_.jsx("td",{colSpan:4,className:"detail-cell",children:_.jsx("div",{className:"subtable-wrapper",children:_.jsx("table",{className:"subtable",children:_.jsx("tbody",{children:Ee.filter(We=>We.category===me.category).sort((We,ht)=>{const le=(We.order??Number.MAX_SAFE_INTEGER)-(ht.order??Number.MAX_SAFE_INTEGER);if(le!==0)return le;const fe=q(We.name),Te=q(ht.name);return fe!==Te?fe-Te:We.name.localeCompare(ht.name,"nb-NO",{sensitivity:"base"})}).map(We=>{const ht=!!Me[We.id],le=C[We.id];return _.jsxs("tr",{children:[_.jsx("td",{className:"subtable-icon-cell",children:ht?_.jsx("img",{src:"/check-white.svg",alt:"Checkmark-icon"}):_.jsx(_.Fragment,{})}),_.jsx("td",{className:"class-overview thinFont smal subtable-name-cell",children:We.name}),_.jsx("td",{className:"smallText opaqueFont subtable-date-cell",children:ht?se(le):""})]},`detail-${me.category}-${We.id}`)})})})})})})]},me.category)})})})]})})]})]})}var dk=Object.defineProperty,Yd=Object.getOwnPropertySymbols,hS=Object.prototype.hasOwnProperty,fS=Object.prototype.propertyIsEnumerable,Db=(i,e,n)=>e in i?dk(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,fp=(i,e)=>{for(var n in e||(e={}))hS.call(e,n)&&Db(i,n,e[n]);if(Yd)for(var n of Yd(e))fS.call(e,n)&&Db(i,n,e[n]);return i},mp=(i,e)=>{var n={};for(var s in i)hS.call(i,s)&&e.indexOf(s)<0&&(n[s]=i[s]);if(i!=null&&Yd)for(var s of Yd(i))e.indexOf(s)<0&&fS.call(i,s)&&(n[s]=i[s]);return n};var Ha;(i=>{const e=class Et{constructor(p,m,v,T){if(this.version=p,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],p<Et.MIN_VERSION||p>Et.MAX_VERSION)throw new RangeError("Version value out of range");if(T<-1||T>7)throw new RangeError("Mask value out of range");this.size=p*4+17;let S=[];for(let L=0;L<this.size;L++)S.push(!1);for(let L=0;L<this.size;L++)this.modules.push(S.slice()),this.isFunction.push(S.slice());this.drawFunctionPatterns();const w=this.addEccAndInterleave(v);if(this.drawCodewords(w),T==-1){let L=1e9;for(let F=0;F<8;F++){this.applyMask(F),this.drawFormatBits(F);const U=this.getPenaltyScore();U<L&&(T=F,L=U),this.applyMask(F)}}o(0<=T&&T<=7),this.mask=T,this.applyMask(T),this.drawFormatBits(T),this.isFunction=[]}static encodeText(p,m){const v=i.QrSegment.makeSegments(p);return Et.encodeSegments(v,m)}static encodeBinary(p,m){const v=i.QrSegment.makeBytes(p);return Et.encodeSegments([v],m)}static encodeSegments(p,m,v=1,T=40,S=-1,w=!0){if(!(Et.MIN_VERSION<=v&&v<=T&&T<=Et.MAX_VERSION)||S<-1||S>7)throw new RangeError("Invalid value");let L,F;for(L=v;;L++){const re=Et.getNumDataCodewords(L,m)*8,Ee=h.getTotalBits(p,L);if(Ee<=re){F=Ee;break}if(L>=T)throw new RangeError("Data too long")}for(const re of[Et.Ecc.MEDIUM,Et.Ecc.QUARTILE,Et.Ecc.HIGH])w&&F<=Et.getNumDataCodewords(L,re)*8&&(m=re);let U=[];for(const re of p){n(re.mode.modeBits,4,U),n(re.numChars,re.mode.numCharCountBits(L),U);for(const Ee of re.getData())U.push(Ee)}o(U.length==F);const ge=Et.getNumDataCodewords(L,m)*8;o(U.length<=ge),n(0,Math.min(4,ge-U.length),U),n(0,(8-U.length%8)%8,U),o(U.length%8==0);for(let re=236;U.length<ge;re^=253)n(re,8,U);let he=[];for(;he.length*8<U.length;)he.push(0);return U.forEach((re,Ee)=>he[Ee>>>3]|=re<<7-(Ee&7)),new Et(L,m,he,S)}getModule(p,m){return 0<=p&&p<this.size&&0<=m&&m<this.size&&this.modules[m][p]}getModules(){return this.modules}drawFunctionPatterns(){for(let v=0;v<this.size;v++)this.setFunctionModule(6,v,v%2==0),this.setFunctionModule(v,6,v%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const p=this.getAlignmentPatternPositions(),m=p.length;for(let v=0;v<m;v++)for(let T=0;T<m;T++)v==0&&T==0||v==0&&T==m-1||v==m-1&&T==0||this.drawAlignmentPattern(p[v],p[T]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(p){const m=this.errorCorrectionLevel.formatBits<<3|p;let v=m;for(let S=0;S<10;S++)v=v<<1^(v>>>9)*1335;const T=(m<<10|v)^21522;o(T>>>15==0);for(let S=0;S<=5;S++)this.setFunctionModule(8,S,s(T,S));this.setFunctionModule(8,7,s(T,6)),this.setFunctionModule(8,8,s(T,7)),this.setFunctionModule(7,8,s(T,8));for(let S=9;S<15;S++)this.setFunctionModule(14-S,8,s(T,S));for(let S=0;S<8;S++)this.setFunctionModule(this.size-1-S,8,s(T,S));for(let S=8;S<15;S++)this.setFunctionModule(8,this.size-15+S,s(T,S));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let p=this.version;for(let v=0;v<12;v++)p=p<<1^(p>>>11)*7973;const m=this.version<<12|p;o(m>>>18==0);for(let v=0;v<18;v++){const T=s(m,v),S=this.size-11+v%3,w=Math.floor(v/3);this.setFunctionModule(S,w,T),this.setFunctionModule(w,S,T)}}drawFinderPattern(p,m){for(let v=-4;v<=4;v++)for(let T=-4;T<=4;T++){const S=Math.max(Math.abs(T),Math.abs(v)),w=p+T,L=m+v;0<=w&&w<this.size&&0<=L&&L<this.size&&this.setFunctionModule(w,L,S!=2&&S!=4)}}drawAlignmentPattern(p,m){for(let v=-2;v<=2;v++)for(let T=-2;T<=2;T++)this.setFunctionModule(p+T,m+v,Math.max(Math.abs(T),Math.abs(v))!=1)}setFunctionModule(p,m,v){this.modules[m][p]=v,this.isFunction[m][p]=!0}addEccAndInterleave(p){const m=this.version,v=this.errorCorrectionLevel;if(p.length!=Et.getNumDataCodewords(m,v))throw new RangeError("Invalid argument");const T=Et.NUM_ERROR_CORRECTION_BLOCKS[v.ordinal][m],S=Et.ECC_CODEWORDS_PER_BLOCK[v.ordinal][m],w=Math.floor(Et.getNumRawDataModules(m)/8),L=T-w%T,F=Math.floor(w/T);let U=[];const ge=Et.reedSolomonComputeDivisor(S);for(let re=0,Ee=0;re<T;re++){let He=p.slice(Ee,Ee+F-S+(re<L?0:1));Ee+=He.length;const Me=Et.reedSolomonComputeRemainder(He,ge);re<L&&He.push(0),U.push(He.concat(Me))}let he=[];for(let re=0;re<U[0].length;re++)U.forEach((Ee,He)=>{(re!=F-S||He>=L)&&he.push(Ee[re])});return o(he.length==w),he}drawCodewords(p){if(p.length!=Math.floor(Et.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let v=this.size-1;v>=1;v-=2){v==6&&(v=5);for(let T=0;T<this.size;T++)for(let S=0;S<2;S++){const w=v-S,F=(v+1&2)==0?this.size-1-T:T;!this.isFunction[F][w]&&m<p.length*8&&(this.modules[F][w]=s(p[m>>>3],7-(m&7)),m++)}}o(m==p.length*8)}applyMask(p){if(p<0||p>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let v=0;v<this.size;v++){let T;switch(p){case 0:T=(v+m)%2==0;break;case 1:T=m%2==0;break;case 2:T=v%3==0;break;case 3:T=(v+m)%3==0;break;case 4:T=(Math.floor(v/3)+Math.floor(m/2))%2==0;break;case 5:T=v*m%2+v*m%3==0;break;case 6:T=(v*m%2+v*m%3)%2==0;break;case 7:T=((v+m)%2+v*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][v]&&T&&(this.modules[m][v]=!this.modules[m][v])}}getPenaltyScore(){let p=0;for(let S=0;S<this.size;S++){let w=!1,L=0,F=[0,0,0,0,0,0,0];for(let U=0;U<this.size;U++)this.modules[S][U]==w?(L++,L==5?p+=Et.PENALTY_N1:L>5&&p++):(this.finderPenaltyAddHistory(L,F),w||(p+=this.finderPenaltyCountPatterns(F)*Et.PENALTY_N3),w=this.modules[S][U],L=1);p+=this.finderPenaltyTerminateAndCount(w,L,F)*Et.PENALTY_N3}for(let S=0;S<this.size;S++){let w=!1,L=0,F=[0,0,0,0,0,0,0];for(let U=0;U<this.size;U++)this.modules[U][S]==w?(L++,L==5?p+=Et.PENALTY_N1:L>5&&p++):(this.finderPenaltyAddHistory(L,F),w||(p+=this.finderPenaltyCountPatterns(F)*Et.PENALTY_N3),w=this.modules[U][S],L=1);p+=this.finderPenaltyTerminateAndCount(w,L,F)*Et.PENALTY_N3}for(let S=0;S<this.size-1;S++)for(let w=0;w<this.size-1;w++){const L=this.modules[S][w];L==this.modules[S][w+1]&&L==this.modules[S+1][w]&&L==this.modules[S+1][w+1]&&(p+=Et.PENALTY_N2)}let m=0;for(const S of this.modules)m=S.reduce((w,L)=>w+(L?1:0),m);const v=this.size*this.size,T=Math.ceil(Math.abs(m*20-v*10)/v)-1;return o(0<=T&&T<=9),p+=T*Et.PENALTY_N4,o(0<=p&&p<=2568888),p}getAlignmentPatternPositions(){if(this.version==1)return[];{const p=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(p*2-2))*2;let v=[6];for(let T=this.size-7;v.length<p;T-=m)v.splice(1,0,T);return v}}static getNumRawDataModules(p){if(p<Et.MIN_VERSION||p>Et.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*p+128)*p+64;if(p>=2){const v=Math.floor(p/7)+2;m-=(25*v-10)*v-55,p>=7&&(m-=36)}return o(208<=m&&m<=29648),m}static getNumDataCodewords(p,m){return Math.floor(Et.getNumRawDataModules(p)/8)-Et.ECC_CODEWORDS_PER_BLOCK[m.ordinal][p]*Et.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][p]}static reedSolomonComputeDivisor(p){if(p<1||p>255)throw new RangeError("Degree out of range");let m=[];for(let T=0;T<p-1;T++)m.push(0);m.push(1);let v=1;for(let T=0;T<p;T++){for(let S=0;S<m.length;S++)m[S]=Et.reedSolomonMultiply(m[S],v),S+1<m.length&&(m[S]^=m[S+1]);v=Et.reedSolomonMultiply(v,2)}return m}static reedSolomonComputeRemainder(p,m){let v=m.map(T=>0);for(const T of p){const S=T^v.shift();v.push(0),m.forEach((w,L)=>v[L]^=Et.reedSolomonMultiply(w,S))}return v}static reedSolomonMultiply(p,m){if(p>>>8||m>>>8)throw new RangeError("Byte out of range");let v=0;for(let T=7;T>=0;T--)v=v<<1^(v>>>7)*285,v^=(m>>>T&1)*p;return o(v>>>8==0),v}finderPenaltyCountPatterns(p){const m=p[1];o(m<=this.size*3);const v=m>0&&p[2]==m&&p[3]==m*3&&p[4]==m&&p[5]==m;return(v&&p[0]>=m*4&&p[6]>=m?1:0)+(v&&p[6]>=m*4&&p[0]>=m?1:0)}finderPenaltyTerminateAndCount(p,m,v){return p&&(this.finderPenaltyAddHistory(m,v),m=0),m+=this.size,this.finderPenaltyAddHistory(m,v),this.finderPenaltyCountPatterns(v)}finderPenaltyAddHistory(p,m){m[0]==0&&(p+=this.size),m.pop(),m.unshift(p)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],i.QrCode=e;function n(g,p,m){if(p<0||p>31||g>>>p)throw new RangeError("Value out of range");for(let v=p-1;v>=0;v--)m.push(g>>>v&1)}function s(g,p){return(g>>>p&1)!=0}function o(g){if(!g)throw new Error("Assertion error")}const u=class En{constructor(p,m,v){if(this.mode=p,this.numChars=m,this.bitData=v,m<0)throw new RangeError("Invalid argument");this.bitData=v.slice()}static makeBytes(p){let m=[];for(const v of p)n(v,8,m);return new En(En.Mode.BYTE,p.length,m)}static makeNumeric(p){if(!En.isNumeric(p))throw new RangeError("String contains non-numeric characters");let m=[];for(let v=0;v<p.length;){const T=Math.min(p.length-v,3);n(parseInt(p.substring(v,v+T),10),T*3+1,m),v+=T}return new En(En.Mode.NUMERIC,p.length,m)}static makeAlphanumeric(p){if(!En.isAlphanumeric(p))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],v;for(v=0;v+2<=p.length;v+=2){let T=En.ALPHANUMERIC_CHARSET.indexOf(p.charAt(v))*45;T+=En.ALPHANUMERIC_CHARSET.indexOf(p.charAt(v+1)),n(T,11,m)}return v<p.length&&n(En.ALPHANUMERIC_CHARSET.indexOf(p.charAt(v)),6,m),new En(En.Mode.ALPHANUMERIC,p.length,m)}static makeSegments(p){return p==""?[]:En.isNumeric(p)?[En.makeNumeric(p)]:En.isAlphanumeric(p)?[En.makeAlphanumeric(p)]:[En.makeBytes(En.toUtf8ByteArray(p))]}static makeEci(p){let m=[];if(p<0)throw new RangeError("ECI assignment value out of range");if(p<128)n(p,8,m);else if(p<16384)n(2,2,m),n(p,14,m);else if(p<1e6)n(6,3,m),n(p,21,m);else throw new RangeError("ECI assignment value out of range");return new En(En.Mode.ECI,0,m)}static isNumeric(p){return En.NUMERIC_REGEX.test(p)}static isAlphanumeric(p){return En.ALPHANUMERIC_REGEX.test(p)}getData(){return this.bitData.slice()}static getTotalBits(p,m){let v=0;for(const T of p){const S=T.mode.numCharCountBits(m);if(T.numChars>=1<<S)return 1/0;v+=4+S+T.bitData.length}return v}static toUtf8ByteArray(p){p=encodeURI(p);let m=[];for(let v=0;v<p.length;v++)p.charAt(v)!="%"?m.push(p.charCodeAt(v)):(m.push(parseInt(p.substring(v+1,v+3),16)),v+=2);return m}};u.NUMERIC_REGEX=/^[0-9]*$/,u.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,u.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let h=u;i.QrSegment=u})(Ha||(Ha={}));(i=>{(e=>{const n=class{constructor(o,u){this.ordinal=o,this.formatBits=u}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(i.QrCode||(i.QrCode={}))})(Ha||(Ha={}));(i=>{(e=>{const n=class{constructor(o,u){this.modeBits=o,this.numBitsCharCount=u}numCharCountBits(o){return this.numBitsCharCount[Math.floor((o+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(i.QrSegment||(i.QrSegment={}))})(Ha||(Ha={}));var Po=Ha;var hk={L:Po.QrCode.Ecc.LOW,M:Po.QrCode.Ecc.MEDIUM,Q:Po.QrCode.Ecc.QUARTILE,H:Po.QrCode.Ecc.HIGH},mS=128,pS="L",gS="#FFFFFF",yS="#000000",vS=!1,_S=1,fk=4,mk=0,pk=.1;function bS(i,e=0){const n=[];return i.forEach(function(s,o){let u=null;s.forEach(function(h,g){if(!h&&u!==null){n.push(`M${u+e} ${o+e}h${g-u}v1H${u+e}z`),u=null;return}if(g===s.length-1){if(!h)return;u===null?n.push(`M${g+e},${o+e} h1v1H${g+e}z`):n.push(`M${u+e},${o+e} h${g+1-u}v1H${u+e}z`);return}h&&u===null&&(u=g)})}),n.join("")}function ES(i,e){return i.slice().map((n,s)=>s<e.y||s>=e.y+e.h?n:n.map((o,u)=>u<e.x||u>=e.x+e.w?o:!1))}function gk(i,e,n,s){if(s==null)return null;const o=i.length+n*2,u=Math.floor(e*pk),h=o/e,g=(s.width||u)*h,p=(s.height||u)*h,m=s.x==null?i.length/2-g/2:s.x*h,v=s.y==null?i.length/2-p/2:s.y*h,T=s.opacity==null?1:s.opacity;let S=null;if(s.excavate){let L=Math.floor(m),F=Math.floor(v),U=Math.ceil(g+m-L),ge=Math.ceil(p+v-F);S={x:L,y:F,w:U,h:ge}}const w=s.crossOrigin;return{x:m,y:v,h:p,w:g,excavation:S,opacity:T,crossOrigin:w}}function yk(i,e){return e!=null?Math.max(Math.floor(e),0):i?fk:mk}function TS({value:i,level:e,minVersion:n,includeMargin:s,marginSize:o,imageSettings:u,size:h,boostLevel:g}){let p=pe.useMemo(()=>{const L=(Array.isArray(i)?i:[i]).reduce((F,U)=>(F.push(...Po.QrSegment.makeSegments(U)),F),[]);return Po.QrCode.encodeSegments(L,hk[e],n,void 0,void 0,g)},[i,e,n,g]);const{cells:m,margin:v,numCells:T,calculatedImageSettings:S}=pe.useMemo(()=>{let w=p.getModules();const L=yk(s,o),F=w.length+L*2,U=gk(w,h,L,u);return{cells:w,margin:L,numCells:F,calculatedImageSettings:U}},[p,h,u,s,o]);return{qrcode:p,margin:v,cells:m,numCells:T,calculatedImageSettings:S}}var vk=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),SS=pe.forwardRef(function(e,n){const s=e,{value:o,size:u=mS,level:h=pS,bgColor:g=gS,fgColor:p=yS,includeMargin:m=vS,minVersion:v=_S,boostLevel:T,marginSize:S,imageSettings:w}=s,F=mp(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:U}=F,ge=mp(F,["style"]),he=w?.src,re=pe.useRef(null),Ee=pe.useRef(null),He=pe.useCallback(Be=>{re.current=Be,typeof n=="function"?n(Be):n&&(n.current=Be)},[n]),[Me,k]=pe.useState(!1),{margin:C,cells:N,numCells:V,calculatedImageSettings:D}=TS({value:o,level:h,minVersion:v,boostLevel:T,includeMargin:m,marginSize:S,imageSettings:w,size:u});pe.useEffect(()=>{if(re.current!=null){const Be=re.current,rt=Be.getContext("2d");if(!rt)return;let Y=N;const ce=Ee.current,ve=D!=null&&ce!==null&&ce.complete&&ce.naturalHeight!==0&&ce.naturalWidth!==0;ve&&D.excavation!=null&&(Y=ES(N,D.excavation));const ye=window.devicePixelRatio||1;Be.height=Be.width=u*ye;const Le=u/V*ye;rt.scale(Le,Le),rt.fillStyle=g,rt.fillRect(0,0,V,V),rt.fillStyle=p,vk?rt.fill(new Path2D(bS(Y,C))):N.forEach(function(O,q){O.forEach(function(ee,se){ee&&rt.fillRect(se+C,q+C,1,1)})}),D&&(rt.globalAlpha=D.opacity),ve&&rt.drawImage(ce,D.x+C,D.y+C,D.w,D.h)}}),pe.useEffect(()=>{k(!1)},[he]);const P=fp({height:u,width:u},U);let x=null;return he!=null&&(x=pe.createElement("img",{src:he,key:he,style:{display:"none"},onLoad:()=>{k(!0)},ref:Ee,crossOrigin:D?.crossOrigin})),pe.createElement(pe.Fragment,null,pe.createElement("canvas",fp({style:P,height:u,width:u,ref:He,role:"img"},ge)),x)});SS.displayName="QRCodeCanvas";var _k=pe.forwardRef(function(e,n){const s=e,{value:o,size:u=mS,level:h=pS,bgColor:g=gS,fgColor:p=yS,includeMargin:m=vS,minVersion:v=_S,boostLevel:T,title:S,marginSize:w,imageSettings:L}=s,F=mp(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:U,cells:ge,numCells:he,calculatedImageSettings:re}=TS({value:o,level:h,minVersion:v,boostLevel:T,includeMargin:m,marginSize:w,imageSettings:L,size:u});let Ee=ge,He=null;L!=null&&re!=null&&(re.excavation!=null&&(Ee=ES(ge,re.excavation)),He=pe.createElement("image",{href:L.src,height:re.h,width:re.w,x:re.x+U,y:re.y+U,preserveAspectRatio:"none",opacity:re.opacity,crossOrigin:re.crossOrigin}));const Me=bS(Ee,U);return pe.createElement("svg",fp({height:u,width:u,viewBox:`0 0 ${he} ${he}`,ref:n,role:"img"},F),!!S&&pe.createElement("title",null,S),pe.createElement("path",{fill:g,d:`M0,0 h${he}v${he}H0z`,shapeRendering:"crispEdges"}),pe.createElement("path",{fill:p,d:Me,shapeRendering:"crispEdges"}),He)});_k.displayName="QRCodeSVG";const bk={width:"100%",maxWidth:460,backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},nu={fontSize:"0.8rem",display:"block"},ru={width:"100%",padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.9rem",marginTop:"0.15rem",boxSizing:"border-box"},Ek={padding:"0.35rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",color:"#111827",cursor:"pointer",fontSize:"0.9rem"};function vg({uid:i,role:e,onClose:n,displayName:s,email:o}){const{options:u}=yg(),[h,g]=B.useState(!0),[p,m]=B.useState(!1),[v,T]=B.useState(null),[S,w]=B.useState(""),[L,F]=B.useState(""),[U,ge]=B.useState(o),[he,re]=B.useState(null),[Ee,He]=B.useState([]),[Me,k]=B.useState(!1),[C,N]=B.useState(""),V=e==="teacher"||e==="student",[D,P]=B.useState(""),[x,Be]=B.useState(""),[rt,Y]=B.useState(o),[ce,ve]=B.useState({}),[ye,Le]=B.useState(!1),[O,q]=B.useState(""),[ee,se]=B.useState(!1),[we,Ae]=B.useState(null),[De,it]=B.useState(null);B.useEffect(()=>{let oe=!0;return(async()=>{try{g(!0);const Ne=mt(Re,"users",i),Oe=await oi(Ne),je=Oe.exists()?Oe.data():{};if(!oe)return;const Ie=String(je.phone??""),Ke=String(je.secondaryEmail??""),Kt=String(je?.email??o);w(Ie),F(Ke),ge(Kt),P(Ie),Be(Ke),Y(Kt),re(typeof je.term=="number"?je.term:null);const ot=Array.isArray(je.allowedTerms)?je.allowedTerms.filter(Tt=>typeof Tt=="number"):[];He(ot);try{const Tt=Oe.exists()?Oe.data():{};k(!!Tt?.isSuperAdmin)}catch{k(!1)}}catch{oe&&T("Kunne ikke laste profildata.")}finally{oe&&g(!1)}})(),()=>{oe=!1}},[i]);const me=B.useMemo(()=>Ee.map(oe=>ts(u,oe)),[Ee,u]),Ue=async()=>{T(null),m(!0);try{await Un(mt(Re,"users",i),{phone:S.trim()||null}),P(S),Ge.success("Mobilnummer er oppdatert.")}catch(oe){console.error(oe),T("Kunne ikke lagre mobilnummer."),Ge.error("Kunne ikke lagre mobilnummer.")}finally{m(!1)}},We=async()=>{T(null),m(!0);try{await Un(mt(Re,"users",i),{secondaryEmail:L.trim()||null}),Be(L),Ge.success("Sekundr epost er oppdatert.")}catch(oe){console.error(oe),T("Kunne ikke lagre sekundr epost."),Ge.error("Kunne ikke lagre sekundr epost.")}finally{m(!1)}},ht=async()=>{T(null);const oe=U.trim();if(!oe){T("Epost kan ikke vre tom."),Ge.error("Epost kan ikke vre tom.");return}if(oe===rt){Ge.info?.("Eposten er uendret.")||Ge("Eposten er uendret.");return}try{const Ne=Qs.currentUser;if(!Ne){T("Ingen innlogget bruker."),Ge.error("Ingen innlogget bruker.");return}await y_(Ne,oe),Y(oe),Ge.success(`Vi har sendt en bekreftelseslenke til ${oe}. Flg lenken for  fullfre endringen av epost.`)}catch(Ne){console.warn("updateEmail failed",Ne),Ne?.code==="auth/operation-not-allowed"?(T("Kan ikke oppdatere epost direkte. Du m bekrefte ny epost via lenken vi sender. Prv igjen."),Ge.error("Kan ikke oppdatere epost direkte. Bruk knappen igjen for  f tilsendt bekreftelseslenke.")):Ne?.code==="auth/requires-recent-login"?(it(oe),q(""),Ae(null),Le(!0),Ge.info?.("Av sikkerhetshensyn m du bekrefte med passord fr du kan endre epost.")||Ge("Av sikkerhetshensyn m du bekrefte med passord fr du kan endre epost.")):Ne?.code==="auth/email-already-in-use"?(T("Epostadressen er allerede i bruk av en annen bruker."),Ge.error("Epostadressen er allerede i bruk av en annen bruker.")):Ne?.code==="auth/invalid-email"?(T("Ugyldig epost."),Ge.error("Ugyldig epost.")):(T("Kunne ikke oppdatere epost. Prv igjen senere."),Ge.error("Kunne ikke oppdatere epost. Prv igjen senere."))}},le=()=>{Le(!1),q(""),Ae(null)},fe=async()=>{Ae(null);const oe=(De||U||"").trim();if(!oe){Ae("Ugyldig ny epost.");return}const Ne=Qs.currentUser;if(!Ne){Ae("Ingen innlogget bruker.");return}if(!O){Ae("Skriv inn passordet ditt.");return}try{se(!0);const Oe=Ga.credential(Ne.email||o,O);await $R(Ne,Oe),await y_(Ne,oe),Le(!1),q(""),it(null),Ge.success(`Vi har sendt en bekreftelseslenke til ${oe}. Flg lenken for  fullfre endringen av epost.`)}catch(Oe){console.error("Reauth/update email failed",Oe),Oe?.code==="auth/wrong-password"?Ae("Feil passord."):Oe?.code==="auth/too-many-requests"?Ae("For mange forsk. Prv igjen senere."):Oe?.code==="auth/invalid-email"?Ae("Ugyldig epost."):Oe?.code==="auth/email-already-in-use"?Ae("Epostadressen er allerede i bruk av en annen bruker."):Ae("Kunne ikke bekrefte innlogging eller oppdatere epost.")}finally{se(!1)}},Te=async()=>{if(T(null),!C||C.length<6){T("Passord m vre minst 6 tegn."),Ge.error("Passord m vre minst 6 tegn.");return}try{const oe=Qs.currentUser;if(!oe){T("Ingen innlogget bruker."),Ge.error("Ingen innlogget bruker.");return}await ZR(oe,C),Ge.success("Passordet er oppdatert."),N("")}catch(oe){console.warn("updatePassword failed",oe),oe?.code==="auth/requires-recent-login"?(T("Du m logge inn p nytt fr du kan endre passord."),Ge.error("Du m logge inn p nytt fr du kan endre passord.")):(T("Kunne ikke endre passord."),Ge.error("Kunne ikke endre passord."))}};return _.jsxs(_.Fragment,{children:[_.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:60},"aria-modal":!0,role:"dialog",children:_.jsxs("div",{style:bk,children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[_.jsx("h3",{style:{margin:0},children:s||o}),_.jsx("button",{type:"button",onClick:n,className:"button-small button-border button-colorless",children:"Lukk"})]}),h?_.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"1rem 0"},children:"Laster..."}):_.jsxs(_.Fragment,{children:[e==="student"&&_.jsxs("div",{style:{fontSize:"0.9rem",color:"#374151"},children:[_.jsx("div",{style:{fontWeight:600},children:"Din termin"}),_.jsx("div",{children:ts(u,he)})]}),e==="teacher"&&_.jsxs("div",{style:{fontSize:"0.9rem",color:"#374151"},children:[_.jsx("div",{style:{fontWeight:600},children:"Terminer du kan registrere oppmte p:"}),Ee.length===0?_.jsx("div",{children:"Ingen"}):_.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.4rem",marginTop:"0.25rem"},children:me.map((oe,Ne)=>_.jsx("span",{style:{display:"inline-block",padding:"0.15rem 0.5rem",border:"1px solid #e5e7eb",borderRadius:"999px",background:"#f9fafb",fontSize:"0.8rem"},children:oe},Ne))})]}),e==="admin"&&_.jsx("div",{style:{fontSize:"0.9rem",color:"#374151"},children:Me?_.jsx("div",{style:{fontWeight:600},children:"Super administrator"}):_.jsxs(_.Fragment,{children:[_.jsx("div",{style:{fontWeight:600},children:"Moduler du administrerer:"}),Ee.length===0?_.jsx("div",{children:"Ingen"}):_.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.4rem",marginTop:"0.25rem"},children:me.map((oe,Ne)=>_.jsx("span",{style:{display:"inline-block",padding:"0.15rem 0.5rem",border:"1px solid #e5e7eb",borderRadius:"999px",background:"#f9fafb",fontSize:"0.8rem"},children:oe},Ne))})]})}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginTop:"1rem"},children:[_.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-end"},children:[_.jsx("div",{style:{flex:1,minWidth:0},children:_.jsxs("label",{style:nu,children:["Mobilnummer",_.jsx("input",{type:"tel",value:S,onChange:oe=>w(oe.target.value),placeholder:"Eks: 99999999",style:ru})]})}),_.jsx("button",{type:"button",disabled:p||S===D,onMouseEnter:()=>ve(oe=>({...oe,phone:!0})),onMouseLeave:()=>ve(oe=>({...oe,phone:!1})),onClick:Ue,className:"button-black button-small",children:"Lagre"})]}),_.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-end"},children:[_.jsx("div",{style:{flex:1,minWidth:0},children:_.jsxs("label",{style:nu,children:["Epost",_.jsx("input",{type:"email",value:U,onChange:oe=>ge(oe.target.value),placeholder:"din@epost.no",style:ru})]})}),_.jsx("button",{type:"button",disabled:p||U.trim()===rt.trim(),onMouseEnter:()=>ve(oe=>({...oe,primaryEmail:!0})),onMouseLeave:()=>ve(oe=>({...oe,primaryEmail:!1})),onClick:ht,className:"button-black button-small",children:"Lagre"})]}),V&&_.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-end"},children:[_.jsx("div",{style:{flex:1,minWidth:0},children:_.jsxs("label",{style:nu,children:["Sekundr epost",_.jsx("input",{type:"email",value:L,onChange:oe=>F(oe.target.value),placeholder:"eksempel@uio.no",style:ru})]})}),_.jsx("button",{type:"button",disabled:p||L===x,onMouseEnter:()=>ve(oe=>({...oe,secondaryEmail:!0})),onMouseLeave:()=>ve(oe=>({...oe,secondaryEmail:!1})),onClick:We,className:"button-black button-small",children:"Lagre"})]}),_.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-end"},children:[_.jsx("div",{style:{flex:1,minWidth:0},children:_.jsxs("label",{style:nu,children:["Nytt passord",_.jsx("input",{type:"password",value:C,onChange:oe=>N(oe.target.value),placeholder:"Minst 6 tegn",style:ru})]})}),_.jsx("button",{type:"button",disabled:p||C.length===0,onMouseEnter:()=>ve(oe=>({...oe,password:!0})),onMouseLeave:()=>ve(oe=>({...oe,password:!1})),onClick:Te,className:"button-black button-small",children:"Lagre"})]})]})]})]})}),ye&&_.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:70},children:_.jsxs("div",{className:"page-card",style:{maxWidth:520,width:"100%",background:"#ffffff"},children:[_.jsx("h3",{style:{marginTop:0},children:"Logg inn p nytt"}),_.jsxs("p",{style:{whiteSpace:"pre-wrap",lineHeight:1.4},children:["Av sikkerhetshensyn m du bekrefte kontoen fr du kan endre epost.",`
`,"Skriv inn passordet for ",o,"."]}),_.jsxs("label",{style:nu,children:["Passord",_.jsx("input",{type:"password",value:O,onChange:oe=>q(oe.target.value),placeholder:"Passord",style:ru,autoFocus:!0})]}),we&&_.jsx("p",{style:{color:"#b91c1c",fontSize:"0.85rem",marginTop:"0.5rem"},children:we}),_.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",marginTop:"0.75rem"},children:[_.jsx("button",{type:"button",onClick:le,style:Ek,children:"Avbryt"}),_.jsx("button",{type:"button",onClick:fe,style:{background:"#6CE1AB",color:"black",cursor:"pointer"},disabled:ee,children:ee?"Bekrefter...":"Bekreft og send lenke"})]})]})})]})}const Tk=[{value:1,label:"Modul 1 - Blokk 1"},{value:2,label:"Modul 1 - Blokk 2"},{value:3,label:"Modul 1 - Blokk 3"},{value:4,label:"Modul 2 - Termin 1"},{value:5,label:"Modul 2 - Termin 2"},{value:6,label:"Modul 2 - Propen"},{value:7,label:"Modul 3 - Termin 1"},{value:8,label:"Modul 3 - Termin 2"},{value:9,label:"Modul 4"},{value:10,label:"Modul 5"},{value:11,label:"Modul 6"},{value:12,label:"Modul 7"},{value:13,label:"Modul 8 - Termin 1"},{value:14,label:"Modul 8 - Termin 2"},{value:999,label:"Test"}];function Sk(i){if(!i)return"Ukjent termin";const e=Tk.find(n=>n.value===i);return e?e.label:`Termin ${i}`}function wk({user:i}){const[e,n]=B.useState([]),[s,o]=B.useState(null),[u,h]=B.useState(null),[g,p]=B.useState(""),[m,v]=B.useState(null),[T,S]=B.useState([]),[w,L]=B.useState(!0),[F,U]=B.useState(!1),[ge,he]=B.useState([]),[re,Ee]=B.useState(!0),[He,Me]=B.useState(""),[k,C]=B.useState(!1),[N,V]=B.useState({open:!1,attendee:null}),[D,P]=B.useState(120),[x,Be]=B.useState([]),[rt,Y]=B.useState(!1),ce=B.useRef(null),ve=B.useRef(null),{options:ye}=yg();rl();const[Le,O]=B.useState(!1);B.useEffect(()=>{(async()=>{L(!0);const Te=(await sn(Ft(Re,"times"))).docs.map(oe=>{const Ne=oe.data();return{id:oe.id,name:Ne.name,category:Ne.category,term:Ne.term}});n(Te),L(!1)})()},[]),B.useEffect(()=>{(async()=>{try{const fe=mt(Re,"users",i.uid),Te=await oi(fe),oe=Te.exists()?Te.data():null,Ne=Array.isArray(oe?.allowedTerms)?oe.allowedTerms.map(Oe=>typeof Oe=="number"?Oe:parseInt(Oe,10)).filter(Oe=>!Number.isNaN(Oe)):[];h(Ne)}catch(fe){console.warn("Kunne ikke hente allowedTerms for lrer:",fe),h([])}})()},[i.uid]),B.useMemo(()=>{if(u===null)return ye;const le=new Set(u??[]);return ye.filter(fe=>le.has(fe.value))},[u,ye]),B.useEffect(()=>{(async()=>{if(!(u===null||!s)){Ee(!0);try{const fe=Ft(Re,"users"),Te=Fn(fe,fn("role","==","student"),fn("term","==",s)),Ne=(await sn(Te)).docs.map(Oe=>{const je=Oe.data(),Ie=je?.name&&String(je.name)||je?.displayName&&String(je.displayName)||null;return{id:Oe.id,name:Ie,email:String(je?.email??""),phone:je?.phone?String(je.phone):null,term:typeof je?.term=="number"?je.term:null}});Ne.sort((Oe,je)=>{const Ie=(Oe.name??"").toLocaleLowerCase(),Ke=(je.name??"").toLocaleLowerCase();return Ie!==Ke?Ie.localeCompare(Ke,"nb-NO"):Oe.email.localeCompare(je.email,"nb-NO")}),he(Ne)}catch(fe){console.error("Feil ved lasting av studenter:",fe),he([])}finally{Ee(!1)}}})()},[u,s]),B.useEffect(()=>{q()},[i.uid]);const q=async()=>{try{Y(!0);const le=Date.now()-14400*1e3,fe=Ht.fromMillis(le),Te=Ft(Re,"sessions");let oe=[];try{const je=Fn(Te,fn("teacherId","==",i.uid),fn("createdAt",">=",fe),Ab("createdAt","desc"),Rb(50));oe=(await sn(je)).docs}catch{const Ie=Fn(Te,fn("teacherId","==",i.uid));oe=(await sn(Ie)).docs.filter(Kt=>{const ot=Kt.data()?.createdAt;return ot&&ot.toMillis()>=le}).sort((Kt,ot)=>{const Tt=Kt.data()?.createdAt?.toMillis?.()??0;return(ot.data()?.createdAt?.toMillis?.()??0)-Tt}).slice(0,50)}const Ne=new Set,Oe=[];for(const je of oe){const Ie=je.data(),Ke=String(Ie?.timeId??"");if(!(!Ke||Ne.has(Ke))&&(Ne.add(Ke),Oe.push({timeId:Ke,name:String(Ie?.name??"Ukjent time"),category:String(Ie?.category??""),term:typeof Ie?.term=="number"?Ie.term:Number(Ie?.term)||0,lastAt:Ie?.createdAt}),Oe.length>=10))break}Be(Oe)}catch(le){console.warn("Kunne ikke hente nylige timer:",le),Be([])}finally{Y(!1)}};B.useEffect(()=>{if(!m){S([]);return}const le=Ft(Re,"sessions",m.id,"attendance"),fe=dp(le,Te=>{const oe=Te.docs.map(Ne=>{const Oe=Ne.data();return{id:Ne.id,studentName:Oe.studentName??null,studentEmail:Oe.studentEmail??null,createdAt:Oe.createdAt}}).sort((Ne,Oe)=>{const je=Ne.createdAt?.toMillis?.()??0,Ie=Oe.createdAt?.toMillis?.()??0;return je-Ie});S(oe)});return()=>fe()},[m?.id]);const ee=B.useMemo(()=>e.filter(le=>le.term===s),[e,s]),se=B.useMemo(()=>{const le=g.trim().toLowerCase();return le?ee.filter(fe=>fe.name.toLowerCase().includes(le)).sort((fe,Te)=>fe.name.localeCompare(Te.name,"nb-NO",{sensitivity:"base"})):[]},[ee,g]);B.useMemo(()=>{const le=He.trim().toLowerCase();if(!le||!m)return[];const fe=le.includes("@");return ge.filter(Te=>{if(Te.term!==m.term)return!1;const oe=String(Te.name??"").toLowerCase(),Ne=String(Te.email??"").toLowerCase(),Oe=fe?Ne:Ne.split("@")[0]??Ne,je=String(Te.phone??"").toLowerCase();return oe.includes(le)||Oe.includes(le)||je.includes(le)}).slice(0,10)},[ge,He,m]);const we=async le=>{const fe=e.find(Ke=>Ke.id===le);if(!fe)return;if(m){const Ke=mt(Re,"sessions",m.id);await Un(Ke,{isOpen:!1}),v(null)}const Te=Math.floor(1e5+Math.random()*9e5),oe=String(Te),Ne=Ft(Re,"sessions"),Oe=Ht.now(),Ie={id:(await Cd(Ne,{timeId:fe.id,name:fe.name,category:fe.category,term:fe.term,code:oe,teacherId:i.uid,teacherName:i.displayName,teacherEmail:i.email,createdAt:Oe,isOpen:!0,openedAt:Oe})).id,timeId:fe.id,name:fe.name,category:fe.category,term:fe.term,code:oe,teacherId:i.uid,createdAt:Oe,isOpen:!0,openedAt:Oe};v(Ie),q()},Ae=async le=>{p(le.name),U(!1),await we(le.id),ve.current&&ve.current.blur()},De=async le=>{o(le.term),p(le.name),U(!1);let fe;try{const Te=Fn(Ft(Re,"sessions"),fn("teacherId","==",i.uid),fn("timeId","==",le.timeId),Ab("createdAt","desc"),Rb(1));fe=(await sn(Te)).docs[0]}catch{try{const oe=Fn(Ft(Re,"sessions"),fn("teacherId","==",i.uid));fe=(await sn(oe)).docs.filter(je=>String(je.data()?.timeId??"")===String(le.timeId)).sort((je,Ie)=>{const Ke=je.data()?.createdAt?.toMillis?.()??0;return(Ie.data()?.createdAt?.toMillis?.()??0)-Ke})[0]}catch{}}if(fe){const Te=fe.data();if(m&&m.id!==fe.id){try{await Un(mt(Re,"sessions",m.id),{isOpen:!1})}catch{}v(null)}const oe=Ht.now();try{await Un(mt(Re,"sessions",fe.id),{isOpen:!0,openedAt:oe})}catch{}const Ne={id:fe.id,timeId:String(Te.timeId??le.timeId),name:String(Te.name??le.name),category:String(Te.category??""),term:typeof Te.term=="number"?Te.term:Number(Te.term)||le.term,code:String(Te.code??""),teacherId:String(Te.teacherId??i.uid),createdAt:Te.createdAt??Ht.now(),isOpen:!0,openedAt:oe};v(Ne),P(120);return}await we(le.timeId)},it=async()=>{if(!m)return;const le=mt(Re,"sessions",m.id);if(!m.isOpen){const Te=Ht.now();await Un(le,{isOpen:!0,openedAt:Te}),v({...m,isOpen:!0,openedAt:Te}),P(120)}else await Un(le,{isOpen:!1}),v({...m,isOpen:!1})};B.useEffect(()=>{if(!m)return;const le=mt(Re,"sessions",m.id),fe=dp(le,Te=>{if(!Te.exists())return;const oe=Te.data();v(Ne=>Ne&&Ne.id===Te.id?{...Ne,isOpen:oe?.isOpen??Ne.isOpen,openedAt:oe?.openedAt??Ne.openedAt}:Ne)});return()=>fe()},[m?.id]),B.useEffect(()=>{if(!m||!m.isOpen||!m.openedAt){P(0);return}const le=m.openedAt.toMillis(),fe=async()=>{const oe=Date.now(),Ne=Math.floor((oe-le)/1e3),Oe=Math.max(0,60-Ne);if(P(Oe),Oe===0&&m.isOpen)try{await Un(mt(Re,"sessions",m.id),{isOpen:!1}),v({...m,isOpen:!1})}catch{}};fe();const Te=setInterval(fe,1e3);return()=>clearInterval(Te)},[m?.id,m?.isOpen,m?.openedAt]);const me=le=>{const fe=Math.floor(le/60).toString().padStart(2,"0"),Te=Math.floor(le%60).toString().padStart(2,"0");return`${fe}:${Te}`},Ue=le=>{V({open:!0,attendee:le})},We=()=>{V({open:!1,attendee:null})},ht=async()=>{if(!m||!N.attendee)return;const le=N.attendee;try{await lS(mt(Re,"sessions",m.id,"attendance",le.id)),Ge.success("Student fjernet fra kten.")}catch(fe){console.error(fe),Ge.error("Kunne ikke fjerne studenten.")}finally{We()}};return _.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"card teacher-card full-border round-corners-whole100",children:[_.jsx("h1",{className:"boldFont",children:"Finn timen din"}),_.jsxs("section",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",alignItems:"center"},children:[_.jsx("div",{style:{marginBottom:"1.25rem",width:"100%",maxWidth:520},children:(()=>{const le=u!==null?new Set(u??[]):null,fe=le?ye.filter(Te=>le.has(Te.value)):ye;return fe.length===0?_.jsx("div",{style:{width:"100%",padding:"0.6rem 0",fontSize:"16px",border:"1px solid #e5e7eb",borderRadius:"0.5rem",background:"#f9fafb",color:"#6b7280",textAlign:"center"},children:"Ingen terminer tilgjengelig"}):_.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",justifyContent:"center"},children:fe.map(Te=>_.jsx("button",{type:"button",onClick:()=>{const oe=Te.value;o(oe),p(""),U(!1),v(null),S([]),setTimeout(()=>{ve.current?.focus()},0)},className:`button button-small button-colorless round-corners-whole25 thin-border ${s===Te.value?"button-yellow boldFont":"button-opacity"}`,ref:oe=>{oe&&Te===fe[0]&&s===null&&oe.click()},children:Te.label},Te.value))})})()}),_.jsxs("div",{style:{position:"relative",marginBottom:"0.75rem",width:"100%",maxWidth:520},children:[_.jsx("input",{ref:ve,value:g,onChange:le=>{p(le.target.value),U(!0)},onFocus:()=>{s&&g.trim().length>0&&U(!0)},placeholder:s?"Skriv navnet p timen":"Velg modul frst",disabled:!s,className:"input-100 field-height-100 thin-border"}),F&&se.length>0&&_.jsx("ul",{style:{position:"absolute",top:"100%",left:0,right:0,zIndex:10,background:"white",border:"1px solid #e5e7eb",borderRadius:"0.5rem",marginTop:"0.2rem",listStyle:"none",padding:0,maxHeight:"220px",overflowY:"auto",boxShadow:"0 10px 20px rgba(0,0,0,0.08)"},children:se.map(le=>_.jsxs("li",{onClick:()=>Ae(le),style:{padding:"0.4rem 0.6rem",cursor:"pointer",borderBottom:"1px solid #f3f4f6"},onMouseDown:fe=>fe.preventDefault(),children:[_.jsx("div",{children:le.name}),_.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:le.category})]},le.id))})]})]}),_.jsxs("section",{ref:ce,style:{marginTop:"2rem",padding:"1rem",position:"relative"},children:[_.jsxs("div",{style:{filter:m?"none":"blur(6px)",pointerEvents:m?void 0:"none"},children:[_.jsxs("div",{style:{marginTop:"1rem",position:"relative"},children:[_.jsxs("div",{style:{filter:m?.isOpen===!1?"blur(6px)":"none",pointerEvents:"none",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},children:[_.jsx(SS,{value:m?.code??"",size:140}),_.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",letterSpacing:"0.3em"},children:m?.code??""})]}),m?.isOpen===!1&&_.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center"},children:_.jsx("div",{style:{background:"rgba(255,255,255,0.85)",padding:"0.5rem 0.75rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb",fontWeight:600,color:"#6b7280"},children:"kten er lukket"})})]}),_.jsxs("div",{style:{marginTop:"1.2rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[_.jsx("div",{style:{fontWeight:600,color:"#111827"},children:me(D)}),_.jsx("button",{onClick:it,className:"button-black button-small",children:m?m.isOpen===!1?"pne kta":"Lukk kt":"pne kta"})]}),_.jsx("hr",{style:{margin:"2rem 0",borderWidth:"1.25px",borderStyle:"solid",borderColor:"var(--color-black)"}}),_.jsxs("h4",{children:[T.length," ",T.length===1?"registert student":"registrerte studenter"]}),T.length===0?_.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"Ingen har registrert seg enn."}):_.jsx("table",{style:{width:"100%",borderCollapse:"collapse"},className:"table-container",children:_.jsx("tbody",{children:T.map(le=>_.jsx("tr",{children:_.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6",textAlign:"left"},onClick:()=>Ue(le),children:le.studentName||"-"})},le.id))})})]}),m?null:_.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center"},children:_.jsx("div",{style:{background:"rgba(255,255,255,0.85)",padding:"0.5rem 0.75rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb",fontWeight:600,color:"#6b7280",textAlign:"center"},children:"Velg time for  pne QR kode"})})]})]}),x.length>0&&_.jsx("div",{className:"card round-corners-whole100 teacher-recent-sessions",children:_.jsxs("div",{children:[_.jsx("h2",{children:"Nylige timer"}),_.jsx("p",{className:"thinFont opaqueFont",children:"Her finner du de andre gruppetimene du har hatt siste 4 timene"}),_.jsx("table",{className:"table-container",children:_.jsx("tbody",{children:x.map(le=>_.jsxs("tr",{children:[_.jsxs("td",{children:[_.jsxs("p",{children:[" ",le.name]}),_.jsx("p",{className:"thinFont opaqueFont",children:Sk(le.term)})]}),_.jsx("td",{children:_.jsx("button",{className:"button button-small button-white round-corners-whole10",type:"button",onClick:()=>void De(le),children:"pne"})})]},le.timeId))})})]})}),_.jsx("br",{}),_.jsx("div",{className:"page-card page-card--session",style:{display:m?void 0:"none"}}),N.open&&N.attendee&&_.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1e3},children:_.jsxs("div",{className:"page-card",style:{maxWidth:520,width:"100%",background:"#ffffff",textAlign:"center"},children:[_.jsx("h3",{style:{marginTop:0},children:"Fjerne student?"}),_.jsx("p",{style:{whiteSpace:"pre-wrap",lineHeight:1.4},children:(()=>{const le=N.attendee;return`Du er i ferd med  fjerne ${le.studentName||le.studentEmail||"denne studenten"} fra denne kten.`})()}),_.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",marginTop:"0.75rem"},children:[_.jsx("button",{className:"button",type:"button",onClick:We,style:{background:"#ef4444",color:"#ffffff"},children:"Avbryt"}),_.jsx("button",{type:"button",onClick:()=>void ht(),style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#ffffff",cursor:"pointer"},children:"Fjern student"})]})]})}),Le&&_.jsx(vg,{uid:i.uid,role:i.role,email:i.email,displayName:i.displayName,onClose:()=>O(!1)})]})}const Ak="type.googleapis.com/google.protobuf.Int64Value",Rk="type.googleapis.com/google.protobuf.UInt64Value";function wS(i,e){const n={};for(const s in i)i.hasOwnProperty(s)&&(n[s]=e(i[s]));return n}function Xd(i){if(i==null)return null;if(i instanceof Number&&(i=i.valueOf()),typeof i=="number"&&isFinite(i)||i===!0||i===!1||Object.prototype.toString.call(i)==="[object String]")return i;if(i instanceof Date)return i.toISOString();if(Array.isArray(i))return i.map(e=>Xd(e));if(typeof i=="function"||typeof i=="object")return wS(i,e=>Xd(e));throw new Error("Data cannot be encoded in JSON: "+i)}function $o(i){if(i==null)return i;if(i["@type"])switch(i["@type"]){case Ak:case Rk:{const e=Number(i.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+i);return e}default:throw new Error("Data cannot be decoded from JSON: "+i)}return Array.isArray(i)?i.map(e=>$o(e)):typeof i=="function"||typeof i=="object"?wS(i,e=>$o(e)):i}const _g="functions";const Mb={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Cr extends Mi{constructor(e,n,s){super(`${_g}/${e}`,n||""),this.details=s,Object.setPrototypeOf(this,Cr.prototype)}}function Ck(i){if(i>=200&&i<300)return"ok";switch(i){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function $d(i,e){let n=Ck(i),s=n,o;try{const u=e&&e.error;if(u){const h=u.status;if(typeof h=="string"){if(!Mb[h])return new Cr("internal","internal");n=Mb[h],s=h}const g=u.message;typeof g=="string"&&(s=g),o=u.details,o!==void 0&&(o=$o(o))}}catch{}return n==="ok"?null:new Cr(n,s,o)}class Ik{constructor(e,n,s,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,jr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=s.getImmediate({optional:!0}),this.auth||n.get().then(u=>this.auth=u,()=>{}),this.messaging||s.get().then(u=>this.messaging=u,()=>{}),this.appCheck||o?.get().then(u=>this.appCheck=u,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),s=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:n,messagingToken:s,appCheckToken:o}}}const pp="us-central1",xk=/^data: (.*?)(?:\n|$)/;function Nk(i){let e=null;return{promise:new Promise((n,s)=>{e=setTimeout(()=>{s(new Cr("deadline-exceeded","deadline-exceeded"))},i)}),cancel:()=>{e&&clearTimeout(e)}}}class kk{constructor(e,n,s,o,u=pp,h=(...g)=>fetch(...g)){this.app=e,this.fetchImpl=h,this.emulatorOrigin=null,this.contextProvider=new Ik(e,n,s,o),this.cancelAllRequests=new Promise(g=>{this.deleteService=()=>Promise.resolve(g())});try{const g=new URL(u);this.customDomain=g.origin+(g.pathname==="/"?"":g.pathname),this.region=pp}catch{this.customDomain=null,this.region=u}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function Dk(i,e,n){const s=aa(e);i.emulatorOrigin=`http${s?"s":""}://${e}:${n}`,s&&(vp(i.emulatorOrigin+"/backends"),_p("Functions",!0))}function Mk(i,e,n){const s=o=>Vk(i,e,o,{});return s.stream=(o,u)=>jk(i,e,o,u),s}function AS(i){return i.emulatorOrigin&&aa(i.emulatorOrigin)?"include":void 0}async function Ok(i,e,n,s,o){n["Content-Type"]="application/json";let u;try{u=await s(i,{method:"POST",body:JSON.stringify(e),headers:n,credentials:AS(o)})}catch{return{status:0,json:null}}let h=null;try{h=await u.json()}catch{}return{status:u.status,json:h}}async function RS(i,e){const n={},s=await i.contextProvider.getContext(e.limitedUseAppCheckTokens);return s.authToken&&(n.Authorization="Bearer "+s.authToken),s.messagingToken&&(n["Firebase-Instance-ID-Token"]=s.messagingToken),s.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=s.appCheckToken),n}function Vk(i,e,n,s){const o=i._url(e);return Lk(i,o,n,s)}async function Lk(i,e,n,s){n=Xd(n);const o={data:n},u=await RS(i,s),h=s.timeout||7e4,g=Nk(h),p=await Promise.race([Ok(e,o,u,i.fetchImpl,i),g.promise,i.cancelAllRequests]);if(g.cancel(),!p)throw new Cr("cancelled","Firebase Functions instance was deleted.");const m=$d(p.status,p.json);if(m)throw m;if(!p.json)throw new Cr("internal","Response is not valid JSON object.");let v=p.json.data;if(typeof v>"u"&&(v=p.json.result),typeof v>"u")throw new Cr("internal","Response is missing data field.");return{data:$o(v)}}function jk(i,e,n,s){const o=i._url(e);return Pk(i,o,n,s||{})}async function Pk(i,e,n,s){n=Xd(n);const o={data:n},u=await RS(i,s);u["Content-Type"]="application/json",u.Accept="text/event-stream";let h;try{h=await i.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:u,signal:s?.signal,credentials:AS(i)})}catch(S){if(S instanceof Error&&S.name==="AbortError"){const L=new Cr("cancelled","Request was cancelled.");return{data:Promise.reject(L),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(L)}}}}}}const w=$d(0,null);return{data:Promise.reject(w),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(w)}}}}}}let g,p;const m=new Promise((S,w)=>{g=S,p=w});s?.signal?.addEventListener("abort",()=>{const S=new Cr("cancelled","Request was cancelled.");p(S)});const v=h.body.getReader(),T=Uk(v,g,p,s?.signal);return{stream:{[Symbol.asyncIterator](){const S=T.getReader();return{async next(){const{value:w,done:L}=await S.read();return{value:w,done:L}},async return(){return await S.cancel(),{done:!0,value:void 0}}}}},data:m}}function Uk(i,e,n,s){const o=(h,g)=>{const p=h.match(xk);if(!p)return;const m=p[1];try{const v=JSON.parse(m);if("result"in v){e($o(v.result));return}if("message"in v){g.enqueue($o(v.message));return}if("error"in v){const T=$d(0,v);g.error(T),n(T);return}}catch(v){if(v instanceof Cr){g.error(v),n(v);return}}},u=new TextDecoder;return new ReadableStream({start(h){let g="";return p();async function p(){if(s?.aborted){const m=new Cr("cancelled","Request was cancelled");return h.error(m),n(m),Promise.resolve()}try{const{value:m,done:v}=await i.read();if(v){g.trim()&&o(g.trim(),h),h.close();return}if(s?.aborted){const S=new Cr("cancelled","Request was cancelled");h.error(S),n(S),await i.cancel();return}g+=u.decode(m,{stream:!0});const T=g.split(`
`);g=T.pop()||"";for(const S of T)S.trim()&&o(S.trim(),h);return p()}catch(m){const v=m instanceof Cr?m:$d(0,null);h.error(v),n(v)}}},cancel(){return i.cancel()}})}const Ob="@firebase/functions",Vb="0.13.1";const zk="auth-internal",Bk="app-check-internal",qk="messaging-internal";function Fk(i){const e=(n,{instanceIdentifier:s})=>{const o=n.getProvider("app").getImmediate(),u=n.getProvider(zk),h=n.getProvider(qk),g=n.getProvider(Bk);return new kk(o,u,h,g,s)};Ua(new Zs(_g,e,"PUBLIC").setMultipleInstances(!0)),wi(Ob,Vb,i),wi(Ob,Vb,"esm2020")}function jm(i=eh(),e=pp){const s=Zd(an(i),_g).getImmediate({identifier:e}),o=Fb("functions");return o&&Hk(s,...o),s}function Hk(i,e,n){Dk(an(i),e,n)}function Pm(i,e,n){return Mk(an(i),e)}Fk();function Lb(i){const e=i.match(/^\s*(\d+)/);return e?parseInt(e[1],10):Number.POSITIVE_INFINITY}function Um(){const i="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789!@#$";let e="";for(let n=0;n<12;n++)e+=i[Math.floor(Math.random()*i.length)];return e}const Gk=()=>{const{user:i}=rl(),[e,n]=B.useState([]),[s,o]=B.useState(!0),[u,h]=B.useState(""),[g,p]=B.useState("students"),[m,v]=B.useState("all"),[T,S]=B.useState("all"),[w,L]=B.useState("all"),[F,U]=B.useState([]),ge=B.useMemo(()=>F.slice().sort((I,ie)=>(I.order??I.value)-(ie.order??ie.value)).map(I=>({value:I.value,label:I.label||`Termin ${I.value}`})),[F]),[he,re]=B.useState(null),[Ee,He]=B.useState(null);B.useEffect(()=>{(async()=>{try{if(!i?.uid)return;const ie=mt(Re,"users",i.uid),_e=await oi(ie),Fe=_e.exists()?_e.data():null,zt=(Array.isArray(Fe?.allowedTerms)?Fe.allowedTerms:[]).map(vt=>typeof vt=="number"?vt:parseInt(String(vt),10)).filter(vt=>!Number.isNaN(vt));re(zt),He(!!Fe?.isSuperAdmin)}catch(ie){console.warn("Kunne ikke hente allowedTerms for innlogget admin:",ie),re([]),He(!1)}})()},[i?.uid]);const Me=B.useMemo(()=>{if(Ee===!0||he===null)return ge;const I=new Set(he);return ge.filter(ie=>I.has(ie.value))},[ge,he,Ee]),k=B.useMemo(()=>{if(Ee)return null;const I=he;return Array.isArray(I)&&I.length===1?Number(I[0]):null},[Ee,he]);B.useEffect(()=>{k!=null&&(m==="all"&&v(k),T==="all"&&S(k))},[k]),B.useEffect(()=>{(async()=>{try{const _e=(await sn(Ft(Re,"terms"))).docs.map(Fe=>{const st=Fe.data(),zt=typeof st?.value=="number"?st.value:void 0;if(typeof zt!="number")return null;const vt=typeof st?.label=="string"?st.label:"",gt=typeof st?.order=="number"?st.order:void 0;return{value:zt,label:vt,order:gt}}).filter(Boolean);_e.sort((Fe,st)=>(Fe.order??Fe.value)-(st.order??st.value)),U(_e)}catch(ie){console.warn("Kunne ikke laste terminer fra Firestore for admin-brukerpanel:",ie)}})()},[]);const[C,N]=B.useState(null),[V,D]=B.useState(null),[P,x]=B.useState(""),[Be,rt]=B.useState(""),[Y,ce]=B.useState(""),[ve,ye]=B.useState("teacher"),[Le,O]=B.useState([]),[q,ee]=B.useState(null),[se,we]=B.useState(null),[Ae,De]=B.useState(""),[it,me]=B.useState(""),[Ue,We]=B.useState(""),[ht,le]=B.useState("student"),[fe,Te]=B.useState(null),[oe,Ne]=B.useState(null),[Oe,je]=B.useState({}),Ie=(I,ie)=>{if(I&&ie!=null)return Oe[I]?.[ie]},Ke=async(I,ie)=>{if(!(!I||ie==null)&&Oe[I]?.[ie]===void 0)try{const _e=mt(Re,"users",I,"books",String(ie)),Fe=await oi(_e),st=Fe.exists()?{approved:!!Fe.data().approved,approvedAt:Fe.data().approvedAt??null}:{approved:!1,approvedAt:null};je(zt=>({...zt,[I]:{...zt[I]??{},[ie]:st}}))}catch(_e){console.error("Kunne ikke laste godkjenning for bok:",_e)}},Kt=({uid:I,term:ie})=>{const _e=Ie(I,ie);if(B.useEffect(()=>{_e===void 0&&Ke(I,ie)},[I,ie,_e]),!_e)return _.jsx("span",{style:{color:"#9ca3af"},children:""});if(_e.approved){const Fe=_e.approvedAt,st=Fe?new Date(Fe.toDate()).toLocaleString("nb-NO"):void 0;return _.jsx("span",{title:st,style:{color:"#16a34a",fontSize:"1rem"},children:""})}return _.jsx("span",{style:{color:"#9ca3af"},children:""})},[ot,Tt]=B.useState(null),[kn,Vt]=B.useState(null),[yn,Qe]=B.useState(""),[pt,Sn]=B.useState(""),[Gn,Dn]=B.useState(""),[Wt,Pt]=B.useState("admin"),[Ut,xt]=B.useState([]);B.useEffect(()=>{(async()=>{try{o(!0);const _e=(await sn(Ft(Re,"users"))).docs.map(Fe=>{const st=Fe.data();return{docId:Fe.id,email:st.email??"",displayName:st.name??st.displayName??st.email??"(uten navn)",role:st.role??"student",term:st.term??null,phone:st.phone??null,allowedTerms:st.allowedTerms??[]}});n(_e)}catch(ie){console.error("Feil ved lasting av brukere:",ie),n([])}finally{o(!1)}})()},[]);const Ir=B.useMemo(()=>{const I=u.trim().toLowerCase();if(!I)return e;const ie=I.includes("@");return e.filter(_e=>{const Fe=String(_e.displayName??"").toLowerCase(),st=String(_e.email??"").toLowerCase(),zt=ie?st:st.split("@")[0]??st,vt=String(_e.phone??"").toLowerCase();return`${Fe} ${zt} ${vt}`.includes(I)})},[e,u]);let wn=Ir.filter(I=>I.role==="teacher"),An=Ir.filter(I=>I.role==="student"),on=Ir.filter(I=>I.role==="admin");const ir=(()=>{if(Ee)return{teachers:wn,students:An,admins:on};const I=he;if(!(Array.isArray(I)&&I.length>0))return{teachers:wn,students:An,admins:on};const _e=new Set(I),Fe=wn.filter(vt=>(vt.allowedTerms??[]).some(gt=>_e.has(Number(gt)))),st=An.filter(vt=>vt.term!=null&&_e.has(Number(vt.term)));return{teachers:Fe,students:st,admins:on}})();if(wn=ir.teachers,An=ir.students,on=ir.admins,m!=="all"){const I=m;wn=wn.filter(ie=>(ie.allowedTerms??[]).includes(I))}if(T!=="all"){const I=T;An=An.filter(ie=>ie.term===I)}if(w!=="all"){const I=w;on=on.filter(ie=>(ie.allowedTerms??[]).includes(I))}wn=wn.slice(0,50),An=An.slice(0,50),on=on.slice(0,50);const kt=()=>{N("create"),D(null),x(""),rt(""),ce(""),ye("teacher"),O(k!=null?[k]:[])},mn=async()=>{const I=Be.trim(),ie=P.trim(),_e=Y.trim();if(!I){Ge.error("E-post m fylles ut for  opprette lrer.");return}if(!Le||Le.length===0){Ge.error("Velg minst n termin lreren kan registrere for.");return}try{const Fe=Um(),zt=(await vd(Lm,I,Fe)).user.uid,vt={uid:zt,email:I,displayName:ie||I,name:ie||I,role:"teacher",term:null,phone:_e||null,allowedTerms:Le};await Js(mt(Re,"users",zt),vt,{merge:!0}),n(gt=>{const nn=[{docId:zt,email:I,displayName:vt.displayName,role:"teacher",term:null,phone:_e||null,allowedTerms:[...Le]},...gt];return nn.sort((Rn,cn)=>Rn.displayName.localeCompare(cn.displayName,"nb-NO",{sensitivity:"base"})),nn}),N(null),D(null),Ge.success("Ny lrer opprettet",{description:`Epost: ${I}
Midlertidig passord: ${Fe}
Gi passordet videre og be om passordbytte etter frste innlogging.`,duration:15e3})}catch(Fe){if(console.error("Feil ved oppretting av lrer:",Fe),Fe?.code==="auth/email-already-in-use")try{const st=Fn(Ft(Re,"users"),fn("email","==",I)),zt=await sn(st);if(zt.empty){Ge.error("Eposten finnes allerede i Auth, men fant ingen bruker i Firestore. Kontakt administrator.");return}const vt=zt.docs[0],gt=vt.data(),nn=Array.isArray(gt?.allowedTerms)?gt.allowedTerms.map(Qt=>typeof Qt=="number"?Qt:parseInt(String(Qt),10)).filter(Qt=>!Number.isNaN(Qt)):[],Rn=new Set([...nn,...Le]),cn=Array.from(Rn);await Un(mt(Re,"users",vt.id),{role:"teacher",allowedTerms:cn,displayName:ie||gt?.displayName||gt?.name||I,name:ie||gt?.name||gt?.displayName||I,phone:_e||gt?.phone||null}),n(Qt=>{const Xn=Qt.findIndex(hr=>hr.docId===vt.id),ln={docId:vt.id,email:I,displayName:ie||(gt?.displayName??gt?.name??I),role:"teacher",term:null,phone:_e||gt?.phone||null,allowedTerms:cn};if(Xn>=0){const hr=Qt.slice();return hr[Xn]={...hr[Xn],...ln},hr}const ar=[ln,...Qt];return ar.sort((hr,Ur)=>(hr.displayName??"").localeCompare(Ur.displayName??"","nb-NO",{sensitivity:"base"})),ar}),N(null),D(null),Ge.success("Eksisterende bruker oppdatert som lrer og tildelt valgte terminer.")}catch(st){console.error("Kunne ikke oppdatere eksisterende lrer:",st),Ge.error("Kunne ikke oppdatere eksisterende bruker med nye terminer.")}else Ge.error("Kunne ikke opprette lrer. Se console for mer info.")}},sr=I=>{N("edit"),D(I),x(I.displayName),rt(I.email),ce(I.phone??""),ye(I.role),O(I.allowedTerms??[])},qe=async()=>{if(!V)return;const I=V.docId;try{if(Be.trim()&&Be.trim()!==(V.email||""))try{const _e=jm(void 0,"europe-west1");await Pm(_e,"adminUpdateUserEmail")({uid:I,newEmail:Be.trim()})}catch(_e){console.error("adminUpdateUserEmail failed",_e),Ge.error("Kunne ikke oppdatere lrerens epost i Auth. Endringen er avbrutt. Kontroller at Cloud Function 'adminUpdateUserEmail' er deployet og at du har tilgang.");return}const ie=mt(Re,"users",I);await Un(ie,{displayName:P,email:Be,phone:Y||null,role:ve,allowedTerms:Le}),n(_e=>_e.map(Fe=>Fe.docId===I?{...Fe,displayName:P,email:Be,phone:Y||null,role:ve,allowedTerms:[...Le]}:Fe)),N(null),D(null)}catch(ie){console.error("Feil ved lagring av lrer:",ie),Ge.error("Kunne ikke lagre endringer for lrer.")}},St=()=>{N(null),D(null)},Q=I=>{O(ie=>ie.includes(I)?ie.filter(_e=>_e!==I):[...ie,I])},J=()=>{ee("create"),we(null),De(""),me(""),We(""),le("student"),Te(k??null)},de=async()=>{const I=it.trim(),ie=Ae.trim(),_e=Ue.trim();if(!ie){Ge.error("Navn m fylles ut for  opprette student.");return}if(!I){Ge.error("E-post m fylles ut for  opprette student.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(I)){Ge.error("Ugyldig epost.");return}if(fe==null){Ge.error("Velg termin studenten tilhrer.");return}try{const st=Um(),vt=(await vd(Lm,I,st)).user.uid,gt={uid:vt,email:I,displayName:ie||I,name:ie||I,role:"student",term:fe,phone:_e||null,allowedTerms:[]};await Js(mt(Re,"users",vt),gt,{merge:!0}),n(nn=>{const Rn=[{docId:vt,email:I,displayName:gt.displayName,role:"student",term:fe,phone:_e||null,allowedTerms:[]},...nn];return Rn.sort((cn,Qt)=>cn.displayName.localeCompare(Qt.displayName,"nb-NO",{sensitivity:"base"})),Rn}),ee(null),we(null),Ge.success(`Ny student med epost ${I} er opprettet.`,{description:"Be studenten trykke Glemt passord p innloggingssiden for  lage sitt eget passord.",duration:12e3})}catch(st){if(console.error("Feil ved oppretting av student:",st),st?.code==="auth/invalid-email")Ge.error("Ugyldig epost.");else if(st?.code==="auth/email-already-in-use")try{const zt=Fn(Ft(Re,"users"),fn("email","==",I)),vt=await sn(zt);if(vt.empty){Ge.error("Eposten finnes allerede i Auth, men fant ingen bruker i Firestore. Kontakt administrator.");return}const gt=vt.docs[0],nn=gt.data();await Un(mt(Re,"users",gt.id),{role:"student",term:fe,displayName:ie||nn?.displayName||nn?.name||I,name:ie||nn?.name||nn?.displayName||I,phone:_e||nn?.phone||null}),n(cn=>{const Qt=cn.findIndex(ar=>ar.docId===gt.id),Xn={docId:gt.id,email:I,displayName:ie||(nn?.displayName??nn?.name??I),role:"student",term:fe,phone:_e||nn?.phone||null,allowedTerms:Array.isArray(nn?.allowedTerms)?nn.allowedTerms:[]};if(Qt>=0){const ar=cn.slice();return ar[Qt]={...ar[Qt],...Xn},ar}const ln=[Xn,...cn];return ln.sort((ar,hr)=>(ar.displayName??"").localeCompare(hr.displayName??"","nb-NO",{sensitivity:"base"})),ln}),ee(null),we(null);const Rn=lk(ge,fe);Ge.success(`Eksisterende bruker oppdatert til termin ${Rn}.`)}catch(zt){console.error("Kunne ikke oppdatere eksisterende student:",zt),Ge.error("Kunne ikke oppdatere eksisterende bruker med valgt termin.")}else st?.code==="auth/missing-email"?Ge.error("Epost mangler."):Ge.error("Kunne ikke opprette student. Prv igjen senere.")}},Se=I=>{ee("edit"),we(I),De(I.displayName),me(I.email),We(I.phone??""),le(I.role),Te(I.term??null)},ke=async()=>{if(!se)return;const I=se.docId;try{if(it.trim()&&it.trim()!==(se.email||""))try{const _e=jm(void 0,"europe-west1");await Pm(_e,"adminUpdateUserEmail")({uid:I,newEmail:it.trim()})}catch(_e){console.error("adminUpdateUserEmail failed",_e),Ge.error("Kunne ikke oppdatere studentens epost i Auth. Endringen er avbrutt. Kontroller at Cloud Function 'adminUpdateUserEmail' er deployet og at du har tilgang.");return}const ie=mt(Re,"users",I);await Un(ie,{displayName:Ae,email:it,phone:Ue||null,role:ht,term:fe??null}),n(_e=>_e.map(Fe=>Fe.docId===I?{...Fe,displayName:Ae,email:it,phone:Ue||null,role:ht,term:fe??null}:Fe)),ee(null),we(null)}catch(ie){console.error("Feil ved lagring av student:",ie),Ge.error("Kunne ikke lagre endringer for student.")}},Je=()=>{ee(null),we(null)},xe=()=>{Tt("create"),Vt(null),Qe(""),Sn(""),Dn(""),Pt("admin"),xt([])},Ot=async()=>{const I=pt.trim(),ie=yn.trim(),_e=Gn.trim();if(!I){Ge.error("E-post m fylles ut for  opprette admin.");return}if(!_e){Ge.error("Mobilnummer m fylles ut for  opprette admin.");return}if(!Ut||Ut.length===0){Ge.error("Velg minst n termin administratoren skal ha tilgang til.");return}try{const Fe=Um(),zt=(await vd(Lm,I,Fe)).user.uid,vt={uid:zt,email:I,displayName:ie||I,name:ie||I,role:"admin",term:null,phone:_e,allowedTerms:Ut};await Js(mt(Re,"users",zt),vt,{merge:!0}),n(gt=>{const nn=[{docId:zt,email:I,displayName:vt.displayName,role:"admin",term:null,phone:_e,allowedTerms:[...Ut]},...gt];return nn.sort((Rn,cn)=>Rn.displayName.localeCompare(cn.displayName,"nb-NO",{sensitivity:"base"})),nn}),Tt(null),Vt(null),Ge.success("Ny admin opprettet",{description:`Epost: ${I}
Midlertidig passord: ${Fe}
Gi passordet videre og be om passordbytte etter frste innlogging.`,duration:15e3})}catch(Fe){console.error("Feil ved oppretting av admin:",Fe),Fe?.code==="auth/email-already-in-use"?Ge.error("E-posten er allerede i bruk i Auth. Bruk en annen eller koble eksisterende bruker."):Ge.error("Kunne ikke opprette admin. Se console for mer info.")}},et=I=>{Tt("edit"),Vt(I),Qe(I.displayName),Sn(I.email),Dn(I.phone??""),Pt(I.role),xt(I.allowedTerms??[])},yt=async()=>{if(!kn)return;const I=kn.docId;try{if(pt.trim()&&pt.trim()!==(kn.email||""))try{const _e=jm(void 0,"europe-west1");await Pm(_e,"adminUpdateUserEmail")({uid:I,newEmail:pt.trim()})}catch(_e){console.error("adminUpdateUserEmail failed",_e),Ge.error("Kunne ikke oppdatere adminepost i Auth. Endringen er avbrutt. Kontroller at Cloud Function 'adminUpdateUserEmail' er deployet og at du har tilgang.");return}const ie=mt(Re,"users",I);await Un(ie,{displayName:yn,email:pt,phone:Gn||null,role:Wt,allowedTerms:Ut}),n(_e=>_e.map(Fe=>Fe.docId===I?{...Fe,displayName:yn,email:pt,phone:Gn||null,role:Wt,allowedTerms:[...Ut]}:Fe)),Tt(null),Vt(null)}catch(ie){console.error("Feil ved lagring av admin:",ie),Ge.error("Kunne ikke lagre endringer for admin.")}},$e=()=>{Tt(null),Vt(null)},Dt=I=>{xt(ie=>ie.includes(I)?ie.filter(_e=>_e!==I):[...ie,I])};return _.jsxs("div",{className:"admin-page",children:[_.jsxs("div",{className:"filter-buttons",children:[_.jsx("button",{type:"button",onClick:()=>p("students"),className:` ${g==="students"?"button button-small button-yellow thin-border round-corners-whole25":"button button-small button-colorless button-opacity thin-border round-corners-whole25"}`,children:"Studenter"}),_.jsx("button",{type:"button",onClick:()=>p("teachers"),className:`${g==="teachers"?"button button-small button-yellow thin-border round-corners-whole25":"button button-small button-colorless button-opacity thin-border round-corners-whole25"}`,children:"Lrere"}),_.jsx("button",{type:"button",onClick:()=>p("admins"),className:`${g==="admins"?"button button-small button-yellow thin-border round-corners-whole25":"button button-small button-colorless button-opacity thin-border round-corners-whole25"}`,children:"Administorerer"})]}),_.jsx("h2",{style:{margin:"0.5rem 0 0.75rem"},children:g==="students"?"Studenter":g==="teachers"?"Lrere":"Administorerer"}),_.jsxs("div",{className:"admin-filter-section",children:[_.jsx("input",{type:"text",placeholder:g==="students"?"Sk etter student":g==="teachers"?"Sk etter lrer":"Sk etter administrator",value:u,onChange:I=>h(I.target.value),className:"input40 field-height-50 thin-border round-corners-whole25"}),_.jsxs("select",{className:"input20 field-height-50 thin-border round-corners-whole25",value:(g==="teachers"?m:g==="students"?T:w)==="all"?"":g==="teachers"?m:g==="students"?T:w,onChange:I=>{const ie=I.target.value,_e=ie===""?"all":parseInt(ie,10);g==="teachers"?v(_e):g==="students"?S(_e):L(_e)},children:[_.jsx("option",{value:"",children:"Alle terminer"}),(g==="admins"?ge:Me).map(I=>_.jsx("option",{value:I.value,children:I.label},I.value))]}),_.jsxs("button",{type:"button",onClick:g==="students"?J:g==="teachers"?kt:xe,className:"button button-small button-colorless boldFont",children:[_.jsx("span",{children:"+"}),"Oprett ny"," ",g==="students"?"student":g==="teachers"?"lrer":"administrator"]})]}),s?_.jsx(Wd,{}):_.jsxs(_.Fragment,{children:[g==="teachers"&&_.jsx("div",{children:_.jsxs("table",{className:"admin-table",children:[_.jsx("thead",{children:_.jsxs("tr",{children:[_.jsx("th",{children:_.jsx("h2",{children:"Navn"})}),_.jsx("th",{children:_.jsx("h2",{children:"E-post"})}),_.jsx("th",{children:_.jsx("h2",{children:"Mobil"})})]})}),_.jsx("tbody",{children:wn.length===0?_.jsx("p",{children:"Ingen lrere funnet."}):wn.map(I=>_.jsxs("tr",{onClick:()=>sr(I),className:"admin-table__row--clickable",children:[_.jsx("td",{children:I.displayName}),_.jsx("td",{children:I.email}),_.jsx("td",{children:I.phone??""})]},I.docId))})]})}),g==="students"&&_.jsx("div",{children:An.length===0?_.jsx("p",{children:"Ingen studenter funnet."}):_.jsxs("table",{className:"admin-table",children:[_.jsx("thead",{children:_.jsxs("tr",{children:[_.jsx("th",{children:_.jsx("h2",{children:"Navn"})}),_.jsx("th",{children:_.jsx("h2",{children:"Termin"})}),_.jsx("th",{children:_.jsx("h2",{children:"Status"})})]})}),_.jsx("tbody",{children:An.map(I=>_.jsxs("tr",{onClick:()=>Se(I),className:"admin-table__row--clickable",children:[_.jsx("td",{children:I.displayName}),_.jsx("td",{children:I.term!=null&&I.term!==void 0?ts(ge,I.term):"Ingen"}),_.jsx("td",{onMouseEnter:ie=>{Ke(I.docId,I.term??null)},children:I.term==null?"":_.jsx(Kt,{uid:I.docId,term:I.term})})]},I.docId))})]})}),g==="admins"&&_.jsx("div",{children:on.length===0?_.jsx("p",{children:"Ingen administratorer funnet."}):_.jsxs("table",{className:"admin-table",children:[_.jsx("thead",{children:_.jsxs("tr",{children:[_.jsx("th",{children:_.jsx("h2",{children:"Navn"})}),_.jsx("th",{children:_.jsx("h2",{children:"E-post"})}),_.jsx("th",{children:_.jsx("h2",{children:"Mobil"})})]})}),_.jsx("tbody",{children:on.map(I=>_.jsxs("tr",{onClick:()=>et(I),className:"admin-table__row--clickable",children:[_.jsx("td",{children:I.displayName}),_.jsx("td",{children:I.email}),_.jsx("td",{children:I.phone??""})]},I.docId))})]})})]}),C&&_.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:_.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[_.jsx("h3",{style:{marginTop:0,marginBottom:"0.5rem"},children:C==="create"?"Ny lrer":"Rediger lrer"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.75rem"},children:[_.jsxs("label",{style:{fontSize:"0.8rem"},children:["Navn",_.jsx("input",{type:"text",value:P,onChange:I=>x(I.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),_.jsxs("label",{style:{fontSize:"0.8rem"},children:["E-post",_.jsx("input",{type:"email",value:Be,onChange:I=>rt(I.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),_.jsxs("label",{style:{fontSize:"0.8rem"},children:["Mobil",_.jsx("input",{type:"tel",value:Y,onChange:I=>ce(I.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),C==="edit"&&_.jsxs("label",{style:{fontSize:"0.8rem"},children:["Rolle",_.jsxs("select",{value:ve,onChange:I=>ye(I.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"},children:[_.jsx("option",{value:"teacher",children:"Lrer"}),_.jsx("option",{value:"student",children:"Student"}),_.jsx("option",{value:"admin",children:"Admin"})]})]}),_.jsxs("div",{style:{fontSize:"0.8rem"},children:[_.jsx("div",{style:{marginBottom:"0.25rem"},children:"Termin(er) lreren kan registrere for:"}),_.jsx("div",{style:{maxHeight:"150px",overflowY:"auto",borderRadius:"0.5rem",border:"1px solid #e5e7eb",padding:"0.35rem 0.45rem"},children:(Me.length===0?[]:Me).map(I=>_.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.35rem",fontSize:"0.8rem",padding:"0.15rem 0"},children:[_.jsx("input",{type:"checkbox",checked:Le.includes(I.value),onChange:()=>Q(I.value)}),_.jsx("span",{children:I.label})]},I.value))})]})]}),_.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"0.5rem"},children:[_.jsx("button",{type:"button",onClick:St,className:"button button-white thin-border button-small round-corners-whole25",children:"Avbryt"}),_.jsx("button",{className:"button button-black thin-border button-small round-corners-whole25",type:"button",onClick:C==="create"?mn:qe,children:C==="create"?"Opprett lrer":"Lagre"})]})]})}),q&&_.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:_.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[_.jsx("h3",{style:{marginTop:0,marginBottom:"0.5rem"},children:q==="create"?"Ny student":"Rediger student"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.75rem"},children:[_.jsxs("label",{style:{fontSize:"0.8rem"},children:["Navn",_.jsx("input",{type:"text",value:Ae,onChange:I=>De(I.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),_.jsxs("label",{style:{fontSize:"0.8rem"},children:["E-post",_.jsx("input",{type:"email",value:it,onChange:I=>me(I.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),_.jsxs("label",{style:{fontSize:"0.8rem"},children:["Mobil",_.jsx("input",{type:"tel",value:Ue,onChange:I=>We(I.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),q==="edit"&&_.jsxs("label",{style:{fontSize:"0.8rem"},children:["Rolle",_.jsxs("select",{value:ht,onChange:I=>le(I.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"},children:[_.jsx("option",{value:"student",children:"Student"}),_.jsx("option",{value:"teacher",children:"Lrer"}),_.jsx("option",{value:"admin",children:"Admin"})]})]}),_.jsxs("label",{style:{fontSize:"0.8rem"},children:["Termin",_.jsxs("select",{value:fe??"",onChange:I=>{const ie=I.target.value;Te(ie===""?null:parseInt(ie,10))},style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"},children:[_.jsx("option",{value:"",children:"Ingen"}),(Me.length===0?[]:Me).map(I=>_.jsx("option",{value:I.value,children:I.label},I.value))]})]})]}),_.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"0.5rem"},children:[_.jsx("button",{type:"button",onClick:Je,className:"button button-white thin-border button-small round-corners-whole25",children:"Avbryt"}),_.jsx("button",{type:"button",onClick:q==="create"?de:ke,className:"button button-black thin-border button-small round-corners-whole25",children:q==="create"?"Opprett student":"Lagre"})]})]})}),ot&&_.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:_.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[_.jsx("h3",{style:{marginTop:0,marginBottom:"0.5rem"},children:ot==="create"?"Ny admin":"Rediger admin"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.75rem"},children:[_.jsxs("label",{style:{fontSize:"0.8rem"},children:["Navn",_.jsx("input",{type:"text",value:yn,onChange:I=>Qe(I.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),_.jsxs("label",{style:{fontSize:"0.8rem"},children:["E-post",_.jsx("input",{type:"email",value:pt,onChange:I=>Sn(I.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),_.jsxs("label",{style:{fontSize:"0.8rem"},children:["Mobil",_.jsx("input",{type:"tel",value:Gn,onChange:I=>Dn(I.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),ot==="edit"&&_.jsxs("label",{style:{fontSize:"0.8rem"},children:["Rolle",_.jsxs("select",{value:Wt,onChange:I=>Pt(I.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"},children:[_.jsx("option",{value:"admin",children:"Admin"}),_.jsx("option",{value:"teacher",children:"Lrer"}),_.jsx("option",{value:"student",children:"Student"})]})]}),_.jsxs("div",{style:{fontSize:"0.8rem"},children:[_.jsx("div",{style:{marginBottom:"0.25rem"},children:"Termin(er) admin kan administrere:"}),_.jsx("div",{style:{maxHeight:"150px",overflowY:"auto",borderRadius:"0.5rem",border:"1px solid #e5e7eb",padding:"0.35rem 0.45rem"},children:Me.length===0?_.jsx("div",{style:{color:"#6b7280"},children:"Ingen terminer tilgjengelig"}):Me.map(I=>_.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.35rem",fontSize:"0.8rem",padding:"0.15rem 0"},children:[_.jsx("input",{type:"checkbox",checked:Ut.includes(I.value),onChange:()=>Dt(I.value)}),_.jsx("span",{children:I.label})]},I.value))})]})]}),_.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"0.5rem"},children:[_.jsx("button",{type:"button",onClick:$e,className:"button button-white thin-border button-small round-corners-whole25",children:"Avbryt"}),_.jsx("button",{type:"button",onClick:ot==="create"?Ot:yt,className:"button button-black thin-border button-small round-corners-whole25",children:ot==="create"?"Opprett admin":"Lagre"})]})]})})]})},Kk=()=>{const[i,e]=B.useState([]),[n,s]=B.useState(""),[o,u]=B.useState([]),[h,g]=B.useState(!0),[p,m]=B.useState(""),[v,T]=B.useState({}),[S,w]=B.useState(null),[L,F]=B.useState(""),[U,ge]=B.useState(""),[he,re]=B.useState(null),[Ee,He]=B.useState(0),[Me,k]=B.useState({}),[C,N]=B.useState([]),[V,D]=B.useState(!1),[P,x]=B.useState(""),Be=B.useRef(null),[rt,Y]=B.useState(!1),[ce,ve]=B.useState([]),[ye,Le]=B.useState(!1),[O,q]=B.useState([]),{user:ee}=rl(),[se,we]=B.useState(null),[Ae,De]=B.useState(null);B.useEffect(()=>{(async()=>{try{if(!ee?.uid)return;const J=mt(Re,"users",ee.uid),de=await oi(J),Se=de.exists()?de.data():null,Je=(Array.isArray(Se?.allowedTerms)?Se.allowedTerms:[]).map(xe=>typeof xe=="number"?xe:parseInt(String(xe),10)).filter(xe=>!Number.isNaN(xe));we(Je),De(!!Se?.isSuperAdmin)}catch(J){console.warn("Kunne ikke hente allowedTerms for innlogget admin (TermSetup):",J),we([]),De(!1)}})()},[ee?.uid]);const it=B.useMemo(()=>Ae?!1:Array.isArray(se)&&se.length>0,[Ae,se]),me=B.useMemo(()=>it?new Set(se):null,[it,se]);B.useEffect(()=>{Ae||it&&(!se||se.length!==1||n===""&&s(se[0]))},[Ae,it,se,n]),B.useEffect(()=>{it&&n!==""&&me&&!me.has(n)&&s("")},[it,me,n]),B.useEffect(()=>{(async()=>{try{g(!0);const[J,de,Se,ke]=await Promise.all([sn(Ft(Re,"requirements")),sn(Ft(Re,"times")),sn(Ft(Re,"termLabels")).catch(()=>null),sn(Ft(Re,"terms")).catch(()=>null)]),Je=J.docs.map(Ot=>{const et=Ot.data();return{id:Ot.id,term:et.term,category:et.category,requiredCount:et.requiredCount??0,order:typeof et?.order=="number"?et.order:void 0}}),xe=de.docs.map(Ot=>{const et=Ot.data();return{id:Ot.id,name:et.name,category:et.category,term:et.term}});if(e(Je),u(xe),ke){const Ot=ke.docs.map(et=>{const yt=et.data(),$e=typeof yt?.value=="number"?yt.value:void 0,Dt=typeof yt?.label=="string"?yt.label:"",I=typeof yt?.order=="number"?yt.order:void 0;return typeof $e!="number"?null:{docId:et.id,value:$e,label:Dt,order:I}}).filter(Boolean);Ot.sort((et,yt)=>{const $e=et.order??et.value,Dt=yt.order??yt.value;return $e-Dt}),N(Ot)}if(Se){const Ot={};Se.docs.forEach(et=>{const yt=et.data(),$e=parseInt(et.id,10);!Number.isNaN($e)&&typeof yt?.label=="string"&&yt.label.trim()&&(Ot[$e]=yt.label.trim())}),k(Ot)}}catch(J){console.error("Feil ved lasting av termin-oppsett:",J)}finally{g(!1)}})()},[]);const Ue=i.filter(Q=>Q.term===n).sort((Q,J)=>{const de=Q.order??Number.MAX_SAFE_INTEGER,Se=J.order??Number.MAX_SAFE_INTEGER;return de!==Se?de-Se:Q.category.localeCompare(J.category,"nb-NO",{sensitivity:"base"})}),We=B.useMemo(()=>{const Q=C.slice().sort((J,de)=>(J.order??J.value)-(de.order??de.value)).map(J=>({value:J.value,label:J.label||`Termin ${J.value}`}));return Object.keys(Me).length>0?Q.map(J=>({...J,label:Me[J.value]??J.label})):Q},[C,Me]),ht=Q=>ts(We,Q??null),le=()=>{if(n==="")return;const Q=ht(n);x(Q),D(!0),setTimeout(()=>Be.current?.focus(),0)},fe=()=>{D(!1),x("")},Te=async()=>{if(n==="")return;const Q=ht(n),J=P.trim();if(!J||J===Q){D(!1);return}try{const de=C.find(Se=>Se.value===Number(n));if(de)await Un(mt(Re,"terms",de.docId),{label:J,updatedAt:gu()}),N(Se=>Se.map(ke=>ke.docId===de.docId?{...ke,label:J}:ke));else{const Se=String(n);await Js(mt(Re,"termLabels",Se),{label:J,updatedAt:gu(),value:Number(n)},{merge:!0}),k(ke=>({...ke,[Number(n)]:J}))}D(!1)}catch(de){console.error("Feil ved endring av modulnavn:",de),alert("Kunne ikke endre navn p modulen.")}},oe=async()=>{try{const Q=C.map(et=>et.value),J=C.map(et=>et.order??et.value),de=Q.length>0?Math.max(...Q):0,Se=J.length>0?Math.max(...J):0,ke=de+1,Je=Se+1,Ot={docId:(await Cd(Ft(Re,"terms"),{value:ke,label:"",order:Je,createdAt:gu()})).id,value:ke,label:"",order:Je};N(et=>[...et,Ot]),s(ke),x(""),D(!0),setTimeout(()=>Be.current?.focus(),0)}catch(Q){console.error("Kunne ikke opprette ny oppmtebok:",Q),alert("Kunne ikke opprette ny oppmtebok.")}},Ne=()=>{if(C.length===0)return;const Q=C.slice().sort((J,de)=>(J.order??J.value)-(de.order??de.value));ve(Q),Y(!0)},Oe=(Q,J)=>{ve(de=>{const Se=de.slice(),ke=Q+J;if(ke<0||ke>=Se.length)return de;const[Je]=Se.splice(Q,1);return Se.splice(ke,0,Je),Se})},je=async()=>{try{const Q=tu(Re);ce.forEach((J,de)=>{Q.update(mt(Re,"terms",J.docId),{order:de+1})}),await Q.commit(),N(ce.map((J,de)=>({...J,order:de+1}))),Y(!1)}catch(Q){console.error("Kunne ikke lagre sortering av terminer:",Q),alert("Kunne ikke lagre sortering av terminer.")}},Ie=()=>{if(n==="")return;const Q=i.filter(J=>J.term===n).slice().sort((J,de)=>{const Se=J.order??Number.MAX_SAFE_INTEGER,ke=de.order??Number.MAX_SAFE_INTEGER;return Se!==ke?Se-ke:J.category.localeCompare(de.category,"nb-NO",{sensitivity:"base"})});q(Q),Le(!0)},Ke=(Q,J)=>{q(de=>{const Se=de.slice(),ke=Q+J;if(ke<0||ke>=Se.length)return de;const[Je]=Se.splice(Q,1);return Se.splice(ke,0,Je),Se})},Kt=async()=>{try{const Q=tu(Re);O.forEach((J,de)=>{Q.update(mt(Re,"requirements",J.id),{order:de+1})}),await Q.commit(),e(J=>{const de={};return O.forEach((Se,ke)=>de[Se.id]=ke+1),J.map(Se=>de[Se.id]?{...Se,order:de[Se.id]}:Se)}),Le(!1)}catch(Q){console.error("Kunne ikke lagre sortering av grupper:",Q),alert("Kunne ikke lagre sortering av grupper.")}},[ot,Tt]=B.useState({open:!1,termValue:null,termLabel:"",reqCount:0,timeCount:0}),kn=()=>{if(n==="")return;const Q=n,J=ht(Q),de=i.filter(ke=>ke.term===Q).length,Se=o.filter(ke=>ke.term===Q).length;Tt({open:!0,termValue:Q,termLabel:J,reqCount:de,timeCount:Se})},Vt=()=>{Tt({open:!1,termValue:null,termLabel:"",reqCount:0,timeCount:0})},yn=async(Q,J)=>{try{const de=C.find($e=>$e.value===Q);let Se=de?mt(Re,"terms",de.docId):null;const ke=Fn(Ft(Re,"requirements"),fn("term","==",Q)),Je=Fn(Ft(Re,"times"),fn("term","==",Q)),[xe,Ot]=await Promise.all([sn(ke),sn(Je)]);if(!Se)try{const $e=Fn(Ft(Re,"terms"),fn("value","==",Q));Se=(await sn($e)).docs[0]?.ref??null}catch{}const et=[...xe.docs.map($e=>$e.ref),...Ot.docs.map($e=>$e.ref)];Se&&et.push(Se);const yt=450;for(let $e=0;$e<et.length;$e+=yt){const Dt=tu(Re);et.slice($e,$e+yt).forEach(I=>Dt.delete(I)),await Dt.commit()}e($e=>$e.filter(Dt=>Dt.term!==Q)),u($e=>$e.filter(Dt=>Dt.term!==Q)),N($e=>$e.filter(Dt=>Dt.value!==Q)),s(""),D(!1),m(""),re(null),w(null),F(""),Ge.success("Termin slettet",{description:`${J} er fjernet med alle grupper og timer.`})}catch(de){console.error("Kunne ikke slette termin med relaterte data:",de),Ge.error("Kunne ikke slette termin. Prv igjen senere.")}finally{Vt()}},Qe=async()=>{!ot.open||ot.termValue==null||await yn(ot.termValue,ot.termLabel)},pt=async Q=>{const J=L.trim();if(!J||J===Q.name){w(null),F("");return}try{await Un(mt(Re,"times",Q.id),{name:J}),u(de=>de.map(Se=>Se.id===Q.id?{...Se,name:J}:Se)),w(null),F("")}catch(de){console.error("Feil ved endring av timenavn:",de),alert("Kunne ikke oppdatere navn p timen.")}},Sn=o.filter(Q=>Q.term===n),Gn=Q=>{re(Q.id),ge(Q.category),He(Q.requiredCount??0)},Dn=()=>{re(null)},Wt=async Q=>{if(!he)return;const J=Q.category,de=(U||"").trim()||J,Se=o.filter(xe=>xe.term===Q.term&&xe.category===J).length;let ke=Ee;if((Number.isNaN(ke)||ke<0)&&(ke=0),Se>0&&ke>Se&&(ke=Se),Ue.find(xe=>xe.id!==Q.id&&xe.category.toLowerCase()===de.toLowerCase())){alert("Det finnes allerede en gruppe med dette navnet i valgt termin.");return}try{const xe=tu(Re),Ot=mt(Re,"requirements",Q.id);xe.update(Ot,{category:de,requiredCount:ke});const et=Fn(Ft(Re,"times"),fn("term","==",Q.term),fn("category","==",J));(await sn(et)).forEach(I=>{xe.update(I.ref,{category:de})});const $e=Fn(Ft(Re,"sessions"),fn("term","==",Q.term),fn("category","==",J));(await sn($e)).forEach(I=>{xe.update(I.ref,{category:de})}),await xe.commit(),e(I=>I.map(ie=>ie.id===Q.id?{...ie,category:de,requiredCount:ke}:ie)),u(I=>I.map(ie=>ie.term===Q.term&&ie.category===J?{...ie,category:de}:ie)),re(null)}catch(xe){console.error("Feil ved lagring av gruppe:",xe),alert("Kunne ikke lagre endringene for gruppen.")}},Pt=async()=>{const Q=p.trim();if(!Q)return;if(Ue.some(de=>de.category.toLowerCase()===Q.toLowerCase())){alert("Denne gruppen finnes allerede for valgt termin.");return}try{const de=i.filter(xe=>xe.term===n),ke=(de.length?Math.max(...de.map(xe=>typeof xe.order=="number"?xe.order:0)):0)+1,Je=await Cd(Ft(Re,"requirements"),{term:n,category:Q,requiredCount:0,order:ke});e(xe=>[...xe,{id:Je.id,term:n,category:Q,requiredCount:0,order:ke}]),m("")}catch(de){console.error("Feil ved oppretting av kategori:",de),alert("Kunne ikke opprette kategori.")}},[Ut,xt]=B.useState({open:!1,req:null,timeCount:0}),Ir=async(Q,J)=>{const{id:de,term:Se,category:ke}=Q;try{const Je=Fn(Ft(Re,"times"),fn("term","==",Se),fn("category","==",ke)),xe=await sn(Je),Ot=[mt(Re,"requirements",de),...xe.docs.map(yt=>yt.ref)],et=450;for(let yt=0;yt<Ot.length;yt+=et){const $e=tu(Re);Ot.slice(yt,yt+et).forEach(Dt=>$e.delete(Dt)),await $e.commit()}e(yt=>yt.filter($e=>$e.id!==de)),u(yt=>yt.filter($e=>!($e.term===Se&&$e.category===ke)))}catch(Je){console.error("Feil ved sletting av gruppe og tilhrende timer:",Je),Ge.error("Kunne ikke slette gruppen. Prv igjen senere.")}finally{An()}},wn=Q=>{const J=o.filter(de=>de.term===Q.term&&de.category===Q.category).length;if(J===0){Ir(Q);return}xt({open:!0,req:Q,timeCount:J})},An=()=>{xt({open:!1,req:null,timeCount:0})},on=async()=>{Ut.req&&await Ir(Ut.req,Ut.timeCount)},ir=async Q=>{const J=Q.id,de=(v[J]??"").trim();if(de)try{const Se=await Cd(Ft(Re,"times"),{term:n,category:Q.category,name:de});u(ke=>[...ke,{id:Se.id,term:n,category:Q.category,name:de}]),T(ke=>({...ke,[J]:""}))}catch(Se){console.error("Feil ved oppretting av time:",Se),alert("Kunne ikke opprette time.")}},[kt,mn]=B.useState({open:!1,time:null}),sr=Q=>{mn({open:!0,time:Q})},qe=()=>{mn({open:!1,time:null})},St=async()=>{if(!kt.time)return;const Q=kt.time;try{await lS(mt(Re,"times",Q.id)),u(J=>J.filter(de=>de.id!==Q.id))}catch(J){console.error("Feil ved sletting av time:",J),Ge.error("Kunne ikke slette time. Prv igjen senere.")}finally{qe()}};return h?_.jsx(Wd,{}):_.jsxs(_.Fragment,{children:[_.jsxs("section",{children:[_.jsxs("div",{className:"admin-books-controls",children:[_.jsxs("div",{className:`admin-books-rest${Ae?" admin-books-rest--split":""}`,children:[V&&Ae?_.jsx("input",{className:"admin-books-select",ref:Be,type:"text",value:P,onChange:Q=>x(Q.target.value),onKeyDown:Q=>{Q.key==="Enter"?(Q.preventDefault(),Te()):Q.key==="Escape"&&(Q.preventDefault(),fe())},placeholder:"Navn p modul",style:{flex:1,minWidth:0,padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db"}}):_.jsxs("div",{className:"filter-buttons",style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",flex:1,minWidth:0},children:[(()=>{const Q=it?We.filter(J=>me?.has(J.value)):We;return Q.length===0?_.jsx("span",{style:{color:"#6b7280",padding:"0.35rem 0"},children:"Ingen oppmtebker tilgjengelig"}):Q.map(J=>_.jsx("button",{type:"button",onClick:()=>s(J.value),className:`${n===J.value?"button button-small button-yellow thin-border round-corners-whole25":"button button-small button-colorless button-opacity thin-border round-corners-whole25"}`,title:J.label,children:J.label},J.value))})(),!it&&_.jsxs("button",{type:"button",onClick:()=>void oe(),className:"button button-small button-colorless boldFont thin-border round-corners-whole25",title:"Opprett ny oppmtebok",children:[_.jsx("span",{children:"+"})," Ny oppmtebok"]})]}),Ae&&_.jsx("button",{className:"button button-small",type:"button",disabled:n===""&&!V,onClick:()=>{V?Te():le()},children:V?"Legg til":"Endre navn"})]}),Ae&&_.jsx("button",{className:"admin-books-filter",type:"button",title:"Sorter oppmtebker",disabled:C.length===0,onClick:Ne,children:""})]}),_.jsx("div",{className:"admin-books-controls",style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:(()=>{const Q=n===""?null:Number(n),J=Q!=null?C.find(xe=>xe.value===Q):void 0,de=!!J?.label&&J.label.trim().length>0,Se=Q!=null?Me[Q]:void 0,ke=!!Se&&Se.trim().length>0,Je=Q!=null&&(de||ke);return _.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"admin-books-rest admin-books-rest--split",style:{display:"flex",gap:"0.5rem",flex:1,minWidth:0},children:[_.jsx("input",{className:"admin-books-select",type:"text",placeholder:"Ny gruppe...",value:p,onChange:xe=>m(xe.target.value),onKeyDown:xe=>{xe.key==="Enter"&&Je&&(xe.preventDefault(),Pt())},disabled:!Je,style:{flex:1,minWidth:0,padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",opacity:Je?1:.6,cursor:Je?"text":"not-allowed"}}),_.jsx("button",{className:"button-green admin-books-action",type:"button",onClick:Pt,disabled:!Je,style:{width:"160px",padding:"0.45rem 0.9rem",cursor:Je?"pointer":"not-allowed",whiteSpace:"nowrap",opacity:Je?1:.7},children:"Legg til"})]}),_.jsx("button",{className:"admin-books-filter",type:"button",title:"Sorter grupper",disabled:!Je||Ue.length===0,onClick:Ie,style:{padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",background:"#ffffff",fontSize:"0.9rem",cursor:!Je||Ue.length===0?"not-allowed":"pointer",opacity:!Je||Ue.length===0?.7:1},children:""})]})})()}),(()=>{const Q=n===""?null:Number(n),J=Q!=null?C.find(xe=>xe.value===Q):void 0,de=!!J?.label&&J.label.trim().length>0,Se=Q!=null?Me[Q]:void 0,ke=!!Se&&Se.trim().length>0;return Q!=null&&(de||ke)?Ue.length===0?_.jsxs("p",{style:{fontSize:"0.85rem",color:"#6b7280"},children:["Ingen grupper definert enn for ",ht(n),"."]}):_.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:Ue.map(xe=>{const Ot=xe.id,et=Sn.filter(I=>I.category===xe.category).sort((I,ie)=>{const _e=Lb(I.name),Fe=Lb(ie.name);return _e!==Fe?_e-Fe:I.name.localeCompare(ie.name,"nb-NO",{sensitivity:"base"})}),yt=v[Ot]??"",$e=Sn.filter(I=>I.category===xe.category).length,Dt=he===xe.id;return _.jsxs("div",{style:{borderRadius:"0.75rem",border:"1px solid #e5e7eb",padding:"0.75rem 0.75rem",backgroundColor:"#f9fafb"},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem",gap:"0.5rem",flexWrap:"wrap"},children:[_.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:Dt?_.jsxs(_.Fragment,{children:[_.jsx("input",{type:"text",value:U,onChange:I=>ge(I.target.value),onKeyDown:I=>{I.key==="Enter"?Wt(xe):I.key==="Escape"&&Dn()},autoFocus:!0,style:{minWidth:"12rem",padding:"0.2rem 0.35rem",borderRadius:"0.4rem",border:"1px solid #d1d5db",fontSize:"0.9rem"}}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[_.jsx("input",{type:"number",min:0,max:$e,value:Ee,onChange:I=>{const ie=parseInt(I.target.value,10);He(Number.isNaN(ie)?0:ie)},onKeyDown:I=>{I.key==="Enter"?Wt(xe):I.key==="Escape"&&Dn()},style:{width:"4rem",padding:"0.2rem 0.35rem",borderRadius:"0.4rem",border:"1px solid #d1d5db",fontSize:"0.9rem",textAlign:"center"}}),_.jsxs("span",{style:{fontSize:"0.8rem",color:"#6b7280"},children:["/ ",$e]})]})]}):_.jsxs("div",{style:{fontWeight:600,fontSize:"0.95rem"},children:[xe.category," (",xe.requiredCount,"/",$e,")"]})}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[_.jsx("button",{className:"button-green admin-books-action",type:"button",onClick:()=>Dt?void Wt(xe):Gn(xe),style:{padding:"0.45rem 0.9rem",cursor:"pointer",whiteSpace:"nowrap"},children:Dt?"Lagre":"Endre navn"}),_.jsx("button",{type:"button",onClick:()=>wn({id:xe.id,term:xe.term,category:xe.category}),style:{padding:"0.25rem 0.6rem",borderRadius:"999px",border:"none",backgroundColor:"#fee2e2",color:"#991b1b",fontSize:"0.75rem",cursor:"pointer"},children:"Slett gruppe"})]})]}),et.length>0?_.jsx("ul",{style:{listStyle:"none",paddingLeft:0,margin:"0 0 0.5rem 0",fontSize:"0.85rem"},children:et.map(I=>{const ie=S===I.id;return _.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.15rem 0",borderBottom:"1px dashed #e5e7eb",gap:"0.5rem"},children:[_.jsx("div",{style:{flex:1},children:ie?_.jsx("input",{type:"text",value:L,onChange:_e=>F(_e.target.value),onKeyDown:_e=>{_e.key==="Enter"?pt(I):_e.key==="Escape"&&(w(null),F(""))},autoFocus:!0,style:{width:"100%",padding:"0.2rem 0.35rem",borderRadius:"0.4rem",border:"1px solid #d1d5db",fontSize:"0.85rem"}}):_.jsx("span",{children:I.name})}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem"},children:[ie?_.jsx("button",{type:"button",onClick:()=>void pt(I),style:{padding:"0.15rem 0.45rem",borderRadius:"999px",border:"none",backgroundColor:"#e5e7eb",color:"#111827",fontSize:"0.75rem",cursor:"pointer"},children:"Lagre"}):_.jsx("button",{type:"button",onClick:()=>{w(I.id),F(I.name)},style:{padding:"0.15rem 0.45rem",borderRadius:"999px",border:"none",backgroundColor:"#e5e7eb",color:"#111827",fontSize:"0.75rem",cursor:"pointer"},children:"Endre"}),_.jsx("button",{type:"button",onClick:()=>sr(I),style:{padding:"0.15rem 0.45rem",borderRadius:"999px",border:"none",backgroundColor:"#fee2e2",color:"#b91c1c",fontSize:"0.75rem",cursor:"pointer"},children:"Slett"})]})]},I.id)})}):_.jsx("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.8rem",color:"#9ca3af"},children:"Ingen timer lagt til i denne gruppen."}),_.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.25rem"},children:[_.jsx("input",{type:"text",placeholder:"Ny time...",value:yt,onChange:I=>T(ie=>({...ie,[Ot]:I.target.value})),onKeyDown:I=>{I.key==="Enter"&&(I.preventDefault(),ir(xe))},style:{flex:1,padding:"0.3rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem"}}),_.jsx("button",{type:"button",onClick:()=>ir(xe),style:{padding:"0.35rem 0.8rem",borderRadius:"999px",border:"none",backgroundColor:"#4b5563",color:"#ffffff",fontSize:"0.8rem",cursor:"pointer"},children:"Legg til time"})]})]},xe.id)})}):null})(),n!==""&&Ae&&_.jsx("div",{style:{marginTop:"1rem",display:"flex",justifyContent:"center"},children:_.jsx("button",{className:"btn-hover-danger",type:"button",onClick:kn,style:{backgroundColor:"#ef4444",borderColor:"#ef4444",color:"white",fontSize:"0.9rem"},children:"Slett termin"})}),ot.open&&ot.termValue!=null&&_.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1e3},children:_.jsxs("div",{className:"page-card",style:{textAlign:"center",maxWidth:520,width:"100%",background:"#ffffff"},children:[_.jsx("h3",{style:{marginTop:0},children:"Slett termin?"}),_.jsxs("p",{style:{whiteSpace:"pre-wrap",lineHeight:1.4},children:[`Du er i ferd med  slette oppmteboka for ${ot.termLabel}.

`,`Dette vil slette selve terminen, alle grupper (${ot.reqCount} stk) og alle timer (${ot.timeCount} stk) som tilhrer denne terminen.
`]}),_.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",marginTop:"0.75rem"},children:[_.jsx("button",{className:"btn-hover-danger",type:"button",onClick:Vt,style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"none",background:"#ef4444",color:"black",cursor:"pointer"},children:"Avbryt"}),_.jsx("button",{className:"btn-hover-lg",type:"button",onClick:()=>void Qe(),style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#ffffff",cursor:"pointer"},children:"Slett termin"})]})]})}),Ut.open&&Ut.req&&_.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1e3},children:_.jsxs("div",{className:"page-card",style:{maxWidth:520,width:"100%",background:"#ffffff"},children:[_.jsx("h3",{style:{marginTop:0},children:"Slett gruppe?"}),_.jsxs("p",{style:{whiteSpace:"pre-wrap",lineHeight:1.4},children:[`Du er i ferd med  slette gruppen ${Ut.req.category}.

`,`Dette vil ogs slette alle tilhrende timer i denne gruppen for valgt termin (${Ut.timeCount}).
`,"Handlingen kan ikke angres."]}),_.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",marginTop:"0.75rem"},children:[_.jsx("button",{type:"button",onClick:An,style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#ffffff",cursor:"pointer"},children:"Avbryt"}),_.jsx("button",{type:"button",onClick:()=>void on(),style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"none",background:"#ef4444",color:"#ffffff",cursor:"pointer"},children:"Slett gruppe"})]})]})}),kt.open&&kt.time&&_.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1e3},children:_.jsxs("div",{className:"page-card",style:{maxWidth:520,width:"100%",background:"#ffffff"},children:[_.jsx("h3",{style:{marginTop:0},children:"Slett time?"}),_.jsxs("p",{style:{whiteSpace:"pre-wrap",lineHeight:1.4},children:[`Du er i ferd med  slette timen ${kt.time.name} i gruppen ${kt.time.category} for ${ht(kt.time.term)}.

`,`Historiske sesjoner beholdes, men timen forsvinner fra admin-oppsettet.
`,"Handlingen kan ikke angres."]}),_.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",marginTop:"0.75rem"},children:[_.jsx("button",{type:"button",onClick:qe,style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#ffffff",cursor:"pointer"},children:"Avbryt"}),_.jsx("button",{type:"button",onClick:()=>void St(),style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"none",background:"#ef4444",color:"#ffffff",cursor:"pointer"},children:"Slett time"})]})]})})]}),rt&&_.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:_.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[_.jsx("h3",{style:{marginTop:0},children:"Sorter oppmtebker"}),_.jsx("ul",{style:{listStyle:"none",padding:0,margin:"0 0 0.75rem"},children:ce.map((Q,J)=>_.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"0.4rem 0.6rem",marginBottom:"0.4rem"},children:[_.jsx("span",{style:{fontSize:"0.9rem"},children:Q.label||`Termin ${Q.value}`}),_.jsxs("span",{style:{display:"flex",gap:"0.25rem"},children:[_.jsx("button",{type:"button",onClick:()=>Oe(J,-1),disabled:J===0,style:{padding:"0.2rem 0.4rem",borderRadius:"0.35rem",border:"1px solid #d1d5db",background:"#fff"},children:""}),_.jsx("button",{type:"button",onClick:()=>Oe(J,1),disabled:J===ce.length-1,style:{padding:"0.2rem 0.4rem",borderRadius:"0.35rem",border:"1px solid #d1d5db",background:"#fff"},children:""})]})]},Q.docId))}),_.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem"},children:[_.jsx("button",{type:"button",onClick:()=>Y(!1),style:{padding:"0.35rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#fff"},children:"Avbryt"}),_.jsx("button",{type:"button",onClick:()=>void je(),style:{padding:"0.35rem 0.7rem",borderRadius:"999px",border:"none",background:"#16a34a",color:"#fff"},children:"Lagre rekkeflge"})]})]})}),ye&&_.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:_.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[_.jsx("h3",{style:{marginTop:0},children:"Sorter grupper"}),_.jsx("ul",{style:{listStyle:"none",padding:0,margin:"0 0 0.75rem"},children:O.map((Q,J)=>_.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"0.4rem 0.6rem",marginBottom:"0.4rem"},children:[_.jsx("span",{style:{fontSize:"0.9rem"},children:Q.category}),_.jsxs("span",{style:{display:"flex",gap:"0.25rem"},children:[_.jsx("button",{type:"button",onClick:()=>Ke(J,-1),disabled:J===0,style:{padding:"0.2rem 0.4rem",borderRadius:"0.35rem",border:"1px solid #d1d5db",background:"#fff"},children:""}),_.jsx("button",{type:"button",onClick:()=>Ke(J,1),disabled:J===O.length-1,style:{padding:"0.2rem 0.4rem",borderRadius:"0.35rem",border:"1px solid #d1d5db",background:"#fff"},children:""})]})]},Q.id))}),_.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem"},children:[_.jsx("button",{type:"button",onClick:()=>Le(!1),style:{padding:"0.35rem 0.7rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#fff"},children:"Avbryt"}),_.jsx("button",{type:"button",onClick:()=>void Kt(),style:{padding:"0.35rem 0.7rem",borderRadius:"999px",border:"none",background:"#16a34a",color:"#fff"},children:"Lagre rekkeflge"})]})]})})]})},Qk=()=>{const{user:i,loading:e}=rl(),[n,s]=B.useState("setup"),[o,u]=B.useState(!1);return e?_.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:_.jsx(Wd,{})}):!i||i.role!=="admin"?_.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"1.5rem"},children:_.jsxs("div",{className:"page-card page-card--admin",children:[_.jsx("h2",{children:"Ingen tilgang"}),_.jsx("p",{children:"Du m vre logget inn som administrator for  se denne siden."})]})}):_.jsx(_.Fragment,{children:_.jsxs("div",{className:"admin-page",children:[_.jsxs("div",{id:"users",className:"",children:[_.jsx("h1",{children:"Administrer brukere"}),_.jsx("p",{children:"Her kan du som administrator legge til, fjerne og redigere studenter lrere og andre administratorer."}),_.jsx(Gk,{})]}),_.jsxs("div",{id:"attendance-books",className:"visually-hidden",children:[_.jsx("h1",{children:"Administrer oppmtebker"}),_.jsx("p",{children:"Her kan du som administrator legge til, fjerne og redigere gruppetimer for de ulike semesterne. "}),_.jsx(Kk,{})]}),_.jsxs("div",{id:"statistics",className:"visually-hidden",children:[_.jsx("h1",{children:"Se statistikk"}),_.jsx("p",{children:"Her kan du som overordnet administrator se statisikk om oppmteboka, timer og registereringer samt nettside info"})]}),_.jsx("div",{}),o&&_.jsx(vg,{uid:i.uid,role:i.role,email:i.email,displayName:i.displayName,onClose:()=>u(!1)})]})})};function jb(){return _.jsx("footer",{children:_.jsxs("div",{className:"container",style:{backgroundColor:"#FFE8D1 !important"},children:[_.jsxs("div",{className:"row row1",children:[_.jsx("h2",{children:"Vi lytter til dere!"}),_.jsx("p",{children:"Traskende rundt i sykehuskorridorene med en oppmtebok du alltid er redd for  miste eller sle kaffekoppen p, begynner man  fundere p om det gr an  gjre livet litt enklere S hvorfor ikke lage en digital oppmtebok du aldri glemmer hjemme, som er superrask for lrerne og sparer fakultetet for over 3000(!) papirutgaver i ret?"}),_.jsx("br",{}),_.jsx("p",{children:"Miljvennlig, effektivt og bedre for studentene. Velkommen til Oppmteboka  skapt mellom uttrykning p vakt eller halvsovende p sofaen i de sene nattestimer. Send oss en melding om du har noe tips til hva vi br gjre!"})]}),_.jsxs("div",{className:"row row2",children:[_.jsx("img",{src:"/logo.svg",alt:"Oppmteboka logo"}),_.jsx("p",{className:"normalFont",children:_.jsx("a",{className:"link",href:"mailto:hei@sablateknisk.no?subject=Tilbakelding",children:"Gi tilbakemelding"})}),_.jsx("p",{children:"hei@sablateknisk.no"}),_.jsx("br",{}),_.jsxs("p",{className:"smallText",children:["Nettisden er utviklet av",_.jsx("br",{})," Vetle Mrland og ge Frivoll"]})]})]})})}function Yk({user:i}){const{logout:e}=rl(),[n,s]=B.useState(!1);return _.jsxs("header",{children:[_.jsxs("div",{className:`header-container ${i.role==="admin"?"admin":""}`,children:[_.jsxs("div",{className:"left-header",children:[_.jsx("img",{src:"/favicon.svg",alt:"Logo",className:""}),i.role==="admin"&&_.jsxs("nav",{className:"header-nav",children:[_.jsx("button",{id:"admin-users-button",className:"button button-colorless button-small boldFont",onClick:()=>{document.getElementById("admin-attendence-button")?.classList.remove("boldFont"),document.getElementById("admin-users-button")?.classList.add("boldFont"),document.getElementById("admin-stats-button")?.classList.remove("boldFont"),document.getElementById("users")?.classList.remove("visually-hidden"),document.getElementById("attendance-books")?.classList.add("visually-hidden"),document.getElementById("statistics")?.classList.add("visually-hidden")},children:"Brukere"}),_.jsx("button",{id:"admin-attendence-button",className:"button button-colorless button-small",onClick:()=>{document.getElementById("admin-attendence-button")?.classList.add("boldFont"),document.getElementById("admin-users-button")?.classList.remove("boldFont"),document.getElementById("admin-stats-button")?.classList.remove("boldFont"),document.getElementById("users")?.classList.add("visually-hidden"),document.getElementById("attendance-books")?.classList.remove("visually-hidden"),document.getElementById("statistics")?.classList.add("visually-hidden")},children:"Oppmtebker"}),_.jsx("button",{id:"admin-stats-button",className:"button button-colorless button-small",onClick:()=>{document.getElementById("admin-attendence-button")?.classList.remove("boldFont"),document.getElementById("admin-users-button")?.classList.remove("boldFont"),document.getElementById("admin-stats-button")?.classList.add("boldFont"),document.getElementById("users")?.classList.add("visually-hidden"),document.getElementById("attendance-books")?.classList.add("visually-hidden"),document.getElementById("statistics")?.classList.remove("visually-hidden")},children:"Statistikk"})]})]}),_.jsxs("div",{className:"header-buttons",children:[_.jsx("button",{className:"button full-border button-colorless boldFont round-corners-whole25",type:"button",onClick:()=>s(!0),children:"Min profil"}),_.jsx("button",{className:"button full-border button-black boldFont round-corners-whole25",type:"button",onClick:e,children:"Logg ut"})]})]}),_.jsx("div",{children:n&&_.jsx(vg,{uid:i.uid,role:i.role,email:i.email,displayName:i.displayName,onClose:()=>s(!1)})})]})}function Xk(){const{user:i,login:e}=rl(),[n,s]=B.useState(""),[o,u]=B.useState(""),[h,g]=B.useState(null),[p,m]=B.useState(null),[v,T]=B.useState(!1),[S,w]=B.useState(!1),L=B.useRef(null),F=B.useRef(null);B.useEffect(()=>{if(!h)return;const he=setTimeout(()=>g(null),3e3);return()=>clearTimeout(he)},[h]),B.useEffect(()=>{if(!p)return;const he=setTimeout(()=>m(null),3e3);return()=>clearTimeout(he)},[p]),B.useEffect(()=>{if(i)try{window.scrollTo({top:0,behavior:"smooth"})}catch{window.scrollTo(0,0)}},[i]);const U=async he=>{if(he.preventDefault(),g(null),!n||!o){g("Fyll inn bde e-post og passord.");return}T(!0);try{await e(n.trim(),o)}catch(re){console.error(re);let Ee="Kunne ikke logge inn.";re?.code==="auth/user-not-found"?Ee="Bruker finnes ikke.":re?.code==="auth/wrong-password"?Ee="Feil passord.":re?.code==="auth/email-already-in-use"?Ee="E-postadressen er allerede registrert.":re?.code==="auth/weak-password"&&(Ee="Passordet er for svakt (min. 6 tegn)."),g(Ee)}finally{T(!1)}},ge=async()=>{const he=n.trim();if(!he){g("Skriv inn epostadressen din frst.");return}w(!0);try{await WR(Qs,he),m("Sendte epost for tilbakestilling av passord.")}catch(re){console.error(re);let Ee="Kunne ikke sende epost for tilbakestilling.";re?.code==="auth/invalid-email"?Ee="Ugyldig epostadresse.":re?.code==="auth/user-not-found"&&(Ee="Fant ingen bruker for denne epostadressen."),g(Ee)}finally{w(!1)}};return i?_.jsxs(_.Fragment,{children:[_.jsx(Yk,{user:i}),_.jsx("div",{id:"main",className:`${i.role==="admin"?"admin":""}`,children:i.role==="admin"?_.jsx(Qk,{user:i}):i.role==="teacher"?_.jsx(wk,{user:i}):_.jsx(ck,{user:i})}),_.jsx(jb,{})]}):_.jsxs(_.Fragment,{children:[_.jsx("div",{id:"main",children:_.jsxs("div",{className:"login-card-container",children:[_.jsx("div",{id:"loginMan",children:_.jsx("img",{src:"/login-man.svg",alt:"Logo",className:""})}),_.jsxs("div",{id:"login-card",className:"card round-corners-whole100 full-border",children:[_.jsx("h1",{className:"boldFont",children:"Velkommen tilbake"}),_.jsxs("form",{onSubmit:U,children:[_.jsxs("div",{className:"input-group",children:[_.jsx("label",{className:"input-label thinFont",children:"Mobil / epost"}),_.jsx("input",{className:"input-field round-corners-whole50 field-height-100",type:"email",value:n,onChange:he=>s(he.target.value),ref:L,onKeyDown:he=>{he.key==="Enter"&&(he.preventDefault(),F.current?.focus())},enterKeyHint:"next"})]}),_.jsxs("div",{className:"input-group",children:[_.jsx("label",{className:"input-label thinFont",children:"Passord"}),_.jsx("input",{className:"input-field round-corners-whole50 field-height-100",type:"password",value:o,onChange:he=>u(he.target.value),ref:F,enterKeyHint:"go"})]}),_.jsx("button",{type:"submit",disabled:v,className:"button button-fullwidth field-height-100 round-corners-whole50 button-black boldFont",children:v?"Logger inn...":"Logg inn"}),_.jsx("button",{type:"button",onClick:ge,disabled:S,className:"button button-colorless boldFont fontUnderline",children:S?"Sender epost...":"Glemt passord"}),_.jsxs("p",{className:"errorTxt",children:[_.jsx("br",{}),h]}),_.jsxs("p",{className:"successTxt",children:[_.jsx("br",{}),p]})]})]})]})}),_.jsx(jb,{})]})}hw.createRoot(document.getElementById("root")).render(_.jsxs(pe.StrictMode,{children:[_.jsx(Xk,{}),_.jsx(ek,{richColors:!0,position:"top-center"})]}));export{$k as c,gp as g};
