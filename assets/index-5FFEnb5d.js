(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var GD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cp(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var dm={exports:{}},Wl={};var k_;function $1(){if(k_)return Wl;k_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:d,ref:o!==void 0?o:null,props:u}}return Wl.Fragment=e,Wl.jsx=n,Wl.jsxs=n,Wl}var V_;function J1(){return V_||(V_=1,dm.exports=$1()),dm.exports}var b=J1(),fm={exports:{}},Je={};var P_;function W1(){if(P_)return Je;P_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function A(k){return k===null||typeof k!="object"?null:(k=S&&k[S]||k["@@iterator"],typeof k=="function"?k:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,z={};function fe(k,q,W){this.props=k,this.context=q,this.refs=z,this.updater=W||L}fe.prototype.isReactComponent={},fe.prototype.setState=function(k,q){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,q,"setState")},fe.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function ce(){}ce.prototype=fe.prototype;function ne(k,q,W){this.props=k,this.context=q,this.refs=z,this.updater=W||L}var ye=ne.prototype=new ce;ye.constructor=ne,G(ye,fe.prototype),ye.isPureReactComponent=!0;var je=Array.isArray;function xe(){}var x={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function N(k,q,W){var ae=W.ref;return{$$typeof:i,type:k,key:q,ref:ae!==void 0?ae:null,props:W}}function V(k,q){return N(k.type,q,k.props)}function D(k){return typeof k=="object"&&k!==null&&k.$$typeof===i}function U(k){var q={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(W){return q[W]})}var I=/\/+/g;function Ve(k,q){return typeof k=="object"&&k!==null&&k.key!=null?U(""+k.key):q.toString(36)}function Xe(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(xe,xe):(k.status="pending",k.then(function(q){k.status==="pending"&&(k.status="fulfilled",k.value=q)},function(q){k.status==="pending"&&(k.status="rejected",k.reason=q)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function Q(k,q,W,ae,_e){var we=typeof k;(we==="undefined"||we==="boolean")&&(k=null);var Re=!1;if(k===null)Re=!0;else switch(we){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(k.$$typeof){case i:case e:Re=!0;break;case v:return Re=k._init,Q(Re(k._payload),q,W,ae,_e)}}if(Re)return _e=_e(k),Re=ae===""?"."+Ve(k,0):ae,je(_e)?(W="",Re!=null&&(W=Re.replace(I,"$&/")+"/"),Q(_e,q,W,"",function(Pe){return Pe})):_e!=null&&(D(_e)&&(_e=V(_e,W+(_e.key==null||k&&k.key===_e.key?"":(""+_e.key).replace(I,"$&/")+"/")+Re)),q.push(_e)),1;Re=0;var nt=ae===""?".":ae+":";if(je(k))for(var de=0;de<k.length;de++)ae=k[de],we=nt+Ve(ae,de),Re+=Q(ae,q,W,we,_e);else if(de=A(k),typeof de=="function")for(k=de.call(k),de=0;!(ae=k.next()).done;)ae=ae.value,we=nt+Ve(ae,de++),Re+=Q(ae,q,W,we,_e);else if(we==="object"){if(typeof k.then=="function")return Q(Xe(k),q,W,ae,_e);throw q=String(k),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return Re}function le(k,q,W){if(k==null)return k;var ae=[],_e=0;return Q(k,ae,"","",function(we){return q.call(W,we,_e++)}),ae}function ge(k){if(k._status===-1){var q=k._result;q=q(),q.then(function(W){(k._status===0||k._status===-1)&&(k._status=1,k._result=W)},function(W){(k._status===0||k._status===-1)&&(k._status=2,k._result=W)}),k._status===-1&&(k._status=0,k._result=q)}if(k._status===1)return k._result.default;throw k._result}var me=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},De={map:le,forEach:function(k,q,W){le(k,function(){q.apply(this,arguments)},W)},count:function(k){var q=0;return le(k,function(){q++}),q},toArray:function(k){return le(k,function(q){return q})||[]},only:function(k){if(!D(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return Je.Activity=T,Je.Children=De,Je.Component=fe,Je.Fragment=n,Je.Profiler=o,Je.PureComponent=ne,Je.StrictMode=s,Je.Suspense=p,Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,Je.__COMPILER_RUNTIME={__proto__:null,c:function(k){return x.H.useMemoCache(k)}},Je.cache=function(k){return function(){return k.apply(null,arguments)}},Je.cacheSignal=function(){return null},Je.cloneElement=function(k,q,W){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var ae=G({},k.props),_e=k.key;if(q!=null)for(we in q.key!==void 0&&(_e=""+q.key),q)!C.call(q,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&q.ref===void 0||(ae[we]=q[we]);var we=arguments.length-2;if(we===1)ae.children=W;else if(1<we){for(var Re=Array(we),nt=0;nt<we;nt++)Re[nt]=arguments[nt+2];ae.children=Re}return N(k.type,_e,ae)},Je.createContext=function(k){return k={$$typeof:d,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:u,_context:k},k},Je.createElement=function(k,q,W){var ae,_e={},we=null;if(q!=null)for(ae in q.key!==void 0&&(we=""+q.key),q)C.call(q,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(_e[ae]=q[ae]);var Re=arguments.length-2;if(Re===1)_e.children=W;else if(1<Re){for(var nt=Array(Re),de=0;de<Re;de++)nt[de]=arguments[de+2];_e.children=nt}if(k&&k.defaultProps)for(ae in Re=k.defaultProps,Re)_e[ae]===void 0&&(_e[ae]=Re[ae]);return N(k,we,_e)},Je.createRef=function(){return{current:null}},Je.forwardRef=function(k){return{$$typeof:g,render:k}},Je.isValidElement=D,Je.lazy=function(k){return{$$typeof:v,_payload:{_status:-1,_result:k},_init:ge}},Je.memo=function(k,q){return{$$typeof:m,type:k,compare:q===void 0?null:q}},Je.startTransition=function(k){var q=x.T,W={};x.T=W;try{var ae=k(),_e=x.S;_e!==null&&_e(W,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(xe,me)}catch(we){me(we)}finally{q!==null&&W.types!==null&&(q.types=W.types),x.T=q}},Je.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},Je.use=function(k){return x.H.use(k)},Je.useActionState=function(k,q,W){return x.H.useActionState(k,q,W)},Je.useCallback=function(k,q){return x.H.useCallback(k,q)},Je.useContext=function(k){return x.H.useContext(k)},Je.useDebugValue=function(){},Je.useDeferredValue=function(k,q){return x.H.useDeferredValue(k,q)},Je.useEffect=function(k,q){return x.H.useEffect(k,q)},Je.useEffectEvent=function(k){return x.H.useEffectEvent(k)},Je.useId=function(){return x.H.useId()},Je.useImperativeHandle=function(k,q,W){return x.H.useImperativeHandle(k,q,W)},Je.useInsertionEffect=function(k,q){return x.H.useInsertionEffect(k,q)},Je.useLayoutEffect=function(k,q){return x.H.useLayoutEffect(k,q)},Je.useMemo=function(k,q){return x.H.useMemo(k,q)},Je.useOptimistic=function(k,q){return x.H.useOptimistic(k,q)},Je.useReducer=function(k,q,W){return x.H.useReducer(k,q,W)},Je.useRef=function(k){return x.H.useRef(k)},Je.useState=function(k){return x.H.useState(k)},Je.useSyncExternalStore=function(k,q,W){return x.H.useSyncExternalStore(k,q,W)},Je.useTransition=function(){return x.H.useTransition()},Je.version="19.2.0",Je}var L_;function hp(){return L_||(L_=1,fm.exports=W1()),fm.exports}var X=hp();const he=cp(X);var mm={exports:{}},Zl={},pm={exports:{}},gm={};var U_;function Z1(){return U_||(U_=1,(function(i){function e(Q,le){var ge=Q.length;Q.push(le);e:for(;0<ge;){var me=ge-1>>>1,De=Q[me];if(0<o(De,le))Q[me]=le,Q[ge]=De,ge=me;else break e}}function n(Q){return Q.length===0?null:Q[0]}function s(Q){if(Q.length===0)return null;var le=Q[0],ge=Q.pop();if(ge!==le){Q[0]=ge;e:for(var me=0,De=Q.length,k=De>>>1;me<k;){var q=2*(me+1)-1,W=Q[q],ae=q+1,_e=Q[ae];if(0>o(W,ge))ae<De&&0>o(_e,W)?(Q[me]=_e,Q[ae]=ge,me=ae):(Q[me]=W,Q[q]=ge,me=q);else if(ae<De&&0>o(_e,ge))Q[me]=_e,Q[ae]=ge,me=ae;else break e}}return le}function o(Q,le){var ge=Q.sortIndex-le.sortIndex;return ge!==0?ge:Q.id-le.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,g=d.now();i.unstable_now=function(){return d.now()-g}}var p=[],m=[],v=1,T=null,S=3,A=!1,L=!1,G=!1,z=!1,fe=typeof setTimeout=="function"?setTimeout:null,ce=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function ye(Q){for(var le=n(m);le!==null;){if(le.callback===null)s(m);else if(le.startTime<=Q)s(m),le.sortIndex=le.expirationTime,e(p,le);else break;le=n(m)}}function je(Q){if(G=!1,ye(Q),!L)if(n(p)!==null)L=!0,xe||(xe=!0,U());else{var le=n(m);le!==null&&Xe(je,le.startTime-Q)}}var xe=!1,x=-1,C=5,N=-1;function V(){return z?!0:!(i.unstable_now()-N<C)}function D(){if(z=!1,xe){var Q=i.unstable_now();N=Q;var le=!0;try{e:{L=!1,G&&(G=!1,ce(x),x=-1),A=!0;var ge=S;try{t:{for(ye(Q),T=n(p);T!==null&&!(T.expirationTime>Q&&V());){var me=T.callback;if(typeof me=="function"){T.callback=null,S=T.priorityLevel;var De=me(T.expirationTime<=Q);if(Q=i.unstable_now(),typeof De=="function"){T.callback=De,ye(Q),le=!0;break t}T===n(p)&&s(p),ye(Q)}else s(p);T=n(p)}if(T!==null)le=!0;else{var k=n(m);k!==null&&Xe(je,k.startTime-Q),le=!1}}break e}finally{T=null,S=ge,A=!1}le=void 0}}finally{le?U():xe=!1}}}var U;if(typeof ne=="function")U=function(){ne(D)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Ve=I.port2;I.port1.onmessage=D,U=function(){Ve.postMessage(null)}}else U=function(){fe(D,0)};function Xe(Q,le){x=fe(function(){Q(i.unstable_now())},le)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Q){Q.callback=null},i.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Q?Math.floor(1e3/Q):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_next=function(Q){switch(S){case 1:case 2:case 3:var le=3;break;default:le=S}var ge=S;S=le;try{return Q()}finally{S=ge}},i.unstable_requestPaint=function(){z=!0},i.unstable_runWithPriority=function(Q,le){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ge=S;S=Q;try{return le()}finally{S=ge}},i.unstable_scheduleCallback=function(Q,le,ge){var me=i.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?me+ge:me):ge=me,Q){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=ge+De,Q={id:v++,callback:le,priorityLevel:Q,startTime:ge,expirationTime:De,sortIndex:-1},ge>me?(Q.sortIndex=ge,e(m,Q),n(p)===null&&Q===n(m)&&(G?(ce(x),x=-1):G=!0,Xe(je,ge-me))):(Q.sortIndex=De,e(p,Q),L||A||(L=!0,xe||(xe=!0,U()))),Q},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(Q){var le=S;return function(){var ge=S;S=le;try{return Q.apply(this,arguments)}finally{S=ge}}}})(gm)),gm}var j_;function ew(){return j_||(j_=1,pm.exports=Z1()),pm.exports}var ym={exports:{}},Jn={};var z_;function tw(){if(z_)return Jn;z_=1;var i=hp();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,m,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:p,containerInfo:m,implementation:v}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Jn.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return u(p,m,null,v)},Jn.flushSync=function(p){var m=d.T,v=s.p;try{if(d.T=null,s.p=2,p)return p()}finally{d.T=m,s.p=v,s.d.f()}},Jn.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(p,m))},Jn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Jn.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,T=g(v,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,A=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:A}):v==="script"&&s.d.X(p,{crossOrigin:T,integrity:S,fetchPriority:A,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Jn.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=g(m.as,m.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(p)},Jn.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,T=g(v,m.crossOrigin);s.d.L(p,v,{crossOrigin:T,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Jn.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=g(m.as,m.crossOrigin);s.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(p)},Jn.requestFormReset=function(p){s.d.r(p)},Jn.unstable_batchedUpdates=function(p,m){return p(m)},Jn.useFormState=function(p,m,v){return d.H.useFormState(p,m,v)},Jn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Jn.version="19.2.0",Jn}var B_;function DE(){if(B_)return ym.exports;B_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),ym.exports=tw(),ym.exports}var q_;function nw(){if(q_)return Zl;q_=1;var i=ew(),e=hp(),n=DE();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function p(t){if(u(t)!==t)throw Error(s(188))}function m(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return p(h),t;if(f===l)return p(h),r;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=f;else{for(var _=!1,w=h.child;w;){if(w===a){_=!0,a=h,l=f;break}if(w===l){_=!0,l=h,a=f;break}w=w.sibling}if(!_){for(w=f.child;w;){if(w===a){_=!0,a=f,l=h;break}if(w===l){_=!0,l=f,a=h;break}w=w.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function v(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=v(t),r!==null)return r;t=t.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),fe=Symbol.for("react.profiler"),ce=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),ye=Symbol.for("react.forward_ref"),je=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function U(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function Ve(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case G:return"Fragment";case fe:return"Profiler";case z:return"StrictMode";case je:return"Suspense";case xe:return"SuspenseList";case N:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case L:return"Portal";case ne:return t.displayName||"Context";case ce:return(t._context.displayName||"Context")+".Consumer";case ye:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case x:return r=t.displayName||null,r!==null?r:Ve(t.type)||"Memo";case C:r=t._payload,t=t._init;try{return Ve(t(r))}catch{}}return null}var Xe=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},me=[],De=-1;function k(t){return{current:t}}function q(t){0>De||(t.current=me[De],me[De]=null,De--)}function W(t,r){De++,me[De]=t.current,t.current=r}var ae=k(null),_e=k(null),we=k(null),Re=k(null);function nt(t,r){switch(W(we,r),W(_e,t),W(ae,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?r_(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=r_(r),t=i_(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}q(ae),W(ae,t)}function de(){q(ae),q(_e),q(we)}function Pe(t){t.memoizedState!==null&&W(Re,t);var r=ae.current,a=i_(r,t.type);r!==a&&(W(_e,t),W(ae,a))}function Qe(t){_e.current===t&&(q(ae),q(_e)),Re.current===t&&(q(Re),Yl._currentValue=ge)}var mt,ie;function ue(t){if(mt===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);mt=r&&r[1]||"",ie=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mt+t+ie}var ve=!1;function re(t,r){if(!t||ve)return"";ve=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch($){var K=$}Reflect.construct(t,[],te)}else{try{te.call()}catch($){K=$}t.call(te.prototype)}}else{try{throw Error()}catch($){K=$}(te=t())&&typeof te.catch=="function"&&te.catch(function(){})}}catch($){if($&&K&&typeof $.stack=="string")return[$.stack,K.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),_=f[0],w=f[1];if(_&&w){var O=_.split(`
`),H=w.split(`
`);for(h=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;h<H.length&&!H[h].includes("DetermineComponentFrameRoot");)h++;if(l===O.length||h===H.length)for(l=O.length-1,h=H.length-1;1<=l&&0<=h&&O[l]!==H[h];)h--;for(;1<=l&&0<=h;l--,h--)if(O[l]!==H[h]){if(l!==1||h!==1)do if(l--,h--,0>h||O[l]!==H[h]){var J=`
`+O[l].replace(" at new "," at ");return t.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",t.displayName)),J}while(1<=l&&0<=h);break}}}finally{ve=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ue(a):""}function be(t,r){switch(t.tag){case 26:case 27:case 5:return ue(t.type);case 16:return ue("Lazy");case 13:return t.child!==r&&r!==null?ue("Suspense Fallback"):ue("Suspense");case 19:return ue("SuspenseList");case 0:case 15:return re(t.type,!1);case 11:return re(t.type.render,!1);case 1:return re(t.type,!0);case 31:return ue("Activity");default:return""}}function Ce(t){try{var r="",a=null;do r+=be(t,a),a=t,t=t.return;while(t);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ie=Object.prototype.hasOwnProperty,Te=i.unstable_scheduleCallback,qe=i.unstable_cancelCallback,zt=i.unstable_shouldYield,gt=i.unstable_requestPaint,_t=i.unstable_now,In=i.unstable_getCurrentPriorityLevel,xt=i.unstable_ImmediatePriority,ln=i.unstable_UserBlockingPriority,ze=i.unstable_NormalPriority,lt=i.unstable_LowPriority,Nn=i.unstable_IdlePriority,Yn=i.log,Pn=i.unstable_setDisableYieldValue,$t=null,Vt=null;function tn(t){if(typeof Yn=="function"&&Pn(t),Vt&&typeof Vt.setStrictMode=="function")try{Vt.setStrictMode($t,t)}catch{}}var Et=Math.clz32?Math.clz32:xn,oi=Math.log,wn=Math.LN2;function xn(t){return t>>>=0,t===0?32:31-(oi(t)/wn|0)|0}var Jt=256,Er=262144,Ft=4194304;function un(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ar(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,f=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var w=l&134217727;return w!==0?(l=w&~f,l!==0?h=un(l):(_&=w,_!==0?h=un(_):a||(a=w&~t,a!==0&&(h=un(a))))):(w=l&~f,w!==0?h=un(w):_!==0?h=un(_):a||(a=l&~t,a!==0&&(h=un(a)))),h===0?0:r!==0&&r!==h&&(r&f)===0&&(f=h&-h,a=r&-r,f>=a||f===32&&(a&4194048)!==0)?r:h}function Oe(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function yt(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function St(){var t=Ft;return Ft<<=1,(Ft&62914560)===0&&(Ft=4194304),t}function Wt(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function cn(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function or(t,r,a,l,h,f){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,O=t.expirationTimes,H=t.hiddenUpdates;for(a=_&~a;0<a;){var J=31-Et(a),te=1<<J;w[J]=0,O[J]=-1;var K=H[J];if(K!==null)for(H[J]=null,J=0;J<K.length;J++){var $=K[J];$!==null&&($.lane&=-536870913)}a&=~te}l!==0&&Ln(t,l,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(_&~r))}function Ln(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Et(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function An(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Et(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function Xn(t,r){var a=r&-r;return a=(a&42)!==0?1:Mi(a),(a&(t.suspendedLanes|r))!==0?0:a}function Mi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Yr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Qa(){var t=le.p;return t!==0?t:(t=window.event,t===void 0?32:C_(t.type))}function Tr(t,r){var a=le.p;try{return le.p=t,r()}finally{le.p=a}}var br=Math.random().toString(36).slice(2),M="__reactFiber$"+br,oe="__reactProps$"+br,Se="__reactContainer$"+br,ke="__reactEvents$"+br,Ye="__reactListeners$"+br,wt="__reactHandles$"+br,it="__reactResources$"+br,rt="__reactMarker$"+br;function Bt(t){delete t[M],delete t[oe],delete t[ke],delete t[Ye],delete t[wt]}function hn(t){var r=t[M];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Se]||a[M]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=h_(t);t!==null;){if(a=t[M])return a;t=h_(t)}return r}t=a,a=t.parentNode}return null}function Kt(t){if(t=t[M]||t[Se]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function Dt(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function Un(t){var r=t[it];return r||(r=t[it]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ht(t){t[rt]=!0}var $n=new Set,rr={};function kr(t,r){li(t,r),li(t+"Capture",r)}function li(t,r){for(rr[t]=r,t=0;t<r.length;t++)$n.add(r[t])}var rl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),il={},sl={};function Uu(t){return Ie.call(sl,t)?!0:Ie.call(il,t)?!1:rl.test(t)?sl[t]=!0:(il[t]=!0,!1)}function Ya(t,r,a){if(Uu(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function Sr(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function gn(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}function Dn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ls(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function al(t,r,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,f=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(_){a=""+_,f.call(this,_)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Mt(t){if(!t._valueTracker){var r=ls(t)?"checked":"value";t._valueTracker=al(t,r,""+t[r])}}function la(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=ls(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function ui(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ua=/[\n"\\]/g;function lr(t){return t.replace(ua,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Xa(t,r,a,l,h,f,_,w){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),r!=null?_==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+Dn(r)):t.value!==""+Dn(r)&&(t.value=""+Dn(r)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),r!=null?ol(t,_,Dn(r)):a!=null?ol(t,_,Dn(a)):l!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+Dn(w):t.removeAttribute("name")}function ju(t,r,a,l,h,f,_,w){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),r!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||r!=null)){Mt(t);return}a=a!=null?""+Dn(a):"",r=r!=null?""+Dn(r):a,w||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=w?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),Mt(t)}function ol(t,r,a){r==="number"&&ui(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function us(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Dn(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function zu(t,r,a){if(r!=null&&(r=""+Dn(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+Dn(a):""}function cs(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(Xe(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=Dn(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Mt(t)}function ur(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var Bu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ll(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||Bu.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function ul(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&ll(t,h,l)}else for(var f in r)r.hasOwnProperty(f)&&ll(t,f,r[f])}function $a(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ja(t){return hs.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Xr(){}var cl=null;function Vr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ds=null,ci=null;function ca(t){var r=Kt(t);if(r&&(t=r.stateNode)){var a=t[oe]||null;e:switch(t=r.stateNode,r.type){case"input":if(Xa(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+lr(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[oe]||null;if(!h)throw Error(s(90));Xa(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&la(l)}break e;case"textarea":zu(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&us(t,!!a.multiple,r,!1)}}}var Wa=!1;function fs(t,r,a){if(Wa)return t(r,a);Wa=!0;try{var l=t(r);return l}finally{if(Wa=!1,(ds!==null||ci!==null)&&(Vc(),ds&&(r=ds,t=ci,ci=ds=null,ca(r),t)))for(r=0;r<t.length;r++)ca(t[r])}}function $r(t,r){var a=t.stateNode;if(a===null)return null;var l=a[oe]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ha=!1;if(Pr)try{var Pt={};Object.defineProperty(Pt,"passive",{get:function(){ha=!0}}),window.addEventListener("test",Pt,Pt),window.removeEventListener("test",Pt,Pt)}catch{ha=!1}var hi=null,hl=null,da=null;function dl(){if(da)return da;var t,r=hl,a=r.length,l,h="value"in hi?hi.value:hi.textContent,f=h.length;for(t=0;t<a&&r[t]===h[t];t++);var _=a-t;for(l=1;l<=_&&r[a-l]===h[f-l];l++);return da=h.slice(t,1<l?1-l:void 0)}function fa(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Oi(){return!0}function Jr(){return!1}function jn(t){function r(a,l,h,f,_){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=_,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Oi:Jr,this.isPropagationStopped=Jr,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Oi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Oi)},persist:function(){},isPersistent:Oi}),r}var ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},di=jn(ki),ms=T({},ki,{view:0,detail:0}),fl=jn(ms),ps,Za,fi,eo=T({},ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fi&&(fi&&t.type==="mousemove"?(ps=t.screenX-fi.screenX,Za=t.screenY-fi.screenY):Za=ps=0,fi=t),ps)},movementY:function(t){return"movementY"in t?t.movementY:Za}}),ml=jn(eo),ma=T({},eo,{dataTransfer:0}),Fu=jn(ma),Hu=T({},ms,{relatedTarget:0}),pa=jn(Hu),pl=T({},ki,{animationName:0,elapsedTime:0,pseudoElement:0}),Gu=jn(pl),to=T({},ki,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ku=jn(to),Qu=T({},ki,{data:0}),mi=jn(Qu),Yu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$u={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ju(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=$u[t])?!!r[t]:!1}function gs(){return Ju}var ir=T({},ms,{key:function(t){if(t.key){var r=Yu[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=fa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Xu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gs,charCode:function(t){return t.type==="keypress"?fa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Wu=jn(ir),Zu=T({},eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vi=jn(Zu),c=T({},ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gs}),y=jn(c),E=T({},ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=jn(E),B=T({},eo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=jn(B),pe=T({},ki,{newState:0,oldState:0}),Ze=jn(pe),dn=[9,13,27,32],At=Pr&&"CompositionEvent"in window,Zt=null;Pr&&"documentMode"in document&&(Zt=document.documentMode);var Lr=Pr&&"TextEvent"in window&&!Zt,pi=Pr&&(!At||Zt&&8<Zt&&11>=Zt),Wr=" ",Zr=!1;function ga(t,r){switch(t){case"keyup":return dn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function no(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ro=!1;function ES(t,r){switch(t){case"compositionend":return no(r);case"keypress":return r.which!==32?null:(Zr=!0,Wr);case"textInput":return t=r.data,t===Wr&&Zr?null:t;default:return null}}function TS(t,r){if(ro)return t==="compositionend"||!At&&ga(t,r)?(t=dl(),da=hl=hi=null,ro=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return pi&&r.locale!=="ko"?null:r.data;default:return null}}var bS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mg(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!bS[t.type]:r==="textarea"}function pg(t,r,a,l){ds?ci?ci.push(l):ci=[l]:ds=l,r=qc(r,"onChange"),0<r.length&&(a=new di("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var gl=null,yl=null;function SS(t){Jv(t,0)}function ec(t){var r=Dt(t);if(la(r))return t}function gg(t,r){if(t==="change")return r}var yg=!1;if(Pr){var vd;if(Pr){var _d="oninput"in document;if(!_d){var vg=document.createElement("div");vg.setAttribute("oninput","return;"),_d=typeof vg.oninput=="function"}vd=_d}else vd=!1;yg=vd&&(!document.documentMode||9<document.documentMode)}function _g(){gl&&(gl.detachEvent("onpropertychange",Eg),yl=gl=null)}function Eg(t){if(t.propertyName==="value"&&ec(yl)){var r=[];pg(r,yl,t,Vr(t)),fs(SS,r)}}function wS(t,r,a){t==="focusin"?(_g(),gl=r,yl=a,gl.attachEvent("onpropertychange",Eg)):t==="focusout"&&_g()}function AS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ec(yl)}function RS(t,r){if(t==="click")return ec(r)}function CS(t,r){if(t==="input"||t==="change")return ec(r)}function IS(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var wr=typeof Object.is=="function"?Object.is:IS;function vl(t,r){if(wr(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Ie.call(r,h)||!wr(t[h],r[h]))return!1}return!0}function Tg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function bg(t,r){var a=Tg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Tg(a)}}function Sg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Sg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function wg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=ui(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=ui(t.document)}return r}function Ed(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var NS=Pr&&"documentMode"in document&&11>=document.documentMode,io=null,Td=null,_l=null,bd=!1;function Ag(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;bd||io==null||io!==ui(l)||(l=io,"selectionStart"in l&&Ed(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),_l&&vl(_l,l)||(_l=l,l=qc(Td,"onSelect"),0<l.length&&(r=new di("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=io)))}function ya(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var so={animationend:ya("Animation","AnimationEnd"),animationiteration:ya("Animation","AnimationIteration"),animationstart:ya("Animation","AnimationStart"),transitionrun:ya("Transition","TransitionRun"),transitionstart:ya("Transition","TransitionStart"),transitioncancel:ya("Transition","TransitionCancel"),transitionend:ya("Transition","TransitionEnd")},Sd={},Rg={};Pr&&(Rg=document.createElement("div").style,"AnimationEvent"in window||(delete so.animationend.animation,delete so.animationiteration.animation,delete so.animationstart.animation),"TransitionEvent"in window||delete so.transitionend.transition);function va(t){if(Sd[t])return Sd[t];if(!so[t])return t;var r=so[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Rg)return Sd[t]=r[a];return t}var Cg=va("animationend"),Ig=va("animationiteration"),Ng=va("animationstart"),xS=va("transitionrun"),DS=va("transitionstart"),MS=va("transitioncancel"),xg=va("transitionend"),Dg=new Map,wd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wd.push("scrollEnd");function ei(t,r){Dg.set(t,r),kr(r,[t])}var tc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ur=[],ao=0,Ad=0;function nc(){for(var t=ao,r=Ad=ao=0;r<t;){var a=Ur[r];Ur[r++]=null;var l=Ur[r];Ur[r++]=null;var h=Ur[r];Ur[r++]=null;var f=Ur[r];if(Ur[r++]=null,l!==null&&h!==null){var _=l.pending;_===null?h.next=h:(h.next=_.next,_.next=h),l.pending=h}f!==0&&Mg(a,h,f)}}function rc(t,r,a,l){Ur[ao++]=t,Ur[ao++]=r,Ur[ao++]=a,Ur[ao++]=l,Ad|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Rd(t,r,a,l){return rc(t,r,a,l),ic(t)}function _a(t,r){return rc(t,null,null,r),ic(t)}function Mg(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&r!==null&&(h=31-Et(a),t=f.hiddenUpdates,l=t[h],l===null?t[h]=[r]:l.push(r),r.lane=a|536870912),f):null}function ic(t){if(50<Bl)throw Bl=0,Pf=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var oo={};function OS(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ar(t,r,a,l){return new OS(t,r,a,l)}function Cd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Pi(t,r){var a=t.alternate;return a===null?(a=Ar(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Og(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function sc(t,r,a,l,h,f){var _=0;if(l=t,typeof t=="function")Cd(t)&&(_=1);else if(typeof t=="string")_=U1(t,a,ae.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case N:return t=Ar(31,a,r,h),t.elementType=N,t.lanes=f,t;case G:return Ea(a.children,h,f,r);case z:_=8,h|=24;break;case fe:return t=Ar(12,a,r,h|2),t.elementType=fe,t.lanes=f,t;case je:return t=Ar(13,a,r,h),t.elementType=je,t.lanes=f,t;case xe:return t=Ar(19,a,r,h),t.elementType=xe,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ne:_=10;break e;case ce:_=9;break e;case ye:_=11;break e;case x:_=14;break e;case C:_=16,l=null;break e}_=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=Ar(_,a,r,h),r.elementType=t,r.type=l,r.lanes=f,r}function Ea(t,r,a,l){return t=Ar(7,t,l,r),t.lanes=a,t}function Id(t,r,a){return t=Ar(6,t,null,r),t.lanes=a,t}function kg(t){var r=Ar(18,null,null,0);return r.stateNode=t,r}function Nd(t,r,a){return r=Ar(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Vg=new WeakMap;function jr(t,r){if(typeof t=="object"&&t!==null){var a=Vg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:Ce(r)},Vg.set(t,r),r)}return{value:t,source:r,stack:Ce(r)}}var lo=[],uo=0,ac=null,El=0,zr=[],Br=0,ys=null,gi=1,yi="";function Li(t,r){lo[uo++]=El,lo[uo++]=ac,ac=t,El=r}function Pg(t,r,a){zr[Br++]=gi,zr[Br++]=yi,zr[Br++]=ys,ys=t;var l=gi;t=yi;var h=32-Et(l)-1;l&=~(1<<h),a+=1;var f=32-Et(r)+h;if(30<f){var _=h-h%5;f=(l&(1<<_)-1).toString(32),l>>=_,h-=_,gi=1<<32-Et(r)+h|a<<h|l,yi=f+t}else gi=1<<f|a<<h|l,yi=t}function xd(t){t.return!==null&&(Li(t,1),Pg(t,1,0))}function Dd(t){for(;t===ac;)ac=lo[--uo],lo[uo]=null,El=lo[--uo],lo[uo]=null;for(;t===ys;)ys=zr[--Br],zr[Br]=null,yi=zr[--Br],zr[Br]=null,gi=zr[--Br],zr[Br]=null}function Lg(t,r){zr[Br++]=gi,zr[Br++]=yi,zr[Br++]=ys,gi=r.id,yi=r.overflow,ys=t}var zn=null,Qt=null,pt=!1,vs=null,qr=!1,Md=Error(s(519));function _s(t){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Tl(jr(r,t)),Md}function Ug(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[M]=t,r[oe]=l,a){case"dialog":at("cancel",r),at("close",r);break;case"iframe":case"object":case"embed":at("load",r);break;case"video":case"audio":for(a=0;a<Fl.length;a++)at(Fl[a],r);break;case"source":at("error",r);break;case"img":case"image":case"link":at("error",r),at("load",r);break;case"details":at("toggle",r);break;case"input":at("invalid",r),ju(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":at("invalid",r);break;case"textarea":at("invalid",r),cs(r,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||t_(r.textContent,a)?(l.popover!=null&&(at("beforetoggle",r),at("toggle",r)),l.onScroll!=null&&at("scroll",r),l.onScrollEnd!=null&&at("scrollend",r),l.onClick!=null&&(r.onclick=Xr),r=!0):r=!1,r||_s(t,!0)}function jg(t){for(zn=t.return;zn;)switch(zn.tag){case 5:case 31:case 13:qr=!1;return;case 27:case 3:qr=!0;return;default:zn=zn.return}}function co(t){if(t!==zn)return!1;if(!pt)return jg(t),pt=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Jf(t.type,t.memoizedProps)),a=!a),a&&Qt&&_s(t),jg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Qt=c_(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Qt=c_(t)}else r===27?(r=Qt,Os(t.type)?(t=nm,nm=null,Qt=t):Qt=r):Qt=zn?Hr(t.stateNode.nextSibling):null;return!0}function Ta(){Qt=zn=null,pt=!1}function Od(){var t=vs;return t!==null&&(fr===null?fr=t:fr.push.apply(fr,t),vs=null),t}function Tl(t){vs===null?vs=[t]:vs.push(t)}var kd=k(null),ba=null,Ui=null;function Es(t,r,a){W(kd,r._currentValue),r._currentValue=a}function ji(t){t._currentValue=kd.current,q(kd)}function Vd(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function Pd(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var _=h.child;f=f.firstContext;e:for(;f!==null;){var w=f;f=h;for(var O=0;O<r.length;O++)if(w.context===r[O]){f.lanes|=a,w=f.alternate,w!==null&&(w.lanes|=a),Vd(f.return,a,t),l||(_=null);break e}f=w.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(s(341));_.lanes|=a,f=_.alternate,f!==null&&(f.lanes|=a),Vd(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function ho(t,r,a,l){t=null;for(var h=r,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var w=h.type;wr(h.pendingProps.value,_.value)||(t!==null?t.push(w):t=[w])}}else if(h===Re.current){if(_=h.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Yl):t=[Yl])}h=h.return}t!==null&&Pd(r,t,a,l),r.flags|=262144}function oc(t){for(t=t.firstContext;t!==null;){if(!wr(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Sa(t){ba=t,Ui=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Bn(t){return zg(ba,t)}function lc(t,r){return ba===null&&Sa(t),zg(t,r)}function zg(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Ui===null){if(t===null)throw Error(s(308));Ui=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Ui=Ui.next=r;return a}var kS=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},VS=i.unstable_scheduleCallback,PS=i.unstable_NormalPriority,yn={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ld(){return{controller:new kS,data:new Map,refCount:0}}function bl(t){t.refCount--,t.refCount===0&&VS(PS,function(){t.controller.abort()})}var Sl=null,Ud=0,fo=0,mo=null;function LS(t,r){if(Sl===null){var a=Sl=[];Ud=0,fo=qf(),mo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Ud++,r.then(Bg,Bg),r}function Bg(){if(--Ud===0&&Sl!==null){mo!==null&&(mo.status="fulfilled");var t=Sl;Sl=null,fo=0,mo=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function US(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var qg=Q.S;Q.S=function(t,r){Av=_t(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&LS(t,r),qg!==null&&qg(t,r)};var wa=k(null);function jd(){var t=wa.current;return t!==null?t:qt.pooledCache}function uc(t,r){r===null?W(wa,wa.current):W(wa,r.pool)}function Fg(){var t=jd();return t===null?null:{parent:yn._currentValue,pool:t}}var po=Error(s(460)),zd=Error(s(474)),cc=Error(s(542)),hc={then:function(){}};function Hg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Gg(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(Xr,Xr),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Qg(t),t;default:if(typeof r.status=="string")r.then(Xr,Xr);else{if(t=qt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Qg(t),t}throw Ra=r,po}}function Aa(t){try{var r=t._init;return r(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ra=a,po):a}}var Ra=null;function Kg(){if(Ra===null)throw Error(s(459));var t=Ra;return Ra=null,t}function Qg(t){if(t===po||t===cc)throw Error(s(483))}var go=null,wl=0;function dc(t){var r=wl;return wl+=1,go===null&&(go=[]),Gg(go,t,r)}function Al(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function fc(t,r){throw r.$$typeof===S?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Yg(t){function r(j,P){if(t){var F=j.deletions;F===null?(j.deletions=[P],j.flags|=16):F.push(P)}}function a(j,P){if(!t)return null;for(;P!==null;)r(j,P),P=P.sibling;return null}function l(j){for(var P=new Map;j!==null;)j.key!==null?P.set(j.key,j):P.set(j.index,j),j=j.sibling;return P}function h(j,P){return j=Pi(j,P),j.index=0,j.sibling=null,j}function f(j,P,F){return j.index=F,t?(F=j.alternate,F!==null?(F=F.index,F<P?(j.flags|=67108866,P):F):(j.flags|=67108866,P)):(j.flags|=1048576,P)}function _(j){return t&&j.alternate===null&&(j.flags|=67108866),j}function w(j,P,F,Z){return P===null||P.tag!==6?(P=Id(F,j.mode,Z),P.return=j,P):(P=h(P,F),P.return=j,P)}function O(j,P,F,Z){var Le=F.type;return Le===G?J(j,P,F.props.children,Z,F.key):P!==null&&(P.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===C&&Aa(Le)===P.type)?(P=h(P,F.props),Al(P,F),P.return=j,P):(P=sc(F.type,F.key,F.props,null,j.mode,Z),Al(P,F),P.return=j,P)}function H(j,P,F,Z){return P===null||P.tag!==4||P.stateNode.containerInfo!==F.containerInfo||P.stateNode.implementation!==F.implementation?(P=Nd(F,j.mode,Z),P.return=j,P):(P=h(P,F.children||[]),P.return=j,P)}function J(j,P,F,Z,Le){return P===null||P.tag!==7?(P=Ea(F,j.mode,Z,Le),P.return=j,P):(P=h(P,F),P.return=j,P)}function te(j,P,F){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=Id(""+P,j.mode,F),P.return=j,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case A:return F=sc(P.type,P.key,P.props,null,j.mode,F),Al(F,P),F.return=j,F;case L:return P=Nd(P,j.mode,F),P.return=j,P;case C:return P=Aa(P),te(j,P,F)}if(Xe(P)||U(P))return P=Ea(P,j.mode,F,null),P.return=j,P;if(typeof P.then=="function")return te(j,dc(P),F);if(P.$$typeof===ne)return te(j,lc(j,P),F);fc(j,P)}return null}function K(j,P,F,Z){var Le=P!==null?P.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return Le!==null?null:w(j,P,""+F,Z);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case A:return F.key===Le?O(j,P,F,Z):null;case L:return F.key===Le?H(j,P,F,Z):null;case C:return F=Aa(F),K(j,P,F,Z)}if(Xe(F)||U(F))return Le!==null?null:J(j,P,F,Z,null);if(typeof F.then=="function")return K(j,P,dc(F),Z);if(F.$$typeof===ne)return K(j,P,lc(j,F),Z);fc(j,F)}return null}function $(j,P,F,Z,Le){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return j=j.get(F)||null,w(P,j,""+Z,Le);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:return j=j.get(Z.key===null?F:Z.key)||null,O(P,j,Z,Le);case L:return j=j.get(Z.key===null?F:Z.key)||null,H(P,j,Z,Le);case C:return Z=Aa(Z),$(j,P,F,Z,Le)}if(Xe(Z)||U(Z))return j=j.get(F)||null,J(P,j,Z,Le,null);if(typeof Z.then=="function")return $(j,P,F,dc(Z),Le);if(Z.$$typeof===ne)return $(j,P,F,lc(P,Z),Le);fc(P,Z)}return null}function Ne(j,P,F,Z){for(var Le=null,Tt=null,Me=P,tt=P=0,ct=null;Me!==null&&tt<F.length;tt++){Me.index>tt?(ct=Me,Me=null):ct=Me.sibling;var bt=K(j,Me,F[tt],Z);if(bt===null){Me===null&&(Me=ct);break}t&&Me&&bt.alternate===null&&r(j,Me),P=f(bt,P,tt),Tt===null?Le=bt:Tt.sibling=bt,Tt=bt,Me=ct}if(tt===F.length)return a(j,Me),pt&&Li(j,tt),Le;if(Me===null){for(;tt<F.length;tt++)Me=te(j,F[tt],Z),Me!==null&&(P=f(Me,P,tt),Tt===null?Le=Me:Tt.sibling=Me,Tt=Me);return pt&&Li(j,tt),Le}for(Me=l(Me);tt<F.length;tt++)ct=$(Me,j,tt,F[tt],Z),ct!==null&&(t&&ct.alternate!==null&&Me.delete(ct.key===null?tt:ct.key),P=f(ct,P,tt),Tt===null?Le=ct:Tt.sibling=ct,Tt=ct);return t&&Me.forEach(function(Us){return r(j,Us)}),pt&&Li(j,tt),Le}function Fe(j,P,F,Z){if(F==null)throw Error(s(151));for(var Le=null,Tt=null,Me=P,tt=P=0,ct=null,bt=F.next();Me!==null&&!bt.done;tt++,bt=F.next()){Me.index>tt?(ct=Me,Me=null):ct=Me.sibling;var Us=K(j,Me,bt.value,Z);if(Us===null){Me===null&&(Me=ct);break}t&&Me&&Us.alternate===null&&r(j,Me),P=f(Us,P,tt),Tt===null?Le=Us:Tt.sibling=Us,Tt=Us,Me=ct}if(bt.done)return a(j,Me),pt&&Li(j,tt),Le;if(Me===null){for(;!bt.done;tt++,bt=F.next())bt=te(j,bt.value,Z),bt!==null&&(P=f(bt,P,tt),Tt===null?Le=bt:Tt.sibling=bt,Tt=bt);return pt&&Li(j,tt),Le}for(Me=l(Me);!bt.done;tt++,bt=F.next())bt=$(Me,j,tt,bt.value,Z),bt!==null&&(t&&bt.alternate!==null&&Me.delete(bt.key===null?tt:bt.key),P=f(bt,P,tt),Tt===null?Le=bt:Tt.sibling=bt,Tt=bt);return t&&Me.forEach(function(X1){return r(j,X1)}),pt&&Li(j,tt),Le}function jt(j,P,F,Z){if(typeof F=="object"&&F!==null&&F.type===G&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case A:e:{for(var Le=F.key;P!==null;){if(P.key===Le){if(Le=F.type,Le===G){if(P.tag===7){a(j,P.sibling),Z=h(P,F.props.children),Z.return=j,j=Z;break e}}else if(P.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===C&&Aa(Le)===P.type){a(j,P.sibling),Z=h(P,F.props),Al(Z,F),Z.return=j,j=Z;break e}a(j,P);break}else r(j,P);P=P.sibling}F.type===G?(Z=Ea(F.props.children,j.mode,Z,F.key),Z.return=j,j=Z):(Z=sc(F.type,F.key,F.props,null,j.mode,Z),Al(Z,F),Z.return=j,j=Z)}return _(j);case L:e:{for(Le=F.key;P!==null;){if(P.key===Le)if(P.tag===4&&P.stateNode.containerInfo===F.containerInfo&&P.stateNode.implementation===F.implementation){a(j,P.sibling),Z=h(P,F.children||[]),Z.return=j,j=Z;break e}else{a(j,P);break}else r(j,P);P=P.sibling}Z=Nd(F,j.mode,Z),Z.return=j,j=Z}return _(j);case C:return F=Aa(F),jt(j,P,F,Z)}if(Xe(F))return Ne(j,P,F,Z);if(U(F)){if(Le=U(F),typeof Le!="function")throw Error(s(150));return F=Le.call(F),Fe(j,P,F,Z)}if(typeof F.then=="function")return jt(j,P,dc(F),Z);if(F.$$typeof===ne)return jt(j,P,lc(j,F),Z);fc(j,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,P!==null&&P.tag===6?(a(j,P.sibling),Z=h(P,F),Z.return=j,j=Z):(a(j,P),Z=Id(F,j.mode,Z),Z.return=j,j=Z),_(j)):a(j,P)}return function(j,P,F,Z){try{wl=0;var Le=jt(j,P,F,Z);return go=null,Le}catch(Me){if(Me===po||Me===cc)throw Me;var Tt=Ar(29,Me,null,j.mode);return Tt.lanes=Z,Tt.return=j,Tt}finally{}}}var Ca=Yg(!0),Xg=Yg(!1),Ts=!1;function Bd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qd(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function bs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ss(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Rt&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=ic(t),Mg(t,null,a),r}return rc(t,l,r,a),ic(t)}function Rl(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,An(t,a)}}function Fd(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=_:f=f.next=_,a=a.next}while(a!==null);f===null?h=f=r:f=f.next=r}else h=f=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var Hd=!1;function Cl(){if(Hd){var t=mo;if(t!==null)throw t}}function Il(t,r,a,l){Hd=!1;var h=t.updateQueue;Ts=!1;var f=h.firstBaseUpdate,_=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var O=w,H=O.next;O.next=null,_===null?f=H:_.next=H,_=O;var J=t.alternate;J!==null&&(J=J.updateQueue,w=J.lastBaseUpdate,w!==_&&(w===null?J.firstBaseUpdate=H:w.next=H,J.lastBaseUpdate=O))}if(f!==null){var te=h.baseState;_=0,J=H=O=null,w=f;do{var K=w.lane&-536870913,$=K!==w.lane;if($?(ut&K)===K:(l&K)===K){K!==0&&K===fo&&(Hd=!0),J!==null&&(J=J.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Ne=t,Fe=w;K=r;var jt=a;switch(Fe.tag){case 1:if(Ne=Fe.payload,typeof Ne=="function"){te=Ne.call(jt,te,K);break e}te=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Fe.payload,K=typeof Ne=="function"?Ne.call(jt,te,K):Ne,K==null)break e;te=T({},te,K);break e;case 2:Ts=!0}}K=w.callback,K!==null&&(t.flags|=64,$&&(t.flags|=8192),$=h.callbacks,$===null?h.callbacks=[K]:$.push(K))}else $={lane:K,tag:w.tag,payload:w.payload,callback:w.callback,next:null},J===null?(H=J=$,O=te):J=J.next=$,_|=K;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;$=w,w=$.next,$.next=null,h.lastBaseUpdate=$,h.shared.pending=null}}while(!0);J===null&&(O=te),h.baseState=O,h.firstBaseUpdate=H,h.lastBaseUpdate=J,f===null&&(h.shared.lanes=0),Is|=_,t.lanes=_,t.memoizedState=te}}function $g(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function Jg(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)$g(a[t],r)}var yo=k(null),mc=k(0);function Wg(t,r){t=Yi,W(mc,t),W(yo,r),Yi=t|r.baseLanes}function Gd(){W(mc,Yi),W(yo,yo.current)}function Kd(){Yi=mc.current,q(yo),q(mc)}var Rr=k(null),Fr=null;function ws(t){var r=t.alternate;W(fn,fn.current&1),W(Rr,t),Fr===null&&(r===null||yo.current!==null||r.memoizedState!==null)&&(Fr=t)}function Qd(t){W(fn,fn.current),W(Rr,t),Fr===null&&(Fr=t)}function Zg(t){t.tag===22?(W(fn,fn.current),W(Rr,t),Fr===null&&(Fr=t)):As()}function As(){W(fn,fn.current),W(Rr,Rr.current)}function Cr(t){q(Rr),Fr===t&&(Fr=null),q(fn)}var fn=k(0);function pc(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||em(a)||tm(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var zi=0,et=null,Lt=null,vn=null,gc=!1,vo=!1,Ia=!1,yc=0,Nl=0,_o=null,jS=0;function rn(){throw Error(s(321))}function Yd(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!wr(t[a],r[a]))return!1;return!0}function Xd(t,r,a,l,h,f){return zi=f,et=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Q.H=t===null||t.memoizedState===null?Py:hf,Ia=!1,f=a(l,h),Ia=!1,vo&&(f=ty(r,a,l,h)),ey(t),f}function ey(t){Q.H=Ml;var r=Lt!==null&&Lt.next!==null;if(zi=0,vn=Lt=et=null,gc=!1,Nl=0,_o=null,r)throw Error(s(300));t===null||_n||(t=t.dependencies,t!==null&&oc(t)&&(_n=!0))}function ty(t,r,a,l){et=t;var h=0;do{if(vo&&(_o=null),Nl=0,vo=!1,25<=h)throw Error(s(301));if(h+=1,vn=Lt=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}Q.H=Ly,f=r(a,l)}while(vo);return f}function zS(){var t=Q.H,r=t.useState()[0];return r=typeof r.then=="function"?xl(r):r,t=t.useState()[0],(Lt!==null?Lt.memoizedState:null)!==t&&(et.flags|=1024),r}function $d(){var t=yc!==0;return yc=0,t}function Jd(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function Wd(t){if(gc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}gc=!1}zi=0,vn=Lt=et=null,vo=!1,Nl=yc=0,_o=null}function sr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?et.memoizedState=vn=t:vn=vn.next=t,vn}function mn(){if(Lt===null){var t=et.alternate;t=t!==null?t.memoizedState:null}else t=Lt.next;var r=vn===null?et.memoizedState:vn.next;if(r!==null)vn=r,Lt=t;else{if(t===null)throw et.alternate===null?Error(s(467)):Error(s(310));Lt=t,t={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},vn===null?et.memoizedState=vn=t:vn=vn.next=t}return vn}function vc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xl(t){var r=Nl;return Nl+=1,_o===null&&(_o=[]),t=Gg(_o,t,r),r=et,(vn===null?r.memoizedState:vn.next)===null&&(r=r.alternate,Q.H=r===null||r.memoizedState===null?Py:hf),t}function _c(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return xl(t);if(t.$$typeof===ne)return Bn(t)}throw Error(s(438,String(t)))}function Zd(t){var r=null,a=et.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=et.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=vc(),et.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=V;return r.index++,a}function Bi(t,r){return typeof r=="function"?r(t):r}function Ec(t){var r=mn();return ef(r,Lt,t)}function ef(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,f=l.pending;if(f!==null){if(h!==null){var _=h.next;h.next=f.next,f.next=_}r.baseQueue=h=f,l.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{r=h.next;var w=_=null,O=null,H=r,J=!1;do{var te=H.lane&-536870913;if(te!==H.lane?(ut&te)===te:(zi&te)===te){var K=H.revertLane;if(K===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),te===fo&&(J=!0);else if((zi&K)===K){H=H.next,K===fo&&(J=!0);continue}else te={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(w=O=te,_=f):O=O.next=te,et.lanes|=K,Is|=K;te=H.action,Ia&&a(f,te),f=H.hasEagerState?H.eagerState:a(f,te)}else K={lane:te,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(w=O=K,_=f):O=O.next=K,et.lanes|=te,Is|=te;H=H.next}while(H!==null&&H!==r);if(O===null?_=f:O.next=w,!wr(f,t.memoizedState)&&(_n=!0,J&&(a=mo,a!==null)))throw a;t.memoizedState=f,t.baseState=_,t.baseQueue=O,l.lastRenderedState=f}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function tf(t){var r=mn(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,f=r.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do f=t(f,_.action),_=_.next;while(_!==h);wr(f,r.memoizedState)||(_n=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),a.lastRenderedState=f}return[f,l]}function ny(t,r,a){var l=et,h=mn(),f=pt;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=r();var _=!wr((Lt||h).memoizedState,a);if(_&&(h.memoizedState=a,_n=!0),h=h.queue,sf(sy.bind(null,l,h,t),[t]),h.getSnapshot!==r||_||vn!==null&&vn.memoizedState.tag&1){if(l.flags|=2048,Eo(9,{destroy:void 0},iy.bind(null,l,h,a,r),null),qt===null)throw Error(s(349));f||(zi&127)!==0||ry(l,r,a)}return a}function ry(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=et.updateQueue,r===null?(r=vc(),et.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function iy(t,r,a,l){r.value=a,r.getSnapshot=l,ay(r)&&oy(t)}function sy(t,r,a){return a(function(){ay(r)&&oy(t)})}function ay(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!wr(t,a)}catch{return!0}}function oy(t){var r=_a(t,2);r!==null&&mr(r,t,2)}function nf(t){var r=sr();if(typeof t=="function"){var a=t;if(t=a(),Ia){tn(!0);try{a()}finally{tn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:t},r}function ly(t,r,a,l){return t.baseState=a,ef(t,Lt,typeof l=="function"?l:Bi)}function BS(t,r,a,l,h){if(Sc(t))throw Error(s(485));if(t=r.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){f.listeners.push(_)}};Q.T!==null?a(!0):f.isTransition=!1,l(f),a=r.pending,a===null?(f.next=r.pending=f,uy(r,f)):(f.next=a.next,r.pending=a.next=f)}}function uy(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var f=Q.T,_={};Q.T=_;try{var w=a(h,l),O=Q.S;O!==null&&O(_,w),cy(t,r,w)}catch(H){rf(t,r,H)}finally{f!==null&&_.types!==null&&(f.types=_.types),Q.T=f}}else try{f=a(h,l),cy(t,r,f)}catch(H){rf(t,r,H)}}function cy(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){hy(t,r,l)},function(l){return rf(t,r,l)}):hy(t,r,a)}function hy(t,r,a){r.status="fulfilled",r.value=a,dy(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,uy(t,a)))}function rf(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,dy(r),r=r.next;while(r!==l)}t.action=null}function dy(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function fy(t,r){return r}function my(t,r){if(pt){var a=qt.formState;if(a!==null){e:{var l=et;if(pt){if(Qt){t:{for(var h=Qt,f=qr;h.nodeType!==8;){if(!f){h=null;break t}if(h=Hr(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){Qt=Hr(h.nextSibling),l=h.data==="F!";break e}}_s(l)}l=!1}l&&(r=a[0])}}return a=sr(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fy,lastRenderedState:r},a.queue=l,a=Oy.bind(null,et,l),l.dispatch=a,l=nf(!1),f=cf.bind(null,et,!1,l.queue),l=sr(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=BS.bind(null,et,h,f,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function py(t){var r=mn();return gy(r,Lt,t)}function gy(t,r,a){if(r=ef(t,r,fy)[0],t=Ec(Bi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=xl(r)}catch(_){throw _===po?cc:_}else l=r;r=mn();var h=r.queue,f=h.dispatch;return a!==r.memoizedState&&(et.flags|=2048,Eo(9,{destroy:void 0},qS.bind(null,h,a),null)),[l,f,t]}function qS(t,r){t.action=r}function yy(t){var r=mn(),a=Lt;if(a!==null)return gy(r,a,t);mn(),r=r.memoizedState,a=mn();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function Eo(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=et.updateQueue,r===null&&(r=vc(),et.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function vy(){return mn().memoizedState}function Tc(t,r,a,l){var h=sr();et.flags|=t,h.memoizedState=Eo(1|r,{destroy:void 0},a,l===void 0?null:l)}function bc(t,r,a,l){var h=mn();l=l===void 0?null:l;var f=h.memoizedState.inst;Lt!==null&&l!==null&&Yd(l,Lt.memoizedState.deps)?h.memoizedState=Eo(r,f,a,l):(et.flags|=t,h.memoizedState=Eo(1|r,f,a,l))}function _y(t,r){Tc(8390656,8,t,r)}function sf(t,r){bc(2048,8,t,r)}function FS(t){et.flags|=4;var r=et.updateQueue;if(r===null)r=vc(),et.updateQueue=r,r.events=[t];else{var a=r.events;a===null?r.events=[t]:a.push(t)}}function Ey(t){var r=mn().memoizedState;return FS({ref:r,nextImpl:t}),function(){if((Rt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function Ty(t,r){return bc(4,2,t,r)}function by(t,r){return bc(4,4,t,r)}function Sy(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function wy(t,r,a){a=a!=null?a.concat([t]):null,bc(4,4,Sy.bind(null,r,t),a)}function af(){}function Ay(t,r){var a=mn();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Yd(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function Ry(t,r){var a=mn();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Yd(r,l[1]))return l[0];if(l=t(),Ia){tn(!0);try{t()}finally{tn(!1)}}return a.memoizedState=[l,r],l}function of(t,r,a){return a===void 0||(zi&1073741824)!==0&&(ut&261930)===0?t.memoizedState=r:(t.memoizedState=a,t=Cv(),et.lanes|=t,Is|=t,a)}function Cy(t,r,a,l){return wr(a,r)?a:yo.current!==null?(t=of(t,a,l),wr(t,r)||(_n=!0),t):(zi&42)===0||(zi&1073741824)!==0&&(ut&261930)===0?(_n=!0,t.memoizedState=a):(t=Cv(),et.lanes|=t,Is|=t,r)}function Iy(t,r,a,l,h){var f=le.p;le.p=f!==0&&8>f?f:8;var _=Q.T,w={};Q.T=w,cf(t,!1,r,a);try{var O=h(),H=Q.S;if(H!==null&&H(w,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var J=US(O,l);Dl(t,r,J,xr(t))}else Dl(t,r,l,xr(t))}catch(te){Dl(t,r,{then:function(){},status:"rejected",reason:te},xr())}finally{le.p=f,_!==null&&w.types!==null&&(_.types=w.types),Q.T=_}}function HS(){}function lf(t,r,a,l){if(t.tag!==5)throw Error(s(476));var h=Ny(t).queue;Iy(t,h,r,ge,a===null?HS:function(){return xy(t),a(l)})}function Ny(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:ge},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function xy(t){var r=Ny(t);r.next===null&&(r=t.alternate.memoizedState),Dl(t,r.next.queue,{},xr())}function uf(){return Bn(Yl)}function Dy(){return mn().memoizedState}function My(){return mn().memoizedState}function GS(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=xr();t=bs(a);var l=Ss(r,t,a);l!==null&&(mr(l,r,a),Rl(l,r,a)),r={cache:Ld()},t.payload=r;return}r=r.return}}function KS(t,r,a){var l=xr();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Sc(t)?ky(r,a):(a=Rd(t,r,a,l),a!==null&&(mr(a,t,l),Vy(a,r,l)))}function Oy(t,r,a){var l=xr();Dl(t,r,a,l)}function Dl(t,r,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Sc(t))ky(r,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var _=r.lastRenderedState,w=f(_,a);if(h.hasEagerState=!0,h.eagerState=w,wr(w,_))return rc(t,r,h,0),qt===null&&nc(),!1}catch{}finally{}if(a=Rd(t,r,h,l),a!==null)return mr(a,t,l),Vy(a,r,l),!0}return!1}function cf(t,r,a,l){if(l={lane:2,revertLane:qf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Sc(t)){if(r)throw Error(s(479))}else r=Rd(t,a,l,2),r!==null&&mr(r,t,2)}function Sc(t){var r=t.alternate;return t===et||r!==null&&r===et}function ky(t,r){vo=gc=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function Vy(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,An(t,a)}}var Ml={readContext:Bn,use:_c,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useLayoutEffect:rn,useInsertionEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useSyncExternalStore:rn,useId:rn,useHostTransitionStatus:rn,useFormState:rn,useActionState:rn,useOptimistic:rn,useMemoCache:rn,useCacheRefresh:rn};Ml.useEffectEvent=rn;var Py={readContext:Bn,use:_c,useCallback:function(t,r){return sr().memoizedState=[t,r===void 0?null:r],t},useContext:Bn,useEffect:_y,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Tc(4194308,4,Sy.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Tc(4194308,4,t,r)},useInsertionEffect:function(t,r){Tc(4,2,t,r)},useMemo:function(t,r){var a=sr();r=r===void 0?null:r;var l=t();if(Ia){tn(!0);try{t()}finally{tn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=sr();if(a!==void 0){var h=a(r);if(Ia){tn(!0);try{a(r)}finally{tn(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=KS.bind(null,et,t),[l.memoizedState,t]},useRef:function(t){var r=sr();return t={current:t},r.memoizedState=t},useState:function(t){t=nf(t);var r=t.queue,a=Oy.bind(null,et,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:af,useDeferredValue:function(t,r){var a=sr();return of(a,t,r)},useTransition:function(){var t=nf(!1);return t=Iy.bind(null,et,t.queue,!0,!1),sr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=et,h=sr();if(pt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),qt===null)throw Error(s(349));(ut&127)!==0||ry(l,r,a)}h.memoizedState=a;var f={value:a,getSnapshot:r};return h.queue=f,_y(sy.bind(null,l,f,t),[t]),l.flags|=2048,Eo(9,{destroy:void 0},iy.bind(null,l,f,a,r),null),a},useId:function(){var t=sr(),r=qt.identifierPrefix;if(pt){var a=yi,l=gi;a=(l&~(1<<32-Et(l)-1)).toString(32)+a,r="_"+r+"R_"+a,a=yc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=jS++,r="_"+r+"r_"+a.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:uf,useFormState:my,useActionState:my,useOptimistic:function(t){var r=sr();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=cf.bind(null,et,!0,a),a.dispatch=r,[t,r]},useMemoCache:Zd,useCacheRefresh:function(){return sr().memoizedState=GS.bind(null,et)},useEffectEvent:function(t){var r=sr(),a={impl:t};return r.memoizedState=a,function(){if((Rt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},hf={readContext:Bn,use:_c,useCallback:Ay,useContext:Bn,useEffect:sf,useImperativeHandle:wy,useInsertionEffect:Ty,useLayoutEffect:by,useMemo:Ry,useReducer:Ec,useRef:vy,useState:function(){return Ec(Bi)},useDebugValue:af,useDeferredValue:function(t,r){var a=mn();return Cy(a,Lt.memoizedState,t,r)},useTransition:function(){var t=Ec(Bi)[0],r=mn().memoizedState;return[typeof t=="boolean"?t:xl(t),r]},useSyncExternalStore:ny,useId:Dy,useHostTransitionStatus:uf,useFormState:py,useActionState:py,useOptimistic:function(t,r){var a=mn();return ly(a,Lt,t,r)},useMemoCache:Zd,useCacheRefresh:My};hf.useEffectEvent=Ey;var Ly={readContext:Bn,use:_c,useCallback:Ay,useContext:Bn,useEffect:sf,useImperativeHandle:wy,useInsertionEffect:Ty,useLayoutEffect:by,useMemo:Ry,useReducer:tf,useRef:vy,useState:function(){return tf(Bi)},useDebugValue:af,useDeferredValue:function(t,r){var a=mn();return Lt===null?of(a,t,r):Cy(a,Lt.memoizedState,t,r)},useTransition:function(){var t=tf(Bi)[0],r=mn().memoizedState;return[typeof t=="boolean"?t:xl(t),r]},useSyncExternalStore:ny,useId:Dy,useHostTransitionStatus:uf,useFormState:yy,useActionState:yy,useOptimistic:function(t,r){var a=mn();return Lt!==null?ly(a,Lt,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Zd,useCacheRefresh:My};Ly.useEffectEvent=Ey;function df(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:T({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var ff={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=xr(),h=bs(l);h.payload=r,a!=null&&(h.callback=a),r=Ss(t,h,l),r!==null&&(mr(r,t,l),Rl(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=xr(),h=bs(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=Ss(t,h,l),r!==null&&(mr(r,t,l),Rl(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=xr(),l=bs(a);l.tag=2,r!=null&&(l.callback=r),r=Ss(t,l,a),r!==null&&(mr(r,t,a),Rl(r,t,a))}};function Uy(t,r,a,l,h,f,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,_):r.prototype&&r.prototype.isPureReactComponent?!vl(a,l)||!vl(h,f):!0}function jy(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&ff.enqueueReplaceState(r,r.state,null)}function Na(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function zy(t){tc(t)}function By(t){console.error(t)}function qy(t){tc(t)}function wc(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Fy(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function mf(t,r,a){return a=bs(a),a.tag=3,a.payload={element:null},a.callback=function(){wc(t,r)},a}function Hy(t){return t=bs(t),t.tag=3,t}function Gy(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;t.payload=function(){return h(f)},t.callback=function(){Fy(r,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){Fy(r,a,l),typeof h!="function"&&(Ns===null?Ns=new Set([this]):Ns.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function QS(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&ho(r,a,h,!0),a=Rr.current,a!==null){switch(a.tag){case 31:case 13:return Fr===null?Pc():a.alternate===null&&sn===0&&(sn=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===hc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),jf(t,l,h)),!1;case 22:return a.flags|=65536,l===hc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),jf(t,l,h)),!1}throw Error(s(435,a.tag))}return jf(t,l,h),Pc(),!1}if(pt)return r=Rr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==Md&&(t=Error(s(422),{cause:l}),Tl(jr(t,a)))):(l!==Md&&(r=Error(s(423),{cause:l}),Tl(jr(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=jr(l,a),h=mf(t.stateNode,l,h),Fd(t,h),sn!==4&&(sn=2)),!1;var f=Error(s(520),{cause:l});if(f=jr(f,a),zl===null?zl=[f]:zl.push(f),sn!==4&&(sn=2),r===null)return!0;l=jr(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=mf(a.stateNode,l,t),Fd(a,t),!1;case 1:if(r=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Ns===null||!Ns.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Hy(h),Gy(h,t,a,l),Fd(a,h),!1}a=a.return}while(a!==null);return!1}var pf=Error(s(461)),_n=!1;function qn(t,r,a,l){r.child=t===null?Xg(r,null,a,l):Ca(r,t.child,a,l)}function Ky(t,r,a,l,h){a=a.render;var f=r.ref;if("ref"in l){var _={};for(var w in l)w!=="ref"&&(_[w]=l[w])}else _=l;return Sa(r),l=Xd(t,r,a,_,f,h),w=$d(),t!==null&&!_n?(Jd(t,r,h),qi(t,r,h)):(pt&&w&&xd(r),r.flags|=1,qn(t,r,l,h),r.child)}function Qy(t,r,a,l,h){if(t===null){var f=a.type;return typeof f=="function"&&!Cd(f)&&f.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=f,Yy(t,r,f,l,h)):(t=sc(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(f=t.child,!Sf(t,h)){var _=f.memoizedProps;if(a=a.compare,a=a!==null?a:vl,a(_,l)&&t.ref===r.ref)return qi(t,r,h)}return r.flags|=1,t=Pi(f,l),t.ref=r.ref,t.return=r,r.child=t}function Yy(t,r,a,l,h){if(t!==null){var f=t.memoizedProps;if(vl(f,l)&&t.ref===r.ref)if(_n=!1,r.pendingProps=l=f,Sf(t,h))(t.flags&131072)!==0&&(_n=!0);else return r.lanes=t.lanes,qi(t,r,h)}return gf(t,r,a,l,h)}function Xy(t,r,a,l){var h=l.children,f=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,t!==null){for(l=r.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~f}else l=0,r.child=null;return $y(t,r,f,a,l)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&uc(r,f!==null?f.cachePool:null),f!==null?Wg(r,f):Gd(),Zg(r);else return l=r.lanes=536870912,$y(t,r,f!==null?f.baseLanes|a:a,a,l)}else f!==null?(uc(r,f.cachePool),Wg(r,f),As(),r.memoizedState=null):(t!==null&&uc(r,null),Gd(),As());return qn(t,r,h,a),r.child}function Ol(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function $y(t,r,a,l,h){var f=jd();return f=f===null?null:{parent:yn._currentValue,pool:f},r.memoizedState={baseLanes:a,cachePool:f},t!==null&&uc(r,null),Gd(),Zg(r),t!==null&&ho(t,r,l,!0),r.childLanes=h,null}function Ac(t,r){return r=Cc({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function Jy(t,r,a){return Ca(r,t.child,null,a),t=Ac(r,r.pendingProps),t.flags|=2,Cr(r),r.memoizedState=null,t}function YS(t,r,a){var l=r.pendingProps,h=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(pt){if(l.mode==="hidden")return t=Ac(r,l),r.lanes=536870912,Ol(null,t);if(Qd(r),(t=Qt)?(t=u_(t,qr),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:ys!==null?{id:gi,overflow:yi}:null,retryLane:536870912,hydrationErrors:null},a=kg(t),a.return=r,r.child=a,zn=r,Qt=null)):t=null,t===null)throw _s(r);return r.lanes=536870912,null}return Ac(r,l)}var f=t.memoizedState;if(f!==null){var _=f.dehydrated;if(Qd(r),h)if(r.flags&256)r.flags&=-257,r=Jy(t,r,a);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(s(558));else if(_n||ho(t,r,a,!1),h=(a&t.childLanes)!==0,_n||h){if(l=qt,l!==null&&(_=Xn(l,a),_!==0&&_!==f.retryLane))throw f.retryLane=_,_a(t,_),mr(l,t,_),pf;Pc(),r=Jy(t,r,a)}else t=f.treeContext,Qt=Hr(_.nextSibling),zn=r,pt=!0,vs=null,qr=!1,t!==null&&Lg(r,t),r=Ac(r,l),r.flags|=4096;return r}return t=Pi(t.child,{mode:l.mode,children:l.children}),t.ref=r.ref,r.child=t,t.return=r,t}function Rc(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function gf(t,r,a,l,h){return Sa(r),a=Xd(t,r,a,l,void 0,h),l=$d(),t!==null&&!_n?(Jd(t,r,h),qi(t,r,h)):(pt&&l&&xd(r),r.flags|=1,qn(t,r,a,h),r.child)}function Wy(t,r,a,l,h,f){return Sa(r),r.updateQueue=null,a=ty(r,l,a,h),ey(t),l=$d(),t!==null&&!_n?(Jd(t,r,f),qi(t,r,f)):(pt&&l&&xd(r),r.flags|=1,qn(t,r,a,f),r.child)}function Zy(t,r,a,l,h){if(Sa(r),r.stateNode===null){var f=oo,_=a.contextType;typeof _=="object"&&_!==null&&(f=Bn(_)),f=new a(l,f),r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=ff,r.stateNode=f,f._reactInternals=r,f=r.stateNode,f.props=l,f.state=r.memoizedState,f.refs={},Bd(r),_=a.contextType,f.context=typeof _=="object"&&_!==null?Bn(_):oo,f.state=r.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(df(r,a,_,l),f.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(_=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),_!==f.state&&ff.enqueueReplaceState(f,f.state,null),Il(r,l,f,h),Cl(),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){f=r.stateNode;var w=r.memoizedProps,O=Na(a,w);f.props=O;var H=f.context,J=a.contextType;_=oo,typeof J=="object"&&J!==null&&(_=Bn(J));var te=a.getDerivedStateFromProps;J=typeof te=="function"||typeof f.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,J||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(w||H!==_)&&jy(r,f,l,_),Ts=!1;var K=r.memoizedState;f.state=K,Il(r,l,f,h),Cl(),H=r.memoizedState,w||K!==H||Ts?(typeof te=="function"&&(df(r,a,te,l),H=r.memoizedState),(O=Ts||Uy(r,a,O,l,K,H,_))?(J||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(r.flags|=4194308)):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=H),f.props=l,f.state=H,f.context=_,l=O):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{f=r.stateNode,qd(t,r),_=r.memoizedProps,J=Na(a,_),f.props=J,te=r.pendingProps,K=f.context,H=a.contextType,O=oo,typeof H=="object"&&H!==null&&(O=Bn(H)),w=a.getDerivedStateFromProps,(H=typeof w=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_!==te||K!==O)&&jy(r,f,l,O),Ts=!1,K=r.memoizedState,f.state=K,Il(r,l,f,h),Cl();var $=r.memoizedState;_!==te||K!==$||Ts||t!==null&&t.dependencies!==null&&oc(t.dependencies)?(typeof w=="function"&&(df(r,a,w,l),$=r.memoizedState),(J=Ts||Uy(r,a,J,l,K,$,O)||t!==null&&t.dependencies!==null&&oc(t.dependencies))?(H||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,$,O),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,$,O)),typeof f.componentDidUpdate=="function"&&(r.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=$),f.props=l,f.state=$,f.context=O,l=J):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(r.flags|=1024),l=!1)}return f=l,Rc(t,r),l=(r.flags&128)!==0,f||l?(f=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),r.flags|=1,t!==null&&l?(r.child=Ca(r,t.child,null,h),r.child=Ca(r,null,a,h)):qn(t,r,a,h),r.memoizedState=f.state,t=r.child):t=qi(t,r,h),t}function ev(t,r,a,l){return Ta(),r.flags|=256,qn(t,r,a,l),r.child}var yf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vf(t){return{baseLanes:t,cachePool:Fg()}}function _f(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Nr),t}function tv(t,r,a){var l=r.pendingProps,h=!1,f=(r.flags&128)!==0,_;if((_=f)||(_=t!==null&&t.memoizedState===null?!1:(fn.current&2)!==0),_&&(h=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,t===null){if(pt){if(h?ws(r):As(),(t=Qt)?(t=u_(t,qr),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:ys!==null?{id:gi,overflow:yi}:null,retryLane:536870912,hydrationErrors:null},a=kg(t),a.return=r,r.child=a,zn=r,Qt=null)):t=null,t===null)throw _s(r);return tm(t)?r.lanes=32:r.lanes=536870912,null}var w=l.children;return l=l.fallback,h?(As(),h=r.mode,w=Cc({mode:"hidden",children:w},h),l=Ea(l,h,a,null),w.return=r,l.return=r,w.sibling=l,r.child=w,l=r.child,l.memoizedState=vf(a),l.childLanes=_f(t,_,a),r.memoizedState=yf,Ol(null,l)):(ws(r),Ef(r,w))}var O=t.memoizedState;if(O!==null&&(w=O.dehydrated,w!==null)){if(f)r.flags&256?(ws(r),r.flags&=-257,r=Tf(t,r,a)):r.memoizedState!==null?(As(),r.child=t.child,r.flags|=128,r=null):(As(),w=l.fallback,h=r.mode,l=Cc({mode:"visible",children:l.children},h),w=Ea(w,h,a,null),w.flags|=2,l.return=r,w.return=r,l.sibling=w,r.child=l,Ca(r,t.child,null,a),l=r.child,l.memoizedState=vf(a),l.childLanes=_f(t,_,a),r.memoizedState=yf,r=Ol(null,l));else if(ws(r),tm(w)){if(_=w.nextSibling&&w.nextSibling.dataset,_)var H=_.dgst;_=H,l=Error(s(419)),l.stack="",l.digest=_,Tl({value:l,source:null,stack:null}),r=Tf(t,r,a)}else if(_n||ho(t,r,a,!1),_=(a&t.childLanes)!==0,_n||_){if(_=qt,_!==null&&(l=Xn(_,a),l!==0&&l!==O.retryLane))throw O.retryLane=l,_a(t,l),mr(_,t,l),pf;em(w)||Pc(),r=Tf(t,r,a)}else em(w)?(r.flags|=192,r.child=t.child,r=null):(t=O.treeContext,Qt=Hr(w.nextSibling),zn=r,pt=!0,vs=null,qr=!1,t!==null&&Lg(r,t),r=Ef(r,l.children),r.flags|=4096);return r}return h?(As(),w=l.fallback,h=r.mode,O=t.child,H=O.sibling,l=Pi(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,H!==null?w=Pi(H,w):(w=Ea(w,h,a,null),w.flags|=2),w.return=r,l.return=r,l.sibling=w,r.child=l,Ol(null,l),l=r.child,w=t.child.memoizedState,w===null?w=vf(a):(h=w.cachePool,h!==null?(O=yn._currentValue,h=h.parent!==O?{parent:O,pool:O}:h):h=Fg(),w={baseLanes:w.baseLanes|a,cachePool:h}),l.memoizedState=w,l.childLanes=_f(t,_,a),r.memoizedState=yf,Ol(t.child,l)):(ws(r),a=t.child,t=a.sibling,a=Pi(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(_=r.deletions,_===null?(r.deletions=[t],r.flags|=16):_.push(t)),r.child=a,r.memoizedState=null,a)}function Ef(t,r){return r=Cc({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Cc(t,r){return t=Ar(22,t,null,r),t.lanes=0,t}function Tf(t,r,a){return Ca(r,t.child,null,a),t=Ef(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function nv(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Vd(t.return,r,a)}function bf(t,r,a,l,h,f){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:f}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=h,_.treeForkCount=f)}function rv(t,r,a){var l=r.pendingProps,h=l.revealOrder,f=l.tail;l=l.children;var _=fn.current,w=(_&2)!==0;if(w?(_=_&1|2,r.flags|=128):_&=1,W(fn,_),qn(t,r,l,a),l=pt?El:0,!w&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&nv(t,a,r);else if(t.tag===19)nv(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&pc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),bf(r,!1,h,a,f,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&pc(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}bf(r,!0,a,null,f,l);break;case"together":bf(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function qi(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Is|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(ho(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=Pi(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Pi(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Sf(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&oc(t)))}function XS(t,r,a){switch(r.tag){case 3:nt(r,r.stateNode.containerInfo),Es(r,yn,t.memoizedState.cache),Ta();break;case 27:case 5:Pe(r);break;case 4:nt(r,r.stateNode.containerInfo);break;case 10:Es(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Qd(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(ws(r),r.flags|=128,null):(a&r.child.childLanes)!==0?tv(t,r,a):(ws(r),t=qi(t,r,a),t!==null?t.sibling:null);ws(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(ho(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return rv(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),W(fn,fn.current),l)break;return null;case 22:return r.lanes=0,Xy(t,r,a,r.pendingProps);case 24:Es(r,yn,t.memoizedState.cache)}return qi(t,r,a)}function iv(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)_n=!0;else{if(!Sf(t,a)&&(r.flags&128)===0)return _n=!1,XS(t,r,a);_n=(t.flags&131072)!==0}else _n=!1,pt&&(r.flags&1048576)!==0&&Pg(r,El,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(t=Aa(r.elementType),r.type=t,typeof t=="function")Cd(t)?(l=Na(t,l),r.tag=1,r=Zy(null,r,t,l,a)):(r.tag=0,r=gf(null,r,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===ye){r.tag=11,r=Ky(null,r,t,l,a);break e}else if(h===x){r.tag=14,r=Qy(null,r,t,l,a);break e}}throw r=Ve(t)||t,Error(s(306,r,""))}}return r;case 0:return gf(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=Na(l,r.pendingProps),Zy(t,r,l,h,a);case 3:e:{if(nt(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var f=r.memoizedState;h=f.element,qd(t,r),Il(r,l,null,a);var _=r.memoizedState;if(l=_.cache,Es(r,yn,l),l!==f.cache&&Pd(r,[yn],a,!0),Cl(),l=_.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=ev(t,r,l,a);break e}else if(l!==h){h=jr(Error(s(424)),r),Tl(h),r=ev(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Qt=Hr(t.firstChild),zn=r,pt=!0,vs=null,qr=!0,a=Xg(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ta(),l===h){r=qi(t,r,a);break e}qn(t,r,l,a)}r=r.child}return r;case 26:return Rc(t,r),t===null?(a=p_(r.type,null,r.pendingProps,null))?r.memoizedState=a:pt||(a=r.type,t=r.pendingProps,l=Fc(we.current).createElement(a),l[M]=r,l[oe]=t,Fn(l,a,t),Ht(l),r.stateNode=l):r.memoizedState=p_(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Pe(r),t===null&&pt&&(l=r.stateNode=d_(r.type,r.pendingProps,we.current),zn=r,qr=!0,h=Qt,Os(r.type)?(nm=h,Qt=Hr(l.firstChild)):Qt=h),qn(t,r,r.pendingProps.children,a),Rc(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&pt&&((h=l=Qt)&&(l=A1(l,r.type,r.pendingProps,qr),l!==null?(r.stateNode=l,zn=r,Qt=Hr(l.firstChild),qr=!1,h=!0):h=!1),h||_s(r)),Pe(r),h=r.type,f=r.pendingProps,_=t!==null?t.memoizedProps:null,l=f.children,Jf(h,f)?l=null:_!==null&&Jf(h,_)&&(r.flags|=32),r.memoizedState!==null&&(h=Xd(t,r,zS,null,null,a),Yl._currentValue=h),Rc(t,r),qn(t,r,l,a),r.child;case 6:return t===null&&pt&&((t=a=Qt)&&(a=R1(a,r.pendingProps,qr),a!==null?(r.stateNode=a,zn=r,Qt=null,t=!0):t=!1),t||_s(r)),null;case 13:return tv(t,r,a);case 4:return nt(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Ca(r,null,l,a):qn(t,r,l,a),r.child;case 11:return Ky(t,r,r.type,r.pendingProps,a);case 7:return qn(t,r,r.pendingProps,a),r.child;case 8:return qn(t,r,r.pendingProps.children,a),r.child;case 12:return qn(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Es(r,r.type,l.value),qn(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,Sa(r),h=Bn(h),l=l(h),r.flags|=1,qn(t,r,l,a),r.child;case 14:return Qy(t,r,r.type,r.pendingProps,a);case 15:return Yy(t,r,r.type,r.pendingProps,a);case 19:return rv(t,r,a);case 31:return YS(t,r,a);case 22:return Xy(t,r,a,r.pendingProps);case 24:return Sa(r),l=Bn(yn),t===null?(h=jd(),h===null&&(h=qt,f=Ld(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),r.memoizedState={parent:l,cache:h},Bd(r),Es(r,yn,h)):((t.lanes&a)!==0&&(qd(t,r),Il(r,null,null,a),Cl()),h=t.memoizedState,f=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),Es(r,yn,l)):(l=f.cache,Es(r,yn,l),l!==h.cache&&Pd(r,[yn],a,!0))),qn(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Fi(t){t.flags|=4}function wf(t,r,a,l,h){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(Dv())t.flags|=8192;else throw Ra=hc,zd}else t.flags&=-16777217}function sv(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!E_(r))if(Dv())t.flags|=8192;else throw Ra=hc,zd}function Ic(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?St():536870912,t.lanes|=r,wo|=r)}function kl(t,r){if(!pt)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Yt(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function $S(t,r,a){var l=r.pendingProps;switch(Dd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(r),null;case 1:return Yt(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ji(yn),de(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(co(r)?Fi(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Od())),Yt(r),null;case 26:var h=r.type,f=r.memoizedState;return t===null?(Fi(r),f!==null?(Yt(r),sv(r,f)):(Yt(r),wf(r,h,null,l,a))):f?f!==t.memoizedState?(Fi(r),Yt(r),sv(r,f)):(Yt(r),r.flags&=-16777217):(t=t.memoizedProps,t!==l&&Fi(r),Yt(r),wf(r,h,t,l,a)),null;case 27:if(Qe(r),a=we.current,h=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Fi(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return Yt(r),null}t=ae.current,co(r)?Ug(r):(t=d_(h,l,a),r.stateNode=t,Fi(r))}return Yt(r),null;case 5:if(Qe(r),h=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Fi(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return Yt(r),null}if(f=ae.current,co(r))Ug(r);else{var _=Fc(we.current);switch(f){case 1:f=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:f=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":f=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":f=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":f=_.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?f.multiple=!0:l.size&&(f.size=l.size);break;default:f=typeof l.is=="string"?_.createElement(h,{is:l.is}):_.createElement(h)}}f[M]=r,f[oe]=l;e:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)f.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break e;for(;_.sibling===null;){if(_.return===null||_.return===r)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=f;e:switch(Fn(f,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Fi(r)}}return Yt(r),wf(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,a),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&Fi(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=we.current,co(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=zn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[M]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||t_(t.nodeValue,a)),t||_s(r,!0)}else t=Fc(t).createTextNode(l),t[M]=r,r.stateNode=t}return Yt(r),null;case 31:if(a=r.memoizedState,t===null||t.memoizedState!==null){if(l=co(r),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[M]=r}else Ta(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Yt(r),t=!1}else a=Od(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return r.flags&256?(Cr(r),r):(Cr(r),null);if((r.flags&128)!==0)throw Error(s(558))}return Yt(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=co(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[M]=r}else Ta(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Yt(r),h=!1}else h=Od(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(Cr(r),r):(Cr(r),null)}return Cr(r),(r.flags&128)!==0?(r.lanes=a,r):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)),a!==t&&a&&(r.child.flags|=8192),Ic(r,r.updateQueue),Yt(r),null);case 4:return de(),t===null&&Kf(r.stateNode.containerInfo),Yt(r),null;case 10:return ji(r.type),Yt(r),null;case 19:if(q(fn),l=r.memoizedState,l===null)return Yt(r),null;if(h=(r.flags&128)!==0,f=l.rendering,f===null)if(h)kl(l,!1);else{if(sn!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(f=pc(t),f!==null){for(r.flags|=128,kl(l,!1),t=f.updateQueue,r.updateQueue=t,Ic(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Og(a,t),a=a.sibling;return W(fn,fn.current&1|2),pt&&Li(r,l.treeForkCount),r.child}t=t.sibling}l.tail!==null&&_t()>Oc&&(r.flags|=128,h=!0,kl(l,!1),r.lanes=4194304)}else{if(!h)if(t=pc(f),t!==null){if(r.flags|=128,h=!0,t=t.updateQueue,r.updateQueue=t,Ic(r,t),kl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!pt)return Yt(r),null}else 2*_t()-l.renderingStartTime>Oc&&a!==536870912&&(r.flags|=128,h=!0,kl(l,!1),r.lanes=4194304);l.isBackwards?(f.sibling=r.child,r.child=f):(t=l.last,t!==null?t.sibling=f:r.child=f,l.last=f)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=_t(),t.sibling=null,a=fn.current,W(fn,h?a&1|2:a&1),pt&&Li(r,l.treeForkCount),t):(Yt(r),null);case 22:case 23:return Cr(r),Kd(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(Yt(r),r.subtreeFlags&6&&(r.flags|=8192)):Yt(r),a=r.updateQueue,a!==null&&Ic(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&q(wa),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),ji(yn),Yt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function JS(t,r){switch(Dd(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return ji(yn),de(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Qe(r),null;case 31:if(r.memoizedState!==null){if(Cr(r),r.alternate===null)throw Error(s(340));Ta()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(Cr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Ta()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return q(fn),null;case 4:return de(),null;case 10:return ji(r.type),null;case 22:case 23:return Cr(r),Kd(),t!==null&&q(wa),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return ji(yn),null;case 25:return null;default:return null}}function av(t,r){switch(Dd(r),r.tag){case 3:ji(yn),de();break;case 26:case 27:case 5:Qe(r);break;case 4:de();break;case 31:r.memoizedState!==null&&Cr(r);break;case 13:Cr(r);break;case 19:q(fn);break;case 10:ji(r.type);break;case 22:case 23:Cr(r),Kd(),t!==null&&q(wa);break;case 24:ji(yn)}}function Vl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var f=a.create,_=a.inst;l=f(),_.destroy=l}a=a.next}while(a!==h)}}catch(w){kt(r,r.return,w)}}function Rs(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&t)===t){var _=l.inst,w=_.destroy;if(w!==void 0){_.destroy=void 0,h=r;var O=a,H=w;try{H()}catch(J){kt(h,O,J)}}}l=l.next}while(l!==f)}}catch(J){kt(r,r.return,J)}}function ov(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{Jg(r,a)}catch(l){kt(t,t.return,l)}}}function lv(t,r,a){a.props=Na(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){kt(t,r,l)}}function Pl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){kt(t,r,h)}}function vi(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){kt(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){kt(t,r,h)}else a.current=null}function uv(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){kt(t,t.return,h)}}function Af(t,r,a){try{var l=t.stateNode;_1(l,t.type,a,r),l[oe]=r}catch(h){kt(t,t.return,h)}}function cv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Os(t.type)||t.tag===4}function Rf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||cv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Os(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Cf(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Xr));else if(l!==4&&(l===27&&Os(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(Cf(t,r,a),t=t.sibling;t!==null;)Cf(t,r,a),t=t.sibling}function Nc(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&Os(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Nc(t,r,a),t=t.sibling;t!==null;)Nc(t,r,a),t=t.sibling}function hv(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);Fn(r,l,a),r[M]=t,r[oe]=a}catch(f){kt(t,t.return,f)}}var Hi=!1,En=!1,If=!1,dv=typeof WeakSet=="function"?WeakSet:Set,Mn=null;function WS(t,r){if(t=t.containerInfo,Xf=$c,t=wg(t),Ed(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var _=0,w=-1,O=-1,H=0,J=0,te=t,K=null;t:for(;;){for(var $;te!==a||h!==0&&te.nodeType!==3||(w=_+h),te!==f||l!==0&&te.nodeType!==3||(O=_+l),te.nodeType===3&&(_+=te.nodeValue.length),($=te.firstChild)!==null;)K=te,te=$;for(;;){if(te===t)break t;if(K===a&&++H===h&&(w=_),K===f&&++J===l&&(O=_),($=te.nextSibling)!==null)break;te=K,K=te.parentNode}te=$}a=w===-1||O===-1?null:{start:w,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for($f={focusedElem:t,selectionRange:a},$c=!1,Mn=r;Mn!==null;)if(r=Mn,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Mn=t;else for(;Mn!==null;){switch(r=Mn,f=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=r,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var Ne=Na(a.type,h);t=l.getSnapshotBeforeUpdate(Ne,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(Fe){kt(a,a.return,Fe)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)Zf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Zf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Mn=t;break}Mn=r.return}}function fv(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ki(t,a),l&4&&Vl(5,a);break;case 1:if(Ki(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(_){kt(a,a.return,_)}else{var h=Na(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(_){kt(a,a.return,_)}}l&64&&ov(a),l&512&&Pl(a,a.return);break;case 3:if(Ki(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Jg(t,r)}catch(_){kt(a,a.return,_)}}break;case 27:r===null&&l&4&&hv(a);case 26:case 5:Ki(t,a),r===null&&l&4&&uv(a),l&512&&Pl(a,a.return);break;case 12:Ki(t,a);break;case 31:Ki(t,a),l&4&&gv(t,a);break;case 13:Ki(t,a),l&4&&yv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=o1.bind(null,a),C1(t,a))));break;case 22:if(l=a.memoizedState!==null||Hi,!l){r=r!==null&&r.memoizedState!==null||En,h=Hi;var f=En;Hi=l,(En=r)&&!f?Qi(t,a,(a.subtreeFlags&8772)!==0):Ki(t,a),Hi=h,En=f}break;case 30:break;default:Ki(t,a)}}function mv(t){var r=t.alternate;r!==null&&(t.alternate=null,mv(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Bt(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var en=null,cr=!1;function Gi(t,r,a){for(a=a.child;a!==null;)pv(t,r,a),a=a.sibling}function pv(t,r,a){if(Vt&&typeof Vt.onCommitFiberUnmount=="function")try{Vt.onCommitFiberUnmount($t,a)}catch{}switch(a.tag){case 26:En||vi(a,r),Gi(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:En||vi(a,r);var l=en,h=cr;Os(a.type)&&(en=a.stateNode,cr=!1),Gi(t,r,a),Gl(a.stateNode),en=l,cr=h;break;case 5:En||vi(a,r);case 6:if(l=en,h=cr,en=null,Gi(t,r,a),en=l,cr=h,en!==null)if(cr)try{(en.nodeType===9?en.body:en.nodeName==="HTML"?en.ownerDocument.body:en).removeChild(a.stateNode)}catch(f){kt(a,r,f)}else try{en.removeChild(a.stateNode)}catch(f){kt(a,r,f)}break;case 18:en!==null&&(cr?(t=en,o_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Mo(t)):o_(en,a.stateNode));break;case 4:l=en,h=cr,en=a.stateNode.containerInfo,cr=!0,Gi(t,r,a),en=l,cr=h;break;case 0:case 11:case 14:case 15:Rs(2,a,r),En||Rs(4,a,r),Gi(t,r,a);break;case 1:En||(vi(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&lv(a,r,l)),Gi(t,r,a);break;case 21:Gi(t,r,a);break;case 22:En=(l=En)||a.memoizedState!==null,Gi(t,r,a),En=l;break;default:Gi(t,r,a)}}function gv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Mo(t)}catch(a){kt(r,r.return,a)}}}function yv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Mo(t)}catch(a){kt(r,r.return,a)}}function ZS(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new dv),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new dv),r;default:throw Error(s(435,t.tag))}}function xc(t,r){var a=ZS(t);r.forEach(function(l){if(!a.has(l)){a.add(l);var h=l1.bind(null,t,l);l.then(h,h)}})}function hr(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=t,_=r,w=_;e:for(;w!==null;){switch(w.tag){case 27:if(Os(w.type)){en=w.stateNode,cr=!1;break e}break;case 5:en=w.stateNode,cr=!1;break e;case 3:case 4:en=w.stateNode.containerInfo,cr=!0;break e}w=w.return}if(en===null)throw Error(s(160));pv(f,_,h),en=null,cr=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)vv(r,t),r=r.sibling}var ti=null;function vv(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:hr(r,t),dr(t),l&4&&(Rs(3,t,t.return),Vl(3,t),Rs(5,t,t.return));break;case 1:hr(r,t),dr(t),l&512&&(En||a===null||vi(a,a.return)),l&64&&Hi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=ti;if(hr(r,t),dr(t),l&512&&(En||a===null||vi(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[rt]||f[M]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),Fn(f,l,a),f[M]=t,Ht(f),l=f;break e;case"link":var _=v_("link","href",h).get(l+(a.href||""));if(_){for(var w=0;w<_.length;w++)if(f=_[w],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(w,1);break t}}f=h.createElement(l),Fn(f,l,a),h.head.appendChild(f);break;case"meta":if(_=v_("meta","content",h).get(l+(a.content||""))){for(w=0;w<_.length;w++)if(f=_[w],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(w,1);break t}}f=h.createElement(l),Fn(f,l,a),h.head.appendChild(f);break;default:throw Error(s(468,l))}f[M]=t,Ht(f),l=f}t.stateNode=l}else __(h,t.type,t.stateNode);else t.stateNode=y_(h,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?__(h,t.type,t.stateNode):y_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Af(t,t.memoizedProps,a.memoizedProps)}break;case 27:hr(r,t),dr(t),l&512&&(En||a===null||vi(a,a.return)),a!==null&&l&4&&Af(t,t.memoizedProps,a.memoizedProps);break;case 5:if(hr(r,t),dr(t),l&512&&(En||a===null||vi(a,a.return)),t.flags&32){h=t.stateNode;try{ur(h,"")}catch(Ne){kt(t,t.return,Ne)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Af(t,h,a!==null?a.memoizedProps:h)),l&1024&&(If=!0);break;case 6:if(hr(r,t),dr(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Ne){kt(t,t.return,Ne)}}break;case 3:if(Kc=null,h=ti,ti=Hc(r.containerInfo),hr(r,t),ti=h,dr(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Mo(r.containerInfo)}catch(Ne){kt(t,t.return,Ne)}If&&(If=!1,_v(t));break;case 4:l=ti,ti=Hc(t.stateNode.containerInfo),hr(r,t),dr(t),ti=l;break;case 12:hr(r,t),dr(t);break;case 31:hr(r,t),dr(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,xc(t,l)));break;case 13:hr(r,t),dr(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Mc=_t()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,xc(t,l)));break;case 22:h=t.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,H=Hi,J=En;if(Hi=H||h,En=J||O,hr(r,t),En=J,Hi=H,dr(t),l&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(a===null||O||Hi||En||xa(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){O=a=r;try{if(f=O.stateNode,h)_=f.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{w=O.stateNode;var te=O.memoizedProps.style,K=te!=null&&te.hasOwnProperty("display")?te.display:null;w.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Ne){kt(O,O.return,Ne)}}}else if(r.tag===6){if(a===null){O=r;try{O.stateNode.nodeValue=h?"":O.memoizedProps}catch(Ne){kt(O,O.return,Ne)}}}else if(r.tag===18){if(a===null){O=r;try{var $=O.stateNode;h?l_($,!0):l_(O.stateNode,!1)}catch(Ne){kt(O,O.return,Ne)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,xc(t,a))));break;case 19:hr(r,t),dr(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,xc(t,l)));break;case 30:break;case 21:break;default:hr(r,t),dr(t)}}function dr(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(cv(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=Rf(t);Nc(t,f,h);break;case 5:var _=a.stateNode;a.flags&32&&(ur(_,""),a.flags&=-33);var w=Rf(t);Nc(t,w,_);break;case 3:case 4:var O=a.stateNode.containerInfo,H=Rf(t);Cf(t,H,O);break;default:throw Error(s(161))}}catch(J){kt(t,t.return,J)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function _v(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;_v(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Ki(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)fv(t,r.alternate,r),r=r.sibling}function xa(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Rs(4,r,r.return),xa(r);break;case 1:vi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&lv(r,r.return,a),xa(r);break;case 27:Gl(r.stateNode);case 26:case 5:vi(r,r.return),xa(r);break;case 22:r.memoizedState===null&&xa(r);break;case 30:xa(r);break;default:xa(r)}t=t.sibling}}function Qi(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,f=r,_=f.flags;switch(f.tag){case 0:case 11:case 15:Qi(h,f,a),Vl(4,f);break;case 1:if(Qi(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(H){kt(l,l.return,H)}if(l=f,h=l.updateQueue,h!==null){var w=l.stateNode;try{var O=h.shared.hiddenCallbacks;if(O!==null)for(h.shared.hiddenCallbacks=null,h=0;h<O.length;h++)$g(O[h],w)}catch(H){kt(l,l.return,H)}}a&&_&64&&ov(f),Pl(f,f.return);break;case 27:hv(f);case 26:case 5:Qi(h,f,a),a&&l===null&&_&4&&uv(f),Pl(f,f.return);break;case 12:Qi(h,f,a);break;case 31:Qi(h,f,a),a&&_&4&&gv(h,f);break;case 13:Qi(h,f,a),a&&_&4&&yv(h,f);break;case 22:f.memoizedState===null&&Qi(h,f,a),Pl(f,f.return);break;case 30:break;default:Qi(h,f,a)}r=r.sibling}}function Nf(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&bl(a))}function xf(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&bl(t))}function ni(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Ev(t,r,a,l),r=r.sibling}function Ev(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:ni(t,r,a,l),h&2048&&Vl(9,r);break;case 1:ni(t,r,a,l);break;case 3:ni(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&bl(t)));break;case 12:if(h&2048){ni(t,r,a,l),t=r.stateNode;try{var f=r.memoizedProps,_=f.id,w=f.onPostCommit;typeof w=="function"&&w(_,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){kt(r,r.return,O)}}else ni(t,r,a,l);break;case 31:ni(t,r,a,l);break;case 13:ni(t,r,a,l);break;case 23:break;case 22:f=r.stateNode,_=r.alternate,r.memoizedState!==null?f._visibility&2?ni(t,r,a,l):Ll(t,r):f._visibility&2?ni(t,r,a,l):(f._visibility|=2,To(t,r,a,l,(r.subtreeFlags&10256)!==0||!1)),h&2048&&Nf(_,r);break;case 24:ni(t,r,a,l),h&2048&&xf(r.alternate,r);break;default:ni(t,r,a,l)}}function To(t,r,a,l,h){for(h=h&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var f=t,_=r,w=a,O=l,H=_.flags;switch(_.tag){case 0:case 11:case 15:To(f,_,w,O,h),Vl(8,_);break;case 23:break;case 22:var J=_.stateNode;_.memoizedState!==null?J._visibility&2?To(f,_,w,O,h):Ll(f,_):(J._visibility|=2,To(f,_,w,O,h)),h&&H&2048&&Nf(_.alternate,_);break;case 24:To(f,_,w,O,h),h&&H&2048&&xf(_.alternate,_);break;default:To(f,_,w,O,h)}r=r.sibling}}function Ll(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:Ll(a,l),h&2048&&Nf(l.alternate,l);break;case 24:Ll(a,l),h&2048&&xf(l.alternate,l);break;default:Ll(a,l)}r=r.sibling}}var Ul=8192;function bo(t,r,a){if(t.subtreeFlags&Ul)for(t=t.child;t!==null;)Tv(t,r,a),t=t.sibling}function Tv(t,r,a){switch(t.tag){case 26:bo(t,r,a),t.flags&Ul&&t.memoizedState!==null&&j1(a,ti,t.memoizedState,t.memoizedProps);break;case 5:bo(t,r,a);break;case 3:case 4:var l=ti;ti=Hc(t.stateNode.containerInfo),bo(t,r,a),ti=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Ul,Ul=16777216,bo(t,r,a),Ul=l):bo(t,r,a));break;default:bo(t,r,a)}}function bv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function jl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Mn=l,wv(l,t)}bv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Sv(t),t=t.sibling}function Sv(t){switch(t.tag){case 0:case 11:case 15:jl(t),t.flags&2048&&Rs(9,t,t.return);break;case 3:jl(t);break;case 12:jl(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Dc(t)):jl(t);break;default:jl(t)}}function Dc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Mn=l,wv(l,t)}bv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Rs(8,r,r.return),Dc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Dc(r));break;default:Dc(r)}t=t.sibling}}function wv(t,r){for(;Mn!==null;){var a=Mn;switch(a.tag){case 0:case 11:case 15:Rs(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:bl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Mn=l;else e:for(a=t;Mn!==null;){l=Mn;var h=l.sibling,f=l.return;if(mv(l),l===a){Mn=null;break e}if(h!==null){h.return=f,Mn=h;break e}Mn=f}}}var e1={getCacheForType:function(t){var r=Bn(yn),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a},cacheSignal:function(){return Bn(yn).controller.signal}},t1=typeof WeakMap=="function"?WeakMap:Map,Rt=0,qt=null,st=null,ut=0,Ot=0,Ir=null,Cs=!1,So=!1,Df=!1,Yi=0,sn=0,Is=0,Da=0,Mf=0,Nr=0,wo=0,zl=null,fr=null,Of=!1,Mc=0,Av=0,Oc=1/0,kc=null,Ns=null,Rn=0,xs=null,Ao=null,Xi=0,kf=0,Vf=null,Rv=null,Bl=0,Pf=null;function xr(){return(Rt&2)!==0&&ut!==0?ut&-ut:Q.T!==null?qf():Qa()}function Cv(){if(Nr===0)if((ut&536870912)===0||pt){var t=Er;Er<<=1,(Er&3932160)===0&&(Er=262144),Nr=t}else Nr=536870912;return t=Rr.current,t!==null&&(t.flags|=32),Nr}function mr(t,r,a){(t===qt&&(Ot===2||Ot===9)||t.cancelPendingCommit!==null)&&(Ro(t,0),Ds(t,ut,Nr,!1)),cn(t,a),((Rt&2)===0||t!==qt)&&(t===qt&&((Rt&2)===0&&(Da|=a),sn===4&&Ds(t,ut,Nr,!1)),_i(t))}function Iv(t,r,a){if((Rt&6)!==0)throw Error(s(327));var l=!a&&(r&127)===0&&(r&t.expiredLanes)===0||Oe(t,r),h=l?i1(t,r):Uf(t,r,!0),f=l;do{if(h===0){So&&!l&&Ds(t,r,0,!1);break}else{if(a=t.current.alternate,f&&!n1(a)){h=Uf(t,r,!1),f=!1;continue}if(h===2){if(f=r,t.errorRecoveryDisabledLanes&f)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var w=t;h=zl;var O=w.current.memoizedState.isDehydrated;if(O&&(Ro(w,_).flags|=256),_=Uf(w,_,!1),_!==2){if(Df&&!O){w.errorRecoveryDisabledLanes|=f,Da|=f,h=4;break e}f=fr,fr=h,f!==null&&(fr===null?fr=f:fr.push.apply(fr,f))}h=_}if(f=!1,h!==2)continue}}if(h===1){Ro(t,0),Ds(t,r,0,!0);break}e:{switch(l=t,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Ds(l,r,Nr,!Cs);break e;case 2:fr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(h=Mc+300-_t(),10<h)){if(Ds(l,r,Nr,!Cs),ar(l,0,!0)!==0)break e;Xi=r,l.timeoutHandle=s_(Nv.bind(null,l,a,fr,kc,Of,r,Nr,Da,wo,Cs,f,"Throttled",-0,0),h);break e}Nv(l,a,fr,kc,Of,r,Nr,Da,wo,Cs,f,null,-0,0)}}break}while(!0);_i(t)}function Nv(t,r,a,l,h,f,_,w,O,H,J,te,K,$){if(t.timeoutHandle=-1,te=r.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xr},Tv(r,f,te);var Ne=(f&62914560)===f?Mc-_t():(f&4194048)===f?Av-_t():0;if(Ne=z1(te,Ne),Ne!==null){Xi=f,t.cancelPendingCommit=Ne(Lv.bind(null,t,r,f,a,l,h,_,w,O,J,te,null,K,$)),Ds(t,f,_,!H);return}}Lv(t,r,f,a,l,h,_,w,O)}function n1(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!wr(f(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ds(t,r,a,l){r&=~Mf,r&=~Da,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var f=31-Et(h),_=1<<f;l[f]=-1,h&=~_}a!==0&&Ln(t,a,r)}function Vc(){return(Rt&6)===0?(ql(0),!1):!0}function Lf(){if(st!==null){if(Ot===0)var t=st.return;else t=st,Ui=ba=null,Wd(t),go=null,wl=0,t=st;for(;t!==null;)av(t.alternate,t),t=t.return;st=null}}function Ro(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,b1(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Xi=0,Lf(),qt=t,st=a=Pi(t.current,null),ut=r,Ot=0,Ir=null,Cs=!1,So=Oe(t,r),Df=!1,wo=Nr=Mf=Da=Is=sn=0,fr=zl=null,Of=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-Et(l),f=1<<h;r|=t[h],l&=~f}return Yi=r,nc(),a}function xv(t,r){et=null,Q.H=Ml,r===po||r===cc?(r=Kg(),Ot=3):r===zd?(r=Kg(),Ot=4):Ot=r===pf?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Ir=r,st===null&&(sn=1,wc(t,jr(r,t.current)))}function Dv(){var t=Rr.current;return t===null?!0:(ut&4194048)===ut?Fr===null:(ut&62914560)===ut||(ut&536870912)!==0?t===Fr:!1}function Mv(){var t=Q.H;return Q.H=Ml,t===null?Ml:t}function Ov(){var t=Q.A;return Q.A=e1,t}function Pc(){sn=4,Cs||(ut&4194048)!==ut&&Rr.current!==null||(So=!0),(Is&134217727)===0&&(Da&134217727)===0||qt===null||Ds(qt,ut,Nr,!1)}function Uf(t,r,a){var l=Rt;Rt|=2;var h=Mv(),f=Ov();(qt!==t||ut!==r)&&(kc=null,Ro(t,r)),r=!1;var _=sn;e:do try{if(Ot!==0&&st!==null){var w=st,O=Ir;switch(Ot){case 8:Lf(),_=6;break e;case 3:case 2:case 9:case 6:Rr.current===null&&(r=!0);var H=Ot;if(Ot=0,Ir=null,Co(t,w,O,H),a&&So){_=0;break e}break;default:H=Ot,Ot=0,Ir=null,Co(t,w,O,H)}}r1(),_=sn;break}catch(J){xv(t,J)}while(!0);return r&&t.shellSuspendCounter++,Ui=ba=null,Rt=l,Q.H=h,Q.A=f,st===null&&(qt=null,ut=0,nc()),_}function r1(){for(;st!==null;)kv(st)}function i1(t,r){var a=Rt;Rt|=2;var l=Mv(),h=Ov();qt!==t||ut!==r?(kc=null,Oc=_t()+500,Ro(t,r)):So=Oe(t,r);e:do try{if(Ot!==0&&st!==null){r=st;var f=Ir;t:switch(Ot){case 1:Ot=0,Ir=null,Co(t,r,f,1);break;case 2:case 9:if(Hg(f)){Ot=0,Ir=null,Vv(r);break}r=function(){Ot!==2&&Ot!==9||qt!==t||(Ot=7),_i(t)},f.then(r,r);break e;case 3:Ot=7;break e;case 4:Ot=5;break e;case 7:Hg(f)?(Ot=0,Ir=null,Vv(r)):(Ot=0,Ir=null,Co(t,r,f,7));break;case 5:var _=null;switch(st.tag){case 26:_=st.memoizedState;case 5:case 27:var w=st;if(_?E_(_):w.stateNode.complete){Ot=0,Ir=null;var O=w.sibling;if(O!==null)st=O;else{var H=w.return;H!==null?(st=H,Lc(H)):st=null}break t}}Ot=0,Ir=null,Co(t,r,f,5);break;case 6:Ot=0,Ir=null,Co(t,r,f,6);break;case 8:Lf(),sn=6;break e;default:throw Error(s(462))}}s1();break}catch(J){xv(t,J)}while(!0);return Ui=ba=null,Q.H=l,Q.A=h,Rt=a,st!==null?0:(qt=null,ut=0,nc(),sn)}function s1(){for(;st!==null&&!zt();)kv(st)}function kv(t){var r=iv(t.alternate,t,Yi);t.memoizedProps=t.pendingProps,r===null?Lc(t):st=r}function Vv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=Wy(a,r,r.pendingProps,r.type,void 0,ut);break;case 11:r=Wy(a,r,r.pendingProps,r.type.render,r.ref,ut);break;case 5:Wd(r);default:av(a,r),r=st=Og(r,Yi),r=iv(a,r,Yi)}t.memoizedProps=t.pendingProps,r===null?Lc(t):st=r}function Co(t,r,a,l){Ui=ba=null,Wd(r),go=null,wl=0;var h=r.return;try{if(QS(t,h,r,a,ut)){sn=1,wc(t,jr(a,t.current)),st=null;return}}catch(f){if(h!==null)throw st=h,f;sn=1,wc(t,jr(a,t.current)),st=null;return}r.flags&32768?(pt||l===1?t=!0:So||(ut&536870912)!==0?t=!1:(Cs=t=!0,(l===2||l===9||l===3||l===6)&&(l=Rr.current,l!==null&&l.tag===13&&(l.flags|=16384))),Pv(r,t)):Lc(r)}function Lc(t){var r=t;do{if((r.flags&32768)!==0){Pv(r,Cs);return}t=r.return;var a=$S(r.alternate,r,Yi);if(a!==null){st=a;return}if(r=r.sibling,r!==null){st=r;return}st=r=t}while(r!==null);sn===0&&(sn=5)}function Pv(t,r){do{var a=JS(t.alternate,t);if(a!==null){a.flags&=32767,st=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){st=t;return}st=t=a}while(t!==null);sn=6,st=null}function Lv(t,r,a,l,h,f,_,w,O){t.cancelPendingCommit=null;do Uc();while(Rn!==0);if((Rt&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(f=r.lanes|r.childLanes,f|=Ad,or(t,a,f,_,w,O),t===qt&&(st=qt=null,ut=0),Ao=r,xs=t,Xi=a,kf=f,Vf=h,Rv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,u1(ze,function(){return qv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null,h=le.p,le.p=2,_=Rt,Rt|=4;try{WS(t,r,a)}finally{Rt=_,le.p=h,Q.T=l}}Rn=1,Uv(),jv(),zv()}}function Uv(){if(Rn===1){Rn=0;var t=xs,r=Ao,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var l=le.p;le.p=2;var h=Rt;Rt|=4;try{vv(r,t);var f=$f,_=wg(t.containerInfo),w=f.focusedElem,O=f.selectionRange;if(_!==w&&w&&w.ownerDocument&&Sg(w.ownerDocument.documentElement,w)){if(O!==null&&Ed(w)){var H=O.start,J=O.end;if(J===void 0&&(J=H),"selectionStart"in w)w.selectionStart=H,w.selectionEnd=Math.min(J,w.value.length);else{var te=w.ownerDocument||document,K=te&&te.defaultView||window;if(K.getSelection){var $=K.getSelection(),Ne=w.textContent.length,Fe=Math.min(O.start,Ne),jt=O.end===void 0?Fe:Math.min(O.end,Ne);!$.extend&&Fe>jt&&(_=jt,jt=Fe,Fe=_);var j=bg(w,Fe),P=bg(w,jt);if(j&&P&&($.rangeCount!==1||$.anchorNode!==j.node||$.anchorOffset!==j.offset||$.focusNode!==P.node||$.focusOffset!==P.offset)){var F=te.createRange();F.setStart(j.node,j.offset),$.removeAllRanges(),Fe>jt?($.addRange(F),$.extend(P.node,P.offset)):(F.setEnd(P.node,P.offset),$.addRange(F))}}}}for(te=[],$=w;$=$.parentNode;)$.nodeType===1&&te.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<te.length;w++){var Z=te[w];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}$c=!!Xf,$f=Xf=null}finally{Rt=h,le.p=l,Q.T=a}}t.current=r,Rn=2}}function jv(){if(Rn===2){Rn=0;var t=xs,r=Ao,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var l=le.p;le.p=2;var h=Rt;Rt|=4;try{fv(t,r.alternate,r)}finally{Rt=h,le.p=l,Q.T=a}}Rn=3}}function zv(){if(Rn===4||Rn===3){Rn=0,gt();var t=xs,r=Ao,a=Xi,l=Rv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Rn=5:(Rn=0,Ao=xs=null,Bv(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Ns=null),Yr(a),r=r.stateNode,Vt&&typeof Vt.onCommitFiberRoot=="function")try{Vt.onCommitFiberRoot($t,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=Q.T,h=le.p,le.p=2,Q.T=null;try{for(var f=t.onRecoverableError,_=0;_<l.length;_++){var w=l[_];f(w.value,{componentStack:w.stack})}}finally{Q.T=r,le.p=h}}(Xi&3)!==0&&Uc(),_i(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===Pf?Bl++:(Bl=0,Pf=t):Bl=0,ql(0)}}function Bv(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,bl(r)))}function Uc(){return Uv(),jv(),zv(),qv()}function qv(){if(Rn!==5)return!1;var t=xs,r=kf;kf=0;var a=Yr(Xi),l=Q.T,h=le.p;try{le.p=32>a?32:a,Q.T=null,a=Vf,Vf=null;var f=xs,_=Xi;if(Rn=0,Ao=xs=null,Xi=0,(Rt&6)!==0)throw Error(s(331));var w=Rt;if(Rt|=4,Sv(f.current),Ev(f,f.current,_,a),Rt=w,ql(0,!1),Vt&&typeof Vt.onPostCommitFiberRoot=="function")try{Vt.onPostCommitFiberRoot($t,f)}catch{}return!0}finally{le.p=h,Q.T=l,Bv(t,r)}}function Fv(t,r,a){r=jr(a,r),r=mf(t.stateNode,r,2),t=Ss(t,r,2),t!==null&&(cn(t,2),_i(t))}function kt(t,r,a){if(t.tag===3)Fv(t,t,a);else for(;r!==null;){if(r.tag===3){Fv(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ns===null||!Ns.has(l))){t=jr(a,t),a=Hy(2),l=Ss(r,a,2),l!==null&&(Gy(a,l,r,t),cn(l,2),_i(l));break}}r=r.return}}function jf(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new t1;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(Df=!0,h.add(a),t=a1.bind(null,t,r,a),r.then(t,t))}function a1(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,qt===t&&(ut&a)===a&&(sn===4||sn===3&&(ut&62914560)===ut&&300>_t()-Mc?(Rt&2)===0&&Ro(t,0):Mf|=a,wo===ut&&(wo=0)),_i(t)}function Hv(t,r){r===0&&(r=St()),t=_a(t,r),t!==null&&(cn(t,r),_i(t))}function o1(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),Hv(t,a)}function l1(t,r){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),Hv(t,a)}function u1(t,r){return Te(t,r)}var jc=null,Io=null,zf=!1,zc=!1,Bf=!1,Ms=0;function _i(t){t!==Io&&t.next===null&&(Io===null?jc=Io=t:Io=Io.next=t),zc=!0,zf||(zf=!0,h1())}function ql(t,r){if(!Bf&&zc){Bf=!0;do for(var a=!1,l=jc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var _=l.suspendedLanes,w=l.pingedLanes;f=(1<<31-Et(42|t)+1)-1,f&=h&~(_&~w),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Yv(l,f))}else f=ut,f=ar(l,l===qt?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Oe(l,f)||(a=!0,Yv(l,f));l=l.next}while(a);Bf=!1}}function c1(){Gv()}function Gv(){zc=zf=!1;var t=0;Ms!==0&&T1()&&(t=Ms);for(var r=_t(),a=null,l=jc;l!==null;){var h=l.next,f=Kv(l,r);f===0?(l.next=null,a===null?jc=h:a.next=h,h===null&&(Io=a)):(a=l,(t!==0||(f&3)!==0)&&(zc=!0)),l=h}Rn!==0&&Rn!==5||ql(t),Ms!==0&&(Ms=0)}function Kv(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var _=31-Et(f),w=1<<_,O=h[_];O===-1?((w&a)===0||(w&l)!==0)&&(h[_]=yt(w,r)):O<=r&&(t.expiredLanes|=w),f&=~w}if(r=qt,a=ut,a=ar(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(Ot===2||Ot===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&qe(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Oe(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&qe(l),Yr(a)){case 2:case 8:a=ln;break;case 32:a=ze;break;case 268435456:a=Nn;break;default:a=ze}return l=Qv.bind(null,t),a=Te(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&qe(l),t.callbackPriority=2,t.callbackNode=null,2}function Qv(t,r){if(Rn!==0&&Rn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Uc()&&t.callbackNode!==a)return null;var l=ut;return l=ar(t,t===qt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Iv(t,l,r),Kv(t,_t()),t.callbackNode!=null&&t.callbackNode===a?Qv.bind(null,t):null)}function Yv(t,r){if(Uc())return null;Iv(t,r,!0)}function h1(){S1(function(){(Rt&6)!==0?Te(xt,c1):Gv()})}function qf(){if(Ms===0){var t=fo;t===0&&(t=Jt,Jt<<=1,(Jt&261888)===0&&(Jt=256)),Ms=t}return Ms}function Xv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ja(""+t)}function $v(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function d1(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var f=Xv((h[oe]||null).action),_=l.submitter;_&&(r=(r=_[oe]||null)?Xv(r.formAction):_.getAttribute("formAction"),r!==null&&(f=r,_=null));var w=new di("action","action",null,l,h);t.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ms!==0){var O=_?$v(h,_):new FormData(h);lf(a,{pending:!0,data:O,method:h.method,action:f},null,O)}}else typeof f=="function"&&(w.preventDefault(),O=_?$v(h,_):new FormData(h),lf(a,{pending:!0,data:O,method:h.method,action:f},f,O))},currentTarget:h}]})}}for(var Ff=0;Ff<wd.length;Ff++){var Hf=wd[Ff],f1=Hf.toLowerCase(),m1=Hf[0].toUpperCase()+Hf.slice(1);ei(f1,"on"+m1)}ei(Cg,"onAnimationEnd"),ei(Ig,"onAnimationIteration"),ei(Ng,"onAnimationStart"),ei("dblclick","onDoubleClick"),ei("focusin","onFocus"),ei("focusout","onBlur"),ei(xS,"onTransitionRun"),ei(DS,"onTransitionStart"),ei(MS,"onTransitionCancel"),ei(xg,"onTransitionEnd"),li("onMouseEnter",["mouseout","mouseover"]),li("onMouseLeave",["mouseout","mouseover"]),li("onPointerEnter",["pointerout","pointerover"]),li("onPointerLeave",["pointerout","pointerover"]),kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),kr("onBeforeInput",["compositionend","keypress","textInput","paste"]),kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fl));function Jv(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var f=void 0;if(r)for(var _=l.length-1;0<=_;_--){var w=l[_],O=w.instance,H=w.currentTarget;if(w=w.listener,O!==f&&h.isPropagationStopped())break e;f=w,h.currentTarget=H;try{f(h)}catch(J){tc(J)}h.currentTarget=null,f=O}else for(_=0;_<l.length;_++){if(w=l[_],O=w.instance,H=w.currentTarget,w=w.listener,O!==f&&h.isPropagationStopped())break e;f=w,h.currentTarget=H;try{f(h)}catch(J){tc(J)}h.currentTarget=null,f=O}}}}function at(t,r){var a=r[ke];a===void 0&&(a=r[ke]=new Set);var l=t+"__bubble";a.has(l)||(Wv(r,t,2,!1),a.add(l))}function Gf(t,r,a){var l=0;r&&(l|=4),Wv(a,t,l,r)}var Bc="_reactListening"+Math.random().toString(36).slice(2);function Kf(t){if(!t[Bc]){t[Bc]=!0,$n.forEach(function(a){a!=="selectionchange"&&(p1.has(a)||Gf(a,!1,t),Gf(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Bc]||(r[Bc]=!0,Gf("selectionchange",!1,r))}}function Wv(t,r,a,l){switch(C_(r)){case 2:var h=F1;break;case 8:h=H1;break;default:h=om}a=h.bind(null,r,a,t),h=void 0,!ha||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function Qf(t,r,a,l,h){var f=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var w=l.stateNode.containerInfo;if(w===h)break;if(_===4)for(_=l.return;_!==null;){var O=_.tag;if((O===3||O===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;w!==null;){if(_=hn(w),_===null)return;if(O=_.tag,O===5||O===6||O===26||O===27){l=f=_;continue e}w=w.parentNode}}l=l.return}fs(function(){var H=f,J=Vr(a),te=[];e:{var K=Dg.get(t);if(K!==void 0){var $=di,Ne=t;switch(t){case"keypress":if(fa(a)===0)break e;case"keydown":case"keyup":$=Wu;break;case"focusin":Ne="focus",$=pa;break;case"focusout":Ne="blur",$=pa;break;case"beforeblur":case"afterblur":$=pa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=ml;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=Fu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=y;break;case Cg:case Ig:case Ng:$=Gu;break;case xg:$=R;break;case"scroll":case"scrollend":$=fl;break;case"wheel":$=Y;break;case"copy":case"cut":case"paste":$=Ku;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=Vi;break;case"toggle":case"beforetoggle":$=Ze}var Fe=(r&4)!==0,jt=!Fe&&(t==="scroll"||t==="scrollend"),j=Fe?K!==null?K+"Capture":null:K;Fe=[];for(var P=H,F;P!==null;){var Z=P;if(F=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||F===null||j===null||(Z=$r(P,j),Z!=null&&Fe.push(Hl(P,Z,F))),jt)break;P=P.return}0<Fe.length&&(K=new $(K,Ne,null,a,J),te.push({event:K,listeners:Fe}))}}if((r&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",$=t==="mouseout"||t==="pointerout",K&&a!==cl&&(Ne=a.relatedTarget||a.fromElement)&&(hn(Ne)||Ne[Se]))break e;if(($||K)&&(K=J.window===J?J:(K=J.ownerDocument)?K.defaultView||K.parentWindow:window,$?(Ne=a.relatedTarget||a.toElement,$=H,Ne=Ne?hn(Ne):null,Ne!==null&&(jt=u(Ne),Fe=Ne.tag,Ne!==jt||Fe!==5&&Fe!==27&&Fe!==6)&&(Ne=null)):($=null,Ne=H),$!==Ne)){if(Fe=ml,Z="onMouseLeave",j="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(Fe=Vi,Z="onPointerLeave",j="onPointerEnter",P="pointer"),jt=$==null?K:Dt($),F=Ne==null?K:Dt(Ne),K=new Fe(Z,P+"leave",$,a,J),K.target=jt,K.relatedTarget=F,Z=null,hn(J)===H&&(Fe=new Fe(j,P+"enter",Ne,a,J),Fe.target=F,Fe.relatedTarget=jt,Z=Fe),jt=Z,$&&Ne)t:{for(Fe=g1,j=$,P=Ne,F=0,Z=j;Z;Z=Fe(Z))F++;Z=0;for(var Le=P;Le;Le=Fe(Le))Z++;for(;0<F-Z;)j=Fe(j),F--;for(;0<Z-F;)P=Fe(P),Z--;for(;F--;){if(j===P||P!==null&&j===P.alternate){Fe=j;break t}j=Fe(j),P=Fe(P)}Fe=null}else Fe=null;$!==null&&Zv(te,K,$,Fe,!1),Ne!==null&&jt!==null&&Zv(te,jt,Ne,Fe,!0)}}e:{if(K=H?Dt(H):window,$=K.nodeName&&K.nodeName.toLowerCase(),$==="select"||$==="input"&&K.type==="file")var Tt=gg;else if(mg(K))if(yg)Tt=CS;else{Tt=AS;var Me=wS}else $=K.nodeName,!$||$.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?H&&$a(H.elementType)&&(Tt=gg):Tt=RS;if(Tt&&(Tt=Tt(t,H))){pg(te,Tt,a,J);break e}Me&&Me(t,K,H),t==="focusout"&&H&&K.type==="number"&&H.memoizedProps.value!=null&&ol(K,"number",K.value)}switch(Me=H?Dt(H):window,t){case"focusin":(mg(Me)||Me.contentEditable==="true")&&(io=Me,Td=H,_l=null);break;case"focusout":_l=Td=io=null;break;case"mousedown":bd=!0;break;case"contextmenu":case"mouseup":case"dragend":bd=!1,Ag(te,a,J);break;case"selectionchange":if(NS)break;case"keydown":case"keyup":Ag(te,a,J)}var tt;if(At)e:{switch(t){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else ro?ga(t,a)&&(ct="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(ct="onCompositionStart");ct&&(pi&&a.locale!=="ko"&&(ro||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&ro&&(tt=dl()):(hi=J,hl="value"in hi?hi.value:hi.textContent,ro=!0)),Me=qc(H,ct),0<Me.length&&(ct=new mi(ct,t,null,a,J),te.push({event:ct,listeners:Me}),tt?ct.data=tt:(tt=no(a),tt!==null&&(ct.data=tt)))),(tt=Lr?ES(t,a):TS(t,a))&&(ct=qc(H,"onBeforeInput"),0<ct.length&&(Me=new mi("onBeforeInput","beforeinput",null,a,J),te.push({event:Me,listeners:ct}),Me.data=tt)),d1(te,t,H,a,J)}Jv(te,r)})}function Hl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function qc(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=$r(t,a),h!=null&&l.unshift(Hl(t,h,f)),h=$r(t,r),h!=null&&l.push(Hl(t,h,f))),t.tag===3)return l;t=t.return}return[]}function g1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Zv(t,r,a,l,h){for(var f=r._reactName,_=[];a!==null&&a!==l;){var w=a,O=w.alternate,H=w.stateNode;if(w=w.tag,O!==null&&O===l)break;w!==5&&w!==26&&w!==27||H===null||(O=H,h?(H=$r(a,f),H!=null&&_.unshift(Hl(a,H,O))):h||(H=$r(a,f),H!=null&&_.push(Hl(a,H,O)))),a=a.return}_.length!==0&&t.push({event:r,listeners:_})}var y1=/\r\n?/g,v1=/\u0000|\uFFFD/g;function e_(t){return(typeof t=="string"?t:""+t).replace(y1,`
`).replace(v1,"")}function t_(t,r){return r=e_(r),e_(t)===r}function Ut(t,r,a,l,h,f){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||ur(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&ur(t,""+l);break;case"className":Sr(t,"class",l);break;case"tabIndex":Sr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Sr(t,a,l);break;case"style":ul(t,l,f);break;case"data":if(r!=="object"){Sr(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ja(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(r!=="input"&&Ut(t,r,"name",h.name,h,null),Ut(t,r,"formEncType",h.formEncType,h,null),Ut(t,r,"formMethod",h.formMethod,h,null),Ut(t,r,"formTarget",h.formTarget,h,null)):(Ut(t,r,"encType",h.encType,h,null),Ut(t,r,"method",h.method,h,null),Ut(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ja(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Xr);break;case"onScroll":l!=null&&at("scroll",t);break;case"onScrollEnd":l!=null&&at("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Ja(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":at("beforetoggle",t),at("toggle",t),Ya(t,"popover",l);break;case"xlinkActuate":gn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":gn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":gn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":gn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":gn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":gn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":gn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":gn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":gn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ya(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=qu.get(a)||a,Ya(t,a,l))}}function Yf(t,r,a,l,h,f){switch(a){case"style":ul(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?ur(t,l):(typeof l=="number"||typeof l=="bigint")&&ur(t,""+l);break;case"onScroll":l!=null&&at("scroll",t);break;case"onScrollEnd":l!=null&&at("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Xr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rr.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),f=t[oe]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(r,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ya(t,a,l)}}}function Fn(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":at("error",t),at("load",t);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var _=a[f];if(_!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ut(t,r,f,_,a,null)}}h&&Ut(t,r,"srcSet",a.srcSet,a,null),l&&Ut(t,r,"src",a.src,a,null);return;case"input":at("invalid",t);var w=f=_=h=null,O=null,H=null;for(l in a)if(a.hasOwnProperty(l)){var J=a[l];if(J!=null)switch(l){case"name":h=J;break;case"type":_=J;break;case"checked":O=J;break;case"defaultChecked":H=J;break;case"value":f=J;break;case"defaultValue":w=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,r));break;default:Ut(t,r,l,J,a,null)}}ju(t,f,w,O,H,_,h,!1);return;case"select":at("invalid",t),l=_=f=null;for(h in a)if(a.hasOwnProperty(h)&&(w=a[h],w!=null))switch(h){case"value":f=w;break;case"defaultValue":_=w;break;case"multiple":l=w;default:Ut(t,r,h,w,a,null)}r=f,a=_,t.multiple=!!l,r!=null?us(t,!!l,r,!1):a!=null&&us(t,!!l,a,!0);return;case"textarea":at("invalid",t),f=h=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(w=a[_],w!=null))switch(_){case"value":l=w;break;case"defaultValue":h=w;break;case"children":f=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:Ut(t,r,_,w,a,null)}cs(t,l,h,f);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(l=a[O],l!=null))switch(O){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ut(t,r,O,l,a,null)}return;case"dialog":at("beforetoggle",t),at("toggle",t),at("cancel",t),at("close",t);break;case"iframe":case"object":at("load",t);break;case"video":case"audio":for(l=0;l<Fl.length;l++)at(Fl[l],t);break;case"image":at("error",t),at("load",t);break;case"details":at("toggle",t);break;case"embed":case"source":case"link":at("error",t),at("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in a)if(a.hasOwnProperty(H)&&(l=a[H],l!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ut(t,r,H,l,a,null)}return;default:if($a(r)){for(J in a)a.hasOwnProperty(J)&&(l=a[J],l!==void 0&&Yf(t,r,J,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&Ut(t,r,w,l,a,null))}function _1(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,_=null,w=null,O=null,H=null,J=null;for($ in a){var te=a[$];if(a.hasOwnProperty($)&&te!=null)switch($){case"checked":break;case"value":break;case"defaultValue":O=te;default:l.hasOwnProperty($)||Ut(t,r,$,null,l,te)}}for(var K in l){var $=l[K];if(te=a[K],l.hasOwnProperty(K)&&($!=null||te!=null))switch(K){case"type":f=$;break;case"name":h=$;break;case"checked":H=$;break;case"defaultChecked":J=$;break;case"value":_=$;break;case"defaultValue":w=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,r));break;default:$!==te&&Ut(t,r,K,$,l,te)}}Xa(t,_,w,O,H,J,f,h);return;case"select":$=_=w=K=null;for(f in a)if(O=a[f],a.hasOwnProperty(f)&&O!=null)switch(f){case"value":break;case"multiple":$=O;default:l.hasOwnProperty(f)||Ut(t,r,f,null,l,O)}for(h in l)if(f=l[h],O=a[h],l.hasOwnProperty(h)&&(f!=null||O!=null))switch(h){case"value":K=f;break;case"defaultValue":w=f;break;case"multiple":_=f;default:f!==O&&Ut(t,r,h,f,l,O)}r=w,a=_,l=$,K!=null?us(t,!!a,K,!1):!!l!=!!a&&(r!=null?us(t,!!a,r,!0):us(t,!!a,a?[]:"",!1));return;case"textarea":$=K=null;for(w in a)if(h=a[w],a.hasOwnProperty(w)&&h!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Ut(t,r,w,null,l,h)}for(_ in l)if(h=l[_],f=a[_],l.hasOwnProperty(_)&&(h!=null||f!=null))switch(_){case"value":K=h;break;case"defaultValue":$=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&Ut(t,r,_,h,l,f)}zu(t,K,$);return;case"option":for(var Ne in a)if(K=a[Ne],a.hasOwnProperty(Ne)&&K!=null&&!l.hasOwnProperty(Ne))switch(Ne){case"selected":t.selected=!1;break;default:Ut(t,r,Ne,null,l,K)}for(O in l)if(K=l[O],$=a[O],l.hasOwnProperty(O)&&K!==$&&(K!=null||$!=null))switch(O){case"selected":t.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:Ut(t,r,O,K,l,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Fe in a)K=a[Fe],a.hasOwnProperty(Fe)&&K!=null&&!l.hasOwnProperty(Fe)&&Ut(t,r,Fe,null,l,K);for(H in l)if(K=l[H],$=a[H],l.hasOwnProperty(H)&&K!==$&&(K!=null||$!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,r));break;default:Ut(t,r,H,K,l,$)}return;default:if($a(r)){for(var jt in a)K=a[jt],a.hasOwnProperty(jt)&&K!==void 0&&!l.hasOwnProperty(jt)&&Yf(t,r,jt,void 0,l,K);for(J in l)K=l[J],$=a[J],!l.hasOwnProperty(J)||K===$||K===void 0&&$===void 0||Yf(t,r,J,K,l,$);return}}for(var j in a)K=a[j],a.hasOwnProperty(j)&&K!=null&&!l.hasOwnProperty(j)&&Ut(t,r,j,null,l,K);for(te in l)K=l[te],$=a[te],!l.hasOwnProperty(te)||K===$||K==null&&$==null||Ut(t,r,te,K,l,$)}function n_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function E1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],f=h.transferSize,_=h.initiatorType,w=h.duration;if(f&&w&&n_(_)){for(_=0,w=h.responseEnd,l+=1;l<a.length;l++){var O=a[l],H=O.startTime;if(H>w)break;var J=O.transferSize,te=O.initiatorType;J&&n_(te)&&(O=O.responseEnd,_+=J*(O<w?1:(w-H)/(O-H)))}if(--l,r+=8*(f+_)/(h.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Xf=null,$f=null;function Fc(t){return t.nodeType===9?t:t.ownerDocument}function r_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function i_(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Jf(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Wf=null;function T1(){var t=window.event;return t&&t.type==="popstate"?t===Wf?!1:(Wf=t,!0):(Wf=null,!1)}var s_=typeof setTimeout=="function"?setTimeout:void 0,b1=typeof clearTimeout=="function"?clearTimeout:void 0,a_=typeof Promise=="function"?Promise:void 0,S1=typeof queueMicrotask=="function"?queueMicrotask:typeof a_<"u"?function(t){return a_.resolve(null).then(t).catch(w1)}:s_;function w1(t){setTimeout(function(){throw t})}function Os(t){return t==="head"}function o_(t,r){var a=r,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),Mo(r);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Gl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Gl(a);for(var f=a.firstChild;f;){var _=f.nextSibling,w=f.nodeName;f[rt]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=_}}else a==="body"&&Gl(t.ownerDocument.body);a=h}while(a);Mo(r)}function l_(t,r){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Zf(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Zf(a),Bt(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function A1(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[rt])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Hr(t.nextSibling),t===null)break}return null}function R1(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Hr(t.nextSibling),t===null))return null;return t}function u_(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Hr(t.nextSibling),t===null))return null;return t}function em(t){return t.data==="$?"||t.data==="$~"}function tm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function C1(t,r){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||a.readyState!=="loading")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Hr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var nm=null;function c_(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(r===0)return Hr(t.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}t=t.nextSibling}return null}function h_(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return t;r--}else a!=="/$"&&a!=="/&"||r++}t=t.previousSibling}return null}function d_(t,r,a){switch(r=Fc(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Gl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Bt(t)}var Gr=new Map,f_=new Set;function Hc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var $i=le.d;le.d={f:I1,r:N1,D:x1,C:D1,L:M1,m:O1,X:V1,S:k1,M:P1};function I1(){var t=$i.f(),r=Vc();return t||r}function N1(t){var r=Kt(t);r!==null&&r.tag===5&&r.type==="form"?xy(r):$i.r(t)}var No=typeof document>"u"?null:document;function m_(t,r,a){var l=No;if(l&&typeof r=="string"&&r){var h=lr(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),f_.has(h)||(f_.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),Fn(r,"link",t),Ht(r),l.head.appendChild(r)))}}function x1(t){$i.D(t),m_("dns-prefetch",t,null)}function D1(t,r){$i.C(t,r),m_("preconnect",t,r)}function M1(t,r,a){$i.L(t,r,a);var l=No;if(l&&t&&r){var h='link[rel="preload"][as="'+lr(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+lr(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+lr(a.imageSizes)+'"]')):h+='[href="'+lr(t)+'"]';var f=h;switch(r){case"style":f=xo(t);break;case"script":f=Do(t)}Gr.has(f)||(t=T({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Gr.set(f,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(Kl(f))||r==="script"&&l.querySelector(Ql(f))||(r=l.createElement("link"),Fn(r,"link",t),Ht(r),l.head.appendChild(r)))}}function O1(t,r){$i.m(t,r);var a=No;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+lr(l)+'"][href="'+lr(t)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Do(t)}if(!Gr.has(f)&&(t=T({rel:"modulepreload",href:t},r),Gr.set(f,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ql(f)))return}l=a.createElement("link"),Fn(l,"link",t),Ht(l),a.head.appendChild(l)}}}function k1(t,r,a){$i.S(t,r,a);var l=No;if(l&&t){var h=Un(l).hoistableStyles,f=xo(t);r=r||"default";var _=h.get(f);if(!_){var w={loading:0,preload:null};if(_=l.querySelector(Kl(f)))w.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Gr.get(f))&&rm(t,a);var O=_=l.createElement("link");Ht(O),Fn(O,"link",t),O._p=new Promise(function(H,J){O.onload=H,O.onerror=J}),O.addEventListener("load",function(){w.loading|=1}),O.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Gc(_,r,l)}_={type:"stylesheet",instance:_,count:1,state:w},h.set(f,_)}}}function V1(t,r){$i.X(t,r);var a=No;if(a&&t){var l=Un(a).hoistableScripts,h=Do(t),f=l.get(h);f||(f=a.querySelector(Ql(h)),f||(t=T({src:t,async:!0},r),(r=Gr.get(h))&&im(t,r),f=a.createElement("script"),Ht(f),Fn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function P1(t,r){$i.M(t,r);var a=No;if(a&&t){var l=Un(a).hoistableScripts,h=Do(t),f=l.get(h);f||(f=a.querySelector(Ql(h)),f||(t=T({src:t,async:!0,type:"module"},r),(r=Gr.get(h))&&im(t,r),f=a.createElement("script"),Ht(f),Fn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function p_(t,r,a,l){var h=(h=we.current)?Hc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=xo(a.href),a=Un(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=xo(a.href);var f=Un(h).hoistableStyles,_=f.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,_),(f=h.querySelector(Kl(t)))&&!f._p&&(_.instance=f,_.state.loading=5),Gr.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Gr.set(t,a),f||L1(h,t,a,_.state))),r&&l===null)throw Error(s(528,""));return _}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Do(a),a=Un(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function xo(t){return'href="'+lr(t)+'"'}function Kl(t){return'link[rel="stylesheet"]['+t+"]"}function g_(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function L1(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Fn(r,"link",a),Ht(r),t.head.appendChild(r))}function Do(t){return'[src="'+lr(t)+'"]'}function Ql(t){return"script[async]"+t}function y_(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+lr(a.href)+'"]');if(l)return r.instance=l,Ht(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Ht(l),Fn(l,"style",h),Gc(l,a.precedence,t),r.instance=l;case"stylesheet":h=xo(a.href);var f=t.querySelector(Kl(h));if(f)return r.state.loading|=4,r.instance=f,Ht(f),f;l=g_(a),(h=Gr.get(h))&&rm(l,h),f=(t.ownerDocument||t).createElement("link"),Ht(f);var _=f;return _._p=new Promise(function(w,O){_.onload=w,_.onerror=O}),Fn(f,"link",l),r.state.loading|=4,Gc(f,a.precedence,t),r.instance=f;case"script":return f=Do(a.src),(h=t.querySelector(Ql(f)))?(r.instance=h,Ht(h),h):(l=a,(h=Gr.get(f))&&(l=T({},a),im(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Ht(h),Fn(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Gc(l,a.precedence,t));return r.instance}function Gc(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,_=0;_<l.length;_++){var w=l[_];if(w.dataset.precedence===r)f=w;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function rm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function im(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Kc=null;function v_(t,r,a){if(Kc===null){var l=new Map,h=Kc=new Map;h.set(a,l)}else h=Kc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[rt]||f[M]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var _=f.getAttribute(r)||"";_=t+_;var w=l.get(_);w?w.push(f):l.set(_,[f])}}return l}function __(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function U1(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function E_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function j1(t,r,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=xo(l.href),f=r.querySelector(Kl(h));if(f){r=f._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Qc.bind(t),r.then(t,t)),a.state.loading|=4,a.instance=f,Ht(f);return}f=r.ownerDocument||r,l=g_(l),(h=Gr.get(h))&&rm(l,h),f=f.createElement("link"),Ht(f);var _=f;_._p=new Promise(function(w,O){_.onload=w,_.onerror=O}),Fn(f,"link",l),a.instance=f}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Qc.bind(t),r.addEventListener("load",a),r.addEventListener("error",a))}}var sm=0;function z1(t,r){return t.stylesheets&&t.count===0&&Xc(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Xc(t,t.stylesheets),t.unsuspend){var f=t.unsuspend;t.unsuspend=null,f()}},6e4+r);0<t.imgBytes&&sm===0&&(sm=62500*E1());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Xc(t,t.stylesheets),t.unsuspend)){var f=t.unsuspend;t.unsuspend=null,f()}},(t.imgBytes>sm?50:800)+r);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Qc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Yc=null;function Xc(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Yc=new Map,r.forEach(B1,t),Yc=null,Qc.call(t))}function B1(t,r){if(!(r.state.loading&4)){var a=Yc.get(t);if(a)var l=a.get(null);else{a=new Map,Yc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var _=h[f];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}h=r.instance,_=h.getAttribute("data-precedence"),f=a.get(_)||l,f===l&&a.set(null,h),a.set(_,h),this.count++,l=Qc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var Yl={$$typeof:ne,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function q1(t,r,a,l,h,f,_,w,O){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wt(0),this.hiddenUpdates=Wt(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function T_(t,r,a,l,h,f,_,w,O,H,J,te){return t=new q1(t,r,a,_,O,H,J,te,w),r=1,f===!0&&(r|=24),f=Ar(3,null,null,r),t.current=f,f.stateNode=t,r=Ld(),r.refCount++,t.pooledCache=r,r.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:r},Bd(f),t}function b_(t){return t?(t=oo,t):oo}function S_(t,r,a,l,h,f){h=b_(h),l.context===null?l.context=h:l.pendingContext=h,l=bs(r),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=Ss(t,l,r),a!==null&&(mr(a,t,r),Rl(a,t,r))}function w_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function am(t,r){w_(t,r),(t=t.alternate)&&w_(t,r)}function A_(t){if(t.tag===13||t.tag===31){var r=_a(t,67108864);r!==null&&mr(r,t,67108864),am(t,67108864)}}function R_(t){if(t.tag===13||t.tag===31){var r=xr();r=Mi(r);var a=_a(t,r);a!==null&&mr(a,t,r),am(t,r)}}var $c=!0;function F1(t,r,a,l){var h=Q.T;Q.T=null;var f=le.p;try{le.p=2,om(t,r,a,l)}finally{le.p=f,Q.T=h}}function H1(t,r,a,l){var h=Q.T;Q.T=null;var f=le.p;try{le.p=8,om(t,r,a,l)}finally{le.p=f,Q.T=h}}function om(t,r,a,l){if($c){var h=lm(l);if(h===null)Qf(t,r,l,Jc,a),I_(t,l);else if(K1(h,t,r,a,l))l.stopPropagation();else if(I_(t,l),r&4&&-1<G1.indexOf(t)){for(;h!==null;){var f=Kt(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var _=un(f.pendingLanes);if(_!==0){var w=f;for(w.pendingLanes|=2,w.entangledLanes|=2;_;){var O=1<<31-Et(_);w.entanglements[1]|=O,_&=~O}_i(f),(Rt&6)===0&&(Oc=_t()+500,ql(0))}}break;case 31:case 13:w=_a(f,2),w!==null&&mr(w,f,2),Vc(),am(f,2)}if(f=lm(l),f===null&&Qf(t,r,l,Jc,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else Qf(t,r,l,null,a)}}function lm(t){return t=Vr(t),um(t)}var Jc=null;function um(t){if(Jc=null,t=hn(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=d(r),t!==null)return t;t=null}else if(a===31){if(t=g(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Jc=t,null}function C_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(In()){case xt:return 2;case ln:return 8;case ze:case lt:return 32;case Nn:return 268435456;default:return 32}default:return 32}}var cm=!1,ks=null,Vs=null,Ps=null,Xl=new Map,$l=new Map,Ls=[],G1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function I_(t,r){switch(t){case"focusin":case"focusout":ks=null;break;case"dragenter":case"dragleave":Vs=null;break;case"mouseover":case"mouseout":Ps=null;break;case"pointerover":case"pointerout":Xl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":$l.delete(r.pointerId)}}function Jl(t,r,a,l,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},r!==null&&(r=Kt(r),r!==null&&A_(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function K1(t,r,a,l,h){switch(r){case"focusin":return ks=Jl(ks,t,r,a,l,h),!0;case"dragenter":return Vs=Jl(Vs,t,r,a,l,h),!0;case"mouseover":return Ps=Jl(Ps,t,r,a,l,h),!0;case"pointerover":var f=h.pointerId;return Xl.set(f,Jl(Xl.get(f)||null,t,r,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,$l.set(f,Jl($l.get(f)||null,t,r,a,l,h)),!0}return!1}function N_(t){var r=hn(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){t.blockedOn=r,Tr(t.priority,function(){R_(a)});return}}else if(r===31){if(r=g(a),r!==null){t.blockedOn=r,Tr(t.priority,function(){R_(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wc(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=lm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);cl=l,a.target.dispatchEvent(l),cl=null}else return r=Kt(a),r!==null&&A_(r),t.blockedOn=a,!1;r.shift()}return!0}function x_(t,r,a){Wc(t)&&a.delete(r)}function Q1(){cm=!1,ks!==null&&Wc(ks)&&(ks=null),Vs!==null&&Wc(Vs)&&(Vs=null),Ps!==null&&Wc(Ps)&&(Ps=null),Xl.forEach(x_),$l.forEach(x_)}function Zc(t,r){t.blockedOn===r&&(t.blockedOn=null,cm||(cm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Q1)))}var eh=null;function D_(t){eh!==t&&(eh=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){eh===t&&(eh=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if(um(l||a)===null)continue;break}var f=Kt(a);f!==null&&(t.splice(r,3),r-=3,lf(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Mo(t){function r(O){return Zc(O,t)}ks!==null&&Zc(ks,t),Vs!==null&&Zc(Vs,t),Ps!==null&&Zc(Ps,t),Xl.forEach(r),$l.forEach(r);for(var a=0;a<Ls.length;a++){var l=Ls[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Ls.length&&(a=Ls[0],a.blockedOn===null);)N_(a),a.blockedOn===null&&Ls.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],_=h[oe]||null;if(typeof f=="function")_||D_(a);else if(_){var w=null;if(f&&f.hasAttribute("formAction")){if(h=f,_=f[oe]||null)w=_.formAction;else if(um(h)!==null)continue}else w=_.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),D_(a)}}}function M_(){function t(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function r(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),h!==null&&(h(),h=null)}}}function hm(t){this._internalRoot=t}th.prototype.render=hm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=xr();S_(a,l,t,r,null,null)},th.prototype.unmount=hm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;S_(t.current,2,null,t,null,null),Vc(),r[Se]=null}};function th(t){this._internalRoot=t}th.prototype.unstable_scheduleHydration=function(t){if(t){var r=Qa();t={blockedOn:null,target:t,priority:r};for(var a=0;a<Ls.length&&r!==0&&r<Ls[a].priority;a++);Ls.splice(a,0,t),a===0&&N_(t)}};var O_=e.version;if(O_!=="19.2.0")throw Error(s(527,O_,"19.2.0"));le.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=m(r),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var Y1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nh.isDisabled&&nh.supportsFiber)try{$t=nh.inject(Y1),Vt=nh}catch{}}return Zl.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",h=zy,f=By,_=qy;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(f=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=T_(t,1,!1,null,null,a,l,null,h,f,_,M_),t[Se]=r.current,Kf(t),new hm(r)},Zl.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,h="",f=zy,_=By,w=qy,O=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(O=a.formState)),r=T_(t,1,!0,r,a??null,l,h,O,f,_,w,M_),r.context=b_(null),a=r.current,l=xr(),l=Mi(l),h=bs(l),h.callback=null,Ss(a,h,l),a=l,r.current.lanes=a,cn(r,a),_i(r),t[Se]=r.current,Kf(t),new th(r)},Zl.version="19.2.0",Zl}var F_;function rw(){if(F_)return mm.exports;F_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),mm.exports=nw(),mm.exports}var iw=rw();const sw=cp(iw),dp=()=>b.jsxs("div",{style:{padding:"1.5rem 0",display:"flex",justifyContent:"center",alignItems:"center"},children:[b.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",border:"3px solid #e5e7eb",borderTopColor:"#2EC483",animation:"spin 1s linear infinite"}}),b.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `})]}),aw=()=>{};var H_={};const ME=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},ow=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],d=i[n++],g=i[n++],p=((o&7)<<18|(u&63)<<12|(d&63)<<6|g&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=i[n++],d=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},OE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],d=o+1<i.length,g=d?i[o+1]:0,p=o+2<i.length,m=p?i[o+2]:0,v=u>>2,T=(u&3)<<4|g>>4;let S=(g&15)<<2|m>>6,A=m&63;p||(A=64,d||(S=64)),s.push(n[v],n[T],n[S],n[A])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(ME(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):ow(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],g=o<i.length?n[i.charAt(o)]:0;++o;const m=o<i.length?n[i.charAt(o)]:64;++o;const T=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||g==null||m==null||T==null)throw new lw;const S=u<<2|g>>4;if(s.push(S),m!==64){const A=g<<4&240|m>>2;if(s.push(A),T!==64){const L=m<<6&192|T;s.push(L)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class lw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uw=function(i){const e=ME(i);return OE.encodeByteArray(e,!0)},Th=function(i){return uw(i).replace(/\./g,"")},kE=function(i){try{return OE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function cw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const hw=()=>cw().__FIREBASE_DEFAULTS__,dw=()=>{if(typeof process>"u"||typeof H_>"u")return;const i=H_.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},fw=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&kE(i[1]);return e&&JSON.parse(e)},Hh=()=>{try{return aw()||hw()||dw()||fw()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},VE=i=>Hh()?.emulatorHosts?.[i],PE=i=>{const e=VE(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},LE=()=>Hh()?.config,UE=i=>Hh()?.[`_${i}`];class mw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function ia(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fp(i){return(await fetch(i,{credentials:"include"})).ok}function pw(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Th(JSON.stringify(n)),Th(JSON.stringify(d)),""].join(".")}const lu={};function gw(){const i={prod:[],emulator:[]};for(const e of Object.keys(lu))lu[e]?i.emulator.push(e):i.prod.push(e);return i}function yw(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let G_=!1;function mp(i,e){if(typeof window>"u"||typeof document>"u"||!ia(window.location.host)||lu[i]===e||lu[i]||G_)return;lu[i]=e;function n(S){return`__firebase__banner__${S}`}const s="__firebase__banner",u=gw().prod.length>0;function d(){const S=document.getElementById(s);S&&S.remove()}function g(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,A){S.setAttribute("width","24"),S.setAttribute("id",A),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function m(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{G_=!0,d()},S}function v(S,A){S.setAttribute("id",A),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=yw(s),A=n("text"),L=document.getElementById(A)||document.createElement("span"),G=n("learnmore"),z=document.getElementById(G)||document.createElement("a"),fe=n("preprendIcon"),ce=document.getElementById(fe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const ne=S.element;g(ne),v(z,G);const ye=m();p(ce,fe),ne.append(ce,L,z,ye),document.body.appendChild(ne)}u?(L.innerText="Preview backend disconnected.",ce.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ce.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function nr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nr())}function _w(){const i=Hh()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ew(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Tw(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function bw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Sw(){const i=nr();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function ww(){return!_w()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Aw(){try{return typeof indexedDB=="object"}catch{return!1}}function Rw(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const Cw="FirebaseError";class xi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Cw,Object.setPrototypeOf(this,xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Au.prototype.create)}}class Au{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?Iw(u,s):"Error",g=`${this.serviceName}: ${d} (${o}).`;return new xi(o,g,s)}}function Iw(i,e){return i.replace(Nw,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const Nw=/\{\$([^}]+)}/g;function xw(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function La(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],d=e[o];if(K_(u)&&K_(d)){if(!La(u,d))return!1}else if(u!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function K_(i){return i!==null&&typeof i=="object"}function Ru(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function nu(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function ru(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function Dw(i,e){const n=new Mw(i,e);return n.subscribe.bind(n)}class Mw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Ow(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=vm),o.error===void 0&&(o.error=vm),o.complete===void 0&&(o.complete=vm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ow(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function vm(){}function Xt(i){return i&&i._delegate?i._delegate:i}class Js{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ma="[DEFAULT]";class kw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new mw;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Pw(e))try{this.getOrInitializeService({instanceIdentifier:Ma})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Ma){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ma){return this.instances.has(e)}getOptions(e=Ma){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);s===g&&d.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Vw(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ma){return this.component?this.component.multipleInstances?e:Ma:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Vw(i){return i===Ma?void 0:i}function Pw(i){return i.instantiationMode==="EAGER"}class Lw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new kw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var ht;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(ht||(ht={}));const Uw={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},jw=ht.INFO,zw={[ht.DEBUG]:"log",[ht.VERBOSE]:"log",[ht.INFO]:"info",[ht.WARN]:"warn",[ht.ERROR]:"error"},Bw=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=zw[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pp{constructor(e){this.name=e,this._logLevel=jw,this._logHandler=Bw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ht))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Uw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ht.DEBUG,...e),this._logHandler(this,ht.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ht.VERBOSE,...e),this._logHandler(this,ht.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ht.INFO,...e),this._logHandler(this,ht.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ht.WARN,...e),this._logHandler(this,ht.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ht.ERROR,...e),this._logHandler(this,ht.ERROR,...e)}}const qw=(i,e)=>e.some(n=>i instanceof n);let Q_,Y_;function Fw(){return Q_||(Q_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Hw(){return Y_||(Y_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jE=new WeakMap,km=new WeakMap,zE=new WeakMap,_m=new WeakMap,gp=new WeakMap;function Gw(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",d)},u=()=>{n(Qs(i.result)),o()},d=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&jE.set(n,i)}).catch(()=>{}),gp.set(e,i),e}function Kw(i){if(km.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",d),i.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",d),i.addEventListener("abort",d)});km.set(i,e)}let Vm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return km.get(i);if(e==="objectStoreNames")return i.objectStoreNames||zE.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qs(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Qw(i){Vm=i(Vm)}function Yw(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Em(this),e,...n);return zE.set(s,e.sort?e.sort():[e]),Qs(s)}:Hw().includes(i)?function(...e){return i.apply(Em(this),e),Qs(jE.get(this))}:function(...e){return Qs(i.apply(Em(this),e))}}function Xw(i){return typeof i=="function"?Yw(i):(i instanceof IDBTransaction&&Kw(i),qw(i,Fw())?new Proxy(i,Vm):i)}function Qs(i){if(i instanceof IDBRequest)return Gw(i);if(_m.has(i))return _m.get(i);const e=Xw(i);return e!==i&&(_m.set(i,e),gp.set(e,i)),e}const Em=i=>gp.get(i);function $w(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const d=indexedDB.open(i,e),g=Qs(d);return s&&d.addEventListener("upgradeneeded",p=>{s(Qs(d.result),p.oldVersion,p.newVersion,Qs(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),g}const Jw=["get","getKey","getAll","getAllKeys","count"],Ww=["put","add","delete","clear"],Tm=new Map;function X_(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Tm.get(e))return Tm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=Ww.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||Jw.includes(n)))return;const u=async function(d,...g){const p=this.transaction(d,o?"readwrite":"readonly");let m=p.store;return s&&(m=m.index(g.shift())),(await Promise.all([m[n](...g),o&&p.done]))[0]};return Tm.set(e,u),u}Qw(i=>({...i,get:(e,n,s)=>X_(e,n)||i.get(e,n,s),has:(e,n)=>!!X_(e,n)||i.has(e,n)}));class Zw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(eA(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function eA(i){return i.getComponent()?.type==="VERSION"}const Pm="@firebase/app",$_="0.14.6";const ts=new pp("@firebase/app"),tA="@firebase/app-compat",nA="@firebase/analytics-compat",rA="@firebase/analytics",iA="@firebase/app-check-compat",sA="@firebase/app-check",aA="@firebase/auth",oA="@firebase/auth-compat",lA="@firebase/database",uA="@firebase/data-connect",cA="@firebase/database-compat",hA="@firebase/functions",dA="@firebase/functions-compat",fA="@firebase/installations",mA="@firebase/installations-compat",pA="@firebase/messaging",gA="@firebase/messaging-compat",yA="@firebase/performance",vA="@firebase/performance-compat",_A="@firebase/remote-config",EA="@firebase/remote-config-compat",TA="@firebase/storage",bA="@firebase/storage-compat",SA="@firebase/firestore",wA="@firebase/ai",AA="@firebase/firestore-compat",RA="firebase",CA="12.6.0";const Lm="[DEFAULT]",IA={[Pm]:"fire-core",[tA]:"fire-core-compat",[rA]:"fire-analytics",[nA]:"fire-analytics-compat",[sA]:"fire-app-check",[iA]:"fire-app-check-compat",[aA]:"fire-auth",[oA]:"fire-auth-compat",[lA]:"fire-rtdb",[uA]:"fire-data-connect",[cA]:"fire-rtdb-compat",[hA]:"fire-fn",[dA]:"fire-fn-compat",[fA]:"fire-iid",[mA]:"fire-iid-compat",[pA]:"fire-fcm",[gA]:"fire-fcm-compat",[yA]:"fire-perf",[vA]:"fire-perf-compat",[_A]:"fire-rc",[EA]:"fire-rc-compat",[TA]:"fire-gcs",[bA]:"fire-gcs-compat",[SA]:"fire-fst",[AA]:"fire-fst-compat",[wA]:"fire-vertex","fire-js":"fire-js",[RA]:"fire-js-all"};const mu=new Map,NA=new Map,Um=new Map;function J_(i,e){try{i.container.addComponent(e)}catch(n){ts.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Ua(i){const e=i.name;if(Um.has(e))return ts.debug(`There were multiple attempts to register component ${e}.`),!1;Um.set(e,i);for(const n of mu.values())J_(n,i);for(const n of NA.values())J_(n,i);return!0}function Gh(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Mr(i){return i==null?!1:i.settings!==void 0}const xA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ys=new Au("app","Firebase",xA);class DA{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Js("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ys.create("app-deleted",{appName:this._name})}}const Jo=CA;function yp(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:Lm,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Ys.create("bad-app-name",{appName:String(o)});if(n||(n=LE()),!n)throw Ys.create("no-options");const u=mu.get(o);if(u){if(La(n,u.options)&&La(s,u.config))return u;throw Ys.create("duplicate-app",{appName:o})}const d=new Lw(o);for(const p of Um.values())d.addComponent(p);const g=new DA(n,s,d);return mu.set(o,g),g}function Kh(i=Lm){const e=mu.get(i);if(!e&&i===Lm&&LE())return yp();if(!e)throw Ys.create("no-app",{appName:i});return e}function BE(){return Array.from(mu.values())}function bi(i,e,n){let s=IA[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ts.warn(d.join(" "));return}Ua(new Js(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const MA="firebase-heartbeat-database",OA=1,pu="firebase-heartbeat-store";let bm=null;function qE(){return bm||(bm=$w(MA,OA,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(pu)}catch(n){console.warn(n)}}}}).catch(i=>{throw Ys.create("idb-open",{originalErrorMessage:i.message})})),bm}async function kA(i){try{const n=(await qE()).transaction(pu),s=await n.objectStore(pu).get(FE(i));return await n.done,s}catch(e){if(e instanceof xi)ts.warn(e.message);else{const n=Ys.create("idb-get",{originalErrorMessage:e?.message});ts.warn(n.message)}}}async function W_(i,e){try{const s=(await qE()).transaction(pu,"readwrite");await s.objectStore(pu).put(e,FE(i)),await s.done}catch(n){if(n instanceof xi)ts.warn(n.message);else{const s=Ys.create("idb-set",{originalErrorMessage:n?.message});ts.warn(s.message)}}}function FE(i){return`${i.name}!${i.options.appId}`}const VA=1024,PA=30;class LA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jA(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Z_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>PA){const o=zA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ts.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Z_(),{heartbeatsToSend:n,unsentEntries:s}=UA(this._heartbeatsCache.heartbeats),o=Th(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return ts.warn(e),""}}}function Z_(){return new Date().toISOString().substring(0,10)}function UA(i,e=VA){const n=[];let s=i.slice();for(const o of i){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),e0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),e0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class jA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Aw()?Rw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await kA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return W_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return W_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function e0(i){return Th(JSON.stringify({version:2,heartbeats:i})).length}function zA(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}function BA(i){Ua(new Js("platform-logger",e=>new Zw(e),"PRIVATE")),Ua(new Js("heartbeat",e=>new LA(e),"PRIVATE")),bi(Pm,$_,i),bi(Pm,$_,"esm2020"),bi("fire-js","")}BA("");var qA="firebase",FA="12.6.0";bi(qA,FA,"app");function HE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HA=HE,GE=new Au("auth","Firebase",HE());const bh=new pp("@firebase/auth");function GA(i,...e){bh.logLevel<=ht.WARN&&bh.warn(`Auth (${Jo}): ${i}`,...e)}function ch(i,...e){bh.logLevel<=ht.ERROR&&bh.error(`Auth (${Jo}): ${i}`,...e)}function si(i,...e){throw vp(i,...e)}function Si(i,...e){return vp(i,...e)}function KE(i,e,n){const s={...HA(),[e]:n};return new Au("auth","Firebase",s).create(e,{appName:i.name})}function Zi(i){return KE(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vp(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return GE.create(i,...e)}function He(i,e,...n){if(!i)throw vp(e,...n)}function Ji(i){const e="INTERNAL ASSERTION FAILED: "+i;throw ch(e),new Error(e)}function ns(i,e){i||Ji(e)}function jm(){return typeof self<"u"&&self.location?.href||""}function KA(){return t0()==="http:"||t0()==="https:"}function t0(){return typeof self<"u"&&self.location?.protocol||null}function QA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KA()||Tw()||"connection"in navigator)?navigator.onLine:!0}function YA(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class Cu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ns(n>e,"Short delay should be less than long delay!"),this.isMobile=vw()||bw()}get(){return QA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _p(i,e){ns(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class QE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ji("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ji("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ji("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const XA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const $A=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],JA=new Cu(3e4,6e4);function as(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Di(i,e,n,s,o={}){return YE(i,o,async()=>{let u={},d={};s&&(e==="GET"?d=s:u={body:JSON.stringify(s)});const g=Ru({key:i.config.apiKey,...d}).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const m={method:e,headers:p,...u};return Ew()||(m.referrerPolicy="no-referrer"),i.emulatorConfig&&ia(i.emulatorConfig.host)&&(m.credentials="include"),QE.fetch()(await XE(i,i.config.apiHost,n,g),m)})}async function YE(i,e,n){i._canInitEmulator=!1;const s={...XA,...e};try{const o=new ZA(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw rh(i,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const g=u.ok?d.errorMessage:d.error.message,[p,m]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw rh(i,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw rh(i,"email-already-in-use",d);if(p==="USER_DISABLED")throw rh(i,"user-disabled",d);const v=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw KE(i,v,m);si(i,v)}}catch(o){if(o instanceof xi)throw o;si(i,"network-request-failed",{message:String(o)})}}async function Iu(i,e,n,s,o={}){const u=await Di(i,e,n,s,o);return"mfaPendingCredential"in u&&si(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function XE(i,e,n,s){const o=`${e}${n}?${s}`,u=i,d=u.config.emulator?_p(i.config,o):`${i.config.apiScheme}://${o}`;return $A.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function WA(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ZA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Si(this.auth,"network-request-failed")),JA.get())})}}function rh(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Si(i,e,s);return o.customData._tokenResponse=n,o}function n0(i){return i!==void 0&&i.enterprise!==void 0}class eR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return WA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function tR(i,e){return Di(i,"GET","/v2/recaptchaConfig",as(i,e))}async function nR(i,e){return Di(i,"POST","/v1/accounts:delete",e)}async function Sh(i,e){return Di(i,"POST","/v1/accounts:lookup",e)}function uu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rR(i,e=!1){const n=Xt(i),s=await n.getIdToken(e),o=Ep(s);He(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u?.sign_in_provider;return{claims:o,token:s,authTime:uu(Sm(o.auth_time)),issuedAtTime:uu(Sm(o.iat)),expirationTime:uu(Sm(o.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Sm(i){return Number(i)*1e3}function Ep(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return ch("JWT malformed, contained fewer than 3 sections"),null;try{const o=kE(n);return o?JSON.parse(o):(ch("Failed to decode base64 JWT payload"),null)}catch(o){return ch("Caught error parsing JWT payload as JSON",o?.toString()),null}}function r0(i){const e=Ep(i);return He(e,"internal-error"),He(typeof e.exp<"u","internal-error"),He(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Fo(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof xi&&iR(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function iR({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class sR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class zm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=uu(this.lastLoginAt),this.creationTime=uu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function wh(i){const e=i.auth,n=await i.getIdToken(),s=await Fo(i,Sh(e,{idToken:n}));He(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?$E(o.providerUserInfo):[],d=oR(i.providerData,u),g=i.isAnonymous,p=!(i.email&&o.passwordHash)&&!d?.length,m=g?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new zm(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(i,v)}async function aR(i){const e=Xt(i);await wh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oR(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function $E(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function lR(i,e){const n=await YE(i,{},async()=>{const s=Ru({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,d=await XE(i,o,"/v1/token",`key=${u}`),g=await i._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:s};return i.emulatorConfig&&ia(i.emulatorConfig.host)&&(p.credentials="include"),QE.fetch()(d,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function uR(i,e){return Di(i,"POST","/v2/accounts:revokeToken",as(i,e))}class jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){He(e.idToken,"internal-error"),He(typeof e.idToken<"u","internal-error"),He(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):r0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){He(e.length!==0,"internal-error");const n=r0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(He(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await lR(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,d=new jo;return s&&(He(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(He(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(He(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jo,this.toJSON())}_performRefresh(){return Ji("not implemented")}}function js(i,e){He(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ii{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new sR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new zm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Fo(this,this.stsTokenManager.getToken(this.auth,e));return He(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return rR(this,e)}reload(){return aR(this)}_assign(e){this!==e&&(He(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ii({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){He(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await wh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mr(this.auth.app))return Promise.reject(Zi(this.auth));const e=await this.getIdToken();return await Fo(this,nR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,g=n.tenantId??void 0,p=n._redirectEventId??void 0,m=n.createdAt??void 0,v=n.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:A,providerData:L,stsTokenManager:G}=n;He(T&&G,e,"internal-error");const z=jo.fromJSON(this.name,G);He(typeof T=="string",e,"internal-error"),js(s,e.name),js(o,e.name),He(typeof S=="boolean",e,"internal-error"),He(typeof A=="boolean",e,"internal-error"),js(u,e.name),js(d,e.name),js(g,e.name),js(p,e.name),js(m,e.name),js(v,e.name);const fe=new ii({uid:T,auth:e,email:o,emailVerified:S,displayName:s,isAnonymous:A,photoURL:d,phoneNumber:u,tenantId:g,stsTokenManager:z,createdAt:m,lastLoginAt:v});return L&&Array.isArray(L)&&(fe.providerData=L.map(ce=>({...ce}))),p&&(fe._redirectEventId=p),fe}static async _fromIdTokenResponse(e,n,s=!1){const o=new jo;o.updateFromServerResponse(n);const u=new ii({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await wh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];He(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?$E(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!u?.length,g=new jo;g.updateFromIdToken(s);const p=new ii({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:d}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new zm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(p,m),p}}const i0=new Map;function Wi(i){ns(i instanceof Function,"Expected a class definition");let e=i0.get(i);return e?(ns(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,i0.set(i,e),e)}class JE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}JE.type="NONE";const s0=JE;function hh(i,e,n){return`firebase:${i}:${e}:${n}`}class zo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=hh(this.userKey,o.apiKey,u),this.fullPersistenceKey=hh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Sh(this.auth,{idToken:e}).catch(()=>{});return n?ii._fromGetAccountInfoResponse(this.auth,n,e):null}return ii._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new zo(Wi(s0),e,s);const o=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let u=o[0]||Wi(s0);const d=hh(s,e.config.apiKey,e.name);let g=null;for(const m of n)try{const v=await m._get(d);if(v){let T;if(typeof v=="string"){const S=await Sh(e,{idToken:v}).catch(()=>{});if(!S)break;T=await ii._fromGetAccountInfoResponse(e,S,v)}else T=ii._fromJSON(e,v);m!==u&&(g=T),u=m;break}}catch{}const p=o.filter(m=>m._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new zo(u,e,s):(u=p[0],g&&await u._set(d,g.toJSON()),await Promise.all(n.map(async m=>{if(m!==u)try{await m._remove(d)}catch{}})),new zo(u,e,s))}}function a0(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(WE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rT(e))return"Blackberry";if(iT(e))return"Webos";if(ZE(e))return"Safari";if((e.includes("chrome/")||eT(e))&&!e.includes("edge/"))return"Chrome";if(nT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if(s?.length===2)return s[1]}return"Other"}function WE(i=nr()){return/firefox\//i.test(i)}function ZE(i=nr()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eT(i=nr()){return/crios\//i.test(i)}function tT(i=nr()){return/iemobile/i.test(i)}function nT(i=nr()){return/android/i.test(i)}function rT(i=nr()){return/blackberry/i.test(i)}function iT(i=nr()){return/webos/i.test(i)}function Tp(i=nr()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function cR(i=nr()){return Tp(i)&&!!window.navigator?.standalone}function hR(){return Sw()&&document.documentMode===10}function sT(i=nr()){return Tp(i)||nT(i)||iT(i)||rT(i)||/windows phone/i.test(i)||tT(i)}function aT(i,e=[]){let n;switch(i){case"Browser":n=a0(nr());break;case"Worker":n=`${a0(nr())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Jo}/${s}`}class dR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((d,g)=>{try{const p=e(u);d(p)}catch(p){g(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function fR(i,e={}){return Di(i,"GET","/v2/passwordPolicy",as(i,e))}const mR=6;class pR{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??mR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class gR{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new o0(this),this.idTokenSubscription=new o0(this),this.beforeStateQueue=new dR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await zo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Sh(this,{idToken:e}),s=await ii._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Mr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=s?._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===d)&&g?.user&&(s=g.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return He(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await wh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=YA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mr(this.app))return Promise.reject(Zi(this));const n=e?Xt(e):null;return n&&He(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&He(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mr(this.app)?Promise.reject(Zi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mr(this.app)?Promise.reject(Zi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fR(this),n=new pR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Au("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await uR(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Wi(e)||this._popupRedirectResolver;He(n,this,"argument-error"),this.redirectPersistenceManager=await zo.create(this,[Wi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(He(g,this,"internal-error"),g.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{d=!0,p()}}else{const p=e.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return He(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Mr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&GA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function sa(i){return Xt(i)}class o0{constructor(e){this.auth=e,this.observer=null,this.addObserver=Dw(n=>this.observer=n)}get next(){return He(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Qh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yR(i){Qh=i}function oT(i){return Qh.loadJS(i)}function vR(){return Qh.recaptchaEnterpriseScript}function _R(){return Qh.gapiScript}function ER(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class TR{constructor(){this.enterprise=new bR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class bR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const SR="recaptcha-enterprise",lT="NO_RECAPTCHA";class wR{constructor(e){this.type=SR,this.auth=sa(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,g)=>{tR(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const m=new eR(p);return u.tenantId==null?u._agentRecaptchaConfig=m:u._tenantRecaptchaConfigs[u.tenantId]=m,d(m.siteKey)}}).catch(p=>{g(p)})})}function o(u,d,g){const p=window.grecaptcha;n0(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(m=>{d(m)}).catch(()=>{d(lT)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new TR().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{s(this.auth).then(g=>{if(!n&&n0(window.grecaptcha))o(g,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let p=vR();p.length!==0&&(p+=g),oT(p).then(()=>{o(g,u,d)}).catch(m=>{d(m)})}}).catch(g=>{d(g)})})}}async function l0(i,e,n,s=!1,o=!1){const u=new wR(i);let d;if(o)d=lT;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const g={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const p=g.phoneEnrollmentInfo.phoneNumber,m=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:m,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const p=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return s?Object.assign(g,{captchaResp:d}):Object.assign(g,{captchaResponse:d}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function Ah(i,e,n,s,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await l0(i,e,n,n==="getOobCode");return s(i,u)}else return s(i,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await l0(i,e,n,n==="getOobCode");return s(i,d)}else return Promise.reject(u)})}function AR(i,e){const n=Gh(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(La(u,e??{}))return o;si(o,"already-initialized")}return n.initialize({options:e})}function RR(i,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Wi);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function CR(i,e,n){const s=sa(i);He(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=uT(e),{host:d,port:g}=IR(e),p=g===null?"":`:${g}`,m={url:`${u}//${d}${p}/`},v=Object.freeze({host:d,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){He(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),He(La(m,s.config.emulator)&&La(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,ia(d)?(fp(`${u}//${d}${p}`),mp("Auth",!0)):NR()}function uT(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function IR(i){const e=uT(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:u0(s.substr(u.length+1))}}else{const[u,d]=s.split(":");return{host:u,port:u0(d)}}}function u0(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function NR(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class bp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ji("not implemented")}_getIdTokenResponse(e){return Ji("not implemented")}_linkToIdToken(e,n){return Ji("not implemented")}_getReauthenticationResolver(e){return Ji("not implemented")}}async function xR(i,e){return Di(i,"POST","/v1/accounts:update",e)}async function DR(i,e){return Di(i,"POST","/v1/accounts:signUp",e)}async function MR(i,e){return Iu(i,"POST","/v1/accounts:signInWithPassword",as(i,e))}async function cT(i,e){return Di(i,"POST","/v1/accounts:sendOobCode",as(i,e))}async function OR(i,e){return cT(i,e)}async function kR(i,e){return cT(i,e)}async function VR(i,e){return Iu(i,"POST","/v1/accounts:signInWithEmailLink",as(i,e))}async function PR(i,e){return Iu(i,"POST","/v1/accounts:signInWithEmailLink",as(i,e))}class gu extends bp{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new gu(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new gu(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ah(e,n,"signInWithPassword",MR);case"emailLink":return VR(e,{email:this._email,oobCode:this._password});default:si(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ah(e,s,"signUpPassword",DR);case"emailLink":return PR(e,{idToken:n,email:this._email,oobCode:this._password});default:si(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Bo(i,e){return Iu(i,"POST","/v1/accounts:signInWithIdp",as(i,e))}const LR="http://localhost";class ja extends bp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ja(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):si("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const d=new ja(s,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return Bo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Bo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Bo(e,n)}buildRequest(){const e={requestUri:LR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ru(n)}return e}}function UR(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function jR(i){const e=nu(ru(i)).link,n=e?nu(ru(e)).deep_link_id:null,s=nu(ru(i)).deep_link_id;return(s?nu(ru(s)).link:null)||s||n||e||i}class Sp{constructor(e){const n=nu(ru(e)),s=n.apiKey??null,o=n.oobCode??null,u=UR(n.mode??null);He(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=jR(e);try{return new Sp(n)}catch{return null}}}class Ha{constructor(){this.providerId=Ha.PROVIDER_ID}static credential(e,n){return gu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Sp.parseLink(n);return He(s,"argument-error"),gu._fromEmailAndCode(e,s.code,s.tenantId)}}Ha.PROVIDER_ID="password";Ha.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ha.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class hT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Nu extends hT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class zs extends Nu{constructor(){super("facebook.com")}static credential(e){return ja._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zs.credential(e.oauthAccessToken)}catch{return null}}}zs.FACEBOOK_SIGN_IN_METHOD="facebook.com";zs.PROVIDER_ID="facebook.com";class Bs extends Nu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ja._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Bs.credential(n,s)}catch{return null}}}Bs.GOOGLE_SIGN_IN_METHOD="google.com";Bs.PROVIDER_ID="google.com";class qs extends Nu{constructor(){super("github.com")}static credential(e){return ja._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qs.credential(e.oauthAccessToken)}catch{return null}}}qs.GITHUB_SIGN_IN_METHOD="github.com";qs.PROVIDER_ID="github.com";class Fs extends Nu{constructor(){super("twitter.com")}static credential(e,n){return ja._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Fs.credential(n,s)}catch{return null}}}Fs.TWITTER_SIGN_IN_METHOD="twitter.com";Fs.PROVIDER_ID="twitter.com";async function zR(i,e){return Iu(i,"POST","/v1/accounts:signUp",as(i,e))}class za{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await ii._fromIdTokenResponse(e,s,o),d=c0(s);return new za({user:u,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=c0(s);return new za({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function c0(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class Rh extends xi{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Rh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Rh(e,n,s,o)}}function dT(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Rh._fromErrorAndOperation(i,u,e,s):u})}async function BR(i,e,n=!1){const s=await Fo(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return za._forOperation(i,"link",s)}async function fT(i,e,n=!1){const{auth:s}=i;if(Mr(s.app))return Promise.reject(Zi(s));const o="reauthenticate";try{const u=await Fo(i,dT(s,o,e,i),n);He(u.idToken,s,"internal-error");const d=Ep(u.idToken);He(d,s,"internal-error");const{sub:g}=d;return He(i.uid===g,s,"user-mismatch"),za._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&si(s,"user-mismatch"),u}}async function mT(i,e,n=!1){if(Mr(i.app))return Promise.reject(Zi(i));const s="signIn",o=await dT(i,s,e),u=await za._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}async function qR(i,e){return mT(sa(i),e)}async function FR(i,e){return fT(Xt(i),e)}async function pT(i){const e=sa(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function HR(i,e,n){const s=sa(i);await Ah(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",OR)}async function dh(i,e,n){if(Mr(i.app))return Promise.reject(Zi(i));const s=sa(i),d=await Ah(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zR).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&pT(i),p}),g=await za._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(g.user),g}function GR(i,e,n){return Mr(i.app)?Promise.reject(Zi(i)):qR(Xt(i),Ha.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&pT(i),s})}async function h0(i,e,n){const s=Xt(i),u={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await i.getIdToken(),newEmail:e},{email:d}=await kR(s.auth,u);d!==i.email&&await i.reload()}function KR(i,e){return QR(Xt(i),null,e)}async function QR(i,e,n){const{auth:s}=i,u={idToken:await i.getIdToken(),returnSecureToken:!0};n&&(u.password=n);const d=await Fo(i,xR(s,u));await i._updateTokensIfNecessary(d,!0)}function YR(i,e,n,s){return Xt(i).onIdTokenChanged(e,n,s)}function XR(i,e,n){return Xt(i).beforeAuthStateChanged(e,n)}function $R(i,e,n,s){return Xt(i).onAuthStateChanged(e,n,s)}function JR(i){return Xt(i).signOut()}const Ch="__sak";class gT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ch,"1"),this.storage.removeItem(Ch),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const WR=1e3,ZR=10;class yT extends gT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,g,p)=>{this.notifyListeners(d,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},u=this.storage.getItem(s);hR()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,ZR):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},WR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}yT.type="LOCAL";const eC=yT;class vT extends gT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}vT.type="SESSION";const _T=vT;function tC(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Yh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Yh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const g=Array.from(d).map(async m=>m(n.origin,u)),p=await tC(g);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yh.receivers=[];function wp(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}class nC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((g,p)=>{const m=wp("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===m)switch(S.data.status){case"ack":clearTimeout(v),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(S.data.response);break;default:clearTimeout(v),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function wi(){return window}function rC(i){wi().location.href=i}function ET(){return typeof wi().WorkerGlobalScope<"u"&&typeof wi().importScripts=="function"}async function iC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sC(){return navigator?.serviceWorker?.controller||null}function aC(){return ET()?self:null}const TT="firebaseLocalStorageDb",oC=1,Ih="firebaseLocalStorage",bT="fbase_key";class xu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Xh(i,e){return i.transaction([Ih],e?"readwrite":"readonly").objectStore(Ih)}function lC(){const i=indexedDB.deleteDatabase(TT);return new xu(i).toPromise()}function Bm(){const i=indexedDB.open(TT,oC);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Ih,{keyPath:bT})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Ih)?e(s):(s.close(),await lC(),e(await Bm()))})})}async function d0(i,e,n){const s=Xh(i,!0).put({[bT]:e,value:n});return new xu(s).toPromise()}async function uC(i,e){const n=Xh(i,!1).get(e),s=await new xu(n).toPromise();return s===void 0?null:s.value}function f0(i,e){const n=Xh(i,!0).delete(e);return new xu(n).toPromise()}const cC=800,hC=3;class ST{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>hC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ET()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yh._getInstance(aC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await iC(),!this.activeServiceWorker)return;this.sender=new nC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||sC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bm();return await d0(e,Ch,"1"),await f0(e,Ch),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>d0(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>uC(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>f0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Xh(o,!1).getAll();return new xu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ST.type="LOCAL";const dC=ST;new Cu(3e4,6e4);function fC(i,e){return e?Wi(e):(He(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class Ap extends bp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Bo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function mC(i){return mT(i.auth,new Ap(i),i.bypassAuthState)}function pC(i){const{auth:e,user:n}=i;return He(n,e,"internal-error"),fT(n,new Ap(i),i.bypassAuthState)}async function gC(i){const{auth:e,user:n}=i;return He(n,e,"internal-error"),BR(n,new Ap(i),i.bypassAuthState)}class wT{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:d,type:g}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mC;case"linkViaPopup":case"linkViaRedirect":return gC;case"reauthViaPopup":case"reauthViaRedirect":return pC;default:si(this.auth,"internal-error")}}resolve(e){ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const yC=new Cu(2e3,1e4);class Lo extends wT{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Lo.currentPopupAction&&Lo.currentPopupAction.cancel(),Lo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return He(e,this.auth,"internal-error"),e}async onExecution(){ns(this.filter.length===1,"Popup operations only handle one event");const e=wp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Si(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Si(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Lo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Si(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yC.get())};e()}}Lo.currentPopupAction=null;const vC="pendingRedirect",fh=new Map;class _C extends wT{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=fh.get(this.auth._key());if(!e){try{const s=await EC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}fh.set(this.auth._key(),e)}return this.bypassAuthState||fh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function EC(i,e){const n=SC(e),s=bC(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function TC(i,e){fh.set(i._key(),e)}function bC(i){return Wi(i._redirectPersistence)}function SC(i){return hh(vC,i.config.apiKey,i.name)}async function wC(i,e,n=!1){if(Mr(i.app))return Promise.reject(Zi(i));const s=sa(i),o=fC(s,e),d=await new _C(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}const AC=600*1e3;class RC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!CC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!AT(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Si(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=AC&&this.cachedEventUids.clear(),this.cachedEventUids.has(m0(e))}saveEventToCache(e){this.cachedEventUids.add(m0(e)),this.lastProcessedEventTime=Date.now()}}function m0(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function AT({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function CC(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AT(i);default:return!1}}async function IC(i,e={}){return Di(i,"GET","/v1/projects",e)}const NC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xC=/^https?/;async function DC(i){if(i.config.emulator)return;const{authorizedDomains:e}=await IC(i);for(const n of e)try{if(MC(n))return}catch{}si(i,"unauthorized-domain")}function MC(i){const e=jm(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!xC.test(n))return!1;if(NC.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const OC=new Cu(3e4,6e4);function p0(){const i=wi().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function kC(i){return new Promise((e,n)=>{function s(){p0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{p0(),n(Si(i,"network-request-failed"))},timeout:OC.get()})}if(wi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(wi().gapi?.load)s();else{const o=ER("iframefcb");return wi()[o]=()=>{gapi.load?s():n(Si(i,"network-request-failed"))},oT(`${_R()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw mh=null,e})}let mh=null;function VC(i){return mh=mh||kC(i),mh}const PC=new Cu(5e3,15e3),LC="__/auth/iframe",UC="emulator/auth/iframe",jC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BC(i){const e=i.config;He(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?_p(e,UC):`https://${i.config.authDomain}/${LC}`,s={apiKey:e.apiKey,appName:i.name,v:Jo},o=zC.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Ru(s).slice(1)}`}async function qC(i){const e=await VC(i),n=wi().gapi;return He(n,i,"internal-error"),e.open({where:document.body,url:BC(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jC,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const d=Si(i,"network-request-failed"),g=wi().setTimeout(()=>{u(d)},PC.get());function p(){wi().clearTimeout(g),o(s)}s.ping(p).then(p,()=>{u(d)})}))}const FC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HC=500,GC=600,KC="_blank",QC="http://localhost";class g0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YC(i,e,n,s=HC,o=GC){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const p={...FC,width:s.toString(),height:o.toString(),top:u,left:d},m=nr().toLowerCase();n&&(g=eT(m)?KC:n),WE(m)&&(e=e||QC,p.scrollbars="yes");const v=Object.entries(p).reduce((S,[A,L])=>`${S}${A}=${L},`,"");if(cR(m)&&g!=="_self")return XC(e||"",g),new g0(null);const T=window.open(e||"",g,v);He(T,i,"popup-blocked");try{T.focus()}catch{}return new g0(T)}function XC(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const $C="__/auth/handler",JC="emulator/auth/handler",WC=encodeURIComponent("fac");async function y0(i,e,n,s,o,u){He(i.config.authDomain,i,"auth-domain-config-required"),He(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:Jo,eventId:o};if(e instanceof hT){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",xw(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries({}))d[v]=T}if(e instanceof Nu){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(d.scopes=v.join(","))}i.tenantId&&(d.tid=i.tenantId);const g=d;for(const v of Object.keys(g))g[v]===void 0&&delete g[v];const p=await i._getAppCheckToken(),m=p?`#${WC}=${encodeURIComponent(p)}`:"";return`${ZC(i)}?${Ru(g).slice(1)}${m}`}function ZC({config:i}){return i.emulator?_p(i,JC):`https://${i.authDomain}/${$C}`}const wm="webStorageSupport";class eI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_T,this._completeRedirectFn=wC,this._overrideRedirectResult=TC}async _openPopup(e,n,s,o){ns(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await y0(e,n,s,jm(),o);return YC(e,u,wp())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await y0(e,n,s,jm(),o);return rC(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(ns(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await qC(e),s=new RC(e);return n.register("authEvent",o=>(He(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wm,{type:wm},o=>{const u=o?.[0]?.[wm];u!==void 0&&n(!!u),si(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=DC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return sT()||ZE()||Tp()}}const tI=eI;var v0="@firebase/auth",_0="1.11.1";class nI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){He(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function rI(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iI(i){Ua(new Js("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=s.options;He(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:d,authDomain:g,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aT(i)},m=new gR(s,o,u,p);return RR(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Ua(new Js("auth-internal",e=>{const n=sa(e.getProvider("auth").getImmediate());return(s=>new nI(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),bi(v0,_0,rI(i)),bi(v0,_0,"esm2020")}const sI=300,aI=UE("authIdTokenMaxAge")||sI;let E0=null;const oI=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>aI)return;const o=n?.token;E0!==o&&(E0=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function RT(i=Kh()){const e=Gh(i,"auth");if(e.isInitialized())return e.getImmediate();const n=AR(i,{popupRedirectResolver:tI,persistence:[dC,eC,_T]}),s=UE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const d=oI(u.toString());XR(n,d,()=>d(n.currentUser)),YR(n,g=>d(g))}}const o=VE("auth");return o&&CR(n,`http://${o}`),n}function lI(){return document.getElementsByTagName("head")?.[0]??document}yR({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=Si("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",lI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iI("Browser");var T0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Xs,CT;(function(){var i;function e(x,C){function N(){}N.prototype=C.prototype,x.F=C.prototype,x.prototype=new N,x.prototype.constructor=x,x.D=function(V,D,U){for(var I=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)I[Ve-2]=arguments[Ve];return C.prototype[D].apply(V,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,C,N){N||(N=0);const V=Array(16);if(typeof C=="string")for(var D=0;D<16;++D)V[D]=C.charCodeAt(N++)|C.charCodeAt(N++)<<8|C.charCodeAt(N++)<<16|C.charCodeAt(N++)<<24;else for(D=0;D<16;++D)V[D]=C[N++]|C[N++]<<8|C[N++]<<16|C[N++]<<24;C=x.g[0],N=x.g[1],D=x.g[2];let U=x.g[3],I;I=C+(U^N&(D^U))+V[0]+3614090360&4294967295,C=N+(I<<7&4294967295|I>>>25),I=U+(D^C&(N^D))+V[1]+3905402710&4294967295,U=C+(I<<12&4294967295|I>>>20),I=D+(N^U&(C^N))+V[2]+606105819&4294967295,D=U+(I<<17&4294967295|I>>>15),I=N+(C^D&(U^C))+V[3]+3250441966&4294967295,N=D+(I<<22&4294967295|I>>>10),I=C+(U^N&(D^U))+V[4]+4118548399&4294967295,C=N+(I<<7&4294967295|I>>>25),I=U+(D^C&(N^D))+V[5]+1200080426&4294967295,U=C+(I<<12&4294967295|I>>>20),I=D+(N^U&(C^N))+V[6]+2821735955&4294967295,D=U+(I<<17&4294967295|I>>>15),I=N+(C^D&(U^C))+V[7]+4249261313&4294967295,N=D+(I<<22&4294967295|I>>>10),I=C+(U^N&(D^U))+V[8]+1770035416&4294967295,C=N+(I<<7&4294967295|I>>>25),I=U+(D^C&(N^D))+V[9]+2336552879&4294967295,U=C+(I<<12&4294967295|I>>>20),I=D+(N^U&(C^N))+V[10]+4294925233&4294967295,D=U+(I<<17&4294967295|I>>>15),I=N+(C^D&(U^C))+V[11]+2304563134&4294967295,N=D+(I<<22&4294967295|I>>>10),I=C+(U^N&(D^U))+V[12]+1804603682&4294967295,C=N+(I<<7&4294967295|I>>>25),I=U+(D^C&(N^D))+V[13]+4254626195&4294967295,U=C+(I<<12&4294967295|I>>>20),I=D+(N^U&(C^N))+V[14]+2792965006&4294967295,D=U+(I<<17&4294967295|I>>>15),I=N+(C^D&(U^C))+V[15]+1236535329&4294967295,N=D+(I<<22&4294967295|I>>>10),I=C+(D^U&(N^D))+V[1]+4129170786&4294967295,C=N+(I<<5&4294967295|I>>>27),I=U+(N^D&(C^N))+V[6]+3225465664&4294967295,U=C+(I<<9&4294967295|I>>>23),I=D+(C^N&(U^C))+V[11]+643717713&4294967295,D=U+(I<<14&4294967295|I>>>18),I=N+(U^C&(D^U))+V[0]+3921069994&4294967295,N=D+(I<<20&4294967295|I>>>12),I=C+(D^U&(N^D))+V[5]+3593408605&4294967295,C=N+(I<<5&4294967295|I>>>27),I=U+(N^D&(C^N))+V[10]+38016083&4294967295,U=C+(I<<9&4294967295|I>>>23),I=D+(C^N&(U^C))+V[15]+3634488961&4294967295,D=U+(I<<14&4294967295|I>>>18),I=N+(U^C&(D^U))+V[4]+3889429448&4294967295,N=D+(I<<20&4294967295|I>>>12),I=C+(D^U&(N^D))+V[9]+568446438&4294967295,C=N+(I<<5&4294967295|I>>>27),I=U+(N^D&(C^N))+V[14]+3275163606&4294967295,U=C+(I<<9&4294967295|I>>>23),I=D+(C^N&(U^C))+V[3]+4107603335&4294967295,D=U+(I<<14&4294967295|I>>>18),I=N+(U^C&(D^U))+V[8]+1163531501&4294967295,N=D+(I<<20&4294967295|I>>>12),I=C+(D^U&(N^D))+V[13]+2850285829&4294967295,C=N+(I<<5&4294967295|I>>>27),I=U+(N^D&(C^N))+V[2]+4243563512&4294967295,U=C+(I<<9&4294967295|I>>>23),I=D+(C^N&(U^C))+V[7]+1735328473&4294967295,D=U+(I<<14&4294967295|I>>>18),I=N+(U^C&(D^U))+V[12]+2368359562&4294967295,N=D+(I<<20&4294967295|I>>>12),I=C+(N^D^U)+V[5]+4294588738&4294967295,C=N+(I<<4&4294967295|I>>>28),I=U+(C^N^D)+V[8]+2272392833&4294967295,U=C+(I<<11&4294967295|I>>>21),I=D+(U^C^N)+V[11]+1839030562&4294967295,D=U+(I<<16&4294967295|I>>>16),I=N+(D^U^C)+V[14]+4259657740&4294967295,N=D+(I<<23&4294967295|I>>>9),I=C+(N^D^U)+V[1]+2763975236&4294967295,C=N+(I<<4&4294967295|I>>>28),I=U+(C^N^D)+V[4]+1272893353&4294967295,U=C+(I<<11&4294967295|I>>>21),I=D+(U^C^N)+V[7]+4139469664&4294967295,D=U+(I<<16&4294967295|I>>>16),I=N+(D^U^C)+V[10]+3200236656&4294967295,N=D+(I<<23&4294967295|I>>>9),I=C+(N^D^U)+V[13]+681279174&4294967295,C=N+(I<<4&4294967295|I>>>28),I=U+(C^N^D)+V[0]+3936430074&4294967295,U=C+(I<<11&4294967295|I>>>21),I=D+(U^C^N)+V[3]+3572445317&4294967295,D=U+(I<<16&4294967295|I>>>16),I=N+(D^U^C)+V[6]+76029189&4294967295,N=D+(I<<23&4294967295|I>>>9),I=C+(N^D^U)+V[9]+3654602809&4294967295,C=N+(I<<4&4294967295|I>>>28),I=U+(C^N^D)+V[12]+3873151461&4294967295,U=C+(I<<11&4294967295|I>>>21),I=D+(U^C^N)+V[15]+530742520&4294967295,D=U+(I<<16&4294967295|I>>>16),I=N+(D^U^C)+V[2]+3299628645&4294967295,N=D+(I<<23&4294967295|I>>>9),I=C+(D^(N|~U))+V[0]+4096336452&4294967295,C=N+(I<<6&4294967295|I>>>26),I=U+(N^(C|~D))+V[7]+1126891415&4294967295,U=C+(I<<10&4294967295|I>>>22),I=D+(C^(U|~N))+V[14]+2878612391&4294967295,D=U+(I<<15&4294967295|I>>>17),I=N+(U^(D|~C))+V[5]+4237533241&4294967295,N=D+(I<<21&4294967295|I>>>11),I=C+(D^(N|~U))+V[12]+1700485571&4294967295,C=N+(I<<6&4294967295|I>>>26),I=U+(N^(C|~D))+V[3]+2399980690&4294967295,U=C+(I<<10&4294967295|I>>>22),I=D+(C^(U|~N))+V[10]+4293915773&4294967295,D=U+(I<<15&4294967295|I>>>17),I=N+(U^(D|~C))+V[1]+2240044497&4294967295,N=D+(I<<21&4294967295|I>>>11),I=C+(D^(N|~U))+V[8]+1873313359&4294967295,C=N+(I<<6&4294967295|I>>>26),I=U+(N^(C|~D))+V[15]+4264355552&4294967295,U=C+(I<<10&4294967295|I>>>22),I=D+(C^(U|~N))+V[6]+2734768916&4294967295,D=U+(I<<15&4294967295|I>>>17),I=N+(U^(D|~C))+V[13]+1309151649&4294967295,N=D+(I<<21&4294967295|I>>>11),I=C+(D^(N|~U))+V[4]+4149444226&4294967295,C=N+(I<<6&4294967295|I>>>26),I=U+(N^(C|~D))+V[11]+3174756917&4294967295,U=C+(I<<10&4294967295|I>>>22),I=D+(C^(U|~N))+V[2]+718787259&4294967295,D=U+(I<<15&4294967295|I>>>17),I=N+(U^(D|~C))+V[9]+3951481745&4294967295,x.g[0]=x.g[0]+C&4294967295,x.g[1]=x.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,x.g[2]=x.g[2]+D&4294967295,x.g[3]=x.g[3]+U&4294967295}s.prototype.v=function(x,C){C===void 0&&(C=x.length);const N=C-this.blockSize,V=this.C;let D=this.h,U=0;for(;U<C;){if(D==0)for(;U<=N;)o(this,x,U),U+=this.blockSize;if(typeof x=="string"){for(;U<C;)if(V[D++]=x.charCodeAt(U++),D==this.blockSize){o(this,V),D=0;break}}else for(;U<C;)if(V[D++]=x[U++],D==this.blockSize){o(this,V),D=0;break}}this.h=D,this.o+=C},s.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var C=1;C<x.length-8;++C)x[C]=0;C=this.o*8;for(var N=x.length-8;N<x.length;++N)x[N]=C&255,C/=256;for(this.v(x),x=Array(16),C=0,N=0;N<4;++N)for(let V=0;V<32;V+=8)x[C++]=this.g[N]>>>V&255;return x};function u(x,C){var N=g;return Object.prototype.hasOwnProperty.call(N,x)?N[x]:N[x]=C(x)}function d(x,C){this.h=C;const N=[];let V=!0;for(let D=x.length-1;D>=0;D--){const U=x[D]|0;V&&U==C||(N[D]=U,V=!1)}this.g=N}var g={};function p(x){return-128<=x&&x<128?u(x,function(C){return new d([C|0],C<0?-1:0)}):new d([x|0],x<0?-1:0)}function m(x){if(isNaN(x)||!isFinite(x))return T;if(x<0)return z(m(-x));const C=[];let N=1;for(let V=0;x>=N;V++)C[V]=x/N|0,N*=4294967296;return new d(C,0)}function v(x,C){if(x.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(x.charAt(0)=="-")return z(v(x.substring(1),C));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=m(Math.pow(C,8));let V=T;for(let U=0;U<x.length;U+=8){var D=Math.min(8,x.length-U);const I=parseInt(x.substring(U,U+D),C);D<8?(D=m(Math.pow(C,D)),V=V.j(D).add(m(I))):(V=V.j(N),V=V.add(m(I)))}return V}var T=p(0),S=p(1),A=p(16777216);i=d.prototype,i.m=function(){if(G(this))return-z(this).m();let x=0,C=1;for(let N=0;N<this.g.length;N++){const V=this.i(N);x+=(V>=0?V:4294967296+V)*C,C*=4294967296}return x},i.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(L(this))return"0";if(G(this))return"-"+z(this).toString(x);const C=m(Math.pow(x,6));var N=this;let V="";for(;;){const D=ye(N,C).g;N=fe(N,D.j(C));let U=((N.g.length>0?N.g[0]:N.h)>>>0).toString(x);if(N=D,L(N))return U+V;for(;U.length<6;)U="0"+U;V=U+V}},i.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function L(x){if(x.h!=0)return!1;for(let C=0;C<x.g.length;C++)if(x.g[C]!=0)return!1;return!0}function G(x){return x.h==-1}i.l=function(x){return x=fe(this,x),G(x)?-1:L(x)?0:1};function z(x){const C=x.g.length,N=[];for(let V=0;V<C;V++)N[V]=~x.g[V];return new d(N,~x.h).add(S)}i.abs=function(){return G(this)?z(this):this},i.add=function(x){const C=Math.max(this.g.length,x.g.length),N=[];let V=0;for(let D=0;D<=C;D++){let U=V+(this.i(D)&65535)+(x.i(D)&65535),I=(U>>>16)+(this.i(D)>>>16)+(x.i(D)>>>16);V=I>>>16,U&=65535,I&=65535,N[D]=I<<16|U}return new d(N,N[N.length-1]&-2147483648?-1:0)};function fe(x,C){return x.add(z(C))}i.j=function(x){if(L(this)||L(x))return T;if(G(this))return G(x)?z(this).j(z(x)):z(z(this).j(x));if(G(x))return z(this.j(z(x)));if(this.l(A)<0&&x.l(A)<0)return m(this.m()*x.m());const C=this.g.length+x.g.length,N=[];for(var V=0;V<2*C;V++)N[V]=0;for(V=0;V<this.g.length;V++)for(let D=0;D<x.g.length;D++){const U=this.i(V)>>>16,I=this.i(V)&65535,Ve=x.i(D)>>>16,Xe=x.i(D)&65535;N[2*V+2*D]+=I*Xe,ce(N,2*V+2*D),N[2*V+2*D+1]+=U*Xe,ce(N,2*V+2*D+1),N[2*V+2*D+1]+=I*Ve,ce(N,2*V+2*D+1),N[2*V+2*D+2]+=U*Ve,ce(N,2*V+2*D+2)}for(x=0;x<C;x++)N[x]=N[2*x+1]<<16|N[2*x];for(x=C;x<2*C;x++)N[x]=0;return new d(N,0)};function ce(x,C){for(;(x[C]&65535)!=x[C];)x[C+1]+=x[C]>>>16,x[C]&=65535,C++}function ne(x,C){this.g=x,this.h=C}function ye(x,C){if(L(C))throw Error("division by zero");if(L(x))return new ne(T,T);if(G(x))return C=ye(z(x),C),new ne(z(C.g),z(C.h));if(G(C))return C=ye(x,z(C)),new ne(z(C.g),C.h);if(x.g.length>30){if(G(x)||G(C))throw Error("slowDivide_ only works with positive integers.");for(var N=S,V=C;V.l(x)<=0;)N=je(N),V=je(V);var D=xe(N,1),U=xe(V,1);for(V=xe(V,2),N=xe(N,2);!L(V);){var I=U.add(V);I.l(x)<=0&&(D=D.add(N),U=I),V=xe(V,1),N=xe(N,1)}return C=fe(x,D.j(C)),new ne(D,C)}for(D=T;x.l(C)>=0;){for(N=Math.max(1,Math.floor(x.m()/C.m())),V=Math.ceil(Math.log(N)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),U=m(N),I=U.j(C);G(I)||I.l(x)>0;)N-=V,U=m(N),I=U.j(C);L(U)&&(U=S),D=D.add(U),x=fe(x,I)}return new ne(D,x)}i.B=function(x){return ye(this,x).h},i.and=function(x){const C=Math.max(this.g.length,x.g.length),N=[];for(let V=0;V<C;V++)N[V]=this.i(V)&x.i(V);return new d(N,this.h&x.h)},i.or=function(x){const C=Math.max(this.g.length,x.g.length),N=[];for(let V=0;V<C;V++)N[V]=this.i(V)|x.i(V);return new d(N,this.h|x.h)},i.xor=function(x){const C=Math.max(this.g.length,x.g.length),N=[];for(let V=0;V<C;V++)N[V]=this.i(V)^x.i(V);return new d(N,this.h^x.h)};function je(x){const C=x.g.length+1,N=[];for(let V=0;V<C;V++)N[V]=x.i(V)<<1|x.i(V-1)>>>31;return new d(N,x.h)}function xe(x,C){const N=C>>5;C%=32;const V=x.g.length-N,D=[];for(let U=0;U<V;U++)D[U]=C>0?x.i(U+N)>>>C|x.i(U+N+1)<<32-C:x.i(U+N);return new d(D,x.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,CT=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=m,d.fromString=v,Xs=d}).apply(typeof T0<"u"?T0:typeof self<"u"?self:typeof window<"u"?window:{});var ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var IT,iu,NT,ph,qm,xT,DT,MT;(function(){var i,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ih=="object"&&ih];for(var y=0;y<c.length;++y){var E=c[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var E=s;c=c.split(".");for(var R=0;R<c.length-1;R++){var B=c[R];if(!(B in E))break e;E=E[B]}c=c[c.length-1],R=E[c],y=y(R),y!=R&&y!=null&&e(E,c,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(y){var E=[],R;for(R in y)Object.prototype.hasOwnProperty.call(y,R)&&E.push([R,y[R]]);return E}});var u=u||{},d=this||self;function g(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function p(c,y,E){return c.call.apply(c.bind,arguments)}function m(c,y,E){return m=p,m.apply(null,arguments)}function v(c,y){var E=Array.prototype.slice.call(arguments,1);return function(){var R=E.slice();return R.push.apply(R,arguments),c.apply(this,R)}}function T(c,y){function E(){}E.prototype=y.prototype,c.Z=y.prototype,c.prototype=new E,c.prototype.constructor=c,c.Ob=function(R,B,Y){for(var pe=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)pe[Ze-2]=arguments[Ze];return y.prototype[B].apply(R,pe)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function A(c){const y=c.length;if(y>0){const E=Array(y);for(let R=0;R<y;R++)E[R]=c[R];return E}return[]}function L(c,y){for(let R=1;R<arguments.length;R++){const B=arguments[R];var E=typeof B;if(E=E!="object"?E:B?Array.isArray(B)?"array":E:"null",E=="array"||E=="object"&&typeof B.length=="number"){E=c.length||0;const Y=B.length||0;c.length=E+Y;for(let pe=0;pe<Y;pe++)c[E+pe]=B[pe]}else c.push(B)}}class G{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function z(c){d.setTimeout(()=>{throw c},0)}function fe(){var c=x;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class ce{constructor(){this.h=this.g=null}add(y,E){const R=ne.get();R.set(y,E),this.h?this.h.next=R:this.g=R,this.h=R}}var ne=new G(()=>new ye,c=>c.reset());class ye{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let je,xe=!1,x=new ce,C=()=>{const c=Promise.resolve(void 0);je=()=>{c.then(N)}};function N(){for(var c;c=fe();){try{c.h.call(c.g)}catch(E){z(E)}var y=ne;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}xe=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const E=()=>{};d.addEventListener("test",E,y),d.removeEventListener("test",E,y)}catch{}return c})();function I(c){return/^[\s\xa0]*$/.test(c)}function Ve(c,y){D.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}T(Ve,D),Ve.prototype.init=function(c,y){const E=this.type=c.type,R=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(E=="mouseover"?y=c.fromElement:E=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Ve.Z.h.call(this)},Ve.prototype.h=function(){Ve.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Xe="closure_listenable_"+(Math.random()*1e6|0),Q=0;function le(c,y,E,R,B){this.listener=c,this.proxy=null,this.src=y,this.type=E,this.capture=!!R,this.ha=B,this.key=++Q,this.da=this.fa=!1}function ge(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function me(c,y,E){for(const R in c)y.call(E,c[R],R,c)}function De(c,y){for(const E in c)y.call(void 0,c[E],E,c)}function k(c){const y={};for(const E in c)y[E]=c[E];return y}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function W(c,y){let E,R;for(let B=1;B<arguments.length;B++){R=arguments[B];for(E in R)c[E]=R[E];for(let Y=0;Y<q.length;Y++)E=q[Y],Object.prototype.hasOwnProperty.call(R,E)&&(c[E]=R[E])}}function ae(c){this.src=c,this.g={},this.h=0}ae.prototype.add=function(c,y,E,R,B){const Y=c.toString();c=this.g[Y],c||(c=this.g[Y]=[],this.h++);const pe=we(c,y,R,B);return pe>-1?(y=c[pe],E||(y.fa=!1)):(y=new le(y,this.src,Y,!!R,B),y.fa=E,c.push(y)),y};function _e(c,y){const E=y.type;if(E in c.g){var R=c.g[E],B=Array.prototype.indexOf.call(R,y,void 0),Y;(Y=B>=0)&&Array.prototype.splice.call(R,B,1),Y&&(ge(y),c.g[E].length==0&&(delete c.g[E],c.h--))}}function we(c,y,E,R){for(let B=0;B<c.length;++B){const Y=c[B];if(!Y.da&&Y.listener==y&&Y.capture==!!E&&Y.ha==R)return B}return-1}var Re="closure_lm_"+(Math.random()*1e6|0),nt={};function de(c,y,E,R,B){if(Array.isArray(y)){for(let Y=0;Y<y.length;Y++)de(c,y[Y],E,R,B);return null}return E=Ce(E),c&&c[Xe]?c.J(y,E,g(R)?!!R.capture:!1,B):Pe(c,y,E,!1,R,B)}function Pe(c,y,E,R,B,Y){if(!y)throw Error("Invalid event type");const pe=g(B)?!!B.capture:!!B;let Ze=re(c);if(Ze||(c[Re]=Ze=new ae(c)),E=Ze.add(y,E,R,pe,Y),E.proxy)return E;if(R=Qe(),E.proxy=R,R.src=c,R.listener=E,c.addEventListener)U||(B=pe),B===void 0&&(B=!1),c.addEventListener(y.toString(),R,B);else if(c.attachEvent)c.attachEvent(ue(y.toString()),R);else if(c.addListener&&c.removeListener)c.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Qe(){function c(E){return y.call(c.src,c.listener,E)}const y=ve;return c}function mt(c,y,E,R,B){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)mt(c,y[Y],E,R,B);else R=g(R)?!!R.capture:!!R,E=Ce(E),c&&c[Xe]?(c=c.i,Y=String(y).toString(),Y in c.g&&(y=c.g[Y],E=we(y,E,R,B),E>-1&&(ge(y[E]),Array.prototype.splice.call(y,E,1),y.length==0&&(delete c.g[Y],c.h--)))):c&&(c=re(c))&&(y=c.g[y.toString()],c=-1,y&&(c=we(y,E,R,B)),(E=c>-1?y[c]:null)&&ie(E))}function ie(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[Xe])_e(y.i,c);else{var E=c.type,R=c.proxy;y.removeEventListener?y.removeEventListener(E,R,c.capture):y.detachEvent?y.detachEvent(ue(E),R):y.addListener&&y.removeListener&&y.removeListener(R),(E=re(y))?(_e(E,c),E.h==0&&(E.src=null,y[Re]=null)):ge(c)}}}function ue(c){return c in nt?nt[c]:nt[c]="on"+c}function ve(c,y){if(c.da)c=!0;else{y=new Ve(y,this);const E=c.listener,R=c.ha||c.src;c.fa&&ie(c),c=E.call(R,y)}return c}function re(c){return c=c[Re],c instanceof ae?c:null}var be="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ce(c){return typeof c=="function"?c:(c[be]||(c[be]=function(y){return c.handleEvent(y)}),c[be])}function Ie(){V.call(this),this.i=new ae(this),this.M=this,this.G=null}T(Ie,V),Ie.prototype[Xe]=!0,Ie.prototype.removeEventListener=function(c,y,E,R){mt(this,c,y,E,R)};function Te(c,y){var E,R=c.G;if(R)for(E=[];R;R=R.G)E.push(R);if(c=c.M,R=y.type||y,typeof y=="string")y=new D(y,c);else if(y instanceof D)y.target=y.target||c;else{var B=y;y=new D(R,c),W(y,B)}B=!0;let Y,pe;if(E)for(pe=E.length-1;pe>=0;pe--)Y=y.g=E[pe],B=qe(Y,R,!0,y)&&B;if(Y=y.g=c,B=qe(Y,R,!0,y)&&B,B=qe(Y,R,!1,y)&&B,E)for(pe=0;pe<E.length;pe++)Y=y.g=E[pe],B=qe(Y,R,!1,y)&&B}Ie.prototype.N=function(){if(Ie.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const E=c.g[y];for(let R=0;R<E.length;R++)ge(E[R]);delete c.g[y],c.h--}}this.G=null},Ie.prototype.J=function(c,y,E,R){return this.i.add(String(c),y,!1,E,R)},Ie.prototype.K=function(c,y,E,R){return this.i.add(String(c),y,!0,E,R)};function qe(c,y,E,R){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let B=!0;for(let Y=0;Y<y.length;++Y){const pe=y[Y];if(pe&&!pe.da&&pe.capture==E){const Ze=pe.listener,dn=pe.ha||pe.src;pe.fa&&_e(c.i,pe),B=Ze.call(dn,R)!==!1&&B}}return B&&!R.defaultPrevented}function zt(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:d.setTimeout(c,y||0)}function gt(c){c.g=zt(()=>{c.g=null,c.i&&(c.i=!1,gt(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class _t extends V{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:gt(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function In(c){V.call(this),this.h=c,this.g={}}T(In,V);var xt=[];function ln(c){me(c.g,function(y,E){this.g.hasOwnProperty(E)&&ie(y)},c),c.g={}}In.prototype.N=function(){In.Z.N.call(this),ln(this)},In.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ze=d.JSON.stringify,lt=d.JSON.parse,Nn=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function Yn(){}function Pn(){}var $t={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Vt(){D.call(this,"d")}T(Vt,D);function tn(){D.call(this,"c")}T(tn,D);var Et={},oi=null;function wn(){return oi=oi||new Ie}Et.Ia="serverreachability";function xn(c){D.call(this,Et.Ia,c)}T(xn,D);function Jt(c){const y=wn();Te(y,new xn(y))}Et.STAT_EVENT="statevent";function Er(c,y){D.call(this,Et.STAT_EVENT,c),this.stat=y}T(Er,D);function Ft(c){const y=wn();Te(y,new Er(y,c))}Et.Ja="timingevent";function un(c,y){D.call(this,Et.Ja,c),this.size=y}T(un,D);function ar(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},y)}function Oe(){this.g=!0}Oe.prototype.ua=function(){this.g=!1};function yt(c,y,E,R,B,Y){c.info(function(){if(c.g)if(Y){var pe="",Ze=Y.split("&");for(let At=0;At<Ze.length;At++){var dn=Ze[At].split("=");if(dn.length>1){const Zt=dn[0];dn=dn[1];const Lr=Zt.split("_");pe=Lr.length>=2&&Lr[1]=="type"?pe+(Zt+"="+dn+"&"):pe+(Zt+"=redacted&")}}}else pe=null;else pe=Y;return"XMLHTTP REQ ("+R+") [attempt "+B+"]: "+y+`
`+E+`
`+pe})}function St(c,y,E,R,B,Y,pe){c.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+B+"]: "+y+`
`+E+`
`+Y+" "+pe})}function Wt(c,y,E,R){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+or(c,E)+(R?" "+R:"")})}function cn(c,y){c.info(function(){return"TIMEOUT: "+y})}Oe.prototype.info=function(){};function or(c,y){if(!c.g)return y;if(!y)return null;try{const Y=JSON.parse(y);if(Y){for(c=0;c<Y.length;c++)if(Array.isArray(Y[c])){var E=Y[c];if(!(E.length<2)){var R=E[1];if(Array.isArray(R)&&!(R.length<1)){var B=R[0];if(B!="noop"&&B!="stop"&&B!="close")for(let pe=1;pe<R.length;pe++)R[pe]=""}}}}return ze(Y)}catch{return y}}var Ln={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},An={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Xn;function Mi(){}T(Mi,Yn),Mi.prototype.g=function(){return new XMLHttpRequest},Xn=new Mi;function Yr(c){return encodeURIComponent(String(c))}function Qa(c){var y=1;c=c.split(":");const E=[];for(;y>0&&c.length;)E.push(c.shift()),y--;return c.length&&E.push(c.join(":")),E}function Tr(c,y,E,R){this.j=c,this.i=y,this.l=E,this.S=R||1,this.V=new In(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new br}function br(){this.i=null,this.g="",this.h=!1}var M={},oe={};function Se(c,y,E){c.M=1,c.A=la(gn(y)),c.u=E,c.R=!0,ke(c,null)}function ke(c,y){c.F=Date.now(),rt(c),c.B=gn(c.A);var E=c.B,R=c.S;Array.isArray(R)||(R=[String(R)]),$a(E.i,"t",R),c.C=0,E=c.j.L,c.h=new br,c.g=$u(c.j,E?y:null,!c.u),c.P>0&&(c.O=new _t(m(c.Y,c,c.g),c.P)),y=c.V,E=c.g,R=c.ba;var B="readystatechange";Array.isArray(B)||(B&&(xt[0]=B.toString()),B=xt);for(let Y=0;Y<B.length;Y++){const pe=de(E,B[Y],R||y.handleEvent,!1,y.h||y);if(!pe)break;y.g[pe.key]=pe}y=c.J?k(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),Jt(),yt(c.i,c.v,c.B,c.l,c.S,c.u)}Tr.prototype.ba=function(c){c=c.target;const y=this.O;y&&Jr(c)==3?y.j():this.Y(c)},Tr.prototype.Y=function(c){try{if(c==this.g)e:{const Ze=Jr(this.g),dn=this.g.ya(),At=this.g.ca();if(!(Ze<3)&&(Ze!=3||this.g&&(this.h.h||this.g.la()||jn(this.g)))){this.K||Ze!=4||dn==7||(dn==8||At<=0?Jt(3):Jt(2)),hn(this);var y=this.g.ca();this.X=y;var E=Ye(this);if(this.o=y==200,St(this.i,this.v,this.B,this.l,this.S,Ze,y),this.o){if(this.U&&!this.L){t:{if(this.g){var R,B=this.g;if((R=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(R)){var Y=R;break t}}Y=null}if(c=Y)Wt(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Un(this,c);else{this.o=!1,this.m=3,Ft(12),Dt(this),Kt(this);break e}}if(this.R){c=!0;let Zt;for(;!this.K&&this.C<E.length;)if(Zt=it(this,E),Zt==oe){Ze==4&&(this.m=4,Ft(14),c=!1),Wt(this.i,this.l,null,"[Incomplete Response]");break}else if(Zt==M){this.m=4,Ft(15),Wt(this.i,this.l,E,"[Invalid Chunk]"),c=!1;break}else Wt(this.i,this.l,Zt,null),Un(this,Zt);if(wt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ze!=4||E.length!=0||this.h.h||(this.m=1,Ft(16),c=!1),this.o=this.o&&c,!c)Wt(this.i,this.l,E,"[Invalid Chunked Response]"),Dt(this),Kt(this);else if(E.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),pl(pe),pe.P=!0,Ft(11))}}else Wt(this.i,this.l,E,null),Un(this,E);Ze==4&&Dt(this),this.o&&!this.K&&(Ze==4?Ku(this.j,this):(this.o=!1,rt(this)))}else ki(this.g),y==400&&E.indexOf("Unknown SID")>0?(this.m=3,Ft(12)):(this.m=0,Ft(13)),Dt(this),Kt(this)}}}catch{}finally{}};function Ye(c){if(!wt(c))return c.g.la();const y=jn(c.g);if(y==="")return"";let E="";const R=y.length,B=Jr(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Dt(c),Kt(c),"";c.h.i=new d.TextDecoder}for(let Y=0;Y<R;Y++)c.h.h=!0,E+=c.h.i.decode(y[Y],{stream:!(B&&Y==R-1)});return y.length=0,c.h.g+=E,c.C=0,c.h.g}function wt(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function it(c,y){var E=c.C,R=y.indexOf(`
`,E);return R==-1?oe:(E=Number(y.substring(E,R)),isNaN(E)?M:(R+=1,R+E>y.length?oe:(y=y.slice(R,R+E),c.C=R+E,y)))}Tr.prototype.cancel=function(){this.K=!0,Dt(this)};function rt(c){c.T=Date.now()+c.H,Bt(c,c.H)}function Bt(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=ar(m(c.aa,c),y)}function hn(c){c.D&&(d.clearTimeout(c.D),c.D=null)}Tr.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(cn(this.i,this.B),this.M!=2&&(Jt(),Ft(17)),Dt(this),this.m=2,Kt(this)):Bt(this,this.T-c)};function Kt(c){c.j.I==0||c.K||Ku(c.j,c)}function Dt(c){hn(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,ln(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function Un(c,y){try{var E=c.j;if(E.I!=0&&(E.g==c||li(E.h,c))){if(!c.L&&li(E.h,c)&&E.I==3){try{var R=E.Ba.g.parse(y)}catch{R=null}if(Array.isArray(R)&&R.length==3){var B=R;if(B[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<c.F)to(E),ps(E);else break e;pa(E),Ft(18)}}else E.xa=B[1],0<E.xa-E.K&&B[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=ar(m(E.Va,E),6e3));kr(E.h)<=1&&E.ta&&(E.ta=void 0)}else mi(E,11)}else if((c.L||E.g==c)&&to(E),!I(y))for(B=E.Ba.g.parse(y),y=0;y<B.length;y++){let At=B[y];const Zt=At[0];if(!(Zt<=E.K))if(E.K=Zt,At=At[1],E.I==2)if(At[0]=="c"){E.M=At[1],E.ba=At[2];const Lr=At[3];Lr!=null&&(E.ka=Lr,E.j.info("VER="+E.ka));const pi=At[4];pi!=null&&(E.za=pi,E.j.info("SVER="+E.za));const Wr=At[5];Wr!=null&&typeof Wr=="number"&&Wr>0&&(R=1.5*Wr,E.O=R,E.j.info("backChannelRequestTimeoutMs_="+R)),R=E;const Zr=c.g;if(Zr){const ga=Zr.g?Zr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ga){var Y=R.h;Y.g||ga.indexOf("spdy")==-1&&ga.indexOf("quic")==-1&&ga.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(rl(Y,Y.h),Y.h=null))}if(R.G){const no=Zr.g?Zr.g.getResponseHeader("X-HTTP-Session-Id"):null;no&&(R.wa=no,Mt(R.J,R.G,no))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-c.F,E.j.info("Handshake RTT: "+E.T+"ms")),R=E;var pe=c;if(R.na=Xu(R,R.L?R.ba:null,R.W),pe.L){il(R.h,pe);var Ze=pe,dn=R.O;dn&&(Ze.H=dn),Ze.D&&(hn(Ze),rt(Ze)),R.g=pe}else Hu(R);E.i.length>0&&fi(E)}else At[0]!="stop"&&At[0]!="close"||mi(E,7);else E.I==3&&(At[0]=="stop"||At[0]=="close"?At[0]=="stop"?mi(E,7):fl(E):At[0]!="noop"&&E.l&&E.l.qa(At),E.A=0)}}Jt(4)}catch{}}var Ht=class{constructor(c,y){this.g=c,this.map=y}};function $n(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function rr(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function kr(c){return c.h?1:c.g?c.g.size:0}function li(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function rl(c,y){c.g?c.g.add(y):c.h=y}function il(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}$n.prototype.cancel=function(){if(this.i=sl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function sl(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const E of c.g.values())y=y.concat(E.G);return y}return A(c.i)}var Uu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ya(c,y){if(c){c=c.split("&");for(let E=0;E<c.length;E++){const R=c[E].indexOf("=");let B,Y=null;R>=0?(B=c[E].substring(0,R),Y=c[E].substring(R+1)):B=c[E],y(B,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Sr(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof Sr?(this.l=c.l,Dn(this,c.j),this.o=c.o,this.g=c.g,ls(this,c.u),this.h=c.h,al(this,qu(c.i)),this.m=c.m):c&&(y=String(c).match(Uu))?(this.l=!1,Dn(this,y[1]||"",!0),this.o=ui(y[2]||""),this.g=ui(y[3]||"",!0),ls(this,y[4]),this.h=ui(y[5]||"",!0),al(this,y[6]||"",!0),this.m=ui(y[7]||"")):(this.l=!1,this.i=new cs(null,this.l))}Sr.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(ua(y,Xa,!0),":");var E=this.g;return(E||y=="file")&&(c.push("//"),(y=this.o)&&c.push(ua(y,Xa,!0),"@"),c.push(Yr(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&c.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&c.push("/"),c.push(ua(E,E.charAt(0)=="/"?ol:ju,!0))),(E=this.i.toString())&&c.push("?",E),(E=this.m)&&c.push("#",ua(E,zu)),c.join("")},Sr.prototype.resolve=function(c){const y=gn(this);let E=!!c.j;E?Dn(y,c.j):E=!!c.o,E?y.o=c.o:E=!!c.g,E?y.g=c.g:E=c.u!=null;var R=c.h;if(E)ls(y,c.u);else if(E=!!c.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var B=y.h.lastIndexOf("/");B!=-1&&(R=y.h.slice(0,B+1)+R)}if(B=R,B==".."||B==".")R="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){R=B.lastIndexOf("/",0)==0,B=B.split("/");const Y=[];for(let pe=0;pe<B.length;){const Ze=B[pe++];Ze=="."?R&&pe==B.length&&Y.push(""):Ze==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),R&&pe==B.length&&Y.push("")):(Y.push(Ze),R=!0)}R=Y.join("/")}else R=B}return E?y.h=R:E=c.i.toString()!=="",E?al(y,qu(c.i)):E=!!c.m,E&&(y.m=c.m),y};function gn(c){return new Sr(c)}function Dn(c,y,E){c.j=E?ui(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function ls(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function al(c,y,E){y instanceof cs?(c.i=y,Ja(c.i,c.l)):(E||(y=ua(y,us)),c.i=new cs(y,c.l))}function Mt(c,y,E){c.i.set(y,E)}function la(c){return Mt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function ui(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ua(c,y,E){return typeof c=="string"?(c=encodeURI(c).replace(y,lr),E&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function lr(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Xa=/[#\/\?@]/g,ju=/[#\?:]/g,ol=/[#\?]/g,us=/[#\?@]/g,zu=/#/g;function cs(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function ur(c){c.g||(c.g=new Map,c.h=0,c.i&&Ya(c.i,function(y,E){c.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}i=cs.prototype,i.add=function(c,y){ur(this),this.i=null,c=hs(this,c);let E=this.g.get(c);return E||this.g.set(c,E=[]),E.push(y),this.h+=1,this};function Bu(c,y){ur(c),y=hs(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function ll(c,y){return ur(c),y=hs(c,y),c.g.has(y)}i.forEach=function(c,y){ur(this),this.g.forEach(function(E,R){E.forEach(function(B){c.call(y,B,R,this)},this)},this)};function ul(c,y){ur(c);let E=[];if(typeof y=="string")ll(c,y)&&(E=E.concat(c.g.get(hs(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)E=E.concat(c[y]);return E}i.set=function(c,y){return ur(this),this.i=null,c=hs(this,c),ll(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},i.get=function(c,y){return c?(c=ul(this,c),c.length>0?String(c[0]):y):y};function $a(c,y,E){Bu(c,y),E.length>0&&(c.i=null,c.g.set(hs(c,y),A(E)),c.h+=E.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let R=0;R<y.length;R++){var E=y[R];const B=Yr(E);E=ul(this,E);for(let Y=0;Y<E.length;Y++){let pe=B;E[Y]!==""&&(pe+="="+Yr(E[Y])),c.push(pe)}}return this.i=c.join("&")};function qu(c){const y=new cs;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function hs(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Ja(c,y){y&&!c.j&&(ur(c),c.i=null,c.g.forEach(function(E,R){const B=R.toLowerCase();R!=B&&(Bu(this,R),$a(this,B,E))},c)),c.j=y}function Xr(c,y){const E=new Oe;if(d.Image){const R=new Image;R.onload=v(Vr,E,"TestLoadImage: loaded",!0,y,R),R.onerror=v(Vr,E,"TestLoadImage: error",!1,y,R),R.onabort=v(Vr,E,"TestLoadImage: abort",!1,y,R),R.ontimeout=v(Vr,E,"TestLoadImage: timeout",!1,y,R),d.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=c}else y(!1)}function cl(c,y){const E=new Oe,R=new AbortController,B=setTimeout(()=>{R.abort(),Vr(E,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:R.signal}).then(Y=>{clearTimeout(B),Y.ok?Vr(E,"TestPingServer: ok",!0,y):Vr(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),Vr(E,"TestPingServer: error",!1,y)})}function Vr(c,y,E,R,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),R(E)}catch{}}function ds(){this.g=new Nn}function ci(c){this.i=c.Sb||null,this.h=c.ab||!1}T(ci,Yn),ci.prototype.g=function(){return new ca(this.i,this.h)};function ca(c,y){Ie.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(ca,Ie),i=ca.prototype,i.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,$r(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||d).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,fs(this)),this.readyState=0},i.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,$r(this)),this.g&&(this.readyState=3,$r(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Wa(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Wa(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}i.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?fs(this):$r(this),this.readyState==3&&Wa(this)}},i.Oa=function(c){this.g&&(this.response=this.responseText=c,fs(this))},i.Na=function(c){this.g&&(this.response=c,fs(this))},i.ga=function(){this.g&&fs(this)};function fs(c){c.readyState=4,c.l=null,c.j=null,c.B=null,$r(c)}i.setRequestHeader=function(c,y){this.A.append(c,y)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,c.push(E[0]+": "+E[1]),E=y.next();return c.join(`\r
`)};function $r(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ca.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Pr(c){let y="";return me(c,function(E,R){y+=R,y+=":",y+=E,y+=`\r
`}),y}function ha(c,y,E){e:{for(R in E){var R=!1;break e}R=!0}R||(E=Pr(E),typeof c=="string"?E!=null&&Yr(E):Mt(c,y,E))}function Pt(c){Ie.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(Pt,Ie);var hi=/^https?$/i,hl=["POST","PUT"];i=Pt.prototype,i.Fa=function(c){this.H=c},i.ea=function(c,y,E,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Xn.g(),this.g.onreadystatechange=S(m(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(Y){da(this,Y);return}if(c=E||"",E=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var B in R)E.set(B,R[B]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const Y of R.keys())E.set(Y,R.get(Y));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(E.keys()).find(Y=>Y.toLowerCase()=="content-type"),B=d.FormData&&c instanceof d.FormData,!(Array.prototype.indexOf.call(hl,y,void 0)>=0)||R||B||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,pe]of E)this.g.setRequestHeader(Y,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(Y){da(this,Y)}};function da(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,dl(c),Oi(c)}function dl(c){c.A||(c.A=!0,Te(c,"complete"),Te(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Te(this,"complete"),Te(this,"abort"),Oi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oi(this,!0)),Pt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?fa(this):this.Xa())},i.Xa=function(){fa(this)};function fa(c){if(c.h&&typeof u<"u"){if(c.v&&Jr(c)==4)setTimeout(c.Ca.bind(c),0);else if(Te(c,"readystatechange"),Jr(c)==4){c.h=!1;try{const Y=c.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var R;if(R=Y===0){let pe=String(c.D).match(Uu)[1]||null;!pe&&d.self&&d.self.location&&(pe=d.self.location.protocol.slice(0,-1)),R=!hi.test(pe?pe.toLowerCase():"")}E=R}if(E)Te(c,"complete"),Te(c,"success");else{c.o=6;try{var B=Jr(c)>2?c.g.statusText:""}catch{B=""}c.l=B+" ["+c.ca()+"]",dl(c)}}finally{Oi(c)}}}}function Oi(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const E=c.g;c.g=null,y||Te(c,"ready");try{E.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Jr(c){return c.g?c.g.readyState:0}i.ca=function(){try{return Jr(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),lt(y)}};function jn(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ki(c){const y={};c=(c.g&&Jr(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<c.length;R++){if(I(c[R]))continue;var E=Qa(c[R]);const B=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Y=y[B]||[];y[B]=Y,Y.push(E)}De(y,function(R){return R.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function di(c,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[c]||y}function ms(c){this.za=0,this.i=[],this.j=new Oe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=di("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=di("baseRetryDelayMs",5e3,c),this.Za=di("retryDelaySeedMs",1e4,c),this.Ta=di("forwardChannelMaxRetries",2,c),this.va=di("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new $n(c&&c.concurrentRequestLimit),this.Ba=new ds,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=ms.prototype,i.ka=8,i.I=1,i.connect=function(c,y,E,R){Ft(0),this.W=c,this.H=y||{},E&&R!==void 0&&(this.H.OSID=E,this.H.OAID=R),this.F=this.X,this.J=Xu(this,null,this.W),fi(this)};function fl(c){if(Za(c),c.I==3){var y=c.V++,E=gn(c.J);if(Mt(E,"SID",c.M),Mt(E,"RID",y),Mt(E,"TYPE","terminate"),ma(c,E),y=new Tr(c,c.j,y),y.M=2,y.A=la(gn(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(y.A.toString(),"")}catch{}!E&&d.Image&&(new Image().src=y.A,E=!0),E||(y.g=$u(y.j,null),y.g.ea(y.A)),y.F=Date.now(),rt(y)}Yu(c)}function ps(c){c.g&&(pl(c),c.g.cancel(),c.g=null)}function Za(c){ps(c),c.v&&(d.clearTimeout(c.v),c.v=null),to(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&d.clearTimeout(c.m),c.m=null)}function fi(c){if(!rr(c.h)&&!c.m){c.m=!0;var y=c.Ea;je||C(),xe||(je(),xe=!0),x.add(y,c),c.D=0}}function eo(c,y){return kr(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=ar(m(c.Ea,c,y),Qu(c,c.D)),c.D++,!0)}i.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const B=new Tr(this,this.j,c);let Y=this.o;if(this.U&&(Y?(Y=k(Y),W(Y,this.U)):Y=this.U),this.u!==null||this.R||(B.J=Y,Y=null),this.S)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var R=this.i[E];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(y+=R,y>4096){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=Fu(this,B,y),E=gn(this.J),Mt(E,"RID",c),Mt(E,"CVER",22),this.G&&Mt(E,"X-HTTP-Session-Id",this.G),ma(this,E),Y&&(this.R?y="headers="+Yr(Pr(Y))+"&"+y:this.u&&ha(E,this.u,Y)),rl(this.h,B),this.Ra&&Mt(E,"TYPE","init"),this.S?(Mt(E,"$req",y),Mt(E,"SID","null"),B.U=!0,Se(B,E,null)):Se(B,E,y),this.I=2}}else this.I==3&&(c?ml(this,c):this.i.length==0||rr(this.h)||ml(this))};function ml(c,y){var E;y?E=y.l:E=c.V++;const R=gn(c.J);Mt(R,"SID",c.M),Mt(R,"RID",E),Mt(R,"AID",c.K),ma(c,R),c.u&&c.o&&ha(R,c.u,c.o),E=new Tr(c,c.j,E,c.D+1),c.u===null&&(E.J=c.o),y&&(c.i=y.G.concat(c.i)),y=Fu(c,E,1e3),E.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),rl(c.h,E),Se(E,R,y)}function ma(c,y){c.H&&me(c.H,function(E,R){Mt(y,R,E)}),c.l&&me({},function(E,R){Mt(y,R,E)})}function Fu(c,y,E){E=Math.min(c.i.length,E);const R=c.l?m(c.l.Ka,c.l,c):null;e:{var B=c.i;let Ze=-1;for(;;){const dn=["count="+E];Ze==-1?E>0?(Ze=B[0].g,dn.push("ofs="+Ze)):Ze=0:dn.push("ofs="+Ze);let At=!0;for(let Zt=0;Zt<E;Zt++){var Y=B[Zt].g;const Lr=B[Zt].map;if(Y-=Ze,Y<0)Ze=Math.max(0,B[Zt].g-100),At=!1;else try{Y="req"+Y+"_"||"";try{var pe=Lr instanceof Map?Lr:Object.entries(Lr);for(const[pi,Wr]of pe){let Zr=Wr;g(Wr)&&(Zr=ze(Wr)),dn.push(Y+pi+"="+encodeURIComponent(Zr))}}catch(pi){throw dn.push(Y+"type="+encodeURIComponent("_badmap")),pi}}catch{R&&R(Lr)}}if(At){pe=dn.join("&");break e}}pe=void 0}return c=c.i.splice(0,E),y.G=c,pe}function Hu(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;je||C(),xe||(je(),xe=!0),x.add(y,c),c.A=0}}function pa(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=ar(m(c.Da,c),Qu(c,c.A)),c.A++,!0)}i.Da=function(){if(this.v=null,Gu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=ar(m(this.Wa,this),c)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ft(10),ps(this),Gu(this))};function pl(c){c.B!=null&&(d.clearTimeout(c.B),c.B=null)}function Gu(c){c.g=new Tr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=gn(c.na);Mt(y,"RID","rpc"),Mt(y,"SID",c.M),Mt(y,"AID",c.K),Mt(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&Mt(y,"TO",c.ia),Mt(y,"TYPE","xmlhttp"),ma(c,y),c.u&&c.o&&ha(y,c.u,c.o),c.O&&(c.g.H=c.O);var E=c.g;c=c.ba,E.M=1,E.A=la(gn(y)),E.u=null,E.R=!0,ke(E,c)}i.Va=function(){this.C!=null&&(this.C=null,ps(this),pa(this),Ft(19))};function to(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function Ku(c,y){var E=null;if(c.g==y){to(c),pl(c),c.g=null;var R=2}else if(li(c.h,y))E=y.G,il(c.h,y),R=1;else return;if(c.I!=0){if(y.o)if(R==1){E=y.u?y.u.length:0,y=Date.now()-y.F;var B=c.D;R=wn(),Te(R,new un(R,E)),fi(c)}else Hu(c);else if(B=y.m,B==3||B==0&&y.X>0||!(R==1&&eo(c,y)||R==2&&pa(c)))switch(E&&E.length>0&&(y=c.h,y.i=y.i.concat(E)),B){case 1:mi(c,5);break;case 4:mi(c,10);break;case 3:mi(c,6);break;default:mi(c,2)}}}function Qu(c,y){let E=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(E*=2),E*y}function mi(c,y){if(c.j.info("Error code "+y),y==2){var E=m(c.bb,c),R=c.Ua;const B=!R;R=new Sr(R||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Dn(R,"https"),la(R),B?Xr(R.toString(),E):cl(R.toString(),E)}else Ft(2);c.I=0,c.l&&c.l.pa(y),Yu(c),Za(c)}i.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function Yu(c){if(c.I=0,c.ja=[],c.l){const y=sl(c.h);(y.length!=0||c.i.length!=0)&&(L(c.ja,y),L(c.ja,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.oa()}}function Xu(c,y,E){var R=E instanceof Sr?gn(E):new Sr(E);if(R.g!="")y&&(R.g=y+"."+R.g),ls(R,R.u);else{var B=d.location;R=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;const Y=new Sr(null);R&&Dn(Y,R),y&&(Y.g=y),B&&ls(Y,B),E&&(Y.h=E),R=Y}return E=c.G,y=c.wa,E&&y&&Mt(R,E,y),Mt(R,"VER",c.ka),ma(c,R),R}function $u(c,y,E){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new Pt(new ci({ab:E})):new Pt(c.ma),y.Fa(c.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ju(){}i=Ju.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function gs(){}gs.prototype.g=function(c,y){return new ir(c,y)};function ir(c,y){Ie.call(this),this.g=new ms(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!I(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!I(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Vi(this)}T(ir,Ie),ir.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ir.prototype.close=function(){fl(this.g)},ir.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var E={};E.__data__=c,c=E}else this.v&&(E={},E.__data__=ze(c),c=E);y.i.push(new Ht(y.Ya++,c)),y.I==3&&fi(y)},ir.prototype.N=function(){this.g.l=null,delete this.j,fl(this.g),delete this.g,ir.Z.N.call(this)};function Wu(c){Vt.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const E in y){c=E;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}T(Wu,Vt);function Zu(){tn.call(this),this.status=1}T(Zu,tn);function Vi(c){this.g=c}T(Vi,Ju),Vi.prototype.ra=function(){Te(this.g,"a")},Vi.prototype.qa=function(c){Te(this.g,new Wu(c))},Vi.prototype.pa=function(c){Te(this.g,new Zu)},Vi.prototype.oa=function(){Te(this.g,"b")},gs.prototype.createWebChannel=gs.prototype.g,ir.prototype.send=ir.prototype.o,ir.prototype.open=ir.prototype.m,ir.prototype.close=ir.prototype.close,MT=function(){return new gs},DT=function(){return wn()},xT=Et,qm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ln.NO_ERROR=0,Ln.TIMEOUT=8,Ln.HTTP_ERROR=6,ph=Ln,An.COMPLETE="complete",NT=An,Pn.EventType=$t,$t.OPEN="a",$t.CLOSE="b",$t.ERROR="c",$t.MESSAGE="d",Ie.prototype.listen=Ie.prototype.J,iu=Pn,Pt.prototype.listenOnce=Pt.prototype.K,Pt.prototype.getLastError=Pt.prototype.Ha,Pt.prototype.getLastErrorCode=Pt.prototype.ya,Pt.prototype.getStatus=Pt.prototype.ca,Pt.prototype.getResponseJson=Pt.prototype.La,Pt.prototype.getResponseText=Pt.prototype.la,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Fa,IT=Pt}).apply(typeof ih<"u"?ih:typeof self<"u"?self:typeof window<"u"?window:{});const b0="@firebase/firestore",S0="4.9.2";class Zn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zn.UNAUTHENTICATED=new Zn(null),Zn.GOOGLE_CREDENTIALS=new Zn("google-credentials-uid"),Zn.FIRST_PARTY=new Zn("first-party-uid"),Zn.MOCK_USER=new Zn("mock-user");let Wo="12.3.0";const Ba=new pp("@firebase/firestore");function Oo(){return Ba.logLevel}function Ae(i,...e){if(Ba.logLevel<=ht.DEBUG){const n=e.map(Rp);Ba.debug(`Firestore (${Wo}): ${i}`,...n)}}function rs(i,...e){if(Ba.logLevel<=ht.ERROR){const n=e.map(Rp);Ba.error(`Firestore (${Wo}): ${i}`,...n)}}function Ho(i,...e){if(Ba.logLevel<=ht.WARN){const n=e.map(Rp);Ba.warn(`Firestore (${Wo}): ${i}`,...n)}}function Rp(i){if(typeof i=="string")return i;try{return(function(n){return JSON.stringify(n)})(i)}catch{return i}}function Ge(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,OT(i,s,n)}function OT(i,e,n){let s=`FIRESTORE (${Wo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw rs(s),new Error(s)}function Nt(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||OT(e,o,s)}function We(i,e){return i}const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends xi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class es{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class kT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Zn.UNAUTHENTICATED)))}shutdown(){}}class cI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class hI{constructor(e){this.t=e,this.currentUser=Zn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Nt(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new es;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new es,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},g=p=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((p=>g(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new es)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Nt(typeof s.accessToken=="string",31837,{l:s}),new kT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Nt(e===null||typeof e=="string",2055,{h:e}),new Zn(e)}}class dI{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Zn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class fI{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new dI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Zn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class w0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Nt(this.o===void 0,3512);const s=u=>{u.error!=null&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,Ae("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new w0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Nt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new w0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function pI(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}class Cp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=pI(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function dt(i,e){return i<e?-1:i>e?1:0}function Fm(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),u=e.charAt(s);if(o!==u)return Am(o)===Am(u)?dt(o,u):Am(o)?1:-1}return dt(i.length,e.length)}const gI=55296,yI=57343;function Am(i){const e=i.charCodeAt(0);return e>=gI&&e<=yI}function Go(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}const A0="__name__";class Ei{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ge(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ge(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Ei.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ei?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=Ei.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return dt(e.length,n.length)}static compareSegments(e,n){const s=Ei.isNumericId(e),o=Ei.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Ei.extractNumericId(e).compare(Ei.extractNumericId(n)):Fm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Xs.fromString(e.substring(4,e.length-2))}}class Gt extends Ei{construct(e,n,s){return new Gt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ee(ee.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new Gt(n)}static emptyPath(){return new Gt([])}}const vI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kn extends Ei{construct(e,n,s){return new Kn(e,n,s)}static isValidIdentifier(e){return vI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===A0}static keyField(){return new Kn([A0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new Ee(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new Ee(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Ee(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else g==="`"?(d=!d,o++):g!=="."||d?(s+=g,o++):(u(),o++)}if(u(),d)throw new Ee(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kn(n)}static emptyPath(){return new Kn([])}}class Ue{constructor(e){this.path=e}static fromPath(e){return new Ue(Gt.fromString(e))}static fromName(e){return new Ue(Gt.fromString(e).popFirst(5))}static empty(){return new Ue(Gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Gt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ue(new Gt(e.slice()))}}function VT(i,e,n){if(!n)throw new Ee(ee.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function _I(i,e,n,s){if(e===!0&&s===!0)throw new Ee(ee.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function R0(i){if(!Ue.isDocumentKey(i))throw new Ee(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function C0(i){if(Ue.isDocumentKey(i))throw new Ee(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function PT(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function $h(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ge(12329,{type:typeof i})}function _r(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Ee(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$h(i);throw new Ee(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function EI(i,e){if(e<=0)throw new Ee(ee.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}function Sn(i,e){const n={typeString:i};return e&&(n.value=e),n}function Du(i,e){if(!PT(i))throw new Ee(ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const d=i[s];if(o&&typeof d!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new Ee(ee.INVALID_ARGUMENT,n);return!0}const I0=-62135596800,N0=1e6;class It{static now(){return It.fromMillis(Date.now())}static fromDate(e){return It.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*N0);return new It(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ee(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ee(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<I0)throw new Ee(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/N0}_compareTo(e){return this.seconds===e.seconds?dt(this.nanoseconds,e.nanoseconds):dt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:It._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Du(e,It._jsonSchema))return new It(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-I0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}It._jsonSchemaVersion="firestore/timestamp/1.0",It._jsonSchema={type:Sn("string",It._jsonSchemaVersion),seconds:Sn("number"),nanoseconds:Sn("number")};class $e{static fromTimestamp(e){return new $e(e)}static min(){return new $e(new It(0,0))}static max(){return new $e(new It(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const yu=-1;function TI(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=$e.fromTimestamp(s===1e9?new It(n+1,0):new It(n,s));return new Ws(o,Ue.empty(),e)}function bI(i){return new Ws(i.readTime,i.key,yu)}class Ws{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Ws($e.min(),Ue.empty(),yu)}static max(){return new Ws($e.max(),Ue.empty(),yu)}}function SI(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Ue.comparator(i.documentKey,e.documentKey),n!==0?n:dt(i.largestBatchId,e.largestBatchId))}const wI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Zo(i){if(i.code!==ee.FAILED_PRECONDITION||i.message!==wI)throw i;Ae("LocalStore","Unexpectedly lost primary lease")}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):se.reject(n)}static resolve(e){return new se(((n,s)=>{n(e)}))}static reject(e){return new se(((n,s)=>{s(e)}))}static waitFor(e){return new se(((n,s)=>{let o=0,u=0,d=!1;e.forEach((g=>{++o,g.next((()=>{++u,d&&u===o&&n()}),(p=>s(p)))})),d=!0,u===o&&n()}))}static or(e){let n=se.resolve(!1);for(const s of e)n=n.next((o=>o?se.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new se(((s,o)=>{const u=e.length,d=new Array(u);let g=0;for(let p=0;p<u;p++){const m=p;n(e[m]).next((v=>{d[m]=v,++g,g===u&&s(d)}),(v=>o(v)))}}))}static doWhile(e,n){return new se(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function RI(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function el(i){return i.name==="IndexedDbTransactionError"}class Jh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Jh.ce=-1;const Ip=-1;function Wh(i){return i==null}function Nh(i){return i===0&&1/i==-1/0}function CI(i){return typeof i=="number"&&Number.isInteger(i)&&!Nh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const LT="";function II(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=x0(e)),e=NI(i.get(n),e);return x0(e)}function NI(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case LT:n+="";break;default:n+=u}}return n}function x0(i){return i+LT+""}function D0(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function aa(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function UT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class nn{constructor(e,n){this.comparator=e,this.root=n||Hn.EMPTY}insert(e,n){return new nn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Hn.BLACK,null,null))}remove(e){return new nn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sh(this.root,e,this.comparator,!1)}getReverseIterator(){return new sh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sh(this.root,e,this.comparator,!0)}}class sh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Hn{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??Hn.RED,this.left=o??Hn.EMPTY,this.right=u??Hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new Hn(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Hn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ge(27949);return e+(this.isRed()?0:1)}}Hn.EMPTY=null,Hn.RED=!0,Hn.BLACK=!1;Hn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ge(57766)}get value(){throw Ge(16141)}get color(){throw Ge(16727)}get left(){throw Ge(29726)}get right(){throw Ge(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new Hn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Cn{constructor(e){this.comparator=e,this.data=new nn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new M0(this.data.getIterator())}getIteratorFrom(e){return new M0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Cn)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Cn(this.comparator);return n.data=e,n}}class M0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Or{constructor(e){this.fields=e,e.sort(Kn.comparator)}static empty(){return new Or([])}unionWith(e){let n=new Cn(Kn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Or(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Go(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class jT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Qn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new jT("Invalid base64 string: "+u):u}})(e);return new Qn(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new Qn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return dt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qn.EMPTY_BYTE_STRING=new Qn("");const xI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zs(i){if(Nt(!!i,39018),typeof i=="string"){let e=0;const n=xI.exec(i);if(Nt(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:pn(i.seconds),nanos:pn(i.nanos)}}function pn(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ea(i){return typeof i=="string"?Qn.fromBase64String(i):Qn.fromUint8Array(i)}const zT="server_timestamp",BT="__type__",qT="__previous_value__",FT="__local_write_time__";function Np(i){return(i?.mapValue?.fields||{})[BT]?.stringValue===zT}function Zh(i){const e=i.mapValue.fields[qT];return Np(e)?Zh(e):e}function vu(i){const e=Zs(i.mapValue.fields[FT].timestampValue);return new It(e.seconds,e.nanos)}class DI{constructor(e,n,s,o,u,d,g,p,m,v){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=v}}const xh="(default)";class _u{constructor(e,n){this.projectId=e,this.database=n||xh}static empty(){return new _u("","")}get isDefaultDatabase(){return this.database===xh}isEqual(e){return e instanceof _u&&e.projectId===this.projectId&&e.database===this.database}}const HT="__type__",MI="__max__",ah={mapValue:{}},GT="__vector__",Dh="value";function ta(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Np(i)?4:kI(i)?9007199254740991:OI(i)?10:11:Ge(28295,{value:i})}function Ni(i,e){if(i===e)return!0;const n=ta(i);if(n!==ta(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return vu(i).isEqual(vu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=Zs(o.timestampValue),g=Zs(u.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return ea(o.bytesValue).isEqual(ea(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return pn(o.geoPointValue.latitude)===pn(u.geoPointValue.latitude)&&pn(o.geoPointValue.longitude)===pn(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return pn(o.integerValue)===pn(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=pn(o.doubleValue),g=pn(u.doubleValue);return d===g?Nh(d)===Nh(g):isNaN(d)&&isNaN(g)}return!1})(i,e);case 9:return Go(i.arrayValue.values||[],e.arrayValue.values||[],Ni);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},g=u.mapValue.fields||{};if(D0(d)!==D0(g))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(g[p]===void 0||!Ni(d[p],g[p])))return!1;return!0})(i,e);default:return Ge(52216,{left:i})}}function Eu(i,e){return(i.values||[]).find((n=>Ni(n,e)))!==void 0}function Ko(i,e){if(i===e)return 0;const n=ta(i),s=ta(e);if(n!==s)return dt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return dt(i.booleanValue,e.booleanValue);case 2:return(function(u,d){const g=pn(u.integerValue||u.doubleValue),p=pn(d.integerValue||d.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1})(i,e);case 3:return O0(i.timestampValue,e.timestampValue);case 4:return O0(vu(i),vu(e));case 5:return Fm(i.stringValue,e.stringValue);case 6:return(function(u,d){const g=ea(u),p=ea(d);return g.compareTo(p)})(i.bytesValue,e.bytesValue);case 7:return(function(u,d){const g=u.split("/"),p=d.split("/");for(let m=0;m<g.length&&m<p.length;m++){const v=dt(g[m],p[m]);if(v!==0)return v}return dt(g.length,p.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,d){const g=dt(pn(u.latitude),pn(d.latitude));return g!==0?g:dt(pn(u.longitude),pn(d.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return k0(i.arrayValue,e.arrayValue);case 10:return(function(u,d){const g=u.fields||{},p=d.fields||{},m=g[Dh]?.arrayValue,v=p[Dh]?.arrayValue,T=dt(m?.values?.length||0,v?.values?.length||0);return T!==0?T:k0(m,v)})(i.mapValue,e.mapValue);case 11:return(function(u,d){if(u===ah.mapValue&&d===ah.mapValue)return 0;if(u===ah.mapValue)return 1;if(d===ah.mapValue)return-1;const g=u.fields||{},p=Object.keys(g),m=d.fields||{},v=Object.keys(m);p.sort(),v.sort();for(let T=0;T<p.length&&T<v.length;++T){const S=Fm(p[T],v[T]);if(S!==0)return S;const A=Ko(g[p[T]],m[v[T]]);if(A!==0)return A}return dt(p.length,v.length)})(i.mapValue,e.mapValue);default:throw Ge(23264,{he:n})}}function O0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return dt(i,e);const n=Zs(i),s=Zs(e),o=dt(n.seconds,s.seconds);return o!==0?o:dt(n.nanos,s.nanos)}function k0(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Ko(n[o],s[o]);if(u)return u}return dt(n.length,s.length)}function Qo(i){return Hm(i)}function Hm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=Zs(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return ea(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return Ue.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Hm(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of s)u?u=!1:o+=",",o+=`${d}:${Hm(n.fields[d])}`;return o+"}"})(i.mapValue):Ge(61005,{value:i})}function gh(i){switch(ta(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Zh(i);return e?16+gh(e):16;case 5:return 2*i.stringValue.length;case 6:return ea(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+gh(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return aa(s.fields,((u,d)=>{o+=u.length+gh(d)})),o})(i.mapValue);default:throw Ge(13486,{value:i})}}function V0(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Gm(i){return!!i&&"integerValue"in i}function xp(i){return!!i&&"arrayValue"in i}function P0(i){return!!i&&"nullValue"in i}function L0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function yh(i){return!!i&&"mapValue"in i}function OI(i){return(i?.mapValue?.fields||{})[HT]?.stringValue===GT}function cu(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return aa(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=cu(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=cu(i.arrayValue.values[n]);return e}return{...i}}function kI(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===MI}class yr{constructor(e){this.value=e}static empty(){return new yr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!yh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=cu(n)}setAll(e){let n=Kn.emptyPath(),s={},o=[];e.forEach(((d,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=g.popLast()}d?s[g.lastSegment()]=cu(d):o.push(g.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());yh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ni(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];yh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){aa(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new yr(cu(this.value))}}function KT(i){const e=[];return aa(i.fields,((n,s)=>{const o=new Kn([n]);if(yh(s)){const u=KT(s.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new Or(e)}class tr{constructor(e,n,s,o,u,d,g){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=d,this.documentState=g}static newInvalidDocument(e){return new tr(e,0,$e.min(),$e.min(),$e.min(),yr.empty(),0)}static newFoundDocument(e,n,s,o){return new tr(e,1,n,$e.min(),s,o,0)}static newNoDocument(e,n){return new tr(e,2,n,$e.min(),$e.min(),yr.empty(),0)}static newUnknownDocument(e,n){return new tr(e,3,n,$e.min(),$e.min(),yr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual($e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Mh{constructor(e,n){this.position=e,this.inclusive=n}}function U0(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],d=i.position[o];if(u.field.isKeyField()?s=Ue.comparator(Ue.fromName(d.referenceValue),n.key):s=Ko(d,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function j0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Ni(i.position[n],e.position[n]))return!1;return!0}class Tu{constructor(e,n="asc"){this.field=e,this.dir=n}}function VI(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class QT{}class bn extends QT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new LI(e,n,s):n==="array-contains"?new zI(e,s):n==="in"?new BI(e,s):n==="not-in"?new qI(e,s):n==="array-contains-any"?new FI(e,s):new bn(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new UI(e,s):new jI(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ko(n,this.value)):n!==null&&ta(this.value)===ta(n)&&this.matchesComparison(Ko(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ai extends QT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ai(e,n)}matches(e){return YT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function YT(i){return i.op==="and"}function XT(i){return PI(i)&&YT(i)}function PI(i){for(const e of i.filters)if(e instanceof ai)return!1;return!0}function Km(i){if(i instanceof bn)return i.field.canonicalString()+i.op.toString()+Qo(i.value);if(XT(i))return i.filters.map((e=>Km(e))).join(",");{const e=i.filters.map((n=>Km(n))).join(",");return`${i.op}(${e})`}}function $T(i,e){return i instanceof bn?(function(s,o){return o instanceof bn&&s.op===o.op&&s.field.isEqual(o.field)&&Ni(s.value,o.value)})(i,e):i instanceof ai?(function(s,o){return o instanceof ai&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,d,g)=>u&&$T(d,o.filters[g])),!0):!1})(i,e):void Ge(19439)}function JT(i){return i instanceof bn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Qo(n.value)}`})(i):i instanceof ai?(function(n){return n.op.toString()+" {"+n.getFilters().map(JT).join(" ,")+"}"})(i):"Filter"}class LI extends bn{constructor(e,n,s){super(e,n,s),this.key=Ue.fromName(s.referenceValue)}matches(e){const n=Ue.comparator(e.key,this.key);return this.matchesComparison(n)}}class UI extends bn{constructor(e,n){super(e,"in",n),this.keys=WT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class jI extends bn{constructor(e,n){super(e,"not-in",n),this.keys=WT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function WT(i,e){return(e.arrayValue?.values||[]).map((n=>Ue.fromName(n.referenceValue)))}class zI extends bn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return xp(n)&&Eu(n.arrayValue,this.value)}}class BI extends bn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Eu(this.value.arrayValue,n)}}class qI extends bn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Eu(this.value.arrayValue,n)}}class FI extends bn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!xp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Eu(this.value.arrayValue,s)))}}class HI{constructor(e,n=null,s=[],o=[],u=null,d=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=d,this.endAt=g,this.Te=null}}function z0(i,e=null,n=[],s=[],o=null,u=null,d=null){return new HI(i,e,n,s,o,u,d)}function Dp(i){const e=We(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Km(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Wh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Qo(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Qo(s))).join(",")),e.Te=n}return e.Te}function Mp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!VI(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!$T(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!j0(i.startAt,e.startAt)&&j0(i.endAt,e.endAt)}function Qm(i){return Ue.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class tl{constructor(e,n=null,s=[],o=[],u=null,d="F",g=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=d,this.startAt=g,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function GI(i,e,n,s,o,u,d,g){return new tl(i,e,n,s,o,u,d,g)}function ed(i){return new tl(i)}function B0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function ZT(i){return i.collectionGroup!==null}function hu(i){const e=We(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new Cn(Kn.comparator);return d.filters.forEach((p=>{p.getFlattenedFilters().forEach((m=>{m.isInequality()&&(g=g.add(m.field))}))})),g})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Tu(u,s))})),n.has(Kn.keyField().canonicalString())||e.Ie.push(new Tu(Kn.keyField(),s))}return e.Ie}function Ai(i){const e=We(i);return e.Ee||(e.Ee=KI(e,hu(i))),e.Ee}function KI(i,e){if(i.limitType==="F")return z0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Tu(o.field,u)}));const n=i.endAt?new Mh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Mh(i.startAt.position,i.startAt.inclusive):null;return z0(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function Ym(i,e){const n=i.filters.concat([e]);return new tl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Oh(i,e,n){return new tl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function td(i,e){return Mp(Ai(i),Ai(e))&&i.limitType===e.limitType}function eb(i){return`${Dp(Ai(i))}|lt:${i.limitType}`}function ko(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>JT(o))).join(", ")}]`),Wh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>Qo(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>Qo(o))).join(",")),`Target(${s})`})(Ai(i))}; limitType=${i.limitType})`}function nd(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Ue.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of hu(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(d,g,p){const m=U0(d,g,p);return d.inclusive?m<=0:m<0})(s.startAt,hu(s),o)||s.endAt&&!(function(d,g,p){const m=U0(d,g,p);return d.inclusive?m>=0:m>0})(s.endAt,hu(s),o))})(i,e)}function QI(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function tb(i){return(e,n)=>{let s=!1;for(const o of hu(i)){const u=YI(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function YI(i,e,n){const s=i.field.isKeyField()?Ue.comparator(e.key,n.key):(function(u,d,g){const p=d.data.field(u),m=g.data.field(u);return p!==null&&m!==null?Ko(p,m):Ge(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Ge(19790,{direction:i.dir})}}class Ga{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){aa(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return UT(this.inner)}size(){return this.innerSize}}const XI=new nn(Ue.comparator);function is(){return XI}const nb=new nn(Ue.comparator);function su(...i){let e=nb;for(const n of i)e=e.insert(n.key,n);return e}function rb(i){let e=nb;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Oa(){return du()}function ib(){return du()}function du(){return new Ga((i=>i.toString()),((i,e)=>i.isEqual(e)))}const $I=new nn(Ue.comparator),JI=new Cn(Ue.comparator);function ft(...i){let e=JI;for(const n of i)e=e.add(n);return e}const WI=new Cn(dt);function ZI(){return WI}function Op(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nh(e)?"-0":e}}function sb(i){return{integerValue:""+i}}function e2(i,e){return CI(e)?sb(e):Op(i,e)}class rd{constructor(){this._=void 0}}function t2(i,e,n){return i instanceof bu?(function(o,u){const d={fields:{[BT]:{stringValue:zT},[FT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Np(u)&&(u=Zh(u)),u&&(d.fields[qT]=u),{mapValue:d}})(n,e):i instanceof Su?ob(i,e):i instanceof wu?lb(i,e):(function(o,u){const d=ab(o,u),g=q0(d)+q0(o.Ae);return Gm(d)&&Gm(o.Ae)?sb(g):Op(o.serializer,g)})(i,e)}function n2(i,e,n){return i instanceof Su?ob(i,e):i instanceof wu?lb(i,e):n}function ab(i,e){return i instanceof kh?(function(s){return Gm(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class bu extends rd{}class Su extends rd{constructor(e){super(),this.elements=e}}function ob(i,e){const n=ub(e);for(const s of i.elements)n.some((o=>Ni(o,s)))||n.push(s);return{arrayValue:{values:n}}}class wu extends rd{constructor(e){super(),this.elements=e}}function lb(i,e){let n=ub(e);for(const s of i.elements)n=n.filter((o=>!Ni(o,s)));return{arrayValue:{values:n}}}class kh extends rd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function q0(i){return pn(i.integerValue||i.doubleValue)}function ub(i){return xp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class r2{constructor(e,n){this.field=e,this.transform=n}}function i2(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof Su&&o instanceof Su||s instanceof wu&&o instanceof wu?Go(s.elements,o.elements,Ni):s instanceof kh&&o instanceof kh?Ni(s.Ae,o.Ae):s instanceof bu&&o instanceof bu})(i.transform,e.transform)}class s2{constructor(e,n){this.version=e,this.transformResults=n}}class Qr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Qr}static exists(e){return new Qr(void 0,e)}static updateTime(e){return new Qr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class id{}function cb(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new kp(i.key,Qr.none()):new Mu(i.key,i.data,Qr.none());{const n=i.data,s=yr.empty();let o=new Cn(Kn.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?s.delete(u):s.set(u,d),o=o.add(u)}return new oa(i.key,s,new Or(o.toArray()),Qr.none())}}function a2(i,e,n){i instanceof Mu?(function(o,u,d){const g=o.value.clone(),p=H0(o.fieldTransforms,u,d.transformResults);g.setAll(p),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(i,e,n):i instanceof oa?(function(o,u,d){if(!vh(o.precondition,u))return void u.convertToUnknownDocument(d.version);const g=H0(o.fieldTransforms,u,d.transformResults),p=u.data;p.setAll(hb(o)),p.setAll(g),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(i,e,n):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function fu(i,e,n,s){return i instanceof Mu?(function(u,d,g,p){if(!vh(u.precondition,d))return g;const m=u.value.clone(),v=G0(u.fieldTransforms,p,d);return m.setAll(v),d.convertToFoundDocument(d.version,m).setHasLocalMutations(),null})(i,e,n,s):i instanceof oa?(function(u,d,g,p){if(!vh(u.precondition,d))return g;const m=G0(u.fieldTransforms,p,d),v=d.data;return v.setAll(hb(u)),v.setAll(m),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(i,e,n,s):(function(u,d,g){return vh(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g})(i,e,n)}function o2(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=ab(s.transform,o||null);u!=null&&(n===null&&(n=yr.empty()),n.set(s.field,u))}return n||null}function F0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Go(s,o,((u,d)=>i2(u,d)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Mu extends id{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class oa extends id{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function hb(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function H0(i,e,n){const s=new Map;Nt(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const u=i[o],d=u.transform,g=e.data.field(u.field);s.set(u.field,n2(d,g,n[o]))}return s}function G0(i,e,n){const s=new Map;for(const o of i){const u=o.transform,d=n.data.field(o.field);s.set(o.field,t2(u,d,e))}return s}class kp extends id{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class l2 extends id{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class u2{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&a2(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=fu(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=fu(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=ib();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let g=this.applyToLocalView(d,u.mutatedFields);g=n.has(o.key)?null:g;const p=cb(d,g);p!==null&&s.set(o.key,p),d.isValidDocument()||d.convertToNoDocument($e.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ft())}isEqual(e){return this.batchId===e.batchId&&Go(this.mutations,e.mutations,((n,s)=>F0(n,s)))&&Go(this.baseMutations,e.baseMutations,((n,s)=>F0(n,s)))}}class Vp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Nt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return $I})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,s[d].version);return new Vp(e,n,s,o)}}class c2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class h2{constructor(e,n){this.count=e,this.unchangedNames=n}}var Tn,vt;function d2(i){switch(i){case ee.OK:return Ge(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Ge(15467,{code:i})}}function db(i){if(i===void 0)return rs("GRPC error has no .code"),ee.UNKNOWN;switch(i){case Tn.OK:return ee.OK;case Tn.CANCELLED:return ee.CANCELLED;case Tn.UNKNOWN:return ee.UNKNOWN;case Tn.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Tn.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Tn.INTERNAL:return ee.INTERNAL;case Tn.UNAVAILABLE:return ee.UNAVAILABLE;case Tn.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Tn.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Tn.NOT_FOUND:return ee.NOT_FOUND;case Tn.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Tn.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Tn.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Tn.ABORTED:return ee.ABORTED;case Tn.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Tn.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Tn.DATA_LOSS:return ee.DATA_LOSS;default:return Ge(39323,{code:i})}}(vt=Tn||(Tn={}))[vt.OK=0]="OK",vt[vt.CANCELLED=1]="CANCELLED",vt[vt.UNKNOWN=2]="UNKNOWN",vt[vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vt[vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vt[vt.NOT_FOUND=5]="NOT_FOUND",vt[vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",vt[vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",vt[vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",vt[vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vt[vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vt[vt.ABORTED=10]="ABORTED",vt[vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",vt[vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",vt[vt.INTERNAL=13]="INTERNAL",vt[vt.UNAVAILABLE=14]="UNAVAILABLE",vt[vt.DATA_LOSS=15]="DATA_LOSS";function f2(){return new TextEncoder}const m2=new Xs([4294967295,4294967295],0);function K0(i){const e=f2().encode(i),n=new CT;return n.update(e),new Uint8Array(n.digest())}function Q0(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Xs([n,s],0),new Xs([o,u],0)]}class Pp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new au(`Invalid padding: ${n}`);if(s<0)throw new au(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new au(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new au(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Xs.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(Xs.fromNumber(s)));return o.compare(m2)===1&&(o=new Xs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=K0(e),[s,o]=Q0(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(s,o,u);if(!this.we(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new Pp(u,o,n);return s.forEach((g=>d.insert(g))),d}insert(e){if(this.ge===0)return;const n=K0(e),[s,o]=Q0(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(s,o,u);this.Se(d)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class au extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class sd{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Ou.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new sd($e.min(),o,new nn(dt),is(),ft())}}class Ou{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Ou(s,n,ft(),ft(),ft())}}class _h{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class fb{constructor(e,n){this.targetId=e,this.Ce=n}}class mb{constructor(e,n,s=Qn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class Y0{constructor(){this.ve=0,this.Fe=X0(),this.Me=Qn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ft(),n=ft(),s=ft();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ge(38017,{changeType:u})}})),new Ou(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=X0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Nt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class p2{constructor(e){this.Ge=e,this.ze=new Map,this.je=is(),this.Je=oh(),this.He=oh(),this.Ye=new nn(dt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ge(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Qm(u))if(s===0){const d=new Ue(u.path);this.et(n,d,tr.newNoDocument(d,$e.min()))}else Nt(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const g=this.ut(e),p=g?this.ct(g,e,d):1;if(p!==0){this.it(n);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,m)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let d,g;try{d=ea(s).toUint8Array()}catch(p){if(p instanceof jT)return Ho("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new Pp(d,o,u)}catch(p){return Ho(p instanceof au?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.ge===0?null:g}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const g=this.ot(d);if(g){if(u.current&&Qm(g.target)){const p=new Ue(g.target.path);this.It(p).has(d)||this.Et(d,p)||this.et(d,p,tr.newNoDocument(p,e))}u.Be&&(n.set(d,u.ke()),u.qe())}}));let s=ft();this.He.forEach(((u,d)=>{let g=!0;d.forEachWhile((p=>{const m=this.ot(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(s=s.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const o=new sd(e,n,this.Ye,this.je,s);return this.je=is(),this.Je=oh(),this.He=oh(),this.Ye=new nn(dt),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Y0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Cn(dt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Cn(dt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ae("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Y0),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function oh(){return new nn(Ue.comparator)}function X0(){return new nn(Ue.comparator)}const g2={asc:"ASCENDING",desc:"DESCENDING"},y2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},v2={and:"AND",or:"OR"};class _2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Xm(i,e){return i.useProto3Json||Wh(e)?e:{value:e}}function Vh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pb(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function E2(i,e){return Vh(i,e.toTimestamp())}function Ri(i){return Nt(!!i,49232),$e.fromTimestamp((function(n){const s=Zs(n);return new It(s.seconds,s.nanos)})(i))}function Lp(i,e){return $m(i,e).canonicalString()}function $m(i,e){const n=(function(o){return new Gt(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function gb(i){const e=Gt.fromString(i);return Nt(Tb(e),10190,{key:e.toString()}),e}function Jm(i,e){return Lp(i.databaseId,e.path)}function Rm(i,e){const n=gb(e);if(n.get(1)!==i.databaseId.projectId)throw new Ee(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Ee(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Ue(vb(n))}function yb(i,e){return Lp(i.databaseId,e)}function T2(i){const e=gb(i);return e.length===4?Gt.emptyPath():vb(e)}function Wm(i){return new Gt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function vb(i){return Nt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function $0(i,e,n){return{name:Jm(i,e),fields:n.value.mapValue.fields}}function b2(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ge(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(m,v){return m.useProto3Json?(Nt(v===void 0||typeof v=="string",58123),Qn.fromBase64String(v||"")):(Nt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Qn.fromUint8Array(v||new Uint8Array))})(i,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&(function(m){const v=m.code===void 0?ee.UNKNOWN:db(m.code);return new Ee(v,m.message||"")})(d);n=new mb(s,o,u,g||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Rm(i,s.document.name),u=Ri(s.document.updateTime),d=s.document.createTime?Ri(s.document.createTime):$e.min(),g=new yr({mapValue:{fields:s.document.fields}}),p=tr.newFoundDocument(o,u,d,g),m=s.targetIds||[],v=s.removedTargetIds||[];n=new _h(m,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Rm(i,s.document),u=s.readTime?Ri(s.readTime):$e.min(),d=tr.newNoDocument(o,u),g=s.removedTargetIds||[];n=new _h([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Rm(i,s.document),u=s.removedTargetIds||[];n=new _h([],u,o,null)}else{if(!("filter"in e))return Ge(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,d=new h2(o,u),g=s.targetId;n=new fb(g,d)}}return n}function S2(i,e){let n;if(e instanceof Mu)n={update:$0(i,e.key,e.value)};else if(e instanceof kp)n={delete:Jm(i,e.key)};else if(e instanceof oa)n={update:$0(i,e.key,e.data),updateMask:M2(e.fieldMask)};else{if(!(e instanceof l2))return Ge(16599,{Vt:e.type});n={verify:Jm(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,d){const g=d.transform;if(g instanceof bu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Su)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof wu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof kh)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw Ge(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:E2(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ge(27497)})(i,e.precondition)),n}function w2(i,e){return i&&i.length>0?(Nt(e!==void 0,14353),i.map((n=>(function(o,u){let d=o.updateTime?Ri(o.updateTime):Ri(u);return d.isEqual($e.min())&&(d=Ri(u)),new s2(d,o.transformResults||[])})(n,e)))):[]}function A2(i,e){return{documents:[yb(i,e.path)]}}function R2(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=yb(i,o);const u=(function(m){if(m.length!==0)return Eb(ai.create(m,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(m){if(m.length!==0)return m.map((v=>(function(S){return{field:Vo(S.field),direction:N2(S.dir)}})(v)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const g=Xm(i,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:n,parent:o}}function C2(i){let e=T2(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Nt(s===1,65062);const v=n.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let u=[];n.where&&(u=(function(T){const S=_b(T);return S instanceof ai&&XT(S)?S.getFilters():[S]})(n.where));let d=[];n.orderBy&&(d=(function(T){return T.map((S=>(function(L){return new Tu(Po(L.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(S)))})(n.orderBy));let g=null;n.limit&&(g=(function(T){let S;return S=typeof T=="object"?T.value:T,Wh(S)?null:S})(n.limit));let p=null;n.startAt&&(p=(function(T){const S=!!T.before,A=T.values||[];return new Mh(A,S)})(n.startAt));let m=null;return n.endAt&&(m=(function(T){const S=!T.before,A=T.values||[];return new Mh(A,S)})(n.endAt)),GI(e,o,d,u,g,"F",p,m)}function I2(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ge(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function _b(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Po(n.unaryFilter.field);return bn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Po(n.unaryFilter.field);return bn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Po(n.unaryFilter.field);return bn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Po(n.unaryFilter.field);return bn.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ge(61313);default:return Ge(60726)}})(i):i.fieldFilter!==void 0?(function(n){return bn.create(Po(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ge(58110);default:return Ge(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return ai.create(n.compositeFilter.filters.map((s=>_b(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ge(1026)}})(n.compositeFilter.op))})(i):Ge(30097,{filter:i})}function N2(i){return g2[i]}function x2(i){return y2[i]}function D2(i){return v2[i]}function Vo(i){return{fieldPath:i.canonicalString()}}function Po(i){return Kn.fromServerFormat(i.fieldPath)}function Eb(i){return i instanceof bn?(function(n){if(n.op==="=="){if(L0(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NAN"}};if(P0(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(L0(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NOT_NAN"}};if(P0(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vo(n.field),op:x2(n.op),value:n.value}}})(i):i instanceof ai?(function(n){const s=n.getFilters().map((o=>Eb(o)));return s.length===1?s[0]:{compositeFilter:{op:D2(n.op),filters:s}}})(i):Ge(54877,{filter:i})}function M2(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Tb(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class Hs{constructor(e,n,s,o,u=$e.min(),d=$e.min(),g=Qn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(e){return new Hs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class O2{constructor(e){this.yt=e}}function k2(i){const e=C2({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Oh(e,e.limit,"L"):e}class V2{constructor(){this.Cn=new P2}addToCollectionParentIndex(e,n){return this.Cn.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(Ws.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(Ws.min())}updateCollectionGroup(e,n,s){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class P2{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Cn(Gt.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Cn(Gt.comparator)).toArray()}}const J0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bb=41943040;class gr{static withCacheSize(e){return new gr(e,gr.DEFAULT_COLLECTION_PERCENTILE,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}gr.DEFAULT_COLLECTION_PERCENTILE=10,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gr.DEFAULT=new gr(bb,gr.DEFAULT_COLLECTION_PERCENTILE,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gr.DISABLED=new gr(-1,0,0);class Yo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Yo(0)}static cr(){return new Yo(-1)}}const W0="LruGarbageCollector",L2=1048576;function Z0([i,e],[n,s]){const o=dt(i,n);return o===0?dt(e,s):o}class U2{constructor(e){this.Ir=e,this.buffer=new Cn(Z0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Z0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class j2{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ae(W0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){el(n)?Ae(W0,"Ignoring IndexedDB error during garbage collection: ",n):await Zo(n)}await this.Vr(3e5)}))}}class z2{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return se.resolve(Jh.ce);const s=new U2(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(J0)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),J0):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,d,g,p,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,d=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,g=Date.now(),this.removeTargets(e,s,n)))).next((T=>(u=T,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(m=Date.now(),Oo()<=ht.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-v}ms
	Determined least recently used ${o} in `+(g-d)+`ms
	Removed ${u} targets in `+(p-g)+`ms
	Removed ${T} documents in `+(m-p)+`ms
Total Duration: ${m-v}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function B2(i,e){return new z2(i,e)}class q2{constructor(){this.changes=new Ga((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?se.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class F2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class H2{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&fu(s.mutation,o,Or.empty(),It.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,ft()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=ft()){const o=Oa();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let d=su();return u.forEach(((g,p)=>{d=d.insert(g,p.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const s=Oa();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,ft())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,g)=>{n.set(d,g)}))}))}computeViews(e,n,s,o){let u=is();const d=du(),g=(function(){return du()})();return n.forEach(((p,m)=>{const v=s.get(m.key);o.has(m.key)&&(v===void 0||v.mutation instanceof oa)?u=u.insert(m.key,m):v!==void 0?(d.set(m.key,v.mutation.getFieldMask()),fu(v.mutation,m,v.mutation.getFieldMask(),It.now())):d.set(m.key,Or.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((m,v)=>d.set(m,v))),n.forEach(((m,v)=>g.set(m,new F2(v,d.get(m)??null)))),g)))}recalculateAndSaveOverlays(e,n){const s=du();let o=new nn(((d,g)=>d-g)),u=ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const g of d)g.keys().forEach((p=>{const m=n.get(p);if(m===null)return;let v=s.get(p)||Or.empty();v=g.applyToLocalView(m,v),s.set(p,v);const T=(o.get(g.batchId)||ft()).add(p);o=o.insert(g.batchId,T)}))})).next((()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),m=p.key,v=p.value,T=ib();v.forEach((S=>{if(!u.has(S)){const A=cb(n.get(S),s.get(S));A!==null&&T.set(S,A),u=u.add(S)}})),d.push(this.documentOverlayCache.saveOverlays(e,m,T))}return se.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(d){return Ue.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ZT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):se.resolve(Oa());let g=yu,p=u;return d.next((m=>se.forEach(m,((v,T)=>(g<T.largestBatchId&&(g=T.largestBatchId),u.get(v)?se.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{p=p.insert(v,S)}))))).next((()=>this.populateOverlays(e,m,u))).next((()=>this.computeViews(e,p,m,ft()))).next((v=>({batchId:g,changes:rb(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ue(n)).next((s=>{let o=su();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let d=su();return this.indexManager.getCollectionParents(e,u).next((g=>se.forEach(g,(p=>{const m=(function(T,S){return new tl(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,m,s,o).next((v=>{v.forEach(((T,S)=>{d=d.insert(T,S)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((d=>{u.forEach(((p,m)=>{const v=m.getKey();d.get(v)===null&&(d=d.insert(v,tr.newInvalidDocument(v)))}));let g=su();return d.forEach(((p,m)=>{const v=u.get(p);v!==void 0&&fu(v.mutation,m,Or.empty(),It.now()),nd(n,m)&&(g=g.insert(p,m))})),g}))}}class G2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return se.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Ri(o.createTime)}})(n)),se.resolve()}getNamedQuery(e,n){return se.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:k2(o.bundledQuery),readTime:Ri(o.readTime)}})(n)),se.resolve()}}class K2{constructor(){this.overlays=new nn(Ue.comparator),this.qr=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Oa();return se.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),se.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),se.resolve()}getOverlaysForCollection(e,n,s){const o=Oa(),u=n.length+1,d=new Ue(n.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const p=g.getNext().value,m=p.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return se.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new nn(((m,v)=>m-v));const d=this.overlays.getIterator();for(;d.hasNext();){const m=d.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>s){let v=u.get(m.largestBatchId);v===null&&(v=Oa(),u=u.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const g=Oa(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((m,v)=>g.set(m,v))),!(g.size()>=o)););return se.resolve(g)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new c2(n,s));let u=this.qr.get(n);u===void 0&&(u=ft(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}class Q2{constructor(){this.sessionToken=Qn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,se.resolve()}}class Up{constructor(){this.Qr=new Cn(On.$r),this.Ur=new Cn(On.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new On(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new On(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new Ue(new Gt([])),s=new On(n,e),o=new On(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(d=>{this.Gr(d),u.push(d.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ue(new Gt([])),s=new On(n,e),o=new On(n,e+1);let u=ft();return this.Ur.forEachInRange([s,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new On(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class On{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ue.comparator(e.key,n.key)||dt(e.Yr,n.Yr)}static Kr(e,n){return dt(e.Yr,n.Yr)||Ue.comparator(e.key,n.key)}}class Y2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Cn(On.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new u2(u,n,s,o);this.mutationQueue.push(d);for(const g of o)this.Zr=this.Zr.add(new On(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return se.resolve(d)}lookupMutationBatch(e,n){return se.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return se.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?Ip:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new On(n,0),o=new On(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(d=>{const g=this.Xr(d.Yr);u.push(g)})),se.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Cn(dt);return n.forEach((o=>{const u=new On(o,0),d=new On(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,d],(g=>{s=s.add(g.Yr)}))})),se.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;Ue.isDocumentKey(u)||(u=u.child(""));const d=new On(new Ue(u),0);let g=new Cn(dt);return this.Zr.forEachWhile((p=>{const m=p.key.path;return!!s.isPrefixOf(m)&&(m.length===o&&(g=g.add(p.Yr)),!0)}),d),se.resolve(this.ti(g))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Nt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return se.forEach(n.mutations,(o=>{const u=new On(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new On(n,0),o=this.Zr.firstAfterOrEqual(s);return se.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class X2{constructor(e){this.ri=e,this.docs=(function(){return new nn(Ue.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return se.resolve(s?s.document.mutableCopy():tr.newInvalidDocument(n))}getEntries(e,n){let s=is();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():tr.newInvalidDocument(o))})),se.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=is();const d=n.path,g=new Ue(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:m,value:{document:v}}=p.getNext();if(!d.isPrefixOf(m.path))break;m.path.length>d.length+1||SI(bI(v),s)<=0||(o.has(v.key)||nd(n,v))&&(u=u.insert(v.key,v.mutableCopy()))}return se.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Ge(9500)}ii(e,n){return se.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new $2(this)}getSize(e){return se.resolve(this.size)}}class $2 extends q2{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),se.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class J2{constructor(e){this.persistence=e,this.si=new Ga((n=>Dp(n)),Mp),this.lastRemoteSnapshotVersion=$e.min(),this.highestTargetId=0,this.oi=0,this._i=new Up,this.targetCount=0,this.ai=Yo.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),se.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Yo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.Pr(n),se.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((d,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.si.delete(d),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),se.waitFor(u).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return se.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),se.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),se.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),se.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return se.resolve(s)}containsKey(e,n){return se.resolve(this._i.containsKey(n))}}class Sb{constructor(e,n){this.ui={},this.overlays={},this.ci=new Jh(0),this.li=!1,this.li=!0,this.hi=new Q2,this.referenceDelegate=e(this),this.Pi=new J2(this),this.indexManager=new V2,this.remoteDocumentCache=(function(o){return new X2(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new O2(n),this.Ii=new G2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new K2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new Y2(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){Ae("MemoryPersistence","Starting transaction:",e);const o=new W2(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return se.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class W2 extends AI{constructor(e){super(),this.currentSequenceNumber=e}}class jp{constructor(e){this.persistence=e,this.Ri=new Up,this.Vi=null}static mi(e){return new jp(e)}get fi(){if(this.Vi)return this.Vi;throw Ge(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),se.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),se.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(s=>{const o=Ue.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,$e.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return se.or([()=>se.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Ph{constructor(e,n){this.persistence=e,this.pi=new Ga((s=>II(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=B2(this,n)}static mi(e,n){return new Ph(e,n)}Ei(){}di(e){return se.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return se.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?se.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,n).next((g=>{g||(s++,u.removeEntry(d,$e.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),se.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=gh(e.data.value)),n}br(e,n,s){return se.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return se.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class zp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=ft(),o=ft();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new zp(e,n.fromCache,s,o)}}class Z2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class eN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return ww()?8:RI(nr())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new Z2;return this.Ss(e,n,d).next((g=>{if(u.result=g,this.Vs)return this.bs(e,n,d,g.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(Oo()<=ht.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",ko(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(Oo()<=ht.DEBUG&&Ae("QueryEngine","Query:",ko(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Oo()<=ht.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",ko(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ai(n))):se.resolve())}ys(e,n){if(B0(n))return se.resolve(null);let s=Ai(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Oh(n,null,"F"),s=Ai(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const d=ft(...u);return this.ps.getDocuments(e,d).next((g=>this.indexManager.getMinOffset(e,s).next((p=>{const m=this.Ds(n,g);return this.Cs(n,m,d,p.readTime)?this.ys(e,Oh(n,null,"F")):this.vs(e,m,n,p)}))))})))))}ws(e,n,s,o){return B0(n)||o.isEqual($e.min())?se.resolve(null):this.ps.getDocuments(e,s).next((u=>{const d=this.Ds(n,u);return this.Cs(n,d,s,o)?se.resolve(null):(Oo()<=ht.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ko(n)),this.vs(e,d,n,TI(o,yu)).next((g=>g)))}))}Ds(e,n){let s=new Cn(tb(e));return n.forEach(((o,u)=>{nd(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return Oo()<=ht.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",ko(n)),this.ps.getDocumentsMatchingQuery(e,n,Ws.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const Bp="LocalStore",tN=3e8;class nN{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new nn(dt),this.xs=new Ga((u=>Dp(u)),Mp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new H2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function rN(i,e,n,s){return new nN(i,e,n,s)}async function wb(i,e){const n=We(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const d=[],g=[];let p=ft();for(const m of o){d.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}for(const m of u){g.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}return n.localDocuments.getDocuments(s,p).next((m=>({Ls:m,removedBatchIds:d,addedBatchIds:g})))}))}))}function iN(i,e){const n=We(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,p,m,v){const T=m.batch,S=T.keys();let A=se.resolve();return S.forEach((L=>{A=A.next((()=>v.getEntry(p,L))).next((G=>{const z=m.docVersions.get(L);Nt(z!==null,48541),G.version.compareTo(z)<0&&(T.applyToRemoteDocument(G,m),G.isValidDocument()&&(G.setReadTime(m.commitVersion),v.addEntry(G)))}))})),A.next((()=>g.mutationQueue.removeMutationBatch(p,T)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(g){let p=ft();for(let m=0;m<g.mutationResults.length;++m)g.mutationResults[m].transformResults.length>0&&(p=p.add(g.batch.mutations[m].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function Ab(i){const e=We(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function sN(i,e){const n=We(i),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const g=[];e.targetChanges.forEach(((v,T)=>{const S=o.get(T);if(!S)return;g.push(n.Pi.removeMatchingKeys(u,v.removedDocuments,T).next((()=>n.Pi.addMatchingKeys(u,v.addedDocuments,T))));let A=S.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?A=A.withResumeToken(Qn.EMPTY_BYTE_STRING,$e.min()).withLastLimboFreeSnapshotVersion($e.min()):v.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(v.resumeToken,s)),o=o.insert(T,A),(function(G,z,fe){return G.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=tN?!0:fe.addedDocuments.size+fe.modifiedDocuments.size+fe.removedDocuments.size>0})(S,A,v)&&g.push(n.Pi.updateTargetData(u,A))}));let p=is(),m=ft();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,v))})),g.push(aN(u,d,e.documentUpdates).next((v=>{p=v.ks,m=v.qs}))),!s.isEqual($e.min())){const v=n.Pi.getLastRemoteSnapshotVersion(u).next((T=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));g.push(v)}return se.waitFor(g).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,m))).next((()=>p))})).then((u=>(n.Ms=o,u)))}function aN(i,e,n){let s=ft(),o=ft();return n.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let d=is();return n.forEach(((g,p)=>{const m=u.get(g);p.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(g)),p.isNoDocument()&&p.version.isEqual($e.min())?(e.removeEntry(g,p.readTime),d=d.insert(g,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),d=d.insert(g,p)):Ae(Bp,"Ignoring outdated watch update for ",g,". Current version:",m.version," Watch version:",p.version)})),{ks:d,qs:o}}))}function oN(i,e){const n=We(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Ip),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function lN(i,e){const n=We(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,se.resolve(o)):n.Pi.allocateTargetId(s).next((d=>(o=new Hs(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Zm(i,e,n){const s=We(i),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!el(d))throw d;Ae(Bp,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function eE(i,e,n){const s=We(i);let o=$e.min(),u=ft();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(p,m,v){const T=We(p),S=T.xs.get(v);return S!==void 0?se.resolve(T.Ms.get(S)):T.Pi.getTargetData(m,v)})(s,d,Ai(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,g.targetId).next((p=>{u=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,n?o:$e.min(),n?u:ft()))).next((g=>(uN(s,QI(e),g),{documents:g,Qs:u})))))}function uN(i,e,n){let s=i.Os.get(e)||$e.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Os.set(e,s)}class tE{constructor(){this.activeTargetIds=ZI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cN{constructor(){this.Mo=new tE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new tE,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class hN{Oo(e){}shutdown(){}}const nE="ConnectivityMonitor";class rE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ae(nE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ae(nE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let lh=null;function ep(){return lh===null?lh=(function(){return 268435456+Math.round(2147483648*Math.random())})():lh++,"0x"+lh.toString(16)}const Cm="RestConnection",dN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===xh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const d=ep(),g=this.zo(e,n.toUriEncodedString());Ae(Cm,`Sending RPC '${e}' ${d}:`,g,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:m}=new URL(g),v=ia(m);return this.Jo(e,g,p,s,v).then((T=>(Ae(Cm,`Received RPC '${e}' ${d}: `,T),T)),(T=>{throw Ho(Cm,`RPC '${e}' ${d} failed with error: `,T,"url: ",g,"request:",s),T}))}Ho(e,n,s,o,u,d){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Wo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=dN[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class mN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Wn="WebChannelConnection";class pN extends fN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const d=ep();return new Promise(((g,p)=>{const m=new IT;m.setWithCredentials(!0),m.listenOnce(NT.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case ph.NO_ERROR:const T=m.getResponseJson();Ae(Wn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(T)),g(T);break;case ph.TIMEOUT:Ae(Wn,`RPC '${e}' ${d} timed out`),p(new Ee(ee.DEADLINE_EXCEEDED,"Request time out"));break;case ph.HTTP_ERROR:const S=m.getStatus();if(Ae(Wn,`RPC '${e}' ${d} failed with status:`,S,"response text:",m.getResponseText()),S>0){let A=m.getResponseJson();Array.isArray(A)&&(A=A[0]);const L=A?.error;if(L&&L.status&&L.message){const G=(function(fe){const ce=fe.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(ce)>=0?ce:ee.UNKNOWN})(L.status);p(new Ee(G,L.message))}else p(new Ee(ee.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new Ee(ee.UNAVAILABLE,"Connection failed."));break;default:Ge(9055,{l_:e,streamId:d,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{Ae(Wn,`RPC '${e}' ${d} completed.`)}}));const v=JSON.stringify(o);Ae(Wn,`RPC '${e}' ${d} sending request:`,o),m.send(n,"POST",v,s,15)}))}T_(e,n,s){const o=ep(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=MT(),g=DT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const v=u.join("");Ae(Wn,`Creating RPC '${e}' stream ${o}: ${v}`,p);const T=d.createWebChannel(v,p);this.I_(T);let S=!1,A=!1;const L=new mN({Yo:z=>{A?Ae(Wn,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(S||(Ae(Wn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),Ae(Wn,`RPC '${e}' stream ${o} sending:`,z),T.send(z))},Zo:()=>T.close()}),G=(z,fe,ce)=>{z.listen(fe,(ne=>{try{ce(ne)}catch(ye){setTimeout((()=>{throw ye}),0)}}))};return G(T,iu.EventType.OPEN,(()=>{A||(Ae(Wn,`RPC '${e}' stream ${o} transport opened.`),L.o_())})),G(T,iu.EventType.CLOSE,(()=>{A||(A=!0,Ae(Wn,`RPC '${e}' stream ${o} transport closed`),L.a_(),this.E_(T))})),G(T,iu.EventType.ERROR,(z=>{A||(A=!0,Ho(Wn,`RPC '${e}' stream ${o} transport errored. Name:`,z.name,"Message:",z.message),L.a_(new Ee(ee.UNAVAILABLE,"The operation could not be completed")))})),G(T,iu.EventType.MESSAGE,(z=>{if(!A){const fe=z.data[0];Nt(!!fe,16349);const ce=fe,ne=ce?.error||ce[0]?.error;if(ne){Ae(Wn,`RPC '${e}' stream ${o} received error:`,ne);const ye=ne.status;let je=(function(C){const N=Tn[C];if(N!==void 0)return db(N)})(ye),xe=ne.message;je===void 0&&(je=ee.INTERNAL,xe="Unknown error status: "+ye+" with message "+ne.message),A=!0,L.a_(new Ee(je,xe)),T.close()}else Ae(Wn,`RPC '${e}' stream ${o} received:`,fe),L.u_(fe)}})),G(g,xT.STAT_EVENT,(z=>{z.stat===qm.PROXY?Ae(Wn,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===qm.NOPROXY&&Ae(Wn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{L.__()}),0),L}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Im(){return typeof document<"u"?document:null}function ad(i){return new _2(i,!0)}class Rb{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&Ae("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const iE="PersistentStream";class Cb{constructor(e,n,s,o,u,d,g,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Rb(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ee.RESOURCE_EXHAUSTED?(rs(n.toString()),rs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new Ee(ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ae(iE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Ae(iE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class gN extends Cb{constructor(e,n,s,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=b2(this.serializer,e),s=(function(u){if(!("targetChange"in u))return $e.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?$e.min():d.readTime?Ri(d.readTime):$e.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Wm(this.serializer),n.addTarget=(function(u,d){let g;const p=d.target;if(g=Qm(p)?{documents:A2(u,p)}:{query:R2(u,p).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=pb(u,d.resumeToken);const m=Xm(u,d.expectedCount);m!==null&&(g.expectedCount=m)}else if(d.snapshotVersion.compareTo($e.min())>0){g.readTime=Vh(u,d.snapshotVersion.toTimestamp());const m=Xm(u,d.expectedCount);m!==null&&(g.expectedCount=m)}return g})(this.serializer,e);const s=I2(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Wm(this.serializer),n.removeTarget=e,this.q_(n)}}class yN extends Cb{constructor(e,n,s,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=w2(e.writeResults,e.commitTime),s=Ri(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Wm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>S2(this.serializer,s)))};this.q_(n)}}class vN{}class _N extends vN{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Ee(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Go(e,$m(n,s),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ee(ee.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,g])=>this.connection.Ho(e,$m(n,s),o,d,g,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Ee(ee.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class EN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(rs(n),this.aa=!1):Ae("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const qa="RemoteStore";class TN{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{Ka(this)&&(Ae(qa,"Restarting streams for network reachability change."),await(async function(p){const m=We(p);m.Ea.add(4),await ku(m),m.Ra.set("Unknown"),m.Ea.delete(4),await od(m)})(this))}))})),this.Ra=new EN(s,o)}}async function od(i){if(Ka(i))for(const e of i.da)await e(!0)}async function ku(i){for(const e of i.da)await e(!1)}function Ib(i,e){const n=We(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Gp(n)?Hp(n):nl(n).O_()&&Fp(n,e))}function qp(i,e){const n=We(i),s=nl(n);n.Ia.delete(e),s.O_()&&Nb(n,e),n.Ia.size===0&&(s.O_()?s.L_():Ka(n)&&n.Ra.set("Unknown"))}function Fp(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($e.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}nl(i).Y_(e)}function Nb(i,e){i.Va.Ue(e),nl(i).Z_(e)}function Hp(i){i.Va=new p2({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),nl(i).start(),i.Ra.ua()}function Gp(i){return Ka(i)&&!nl(i).x_()&&i.Ia.size>0}function Ka(i){return We(i).Ea.size===0}function xb(i){i.Va=void 0}async function bN(i){i.Ra.set("Online")}async function SN(i){i.Ia.forEach(((e,n)=>{Fp(i,e)}))}async function wN(i,e){xb(i),Gp(i)?(i.Ra.ha(e),Hp(i)):i.Ra.set("Unknown")}async function AN(i,e,n){if(i.Ra.set("Online"),e instanceof mb&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const g of u.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,d),o.Ia.delete(g),o.Va.removeTarget(g))})(i,e)}catch(s){Ae(qa,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Lh(i,s)}else if(e instanceof _h?i.Va.Ze(e):e instanceof fb?i.Va.st(e):i.Va.tt(e),!n.isEqual($e.min()))try{const s=await Ab(i.localStore);n.compareTo(s)>=0&&await(function(u,d){const g=u.Va.Tt(d);return g.targetChanges.forEach(((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const v=u.Ia.get(m);v&&u.Ia.set(m,v.withResumeToken(p.resumeToken,d))}})),g.targetMismatches.forEach(((p,m)=>{const v=u.Ia.get(p);if(!v)return;u.Ia.set(p,v.withResumeToken(Qn.EMPTY_BYTE_STRING,v.snapshotVersion)),Nb(u,p);const T=new Hs(v.target,p,m,v.sequenceNumber);Fp(u,T)})),u.remoteSyncer.applyRemoteEvent(g)})(i,n)}catch(s){Ae(qa,"Failed to raise snapshot:",s),await Lh(i,s)}}async function Lh(i,e,n){if(!el(e))throw e;i.Ea.add(1),await ku(i),i.Ra.set("Offline"),n||(n=()=>Ab(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Ae(qa,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await od(i)}))}function Db(i,e){return e().catch((n=>Lh(i,n,e)))}async function ld(i){const e=We(i),n=na(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ip;for(;RN(e);)try{const o=await oN(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,CN(e,o)}catch(o){await Lh(e,o)}Mb(e)&&Ob(e)}function RN(i){return Ka(i)&&i.Ta.length<10}function CN(i,e){i.Ta.push(e);const n=na(i);n.O_()&&n.X_&&n.ea(e.mutations)}function Mb(i){return Ka(i)&&!na(i).x_()&&i.Ta.length>0}function Ob(i){na(i).start()}async function IN(i){na(i).ra()}async function NN(i){const e=na(i);for(const n of i.Ta)e.ea(n.mutations)}async function xN(i,e,n){const s=i.Ta.shift(),o=Vp.from(s,e,n);await Db(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await ld(i)}async function DN(i,e){e&&na(i).X_&&await(async function(s,o){if((function(d){return d2(d)&&d!==ee.ABORTED})(o.code)){const u=s.Ta.shift();na(s).B_(),await Db(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await ld(s)}})(i,e),Mb(i)&&Ob(i)}async function sE(i,e){const n=We(i);n.asyncQueue.verifyOperationInProgress(),Ae(qa,"RemoteStore received new credentials");const s=Ka(n);n.Ea.add(3),await ku(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await od(n)}async function MN(i,e){const n=We(i);e?(n.Ea.delete(2),await od(n)):e||(n.Ea.add(2),await ku(n),n.Ra.set("Unknown"))}function nl(i){return i.ma||(i.ma=(function(n,s,o){const u=We(n);return u.sa(),new gN(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:bN.bind(null,i),t_:SN.bind(null,i),r_:wN.bind(null,i),H_:AN.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Gp(i)?Hp(i):i.Ra.set("Unknown")):(await i.ma.stop(),xb(i))}))),i.ma}function na(i){return i.fa||(i.fa=(function(n,s,o){const u=We(n);return u.sa(),new yN(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:IN.bind(null,i),r_:DN.bind(null,i),ta:NN.bind(null,i),na:xN.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await ld(i)):(await i.fa.stop(),i.Ta.length>0&&(Ae(qa,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class Kp{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const d=Date.now()+s,g=new Kp(e,n,d,o,u);return g.start(s),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qp(i,e){if(rs("AsyncQueue",`${e}: ${i}`),el(i))return new Ee(ee.UNAVAILABLE,`${e}: ${i}`);throw i}class qo{static emptySet(e){return new qo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Ue.comparator(n.key,s.key):(n,s)=>Ue.comparator(n.key,s.key),this.keyedMap=su(),this.sortedSet=new nn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new qo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class aE{constructor(){this.ga=new nn(Ue.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ge(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Xo{constructor(e,n,s,o,u,d,g,p,m){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,n,s,o,u){const d=[];return n.forEach((g=>{d.push({type:0,doc:g})})),new Xo(e,n,qo.emptySet(n),d,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&td(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class ON{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class kN{constructor(){this.queries=oE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=We(n),u=o.queries;o.queries=oE(),u.forEach(((d,g)=>{for(const p of g.Sa)p.onError(s)}))})(this,new Ee(ee.ABORTED,"Firestore shutting down"))}}function oE(){return new Ga((i=>eb(i)),td)}async function Yp(i,e){const n=We(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new ON,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const g=Qp(d,`Initialization of query '${ko(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&$p(n)}async function Xp(i,e){const n=We(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const d=u.Sa.indexOf(e);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function VN(i,e){const n=We(i);let s=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const g of d.Sa)g.Fa(o)&&(s=!0);d.wa=o}}s&&$p(n)}function PN(i,e,n){const s=We(i),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function $p(i){i.Ca.forEach((e=>{e.next()}))}var tp,lE;(lE=tp||(tp={})).Ma="default",lE.Cache="cache";class Jp{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Xo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Xo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==tp.Cache}}class kb{constructor(e){this.key=e}}class Vb{constructor(e){this.key=e}}class LN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ft(),this.mutatedKeys=ft(),this.eu=tb(e),this.tu=new qo(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new aE,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,g=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,T)=>{const S=o.get(v),A=nd(this.query,T)?T:null,L=!!S&&this.mutatedKeys.has(S.key),G=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let z=!1;S&&A?S.data.isEqual(A.data)?L!==G&&(s.track({type:3,doc:A}),z=!0):this.su(S,A)||(s.track({type:2,doc:A}),z=!0,(p&&this.eu(A,p)>0||m&&this.eu(A,m)<0)&&(g=!0)):!S&&A?(s.track({type:0,doc:A}),z=!0):S&&!A&&(s.track({type:1,doc:S}),z=!0,(p||m)&&(g=!0)),z&&(A?(d=d.add(A),u=G?u.add(v):u.delete(v)):(d=d.delete(v),u=u.delete(v)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const v=this.query.limitType==="F"?d.last():d.first();d=d.delete(v.key),u=u.delete(v.key),s.track({type:1,doc:v})}return{tu:d,iu:s,Cs:g,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((v,T)=>(function(A,L){const G=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ge(20277,{Rt:z})}};return G(A)-G(L)})(v.type,T.type)||this.eu(v.doc,T.doc))),this.ou(s),o=o??!1;const g=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,m=p!==this.Za;return this.Za=p,d.length!==0||m?{snapshot:new Xo(this.query,e.tu,u,d,e.mutatedKeys,p===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new aE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ft(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new Vb(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new kb(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=ft();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Xo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Wp="SyncEngine";class UN{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class jN{constructor(e){this.key=e,this.hu=!1}}class zN{constructor(e,n,s,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Ga((g=>eb(g)),td),this.Iu=new Map,this.Eu=new Set,this.du=new nn(Ue.comparator),this.Au=new Map,this.Ru=new Up,this.Vu={},this.mu=new Map,this.fu=Yo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function BN(i,e,n=!0){const s=Bb(i);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await Pb(s,e,n,!0),o}async function qN(i,e){const n=Bb(i);await Pb(n,e,!0,!1)}async function Pb(i,e,n,s){const o=await lN(i.localStore,Ai(e)),u=o.targetId,d=i.sharedClientState.addLocalQueryTarget(u,n);let g;return s&&(g=await FN(i,e,u,d==="current",o.resumeToken)),i.isPrimaryClient&&n&&Ib(i.remoteStore,o),g}async function FN(i,e,n,s,o){i.pu=(T,S,A)=>(async function(G,z,fe,ce){let ne=z.view.ru(fe);ne.Cs&&(ne=await eE(G.localStore,z.query,!1).then((({documents:x})=>z.view.ru(x,ne))));const ye=ce&&ce.targetChanges.get(z.targetId),je=ce&&ce.targetMismatches.get(z.targetId)!=null,xe=z.view.applyChanges(ne,G.isPrimaryClient,ye,je);return cE(G,z.targetId,xe.au),xe.snapshot})(i,T,S,A);const u=await eE(i.localStore,e,!0),d=new LN(e,u.Qs),g=d.ru(u.documents),p=Ou.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),m=d.applyChanges(g,i.isPrimaryClient,p);cE(i,n,m.au);const v=new UN(e,n,d);return i.Tu.set(e,v),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),m.snapshot}async function HN(i,e,n){const s=We(i),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((d=>!td(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Zm(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&qp(s.remoteStore,o.targetId),np(s,o.targetId)})).catch(Zo)):(np(s,o.targetId),await Zm(s.localStore,o.targetId,!0))}async function GN(i,e){const n=We(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),qp(n.remoteStore,s.targetId))}async function KN(i,e,n){const s=ZN(i);try{const o=await(function(d,g){const p=We(d),m=It.now(),v=g.reduce(((A,L)=>A.add(L.key)),ft());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let L=is(),G=ft();return p.Ns.getEntries(A,v).next((z=>{L=z,L.forEach(((fe,ce)=>{ce.isValidDocument()||(G=G.add(fe))}))})).next((()=>p.localDocuments.getOverlayedDocuments(A,L))).next((z=>{T=z;const fe=[];for(const ce of g){const ne=o2(ce,T.get(ce.key).overlayedDocument);ne!=null&&fe.push(new oa(ce.key,ne,KT(ne.value.mapValue),Qr.exists(!0)))}return p.mutationQueue.addMutationBatch(A,m,fe,g)})).next((z=>{S=z;const fe=z.applyToLocalDocumentSet(T,G);return p.documentOverlayCache.saveOverlays(A,z.batchId,fe)}))})).then((()=>({batchId:S.batchId,changes:rb(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(d,g,p){let m=d.Vu[d.currentUser.toKey()];m||(m=new nn(dt)),m=m.insert(g,p),d.Vu[d.currentUser.toKey()]=m})(s,o.batchId,n),await Vu(s,o.changes),await ld(s.remoteStore)}catch(o){const u=Qp(o,"Failed to persist write");n.reject(u)}}async function Lb(i,e){const n=We(i);try{const s=await sN(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=n.Au.get(u);d&&(Nt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Nt(d.hu,14607):o.removedDocuments.size>0&&(Nt(d.hu,42227),d.hu=!1))})),await Vu(n,s,e)}catch(s){await Zo(s)}}function uE(i,e,n){const s=We(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,d)=>{const g=d.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(d,g){const p=We(d);p.onlineState=g;let m=!1;p.queries.forEach(((v,T)=>{for(const S of T.Sa)S.va(g)&&(m=!0)})),m&&$p(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function QN(i,e,n){const s=We(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let d=new nn(Ue.comparator);d=d.insert(u,tr.newNoDocument(u,$e.min()));const g=ft().add(u),p=new sd($e.min(),new Map,new nn(dt),d,g);await Lb(s,p),s.du=s.du.remove(u),s.Au.delete(e),Zp(s)}else await Zm(s.localStore,e,!1).then((()=>np(s,e,n))).catch(Zo)}async function YN(i,e){const n=We(i),s=e.batch.batchId;try{const o=await iN(n.localStore,e);jb(n,s,null),Ub(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Vu(n,o)}catch(o){await Zo(o)}}async function XN(i,e,n){const s=We(i);try{const o=await(function(d,g){const p=We(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return p.mutationQueue.lookupMutationBatch(m,g).next((T=>(Nt(T!==null,37113),v=T.keys(),p.mutationQueue.removeMutationBatch(m,T)))).next((()=>p.mutationQueue.performConsistencyCheck(m))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(m,v,g))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>p.localDocuments.getDocuments(m,v)))}))})(s.localStore,e);jb(s,e,n),Ub(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Vu(s,o)}catch(o){await Zo(o)}}function Ub(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function jb(i,e,n){const s=We(i);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function np(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||zb(i,s)}))}function zb(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(qp(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),Zp(i))}function cE(i,e,n){for(const s of n)s instanceof kb?(i.Ru.addReference(s.key,e),$N(i,s)):s instanceof Vb?(Ae(Wp,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||zb(i,s.key)):Ge(19791,{wu:s})}function $N(i,e){const n=e.key,s=n.path.canonicalString();i.du.get(n)||i.Eu.has(s)||(Ae(Wp,"New document in limbo: "+n),i.Eu.add(s),Zp(i))}function Zp(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new Ue(Gt.fromString(e)),s=i.fu.next();i.Au.set(s,new jN(n)),i.du=i.du.insert(n,s),Ib(i.remoteStore,new Hs(Ai(ed(n.path)),s,"TargetPurposeLimboResolution",Jh.ce))}}async function Vu(i,e,n){const s=We(i),o=[],u=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((g,p)=>{d.push(s.pu(p,e,n).then((m=>{if((m||n)&&s.isPrimaryClient){const v=m?!m.fromCache:n?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,v?"current":"not-current")}if(m){o.push(m);const v=zp.As(p.targetId,m);u.push(v)}})))})),await Promise.all(d),s.Pu.H_(o),await(async function(p,m){const v=We(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>se.forEach(m,(S=>se.forEach(S.Es,(A=>v.persistence.referenceDelegate.addReference(T,S.targetId,A))).next((()=>se.forEach(S.ds,(A=>v.persistence.referenceDelegate.removeReference(T,S.targetId,A)))))))))}catch(T){if(!el(T))throw T;Ae(Bp,"Failed to update sequence numbers: "+T)}for(const T of m){const S=T.targetId;if(!T.fromCache){const A=v.Ms.get(S),L=A.snapshotVersion,G=A.withLastLimboFreeSnapshotVersion(L);v.Ms=v.Ms.insert(S,G)}}})(s.localStore,u))}async function JN(i,e){const n=We(i);if(!n.currentUser.isEqual(e)){Ae(Wp,"User change. New user:",e.toKey());const s=await wb(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((g=>{g.forEach((p=>{p.reject(new Ee(ee.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Vu(n,s.Ls)}}function WN(i,e){const n=We(i),s=n.Au.get(e);if(s&&s.hu)return ft().add(s.key);{let o=ft();const u=n.Iu.get(e);if(!u)return o;for(const d of u){const g=n.Tu.get(d);o=o.unionWith(g.view.nu)}return o}}function Bb(i){const e=We(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Lb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QN.bind(null,e),e.Pu.H_=VN.bind(null,e.eventManager),e.Pu.yu=PN.bind(null,e.eventManager),e}function ZN(i){const e=We(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=XN.bind(null,e),e}class Uh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ad(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return rN(this.persistence,new eN,e.initialUser,this.serializer)}Cu(e){return new Sb(jp.mi,this.serializer)}Du(e){return new cN}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uh.provider={build:()=>new Uh};class ex extends Uh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Nt(this.persistence.referenceDelegate instanceof Ph,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new j2(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?gr.withCacheSize(this.cacheSizeBytes):gr.DEFAULT;return new Sb((s=>Ph.mi(s,n)),this.serializer)}}class rp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>uE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=JN.bind(null,this.syncEngine),await MN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new kN})()}createDatastore(e){const n=ad(e.databaseInfo.databaseId),s=(function(u){return new pN(u)})(e.databaseInfo);return(function(u,d,g,p){return new _N(u,d,g,p)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,d,g){return new TN(s,o,u,d,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>uE(this.syncEngine,n,0)),(function(){return rE.v()?new rE:new hN})())}createSyncEngine(e,n){return(function(o,u,d,g,p,m,v){const T=new zN(o,u,d,g,p,m);return v&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=We(n);Ae(qa,"RemoteStore shutting down."),s.Ea.add(5),await ku(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}rp.provider={build:()=>new rp};class eg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):rs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const ra="FirestoreClient";class tx{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=Zn.UNAUTHENTICATED,this.clientId=Cp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async d=>{Ae(ra,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(Ae(ra,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Qp(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Nm(i,e){i.asyncQueue.verifyOperationInProgress(),Ae(ra,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await wb(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function hE(i,e){i.asyncQueue.verifyOperationInProgress();const n=await nx(i);Ae(ra,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>sE(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>sE(e.remoteStore,o))),i._onlineComponents=e}async function nx(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ae(ra,"Using user provided OfflineComponentProvider");try{await Nm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Ho("Error using user provided cache. Falling back to memory cache: "+n),await Nm(i,new Uh)}}else Ae(ra,"Using default OfflineComponentProvider"),await Nm(i,new ex(void 0));return i._offlineComponents}async function qb(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ae(ra,"Using user provided OnlineComponentProvider"),await hE(i,i._uninitializedComponentsProvider._online)):(Ae(ra,"Using default OnlineComponentProvider"),await hE(i,new rp))),i._onlineComponents}function rx(i){return qb(i).then((e=>e.syncEngine))}async function jh(i){const e=await qb(i),n=e.eventManager;return n.onListen=BN.bind(null,e.syncEngine),n.onUnlisten=HN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=qN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=GN.bind(null,e.syncEngine),n}function ix(i,e,n={}){const s=new es;return i.asyncQueue.enqueueAndForget((async()=>(function(u,d,g,p,m){const v=new eg({next:S=>{v.Nu(),d.enqueueAndForget((()=>Xp(u,T)));const A=S.docs.has(g);!A&&S.fromCache?m.reject(new Ee(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&S.fromCache&&p&&p.source==="server"?m.reject(new Ee(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),T=new Jp(ed(g.path),v,{includeMetadataChanges:!0,qa:!0});return Yp(u,T)})(await jh(i),i.asyncQueue,e,n,s))),s.promise}function sx(i,e,n={}){const s=new es;return i.asyncQueue.enqueueAndForget((async()=>(function(u,d,g,p,m){const v=new eg({next:S=>{v.Nu(),d.enqueueAndForget((()=>Xp(u,T))),S.fromCache&&p.source==="server"?m.reject(new Ee(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),T=new Jp(g,v,{includeMetadataChanges:!0,qa:!0});return Yp(u,T)})(await jh(i),i.asyncQueue,e,n,s))),s.promise}function Fb(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const dE=new Map;const Hb="firestore.googleapis.com",fE=!0;class mE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Hb,this.ssl=fE}else this.host=e.host,this.ssl=e.ssl??fE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=bb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<L2)throw new Ee(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_I("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Fb(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ee(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ee(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ee(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ud{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new uI;switch(s.type){case"firstParty":return new fI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ee(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=dE.get(n);s&&(Ae("ComponentProvider","Removing Datastore"),dE.delete(n),s.terminate())})(this),Promise.resolve()}}function ax(i,e,n,s={}){i=_r(i,ud);const o=ia(e),u=i._getSettings(),d={...u,emulatorOptions:i._getEmulatorOptions()},g=`${e}:${n}`;o&&(fp(`https://${g}`),mp("Firestore",!0)),u.host!==Hb&&u.host!==g&&Ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:g,ssl:o,emulatorOptions:s};if(!La(p,d)&&(i._setSettings(p),s.mockUserToken)){let m,v;if(typeof s.mockUserToken=="string")m=s.mockUserToken,v=Zn.MOCK_USER;else{m=pw(s.mockUserToken,i._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new Ee(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Zn(T)}i._authCredentials=new cI(new kT(m,v))}}class os{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new os(this.firestore,e,this._query)}}class on{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $s(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new on(this.firestore,e,this._key)}toJSON(){return{type:on._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Du(n,on._jsonSchema))return new on(e,s||null,new Ue(Gt.fromString(n.referencePath)))}}on._jsonSchemaVersion="firestore/documentReference/1.0",on._jsonSchema={type:Sn("string",on._jsonSchemaVersion),referencePath:Sn("string")};class $s extends os{constructor(e,n,s){super(e,n,ed(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new on(this.firestore,null,new Ue(e))}withConverter(e){return new $s(this.firestore,e,this._path)}}function kn(i,e,...n){if(i=Xt(i),VT("collection","path",e),i instanceof ud){const s=Gt.fromString(e,...n);return C0(s),new $s(i,null,s)}{if(!(i instanceof on||i instanceof $s))throw new Ee(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Gt.fromString(e,...n));return C0(s),new $s(i.firestore,null,s)}}function Ct(i,e,...n){if(i=Xt(i),arguments.length===1&&(e=Cp.newId()),VT("doc","path",e),i instanceof ud){const s=Gt.fromString(e,...n);return R0(s),new on(i,null,new Ue(s))}{if(!(i instanceof on||i instanceof $s))throw new Ee(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Gt.fromString(e,...n));return R0(s),new on(i.firestore,i instanceof $s?i.converter:null,new Ue(s))}}const pE="AsyncQueue";class gE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Rb(this,"async_queue_retry"),this._c=()=>{const s=Im();s&&Ae(pE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Im();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Im();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new es;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!el(e))throw e;Ae(pE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,rs("INTERNAL UNHANDLED ERROR: ",yE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Kp.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ge(47125,{Pc:yE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function yE(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}function vE(i){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(i,["next","error","complete"])}class ss extends ud{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new gE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gE(e),this._firestoreClient=void 0,await e}}}function ox(i,e){const n=typeof i=="object"?i:Kh(),s=typeof i=="string"?i:xh,o=Gh(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=PE("firestore");u&&ax(o,...u)}return o}function cd(i){if(i._terminated)throw new Ee(ee.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||lx(i),i._firestoreClient}function lx(i){const e=i._freezeSettings(),n=(function(o,u,d,g){return new DI(o,u,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,Fb(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new tx(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}class Kr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kr(Qn.fromBase64String(e))}catch(n){throw new Ee(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Kr(Qn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Du(e,Kr._jsonSchema))return Kr.fromBase64String(e.bytes)}}Kr._jsonSchemaVersion="firestore/bytes/1.0",Kr._jsonSchema={type:Sn("string",Kr._jsonSchemaVersion),bytes:Sn("string")};class hd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ee(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class dd{constructor(e){this._methodName=e}}class Ci{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ee(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ee(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return dt(this._lat,e._lat)||dt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ci._jsonSchemaVersion}}static fromJSON(e){if(Du(e,Ci._jsonSchema))return new Ci(e.latitude,e.longitude)}}Ci._jsonSchemaVersion="firestore/geoPoint/1.0",Ci._jsonSchema={type:Sn("string",Ci._jsonSchemaVersion),latitude:Sn("number"),longitude:Sn("number")};class Ii{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ii._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Du(e,Ii._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ii(e.vectorValues);throw new Ee(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ii._jsonSchemaVersion="firestore/vectorValue/1.0",Ii._jsonSchema={type:Sn("string",Ii._jsonSchemaVersion),vectorValues:Sn("object")};const ux=/^__.*__$/;class cx{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new oa(e,this.data,this.fieldMask,n,this.fieldTransforms):new Mu(e,this.data,n,this.fieldTransforms)}}class Gb{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new oa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Kb(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ge(40011,{Ac:i})}}class tg{constructor(e,n,s,o,u,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new tg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return zh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Kb(this.Ac)&&ux.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class hx{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||ad(e)}Cc(e,n,s,o=!1){return new tg({Ac:e,methodName:n,Dc:s,path:Kn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fd(i){const e=i._freezeSettings(),n=ad(i._databaseId);return new hx(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Qb(i,e,n,s,o,u={}){const d=i.Cc(u.merge||u.mergeFields?2:0,e,n,o);rg("Data must be an object, but it was:",d,s);const g=Yb(s,d);let p,m;if(u.merge)p=new Or(d.fieldMask),m=d.fieldTransforms;else if(u.mergeFields){const v=[];for(const T of u.mergeFields){const S=ip(e,T,n);if(!d.contains(S))throw new Ee(ee.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);$b(v,S)||v.push(S)}p=new Or(v),m=d.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,m=d.fieldTransforms;return new cx(new yr(g),p,m)}class md extends dd{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof md}}class ng extends dd{_toFieldTransform(e){return new r2(e.path,new bu)}isEqual(e){return e instanceof ng}}function dx(i,e,n,s){const o=i.Cc(1,e,n);rg("Data must be an object, but it was:",o,s);const u=[],d=yr.empty();aa(s,((p,m)=>{const v=ig(e,p,n);m=Xt(m);const T=o.yc(v);if(m instanceof md)u.push(v);else{const S=Pu(m,T);S!=null&&(u.push(v),d.set(v,S))}}));const g=new Or(u);return new Gb(d,g,o.fieldTransforms)}function fx(i,e,n,s,o,u){const d=i.Cc(1,e,n),g=[ip(e,s,n)],p=[o];if(u.length%2!=0)throw new Ee(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<u.length;S+=2)g.push(ip(e,u[S])),p.push(u[S+1]);const m=[],v=yr.empty();for(let S=g.length-1;S>=0;--S)if(!$b(m,g[S])){const A=g[S];let L=p[S];L=Xt(L);const G=d.yc(A);if(L instanceof md)m.push(A);else{const z=Pu(L,G);z!=null&&(m.push(A),v.set(A,z))}}const T=new Or(m);return new Gb(v,T,d.fieldTransforms)}function mx(i,e,n,s=!1){return Pu(n,i.Cc(s?4:3,e))}function Pu(i,e){if(Xb(i=Xt(i)))return rg("Unsupported field value:",e,i),Yb(i,e);if(i instanceof dd)return(function(s,o){if(!Kb(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let d=0;for(const g of s){let p=Pu(g,o.wc(d));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),d++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=Xt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return e2(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=It.fromDate(s);return{timestampValue:Vh(o.serializer,u)}}if(s instanceof It){const u=new It(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Vh(o.serializer,u)}}if(s instanceof Ci)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Kr)return{bytesValue:pb(o.serializer,s._byteString)};if(s instanceof on){const u=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(u))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Lp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Ii)return(function(d,g){return{mapValue:{fields:{[HT]:{stringValue:GT},[Dh]:{arrayValue:{values:d.toArray().map((m=>{if(typeof m!="number")throw g.Sc("VectorValues must only contain numeric values.");return Op(g.serializer,m)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${$h(s)}`)})(i,e)}function Yb(i,e){const n={};return UT(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):aa(i,((s,o)=>{const u=Pu(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function Xb(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof It||i instanceof Ci||i instanceof Kr||i instanceof on||i instanceof dd||i instanceof Ii)}function rg(i,e,n){if(!Xb(n)||!PT(n)){const s=$h(n);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function ip(i,e,n){if((e=Xt(e))instanceof hd)return e._internalPath;if(typeof e=="string")return ig(i,e);throw zh("Field path arguments must be of type string or ",i,!1,void 0,n)}const px=new RegExp("[~\\*/\\[\\]]");function ig(i,e,n){if(e.search(px)>=0)throw zh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new hd(...e.split("."))._internalPath}catch{throw zh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function zh(i,e,n,s,o){const u=s&&!s.isEmpty(),d=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(u||d)&&(p+=" (found",u&&(p+=` in field ${s}`),d&&(p+=` in document ${o}`),p+=")"),new Ee(ee.INVALID_ARGUMENT,g+i+p)}function $b(i,e){return i.some((n=>n.isEqual(e)))}class Jb{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new on(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(pd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class gx extends Jb{data(){return super.data()}}function pd(i,e){return typeof e=="string"?ig(i,e):e instanceof hd?e._internalPath:e._delegate._internalPath}function Wb(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Ee(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sg{}class ag extends sg{}function Dr(i,e,...n){let s=[];e instanceof sg&&s.push(e),s=s.concat(n),(function(u){const d=u.filter((p=>p instanceof og)).length,g=u.filter((p=>p instanceof gd)).length;if(d>1||d>0&&g>0)throw new Ee(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class gd extends ag{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new gd(e,n,s)}_apply(e){const n=this._parse(e);return Zb(e._query,n),new os(e.firestore,e.converter,Ym(e._query,n))}_parse(e){const n=fd(e.firestore);return(function(u,d,g,p,m,v,T){let S;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Ee(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){bE(T,v);const L=[];for(const G of T)L.push(TE(p,u,G));S={arrayValue:{values:L}}}else S=TE(p,u,T)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||bE(T,v),S=mx(g,d,T,v==="in"||v==="not-in");return bn.create(m,v,S)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function er(i,e,n){const s=e,o=pd("where",i);return gd._create(o,s,n)}class og extends sg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new og(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:ai.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let d=o;const g=u.getFlattenedFilters();for(const p of g)Zb(d,p),d=Ym(d,p)})(e._query,n),new os(e.firestore,e.converter,Ym(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class lg extends ag{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new lg(e,n)}_apply(e){const n=(function(o,u,d){if(o.startAt!==null)throw new Ee(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Ee(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Tu(u,d)})(e._query,this._field,this._direction);return new os(e.firestore,e.converter,(function(o,u){const d=o.explicitOrderBy.concat([u]);return new tl(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function _E(i,e="asc"){const n=e,s=pd("orderBy",i);return lg._create(s,n)}class ug extends ag{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new ug(e,n,s)}_apply(e){return new os(e.firestore,e.converter,Oh(e._query,this._limit,this._limitType))}}function EE(i){return EI("limit",i),ug._create("limit",i,"F")}function TE(i,e,n){if(typeof(n=Xt(n))=="string"){if(n==="")throw new Ee(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ZT(e)&&n.indexOf("/")!==-1)throw new Ee(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Gt.fromString(n));if(!Ue.isDocumentKey(s))throw new Ee(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return V0(i,new Ue(s))}if(n instanceof on)return V0(i,n._key);throw new Ee(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$h(n)}.`)}function bE(i,e){if(!Array.isArray(i)||i.length===0)throw new Ee(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Zb(i,e){const n=(function(o,u){for(const d of o)for(const g of d.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ee(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class yx{convertValue(e,n="none"){switch(ta(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ea(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ge(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return aa(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[Dh].arrayValue?.values?.map((s=>pn(s.doubleValue)));return new Ii(n)}convertGeoPoint(e){return new Ci(pn(e.latitude),pn(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Zh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(vu(e));default:return null}}convertTimestamp(e){const n=Zs(e);return new It(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Gt.fromString(e);Nt(Tb(s),9688,{name:e});const o=new _u(s.get(1),s.get(3)),u=new Ue(s.popFirst(5));return o.isEqual(n)||rs(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}function eS(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}class ou{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ka extends Jb{constructor(e,n,s,o,u,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Eh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(pd("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ka._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ka._jsonSchemaVersion="firestore/documentSnapshot/1.0",ka._jsonSchema={type:Sn("string",ka._jsonSchemaVersion),bundleSource:Sn("string","DocumentSnapshot"),bundleName:Sn("string"),bundle:Sn("string")};class Eh extends ka{data(e={}){return super.data(e)}}class Va{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new ou(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Eh(this._firestore,this._userDataWriter,s.key,s,new ou(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ee(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((g=>{const p=new Eh(o._firestore,o._userDataWriter,g.doc.key,g.doc,new ou(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const p=new Eh(o._firestore,o._userDataWriter,g.doc.key,g.doc,new ou(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,v=-1;return g.type!==0&&(m=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),v=d.indexOf(g.doc.key)),{type:vx(g.type),doc:p,oldIndex:m,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Va._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function vx(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ge(61501,{type:i})}}function Ti(i){i=_r(i,on);const e=_r(i.firestore,ss);return ix(cd(e),i._key).then((n=>tS(e,i,n)))}Va._jsonSchemaVersion="firestore/querySnapshot/1.0",Va._jsonSchema={type:Sn("string",Va._jsonSchemaVersion),bundleSource:Sn("string","QuerySnapshot"),bundleName:Sn("string"),bundle:Sn("string")};class cg extends yx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new on(this.firestore,null,n)}}function Gn(i){i=_r(i,os);const e=_r(i.firestore,ss),n=cd(e),s=new cg(e);return Wb(i._query),sx(n,i._query).then((o=>new Va(e,s,i,o)))}function Pa(i,e,n){i=_r(i,on);const s=_r(i.firestore,ss),o=eS(i.converter,e,n);return yd(s,[Qb(fd(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,Qr.none())])}function Vn(i,e,n,...s){i=_r(i,on);const o=_r(i.firestore,ss),u=fd(o);let d;return d=typeof(e=Xt(e))=="string"||e instanceof hd?fx(u,"updateDoc",i._key,e,n,s):dx(u,"updateDoc",i._key,e),yd(o,[d.toMutation(i._key,Qr.exists(!0))])}function _x(i){return yd(_r(i.firestore,ss),[new kp(i._key,Qr.none())])}function Ex(i,e){const n=_r(i.firestore,ss),s=Ct(i),o=eS(i.converter,e);return yd(n,[Qb(fd(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,Qr.exists(!1))]).then((()=>s))}function sp(i,...e){i=Xt(i);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||vE(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(vE(e[s])){const p=e[s];e[s]=p.next?.bind(p),e[s+1]=p.error?.bind(p),e[s+2]=p.complete?.bind(p)}let u,d,g;if(i instanceof on)d=_r(i.firestore,ss),g=ed(i._key.path),u={next:p=>{e[s]&&e[s](tS(d,i,p))},error:e[s+1],complete:e[s+2]};else{const p=_r(i,os);d=_r(p.firestore,ss),g=p._query;const m=new cg(d);u={next:v=>{e[s]&&e[s](new Va(d,m,p,v))},error:e[s+1],complete:e[s+2]},Wb(i._query)}return(function(m,v,T,S){const A=new eg(S),L=new Jp(v,A,T);return m.asyncQueue.enqueueAndForget((async()=>Yp(await jh(m),L))),()=>{A.Nu(),m.asyncQueue.enqueueAndForget((async()=>Xp(await jh(m),L)))}})(cd(d),g,o,u)}function yd(i,e){return(function(s,o){const u=new es;return s.asyncQueue.enqueueAndForget((async()=>KN(await rx(s),o,u))),u.promise})(cd(i),e)}function tS(i,e,n){const s=n.docs.get(e._key),o=new cg(i);return new ka(i,o,e._key,s,new ou(n.hasPendingWrites,n.fromCache),e.converter)}function nS(){return new ng("serverTimestamp")}(function(e,n=!0){(function(o){Wo=o})(Jo),Ua(new Js("firestore",((s,{instanceIdentifier:o,options:u})=>{const d=s.getProvider("app").getImmediate(),g=new ss(new hI(s.getProvider("auth-internal")),new mI(d,s.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Ee(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _u(m.options.projectId,v)})(d,o),d);return u={useFetchStreams:n,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),bi(b0,S0,e),bi(b0,S0,"esm2020")})();const rS={apiKey:"AIzaSyARwb6K0M4l-hWKi8FrOLEVqRqeHRf8JR4",authDomain:"oppmoteboka.firebaseapp.com",projectId:"oppmoteboka",storageBucket:"oppmoteboka.firebasestorage.app",messagingSenderId:"732911922070",appId:"1:732911922070:web:b16d9de65062395c018bb7"},iS=BE().length?Kh():yp(rS),Gs=RT(iS),Ke=ox(iS),Tx=BE().find(i=>i.name==="secondary")??yp(rS,"secondary"),xm=RT(Tx);function Lu(){const[i,e]=X.useState(null),[n,s]=X.useState(!0),o=()=>{try{const p=new Uint8Array(16);crypto.getRandomValues(p);let m=Array.from(p).map(v=>String.fromCharCode(v)).join("");return m=btoa(m).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),m}catch{return Math.random().toString(36).slice(2)+Math.random().toString(36).slice(2)}};return X.useEffect(()=>{let p=null;const m=$R(Gs,async v=>{if(p&&(p(),p=null),!v){e(null),s(!1);return}try{const T=Ct(Ke,"users",v.uid);let S=await Ti(T);if(S.exists()){const A=S.data();if(v.email&&A?.email!==v.email)try{await Vn(T,{email:v.email})}catch(L){console.warn("Kunne ikke synkronisere epost til Firestore:",L)}if(!A?.authUid)try{await Vn(T,{authUid:o()})}catch(L){console.warn("Kunne ikke sette authUid p bruker.",L)}}else{const A={uid:v.uid,email:v.email??"",displayName:v.displayName??v.email??"",role:"student",term:null,termLabel:null,semesterStatus:"aktiv",approvedCurrentTerm:!1,createdAt:nS(),authUid:o()};await Pa(T,A)}p=sp(T,A=>{const L=A.data();if(!L)return;const G={uid:v.uid,email:L?.email??v.email??"",role:L?.role??"student",term:L?.term??null,termLabel:L?.termLabel??null,semesterStatus:L?.semesterStatus??null,approvedCurrentTerm:typeof L?.approvedCurrentTerm=="boolean"?L.approvedCurrentTerm:!1,displayName:L?.name??L?.displayName??v.displayName??v.email??""};e(G),s(!1)},A=>{console.error("Feil ved realtime-lytting p bruker:",A),s(!1)})}catch(T){console.error("Feil ved henting/oppretting av bruker:",T),e(null),s(!1)}});return()=>{p&&p(),m()}},[]),{user:i,loading:n,login:async(p,m)=>{await GR(Gs,p,m)},register:async(p,m)=>{await dh(Gs,p,m)},logout:async()=>{await JR(Gs)}}}var bx=DE();const Sx=cp(bx);var wx=i=>{switch(i){case"success":return Cx;case"info":return Nx;case"warning":return Ix;case"error":return xx;default:return null}},Ax=Array(12).fill(0),Rx=({visible:i,className:e})=>he.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":i},he.createElement("div",{className:"sonner-spinner"},Ax.map((n,s)=>he.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),Cx=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Ix=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Nx=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),xx=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Dx=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},he.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),he.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Mx=()=>{let[i,e]=he.useState(document.hidden);return he.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),i},ap=1,Ox=class{constructor(){this.subscribe=i=>(this.subscribers.push(i),()=>{let e=this.subscribers.indexOf(i);this.subscribers.splice(e,1)}),this.publish=i=>{this.subscribers.forEach(e=>e(i))},this.addToast=i=>{this.publish(i),this.toasts=[...this.toasts,i]},this.create=i=>{var e;let{message:n,...s}=i,o=typeof i?.id=="number"||((e=i.id)==null?void 0:e.length)>0?i.id:ap++,u=this.toasts.find(g=>g.id===o),d=i.dismissible===void 0?!0:i.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),u?this.toasts=this.toasts.map(g=>g.id===o?(this.publish({...g,...i,id:o,title:n}),{...g,...i,id:o,dismissible:d,title:n}):g):this.addToast({title:n,...s,dismissible:d,id:o}),o},this.dismiss=i=>(this.dismissedToasts.add(i),i||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:i,dismiss:!0})),i),this.message=(i,e)=>this.create({...e,message:i}),this.error=(i,e)=>this.create({...e,message:i,type:"error"}),this.success=(i,e)=>this.create({...e,type:"success",message:i}),this.info=(i,e)=>this.create({...e,type:"info",message:i}),this.warning=(i,e)=>this.create({...e,type:"warning",message:i}),this.loading=(i,e)=>this.create({...e,type:"loading",message:i}),this.promise=(i,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:i,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let s=i instanceof Promise?i:i(),o=n!==void 0,u,d=s.then(async p=>{if(u=["resolve",p],he.isValidElement(p))o=!1,this.create({id:n,type:"default",message:p});else if(Vx(p)&&!p.ok){o=!1;let m=typeof e.error=="function"?await e.error(`HTTP error! status: ${p.status}`):e.error,v=typeof e.description=="function"?await e.description(`HTTP error! status: ${p.status}`):e.description;this.create({id:n,type:"error",message:m,description:v})}else if(e.success!==void 0){o=!1;let m=typeof e.success=="function"?await e.success(p):e.success,v=typeof e.description=="function"?await e.description(p):e.description;this.create({id:n,type:"success",message:m,description:v})}}).catch(async p=>{if(u=["reject",p],e.error!==void 0){o=!1;let m=typeof e.error=="function"?await e.error(p):e.error,v=typeof e.description=="function"?await e.description(p):e.description;this.create({id:n,type:"error",message:m,description:v})}}).finally(()=>{var p;o&&(this.dismiss(n),n=void 0),(p=e.finally)==null||p.call(e)}),g=()=>new Promise((p,m)=>d.then(()=>u[0]==="reject"?m(u[1]):p(u[1])).catch(m));return typeof n!="string"&&typeof n!="number"?{unwrap:g}:Object.assign(n,{unwrap:g})},this.custom=(i,e)=>{let n=e?.id||ap++;return this.create({jsx:i(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(i=>!this.dismissedToasts.has(i.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},pr=new Ox,kx=(i,e)=>{let n=e?.id||ap++;return pr.addToast({title:i,...e,id:n}),n},Vx=i=>i&&typeof i=="object"&&"ok"in i&&typeof i.ok=="boolean"&&"status"in i&&typeof i.status=="number",Px=kx,Lx=()=>pr.toasts,Ux=()=>pr.getActiveToasts(),Be=Object.assign(Px,{success:pr.success,info:pr.info,warning:pr.warning,error:pr.error,custom:pr.custom,message:pr.message,promise:pr.promise,dismiss:pr.dismiss,loading:pr.loading},{getHistory:Lx,getToasts:Ux});function jx(i,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e==="top"&&n.firstChild?n.insertBefore(s,n.firstChild):n.appendChild(s),s.styleSheet?s.styleSheet.cssText=i:s.appendChild(document.createTextNode(i))}jx(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function uh(i){return i.label!==void 0}var zx=3,Bx="32px",qx="16px",SE=4e3,Fx=356,Hx=14,Gx=20,Kx=200;function ri(...i){return i.filter(Boolean).join(" ")}function Qx(i){let[e,n]=i.split("-"),s=[];return e&&s.push(e),n&&s.push(n),s}var Yx=i=>{var e,n,s,o,u,d,g,p,m,v,T;let{invert:S,toast:A,unstyled:L,interacting:G,setHeights:z,visibleToasts:fe,heights:ce,index:ne,toasts:ye,expanded:je,removeToast:xe,defaultRichColors:x,closeButton:C,style:N,cancelButtonStyle:V,actionButtonStyle:D,className:U="",descriptionClassName:I="",duration:Ve,position:Xe,gap:Q,loadingIcon:le,expandByDefault:ge,classNames:me,icons:De,closeButtonAriaLabel:k="Close toast",pauseWhenPageIsHidden:q}=i,[W,ae]=he.useState(null),[_e,we]=he.useState(null),[Re,nt]=he.useState(!1),[de,Pe]=he.useState(!1),[Qe,mt]=he.useState(!1),[ie,ue]=he.useState(!1),[ve,re]=he.useState(!1),[be,Ce]=he.useState(0),[Ie,Te]=he.useState(0),qe=he.useRef(A.duration||Ve||SE),zt=he.useRef(null),gt=he.useRef(null),_t=ne===0,In=ne+1<=fe,xt=A.type,ln=A.dismissible!==!1,ze=A.className||"",lt=A.descriptionClassName||"",Nn=he.useMemo(()=>ce.findIndex(Oe=>Oe.toastId===A.id)||0,[ce,A.id]),Yn=he.useMemo(()=>{var Oe;return(Oe=A.closeButton)!=null?Oe:C},[A.closeButton,C]),Pn=he.useMemo(()=>A.duration||Ve||SE,[A.duration,Ve]),$t=he.useRef(0),Vt=he.useRef(0),tn=he.useRef(0),Et=he.useRef(null),[oi,wn]=Xe.split("-"),xn=he.useMemo(()=>ce.reduce((Oe,yt,St)=>St>=Nn?Oe:Oe+yt.height,0),[ce,Nn]),Jt=Mx(),Er=A.invert||S,Ft=xt==="loading";Vt.current=he.useMemo(()=>Nn*Q+xn,[Nn,xn]),he.useEffect(()=>{qe.current=Pn},[Pn]),he.useEffect(()=>{nt(!0)},[]),he.useEffect(()=>{let Oe=gt.current;if(Oe){let yt=Oe.getBoundingClientRect().height;return Te(yt),z(St=>[{toastId:A.id,height:yt,position:A.position},...St]),()=>z(St=>St.filter(Wt=>Wt.toastId!==A.id))}},[z,A.id]),he.useLayoutEffect(()=>{if(!Re)return;let Oe=gt.current,yt=Oe.style.height;Oe.style.height="auto";let St=Oe.getBoundingClientRect().height;Oe.style.height=yt,Te(St),z(Wt=>Wt.find(cn=>cn.toastId===A.id)?Wt.map(cn=>cn.toastId===A.id?{...cn,height:St}:cn):[{toastId:A.id,height:St,position:A.position},...Wt])},[Re,A.title,A.description,z,A.id]);let un=he.useCallback(()=>{Pe(!0),Ce(Vt.current),z(Oe=>Oe.filter(yt=>yt.toastId!==A.id)),setTimeout(()=>{xe(A)},Kx)},[A,xe,z,Vt]);he.useEffect(()=>{if(A.promise&&xt==="loading"||A.duration===1/0||A.type==="loading")return;let Oe;return je||G||q&&Jt?(()=>{if(tn.current<$t.current){let yt=new Date().getTime()-$t.current;qe.current=qe.current-yt}tn.current=new Date().getTime()})():qe.current!==1/0&&($t.current=new Date().getTime(),Oe=setTimeout(()=>{var yt;(yt=A.onAutoClose)==null||yt.call(A,A),un()},qe.current)),()=>clearTimeout(Oe)},[je,G,A,xt,q,Jt,un]),he.useEffect(()=>{A.delete&&un()},[un,A.delete]);function ar(){var Oe,yt,St;return De!=null&&De.loading?he.createElement("div",{className:ri(me?.loader,(Oe=A?.classNames)==null?void 0:Oe.loader,"sonner-loader"),"data-visible":xt==="loading"},De.loading):le?he.createElement("div",{className:ri(me?.loader,(yt=A?.classNames)==null?void 0:yt.loader,"sonner-loader"),"data-visible":xt==="loading"},le):he.createElement(Rx,{className:ri(me?.loader,(St=A?.classNames)==null?void 0:St.loader),visible:xt==="loading"})}return he.createElement("li",{tabIndex:0,ref:gt,className:ri(U,ze,me?.toast,(e=A?.classNames)==null?void 0:e.toast,me?.default,me?.[xt],(n=A?.classNames)==null?void 0:n[xt]),"data-sonner-toast":"","data-rich-colors":(s=A.richColors)!=null?s:x,"data-styled":!(A.jsx||A.unstyled||L),"data-mounted":Re,"data-promise":!!A.promise,"data-swiped":ve,"data-removed":de,"data-visible":In,"data-y-position":oi,"data-x-position":wn,"data-index":ne,"data-front":_t,"data-swiping":Qe,"data-dismissible":ln,"data-type":xt,"data-invert":Er,"data-swipe-out":ie,"data-swipe-direction":_e,"data-expanded":!!(je||ge&&Re),style:{"--index":ne,"--toasts-before":ne,"--z-index":ye.length-ne,"--offset":`${de?be:Vt.current}px`,"--initial-height":ge?"auto":`${Ie}px`,...N,...A.style},onDragEnd:()=>{mt(!1),ae(null),Et.current=null},onPointerDown:Oe=>{Ft||!ln||(zt.current=new Date,Ce(Vt.current),Oe.target.setPointerCapture(Oe.pointerId),Oe.target.tagName!=="BUTTON"&&(mt(!0),Et.current={x:Oe.clientX,y:Oe.clientY}))},onPointerUp:()=>{var Oe,yt,St,Wt;if(ie||!ln)return;Et.current=null;let cn=Number(((Oe=gt.current)==null?void 0:Oe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),or=Number(((yt=gt.current)==null?void 0:yt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ln=new Date().getTime()-((St=zt.current)==null?void 0:St.getTime()),An=W==="x"?cn:or,Xn=Math.abs(An)/Ln;if(Math.abs(An)>=Gx||Xn>.11){Ce(Vt.current),(Wt=A.onDismiss)==null||Wt.call(A,A),we(W==="x"?cn>0?"right":"left":or>0?"down":"up"),un(),ue(!0),re(!1);return}mt(!1),ae(null)},onPointerMove:Oe=>{var yt,St,Wt,cn;if(!Et.current||!ln||((yt=window.getSelection())==null?void 0:yt.toString().length)>0)return;let or=Oe.clientY-Et.current.y,Ln=Oe.clientX-Et.current.x,An=(St=i.swipeDirections)!=null?St:Qx(Xe);!W&&(Math.abs(Ln)>1||Math.abs(or)>1)&&ae(Math.abs(Ln)>Math.abs(or)?"x":"y");let Xn={x:0,y:0};W==="y"?(An.includes("top")||An.includes("bottom"))&&(An.includes("top")&&or<0||An.includes("bottom")&&or>0)&&(Xn.y=or):W==="x"&&(An.includes("left")||An.includes("right"))&&(An.includes("left")&&Ln<0||An.includes("right")&&Ln>0)&&(Xn.x=Ln),(Math.abs(Xn.x)>0||Math.abs(Xn.y)>0)&&re(!0),(Wt=gt.current)==null||Wt.style.setProperty("--swipe-amount-x",`${Xn.x}px`),(cn=gt.current)==null||cn.style.setProperty("--swipe-amount-y",`${Xn.y}px`)}},Yn&&!A.jsx?he.createElement("button",{"aria-label":k,"data-disabled":Ft,"data-close-button":!0,onClick:Ft||!ln?()=>{}:()=>{var Oe;un(),(Oe=A.onDismiss)==null||Oe.call(A,A)},className:ri(me?.closeButton,(o=A?.classNames)==null?void 0:o.closeButton)},(u=De?.close)!=null?u:Dx):null,A.jsx||X.isValidElement(A.title)?A.jsx?A.jsx:typeof A.title=="function"?A.title():A.title:he.createElement(he.Fragment,null,xt||A.icon||A.promise?he.createElement("div",{"data-icon":"",className:ri(me?.icon,(d=A?.classNames)==null?void 0:d.icon)},A.promise||A.type==="loading"&&!A.icon?A.icon||ar():null,A.type!=="loading"?A.icon||De?.[xt]||wx(xt):null):null,he.createElement("div",{"data-content":"",className:ri(me?.content,(g=A?.classNames)==null?void 0:g.content)},he.createElement("div",{"data-title":"",className:ri(me?.title,(p=A?.classNames)==null?void 0:p.title)},typeof A.title=="function"?A.title():A.title),A.description?he.createElement("div",{"data-description":"",className:ri(I,lt,me?.description,(m=A?.classNames)==null?void 0:m.description)},typeof A.description=="function"?A.description():A.description):null),X.isValidElement(A.cancel)?A.cancel:A.cancel&&uh(A.cancel)?he.createElement("button",{"data-button":!0,"data-cancel":!0,style:A.cancelButtonStyle||V,onClick:Oe=>{var yt,St;uh(A.cancel)&&ln&&((St=(yt=A.cancel).onClick)==null||St.call(yt,Oe),un())},className:ri(me?.cancelButton,(v=A?.classNames)==null?void 0:v.cancelButton)},A.cancel.label):null,X.isValidElement(A.action)?A.action:A.action&&uh(A.action)?he.createElement("button",{"data-button":!0,"data-action":!0,style:A.actionButtonStyle||D,onClick:Oe=>{var yt,St;uh(A.action)&&((St=(yt=A.action).onClick)==null||St.call(yt,Oe),!Oe.defaultPrevented&&un())},className:ri(me?.actionButton,(T=A?.classNames)==null?void 0:T.actionButton)},A.action.label):null))};function wE(){if(typeof window>"u"||typeof document>"u")return"ltr";let i=document.documentElement.getAttribute("dir");return i==="auto"||!i?window.getComputedStyle(document.documentElement).direction:i}function Xx(i,e){let n={};return[i,e].forEach((s,o)=>{let u=o===1,d=u?"--mobile-offset":"--offset",g=u?qx:Bx;function p(m){["top","right","bottom","left"].forEach(v=>{n[`${d}-${v}`]=typeof m=="number"?`${m}px`:m})}typeof s=="number"||typeof s=="string"?p(s):typeof s=="object"?["top","right","bottom","left"].forEach(m=>{s[m]===void 0?n[`${d}-${m}`]=g:n[`${d}-${m}`]=typeof s[m]=="number"?`${s[m]}px`:s[m]}):p(g)}),n}var $x=X.forwardRef(function(i,e){let{invert:n,position:s="bottom-right",hotkey:o=["altKey","KeyT"],expand:u,closeButton:d,className:g,offset:p,mobileOffset:m,theme:v="light",richColors:T,duration:S,style:A,visibleToasts:L=zx,toastOptions:G,dir:z=wE(),gap:fe=Hx,loadingIcon:ce,icons:ne,containerAriaLabel:ye="Notifications",pauseWhenPageIsHidden:je}=i,[xe,x]=he.useState([]),C=he.useMemo(()=>Array.from(new Set([s].concat(xe.filter(q=>q.position).map(q=>q.position)))),[xe,s]),[N,V]=he.useState([]),[D,U]=he.useState(!1),[I,Ve]=he.useState(!1),[Xe,Q]=he.useState(v!=="system"?v:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),le=he.useRef(null),ge=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),me=he.useRef(null),De=he.useRef(!1),k=he.useCallback(q=>{x(W=>{var ae;return(ae=W.find(_e=>_e.id===q.id))!=null&&ae.delete||pr.dismiss(q.id),W.filter(({id:_e})=>_e!==q.id)})},[]);return he.useEffect(()=>pr.subscribe(q=>{if(q.dismiss){x(W=>W.map(ae=>ae.id===q.id?{...ae,delete:!0}:ae));return}setTimeout(()=>{Sx.flushSync(()=>{x(W=>{let ae=W.findIndex(_e=>_e.id===q.id);return ae!==-1?[...W.slice(0,ae),{...W[ae],...q},...W.slice(ae+1)]:[q,...W]})})})}),[]),he.useEffect(()=>{if(v!=="system"){Q(v);return}if(v==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Q("dark"):Q("light")),typeof window>"u")return;let q=window.matchMedia("(prefers-color-scheme: dark)");try{q.addEventListener("change",({matches:W})=>{Q(W?"dark":"light")})}catch{q.addListener(({matches:ae})=>{try{Q(ae?"dark":"light")}catch(_e){console.error(_e)}})}},[v]),he.useEffect(()=>{xe.length<=1&&U(!1)},[xe]),he.useEffect(()=>{let q=W=>{var ae,_e;o.every(we=>W[we]||W.code===we)&&(U(!0),(ae=le.current)==null||ae.focus()),W.code==="Escape"&&(document.activeElement===le.current||(_e=le.current)!=null&&_e.contains(document.activeElement))&&U(!1)};return document.addEventListener("keydown",q),()=>document.removeEventListener("keydown",q)},[o]),he.useEffect(()=>{if(le.current)return()=>{me.current&&(me.current.focus({preventScroll:!0}),me.current=null,De.current=!1)}},[le.current]),he.createElement("section",{ref:e,"aria-label":`${ye} ${ge}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((q,W)=>{var ae;let[_e,we]=q.split("-");return xe.length?he.createElement("ol",{key:q,dir:z==="auto"?wE():z,tabIndex:-1,ref:le,className:g,"data-sonner-toaster":!0,"data-theme":Xe,"data-y-position":_e,"data-lifted":D&&xe.length>1&&!u,"data-x-position":we,style:{"--front-toast-height":`${((ae=N[0])==null?void 0:ae.height)||0}px`,"--width":`${Fx}px`,"--gap":`${fe}px`,...A,...Xx(p,m)},onBlur:Re=>{De.current&&!Re.currentTarget.contains(Re.relatedTarget)&&(De.current=!1,me.current&&(me.current.focus({preventScroll:!0}),me.current=null))},onFocus:Re=>{Re.target instanceof HTMLElement&&Re.target.dataset.dismissible==="false"||De.current||(De.current=!0,me.current=Re.relatedTarget)},onMouseEnter:()=>U(!0),onMouseMove:()=>U(!0),onMouseLeave:()=>{I||U(!1)},onDragEnd:()=>U(!1),onPointerDown:Re=>{Re.target instanceof HTMLElement&&Re.target.dataset.dismissible==="false"||Ve(!0)},onPointerUp:()=>Ve(!1)},xe.filter(Re=>!Re.position&&W===0||Re.position===q).map((Re,nt)=>{var de,Pe;return he.createElement(Yx,{key:Re.id,icons:ne,index:nt,toast:Re,defaultRichColors:T,duration:(de=G?.duration)!=null?de:S,className:G?.className,descriptionClassName:G?.descriptionClassName,invert:n,visibleToasts:L,closeButton:(Pe=G?.closeButton)!=null?Pe:d,interacting:I,position:q,style:G?.style,unstyled:G?.unstyled,classNames:G?.classNames,cancelButtonStyle:G?.cancelButtonStyle,actionButtonStyle:G?.actionButtonStyle,removeToast:k,toasts:xe.filter(Qe=>Qe.position==Re.position),heights:N.filter(Qe=>Qe.position==Re.position),setHeights:V,expandByDefault:u,gap:fe,loadingIcon:ce,expanded:D,pauseWhenPageIsHidden:je,swipeDirections:i.swipeDirections})})):null}))});const Jx="modulepreload",Wx=function(i){return"/"+i},AE={},Zx=function(e,n,s){let o=Promise.resolve();if(n&&n.length>0){let p=function(m){return Promise.all(m.map(v=>Promise.resolve(v).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),g=d?.nonce||d?.getAttribute("nonce");o=p(n.map(m=>{if(m=Wx(m),m in AE)return;AE[m]=!0;const v=m.endsWith(".css"),T=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${T}`))return;const S=document.createElement("link");if(S.rel=v?"stylesheet":Jx,v||(S.as="script"),S.crossOrigin="",S.href=m,g&&S.setAttribute("nonce",g),document.head.appendChild(S),v)return new Promise((A,L)=>{S.addEventListener("load",A),S.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${m}`)))})}))}function u(d){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=d,window.dispatchEvent(g),!g.defaultPrevented)throw d}return o.then(d=>{for(const g of d||[])g.status==="rejected"&&u(g.reason);return e().catch(u)})},eD=({onCode:i,onError:e})=>{const n=X.useMemo(()=>`qr-reader-${Math.random().toString(36).slice(2)}`,[]);return X.useEffect(()=>{let s=null,o=!1,u=!1,d;return(async()=>{let p;try{p=(await Zx(()=>import("./index-ChNMIoIs.js"),[])).Html5Qrcode}catch(m){console.warn("QR: klarte ikke  laste html5-qrcode-modulen",m),e?.(m);return}try{s=new p(n)}catch(m){console.warn("QR: konstruktr-feil for Html5Qrcode",m),e?.(m);return}d=window.setTimeout(()=>{!o&&!u&&(console.warn("QR: start timeout  ingen respons fra kamera p 7s"),e?.(new Error("QR start timeout")))},7e3),s.start({facingMode:"environment"},{fps:10,qrbox:250},m=>{i(m)},()=>{}).then(()=>{o=!0,d&&window.clearTimeout(d)}).catch(m=>{d&&window.clearTimeout(d),!u&&(console.warn("Kunne ikke starte QR-leser:",m),e?.(m))})})(),()=>{if(u=!0,d&&window.clearTimeout(d),!s)return;s.stop().catch(()=>{}).then(()=>{try{s?.clear()}catch{}}).finally(()=>{try{const v=document.getElementById(n)?.querySelector("video"),T=v?.srcObject??void 0;T&&(T.getTracks().forEach(S=>{try{S.stop()}catch{}}),v&&(v.srcObject=null))}catch{}})}},[n,i,e]),b.jsx("div",{id:n,style:{width:"100%"}})};class tD extends he.Component{state={hasError:!1};static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){if(this.props.onError)try{this.props.onError(e,n)}catch{}}componentDidUpdate(e){e.resetKey!==this.props.resetKey&&this.setState({hasError:!1,error:void 0})}render(){if(this.state.hasError){const{fallback:e}=this.props;return e?typeof e=="function"?e(this.state.error):e:null}return this.props.children}}async function nD(){const e=(await Gn(kn(Ke,"terms"))).docs.map(n=>{const s=n.data(),o=typeof s?.value=="number"?s.value:void 0;if(typeof o!="number")return null;const u=typeof s?.label=="string"?s.label:"",d=typeof s?.order=="number"?s.order:void 0;return{value:o,label:u,order:d}}).filter(Boolean);return e.sort((n,s)=>(n.order??n.value)-(s.order??s.value)),e}function hg(){const[i,e]=X.useState([]),[n,s]=X.useState(!0),[o,u]=X.useState(null);X.useEffect(()=>{let g=!0;return(async()=>{try{s(!0);const p=await nD();g&&e(p)}catch(p){g&&u(p)}finally{g&&s(!1)}})(),()=>{g=!1}},[]);const d=X.useMemo(()=>{const g=new Map;for(const p of i)g.set(p.value,p);return g},[i]);return{options:i,byValue:d,loading:n,error:o}}function Ks(i,e){if(e==null)return"Ukjent termin";if(e===99)return"Permisjon";let n;return Array.isArray(i)?n=i.find(s=>s.value===e):i instanceof Map&&(n=i.get(e)),n&&n.label?n.label:`Termin ${e}`}function rD(i){if(i==="Testmodul 1 - Testtermin 1")return i;const e=/(Modul)\s+(\d+)\s*-\s*(Blokk|Termin)\s+(\d+)/i,n=i.match(e);if(n){const u=n[2],d=n[4];return`M${u} - T${d}`}const s=/(Modul|Termin)\s+(\d+)/i,o=i.match(s);return o?`M${o[2]}`:i}function iD(i,e){if(e==null)return"";const n=Ks(i,e);return rD(n)}function sD({value:i,onChange:e,length:n=6,disabled:s}){const o=X.useRef([]),u=X.useMemo(()=>{const T=(i||"").replace(/\D/g,"").slice(0,n),S=new Array(n).fill("");for(let A=0;A<T.length;A++)S[A]=T[A];return S},[i,n]),d=T=>{const S=o.current[T];S&&S.focus()},g=(T,S)=>{const A=S.replace(/\D/g,"");if(!A)return;const G=u.join("").split("");let z=T;for(const fe of A){if(z>=n)break;G[z]=fe,z++}e(G.join("").slice(0,n)),z<=n-1&&d(z)},p=(T,S)=>{const A=S.target.value;if(A.length>1){g(T,A);return}const L=A.replace(/\D/g,""),G=u.slice();G[T]=L||"";const z=G.join("");e(z),L&&T<n-1&&d(T+1)},m=(T,S)=>{const A=S.key;if(A==="Backspace"){if(u[T]){const L=u.slice();L[T]="",e(L.join("")),S.preventDefault()}else if(T>0){S.preventDefault(),d(T-1);const L=u.slice();L[T-1]="",e(L.join(""))}}else A==="ArrowLeft"&&T>0?(S.preventDefault(),d(T-1)):A==="ArrowRight"&&T<n-1&&(S.preventDefault(),d(T+1))},v=(T,S)=>{const A=S.clipboardData.getData("text");A&&(S.preventDefault(),g(T,A))};return X.useEffect(()=>{o.current=o.current.slice(0,n)},[n]),b.jsx("div",{className:"",style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:u.map((T,S)=>b.jsx("input",{ref:A=>o.current[S]=A,type:"text",inputMode:"numeric",pattern:"[0-9]*",autoComplete:"one-time-code",className:"",style:{borderRadius:"7.5px",border:"2px solid var(--color-black",width:"2.2rem",height:"3.4rem",margin:"0 0.25rem",padding:"0.5rem 0.25rem",textAlign:"center"},value:T,onChange:A=>p(S,A),onKeyDown:A=>m(S,A),onPaste:A=>v(S,A),"aria-label":`Kode siffer ${S+1}`,disabled:s,maxLength:1},S))})}function aD({user:i}){const[e,n]=X.useState(""),[s,o]=X.useState(!1),[u,d]=X.useState(i.term??11),[g,p]=X.useState(i.approvedCurrentTerm??!1),[m,v]=X.useState([]),[T,S]=X.useState(!1),[A,L]=X.useState(0),[G,z]=X.useState(!1),{options:fe}=hg(),[ce,ne]=X.useState({}),[ye,je]=X.useState([]),[xe,x]=X.useState({}),[C,N]=X.useState({}),[V,D]=X.useState("idle"),[U,I]=X.useState(null),[Ve,Xe]=X.useState(null),Q=i.semesterStatus&&i.semesterStatus!=="aktiv",le=()=>{D("idle"),I(null),Xe(null),n(""),z(!1)};X.useEffect(()=>{typeof i.term=="number"&&d(i.term),p(!!i.approvedCurrentTerm)},[i.term,i.approvedCurrentTerm]);const ge=async()=>{try{const de=Ct(Ke,"users",i.uid),Pe=await Ti(de),Qe=Pe.exists()?Pe.data()?.authUid:null;if(typeof Qe=="string"&&Qe.length>=8)return Qe;const mt=`authUid:${i.uid}`;let ie=localStorage.getItem(mt);if(!ie){try{const ue=new Uint8Array(16);crypto.getRandomValues(ue),ie=Array.from(ue).map(ve=>String.fromCharCode(ve)).join(""),ie=btoa(ie).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}catch{ie=Math.random().toString(36).slice(2)+Math.random().toString(36).slice(2)}localStorage.setItem(mt,ie)}return await Pa(de,{authUid:ie},{merge:!0}),ie}catch(de){return console.warn("Kunne ikke generere/lagre authUid, bruker fallback i minnet.",de),Math.random().toString(36).slice(2)+Math.random().toString(36).slice(2)}},me=async de=>{if(!(!de||de.length<6)){o(!0),D("idle"),I(null);try{const Pe=kn(Ke,"sessions"),Qe=Dr(Pe,er("code","==",de)),mt=await Gn(Qe);if(mt.empty){D("error"),I("Fant ingen kt med denne koden."),n(""),z(!1),o(!1);return}let ie=mt.docs[0];if(mt.docs.length>1){const Te=mt.docs.find(qe=>{const zt=qe.data(),gt=typeof zt?.term=="number"?zt.term:Number(zt?.term);return Number.isFinite(gt)&&gt===u});Te&&(ie=Te)}const ue=ie.data(),ve=typeof u=="number"?u:typeof i.term=="number"?i.term:null,re=typeof ue?.term=="number"?ue.term:Number(ue?.term);if(ve==null){D("error"),I("Kontoen din mangler tilknytning til en termin. Kontakt lrer/admin for  f satt riktig termin fr du registrerer oppmte."),n(""),z(!1),o(!1);return}if(!Number.isFinite(re)||re!==ve){const Te=Number.isFinite(re)?Ks(fe,re):"ukjent termin",qe=Ks(fe,ve),gt=!!(ue&&ue.isOpen)?"Koden gjeder for en annen termin enn du er registert p. Kanskje underviseren har valgt feil termin?":`Denne kten er for ${Te}. Du er i ${qe}. Du kan bare registrere oppmte for din egen termin.`;D("error"),I(gt),n(""),z(!1),o(!1);return}const be=Ct(Ke,"sessions",ie.id,"attendance",i.uid);if((await Ti(be)).exists()){D("error"),I("Du er allerede registrert p denne kten."),n(""),z(!1),o(!1);return}await Pa(be,{userId:i.uid,studentName:i.displayName,studentEmail:i.email,createdAt:It.now(),status:"present"});const Ie=ue.name||"kten";Xe(Ie),D("success"),I(null),z(!1),n(""),L(Te=>Te+1),_e()}catch(Pe){console.error(Pe),D("error"),I("Noe gikk galt ved registrering av oppmte."),n(""),z(!1)}finally{o(!1)}}},De=de=>{if(!de||s)return;const Pe=de.replace(/\D/g,"").slice(0,6);Pe.length===6&&(n(Pe),z(!1),me(Pe))},k=de=>{console.warn("QR-skanner-feil:",de),z(!1),D("error"),I("Kunne ikke starte kamera. Sjekk kameratilgang i nettleseren eller skriv inn oppmtekoden manuelt.")};X.useEffect(()=>{(async()=>{S(!0);try{const Pe=kn(Ke,"requirements"),Qe=Dr(Pe,er("term","==",u)),ie=(await Gn(Qe)).docs.map(ze=>{const lt=ze.data();return{category:lt.category,requiredCount:lt.requiredCount}}),ue=kn(Ke,"sessions"),ve=Dr(ue,er("term","==",u)),be=(await Gn(ve)).docs.map(ze=>{const lt=ze.data();return{id:ze.id,timeId:typeof lt?.timeId=="string"?lt.timeId:void 0,name:typeof lt?.name=="string"?lt.name:void 0,category:typeof lt?.category=="string"?lt.category:void 0}}),Ce=kn(Ke,"times"),Ie=Dr(Ce,er("term","==",u)),qe=(await Gn(Ie)).docs.map(ze=>{const lt=ze.data();return{id:ze.id,name:lt.name,category:lt.category,term:lt.term,order:typeof lt?.order=="number"?lt.order:void 0}}),zt=new Map;for(const ze of qe)ze.category&&zt.set(ze.category,(zt.get(ze.category)??0)+1);const gt=new Map,_t={},In={};for(const ze of be){if(!ze.category)continue;const lt=Ct(Ke,"sessions",ze.id,"attendance",i.uid),Nn=await Ti(lt);if(Nn.exists()){const Yn=Nn.data()?.createdAt;if(gt.set(ze.category,(gt.get(ze.category)??0)+1),ze.timeId)_t[ze.timeId]=!0,In[ze.timeId]=Yn;else if(ze.name&&ze.category){const Pn=qe.find($t=>$t.category===ze.category&&$t.name===ze.name);Pn&&(_t[Pn.id]=!0,In[Pn.id]=Yn)}}}const xt=new Set;for(const ze of ie)xt.add(ze.category);for(const ze of be)ze.category&&xt.add(ze.category);for(const ze of qe)ze.category&&xt.add(ze.category);const ln=[];xt.forEach(ze=>{const lt=ie.find($t=>$t.category===ze),Nn=lt?lt.requiredCount:null,Yn=zt.get(ze)??0,Pn=gt.get(ze)??0;ln.push({category:ze,attendedCount:Pn,totalSessions:Yn,requiredCount:Nn})}),ln.sort((ze,lt)=>ze.category.localeCompare(lt.category,"nb-NO",{sensitivity:"base"})),v(ln),je(qe),x(_t),N(In)}catch(Pe){console.error(Pe),v([]),je([]),x({}),N({})}finally{S(!1)}})()},[u,i.uid,A]);const q=de=>{const Pe=de.match(/^\s*(\d+)/);return Pe?parseInt(Pe[1],10):Number.POSITIVE_INFINITY},W=de=>{ne(Pe=>({...Pe,[de]:!Pe[de]}))},ae=de=>{if(!de)return"";try{return new Date(de.toMillis()).toLocaleDateString("nb-NO")}catch{return""}},_e=async()=>{try{const de=u,Qe=(await Gn(Dr(kn(Ke,"requirements"),er("term","==",de)))).docs.map(Te=>Te.data());if(!Qe.length)return;const ie=(await Gn(Dr(kn(Ke,"sessions"),er("term","==",de)))).docs.map(Te=>{const qe=Te.data();return{id:Te.id,category:typeof qe?.category=="string"?qe.category:void 0}}),ue=new Map;for(const Te of ie){if(!Te.category)continue;const qe=Ct(Ke,"sessions",Te.id,"attendance",i.uid);(await Ti(qe)).exists()&&ue.set(Te.category,(ue.get(Te.category)??0)+1)}if(!Qe.every(Te=>{const qe=typeof Te.requiredCount=="number"?Te.requiredCount:0;return qe<=0?!0:(ue.get(Te.category)??0)>=qe}))return;const re=await ge(),be=`${re}_${de}`,Ce=Ct(Ke,"attendanceBook",be);if((await Ti(Ce)).exists())return;await Pa(Ce,{authUid:re,term:de,acceptedBy:"system",acceptedTimeStamp:nS()});try{await Vn(Ct(Ke,"users",i.uid),{approvedCurrentTerm:!0}),p(!0)}catch(Te){console.warn("Kunne ikke oppdatere approvedCurrentTerm p bruker:",Te)}}catch(de){console.warn("Klarte ikke  registrere akseptert oppmtebok:",de)}},we=async()=>{const de=(u??0)+1;try{await Vn(Ct(Ke,"users",i.uid),{term:de,approvedCurrentTerm:!1})}catch(Pe){console.warn("Kunne ikke oppdatere bruker ved semesterbytte:",Pe)}finally{d(de),p(!1),L(Pe=>Pe+1)}},Re=async()=>{try{await Vn(Ct(Ke,"users",i.uid),{term:99,approvedCurrentTerm:!1})}catch(Pe){console.warn("Kunne ikke oppdatere bruker ved semesterbytte:",Pe)}finally{d(99),p(!1),L(Pe=>Pe+1)}},nt=de=>{const Qe=(de||"").replace(/\D/g,"").slice(0,6);n(Qe),Qe.length===6&&!s&&me(Qe)};return X.useEffect(()=>{if(V==="idle")return;const Pe=setTimeout(()=>{le()},V==="success"?1e4:2e3);return()=>clearTimeout(Pe)},[V]),b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"card student-card card-top round-corner-top100",children:[b.jsxs("div",{className:"userInfo",children:[b.jsx("h2",{className:"whiteTxt",children:i.displayName||i.email}),b.jsx("p",{className:"thinFont opaqueFont whiteTxt",children:Ks(fe,u)})]}),b.jsx("img",{src:"/card-man.svg",alt:"Student-profile-placeholder"})]}),b.jsx("div",{className:"card student-card card-bottom full-border round-corner-bottom100 ",children:V==="success"?b.jsx(b.Fragment,{children:b.jsxs("div",{className:"registered-sucsess",children:[b.jsx("img",{src:"/registered.svg",alt:"Registered-icon"}),b.jsx("h3",{className:"",children:"Oppmte registrert"}),Ve&&b.jsx("p",{className:"",children:Ve})]})}):V==="error"?b.jsx(b.Fragment,{children:b.jsxs("div",{className:"registered-error",children:[b.jsx("img",{src:"/error.svg",alt:"Error-icon"}),b.jsx("h3",{className:"",children:"Kunne ikke registrere oppmte"}),b.jsx("p",{className:"",children:U??"Fant ingen gruppetimer med denne koden. Sjekk at kten er pen hos underviseren."})]})}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"code-input-container",children:[b.jsx("p",{className:"spacedFont thinFont",children:"Oppmtekode fra underviser"}),b.jsx(sD,{value:e,onChange:nt,disabled:s})]}),b.jsx("img",{src:"/qrscan.svg",alt:"QR-code-icon",className:"qr-code-icon"}),b.jsx("br",{}),b.jsx("button",{type:"button",onClick:()=>z(!0),className:"button-colorless fontUnderline boldFont qr-code-button",children:"Scan QR-kode"}),G&&b.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:60},onClick:()=>z(!1),role:"dialog","aria-modal":"true","aria-label":"Skann QR-kode",children:b.jsxs("div",{onClick:de=>de.stopPropagation(),style:{width:"100%",maxWidth:"480px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[b.jsx("h3",{style:{margin:0},children:"Skann QR-kode"}),b.jsx("button",{type:"button",onClick:()=>z(!1),style:{border:"none",background:"transparent",fontSize:"1.2rem",cursor:"pointer"},"aria-label":"Lukk",title:"Lukk",children:""})]}),b.jsx("div",{style:{borderRadius:"0.75rem",overflow:"hidden",border:"1px solid #e5e7eb"},children:b.jsx(tD,{onError:de=>k(de),resetKey:G,children:b.jsx(eD,{onCode:De,onError:k})})})]})})]})}),g&&b.jsxs("div",{className:"card approved-term-card full-border round-corners-whole100 ",children:[b.jsx("h2",{className:"boldFont",children:"Godkjent"}),b.jsxs("p",{className:"thinFont opaqueFont",children:["Bra jobba! Kravene for ",Ks(fe,u).toLowerCase()," er oppndd. Lykke til p eksamen!"]}),b.jsx("button",{id:"start-next-semester-button",className:"button button-black button-fullwidth field-height-100 round-corners-whole50",onClick:we,children:"Start neste semester"}),b.jsx("button",{id:"gap-life-button",className:"button button-colorless fontUnderline boldFont",onClick:Re,children:"Har innvilget permisjon"})]}),b.jsxs("div",{className:"card round-corners-whole100 student-overview-card",children:[Q&&b.jsxs("p",{className:"text-red text-center",children:['Du er markert som "',i.semesterStatus,'" dette semesteret. Ingen oppmtekrav, men du kan fortsatt registrere oppmte.']}),b.jsx("section",{children:T?b.jsx(dp,{}):m.length===0?b.jsx("p",{className:"fs-0_9 text-gray-500",children:"Ingen registrerte timer for denne terminen enn."}):b.jsxs(b.Fragment,{children:[b.jsx("h2",{children:"Min oppmtebok"}),b.jsx("p",{className:"thinFont opaqueFont",children:"Her finner du alle fullfrte og fremtidige oppmter."}),b.jsx("table",{className:"table-container",children:b.jsx("tbody",{children:m.map(de=>{const Pe=de.requiredCount!=null&&de.attendedCount>=de.requiredCount;return b.jsxs(he.Fragment,{children:[b.jsxs("tr",{onClick:()=>W(de.category),children:[b.jsx("td",{className:"requirement-meet-icon",children:Pe?b.jsx("img",{src:"/check-white.svg",alt:"Checkmark-icon"}):b.jsx(b.Fragment,{})}),b.jsx("td",{className:"class-overview thinFont smal",children:de.category}),b.jsx("td",{className:"spacedFont",children:de.totalSessions>0?`${de.attendedCount}/${de.totalSessions}`:de.attendedCount}),b.jsx("td",{className:"required-classes",children:de.requiredCount??"-"})]}),ce[de.category]&&b.jsx("tr",{children:b.jsx("td",{colSpan:4,className:"detail-cell",children:b.jsx("div",{className:"subtable-wrapper",children:b.jsx("table",{className:"subtable",children:b.jsx("tbody",{children:ye.filter(Qe=>Qe.category===de.category).sort((Qe,mt)=>{const ie=(Qe.order??Number.MAX_SAFE_INTEGER)-(mt.order??Number.MAX_SAFE_INTEGER);if(ie!==0)return ie;const ue=q(Qe.name),ve=q(mt.name);return ue!==ve?ue-ve:Qe.name.localeCompare(mt.name,"nb-NO",{sensitivity:"base"})}).map(Qe=>{const mt=!!xe[Qe.id],ie=C[Qe.id];return b.jsxs("tr",{children:[b.jsx("td",{className:"subtable-icon-cell",children:mt?b.jsx("img",{src:"/check-white.svg",alt:"Checkmark-icon"}):b.jsx(b.Fragment,{})}),b.jsx("td",{className:"class-overview thinFont smal subtable-name-cell",children:Qe.name}),b.jsx("td",{className:"smallText opaqueFont subtable-date-cell",children:mt?ae(ie):""})]},`detail-${de.category}-${Qe.id}`)})})})})})})]},de.category)})})})]})})]})]})}var oD=Object.defineProperty,Bh=Object.getOwnPropertySymbols,sS=Object.prototype.hasOwnProperty,aS=Object.prototype.propertyIsEnumerable,RE=(i,e,n)=>e in i?oD(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,op=(i,e)=>{for(var n in e||(e={}))sS.call(e,n)&&RE(i,n,e[n]);if(Bh)for(var n of Bh(e))aS.call(e,n)&&RE(i,n,e[n]);return i},lp=(i,e)=>{var n={};for(var s in i)sS.call(i,s)&&e.indexOf(s)<0&&(n[s]=i[s]);if(i!=null&&Bh)for(var s of Bh(i))e.indexOf(s)<0&&aS.call(i,s)&&(n[s]=i[s]);return n};var Fa;(i=>{const e=class ot{constructor(p,m,v,T){if(this.version=p,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],p<ot.MIN_VERSION||p>ot.MAX_VERSION)throw new RangeError("Version value out of range");if(T<-1||T>7)throw new RangeError("Mask value out of range");this.size=p*4+17;let S=[];for(let L=0;L<this.size;L++)S.push(!1);for(let L=0;L<this.size;L++)this.modules.push(S.slice()),this.isFunction.push(S.slice());this.drawFunctionPatterns();const A=this.addEccAndInterleave(v);if(this.drawCodewords(A),T==-1){let L=1e9;for(let G=0;G<8;G++){this.applyMask(G),this.drawFormatBits(G);const z=this.getPenaltyScore();z<L&&(T=G,L=z),this.applyMask(G)}}o(0<=T&&T<=7),this.mask=T,this.applyMask(T),this.drawFormatBits(T),this.isFunction=[]}static encodeText(p,m){const v=i.QrSegment.makeSegments(p);return ot.encodeSegments(v,m)}static encodeBinary(p,m){const v=i.QrSegment.makeBytes(p);return ot.encodeSegments([v],m)}static encodeSegments(p,m,v=1,T=40,S=-1,A=!0){if(!(ot.MIN_VERSION<=v&&v<=T&&T<=ot.MAX_VERSION)||S<-1||S>7)throw new RangeError("Invalid value");let L,G;for(L=v;;L++){const ne=ot.getNumDataCodewords(L,m)*8,ye=d.getTotalBits(p,L);if(ye<=ne){G=ye;break}if(L>=T)throw new RangeError("Data too long")}for(const ne of[ot.Ecc.MEDIUM,ot.Ecc.QUARTILE,ot.Ecc.HIGH])A&&G<=ot.getNumDataCodewords(L,ne)*8&&(m=ne);let z=[];for(const ne of p){n(ne.mode.modeBits,4,z),n(ne.numChars,ne.mode.numCharCountBits(L),z);for(const ye of ne.getData())z.push(ye)}o(z.length==G);const fe=ot.getNumDataCodewords(L,m)*8;o(z.length<=fe),n(0,Math.min(4,fe-z.length),z),n(0,(8-z.length%8)%8,z),o(z.length%8==0);for(let ne=236;z.length<fe;ne^=253)n(ne,8,z);let ce=[];for(;ce.length*8<z.length;)ce.push(0);return z.forEach((ne,ye)=>ce[ye>>>3]|=ne<<7-(ye&7)),new ot(L,m,ce,S)}getModule(p,m){return 0<=p&&p<this.size&&0<=m&&m<this.size&&this.modules[m][p]}getModules(){return this.modules}drawFunctionPatterns(){for(let v=0;v<this.size;v++)this.setFunctionModule(6,v,v%2==0),this.setFunctionModule(v,6,v%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const p=this.getAlignmentPatternPositions(),m=p.length;for(let v=0;v<m;v++)for(let T=0;T<m;T++)v==0&&T==0||v==0&&T==m-1||v==m-1&&T==0||this.drawAlignmentPattern(p[v],p[T]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(p){const m=this.errorCorrectionLevel.formatBits<<3|p;let v=m;for(let S=0;S<10;S++)v=v<<1^(v>>>9)*1335;const T=(m<<10|v)^21522;o(T>>>15==0);for(let S=0;S<=5;S++)this.setFunctionModule(8,S,s(T,S));this.setFunctionModule(8,7,s(T,6)),this.setFunctionModule(8,8,s(T,7)),this.setFunctionModule(7,8,s(T,8));for(let S=9;S<15;S++)this.setFunctionModule(14-S,8,s(T,S));for(let S=0;S<8;S++)this.setFunctionModule(this.size-1-S,8,s(T,S));for(let S=8;S<15;S++)this.setFunctionModule(8,this.size-15+S,s(T,S));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let p=this.version;for(let v=0;v<12;v++)p=p<<1^(p>>>11)*7973;const m=this.version<<12|p;o(m>>>18==0);for(let v=0;v<18;v++){const T=s(m,v),S=this.size-11+v%3,A=Math.floor(v/3);this.setFunctionModule(S,A,T),this.setFunctionModule(A,S,T)}}drawFinderPattern(p,m){for(let v=-4;v<=4;v++)for(let T=-4;T<=4;T++){const S=Math.max(Math.abs(T),Math.abs(v)),A=p+T,L=m+v;0<=A&&A<this.size&&0<=L&&L<this.size&&this.setFunctionModule(A,L,S!=2&&S!=4)}}drawAlignmentPattern(p,m){for(let v=-2;v<=2;v++)for(let T=-2;T<=2;T++)this.setFunctionModule(p+T,m+v,Math.max(Math.abs(T),Math.abs(v))!=1)}setFunctionModule(p,m,v){this.modules[m][p]=v,this.isFunction[m][p]=!0}addEccAndInterleave(p){const m=this.version,v=this.errorCorrectionLevel;if(p.length!=ot.getNumDataCodewords(m,v))throw new RangeError("Invalid argument");const T=ot.NUM_ERROR_CORRECTION_BLOCKS[v.ordinal][m],S=ot.ECC_CODEWORDS_PER_BLOCK[v.ordinal][m],A=Math.floor(ot.getNumRawDataModules(m)/8),L=T-A%T,G=Math.floor(A/T);let z=[];const fe=ot.reedSolomonComputeDivisor(S);for(let ne=0,ye=0;ne<T;ne++){let je=p.slice(ye,ye+G-S+(ne<L?0:1));ye+=je.length;const xe=ot.reedSolomonComputeRemainder(je,fe);ne<L&&je.push(0),z.push(je.concat(xe))}let ce=[];for(let ne=0;ne<z[0].length;ne++)z.forEach((ye,je)=>{(ne!=G-S||je>=L)&&ce.push(ye[ne])});return o(ce.length==A),ce}drawCodewords(p){if(p.length!=Math.floor(ot.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let v=this.size-1;v>=1;v-=2){v==6&&(v=5);for(let T=0;T<this.size;T++)for(let S=0;S<2;S++){const A=v-S,G=(v+1&2)==0?this.size-1-T:T;!this.isFunction[G][A]&&m<p.length*8&&(this.modules[G][A]=s(p[m>>>3],7-(m&7)),m++)}}o(m==p.length*8)}applyMask(p){if(p<0||p>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let v=0;v<this.size;v++){let T;switch(p){case 0:T=(v+m)%2==0;break;case 1:T=m%2==0;break;case 2:T=v%3==0;break;case 3:T=(v+m)%3==0;break;case 4:T=(Math.floor(v/3)+Math.floor(m/2))%2==0;break;case 5:T=v*m%2+v*m%3==0;break;case 6:T=(v*m%2+v*m%3)%2==0;break;case 7:T=((v+m)%2+v*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][v]&&T&&(this.modules[m][v]=!this.modules[m][v])}}getPenaltyScore(){let p=0;for(let S=0;S<this.size;S++){let A=!1,L=0,G=[0,0,0,0,0,0,0];for(let z=0;z<this.size;z++)this.modules[S][z]==A?(L++,L==5?p+=ot.PENALTY_N1:L>5&&p++):(this.finderPenaltyAddHistory(L,G),A||(p+=this.finderPenaltyCountPatterns(G)*ot.PENALTY_N3),A=this.modules[S][z],L=1);p+=this.finderPenaltyTerminateAndCount(A,L,G)*ot.PENALTY_N3}for(let S=0;S<this.size;S++){let A=!1,L=0,G=[0,0,0,0,0,0,0];for(let z=0;z<this.size;z++)this.modules[z][S]==A?(L++,L==5?p+=ot.PENALTY_N1:L>5&&p++):(this.finderPenaltyAddHistory(L,G),A||(p+=this.finderPenaltyCountPatterns(G)*ot.PENALTY_N3),A=this.modules[z][S],L=1);p+=this.finderPenaltyTerminateAndCount(A,L,G)*ot.PENALTY_N3}for(let S=0;S<this.size-1;S++)for(let A=0;A<this.size-1;A++){const L=this.modules[S][A];L==this.modules[S][A+1]&&L==this.modules[S+1][A]&&L==this.modules[S+1][A+1]&&(p+=ot.PENALTY_N2)}let m=0;for(const S of this.modules)m=S.reduce((A,L)=>A+(L?1:0),m);const v=this.size*this.size,T=Math.ceil(Math.abs(m*20-v*10)/v)-1;return o(0<=T&&T<=9),p+=T*ot.PENALTY_N4,o(0<=p&&p<=2568888),p}getAlignmentPatternPositions(){if(this.version==1)return[];{const p=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(p*2-2))*2;let v=[6];for(let T=this.size-7;v.length<p;T-=m)v.splice(1,0,T);return v}}static getNumRawDataModules(p){if(p<ot.MIN_VERSION||p>ot.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*p+128)*p+64;if(p>=2){const v=Math.floor(p/7)+2;m-=(25*v-10)*v-55,p>=7&&(m-=36)}return o(208<=m&&m<=29648),m}static getNumDataCodewords(p,m){return Math.floor(ot.getNumRawDataModules(p)/8)-ot.ECC_CODEWORDS_PER_BLOCK[m.ordinal][p]*ot.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][p]}static reedSolomonComputeDivisor(p){if(p<1||p>255)throw new RangeError("Degree out of range");let m=[];for(let T=0;T<p-1;T++)m.push(0);m.push(1);let v=1;for(let T=0;T<p;T++){for(let S=0;S<m.length;S++)m[S]=ot.reedSolomonMultiply(m[S],v),S+1<m.length&&(m[S]^=m[S+1]);v=ot.reedSolomonMultiply(v,2)}return m}static reedSolomonComputeRemainder(p,m){let v=m.map(T=>0);for(const T of p){const S=T^v.shift();v.push(0),m.forEach((A,L)=>v[L]^=ot.reedSolomonMultiply(A,S))}return v}static reedSolomonMultiply(p,m){if(p>>>8||m>>>8)throw new RangeError("Byte out of range");let v=0;for(let T=7;T>=0;T--)v=v<<1^(v>>>7)*285,v^=(m>>>T&1)*p;return o(v>>>8==0),v}finderPenaltyCountPatterns(p){const m=p[1];o(m<=this.size*3);const v=m>0&&p[2]==m&&p[3]==m*3&&p[4]==m&&p[5]==m;return(v&&p[0]>=m*4&&p[6]>=m?1:0)+(v&&p[6]>=m*4&&p[0]>=m?1:0)}finderPenaltyTerminateAndCount(p,m,v){return p&&(this.finderPenaltyAddHistory(m,v),m=0),m+=this.size,this.finderPenaltyAddHistory(m,v),this.finderPenaltyCountPatterns(v)}finderPenaltyAddHistory(p,m){m[0]==0&&(p+=this.size),m.pop(),m.unshift(p)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],i.QrCode=e;function n(g,p,m){if(p<0||p>31||g>>>p)throw new RangeError("Value out of range");for(let v=p-1;v>=0;v--)m.push(g>>>v&1)}function s(g,p){return(g>>>p&1)!=0}function o(g){if(!g)throw new Error("Assertion error")}const u=class an{constructor(p,m,v){if(this.mode=p,this.numChars=m,this.bitData=v,m<0)throw new RangeError("Invalid argument");this.bitData=v.slice()}static makeBytes(p){let m=[];for(const v of p)n(v,8,m);return new an(an.Mode.BYTE,p.length,m)}static makeNumeric(p){if(!an.isNumeric(p))throw new RangeError("String contains non-numeric characters");let m=[];for(let v=0;v<p.length;){const T=Math.min(p.length-v,3);n(parseInt(p.substring(v,v+T),10),T*3+1,m),v+=T}return new an(an.Mode.NUMERIC,p.length,m)}static makeAlphanumeric(p){if(!an.isAlphanumeric(p))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],v;for(v=0;v+2<=p.length;v+=2){let T=an.ALPHANUMERIC_CHARSET.indexOf(p.charAt(v))*45;T+=an.ALPHANUMERIC_CHARSET.indexOf(p.charAt(v+1)),n(T,11,m)}return v<p.length&&n(an.ALPHANUMERIC_CHARSET.indexOf(p.charAt(v)),6,m),new an(an.Mode.ALPHANUMERIC,p.length,m)}static makeSegments(p){return p==""?[]:an.isNumeric(p)?[an.makeNumeric(p)]:an.isAlphanumeric(p)?[an.makeAlphanumeric(p)]:[an.makeBytes(an.toUtf8ByteArray(p))]}static makeEci(p){let m=[];if(p<0)throw new RangeError("ECI assignment value out of range");if(p<128)n(p,8,m);else if(p<16384)n(2,2,m),n(p,14,m);else if(p<1e6)n(6,3,m),n(p,21,m);else throw new RangeError("ECI assignment value out of range");return new an(an.Mode.ECI,0,m)}static isNumeric(p){return an.NUMERIC_REGEX.test(p)}static isAlphanumeric(p){return an.ALPHANUMERIC_REGEX.test(p)}getData(){return this.bitData.slice()}static getTotalBits(p,m){let v=0;for(const T of p){const S=T.mode.numCharCountBits(m);if(T.numChars>=1<<S)return 1/0;v+=4+S+T.bitData.length}return v}static toUtf8ByteArray(p){p=encodeURI(p);let m=[];for(let v=0;v<p.length;v++)p.charAt(v)!="%"?m.push(p.charCodeAt(v)):(m.push(parseInt(p.substring(v+1,v+3),16)),v+=2);return m}};u.NUMERIC_REGEX=/^[0-9]*$/,u.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,u.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let d=u;i.QrSegment=u})(Fa||(Fa={}));(i=>{(e=>{const n=class{constructor(o,u){this.ordinal=o,this.formatBits=u}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(i.QrCode||(i.QrCode={}))})(Fa||(Fa={}));(i=>{(e=>{const n=class{constructor(o,u){this.modeBits=o,this.numBitsCharCount=u}numCharCountBits(o){return this.numBitsCharCount[Math.floor((o+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(i.QrSegment||(i.QrSegment={}))})(Fa||(Fa={}));var Uo=Fa;var lD={L:Uo.QrCode.Ecc.LOW,M:Uo.QrCode.Ecc.MEDIUM,Q:Uo.QrCode.Ecc.QUARTILE,H:Uo.QrCode.Ecc.HIGH},oS=128,lS="L",uS="#FFFFFF",cS="#000000",hS=!1,dS=1,uD=4,cD=0,hD=.1;function fS(i,e=0){const n=[];return i.forEach(function(s,o){let u=null;s.forEach(function(d,g){if(!d&&u!==null){n.push(`M${u+e} ${o+e}h${g-u}v1H${u+e}z`),u=null;return}if(g===s.length-1){if(!d)return;u===null?n.push(`M${g+e},${o+e} h1v1H${g+e}z`):n.push(`M${u+e},${o+e} h${g+1-u}v1H${u+e}z`);return}d&&u===null&&(u=g)})}),n.join("")}function mS(i,e){return i.slice().map((n,s)=>s<e.y||s>=e.y+e.h?n:n.map((o,u)=>u<e.x||u>=e.x+e.w?o:!1))}function dD(i,e,n,s){if(s==null)return null;const o=i.length+n*2,u=Math.floor(e*hD),d=o/e,g=(s.width||u)*d,p=(s.height||u)*d,m=s.x==null?i.length/2-g/2:s.x*d,v=s.y==null?i.length/2-p/2:s.y*d,T=s.opacity==null?1:s.opacity;let S=null;if(s.excavate){let L=Math.floor(m),G=Math.floor(v),z=Math.ceil(g+m-L),fe=Math.ceil(p+v-G);S={x:L,y:G,w:z,h:fe}}const A=s.crossOrigin;return{x:m,y:v,h:p,w:g,excavation:S,opacity:T,crossOrigin:A}}function fD(i,e){return e!=null?Math.max(Math.floor(e),0):i?uD:cD}function pS({value:i,level:e,minVersion:n,includeMargin:s,marginSize:o,imageSettings:u,size:d,boostLevel:g}){let p=he.useMemo(()=>{const L=(Array.isArray(i)?i:[i]).reduce((G,z)=>(G.push(...Uo.QrSegment.makeSegments(z)),G),[]);return Uo.QrCode.encodeSegments(L,lD[e],n,void 0,void 0,g)},[i,e,n,g]);const{cells:m,margin:v,numCells:T,calculatedImageSettings:S}=he.useMemo(()=>{let A=p.getModules();const L=fD(s,o),G=A.length+L*2,z=dD(A,d,L,u);return{cells:A,margin:L,numCells:G,calculatedImageSettings:z}},[p,d,u,s,o]);return{qrcode:p,margin:v,cells:m,numCells:T,calculatedImageSettings:S}}var mD=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),gS=he.forwardRef(function(e,n){const s=e,{value:o,size:u=oS,level:d=lS,bgColor:g=uS,fgColor:p=cS,includeMargin:m=hS,minVersion:v=dS,boostLevel:T,marginSize:S,imageSettings:A}=s,G=lp(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:z}=G,fe=lp(G,["style"]),ce=A?.src,ne=he.useRef(null),ye=he.useRef(null),je=he.useCallback(Ve=>{ne.current=Ve,typeof n=="function"?n(Ve):n&&(n.current=Ve)},[n]),[xe,x]=he.useState(!1),{margin:C,cells:N,numCells:V,calculatedImageSettings:D}=pS({value:o,level:d,minVersion:v,boostLevel:T,includeMargin:m,marginSize:S,imageSettings:A,size:u});he.useEffect(()=>{if(ne.current!=null){const Ve=ne.current,Xe=Ve.getContext("2d");if(!Xe)return;let Q=N;const le=ye.current,ge=D!=null&&le!==null&&le.complete&&le.naturalHeight!==0&&le.naturalWidth!==0;ge&&D.excavation!=null&&(Q=mS(N,D.excavation));const me=window.devicePixelRatio||1;Ve.height=Ve.width=u*me;const De=u/V*me;Xe.scale(De,De),Xe.fillStyle=g,Xe.fillRect(0,0,V,V),Xe.fillStyle=p,mD?Xe.fill(new Path2D(fS(Q,C))):N.forEach(function(k,q){k.forEach(function(W,ae){W&&Xe.fillRect(ae+C,q+C,1,1)})}),D&&(Xe.globalAlpha=D.opacity),ge&&Xe.drawImage(le,D.x+C,D.y+C,D.w,D.h)}}),he.useEffect(()=>{x(!1)},[ce]);const U=op({height:u,width:u},z);let I=null;return ce!=null&&(I=he.createElement("img",{src:ce,key:ce,style:{display:"none"},onLoad:()=>{x(!0)},ref:ye,crossOrigin:D?.crossOrigin})),he.createElement(he.Fragment,null,he.createElement("canvas",op({style:U,height:u,width:u,ref:je,role:"img"},fe)),I)});gS.displayName="QRCodeCanvas";var pD=he.forwardRef(function(e,n){const s=e,{value:o,size:u=oS,level:d=lS,bgColor:g=uS,fgColor:p=cS,includeMargin:m=hS,minVersion:v=dS,boostLevel:T,title:S,marginSize:A,imageSettings:L}=s,G=lp(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:z,cells:fe,numCells:ce,calculatedImageSettings:ne}=pS({value:o,level:d,minVersion:v,boostLevel:T,includeMargin:m,marginSize:A,imageSettings:L,size:u});let ye=fe,je=null;L!=null&&ne!=null&&(ne.excavation!=null&&(ye=mS(fe,ne.excavation)),je=he.createElement("image",{href:L.src,height:ne.h,width:ne.w,x:ne.x+z,y:ne.y+z,preserveAspectRatio:"none",opacity:ne.opacity,crossOrigin:ne.crossOrigin}));const xe=fS(ye,z);return he.createElement("svg",op({height:u,width:u,viewBox:`0 0 ${ce} ${ce}`,ref:n,role:"img"},G),!!S&&he.createElement("title",null,S),he.createElement("path",{fill:g,d:`M0,0 h${ce}v${ce}H0z`,shapeRendering:"crispEdges"}),he.createElement("path",{fill:p,d:xe,shapeRendering:"crispEdges"}),je)});pD.displayName="QRCodeSVG";const gD={width:"100%",maxWidth:460,backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},eu={fontSize:"0.8rem",display:"block"},tu={width:"100%",padding:"0.35rem 0.5rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.9rem",marginTop:"0.15rem",boxSizing:"border-box"},yD={padding:"0.35rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",color:"#111827",cursor:"pointer",fontSize:"0.9rem"};function dg({uid:i,role:e,onClose:n,displayName:s,email:o}){const{options:u}=hg(),[d,g]=X.useState(!0),[p,m]=X.useState(!1),[v,T]=X.useState(null),[S,A]=X.useState(""),[L,G]=X.useState(""),[z,fe]=X.useState(o),[ce,ne]=X.useState(null),[ye,je]=X.useState([]),[xe,x]=X.useState(!1),[C,N]=X.useState(""),V=e==="teacher"||e==="student",[D,U]=X.useState(""),[I,Ve]=X.useState(""),[Xe,Q]=X.useState(o),[le,ge]=X.useState({}),[me,De]=X.useState(!1),[k,q]=X.useState(""),[W,ae]=X.useState(!1),[_e,we]=X.useState(null),[Re,nt]=X.useState(null);X.useEffect(()=>{let re=!0;return(async()=>{try{g(!0);const be=Ct(Ke,"users",i),Ce=await Ti(be),Ie=Ce.exists()?Ce.data():{};if(!re)return;const Te=String(Ie.phone??""),qe=String(Ie.secondaryEmail??""),zt=String(Ie?.email??o);A(Te),G(qe),fe(zt),U(Te),Ve(qe),Q(zt),ne(typeof Ie.term=="number"?Ie.term:null);const gt=Array.isArray(Ie.allowedTerms)?Ie.allowedTerms.filter(_t=>typeof _t=="number"):[];je(gt);try{const _t=Ce.exists()?Ce.data():{};x(!!_t?.isSuperAdmin)}catch{x(!1)}}catch{re&&T("Kunne ikke laste profildata.")}finally{re&&g(!1)}})(),()=>{re=!1}},[i]);const de=X.useMemo(()=>ye.map(re=>Ks(u,re)),[ye,u]),Pe=async()=>{T(null),m(!0);try{await Vn(Ct(Ke,"users",i),{phone:S.trim()||null}),U(S),Be.success("Mobilnummer er oppdatert.")}catch(re){console.error(re),T("Kunne ikke lagre mobilnummer."),Be.error("Kunne ikke lagre mobilnummer.")}finally{m(!1)}},Qe=async()=>{T(null),m(!0);try{await Vn(Ct(Ke,"users",i),{secondaryEmail:L.trim()||null}),Ve(L),Be.success("Sekundr epost er oppdatert.")}catch(re){console.error(re),T("Kunne ikke lagre sekundr epost."),Be.error("Kunne ikke lagre sekundr epost.")}finally{m(!1)}},mt=async()=>{T(null);const re=z.trim();if(!re){T("Epost kan ikke vre tom."),Be.error("Epost kan ikke vre tom.");return}if(re===Xe){Be.info?.("Eposten er uendret.")||Be("Eposten er uendret.");return}try{const be=Gs.currentUser;if(!be){T("Ingen innlogget bruker."),Be.error("Ingen innlogget bruker.");return}await h0(be,re),Q(re),Be.success(`Vi har sendt en bekreftelseslenke til ${re}. Flg lenken for  fullfre endringen av epost.`)}catch(be){console.warn("updateEmail failed",be),be?.code==="auth/operation-not-allowed"?(T("Kan ikke oppdatere epost direkte. Du m bekrefte ny epost via lenken vi sender. Prv igjen."),Be.error("Kan ikke oppdatere epost direkte. Bruk knappen igjen for  f tilsendt bekreftelseslenke.")):be?.code==="auth/requires-recent-login"?(nt(re),q(""),we(null),De(!0),Be.info?.("Av sikkerhetshensyn m du bekrefte med passord fr du kan endre epost.")||Be("Av sikkerhetshensyn m du bekrefte med passord fr du kan endre epost.")):be?.code==="auth/email-already-in-use"?(T("Epostadressen er allerede i bruk av en annen bruker."),Be.error("Epostadressen er allerede i bruk av en annen bruker.")):be?.code==="auth/invalid-email"?(T("Ugyldig epost."),Be.error("Ugyldig epost.")):(T("Kunne ikke oppdatere epost. Prv igjen senere."),Be.error("Kunne ikke oppdatere epost. Prv igjen senere."))}},ie=()=>{De(!1),q(""),we(null)},ue=async()=>{we(null);const re=(Re||z||"").trim();if(!re){we("Ugyldig ny epost.");return}const be=Gs.currentUser;if(!be){we("Ingen innlogget bruker.");return}if(!k){we("Skriv inn passordet ditt.");return}try{ae(!0);const Ce=Ha.credential(be.email||o,k);await FR(be,Ce),await h0(be,re),De(!1),q(""),nt(null),Be.success(`Vi har sendt en bekreftelseslenke til ${re}. Flg lenken for  fullfre endringen av epost.`)}catch(Ce){console.error("Reauth/update email failed",Ce),Ce?.code==="auth/wrong-password"?we("Feil passord."):Ce?.code==="auth/too-many-requests"?we("For mange forsk. Prv igjen senere."):Ce?.code==="auth/invalid-email"?we("Ugyldig epost."):Ce?.code==="auth/email-already-in-use"?we("Epostadressen er allerede i bruk av en annen bruker."):we("Kunne ikke bekrefte innlogging eller oppdatere epost.")}finally{ae(!1)}},ve=async()=>{if(T(null),!C||C.length<6){T("Passord m vre minst 6 tegn."),Be.error("Passord m vre minst 6 tegn.");return}try{const re=Gs.currentUser;if(!re){T("Ingen innlogget bruker."),Be.error("Ingen innlogget bruker.");return}await KR(re,C),Be.success("Passordet er oppdatert."),N("")}catch(re){console.warn("updatePassword failed",re),re?.code==="auth/requires-recent-login"?(T("Du m logge inn p nytt fr du kan endre passord."),Be.error("Du m logge inn p nytt fr du kan endre passord.")):(T("Kunne ikke endre passord."),Be.error("Kunne ikke endre passord."))}};return b.jsxs(b.Fragment,{children:[b.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:60},"aria-modal":!0,role:"dialog",children:b.jsxs("div",{style:gD,children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[b.jsx("h3",{style:{margin:0},children:s||o}),b.jsx("button",{type:"button",onClick:n,className:"button-small button-border button-colorless",children:"Lukk"})]}),d?b.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"1rem 0"},children:"Laster..."}):b.jsxs(b.Fragment,{children:[e==="student"&&b.jsxs("div",{style:{fontSize:"0.9rem",color:"#374151"},children:[b.jsx("div",{style:{fontWeight:600},children:"Din termin"}),b.jsx("div",{children:Ks(u,ce)})]}),e==="teacher"&&b.jsxs("div",{style:{fontSize:"0.9rem",color:"#374151"},children:[b.jsx("div",{style:{fontWeight:600},children:"Terminer du kan registrere oppmte p:"}),ye.length===0?b.jsx("div",{children:"Ingen"}):b.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.4rem",marginTop:"0.25rem"},children:de.map((re,be)=>b.jsx("span",{style:{display:"inline-block",padding:"0.15rem 0.5rem",border:"1px solid #e5e7eb",borderRadius:"999px",background:"#f9fafb",fontSize:"0.8rem"},children:re},be))})]}),e==="admin"&&b.jsx("div",{style:{fontSize:"0.9rem",color:"#374151"},children:xe?b.jsx("div",{style:{fontWeight:600},children:"Super administrator"}):b.jsxs(b.Fragment,{children:[b.jsx("div",{style:{fontWeight:600},children:"Moduler du administrerer:"}),ye.length===0?b.jsx("div",{children:"Ingen"}):b.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.4rem",marginTop:"0.25rem"},children:de.map((re,be)=>b.jsx("span",{style:{display:"inline-block",padding:"0.15rem 0.5rem",border:"1px solid #e5e7eb",borderRadius:"999px",background:"#f9fafb",fontSize:"0.8rem"},children:re},be))})]})}),b.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginTop:"1rem"},children:[b.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-end"},children:[b.jsx("div",{style:{flex:1,minWidth:0},children:b.jsxs("label",{style:eu,children:["Mobilnummer",b.jsx("input",{type:"tel",value:S,onChange:re=>A(re.target.value),placeholder:"Eks: 99999999",style:tu})]})}),b.jsx("button",{type:"button",disabled:p||S===D,onMouseEnter:()=>ge(re=>({...re,phone:!0})),onMouseLeave:()=>ge(re=>({...re,phone:!1})),onClick:Pe,className:"button-black button-small",children:"Lagre"})]}),b.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-end"},children:[b.jsx("div",{style:{flex:1,minWidth:0},children:b.jsxs("label",{style:eu,children:["Epost",b.jsx("input",{type:"email",value:z,onChange:re=>fe(re.target.value),placeholder:"din@epost.no",style:tu})]})}),b.jsx("button",{type:"button",disabled:p||z.trim()===Xe.trim(),onMouseEnter:()=>ge(re=>({...re,primaryEmail:!0})),onMouseLeave:()=>ge(re=>({...re,primaryEmail:!1})),onClick:mt,className:"button-black button-small",children:"Lagre"})]}),V&&b.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-end"},children:[b.jsx("div",{style:{flex:1,minWidth:0},children:b.jsxs("label",{style:eu,children:["Sekundr epost",b.jsx("input",{type:"email",value:L,onChange:re=>G(re.target.value),placeholder:"eksempel@uio.no",style:tu})]})}),b.jsx("button",{type:"button",disabled:p||L===I,onMouseEnter:()=>ge(re=>({...re,secondaryEmail:!0})),onMouseLeave:()=>ge(re=>({...re,secondaryEmail:!1})),onClick:Qe,className:"button-black button-small",children:"Lagre"})]}),b.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-end"},children:[b.jsx("div",{style:{flex:1,minWidth:0},children:b.jsxs("label",{style:eu,children:["Nytt passord",b.jsx("input",{type:"password",value:C,onChange:re=>N(re.target.value),placeholder:"Minst 6 tegn",style:tu})]})}),b.jsx("button",{type:"button",disabled:p||C.length===0,onMouseEnter:()=>ge(re=>({...re,password:!0})),onMouseLeave:()=>ge(re=>({...re,password:!1})),onClick:ve,className:"button-black button-small",children:"Lagre"})]})]})]})]})}),me&&b.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:70},children:b.jsxs("div",{className:"page-card",style:{maxWidth:520,width:"100%",background:"#ffffff"},children:[b.jsx("h3",{style:{marginTop:0},children:"Logg inn p nytt"}),b.jsxs("p",{style:{whiteSpace:"pre-wrap",lineHeight:1.4},children:["Av sikkerhetshensyn m du bekrefte kontoen fr du kan endre epost.",`
`,"Skriv inn passordet for ",o,"."]}),b.jsxs("label",{style:eu,children:["Passord",b.jsx("input",{type:"password",value:k,onChange:re=>q(re.target.value),placeholder:"Passord",style:tu,autoFocus:!0})]}),_e&&b.jsx("p",{style:{color:"#b91c1c",fontSize:"0.85rem",marginTop:"0.5rem"},children:_e}),b.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",marginTop:"0.75rem"},children:[b.jsx("button",{type:"button",onClick:ie,style:yD,children:"Avbryt"}),b.jsx("button",{type:"button",onClick:ue,style:{background:"#6CE1AB",color:"black",cursor:"pointer"},disabled:W,children:W?"Bekrefter...":"Bekreft og send lenke"})]})]})})]})}const vD=[{value:1,label:"Modul 1 - Blokk 1"},{value:2,label:"Modul 1 - Blokk 2"},{value:3,label:"Modul 1 - Blokk 3"},{value:4,label:"Modul 2 - Termin 1"},{value:5,label:"Modul 2 - Termin 2"},{value:6,label:"Modul 2 - Propen"},{value:7,label:"Modul 3 - Termin 1"},{value:8,label:"Modul 3 - Termin 2"},{value:9,label:"Modul 4"},{value:10,label:"Modul 5"},{value:11,label:"Modul 6"},{value:12,label:"Modul 7"},{value:13,label:"Modul 8 - Termin 1"},{value:14,label:"Modul 8 - Termin 2"},{value:999,label:"Test"}];function _D(i){if(!i)return"Ukjent termin";const e=vD.find(n=>n.value===i);return e?e.label:`Termin ${i}`}function ED({user:i}){const[e,n]=X.useState([]),[s,o]=X.useState(null),[u,d]=X.useState(null),[g,p]=X.useState(""),[m,v]=X.useState(null),[T,S]=X.useState([]),[A,L]=X.useState(!0),[G,z]=X.useState(!1),[fe,ce]=X.useState([]),[ne,ye]=X.useState(!0),[je,xe]=X.useState(""),[x,C]=X.useState(!1),[N,V]=X.useState({open:!1,attendee:null}),[D,U]=X.useState(120),[I,Ve]=X.useState([]),[Xe,Q]=X.useState(!1),le=X.useRef(null),ge=X.useRef(null),{options:me}=hg();Lu();const[De,k]=X.useState(!1);X.useEffect(()=>{(async()=>{L(!0);const ve=(await Gn(kn(Ke,"times"))).docs.map(re=>{const be=re.data();return{id:re.id,name:be.name,category:be.category,term:be.term}});n(ve),L(!1)})()},[]),X.useEffect(()=>{(async()=>{try{const ue=Ct(Ke,"users",i.uid),ve=await Ti(ue),re=ve.exists()?ve.data():null,be=Array.isArray(re?.allowedTerms)?re.allowedTerms.map(Ce=>typeof Ce=="number"?Ce:parseInt(Ce,10)).filter(Ce=>!Number.isNaN(Ce)):[];d(be)}catch(ue){console.warn("Kunne ikke hente allowedTerms for lrer:",ue),d([])}})()},[i.uid]),X.useMemo(()=>{if(u===null)return me;const ie=new Set(u??[]);return me.filter(ue=>ie.has(ue.value))},[u,me]),X.useEffect(()=>{(async()=>{if(!(u===null||!s)){ye(!0);try{const ue=kn(Ke,"users"),ve=Dr(ue,er("role","==","student"),er("term","==",s)),be=(await Gn(ve)).docs.map(Ce=>{const Ie=Ce.data(),Te=Ie?.name&&String(Ie.name)||Ie?.displayName&&String(Ie.displayName)||null;return{id:Ce.id,name:Te,email:String(Ie?.email??""),phone:Ie?.phone?String(Ie.phone):null,term:typeof Ie?.term=="number"?Ie.term:null}});be.sort((Ce,Ie)=>{const Te=(Ce.name??"").toLocaleLowerCase(),qe=(Ie.name??"").toLocaleLowerCase();return Te!==qe?Te.localeCompare(qe,"nb-NO"):Ce.email.localeCompare(Ie.email,"nb-NO")}),ce(be)}catch(ue){console.error("Feil ved lasting av studenter:",ue),ce([])}finally{ye(!1)}}})()},[u,s]),X.useEffect(()=>{q()},[i.uid]);const q=async()=>{try{Q(!0);const ie=Date.now()-14400*1e3,ue=It.fromMillis(ie),ve=kn(Ke,"sessions");let re=[];try{const Ie=Dr(ve,er("teacherId","==",i.uid),er("createdAt",">=",ue),_E("createdAt","desc"),EE(50));re=(await Gn(Ie)).docs}catch{const Te=Dr(ve,er("teacherId","==",i.uid));re=(await Gn(Te)).docs.filter(zt=>{const gt=zt.data()?.createdAt;return gt&&gt.toMillis()>=ie}).sort((zt,gt)=>{const _t=zt.data()?.createdAt?.toMillis?.()??0;return(gt.data()?.createdAt?.toMillis?.()??0)-_t}).slice(0,50)}const be=new Set,Ce=[];for(const Ie of re){const Te=Ie.data(),qe=String(Te?.timeId??"");if(!(!qe||be.has(qe))&&(be.add(qe),Ce.push({timeId:qe,name:String(Te?.name??"Ukjent time"),category:String(Te?.category??""),term:typeof Te?.term=="number"?Te.term:Number(Te?.term)||0,lastAt:Te?.createdAt}),Ce.length>=10))break}Ve(Ce)}catch(ie){console.warn("Kunne ikke hente nylige timer:",ie),Ve([])}finally{Q(!1)}};X.useEffect(()=>{if(!m){S([]);return}const ie=kn(Ke,"sessions",m.id,"attendance"),ue=sp(ie,ve=>{const re=ve.docs.map(be=>{const Ce=be.data();return{id:be.id,studentName:Ce.studentName??null,studentEmail:Ce.studentEmail??null,createdAt:Ce.createdAt}}).sort((be,Ce)=>{const Ie=be.createdAt?.toMillis?.()??0,Te=Ce.createdAt?.toMillis?.()??0;return Ie-Te});S(re)});return()=>ue()},[m?.id]);const W=X.useMemo(()=>e.filter(ie=>ie.term===s),[e,s]),ae=X.useMemo(()=>{const ie=g.trim().toLowerCase();return ie?W.filter(ue=>ue.name.toLowerCase().includes(ie)).sort((ue,ve)=>ue.name.localeCompare(ve.name,"nb-NO",{sensitivity:"base"})):[]},[W,g]);X.useMemo(()=>{const ie=je.trim().toLowerCase();if(!ie||!m)return[];const ue=ie.includes("@");return fe.filter(ve=>{if(ve.term!==m.term)return!1;const re=String(ve.name??"").toLowerCase(),be=String(ve.email??"").toLowerCase(),Ce=ue?be:be.split("@")[0]??be,Ie=String(ve.phone??"").toLowerCase();return re.includes(ie)||Ce.includes(ie)||Ie.includes(ie)}).slice(0,10)},[fe,je,m]);const _e=async ie=>{const ue=e.find(qe=>qe.id===ie);if(!ue)return;if(m){const qe=Ct(Ke,"sessions",m.id);await Vn(qe,{isOpen:!1}),v(null)}const ve=Math.floor(1e5+Math.random()*9e5),re=String(ve),be=kn(Ke,"sessions"),Ce=It.now(),Te={id:(await Ex(be,{timeId:ue.id,name:ue.name,category:ue.category,term:ue.term,code:re,teacherId:i.uid,teacherName:i.displayName,teacherEmail:i.email,createdAt:Ce,isOpen:!0,openedAt:Ce})).id,timeId:ue.id,name:ue.name,category:ue.category,term:ue.term,code:re,teacherId:i.uid,createdAt:Ce,isOpen:!0,openedAt:Ce};v(Te),q()},we=async ie=>{p(ie.name),z(!1),await _e(ie.id),ge.current&&ge.current.blur()},Re=async ie=>{o(ie.term),p(ie.name),z(!1);let ue;try{const ve=Dr(kn(Ke,"sessions"),er("teacherId","==",i.uid),er("timeId","==",ie.timeId),_E("createdAt","desc"),EE(1));ue=(await Gn(ve)).docs[0]}catch{try{const re=Dr(kn(Ke,"sessions"),er("teacherId","==",i.uid));ue=(await Gn(re)).docs.filter(Ie=>String(Ie.data()?.timeId??"")===String(ie.timeId)).sort((Ie,Te)=>{const qe=Ie.data()?.createdAt?.toMillis?.()??0;return(Te.data()?.createdAt?.toMillis?.()??0)-qe})[0]}catch{}}if(ue){const ve=ue.data();if(m&&m.id!==ue.id){try{await Vn(Ct(Ke,"sessions",m.id),{isOpen:!1})}catch{}v(null)}const re=It.now();try{await Vn(Ct(Ke,"sessions",ue.id),{isOpen:!0,openedAt:re})}catch{}const be={id:ue.id,timeId:String(ve.timeId??ie.timeId),name:String(ve.name??ie.name),category:String(ve.category??""),term:typeof ve.term=="number"?ve.term:Number(ve.term)||ie.term,code:String(ve.code??""),teacherId:String(ve.teacherId??i.uid),createdAt:ve.createdAt??It.now(),isOpen:!0,openedAt:re};v(be),U(120);return}await _e(ie.timeId)},nt=async()=>{if(!m)return;const ie=Ct(Ke,"sessions",m.id);if(!m.isOpen){const ve=It.now();await Vn(ie,{isOpen:!0,openedAt:ve}),v({...m,isOpen:!0,openedAt:ve}),U(120)}else await Vn(ie,{isOpen:!1}),v({...m,isOpen:!1})};X.useEffect(()=>{if(!m)return;const ie=Ct(Ke,"sessions",m.id),ue=sp(ie,ve=>{if(!ve.exists())return;const re=ve.data();v(be=>be&&be.id===ve.id?{...be,isOpen:re?.isOpen??be.isOpen,openedAt:re?.openedAt??be.openedAt}:be)});return()=>ue()},[m?.id]),X.useEffect(()=>{if(!m||!m.isOpen||!m.openedAt){U(0);return}const ie=m.openedAt.toMillis(),ue=async()=>{const re=Date.now(),be=Math.floor((re-ie)/1e3),Ce=Math.max(0,60-be);if(U(Ce),Ce===0&&m.isOpen)try{await Vn(Ct(Ke,"sessions",m.id),{isOpen:!1}),v({...m,isOpen:!1})}catch{}};ue();const ve=setInterval(ue,1e3);return()=>clearInterval(ve)},[m?.id,m?.isOpen,m?.openedAt]);const de=ie=>{const ue=Math.floor(ie/60).toString().padStart(2,"0"),ve=Math.floor(ie%60).toString().padStart(2,"0");return`${ue}:${ve}`},Pe=ie=>{V({open:!0,attendee:ie})},Qe=()=>{V({open:!1,attendee:null})},mt=async()=>{if(!m||!N.attendee)return;const ie=N.attendee;try{await _x(Ct(Ke,"sessions",m.id,"attendance",ie.id)),Be.success("Student fjernet fra kten.")}catch(ue){console.error(ue),Be.error("Kunne ikke fjerne studenten.")}finally{Qe()}};return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"card teacher-card full-border round-corners-whole100",children:[b.jsx("h2",{className:"boldFont",children:"Finn timen din"}),b.jsxs("section",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",alignItems:"center"},children:[b.jsx("div",{style:{marginBottom:"1.25rem",width:"100%",maxWidth:520},children:(()=>{const ie=u!==null?new Set(u??[]):null,ue=ie?me.filter(ve=>ie.has(ve.value)):me;return ue.length===0?b.jsx("div",{style:{width:"100%",padding:"0.6rem 0",fontSize:"16px",border:"1px solid #e5e7eb",borderRadius:"0.5rem",background:"#f9fafb",color:"#6b7280",textAlign:"center"},children:"Ingen terminer tilgjengelig"}):b.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",justifyContent:"center"},children:ue.map(ve=>b.jsx("button",{type:"button",onClick:()=>{const re=ve.value;o(re),p(""),z(!1),v(null),S([]),setTimeout(()=>{ge.current?.focus()},0)},className:`button button-small button-colorless round-corners-whole25 thin-border ${s===ve.value?"button-yellow boldFont":"button-opacity"}`,ref:re=>{re&&ve===ue[0]&&s===null&&re.click()},children:ve.label},ve.value))})})()}),b.jsxs("div",{style:{position:"relative",marginBottom:"0.75rem",width:"100%",maxWidth:520},children:[b.jsx("input",{ref:ge,value:g,onChange:ie=>{p(ie.target.value),z(!0)},onFocus:()=>{s&&g.trim().length>0&&z(!0)},placeholder:s?"Skriv navnet p timen":"Velg modul frst",disabled:!s,className:"input-full field-height-100"}),G&&ae.length>0&&b.jsx("ul",{style:{position:"absolute",top:"100%",left:0,right:0,zIndex:10,background:"white",border:"1px solid #e5e7eb",borderRadius:"0.5rem",marginTop:"0.2rem",listStyle:"none",padding:0,maxHeight:"220px",overflowY:"auto",boxShadow:"0 10px 20px rgba(0,0,0,0.08)"},children:ae.map(ie=>b.jsxs("li",{onClick:()=>we(ie),style:{padding:"0.4rem 0.6rem",cursor:"pointer",borderBottom:"1px solid #f3f4f6"},onMouseDown:ue=>ue.preventDefault(),children:[b.jsx("div",{children:ie.name}),b.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:ie.category})]},ie.id))})]})]}),m&&b.jsxs("section",{ref:le,style:{marginTop:"2rem",padding:"1rem"},children:[b.jsxs("div",{style:{marginTop:"1rem",position:"relative"},children:[b.jsxs("div",{style:{filter:m.isOpen===!1?"blur(6px)":"none",pointerEvents:"none",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},children:[b.jsx(gS,{value:m.code,size:140}),b.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",letterSpacing:"0.3em"},children:m.code})]}),m.isOpen===!1&&b.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center"},children:b.jsx("div",{style:{background:"rgba(255,255,255,0.85)",padding:"0.5rem 0.75rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb",fontWeight:600,color:"#6b7280"},children:"kten er lukket"})})]}),b.jsxs("div",{style:{marginTop:"1.2rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[b.jsx("div",{style:{fontWeight:600,color:"#111827"},children:de(D)}),b.jsx("button",{onClick:nt,className:"button-black button-small",children:m.isOpen===!1?"pne kta":"Lukk kt"})]}),b.jsx("hr",{style:{margin:"2rem 0",borderWidth:"1.25px",borderStyle:"solid",borderColor:"var(--color-black)"}}),b.jsxs("h4",{children:[T.length," ",T.length===1?"registert student":"registrerte studenter"]}),T.length===0?b.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"Ingen har registrert seg enn."}):b.jsx("table",{style:{width:"100%",borderCollapse:"collapse"},className:"table-container",children:b.jsx("tbody",{children:T.map(ie=>b.jsx("tr",{children:b.jsx("td",{style:{padding:"0.3rem",borderBottom:"1px solid #f3f4f6",textAlign:"left"},onClick:()=>Pe(ie),children:ie.studentName||"-"})},ie.id))})})]})]}),I.length>0&&b.jsx("div",{className:"card round-corners-whole100 teacher-recent-sessions",children:b.jsxs("div",{children:[b.jsx("h2",{children:"Nylige timer"}),b.jsx("p",{className:"thinFont opaqueFont",children:"Her finner du de andre gruppetimene du har hatt siste 4 timene"}),b.jsx("table",{className:"table-container",children:b.jsx("tbody",{children:I.map(ie=>b.jsxs("tr",{children:[b.jsxs("td",{children:[b.jsxs("p",{children:[" ",ie.name]}),b.jsx("p",{className:"thinFont opaqueFont",children:_D(ie.term)})]}),b.jsx("td",{children:b.jsx("button",{className:"button button-small button-white round-corners-whole10",type:"button",onClick:()=>void Re(ie),children:"pne"})})]},ie.timeId))})})]})}),b.jsx("br",{}),b.jsx("div",{className:"page-card page-card--session",style:{display:m?void 0:"none"}}),N.open&&N.attendee&&b.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1e3},children:b.jsxs("div",{className:"page-card",style:{maxWidth:520,width:"100%",background:"#ffffff",textAlign:"center"},children:[b.jsx("h3",{style:{marginTop:0},children:"Fjerne student?"}),b.jsx("p",{style:{whiteSpace:"pre-wrap",lineHeight:1.4},children:(()=>{const ie=N.attendee;return`Du er i ferd med  fjerne ${ie.studentName||ie.studentEmail||"denne studenten"} fra denne kten.`})()}),b.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",marginTop:"0.75rem"},children:[b.jsx("button",{className:"button",type:"button",onClick:Qe,style:{background:"#ef4444",color:"#ffffff"},children:"Avbryt"}),b.jsx("button",{type:"button",onClick:()=>void mt(),style:{padding:"0.45rem 0.9rem",borderRadius:"999px",border:"1px solid #d1d5db",background:"#ffffff",cursor:"pointer"},children:"Fjern student"})]})]})}),De&&b.jsx(dg,{uid:i.uid,role:i.role,email:i.email,displayName:i.displayName,onClose:()=>k(!1)})]})}const TD="type.googleapis.com/google.protobuf.Int64Value",bD="type.googleapis.com/google.protobuf.UInt64Value";function yS(i,e){const n={};for(const s in i)i.hasOwnProperty(s)&&(n[s]=e(i[s]));return n}function qh(i){if(i==null)return null;if(i instanceof Number&&(i=i.valueOf()),typeof i=="number"&&isFinite(i)||i===!0||i===!1||Object.prototype.toString.call(i)==="[object String]")return i;if(i instanceof Date)return i.toISOString();if(Array.isArray(i))return i.map(e=>qh(e));if(typeof i=="function"||typeof i=="object")return yS(i,e=>qh(e));throw new Error("Data cannot be encoded in JSON: "+i)}function $o(i){if(i==null)return i;if(i["@type"])switch(i["@type"]){case TD:case bD:{const e=Number(i.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+i);return e}default:throw new Error("Data cannot be decoded from JSON: "+i)}return Array.isArray(i)?i.map(e=>$o(e)):typeof i=="function"||typeof i=="object"?yS(i,e=>$o(e)):i}const fg="functions";const CE={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class vr extends xi{constructor(e,n,s){super(`${fg}/${e}`,n||""),this.details=s,Object.setPrototypeOf(this,vr.prototype)}}function SD(i){if(i>=200&&i<300)return"ok";switch(i){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Fh(i,e){let n=SD(i),s=n,o;try{const u=e&&e.error;if(u){const d=u.status;if(typeof d=="string"){if(!CE[d])return new vr("internal","internal");n=CE[d],s=d}const g=u.message;typeof g=="string"&&(s=g),o=u.details,o!==void 0&&(o=$o(o))}}catch{}return n==="ok"?null:new vr(n,s,o)}class wD{constructor(e,n,s,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Mr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=s.getImmediate({optional:!0}),this.auth||n.get().then(u=>this.auth=u,()=>{}),this.messaging||s.get().then(u=>this.messaging=u,()=>{}),this.appCheck||o?.get().then(u=>this.appCheck=u,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),s=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:n,messagingToken:s,appCheckToken:o}}}const up="us-central1",AD=/^data: (.*?)(?:\n|$)/;function RD(i){let e=null;return{promise:new Promise((n,s)=>{e=setTimeout(()=>{s(new vr("deadline-exceeded","deadline-exceeded"))},i)}),cancel:()=>{e&&clearTimeout(e)}}}class CD{constructor(e,n,s,o,u=up,d=(...g)=>fetch(...g)){this.app=e,this.fetchImpl=d,this.emulatorOrigin=null,this.contextProvider=new wD(e,n,s,o),this.cancelAllRequests=new Promise(g=>{this.deleteService=()=>Promise.resolve(g())});try{const g=new URL(u);this.customDomain=g.origin+(g.pathname==="/"?"":g.pathname),this.region=up}catch{this.customDomain=null,this.region=u}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function ID(i,e,n){const s=ia(e);i.emulatorOrigin=`http${s?"s":""}://${e}:${n}`,s&&(fp(i.emulatorOrigin+"/backends"),mp("Functions",!0))}function ND(i,e,n){const s=o=>DD(i,e,o,{});return s.stream=(o,u)=>OD(i,e,o,u),s}function vS(i){return i.emulatorOrigin&&ia(i.emulatorOrigin)?"include":void 0}async function xD(i,e,n,s,o){n["Content-Type"]="application/json";let u;try{u=await s(i,{method:"POST",body:JSON.stringify(e),headers:n,credentials:vS(o)})}catch{return{status:0,json:null}}let d=null;try{d=await u.json()}catch{}return{status:u.status,json:d}}async function _S(i,e){const n={},s=await i.contextProvider.getContext(e.limitedUseAppCheckTokens);return s.authToken&&(n.Authorization="Bearer "+s.authToken),s.messagingToken&&(n["Firebase-Instance-ID-Token"]=s.messagingToken),s.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=s.appCheckToken),n}function DD(i,e,n,s){const o=i._url(e);return MD(i,o,n,s)}async function MD(i,e,n,s){n=qh(n);const o={data:n},u=await _S(i,s),d=s.timeout||7e4,g=RD(d),p=await Promise.race([xD(e,o,u,i.fetchImpl,i),g.promise,i.cancelAllRequests]);if(g.cancel(),!p)throw new vr("cancelled","Firebase Functions instance was deleted.");const m=Fh(p.status,p.json);if(m)throw m;if(!p.json)throw new vr("internal","Response is not valid JSON object.");let v=p.json.data;if(typeof v>"u"&&(v=p.json.result),typeof v>"u")throw new vr("internal","Response is missing data field.");return{data:$o(v)}}function OD(i,e,n,s){const o=i._url(e);return kD(i,o,n,s||{})}async function kD(i,e,n,s){n=qh(n);const o={data:n},u=await _S(i,s);u["Content-Type"]="application/json",u.Accept="text/event-stream";let d;try{d=await i.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:u,signal:s?.signal,credentials:vS(i)})}catch(S){if(S instanceof Error&&S.name==="AbortError"){const L=new vr("cancelled","Request was cancelled.");return{data:Promise.reject(L),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(L)}}}}}}const A=Fh(0,null);return{data:Promise.reject(A),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(A)}}}}}}let g,p;const m=new Promise((S,A)=>{g=S,p=A});s?.signal?.addEventListener("abort",()=>{const S=new vr("cancelled","Request was cancelled.");p(S)});const v=d.body.getReader(),T=VD(v,g,p,s?.signal);return{stream:{[Symbol.asyncIterator](){const S=T.getReader();return{async next(){const{value:A,done:L}=await S.read();return{value:A,done:L}},async return(){return await S.cancel(),{done:!0,value:void 0}}}}},data:m}}function VD(i,e,n,s){const o=(d,g)=>{const p=d.match(AD);if(!p)return;const m=p[1];try{const v=JSON.parse(m);if("result"in v){e($o(v.result));return}if("message"in v){g.enqueue($o(v.message));return}if("error"in v){const T=Fh(0,v);g.error(T),n(T);return}}catch(v){if(v instanceof vr){g.error(v),n(v);return}}},u=new TextDecoder;return new ReadableStream({start(d){let g="";return p();async function p(){if(s?.aborted){const m=new vr("cancelled","Request was cancelled");return d.error(m),n(m),Promise.resolve()}try{const{value:m,done:v}=await i.read();if(v){g.trim()&&o(g.trim(),d),d.close();return}if(s?.aborted){const S=new vr("cancelled","Request was cancelled");d.error(S),n(S),await i.cancel();return}g+=u.decode(m,{stream:!0});const T=g.split(`
`);g=T.pop()||"";for(const S of T)S.trim()&&o(S.trim(),d);return p()}catch(m){const v=m instanceof vr?m:Fh(0,null);d.error(v),n(v)}}},cancel(){return i.cancel()}})}const IE="@firebase/functions",NE="0.13.1";const PD="auth-internal",LD="app-check-internal",UD="messaging-internal";function jD(i){const e=(n,{instanceIdentifier:s})=>{const o=n.getProvider("app").getImmediate(),u=n.getProvider(PD),d=n.getProvider(UD),g=n.getProvider(LD);return new CD(o,u,d,g,s)};Ua(new Js(fg,e,"PUBLIC").setMultipleInstances(!0)),bi(IE,NE,i),bi(IE,NE,"esm2020")}function Dm(i=Kh(),e=up){const s=Gh(Xt(i),fg).getImmediate({identifier:e}),o=PE("functions");return o&&zD(s,...o),s}function zD(i,e,n){ID(Xt(i),e,n)}function Mm(i,e,n){return ND(Xt(i),e)}jD();function Om(){const i="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789!@#$";let e="";for(let n=0;n<12;n++)e+=i[Math.floor(Math.random()*i.length)];return e}const BD=()=>{const{user:i}=Lu(),[e,n]=X.useState([]),[s,o]=X.useState(!0),[u,d]=X.useState(""),[g,p]=X.useState("students"),[m,v]=X.useState("all"),[T,S]=X.useState("all"),[A,L]=X.useState("all"),[G,z]=X.useState([]),fe=X.useMemo(()=>G.slice().sort((M,oe)=>(M.order??M.value)-(oe.order??oe.value)).map(M=>({value:M.value,label:M.label||`Termin ${M.value}`})),[G]),[ce,ne]=X.useState(null),[ye,je]=X.useState(null);X.useEffect(()=>{(async()=>{try{if(!i?.uid)return;const oe=Ct(Ke,"users",i.uid),Se=await Ti(oe),ke=Se.exists()?Se.data():null,wt=(Array.isArray(ke?.allowedTerms)?ke.allowedTerms:[]).map(it=>typeof it=="number"?it:parseInt(String(it),10)).filter(it=>!Number.isNaN(it));ne(wt),je(!!ke?.isSuperAdmin)}catch(oe){console.warn("Kunne ikke hente allowedTerms for innlogget admin:",oe),ne([]),je(!1)}})()},[i?.uid]);const xe=X.useMemo(()=>{if(ye===!0||ce===null)return fe;const M=new Set(ce);return fe.filter(oe=>M.has(oe.value))},[fe,ce,ye]),x=X.useMemo(()=>{if(ye)return null;const M=ce;return Array.isArray(M)&&M.length===1?Number(M[0]):null},[ye,ce]);X.useEffect(()=>{x!=null&&(m==="all"&&v(x),T==="all"&&S(x))},[x]),X.useEffect(()=>{(async()=>{try{const Se=(await Gn(kn(Ke,"terms"))).docs.map(ke=>{const Ye=ke.data(),wt=typeof Ye?.value=="number"?Ye.value:void 0;if(typeof wt!="number")return null;const it=typeof Ye?.label=="string"?Ye.label:"",rt=typeof Ye?.order=="number"?Ye.order:void 0;return{value:wt,label:it,order:rt}}).filter(Boolean);Se.sort((ke,Ye)=>(ke.order??ke.value)-(Ye.order??Ye.value)),z(Se)}catch(oe){console.warn("Kunne ikke laste terminer fra Firestore for admin-brukerpanel:",oe)}})()},[]);const[C,N]=X.useState(null),[V,D]=X.useState(null),[U,I]=X.useState(""),[Ve,Xe]=X.useState(""),[Q,le]=X.useState(""),[ge,me]=X.useState("teacher"),[De,k]=X.useState([]),[q,W]=X.useState(null),[ae,_e]=X.useState(null),[we,Re]=X.useState(""),[nt,de]=X.useState(""),[Pe,Qe]=X.useState(""),[mt,ie]=X.useState("student"),[ue,ve]=X.useState(null),[re,be]=X.useState(null),[Ce,Ie]=X.useState({}),Te=(M,oe)=>{if(M&&oe!=null)return Ce[M]?.[oe]},qe=async(M,oe)=>{if(!(!M||oe==null)&&Ce[M]?.[oe]===void 0)try{const Se=Ct(Ke,"users",M,"books",String(oe)),ke=await Ti(Se),Ye=ke.exists()?{approved:!!ke.data().approved,approvedAt:ke.data().approvedAt??null}:{approved:!1,approvedAt:null};Ie(wt=>({...wt,[M]:{...wt[M]??{},[oe]:Ye}}))}catch(Se){console.error("Kunne ikke laste godkjenning for bok:",Se)}},zt=({uid:M,term:oe})=>{const Se=Te(M,oe);if(X.useEffect(()=>{Se===void 0&&qe(M,oe)},[M,oe,Se]),!Se)return b.jsx("span",{style:{color:"#9ca3af"},children:""});if(Se.approved){const ke=Se.approvedAt,Ye=ke?new Date(ke.toDate()).toLocaleString("nb-NO"):void 0;return b.jsx("span",{title:Ye,style:{color:"#16a34a",fontSize:"1rem"},children:""})}return b.jsx("span",{style:{color:"#9ca3af"},children:""})},[gt,_t]=X.useState(null),[In,xt]=X.useState(null),[ln,ze]=X.useState(""),[lt,Nn]=X.useState(""),[Yn,Pn]=X.useState(""),[$t,Vt]=X.useState("admin"),[tn,Et]=X.useState([]);X.useEffect(()=>{(async()=>{try{o(!0);const Se=(await Gn(kn(Ke,"users"))).docs.map(ke=>{const Ye=ke.data();return{docId:ke.id,email:Ye.email??"",displayName:Ye.name??Ye.displayName??Ye.email??"(uten navn)",role:Ye.role??"student",term:Ye.term??null,phone:Ye.phone??null,allowedTerms:Ye.allowedTerms??[]}});n(Se)}catch(oe){console.error("Feil ved lasting av brukere:",oe),n([])}finally{o(!1)}})()},[]);const oi=X.useMemo(()=>{const M=u.trim().toLowerCase();if(!M)return e;const oe=M.includes("@");return e.filter(Se=>{const ke=String(Se.displayName??"").toLowerCase(),Ye=String(Se.email??"").toLowerCase(),wt=oe?Ye:Ye.split("@")[0]??Ye,it=String(Se.phone??"").toLowerCase();return`${ke} ${wt} ${it}`.includes(M)})},[e,u]);let wn=oi.filter(M=>M.role==="teacher"),xn=oi.filter(M=>M.role==="student"),Jt=oi.filter(M=>M.role==="admin");const Er=(()=>{if(ye)return{teachers:wn,students:xn,admins:Jt};const M=ce;if(!(Array.isArray(M)&&M.length>0))return{teachers:wn,students:xn,admins:Jt};const Se=new Set(M),ke=wn.filter(it=>(it.allowedTerms??[]).some(rt=>Se.has(Number(rt)))),Ye=xn.filter(it=>it.term!=null&&Se.has(Number(it.term)));return{teachers:ke,students:Ye,admins:Jt}})();if(wn=Er.teachers,xn=Er.students,Jt=Er.admins,m!=="all"){const M=m;wn=wn.filter(oe=>(oe.allowedTerms??[]).includes(M))}if(T!=="all"){const M=T;xn=xn.filter(oe=>oe.term===M)}if(A!=="all"){const M=A;Jt=Jt.filter(oe=>(oe.allowedTerms??[]).includes(M))}wn=wn.slice(0,50),xn=xn.slice(0,50),Jt=Jt.slice(0,50);const Ft=()=>{N("create"),D(null),I(""),Xe(""),le(""),me("teacher"),k(x!=null?[x]:[])},un=async()=>{const M=Ve.trim(),oe=U.trim(),Se=Q.trim();if(!M){Be.error("E-post m fylles ut for  opprette lrer.");return}if(!De||De.length===0){Be.error("Velg minst n termin lreren kan registrere for.");return}try{const ke=Om(),wt=(await dh(xm,M,ke)).user.uid,it={uid:wt,email:M,displayName:oe||M,name:oe||M,role:"teacher",term:null,phone:Se||null,allowedTerms:De};await Pa(Ct(Ke,"users",wt),it,{merge:!0}),n(rt=>{const Bt=[{docId:wt,email:M,displayName:it.displayName,role:"teacher",term:null,phone:Se||null,allowedTerms:[...De]},...rt];return Bt.sort((hn,Kt)=>hn.displayName.localeCompare(Kt.displayName,"nb-NO",{sensitivity:"base"})),Bt}),N(null),D(null),Be.success("Ny lrer opprettet",{description:`Epost: ${M}
Midlertidig passord: ${ke}
Gi passordet videre og be om passordbytte etter frste innlogging.`,duration:15e3})}catch(ke){if(console.error("Feil ved oppretting av lrer:",ke),ke?.code==="auth/email-already-in-use")try{const Ye=Dr(kn(Ke,"users"),er("email","==",M)),wt=await Gn(Ye);if(wt.empty){Be.error("Eposten finnes allerede i Auth, men fant ingen bruker i Firestore. Kontakt administrator.");return}const it=wt.docs[0],rt=it.data(),Bt=Array.isArray(rt?.allowedTerms)?rt.allowedTerms.map(Dt=>typeof Dt=="number"?Dt:parseInt(String(Dt),10)).filter(Dt=>!Number.isNaN(Dt)):[],hn=new Set([...Bt,...De]),Kt=Array.from(hn);await Vn(Ct(Ke,"users",it.id),{role:"teacher",allowedTerms:Kt,displayName:oe||rt?.displayName||rt?.name||M,name:oe||rt?.name||rt?.displayName||M,phone:Se||rt?.phone||null}),n(Dt=>{const Un=Dt.findIndex(rr=>rr.docId===it.id),Ht={docId:it.id,email:M,displayName:oe||(rt?.displayName??rt?.name??M),role:"teacher",term:null,phone:Se||rt?.phone||null,allowedTerms:Kt};if(Un>=0){const rr=Dt.slice();return rr[Un]={...rr[Un],...Ht},rr}const $n=[Ht,...Dt];return $n.sort((rr,kr)=>(rr.displayName??"").localeCompare(kr.displayName??"","nb-NO",{sensitivity:"base"})),$n}),N(null),D(null),Be.success("Eksisterende bruker oppdatert som lrer og tildelt valgte terminer.")}catch(Ye){console.error("Kunne ikke oppdatere eksisterende lrer:",Ye),Be.error("Kunne ikke oppdatere eksisterende bruker med nye terminer.")}else Be.error("Kunne ikke opprette lrer. Se console for mer info.")}},ar=M=>{N("edit"),D(M),I(M.displayName),Xe(M.email),le(M.phone??""),me(M.role),k(M.allowedTerms??[])},Oe=async()=>{if(!V)return;const M=V.docId;try{if(Ve.trim()&&Ve.trim()!==(V.email||""))try{const Se=Dm(void 0,"europe-west1");await Mm(Se,"adminUpdateUserEmail")({uid:M,newEmail:Ve.trim()})}catch(Se){console.error("adminUpdateUserEmail failed",Se),Be.error("Kunne ikke oppdatere lrerens epost i Auth. Endringen er avbrutt. Kontroller at Cloud Function 'adminUpdateUserEmail' er deployet og at du har tilgang.");return}const oe=Ct(Ke,"users",M);await Vn(oe,{displayName:U,email:Ve,phone:Q||null,role:ge,allowedTerms:De}),n(Se=>Se.map(ke=>ke.docId===M?{...ke,displayName:U,email:Ve,phone:Q||null,role:ge,allowedTerms:[...De]}:ke)),N(null),D(null)}catch(oe){console.error("Feil ved lagring av lrer:",oe),Be.error("Kunne ikke lagre endringer for lrer.")}},yt=()=>{N(null),D(null)},St=M=>{k(oe=>oe.includes(M)?oe.filter(Se=>Se!==M):[...oe,M])},Wt=()=>{W("create"),_e(null),Re(""),de(""),Qe(""),ie("student"),ve(x??null)},cn=async()=>{const M=nt.trim(),oe=we.trim(),Se=Pe.trim();if(!oe){Be.error("Navn m fylles ut for  opprette student.");return}if(!M){Be.error("E-post m fylles ut for  opprette student.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(M)){Be.error("Ugyldig epost.");return}if(ue==null){Be.error("Velg termin studenten tilhrer.");return}try{const Ye=Om(),it=(await dh(xm,M,Ye)).user.uid,rt={uid:it,email:M,displayName:oe||M,name:oe||M,role:"student",term:ue,phone:Se||null,allowedTerms:[]};await Pa(Ct(Ke,"users",it),rt,{merge:!0}),n(Bt=>{const hn=[{docId:it,email:M,displayName:rt.displayName,role:"student",term:ue,phone:Se||null,allowedTerms:[]},...Bt];return hn.sort((Kt,Dt)=>Kt.displayName.localeCompare(Dt.displayName,"nb-NO",{sensitivity:"base"})),hn}),W(null),_e(null),Be.success(`Ny student med epost ${M} er opprettet.`,{description:"Be studenten trykke Glemt passord p innloggingssiden for  lage sitt eget passord.",duration:12e3})}catch(Ye){if(console.error("Feil ved oppretting av student:",Ye),Ye?.code==="auth/invalid-email")Be.error("Ugyldig epost.");else if(Ye?.code==="auth/email-already-in-use")try{const wt=Dr(kn(Ke,"users"),er("email","==",M)),it=await Gn(wt);if(it.empty){Be.error("Eposten finnes allerede i Auth, men fant ingen bruker i Firestore. Kontakt administrator.");return}const rt=it.docs[0],Bt=rt.data();await Vn(Ct(Ke,"users",rt.id),{role:"student",term:ue,displayName:oe||Bt?.displayName||Bt?.name||M,name:oe||Bt?.name||Bt?.displayName||M,phone:Se||Bt?.phone||null}),n(Kt=>{const Dt=Kt.findIndex($n=>$n.docId===rt.id),Un={docId:rt.id,email:M,displayName:oe||(Bt?.displayName??Bt?.name??M),role:"student",term:ue,phone:Se||Bt?.phone||null,allowedTerms:Array.isArray(Bt?.allowedTerms)?Bt.allowedTerms:[]};if(Dt>=0){const $n=Kt.slice();return $n[Dt]={...$n[Dt],...Un},$n}const Ht=[Un,...Kt];return Ht.sort(($n,rr)=>($n.displayName??"").localeCompare(rr.displayName??"","nb-NO",{sensitivity:"base"})),Ht}),W(null),_e(null);const hn=iD(fe,ue);Be.success(`Eksisterende bruker oppdatert til termin ${hn}.`)}catch(wt){console.error("Kunne ikke oppdatere eksisterende student:",wt),Be.error("Kunne ikke oppdatere eksisterende bruker med valgt termin.")}else Ye?.code==="auth/missing-email"?Be.error("Epost mangler."):Be.error("Kunne ikke opprette student. Prv igjen senere.")}},or=M=>{W("edit"),_e(M),Re(M.displayName),de(M.email),Qe(M.phone??""),ie(M.role),ve(M.term??null)},Ln=async()=>{if(!ae)return;const M=ae.docId;try{if(nt.trim()&&nt.trim()!==(ae.email||""))try{const Se=Dm(void 0,"europe-west1");await Mm(Se,"adminUpdateUserEmail")({uid:M,newEmail:nt.trim()})}catch(Se){console.error("adminUpdateUserEmail failed",Se),Be.error("Kunne ikke oppdatere studentens epost i Auth. Endringen er avbrutt. Kontroller at Cloud Function 'adminUpdateUserEmail' er deployet og at du har tilgang.");return}const oe=Ct(Ke,"users",M);await Vn(oe,{displayName:we,email:nt,phone:Pe||null,role:mt,term:ue??null}),n(Se=>Se.map(ke=>ke.docId===M?{...ke,displayName:we,email:nt,phone:Pe||null,role:mt,term:ue??null}:ke)),W(null),_e(null)}catch(oe){console.error("Feil ved lagring av student:",oe),Be.error("Kunne ikke lagre endringer for student.")}},An=()=>{W(null),_e(null)},Xn=()=>{_t("create"),xt(null),ze(""),Nn(""),Pn(""),Vt("admin"),Et([])},Mi=async()=>{const M=lt.trim(),oe=ln.trim(),Se=Yn.trim();if(!M){Be.error("E-post m fylles ut for  opprette admin.");return}if(!Se){Be.error("Mobilnummer m fylles ut for  opprette admin.");return}if(!tn||tn.length===0){Be.error("Velg minst n termin administratoren skal ha tilgang til.");return}try{const ke=Om(),wt=(await dh(xm,M,ke)).user.uid,it={uid:wt,email:M,displayName:oe||M,name:oe||M,role:"admin",term:null,phone:Se,allowedTerms:tn};await Pa(Ct(Ke,"users",wt),it,{merge:!0}),n(rt=>{const Bt=[{docId:wt,email:M,displayName:it.displayName,role:"admin",term:null,phone:Se,allowedTerms:[...tn]},...rt];return Bt.sort((hn,Kt)=>hn.displayName.localeCompare(Kt.displayName,"nb-NO",{sensitivity:"base"})),Bt}),_t(null),xt(null),Be.success("Ny admin opprettet",{description:`Epost: ${M}
Midlertidig passord: ${ke}
Gi passordet videre og be om passordbytte etter frste innlogging.`,duration:15e3})}catch(ke){console.error("Feil ved oppretting av admin:",ke),ke?.code==="auth/email-already-in-use"?Be.error("E-posten er allerede i bruk i Auth. Bruk en annen eller koble eksisterende bruker."):Be.error("Kunne ikke opprette admin. Se console for mer info.")}},Yr=M=>{_t("edit"),xt(M),ze(M.displayName),Nn(M.email),Pn(M.phone??""),Vt(M.role),Et(M.allowedTerms??[])},Qa=async()=>{if(!In)return;const M=In.docId;try{if(lt.trim()&&lt.trim()!==(In.email||""))try{const Se=Dm(void 0,"europe-west1");await Mm(Se,"adminUpdateUserEmail")({uid:M,newEmail:lt.trim()})}catch(Se){console.error("adminUpdateUserEmail failed",Se),Be.error("Kunne ikke oppdatere adminepost i Auth. Endringen er avbrutt. Kontroller at Cloud Function 'adminUpdateUserEmail' er deployet og at du har tilgang.");return}const oe=Ct(Ke,"users",M);await Vn(oe,{displayName:ln,email:lt,phone:Yn||null,role:$t,allowedTerms:tn}),n(Se=>Se.map(ke=>ke.docId===M?{...ke,displayName:ln,email:lt,phone:Yn||null,role:$t,allowedTerms:[...tn]}:ke)),_t(null),xt(null)}catch(oe){console.error("Feil ved lagring av admin:",oe),Be.error("Kunne ikke lagre endringer for admin.")}},Tr=()=>{_t(null),xt(null)},br=M=>{Et(oe=>oe.includes(M)?oe.filter(Se=>Se!==M):[...oe,M])};return b.jsxs("div",{className:"",children:[b.jsxs("div",{className:"filter-buttons",children:[b.jsx("button",{type:"button",onClick:()=>p("students"),className:` ${g==="students"?"button button-small button-yellow thin-border round-corners-whole25":"button button-small button-colorless button-opacity thin-border round-corners-whole25"}`,children:"Studenter"}),b.jsx("button",{type:"button",onClick:()=>p("teachers"),className:`${g==="teachers"?"button button-small button-yellow thin-border round-corners-whole25":"button button-small button-colorless button-opacity thin-border round-corners-whole25"}`,children:"Lrere"}),b.jsx("button",{type:"button",onClick:()=>p("admins"),className:`${g==="admins"?"button button-small button-yellow thin-border round-corners-whole25":"button button-small button-colorless button-opacity thin-border round-corners-whole25"}`,children:"Administorerer"})]}),b.jsx("h2",{style:{margin:"0.5rem 0 0.75rem"},children:g==="students"?"Studenter":g==="teachers"?"Lrere":"Administorerer"}),b.jsxs("div",{className:"flex-row-center",children:[b.jsx("input",{type:"text",placeholder:g==="students"?"Sk etter student":g==="teachers"?"Sk etter lrer":"Sk etter administrator",value:u,onChange:M=>d(M.target.value),className:"input-half field-height-50 thin-border round-corners-whole25"}),b.jsxs("button",{type:"button",onClick:g==="students"?Wt:g==="teachers"?Ft:Xn,className:"button button-small button-colorless boldFont",children:[b.jsx("span",{children:"+"}),"Oprett ny"," ",g==="students"?"student":g==="teachers"?"lrer":"administrator"]})]}),s?b.jsx(dp,{}):b.jsxs(b.Fragment,{children:[g==="teachers"&&b.jsxs("div",{style:{marginBottom:"1.2rem"},children:[b.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",gap:"0.5rem",marginBottom:"0.4rem"},children:b.jsx("div",{style:{fontSize:"0.8rem"},children:b.jsx("label",{children:b.jsxs("select",{value:m==="all"?"":m,onChange:M=>{const oe=M.target.value;v(oe===""?"all":parseInt(oe,10))},style:{padding:"0.2rem 0.4rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.8rem"},children:[b.jsx("option",{value:"",children:"Alle terminer"}),xe.map(M=>b.jsx("option",{value:M.value,children:M.label},M.value))]})})})}),b.jsxs("table",{className:"admin-table",children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{children:"Navn"}),b.jsx("th",{children:"E-post"}),b.jsx("th",{children:"Mobil"})]})}),b.jsx("tbody",{children:wn.length===0?b.jsx("tr",{children:b.jsx("td",{colSpan:3,className:"admin-table__empty",children:"Ingen lrere funnet."})}):wn.map(M=>b.jsxs("tr",{onClick:()=>ar(M),className:"admin-table__row--clickable",children:[b.jsx("td",{children:M.displayName}),b.jsx("td",{children:M.email}),b.jsx("td",{children:M.phone??""})]},M.docId))})]})]}),g==="students"&&b.jsxs("div",{style:{marginBottom:"1.2rem"},children:[b.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",gap:"0.5rem",marginBottom:"0.4rem"},children:b.jsx("div",{style:{fontSize:"0.8rem"},children:b.jsx("label",{children:b.jsxs("select",{value:T==="all"?"":T,onChange:M=>{const oe=M.target.value;S(oe===""?"all":parseInt(oe,10))},style:{padding:"0.2rem 0.4rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.8rem"},children:[b.jsx("option",{value:"",children:"Alle terminer"}),xe.map(M=>b.jsx("option",{value:M.value,children:M.label},M.value))]})})})}),xn.length===0?b.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280"},children:"Ingen studenter funnet."}):b.jsxs("table",{className:"admin-table",children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{children:"Navn"}),b.jsx("th",{children:"Termin"}),b.jsx("th",{children:"Status"})]})}),b.jsx("tbody",{children:xn.map(M=>b.jsxs("tr",{onClick:()=>or(M),className:"admin-table__row--clickable",children:[b.jsx("td",{children:M.displayName}),b.jsx("td",{children:M.term!=null&&M.term!==void 0?Ks(fe,M.term):"Ingen"}),b.jsx("td",{onMouseEnter:oe=>{qe(M.docId,M.term??null)},children:M.term==null?"":b.jsx(zt,{uid:M.docId,term:M.term})})]},M.docId))})]})]}),g==="admins"&&b.jsxs("div",{style:{marginBottom:"1.2rem"},children:[b.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",gap:"0.5rem",marginBottom:"0.4rem"},children:b.jsx("div",{style:{fontSize:"0.8rem"},children:b.jsx("label",{children:b.jsxs("select",{value:A==="all"?"":A,onChange:M=>{const oe=M.target.value;L(oe===""?"all":parseInt(oe,10))},style:{padding:"0.2rem 0.4rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.8rem"},children:[b.jsx("option",{value:"",children:"Alle terminer"}),fe.map(M=>b.jsx("option",{value:M.value,children:M.label},M.value))]})})})}),Jt.length===0?b.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280"},children:"Ingen administratorer funnet."}):b.jsxs("table",{className:"admin-table",children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{children:"Navn"}),b.jsx("th",{children:"E-post"}),b.jsx("th",{children:"Mobil"})]})}),b.jsx("tbody",{children:Jt.map(M=>b.jsxs("tr",{onClick:()=>Yr(M),className:"admin-table__row--clickable",children:[b.jsx("td",{children:M.displayName}),b.jsx("td",{children:M.email}),b.jsx("td",{children:M.phone??""})]},M.docId))})]})]})]}),C&&b.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:b.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[b.jsx("h3",{style:{marginTop:0,marginBottom:"0.5rem"},children:C==="create"?"Ny lrer":"Rediger lrer"}),b.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.75rem"},children:[b.jsxs("label",{style:{fontSize:"0.8rem"},children:["Navn",b.jsx("input",{type:"text",value:U,onChange:M=>I(M.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),b.jsxs("label",{style:{fontSize:"0.8rem"},children:["E-post",b.jsx("input",{type:"email",value:Ve,onChange:M=>Xe(M.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),b.jsxs("label",{style:{fontSize:"0.8rem"},children:["Mobil",b.jsx("input",{type:"tel",value:Q,onChange:M=>le(M.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),C==="edit"&&b.jsxs("label",{style:{fontSize:"0.8rem"},children:["Rolle",b.jsxs("select",{value:ge,onChange:M=>me(M.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"},children:[b.jsx("option",{value:"teacher",children:"Lrer"}),b.jsx("option",{value:"student",children:"Student"}),b.jsx("option",{value:"admin",children:"Admin"})]})]}),b.jsxs("div",{style:{fontSize:"0.8rem"},children:[b.jsx("div",{style:{marginBottom:"0.25rem"},children:"Termin(er) lreren kan registrere for:"}),b.jsx("div",{style:{maxHeight:"150px",overflowY:"auto",borderRadius:"0.5rem",border:"1px solid #e5e7eb",padding:"0.35rem 0.45rem"},children:(xe.length===0?[]:xe).map(M=>b.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.35rem",fontSize:"0.8rem",padding:"0.15rem 0"},children:[b.jsx("input",{type:"checkbox",checked:De.includes(M.value),onChange:()=>St(M.value)}),b.jsx("span",{children:M.label})]},M.value))})]})]}),b.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"0.5rem"},children:[b.jsx("button",{type:"button",onClick:yt,className:"button button-white thin-border button-small round-corners-whole25",children:"Avbryt"}),b.jsx("button",{className:"button button-black thin-border button-small round-corners-whole25",type:"button",onClick:C==="create"?un:Oe,children:C==="create"?"Opprett lrer":"Lagre"})]})]})}),q&&b.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:b.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[b.jsx("h3",{style:{marginTop:0,marginBottom:"0.5rem"},children:q==="create"?"Ny student":"Rediger student"}),b.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.75rem"},children:[b.jsxs("label",{style:{fontSize:"0.8rem"},children:["Navn",b.jsx("input",{type:"text",value:we,onChange:M=>Re(M.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),b.jsxs("label",{style:{fontSize:"0.8rem"},children:["E-post",b.jsx("input",{type:"email",value:nt,onChange:M=>de(M.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),b.jsxs("label",{style:{fontSize:"0.8rem"},children:["Mobil",b.jsx("input",{type:"tel",value:Pe,onChange:M=>Qe(M.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),q==="edit"&&b.jsxs("label",{style:{fontSize:"0.8rem"},children:["Rolle",b.jsxs("select",{value:mt,onChange:M=>ie(M.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"},children:[b.jsx("option",{value:"student",children:"Student"}),b.jsx("option",{value:"teacher",children:"Lrer"}),b.jsx("option",{value:"admin",children:"Admin"})]})]}),b.jsxs("label",{style:{fontSize:"0.8rem"},children:["Termin",b.jsxs("select",{value:ue??"",onChange:M=>{const oe=M.target.value;ve(oe===""?null:parseInt(oe,10))},style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"},children:[b.jsx("option",{value:"",children:"Ingen"}),(xe.length===0?[]:xe).map(M=>b.jsx("option",{value:M.value,children:M.label},M.value))]})]})]}),b.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"0.5rem"},children:[b.jsx("button",{type:"button",onClick:An,className:"button button-white thin-border button-small round-corners-whole25",children:"Avbryt"}),b.jsx("button",{type:"button",onClick:q==="create"?cn:Ln,className:"button button-black thin-border button-small round-corners-whole25",children:q==="create"?"Opprett student":"Lagre"})]})]})}),gt&&b.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15,23,42,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:b.jsxs("div",{style:{width:"100%",maxWidth:"420px",backgroundColor:"#ffffff",borderRadius:"1rem",padding:"1rem 1.25rem",boxShadow:"0 20px 40px rgba(15,23,42,0.25)"},children:[b.jsx("h3",{style:{marginTop:0,marginBottom:"0.5rem"},children:gt==="create"?"Ny admin":"Rediger admin"}),b.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.75rem"},children:[b.jsxs("label",{style:{fontSize:"0.8rem"},children:["Navn",b.jsx("input",{type:"text",value:ln,onChange:M=>ze(M.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),b.jsxs("label",{style:{fontSize:"0.8rem"},children:["E-post",b.jsx("input",{type:"email",value:lt,onChange:M=>Nn(M.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),b.jsxs("label",{style:{fontSize:"0.8rem"},children:["Mobil",b.jsx("input",{type:"tel",value:Yn,onChange:M=>Pn(M.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"}})]}),gt==="edit"&&b.jsxs("label",{style:{fontSize:"0.8rem"},children:["Rolle",b.jsxs("select",{value:$t,onChange:M=>Vt(M.target.value),style:{width:"100%",padding:"0.3rem 0.45rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",fontSize:"0.85rem",marginTop:"0.15rem"},children:[b.jsx("option",{value:"admin",children:"Admin"}),b.jsx("option",{value:"teacher",children:"Lrer"}),b.jsx("option",{value:"student",children:"Student"})]})]}),b.jsxs("div",{style:{fontSize:"0.8rem"},children:[b.jsx("div",{style:{marginBottom:"0.25rem"},children:"Termin(er) admin kan administrere:"}),b.jsx("div",{style:{maxHeight:"150px",overflowY:"auto",borderRadius:"0.5rem",border:"1px solid #e5e7eb",padding:"0.35rem 0.45rem"},children:xe.length===0?b.jsx("div",{style:{color:"#6b7280"},children:"Ingen terminer tilgjengelig"}):xe.map(M=>b.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.35rem",fontSize:"0.8rem",padding:"0.15rem 0"},children:[b.jsx("input",{type:"checkbox",checked:tn.includes(M.value),onChange:()=>br(M.value)}),b.jsx("span",{children:M.label})]},M.value))})]})]}),b.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"0.5rem"},children:[b.jsx("button",{type:"button",onClick:Tr,className:"button button-white thin-border button-small round-corners-whole25",children:"Avbryt"}),b.jsx("button",{type:"button",onClick:gt==="create"?Mi:Qa,className:"button button-black thin-border button-small round-corners-whole25",children:gt==="create"?"Opprett admin":"Lagre"})]})]})})]})},qD=()=>{const{user:i,loading:e}=Lu(),[n,s]=X.useState("setup"),[o,u]=X.useState(!1);return e?b.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:b.jsx(dp,{})}):!i||i.role!=="admin"?b.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"1.5rem"},children:b.jsxs("div",{className:"page-card page-card--admin",children:[b.jsx("h2",{children:"Ingen tilgang"}),b.jsx("p",{children:"Du m vre logget inn som administrator for  se denne siden."})]})}):b.jsx(b.Fragment,{children:b.jsxs("div",{className:"admin-page",children:[b.jsxs("div",{id:"users",className:"",children:[b.jsx("h1",{children:"Administrer brukere"}),b.jsx("p",{children:"Her kan du som administrator legge til, fjerne og redigere studenter lrere og andre administratorer."}),b.jsx(BD,{})]}),b.jsxs("div",{id:"attendance-books",className:"visually-hidden",children:[b.jsx("h1",{children:"Administrer oppmtebker"}),b.jsx("p",{children:"Her kan du som administrator legge til, fjerne og redigere gruppetimer for de ulike semesterne. "})]}),b.jsxs("div",{id:"statistics",className:"visually-hidden",children:[b.jsx("h1",{children:"Se statistikk"}),b.jsx("p",{children:"Her kan du som overordnet administrator se statisikk om oppmteboka, timer og registereringer samt nettside info"})]}),b.jsx("div",{}),o&&b.jsx(dg,{uid:i.uid,role:i.role,email:i.email,displayName:i.displayName,onClose:()=>u(!1)})]})})};function xE(){return b.jsx("footer",{children:b.jsxs("div",{className:"container",children:[b.jsxs("div",{className:"row row1",children:[b.jsx("h2",{children:"Vi lytter til dere!"}),b.jsx("p",{children:"Traskende rundt i sykehuskorridorene med en oppmtebok du alltid er redd for  miste eller sle kaffekoppen p, begynner man  fundere p om det gr an  gjre livet litt enklere S hvorfor ikke lage en digital oppmtebok du aldri glemmer hjemme, som er superrask for lrerne og sparer fakultetet for over 3000(!) papirutgaver i ret?"}),b.jsx("br",{}),b.jsx("p",{children:"Miljvennlig, effektivt og bedre for studentene. Velkommen til Oppmteboka  skapt mellom uttrykning p vakt eller halvsovende p sofaen i de sene nattestimer. Send oss en melding om du har noe tips til hva vi br gjre!"})]}),b.jsxs("div",{className:"row row2",children:[b.jsx("img",{src:"/logo.svg",alt:"Oppmteboka logo"}),b.jsx("p",{className:"normalFont",children:b.jsx("a",{className:"link",href:"mailto:hei@sablateknisk.no?subject=Tilbakelding",children:"Gi tilbakemelding"})}),b.jsx("p",{children:"hei@sablateknisk.no"}),b.jsx("br",{}),b.jsxs("p",{className:"smallText",children:["Nettisden er utviklet av",b.jsx("br",{})," Vetle Mrland og ge Frivoll"]})]})]})})}function FD({user:i}){const{logout:e}=Lu(),[n,s]=X.useState(!1);return b.jsxs("header",{children:[b.jsxs("div",{className:`header-container ${i.role==="admin"?"admin":""}`,children:[b.jsxs("div",{className:"left-header",children:[b.jsx("img",{src:"/favicon.svg",alt:"Logo",className:""}),i.role==="admin"&&b.jsxs("nav",{className:"header-nav",children:[b.jsx("button",{id:"admin-users-button",className:"button button-colorless button-small boldFont",onClick:()=>{document.getElementById("admin-attendence-button")?.classList.remove("boldFont"),document.getElementById("admin-users-button")?.classList.add("boldFont"),document.getElementById("admin-stats-button")?.classList.remove("boldFont"),document.getElementById("users")?.classList.remove("visually-hidden"),document.getElementById("attendance-books")?.classList.add("visually-hidden"),document.getElementById("statistics")?.classList.add("visually-hidden")},children:"Brukere"}),b.jsx("button",{id:"admin-attendence-button",className:"button button-colorless button-small",onClick:()=>{document.getElementById("admin-attendence-button")?.classList.add("boldFont"),document.getElementById("admin-users-button")?.classList.remove("boldFont"),document.getElementById("admin-stats-button")?.classList.remove("boldFont"),document.getElementById("users")?.classList.add("visually-hidden"),document.getElementById("attendance-books")?.classList.remove("visually-hidden"),document.getElementById("statistics")?.classList.add("visually-hidden")},children:"Oppmtebker"}),b.jsx("button",{id:"admin-stats-button",className:"button button-colorless button-small",onClick:()=>{document.getElementById("admin-attendence-button")?.classList.remove("boldFont"),document.getElementById("admin-users-button")?.classList.remove("boldFont"),document.getElementById("admin-stats-button")?.classList.add("boldFont"),document.getElementById("users")?.classList.add("visually-hidden"),document.getElementById("attendance-books")?.classList.add("visually-hidden"),document.getElementById("statistics")?.classList.remove("visually-hidden")},children:"Statistikk"})]})]}),b.jsxs("div",{className:"header-buttons",children:[b.jsx("button",{className:"button full-border button-colorless boldFont round-corners-whole25",type:"button",onClick:()=>s(!0),children:"Min profil"}),b.jsx("button",{className:"button full-border button-black boldFont round-corners-whole25",type:"button",onClick:e,children:"Logg ut"})]})]}),b.jsx("div",{children:n&&b.jsx(dg,{uid:i.uid,role:i.role,email:i.email,displayName:i.displayName,onClose:()=>s(!1)})})]})}function HD(){const{user:i,login:e}=Lu(),[n,s]=X.useState(""),[o,u]=X.useState(""),[d,g]=X.useState(null),[p,m]=X.useState(null),[v,T]=X.useState(!1),[S,A]=X.useState(!1),L=X.useRef(null),G=X.useRef(null);X.useEffect(()=>{if(!d)return;const ce=setTimeout(()=>g(null),3e3);return()=>clearTimeout(ce)},[d]),X.useEffect(()=>{if(!p)return;const ce=setTimeout(()=>m(null),3e3);return()=>clearTimeout(ce)},[p]),X.useEffect(()=>{if(i)try{window.scrollTo({top:0,behavior:"smooth"})}catch{window.scrollTo(0,0)}},[i]);const z=async ce=>{if(ce.preventDefault(),g(null),!n||!o){g("Fyll inn bde e-post og passord.");return}T(!0);try{await e(n.trim(),o)}catch(ne){console.error(ne);let ye="Kunne ikke logge inn.";ne?.code==="auth/user-not-found"?ye="Bruker finnes ikke.":ne?.code==="auth/wrong-password"?ye="Feil passord.":ne?.code==="auth/email-already-in-use"?ye="E-postadressen er allerede registrert.":ne?.code==="auth/weak-password"&&(ye="Passordet er for svakt (min. 6 tegn)."),g(ye)}finally{T(!1)}},fe=async()=>{const ce=n.trim();if(!ce){g("Skriv inn epostadressen din frst.");return}A(!0);try{await HR(Gs,ce),m("Sendte epost for tilbakestilling av passord.")}catch(ne){console.error(ne);let ye="Kunne ikke sende epost for tilbakestilling.";ne?.code==="auth/invalid-email"?ye="Ugyldig epostadresse.":ne?.code==="auth/user-not-found"&&(ye="Fant ingen bruker for denne epostadressen."),g(ye)}finally{A(!1)}};return i?b.jsxs(b.Fragment,{children:[b.jsx(FD,{user:i}),b.jsx("div",{id:"main",className:`${i.role==="admin"?"admin":""}`,children:i.role==="admin"?b.jsx(qD,{user:i}):i.role==="teacher"?b.jsx(ED,{user:i}):b.jsx(aD,{user:i})}),b.jsx(xE,{})]}):b.jsxs(b.Fragment,{children:[b.jsx("div",{id:"main",children:b.jsxs("div",{className:"login-card-container",children:[b.jsx("div",{id:"loginMan",children:b.jsx("img",{src:"/login-man.svg",alt:"Logo",className:""})}),b.jsxs("div",{id:"login-card",className:"card round-corners-whole100 full-border",children:[b.jsx("h1",{className:"boldFont",children:"Velkommen tilbake"}),b.jsxs("form",{onSubmit:z,children:[b.jsxs("div",{className:"input-group",children:[b.jsx("label",{className:"input-label thinFont",children:"Mobil / epost"}),b.jsx("input",{className:"input-field round-corners-whole50 field-height-100",type:"email",value:n,onChange:ce=>s(ce.target.value),ref:L,onKeyDown:ce=>{ce.key==="Enter"&&(ce.preventDefault(),G.current?.focus())},enterKeyHint:"next"})]}),b.jsxs("div",{className:"input-group",children:[b.jsx("label",{className:"input-label thinFont",children:"Passord"}),b.jsx("input",{className:"input-field round-corners-whole50 field-height-100",type:"password",value:o,onChange:ce=>u(ce.target.value),ref:G,enterKeyHint:"go"})]}),b.jsx("button",{type:"submit",disabled:v,className:"button button-fullwidth field-height-100 round-corners-whole50 button-black boldFont",children:v?"Logger inn...":"Logg inn"}),b.jsx("button",{type:"button",onClick:fe,disabled:S,className:"button button-colorless boldFont fontUnderline",children:S?"Sender epost...":"Glemt passord"}),b.jsxs("p",{className:"errorTxt",children:[b.jsx("br",{}),d]}),b.jsxs("p",{className:"successTxt",children:[b.jsx("br",{}),p]})]})]})]})}),b.jsx(xE,{})]})}sw.createRoot(document.getElementById("root")).render(b.jsxs(he.StrictMode,{children:[b.jsx(HD,{}),b.jsx($x,{richColors:!0,position:"top-center"})]}));export{GD as c,cp as g};
